Compiled from "XmlConfigurationStrategy.java"
final class org.sejda.core.context.XmlConfigurationStrategy implements org.sejda.core.context.ConfigurationStrategy {
  private static final java.lang.String ROOT_NODE;

  private static final java.lang.String VALIDATION_ATTRIBUTENAME;

  private static final java.lang.String IGNORE_XML_CONFIG_VALIDATION_ATTRIBUTENAME;

  private static final java.lang.String NOTIFICATION_XPATH;

  private static final java.lang.String NOTIFICATION_ASYNC_ATTRIBUTENAME;

  private static final java.lang.String TASKS_XPATH;

  private static final java.lang.String TASK_PARAM_ATTRIBUTENAME;

  private static final java.lang.String TASK_VALUE_ATTRIBUTENAME;

  private static final java.lang.String DEFAULT_SEJDA_CONFIG;

  private javax.xml.xpath.XPathFactory xpathFactory;

  private java.lang.Class<? extends org.sejda.core.notification.strategy.NotificationStrategy> notificationStrategy;

  private java.util.Map<java.lang.Class<? extends org.sejda.model.parameter.base.TaskParameters>, java.lang.Class<? extends org.sejda.model.task.Task>> tasks;

  private boolean validation;

  private boolean ignoreXmlConfig;

  private org.sejda.core.context.XmlConfigurationStrategy(java.io.InputStream) throws org.sejda.model.exception.ConfigurationException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method javax/xml/xpath/XPathFactory.newInstance:()Ljavax/xml/xpath/XPathFactory;
       8: putfield      #3                  // Field xpathFactory:Ljavax/xml/xpath/XPathFactory;
      11: aload_0
      12: iconst_0
      13: putfield      #4                  // Field validation:Z
      16: aload_0
      17: iconst_1
      18: putfield      #5                  // Field ignoreXmlConfig:Z
      21: aload_0
      22: aload_1
      23: invokespecial #6                  // Method initializeFromInputStream:(Ljava/io/InputStream;)V
      26: return

  private void initializeFromInputStream(java.io.InputStream) throws org.sejda.model.exception.ConfigurationException;
    Code:
       0: invokestatic  #7                  // Method org/sejda/common/XMLUtils.getDocumentBuilderFactory:()Ljavax/xml/parsers/DocumentBuilderFactory;
       3: astore_2
       4: aload_0
       5: aload_2
       6: invokespecial #8                  // Method initializeSchemaValidation:(Ljavax/xml/parsers/DocumentBuilderFactory;)V
       9: aload_2
      10: invokevirtual #9                  // Method javax/xml/parsers/DocumentBuilderFactory.newDocumentBuilder:()Ljavax/xml/parsers/DocumentBuilder;
      13: astore_3
      14: aload_3
      15: getstatic     #10                 // Field org/sejda/common/XMLUtils.ERROR_HANDLER:Lorg/xml/sax/ErrorHandler;
      18: invokevirtual #11                 // Method javax/xml/parsers/DocumentBuilder.setErrorHandler:(Lorg/xml/sax/ErrorHandler;)V
      21: aload_3
      22: aload_1
      23: invokevirtual #12                 // Method javax/xml/parsers/DocumentBuilder.parse:(Ljava/io/InputStream;)Lorg/w3c/dom/Document;
      26: astore        4
      28: aload_0
      29: aload_0
      30: aload         4
      32: invokespecial #13                 // Method getNotificationStrategy:(Lorg/w3c/dom/Document;)Ljava/lang/Class;
      35: putfield      #14                 // Field notificationStrategy:Ljava/lang/Class;
      38: aload_0
      39: aload_0
      40: aload         4
      42: invokespecial #15                 // Method getTasksMap:(Lorg/w3c/dom/Document;)Ljava/util/Map;
      45: putfield      #16                 // Field tasks:Ljava/util/Map;
      48: aload_0
      49: aload_0
      50: aload         4
      52: invokespecial #17                 // Method getValidation:(Lorg/w3c/dom/Document;)Z
      55: putfield      #4                  // Field validation:Z
      58: aload_0
      59: aload_0
      60: aload         4
      62: invokespecial #18                 // Method getIgnoreXmlConfig:(Lorg/w3c/dom/Document;)Z
      65: putfield      #5                  // Field ignoreXmlConfig:Z
      68: goto          93
      71: astore_2
      72: new           #21                 // class org/sejda/model/exception/ConfigurationException
      75: dup
      76: aload_2
      77: invokespecial #22                 // Method org/sejda/model/exception/ConfigurationException."<init>":(Ljava/lang/Throwable;)V
      80: athrow
      81: astore_2
      82: new           #21                 // class org/sejda/model/exception/ConfigurationException
      85: dup
      86: ldc           #25                 // String Unable to create DocumentBuilder.
      88: aload_2
      89: invokespecial #26                 // Method org/sejda/model/exception/ConfigurationException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      92: athrow
      93: return
    Exception table:
       from    to  target type
           0    68    71   Class java/io/IOException
           0    68    71   Class org/xml/sax/SAXException
           0    68    81   Class javax/xml/parsers/ParserConfigurationException
           0    68    81   Class javax/xml/xpath/XPathExpressionException

  private void initializeSchemaValidation(javax.xml.parsers.DocumentBuilderFactory) throws org.xml.sax.SAXException;
    Code:
       0: ldc           #28                 // String sejda.perform.schema.validation
       2: invokestatic  #29                 // Method java/lang/Boolean.getBoolean:(Ljava/lang/String;)Z
       5: ifeq          52
       8: ldc           #31                 // String http://www.w3.org/2001/XMLSchema
      10: invokestatic  #32                 // Method javax/xml/validation/SchemaFactory.newInstance:(Ljava/lang/String;)Ljavax/xml/validation/SchemaFactory;
      13: astore_2
      14: aload_1
      15: aload_2
      16: iconst_1
      17: anewarray     #33                 // class javax/xml/transform/Source
      20: dup
      21: iconst_0
      22: new           #34                 // class javax/xml/transform/stream/StreamSource
      25: dup
      26: invokestatic  #35                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      29: invokevirtual #36                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      32: ldc           #38                 // String sejda.xsd
      34: invokevirtual #39                 // Method java/lang/ClassLoader.getResourceAsStream:(Ljava/lang/String;)Ljava/io/InputStream;
      37: invokespecial #40                 // Method javax/xml/transform/stream/StreamSource."<init>":(Ljava/io/InputStream;)V
      40: aastore
      41: invokevirtual #41                 // Method javax/xml/validation/SchemaFactory.newSchema:([Ljavax/xml/transform/Source;)Ljavax/xml/validation/Schema;
      44: invokevirtual #42                 // Method javax/xml/parsers/DocumentBuilderFactory.setSchema:(Ljavax/xml/validation/Schema;)V
      47: aload_1
      48: iconst_1
      49: invokevirtual #43                 // Method javax/xml/parsers/DocumentBuilderFactory.setNamespaceAware:(Z)V
      52: return

  public java.lang.Class<? extends org.sejda.core.notification.strategy.NotificationStrategy> getNotificationStrategy();
    Code:
       0: aload_0
       1: getfield      #14                 // Field notificationStrategy:Ljava/lang/Class;
       4: areturn

  public java.util.Map<java.lang.Class<? extends org.sejda.model.parameter.base.TaskParameters>, java.lang.Class<? extends org.sejda.model.task.Task>> getTasksMap();
    Code:
       0: aload_0
       1: getfield      #16                 // Field tasks:Ljava/util/Map;
       4: areturn

  public boolean isValidation();
    Code:
       0: aload_0
       1: getfield      #4                  // Field validation:Z
       4: ireturn

  public boolean isIgnoreXmlConfiguration();
    Code:
       0: aload_0
       1: getfield      #5                  // Field ignoreXmlConfig:Z
       4: ireturn

  private java.util.Map<java.lang.Class<? extends org.sejda.model.parameter.base.TaskParameters>, java.lang.Class<? extends org.sejda.model.task.Task>> getTasksMap(org.w3c.dom.Document) throws org.sejda.model.exception.ConfigurationException, javax.xml.xpath.XPathExpressionException;
    Code:
       0: new           #44                 // class java/util/HashMap
       3: dup
       4: invokespecial #45                 // Method java/util/HashMap."<init>":()V
       7: astore_2
       8: aload_0
       9: getfield      #3                  // Field xpathFactory:Ljavax/xml/xpath/XPathFactory;
      12: invokevirtual #46                 // Method javax/xml/xpath/XPathFactory.newXPath:()Ljavax/xml/xpath/XPath;
      15: ldc           #47                 // String /sejda/tasks/task
      17: aload_1
      18: getstatic     #48                 // Field javax/xml/xpath/XPathConstants.NODESET:Ljavax/xml/namespace/QName;
      21: invokeinterface #49,  4           // InterfaceMethod javax/xml/xpath/XPath.evaluate:(Ljava/lang/String;Ljava/lang/Object;Ljavax/xml/namespace/QName;)Ljava/lang/Object;
      26: checkcast     #50                 // class org/w3c/dom/NodeList
      29: astore_3
      30: iconst_0
      31: istore        4
      33: iload         4
      35: aload_3
      36: invokeinterface #51,  1           // InterfaceMethod org/w3c/dom/NodeList.getLength:()I
      41: if_icmpge     95
      44: aload_3
      45: iload         4
      47: invokeinterface #52,  2           // InterfaceMethod org/w3c/dom/NodeList.item:(I)Lorg/w3c/dom/Node;
      52: astore        5
      54: aload_0
      55: aload         5
      57: ldc           #53                 // String parameters
      59: ldc           #54                 // class org/sejda/model/parameter/base/TaskParameters
      61: invokespecial #55                 // Method getClassFromNode:(Lorg/w3c/dom/Node;Ljava/lang/String;Ljava/lang/Class;)Ljava/lang/Class;
      64: astore        6
      66: aload_0
      67: aload         5
      69: ldc           #56                 // String task
      71: ldc           #57                 // class org/sejda/model/task/Task
      73: invokespecial #55                 // Method getClassFromNode:(Lorg/w3c/dom/Node;Ljava/lang/String;Ljava/lang/Class;)Ljava/lang/Class;
      76: astore        7
      78: aload_2
      79: aload         6
      81: aload         7
      83: invokeinterface #58,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      88: pop
      89: iinc          4, 1
      92: goto          33
      95: aload_2
      96: areturn

  private <T> java.lang.Class<? extends T> getClassFromNode(org.w3c.dom.Node, java.lang.String, java.lang.Class<T>) throws org.sejda.model.exception.ConfigurationException;
    Code:
       0: aload_1
       1: aload_2
       2: invokestatic  #59                 // Method org/sejda/common/XMLUtils.nullSafeGetStringAttribute:(Lorg/w3c/dom/Node;Ljava/lang/String;)Ljava/lang/String;
       5: astore        4
       7: aload         4
       9: invokestatic  #60                 // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      12: ifeq          96
      15: aload         4
      17: invokevirtual #61                 // Method java/lang/String.trim:()Ljava/lang/String;
      20: invokestatic  #62                 // Method java/lang/Class.forName:(Ljava/lang/String;)Ljava/lang/Class;
      23: astore        5
      25: goto          54
      28: astore        6
      30: new           #21                 // class org/sejda/model/exception/ConfigurationException
      33: dup
      34: ldc           #64                 // String Unable to find the configured %s
      36: iconst_1
      37: anewarray     #65                 // class java/lang/Object
      40: dup
      41: iconst_0
      42: aload         4
      44: aastore
      45: invokestatic  #66                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      48: aload         6
      50: invokespecial #26                 // Method org/sejda/model/exception/ConfigurationException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      53: athrow
      54: aload_3
      55: aload         5
      57: invokevirtual #67                 // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      60: ifeq          70
      63: aload         5
      65: aload_3
      66: invokevirtual #68                 // Method java/lang/Class.asSubclass:(Ljava/lang/Class;)Ljava/lang/Class;
      69: areturn
      70: new           #21                 // class org/sejda/model/exception/ConfigurationException
      73: dup
      74: ldc           #69                 // String The configured %s is not a subtype of %s
      76: iconst_2
      77: anewarray     #65                 // class java/lang/Object
      80: dup
      81: iconst_0
      82: aload         5
      84: aastore
      85: dup
      86: iconst_1
      87: aload_3
      88: aastore
      89: invokestatic  #66                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      92: invokespecial #70                 // Method org/sejda/model/exception/ConfigurationException."<init>":(Ljava/lang/String;)V
      95: athrow
      96: new           #21                 // class org/sejda/model/exception/ConfigurationException
      99: dup
     100: ldc           #71                 // String Missing %s configuration parameter.
     102: iconst_1
     103: anewarray     #65                 // class java/lang/Object
     106: dup
     107: iconst_0
     108: aload_2
     109: aastore
     110: invokestatic  #66                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     113: invokespecial #70                 // Method org/sejda/model/exception/ConfigurationException."<init>":(Ljava/lang/String;)V
     116: athrow
    Exception table:
       from    to  target type
          15    25    28   Class java/lang/ClassNotFoundException

  private java.lang.Class<? extends org.sejda.core.notification.strategy.NotificationStrategy> getNotificationStrategy(org.w3c.dom.Document) throws javax.xml.xpath.XPathExpressionException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field xpathFactory:Ljavax/xml/xpath/XPathFactory;
       4: invokevirtual #46                 // Method javax/xml/xpath/XPathFactory.newXPath:()Ljavax/xml/xpath/XPath;
       7: ldc           #72                 // String /sejda/notification
       9: aload_1
      10: getstatic     #73                 // Field javax/xml/xpath/XPathConstants.NODE:Ljavax/xml/namespace/QName;
      13: invokeinterface #49,  4           // InterfaceMethod javax/xml/xpath/XPath.evaluate:(Ljava/lang/String;Ljava/lang/Object;Ljavax/xml/namespace/QName;)Ljava/lang/Object;
      18: checkcast     #74                 // class org/w3c/dom/Node
      21: astore_2
      22: aload_2
      23: ldc           #75                 // String async
      25: invokestatic  #76                 // Method org/sejda/common/XMLUtils.nullSafeGetBooleanAttribute:(Lorg/w3c/dom/Node;Ljava/lang/String;)Z
      28: ifeq          34
      31: ldc           #77                 // class org/sejda/core/notification/strategy/AsyncNotificationStrategy
      33: areturn
      34: ldc           #78                 // class org/sejda/core/notification/strategy/SyncNotificationStrategy
      36: areturn

  private boolean getValidation(org.w3c.dom.Document) throws javax.xml.xpath.XPathExpressionException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field xpathFactory:Ljavax/xml/xpath/XPathFactory;
       4: invokevirtual #46                 // Method javax/xml/xpath/XPathFactory.newXPath:()Ljavax/xml/xpath/XPath;
       7: ldc           #79                 // String /sejda
       9: aload_1
      10: getstatic     #73                 // Field javax/xml/xpath/XPathConstants.NODE:Ljavax/xml/namespace/QName;
      13: invokeinterface #49,  4           // InterfaceMethod javax/xml/xpath/XPath.evaluate:(Ljava/lang/String;Ljava/lang/Object;Ljavax/xml/namespace/QName;)Ljava/lang/Object;
      18: checkcast     #74                 // class org/w3c/dom/Node
      21: astore_2
      22: aload_2
      23: ldc           #80                 // String validation
      25: invokestatic  #76                 // Method org/sejda/common/XMLUtils.nullSafeGetBooleanAttribute:(Lorg/w3c/dom/Node;Ljava/lang/String;)Z
      28: ireturn

  private boolean getIgnoreXmlConfig(org.w3c.dom.Document) throws javax.xml.xpath.XPathExpressionException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field xpathFactory:Ljavax/xml/xpath/XPathFactory;
       4: invokevirtual #46                 // Method javax/xml/xpath/XPathFactory.newXPath:()Ljavax/xml/xpath/XPath;
       7: ldc           #79                 // String /sejda
       9: aload_1
      10: getstatic     #73                 // Field javax/xml/xpath/XPathConstants.NODE:Ljavax/xml/namespace/QName;
      13: invokeinterface #49,  4           // InterfaceMethod javax/xml/xpath/XPath.evaluate:(Ljava/lang/String;Ljava/lang/Object;Ljavax/xml/namespace/QName;)Ljava/lang/Object;
      18: checkcast     #74                 // class org/w3c/dom/Node
      21: astore_2
      22: aload_2
      23: ldc           #81                 // String ignore_xml_config
      25: iconst_1
      26: invokestatic  #82                 // Method org/sejda/common/XMLUtils.nullSafeGetBooleanAttribute:(Lorg/w3c/dom/Node;Ljava/lang/String;Z)Z
      29: ireturn

  static org.sejda.core.context.XmlConfigurationStrategy newInstance(org.sejda.core.context.ConfigurationStreamProvider) throws org.sejda.model.exception.ConfigurationException;
    Code:
       0: aconst_null
       1: astore_1
       2: aload_0
       3: invokeinterface #83,  1           // InterfaceMethod org/sejda/core/context/ConfigurationStreamProvider.getConfigurationStream:()Ljava/io/InputStream;
       8: astore_1
       9: new           #37                 // class org/sejda/core/context/XmlConfigurationStrategy
      12: dup
      13: aload_1
      14: invokespecial #84                 // Method "<init>":(Ljava/io/InputStream;)V
      17: astore_2
      18: aload_1
      19: invokestatic  #85                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
      22: aload_2
      23: areturn
      24: astore_3
      25: aload_1
      26: invokestatic  #85                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
      29: aload_3
      30: athrow
    Exception table:
       from    to  target type
           2    18    24   any
}

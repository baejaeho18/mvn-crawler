Compiled from "PluginClassloaderFactory.java"
public class org.sonar.core.platform.PluginClassloaderFactory {
  private static final java.lang.String API_CLASSLOADER_KEY;

  private final org.sonar.api.utils.TempFolder temp;

  private java.net.URL compatibilityModeJar;

  public org.sonar.core.platform.PluginClassloaderFactory(org.sonar.api.utils.TempFolder);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field temp:Lorg/sonar/api/utils/TempFolder;
       9: return

  public java.util.Map<org.sonar.core.platform.PluginClassLoaderDef, java.lang.ClassLoader> create(java.util.Collection<org.sonar.core.platform.PluginClassLoaderDef>);
    Code:
       0: aload_0
       1: invokevirtual #3                  // Method baseClassLoader:()Ljava/lang/ClassLoader;
       4: astore_2
       5: new           #4                  // class org/sonar/classloader/ClassloaderBuilder
       8: dup
       9: invokespecial #5                  // Method org/sonar/classloader/ClassloaderBuilder."<init>":()V
      12: astore_3
      13: aload_3
      14: ldc           #7                  // String _api_
      16: aload_2
      17: invokevirtual #8                  // Method org/sonar/classloader/ClassloaderBuilder.newClassloader:(Ljava/lang/String;Ljava/lang/ClassLoader;)Lorg/sonar/classloader/ClassloaderBuilder;
      20: pop
      21: aload_3
      22: ldc           #7                  // String _api_
      24: invokestatic  #9                  // Method apiMask:()Lorg/sonar/classloader/Mask;
      27: invokevirtual #10                 // Method org/sonar/classloader/ClassloaderBuilder.setMask:(Ljava/lang/String;Lorg/sonar/classloader/Mask;)Lorg/sonar/classloader/ClassloaderBuilder;
      30: pop
      31: aload_1
      32: invokeinterface #11,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      37: astore        4
      39: aload         4
      41: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      46: ifeq          231
      49: aload         4
      51: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      56: checkcast     #14                 // class org/sonar/core/platform/PluginClassLoaderDef
      59: astore        5
      61: aload_3
      62: aload         5
      64: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      67: invokevirtual #16                 // Method org/sonar/classloader/ClassloaderBuilder.newClassloader:(Ljava/lang/String;)Lorg/sonar/classloader/ClassloaderBuilder;
      70: pop
      71: aload         5
      73: invokevirtual #17                 // Method org/sonar/core/platform/PluginClassLoaderDef.isPrivileged:()Z
      76: ifeq          100
      79: aload_3
      80: aload         5
      82: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      85: aload_2
      86: new           #18                 // class org/sonar/classloader/Mask
      89: dup
      90: invokespecial #19                 // Method org/sonar/classloader/Mask."<init>":()V
      93: invokevirtual #20                 // Method org/sonar/classloader/ClassloaderBuilder.setParent:(Ljava/lang/String;Ljava/lang/ClassLoader;Lorg/sonar/classloader/Mask;)Lorg/sonar/classloader/ClassloaderBuilder;
      96: pop
      97: goto          119
     100: aload_3
     101: aload         5
     103: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
     106: ldc           #7                  // String _api_
     108: new           #18                 // class org/sonar/classloader/Mask
     111: dup
     112: invokespecial #19                 // Method org/sonar/classloader/Mask."<init>":()V
     115: invokevirtual #21                 // Method org/sonar/classloader/ClassloaderBuilder.setParent:(Ljava/lang/String;Ljava/lang/String;Lorg/sonar/classloader/Mask;)Lorg/sonar/classloader/ClassloaderBuilder;
     118: pop
     119: aload_3
     120: aload         5
     122: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
     125: aload         5
     127: invokevirtual #22                 // Method org/sonar/core/platform/PluginClassLoaderDef.isSelfFirstStrategy:()Z
     130: ifeq          139
     133: getstatic     #23                 // Field org/sonar/classloader/ClassloaderBuilder$LoadingOrder.SELF_FIRST:Lorg/sonar/classloader/ClassloaderBuilder$LoadingOrder;
     136: goto          142
     139: getstatic     #24                 // Field org/sonar/classloader/ClassloaderBuilder$LoadingOrder.PARENT_FIRST:Lorg/sonar/classloader/ClassloaderBuilder$LoadingOrder;
     142: invokevirtual #25                 // Method org/sonar/classloader/ClassloaderBuilder.setLoadingOrder:(Ljava/lang/String;Lorg/sonar/classloader/ClassloaderBuilder$LoadingOrder;)Lorg/sonar/classloader/ClassloaderBuilder;
     145: pop
     146: aload         5
     148: invokevirtual #26                 // Method org/sonar/core/platform/PluginClassLoaderDef.getFiles:()Ljava/util/List;
     151: invokeinterface #27,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     156: astore        6
     158: aload         6
     160: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     165: ifeq          198
     168: aload         6
     170: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     175: checkcast     #28                 // class java/io/File
     178: astore        7
     180: aload_3
     181: aload         5
     183: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
     186: aload         7
     188: invokestatic  #29                 // Method fileToUrl:(Ljava/io/File;)Ljava/net/URL;
     191: invokevirtual #30                 // Method org/sonar/classloader/ClassloaderBuilder.addURL:(Ljava/lang/String;Ljava/net/URL;)Lorg/sonar/classloader/ClassloaderBuilder;
     194: pop
     195: goto          158
     198: aload         5
     200: invokevirtual #31                 // Method org/sonar/core/platform/PluginClassLoaderDef.isCompatibilityMode:()Z
     203: ifeq          220
     206: aload_3
     207: aload         5
     209: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
     212: aload_0
     213: invokespecial #32                 // Method extractCompatibilityModeJar:()Ljava/net/URL;
     216: invokevirtual #30                 // Method org/sonar/classloader/ClassloaderBuilder.addURL:(Ljava/lang/String;Ljava/net/URL;)Lorg/sonar/classloader/ClassloaderBuilder;
     219: pop
     220: aload_0
     221: aload         5
     223: aload_3
     224: aload_1
     225: invokespecial #33                 // Method exportResources:(Lorg/sonar/core/platform/PluginClassLoaderDef;Lorg/sonar/classloader/ClassloaderBuilder;Ljava/util/Collection;)V
     228: goto          39
     231: aload_0
     232: aload_1
     233: aload_3
     234: invokespecial #34                 // Method build:(Ljava/util/Collection;Lorg/sonar/classloader/ClassloaderBuilder;)Ljava/util/Map;
     237: areturn

  private void exportResources(org.sonar.core.platform.PluginClassLoaderDef, org.sonar.classloader.ClassloaderBuilder, java.util.Collection<org.sonar.core.platform.PluginClassLoaderDef>);
    Code:
       0: aload_2
       1: aload_1
       2: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
       5: aload_1
       6: invokevirtual #35                 // Method org/sonar/core/platform/PluginClassLoaderDef.getExportMask:()Lorg/sonar/classloader/Mask;
       9: invokevirtual #36                 // Method org/sonar/classloader/ClassloaderBuilder.setExportMask:(Ljava/lang/String;Lorg/sonar/classloader/Mask;)Lorg/sonar/classloader/ClassloaderBuilder;
      12: pop
      13: aload_3
      14: invokeinterface #11,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      19: astore        4
      21: aload         4
      23: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      28: ifeq          82
      31: aload         4
      33: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      38: checkcast     #14                 // class org/sonar/core/platform/PluginClassLoaderDef
      41: astore        5
      43: aload         5
      45: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      48: aload_1
      49: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      52: invokevirtual #37                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      55: ifne          79
      58: aload_2
      59: aload_1
      60: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      63: aload         5
      65: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      68: new           #18                 // class org/sonar/classloader/Mask
      71: dup
      72: invokespecial #19                 // Method org/sonar/classloader/Mask."<init>":()V
      75: invokevirtual #38                 // Method org/sonar/classloader/ClassloaderBuilder.addSibling:(Ljava/lang/String;Ljava/lang/String;Lorg/sonar/classloader/Mask;)Lorg/sonar/classloader/ClassloaderBuilder;
      78: pop
      79: goto          21
      82: return

  private java.util.Map<org.sonar.core.platform.PluginClassLoaderDef, java.lang.ClassLoader> build(java.util.Collection<org.sonar.core.platform.PluginClassLoaderDef>, org.sonar.classloader.ClassloaderBuilder);
    Code:
       0: new           #39                 // class java/util/HashMap
       3: dup
       4: invokespecial #40                 // Method java/util/HashMap."<init>":()V
       7: astore_3
       8: aload_2
       9: invokevirtual #41                 // Method org/sonar/classloader/ClassloaderBuilder.build:()Ljava/util/Map;
      12: astore        4
      14: aload_1
      15: invokeinterface #11,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      20: astore        5
      22: aload         5
      24: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      29: ifeq          105
      32: aload         5
      34: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      39: checkcast     #14                 // class org/sonar/core/platform/PluginClassLoaderDef
      42: astore        6
      44: aload         4
      46: aload         6
      48: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      51: invokeinterface #42,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      56: checkcast     #43                 // class java/lang/ClassLoader
      59: astore        7
      61: aload         7
      63: ifnonnull     91
      66: new           #44                 // class java/lang/IllegalStateException
      69: dup
      70: ldc           #45                 // String Fail to create classloader for plugin [%s]
      72: iconst_1
      73: anewarray     #46                 // class java/lang/Object
      76: dup
      77: iconst_0
      78: aload         6
      80: invokevirtual #15                 // Method org/sonar/core/platform/PluginClassLoaderDef.getBasePluginKey:()Ljava/lang/String;
      83: aastore
      84: invokestatic  #47                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      87: invokespecial #48                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      90: athrow
      91: aload_3
      92: aload         6
      94: aload         7
      96: invokeinterface #49,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     101: pop
     102: goto          22
     105: aload_3
     106: areturn

  java.lang.ClassLoader baseClassLoader();
    Code:
       0: aload_0
       1: invokevirtual #50                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       4: invokevirtual #51                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
       7: areturn

  private java.net.URL extractCompatibilityModeJar();
    Code:
       0: aload_0
       1: getfield      #52                 // Field compatibilityModeJar:Ljava/net/URL;
       4: ifnonnull     80
       7: aload_0
       8: getfield      #2                  // Field temp:Lorg/sonar/api/utils/TempFolder;
      11: ldc           #53                 // String sonar-plugin-api-deps
      13: ldc           #54                 // String jar
      15: invokeinterface #55,  3           // InterfaceMethod org/sonar/api/utils/TempFolder.newFile:(Ljava/lang/String;Ljava/lang/String;)Ljava/io/File;
      20: astore_1
      21: aload_0
      22: invokevirtual #50                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      25: ldc           #56                 // String /sonar-plugin-api-deps.jar
      27: invokevirtual #57                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      30: aload_1
      31: invokestatic  #58                 // Method org/apache/commons/io/FileUtils.copyURLToFile:(Ljava/net/URL;Ljava/io/File;)V
      34: aload_0
      35: aload_1
      36: invokevirtual #59                 // Method java/io/File.toURI:()Ljava/net/URI;
      39: invokevirtual #60                 // Method java/net/URI.toURL:()Ljava/net/URL;
      42: putfield      #52                 // Field compatibilityModeJar:Ljava/net/URL;
      45: goto          80
      48: astore_2
      49: new           #44                 // class java/lang/IllegalStateException
      52: dup
      53: new           #62                 // class java/lang/StringBuilder
      56: dup
      57: invokespecial #63                 // Method java/lang/StringBuilder."<init>":()V
      60: ldc           #64                 // String Can not extract sonar-plugin-api-deps.jar to
      62: invokevirtual #65                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: aload_1
      66: invokevirtual #66                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      69: invokevirtual #65                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      72: invokevirtual #67                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      75: aload_2
      76: invokespecial #68                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      79: athrow
      80: aload_0
      81: getfield      #52                 // Field compatibilityModeJar:Ljava/net/URL;
      84: areturn
    Exception table:
       from    to  target type
          21    45    48   Class java/lang/Exception

  private static java.net.URL fileToUrl(java.io.File);
    Code:
       0: aload_0
       1: invokevirtual #59                 // Method java/io/File.toURI:()Ljava/net/URI;
       4: invokevirtual #60                 // Method java/net/URI.toURL:()Ljava/net/URL;
       7: areturn
       8: astore_1
       9: new           #70                 // class java/lang/IllegalArgumentException
      12: dup
      13: aload_1
      14: invokespecial #71                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/Throwable;)V
      17: athrow
    Exception table:
       from    to  target type
           0     7     8   Class java/net/MalformedURLException

  private static org.sonar.classloader.Mask apiMask();
    Code:
       0: new           #18                 // class org/sonar/classloader/Mask
       3: dup
       4: invokespecial #19                 // Method org/sonar/classloader/Mask."<init>":()V
       7: ldc           #72                 // String org/sonar/api/
       9: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      12: ldc           #74                 // String org/sonar/channel/
      14: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      17: ldc           #75                 // String org/sonar/check/
      19: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      22: ldc           #76                 // String org/sonar/colorizer/
      24: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      27: ldc           #77                 // String org/sonar/duplications/
      29: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      32: ldc           #78                 // String org/sonar/graph/
      34: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      37: ldc           #79                 // String org/sonar/plugins/emailnotifications/api/
      39: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      42: ldc           #80                 // String net/sourceforge/pmd/
      44: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      47: ldc           #81                 // String org/apache/maven/
      49: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      52: ldc           #82                 // String org/codehaus/stax2/
      54: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      57: ldc           #83                 // String org/codehaus/staxmate/
      59: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      62: ldc           #84                 // String com/ctc/wstx/
      64: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      67: ldc           #85                 // String org/slf4j/
      69: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      72: ldc           #86                 // String javax/servlet/
      74: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      77: ldc           #87                 // String org/apache/commons/logging/
      79: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      82: ldc           #88                 // String org/apache/log4j/
      84: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      87: ldc           #89                 // String ch/qos/logback/
      89: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      92: ldc           #90                 // String org/sonar/server/platform/
      94: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
      97: ldc           #91                 // String org/sonar/core/persistence/
      99: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
     102: ldc           #92                 // String org/sonar/core/properties/
     104: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
     107: ldc           #93                 // String org/sonar/server/views/
     109: invokevirtual #73                 // Method org/sonar/classloader/Mask.addInclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
     112: ldc           #94                 // String org/sonar/api/internal/
     114: invokevirtual #95                 // Method org/sonar/classloader/Mask.addExclusion:(Ljava/lang/String;)Lorg/sonar/classloader/Mask;
     117: areturn
}

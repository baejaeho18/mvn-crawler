Compiled from "CommandExecutor.java"
public class org.sonar.api.utils.command.CommandExecutor {
  private static final org.sonar.api.utils.log.Logger LOG;

  private static final org.sonar.api.utils.command.CommandExecutor INSTANCE;

  private org.sonar.api.utils.command.CommandExecutor();
    Code:
       0: aload_0
       1: invokespecial #26                 // Method java/lang/Object."<init>":()V
       4: return

  public static org.sonar.api.utils.command.CommandExecutor create();
    Code:
       0: getstatic     #31                 // Field INSTANCE:Lorg/sonar/api/utils/command/CommandExecutor;
       3: areturn

  public int execute(org.sonar.api.utils.command.Command, org.sonar.api.utils.command.StreamConsumer, org.sonar.api.utils.command.StreamConsumer, long);
    Code:
       0: aconst_null
       1: astore        6
       3: aconst_null
       4: astore        7
       6: aconst_null
       7: astore        8
       9: aconst_null
      10: astore        9
      12: new           #41                 // class java/lang/ProcessBuilder
      15: dup
      16: aload_1
      17: iconst_0
      18: invokevirtual #47                 // Method org/sonar/api/utils/command/Command.toStrings:(Z)Ljava/util/List;
      21: invokespecial #50                 // Method java/lang/ProcessBuilder."<init>":(Ljava/util/List;)V
      24: astore        10
      26: aload_1
      27: invokevirtual #54                 // Method org/sonar/api/utils/command/Command.getDirectory:()Ljava/io/File;
      30: ifnull        43
      33: aload         10
      35: aload_1
      36: invokevirtual #54                 // Method org/sonar/api/utils/command/Command.getDirectory:()Ljava/io/File;
      39: invokevirtual #58                 // Method java/lang/ProcessBuilder.directory:(Ljava/io/File;)Ljava/lang/ProcessBuilder;
      42: pop
      43: aload         10
      45: invokevirtual #68                 // Method java/lang/ProcessBuilder.environment:()Ljava/util/Map;
      48: aload_1
      49: invokevirtual #71                 // Method org/sonar/api/utils/command/Command.getEnvironmentVariables:()Ljava/util/Map;
      52: invokeinterface #77,  2           // InterfaceMethod java/util/Map.putAll:(Ljava/util/Map;)V
      57: aload         10
      59: invokevirtual #81                 // Method java/lang/ProcessBuilder.start:()Ljava/lang/Process;
      62: astore        7
      64: new           #12                 // class org/sonar/api/utils/command/CommandExecutor$StreamGobbler
      67: dup
      68: aload         7
      70: invokevirtual #85                 // Method java/lang/Process.getInputStream:()Ljava/io/InputStream;
      73: aload_2
      74: invokespecial #88                 // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler."<init>":(Ljava/io/InputStream;Lorg/sonar/api/utils/command/StreamConsumer;)V
      77: astore        8
      79: new           #12                 // class org/sonar/api/utils/command/CommandExecutor$StreamGobbler
      82: dup
      83: aload         7
      85: invokevirtual #91                 // Method java/lang/Process.getErrorStream:()Ljava/io/InputStream;
      88: aload_3
      89: invokespecial #88                 // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler."<init>":(Ljava/io/InputStream;Lorg/sonar/api/utils/command/StreamConsumer;)V
      92: astore        9
      94: aload         8
      96: invokevirtual #93                 // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.start:()V
      99: aload         9
     101: invokevirtual #93                 // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.start:()V
     104: aload         7
     106: astore        11
     108: invokestatic  #99                 // Method java/util/concurrent/Executors.newSingleThreadExecutor:()Ljava/util/concurrent/ExecutorService;
     111: astore        6
     113: aload         6
     115: aload         11
     117: dup
     118: invokevirtual #103                // Method java/lang/Object.getClass:()Ljava/lang/Class;
     121: pop
     122: invokedynamic #123,  0            // InvokeDynamic #0:call:(Ljava/lang/Process;)Ljava/util/concurrent/Callable;
     127: invokeinterface #127,  2          // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     132: astore        12
     134: lload         4
     136: lconst_0
     137: lcmp
     138: ifge          159
     141: aload         12
     143: invokeinterface #132,  1          // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     148: checkcast     #134                // class java/lang/Integer
     151: invokevirtual #137                // Method java/lang/Integer.intValue:()I
     154: istore        13
     156: goto          179
     159: aload         12
     161: lload         4
     163: getstatic     #143                // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     166: invokeinterface #146,  4          // InterfaceMethod java/util/concurrent/Future.get:(JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
     171: checkcast     #134                // class java/lang/Integer
     174: invokevirtual #137                // Method java/lang/Integer.intValue:()I
     177: istore        13
     179: aload         8
     181: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     184: aload         9
     186: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     189: aload_1
     190: aload         8
     192: ldc           #152                // String stdOut
     194: invokestatic  #156                // Method verifyGobbler:(Lorg/sonar/api/utils/command/Command;Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;Ljava/lang/String;)V
     197: aload_1
     198: aload         9
     200: ldc           #158                // String stdErr
     202: invokestatic  #156                // Method verifyGobbler:(Lorg/sonar/api/utils/command/Command;Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;Ljava/lang/String;)V
     205: iload         13
     207: istore        14
     209: aload         7
     211: ifnull        219
     214: aload         7
     216: invokevirtual #161                // Method java/lang/Process.destroy:()V
     219: aload         8
     221: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     224: aload         9
     226: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     229: aload         7
     231: invokestatic  #165                // Method closeStreams:(Ljava/lang/Process;)V
     234: aload         6
     236: ifnull        246
     239: aload         6
     241: invokeinterface #168,  1          // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     246: iload         14
     248: ireturn
     249: astore        10
     251: new           #170                // class org/sonar/api/utils/command/TimeoutException
     254: dup
     255: aload_1
     256: new           #172                // class java/lang/StringBuilder
     259: dup
     260: invokespecial #173                // Method java/lang/StringBuilder."<init>":()V
     263: ldc           #175                // String Timeout exceeded:
     265: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     268: lload         4
     270: invokevirtual #182                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     273: ldc           #184                // String  ms
     275: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     278: invokevirtual #188                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     281: aload         10
     283: invokespecial #191                // Method org/sonar/api/utils/command/TimeoutException."<init>":(Lorg/sonar/api/utils/command/Command;Ljava/lang/String;Ljava/lang/Throwable;)V
     286: athrow
     287: astore        10
     289: aload         10
     291: athrow
     292: astore        10
     294: new           #37                 // class org/sonar/api/utils/command/CommandException
     297: dup
     298: aload_1
     299: aload         10
     301: invokespecial #194                // Method org/sonar/api/utils/command/CommandException."<init>":(Lorg/sonar/api/utils/command/Command;Ljava/lang/Throwable;)V
     304: athrow
     305: astore        15
     307: aload         7
     309: ifnull        317
     312: aload         7
     314: invokevirtual #161                // Method java/lang/Process.destroy:()V
     317: aload         8
     319: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     322: aload         9
     324: invokestatic  #150                // Method waitUntilFinish:(Lorg/sonar/api/utils/command/CommandExecutor$StreamGobbler;)V
     327: aload         7
     329: invokestatic  #165                // Method closeStreams:(Ljava/lang/Process;)V
     332: aload         6
     334: ifnull        344
     337: aload         6
     339: invokeinterface #168,  1          // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     344: aload         15
     346: athrow
    Exception table:
       from    to  target type
          12   209   249   Class java/util/concurrent/TimeoutException
          12   209   287   Class org/sonar/api/utils/command/CommandException
          12   209   292   Class java/lang/Exception
          12   209   305   any
         249   307   305   any

  private static void verifyGobbler(org.sonar.api.utils.command.Command, org.sonar.api.utils.command.CommandExecutor$StreamGobbler, java.lang.String);
    Code:
       0: aload_1
       1: invokevirtual #225                // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.getException:()Ljava/lang/Exception;
       4: ifnull        44
       7: new           #37                 // class org/sonar/api/utils/command/CommandException
      10: dup
      11: aload_0
      12: new           #172                // class java/lang/StringBuilder
      15: dup
      16: invokespecial #173                // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #227                // String Error inside
      21: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_2
      25: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: ldc           #229                // String  stream
      30: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: invokevirtual #188                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: aload_1
      37: invokevirtual #225                // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.getException:()Ljava/lang/Exception;
      40: invokespecial #230                // Method org/sonar/api/utils/command/CommandException."<init>":(Lorg/sonar/api/utils/command/Command;Ljava/lang/String;Ljava/lang/Throwable;)V
      43: athrow
      44: return

  public int execute(org.sonar.api.utils.command.Command, long);
    Code:
       0: getstatic     #236                // Field LOG:Lorg/sonar/api/utils/log/Logger;
       3: new           #172                // class java/lang/StringBuilder
       6: dup
       7: invokespecial #173                // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #238                // String Executing command:
      12: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_1
      16: invokevirtual #241                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      19: invokevirtual #188                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      22: invokeinterface #247,  2          // InterfaceMethod org/sonar/api/utils/log/Logger.info:(Ljava/lang/String;)V
      27: aload_0
      28: aload_1
      29: new           #9                  // class org/sonar/api/utils/command/CommandExecutor$DefaultConsumer
      32: dup
      33: aconst_null
      34: invokespecial #250                // Method org/sonar/api/utils/command/CommandExecutor$DefaultConsumer."<init>":(Lorg/sonar/api/utils/command/CommandExecutor$1;)V
      37: new           #9                  // class org/sonar/api/utils/command/CommandExecutor$DefaultConsumer
      40: dup
      41: aconst_null
      42: invokespecial #250                // Method org/sonar/api/utils/command/CommandExecutor$DefaultConsumer."<init>":(Lorg/sonar/api/utils/command/CommandExecutor$1;)V
      45: lload_2
      46: invokevirtual #252                // Method execute:(Lorg/sonar/api/utils/command/Command;Lorg/sonar/api/utils/command/StreamConsumer;Lorg/sonar/api/utils/command/StreamConsumer;J)I
      49: ireturn

  private static void closeStreams(java.lang.Process);
    Code:
       0: aload_0
       1: ifnull        25
       4: aload_0
       5: invokevirtual #85                 // Method java/lang/Process.getInputStream:()Ljava/io/InputStream;
       8: invokestatic  #259                // Method org/sonar/api/internal/apachecommons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
      11: aload_0
      12: invokevirtual #263                // Method java/lang/Process.getOutputStream:()Ljava/io/OutputStream;
      15: invokestatic  #266                // Method org/sonar/api/internal/apachecommons/io/IOUtils.closeQuietly:(Ljava/io/OutputStream;)V
      18: aload_0
      19: invokevirtual #91                 // Method java/lang/Process.getErrorStream:()Ljava/io/InputStream;
      22: invokestatic  #259                // Method org/sonar/api/internal/apachecommons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
      25: return

  private static void waitUntilFinish(org.sonar.api.utils.command.CommandExecutor$StreamGobbler);
    Code:
       0: aload_0
       1: ifnull        44
       4: aload_0
       5: invokevirtual #271                // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.join:()V
       8: goto          44
      11: astore_1
      12: getstatic     #236                // Field LOG:Lorg/sonar/api/utils/log/Logger;
      15: new           #172                // class java/lang/StringBuilder
      18: dup
      19: invokespecial #173                // Method java/lang/StringBuilder."<init>":()V
      22: ldc_w         #273                // String InterruptedException while waiting finish of
      25: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_0
      29: invokevirtual #274                // Method org/sonar/api/utils/command/CommandExecutor$StreamGobbler.toString:()Ljava/lang/String;
      32: invokevirtual #179                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: invokevirtual #188                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      38: aload_1
      39: invokeinterface #278,  3          // InterfaceMethod org/sonar/api/utils/log/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      44: return
    Exception table:
       from    to  target type
           4     8    11   Class java/lang/InterruptedException

  static org.sonar.api.utils.log.Logger access$100();
    Code:
       0: getstatic     #236                // Field LOG:Lorg/sonar/api/utils/log/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #2                  // class org/sonar/api/utils/command/CommandExecutor
       2: invokestatic  #288                // Method org/sonar/api/utils/log/Loggers.get:(Ljava/lang/Class;)Lorg/sonar/api/utils/log/Logger;
       5: putstatic     #236                // Field LOG:Lorg/sonar/api/utils/log/Logger;
       8: new           #2                  // class org/sonar/api/utils/command/CommandExecutor
      11: dup
      12: invokespecial #289                // Method "<init>":()V
      15: putstatic     #31                 // Field INSTANCE:Lorg/sonar/api/utils/command/CommandExecutor;
      18: return
}

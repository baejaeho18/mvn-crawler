^1364549548978
@xworker.dataObject.db.ClientInfoPropertiesDataObject
sname
ClientInfoPropertiesDataObject
slabel
ClientInfoPropertiesDataObject
sdescriptors
xworker.lang.MetaDescriptor3
sextends
xworker.dataObject.java.ListDataObject
smany
true
seditCols
2
sinitialization
false
smodifier
public
sinheritDescription
false
Sdescription
#$@text#$@
<p>Java SQL获取驱动程序支持的客户端信息属性的列表。结果集包括以下列</p>
<p>&nbsp;</p>
<ol>
    <li><b>NAME</b> String=&gt; 客户端信息属性的名称<br />
    &nbsp;</li>
    <li><b>MAX_LEN</b> int=&gt; 属性值的最大长度<br />
    &nbsp;</li>
    <li><b>DEFAULT_VALUE</b> String=&gt; 属性的默认值<br />
    &nbsp;</li>
    <li><b>DESCRIPTION</b> String=&gt; 属性的描述。通常包括关于此属性存储在数据库何处的信息。</li>
</ol>
<p><code>ResultSet</code> 按 NAME 列排序</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
#$@text#$@
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1
sname
actions
sdescriptors
xworker.dataObject.db.DbDataObject/@actions1
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@query
sname
doQuery
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Global
sdisableGlobalContext
false
Scode
#$@text#$@
import xworker.dataObject.DataObject;

import ognl.Ognl;

//获取全部的表
def datas = [];
def metadata = con.getMetaData();
def rs = metadata.getClientInfoProperties();
try{    
    while(rs.next()){
        def data = [:];
        data.put("NAME", rs.getString("NAME"));
        data.put("MAX_LEN", rs.getString("MAX_LEN"));
        data.put("DEFAULT_VALUE", rs.getString("DEFAULT_VALUE"));        
        data.put("DESCRIPTION", rs.getString("DESCRIPTION"));       
       
        datas.add(data);
    }
}finally{
    rs.close();
}

def listDataName = "__datas__";
self.set("listData", listDataName);
self.set("dataClassName", "java.util.HashMap");

try{
    def bindings = actionContext.push(null);
    bindings.put(listDataName, datas);

    //使用ListDataObject的load方法    
    def action = world.getAction("xworker.dataObject.java.ListDataObject/@actions1/@query");
    
    return action.run(actionContext);
}finally{
    actionContext.pop();
}
#$@text#$@
Sdescription
#$@text#$@
<p>额外可以附加以下参数：</p>
<ul>
    <li>catalog</li>
    <li>schemaPattern</li>
    <li>tableNamePattern</li>
    <li>columnNamePattern</li>
</ul>
#$@text#$@
sinitBreakPoint
false
ssuccessBreakPoint
false
sexceptionBreakPoint
false
seditBreakPoint
false
sinterpretationType
Action
ssaveReturn
false
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@query/@contexts
sname
contexts
sid
contexts
slabel
contexts
sdescriptors
xworker.lang.actions.Inout/@contexts
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@query/@contexts/@dataSource
sname
dataSource
sconnectionName
con
stransaction
false
sdataSourcePath
self.dataSource
sconflicting
ignore
sdisable
false
sonError
ignore
spreventError
false
sinherit
true
sid
dataSource
sdescriptors
xworker.db.jdbc.DataSouceActionContext,xworker.lang.actions.Inout/@contexts/@context
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@isMappingAble
sname
isMappingAble
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
if(actionContext.get("con") == null || con == null){
    throw new Exception("获取不到数据库连接，数据源不存在或没有正确设置。");
}

return true;
#$@text#$@
Sdescription
#$@text#$@
<p>返回属性是否可以映射，比如数据库数据对象、CSV数据对象和Excel等数据对象的属性适合表字段、CSV或Excel的列映射的。</p>
<p>如果不能映射，直接抛出有说明文字的异常。</p>
<p>映射用于快速编辑属性。</p>
#$@text#$@
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@isMappingAble/@contexts
sname
contexts
sid
contexts
slabel
contexts
sdescriptors
xworker.lang.actions.Inout/@contexts
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@isMappingAble/@contexts/@dataSource
sname
dataSource
sconnectionName
con
stransaction
false
sdataSourcePath
self.dataSource
sconflicting
ignore
sdisable
false
sonError
ignore
spreventError
false
sinherit
true
sid
dataSource
sdescriptors
xworker.db.jdbc.DataSouceActionContext,xworker.lang.actions.Inout/@contexts/@context
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@actions1/@getMappingFields
sname
getMappingFields
sisSynchronized
false
sthrowException
true
suseOtherAction
false
svarScope
Local
sdisableGlobalContext
false
Scode
#$@text#$@
def fields = [
    ["colName":"NAME", "colTitle":"名称"],
    ["colName":"MAX_LEN", "colTitle":"最大长度"],
    ["colName":"DEFAULT_VALUE", "colTitle":"默认值"],
    ["colName":"DESCRIPTION", "colTitle":"描述"]
];

return fields;
#$@text#$@
sdescriptors
xworker.lang.actions.Actions/@GroovyAction
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@name
sname
name
sgroup
DataObject
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@label
sname
label
sgroup
DataObject
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
true
LallowDecimals
true
LallowNegative
true
sdescriptors
xworker.lang.MetaDescriptor3/@attribute
sth_createIndex
false
@xworker.dataObject.db.ClientInfoPropertiesDataObject/@dbConfigPath
sname
dataSource
slabel
数据源
sinputtype
openWindow
ssize
60
scolspan
2
sgroup
DataObject
sinputattrs
xworker.swt.xworker.attributeEditor.openWins.SelectThingOpenWindow/@shell|descriptor=xworkerdbjdbc.DataSource,returnType=path
sreadOnly
false
sinheritDescription
false
svalidateAllowBlank
true
LvalidateOnBlur
false
LallowDecimals
false
LallowNegative
false
sid
dbConfigPath
sdescriptors
xworker.lang.MetaDescriptor3/@attribute

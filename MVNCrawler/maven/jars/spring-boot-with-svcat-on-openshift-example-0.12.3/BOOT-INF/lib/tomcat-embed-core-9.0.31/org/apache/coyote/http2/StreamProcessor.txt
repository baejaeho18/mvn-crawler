Compiled from "StreamProcessor.java"
class org.apache.coyote.http2.StreamProcessor extends org.apache.coyote.AbstractProcessor {
  private static final org.apache.juli.logging.Log log;

  private static final org.apache.tomcat.util.res.StringManager sm;

  private final org.apache.coyote.http2.Http2UpgradeHandler handler;

  private final org.apache.coyote.http2.Stream stream;

  private org.apache.coyote.http2.SendfileData sendfileData;

  private org.apache.tomcat.util.net.SendfileState sendfileState;

  org.apache.coyote.http2.StreamProcessor(org.apache.coyote.http2.Http2UpgradeHandler, org.apache.coyote.http2.Stream, org.apache.coyote.Adapter, org.apache.tomcat.util.net.SocketWrapperBase<?>);
    Code:
       0: aload_0
       1: aload_3
       2: aload_2
       3: invokevirtual #1                  // Method org/apache/coyote/http2/Stream.getCoyoteRequest:()Lorg/apache/coyote/Request;
       6: aload_2
       7: invokevirtual #2                  // Method org/apache/coyote/http2/Stream.getCoyoteResponse:()Lorg/apache/coyote/Response;
      10: invokespecial #3                  // Method org/apache/coyote/AbstractProcessor."<init>":(Lorg/apache/coyote/Adapter;Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;)V
      13: aload_0
      14: aconst_null
      15: putfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      18: aload_0
      19: aconst_null
      20: putfield      #5                  // Field sendfileState:Lorg/apache/tomcat/util/net/SendfileState;
      23: aload_0
      24: aload_1
      25: putfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      28: aload_0
      29: aload_2
      30: putfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      33: aload_0
      34: aload         4
      36: invokevirtual #8                  // Method setSocketWrapper:(Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
      39: return

  final void process(org.apache.tomcat.util.net.SocketEvent);
    Code:
       0: aload_0
       1: dup
       2: astore_2
       3: monitorenter
       4: invokestatic  #9                  // Method org/apache/coyote/ContainerThreadMarker.set:()V
       7: getstatic     #10                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.CLOSED:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
      10: astore_3
      11: aload_0
      12: aload_0
      13: getfield      #11                 // Field socketWrapper:Lorg/apache/tomcat/util/net/SocketWrapperBase;
      16: aload_1
      17: invokevirtual #12                 // Method process:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;)Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
      20: astore_3
      21: aload_3
      22: getstatic     #13                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.LONG:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
      25: if_acmpne     45
      28: aload_0
      29: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      32: invokevirtual #14                 // Method org/apache/coyote/http2/Http2UpgradeHandler.getProtocol:()Lorg/apache/coyote/http2/Http2Protocol;
      35: invokevirtual #15                 // Method org/apache/coyote/http2/Http2Protocol.getHttp11Protocol:()Lorg/apache/coyote/AbstractProtocol;
      38: aload_0
      39: invokevirtual #16                 // Method org/apache/coyote/AbstractProtocol.addWaitingProcessor:(Lorg/apache/coyote/Processor;)V
      42: goto          216
      45: aload_3
      46: getstatic     #10                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.CLOSED:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
      49: if_acmpne     216
      52: aload_0
      53: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      56: invokevirtual #14                 // Method org/apache/coyote/http2/Http2UpgradeHandler.getProtocol:()Lorg/apache/coyote/http2/Http2Protocol;
      59: invokevirtual #15                 // Method org/apache/coyote/http2/Http2Protocol.getHttp11Protocol:()Lorg/apache/coyote/AbstractProtocol;
      62: aload_0
      63: invokevirtual #17                 // Method org/apache/coyote/AbstractProtocol.removeWaitingProcessor:(Lorg/apache/coyote/Processor;)V
      66: aload_0
      67: invokevirtual #18                 // Method getErrorState:()Lorg/apache/coyote/ErrorState;
      70: invokevirtual #19                 // Method org/apache/coyote/ErrorState.isConnectionIoAllowed:()Z
      73: ifne          132
      76: new           #20                 // class org/apache/coyote/http2/ConnectionException
      79: dup
      80: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      83: ldc           #22                 // String streamProcessor.error.connection
      85: iconst_2
      86: anewarray     #23                 // class java/lang/Object
      89: dup
      90: iconst_0
      91: aload_0
      92: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      95: invokevirtual #24                 // Method org/apache/coyote/http2/Stream.getConnectionId:()Ljava/lang/String;
      98: aastore
      99: dup
     100: iconst_1
     101: aload_0
     102: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     105: invokevirtual #25                 // Method org/apache/coyote/http2/Stream.getIdentifier:()Ljava/lang/Integer;
     108: aastore
     109: invokevirtual #26                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     112: getstatic     #27                 // Field org/apache/coyote/http2/Http2Error.INTERNAL_ERROR:Lorg/apache/coyote/http2/Http2Error;
     115: invokespecial #28                 // Method org/apache/coyote/http2/ConnectionException."<init>":(Ljava/lang/String;Lorg/apache/coyote/http2/Http2Error;)V
     118: astore        4
     120: aload_0
     121: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     124: aload         4
     126: invokevirtual #29                 // Method org/apache/coyote/http2/Stream.close:(Lorg/apache/coyote/http2/Http2Exception;)V
     129: goto          216
     132: aload_0
     133: invokevirtual #18                 // Method getErrorState:()Lorg/apache/coyote/ErrorState;
     136: invokevirtual #30                 // Method org/apache/coyote/ErrorState.isIoAllowed:()Z
     139: ifne          216
     142: aload_0
     143: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     146: invokevirtual #31                 // Method org/apache/coyote/http2/Stream.getResetException:()Lorg/apache/coyote/http2/StreamException;
     149: astore        4
     151: aload         4
     153: ifnonnull     207
     156: new           #32                 // class org/apache/coyote/http2/StreamException
     159: dup
     160: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     163: ldc           #33                 // String streamProcessor.error.stream
     165: iconst_2
     166: anewarray     #23                 // class java/lang/Object
     169: dup
     170: iconst_0
     171: aload_0
     172: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     175: invokevirtual #24                 // Method org/apache/coyote/http2/Stream.getConnectionId:()Ljava/lang/String;
     178: aastore
     179: dup
     180: iconst_1
     181: aload_0
     182: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     185: invokevirtual #25                 // Method org/apache/coyote/http2/Stream.getIdentifier:()Ljava/lang/Integer;
     188: aastore
     189: invokevirtual #26                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     192: getstatic     #27                 // Field org/apache/coyote/http2/Http2Error.INTERNAL_ERROR:Lorg/apache/coyote/http2/Http2Error;
     195: aload_0
     196: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     199: invokevirtual #34                 // Method org/apache/coyote/http2/Stream.getIdAsInt:()I
     202: invokespecial #35                 // Method org/apache/coyote/http2/StreamException."<init>":(Ljava/lang/String;Lorg/apache/coyote/http2/Http2Error;I)V
     205: astore        4
     207: aload_0
     208: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     211: aload         4
     213: invokevirtual #29                 // Method org/apache/coyote/http2/Stream.close:(Lorg/apache/coyote/http2/Http2Exception;)V
     216: invokestatic  #36                 // Method org/apache/coyote/ContainerThreadMarker.clear:()V
     219: goto          326
     222: astore        4
     224: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     227: ldc           #22                 // String streamProcessor.error.connection
     229: iconst_2
     230: anewarray     #23                 // class java/lang/Object
     233: dup
     234: iconst_0
     235: aload_0
     236: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     239: invokevirtual #24                 // Method org/apache/coyote/http2/Stream.getConnectionId:()Ljava/lang/String;
     242: aastore
     243: dup
     244: iconst_1
     245: aload_0
     246: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     249: invokevirtual #25                 // Method org/apache/coyote/http2/Stream.getIdentifier:()Ljava/lang/Integer;
     252: aastore
     253: invokevirtual #26                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     256: astore        5
     258: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
     261: invokeinterface #39,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     266: ifeq          281
     269: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
     272: aload         5
     274: aload         4
     276: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     281: new           #20                 // class org/apache/coyote/http2/ConnectionException
     284: dup
     285: aload         5
     287: getstatic     #27                 // Field org/apache/coyote/http2/Http2Error.INTERNAL_ERROR:Lorg/apache/coyote/http2/Http2Error;
     290: invokespecial #28                 // Method org/apache/coyote/http2/ConnectionException."<init>":(Ljava/lang/String;Lorg/apache/coyote/http2/Http2Error;)V
     293: astore        6
     295: aload         6
     297: aload         4
     299: invokevirtual #41                 // Method org/apache/coyote/http2/ConnectionException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     302: pop
     303: aload_0
     304: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     307: aload         6
     309: invokevirtual #29                 // Method org/apache/coyote/http2/Stream.close:(Lorg/apache/coyote/http2/Http2Exception;)V
     312: invokestatic  #36                 // Method org/apache/coyote/ContainerThreadMarker.clear:()V
     315: goto          326
     318: astore        7
     320: invokestatic  #36                 // Method org/apache/coyote/ContainerThreadMarker.clear:()V
     323: aload         7
     325: athrow
     326: aload_2
     327: monitorexit
     328: goto          338
     331: astore        8
     333: aload_2
     334: monitorexit
     335: aload         8
     337: athrow
     338: aload_0
     339: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     342: invokevirtual #42                 // Method org/apache/coyote/http2/Http2UpgradeHandler.executeQueuedStream:()V
     345: goto          360
     348: astore        9
     350: aload_0
     351: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     354: invokevirtual #42                 // Method org/apache/coyote/http2/Http2UpgradeHandler.executeQueuedStream:()V
     357: aload         9
     359: athrow
     360: return
    Exception table:
       from    to  target type
          11   216   222   Class java/lang/Exception
          11   216   318   any
         222   312   318   any
         318   320   318   any
           4   328   331   any
         331   335   331   any
           0   338   348   any
         348   350   348   any

  protected final void prepareResponse() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
       4: iconst_1
       5: invokevirtual #44                 // Method org/apache/coyote/Response.setCommitted:(Z)V
       8: aload_0
       9: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      12: invokevirtual #45                 // Method org/apache/coyote/http2/Http2UpgradeHandler.hasAsyncIO:()Z
      15: ifeq          35
      18: aload_0
      19: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      22: invokevirtual #14                 // Method org/apache/coyote/http2/Http2UpgradeHandler.getProtocol:()Lorg/apache/coyote/http2/Http2Protocol;
      25: invokevirtual #46                 // Method org/apache/coyote/http2/Http2Protocol.getUseSendfile:()Z
      28: ifeq          35
      31: aload_0
      32: invokespecial #47                 // Method prepareSendfile:()V
      35: aload_0
      36: getfield      #48                 // Field request:Lorg/apache/coyote/Request;
      39: aload_0
      40: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
      43: aload_0
      44: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      47: ifnonnull     54
      50: iconst_1
      51: goto          55
      54: iconst_0
      55: aload_0
      56: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      59: invokevirtual #14                 // Method org/apache/coyote/http2/Http2UpgradeHandler.getProtocol:()Lorg/apache/coyote/http2/Http2Protocol;
      62: aload_0
      63: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      66: invokestatic  #49                 // Method prepareHeaders:(Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;ZLorg/apache/coyote/http2/Http2Protocol;Lorg/apache/coyote/http2/Stream;)V
      69: aload_0
      70: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      73: invokevirtual #50                 // Method org/apache/coyote/http2/Stream.writeHeaders:()V
      76: return

  private void prepareSendfile();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #1                  // Method org/apache/coyote/http2/Stream.getCoyoteRequest:()Lorg/apache/coyote/Request;
       7: ldc           #52                 // String org.apache.tomcat.sendfile.filename
       9: invokevirtual #53                 // Method org/apache/coyote/Request.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      12: checkcast     #54                 // class java/lang/String
      15: astore_1
      16: aload_1
      17: ifnull        132
      20: aload_0
      21: new           #55                 // class org/apache/coyote/http2/SendfileData
      24: dup
      25: invokespecial #56                 // Method org/apache/coyote/http2/SendfileData."<init>":()V
      28: putfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      31: aload_0
      32: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      35: new           #57                 // class java/io/File
      38: dup
      39: aload_1
      40: invokespecial #58                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      43: invokevirtual #59                 // Method java/io/File.toPath:()Ljava/nio/file/Path;
      46: putfield      #60                 // Field org/apache/coyote/http2/SendfileData.path:Ljava/nio/file/Path;
      49: aload_0
      50: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      53: aload_0
      54: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      57: invokevirtual #1                  // Method org/apache/coyote/http2/Stream.getCoyoteRequest:()Lorg/apache/coyote/Request;
      60: ldc           #61                 // String org.apache.tomcat.sendfile.start
      62: invokevirtual #53                 // Method org/apache/coyote/Request.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      65: checkcast     #62                 // class java/lang/Long
      68: invokevirtual #63                 // Method java/lang/Long.longValue:()J
      71: putfield      #64                 // Field org/apache/coyote/http2/SendfileData.pos:J
      74: aload_0
      75: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
      78: aload_0
      79: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      82: invokevirtual #1                  // Method org/apache/coyote/http2/Stream.getCoyoteRequest:()Lorg/apache/coyote/Request;
      85: ldc           #65                 // String org.apache.tomcat.sendfile.end
      87: invokevirtual #53                 // Method org/apache/coyote/Request.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      90: checkcast     #62                 // class java/lang/Long
      93: invokevirtual #63                 // Method java/lang/Long.longValue:()J
      96: putfield      #66                 // Field org/apache/coyote/http2/SendfileData.end:J
      99: aload_0
     100: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
     103: aload_0
     104: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
     107: getfield      #66                 // Field org/apache/coyote/http2/SendfileData.end:J
     110: aload_0
     111: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
     114: getfield      #64                 // Field org/apache/coyote/http2/SendfileData.pos:J
     117: lsub
     118: putfield      #67                 // Field org/apache/coyote/http2/SendfileData.left:J
     121: aload_0
     122: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
     125: aload_0
     126: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
     129: putfield      #68                 // Field org/apache/coyote/http2/SendfileData.stream:Lorg/apache/coyote/http2/Stream;
     132: return

  static void prepareHeaders(org.apache.coyote.Request, org.apache.coyote.Response, boolean, org.apache.coyote.http2.Http2Protocol, org.apache.coyote.http2.Stream);
    Code:
       0: aload_1
       1: invokevirtual #69                 // Method org/apache/coyote/Response.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
       4: astore        5
       6: aload_1
       7: invokevirtual #70                 // Method org/apache/coyote/Response.getStatus:()I
      10: istore        6
      12: aload         5
      14: ldc           #71                 // String :status
      16: invokevirtual #72                 // Method org/apache/tomcat/util/http/MimeHeaders.addValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
      19: iload         6
      21: invokestatic  #73                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
      24: invokevirtual #74                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
      27: iload         6
      29: sipush        200
      32: if_icmplt     145
      35: iload         6
      37: sipush        204
      40: if_icmpeq     145
      43: iload         6
      45: sipush        205
      48: if_icmpeq     145
      51: iload         6
      53: sipush        304
      56: if_icmpeq     145
      59: aload_1
      60: invokevirtual #75                 // Method org/apache/coyote/Response.getContentType:()Ljava/lang/String;
      63: astore        7
      65: aload         7
      67: ifnull        82
      70: aload         5
      72: ldc           #76                 // String content-type
      74: invokevirtual #77                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
      77: aload         7
      79: invokevirtual #74                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
      82: aload_1
      83: invokevirtual #78                 // Method org/apache/coyote/Response.getContentLanguage:()Ljava/lang/String;
      86: astore        8
      88: aload         8
      90: ifnull        105
      93: aload         5
      95: ldc           #79                 // String content-language
      97: invokevirtual #77                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     100: aload         8
     102: invokevirtual #74                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     105: aload_1
     106: invokevirtual #80                 // Method org/apache/coyote/Response.getContentLengthLong:()J
     109: lstore        9
     111: lload         9
     113: ldc2_w        #81                 // long -1l
     116: lcmp
     117: ifeq          142
     120: aload         5
     122: ldc           #83                 // String content-length
     124: invokevirtual #84                 // Method org/apache/tomcat/util/http/MimeHeaders.getValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     127: ifnonnull     142
     130: aload         5
     132: ldc           #83                 // String content-length
     134: invokevirtual #72                 // Method org/apache/tomcat/util/http/MimeHeaders.addValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     137: lload         9
     139: invokevirtual #85                 // Method org/apache/tomcat/util/buf/MessageBytes.setLong:(J)V
     142: goto          168
     145: iload         6
     147: sipush        205
     150: if_icmpne     161
     153: aload_1
     154: lconst_0
     155: invokevirtual #86                 // Method org/apache/coyote/Response.setContentLength:(J)V
     158: goto          168
     161: aload_1
     162: ldc2_w        #81                 // long -1l
     165: invokevirtual #86                 // Method org/apache/coyote/Response.setContentLength:(J)V
     168: iload         6
     170: sipush        200
     173: if_icmplt     199
     176: aload         5
     178: ldc           #87                 // String date
     180: invokevirtual #84                 // Method org/apache/tomcat/util/http/MimeHeaders.getValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     183: ifnonnull     199
     186: aload         5
     188: ldc           #87                 // String date
     190: invokevirtual #72                 // Method org/apache/tomcat/util/http/MimeHeaders.addValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     193: invokestatic  #88                 // Method org/apache/tomcat/util/http/FastHttpDateFormat.getCurrentDate:()Ljava/lang/String;
     196: invokevirtual #74                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     199: iload_2
     200: ifeq          228
     203: aload_3
     204: ifnull        228
     207: aload_3
     208: aload_0
     209: aload_1
     210: invokevirtual #89                 // Method org/apache/coyote/http2/Http2Protocol.useCompression:(Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;)Z
     213: ifeq          228
     216: aload         4
     218: new           #90                 // class org/apache/coyote/http11/filters/GzipOutputFilter
     221: dup
     222: invokespecial #91                 // Method org/apache/coyote/http11/filters/GzipOutputFilter."<init>":()V
     225: invokevirtual #92                 // Method org/apache/coyote/http2/Stream.addOutputFilter:(Lorg/apache/coyote/http11/OutputFilter;)V
     228: return

  protected final void finishResponse() throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
       5: aload_0
       6: getfield      #4                  // Field sendfileData:Lorg/apache/coyote/http2/SendfileData;
       9: invokevirtual #93                 // Method org/apache/coyote/http2/Http2UpgradeHandler.processSendfile:(Lorg/apache/coyote/http2/SendfileData;)Lorg/apache/tomcat/util/net/SendfileState;
      12: putfield      #5                  // Field sendfileState:Lorg/apache/tomcat/util/net/SendfileState;
      15: aload_0
      16: getfield      #5                  // Field sendfileState:Lorg/apache/tomcat/util/net/SendfileState;
      19: getstatic     #94                 // Field org/apache/tomcat/util/net/SendfileState.PENDING:Lorg/apache/tomcat/util/net/SendfileState;
      22: if_acmpeq     37
      25: aload_0
      26: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      29: invokevirtual #95                 // Method org/apache/coyote/http2/Stream.getOutputBuffer:()Lorg/apache/coyote/http11/HttpOutputBuffer;
      32: invokeinterface #96,  1           // InterfaceMethod org/apache/coyote/http11/HttpOutputBuffer.end:()V
      37: return

  protected final void ack();
    Code:
       0: aload_0
       1: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
       4: invokevirtual #97                 // Method org/apache/coyote/Response.isCommitted:()Z
       7: ifne          39
      10: aload_0
      11: getfield      #48                 // Field request:Lorg/apache/coyote/Request;
      14: invokevirtual #98                 // Method org/apache/coyote/Request.hasExpectation:()Z
      17: ifeq          39
      20: aload_0
      21: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      24: invokevirtual #99                 // Method org/apache/coyote/http2/Stream.writeAck:()V
      27: goto          39
      30: astore_1
      31: aload_0
      32: getstatic     #101                // Field org/apache/coyote/ErrorState.CLOSE_CONNECTION_NOW:Lorg/apache/coyote/ErrorState;
      35: aload_1
      36: invokevirtual #102                // Method setErrorState:(Lorg/apache/coyote/ErrorState;Ljava/lang/Throwable;)V
      39: return
    Exception table:
       from    to  target type
          20    27    30   Class java/io/IOException

  protected final void flush() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #95                 // Method org/apache/coyote/http2/Stream.getOutputBuffer:()Lorg/apache/coyote/http11/HttpOutputBuffer;
       7: invokeinterface #103,  1          // InterfaceMethod org/apache/coyote/http11/HttpOutputBuffer.flush:()V
      12: return

  protected final int available(boolean);
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #104                // Method org/apache/coyote/http2/Stream.getInputBuffer:()Lorg/apache/coyote/http2/Stream$StreamInputBuffer;
       7: invokevirtual #105                // Method org/apache/coyote/http2/Stream$StreamInputBuffer.available:()I
      10: ireturn

  protected final void setRequestBody(org.apache.tomcat.util.buf.ByteChunk);
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #104                // Method org/apache/coyote/http2/Stream.getInputBuffer:()Lorg/apache/coyote/http2/Stream$StreamInputBuffer;
       7: aload_1
       8: invokevirtual #106                // Method org/apache/coyote/http2/Stream$StreamInputBuffer.insertReplayedBody:(Lorg/apache/tomcat/util/buf/ByteChunk;)V
      11: aload_0
      12: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      15: invokevirtual #107                // Method org/apache/coyote/http2/Stream.receivedEndOfStream:()V
      18: goto          22
      21: astore_2
      22: return
    Exception table:
       from    to  target type
          11    18    21   Class org/apache/coyote/http2/ConnectionException

  protected final void setSwallowResponse();
    Code:
       0: return

  protected final void disableSwallowRequest();
    Code:
       0: return

  protected void processSocketEvent(org.apache.tomcat.util.net.SocketEvent, boolean);
    Code:
       0: iload_2
       1: ifeq          16
       4: aload_0
       5: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
       8: aload_0
       9: aload_1
      10: invokevirtual #108                // Method org/apache/coyote/http2/Http2UpgradeHandler.processStreamOnContainerThread:(Lorg/apache/coyote/http2/StreamProcessor;Lorg/apache/tomcat/util/net/SocketEvent;)V
      13: goto          21
      16: aload_0
      17: aload_1
      18: invokevirtual #109                // Method process:(Lorg/apache/tomcat/util/net/SocketEvent;)V
      21: return

  protected final boolean isReadyForRead();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #104                // Method org/apache/coyote/http2/Stream.getInputBuffer:()Lorg/apache/coyote/http2/Stream$StreamInputBuffer;
       7: invokevirtual #110                // Method org/apache/coyote/http2/Stream$StreamInputBuffer.isReadyForRead:()Z
      10: ireturn

  protected final boolean isRequestBodyFullyRead();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #104                // Method org/apache/coyote/http2/Stream.getInputBuffer:()Lorg/apache/coyote/http2/Stream$StreamInputBuffer;
       7: invokevirtual #111                // Method org/apache/coyote/http2/Stream$StreamInputBuffer.isRequestBodyFullyRead:()Z
      10: ireturn

  protected final void registerReadInterest();
    Code:
       0: new           #112                // class java/lang/UnsupportedOperationException
       3: dup
       4: invokespecial #113                // Method java/lang/UnsupportedOperationException."<init>":()V
       7: athrow

  protected final boolean isReadyForWrite();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #114                // Method org/apache/coyote/http2/Stream.isReadyForWrite:()Z
       7: ireturn

  protected final void executeDispatches();
    Code:
       0: aload_0
       1: invokevirtual #115                // Method getIteratorAndClearDispatches:()Ljava/util/Iterator;
       4: astore_1
       5: aload_1
       6: ifnull        40
       9: aload_1
      10: invokeinterface #116,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      15: ifeq          40
      18: aload_1
      19: invokeinterface #117,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      24: checkcast     #118                // class org/apache/tomcat/util/net/DispatchType
      27: astore_2
      28: aload_0
      29: aload_2
      30: invokevirtual #119                // Method org/apache/tomcat/util/net/DispatchType.getSocketStatus:()Lorg/apache/tomcat/util/net/SocketEvent;
      33: iconst_1
      34: invokevirtual #120                // Method processSocketEvent:(Lorg/apache/tomcat/util/net/SocketEvent;Z)V
      37: goto          5
      40: return

  protected final boolean isPushSupported();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #121                // Method org/apache/coyote/http2/Stream.isPushSupported:()Z
       7: ireturn

  protected final void doPush(org.apache.coyote.Request);
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: aload_1
       5: invokevirtual #122                // Method org/apache/coyote/http2/Stream.push:(Lorg/apache/coyote/Request;)V
       8: goto          28
      11: astore_2
      12: aload_0
      13: getstatic     #101                // Field org/apache/coyote/ErrorState.CLOSE_CONNECTION_NOW:Lorg/apache/coyote/ErrorState;
      16: aload_2
      17: invokevirtual #102                // Method setErrorState:(Lorg/apache/coyote/ErrorState;Ljava/lang/Throwable;)V
      20: aload_0
      21: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
      24: aload_2
      25: invokevirtual #123                // Method org/apache/coyote/Response.setErrorException:(Ljava/lang/Exception;)V
      28: return
    Exception table:
       from    to  target type
           0     8    11   Class java/io/IOException

  protected boolean isTrailerFieldsReady();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #124                // Method org/apache/coyote/http2/Stream.isTrailerFieldsReady:()Z
       7: ireturn

  protected boolean isTrailerFieldsSupported();
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #125                // Method org/apache/coyote/http2/Stream.isTrailerFieldsSupported:()Z
       7: ireturn

  public final void recycle();
    Code:
       0: aload_0
       1: aconst_null
       2: invokevirtual #8                  // Method setSocketWrapper:(Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
       5: return

  protected final org.apache.juli.logging.Log getLog();
    Code:
       0: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
       3: areturn

  public final void pause();
    Code:
       0: return

  public final org.apache.tomcat.util.net.AbstractEndpoint$Handler$SocketState service(org.apache.tomcat.util.net.SocketWrapperBase<?>) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #126                // Field adapter:Lorg/apache/coyote/Adapter;
       4: aload_0
       5: getfield      #48                 // Field request:Lorg/apache/coyote/Request;
       8: aload_0
       9: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
      12: invokeinterface #127,  3          // InterfaceMethod org/apache/coyote/Adapter.service:(Lorg/apache/coyote/Request;Lorg/apache/coyote/Response;)V
      17: goto          67
      20: astore_2
      21: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
      24: invokeinterface #39,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
      29: ifeq          49
      32: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
      35: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      38: ldc           #128                // String streamProcessor.service.error
      40: invokevirtual #129                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      43: aload_2
      44: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      49: aload_0
      50: getfield      #43                 // Field response:Lorg/apache/coyote/Response;
      53: sipush        500
      56: invokevirtual #130                // Method org/apache/coyote/Response.setStatus:(I)V
      59: aload_0
      60: getstatic     #131                // Field org/apache/coyote/ErrorState.CLOSE_NOW:Lorg/apache/coyote/ErrorState;
      63: aload_2
      64: invokevirtual #102                // Method setErrorState:(Lorg/apache/coyote/ErrorState;Ljava/lang/Throwable;)V
      67: aload_0
      68: invokevirtual #132                // Method isAsync:()Z
      71: ifne          78
      74: aload_0
      75: invokespecial #133                // Method endRequest:()V
      78: aload_0
      79: getfield      #5                  // Field sendfileState:Lorg/apache/tomcat/util/net/SendfileState;
      82: getstatic     #94                 // Field org/apache/tomcat/util/net/SendfileState.PENDING:Lorg/apache/tomcat/util/net/SendfileState;
      85: if_acmpne     92
      88: getstatic     #134                // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.SENDFILE:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
      91: areturn
      92: aload_0
      93: invokevirtual #18                 // Method getErrorState:()Lorg/apache/coyote/ErrorState;
      96: invokevirtual #135                // Method org/apache/coyote/ErrorState.isError:()Z
      99: ifeq          121
     102: aload_0
     103: getstatic     #136                // Field org/apache/coyote/ActionCode.CLOSE:Lorg/apache/coyote/ActionCode;
     106: aconst_null
     107: invokevirtual #137                // Method action:(Lorg/apache/coyote/ActionCode;Ljava/lang/Object;)V
     110: aload_0
     111: getfield      #48                 // Field request:Lorg/apache/coyote/Request;
     114: invokevirtual #138                // Method org/apache/coyote/Request.updateCounters:()V
     117: getstatic     #10                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.CLOSED:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
     120: areturn
     121: aload_0
     122: invokevirtual #132                // Method isAsync:()Z
     125: ifeq          132
     128: getstatic     #13                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.LONG:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
     131: areturn
     132: aload_0
     133: getstatic     #136                // Field org/apache/coyote/ActionCode.CLOSE:Lorg/apache/coyote/ActionCode;
     136: aconst_null
     137: invokevirtual #137                // Method action:(Lorg/apache/coyote/ActionCode;Ljava/lang/Object;)V
     140: aload_0
     141: getfield      #48                 // Field request:Lorg/apache/coyote/Request;
     144: invokevirtual #138                // Method org/apache/coyote/Request.updateCounters:()V
     147: getstatic     #10                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.CLOSED:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
     150: areturn
    Exception table:
       from    to  target type
           0    17    20   Class java/lang/Exception

  protected final boolean flushBufferedWrite() throws java.io.IOException;
    Code:
       0: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
       3: invokeinterface #39,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
       8: ifeq          51
      11: getstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
      14: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      17: ldc           #139                // String streamProcessor.flushBufferedWrite.entry
      19: iconst_2
      20: anewarray     #23                 // class java/lang/Object
      23: dup
      24: iconst_0
      25: aload_0
      26: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      29: invokevirtual #24                 // Method org/apache/coyote/http2/Stream.getConnectionId:()Ljava/lang/String;
      32: aastore
      33: dup
      34: iconst_1
      35: aload_0
      36: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      39: invokevirtual #25                 // Method org/apache/coyote/http2/Stream.getIdentifier:()Ljava/lang/Integer;
      42: aastore
      43: invokevirtual #26                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      46: invokeinterface #140,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
      51: aload_0
      52: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      55: iconst_0
      56: invokevirtual #141                // Method org/apache/coyote/http2/Stream.flush:(Z)Z
      59: ifeq          82
      62: aload_0
      63: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      66: invokevirtual #114                // Method org/apache/coyote/http2/Stream.isReadyForWrite:()Z
      69: ifeq          80
      72: new           #142                // class java/lang/IllegalStateException
      75: dup
      76: invokespecial #143                // Method java/lang/IllegalStateException."<init>":()V
      79: athrow
      80: iconst_1
      81: ireturn
      82: iconst_0
      83: ireturn

  protected final org.apache.tomcat.util.net.AbstractEndpoint$Handler$SocketState dispatchEndRequest() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #133                // Method endRequest:()V
       4: getstatic     #10                 // Field org/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState.CLOSED:Lorg/apache/tomcat/util/net/AbstractEndpoint$Handler$SocketState;
       7: areturn

  private void endRequest() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
       4: invokevirtual #144                // Method org/apache/coyote/http2/Stream.isInputFinished:()Z
       7: ifne          99
      10: aload_0
      11: invokevirtual #18                 // Method getErrorState:()Lorg/apache/coyote/ErrorState;
      14: invokevirtual #30                 // Method org/apache/coyote/ErrorState.isIoAllowed:()Z
      17: ifeq          99
      20: aload_0
      21: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      24: invokevirtual #45                 // Method org/apache/coyote/http2/Http2UpgradeHandler.hasAsyncIO:()Z
      27: ifeq          41
      30: aload_0
      31: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      34: invokevirtual #145                // Method org/apache/coyote/http2/Stream.isContentLengthInconsistent:()Z
      37: ifne          41
      40: return
      41: new           #32                 // class org/apache/coyote/http2/StreamException
      44: dup
      45: getstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      48: ldc           #146                // String streamProcessor.cancel
      50: iconst_2
      51: anewarray     #23                 // class java/lang/Object
      54: dup
      55: iconst_0
      56: aload_0
      57: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      60: invokevirtual #24                 // Method org/apache/coyote/http2/Stream.getConnectionId:()Ljava/lang/String;
      63: aastore
      64: dup
      65: iconst_1
      66: aload_0
      67: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      70: invokevirtual #25                 // Method org/apache/coyote/http2/Stream.getIdentifier:()Ljava/lang/Integer;
      73: aastore
      74: invokevirtual #26                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      77: getstatic     #147                // Field org/apache/coyote/http2/Http2Error.CANCEL:Lorg/apache/coyote/http2/Http2Error;
      80: aload_0
      81: getfield      #7                  // Field stream:Lorg/apache/coyote/http2/Stream;
      84: invokevirtual #34                 // Method org/apache/coyote/http2/Stream.getIdAsInt:()I
      87: invokespecial #35                 // Method org/apache/coyote/http2/StreamException."<init>":(Ljava/lang/String;Lorg/apache/coyote/http2/Http2Error;I)V
      90: astore_1
      91: aload_0
      92: getfield      #6                  // Field handler:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      95: aload_1
      96: invokevirtual #148                // Method org/apache/coyote/http2/Http2UpgradeHandler.sendStreamReset:(Lorg/apache/coyote/http2/StreamException;)V
      99: return

  static {};
    Code:
       0: ldc           #149                // class org/apache/coyote/http2/StreamProcessor
       2: invokestatic  #150                // Method org/apache/juli/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/juli/logging/Log;
       5: putstatic     #38                 // Field log:Lorg/apache/juli/logging/Log;
       8: ldc           #149                // class org/apache/coyote/http2/StreamProcessor
      10: invokestatic  #151                // Method org/apache/tomcat/util/res/StringManager.getManager:(Ljava/lang/Class;)Lorg/apache/tomcat/util/res/StringManager;
      13: putstatic     #21                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      16: return
}

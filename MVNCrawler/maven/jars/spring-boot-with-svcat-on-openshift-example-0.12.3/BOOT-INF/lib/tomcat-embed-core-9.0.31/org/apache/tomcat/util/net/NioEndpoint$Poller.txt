Compiled from "NioEndpoint.java"
public class org.apache.tomcat.util.net.NioEndpoint$Poller implements java.lang.Runnable {
  private java.nio.channels.Selector selector;

  private final org.apache.tomcat.util.collections.SynchronizedQueue<org.apache.tomcat.util.net.NioEndpoint$PollerEvent> events;

  private volatile boolean close;

  private long nextExpiration;

  private java.util.concurrent.atomic.AtomicLong wakeupCounter;

  private volatile int keyCount;

  final org.apache.tomcat.util.net.NioEndpoint this$0;

  public org.apache.tomcat.util.net.NioEndpoint$Poller(org.apache.tomcat.util.net.NioEndpoint) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: new           #4                  // class org/apache/tomcat/util/collections/SynchronizedQueue
      13: dup
      14: invokespecial #5                  // Method org/apache/tomcat/util/collections/SynchronizedQueue."<init>":()V
      17: putfield      #6                  // Field events:Lorg/apache/tomcat/util/collections/SynchronizedQueue;
      20: aload_0
      21: iconst_0
      22: putfield      #7                  // Field close:Z
      25: aload_0
      26: lconst_0
      27: putfield      #8                  // Field nextExpiration:J
      30: aload_0
      31: new           #9                  // class java/util/concurrent/atomic/AtomicLong
      34: dup
      35: lconst_0
      36: invokespecial #10                 // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      39: putfield      #11                 // Field wakeupCounter:Ljava/util/concurrent/atomic/AtomicLong;
      42: aload_0
      43: iconst_0
      44: putfield      #12                 // Field keyCount:I
      47: aload_0
      48: invokestatic  #13                 // Method java/nio/channels/Selector.open:()Ljava/nio/channels/Selector;
      51: putfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      54: return

  public int getKeyCount();
    Code:
       0: aload_0
       1: getfield      #12                 // Field keyCount:I
       4: ireturn

  public java.nio.channels.Selector getSelector();
    Code:
       0: aload_0
       1: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
       4: areturn

  protected void destroy();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #7                  // Field close:Z
       5: aload_0
       6: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
       9: invokevirtual #15                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
      12: pop
      13: return

  private void addEvent(org.apache.tomcat.util.net.NioEndpoint$PollerEvent);
    Code:
       0: aload_0
       1: getfield      #6                  // Field events:Lorg/apache/tomcat/util/collections/SynchronizedQueue;
       4: aload_1
       5: invokevirtual #16                 // Method org/apache/tomcat/util/collections/SynchronizedQueue.offer:(Ljava/lang/Object;)Z
       8: pop
       9: aload_0
      10: getfield      #11                 // Field wakeupCounter:Ljava/util/concurrent/atomic/AtomicLong;
      13: invokevirtual #17                 // Method java/util/concurrent/atomic/AtomicLong.incrementAndGet:()J
      16: lconst_0
      17: lcmp
      18: ifne          29
      21: aload_0
      22: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      25: invokevirtual #15                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
      28: pop
      29: return

  public void add(org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper, int);
    Code:
       0: aconst_null
       1: astore_3
       2: aload_0
       3: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
       6: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
       9: ifnull        26
      12: aload_0
      13: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      16: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
      19: invokevirtual #19                 // Method org/apache/tomcat/util/collections/SynchronizedStack.pop:()Ljava/lang/Object;
      22: checkcast     #20                 // class org/apache/tomcat/util/net/NioEndpoint$PollerEvent
      25: astore_3
      26: aload_3
      27: ifnonnull     49
      30: new           #20                 // class org/apache/tomcat/util/net/NioEndpoint$PollerEvent
      33: dup
      34: aload_1
      35: invokevirtual #21                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getSocket:()Ljava/lang/Object;
      38: checkcast     #22                 // class org/apache/tomcat/util/net/NioChannel
      41: iload_2
      42: invokespecial #23                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent."<init>":(Lorg/apache/tomcat/util/net/NioChannel;I)V
      45: astore_3
      46: goto          61
      49: aload_3
      50: aload_1
      51: invokevirtual #21                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getSocket:()Ljava/lang/Object;
      54: checkcast     #22                 // class org/apache/tomcat/util/net/NioChannel
      57: iload_2
      58: invokevirtual #24                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent.reset:(Lorg/apache/tomcat/util/net/NioChannel;I)V
      61: aload_0
      62: aload_3
      63: invokespecial #25                 // Method addEvent:(Lorg/apache/tomcat/util/net/NioEndpoint$PollerEvent;)V
      66: aload_0
      67: getfield      #7                  // Field close:Z
      70: ifeq          86
      73: aload_0
      74: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      77: aload_1
      78: getstatic     #26                 // Field org/apache/tomcat/util/net/SocketEvent.STOP:Lorg/apache/tomcat/util/net/SocketEvent;
      81: iconst_0
      82: invokevirtual #27                 // Method org/apache/tomcat/util/net/NioEndpoint.processSocket:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;Z)Z
      85: pop
      86: return

  public boolean events();
    Code:
       0: iconst_0
       1: istore_1
       2: aconst_null
       3: astore_2
       4: iconst_0
       5: istore_3
       6: aload_0
       7: getfield      #6                  // Field events:Lorg/apache/tomcat/util/collections/SynchronizedQueue;
      10: invokevirtual #28                 // Method org/apache/tomcat/util/collections/SynchronizedQueue.size:()I
      13: istore        4
      15: iload_3
      16: iload         4
      18: if_icmpge     117
      21: aload_0
      22: getfield      #6                  // Field events:Lorg/apache/tomcat/util/collections/SynchronizedQueue;
      25: invokevirtual #29                 // Method org/apache/tomcat/util/collections/SynchronizedQueue.poll:()Ljava/lang/Object;
      28: checkcast     #20                 // class org/apache/tomcat/util/net/NioEndpoint$PollerEvent
      31: dup
      32: astore_2
      33: ifnull        117
      36: iconst_1
      37: istore_1
      38: aload_2
      39: invokevirtual #30                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent.run:()V
      42: aload_2
      43: invokevirtual #31                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent.reset:()V
      46: aload_0
      47: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      50: getfield      #32                 // Field org/apache/tomcat/util/net/NioEndpoint.running:Z
      53: ifeq          88
      56: aload_0
      57: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      60: getfield      #33                 // Field org/apache/tomcat/util/net/NioEndpoint.paused:Z
      63: ifne          88
      66: aload_0
      67: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      70: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
      73: ifnull        88
      76: aload_0
      77: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      80: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
      83: aload_2
      84: invokevirtual #34                 // Method org/apache/tomcat/util/collections/SynchronizedStack.push:(Ljava/lang/Object;)Z
      87: pop
      88: goto          111
      91: astore        5
      93: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
      96: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
      99: ldc           #38                 // String endpoint.nio.pollerEventError
     101: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     104: aload         5
     106: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     111: iinc          3, 1
     114: goto          15
     117: iload_1
     118: ireturn
    Exception table:
       from    to  target type
          38    88    91   Class java/lang/Throwable

  public void register(org.apache.tomcat.util.net.NioChannel, org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper);
    Code:
       0: aload_2
       1: iconst_1
       2: invokevirtual #42                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:(I)I
       5: pop
       6: aconst_null
       7: astore_3
       8: aload_0
       9: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      12: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
      15: ifnull        32
      18: aload_0
      19: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      22: invokestatic  #18                 // Method org/apache/tomcat/util/net/NioEndpoint.access$100:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/collections/SynchronizedStack;
      25: invokevirtual #19                 // Method org/apache/tomcat/util/collections/SynchronizedStack.pop:()Ljava/lang/Object;
      28: checkcast     #20                 // class org/apache/tomcat/util/net/NioEndpoint$PollerEvent
      31: astore_3
      32: aload_3
      33: ifnonnull     51
      36: new           #20                 // class org/apache/tomcat/util/net/NioEndpoint$PollerEvent
      39: dup
      40: aload_1
      41: sipush        256
      44: invokespecial #23                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent."<init>":(Lorg/apache/tomcat/util/net/NioChannel;I)V
      47: astore_3
      48: goto          59
      51: aload_3
      52: aload_1
      53: sipush        256
      56: invokevirtual #24                 // Method org/apache/tomcat/util/net/NioEndpoint$PollerEvent.reset:(Lorg/apache/tomcat/util/net/NioChannel;I)V
      59: aload_0
      60: aload_3
      61: invokespecial #25                 // Method addEvent:(Lorg/apache/tomcat/util/net/NioEndpoint$PollerEvent;)V
      64: return

  public void cancelledKey(java.nio.channels.SelectionKey, org.apache.tomcat.util.net.SocketWrapperBase<org.apache.tomcat.util.net.NioChannel>);
    Code:
       0: aload_1
       1: ifnull        21
       4: aload_1
       5: aconst_null
       6: invokevirtual #43                 // Method java/nio/channels/SelectionKey.attach:(Ljava/lang/Object;)Ljava/lang/Object;
       9: pop
      10: aload_1
      11: invokevirtual #44                 // Method java/nio/channels/SelectionKey.isValid:()Z
      14: ifeq          21
      17: aload_1
      18: invokevirtual #45                 // Method java/nio/channels/SelectionKey.cancel:()V
      21: aload_2
      22: ifnull        89
      25: aload_2
      26: invokevirtual #46                 // Method org/apache/tomcat/util/net/SocketWrapperBase.close:()V
      29: goto          89
      32: astore_3
      33: aload_3
      34: invokestatic  #47                 // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
      37: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
      40: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
      45: ifeq          65
      48: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
      51: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
      54: ldc           #49                 // String endpoint.debug.channelCloseFail
      56: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      59: aload_3
      60: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      65: aload_2
      66: ifnull        89
      69: aload_2
      70: invokevirtual #46                 // Method org/apache/tomcat/util/net/SocketWrapperBase.close:()V
      73: goto          89
      76: astore        4
      78: aload_2
      79: ifnull        86
      82: aload_2
      83: invokevirtual #46                 // Method org/apache/tomcat/util/net/SocketWrapperBase.close:()V
      86: aload         4
      88: athrow
      89: return
    Exception table:
       from    to  target type
           0    21    32   Class java/lang/Throwable
           0    21    76   any
          32    65    76   any
          76    78    76   any

  public void run();
    Code:
       0: iconst_0
       1: istore_1
       2: aload_0
       3: getfield      #7                  // Field close:Z
       6: ifne          69
       9: aload_0
      10: invokevirtual #50                 // Method events:()Z
      13: istore_1
      14: aload_0
      15: getfield      #11                 // Field wakeupCounter:Ljava/util/concurrent/atomic/AtomicLong;
      18: ldc2_w        #51                 // long -1l
      21: invokevirtual #53                 // Method java/util/concurrent/atomic/AtomicLong.getAndSet:(J)J
      24: lconst_0
      25: lcmp
      26: ifle          43
      29: aload_0
      30: aload_0
      31: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      34: invokevirtual #54                 // Method java/nio/channels/Selector.selectNow:()I
      37: putfield      #12                 // Field keyCount:I
      40: goto          61
      43: aload_0
      44: aload_0
      45: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      48: aload_0
      49: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
      52: invokestatic  #55                 // Method org/apache/tomcat/util/net/NioEndpoint.access$200:(Lorg/apache/tomcat/util/net/NioEndpoint;)J
      55: invokevirtual #56                 // Method java/nio/channels/Selector.select:(J)I
      58: putfield      #12                 // Field keyCount:I
      61: aload_0
      62: getfield      #11                 // Field wakeupCounter:Ljava/util/concurrent/atomic/AtomicLong;
      65: lconst_0
      66: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
      69: aload_0
      70: getfield      #7                  // Field close:Z
      73: ifeq          118
      76: aload_0
      77: invokevirtual #50                 // Method events:()Z
      80: pop
      81: aload_0
      82: iconst_0
      83: iconst_0
      84: invokevirtual #58                 // Method timeout:(IZ)V
      87: aload_0
      88: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      91: invokevirtual #59                 // Method java/nio/channels/Selector.close:()V
      94: goto          115
      97: astore_2
      98: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     101: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     104: ldc           #61                 // String endpoint.nio.selectorCloseFail
     106: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     109: aload_2
     110: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     115: goto          258
     118: goto          146
     121: astore_2
     122: aload_2
     123: invokestatic  #47                 // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     126: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     129: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     132: ldc           #62                 // String endpoint.nio.selectorLoopError
     134: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     137: aload_2
     138: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     143: goto          0
     146: aload_0
     147: getfield      #12                 // Field keyCount:I
     150: ifne          160
     153: iload_1
     154: aload_0
     155: invokevirtual #50                 // Method events:()Z
     158: ior
     159: istore_1
     160: aload_0
     161: getfield      #12                 // Field keyCount:I
     164: ifle          182
     167: aload_0
     168: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
     171: invokevirtual #63                 // Method java/nio/channels/Selector.selectedKeys:()Ljava/util/Set;
     174: invokeinterface #64,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     179: goto          183
     182: aconst_null
     183: astore_2
     184: aload_2
     185: ifnull        246
     188: aload_2
     189: invokeinterface #65,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     194: ifeq          246
     197: aload_2
     198: invokeinterface #66,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     203: checkcast     #41                 // class java/nio/channels/SelectionKey
     206: astore_3
     207: aload_3
     208: invokevirtual #67                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     211: checkcast     #68                 // class org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper
     214: astore        4
     216: aload         4
     218: ifnonnull     230
     221: aload_2
     222: invokeinterface #69,  1           // InterfaceMethod java/util/Iterator.remove:()V
     227: goto          243
     230: aload_2
     231: invokeinterface #69,  1           // InterfaceMethod java/util/Iterator.remove:()V
     236: aload_0
     237: aload_3
     238: aload         4
     240: invokevirtual #70                 // Method processKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)V
     243: goto          184
     246: aload_0
     247: aload_0
     248: getfield      #12                 // Field keyCount:I
     251: iload_1
     252: invokevirtual #58                 // Method timeout:(IZ)V
     255: goto          0
     258: aload_0
     259: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     262: invokevirtual #71                 // Method org/apache/tomcat/util/net/NioEndpoint.getStopLatch:()Ljava/util/concurrent/CountDownLatch;
     265: invokevirtual #72                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     268: return
    Exception table:
       from    to  target type
          87    94    97   Class java/io/IOException
           2   115   121   Class java/lang/Throwable

  protected void processKey(java.nio.channels.SelectionKey, org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper);
    Code:
       0: aload_0
       1: getfield      #7                  // Field close:Z
       4: ifeq          16
       7: aload_0
       8: aload_1
       9: aload_2
      10: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
      13: goto          276
      16: aload_1
      17: invokevirtual #44                 // Method java/nio/channels/SelectionKey.isValid:()Z
      20: ifeq          270
      23: aload_2
      24: ifnull        270
      27: aload_1
      28: invokevirtual #74                 // Method java/nio/channels/SelectionKey.isReadable:()Z
      31: ifne          41
      34: aload_1
      35: invokevirtual #75                 // Method java/nio/channels/SelectionKey.isWritable:()Z
      38: ifeq          276
      41: aload_2
      42: invokevirtual #76                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getSendfileData:()Lorg/apache/tomcat/util/net/NioEndpoint$SendfileData;
      45: ifnull        59
      48: aload_0
      49: aload_1
      50: aload_2
      51: iconst_0
      52: invokevirtual #77                 // Method processSendfile:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;Z)Lorg/apache/tomcat/util/net/SendfileState;
      55: pop
      56: goto          276
      59: aload_0
      60: aload_1
      61: aload_2
      62: aload_1
      63: invokevirtual #78                 // Method java/nio/channels/SelectionKey.readyOps:()I
      66: invokevirtual #79                 // Method unreg:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
      69: iconst_0
      70: istore_3
      71: aload_1
      72: invokevirtual #74                 // Method java/nio/channels/SelectionKey.isReadable:()Z
      75: ifeq          162
      78: aload_2
      79: getfield      #80                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.readOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
      82: ifnull        100
      85: aload_2
      86: getfield      #80                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.readOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
      89: invokevirtual #81                 // Method org/apache/tomcat/util/net/SocketWrapperBase$OperationState.process:()Z
      92: ifne          162
      95: iconst_1
      96: istore_3
      97: goto          162
     100: aload_2
     101: invokestatic  #82                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$300:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Z
     104: ifeq          145
     107: aload_2
     108: invokestatic  #83                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$400:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Ljava/lang/Object;
     111: dup
     112: astore        4
     114: monitorenter
     115: aload_2
     116: iconst_0
     117: invokestatic  #84                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$302:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;Z)Z
     120: pop
     121: aload_2
     122: invokestatic  #83                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$400:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Ljava/lang/Object;
     125: invokevirtual #85                 // Method java/lang/Object.notify:()V
     128: aload         4
     130: monitorexit
     131: goto          142
     134: astore        5
     136: aload         4
     138: monitorexit
     139: aload         5
     141: athrow
     142: goto          162
     145: aload_0
     146: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     149: aload_2
     150: getstatic     #86                 // Field org/apache/tomcat/util/net/SocketEvent.OPEN_READ:Lorg/apache/tomcat/util/net/SocketEvent;
     153: iconst_1
     154: invokevirtual #27                 // Method org/apache/tomcat/util/net/NioEndpoint.processSocket:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;Z)Z
     157: ifne          162
     160: iconst_1
     161: istore_3
     162: iload_3
     163: ifne          257
     166: aload_1
     167: invokevirtual #75                 // Method java/nio/channels/SelectionKey.isWritable:()Z
     170: ifeq          257
     173: aload_2
     174: getfield      #87                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.writeOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     177: ifnull        195
     180: aload_2
     181: getfield      #87                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.writeOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     184: invokevirtual #81                 // Method org/apache/tomcat/util/net/SocketWrapperBase$OperationState.process:()Z
     187: ifne          257
     190: iconst_1
     191: istore_3
     192: goto          257
     195: aload_2
     196: invokestatic  #88                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$500:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Z
     199: ifeq          240
     202: aload_2
     203: invokestatic  #89                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$600:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Ljava/lang/Object;
     206: dup
     207: astore        4
     209: monitorenter
     210: aload_2
     211: iconst_0
     212: invokestatic  #90                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$502:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;Z)Z
     215: pop
     216: aload_2
     217: invokestatic  #89                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.access$600:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;)Ljava/lang/Object;
     220: invokevirtual #85                 // Method java/lang/Object.notify:()V
     223: aload         4
     225: monitorexit
     226: goto          237
     229: astore        6
     231: aload         4
     233: monitorexit
     234: aload         6
     236: athrow
     237: goto          257
     240: aload_0
     241: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     244: aload_2
     245: getstatic     #91                 // Field org/apache/tomcat/util/net/SocketEvent.OPEN_WRITE:Lorg/apache/tomcat/util/net/SocketEvent;
     248: iconst_1
     249: invokevirtual #27                 // Method org/apache/tomcat/util/net/NioEndpoint.processSocket:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;Z)Z
     252: ifne          257
     255: iconst_1
     256: istore_3
     257: iload_3
     258: ifeq          267
     261: aload_0
     262: aload_1
     263: aload_2
     264: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     267: goto          276
     270: aload_0
     271: aload_1
     272: aload_2
     273: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     276: goto          311
     279: astore_3
     280: aload_0
     281: aload_1
     282: aload_2
     283: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     286: goto          311
     289: astore_3
     290: aload_3
     291: invokestatic  #47                 // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     294: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     297: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     300: ldc           #93                 // String endpoint.nio.keyProcessingError
     302: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     305: aload_3
     306: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     311: return
    Exception table:
       from    to  target type
         115   131   134   any
         134   139   134   any
         210   226   229   any
         229   234   229   any
           0   276   279   Class java/nio/channels/CancelledKeyException
           0   276   289   Class java/lang/Throwable

  public org.apache.tomcat.util.net.SendfileState processSendfile(java.nio.channels.SelectionKey, org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper, boolean);
    Code:
       0: aconst_null
       1: astore        4
       3: aload_0
       4: aload_1
       5: aload_2
       6: aload_1
       7: invokevirtual #78                 // Method java/nio/channels/SelectionKey.readyOps:()I
      10: invokevirtual #79                 // Method unreg:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
      13: aload_2
      14: invokevirtual #76                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getSendfileData:()Lorg/apache/tomcat/util/net/NioEndpoint$SendfileData;
      17: astore        5
      19: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
      22: invokeinterface #94,  1           // InterfaceMethod org/apache/juli/logging/Log.isTraceEnabled:()Z
      27: ifeq          61
      30: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
      33: new           #95                 // class java/lang/StringBuilder
      36: dup
      37: invokespecial #96                 // Method java/lang/StringBuilder."<init>":()V
      40: ldc           #97                 // String Processing send file for:
      42: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      45: aload         5
      47: getfield      #99                 // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fileName:Ljava/lang/String;
      50: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      53: invokevirtual #100                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      56: invokeinterface #101,  2          // InterfaceMethod org/apache/juli/logging/Log.trace:(Ljava/lang/Object;)V
      61: aload         5
      63: getfield      #102                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fchannel:Ljava/nio/channels/FileChannel;
      66: ifnonnull     104
      69: new           #103                // class java/io/File
      72: dup
      73: aload         5
      75: getfield      #99                 // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fileName:Ljava/lang/String;
      78: invokespecial #104                // Method java/io/File."<init>":(Ljava/lang/String;)V
      81: astore        6
      83: new           #105                // class java/io/FileInputStream
      86: dup
      87: aload         6
      89: invokespecial #106                // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      92: astore        7
      94: aload         5
      96: aload         7
      98: invokevirtual #107                // Method java/io/FileInputStream.getChannel:()Ljava/nio/channels/FileChannel;
     101: putfield      #102                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fchannel:Ljava/nio/channels/FileChannel;
     104: aload_2
     105: invokevirtual #21                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getSocket:()Ljava/lang/Object;
     108: checkcast     #22                 // class org/apache/tomcat/util/net/NioChannel
     111: astore        4
     113: aload         4
     115: instanceof    #108                // class org/apache/tomcat/util/net/SecureNioChannel
     118: ifeq          126
     121: aload         4
     123: goto          131
     126: aload         4
     128: invokevirtual #109                // Method org/apache/tomcat/util/net/NioChannel.getIOChannel:()Ljava/nio/channels/SocketChannel;
     131: astore        6
     133: aload         4
     135: invokevirtual #110                // Method org/apache/tomcat/util/net/NioChannel.getOutboundRemaining:()I
     138: ifle          156
     141: aload         4
     143: invokevirtual #111                // Method org/apache/tomcat/util/net/NioChannel.flushOutbound:()Z
     146: ifeq          249
     149: aload_2
     150: invokevirtual #112                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.updateLastWrite:()V
     153: goto          249
     156: aload         5
     158: getfield      #102                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fchannel:Ljava/nio/channels/FileChannel;
     161: aload         5
     163: getfield      #113                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.pos:J
     166: aload         5
     168: getfield      #114                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.length:J
     171: aload         6
     173: invokevirtual #115                // Method java/nio/channels/FileChannel.transferTo:(JJLjava/nio/channels/WritableByteChannel;)J
     176: lstore        7
     178: lload         7
     180: lconst_0
     181: lcmp
     182: ifle          216
     185: aload         5
     187: dup
     188: getfield      #113                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.pos:J
     191: lload         7
     193: ladd
     194: putfield      #113                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.pos:J
     197: aload         5
     199: dup
     200: getfield      #114                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.length:J
     203: lload         7
     205: lsub
     206: putfield      #114                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.length:J
     209: aload_2
     210: invokevirtual #112                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.updateLastWrite:()V
     213: goto          249
     216: aload         5
     218: getfield      #102                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fchannel:Ljava/nio/channels/FileChannel;
     221: invokevirtual #116                // Method java/nio/channels/FileChannel.size:()J
     224: aload         5
     226: getfield      #113                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.pos:J
     229: lcmp
     230: ifgt          249
     233: new           #60                 // class java/io/IOException
     236: dup
     237: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     240: ldc           #117                // String endpoint.sendfile.tooMuchData
     242: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     245: invokespecial #118                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     248: athrow
     249: aload         5
     251: getfield      #114                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.length:J
     254: lconst_0
     255: lcmp
     256: ifgt          487
     259: aload         4
     261: invokevirtual #110                // Method org/apache/tomcat/util/net/NioChannel.getOutboundRemaining:()I
     264: ifgt          487
     267: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     270: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     275: ifeq          309
     278: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     281: new           #95                 // class java/lang/StringBuilder
     284: dup
     285: invokespecial #96                 // Method java/lang/StringBuilder."<init>":()V
     288: ldc           #119                // String Send file complete for:
     290: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     293: aload         5
     295: getfield      #99                 // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fileName:Ljava/lang/String;
     298: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     301: invokevirtual #100                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     304: invokeinterface #120,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     309: aload_2
     310: aconst_null
     311: invokevirtual #121                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.setSendfileData:(Lorg/apache/tomcat/util/net/NioEndpoint$SendfileData;)V
     314: aload         5
     316: getfield      #102                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fchannel:Ljava/nio/channels/FileChannel;
     319: invokevirtual #122                // Method java/nio/channels/FileChannel.close:()V
     322: goto          327
     325: astore        7
     327: iload_3
     328: ifne          483
     331: getstatic     #124                // Field org/apache/tomcat/util/net/NioEndpoint$1.$SwitchMap$org$apache$tomcat$util$net$SendfileKeepAliveState:[I
     334: aload         5
     336: getfield      #125                // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.keepAliveState:Lorg/apache/tomcat/util/net/SendfileKeepAliveState;
     339: invokevirtual #126                // Method org/apache/tomcat/util/net/SendfileKeepAliveState.ordinal:()I
     342: iaload
     343: tableswitch   { // 1 to 3
                     1: 368
                     2: 404
                     3: 455
               default: 483
          }
     368: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     371: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     376: ifeq          389
     379: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     382: ldc           #127                // String Send file connection is being closed
     384: invokeinterface #120,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     389: aload_0
     390: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     393: invokestatic  #128                // Method org/apache/tomcat/util/net/NioEndpoint.access$700:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/net/NioEndpoint$Poller;
     396: aload_1
     397: aload_2
     398: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     401: goto          483
     404: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     407: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     412: ifeq          425
     415: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     418: ldc           #129                // String Connection is keep alive, processing pipe-lined data
     420: invokeinterface #120,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     425: aload_0
     426: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     429: aload_2
     430: getstatic     #86                 // Field org/apache/tomcat/util/net/SocketEvent.OPEN_READ:Lorg/apache/tomcat/util/net/SocketEvent;
     433: iconst_1
     434: invokevirtual #27                 // Method org/apache/tomcat/util/net/NioEndpoint.processSocket:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;Z)Z
     437: ifne          483
     440: aload_0
     441: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     444: invokestatic  #128                // Method org/apache/tomcat/util/net/NioEndpoint.access$700:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/net/NioEndpoint$Poller;
     447: aload_1
     448: aload_2
     449: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     452: goto          483
     455: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     458: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     463: ifeq          476
     466: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     469: ldc           #130                // String Connection is keep alive, registering back for OP_READ
     471: invokeinterface #120,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     476: aload_0
     477: aload_1
     478: aload_2
     479: iconst_1
     480: invokevirtual #131                // Method reg:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
     483: getstatic     #132                // Field org/apache/tomcat/util/net/SendfileState.DONE:Lorg/apache/tomcat/util/net/SendfileState;
     486: areturn
     487: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     490: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     495: ifeq          529
     498: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     501: new           #95                 // class java/lang/StringBuilder
     504: dup
     505: invokespecial #96                 // Method java/lang/StringBuilder."<init>":()V
     508: ldc           #133                // String OP_WRITE for sendfile:
     510: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     513: aload         5
     515: getfield      #99                 // Field org/apache/tomcat/util/net/NioEndpoint$SendfileData.fileName:Ljava/lang/String;
     518: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     521: invokevirtual #100                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     524: invokeinterface #120,  2          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     529: iload_3
     530: ifeq          542
     533: aload_0
     534: aload_2
     535: iconst_4
     536: invokevirtual #134                // Method add:(Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
     539: goto          549
     542: aload_0
     543: aload_1
     544: aload_2
     545: iconst_4
     546: invokevirtual #131                // Method reg:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
     549: getstatic     #135                // Field org/apache/tomcat/util/net/SendfileState.PENDING:Lorg/apache/tomcat/util/net/SendfileState;
     552: areturn
     553: astore        5
     555: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     558: invokeinterface #48,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     563: ifeq          578
     566: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     569: ldc           #136                // String Unable to complete sendfile request:
     571: aload         5
     573: invokeinterface #137,  3          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     578: iload_3
     579: ifne          599
     582: aload         4
     584: ifnull        599
     587: aload_0
     588: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     591: invokestatic  #128                // Method org/apache/tomcat/util/net/NioEndpoint.access$700:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/net/NioEndpoint$Poller;
     594: aload_1
     595: aload_2
     596: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     599: getstatic     #138                // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
     602: areturn
     603: astore        5
     605: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     608: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     611: ldc           #139                // String endpoint.sendfile.error
     613: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     616: aload         5
     618: invokeinterface #40,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     623: iload_3
     624: ifne          644
     627: aload         4
     629: ifnull        644
     632: aload_0
     633: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     636: invokestatic  #128                // Method org/apache/tomcat/util/net/NioEndpoint.access$700:(Lorg/apache/tomcat/util/net/NioEndpoint;)Lorg/apache/tomcat/util/net/NioEndpoint$Poller;
     639: aload_1
     640: aload_2
     641: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     644: getstatic     #138                // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
     647: areturn
    Exception table:
       from    to  target type
         314   322   325   Class java/lang/Exception
           3   486   553   Class java/io/IOException
         487   552   553   Class java/io/IOException
           3   486   603   Class java/lang/Throwable
         487   552   603   Class java/lang/Throwable

  protected void unreg(java.nio.channels.SelectionKey, org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper, int);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_1
       4: invokevirtual #140                // Method java/nio/channels/SelectionKey.interestOps:()I
       7: iload_3
       8: iconst_m1
       9: ixor
      10: iand
      11: invokevirtual #131                // Method reg:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper;I)V
      14: return

  protected void reg(java.nio.channels.SelectionKey, org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper, int);
    Code:
       0: aload_1
       1: iload_3
       2: invokevirtual #141                // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
       5: pop
       6: aload_2
       7: iload_3
       8: invokevirtual #42                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:(I)I
      11: pop
      12: return

  protected void timeout(int, boolean);
    Code:
       0: invokestatic  #142                // Method java/lang/System.currentTimeMillis:()J
       3: lstore_3
       4: aload_0
       5: getfield      #8                  // Field nextExpiration:J
       8: lconst_0
       9: lcmp
      10: ifle          38
      13: iload_1
      14: ifgt          21
      17: iload_2
      18: ifeq          38
      21: lload_3
      22: aload_0
      23: getfield      #8                  // Field nextExpiration:J
      26: lcmp
      27: ifge          38
      30: aload_0
      31: getfield      #7                  // Field close:Z
      34: ifne          38
      37: return
      38: iconst_0
      39: istore        5
      41: aload_0
      42: getfield      #14                 // Field selector:Ljava/nio/channels/Selector;
      45: invokevirtual #143                // Method java/nio/channels/Selector.keys:()Ljava/util/Set;
      48: invokeinterface #64,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      53: astore        6
      55: aload         6
      57: invokeinterface #65,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      62: ifeq          412
      65: aload         6
      67: invokeinterface #66,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      72: checkcast     #41                 // class java/nio/channels/SelectionKey
      75: astore        7
      77: iinc          5, 1
      80: aload         7
      82: invokevirtual #67                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
      85: checkcast     #68                 // class org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper
      88: astore        8
      90: aload         8
      92: ifnonnull     105
      95: aload_0
      96: aload         7
      98: aconst_null
      99: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     102: goto          390
     105: aload_0
     106: getfield      #7                  // Field close:Z
     109: ifeq          137
     112: aload         7
     114: iconst_0
     115: invokevirtual #141                // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     118: pop
     119: aload         8
     121: iconst_0
     122: invokevirtual #42                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:(I)I
     125: pop
     126: aload_0
     127: aload         7
     129: aload         8
     131: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     134: goto          390
     137: aload         8
     139: invokevirtual #144                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:()I
     142: iconst_1
     143: iand
     144: iconst_1
     145: if_icmpeq     159
     148: aload         8
     150: invokevirtual #144                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:()I
     153: iconst_4
     154: iand
     155: iconst_4
     156: if_icmpne     390
     159: iconst_0
     160: istore        9
     162: iconst_0
     163: istore        10
     165: aload         8
     167: invokevirtual #144                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:()I
     170: iconst_1
     171: iand
     172: iconst_1
     173: if_icmpne     210
     176: lload_3
     177: aload         8
     179: invokevirtual #145                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getLastRead:()J
     182: lsub
     183: lstore        11
     185: aload         8
     187: invokevirtual #146                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getReadTimeout:()J
     190: lstore        13
     192: lload         13
     194: lconst_0
     195: lcmp
     196: ifle          210
     199: lload         11
     201: lload         13
     203: lcmp
     204: ifle          210
     207: iconst_1
     208: istore        9
     210: iload         9
     212: ifne          260
     215: aload         8
     217: invokevirtual #144                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:()I
     220: iconst_4
     221: iand
     222: iconst_4
     223: if_icmpne     260
     226: lload_3
     227: aload         8
     229: invokevirtual #147                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getLastWrite:()J
     232: lsub
     233: lstore        11
     235: aload         8
     237: invokevirtual #148                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.getWriteTimeout:()J
     240: lstore        13
     242: lload         13
     244: lconst_0
     245: lcmp
     246: ifle          260
     249: lload         11
     251: lload         13
     253: lcmp
     254: ifle          260
     257: iconst_1
     258: istore        10
     260: iload         9
     262: ifne          270
     265: iload         10
     267: ifeq          390
     270: aload         7
     272: iconst_0
     273: invokevirtual #141                // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     276: pop
     277: aload         8
     279: iconst_0
     280: invokevirtual #42                 // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.interestOps:(I)I
     283: pop
     284: aload         8
     286: new           #149                // class java/net/SocketTimeoutException
     289: dup
     290: invokespecial #150                // Method java/net/SocketTimeoutException."<init>":()V
     293: invokevirtual #151                // Method org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.setError:(Ljava/io/IOException;)V
     296: iload         9
     298: ifeq          331
     301: aload         8
     303: getfield      #80                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.readOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     306: ifnull        331
     309: aload         8
     311: getfield      #80                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.readOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     314: invokevirtual #81                 // Method org/apache/tomcat/util/net/SocketWrapperBase$OperationState.process:()Z
     317: ifne          390
     320: aload_0
     321: aload         7
     323: aload         8
     325: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     328: goto          390
     331: iload         10
     333: ifeq          366
     336: aload         8
     338: getfield      #87                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.writeOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     341: ifnull        366
     344: aload         8
     346: getfield      #87                 // Field org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper.writeOperation:Lorg/apache/tomcat/util/net/SocketWrapperBase$OperationState;
     349: invokevirtual #81                 // Method org/apache/tomcat/util/net/SocketWrapperBase$OperationState.process:()Z
     352: ifne          390
     355: aload_0
     356: aload         7
     358: aload         8
     360: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     363: goto          390
     366: aload_0
     367: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     370: aload         8
     372: getstatic     #152                // Field org/apache/tomcat/util/net/SocketEvent.ERROR:Lorg/apache/tomcat/util/net/SocketEvent;
     375: iconst_1
     376: invokevirtual #27                 // Method org/apache/tomcat/util/net/NioEndpoint.processSocket:(Lorg/apache/tomcat/util/net/SocketWrapperBase;Lorg/apache/tomcat/util/net/SocketEvent;Z)Z
     379: ifne          390
     382: aload_0
     383: aload         7
     385: aload         8
     387: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     390: goto          409
     393: astore        8
     395: aload_0
     396: aload         7
     398: aload         7
     400: invokevirtual #67                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     403: checkcast     #68                 // class org/apache/tomcat/util/net/NioEndpoint$NioSocketWrapper
     406: invokevirtual #73                 // Method cancelledKey:(Ljava/nio/channels/SelectionKey;Lorg/apache/tomcat/util/net/SocketWrapperBase;)V
     409: goto          55
     412: goto          435
     415: astore        6
     417: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     420: getstatic     #37                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     423: ldc           #154                // String endpoint.nio.timeoutCme
     425: invokevirtual #39                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     428: aload         6
     430: invokeinterface #155,  3          // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     435: aload_0
     436: getfield      #8                  // Field nextExpiration:J
     439: lstore        6
     441: aload_0
     442: invokestatic  #142                // Method java/lang/System.currentTimeMillis:()J
     445: aload_0
     446: getfield      #2                  // Field this$0:Lorg/apache/tomcat/util/net/NioEndpoint;
     449: getfield      #156                // Field org/apache/tomcat/util/net/NioEndpoint.socketProperties:Lorg/apache/tomcat/util/net/SocketProperties;
     452: invokevirtual #157                // Method org/apache/tomcat/util/net/SocketProperties.getTimeoutInterval:()J
     455: ladd
     456: putfield      #8                  // Field nextExpiration:J
     459: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     462: invokeinterface #94,  1           // InterfaceMethod org/apache/juli/logging/Log.isTraceEnabled:()Z
     467: ifeq          570
     470: invokestatic  #36                 // Method org/apache/tomcat/util/net/NioEndpoint.access$000:()Lorg/apache/juli/logging/Log;
     473: new           #95                 // class java/lang/StringBuilder
     476: dup
     477: invokespecial #96                 // Method java/lang/StringBuilder."<init>":()V
     480: ldc           #158                // String timeout completed: keys processed=
     482: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     485: iload         5
     487: invokevirtual #159                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     490: ldc           #160                // String ; now=
     492: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     495: lload_3
     496: invokevirtual #161                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     499: ldc           #162                // String ; nextExpiration=
     501: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     504: lload         6
     506: invokevirtual #161                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     509: ldc           #163                // String ; keyCount=
     511: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     514: iload_1
     515: invokevirtual #159                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     518: ldc           #164                // String ; hasEvents=
     520: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     523: iload_2
     524: invokevirtual #165                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     527: ldc           #166                // String ; eval=
     529: invokevirtual #98                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     532: lload_3
     533: lload         6
     535: lcmp
     536: ifge          558
     539: iload_1
     540: ifgt          547
     543: iload_2
     544: ifeq          558
     547: aload_0
     548: getfield      #7                  // Field close:Z
     551: ifne          558
     554: iconst_1
     555: goto          559
     558: iconst_0
     559: invokevirtual #165                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     562: invokevirtual #100                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     565: invokeinterface #101,  2          // InterfaceMethod org/apache/juli/logging/Log.trace:(Ljava/lang/Object;)V
     570: return
    Exception table:
       from    to  target type
          80   390   393   Class java/nio/channels/CancelledKeyException
          41   412   415   Class java/util/ConcurrentModificationException
}

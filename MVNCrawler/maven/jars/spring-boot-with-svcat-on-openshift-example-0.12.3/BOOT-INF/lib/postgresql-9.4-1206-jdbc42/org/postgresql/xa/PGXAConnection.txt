Compiled from "PGXAConnection.java"
public class org.postgresql.xa.PGXAConnection extends org.postgresql.ds.PGPooledConnection implements javax.sql.XAConnection,javax.transaction.xa.XAResource {
  private final org.postgresql.core.BaseConnection conn;

  private final org.postgresql.core.Logger logger;

  private javax.transaction.xa.Xid currentXid;

  private int state;

  private static final int STATE_IDLE;

  private static final int STATE_ACTIVE;

  private static final int STATE_ENDED;

  private boolean localAutoCommitMode;

  private void debug(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: new           #3                  // class java/lang/StringBuilder
       7: dup
       8: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #5                  // String XAResource
      13: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_0
      17: invokevirtual #7                  // Method java/lang/Object.hashCode:()I
      20: invokestatic  #8                  // Method java/lang/Integer.toHexString:(I)Ljava/lang/String;
      23: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: ldc           #9                  // String :
      28: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      31: aload_1
      32: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      38: invokevirtual #11                 // Method org/postgresql/core/Logger.debug:(Ljava/lang/String;)V
      41: return

  public org.postgresql.xa.PGXAConnection(org.postgresql.core.BaseConnection) throws java.sql.SQLException;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_1
       3: iconst_1
       4: invokespecial #12                 // Method org/postgresql/ds/PGPooledConnection."<init>":(Ljava/sql/Connection;ZZ)V
       7: aload_0
       8: iconst_1
       9: putfield      #13                 // Field localAutoCommitMode:Z
      12: aload_0
      13: aload_1
      14: putfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      17: aload_0
      18: iconst_0
      19: putfield      #1                  // Field state:I
      22: aload_0
      23: aload_1
      24: invokeinterface #16,  1           // InterfaceMethod org/postgresql/core/BaseConnection.getLogger:()Lorg/postgresql/core/Logger;
      29: putfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
      32: return

  public java.sql.Connection getConnection() throws java.sql.SQLException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          16
      10: aload_0
      11: ldc           #18                 // String PGXAConnection.getConnection called
      13: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      16: aload_0
      17: invokespecial #20                 // Method org/postgresql/ds/PGPooledConnection.getConnection:()Ljava/sql/Connection;
      20: astore_1
      21: aload_0
      22: getfield      #1                  // Field state:I
      25: ifne          35
      28: aload_1
      29: iconst_1
      30: invokeinterface #21,  2           // InterfaceMethod java/sql/Connection.setAutoCommit:(Z)V
      35: new           #22                 // class org/postgresql/xa/PGXAConnection$ConnectionHandler
      38: dup
      39: aload_0
      40: aload_1
      41: invokespecial #23                 // Method org/postgresql/xa/PGXAConnection$ConnectionHandler."<init>":(Lorg/postgresql/xa/PGXAConnection;Ljava/sql/Connection;)V
      44: astore_2
      45: aload_0
      46: invokevirtual #24                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      49: invokevirtual #25                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      52: iconst_2
      53: anewarray     #26                 // class java/lang/Class
      56: dup
      57: iconst_0
      58: ldc           #27                 // class java/sql/Connection
      60: aastore
      61: dup
      62: iconst_1
      63: ldc           #28                 // class org/postgresql/PGConnection
      65: aastore
      66: aload_2
      67: invokestatic  #29                 // Method java/lang/reflect/Proxy.newProxyInstance:(Ljava/lang/ClassLoader;[Ljava/lang/Class;Ljava/lang/reflect/InvocationHandler;)Ljava/lang/Object;
      70: checkcast     #27                 // class java/sql/Connection
      73: areturn

  public javax.transaction.xa.XAResource getXAResource();
    Code:
       0: aload_0
       1: areturn

  public void start(javax.transaction.xa.Xid, int) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          33
      10: aload_0
      11: new           #3                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #30                 // String starting transaction xid =
      20: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_1
      24: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      27: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      30: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      33: iload_2
      34: ifeq          64
      37: iload_2
      38: ldc           #33                 // int 134217728
      40: if_icmpeq     64
      43: iload_2
      44: ldc           #34                 // int 2097152
      46: if_icmpeq     64
      49: new           #35                 // class org/postgresql/xa/PGXAException
      52: dup
      53: ldc           #36                 // String Invalid flags
      55: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      58: bipush        -5
      60: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      63: athrow
      64: aload_1
      65: ifnonnull     83
      68: new           #35                 // class org/postgresql/xa/PGXAException
      71: dup
      72: ldc           #40                 // String xid must not be null
      74: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      77: bipush        -5
      79: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      82: athrow
      83: aload_0
      84: getfield      #1                  // Field state:I
      87: iconst_1
      88: if_icmpne     106
      91: new           #35                 // class org/postgresql/xa/PGXAException
      94: dup
      95: ldc           #41                 // String Connection is busy with another transaction
      97: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     100: bipush        -6
     102: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     105: athrow
     106: iload_2
     107: ldc           #33                 // int 134217728
     109: if_icmpne     127
     112: new           #35                 // class org/postgresql/xa/PGXAException
     115: dup
     116: ldc           #42                 // String suspend/resume not implemented
     118: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     121: bipush        -3
     123: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     126: athrow
     127: iload_2
     128: ldc           #34                 // int 2097152
     130: if_icmpne     182
     133: aload_0
     134: getfield      #1                  // Field state:I
     137: iconst_2
     138: if_icmpeq     156
     141: new           #35                 // class org/postgresql/xa/PGXAException
     144: dup
     145: ldc           #43                 // String Transaction interleaving not implemented
     147: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     150: bipush        -3
     152: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     155: athrow
     156: aload_1
     157: aload_0
     158: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
     161: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     164: ifne          205
     167: new           #35                 // class org/postgresql/xa/PGXAException
     170: dup
     171: ldc           #43                 // String Transaction interleaving not implemented
     173: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     176: bipush        -3
     178: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     181: athrow
     182: aload_0
     183: getfield      #1                  // Field state:I
     186: iconst_2
     187: if_icmpne     205
     190: new           #35                 // class org/postgresql/xa/PGXAException
     193: dup
     194: ldc           #43                 // String Transaction interleaving not implemented
     196: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     199: bipush        -3
     201: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     204: athrow
     205: aload_0
     206: aload_0
     207: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     210: invokeinterface #46,  1           // InterfaceMethod org/postgresql/core/BaseConnection.getAutoCommit:()Z
     215: putfield      #13                 // Field localAutoCommitMode:Z
     218: aload_0
     219: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     222: iconst_0
     223: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
     228: goto          248
     231: astore_3
     232: new           #35                 // class org/postgresql/xa/PGXAException
     235: dup
     236: ldc           #49                 // String Error disabling autocommit
     238: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     241: aload_3
     242: bipush        -3
     244: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     247: athrow
     248: aload_0
     249: iconst_1
     250: putfield      #1                  // Field state:I
     253: aload_0
     254: aload_1
     255: putfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
     258: return
    Exception table:
       from    to  target type
         205   228   231   Class java/sql/SQLException

  public void end(javax.transaction.xa.Xid, int) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          33
      10: aload_0
      11: new           #3                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #51                 // String ending transaction xid =
      20: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_1
      24: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      27: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      30: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      33: iload_2
      34: ldc           #52                 // int 33554432
      36: if_icmpeq     66
      39: iload_2
      40: ldc           #53                 // int 536870912
      42: if_icmpeq     66
      45: iload_2
      46: ldc           #54                 // int 67108864
      48: if_icmpeq     66
      51: new           #35                 // class org/postgresql/xa/PGXAException
      54: dup
      55: ldc           #36                 // String Invalid flags
      57: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      60: bipush        -5
      62: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      65: athrow
      66: aload_1
      67: ifnonnull     85
      70: new           #35                 // class org/postgresql/xa/PGXAException
      73: dup
      74: ldc           #40                 // String xid must not be null
      76: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      79: bipush        -5
      81: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      84: athrow
      85: aload_0
      86: getfield      #1                  // Field state:I
      89: iconst_1
      90: if_icmpne     104
      93: aload_0
      94: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      97: aload_1
      98: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     101: ifne          119
     104: new           #35                 // class org/postgresql/xa/PGXAException
     107: dup
     108: ldc           #55                 // String tried to call end without corresponding start call
     110: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     113: bipush        -6
     115: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     118: athrow
     119: iload_2
     120: ldc           #52                 // int 33554432
     122: if_icmpne     140
     125: new           #35                 // class org/postgresql/xa/PGXAException
     128: dup
     129: ldc           #42                 // String suspend/resume not implemented
     131: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     134: bipush        -3
     136: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     139: athrow
     140: aload_0
     141: iconst_2
     142: putfield      #1                  // Field state:I
     145: return

  public int prepare(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          33
      10: aload_0
      11: new           #3                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #56                 // String preparing transaction xid =
      20: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_1
      24: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      27: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      30: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      33: aload_0
      34: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      37: aload_1
      38: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      41: ifne          59
      44: new           #35                 // class org/postgresql/xa/PGXAException
      47: dup
      48: ldc           #57                 // String Not implemented: Prepare must be issued using the same connection that started the transaction
      50: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      53: bipush        -3
      55: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      58: athrow
      59: aload_0
      60: getfield      #1                  // Field state:I
      63: iconst_2
      64: if_icmpeq     82
      67: new           #35                 // class org/postgresql/xa/PGXAException
      70: dup
      71: ldc           #58                 // String Prepare called before end
      73: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      76: bipush        -5
      78: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      81: athrow
      82: aload_0
      83: iconst_0
      84: putfield      #1                  // Field state:I
      87: aload_0
      88: aconst_null
      89: putfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      92: aload_0
      93: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      96: getstatic     #59                 // Field org/postgresql/core/ServerVersion.v8_1:Lorg/postgresql/core/ServerVersion;
      99: invokeinterface #60,  2           // InterfaceMethod org/postgresql/core/BaseConnection.haveMinimumServerVersion:(Lorg/postgresql/core/Version;)Z
     104: ifne          122
     107: new           #35                 // class org/postgresql/xa/PGXAException
     110: dup
     111: ldc           #61                 // String Server versions prior to 8.1 do not support two-phase commit.
     113: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     116: bipush        -3
     118: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
     121: athrow
     122: aload_1
     123: invokestatic  #62                 // Method org/postgresql/xa/RecoveredXid.xidToString:(Ljavax/transaction/xa/Xid;)Ljava/lang/String;
     126: astore_2
     127: aload_0
     128: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     131: invokeinterface #63,  1           // InterfaceMethod org/postgresql/core/BaseConnection.createStatement:()Ljava/sql/Statement;
     136: astore_3
     137: aload_3
     138: new           #3                  // class java/lang/StringBuilder
     141: dup
     142: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
     145: ldc           #64                 // String PREPARE TRANSACTION \'
     147: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     150: aload_2
     151: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     154: ldc           #65                 // String \'
     156: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     159: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     162: invokeinterface #66,  2           // InterfaceMethod java/sql/Statement.executeUpdate:(Ljava/lang/String;)I
     167: pop
     168: aload_3
     169: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     174: goto          188
     177: astore        4
     179: aload_3
     180: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     185: aload         4
     187: athrow
     188: aload_0
     189: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     192: aload_0
     193: getfield      #13                 // Field localAutoCommitMode:Z
     196: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
     201: iconst_0
     202: ireturn
     203: astore_2
     204: new           #35                 // class org/postgresql/xa/PGXAException
     207: dup
     208: ldc           #68                 // String Error preparing transaction
     210: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     213: aload_2
     214: bipush        -3
     216: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     219: athrow
    Exception table:
       from    to  target type
         137   168   177   any
         177   179   177   any
         122   202   203   Class java/sql/SQLException

  public javax.transaction.xa.Xid[] recover(int) throws javax.transaction.xa.XAException;
    Code:
       0: iload_1
       1: ldc           #69                 // int 16777216
       3: if_icmpeq     37
       6: iload_1
       7: ldc           #70                 // int 8388608
       9: if_icmpeq     37
      12: iload_1
      13: ifeq          37
      16: iload_1
      17: ldc           #71                 // int 25165824
      19: if_icmpeq     37
      22: new           #35                 // class org/postgresql/xa/PGXAException
      25: dup
      26: ldc           #72                 // String Invalid flag
      28: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      31: bipush        -5
      33: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      36: athrow
      37: iload_1
      38: ldc           #69                 // int 16777216
      40: iand
      41: ifne          49
      44: iconst_0
      45: anewarray     #73                 // class javax/transaction/xa/Xid
      48: areturn
      49: aload_0
      50: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      53: invokeinterface #63,  1           // InterfaceMethod org/postgresql/core/BaseConnection.createStatement:()Ljava/sql/Statement;
      58: astore_2
      59: aload_2
      60: ldc           #74                 // String SELECT gid FROM pg_prepared_xacts where database = current_database()
      62: invokeinterface #75,  2           // InterfaceMethod java/sql/Statement.executeQuery:(Ljava/lang/String;)Ljava/sql/ResultSet;
      67: astore_3
      68: new           #76                 // class java/util/LinkedList
      71: dup
      72: invokespecial #77                 // Method java/util/LinkedList."<init>":()V
      75: astore        4
      77: aload_3
      78: invokeinterface #78,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
      83: ifeq          114
      86: aload_3
      87: iconst_1
      88: invokeinterface #79,  2           // InterfaceMethod java/sql/ResultSet.getString:(I)Ljava/lang/String;
      93: invokestatic  #80                 // Method org/postgresql/xa/RecoveredXid.stringToXid:(Ljava/lang/String;)Ljavax/transaction/xa/Xid;
      96: astore        5
      98: aload         5
     100: ifnull        111
     103: aload         4
     105: aload         5
     107: invokevirtual #81                 // Method java/util/LinkedList.add:(Ljava/lang/Object;)Z
     110: pop
     111: goto          77
     114: aload_3
     115: invokeinterface #82,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     120: aload         4
     122: aload         4
     124: invokevirtual #83                 // Method java/util/LinkedList.size:()I
     127: anewarray     #73                 // class javax/transaction/xa/Xid
     130: invokevirtual #84                 // Method java/util/LinkedList.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     133: checkcast     #85                 // class "[Ljavax/transaction/xa/Xid;"
     136: checkcast     #85                 // class "[Ljavax/transaction/xa/Xid;"
     139: astore        5
     141: aload_2
     142: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     147: aload         5
     149: areturn
     150: astore        6
     152: aload_2
     153: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     158: aload         6
     160: athrow
     161: astore_2
     162: new           #35                 // class org/postgresql/xa/PGXAException
     165: dup
     166: ldc           #86                 // String Error during recover
     168: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     171: aload_2
     172: bipush        -3
     174: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     177: athrow
    Exception table:
       from    to  target type
          59   141   150   any
         150   152   150   any
          49   147   161   Class java/sql/SQLException
         150   161   161   Class java/sql/SQLException

  public void rollback(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          33
      10: aload_0
      11: new           #3                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #87                 // String rolling back xid =
      20: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_1
      24: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      27: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      30: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      33: aload_0
      34: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      37: ifnull        86
      40: aload_1
      41: aload_0
      42: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      45: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      48: ifeq          86
      51: aload_0
      52: iconst_0
      53: putfield      #1                  // Field state:I
      56: aload_0
      57: aconst_null
      58: putfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      61: aload_0
      62: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      65: invokeinterface #88,  1           // InterfaceMethod org/postgresql/core/BaseConnection.rollback:()V
      70: aload_0
      71: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      74: aload_0
      75: getfield      #13                 // Field localAutoCommitMode:Z
      78: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
      83: goto          162
      86: aload_1
      87: invokestatic  #62                 // Method org/postgresql/xa/RecoveredXid.xidToString:(Ljavax/transaction/xa/Xid;)Ljava/lang/String;
      90: astore_2
      91: aload_0
      92: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      95: iconst_1
      96: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
     101: aload_0
     102: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     105: invokeinterface #63,  1           // InterfaceMethod org/postgresql/core/BaseConnection.createStatement:()Ljava/sql/Statement;
     110: astore_3
     111: aload_3
     112: new           #3                  // class java/lang/StringBuilder
     115: dup
     116: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
     119: ldc           #89                 // String ROLLBACK PREPARED \'
     121: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: aload_2
     125: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: ldc           #65                 // String \'
     130: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     136: invokeinterface #66,  2           // InterfaceMethod java/sql/Statement.executeUpdate:(Ljava/lang/String;)I
     141: pop
     142: aload_3
     143: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     148: goto          162
     151: astore        4
     153: aload_3
     154: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     159: aload         4
     161: athrow
     162: goto          214
     165: astore_2
     166: getstatic     #90                 // Field org/postgresql/util/PSQLState.UNDEFINED_OBJECT:Lorg/postgresql/util/PSQLState;
     169: invokevirtual #91                 // Method org/postgresql/util/PSQLState.getState:()Ljava/lang/String;
     172: aload_2
     173: invokevirtual #92                 // Method java/sql/SQLException.getSQLState:()Ljava/lang/String;
     176: invokevirtual #93                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     179: ifeq          198
     182: new           #35                 // class org/postgresql/xa/PGXAException
     185: dup
     186: ldc           #94                 // String Error rolling back prepared transaction
     188: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     191: aload_2
     192: bipush        -4
     194: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     197: athrow
     198: new           #35                 // class org/postgresql/xa/PGXAException
     201: dup
     202: ldc           #94                 // String Error rolling back prepared transaction
     204: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     207: aload_2
     208: bipush        -3
     210: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     213: athrow
     214: return
    Exception table:
       from    to  target type
         111   142   151   any
         151   153   151   any
          33   162   165   Class java/sql/SQLException

  public void commit(javax.transaction.xa.Xid, boolean) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field logger:Lorg/postgresql/core/Logger;
       4: invokevirtual #17                 // Method org/postgresql/core/Logger.logDebug:()Z
       7: ifeq          47
      10: aload_0
      11: new           #3                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #95                 // String committing xid =
      20: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_1
      24: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      27: iload_2
      28: ifeq          36
      31: ldc           #96                 // String  (one phase)
      33: goto          38
      36: ldc           #97                 // String  (two phase)
      38: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      41: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      44: invokespecial #19                 // Method debug:(Ljava/lang/String;)V
      47: aload_1
      48: ifnonnull     66
      51: new           #35                 // class org/postgresql/xa/PGXAException
      54: dup
      55: ldc           #40                 // String xid must not be null
      57: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      60: bipush        -5
      62: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      65: athrow
      66: iload_2
      67: ifeq          78
      70: aload_0
      71: aload_1
      72: invokespecial #98                 // Method commitOnePhase:(Ljavax/transaction/xa/Xid;)V
      75: goto          83
      78: aload_0
      79: aload_1
      80: invokespecial #99                 // Method commitPrepared:(Ljavax/transaction/xa/Xid;)V
      83: return

  private void commitOnePhase(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
       4: ifnull        18
       7: aload_0
       8: getfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      11: aload_1
      12: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      15: ifne          33
      18: new           #35                 // class org/postgresql/xa/PGXAException
      21: dup
      22: ldc           #100                // String Not implemented: one-phase commit must be issued using the same connection that was used to start it
      24: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      27: bipush        -3
      29: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      32: athrow
      33: aload_0
      34: getfield      #1                  // Field state:I
      37: iconst_2
      38: if_icmpeq     56
      41: new           #35                 // class org/postgresql/xa/PGXAException
      44: dup
      45: ldc           #101                // String commit called before end
      47: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      50: bipush        -6
      52: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      55: athrow
      56: aload_0
      57: iconst_0
      58: putfield      #1                  // Field state:I
      61: aload_0
      62: aconst_null
      63: putfield      #44                 // Field currentXid:Ljavax/transaction/xa/Xid;
      66: aload_0
      67: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      70: invokeinterface #102,  1          // InterfaceMethod org/postgresql/core/BaseConnection.commit:()V
      75: aload_0
      76: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      79: aload_0
      80: getfield      #13                 // Field localAutoCommitMode:Z
      83: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
      88: goto          108
      91: astore_2
      92: new           #35                 // class org/postgresql/xa/PGXAException
      95: dup
      96: ldc           #103                // String Error during one-phase commit
      98: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     101: aload_2
     102: bipush        -3
     104: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     107: athrow
     108: return
    Exception table:
       from    to  target type
           0    88    91   Class java/sql/SQLException

  private void commitPrepared(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #1                  // Field state:I
       4: ifne          19
       7: aload_0
       8: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      11: invokeinterface #104,  1          // InterfaceMethod org/postgresql/core/BaseConnection.getTransactionState:()I
      16: ifeq          34
      19: new           #35                 // class org/postgresql/xa/PGXAException
      22: dup
      23: ldc           #105                // String Not implemented: 2nd phase commit must be issued using an idle connection
      25: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
      28: bipush        -3
      30: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      33: athrow
      34: aload_1
      35: invokestatic  #62                 // Method org/postgresql/xa/RecoveredXid.xidToString:(Ljavax/transaction/xa/Xid;)Ljava/lang/String;
      38: astore_2
      39: aload_0
      40: aload_0
      41: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      44: invokeinterface #46,  1           // InterfaceMethod org/postgresql/core/BaseConnection.getAutoCommit:()Z
      49: putfield      #13                 // Field localAutoCommitMode:Z
      52: aload_0
      53: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      56: iconst_1
      57: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
      62: aload_0
      63: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
      66: invokeinterface #63,  1           // InterfaceMethod org/postgresql/core/BaseConnection.createStatement:()Ljava/sql/Statement;
      71: astore_3
      72: aload_3
      73: new           #3                  // class java/lang/StringBuilder
      76: dup
      77: invokespecial #4                  // Method java/lang/StringBuilder."<init>":()V
      80: ldc           #106                // String COMMIT PREPARED \'
      82: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      85: aload_2
      86: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: ldc           #65                 // String \'
      91: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      94: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      97: invokeinterface #66,  2           // InterfaceMethod java/sql/Statement.executeUpdate:(Ljava/lang/String;)I
     102: pop
     103: aload_3
     104: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     109: aload_0
     110: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     113: aload_0
     114: getfield      #13                 // Field localAutoCommitMode:Z
     117: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
     122: goto          149
     125: astore        4
     127: aload_3
     128: invokeinterface #67,  1           // InterfaceMethod java/sql/Statement.close:()V
     133: aload_0
     134: getfield      #14                 // Field conn:Lorg/postgresql/core/BaseConnection;
     137: aload_0
     138: getfield      #13                 // Field localAutoCommitMode:Z
     141: invokeinterface #47,  2           // InterfaceMethod org/postgresql/core/BaseConnection.setAutoCommit:(Z)V
     146: aload         4
     148: athrow
     149: goto          169
     152: astore_2
     153: new           #35                 // class org/postgresql/xa/PGXAException
     156: dup
     157: ldc           #107                // String Error committing prepared transaction
     159: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
     162: aload_2
     163: bipush        -3
     165: invokespecial #50                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;I)V
     168: athrow
     169: return
    Exception table:
       from    to  target type
          72   103   125   any
         125   127   125   any
           0   149   152   Class java/sql/SQLException

  public boolean isSameRM(javax.transaction.xa.XAResource) throws javax.transaction.xa.XAException;
    Code:
       0: aload_1
       1: aload_0
       2: if_acmpne     9
       5: iconst_1
       6: goto          10
       9: iconst_0
      10: ireturn

  public void forget(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: new           #35                 // class org/postgresql/xa/PGXAException
       3: dup
       4: ldc           #108                // String Heuristic commit/rollback not supported
       6: invokestatic  #37                 // Method org/postgresql/util/GT.tr:(Ljava/lang/String;)Ljava/lang/String;
       9: bipush        -4
      11: invokespecial #39                 // Method org/postgresql/xa/PGXAException."<init>":(Ljava/lang/String;I)V
      14: athrow

  public int getTransactionTimeout();
    Code:
       0: iconst_0
       1: ireturn

  public boolean setTransactionTimeout(int);
    Code:
       0: iconst_0
       1: ireturn

  static int access$000(org.postgresql.xa.PGXAConnection);
    Code:
       0: aload_0
       1: getfield      #1                  // Field state:I
       4: ireturn
}

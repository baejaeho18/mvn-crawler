Compiled from "S2iBuildService.java"
public class io.dekorate.s2i.buildservice.S2iBuildService implements io.dekorate.BuildService {
  private final io.dekorate.Logger LOGGER;

  private final io.dekorate.utils.Exec$ProjectExec exec;

  private final io.dekorate.project.Project project;

  private final io.dekorate.kubernetes.config.ImageConfiguration config;

  private final java.util.Collection<io.dekorate.deps.kubernetes.api.model.HasMetadata> resources;

  public io.dekorate.s2i.buildservice.S2iBuildService(io.dekorate.project.Project, io.dekorate.kubernetes.config.ImageConfiguration, java.util.Collection<io.dekorate.deps.kubernetes.api.model.HasMetadata>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method io/dekorate/LoggerFactory.getLogger:()Lio/dekorate/Logger;
       8: putfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
      11: aload_0
      12: aload_1
      13: putfield      #4                  // Field project:Lio/dekorate/project/Project;
      16: aload_0
      17: aload_2
      18: putfield      #5                  // Field config:Lio/dekorate/kubernetes/config/ImageConfiguration;
      21: aload_0
      22: aload_3
      23: putfield      #6                  // Field resources:Ljava/util/Collection;
      26: aload_0
      27: aload_1
      28: invokestatic  #7                  // Method io/dekorate/utils/Exec.inProject:(Lio/dekorate/project/Project;)Lio/dekorate/utils/Exec$ProjectExec;
      31: putfield      #8                  // Field exec:Lio/dekorate/utils/Exec$ProjectExec;
      34: return

  public void prepare();
    Code:
       0: invokestatic  #9                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       3: invokevirtual #10                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
       6: astore_1
       7: new           #11                 // class io/dekorate/deps/openshift/client/DefaultOpenShiftClient
      10: dup
      11: invokespecial #12                 // Method io/dekorate/deps/openshift/client/DefaultOpenShiftClient."<init>":()V
      14: astore_2
      15: aconst_null
      16: astore_3
      17: invokestatic  #9                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      20: ldc           #13                 // class io/dekorate/s2i/buildservice/S2iBuildService
      22: invokevirtual #14                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      25: invokevirtual #15                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      28: aload_2
      29: invokeinterface #16,  1           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.builds:()Lio/dekorate/deps/kubernetes/client/dsl/MixedOperation;
      34: ldc           #17                 // String openshift.io/build-config.name
      36: aload_0
      37: getfield      #6                  // Field resources:Ljava/util/Collection;
      40: invokestatic  #18                 // Method buildConfigName:(Ljava/util/Collection;)Ljava/lang/String;
      43: invokeinterface #19,  3           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/MixedOperation.withLabel:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/Object;
      48: checkcast     #20                 // class io/dekorate/deps/kubernetes/client/dsl/FilterWatchListDeletable
      51: invokeinterface #21,  1           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/FilterWatchListDeletable.list:()Ljava/lang/Object;
      56: checkcast     #22                 // class io/dekorate/deps/openshift/api/model/BuildList
      59: astore        4
      61: aload         4
      63: invokevirtual #23                 // Method io/dekorate/deps/openshift/api/model/BuildList.getItems:()Ljava/util/List;
      66: invokeinterface #24,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      71: aload_0
      72: aload_2
      73: invokedynamic #25,  0             // InvokeDynamic #0:accept:(Lio/dekorate/s2i/buildservice/S2iBuildService;Lio/dekorate/deps/openshift/client/OpenShiftClient;)Ljava/util/function/Consumer;
      78: invokeinterface #26,  2           // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
      83: aload_0
      84: getfield      #6                  // Field resources:Ljava/util/Collection;
      87: invokeinterface #27,  1           // InterfaceMethod java/util/Collection.stream:()Ljava/util/stream/Stream;
      92: invokedynamic #28,  0             // InvokeDynamic #1:test:()Ljava/util/function/Predicate;
      97: invokeinterface #29,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
     102: aload_0
     103: aload_2
     104: invokedynamic #30,  0             // InvokeDynamic #2:accept:(Lio/dekorate/s2i/buildservice/S2iBuildService;Lio/dekorate/deps/openshift/client/OpenShiftClient;)Ljava/util/function/Consumer;
     109: invokeinterface #26,  2           // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
     114: aload_0
     115: getfield      #6                  // Field resources:Ljava/util/Collection;
     118: ldc2_w        #31                 // long 2l
     121: getstatic     #33                 // Field java/util/concurrent/TimeUnit.MINUTES:Ljava/util/concurrent/TimeUnit;
     124: invokestatic  #34                 // Method io/dekorate/s2i/util/S2iUtils.waitForImageStreamTags:(Ljava/util/Collection;JLjava/util/concurrent/TimeUnit;)Z
     127: pop
     128: aload_2
     129: ifnull        212
     132: aload_3
     133: ifnull        156
     136: aload_2
     137: invokeinterface #35,  1           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.close:()V
     142: goto          212
     145: astore        4
     147: aload_3
     148: aload         4
     150: invokevirtual #37                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     153: goto          212
     156: aload_2
     157: invokeinterface #35,  1           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.close:()V
     162: goto          212
     165: astore        4
     167: aload         4
     169: astore_3
     170: aload         4
     172: athrow
     173: astore        5
     175: aload_2
     176: ifnull        209
     179: aload_3
     180: ifnull        203
     183: aload_2
     184: invokeinterface #35,  1           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.close:()V
     189: goto          209
     192: astore        6
     194: aload_3
     195: aload         6
     197: invokevirtual #37                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     200: goto          209
     203: aload_2
     204: invokeinterface #35,  1           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.close:()V
     209: aload         5
     211: athrow
     212: invokestatic  #9                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     215: aload_1
     216: invokevirtual #15                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
     219: goto          234
     222: astore        7
     224: invokestatic  #9                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     227: aload_1
     228: invokevirtual #15                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
     231: aload         7
     233: athrow
     234: return
    Exception table:
       from    to  target type
         136   142   145   Class java/lang/Throwable
          17   128   165   Class java/lang/Throwable
          17   128   173   any
         183   189   192   Class java/lang/Throwable
         165   175   173   any
           7   212   222   any
         222   224   222   any

  public void build();
    Code:
       0: aload_0
       1: getfield      #4                  // Field project:Lio/dekorate/project/Project;
       4: invokevirtual #38                 // Method io/dekorate/project/Project.getBuildInfo:()Lio/dekorate/project/BuildInfo;
       7: invokevirtual #39                 // Method io/dekorate/project/BuildInfo.getOutputFile:()Ljava/nio/file/Path;
      10: invokeinterface #40,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      15: invokeinterface #41,  1           // InterfaceMethod java/nio/file/Path.toFile:()Ljava/io/File;
      20: invokevirtual #42                 // Method java/io/File.exists:()Z
      23: ifeq          123
      26: aload_0
      27: getfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
      30: ldc           #43                 // String Performing s2i build.
      32: invokeinterface #44,  2           // InterfaceMethod io/dekorate/Logger.info:(Ljava/lang/String;)V
      37: aload_0
      38: getfield      #8                  // Field exec:Lio/dekorate/utils/Exec$ProjectExec;
      41: iconst_5
      42: anewarray     #45                 // class java/lang/String
      45: dup
      46: iconst_0
      47: ldc           #46                 // String oc
      49: aastore
      50: dup
      51: iconst_1
      52: ldc           #47                 // String start-build
      54: aastore
      55: dup
      56: iconst_2
      57: aload_0
      58: getfield      #6                  // Field resources:Ljava/util/Collection;
      61: invokestatic  #18                 // Method buildConfigName:(Ljava/util/Collection;)Ljava/lang/String;
      64: aastore
      65: dup
      66: iconst_3
      67: new           #48                 // class java/lang/StringBuilder
      70: dup
      71: invokespecial #49                 // Method java/lang/StringBuilder."<init>":()V
      74: ldc           #50                 // String --from-dir=
      76: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      79: aload_0
      80: getfield      #4                  // Field project:Lio/dekorate/project/Project;
      83: invokevirtual #38                 // Method io/dekorate/project/Project.getBuildInfo:()Lio/dekorate/project/BuildInfo;
      86: invokevirtual #39                 // Method io/dekorate/project/BuildInfo.getOutputFile:()Ljava/nio/file/Path;
      89: invokeinterface #40,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      94: invokeinterface #52,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
      99: invokeinterface #53,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
     104: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     107: invokevirtual #54                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     110: aastore
     111: dup
     112: iconst_4
     113: ldc           #55                 // String --follow
     115: aastore
     116: invokevirtual #56                 // Method io/dekorate/utils/Exec$ProjectExec.commands:([Ljava/lang/String;)Z
     119: pop
     120: goto          174
     123: new           #57                 // class java/lang/IllegalStateException
     126: dup
     127: new           #48                 // class java/lang/StringBuilder
     130: dup
     131: invokespecial #49                 // Method java/lang/StringBuilder."<init>":()V
     134: ldc           #58                 // String Can\'t trigger binary build.
     136: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     139: aload_0
     140: getfield      #4                  // Field project:Lio/dekorate/project/Project;
     143: invokevirtual #38                 // Method io/dekorate/project/Project.getBuildInfo:()Lio/dekorate/project/BuildInfo;
     146: invokevirtual #39                 // Method io/dekorate/project/BuildInfo.getOutputFile:()Ljava/nio/file/Path;
     149: invokeinterface #52,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
     154: invokeinterface #53,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
     159: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     162: ldc           #59                 // String  does not exist!
     164: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     167: invokevirtual #54                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     170: invokespecial #60                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     173: athrow
     174: return

  public void push();
    Code:
       0: return

  private static java.lang.String buildConfigName(java.util.Collection<io.dekorate.deps.kubernetes.api.model.HasMetadata>);
    Code:
       0: aload_0
       1: invokeinterface #27,  1           // InterfaceMethod java/util/Collection.stream:()Ljava/util/stream/Stream;
       6: invokedynamic #61,  0             // InvokeDynamic #3:test:()Ljava/util/function/Predicate;
      11: invokeinterface #29,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      16: invokedynamic #62,  0             // InvokeDynamic #4:apply:()Ljava/util/function/Function;
      21: invokeinterface #63,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      26: invokeinterface #64,  1           // InterfaceMethod java/util/stream/Stream.findFirst:()Ljava/util/Optional;
      31: invokedynamic #65,  0             // InvokeDynamic #5:get:()Ljava/util/function/Supplier;
      36: invokevirtual #66                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      39: checkcast     #45                 // class java/lang/String
      42: areturn

  private static java.lang.IllegalStateException lambda$buildConfigName$6();
    Code:
       0: new           #57                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #67                 // String No build config found.
       6: invokespecial #60                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  private static java.lang.String lambda$buildConfigName$5(io.dekorate.deps.kubernetes.api.model.HasMetadata);
    Code:
       0: aload_0
       1: invokeinterface #68,  1           // InterfaceMethod io/dekorate/deps/kubernetes/api/model/HasMetadata.getMetadata:()Lio/dekorate/deps/kubernetes/api/model/ObjectMeta;
       6: invokevirtual #69                 // Method io/dekorate/deps/kubernetes/api/model/ObjectMeta.getName:()Ljava/lang/String;
       9: areturn

  private static boolean lambda$buildConfigName$4(io.dekorate.deps.kubernetes.api.model.HasMetadata);
    Code:
       0: ldc           #70                 // String BuildConfig
       2: aload_0
       3: invokeinterface #71,  1           // InterfaceMethod io/dekorate/deps/kubernetes/api/model/HasMetadata.getKind:()Ljava/lang/String;
       8: invokevirtual #72                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      11: ireturn

  private void lambda$prepare$3(io.dekorate.deps.openshift.client.OpenShiftClient, io.dekorate.deps.kubernetes.api.model.HasMetadata);
    Code:
       0: aload_2
       1: instanceof    #73                 // class io/dekorate/deps/openshift/api/model/BuildConfig
       4: ifeq          92
       7: aload_1
       8: aload_2
       9: invokeinterface #74,  2           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.resource:(Lio/dekorate/deps/kubernetes/api/model/HasMetadata;)Lio/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable;
      14: iconst_1
      15: invokeinterface #75,  2           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable.cascading:(Z)Ljava/lang/Object;
      20: checkcast     #76                 // class io/dekorate/deps/kubernetes/client/dsl/Deletable
      23: invokeinterface #77,  1           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/Deletable.delete:()Ljava/lang/Object;
      28: pop
      29: aload_1
      30: aload_2
      31: invokeinterface #74,  2           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.resource:(Lio/dekorate/deps/kubernetes/api/model/HasMetadata;)Lio/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable;
      36: invokedynamic #78,  0             // InvokeDynamic #6:test:()Ljava/util/function/Predicate;
      41: ldc2_w        #79                 // long 10l
      44: getstatic     #81                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
      47: invokeinterface #82,  5           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable.waitUntilCondition:(Ljava/util/function/Predicate;JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
      52: pop
      53: goto          92
      56: astore_3
      57: aload_0
      58: getfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
      61: aload_3
      62: invokevirtual #84                 // Method java/lang/IllegalArgumentException.getMessage:()Ljava/lang/String;
      65: invokeinterface #85,  2           // InterfaceMethod io/dekorate/Logger.warning:(Ljava/lang/String;)V
      70: goto          92
      73: astore_3
      74: aload_0
      75: getfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
      78: aload_3
      79: invokevirtual #87                 // Method java/lang/InterruptedException.getMessage:()Ljava/lang/String;
      82: invokeinterface #85,  2           // InterfaceMethod io/dekorate/Logger.warning:(Ljava/lang/String;)V
      87: aload_3
      88: invokestatic  #88                 // Method io/dekorate/DekorateException.launderThrowable:(Ljava/lang/Throwable;)Ljava/lang/RuntimeException;
      91: athrow
      92: aload_1
      93: aload_2
      94: invokeinterface #74,  2           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.resource:(Lio/dekorate/deps/kubernetes/api/model/HasMetadata;)Lio/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable;
      99: invokeinterface #89,  1           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable.createOrReplace:()Ljava/lang/Object;
     104: pop
     105: aload_0
     106: getfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
     109: new           #48                 // class java/lang/StringBuilder
     112: dup
     113: invokespecial #49                 // Method java/lang/StringBuilder."<init>":()V
     116: ldc           #90                 // String Applied:
     118: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     121: aload_2
     122: invokeinterface #71,  1           // InterfaceMethod io/dekorate/deps/kubernetes/api/model/HasMetadata.getKind:()Ljava/lang/String;
     127: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     130: ldc           #91                 // String
     132: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     135: aload_2
     136: invokeinterface #68,  1           // InterfaceMethod io/dekorate/deps/kubernetes/api/model/HasMetadata.getMetadata:()Lio/dekorate/deps/kubernetes/api/model/ObjectMeta;
     141: invokevirtual #69                 // Method io/dekorate/deps/kubernetes/api/model/ObjectMeta.getName:()Ljava/lang/String;
     144: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     147: invokevirtual #54                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     150: invokeinterface #44,  2           // InterfaceMethod io/dekorate/Logger.info:(Ljava/lang/String;)V
     155: return
    Exception table:
       from    to  target type
          29    53    56   Class java/lang/IllegalArgumentException
          29    53    73   Class java/lang/InterruptedException

  private static boolean lambda$null$2(io.dekorate.deps.kubernetes.api.model.HasMetadata);
    Code:
       0: aload_0
       1: ifnonnull     8
       4: iconst_1
       5: goto          9
       8: iconst_0
       9: ireturn

  private static boolean lambda$prepare$1(io.dekorate.deps.kubernetes.api.model.HasMetadata);
    Code:
       0: aload_0
       1: instanceof    #73                 // class io/dekorate/deps/openshift/api/model/BuildConfig
       4: ifne          21
       7: aload_0
       8: instanceof    #92                 // class io/dekorate/deps/openshift/api/model/ImageStream
      11: ifne          21
      14: aload_0
      15: instanceof    #93                 // class io/dekorate/deps/kubernetes/api/model/Secret
      18: ifeq          25
      21: iconst_1
      22: goto          26
      25: iconst_0
      26: ireturn

  private void lambda$prepare$0(io.dekorate.deps.openshift.client.OpenShiftClient, io.dekorate.deps.openshift.api.model.Build);
    Code:
       0: aload_0
       1: getfield      #3                  // Field LOGGER:Lio/dekorate/Logger;
       4: new           #48                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #49                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #94                 // String Deleting stale build:
      13: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_2
      17: invokevirtual #95                 // Method io/dekorate/deps/openshift/api/model/Build.getMetadata:()Lio/dekorate/deps/kubernetes/api/model/ObjectMeta;
      20: invokevirtual #69                 // Method io/dekorate/deps/kubernetes/api/model/ObjectMeta.getName:()Ljava/lang/String;
      23: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: invokevirtual #54                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      29: invokeinterface #44,  2           // InterfaceMethod io/dekorate/Logger.info:(Ljava/lang/String;)V
      34: aload_1
      35: aload_2
      36: invokeinterface #74,  2           // InterfaceMethod io/dekorate/deps/openshift/client/OpenShiftClient.resource:(Lio/dekorate/deps/kubernetes/api/model/HasMetadata;)Lio/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable;
      41: iconst_1
      42: invokeinterface #75,  2           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/NamespaceVisitFromServerGetWatchDeleteRecreateWaitApplicable.cascading:(Z)Ljava/lang/Object;
      47: checkcast     #76                 // class io/dekorate/deps/kubernetes/client/dsl/Deletable
      50: invokeinterface #77,  1           // InterfaceMethod io/dekorate/deps/kubernetes/client/dsl/Deletable.delete:()Ljava/lang/Object;
      55: pop
      56: return
}

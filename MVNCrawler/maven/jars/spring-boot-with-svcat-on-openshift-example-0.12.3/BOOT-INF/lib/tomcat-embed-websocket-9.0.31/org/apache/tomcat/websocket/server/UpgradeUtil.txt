Compiled from "UpgradeUtil.java"
public class org.apache.tomcat.websocket.server.UpgradeUtil {
  private static final org.apache.tomcat.util.res.StringManager sm;

  private static final byte[] WS_ACCEPT;

  private org.apache.tomcat.websocket.server.UpgradeUtil();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static boolean isWebSocketUpgradeRequest(javax.servlet.ServletRequest, javax.servlet.ServletResponse);
    Code:
       0: aload_0
       1: instanceof    #2                  // class javax/servlet/http/HttpServletRequest
       4: ifeq          49
       7: aload_1
       8: instanceof    #3                  // class javax/servlet/http/HttpServletResponse
      11: ifeq          49
      14: aload_0
      15: checkcast     #2                  // class javax/servlet/http/HttpServletRequest
      18: ldc           #5                  // String Upgrade
      20: ldc           #6                  // String websocket
      22: invokestatic  #7                  // Method headerContainsToken:(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;)Z
      25: ifeq          49
      28: ldc           #8                  // String GET
      30: aload_0
      31: checkcast     #2                  // class javax/servlet/http/HttpServletRequest
      34: invokeinterface #9,  1            // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
      39: invokevirtual #10                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      42: ifeq          49
      45: iconst_1
      46: goto          50
      49: iconst_0
      50: ireturn

  public static void doUpgrade(org.apache.tomcat.websocket.server.WsServerContainer, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, javax.websocket.server.ServerEndpointConfig, java.util.Map<java.lang.String, java.lang.String>) throws javax.servlet.ServletException, java.io.IOException;
    Code:
       0: aconst_null
       1: astore        6
       3: aload_1
       4: ldc           #11                 // String Connection
       6: ldc           #12                 // String upgrade
       8: invokestatic  #7                  // Method headerContainsToken:(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;)Z
      11: ifne          24
      14: aload_2
      15: sipush        400
      18: invokeinterface #13,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendError:(I)V
      23: return
      24: aload_1
      25: ldc           #14                 // String Sec-WebSocket-Version
      27: ldc           #15                 // String 13
      29: invokestatic  #7                  // Method headerContainsToken:(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;)Z
      32: ifne          55
      35: aload_2
      36: sipush        426
      39: invokeinterface #16,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setStatus:(I)V
      44: aload_2
      45: ldc           #14                 // String Sec-WebSocket-Version
      47: ldc           #15                 // String 13
      49: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
      54: return
      55: aload_1
      56: ldc           #18                 // String Sec-WebSocket-Key
      58: invokeinterface #19,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      63: astore        5
      65: aload         5
      67: ifnonnull     80
      70: aload_2
      71: sipush        400
      74: invokeinterface #13,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendError:(I)V
      79: return
      80: aload_1
      81: ldc           #20                 // String Origin
      83: invokeinterface #19,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      88: astore        7
      90: aload_3
      91: invokeinterface #21,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
      96: aload         7
      98: invokevirtual #22                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.checkOrigin:(Ljava/lang/String;)Z
     101: ifne          114
     104: aload_2
     105: sipush        403
     108: invokeinterface #13,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendError:(I)V
     113: return
     114: aload_1
     115: ldc           #23                 // String Sec-WebSocket-Protocol
     117: invokestatic  #24                 // Method getTokensFromHeader:(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;)Ljava/util/List;
     120: astore        8
     122: aload_3
     123: invokeinterface #21,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
     128: aload_3
     129: invokeinterface #25,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getSubprotocols:()Ljava/util/List;
     134: aload         8
     136: invokevirtual #26                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.getNegotiatedSubprotocol:(Ljava/util/List;Ljava/util/List;)Ljava/lang/String;
     139: astore        6
     141: new           #27                 // class java/util/ArrayList
     144: dup
     145: invokespecial #28                 // Method java/util/ArrayList."<init>":()V
     148: astore        9
     150: aload_1
     151: ldc           #29                 // String Sec-WebSocket-Extensions
     153: invokeinterface #30,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeaders:(Ljava/lang/String;)Ljava/util/Enumeration;
     158: astore        10
     160: aload         10
     162: invokeinterface #31,  1           // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
     167: ifeq          188
     170: aload         9
     172: aload         10
     174: invokeinterface #32,  1           // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
     179: checkcast     #33                 // class java/lang/String
     182: invokestatic  #34                 // Method org/apache/tomcat/websocket/Util.parseExtensionHeader:(Ljava/util/List;Ljava/lang/String;)V
     185: goto          160
     188: aconst_null
     189: astore        11
     191: aload_3
     192: invokeinterface #35,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getExtensions:()Ljava/util/List;
     197: invokeinterface #36,  1           // InterfaceMethod java/util/List.size:()I
     202: ifne          213
     205: getstatic     #37                 // Field org/apache/tomcat/websocket/Constants.INSTALLED_EXTENSIONS:Ljava/util/List;
     208: astore        11
     210: goto          247
     213: new           #27                 // class java/util/ArrayList
     216: dup
     217: invokespecial #28                 // Method java/util/ArrayList."<init>":()V
     220: astore        11
     222: aload         11
     224: aload_3
     225: invokeinterface #35,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getExtensions:()Ljava/util/List;
     230: invokeinterface #38,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     235: pop
     236: aload         11
     238: getstatic     #37                 // Field org/apache/tomcat/websocket/Constants.INSTALLED_EXTENSIONS:Ljava/util/List;
     241: invokeinterface #38,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     246: pop
     247: aload_3
     248: invokeinterface #21,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
     253: aload         11
     255: aload         9
     257: invokevirtual #39                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.getNegotiatedExtensions:(Ljava/util/List;Ljava/util/List;)Ljava/util/List;
     260: astore        12
     262: aload         12
     264: invokestatic  #40                 // Method createTransformations:(Ljava/util/List;)Ljava/util/List;
     267: astore        13
     269: aload         13
     271: invokeinterface #41,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     276: ifeq          287
     279: invokestatic  #42                 // Method java/util/Collections.emptyList:()Ljava/util/List;
     282: astore        14
     284: goto          352
     287: new           #27                 // class java/util/ArrayList
     290: dup
     291: aload         13
     293: invokeinterface #36,  1           // InterfaceMethod java/util/List.size:()I
     298: invokespecial #43                 // Method java/util/ArrayList."<init>":(I)V
     301: astore        14
     303: aload         13
     305: invokeinterface #44,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     310: astore        15
     312: aload         15
     314: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     319: ifeq          352
     322: aload         15
     324: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     329: checkcast     #47                 // class org/apache/tomcat/websocket/Transformation
     332: astore        16
     334: aload         14
     336: aload         16
     338: invokeinterface #48,  1           // InterfaceMethod org/apache/tomcat/websocket/Transformation.getExtensionResponse:()Ljavax/websocket/Extension;
     343: invokeinterface #49,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     348: pop
     349: goto          312
     352: aconst_null
     353: astore        15
     355: new           #50                 // class java/lang/StringBuilder
     358: dup
     359: invokespecial #51                 // Method java/lang/StringBuilder."<init>":()V
     362: astore        16
     364: iconst_1
     365: istore        17
     367: aload         13
     369: invokeinterface #44,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     374: astore        18
     376: aload         18
     378: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     383: ifeq          453
     386: aload         18
     388: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     393: checkcast     #47                 // class org/apache/tomcat/websocket/Transformation
     396: astore        19
     398: iload         17
     400: ifeq          409
     403: iconst_0
     404: istore        17
     406: goto          417
     409: aload         16
     411: bipush        44
     413: invokevirtual #52                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     416: pop
     417: aload         16
     419: aload         19
     421: invokeinterface #48,  1           // InterfaceMethod org/apache/tomcat/websocket/Transformation.getExtensionResponse:()Ljavax/websocket/Extension;
     426: invokestatic  #53                 // Method append:(Ljava/lang/StringBuilder;Ljavax/websocket/Extension;)V
     429: aload         15
     431: ifnonnull     441
     434: aload         19
     436: astore        15
     438: goto          450
     441: aload         15
     443: aload         19
     445: invokeinterface #54,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.setNext:(Lorg/apache/tomcat/websocket/Transformation;)V
     450: goto          376
     453: aload         15
     455: ifnull        485
     458: aload         15
     460: iconst_0
     461: invokeinterface #55,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.validateRsvBits:(I)Z
     466: ifne          485
     469: new           #56                 // class javax/servlet/ServletException
     472: dup
     473: getstatic     #57                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     476: ldc           #58                 // String upgradeUtil.incompatibleRsv
     478: invokevirtual #59                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     481: invokespecial #60                 // Method javax/servlet/ServletException."<init>":(Ljava/lang/String;)V
     484: athrow
     485: aload_2
     486: ldc           #5                  // String Upgrade
     488: ldc           #6                  // String websocket
     490: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     495: aload_2
     496: ldc           #11                 // String Connection
     498: ldc           #12                 // String upgrade
     500: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     505: aload_2
     506: ldc           #62                 // String Sec-WebSocket-Accept
     508: aload         5
     510: invokestatic  #63                 // Method getWebSocketAccept:(Ljava/lang/String;)Ljava/lang/String;
     513: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     518: aload         6
     520: ifnull        541
     523: aload         6
     525: invokevirtual #64                 // Method java/lang/String.length:()I
     528: ifle          541
     531: aload_2
     532: ldc           #23                 // String Sec-WebSocket-Protocol
     534: aload         6
     536: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     541: aload         13
     543: invokeinterface #41,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     548: ifne          564
     551: aload_2
     552: ldc           #29                 // String Sec-WebSocket-Extensions
     554: aload         16
     556: invokevirtual #65                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     559: invokeinterface #17,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     564: new           #66                 // class org/apache/tomcat/websocket/server/WsHandshakeRequest
     567: dup
     568: aload_1
     569: aload         4
     571: invokespecial #67                 // Method org/apache/tomcat/websocket/server/WsHandshakeRequest."<init>":(Ljavax/servlet/http/HttpServletRequest;Ljava/util/Map;)V
     574: astore        18
     576: new           #68                 // class org/apache/tomcat/websocket/WsHandshakeResponse
     579: dup
     580: invokespecial #69                 // Method org/apache/tomcat/websocket/WsHandshakeResponse."<init>":()V
     583: astore        19
     585: new           #70                 // class org/apache/tomcat/websocket/server/WsPerSessionServerEndpointConfig
     588: dup
     589: aload_3
     590: invokespecial #71                 // Method org/apache/tomcat/websocket/server/WsPerSessionServerEndpointConfig."<init>":(Ljavax/websocket/server/ServerEndpointConfig;)V
     593: astore        20
     595: aload_3
     596: invokeinterface #21,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
     601: aload         20
     603: aload         18
     605: aload         19
     607: invokevirtual #72                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.modifyHandshake:(Ljavax/websocket/server/ServerEndpointConfig;Ljavax/websocket/server/HandshakeRequest;Ljavax/websocket/HandshakeResponse;)V
     610: aload         18
     612: invokevirtual #73                 // Method org/apache/tomcat/websocket/server/WsHandshakeRequest.finished:()V
     615: aload         19
     617: invokevirtual #74                 // Method org/apache/tomcat/websocket/WsHandshakeResponse.getHeaders:()Ljava/util/Map;
     620: invokeinterface #75,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
     625: invokeinterface #76,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     630: astore        21
     632: aload         21
     634: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     639: ifeq          717
     642: aload         21
     644: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     649: checkcast     #77                 // class java/util/Map$Entry
     652: astore        22
     654: aload         22
     656: invokeinterface #78,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     661: checkcast     #79                 // class java/util/List
     664: invokeinterface #44,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     669: astore        23
     671: aload         23
     673: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     678: ifeq          714
     681: aload         23
     683: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     688: checkcast     #33                 // class java/lang/String
     691: astore        24
     693: aload_2
     694: aload         22
     696: invokeinterface #80,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     701: checkcast     #33                 // class java/lang/String
     704: aload         24
     706: invokeinterface #81,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.addHeader:(Ljava/lang/String;Ljava/lang/String;)V
     711: goto          671
     714: goto          632
     717: aload_3
     718: invokeinterface #82,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getEndpointClass:()Ljava/lang/Class;
     723: astore        22
     725: ldc           #83                 // class javax/websocket/Endpoint
     727: aload         22
     729: invokevirtual #84                 // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
     732: ifeq          754
     735: aload_3
     736: invokeinterface #21,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
     741: aload         22
     743: invokevirtual #85                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.getEndpointInstance:(Ljava/lang/Class;)Ljava/lang/Object;
     746: checkcast     #83                 // class javax/websocket/Endpoint
     749: astore        21
     751: goto          778
     754: new           #86                 // class org/apache/tomcat/websocket/pojo/PojoEndpointServer
     757: dup
     758: invokespecial #87                 // Method org/apache/tomcat/websocket/pojo/PojoEndpointServer."<init>":()V
     761: astore        21
     763: aload         20
     765: invokevirtual #88                 // Method org/apache/tomcat/websocket/server/WsPerSessionServerEndpointConfig.getUserProperties:()Ljava/util/Map;
     768: ldc           #90                 // String org.apache.tomcat.websocket.pojo.PojoEndpoint.pathParams
     770: aload         4
     772: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     777: pop
     778: goto          793
     781: astore        22
     783: new           #56                 // class javax/servlet/ServletException
     786: dup
     787: aload         22
     789: invokespecial #93                 // Method javax/servlet/ServletException."<init>":(Ljava/lang/Throwable;)V
     792: athrow
     793: aload_1
     794: ldc           #94                 // class org/apache/tomcat/websocket/server/WsHttpUpgradeHandler
     796: invokeinterface #95,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.upgrade:(Ljava/lang/Class;)Ljavax/servlet/http/HttpUpgradeHandler;
     801: checkcast     #94                 // class org/apache/tomcat/websocket/server/WsHttpUpgradeHandler
     804: astore        22
     806: aload         22
     808: aload         21
     810: aload         20
     812: aload_0
     813: aload         18
     815: aload         14
     817: aload         6
     819: aload         15
     821: aload         4
     823: aload_1
     824: invokeinterface #96,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.isSecure:()Z
     829: invokevirtual #97                 // Method org/apache/tomcat/websocket/server/WsHttpUpgradeHandler.preInit:(Ljavax/websocket/Endpoint;Ljavax/websocket/server/ServerEndpointConfig;Lorg/apache/tomcat/websocket/server/WsServerContainer;Lorg/apache/tomcat/websocket/server/WsHandshakeRequest;Ljava/util/List;Ljava/lang/String;Lorg/apache/tomcat/websocket/Transformation;Ljava/util/Map;Z)V
     832: return
    Exception table:
       from    to  target type
         717   778   781   Class java/lang/InstantiationException

  private static java.util.List<org.apache.tomcat.websocket.Transformation> createTransformations(java.util.List<javax.websocket.Extension>);
    Code:
       0: invokestatic  #98                 // Method org/apache/tomcat/websocket/TransformationFactory.getInstance:()Lorg/apache/tomcat/websocket/TransformationFactory;
       3: astore_1
       4: new           #99                 // class java/util/LinkedHashMap
       7: dup
       8: invokespecial #100                // Method java/util/LinkedHashMap."<init>":()V
      11: astore_2
      12: new           #27                 // class java/util/ArrayList
      15: dup
      16: aload_0
      17: invokeinterface #36,  1           // InterfaceMethod java/util/List.size:()I
      22: invokespecial #43                 // Method java/util/ArrayList."<init>":(I)V
      25: astore_3
      26: aload_0
      27: invokeinterface #44,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      32: astore        4
      34: aload         4
      36: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      41: ifeq          118
      44: aload         4
      46: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      51: checkcast     #101                // class javax/websocket/Extension
      54: astore        5
      56: aload_2
      57: aload         5
      59: invokeinterface #102,  1          // InterfaceMethod javax/websocket/Extension.getName:()Ljava/lang/String;
      64: invokevirtual #103                // Method java/util/LinkedHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      67: checkcast     #79                 // class java/util/List
      70: astore        6
      72: aload         6
      74: ifnonnull     100
      77: new           #27                 // class java/util/ArrayList
      80: dup
      81: invokespecial #28                 // Method java/util/ArrayList."<init>":()V
      84: astore        6
      86: aload_2
      87: aload         5
      89: invokeinterface #102,  1          // InterfaceMethod javax/websocket/Extension.getName:()Ljava/lang/String;
      94: aload         6
      96: invokevirtual #104                // Method java/util/LinkedHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      99: pop
     100: aload         6
     102: aload         5
     104: invokeinterface #105,  1          // InterfaceMethod javax/websocket/Extension.getParameters:()Ljava/util/List;
     109: invokeinterface #49,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     114: pop
     115: goto          34
     118: aload_2
     119: invokevirtual #106                // Method java/util/LinkedHashMap.entrySet:()Ljava/util/Set;
     122: invokeinterface #76,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     127: astore        4
     129: aload         4
     131: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     136: ifeq          195
     139: aload         4
     141: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     146: checkcast     #77                 // class java/util/Map$Entry
     149: astore        5
     151: aload_1
     152: aload         5
     154: invokeinterface #80,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     159: checkcast     #33                 // class java/lang/String
     162: aload         5
     164: invokeinterface #78,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     169: checkcast     #79                 // class java/util/List
     172: iconst_1
     173: invokevirtual #107                // Method org/apache/tomcat/websocket/TransformationFactory.create:(Ljava/lang/String;Ljava/util/List;Z)Lorg/apache/tomcat/websocket/Transformation;
     176: astore        6
     178: aload         6
     180: ifnull        192
     183: aload_3
     184: aload         6
     186: invokeinterface #49,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     191: pop
     192: goto          129
     195: aload_3
     196: areturn

  private static void append(java.lang.StringBuilder, javax.websocket.Extension);
    Code:
       0: aload_1
       1: ifnull        25
       4: aload_1
       5: invokeinterface #102,  1          // InterfaceMethod javax/websocket/Extension.getName:()Ljava/lang/String;
      10: ifnull        25
      13: aload_1
      14: invokeinterface #102,  1          // InterfaceMethod javax/websocket/Extension.getName:()Ljava/lang/String;
      19: invokevirtual #64                 // Method java/lang/String.length:()I
      22: ifne          26
      25: return
      26: aload_0
      27: aload_1
      28: invokeinterface #102,  1          // InterfaceMethod javax/websocket/Extension.getName:()Ljava/lang/String;
      33: invokevirtual #108                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      36: pop
      37: aload_1
      38: invokeinterface #105,  1          // InterfaceMethod javax/websocket/Extension.getParameters:()Ljava/util/List;
      43: invokeinterface #44,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      48: astore_2
      49: aload_2
      50: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      55: ifeq          116
      58: aload_2
      59: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      64: checkcast     #109                // class javax/websocket/Extension$Parameter
      67: astore_3
      68: aload_0
      69: bipush        59
      71: invokevirtual #52                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      74: pop
      75: aload_0
      76: aload_3
      77: invokeinterface #110,  1          // InterfaceMethod javax/websocket/Extension$Parameter.getName:()Ljava/lang/String;
      82: invokevirtual #108                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      85: pop
      86: aload_3
      87: invokeinterface #111,  1          // InterfaceMethod javax/websocket/Extension$Parameter.getValue:()Ljava/lang/String;
      92: ifnull        113
      95: aload_0
      96: bipush        61
      98: invokevirtual #52                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     101: pop
     102: aload_0
     103: aload_3
     104: invokeinterface #111,  1          // InterfaceMethod javax/websocket/Extension$Parameter.getValue:()Ljava/lang/String;
     109: invokevirtual #108                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     112: pop
     113: goto          49
     116: return

  private static boolean headerContainsToken(javax.servlet.http.HttpServletRequest, java.lang.String, java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #30,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeaders:(Ljava/lang/String;)Ljava/util/Enumeration;
       7: astore_3
       8: aload_3
       9: invokeinterface #31,  1           // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
      14: ifeq          86
      17: aload_3
      18: invokeinterface #32,  1           // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
      23: checkcast     #33                 // class java/lang/String
      26: astore        4
      28: aload         4
      30: ldc           #112                // String ,
      32: invokevirtual #113                // Method java/lang/String.split:(Ljava/lang/String;)[Ljava/lang/String;
      35: astore        5
      37: aload         5
      39: astore        6
      41: aload         6
      43: arraylength
      44: istore        7
      46: iconst_0
      47: istore        8
      49: iload         8
      51: iload         7
      53: if_icmpge     83
      56: aload         6
      58: iload         8
      60: aaload
      61: astore        9
      63: aload_2
      64: aload         9
      66: invokevirtual #114                // Method java/lang/String.trim:()Ljava/lang/String;
      69: invokevirtual #115                // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      72: ifeq          77
      75: iconst_1
      76: ireturn
      77: iinc          8, 1
      80: goto          49
      83: goto          8
      86: iconst_0
      87: ireturn

  private static java.util.List<java.lang.String> getTokensFromHeader(javax.servlet.http.HttpServletRequest, java.lang.String);
    Code:
       0: new           #27                 // class java/util/ArrayList
       3: dup
       4: invokespecial #28                 // Method java/util/ArrayList."<init>":()V
       7: astore_2
       8: aload_0
       9: aload_1
      10: invokeinterface #30,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeaders:(Ljava/lang/String;)Ljava/util/Enumeration;
      15: astore_3
      16: aload_3
      17: invokeinterface #31,  1           // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
      22: ifeq          92
      25: aload_3
      26: invokeinterface #32,  1           // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
      31: checkcast     #33                 // class java/lang/String
      34: astore        4
      36: aload         4
      38: ldc           #112                // String ,
      40: invokevirtual #113                // Method java/lang/String.split:(Ljava/lang/String;)[Ljava/lang/String;
      43: astore        5
      45: aload         5
      47: astore        6
      49: aload         6
      51: arraylength
      52: istore        7
      54: iconst_0
      55: istore        8
      57: iload         8
      59: iload         7
      61: if_icmpge     89
      64: aload         6
      66: iload         8
      68: aaload
      69: astore        9
      71: aload_2
      72: aload         9
      74: invokevirtual #114                // Method java/lang/String.trim:()Ljava/lang/String;
      77: invokeinterface #49,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      82: pop
      83: iinc          8, 1
      86: goto          57
      89: goto          16
      92: aload_2
      93: areturn

  private static java.lang.String getWebSocketAccept(java.lang.String);
    Code:
       0: iconst_2
       1: anewarray     #116                // class "[B"
       4: dup
       5: iconst_0
       6: aload_0
       7: getstatic     #117                // Field java/nio/charset/StandardCharsets.ISO_8859_1:Ljava/nio/charset/Charset;
      10: invokevirtual #118                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      13: aastore
      14: dup
      15: iconst_1
      16: getstatic     #119                // Field WS_ACCEPT:[B
      19: aastore
      20: invokestatic  #120                // Method org/apache/tomcat/util/security/ConcurrentMessageDigest.digestSHA1:([[B)[B
      23: astore_1
      24: aload_1
      25: invokestatic  #121                // Method org/apache/tomcat/util/codec/binary/Base64.encodeBase64String:([B)Ljava/lang/String;
      28: areturn

  static {};
    Code:
       0: ldc           #122                // class org/apache/tomcat/websocket/server/UpgradeUtil
       2: invokevirtual #123                // Method java/lang/Class.getPackage:()Ljava/lang/Package;
       5: invokevirtual #124                // Method java/lang/Package.getName:()Ljava/lang/String;
       8: invokestatic  #125                // Method org/apache/tomcat/util/res/StringManager.getManager:(Ljava/lang/String;)Lorg/apache/tomcat/util/res/StringManager;
      11: putstatic     #57                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      14: ldc           #126                // String 258EAFA5-E914-47DA-95CA-C5AB0DC85B11
      16: getstatic     #117                // Field java/nio/charset/StandardCharsets.ISO_8859_1:Ljava/nio/charset/Charset;
      19: invokevirtual #118                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      22: putstatic     #119                // Field WS_ACCEPT:[B
      25: return
}

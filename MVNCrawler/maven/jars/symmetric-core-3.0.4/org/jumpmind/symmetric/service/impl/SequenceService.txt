Compiled from "SequenceService.java"
public class org.jumpmind.symmetric.service.impl.SequenceService extends org.jumpmind.symmetric.service.impl.AbstractService implements org.jumpmind.symmetric.service.ISequenceService {
  private java.util.Map<java.lang.String, org.jumpmind.symmetric.model.Sequence> sequenceDefinitionCache;

  public org.jumpmind.symmetric.service.impl.SequenceService(org.jumpmind.symmetric.service.IParameterService, org.jumpmind.symmetric.db.ISymmetricDialect);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #1                  // Method org/jumpmind/symmetric/service/impl/AbstractService."<init>":(Lorg/jumpmind/symmetric/service/IParameterService;Lorg/jumpmind/symmetric/db/ISymmetricDialect;)V
       6: aload_0
       7: new           #2                  // class java/util/HashMap
      10: dup
      11: invokespecial #3                  // Method java/util/HashMap."<init>":()V
      14: putfield      #4                  // Field sequenceDefinitionCache:Ljava/util/Map;
      17: aload_0
      18: new           #5                  // class org/jumpmind/symmetric/service/impl/SequenceServiceSqlMap
      21: dup
      22: aload_2
      23: invokeinterface #6,  1            // InterfaceMethod org/jumpmind/symmetric/db/ISymmetricDialect.getPlatform:()Lorg/jumpmind/db/platform/IDatabasePlatform;
      28: aload_0
      29: invokevirtual #7                  // Method createSqlReplacementTokens:()Ljava/util/Map;
      32: invokespecial #8                  // Method org/jumpmind/symmetric/service/impl/SequenceServiceSqlMap."<init>":(Lorg/jumpmind/db/platform/IDatabasePlatform;Ljava/util/Map;)V
      35: invokevirtual #9                  // Method setSqlMap:(Lorg/jumpmind/symmetric/service/impl/ISqlMap;)V
      38: return

  public void init();
    Code:
       0: aload_0
       1: getfield      #10                 // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
       4: aload_0
       5: iconst_1
       6: anewarray     #11                 // class java/lang/String
       9: dup
      10: iconst_0
      11: ldc           #12                 // String maxOutgoingBatchSql
      13: aastore
      14: invokevirtual #13                 // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
      17: iconst_0
      18: anewarray     #14                 // class java/lang/Object
      21: invokeinterface #15,  3           // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.queryForLong:(Ljava/lang/String;[Ljava/lang/Object;)J
      26: lstore_1
      27: lload_1
      28: lconst_1
      29: lcmp
      30: ifge          35
      33: lconst_1
      34: lstore_1
      35: aload_0
      36: new           #16                 // class org/jumpmind/symmetric/model/Sequence
      39: dup
      40: ldc           #17                 // String outgoing_batch
      42: lload_1
      43: iconst_1
      44: lconst_1
      45: ldc2_w        #18                 // long 9999999999l
      48: ldc           #20                 // String system
      50: iconst_0
      51: invokespecial #21                 // Method org/jumpmind/symmetric/model/Sequence."<init>":(Ljava/lang/String;JIJJLjava/lang/String;Z)V
      54: invokevirtual #22                 // Method create:(Lorg/jumpmind/symmetric/model/Sequence;)V
      57: goto          74
      60: astore_3
      61: aload_0
      62: getfield      #24                 // Field log:Lorg/slf4j/Logger;
      65: ldc           #25                 // String Failed to create sequence {}.  Must be initialized already.
      67: ldc           #17                 // String outgoing_batch
      69: invokeinterface #26,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      74: return
    Exception table:
       from    to  target type
          35    57    60   Class org/jumpmind/db/sql/UniqueKeyException

  public long nextVal(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #27                 // Field parameterService:Lorg/jumpmind/symmetric/service/IParameterService;
       4: ldc           #28                 // String sequence.timeout.ms
       6: ldc2_w        #29                 // long 5000l
       9: invokeinterface #31,  4           // InterfaceMethod org/jumpmind/symmetric/service/IParameterService.getLong:(Ljava/lang/String;J)J
      14: lstore_2
      15: invokestatic  #32                 // Method java/lang/System.currentTimeMillis:()J
      18: lstore        4
      20: aload_0
      21: aload_1
      22: invokevirtual #33                 // Method tryToGetNextVal:(Ljava/lang/String;)J
      25: lstore        6
      27: lload         6
      29: lconst_0
      30: lcmp
      31: ifle          37
      34: lload         6
      36: lreturn
      37: invokestatic  #32                 // Method java/lang/System.currentTimeMillis:()J
      40: lload_2
      41: lsub
      42: lload         4
      44: lcmp
      45: iflt          20
      48: new           #34                 // class java/lang/IllegalStateException
      51: dup
      52: ldc           #35                 // String Timed out after %d ms trying to get the next val for %s
      54: iconst_2
      55: anewarray     #14                 // class java/lang/Object
      58: dup
      59: iconst_0
      60: invokestatic  #32                 // Method java/lang/System.currentTimeMillis:()J
      63: lload         4
      65: lsub
      66: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      69: aastore
      70: dup
      71: iconst_1
      72: aload_1
      73: aastore
      74: invokestatic  #37                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      77: invokespecial #38                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      80: athrow

  protected long tryToGetNextVal(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #39                 // Method currVal:(Ljava/lang/String;)J
       5: lstore_2
       6: aload_0
       7: getfield      #4                  // Field sequenceDefinitionCache:Ljava/util/Map;
      10: aload_1
      11: invokeinterface #40,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      16: checkcast     #16                 // class org/jumpmind/symmetric/model/Sequence
      19: astore        4
      21: aload         4
      23: ifnonnull     87
      26: aload_0
      27: aload_1
      28: invokevirtual #41                 // Method get:(Ljava/lang/String;)Lorg/jumpmind/symmetric/model/Sequence;
      31: astore        4
      33: aload         4
      35: ifnull        54
      38: aload_0
      39: getfield      #4                  // Field sequenceDefinitionCache:Ljava/util/Map;
      42: aload_1
      43: aload         4
      45: invokeinterface #42,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      50: pop
      51: goto          87
      54: new           #34                 // class java/lang/IllegalStateException
      57: dup
      58: ldc           #43                 // String The sequence named %s is not configured in %s
      60: iconst_2
      61: anewarray     #14                 // class java/lang/Object
      64: dup
      65: iconst_0
      66: aload_1
      67: aastore
      68: dup
      69: iconst_1
      70: aload_0
      71: invokevirtual #44                 // Method getTablePrefix:()Ljava/lang/String;
      74: ldc           #45                 // String sequence
      76: invokestatic  #46                 // Method org/jumpmind/symmetric/common/TableConstants.getTableName:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      79: aastore
      80: invokestatic  #37                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      83: invokespecial #38                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      86: athrow
      87: lload_2
      88: aload         4
      90: invokevirtual #47                 // Method org/jumpmind/symmetric/model/Sequence.getIncrementBy:()I
      93: i2l
      94: ladd
      95: lstore        5
      97: lload         5
      99: aload         4
     101: invokevirtual #48                 // Method org/jumpmind/symmetric/model/Sequence.getMaxValue:()J
     104: lcmp
     105: ifle          147
     108: aload         4
     110: invokevirtual #49                 // Method org/jumpmind/symmetric/model/Sequence.isCycle:()Z
     113: ifeq          126
     116: aload         4
     118: invokevirtual #50                 // Method org/jumpmind/symmetric/model/Sequence.getMinValue:()J
     121: lstore        5
     123: goto          197
     126: new           #34                 // class java/lang/IllegalStateException
     129: dup
     130: ldc           #51                 // String The sequence named %s has reached it\'s max value.  No more numbers can be handled out.
     132: iconst_1
     133: anewarray     #14                 // class java/lang/Object
     136: dup
     137: iconst_0
     138: aload_1
     139: aastore
     140: invokestatic  #37                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     143: invokespecial #38                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     146: athrow
     147: lload         5
     149: aload         4
     151: invokevirtual #50                 // Method org/jumpmind/symmetric/model/Sequence.getMinValue:()J
     154: lcmp
     155: ifge          197
     158: aload         4
     160: invokevirtual #49                 // Method org/jumpmind/symmetric/model/Sequence.isCycle:()Z
     163: ifeq          176
     166: aload         4
     168: invokevirtual #48                 // Method org/jumpmind/symmetric/model/Sequence.getMaxValue:()J
     171: lstore        5
     173: goto          197
     176: new           #34                 // class java/lang/IllegalStateException
     179: dup
     180: ldc           #52                 // String The sequence named %s has reached it\'s min value.  No more numbers can be handled out.
     182: iconst_1
     183: anewarray     #14                 // class java/lang/Object
     186: dup
     187: iconst_0
     188: aload_1
     189: aastore
     190: invokestatic  #37                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     193: invokespecial #38                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     196: athrow
     197: aload_0
     198: getfield      #10                 // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
     201: aload_0
     202: iconst_1
     203: anewarray     #11                 // class java/lang/String
     206: dup
     207: iconst_0
     208: ldc           #53                 // String updateCurrentValueSql
     210: aastore
     211: invokevirtual #13                 // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
     214: iconst_3
     215: anewarray     #14                 // class java/lang/Object
     218: dup
     219: iconst_0
     220: lload         5
     222: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     225: aastore
     226: dup
     227: iconst_1
     228: aload_1
     229: aastore
     230: dup
     231: iconst_2
     232: lload_2
     233: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     236: aastore
     237: invokeinterface #54,  3           // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.update:(Ljava/lang/String;[Ljava/lang/Object;)I
     242: istore        7
     244: iload         7
     246: iconst_1
     247: if_icmpeq     255
     250: ldc2_w        #55                 // long -1l
     253: lstore        5
     255: lload         5
     257: lreturn

  public long currVal(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
       4: aload_0
       5: iconst_1
       6: anewarray     #11                 // class java/lang/String
       9: dup
      10: iconst_0
      11: ldc           #57                 // String getCurrentValueSql
      13: aastore
      14: invokevirtual #13                 // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
      17: iconst_1
      18: anewarray     #14                 // class java/lang/Object
      21: dup
      22: iconst_0
      23: aload_1
      24: aastore
      25: invokeinterface #15,  3           // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.queryForLong:(Ljava/lang/String;[Ljava/lang/Object;)J
      30: lreturn

  public void create(org.jumpmind.symmetric.model.Sequence);
    Code:
       0: aload_0
       1: getfield      #10                 // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
       4: aload_0
       5: iconst_1
       6: anewarray     #11                 // class java/lang/String
       9: dup
      10: iconst_0
      11: ldc           #58                 // String insertSequenceSql
      13: aastore
      14: invokevirtual #13                 // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
      17: bipush        7
      19: anewarray     #14                 // class java/lang/Object
      22: dup
      23: iconst_0
      24: aload_1
      25: invokevirtual #59                 // Method org/jumpmind/symmetric/model/Sequence.getSequenceName:()Ljava/lang/String;
      28: aastore
      29: dup
      30: iconst_1
      31: aload_1
      32: invokevirtual #60                 // Method org/jumpmind/symmetric/model/Sequence.getCurrentValue:()J
      35: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      38: aastore
      39: dup
      40: iconst_2
      41: aload_1
      42: invokevirtual #47                 // Method org/jumpmind/symmetric/model/Sequence.getIncrementBy:()I
      45: invokestatic  #61                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      48: aastore
      49: dup
      50: iconst_3
      51: aload_1
      52: invokevirtual #50                 // Method org/jumpmind/symmetric/model/Sequence.getMinValue:()J
      55: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      58: aastore
      59: dup
      60: iconst_4
      61: aload_1
      62: invokevirtual #48                 // Method org/jumpmind/symmetric/model/Sequence.getMaxValue:()J
      65: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      68: aastore
      69: dup
      70: iconst_5
      71: aload_1
      72: invokevirtual #49                 // Method org/jumpmind/symmetric/model/Sequence.isCycle:()Z
      75: ifeq          82
      78: iconst_1
      79: goto          83
      82: iconst_0
      83: invokestatic  #61                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      86: aastore
      87: dup
      88: bipush        6
      90: aload_1
      91: invokevirtual #62                 // Method org/jumpmind/symmetric/model/Sequence.getLastUpdateBy:()Ljava/lang/String;
      94: aastore
      95: invokeinterface #54,  3           // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.update:(Ljava/lang/String;[Ljava/lang/Object;)I
     100: pop
     101: return

  public org.jumpmind.symmetric.model.Sequence get(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
       4: aload_0
       5: iconst_1
       6: anewarray     #11                 // class java/lang/String
       9: dup
      10: iconst_0
      11: ldc           #63                 // String getSequenceSql
      13: aastore
      14: invokevirtual #13                 // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
      17: new           #64                 // class org/jumpmind/symmetric/service/impl/SequenceService$SequenceRowMapper
      20: dup
      21: aload_0
      22: invokespecial #65                 // Method org/jumpmind/symmetric/service/impl/SequenceService$SequenceRowMapper."<init>":(Lorg/jumpmind/symmetric/service/impl/SequenceService;)V
      25: iconst_1
      26: anewarray     #14                 // class java/lang/Object
      29: dup
      30: iconst_0
      31: aload_1
      32: aastore
      33: invokeinterface #66,  4           // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.queryForObject:(Ljava/lang/String;Lorg/jumpmind/db/sql/ISqlRowMapper;[Ljava/lang/Object;)Ljava/lang/Object;
      38: checkcast     #16                 // class org/jumpmind/symmetric/model/Sequence
      41: areturn
}

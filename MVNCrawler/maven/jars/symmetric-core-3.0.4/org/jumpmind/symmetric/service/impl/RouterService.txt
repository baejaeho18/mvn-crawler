Compiled from "RouterService.java"
public class org.jumpmind.symmetric.service.impl.RouterService extends org.jumpmind.symmetric.service.impl.AbstractService implements org.jumpmind.symmetric.service.IRouterService {
  private java.util.Map<java.lang.String, org.jumpmind.symmetric.route.IDataRouter> routers;

  private java.util.Map<java.lang.String, org.jumpmind.symmetric.route.IBatchAlgorithm> batchAlgorithms;

  private java.util.Map<java.lang.String, java.lang.Boolean> defaultRouterOnlyLastState;

  transient java.util.concurrent.ExecutorService readThread;

  private org.jumpmind.symmetric.ISymmetricEngine engine;

  public org.jumpmind.symmetric.service.impl.RouterService(org.jumpmind.symmetric.ISymmetricEngine);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #1,  1            // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getParameterService:()Lorg/jumpmind/symmetric/service/IParameterService;
       7: aload_1
       8: invokeinterface #2,  1            // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getSymmetricDialect:()Lorg/jumpmind/symmetric/db/ISymmetricDialect;
      13: invokespecial #3                  // Method org/jumpmind/symmetric/service/impl/AbstractService."<init>":(Lorg/jumpmind/symmetric/service/IParameterService;Lorg/jumpmind/symmetric/db/ISymmetricDialect;)V
      16: aload_0
      17: new           #4                  // class java/util/HashMap
      20: dup
      21: invokespecial #5                  // Method java/util/HashMap."<init>":()V
      24: putfield      #6                  // Field defaultRouterOnlyLastState:Ljava/util/Map;
      27: aload_0
      28: aconst_null
      29: putfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
      32: aload_0
      33: aload_1
      34: putfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      37: aload_0
      38: new           #4                  // class java/util/HashMap
      41: dup
      42: invokespecial #5                  // Method java/util/HashMap."<init>":()V
      45: putfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
      48: aload_0
      49: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
      52: ldc           #10                 // String default
      54: new           #11                 // class org/jumpmind/symmetric/route/DefaultBatchAlgorithm
      57: dup
      58: invokespecial #12                 // Method org/jumpmind/symmetric/route/DefaultBatchAlgorithm."<init>":()V
      61: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      66: pop
      67: aload_0
      68: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
      71: ldc           #14                 // String nontransactional
      73: new           #15                 // class org/jumpmind/symmetric/route/NonTransactionalBatchAlgorithm
      76: dup
      77: invokespecial #16                 // Method org/jumpmind/symmetric/route/NonTransactionalBatchAlgorithm."<init>":()V
      80: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      85: pop
      86: aload_0
      87: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
      90: ldc           #17                 // String transactional
      92: new           #18                 // class org/jumpmind/symmetric/route/TransactionalBatchAlgorithm
      95: dup
      96: invokespecial #19                 // Method org/jumpmind/symmetric/route/TransactionalBatchAlgorithm."<init>":()V
      99: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     104: pop
     105: aload_0
     106: new           #4                  // class java/util/HashMap
     109: dup
     110: invokespecial #5                  // Method java/util/HashMap."<init>":()V
     113: putfield      #20                 // Field routers:Ljava/util/Map;
     116: aload_0
     117: getfield      #20                 // Field routers:Ljava/util/Map;
     120: ldc           #21                 // String configurationChanged
     122: new           #22                 // class org/jumpmind/symmetric/route/ConfigurationChangedDataRouter
     125: dup
     126: aload_1
     127: invokespecial #23                 // Method org/jumpmind/symmetric/route/ConfigurationChangedDataRouter."<init>":(Lorg/jumpmind/symmetric/ISymmetricEngine;)V
     130: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     135: pop
     136: aload_0
     137: getfield      #20                 // Field routers:Ljava/util/Map;
     140: ldc           #24                 // String bsh
     142: new           #25                 // class org/jumpmind/symmetric/route/BshDataRouter
     145: dup
     146: aload_1
     147: invokespecial #26                 // Method org/jumpmind/symmetric/route/BshDataRouter."<init>":(Lorg/jumpmind/symmetric/ISymmetricEngine;)V
     150: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     155: pop
     156: aload_0
     157: getfield      #20                 // Field routers:Ljava/util/Map;
     160: ldc           #27                 // String subselect
     162: new           #28                 // class org/jumpmind/symmetric/route/SubSelectDataRouter
     165: dup
     166: aload_0
     167: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
     170: invokespecial #30                 // Method org/jumpmind/symmetric/route/SubSelectDataRouter."<init>":(Lorg/jumpmind/symmetric/db/ISymmetricDialect;)V
     173: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     178: pop
     179: aload_0
     180: getfield      #20                 // Field routers:Ljava/util/Map;
     183: ldc           #31                 // String lookuptable
     185: new           #32                 // class org/jumpmind/symmetric/route/LookupTableDataRouter
     188: dup
     189: aload_0
     190: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
     193: invokespecial #33                 // Method org/jumpmind/symmetric/route/LookupTableDataRouter."<init>":(Lorg/jumpmind/symmetric/db/ISymmetricDialect;)V
     196: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     201: pop
     202: aload_0
     203: getfield      #20                 // Field routers:Ljava/util/Map;
     206: ldc           #10                 // String default
     208: new           #34                 // class org/jumpmind/symmetric/route/DefaultDataRouter
     211: dup
     212: invokespecial #35                 // Method org/jumpmind/symmetric/route/DefaultDataRouter."<init>":()V
     215: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     220: pop
     221: aload_0
     222: getfield      #20                 // Field routers:Ljava/util/Map;
     225: ldc           #36                 // String column
     227: new           #37                 // class org/jumpmind/symmetric/route/ColumnMatchDataRouter
     230: dup
     231: aload_1
     232: invokeinterface #38,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getConfigurationService:()Lorg/jumpmind/symmetric/service/IConfigurationService;
     237: invokespecial #39                 // Method org/jumpmind/symmetric/route/ColumnMatchDataRouter."<init>":(Lorg/jumpmind/symmetric/service/IConfigurationService;)V
     240: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     245: pop
     246: aload_0
     247: new           #40                 // class org/jumpmind/symmetric/service/impl/RouterServiceSqlMap
     250: dup
     251: aload_0
     252: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
     255: invokeinterface #41,  1           // InterfaceMethod org/jumpmind/symmetric/db/ISymmetricDialect.getPlatform:()Lorg/jumpmind/db/platform/IDatabasePlatform;
     260: aload_0
     261: invokevirtual #42                 // Method createSqlReplacementTokens:()Ljava/util/Map;
     264: invokespecial #43                 // Method org/jumpmind/symmetric/service/impl/RouterServiceSqlMap."<init>":(Lorg/jumpmind/db/platform/IDatabasePlatform;Ljava/util/Map;)V
     267: invokevirtual #44                 // Method setSqlMap:(Lorg/jumpmind/symmetric/service/impl/ISqlMap;)V
     270: return

  public boolean shouldDataBeRouted(org.jumpmind.symmetric.route.SimpleRouterContext, org.jumpmind.symmetric.model.DataMetaData, org.jumpmind.symmetric.model.Node, boolean);
    Code:
       0: aload_0
       1: aload_2
       2: invokevirtual #45                 // Method org/jumpmind/symmetric/model/DataMetaData.getTriggerRouter:()Lorg/jumpmind/symmetric/model/TriggerRouter;
       5: invokevirtual #46                 // Method getDataRouter:(Lorg/jumpmind/symmetric/model/TriggerRouter;)Lorg/jumpmind/symmetric/route/IDataRouter;
       8: astore        5
      10: new           #47                 // class java/util/HashSet
      13: dup
      14: iconst_1
      15: invokespecial #48                 // Method java/util/HashSet."<init>":(I)V
      18: astore        6
      20: aload         6
      22: aload_3
      23: invokeinterface #49,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      28: pop
      29: aload         5
      31: aload_1
      32: aload_2
      33: aload         6
      35: iload         4
      37: invokeinterface #50,  5           // InterfaceMethod org/jumpmind/symmetric/route/IDataRouter.routeToNodes:(Lorg/jumpmind/symmetric/route/SimpleRouterContext;Lorg/jumpmind/symmetric/model/DataMetaData;Ljava/util/Set;Z)Ljava/util/Set;
      42: astore        7
      44: aload         7
      46: ifnull        67
      49: aload         7
      51: aload_3
      52: invokevirtual #51                 // Method org/jumpmind/symmetric/model/Node.getNodeId:()Ljava/lang/String;
      55: invokeinterface #52,  2           // InterfaceMethod java/util/Collection.contains:(Ljava/lang/Object;)Z
      60: ifeq          67
      63: iconst_1
      64: goto          68
      67: iconst_0
      68: ireturn

  public synchronized void stop();
    Code:
       0: aload_0
       1: getfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
       4: ifnull        50
       7: aload_0
       8: getfield      #53                 // Field log:Lorg/slf4j/Logger;
      11: ldc           #54                 // String RouterService is shutting down
      13: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      18: aload_0
      19: getfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
      22: invokeinterface #56,  1           // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
      27: aload_0
      28: aconst_null
      29: putfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
      32: goto          50
      35: astore_1
      36: aload_0
      37: getfield      #53                 // Field log:Lorg/slf4j/Logger;
      40: aload_1
      41: invokevirtual #58                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
      44: aload_1
      45: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      50: return
    Exception table:
       from    to  target type
           7    32    35   Class java/lang/Exception

  public synchronized long routeData(boolean);
    Code:
       0: ldc2_w        #60                 // long -1l
       3: lstore_2
       4: iload_1
       5: ifne          27
       8: aload_0
       9: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      12: invokeinterface #62,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getClusterService:()Lorg/jumpmind/symmetric/service/IClusterService;
      17: ldc           #63                 // String ROUTE
      19: invokeinterface #64,  2           // InterfaceMethod org/jumpmind/symmetric/service/IClusterService.lock:(Ljava/lang/String;)Z
      24: ifeq          178
      27: aload_0
      28: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      31: invokeinterface #65,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getOutgoingBatchService:()Lorg/jumpmind/symmetric/service/IOutgoingBatchService;
      36: invokeinterface #66,  1           // InterfaceMethod org/jumpmind/symmetric/service/IOutgoingBatchService.updateAbandonedRoutingBatches:()V
      41: aload_0
      42: invokevirtual #67                 // Method insertInitialLoadEvents:()V
      45: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
      48: lstore        4
      50: new           #69                 // class org/jumpmind/symmetric/route/DataGapDetector
      53: dup
      54: aload_0
      55: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      58: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
      63: aload_0
      64: getfield      #71                 // Field parameterService:Lorg/jumpmind/symmetric/service/IParameterService;
      67: aload_0
      68: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
      71: aload_0
      72: invokespecial #72                 // Method org/jumpmind/symmetric/route/DataGapDetector."<init>":(Lorg/jumpmind/symmetric/service/IDataService;Lorg/jumpmind/symmetric/service/IParameterService;Lorg/jumpmind/symmetric/db/ISymmetricDialect;Lorg/jumpmind/symmetric/service/IRouterService;)V
      75: astore        6
      77: aload         6
      79: invokeinterface #73,  1           // InterfaceMethod org/jumpmind/symmetric/route/IDataToRouteGapDetector.beforeRouting:()V
      84: aload_0
      85: invokevirtual #74                 // Method routeDataForEachChannel:()I
      88: i2l
      89: lstore_2
      90: aload         6
      92: invokeinterface #75,  1           // InterfaceMethod org/jumpmind/symmetric/route/IDataToRouteGapDetector.afterRouting:()V
      97: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     100: lload         4
     102: lsub
     103: lstore        4
     105: lload_2
     106: lconst_0
     107: lcmp
     108: ifgt          120
     111: lload         4
     113: ldc2_w        #76                 // long 30000l
     116: lcmp
     117: ifle          140
     120: aload_0
     121: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     124: ldc           #78                 // String Routed {} data events in {} ms
     126: lload_2
     127: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     130: lload         4
     132: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     135: invokeinterface #80,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     140: jsr           154
     143: goto          178
     146: astore        7
     148: jsr           154
     151: aload         7
     153: athrow
     154: astore        8
     156: iload_1
     157: ifne          176
     160: aload_0
     161: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     164: invokeinterface #62,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getClusterService:()Lorg/jumpmind/symmetric/service/IClusterService;
     169: ldc           #63                 // String ROUTE
     171: invokeinterface #81,  2           // InterfaceMethod org/jumpmind/symmetric/service/IClusterService.unlock:(Ljava/lang/String;)V
     176: ret           8
     178: lload_2
     179: lreturn
    Exception table:
       from    to  target type
          27   143   146   any
         146   151   146   any

  protected void insertInitialLoadEvents();
    Code:
       0: aload_0
       1: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
       4: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
       9: invokeinterface #83,  1           // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findIdentity:()Lorg/jumpmind/symmetric/model/Node;
      14: astore_1
      15: aload_1
      16: ifnull        220
      19: aload_0
      20: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      23: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
      28: iconst_0
      29: invokeinterface #84,  2           // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findAllNodeSecurity:(Z)Ljava/util/Map;
      34: astore_2
      35: aload_2
      36: ifnull        220
      39: aload_2
      40: invokeinterface #85,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      45: invokeinterface #86,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      50: astore_3
      51: aload_3
      52: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      57: ifeq          220
      60: aload_3
      61: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      66: checkcast     #89                 // class org/jumpmind/symmetric/model/NodeSecurity
      69: astore        4
      71: aload         4
      73: invokevirtual #90                 // Method org/jumpmind/symmetric/model/NodeSecurity.getNodeId:()Ljava/lang/String;
      76: aload_1
      77: invokevirtual #51                 // Method org/jumpmind/symmetric/model/Node.getNodeId:()Ljava/lang/String;
      80: invokevirtual #91                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      83: ifne          217
      86: aload         4
      88: invokevirtual #92                 // Method org/jumpmind/symmetric/model/NodeSecurity.isInitialLoadEnabled:()Z
      91: ifeq          217
      94: aload         4
      96: invokevirtual #93                 // Method org/jumpmind/symmetric/model/NodeSecurity.getRegistrationTime:()Ljava/util/Date;
      99: ifnonnull     117
     102: aload         4
     104: invokevirtual #90                 // Method org/jumpmind/symmetric/model/NodeSecurity.getNodeId:()Ljava/lang/String;
     107: aload_1
     108: invokevirtual #94                 // Method org/jumpmind/symmetric/model/Node.getCreatedAtNodeId:()Ljava/lang/String;
     111: invokevirtual #91                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     114: ifeq          217
     117: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     120: lstore        5
     122: aload_0
     123: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     126: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
     131: aload_0
     132: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     135: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
     140: aload         4
     142: invokevirtual #90                 // Method org/jumpmind/symmetric/model/NodeSecurity.getNodeId:()Ljava/lang/String;
     145: invokeinterface #95,  2           // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findNode:(Ljava/lang/String;)Lorg/jumpmind/symmetric/model/Node;
     150: invokeinterface #96,  2           // InterfaceMethod org/jumpmind/symmetric/service/IDataService.insertReloadEvents:(Lorg/jumpmind/symmetric/model/Node;)V
     155: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     158: lload         5
     160: lsub
     161: lstore        5
     163: lload         5
     165: ldc2_w        #76                 // long 30000l
     168: lcmp
     169: ifle          196
     172: aload_0
     173: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     176: ldc           #97                 // String Inserted reload events for node {} in {} ms
     178: aload         4
     180: invokevirtual #90                 // Method org/jumpmind/symmetric/model/NodeSecurity.getNodeId:()Ljava/lang/String;
     183: lload         5
     185: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     188: invokeinterface #98,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     193: goto          217
     196: aload_0
     197: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     200: ldc           #97                 // String Inserted reload events for node {} in {} ms
     202: aload         4
     204: invokevirtual #90                 // Method org/jumpmind/symmetric/model/NodeSecurity.getNodeId:()Ljava/lang/String;
     207: lload         5
     209: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     212: invokeinterface #80,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     217: goto          51
     220: goto          238
     223: astore_1
     224: aload_0
     225: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     228: aload_1
     229: invokevirtual #58                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     232: aload_1
     233: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     238: return
    Exception table:
       from    to  target type
           0   220   223   Class java/lang/Exception

  protected int routeDataForEachChannel();
    Code:
       0: aload_0
       1: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
       4: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
       9: invokeinterface #83,  1           // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findIdentity:()Lorg/jumpmind/symmetric/model/Node;
      14: astore_1
      15: aload_0
      16: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      19: invokeinterface #38,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getConfigurationService:()Lorg/jumpmind/symmetric/service/IConfigurationService;
      24: iconst_0
      25: invokeinterface #99,  2           // InterfaceMethod org/jumpmind/symmetric/service/IConfigurationService.getNodeChannels:(Z)Ljava/util/List;
      30: astore_2
      31: iconst_0
      32: istore_3
      33: aload_0
      34: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      37: invokeinterface #100,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getTriggerRouterService:()Lorg/jumpmind/symmetric/service/ITriggerRouterService;
      42: aload_0
      43: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      46: invokeinterface #1,  1            // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getParameterService:()Lorg/jumpmind/symmetric/service/IParameterService;
      51: invokeinterface #101,  1          // InterfaceMethod org/jumpmind/symmetric/service/IParameterService.getNodeGroupId:()Ljava/lang/String;
      56: invokeinterface #102,  2          // InterfaceMethod org/jumpmind/symmetric/service/ITriggerRouterService.getTriggerRoutersByChannel:(Ljava/lang/String;)Ljava/util/Map;
      61: astore        4
      63: aload_2
      64: invokeinterface #103,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      69: astore        5
      71: aload         5
      73: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      78: ifeq          177
      81: aload         5
      83: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      88: checkcast     #104                // class org/jumpmind/symmetric/model/NodeChannel
      91: astore        6
      93: aload         6
      95: invokevirtual #105                // Method org/jumpmind/symmetric/model/NodeChannel.isSuspendEnabled:()Z
      98: ifne          146
     101: aload         6
     103: invokevirtual #106                // Method org/jumpmind/symmetric/model/NodeChannel.isEnabled:()Z
     106: ifeq          146
     109: iload_3
     110: aload_0
     111: aload         6
     113: aload_1
     114: aload_0
     115: aload         6
     117: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     120: aload         4
     122: aload         6
     124: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     127: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     132: checkcast     #109                // class java/util/List
     135: invokevirtual #110                // Method producesCommonBatches:(Ljava/lang/String;Ljava/util/List;)Z
     138: invokevirtual #111                // Method routeDataForChannel:(Lorg/jumpmind/symmetric/model/NodeChannel;Lorg/jumpmind/symmetric/model/Node;Z)I
     141: iadd
     142: istore_3
     143: goto          174
     146: aload_0
     147: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     150: invokeinterface #112,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     155: ifeq          174
     158: aload_0
     159: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     162: ldc           #113                // String Not routing the {} channel.  It is either disabled or suspended.
     164: aload         6
     166: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     169: invokeinterface #114,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     174: goto          71
     177: iload_3
     178: ireturn

  protected boolean producesCommonBatches(java.lang.String, java.util.List<org.jumpmind.symmetric.model.TriggerRouter>);
    Code:
       0: iconst_1
       1: invokestatic  #115                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
       4: astore_3
       5: aload_0
       6: getfield      #71                 // Field parameterService:Lorg/jumpmind/symmetric/service/IParameterService;
       9: invokeinterface #101,  1          // InterfaceMethod org/jumpmind/symmetric/service/IParameterService.getNodeGroupId:()Ljava/lang/String;
      14: astore        4
      16: aload_2
      17: ifnull        123
      20: aload_2
      21: invokeinterface #103,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      26: astore        5
      28: aload         5
      30: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      35: ifeq          123
      38: aload         5
      40: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      45: checkcast     #116                // class org/jumpmind/symmetric/model/TriggerRouter
      48: astore        6
      50: aload_0
      51: getfield      #20                 // Field routers:Ljava/util/Map;
      54: aload         6
      56: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
      59: invokevirtual #118                // Method org/jumpmind/symmetric/model/Router.getRouterType:()Ljava/lang/String;
      62: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      67: checkcast     #119                // class org/jumpmind/symmetric/route/IDataRouter
      70: astore        7
      72: aload         7
      74: ifnull        120
      77: aload         7
      79: instanceof    #34                 // class org/jumpmind/symmetric/route/DefaultDataRouter
      82: ifeq          115
      85: aload         6
      87: invokevirtual #120                // Method org/jumpmind/symmetric/model/TriggerRouter.getTrigger:()Lorg/jumpmind/symmetric/model/Trigger;
      90: invokevirtual #121                // Method org/jumpmind/symmetric/model/Trigger.isSyncOnIncomingBatch:()Z
      93: ifeq          120
      96: aload         6
      98: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
     101: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
     104: invokevirtual #123                // Method org/jumpmind/symmetric/model/NodeGroupLink.getTargetNodeGroupId:()Ljava/lang/String;
     107: aload         4
     109: invokevirtual #91                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     112: ifeq          120
     115: iconst_0
     116: invokestatic  #115                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     119: astore_3
     120: goto          28
     123: aload_3
     124: aload_0
     125: getfield      #6                  // Field defaultRouterOnlyLastState:Ljava/util/Map;
     128: aload_1
     129: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     134: invokevirtual #124                // Method java/lang/Boolean.equals:(Ljava/lang/Object;)Z
     137: ifne          186
     140: aload_3
     141: invokevirtual #125                // Method java/lang/Boolean.booleanValue:()Z
     144: ifeq          162
     147: aload_0
     148: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     151: ldc           #126                // String The \'{}\' channel is in common batch mode
     153: aload_1
     154: invokeinterface #127,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     159: goto          174
     162: aload_0
     163: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     166: ldc           #128                // String The \'{}\' channel is NOT in common batch mode
     168: aload_1
     169: invokeinterface #127,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     174: aload_0
     175: getfield      #6                  // Field defaultRouterOnlyLastState:Ljava/util/Map;
     178: aload_1
     179: aload_3
     180: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     185: pop
     186: aload_3
     187: invokevirtual #125                // Method java/lang/Boolean.booleanValue:()Z
     190: ireturn

  protected int routeDataForChannel(org.jumpmind.symmetric.model.NodeChannel, org.jumpmind.symmetric.model.Node, boolean);
    Code:
       0: aconst_null
       1: astore        4
       3: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
       6: lstore        5
       8: iconst_m1
       9: istore        7
      11: new           #129                // class org/jumpmind/symmetric/route/ChannelRouterContext
      14: dup
      15: aload_2
      16: invokevirtual #51                 // Method org/jumpmind/symmetric/model/Node.getNodeId:()Ljava/lang/String;
      19: aload_1
      20: aload_0
      21: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
      24: invokeinterface #41,  1           // InterfaceMethod org/jumpmind/symmetric/db/ISymmetricDialect.getPlatform:()Lorg/jumpmind/db/platform/IDatabasePlatform;
      29: invokeinterface #130,  1          // InterfaceMethod org/jumpmind/db/platform/IDatabasePlatform.getSqlTemplate:()Lorg/jumpmind/db/sql/ISqlTemplate;
      34: invokeinterface #131,  1          // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.startSqlTransaction:()Lorg/jumpmind/db/sql/ISqlTransaction;
      39: invokespecial #132                // Method org/jumpmind/symmetric/route/ChannelRouterContext."<init>":(Ljava/lang/String;Lorg/jumpmind/symmetric/model/NodeChannel;Lorg/jumpmind/db/sql/ISqlTransaction;)V
      42: astore        4
      44: aload         4
      46: iload_3
      47: invokevirtual #133                // Method org/jumpmind/symmetric/route/ChannelRouterContext.setProduceCommonBatches:(Z)V
      50: aload_0
      51: aload         4
      53: invokevirtual #134                // Method selectDataAndRoute:(Lorg/jumpmind/symmetric/route/ChannelRouterContext;)I
      56: istore        7
      58: iload         7
      60: istore        8
      62: jsr           156
      65: iload         8
      67: ireturn
      68: astore        8
      70: aload_0
      71: getfield      #53                 // Field log:Lorg/slf4j/Logger;
      74: ldc           #136                // String The routing process was interrupted.  Rolling back changes
      76: invokeinterface #137,  2          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
      81: aload         4
      83: ifnull        91
      86: aload         4
      88: invokevirtual #138                // Method org/jumpmind/symmetric/route/ChannelRouterContext.rollback:()V
      91: iconst_0
      92: istore        9
      94: jsr           156
      97: iload         9
      99: ireturn
     100: astore        8
     102: aload_0
     103: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     106: ldc           #139                // String Failed to route and batch data on \'%s\' channel
     108: iconst_1
     109: anewarray     #140                // class java/lang/Object
     112: dup
     113: iconst_0
     114: aload_1
     115: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     118: aastore
     119: invokestatic  #141                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     122: aload         8
     124: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     129: aload         4
     131: ifnull        139
     134: aload         4
     136: invokevirtual #138                // Method org/jumpmind/symmetric/route/ChannelRouterContext.rollback:()V
     139: iconst_0
     140: istore        9
     142: jsr           156
     145: iload         9
     147: ireturn
     148: astore        10
     150: jsr           156
     153: aload         10
     155: athrow
     156: astore        11
     158: iload         7
     160: ifle          347
     163: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     166: lstore        12
     168: aload_0
     169: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     172: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
     177: aload         4
     179: invokevirtual #142                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getSqlTransaction:()Lorg/jumpmind/db/sql/ISqlTransaction;
     182: aload         4
     184: invokevirtual #143                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getDataEventList:()Ljava/util/List;
     187: invokeinterface #144,  3          // InterfaceMethod org/jumpmind/symmetric/service/IDataService.insertDataEvents:(Lorg/jumpmind/db/sql/ISqlTransaction;Ljava/util/List;)V
     192: aload         4
     194: invokevirtual #145                // Method org/jumpmind/symmetric/route/ChannelRouterContext.clearDataEventsList:()V
     197: aload_0
     198: aload         4
     200: invokevirtual #146                // Method completeBatchesAndCommit:(Lorg/jumpmind/symmetric/route/ChannelRouterContext;)V
     203: aload         4
     205: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     208: lload         12
     210: lsub
     211: ldc           #147                // String data.events.insert.time.ms
     213: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     216: aload         4
     218: invokevirtual #149                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getLastDataProcessed:()Lorg/jumpmind/symmetric/model/Data;
     221: astore        14
     223: aload         14
     225: ifnull        347
     228: aload         14
     230: invokevirtual #150                // Method org/jumpmind/symmetric/model/Data.getDataId:()J
     233: lconst_0
     234: lcmp
     235: ifle          347
     238: aload_1
     239: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     242: astore        15
     244: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     247: lstore        16
     249: aload_0
     250: getfield      #151                // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
     253: aload_0
     254: iconst_1
     255: anewarray     #152                // class java/lang/String
     258: dup
     259: iconst_0
     260: ldc           #153                // String selectUnroutedCountForChannelSql
     262: aastore
     263: invokevirtual #154                // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
     266: iconst_2
     267: anewarray     #140                // class java/lang/Object
     270: dup
     271: iconst_0
     272: aload         15
     274: aastore
     275: dup
     276: iconst_1
     277: aload         14
     279: invokevirtual #150                // Method org/jumpmind/symmetric/model/Data.getDataId:()J
     282: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     285: aastore
     286: invokeinterface #155,  3          // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.queryForInt:(Ljava/lang/String;[Ljava/lang/Object;)I
     291: i2l
     292: lstore        18
     294: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     297: lload         16
     299: lsub
     300: lstore        16
     302: lload         16
     304: ldc2_w        #76                 // long 30000l
     307: lcmp
     308: ifle          329
     311: aload_0
     312: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     315: ldc           #156                // String Unrouted query for channel {} took {} ms
     317: aload         15
     319: lload         16
     321: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     324: invokeinterface #98,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     329: aload_0
     330: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     333: invokeinterface #157,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getStatisticManager:()Lorg/jumpmind/symmetric/statistic/IStatisticManager;
     338: aload         15
     340: lload         18
     342: invokeinterface #158,  4          // InterfaceMethod org/jumpmind/symmetric/statistic/IStatisticManager.setDataUnRouted:(Ljava/lang/String;J)V
     347: jsr           395
     350: goto          432
     353: astore        12
     355: aload         4
     357: ifnull        365
     360: aload         4
     362: invokevirtual #138                // Method org/jumpmind/symmetric/route/ChannelRouterContext.rollback:()V
     365: aload_0
     366: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     369: aload         12
     371: invokevirtual #58                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     374: aload         12
     376: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     381: jsr           395
     384: goto          432
     387: astore        20
     389: jsr           395
     392: aload         20
     394: athrow
     395: astore        21
     397: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     400: lload         5
     402: lsub
     403: lstore        22
     405: aload         4
     407: lload         22
     409: ldc           #159                // String total.time.ms
     411: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     414: aload         4
     416: aload_0
     417: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     420: lload         22
     422: invokevirtual #160                // Method org/jumpmind/symmetric/route/ChannelRouterContext.logStats:(Lorg/slf4j/Logger;J)V
     425: aload         4
     427: invokevirtual #161                // Method org/jumpmind/symmetric/route/ChannelRouterContext.cleanup:()V
     430: ret           21
     432: ret           11
    Exception table:
       from    to  target type
          11    65    68   Class java/lang/InterruptedException
          11    65   100   Class java/lang/Exception
          11    65   148   any
          68    97   148   any
         100   145   148   any
         148   153   148   any
         158   347   353   Class java/lang/Exception
         158   350   387   any
         353   384   387   any
         387   392   387   any

  protected void completeBatchesAndCommit(org.jumpmind.symmetric.route.ChannelRouterContext);
    Code:
       0: new           #47                 // class java/util/HashSet
       3: dup
       4: aload_1
       5: invokevirtual #162                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getUsedDataRouters:()Ljava/util/Set;
       8: invokespecial #163                // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      11: astore_2
      12: new           #164                // class java/util/ArrayList
      15: dup
      16: aload_1
      17: invokevirtual #165                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getBatchesByNodes:()Ljava/util/Map;
      20: invokeinterface #85,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      25: invokespecial #166                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      28: astore_3
      29: aload_1
      30: invokevirtual #167                // Method org/jumpmind/symmetric/route/ChannelRouterContext.commit:()V
      33: aload_3
      34: invokeinterface #103,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      39: astore        4
      41: aload         4
      43: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      48: ifeq          189
      51: aload         4
      53: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      58: checkcast     #168                // class org/jumpmind/symmetric/model/OutgoingBatch
      61: astore        5
      63: aload         5
      65: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
      68: aload         5
      70: invokevirtual #169                // Method org/jumpmind/symmetric/model/OutgoingBatch.getCreateTime:()Ljava/util/Date;
      73: invokevirtual #170                // Method java/util/Date.getTime:()J
      76: lsub
      77: invokevirtual #171                // Method org/jumpmind/symmetric/model/OutgoingBatch.setRouterMillis:(J)V
      80: aload_2
      81: invokeinterface #172,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      86: astore        6
      88: aload         6
      90: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      95: ifeq          123
      98: aload         6
     100: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     105: checkcast     #119                // class org/jumpmind/symmetric/route/IDataRouter
     108: astore        7
     110: aload         7
     112: aload_1
     113: aload         5
     115: invokeinterface #173,  3          // InterfaceMethod org/jumpmind/symmetric/route/IDataRouter.completeBatch:(Lorg/jumpmind/symmetric/route/SimpleRouterContext;Lorg/jumpmind/symmetric/model/OutgoingBatch;)V
     120: goto          88
     123: ldc           #174                // String -1
     125: aload         5
     127: invokevirtual #175                // Method org/jumpmind/symmetric/model/OutgoingBatch.getNodeId:()Ljava/lang/String;
     130: invokevirtual #91                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     133: ifeq          147
     136: aload         5
     138: getstatic     #176                // Field org/jumpmind/symmetric/model/OutgoingBatch$Status.OK:Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;
     141: invokevirtual #177                // Method org/jumpmind/symmetric/model/OutgoingBatch.setStatus:(Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;)V
     144: goto          155
     147: aload         5
     149: getstatic     #178                // Field org/jumpmind/symmetric/model/OutgoingBatch$Status.NE:Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;
     152: invokevirtual #177                // Method org/jumpmind/symmetric/model/OutgoingBatch.setStatus:(Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;)V
     155: aload_0
     156: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     159: invokeinterface #65,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getOutgoingBatchService:()Lorg/jumpmind/symmetric/service/IOutgoingBatchService;
     164: aload         5
     166: invokeinterface #179,  2          // InterfaceMethod org/jumpmind/symmetric/service/IOutgoingBatchService.updateOutgoingBatch:(Lorg/jumpmind/symmetric/model/OutgoingBatch;)V
     171: aload_1
     172: invokevirtual #165                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getBatchesByNodes:()Ljava/util/Map;
     175: aload         5
     177: invokevirtual #175                // Method org/jumpmind/symmetric/model/OutgoingBatch.getNodeId:()Ljava/lang/String;
     180: invokeinterface #180,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     185: pop
     186: goto          41
     189: aload_2
     190: invokeinterface #172,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     195: astore        4
     197: aload         4
     199: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     204: ifeq          230
     207: aload         4
     209: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     214: checkcast     #119                // class org/jumpmind/symmetric/route/IDataRouter
     217: astore        5
     219: aload         5
     221: aload_1
     222: invokeinterface #181,  2          // InterfaceMethod org/jumpmind/symmetric/route/IDataRouter.contextCommitted:(Lorg/jumpmind/symmetric/route/SimpleRouterContext;)V
     227: goto          197
     230: aload_1
     231: iconst_0
     232: invokevirtual #182                // Method org/jumpmind/symmetric/route/ChannelRouterContext.setNeedsCommitted:(Z)V
     235: return

  protected java.util.Set<org.jumpmind.symmetric.model.Node> findAvailableNodes(org.jumpmind.symmetric.model.TriggerRouter, org.jumpmind.symmetric.route.ChannelRouterContext);
    Code:
       0: aload_2
       1: invokevirtual #183                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getAvailableNodes:()Ljava/util/Map;
       4: aload_1
       5: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #184                // class java/util/Set
      13: astore_3
      14: aload_3
      15: ifnonnull     158
      18: new           #47                 // class java/util/HashSet
      21: dup
      22: invokespecial #185                // Method java/util/HashSet."<init>":()V
      25: astore_3
      26: aload_1
      27: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
      30: astore        4
      32: aload_0
      33: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      36: invokeinterface #38,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getConfigurationService:()Lorg/jumpmind/symmetric/service/IConfigurationService;
      41: aload         4
      43: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
      46: invokevirtual #186                // Method org/jumpmind/symmetric/model/NodeGroupLink.getSourceNodeGroupId:()Ljava/lang/String;
      49: aload         4
      51: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
      54: invokevirtual #123                // Method org/jumpmind/symmetric/model/NodeGroupLink.getTargetNodeGroupId:()Ljava/lang/String;
      57: invokeinterface #187,  3          // InterfaceMethod org/jumpmind/symmetric/service/IConfigurationService.getNodeGroupLinkFor:(Ljava/lang/String;Ljava/lang/String;)Lorg/jumpmind/symmetric/model/NodeGroupLink;
      62: astore        5
      64: aload         5
      66: ifnull        101
      69: aload_3
      70: aload_0
      71: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      74: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
      79: aload         4
      81: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
      84: invokevirtual #123                // Method org/jumpmind/symmetric/model/NodeGroupLink.getTargetNodeGroupId:()Ljava/lang/String;
      87: invokeinterface #188,  2          // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findEnabledNodesFromNodeGroup:(Ljava/lang/String;)Ljava/util/Collection;
      92: invokeinterface #189,  2          // InterfaceMethod java/util/Set.addAll:(Ljava/util/Collection;)Z
      97: pop
      98: goto          146
     101: aload_0
     102: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     105: ldc           #190                // String The router {} has no node group link configured from {} to {}
     107: iconst_3
     108: anewarray     #140                // class java/lang/Object
     111: dup
     112: iconst_0
     113: aload         4
     115: invokevirtual #191                // Method org/jumpmind/symmetric/model/Router.getRouterId:()Ljava/lang/String;
     118: aastore
     119: dup
     120: iconst_1
     121: aload         4
     123: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
     126: invokevirtual #186                // Method org/jumpmind/symmetric/model/NodeGroupLink.getSourceNodeGroupId:()Ljava/lang/String;
     129: aastore
     130: dup
     131: iconst_2
     132: aload         4
     134: invokevirtual #122                // Method org/jumpmind/symmetric/model/Router.getNodeGroupLink:()Lorg/jumpmind/symmetric/model/NodeGroupLink;
     137: invokevirtual #123                // Method org/jumpmind/symmetric/model/NodeGroupLink.getTargetNodeGroupId:()Ljava/lang/String;
     140: aastore
     141: invokeinterface #192,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     146: aload_2
     147: invokevirtual #183                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getAvailableNodes:()Ljava/util/Map;
     150: aload_1
     151: aload_3
     152: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     157: pop
     158: aload_3
     159: areturn

  protected org.jumpmind.symmetric.route.IDataToRouteReader startReading(org.jumpmind.symmetric.route.ChannelRouterContext);
    Code:
       0: aload_0
       1: getfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
       4: ifnonnull     22
       7: aload_0
       8: new           #193                // class org/jumpmind/symmetric/service/impl/RouterService$1
      11: dup
      12: aload_0
      13: invokespecial #194                // Method org/jumpmind/symmetric/service/impl/RouterService$1."<init>":(Lorg/jumpmind/symmetric/service/impl/RouterService;)V
      16: invokestatic  #195                // Method java/util/concurrent/Executors.newCachedThreadPool:(Ljava/util/concurrent/ThreadFactory;)Ljava/util/concurrent/ExecutorService;
      19: putfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
      22: new           #196                // class org/jumpmind/symmetric/route/DataGapRouteReader
      25: dup
      26: aload_0
      27: aload_1
      28: aload_0
      29: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      32: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
      37: aload_0
      38: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
      41: aload_0
      42: getfield      #71                 // Field parameterService:Lorg/jumpmind/symmetric/service/IParameterService;
      45: invokespecial #197                // Method org/jumpmind/symmetric/route/DataGapRouteReader."<init>":(Lorg/jumpmind/symmetric/service/IRouterService;Lorg/jumpmind/symmetric/route/ChannelRouterContext;Lorg/jumpmind/symmetric/service/IDataService;Lorg/jumpmind/symmetric/db/ISymmetricDialect;Lorg/jumpmind/symmetric/service/IParameterService;)V
      48: astore_2
      49: aload_0
      50: getfield      #7                  // Field readThread:Ljava/util/concurrent/ExecutorService;
      53: aload_2
      54: invokeinterface #198,  2          // InterfaceMethod java/util/concurrent/ExecutorService.execute:(Ljava/lang/Runnable;)V
      59: aload_2
      60: areturn

  protected int selectDataAndRoute(org.jumpmind.symmetric.route.ChannelRouterContext) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #199                // Method startReading:(Lorg/jumpmind/symmetric/route/ChannelRouterContext;)Lorg/jumpmind/symmetric/route/IDataToRouteReader;
       5: astore_2
       6: aconst_null
       7: astore_3
       8: aconst_null
       9: astore        4
      11: iconst_0
      12: istore        5
      14: iconst_0
      15: istore        6
      17: iconst_0
      18: istore        7
      20: iconst_0
      21: istore        8
      23: aload_0
      24: getfield      #71                 // Field parameterService:Lorg/jumpmind/symmetric/service/IParameterService;
      27: ldc           #200                // String routing.flush.jdbc.batch.size
      29: invokeinterface #201,  2          // InterfaceMethod org/jumpmind/symmetric/service/IParameterService.getInt:(Ljava/lang/String;)I
      34: istore        9
      36: aload_2
      37: invokeinterface #202,  1          // InterfaceMethod org/jumpmind/symmetric/route/IDataToRouteReader.take:()Lorg/jumpmind/symmetric/model/Data;
      42: astore        4
      44: aload         4
      46: ifnull        301
      49: aload         4
      51: astore_3
      52: aload_2
      53: invokeinterface #202,  1          // InterfaceMethod org/jumpmind/symmetric/route/IDataToRouteReader.take:()Lorg/jumpmind/symmetric/model/Data;
      58: astore        4
      60: aload_3
      61: ifnull        303
      64: iconst_0
      65: istore        10
      67: aload         4
      69: ifnull        103
      72: aload         4
      74: invokevirtual #203                // Method org/jumpmind/symmetric/model/Data.getTransactionId:()Ljava/lang/String;
      77: astore        11
      79: aload         11
      81: ifnull        96
      84: aload         11
      86: aload_3
      87: invokevirtual #203                // Method org/jumpmind/symmetric/model/Data.getTransactionId:()Ljava/lang/String;
      90: invokevirtual #91                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      93: ifne          100
      96: iconst_1
      97: goto          101
     100: iconst_0
     101: istore        10
     103: aload_1
     104: iload         10
     106: invokevirtual #204                // Method org/jumpmind/symmetric/route/ChannelRouterContext.setEncountedTransactionBoundary:(Z)V
     109: iinc          7, 1
     112: iinc          5, 1
     115: aload_0
     116: aload_3
     117: aload_1
     118: invokevirtual #205                // Method routeData:(Lorg/jumpmind/symmetric/model/Data;Lorg/jumpmind/symmetric/route/ChannelRouterContext;)I
     121: istore        11
     123: iload         8
     125: iload         11
     127: iadd
     128: istore        8
     130: iload         6
     132: iload         11
     134: iadd
     135: istore        6
     137: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     140: lstore        12
     142: iload         9
     144: aload_1
     145: invokevirtual #143                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getDataEventList:()Ljava/util/List;
     148: invokeinterface #206,  1          // InterfaceMethod java/util/List.size:()I
     153: if_icmple     163
     156: aload_1
     157: invokevirtual #207                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isNeedsCommitted:()Z
     160: ifeq          189
     163: aload_0
     164: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     167: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
     172: aload_1
     173: invokevirtual #142                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getSqlTransaction:()Lorg/jumpmind/db/sql/ISqlTransaction;
     176: aload_1
     177: invokevirtual #143                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getDataEventList:()Ljava/util/List;
     180: invokeinterface #144,  3          // InterfaceMethod org/jumpmind/symmetric/service/IDataService.insertDataEvents:(Lorg/jumpmind/db/sql/ISqlTransaction;Ljava/util/List;)V
     185: aload_1
     186: invokevirtual #145                // Method org/jumpmind/symmetric/route/ChannelRouterContext.clearDataEventsList:()V
     189: aload_1
     190: invokevirtual #207                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isNeedsCommitted:()Z
     193: ifeq          201
     196: aload_0
     197: aload_1
     198: invokevirtual #146                // Method completeBatchesAndCommit:(Lorg/jumpmind/symmetric/route/ChannelRouterContext;)V
     201: jsr           215
     204: goto          293
     207: astore        14
     209: jsr           215
     212: aload         14
     214: athrow
     215: astore        15
     217: aload_1
     218: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     221: lload         12
     223: lsub
     224: ldc           #147                // String data.events.insert.time.ms
     226: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     229: iload         7
     231: sipush        1024
     234: if_icmple     291
     237: aload_0
     238: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     241: invokeinterface #157,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getStatisticManager:()Lorg/jumpmind/symmetric/statistic/IStatisticManager;
     246: aload_1
     247: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     250: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     253: iload         7
     255: i2l
     256: invokeinterface #209,  4          // InterfaceMethod org/jumpmind/symmetric/statistic/IStatisticManager.incrementDataRouted:(Ljava/lang/String;J)V
     261: iconst_0
     262: istore        7
     264: aload_0
     265: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     268: invokeinterface #157,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getStatisticManager:()Lorg/jumpmind/symmetric/statistic/IStatisticManager;
     273: aload_1
     274: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     277: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     280: iload         8
     282: i2l
     283: invokeinterface #210,  4          // InterfaceMethod org/jumpmind/symmetric/statistic/IStatisticManager.incrementDataEventInserted:(Ljava/lang/String;J)V
     288: iconst_0
     289: istore        8
     291: ret           15
     293: aload_1
     294: aload_3
     295: invokevirtual #211                // Method org/jumpmind/symmetric/route/ChannelRouterContext.setLastDataProcessed:(Lorg/jumpmind/symmetric/model/Data;)V
     298: goto          303
     301: aconst_null
     302: astore_3
     303: aload_3
     304: ifnonnull     44
     307: jsr           321
     310: goto          390
     313: astore        16
     315: jsr           321
     318: aload         16
     320: athrow
     321: astore        17
     323: aload_2
     324: iconst_0
     325: invokeinterface #212,  2          // InterfaceMethod org/jumpmind/symmetric/route/IDataToRouteReader.setReading:(Z)V
     330: iload         7
     332: ifle          359
     335: aload_0
     336: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     339: invokeinterface #157,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getStatisticManager:()Lorg/jumpmind/symmetric/statistic/IStatisticManager;
     344: aload_1
     345: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     348: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     351: iload         7
     353: i2l
     354: invokeinterface #209,  4          // InterfaceMethod org/jumpmind/symmetric/statistic/IStatisticManager.incrementDataRouted:(Ljava/lang/String;J)V
     359: iload         8
     361: ifle          388
     364: aload_0
     365: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     368: invokeinterface #157,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getStatisticManager:()Lorg/jumpmind/symmetric/statistic/IStatisticManager;
     373: aload_1
     374: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     377: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     380: iload         8
     382: i2l
     383: invokeinterface #210,  4          // InterfaceMethod org/jumpmind/symmetric/statistic/IStatisticManager.incrementDataEventInserted:(Ljava/lang/String;J)V
     388: ret           17
     390: aload_1
     391: iload         5
     393: i2l
     394: ldc           #213                // String data.routed.count
     396: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     399: iload         6
     401: ireturn
    Exception table:
       from    to  target type
         142   204   207   any
         207   212   207   any
          36   310   313   any
         313   318   313   any

  protected int routeData(org.jumpmind.symmetric.model.Data, org.jumpmind.symmetric.route.ChannelRouterContext);
    Code:
       0: iconst_0
       1: istore_3
       2: aload_0
       3: aload_1
       4: invokevirtual #214                // Method getTriggerRoutersForData:(Lorg/jumpmind/symmetric/model/Data;)Ljava/util/List;
       7: astore        4
       9: aload         4
      11: ifnull        240
      14: aload         4
      16: invokeinterface #206,  1          // InterfaceMethod java/util/List.size:()I
      21: ifle          240
      24: aload         4
      26: invokeinterface #103,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      31: astore        5
      33: aload         5
      35: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      40: ifeq          237
      43: aload         5
      45: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      50: checkcast     #116                // class org/jumpmind/symmetric/model/TriggerRouter
      53: astore        6
      55: aload_0
      56: getfield      #29                 // Field symmetricDialect:Lorg/jumpmind/symmetric/db/ISymmetricDialect;
      59: aload         6
      61: invokevirtual #120                // Method org/jumpmind/symmetric/model/TriggerRouter.getTrigger:()Lorg/jumpmind/symmetric/model/Trigger;
      64: iconst_1
      65: invokeinterface #215,  3          // InterfaceMethod org/jumpmind/symmetric/db/ISymmetricDialect.getTable:(Lorg/jumpmind/symmetric/model/Trigger;Z)Lorg/jumpmind/db/model/Table;
      70: astore        7
      72: new           #216                // class org/jumpmind/symmetric/model/DataMetaData
      75: dup
      76: aload_1
      77: aload         7
      79: aload         6
      81: aload_2
      82: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
      85: invokespecial #217                // Method org/jumpmind/symmetric/model/DataMetaData."<init>":(Lorg/jumpmind/symmetric/model/Data;Lorg/jumpmind/db/model/Table;Lorg/jumpmind/symmetric/model/TriggerRouter;Lorg/jumpmind/symmetric/model/NodeChannel;)V
      88: astore        8
      90: aconst_null
      91: astore        9
      93: aload_2
      94: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
      97: invokevirtual #218                // Method org/jumpmind/symmetric/model/NodeChannel.isIgnoreEnabled:()Z
     100: ifne          220
     103: aload         6
     105: aload_1
     106: invokevirtual #219                // Method org/jumpmind/symmetric/model/Data.getDataEventType:()Lorg/jumpmind/symmetric/io/data/DataEventType;
     109: invokevirtual #220                // Method org/jumpmind/symmetric/model/TriggerRouter.isRouted:(Lorg/jumpmind/symmetric/io/data/DataEventType;)Z
     112: ifeq          220
     115: aload_0
     116: aload         6
     118: invokevirtual #46                 // Method getDataRouter:(Lorg/jumpmind/symmetric/model/TriggerRouter;)Lorg/jumpmind/symmetric/route/IDataRouter;
     121: astore        10
     123: aload_2
     124: aload         10
     126: invokevirtual #221                // Method org/jumpmind/symmetric/route/ChannelRouterContext.addUsedDataRouter:(Lorg/jumpmind/symmetric/route/IDataRouter;)V
     129: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     132: lstore        11
     134: aload         10
     136: aload_2
     137: aload         8
     139: aload_0
     140: aload         6
     142: aload_2
     143: invokevirtual #222                // Method findAvailableNodes:(Lorg/jumpmind/symmetric/model/TriggerRouter;Lorg/jumpmind/symmetric/route/ChannelRouterContext;)Ljava/util/Set;
     146: iconst_0
     147: invokeinterface #50,  5           // InterfaceMethod org/jumpmind/symmetric/route/IDataRouter.routeToNodes:(Lorg/jumpmind/symmetric/route/SimpleRouterContext;Lorg/jumpmind/symmetric/model/DataMetaData;Ljava/util/Set;Z)Ljava/util/Set;
     152: astore        9
     154: aload_2
     155: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     158: lload         11
     160: lsub
     161: ldc           #223                // String data.router.time.ms
     163: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     166: aload         9
     168: ifnull        220
     171: aload         9
     173: aload_0
     174: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     177: invokeinterface #82,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getNodeService:()Lorg/jumpmind/symmetric/service/INodeService;
     182: invokeinterface #224,  1          // InterfaceMethod org/jumpmind/symmetric/service/INodeService.findIdentityNodeId:()Ljava/lang/String;
     187: invokeinterface #225,  2          // InterfaceMethod java/util/Collection.remove:(Ljava/lang/Object;)Z
     192: pop
     193: aload         6
     195: invokevirtual #226                // Method org/jumpmind/symmetric/model/TriggerRouter.isPingBackEnabled:()Z
     198: ifne          220
     201: aload_1
     202: invokevirtual #227                // Method org/jumpmind/symmetric/model/Data.getSourceNodeId:()Ljava/lang/String;
     205: ifnull        220
     208: aload         9
     210: aload_1
     211: invokevirtual #227                // Method org/jumpmind/symmetric/model/Data.getSourceNodeId:()Ljava/lang/String;
     214: invokeinterface #225,  2          // InterfaceMethod java/util/Collection.remove:(Ljava/lang/Object;)Z
     219: pop
     220: iload_3
     221: aload_0
     222: aload_2
     223: aload         8
     225: aload         9
     227: aload         6
     229: invokevirtual #228                // Method insertDataEvents:(Lorg/jumpmind/symmetric/route/ChannelRouterContext;Lorg/jumpmind/symmetric/model/DataMetaData;Ljava/util/Collection;Lorg/jumpmind/symmetric/model/TriggerRouter;)I
     232: iadd
     233: istore_3
     234: goto          33
     237: goto          268
     240: aload_0
     241: getfield      #53                 // Field log:Lorg/slf4j/Logger;
     244: ldc           #229                // String Could not find triggers for history id of {}.  Not processing data with the id of {}
     246: aload_1
     247: invokevirtual #230                // Method org/jumpmind/symmetric/model/Data.getTriggerHistory:()Lorg/jumpmind/symmetric/model/TriggerHistory;
     250: invokevirtual #231                // Method org/jumpmind/symmetric/model/TriggerHistory.getTriggerHistoryId:()I
     253: invokestatic  #232                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     256: aload_1
     257: invokevirtual #150                // Method org/jumpmind/symmetric/model/Data.getDataId:()J
     260: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     263: invokeinterface #98,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     268: aload_2
     269: iload_3
     270: i2l
     271: ldc           #233                // String data.events.insert.count
     273: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     276: iload_3
     277: ireturn

  protected int insertDataEvents(org.jumpmind.symmetric.route.ChannelRouterContext, org.jumpmind.symmetric.model.DataMetaData, java.util.Collection<java.lang.String>, org.jumpmind.symmetric.model.TriggerRouter);
    Code:
       0: iconst_0
       1: istore        5
       3: aload_3
       4: ifnull        16
       7: aload_3
       8: invokeinterface #234,  1          // InterfaceMethod java/util/Collection.size:()I
      13: ifne          34
      16: new           #47                 // class java/util/HashSet
      19: dup
      20: iconst_1
      21: invokespecial #48                 // Method java/util/HashSet."<init>":(I)V
      24: astore_3
      25: aload_3
      26: ldc           #174                // String -1
      28: invokeinterface #235,  2          // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      33: pop
      34: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
      37: lstore        6
      39: ldc2_w        #60                 // long -1l
      42: lstore        8
      44: iconst_0
      45: istore        10
      47: aload_3
      48: invokeinterface #86,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      53: astore        11
      55: aload         11
      57: invokeinterface #87,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      62: ifeq          293
      65: aload         11
      67: invokeinterface #88,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      72: checkcast     #152                // class java/lang/String
      75: astore        12
      77: aload         12
      79: ifnull        290
      82: aload_1
      83: invokevirtual #165                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getBatchesByNodes:()Ljava/util/Map;
      86: astore        13
      88: aload         13
      90: aload         12
      92: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      97: checkcast     #168                // class org/jumpmind/symmetric/model/OutgoingBatch
     100: astore        14
     102: aload         14
     104: ifnonnull     188
     107: new           #168                // class org/jumpmind/symmetric/model/OutgoingBatch
     110: dup
     111: aload         12
     113: aload_2
     114: invokevirtual #236                // Method org/jumpmind/symmetric/model/DataMetaData.getNodeChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     117: invokevirtual #107                // Method org/jumpmind/symmetric/model/NodeChannel.getChannelId:()Ljava/lang/String;
     120: getstatic     #237                // Field org/jumpmind/symmetric/model/OutgoingBatch$Status.RT:Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;
     123: invokespecial #238                // Method org/jumpmind/symmetric/model/OutgoingBatch."<init>":(Ljava/lang/String;Ljava/lang/String;Lorg/jumpmind/symmetric/model/OutgoingBatch$Status;)V
     126: astore        14
     128: aload         14
     130: lload         8
     132: invokevirtual #239                // Method org/jumpmind/symmetric/model/OutgoingBatch.setBatchId:(J)V
     135: aload         14
     137: aload_1
     138: invokevirtual #240                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isProduceCommonBatches:()Z
     141: invokevirtual #241                // Method org/jumpmind/symmetric/model/OutgoingBatch.setCommonFlag:(Z)V
     144: aload_0
     145: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
     148: invokeinterface #65,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getOutgoingBatchService:()Lorg/jumpmind/symmetric/service/IOutgoingBatchService;
     153: aload         14
     155: invokeinterface #242,  2          // InterfaceMethod org/jumpmind/symmetric/service/IOutgoingBatchService.insertOutgoingBatch:(Lorg/jumpmind/symmetric/model/OutgoingBatch;)V
     160: aload_1
     161: invokevirtual #165                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getBatchesByNodes:()Ljava/util/Map;
     164: aload         12
     166: aload         14
     168: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     173: pop
     174: aload_1
     175: invokevirtual #240                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isProduceCommonBatches:()Z
     178: ifeq          188
     181: aload         14
     183: invokevirtual #243                // Method org/jumpmind/symmetric/model/OutgoingBatch.getBatchId:()J
     186: lstore        8
     188: aload         14
     190: aload_2
     191: invokevirtual #244                // Method org/jumpmind/symmetric/model/DataMetaData.getData:()Lorg/jumpmind/symmetric/model/Data;
     194: invokevirtual #219                // Method org/jumpmind/symmetric/model/Data.getDataEventType:()Lorg/jumpmind/symmetric/io/data/DataEventType;
     197: invokevirtual #245                // Method org/jumpmind/symmetric/model/OutgoingBatch.incrementEventCount:(Lorg/jumpmind/symmetric/io/data/DataEventType;)V
     200: aload         14
     202: invokevirtual #246                // Method org/jumpmind/symmetric/model/OutgoingBatch.incrementDataEventCount:()V
     205: iinc          5, 1
     208: aload_1
     209: invokevirtual #240                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isProduceCommonBatches:()Z
     212: ifeq          227
     215: aload_1
     216: invokevirtual #240                // Method org/jumpmind/symmetric/route/ChannelRouterContext.isProduceCommonBatches:()Z
     219: ifeq          254
     222: iload         10
     224: ifne          254
     227: aload_1
     228: aload_2
     229: invokevirtual #244                // Method org/jumpmind/symmetric/model/DataMetaData.getData:()Lorg/jumpmind/symmetric/model/Data;
     232: invokevirtual #150                // Method org/jumpmind/symmetric/model/Data.getDataId:()J
     235: aload         14
     237: invokevirtual #243                // Method org/jumpmind/symmetric/model/OutgoingBatch.getBatchId:()J
     240: aload         4
     242: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
     245: invokevirtual #191                // Method org/jumpmind/symmetric/model/Router.getRouterId:()Ljava/lang/String;
     248: invokevirtual #247                // Method org/jumpmind/symmetric/route/ChannelRouterContext.addDataEvent:(JJLjava/lang/String;)V
     251: iconst_1
     252: istore        10
     254: aload_0
     255: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
     258: aload_1
     259: invokevirtual #208                // Method org/jumpmind/symmetric/route/ChannelRouterContext.getChannel:()Lorg/jumpmind/symmetric/model/NodeChannel;
     262: invokevirtual #248                // Method org/jumpmind/symmetric/model/NodeChannel.getBatchAlgorithm:()Ljava/lang/String;
     265: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     270: checkcast     #249                // class org/jumpmind/symmetric/route/IBatchAlgorithm
     273: aload         14
     275: aload_2
     276: aload_1
     277: invokeinterface #250,  4          // InterfaceMethod org/jumpmind/symmetric/route/IBatchAlgorithm.isBatchComplete:(Lorg/jumpmind/symmetric/model/OutgoingBatch;Lorg/jumpmind/symmetric/model/DataMetaData;Lorg/jumpmind/symmetric/route/SimpleRouterContext;)Z
     282: ifeq          290
     285: aload_1
     286: iconst_1
     287: invokevirtual #182                // Method org/jumpmind/symmetric/route/ChannelRouterContext.setNeedsCommitted:(Z)V
     290: goto          55
     293: aload_1
     294: invokestatic  #68                 // Method java/lang/System.currentTimeMillis:()J
     297: lload         6
     299: lsub
     300: ldc           #147                // String data.events.insert.time.ms
     302: invokevirtual #148                // Method org/jumpmind/symmetric/route/ChannelRouterContext.incrementStat:(JLjava/lang/String;)V
     305: iload         5
     307: ireturn

  protected org.jumpmind.symmetric.route.IDataRouter getDataRouter(org.jumpmind.symmetric.model.TriggerRouter);
    Code:
       0: aconst_null
       1: astore_2
       2: aload_1
       3: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
       6: invokevirtual #118                // Method org/jumpmind/symmetric/model/Router.getRouterType:()Ljava/lang/String;
       9: invokestatic  #251                // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
      12: ifne          64
      15: aload_0
      16: getfield      #20                 // Field routers:Ljava/util/Map;
      19: aload_1
      20: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
      23: invokevirtual #118                // Method org/jumpmind/symmetric/model/Router.getRouterType:()Ljava/lang/String;
      26: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      31: checkcast     #119                // class org/jumpmind/symmetric/route/IDataRouter
      34: astore_2
      35: aload_2
      36: ifnonnull     64
      39: aload_0
      40: getfield      #53                 // Field log:Lorg/slf4j/Logger;
      43: ldc           #252                // String Could not find configured router \'{}\' for trigger with the id of {}. Defaulting the router
      45: aload_1
      46: invokevirtual #117                // Method org/jumpmind/symmetric/model/TriggerRouter.getRouter:()Lorg/jumpmind/symmetric/model/Router;
      49: invokevirtual #118                // Method org/jumpmind/symmetric/model/Router.getRouterType:()Ljava/lang/String;
      52: aload_1
      53: invokevirtual #120                // Method org/jumpmind/symmetric/model/TriggerRouter.getTrigger:()Lorg/jumpmind/symmetric/model/Trigger;
      56: invokevirtual #253                // Method org/jumpmind/symmetric/model/Trigger.getTriggerId:()Ljava/lang/String;
      59: invokeinterface #98,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      64: aload_2
      65: ifnonnull     83
      68: aload_0
      69: getfield      #20                 // Field routers:Ljava/util/Map;
      72: ldc           #10                 // String default
      74: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      79: checkcast     #119                // class org/jumpmind/symmetric/route/IDataRouter
      82: areturn
      83: aload_2
      84: areturn

  protected java.util.List<org.jumpmind.symmetric.model.TriggerRouter> getTriggerRoutersForData(org.jumpmind.symmetric.model.Data);
    Code:
       0: aconst_null
       1: astore_2
       2: aload_1
       3: ifnull        110
       6: aload_1
       7: invokevirtual #230                // Method org/jumpmind/symmetric/model/Data.getTriggerHistory:()Lorg/jumpmind/symmetric/model/TriggerHistory;
      10: ifnull        91
      13: aload_0
      14: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      17: invokeinterface #100,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getTriggerRouterService:()Lorg/jumpmind/symmetric/service/ITriggerRouterService;
      22: iconst_0
      23: invokeinterface #254,  2          // InterfaceMethod org/jumpmind/symmetric/service/ITriggerRouterService.getTriggerRoutersForCurrentNode:(Z)Ljava/util/Map;
      28: aload_1
      29: invokevirtual #230                // Method org/jumpmind/symmetric/model/Data.getTriggerHistory:()Lorg/jumpmind/symmetric/model/TriggerHistory;
      32: invokevirtual #255                // Method org/jumpmind/symmetric/model/TriggerHistory.getTriggerId:()Ljava/lang/String;
      35: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      40: checkcast     #109                // class java/util/List
      43: astore_2
      44: aload_2
      45: ifnull        57
      48: aload_2
      49: invokeinterface #206,  1          // InterfaceMethod java/util/List.size:()I
      54: ifne          110
      57: aload_0
      58: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      61: invokeinterface #100,  1          // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getTriggerRouterService:()Lorg/jumpmind/symmetric/service/ITriggerRouterService;
      66: iconst_1
      67: invokeinterface #254,  2          // InterfaceMethod org/jumpmind/symmetric/service/ITriggerRouterService.getTriggerRoutersForCurrentNode:(Z)Ljava/util/Map;
      72: aload_1
      73: invokevirtual #230                // Method org/jumpmind/symmetric/model/Data.getTriggerHistory:()Lorg/jumpmind/symmetric/model/TriggerHistory;
      76: invokevirtual #255                // Method org/jumpmind/symmetric/model/TriggerHistory.getTriggerId:()Ljava/lang/String;
      79: invokeinterface #108,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      84: checkcast     #109                // class java/util/List
      87: astore_2
      88: goto          110
      91: aload_0
      92: getfield      #53                 // Field log:Lorg/slf4j/Logger;
      95: ldc_w         #256                // String Could not find a trigger hist record for recorded data {}.  Was the trigger hist record deleted manually?
      98: aload_1
      99: invokevirtual #150                // Method org/jumpmind/symmetric/model/Data.getDataId:()J
     102: invokestatic  #79                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     105: invokeinterface #257,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     110: aload_2
     111: areturn

  public void addDataRouter(java.lang.String, org.jumpmind.symmetric.route.IDataRouter);
    Code:
       0: aload_0
       1: getfield      #20                 // Field routers:Ljava/util/Map;
       4: aload_1
       5: aload_2
       6: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      11: pop
      12: return

  public void addBatchAlgorithm(java.lang.String, org.jumpmind.symmetric.route.IBatchAlgorithm);
    Code:
       0: aload_0
       1: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
       4: aload_1
       5: aload_2
       6: invokeinterface #13,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      11: pop
      12: return

  public long getUnroutedDataCount();
    Code:
       0: aload_0
       1: getfield      #151                // Field sqlTemplate:Lorg/jumpmind/db/sql/ISqlTemplate;
       4: aload_0
       5: iconst_1
       6: anewarray     #152                // class java/lang/String
       9: dup
      10: iconst_0
      11: ldc_w         #258                // String selectLastDataIdRoutedUsingDataGapSql
      14: aastore
      15: invokevirtual #154                // Method getSql:([Ljava/lang/String;)Ljava/lang/String;
      18: iconst_0
      19: anewarray     #140                // class java/lang/Object
      22: invokeinterface #259,  3          // InterfaceMethod org/jumpmind/db/sql/ISqlTemplate.queryForLong:(Ljava/lang/String;[Ljava/lang/Object;)J
      27: lstore_1
      28: aload_0
      29: getfield      #8                  // Field engine:Lorg/jumpmind/symmetric/ISymmetricEngine;
      32: invokeinterface #70,  1           // InterfaceMethod org/jumpmind/symmetric/ISymmetricEngine.getDataService:()Lorg/jumpmind/symmetric/service/IDataService;
      37: invokeinterface #260,  1          // InterfaceMethod org/jumpmind/symmetric/service/IDataService.findMaxDataId:()J
      42: lload_1
      43: lsub
      44: lstore_3
      45: lload_3
      46: lconst_0
      47: lcmp
      48: ifle          53
      51: lload_3
      52: lreturn
      53: lconst_0
      54: lreturn

  public java.util.List<java.lang.String> getAvailableBatchAlgorithms();
    Code:
       0: new           #164                // class java/util/ArrayList
       3: dup
       4: aload_0
       5: getfield      #9                  // Field batchAlgorithms:Ljava/util/Map;
       8: invokeinterface #261,  1          // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      13: invokespecial #166                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      16: areturn

  public java.util.Map<java.lang.String, org.jumpmind.symmetric.route.IDataRouter> getRouters();
    Code:
       0: aload_0
       1: getfield      #20                 // Field routers:Ljava/util/Map;
       4: areturn
}

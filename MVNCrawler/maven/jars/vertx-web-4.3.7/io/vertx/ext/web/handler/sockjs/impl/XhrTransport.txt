Compiled from "XhrTransport.java"
class io.vertx.ext.web.handler.sockjs.impl.XhrTransport extends io.vertx.ext.web.handler.sockjs.impl.BaseTransport {
  private static final io.vertx.core.impl.logging.Logger LOG;

  private static final io.vertx.core.buffer.Buffer H_BLOCK;

  private final io.vertx.core.Handler<io.vertx.ext.web.handler.sockjs.SockJSSocket> sockHandler;

  io.vertx.ext.web.handler.sockjs.impl.XhrTransport(io.vertx.core.Vertx, io.vertx.ext.web.Router, io.vertx.core.shareddata.LocalMap<java.lang.String, io.vertx.ext.web.handler.sockjs.impl.SockJSSession>, io.vertx.ext.web.handler.sockjs.SockJSHandlerOptions, io.vertx.core.Handler<io.vertx.ext.web.handler.sockjs.SockJSSocket>);
    Code:
       0: aload_0
       1: aload_1
       2: aload_3
       3: aload         4
       5: invokespecial #3                  // Method io/vertx/ext/web/handler/sockjs/impl/BaseTransport."<init>":(Lio/vertx/core/Vertx;Lio/vertx/core/shareddata/LocalMap;Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;)V
       8: aload_0
       9: aload         5
      11: putfield      #4                  // Field sockHandler:Lio/vertx/core/Handler;
      14: ldc           #6                  // String \\/[^\\/\\.]+\\/([^\\/\\.]+)\\/
      16: astore        6
      18: new           #7                  // class java/lang/StringBuilder
      21: dup
      22: invokespecial #8                  // Method java/lang/StringBuilder."<init>":()V
      25: aload         6
      27: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: ldc           #10                 // String xhr
      32: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: invokevirtual #11                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      38: astore        7
      40: new           #7                  // class java/lang/StringBuilder
      43: dup
      44: invokespecial #8                  // Method java/lang/StringBuilder."<init>":()V
      47: aload         6
      49: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: ldc           #12                 // String xhr_streaming
      54: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      57: invokevirtual #11                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      60: astore        8
      62: aload         4
      64: ldc           #13                 // String OPTIONS, POST
      66: invokestatic  #14                 // Method createCORSOptionsHandler:(Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;Ljava/lang/String;)Lio/vertx/ext/web/handler/SecurityPolicyHandler;
      69: astore        9
      71: aload_2
      72: aload         7
      74: invokeinterface #15,  2           // InterfaceMethod io/vertx/ext/web/Router.optionsWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
      79: aload         9
      81: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
      86: pop
      87: aload_2
      88: aload         8
      90: invokeinterface #15,  2           // InterfaceMethod io/vertx/ext/web/Router.optionsWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
      95: aload         9
      97: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
     102: pop
     103: aload_2
     104: aload         7
     106: invokeinterface #17,  2           // InterfaceMethod io/vertx/ext/web/Router.postWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
     111: aload_0
     112: invokedynamic #18,  0             // InvokeDynamic #0:handle:(Lio/vertx/ext/web/handler/sockjs/impl/XhrTransport;)Lio/vertx/ext/web/handler/PlatformHandler;
     117: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
     122: pop
     123: aload_2
     124: aload         8
     126: invokeinterface #17,  2           // InterfaceMethod io/vertx/ext/web/Router.postWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
     131: aload_0
     132: invokedynamic #19,  0             // InvokeDynamic #1:handle:(Lio/vertx/ext/web/handler/sockjs/impl/XhrTransport;)Lio/vertx/ext/web/handler/PlatformHandler;
     137: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
     142: pop
     143: ldc           #20                 // String \\/[^\\/\\.]+\\/([^\\/\\.]+)\\/xhr_send
     145: astore        10
     147: aload_2
     148: aload         10
     150: invokeinterface #15,  2           // InterfaceMethod io/vertx/ext/web/Router.optionsWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
     155: aload         9
     157: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
     162: pop
     163: aload_2
     164: aload         10
     166: invokeinterface #17,  2           // InterfaceMethod io/vertx/ext/web/Router.postWithRegex:(Ljava/lang/String;)Lio/vertx/ext/web/Route;
     171: aload_0
     172: invokedynamic #21,  0             // InvokeDynamic #2:handle:(Lio/vertx/ext/web/handler/sockjs/impl/XhrTransport;)Lio/vertx/ext/web/handler/PlatformHandler;
     177: invokeinterface #16,  2           // InterfaceMethod io/vertx/ext/web/Route.handler:(Lio/vertx/core/Handler;)Lio/vertx/ext/web/Route;
     182: pop
     183: return

  private void handlePost(io.vertx.ext.web.RoutingContext);
    Code:
       0: aload_1
       1: invokeinterface #22,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.request:()Lio/vertx/core/http/HttpServerRequest;
       6: ldc           #23                 // String param0
       8: invokeinterface #24,  2           // InterfaceMethod io/vertx/core/http/HttpServerRequest.getParam:(Ljava/lang/String;)Ljava/lang/String;
      13: astore_2
      14: aload_0
      15: getfield      #25                 // Field sessions:Lio/vertx/core/shareddata/LocalMap;
      18: aload_2
      19: invokeinterface #26,  2           // InterfaceMethod io/vertx/core/shareddata/LocalMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #27                 // class io/vertx/ext/web/handler/sockjs/impl/SockJSSession
      27: astore_3
      28: aload_3
      29: ifnull        48
      32: aload_3
      33: invokevirtual #28                 // Method io/vertx/ext/web/handler/sockjs/impl/SockJSSession.isClosed:()Z
      36: ifne          48
      39: aload_0
      40: aload_1
      41: aload_3
      42: invokespecial #29                 // Method handleSend:(Lio/vertx/ext/web/RoutingContext;Lio/vertx/ext/web/handler/sockjs/impl/SockJSSession;)V
      45: goto          83
      48: aload_1
      49: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
      54: sipush        404
      57: invokeinterface #31,  2           // InterfaceMethod io/vertx/core/http/HttpServerResponse.setStatusCode:(I)Lio/vertx/core/http/HttpServerResponse;
      62: pop
      63: aload_0
      64: getfield      #32                 // Field options:Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;
      67: aload_1
      68: invokestatic  #33                 // Method setJSESSIONID:(Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;Lio/vertx/ext/web/RoutingContext;)V
      71: aload_1
      72: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
      77: invokeinterface #34,  1           // InterfaceMethod io/vertx/core/http/HttpServerResponse.end:()Lio/vertx/core/Future;
      82: pop
      83: return

  private void handlePostStreaming(io.vertx.ext.web.RoutingContext);
    Code:
       0: aload_1
       1: invokestatic  #35                 // Method setNoCacheHeaders:(Lio/vertx/ext/web/RoutingContext;)V
       4: aload_1
       5: invokeinterface #22,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.request:()Lio/vertx/core/http/HttpServerRequest;
      10: ldc           #23                 // String param0
      12: invokeinterface #24,  2           // InterfaceMethod io/vertx/core/http/HttpServerRequest.getParam:(Ljava/lang/String;)Ljava/lang/String;
      17: astore_2
      18: aload_0
      19: aload_1
      20: aload_0
      21: getfield      #32                 // Field options:Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;
      24: aload_2
      25: aload_0
      26: getfield      #4                  // Field sockHandler:Lio/vertx/core/Handler;
      29: invokevirtual #36                 // Method getSession:(Lio/vertx/ext/web/RoutingContext;Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;Ljava/lang/String;Lio/vertx/core/Handler;)Lio/vertx/ext/web/handler/sockjs/impl/SockJSSession;
      32: astore_3
      33: aload_1
      34: invokeinterface #22,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.request:()Lio/vertx/core/http/HttpServerRequest;
      39: astore        4
      41: aload_3
      42: aload         4
      44: new           #37                 // class io/vertx/ext/web/handler/sockjs/impl/XhrTransport$XhrStreamingListener
      47: dup
      48: aload_0
      49: aload_0
      50: getfield      #32                 // Field options:Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;
      53: invokevirtual #38                 // Method io/vertx/ext/web/handler/sockjs/SockJSHandlerOptions.getMaxBytesStreaming:()I
      56: aload_1
      57: aload_3
      58: invokespecial #39                 // Method io/vertx/ext/web/handler/sockjs/impl/XhrTransport$XhrStreamingListener."<init>":(Lio/vertx/ext/web/handler/sockjs/impl/XhrTransport;ILio/vertx/ext/web/RoutingContext;Lio/vertx/ext/web/handler/sockjs/impl/SockJSSession;)V
      61: invokevirtual #40                 // Method io/vertx/ext/web/handler/sockjs/impl/SockJSSession.register:(Lio/vertx/core/http/HttpServerRequest;Lio/vertx/ext/web/handler/sockjs/impl/TransportListener;)V
      64: return

  private void handlePostPolling(io.vertx.ext.web.RoutingContext);
    Code:
       0: aload_1
       1: invokestatic  #35                 // Method setNoCacheHeaders:(Lio/vertx/ext/web/RoutingContext;)V
       4: aload_1
       5: invokeinterface #22,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.request:()Lio/vertx/core/http/HttpServerRequest;
      10: ldc           #23                 // String param0
      12: invokeinterface #24,  2           // InterfaceMethod io/vertx/core/http/HttpServerRequest.getParam:(Ljava/lang/String;)Ljava/lang/String;
      17: astore_2
      18: aload_0
      19: aload_1
      20: aload_0
      21: getfield      #32                 // Field options:Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;
      24: aload_2
      25: aload_0
      26: getfield      #4                  // Field sockHandler:Lio/vertx/core/Handler;
      29: invokevirtual #36                 // Method getSession:(Lio/vertx/ext/web/RoutingContext;Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;Ljava/lang/String;Lio/vertx/core/Handler;)Lio/vertx/ext/web/handler/sockjs/impl/SockJSSession;
      32: astore_3
      33: aload_1
      34: invokeinterface #22,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.request:()Lio/vertx/core/http/HttpServerRequest;
      39: astore        4
      41: aload_3
      42: aload         4
      44: new           #41                 // class io/vertx/ext/web/handler/sockjs/impl/XhrTransport$XhrPollingListener
      47: dup
      48: aload_0
      49: aload_1
      50: aload_3
      51: invokespecial #42                 // Method io/vertx/ext/web/handler/sockjs/impl/XhrTransport$XhrPollingListener."<init>":(Lio/vertx/ext/web/handler/sockjs/impl/XhrTransport;Lio/vertx/ext/web/RoutingContext;Lio/vertx/ext/web/handler/sockjs/impl/SockJSSession;)V
      54: invokevirtual #40                 // Method io/vertx/ext/web/handler/sockjs/impl/SockJSSession.register:(Lio/vertx/core/http/HttpServerRequest;Lio/vertx/ext/web/handler/sockjs/impl/TransportListener;)V
      57: return

  private void handleSend(io.vertx.ext.web.RoutingContext, io.vertx.ext.web.handler.sockjs.impl.SockJSSession);
    Code:
       0: aload_1
       1: invokeinterface #43,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.body:()Lio/vertx/ext/web/RequestBody;
       6: astore_3
       7: aload_3
       8: invokeinterface #44,  1           // InterfaceMethod io/vertx/ext/web/RequestBody.available:()Z
      13: ifne          45
      16: getstatic     #2                  // Field LOG:Lio/vertx/core/impl/logging/Logger;
      19: ldc           #45                 // String No BodyHandler was executed on the route. Please add a BodyHandler before the SockJS handler.
      21: invokeinterface #46,  2           // InterfaceMethod io/vertx/core/impl/logging/Logger.error:(Ljava/lang/Object;)V
      26: aload_1
      27: sipush        500
      30: new           #47                 // class io/vertx/core/impl/NoStackTraceThrowable
      33: dup
      34: ldc           #48                 // String BodyHandler is required to process POST requests
      36: invokespecial #49                 // Method io/vertx/core/impl/NoStackTraceThrowable."<init>":(Ljava/lang/String;)V
      39: invokeinterface #50,  3           // InterfaceMethod io/vertx/ext/web/RoutingContext.fail:(ILjava/lang/Throwable;)V
      44: return
      45: aload_3
      46: invokeinterface #51,  1           // InterfaceMethod io/vertx/ext/web/RequestBody.length:()I
      51: ifgt          77
      54: aload_1
      55: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
      60: sipush        500
      63: invokeinterface #31,  2           // InterfaceMethod io/vertx/core/http/HttpServerResponse.setStatusCode:(I)Lio/vertx/core/http/HttpServerResponse;
      68: ldc           #52                 // String Payload expected.
      70: invokeinterface #53,  2           // InterfaceMethod io/vertx/core/http/HttpServerResponse.end:(Ljava/lang/String;)Lio/vertx/core/Future;
      75: pop
      76: return
      77: aload_2
      78: aload_3
      79: invokeinterface #54,  1           // InterfaceMethod io/vertx/ext/web/RequestBody.asString:()Ljava/lang/String;
      84: invokevirtual #55                 // Method io/vertx/ext/web/handler/sockjs/impl/SockJSSession.handleMessages:(Ljava/lang/String;)Z
      87: ifne          103
      90: aload_0
      91: aload_1
      92: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
      97: invokevirtual #56                 // Method sendInvalidJSON:(Lio/vertx/core/http/HttpServerResponse;)V
     100: goto          156
     103: aload_1
     104: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
     109: getstatic     #57                 // Field io/vertx/core/http/HttpHeaders.CONTENT_TYPE:Ljava/lang/CharSequence;
     112: ldc           #58                 // String text/plain; charset=UTF-8
     114: invokeinterface #59,  3           // InterfaceMethod io/vertx/core/http/HttpServerResponse.putHeader:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Lio/vertx/core/http/HttpServerResponse;
     119: pop
     120: aload_1
     121: invokestatic  #35                 // Method setNoCacheHeaders:(Lio/vertx/ext/web/RoutingContext;)V
     124: aload_0
     125: getfield      #32                 // Field options:Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;
     128: aload_1
     129: invokestatic  #33                 // Method setJSESSIONID:(Lio/vertx/ext/web/handler/sockjs/SockJSHandlerOptions;Lio/vertx/ext/web/RoutingContext;)V
     132: aload_1
     133: invokestatic  #60                 // Method setCORSIfNeeded:(Lio/vertx/ext/web/RoutingContext;)V
     136: aload_1
     137: invokeinterface #30,  1           // InterfaceMethod io/vertx/ext/web/RoutingContext.response:()Lio/vertx/core/http/HttpServerResponse;
     142: sipush        204
     145: invokeinterface #31,  2           // InterfaceMethod io/vertx/core/http/HttpServerResponse.setStatusCode:(I)Lio/vertx/core/http/HttpServerResponse;
     150: invokeinterface #34,  1           // InterfaceMethod io/vertx/core/http/HttpServerResponse.end:()Lio/vertx/core/Future;
     155: pop
     156: getstatic     #2                  // Field LOG:Lio/vertx/core/impl/logging/Logger;
     159: invokeinterface #61,  1           // InterfaceMethod io/vertx/core/impl/logging/Logger.isTraceEnabled:()Z
     164: ifeq          177
     167: getstatic     #2                  // Field LOG:Lio/vertx/core/impl/logging/Logger;
     170: ldc           #62                 // String XHR send processed ok
     172: invokeinterface #63,  2           // InterfaceMethod io/vertx/core/impl/logging/Logger.trace:(Ljava/lang/Object;)V
     177: return

  static io.vertx.core.impl.logging.Logger access$000();
    Code:
       0: getstatic     #2                  // Field LOG:Lio/vertx/core/impl/logging/Logger;
       3: areturn

  static io.vertx.core.buffer.Buffer access$100();
    Code:
       0: getstatic     #1                  // Field H_BLOCK:Lio/vertx/core/buffer/Buffer;
       3: areturn

  static {};
    Code:
       0: ldc           #64                 // class io/vertx/ext/web/handler/sockjs/impl/XhrTransport
       2: invokestatic  #65                 // Method io/vertx/core/impl/logging/LoggerFactory.getLogger:(Ljava/lang/Class;)Lio/vertx/core/impl/logging/Logger;
       5: putstatic     #2                  // Field LOG:Lio/vertx/core/impl/logging/Logger;
       8: sipush        2049
      11: newarray       byte
      13: astore_0
      14: aload_0
      15: iconst_0
      16: sipush        2048
      19: bipush        104
      21: invokestatic  #66                 // Method java/util/Arrays.fill:([BIIB)V
      24: aload_0
      25: aload_0
      26: arraylength
      27: iconst_1
      28: isub
      29: bipush        10
      31: bastore
      32: aload_0
      33: invokestatic  #67                 // InterfaceMethod io/vertx/core/buffer/Buffer.buffer:([B)Lio/vertx/core/buffer/Buffer;
      36: putstatic     #1                  // Field H_BLOCK:Lio/vertx/core/buffer/Buffer;
      39: return
}

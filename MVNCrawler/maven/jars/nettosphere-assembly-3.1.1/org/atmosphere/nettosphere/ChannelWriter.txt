Compiled from "ChannelWriter.java"
public abstract class org.atmosphere.nettosphere.ChannelWriter extends org.atmosphere.cpr.AtmosphereInterceptorWriter {
  protected static final org.slf4j.Logger logger;

  protected static final java.lang.String END;

  protected static final java.lang.String CRLF;

  protected static final byte[] CHUNK_DELIMITER;

  protected static final byte[] ENDCHUNK;

  protected final io.netty.channel.Channel channel;

  protected final java.util.concurrent.atomic.AtomicBoolean doneProcessing;

  protected final org.atmosphere.util.ByteArrayAsyncWriter transformCacheBuffer;

  protected final boolean writeHeader;

  protected long lastWrite;

  protected boolean keepAlive;

  public org.atmosphere.nettosphere.ChannelWriter(io.netty.channel.Channel, boolean, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/atmosphere/cpr/AtmosphereInterceptorWriter."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicBoolean
       8: dup
       9: iconst_0
      10: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      13: putfield      #4                  // Field doneProcessing:Ljava/util/concurrent/atomic/AtomicBoolean;
      16: aload_0
      17: new           #5                  // class org/atmosphere/util/ByteArrayAsyncWriter
      20: dup
      21: invokespecial #6                  // Method org/atmosphere/util/ByteArrayAsyncWriter."<init>":()V
      24: putfield      #7                  // Field transformCacheBuffer:Lorg/atmosphere/util/ByteArrayAsyncWriter;
      27: aload_0
      28: lconst_0
      29: putfield      #8                  // Field lastWrite:J
      32: aload_0
      33: aload_1
      34: putfield      #9                  // Field channel:Lio/netty/channel/Channel;
      37: aload_0
      38: iload_2
      39: putfield      #10                 // Field writeHeader:Z
      42: aload_0
      43: iload_3
      44: putfield      #11                 // Field keepAlive:Z
      47: return

  public boolean isClosed();
    Code:
       0: aload_0
       1: getfield      #4                  // Field doneProcessing:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #12                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ireturn

  public org.atmosphere.cpr.AsyncIOWriter writeError(org.atmosphere.cpr.AtmosphereResponse, int, java.lang.String) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
       4: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/Channel.isOpen:()Z
       9: ifne          14
      12: aload_0
      13: areturn
      14: new           #14                 // class io/netty/handler/codec/http/DefaultHttpResponse
      17: dup
      18: getstatic     #15                 // Field io/netty/handler/codec/http/HttpVersion.HTTP_1_1:Lio/netty/handler/codec/http/HttpVersion;
      21: iload_2
      22: invokestatic  #16                 // Method io/netty/handler/codec/http/HttpResponseStatus.valueOf:(I)Lio/netty/handler/codec/http/HttpResponseStatus;
      25: invokespecial #17                 // Method io/netty/handler/codec/http/DefaultHttpResponse."<init>":(Lio/netty/handler/codec/http/HttpVersion;Lio/netty/handler/codec/http/HttpResponseStatus;)V
      28: astore        4
      30: aload_0
      31: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
      34: aload         4
      36: invokeinterface #18,  2           // InterfaceMethod io/netty/channel/Channel.write:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
      41: getstatic     #19                 // Field io/netty/channel/ChannelFutureListener.CLOSE:Lio/netty/channel/ChannelFutureListener;
      44: invokeinterface #20,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
      49: pop
      50: goto          67
      53: astore        4
      55: getstatic     #22                 // Field logger:Lorg/slf4j/Logger;
      58: ldc           #23                 // String
      60: aload         4
      62: invokeinterface #24,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      67: aload_0
      68: areturn
    Exception table:
       from    to  target type
          14    50    53   Class java/lang/Throwable

  public org.atmosphere.cpr.AsyncIOWriter write(org.atmosphere.cpr.AtmosphereResponse, java.lang.String) throws java.io.IOException;
    Code:
       0: aload_2
       1: ldc           #25                 // String ISO-8859-1
       3: invokevirtual #26                 // Method java/lang/String.getBytes:(Ljava/lang/String;)[B
       6: astore_3
       7: aload_0
       8: aload_1
       9: aload_3
      10: invokevirtual #27                 // Method write:(Lorg/atmosphere/cpr/AtmosphereResponse;[B)Lorg/atmosphere/cpr/AsyncIOWriter;
      13: pop
      14: aload_0
      15: areturn

  public org.atmosphere.cpr.AsyncIOWriter write(org.atmosphere.cpr.AtmosphereResponse, byte[]) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: iconst_0
       4: aload_2
       5: arraylength
       6: invokevirtual #28                 // Method write:(Lorg/atmosphere/cpr/AtmosphereResponse;[BII)Lorg/atmosphere/cpr/AsyncIOWriter;
       9: pop
      10: aload_0
      11: areturn

  protected byte[] transform(org.atmosphere.cpr.AtmosphereResponse, byte[], int, int) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokeinterface #29,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.getAsyncIOWriter:()Lorg/atmosphere/cpr/AsyncIOWriter;
       6: astore        5
       8: aload_1
       9: aload_0
      10: getfield      #7                  // Field transformCacheBuffer:Lorg/atmosphere/util/ByteArrayAsyncWriter;
      13: invokeinterface #30,  2           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.asyncIOWriter:(Lorg/atmosphere/cpr/AsyncIOWriter;)Lorg/atmosphere/cpr/AtmosphereResponse;
      18: pop
      19: aload_0
      20: aload_1
      21: aload_2
      22: iload_3
      23: iload         4
      25: invokevirtual #31                 // Method invokeInterceptor:(Lorg/atmosphere/cpr/AtmosphereResponse;[BII)V
      28: aload_0
      29: getfield      #7                  // Field transformCacheBuffer:Lorg/atmosphere/util/ByteArrayAsyncWriter;
      32: invokevirtual #32                 // Method org/atmosphere/util/ByteArrayAsyncWriter.stream:()Ljava/io/ByteArrayOutputStream;
      35: invokevirtual #33                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      38: astore        6
      40: aload_0
      41: getfield      #7                  // Field transformCacheBuffer:Lorg/atmosphere/util/ByteArrayAsyncWriter;
      44: aconst_null
      45: invokevirtual #34                 // Method org/atmosphere/util/ByteArrayAsyncWriter.close:(Lorg/atmosphere/cpr/AtmosphereResponse;)V
      48: aload_1
      49: aload         5
      51: invokeinterface #30,  2           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.asyncIOWriter:(Lorg/atmosphere/cpr/AsyncIOWriter;)Lorg/atmosphere/cpr/AtmosphereResponse;
      56: pop
      57: aload         6
      59: areturn
      60: astore        7
      62: aload_0
      63: getfield      #7                  // Field transformCacheBuffer:Lorg/atmosphere/util/ByteArrayAsyncWriter;
      66: aconst_null
      67: invokevirtual #34                 // Method org/atmosphere/util/ByteArrayAsyncWriter.close:(Lorg/atmosphere/cpr/AtmosphereResponse;)V
      70: aload_1
      71: aload         5
      73: invokeinterface #30,  2           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.asyncIOWriter:(Lorg/atmosphere/cpr/AsyncIOWriter;)Lorg/atmosphere/cpr/AtmosphereResponse;
      78: pop
      79: aload         7
      81: athrow
    Exception table:
       from    to  target type
           8    40    60   any
          60    62    60   any

  public org.atmosphere.cpr.AsyncIOWriter write(org.atmosphere.cpr.AtmosphereResponse, byte[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field doneProcessing:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #12                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ifeq          24
      10: aload_0
      11: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
      14: aload_1
      15: invokeinterface #35,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.uuid:()Ljava/lang/String;
      20: invokestatic  #36                 // Method org/atmosphere/nettosphere/util/Utils.ioExceptionForChannel:(Lio/netty/channel/Channel;Ljava/lang/String;)Ljava/io/IOException;
      23: athrow
      24: aload_0
      25: getfield      #37                 // Field filters:Ljava/util/LinkedList;
      28: invokevirtual #38                 // Method java/util/LinkedList.size:()I
      31: ifle          50
      34: aload_1
      35: invokeinterface #39,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.getStatus:()I
      40: sipush        400
      43: if_icmpge     50
      46: iconst_1
      47: goto          51
      50: iconst_0
      51: istore        5
      53: iload         5
      55: ifeq          74
      58: aload_0
      59: aload_1
      60: aload_2
      61: iload_3
      62: iload         4
      64: invokevirtual #40                 // Method transform:(Lorg/atmosphere/cpr/AtmosphereResponse;[BII)[B
      67: astore_2
      68: iconst_0
      69: istore_3
      70: aload_2
      71: arraylength
      72: istore        4
      74: getstatic     #22                 // Field logger:Lorg/slf4j/Logger;
      77: ldc           #41                 // String About to write to {}
      79: aload_0
      80: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
      83: invokeinterface #42,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      88: aload_0
      89: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
      92: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/Channel.isOpen:()Z
      97: ifeq          113
     100: aload_0
     101: aload_1
     102: aload_2
     103: iload_3
     104: iload         4
     106: invokevirtual #43                 // Method asyncWrite:(Lorg/atmosphere/cpr/AtmosphereResponse;[BII)Lorg/atmosphere/cpr/AsyncIOWriter;
     109: pop
     110: goto          137
     113: getstatic     #22                 // Field logger:Lorg/slf4j/Logger;
     116: ldc           #44                 // String Trying to write on a closed channel {}
     118: aload_0
     119: getfield      #9                  // Field channel:Lio/netty/channel/Channel;
     122: invokeinterface #42,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
     127: new           #45                 // class java/io/IOException
     130: dup
     131: ldc           #46                 // String Channel closed
     133: invokespecial #47                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     136: athrow
     137: aload_0
     138: areturn

  public long lastTick();
    Code:
       0: aload_0
       1: getfield      #8                  // Field lastWrite:J
       4: ldc2_w        #48                 // long -1l
       7: lcmp
       8: ifne          17
      11: invokestatic  #50                 // Method java/lang/System.currentTimeMillis:()J
      14: goto          21
      17: aload_0
      18: getfield      #8                  // Field lastWrite:J
      21: lreturn

  protected java.lang.String constructStatusAndHeaders(org.atmosphere.cpr.AtmosphereResponse, int);
    Code:
       0: new           #51                 // class java/lang/StringBuffer
       3: dup
       4: ldc           #52                 // String HTTP/1.1
       6: invokespecial #53                 // Method java/lang/StringBuffer."<init>":(Ljava/lang/String;)V
       9: ldc           #54                 // String
      11: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      14: aload_1
      15: invokeinterface #39,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.getStatus:()I
      20: invokevirtual #56                 // Method java/lang/StringBuffer.append:(I)Ljava/lang/StringBuffer;
      23: ldc           #54                 // String
      25: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      28: aload_1
      29: invokeinterface #57,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.getStatusMessage:()Ljava/lang/String;
      34: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      37: ldc           #59                 // String \r\n
      39: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      42: astore_3
      43: aload_1
      44: invokeinterface #60,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.headers:()Ljava/util/Map;
      49: astore        4
      51: aload_1
      52: invokeinterface #61,  1           // InterfaceMethod org/atmosphere/cpr/AtmosphereResponse.getContentType:()Ljava/lang/String;
      57: astore        5
      59: aload_3
      60: ldc           #62                 // String Content-Type
      62: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      65: ldc           #63                 // String :
      67: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
      70: aload         4
      72: ldc           #62                 // String Content-Type
      74: invokeinterface #64,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      79: ifnonnull     87
      82: aload         5
      84: goto          99
      87: aload         4
      89: ldc           #62                 // String Content-Type
      91: invokeinterface #64,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      96: checkcast     #65                 // class java/lang/String
      99: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     102: ldc           #59                 // String \r\n
     104: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     107: pop
     108: iload_2
     109: iconst_m1
     110: if_icmpeq     134
     113: aload_3
     114: ldc           #66                 // String Content-Length
     116: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     119: ldc           #63                 // String :
     121: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     124: iload_2
     125: invokevirtual #56                 // Method java/lang/StringBuffer.append:(I)Ljava/lang/StringBuffer;
     128: ldc           #59                 // String \r\n
     130: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     133: pop
     134: aload         4
     136: invokeinterface #67,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
     141: invokeinterface #68,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     146: astore        6
     148: aload         6
     150: invokeinterface #69,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     155: ifeq          215
     158: aload         6
     160: invokeinterface #70,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     165: checkcast     #65                 // class java/lang/String
     168: astore        7
     170: aload         7
     172: ldc           #62                 // String Content-Type
     174: invokevirtual #71                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     177: ifne          212
     180: aload_3
     181: aload         7
     183: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     186: ldc           #63                 // String :
     188: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     191: aload         4
     193: aload         7
     195: invokeinterface #64,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     200: checkcast     #65                 // class java/lang/String
     203: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     206: ldc           #59                 // String \r\n
     208: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     211: pop
     212: goto          148
     215: aload_3
     216: ldc           #59                 // String \r\n
     218: invokevirtual #55                 // Method java/lang/StringBuffer.append:(Ljava/lang/String;)Ljava/lang/StringBuffer;
     221: pop
     222: aload_3
     223: invokevirtual #72                 // Method java/lang/StringBuffer.toString:()Ljava/lang/String;
     226: areturn

  public abstract org.atmosphere.cpr.AsyncIOWriter asyncWrite(org.atmosphere.cpr.AtmosphereResponse, byte[], int, int) throws java.io.IOException;

  static {};
    Code:
       0: ldc           #73                 // class org/atmosphere/nettosphere/StreamWriter
       2: invokestatic  #74                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #22                 // Field logger:Lorg/slf4j/Logger;
       8: iconst_0
       9: invokestatic  #75                 // Method java/lang/Integer.toHexString:(I)Ljava/lang/String;
      12: putstatic     #76                 // Field END:Ljava/lang/String;
      15: ldc           #59                 // String \r\n
      17: invokevirtual #77                 // Method java/lang/String.getBytes:()[B
      20: putstatic     #78                 // Field CHUNK_DELIMITER:[B
      23: new           #79                 // class java/lang/StringBuilder
      26: dup
      27: invokespecial #80                 // Method java/lang/StringBuilder."<init>":()V
      30: getstatic     #76                 // Field END:Ljava/lang/String;
      33: invokevirtual #81                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      36: ldc           #59                 // String \r\n
      38: invokevirtual #81                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      41: ldc           #59                 // String \r\n
      43: invokevirtual #81                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: invokevirtual #82                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      49: invokevirtual #77                 // Method java/lang/String.getBytes:()[B
      52: putstatic     #83                 // Field ENDCHUNK:[B
      55: return
}

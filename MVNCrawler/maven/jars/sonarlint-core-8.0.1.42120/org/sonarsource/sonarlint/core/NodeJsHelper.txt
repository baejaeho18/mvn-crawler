Compiled from "NodeJsHelper.java"
public class org.sonarsource.sonarlint.core.NodeJsHelper {
  private static final org.sonarsource.sonarlint.core.commons.log.SonarLintLogger LOG;

  private static final java.util.regex.Pattern NODEJS_VERSION_PATTERN;

  private final org.sonar.api.utils.System2 system2;

  private final java.nio.file.Path pathHelperLocationOnMac;

  private final org.sonar.api.utils.command.CommandExecutor commandExecutor;

  private java.nio.file.Path detectedNodePath;

  private org.sonarsource.sonarlint.core.commons.Version nodeJsVersion;

  public org.sonarsource.sonarlint.core.NodeJsHelper();
    Code:
       0: aload_0
       1: getstatic     #30                 // Field org/sonar/api/utils/System2.INSTANCE:Lorg/sonar/api/utils/System2;
       4: ldc           #32                 // String /usr/libexec/path_helper
       6: iconst_0
       7: anewarray     #34                 // class java/lang/String
      10: invokestatic  #40                 // Method java/nio/file/Paths.get:(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;
      13: invokestatic  #46                 // Method org/sonar/api/utils/command/CommandExecutor.create:()Lorg/sonar/api/utils/command/CommandExecutor;
      16: invokespecial #49                 // Method "<init>":(Lorg/sonar/api/utils/System2;Ljava/nio/file/Path;Lorg/sonar/api/utils/command/CommandExecutor;)V
      19: return

  org.sonarsource.sonarlint.core.NodeJsHelper(org.sonar.api.utils.System2, java.nio.file.Path, org.sonar.api.utils.command.CommandExecutor);
    Code:
       0: aload_0
       1: invokespecial #53                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #55                 // Field system2:Lorg/sonar/api/utils/System2;
       9: aload_0
      10: aload_2
      11: putfield      #57                 // Field pathHelperLocationOnMac:Ljava/nio/file/Path;
      14: aload_0
      15: aload_3
      16: putfield      #59                 // Field commandExecutor:Lorg/sonar/api/utils/command/CommandExecutor;
      19: return

  public void detect(java.nio.file.Path);
    Code:
       0: aload_0
       1: aload_0
       2: aload_1
       3: invokevirtual #66                 // Method locateNode:(Ljava/nio/file/Path;)Ljava/nio/file/Path;
       6: putfield      #68                 // Field detectedNodePath:Ljava/nio/file/Path;
       9: aload_0
      10: getfield      #68                 // Field detectedNodePath:Ljava/nio/file/Path;
      13: ifnull        125
      16: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      19: ldc           #72                 // String Checking node version...
      21: invokevirtual #78                 // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;)V
      24: aload_0
      25: getfield      #68                 // Field detectedNodePath:Ljava/nio/file/Path;
      28: invokeinterface #84,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      33: invokestatic  #89                 // Method org/sonar/api/utils/command/Command.create:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      36: ldc           #91                 // String -v
      38: invokevirtual #94                 // Method org/sonar/api/utils/command/Command.addArgument:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      41: astore_2
      42: aload_0
      43: aload_2
      44: invokevirtual #98                 // Method runSimpleCommand:(Lorg/sonar/api/utils/command/Command;)Ljava/lang/String;
      47: astore_3
      48: aload_3
      49: ifnull        110
      52: getstatic     #100                // Field NODEJS_VERSION_PATTERN:Ljava/util/regex/Pattern;
      55: aload_3
      56: invokevirtual #106                // Method java/util/regex/Pattern.matcher:(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;
      59: astore        4
      61: aload         4
      63: invokevirtual #112                // Method java/util/regex/Matcher.matches:()Z
      66: ifeq          101
      69: aload         4
      71: iconst_1
      72: invokevirtual #116                // Method java/util/regex/Matcher.group:(I)Ljava/lang/String;
      75: astore        5
      77: aload_0
      78: aload         5
      80: invokestatic  #121                // Method org/sonarsource/sonarlint/core/commons/Version.create:(Ljava/lang/String;)Lorg/sonarsource/sonarlint/core/commons/Version;
      83: putfield      #123                // Field nodeJsVersion:Lorg/sonarsource/sonarlint/core/commons/Version;
      86: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      89: ldc           #125                // String Detected node version: {}
      91: aload_0
      92: getfield      #123                // Field nodeJsVersion:Lorg/sonarsource/sonarlint/core/commons/Version;
      95: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      98: goto          110
     101: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
     104: ldc           #130                // String Unable to parse node version: {}
     106: aload_3
     107: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     110: aload_0
     111: getfield      #123                // Field nodeJsVersion:Lorg/sonarsource/sonarlint/core/commons/Version;
     114: ifnonnull     125
     117: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
     120: ldc           #132                // String Unable to query node version
     122: invokevirtual #135                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.warn:(Ljava/lang/String;)V
     125: return

  public java.nio.file.Path getNodeJsPath();
    Code:
       0: aload_0
       1: getfield      #68                 // Field detectedNodePath:Ljava/nio/file/Path;
       4: areturn

  public org.sonarsource.sonarlint.core.commons.Version getNodeJsVersion();
    Code:
       0: aload_0
       1: getfield      #123                // Field nodeJsVersion:Lorg/sonarsource/sonarlint/core/commons/Version;
       4: areturn

  private java.nio.file.Path locateNode(java.nio.file.Path);
    Code:
       0: aload_1
       1: ifnull        15
       4: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
       7: ldc           #149                // String Node.js path provided by configuration: {}
       9: aload_1
      10: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      13: aload_1
      14: areturn
      15: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      18: ldc           #151                // String Looking for node in the PATH
      20: invokevirtual #78                 // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;)V
      23: aload_0
      24: getfield      #55                 // Field system2:Lorg/sonar/api/utils/System2;
      27: invokevirtual #154                // Method org/sonar/api/utils/System2.isOsWindows:()Z
      30: ifeq          51
      33: aload_0
      34: ldc           #156                // String C:\\Windows\\System32\\where.exe
      36: invokestatic  #89                 // Method org/sonar/api/utils/command/Command.create:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      39: ldc           #158                // String $PATH:node.exe
      41: invokevirtual #94                 // Method org/sonar/api/utils/command/Command.addArgument:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      44: invokevirtual #98                 // Method runSimpleCommand:(Lorg/sonar/api/utils/command/Command;)Ljava/lang/String;
      47: astore_2
      48: goto          73
      51: ldc           #160                // String which
      53: invokestatic  #89                 // Method org/sonar/api/utils/command/Command.create:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      56: ldc           #162                // String node
      58: invokevirtual #94                 // Method org/sonar/api/utils/command/Command.addArgument:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      61: astore_3
      62: aload_0
      63: aload_3
      64: invokevirtual #166                // Method computePathEnvForMacOs:(Lorg/sonar/api/utils/command/Command;)V
      67: aload_0
      68: aload_3
      69: invokevirtual #98                 // Method runSimpleCommand:(Lorg/sonar/api/utils/command/Command;)Ljava/lang/String;
      72: astore_2
      73: aload_2
      74: ifnull        95
      77: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      80: ldc           #168                // String Found node at {}
      82: aload_2
      83: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      86: aload_2
      87: iconst_0
      88: anewarray     #34                 // class java/lang/String
      91: invokestatic  #40                 // Method java/nio/file/Paths.get:(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;
      94: areturn
      95: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      98: ldc           #170                // String Unable to locate node
     100: invokevirtual #78                 // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;)V
     103: aconst_null
     104: areturn

  private void computePathEnvForMacOs(org.sonar.api.utils.command.Command);
    Code:
       0: aload_0
       1: getfield      #55                 // Field system2:Lorg/sonar/api/utils/System2;
       4: invokevirtual #174                // Method org/sonar/api/utils/System2.isOsMac:()Z
       7: ifeq          88
      10: aload_0
      11: getfield      #57                 // Field pathHelperLocationOnMac:Ljava/nio/file/Path;
      14: iconst_0
      15: anewarray     #176                // class java/nio/file/LinkOption
      18: invokestatic  #182                // Method java/nio/file/Files.exists:(Ljava/nio/file/Path;[Ljava/nio/file/LinkOption;)Z
      21: ifeq          88
      24: aload_0
      25: getfield      #57                 // Field pathHelperLocationOnMac:Ljava/nio/file/Path;
      28: invokeinterface #84,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      33: invokestatic  #89                 // Method org/sonar/api/utils/command/Command.create:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      36: ldc           #184                // String -s
      38: invokevirtual #94                 // Method org/sonar/api/utils/command/Command.addArgument:(Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      41: astore_2
      42: aload_0
      43: aload_2
      44: invokevirtual #98                 // Method runSimpleCommand:(Lorg/sonar/api/utils/command/Command;)Ljava/lang/String;
      47: astore_3
      48: aload_3
      49: ifnull        88
      52: ldc           #186                // String .*PATH=\"(.*)\"; export PATH;.*
      54: invokestatic  #190                // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      57: astore        4
      59: aload         4
      61: aload_3
      62: invokevirtual #106                // Method java/util/regex/Pattern.matcher:(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;
      65: astore        5
      67: aload         5
      69: invokevirtual #112                // Method java/util/regex/Matcher.matches:()Z
      72: ifeq          88
      75: aload_1
      76: ldc           #192                // String PATH
      78: aload         5
      80: iconst_1
      81: invokevirtual #116                // Method java/util/regex/Matcher.group:(I)Ljava/lang/String;
      84: invokevirtual #196                // Method org/sonar/api/utils/command/Command.setEnvironmentVariable:(Ljava/lang/String;Ljava/lang/String;)Lorg/sonar/api/utils/command/Command;
      87: pop
      88: return

  private java.lang.String runSimpleCommand(org.sonar.api.utils.command.Command);
    Code:
       0: new           #203                // class java/util/ArrayList
       3: dup
       4: invokespecial #204                // Method java/util/ArrayList."<init>":()V
       7: astore_2
       8: new           #203                // class java/util/ArrayList
      11: dup
      12: invokespecial #204                // Method java/util/ArrayList."<init>":()V
      15: astore_3
      16: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      19: ldc           #206                // String Execute command \'{}\'...
      21: aload_1
      22: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      25: aload_0
      26: getfield      #59                 // Field commandExecutor:Lorg/sonar/api/utils/command/CommandExecutor;
      29: aload_1
      30: aload_2
      31: dup
      32: invokestatic  #212                // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      35: pop
      36: invokedynamic #231,  0            // InvokeDynamic #0:consumeLine:(Ljava/util/List;)Lorg/sonar/api/utils/command/StreamConsumer;
      41: aload_3
      42: dup
      43: invokestatic  #212                // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      46: pop
      47: invokedynamic #231,  0            // InvokeDynamic #0:consumeLine:(Ljava/util/List;)Lorg/sonar/api/utils/command/StreamConsumer;
      52: ldc2_w        #232                // long 10000l
      55: invokevirtual #237                // Method org/sonar/api/utils/command/CommandExecutor.execute:(Lorg/sonar/api/utils/command/Command;Lorg/sonar/api/utils/command/StreamConsumer;Lorg/sonar/api/utils/command/StreamConsumer;J)I
      58: istore        4
      60: goto          77
      63: astore        5
      65: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
      68: ldc           #239                // String Unable to execute the command
      70: aload         5
      72: invokevirtual #128                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      75: aconst_null
      76: areturn
      77: new           #241                // class java/lang/StringBuilder
      80: dup
      81: ldc           #243                // String Command \'%s\' exited with %s
      83: iconst_2
      84: anewarray     #4                  // class java/lang/Object
      87: dup
      88: iconst_0
      89: aload_1
      90: invokevirtual #244                // Method org/sonar/api/utils/command/Command.toString:()Ljava/lang/String;
      93: aastore
      94: dup
      95: iconst_1
      96: iload         4
      98: invokestatic  #250                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     101: aastore
     102: invokestatic  #254                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     105: invokespecial #256                // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
     108: astore        5
     110: aload_2
     111: invokeinterface #259,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     116: ifne          138
     119: aload         5
     121: ldc_w         #261                // String \nstdout:
     124: invokevirtual #265                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     127: ldc_w         #267                // String \n
     130: aload_2
     131: invokestatic  #271                // Method java/lang/String.join:(Ljava/lang/CharSequence;Ljava/lang/Iterable;)Ljava/lang/String;
     134: invokevirtual #265                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     137: pop
     138: aload_3
     139: invokeinterface #259,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     144: ifne          166
     147: aload         5
     149: ldc_w         #273                // String \nstderr:
     152: invokevirtual #265                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     155: ldc_w         #267                // String \n
     158: aload_3
     159: invokestatic  #271                // Method java/lang/String.join:(Ljava/lang/CharSequence;Ljava/lang/Iterable;)Ljava/lang/String;
     162: invokevirtual #265                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     165: pop
     166: getstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
     169: aload         5
     171: invokevirtual #274                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     174: invokevirtual #78                 // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.debug:(Ljava/lang/String;)V
     177: iload         4
     179: ifne          191
     182: aload_2
     183: invokeinterface #259,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     188: ifeq          193
     191: aconst_null
     192: areturn
     193: aload_2
     194: iconst_0
     195: invokeinterface #277,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     200: checkcast     #34                 // class java/lang/String
     203: areturn
    Exception table:
       from    to  target type
          25    60    63   Class org/sonar/api/utils/command/CommandException

  static {};
    Code:
       0: invokestatic  #291                // Method org/sonarsource/sonarlint/core/commons/log/SonarLintLogger.get:()Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
       3: putstatic     #70                 // Field LOG:Lorg/sonarsource/sonarlint/core/commons/log/SonarLintLogger;
       6: ldc_w         #293                // String v?(\\d+\\.\\d+\\.\\d+(-.*)?)
       9: invokestatic  #190                // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      12: putstatic     #100                // Field NODEJS_VERSION_PATTERN:Ljava/util/regex/Pattern;
      15: return
}

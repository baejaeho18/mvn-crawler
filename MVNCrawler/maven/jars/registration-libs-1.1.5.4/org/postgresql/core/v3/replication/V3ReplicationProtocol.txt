Compiled from "V3ReplicationProtocol.java"
public class org.postgresql.core.v3.replication.V3ReplicationProtocol implements org.postgresql.core.ReplicationProtocol {
  private static final java.util.logging.Logger LOGGER;

  private final org.postgresql.core.QueryExecutor queryExecutor;

  private final org.postgresql.core.PGStream pgStream;

  public org.postgresql.core.v3.replication.V3ReplicationProtocol(org.postgresql.core.QueryExecutor, org.postgresql.core.PGStream);
    Code:
       0: aload_0
       1: invokespecial #18                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #20                 // Field queryExecutor:Lorg/postgresql/core/QueryExecutor;
       9: aload_0
      10: aload_2
      11: putfield      #22                 // Field pgStream:Lorg/postgresql/core/PGStream;
      14: return

  public org.postgresql.replication.PGReplicationStream startLogical(org.postgresql.replication.fluent.logical.LogicalReplicationOptions) throws java.sql.SQLException;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #32                 // Method createStartLogicalQuery:(Lorg/postgresql/replication/fluent/logical/LogicalReplicationOptions;)Ljava/lang/String;
       5: astore_2
       6: aload_0
       7: aload_2
       8: aload_1
       9: getstatic     #38                 // Field org/postgresql/replication/ReplicationType.LOGICAL:Lorg/postgresql/replication/ReplicationType;
      12: invokespecial #42                 // Method initializeReplication:(Ljava/lang/String;Lorg/postgresql/replication/fluent/CommonOptions;Lorg/postgresql/replication/ReplicationType;)Lorg/postgresql/replication/PGReplicationStream;
      15: areturn

  public org.postgresql.replication.PGReplicationStream startPhysical(org.postgresql.replication.fluent.physical.PhysicalReplicationOptions) throws java.sql.SQLException;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #52                 // Method createStartPhysicalQuery:(Lorg/postgresql/replication/fluent/physical/PhysicalReplicationOptions;)Ljava/lang/String;
       5: astore_2
       6: aload_0
       7: aload_2
       8: aload_1
       9: getstatic     #55                 // Field org/postgresql/replication/ReplicationType.PHYSICAL:Lorg/postgresql/replication/ReplicationType;
      12: invokespecial #42                 // Method initializeReplication:(Ljava/lang/String;Lorg/postgresql/replication/fluent/CommonOptions;Lorg/postgresql/replication/ReplicationType;)Lorg/postgresql/replication/PGReplicationStream;
      15: areturn

  private org.postgresql.replication.PGReplicationStream initializeReplication(java.lang.String, org.postgresql.replication.fluent.CommonOptions, org.postgresql.replication.ReplicationType) throws java.sql.SQLException;
    Code:
       0: getstatic     #58                 // Field LOGGER:Ljava/util/logging/Logger;
       3: getstatic     #64                 // Field java/util/logging/Level.FINEST:Ljava/util/logging/Level;
       6: ldc           #66                 // String  FE=> StartReplication(query: {0})
       8: aload_1
       9: invokevirtual #72                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Object;)V
      12: aload_0
      13: aload_2
      14: invokespecial #76                 // Method configureSocketTimeout:(Lorg/postgresql/replication/fluent/CommonOptions;)V
      17: aload_0
      18: getfield      #20                 // Field queryExecutor:Lorg/postgresql/core/QueryExecutor;
      21: aload_1
      22: iconst_1
      23: invokeinterface #82,  3           // InterfaceMethod org/postgresql/core/QueryExecutor.startCopy:(Ljava/lang/String;Z)Lorg/postgresql/copy/CopyOperation;
      28: checkcast     #84                 // class org/postgresql/copy/CopyDual
      31: astore        4
      33: new           #86                 // class org/postgresql/core/v3/replication/V3PGReplicationStream
      36: dup
      37: aload         4
      39: aload_2
      40: invokeinterface #92,  1           // InterfaceMethod org/postgresql/replication/fluent/CommonOptions.getStartLSNPosition:()Lorg/postgresql/replication/LogSequenceNumber;
      45: aload_2
      46: invokeinterface #96,  1           // InterfaceMethod org/postgresql/replication/fluent/CommonOptions.getStatusInterval:()I
      51: i2l
      52: aload_3
      53: invokespecial #99                 // Method org/postgresql/core/v3/replication/V3PGReplicationStream."<init>":(Lorg/postgresql/copy/CopyDual;Lorg/postgresql/replication/LogSequenceNumber;JLorg/postgresql/replication/ReplicationType;)V
      56: areturn

  private java.lang.String createStartPhysicalQuery(org.postgresql.replication.fluent.physical.PhysicalReplicationOptions);
    Code:
       0: new           #105                // class java/lang/StringBuilder
       3: dup
       4: invokespecial #106                // Method java/lang/StringBuilder."<init>":()V
       7: astore_2
       8: aload_2
       9: ldc           #108                // String START_REPLICATION
      11: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      14: pop
      15: aload_1
      16: invokeinterface #118,  1          // InterfaceMethod org/postgresql/replication/fluent/physical/PhysicalReplicationOptions.getSlotName:()Ljava/lang/String;
      21: ifnull        40
      24: aload_2
      25: ldc           #120                // String  SLOT
      27: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: aload_1
      31: invokeinterface #118,  1          // InterfaceMethod org/postgresql/replication/fluent/physical/PhysicalReplicationOptions.getSlotName:()Ljava/lang/String;
      36: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: pop
      40: aload_2
      41: ldc           #122                // String  PHYSICAL
      43: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: aload_1
      47: invokeinterface #123,  1          // InterfaceMethod org/postgresql/replication/fluent/physical/PhysicalReplicationOptions.getStartLSNPosition:()Lorg/postgresql/replication/LogSequenceNumber;
      52: invokevirtual #128                // Method org/postgresql/replication/LogSequenceNumber.asString:()Ljava/lang/String;
      55: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: pop
      59: aload_2
      60: invokevirtual #131                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      63: areturn

  private java.lang.String createStartLogicalQuery(org.postgresql.replication.fluent.logical.LogicalReplicationOptions);
    Code:
       0: new           #105                // class java/lang/StringBuilder
       3: dup
       4: invokespecial #106                // Method java/lang/StringBuilder."<init>":()V
       7: astore_2
       8: aload_2
       9: ldc           #135                // String START_REPLICATION SLOT
      11: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      14: aload_1
      15: invokeinterface #138,  1          // InterfaceMethod org/postgresql/replication/fluent/logical/LogicalReplicationOptions.getSlotName:()Ljava/lang/String;
      20: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: ldc           #140                // String  LOGICAL
      25: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_1
      29: invokeinterface #141,  1          // InterfaceMethod org/postgresql/replication/fluent/logical/LogicalReplicationOptions.getStartLSNPosition:()Lorg/postgresql/replication/LogSequenceNumber;
      34: invokevirtual #128                // Method org/postgresql/replication/LogSequenceNumber.asString:()Ljava/lang/String;
      37: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: pop
      41: aload_1
      42: invokeinterface #145,  1          // InterfaceMethod org/postgresql/replication/fluent/logical/LogicalReplicationOptions.getSlotOptions:()Ljava/util/Properties;
      47: astore_3
      48: aload_3
      49: invokevirtual #151                // Method java/util/Properties.isEmpty:()Z
      52: ifeq          60
      55: aload_2
      56: invokevirtual #131                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      59: areturn
      60: aload_2
      61: ldc           #153                // String  (
      63: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      66: pop
      67: iconst_1
      68: istore        4
      70: aload_3
      71: invokevirtual #157                // Method java/util/Properties.stringPropertyNames:()Ljava/util/Set;
      74: invokeinterface #163,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      79: astore        5
      81: aload         5
      83: invokeinterface #168,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      88: ifeq          165
      91: aload         5
      93: invokeinterface #172,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      98: checkcast     #174                // class java/lang/String
     101: astore        6
     103: iload         4
     105: ifeq          114
     108: iconst_0
     109: istore        4
     111: goto          121
     114: aload_2
     115: ldc           #176                // String ,
     117: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     120: pop
     121: aload_2
     122: bipush        34
     124: invokevirtual #179                // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     127: aload         6
     129: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     132: bipush        34
     134: invokevirtual #179                // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     137: ldc           #181                // String
     139: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     142: bipush        39
     144: invokevirtual #179                // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     147: aload_3
     148: aload         6
     150: invokevirtual #185                // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
     153: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: bipush        39
     158: invokevirtual #179                // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
     161: pop
     162: goto          81
     165: aload_2
     166: ldc           #187                // String )
     168: invokevirtual #112                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     171: pop
     172: aload_2
     173: invokevirtual #131                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     176: areturn

  private void configureSocketTimeout(org.postgresql.replication.fluent.CommonOptions) throws org.postgresql.util.PSQLException;
    Code:
       0: aload_1
       1: invokeinterface #96,  1           // InterfaceMethod org/postgresql/replication/fluent/CommonOptions.getStatusInterval:()I
       6: ifne          10
       9: return
      10: aload_0
      11: getfield      #22                 // Field pgStream:Lorg/postgresql/core/PGStream;
      14: invokevirtual #202                // Method org/postgresql/core/PGStream.getSocket:()Ljava/net/Socket;
      17: invokevirtual #207                // Method java/net/Socket.getSoTimeout:()I
      20: istore_2
      21: iload_2
      22: ifle          39
      25: iload_2
      26: aload_1
      27: invokeinterface #96,  1           // InterfaceMethod org/postgresql/replication/fluent/CommonOptions.getStatusInterval:()I
      32: invokestatic  #213                // Method java/lang/Math.min:(II)I
      35: istore_3
      36: goto          46
      39: aload_1
      40: invokeinterface #96,  1           // InterfaceMethod org/postgresql/replication/fluent/CommonOptions.getStatusInterval:()I
      45: istore_3
      46: aload_0
      47: getfield      #22                 // Field pgStream:Lorg/postgresql/core/PGStream;
      50: invokevirtual #202                // Method org/postgresql/core/PGStream.getSocket:()Ljava/net/Socket;
      53: iload_3
      54: invokevirtual #217                // Method java/net/Socket.setSoTimeout:(I)V
      57: goto          82
      60: astore_2
      61: new           #194                // class org/postgresql/util/PSQLException
      64: dup
      65: ldc           #219                // String The connection attempt failed.
      67: iconst_0
      68: anewarray     #4                  // class java/lang/Object
      71: invokestatic  #225                // Method org/postgresql/util/GT.tr:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      74: getstatic     #231                // Field org/postgresql/util/PSQLState.CONNECTION_UNABLE_TO_CONNECT:Lorg/postgresql/util/PSQLState;
      77: aload_2
      78: invokespecial #234                // Method org/postgresql/util/PSQLException."<init>":(Ljava/lang/String;Lorg/postgresql/util/PSQLState;Ljava/lang/Throwable;)V
      81: athrow
      82: return
    Exception table:
       from    to  target type
          10    57    60   Class java/io/IOException

  static {};
    Code:
       0: ldc           #2                  // class org/postgresql/core/v3/replication/V3ReplicationProtocol
       2: invokevirtual #245                // Method java/lang/Class.getName:()Ljava/lang/String;
       5: invokestatic  #249                // Method java/util/logging/Logger.getLogger:(Ljava/lang/String;)Ljava/util/logging/Logger;
       8: putstatic     #58                 // Field LOGGER:Ljava/util/logging/Logger;
      11: return
}

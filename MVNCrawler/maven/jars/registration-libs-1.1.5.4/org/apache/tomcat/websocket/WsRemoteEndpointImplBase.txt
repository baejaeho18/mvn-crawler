Compiled from "WsRemoteEndpointImplBase.java"
public abstract class org.apache.tomcat.websocket.WsRemoteEndpointImplBase implements javax.websocket.RemoteEndpoint {
  private static final org.apache.tomcat.util.res.StringManager sm;

  protected static final javax.websocket.SendResult SENDRESULT_OK;

  private final org.apache.juli.logging.Log log;

  private final org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine stateMachine;

  private final org.apache.tomcat.websocket.WsRemoteEndpointImplBase$IntermediateMessageHandler intermediateMessageHandler;

  private org.apache.tomcat.websocket.Transformation transformation;

  private final java.util.concurrent.Semaphore messagePartInProgress;

  private final java.util.Queue<org.apache.tomcat.websocket.MessagePart> messagePartQueue;

  private final java.lang.Object messagePartLock;

  private volatile boolean closed;

  private boolean fragmented;

  private boolean nextFragmented;

  private boolean text;

  private boolean nextText;

  private final java.nio.ByteBuffer headerBuffer;

  private final java.nio.ByteBuffer outputBuffer;

  private final java.nio.charset.CharsetEncoder encoder;

  private final java.nio.ByteBuffer encoderBuffer;

  private final java.util.concurrent.atomic.AtomicBoolean batchingAllowed;

  private volatile long sendTimeout;

  private org.apache.tomcat.websocket.WsSession wsSession;

  private java.util.List<org.apache.tomcat.websocket.WsRemoteEndpointImplBase$EncoderEntry> encoderEntries;

  public org.apache.tomcat.websocket.WsRemoteEndpointImplBase();
    Code:
       0: aload_0
       1: invokespecial #4                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc_w         #5                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase
       8: invokestatic  #6                  // Method org/apache/juli/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/juli/logging/Log;
      11: putfield      #7                  // Field log:Lorg/apache/juli/logging/Log;
      14: aload_0
      15: new           #8                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine
      18: dup
      19: aconst_null
      20: invokespecial #9                  // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$1;)V
      23: putfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      26: aload_0
      27: new           #10                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler
      30: dup
      31: aload_0
      32: invokespecial #11                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      35: putfield      #12                 // Field intermediateMessageHandler:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler;
      38: aload_0
      39: aconst_null
      40: putfield      #13                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      43: aload_0
      44: new           #14                 // class java/util/concurrent/Semaphore
      47: dup
      48: iconst_1
      49: invokespecial #15                 // Method java/util/concurrent/Semaphore."<init>":(I)V
      52: putfield      #16                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      55: aload_0
      56: new           #17                 // class java/util/ArrayDeque
      59: dup
      60: invokespecial #18                 // Method java/util/ArrayDeque."<init>":()V
      63: putfield      #19                 // Field messagePartQueue:Ljava/util/Queue;
      66: aload_0
      67: new           #20                 // class java/lang/Object
      70: dup
      71: invokespecial #4                  // Method java/lang/Object."<init>":()V
      74: putfield      #21                 // Field messagePartLock:Ljava/lang/Object;
      77: aload_0
      78: iconst_0
      79: putfield      #2                  // Field closed:Z
      82: aload_0
      83: iconst_0
      84: putfield      #22                 // Field fragmented:Z
      87: aload_0
      88: iconst_0
      89: putfield      #23                 // Field nextFragmented:Z
      92: aload_0
      93: iconst_0
      94: putfield      #24                 // Field text:Z
      97: aload_0
      98: iconst_0
      99: putfield      #25                 // Field nextText:Z
     102: aload_0
     103: bipush        14
     105: invokestatic  #26                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     108: putfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     111: aload_0
     112: getstatic     #28                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
     115: invokestatic  #26                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     118: putfield      #29                 // Field outputBuffer:Ljava/nio/ByteBuffer;
     121: aload_0
     122: new           #30                 // class org/apache/tomcat/util/buf/Utf8Encoder
     125: dup
     126: invokespecial #31                 // Method org/apache/tomcat/util/buf/Utf8Encoder."<init>":()V
     129: putfield      #32                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
     132: aload_0
     133: getstatic     #28                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
     136: invokestatic  #26                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     139: putfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
     142: aload_0
     143: new           #34                 // class java/util/concurrent/atomic/AtomicBoolean
     146: dup
     147: iconst_0
     148: invokespecial #35                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
     151: putfield      #36                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
     154: aload_0
     155: ldc2_w        #37                 // long -1l
     158: putfield      #39                 // Field sendTimeout:J
     161: aload_0
     162: new           #40                 // class java/util/ArrayList
     165: dup
     166: invokespecial #41                 // Method java/util/ArrayList."<init>":()V
     169: putfield      #42                 // Field encoderEntries:Ljava/util/List;
     172: return

  protected void setTransformation(org.apache.tomcat.websocket.Transformation);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #13                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
       5: return

  public long getSendTimeout();
    Code:
       0: aload_0
       1: getfield      #39                 // Field sendTimeout:J
       4: lreturn

  public void setSendTimeout(long);
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #39                 // Field sendTimeout:J
       5: return

  public void setBatchingAllowed(boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #36                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iload_1
       5: invokevirtual #43                 // Method java/util/concurrent/atomic/AtomicBoolean.getAndSet:(Z)Z
       8: istore_2
       9: iload_2
      10: ifeq          21
      13: iload_1
      14: ifne          21
      17: aload_0
      18: invokevirtual #44                 // Method flushBatch:()V
      21: return

  public boolean getBatchingAllowed();
    Code:
       0: aload_0
       1: getfield      #36                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #45                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ireturn

  public void flushBatch() throws java.io.IOException;
    Code:
       0: aload_0
       1: bipush        24
       3: aconst_null
       4: iconst_1
       5: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
       8: return

  public void sendBytes(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #51                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryStart:()V
      27: aload_0
      28: iconst_2
      29: aload_1
      30: iconst_1
      31: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      34: aload_0
      35: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      38: iconst_1
      39: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
      42: return

  public java.util.concurrent.Future<java.lang.Void> sendBytesByFuture(java.nio.ByteBuffer);
    Code:
       0: new           #53                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #55                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #56                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendBytesByCompletion(java.nio.ByteBuffer, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #57                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: new           #58                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateUpdateSendHandler
      43: dup
      44: aload_2
      45: aload_0
      46: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      49: invokespecial #59                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateUpdateSendHandler."<init>":(Ljavax/websocket/SendHandler;Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;)V
      52: astore_3
      53: aload_0
      54: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      57: invokevirtual #51                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryStart:()V
      60: aload_0
      61: iconst_2
      62: aload_1
      63: iconst_1
      64: aload_3
      65: invokevirtual #60                 // Method startMessage:(BLjava/nio/ByteBuffer;ZLjavax/websocket/SendHandler;)V
      68: return

  public void sendPartialBytes(java.nio.ByteBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #61                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryPartialStart:()V
      27: aload_0
      28: iconst_2
      29: aload_1
      30: iload_2
      31: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      34: aload_0
      35: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      38: iload_2
      39: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
      42: return

  public void sendPing(java.nio.ByteBuffer) throws java.io.IOException, java.lang.IllegalArgumentException;
    Code:
       0: aload_1
       1: invokevirtual #62                 // Method java/nio/ByteBuffer.remaining:()I
       4: bipush        125
       6: if_icmple     25
       9: new           #47                 // class java/lang/IllegalArgumentException
      12: dup
      13: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      16: ldc           #63                 // String wsRemoteEndpoint.tooMuchData
      18: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      21: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      24: athrow
      25: aload_0
      26: bipush        9
      28: aload_1
      29: iconst_1
      30: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      33: return

  public void sendPong(java.nio.ByteBuffer) throws java.io.IOException, java.lang.IllegalArgumentException;
    Code:
       0: aload_1
       1: invokevirtual #62                 // Method java/nio/ByteBuffer.remaining:()I
       4: bipush        125
       6: if_icmple     25
       9: new           #47                 // class java/lang/IllegalArgumentException
      12: dup
      13: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      16: ldc           #63                 // String wsRemoteEndpoint.tooMuchData
      18: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      21: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      24: athrow
      25: aload_0
      26: bipush        10
      28: aload_1
      29: iconst_1
      30: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      33: return

  public void sendString(java.lang.String) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #64                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textStart:()V
      27: aload_0
      28: aload_1
      29: invokestatic  #65                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      32: iconst_1
      33: invokevirtual #66                 // Method sendMessageBlock:(Ljava/nio/CharBuffer;Z)V
      36: return

  public java.util.concurrent.Future<java.lang.Void> sendStringByFuture(java.lang.String);
    Code:
       0: new           #53                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #55                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #67                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendStringByCompletion(java.lang.String, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #57                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_0
      41: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      44: invokevirtual #64                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textStart:()V
      47: new           #68                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler
      50: dup
      51: aload_0
      52: aload_2
      53: aload_1
      54: invokestatic  #65                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      57: iconst_1
      58: aload_0
      59: getfield      #32                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
      62: aload_0
      63: getfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      66: aload_0
      67: invokespecial #69                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;Ljavax/websocket/SendHandler;Ljava/nio/CharBuffer;ZLjava/nio/charset/CharsetEncoder;Ljava/nio/ByteBuffer;Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      70: astore_3
      71: aload_3
      72: invokevirtual #70                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler.write:()V
      75: return

  public void sendPartialString(java.lang.String, boolean) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #71                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textPartialStart:()V
      27: aload_0
      28: aload_1
      29: invokestatic  #65                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      32: iload_2
      33: invokevirtual #66                 // Method sendMessageBlock:(Ljava/nio/CharBuffer;Z)V
      36: return

  public java.io.OutputStream getSendStream();
    Code:
       0: aload_0
       1: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: invokevirtual #72                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.streamStart:()V
       7: new           #73                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsOutputStream
      10: dup
      11: aload_0
      12: invokespecial #74                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsOutputStream."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      15: areturn

  public java.io.Writer getSendWriter();
    Code:
       0: aload_0
       1: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: invokevirtual #75                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.writeStart:()V
       7: new           #76                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsWriter
      10: dup
      11: aload_0
      12: invokespecial #77                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsWriter."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      15: areturn

  void sendMessageBlock(java.nio.CharBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #78                 // Method getTimeoutExpiry:()J
       4: lstore_3
       5: iconst_0
       6: istore        5
       8: iload         5
      10: ifne          107
      13: aload_0
      14: getfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      17: invokevirtual #79                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
      20: pop
      21: aload_0
      22: getfield      #32                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
      25: aload_1
      26: aload_0
      27: getfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      30: iconst_1
      31: invokevirtual #80                 // Method java/nio/charset/CharsetEncoder.encode:(Ljava/nio/CharBuffer;Ljava/nio/ByteBuffer;Z)Ljava/nio/charset/CoderResult;
      34: astore        6
      36: aload         6
      38: invokevirtual #81                 // Method java/nio/charset/CoderResult.isError:()Z
      41: ifeq          57
      44: new           #47                 // class java/lang/IllegalArgumentException
      47: dup
      48: aload         6
      50: invokevirtual #82                 // Method java/nio/charset/CoderResult.toString:()Ljava/lang/String;
      53: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      56: athrow
      57: aload         6
      59: invokevirtual #83                 // Method java/nio/charset/CoderResult.isOverflow:()Z
      62: ifne          69
      65: iconst_1
      66: goto          70
      69: iconst_0
      70: istore        5
      72: aload_0
      73: getfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      76: invokevirtual #84                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      79: pop
      80: aload_0
      81: iconst_1
      82: aload_0
      83: getfield      #33                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      86: iload_2
      87: ifeq          99
      90: iload         5
      92: ifeq          99
      95: iconst_1
      96: goto          100
      99: iconst_0
     100: lload_3
     101: invokespecial #85                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;ZJ)V
     104: goto          8
     107: aload_0
     108: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
     111: iload_2
     112: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
     115: return

  void sendMessageBlock(byte, java.nio.ByteBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: iload_1
       2: aload_2
       3: iload_3
       4: aload_0
       5: invokespecial #78                 // Method getTimeoutExpiry:()J
       8: invokespecial #85                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;ZJ)V
      11: return

  private long getTimeoutExpiry();
    Code:
       0: aload_0
       1: invokespecial #86                 // Method getBlockingSendTimeout:()J
       4: lstore_1
       5: lload_1
       6: lconst_0
       7: lcmp
       8: ifge          15
      11: ldc2_w        #87                 // long 9223372036854775807l
      14: lreturn
      15: invokestatic  #89                 // Method java/lang/System.currentTimeMillis:()J
      18: lload_1
      19: ladd
      20: lreturn

  private void sendMessageBlock(byte, java.nio.ByteBuffer, boolean, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #90                 // Method org/apache/tomcat/websocket/WsSession.updateLastActive:()V
       7: new           #91                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler
      10: dup
      11: aconst_null
      12: invokespecial #92                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$1;)V
      15: astore        6
      17: new           #40                 // class java/util/ArrayList
      20: dup
      21: invokespecial #41                 // Method java/util/ArrayList."<init>":()V
      24: astore        7
      26: aload         7
      28: new           #93                 // class org/apache/tomcat/websocket/MessagePart
      31: dup
      32: iload_3
      33: iconst_0
      34: iload_1
      35: aload_2
      36: aload         6
      38: aload         6
      40: lload         4
      42: invokespecial #94                 // Method org/apache/tomcat/websocket/MessagePart."<init>":(ZIBLjava/nio/ByteBuffer;Ljavax/websocket/SendHandler;Ljavax/websocket/SendHandler;J)V
      45: invokeinterface #95,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      50: pop
      51: aload_0
      52: getfield      #13                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      55: aload         7
      57: invokeinterface #96,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.sendMessagePart:(Ljava/util/List;)Ljava/util/List;
      62: astore        7
      64: aload         7
      66: invokeinterface #97,  1           // InterfaceMethod java/util/List.size:()I
      71: ifne          75
      74: return
      75: lload         4
      77: invokestatic  #89                 // Method java/lang/System.currentTimeMillis:()J
      80: lsub
      81: lstore        8
      83: aload_0
      84: getfield      #16                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      87: lload         8
      89: getstatic     #98                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      92: invokevirtual #99                 // Method java/util/concurrent/Semaphore.tryAcquire:(JLjava/util/concurrent/TimeUnit;)Z
      95: ifne          149
      98: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     101: ldc           #100                // String wsRemoteEndpoint.acquireTimeout
     103: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     106: astore        10
     108: aload_0
     109: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     112: new           #101                // class javax/websocket/CloseReason
     115: dup
     116: getstatic     #102                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     119: aload         10
     121: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     124: new           #101                // class javax/websocket/CloseReason
     127: dup
     128: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     131: aload         10
     133: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     136: invokevirtual #105                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     139: new           #106                // class java/net/SocketTimeoutException
     142: dup
     143: aload         10
     145: invokespecial #107                // Method java/net/SocketTimeoutException."<init>":(Ljava/lang/String;)V
     148: athrow
     149: goto          207
     152: astore        10
     154: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     157: ldc           #109                // String wsRemoteEndpoint.sendInterrupt
     159: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     162: astore        11
     164: aload_0
     165: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     168: new           #101                // class javax/websocket/CloseReason
     171: dup
     172: getstatic     #102                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     175: aload         11
     177: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     180: new           #101                // class javax/websocket/CloseReason
     183: dup
     184: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     187: aload         11
     189: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     192: invokevirtual #105                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     195: new           #110                // class java/io/IOException
     198: dup
     199: aload         11
     201: aload         10
     203: invokespecial #111                // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     206: athrow
     207: aload         7
     209: invokeinterface #112,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     214: astore        10
     216: aload         10
     218: invokeinterface #113,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     223: ifeq          338
     226: aload         10
     228: invokeinterface #114,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     233: checkcast     #93                 // class org/apache/tomcat/websocket/MessagePart
     236: astore        11
     238: aload_0
     239: aload         11
     241: invokevirtual #115                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
     244: aload         6
     246: invokevirtual #116                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler.getSendResult:()Ljavax/websocket/SendResult;
     249: invokevirtual #117                // Method javax/websocket/SendResult.isOK:()Z
     252: ifne          319
     255: aload_0
     256: getfield      #16                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
     259: invokevirtual #118                // Method java/util/concurrent/Semaphore.release:()V
     262: aload         6
     264: invokevirtual #116                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler.getSendResult:()Ljavax/websocket/SendResult;
     267: invokevirtual #119                // Method javax/websocket/SendResult.getException:()Ljava/lang/Throwable;
     270: astore        12
     272: aload_0
     273: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     276: new           #101                // class javax/websocket/CloseReason
     279: dup
     280: getstatic     #102                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     283: aload         12
     285: invokevirtual #120                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     288: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     291: new           #101                // class javax/websocket/CloseReason
     294: dup
     295: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     298: aload         12
     300: invokevirtual #120                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     303: invokespecial #103                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     306: invokevirtual #105                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     309: new           #110                // class java/io/IOException
     312: dup
     313: aload         12
     315: invokespecial #121                // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     318: athrow
     319: aload_0
     320: aload_0
     321: getfield      #23                 // Field nextFragmented:Z
     324: putfield      #22                 // Field fragmented:Z
     327: aload_0
     328: aload_0
     329: getfield      #25                 // Field nextText:Z
     332: putfield      #24                 // Field text:Z
     335: goto          216
     338: aload_2
     339: ifnull        347
     342: aload_2
     343: invokevirtual #79                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     346: pop
     347: aload_0
     348: aconst_null
     349: aconst_null
     350: invokevirtual #122                // Method endMessage:(Ljavax/websocket/SendHandler;Ljavax/websocket/SendResult;)V
     353: return
    Exception table:
       from    to  target type
          83   149   152   Class java/lang/InterruptedException

  void startMessage(byte, java.nio.ByteBuffer, boolean, javax.websocket.SendHandler);
    Code:
       0: aload_0
       1: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #90                 // Method org/apache/tomcat/websocket/WsSession.updateLastActive:()V
       7: new           #40                 // class java/util/ArrayList
      10: dup
      11: invokespecial #41                 // Method java/util/ArrayList."<init>":()V
      14: astore        5
      16: aload         5
      18: new           #93                 // class org/apache/tomcat/websocket/MessagePart
      21: dup
      22: iload_3
      23: iconst_0
      24: iload_1
      25: aload_2
      26: aload_0
      27: getfield      #12                 // Field intermediateMessageHandler:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler;
      30: new           #123                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EndMessageHandler
      33: dup
      34: aload_0
      35: aload         4
      37: invokespecial #124                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EndMessageHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;Ljavax/websocket/SendHandler;)V
      40: ldc2_w        #37                 // long -1l
      43: invokespecial #94                 // Method org/apache/tomcat/websocket/MessagePart."<init>":(ZIBLjava/nio/ByteBuffer;Ljavax/websocket/SendHandler;Ljavax/websocket/SendHandler;J)V
      46: invokeinterface #95,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      51: pop
      52: aload_0
      53: getfield      #13                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      56: aload         5
      58: invokeinterface #96,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.sendMessagePart:(Ljava/util/List;)Ljava/util/List;
      63: astore        5
      65: aload         5
      67: invokeinterface #97,  1           // InterfaceMethod java/util/List.size:()I
      72: ifne          90
      75: aload         4
      77: new           #125                // class javax/websocket/SendResult
      80: dup
      81: invokespecial #126                // Method javax/websocket/SendResult."<init>":()V
      84: invokeinterface #127,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
      89: return
      90: aload         5
      92: iconst_0
      93: invokeinterface #128,  2          // InterfaceMethod java/util/List.remove:(I)Ljava/lang/Object;
      98: checkcast     #93                 // class org/apache/tomcat/websocket/MessagePart
     101: astore        6
     103: iconst_0
     104: istore        7
     106: aload_0
     107: getfield      #21                 // Field messagePartLock:Ljava/lang/Object;
     110: dup
     111: astore        8
     113: monitorenter
     114: bipush        8
     116: aload         6
     118: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     121: if_icmpne     148
     124: aload_0
     125: invokevirtual #130                // Method getBatchingAllowed:()Z
     128: ifeq          148
     131: aload_0
     132: getfield      #7                  // Field log:Lorg/apache/juli/logging/Log;
     135: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     138: ldc           #131                // String wsRemoteEndpoint.flushOnCloseFailed
     140: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     143: invokeinterface #132,  2          // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;)V
     148: aload_0
     149: getfield      #16                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
     152: invokevirtual #133                // Method java/util/concurrent/Semaphore.tryAcquire:()Z
     155: ifeq          164
     158: iconst_1
     159: istore        7
     161: goto          176
     164: aload_0
     165: getfield      #19                 // Field messagePartQueue:Ljava/util/Queue;
     168: aload         6
     170: invokeinterface #134,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
     175: pop
     176: aload_0
     177: getfield      #19                 // Field messagePartQueue:Ljava/util/Queue;
     180: aload         5
     182: invokeinterface #135,  2          // InterfaceMethod java/util/Queue.addAll:(Ljava/util/Collection;)Z
     187: pop
     188: aload         8
     190: monitorexit
     191: goto          202
     194: astore        9
     196: aload         8
     198: monitorexit
     199: aload         9
     201: athrow
     202: iload         7
     204: ifeq          213
     207: aload_0
     208: aload         6
     210: invokevirtual #115                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
     213: return
    Exception table:
       from    to  target type
         114   191   194   any
         194   199   194   any

  void endMessage(javax.websocket.SendHandler, javax.websocket.SendResult);
    Code:
       0: iconst_0
       1: istore_3
       2: aconst_null
       3: astore        4
       5: aload_0
       6: getfield      #21                 // Field messagePartLock:Ljava/lang/Object;
       9: dup
      10: astore        5
      12: monitorenter
      13: aload_0
      14: aload_0
      15: getfield      #23                 // Field nextFragmented:Z
      18: putfield      #22                 // Field fragmented:Z
      21: aload_0
      22: aload_0
      23: getfield      #25                 // Field nextText:Z
      26: putfield      #24                 // Field text:Z
      29: aload_0
      30: getfield      #19                 // Field messagePartQueue:Ljava/util/Queue;
      33: invokeinterface #136,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      38: checkcast     #93                 // class org/apache/tomcat/websocket/MessagePart
      41: astore        4
      43: aload         4
      45: ifnonnull     58
      48: aload_0
      49: getfield      #16                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      52: invokevirtual #118                // Method java/util/concurrent/Semaphore.release:()V
      55: goto          67
      58: aload_0
      59: getfield      #2                  // Field closed:Z
      62: ifne          67
      65: iconst_1
      66: istore_3
      67: aload         5
      69: monitorexit
      70: goto          81
      73: astore        6
      75: aload         5
      77: monitorexit
      78: aload         6
      80: athrow
      81: iload_3
      82: ifeq          91
      85: aload_0
      86: aload         4
      88: invokevirtual #115                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
      91: aload_0
      92: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
      95: invokevirtual #90                 // Method org/apache/tomcat/websocket/WsSession.updateLastActive:()V
      98: aload_1
      99: ifnull        109
     102: aload_1
     103: aload_2
     104: invokeinterface #127,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     109: return
    Exception table:
       from    to  target type
          13    70    73   any
          73    78    73   any

  void writeMessagePart(org.apache.tomcat.websocket.MessagePart);
    Code:
       0: aload_0
       1: getfield      #2                  // Field closed:Z
       4: ifeq          23
       7: new           #137                // class java/lang/IllegalStateException
      10: dup
      11: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      14: ldc           #138                // String wsRemoteEndpoint.closed
      16: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      19: invokespecial #139                // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      22: athrow
      23: bipush        24
      25: aload_1
      26: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
      29: if_icmpne     93
      32: aload_0
      33: aload_0
      34: getfield      #22                 // Field fragmented:Z
      37: putfield      #23                 // Field nextFragmented:Z
      40: aload_0
      41: aload_0
      42: getfield      #24                 // Field text:Z
      45: putfield      #25                 // Field nextText:Z
      48: aload_0
      49: getfield      #29                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      52: invokevirtual #84                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      55: pop
      56: new           #140                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferFlushSendHandler
      59: dup
      60: aload_0
      61: getfield      #29                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      64: aload_1
      65: invokevirtual #141                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
      68: invokespecial #142                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferFlushSendHandler."<init>":(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
      71: astore_2
      72: aload_0
      73: aload_2
      74: aload_1
      75: invokevirtual #143                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
      78: iconst_1
      79: anewarray     #144                // class java/nio/ByteBuffer
      82: dup
      83: iconst_0
      84: aload_0
      85: getfield      #29                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      88: aastore
      89: invokevirtual #145                // Method doWrite:(Ljavax/websocket/SendHandler;J[Ljava/nio/ByteBuffer;)V
      92: return
      93: aload_1
      94: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
      97: invokestatic  #146                // Method org/apache/tomcat/websocket/Util.isControl:(B)Z
     100: ifeq          138
     103: aload_0
     104: aload_0
     105: getfield      #22                 // Field fragmented:Z
     108: putfield      #23                 // Field nextFragmented:Z
     111: aload_0
     112: aload_0
     113: getfield      #24                 // Field text:Z
     116: putfield      #25                 // Field nextText:Z
     119: aload_1
     120: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     123: bipush        8
     125: if_icmpne     133
     128: aload_0
     129: iconst_1
     130: putfield      #2                  // Field closed:Z
     133: iconst_1
     134: istore_2
     135: goto          233
     138: aload_1
     139: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     142: invokestatic  #147                // Method org/apache/tomcat/websocket/Util.isText:(B)Z
     145: istore_3
     146: aload_0
     147: getfield      #22                 // Field fragmented:Z
     150: ifeq          206
     153: aload_0
     154: getfield      #24                 // Field text:Z
     157: iload_3
     158: if_icmpeq     177
     161: new           #137                // class java/lang/IllegalStateException
     164: dup
     165: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     168: ldc           #148                // String wsRemoteEndpoint.changeType
     170: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     173: invokespecial #139                // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     176: athrow
     177: aload_0
     178: aload_0
     179: getfield      #24                 // Field text:Z
     182: putfield      #25                 // Field nextText:Z
     185: aload_0
     186: aload_1
     187: invokevirtual #149                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     190: ifne          197
     193: iconst_1
     194: goto          198
     197: iconst_0
     198: putfield      #23                 // Field nextFragmented:Z
     201: iconst_0
     202: istore_2
     203: goto          233
     206: aload_1
     207: invokevirtual #149                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     210: ifeq          221
     213: aload_0
     214: iconst_0
     215: putfield      #23                 // Field nextFragmented:Z
     218: goto          231
     221: aload_0
     222: iconst_1
     223: putfield      #23                 // Field nextFragmented:Z
     226: aload_0
     227: iload_3
     228: putfield      #25                 // Field nextText:Z
     231: iconst_1
     232: istore_2
     233: aload_0
     234: invokevirtual #150                // Method isMasked:()Z
     237: ifeq          247
     240: invokestatic  #151                // Method org/apache/tomcat/websocket/Util.generateMask:()[B
     243: astore_3
     244: goto          249
     247: aconst_null
     248: astore_3
     249: aload_0
     250: getfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     253: invokevirtual #79                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     256: pop
     257: aload_0
     258: getfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     261: aload_1
     262: invokevirtual #149                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     265: aload_1
     266: invokevirtual #152                // Method org/apache/tomcat/websocket/MessagePart.getRsv:()I
     269: aload_1
     270: invokevirtual #129                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     273: aload_0
     274: invokevirtual #150                // Method isMasked:()Z
     277: aload_1
     278: invokevirtual #153                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     281: aload_3
     282: iload_2
     283: invokestatic  #154                // Method writeHeader:(Ljava/nio/ByteBuffer;ZIBZLjava/nio/ByteBuffer;[BZ)V
     286: aload_0
     287: getfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     290: invokevirtual #84                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     293: pop
     294: aload_0
     295: invokevirtual #130                // Method getBatchingAllowed:()Z
     298: ifne          308
     301: aload_0
     302: invokevirtual #150                // Method isMasked:()Z
     305: ifeq          359
     308: new           #155                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler
     311: dup
     312: aload_1
     313: invokevirtual #141                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
     316: aload_1
     317: invokevirtual #143                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
     320: aload_0
     321: getfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     324: aload_1
     325: invokevirtual #153                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     328: aload_3
     329: aload_0
     330: getfield      #29                 // Field outputBuffer:Ljava/nio/ByteBuffer;
     333: aload_0
     334: invokevirtual #130                // Method getBatchingAllowed:()Z
     337: ifne          344
     340: iconst_1
     341: goto          345
     344: iconst_0
     345: aload_0
     346: invokespecial #156                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler."<init>":(Ljavax/websocket/SendHandler;JLjava/nio/ByteBuffer;Ljava/nio/ByteBuffer;[BLjava/nio/ByteBuffer;ZLorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
     349: astore        4
     351: aload         4
     353: invokevirtual #157                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler.write:()V
     356: goto          389
     359: aload_0
     360: aload_1
     361: invokevirtual #141                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
     364: aload_1
     365: invokevirtual #143                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
     368: iconst_2
     369: anewarray     #144                // class java/nio/ByteBuffer
     372: dup
     373: iconst_0
     374: aload_0
     375: getfield      #27                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     378: aastore
     379: dup
     380: iconst_1
     381: aload_1
     382: invokevirtual #153                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     385: aastore
     386: invokevirtual #145                // Method doWrite:(Ljavax/websocket/SendHandler;J[Ljava/nio/ByteBuffer;)V
     389: return

  private long getBlockingSendTimeout();
    Code:
       0: aload_0
       1: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #158                // Method org/apache/tomcat/websocket/WsSession.getUserProperties:()Ljava/util/Map;
       7: ldc           #159                // String org.apache.tomcat.websocket.BLOCKING_SEND_TIMEOUT
       9: invokeinterface #160,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: astore_1
      15: aconst_null
      16: astore_2
      17: aload_1
      18: instanceof    #161                // class java/lang/Long
      21: ifeq          29
      24: aload_1
      25: checkcast     #161                // class java/lang/Long
      28: astore_2
      29: aload_2
      30: ifnonnull     37
      33: ldc2_w        #162                // long 20000l
      36: lreturn
      37: aload_2
      38: invokevirtual #164                // Method java/lang/Long.longValue:()J
      41: lreturn

  public void sendObject(java.lang.Object) throws java.io.IOException, javax.websocket.EncodeException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: aload_1
      22: invokespecial #165                // Method findEncoder:(Ljava/lang/Object;)Ljavax/websocket/Encoder;
      25: astore_2
      26: aload_2
      27: ifnonnull     51
      30: aload_1
      31: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      34: invokestatic  #167                // Method org/apache/tomcat/websocket/Util.isPrimitive:(Ljava/lang/Class;)Z
      37: ifeq          51
      40: aload_1
      41: invokevirtual #168                // Method java/lang/Object.toString:()Ljava/lang/String;
      44: astore_3
      45: aload_0
      46: aload_3
      47: invokevirtual #169                // Method sendString:(Ljava/lang/String;)V
      50: return
      51: aload_2
      52: ifnonnull     85
      55: ldc_w         #170                // class "[B"
      58: aload_1
      59: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      62: invokevirtual #171                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      65: ifeq          85
      68: aload_1
      69: checkcast     #170                // class "[B"
      72: checkcast     #170                // class "[B"
      75: invokestatic  #172                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      78: astore_3
      79: aload_0
      80: aload_3
      81: invokevirtual #173                // Method sendBytes:(Ljava/nio/ByteBuffer;)V
      84: return
      85: aload_2
      86: instanceof    #174                // class javax/websocket/Encoder$Text
      89: ifeq          111
      92: aload_2
      93: checkcast     #174                // class javax/websocket/Encoder$Text
      96: aload_1
      97: invokeinterface #175,  2          // InterfaceMethod javax/websocket/Encoder$Text.encode:(Ljava/lang/Object;)Ljava/lang/String;
     102: astore_3
     103: aload_0
     104: aload_3
     105: invokevirtual #169                // Method sendString:(Ljava/lang/String;)V
     108: goto          385
     111: aload_2
     112: instanceof    #176                // class javax/websocket/Encoder$TextStream
     115: ifeq          221
     118: aload_0
     119: invokevirtual #177                // Method getSendWriter:()Ljava/io/Writer;
     122: astore_3
     123: aconst_null
     124: astore        4
     126: aload_2
     127: checkcast     #176                // class javax/websocket/Encoder$TextStream
     130: aload_1
     131: aload_3
     132: invokeinterface #178,  3          // InterfaceMethod javax/websocket/Encoder$TextStream.encode:(Ljava/lang/Object;Ljava/io/Writer;)V
     137: aload_3
     138: ifnull        218
     141: aload         4
     143: ifnull        165
     146: aload_3
     147: invokevirtual #179                // Method java/io/Writer.close:()V
     150: goto          218
     153: astore        5
     155: aload         4
     157: aload         5
     159: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     162: goto          218
     165: aload_3
     166: invokevirtual #179                // Method java/io/Writer.close:()V
     169: goto          218
     172: astore        5
     174: aload         5
     176: astore        4
     178: aload         5
     180: athrow
     181: astore        6
     183: aload_3
     184: ifnull        215
     187: aload         4
     189: ifnull        211
     192: aload_3
     193: invokevirtual #179                // Method java/io/Writer.close:()V
     196: goto          215
     199: astore        7
     201: aload         4
     203: aload         7
     205: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     208: goto          215
     211: aload_3
     212: invokevirtual #179                // Method java/io/Writer.close:()V
     215: aload         6
     217: athrow
     218: goto          385
     221: aload_2
     222: instanceof    #182                // class javax/websocket/Encoder$Binary
     225: ifeq          247
     228: aload_2
     229: checkcast     #182                // class javax/websocket/Encoder$Binary
     232: aload_1
     233: invokeinterface #183,  2          // InterfaceMethod javax/websocket/Encoder$Binary.encode:(Ljava/lang/Object;)Ljava/nio/ByteBuffer;
     238: astore_3
     239: aload_0
     240: aload_3
     241: invokevirtual #173                // Method sendBytes:(Ljava/nio/ByteBuffer;)V
     244: goto          385
     247: aload_2
     248: instanceof    #184                // class javax/websocket/Encoder$BinaryStream
     251: ifeq          357
     254: aload_0
     255: invokevirtual #185                // Method getSendStream:()Ljava/io/OutputStream;
     258: astore_3
     259: aconst_null
     260: astore        4
     262: aload_2
     263: checkcast     #184                // class javax/websocket/Encoder$BinaryStream
     266: aload_1
     267: aload_3
     268: invokeinterface #186,  3          // InterfaceMethod javax/websocket/Encoder$BinaryStream.encode:(Ljava/lang/Object;Ljava/io/OutputStream;)V
     273: aload_3
     274: ifnull        354
     277: aload         4
     279: ifnull        301
     282: aload_3
     283: invokevirtual #187                // Method java/io/OutputStream.close:()V
     286: goto          354
     289: astore        5
     291: aload         4
     293: aload         5
     295: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     298: goto          354
     301: aload_3
     302: invokevirtual #187                // Method java/io/OutputStream.close:()V
     305: goto          354
     308: astore        5
     310: aload         5
     312: astore        4
     314: aload         5
     316: athrow
     317: astore        8
     319: aload_3
     320: ifnull        351
     323: aload         4
     325: ifnull        347
     328: aload_3
     329: invokevirtual #187                // Method java/io/OutputStream.close:()V
     332: goto          351
     335: astore        9
     337: aload         4
     339: aload         9
     341: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     344: goto          351
     347: aload_3
     348: invokevirtual #187                // Method java/io/OutputStream.close:()V
     351: aload         8
     353: athrow
     354: goto          385
     357: new           #188                // class javax/websocket/EncodeException
     360: dup
     361: aload_1
     362: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     365: ldc           #189                // String wsRemoteEndpoint.noEncoder
     367: iconst_1
     368: anewarray     #20                 // class java/lang/Object
     371: dup
     372: iconst_0
     373: aload_1
     374: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
     377: aastore
     378: invokevirtual #190                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     381: invokespecial #191                // Method javax/websocket/EncodeException."<init>":(Ljava/lang/Object;Ljava/lang/String;)V
     384: athrow
     385: return
    Exception table:
       from    to  target type
         146   150   153   Class java/lang/Throwable
         126   137   172   Class java/lang/Throwable
         126   137   181   any
         192   196   199   Class java/lang/Throwable
         172   183   181   any
         282   286   289   Class java/lang/Throwable
         262   273   308   Class java/lang/Throwable
         262   273   317   any
         328   332   335   Class java/lang/Throwable
         308   319   317   any

  public java.util.concurrent.Future<java.lang.Void> sendObjectByFuture(java.lang.Object);
    Code:
       0: new           #53                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #55                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #192                // Method sendObjectByCompletion:(Ljava/lang/Object;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendObjectByCompletion(java.lang.Object, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #48                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #57                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #49                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #50                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_0
      41: aload_1
      42: invokespecial #165                // Method findEncoder:(Ljava/lang/Object;)Ljavax/websocket/Encoder;
      45: astore_3
      46: aload_3
      47: ifnonnull     74
      50: aload_1
      51: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      54: invokestatic  #167                // Method org/apache/tomcat/websocket/Util.isPrimitive:(Ljava/lang/Class;)Z
      57: ifeq          74
      60: aload_1
      61: invokevirtual #168                // Method java/lang/Object.toString:()Ljava/lang/String;
      64: astore        4
      66: aload_0
      67: aload         4
      69: aload_2
      70: invokevirtual #67                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
      73: return
      74: aload_3
      75: ifnonnull     111
      78: ldc_w         #170                // class "[B"
      81: aload_1
      82: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      85: invokevirtual #171                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      88: ifeq          111
      91: aload_1
      92: checkcast     #170                // class "[B"
      95: checkcast     #170                // class "[B"
      98: invokestatic  #172                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     101: astore        4
     103: aload_0
     104: aload         4
     106: aload_2
     107: invokevirtual #56                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
     110: return
     111: aload_3
     112: instanceof    #174                // class javax/websocket/Encoder$Text
     115: ifeq          140
     118: aload_3
     119: checkcast     #174                // class javax/websocket/Encoder$Text
     122: aload_1
     123: invokeinterface #175,  2          // InterfaceMethod javax/websocket/Encoder$Text.encode:(Ljava/lang/Object;)Ljava/lang/String;
     128: astore        4
     130: aload_0
     131: aload         4
     133: aload_2
     134: invokevirtual #67                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
     137: goto          459
     140: aload_3
     141: instanceof    #176                // class javax/websocket/Encoder$TextStream
     144: ifeq          271
     147: aload_0
     148: invokevirtual #177                // Method getSendWriter:()Ljava/io/Writer;
     151: astore        4
     153: aconst_null
     154: astore        5
     156: aload_3
     157: checkcast     #176                // class javax/websocket/Encoder$TextStream
     160: aload_1
     161: aload         4
     163: invokeinterface #178,  3          // InterfaceMethod javax/websocket/Encoder$TextStream.encode:(Ljava/lang/Object;Ljava/io/Writer;)V
     168: aload         4
     170: ifnull        255
     173: aload         5
     175: ifnull        198
     178: aload         4
     180: invokevirtual #179                // Method java/io/Writer.close:()V
     183: goto          255
     186: astore        6
     188: aload         5
     190: aload         6
     192: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     195: goto          255
     198: aload         4
     200: invokevirtual #179                // Method java/io/Writer.close:()V
     203: goto          255
     206: astore        6
     208: aload         6
     210: astore        5
     212: aload         6
     214: athrow
     215: astore        7
     217: aload         4
     219: ifnull        252
     222: aload         5
     224: ifnull        247
     227: aload         4
     229: invokevirtual #179                // Method java/io/Writer.close:()V
     232: goto          252
     235: astore        8
     237: aload         5
     239: aload         8
     241: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     244: goto          252
     247: aload         4
     249: invokevirtual #179                // Method java/io/Writer.close:()V
     252: aload         7
     254: athrow
     255: aload_2
     256: new           #125                // class javax/websocket/SendResult
     259: dup
     260: invokespecial #126                // Method javax/websocket/SendResult."<init>":()V
     263: invokeinterface #127,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     268: goto          459
     271: aload_3
     272: instanceof    #182                // class javax/websocket/Encoder$Binary
     275: ifeq          300
     278: aload_3
     279: checkcast     #182                // class javax/websocket/Encoder$Binary
     282: aload_1
     283: invokeinterface #183,  2          // InterfaceMethod javax/websocket/Encoder$Binary.encode:(Ljava/lang/Object;)Ljava/nio/ByteBuffer;
     288: astore        4
     290: aload_0
     291: aload         4
     293: aload_2
     294: invokevirtual #56                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
     297: goto          459
     300: aload_3
     301: instanceof    #184                // class javax/websocket/Encoder$BinaryStream
     304: ifeq          431
     307: aload_0
     308: invokevirtual #185                // Method getSendStream:()Ljava/io/OutputStream;
     311: astore        4
     313: aconst_null
     314: astore        5
     316: aload_3
     317: checkcast     #184                // class javax/websocket/Encoder$BinaryStream
     320: aload_1
     321: aload         4
     323: invokeinterface #186,  3          // InterfaceMethod javax/websocket/Encoder$BinaryStream.encode:(Ljava/lang/Object;Ljava/io/OutputStream;)V
     328: aload         4
     330: ifnull        415
     333: aload         5
     335: ifnull        358
     338: aload         4
     340: invokevirtual #187                // Method java/io/OutputStream.close:()V
     343: goto          415
     346: astore        6
     348: aload         5
     350: aload         6
     352: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     355: goto          415
     358: aload         4
     360: invokevirtual #187                // Method java/io/OutputStream.close:()V
     363: goto          415
     366: astore        6
     368: aload         6
     370: astore        5
     372: aload         6
     374: athrow
     375: astore        9
     377: aload         4
     379: ifnull        412
     382: aload         5
     384: ifnull        407
     387: aload         4
     389: invokevirtual #187                // Method java/io/OutputStream.close:()V
     392: goto          412
     395: astore        10
     397: aload         5
     399: aload         10
     401: invokevirtual #181                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     404: goto          412
     407: aload         4
     409: invokevirtual #187                // Method java/io/OutputStream.close:()V
     412: aload         9
     414: athrow
     415: aload_2
     416: new           #125                // class javax/websocket/SendResult
     419: dup
     420: invokespecial #126                // Method javax/websocket/SendResult."<init>":()V
     423: invokeinterface #127,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     428: goto          459
     431: new           #188                // class javax/websocket/EncodeException
     434: dup
     435: aload_1
     436: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     439: ldc           #189                // String wsRemoteEndpoint.noEncoder
     441: iconst_1
     442: anewarray     #20                 // class java/lang/Object
     445: dup
     446: iconst_0
     447: aload_1
     448: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
     451: aastore
     452: invokevirtual #190                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     455: invokespecial #191                // Method javax/websocket/EncodeException."<init>":(Ljava/lang/Object;Ljava/lang/String;)V
     458: athrow
     459: goto          483
     462: astore        4
     464: new           #125                // class javax/websocket/SendResult
     467: dup
     468: aload         4
     470: invokespecial #194                // Method javax/websocket/SendResult."<init>":(Ljava/lang/Throwable;)V
     473: astore        5
     475: aload_2
     476: aload         5
     478: invokeinterface #127,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     483: return
    Exception table:
       from    to  target type
         178   183   186   Class java/lang/Throwable
         156   168   206   Class java/lang/Throwable
         156   168   215   any
         227   232   235   Class java/lang/Throwable
         206   217   215   any
         338   343   346   Class java/lang/Throwable
         316   328   366   Class java/lang/Throwable
         316   328   375   any
         387   392   395   Class java/lang/Throwable
         366   377   375   any
         111   459   462   Class java/lang/Exception

  protected void setSession(org.apache.tomcat.websocket.WsSession);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #54                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       5: return

  protected void setEncoders(javax.websocket.EndpointConfig) throws javax.websocket.DeploymentException;
    Code:
       0: aload_0
       1: getfield      #42                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #195,  1          // InterfaceMethod java/util/List.clear:()V
       9: aload_1
      10: invokeinterface #196,  1          // InterfaceMethod javax/websocket/EndpointConfig.getEncoders:()Ljava/util/List;
      15: invokeinterface #112,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      20: astore_2
      21: aload_2
      22: invokeinterface #113,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      27: ifeq          132
      30: aload_2
      31: invokeinterface #114,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      36: checkcast     #197                // class java/lang/Class
      39: astore_3
      40: aload_3
      41: iconst_0
      42: anewarray     #197                // class java/lang/Class
      45: invokevirtual #198                // Method java/lang/Class.getConstructor:([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
      48: iconst_0
      49: anewarray     #20                 // class java/lang/Object
      52: invokevirtual #199                // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
      55: checkcast     #200                // class javax/websocket/Encoder
      58: astore        4
      60: aload         4
      62: aload_1
      63: invokeinterface #201,  2          // InterfaceMethod javax/websocket/Encoder.init:(Ljavax/websocket/EndpointConfig;)V
      68: goto          102
      71: astore        5
      73: new           #203                // class javax/websocket/DeploymentException
      76: dup
      77: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      80: ldc           #204                // String wsRemoteEndpoint.invalidEncoder
      82: iconst_1
      83: anewarray     #20                 // class java/lang/Object
      86: dup
      87: iconst_0
      88: aload_3
      89: invokevirtual #205                // Method java/lang/Class.getName:()Ljava/lang/String;
      92: aastore
      93: invokevirtual #190                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      96: aload         5
      98: invokespecial #206                // Method javax/websocket/DeploymentException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     101: athrow
     102: new           #207                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
     105: dup
     106: aload_3
     107: invokestatic  #208                // Method org/apache/tomcat/websocket/Util.getEncoderType:(Ljava/lang/Class;)Ljava/lang/Class;
     110: aload         4
     112: invokespecial #209                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry."<init>":(Ljava/lang/Class;Ljavax/websocket/Encoder;)V
     115: astore        5
     117: aload_0
     118: getfield      #42                 // Field encoderEntries:Ljava/util/List;
     121: aload         5
     123: invokeinterface #95,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     128: pop
     129: goto          21
     132: return
    Exception table:
       from    to  target type
          40    68    71   Class java/lang/ReflectiveOperationException

  private javax.websocket.Encoder findEncoder(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #42                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #112,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_2
      10: aload_2
      11: invokeinterface #113,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          51
      19: aload_2
      20: invokeinterface #114,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #207                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
      28: astore_3
      29: aload_3
      30: invokevirtual #210                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getClazz:()Ljava/lang/Class;
      33: aload_1
      34: invokevirtual #166                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      37: invokevirtual #171                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      40: ifeq          48
      43: aload_3
      44: invokevirtual #211                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getEncoder:()Ljavax/websocket/Encoder;
      47: areturn
      48: goto          10
      51: aconst_null
      52: areturn

  public final void close();
    Code:
       0: aload_0
       1: getfield      #42                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #112,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #113,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          41
      19: aload_1
      20: invokeinterface #114,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #207                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
      28: astore_2
      29: aload_2
      30: invokevirtual #211                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getEncoder:()Ljavax/websocket/Encoder;
      33: invokeinterface #212,  1          // InterfaceMethod javax/websocket/Encoder.destroy:()V
      38: goto          10
      41: aload_0
      42: getfield      #13                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      45: invokeinterface #213,  1          // InterfaceMethod org/apache/tomcat/websocket/Transformation.close:()V
      50: aload_0
      51: invokevirtual #214                // Method doClose:()V
      54: return

  protected abstract void doWrite(javax.websocket.SendHandler, long, java.nio.ByteBuffer...);

  protected abstract boolean isMasked();

  protected abstract void doClose();

  private static void writeHeader(java.nio.ByteBuffer, boolean, int, byte, boolean, java.nio.ByteBuffer, byte[], boolean);
    Code:
       0: iconst_0
       1: istore        8
       3: iload_1
       4: ifeq          16
       7: iload         8
       9: sipush        128
      12: isub
      13: i2b
      14: istore        8
      16: iload         8
      18: iload_2
      19: iconst_4
      20: ishl
      21: iadd
      22: i2b
      23: istore        8
      25: iload         7
      27: ifeq          37
      30: iload         8
      32: iload_3
      33: iadd
      34: i2b
      35: istore        8
      37: aload_0
      38: iload         8
      40: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
      43: pop
      44: iload         4
      46: ifeq          56
      49: bipush        -128
      51: istore        8
      53: goto          59
      56: iconst_0
      57: istore        8
      59: aload         5
      61: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
      64: bipush        126
      66: if_icmpge     86
      69: aload_0
      70: aload         5
      72: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
      75: iload         8
      77: ior
      78: i2b
      79: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
      82: pop
      83: goto          231
      86: aload         5
      88: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
      91: ldc           #217                // int 65536
      93: if_icmpge     139
      96: aload_0
      97: bipush        126
      99: iload         8
     101: ior
     102: i2b
     103: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     106: pop
     107: aload_0
     108: aload         5
     110: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     113: bipush        8
     115: iushr
     116: i2b
     117: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     120: pop
     121: aload_0
     122: aload         5
     124: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     127: sipush        255
     130: iand
     131: i2b
     132: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     135: pop
     136: goto          231
     139: aload_0
     140: bipush        127
     142: iload         8
     144: ior
     145: i2b
     146: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     149: pop
     150: aload_0
     151: iconst_0
     152: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     155: pop
     156: aload_0
     157: iconst_0
     158: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     161: pop
     162: aload_0
     163: iconst_0
     164: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     167: pop
     168: aload_0
     169: iconst_0
     170: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     173: pop
     174: aload_0
     175: aload         5
     177: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     180: bipush        24
     182: iushr
     183: i2b
     184: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     187: pop
     188: aload_0
     189: aload         5
     191: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     194: bipush        16
     196: iushr
     197: i2b
     198: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     201: pop
     202: aload_0
     203: aload         5
     205: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     208: bipush        8
     210: iushr
     211: i2b
     212: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     215: pop
     216: aload_0
     217: aload         5
     219: invokevirtual #216                // Method java/nio/ByteBuffer.limit:()I
     222: sipush        255
     225: iand
     226: i2b
     227: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     230: pop
     231: iload         4
     233: ifeq          272
     236: aload_0
     237: aload         6
     239: iconst_0
     240: baload
     241: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     244: pop
     245: aload_0
     246: aload         6
     248: iconst_1
     249: baload
     250: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     253: pop
     254: aload_0
     255: aload         6
     257: iconst_2
     258: baload
     259: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     262: pop
     263: aload_0
     264: aload         6
     266: iconst_3
     267: baload
     268: invokevirtual #215                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     271: pop
     272: return

  static org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine access$200(org.apache.tomcat.websocket.WsRemoteEndpointImplBase);
    Code:
       0: aload_0
       1: getfield      #3                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: areturn

  static boolean access$300(org.apache.tomcat.websocket.WsRemoteEndpointImplBase);
    Code:
       0: aload_0
       1: getfield      #2                  // Field closed:Z
       4: ireturn

  static org.apache.tomcat.util.res.StringManager access$400();
    Code:
       0: getstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
       3: areturn

  static {};
    Code:
       0: ldc_w         #5                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase
       3: invokestatic  #218                // Method org/apache/tomcat/util/res/StringManager.getManager:(Ljava/lang/Class;)Lorg/apache/tomcat/util/res/StringManager;
       6: putstatic     #1                  // Field sm:Lorg/apache/tomcat/util/res/StringManager;
       9: new           #125                // class javax/websocket/SendResult
      12: dup
      13: invokespecial #126                // Method javax/websocket/SendResult."<init>":()V
      16: putstatic     #219                // Field SENDRESULT_OK:Ljavax/websocket/SendResult;
      19: return
}

Compiled from "AprEndpoint.java"
public class org.apache.tomcat.util.net.AprEndpoint$Sendfile implements java.lang.Runnable {
  protected long sendfilePollset;

  protected long pool;

  protected long[] desc;

  protected java.util.HashMap<java.lang.Long, org.apache.tomcat.util.net.AprEndpoint$SendfileData> sendfileData;

  protected int sendfileCount;

  protected java.util.ArrayList<org.apache.tomcat.util.net.AprEndpoint$SendfileData> addS;

  private volatile boolean sendfileRunning;

  final org.apache.tomcat.util.net.AprEndpoint this$0;

  public org.apache.tomcat.util.net.AprEndpoint$Sendfile(org.apache.tomcat.util.net.AprEndpoint);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: lconst_0
      11: putfield      #3                  // Field sendfilePollset:J
      14: aload_0
      15: lconst_0
      16: putfield      #4                  // Field pool:J
      19: aload_0
      20: iconst_1
      21: putfield      #5                  // Field sendfileRunning:Z
      24: return

  public int getSendfileCount();
    Code:
       0: aload_0
       1: getfield      #6                  // Field sendfileCount:I
       4: ireturn

  protected void init();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
       5: getfield      #7                  // Field org/apache/tomcat/util/net/AprEndpoint.serverSockPool:J
       8: invokestatic  #8                  // Method org/apache/tomcat/jni/Pool.create:(J)J
      11: putfield      #4                  // Field pool:J
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      18: getfield      #9                  // Field org/apache/tomcat/util/net/AprEndpoint.sendfileSize:I
      21: istore_1
      22: iload_1
      23: ifgt          30
      26: sipush        16384
      29: istore_1
      30: aload_0
      31: aload_0
      32: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      35: iload_1
      36: aload_0
      37: getfield      #4                  // Field pool:J
      40: aload_0
      41: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      44: invokevirtual #10                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
      47: invokevirtual #11                 // Method org/apache/tomcat/util/net/AprEndpoint.allocatePoller:(IJI)J
      50: putfield      #3                  // Field sendfilePollset:J
      53: aload_0
      54: iload_1
      55: iconst_2
      56: imul
      57: newarray       long
      59: putfield      #12                 // Field desc:[J
      62: aload_0
      63: new           #13                 // class java/util/HashMap
      66: dup
      67: iload_1
      68: invokespecial #14                 // Method java/util/HashMap."<init>":(I)V
      71: putfield      #15                 // Field sendfileData:Ljava/util/HashMap;
      74: aload_0
      75: new           #16                 // class java/util/ArrayList
      78: dup
      79: invokespecial #17                 // Method java/util/ArrayList."<init>":()V
      82: putfield      #18                 // Field addS:Ljava/util/ArrayList;
      85: return

  protected void destroy();
    Code:
       0: aload_0
       1: iconst_0
       2: putfield      #5                  // Field sendfileRunning:Z
       5: aload_0
       6: dup
       7: astore_1
       8: monitorenter
       9: aload_0
      10: invokevirtual #19                 // Method java/lang/Object.notify:()V
      13: aload_0
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      18: getfield      #20                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
      21: sipush        1000
      24: idiv
      25: i2l
      26: invokevirtual #21                 // Method java/lang/Object.wait:(J)V
      29: aload_1
      30: monitorexit
      31: goto          39
      34: astore_2
      35: aload_1
      36: monitorexit
      37: aload_2
      38: athrow
      39: goto          43
      42: astore_1
      43: aload_0
      44: getfield      #18                 // Field addS:Ljava/util/ArrayList;
      47: invokevirtual #23                 // Method java/util/ArrayList.size:()I
      50: iconst_1
      51: isub
      52: istore_1
      53: iload_1
      54: iflt          86
      57: aload_0
      58: getfield      #18                 // Field addS:Ljava/util/ArrayList;
      61: iload_1
      62: invokevirtual #24                 // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
      65: checkcast     #25                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
      68: astore_2
      69: aload_0
      70: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      73: aload_2
      74: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      77: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
      80: iinc          1, -1
      83: goto          53
      86: aload_0
      87: getfield      #3                  // Field sendfilePollset:J
      90: aload_0
      91: getfield      #12                 // Field desc:[J
      94: invokestatic  #28                 // Method org/apache/tomcat/jni/Poll.pollset:(J[J)I
      97: istore_1
      98: iload_1
      99: ifle          132
     102: iconst_0
     103: istore_2
     104: iload_2
     105: iload_1
     106: if_icmpge     132
     109: aload_0
     110: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     113: aload_0
     114: getfield      #12                 // Field desc:[J
     117: iload_2
     118: iconst_2
     119: imul
     120: iconst_1
     121: iadd
     122: laload
     123: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     126: iinc          2, 1
     129: goto          104
     132: aload_0
     133: getfield      #4                  // Field pool:J
     136: invokestatic  #29                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     139: aload_0
     140: getfield      #15                 // Field sendfileData:Ljava/util/HashMap;
     143: invokevirtual #30                 // Method java/util/HashMap.clear:()V
     146: return
    Exception table:
       from    to  target type
           9    31    34   any
          34    37    34   any
           5    39    42   Class java/lang/InterruptedException

  public org.apache.tomcat.util.net.SendfileState add(org.apache.tomcat.util.net.AprEndpoint$SendfileData);
    Code:
       0: aload_1
       1: aload_1
       2: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
       5: invokestatic  #31                 // Method org/apache/tomcat/jni/Socket.pool:(J)J
       8: putfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      11: aload_1
      12: aload_1
      13: getfield      #33                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fileName:Ljava/lang/String;
      16: sipush        4129
      19: iconst_0
      20: aload_1
      21: getfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      24: invokestatic  #34                 // Method org/apache/tomcat/jni/File.open:(Ljava/lang/String;IIJ)J
      27: putfield      #35                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
      30: aload_1
      31: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      34: lconst_0
      35: invokestatic  #36                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
      38: pop
      39: aload_0
      40: getfield      #5                  // Field sendfileRunning:Z
      43: ifeq          161
      46: aload_1
      47: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      50: aload_1
      51: getfield      #35                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
      54: aload_1
      55: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
      58: aload_1
      59: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
      62: iconst_0
      63: invokestatic  #39                 // Method org/apache/tomcat/jni/Socket.sendfilen:(JJJJI)J
      66: lstore_2
      67: lload_2
      68: lconst_0
      69: lcmp
      70: ifge          98
      73: lload_2
      74: lneg
      75: ldc2_w        #40                 // long 120002l
      78: lcmp
      79: ifeq          161
      82: aload_1
      83: getfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      86: invokestatic  #29                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
      89: aload_1
      90: lconst_0
      91: putfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      94: getstatic     #42                 // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
      97: areturn
      98: aload_1
      99: dup
     100: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     103: lload_2
     104: ladd
     105: putfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     108: aload_1
     109: dup
     110: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     113: lload_2
     114: lsub
     115: putfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     118: aload_1
     119: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     122: lconst_0
     123: lcmp
     124: ifne          158
     127: aload_1
     128: getfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     131: invokestatic  #29                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     134: aload_1
     135: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     138: aload_0
     139: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     142: invokevirtual #10                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     145: sipush        1000
     148: imul
     149: i2l
     150: invokestatic  #36                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     153: pop
     154: getstatic     #43                 // Field org/apache/tomcat/util/net/SendfileState.DONE:Lorg/apache/tomcat/util/net/SendfileState;
     157: areturn
     158: goto          39
     161: goto          186
     164: astore_2
     165: invokestatic  #45                 // Method org/apache/tomcat/util/net/AprEndpoint.access$200:()Lorg/apache/juli/logging/Log;
     168: getstatic     #46                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     171: ldc           #47                 // String endpoint.sendfile.error
     173: invokevirtual #48                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     176: aload_2
     177: invokeinterface #49,  3           // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     182: getstatic     #42                 // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
     185: areturn
     186: aload_0
     187: dup
     188: astore_2
     189: monitorenter
     190: aload_0
     191: getfield      #18                 // Field addS:Ljava/util/ArrayList;
     194: aload_1
     195: invokevirtual #50                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     198: pop
     199: aload_0
     200: invokevirtual #19                 // Method java/lang/Object.notify:()V
     203: aload_2
     204: monitorexit
     205: goto          215
     208: astore        4
     210: aload_2
     211: monitorexit
     212: aload         4
     214: athrow
     215: getstatic     #51                 // Field org/apache/tomcat/util/net/SendfileState.PENDING:Lorg/apache/tomcat/util/net/SendfileState;
     218: areturn
    Exception table:
       from    to  target type
           0    97   164   Class java/lang/Exception
          98   157   164   Class java/lang/Exception
         158   161   164   Class java/lang/Exception
         190   205   208   any
         208   212   208   any

  protected void remove(org.apache.tomcat.util.net.AprEndpoint$SendfileData);
    Code:
       0: aload_0
       1: getfield      #3                  // Field sendfilePollset:J
       4: aload_1
       5: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
       8: invokestatic  #52                 // Method org/apache/tomcat/jni/Poll.remove:(JJ)I
      11: istore_2
      12: iload_2
      13: ifne          26
      16: aload_0
      17: dup
      18: getfield      #6                  // Field sendfileCount:I
      21: iconst_1
      22: isub
      23: putfield      #6                  // Field sendfileCount:I
      26: aload_0
      27: getfield      #15                 // Field sendfileData:Ljava/util/HashMap;
      30: aload_1
      31: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      34: invokestatic  #53                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      37: invokevirtual #54                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      40: pop
      41: return

  public void run();
    Code:
       0: lconst_0
       1: lstore_1
       2: aload_0
       3: getfield      #5                  // Field sendfileRunning:Z
       6: ifeq          944
       9: aload_0
      10: getfield      #5                  // Field sendfileRunning:Z
      13: ifeq          39
      16: aload_0
      17: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      20: getfield      #55                 // Field org/apache/tomcat/util/net/AprEndpoint.paused:Z
      23: ifeq          39
      26: ldc2_w        #56                 // long 1000l
      29: invokestatic  #58                 // Method java/lang/Thread.sleep:(J)V
      32: goto          9
      35: astore_3
      36: goto          9
      39: aload_0
      40: getfield      #5                  // Field sendfileRunning:Z
      43: ifeq          120
      46: aload_0
      47: getfield      #6                  // Field sendfileCount:I
      50: iconst_1
      51: if_icmpge     120
      54: aload_0
      55: getfield      #18                 // Field addS:Ljava/util/ArrayList;
      58: invokevirtual #23                 // Method java/util/ArrayList.size:()I
      61: iconst_1
      62: if_icmpge     120
      65: lconst_0
      66: lstore_1
      67: aload_0
      68: dup
      69: astore_3
      70: monitorenter
      71: aload_0
      72: getfield      #5                  // Field sendfileRunning:Z
      75: ifeq          101
      78: aload_0
      79: getfield      #6                  // Field sendfileCount:I
      82: iconst_1
      83: if_icmpge     101
      86: aload_0
      87: getfield      #18                 // Field addS:Ljava/util/ArrayList;
      90: invokevirtual #23                 // Method java/util/ArrayList.size:()I
      93: iconst_1
      94: if_icmpge     101
      97: aload_0
      98: invokevirtual #59                 // Method java/lang/Object.wait:()V
     101: aload_3
     102: monitorexit
     103: goto          113
     106: astore        4
     108: aload_3
     109: monitorexit
     110: aload         4
     112: athrow
     113: goto          39
     116: astore_3
     117: goto          39
     120: aload_0
     121: getfield      #5                  // Field sendfileRunning:Z
     124: ifne          130
     127: goto          944
     130: aload_0
     131: getfield      #18                 // Field addS:Ljava/util/ArrayList;
     134: invokevirtual #23                 // Method java/util/ArrayList.size:()I
     137: ifle          302
     140: aload_0
     141: dup
     142: astore_3
     143: monitorenter
     144: aload_0
     145: getfield      #18                 // Field addS:Ljava/util/ArrayList;
     148: invokevirtual #23                 // Method java/util/ArrayList.size:()I
     151: iconst_1
     152: isub
     153: istore        4
     155: iload         4
     157: iflt          283
     160: aload_0
     161: getfield      #18                 // Field addS:Ljava/util/ArrayList;
     164: iload         4
     166: invokevirtual #24                 // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     169: checkcast     #25                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     172: astore        5
     174: aload_0
     175: getfield      #3                  // Field sendfilePollset:J
     178: aload         5
     180: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     183: iconst_4
     184: invokestatic  #60                 // Method org/apache/tomcat/jni/Poll.add:(JJI)I
     187: istore        6
     189: iload         6
     191: ifne          225
     194: aload_0
     195: getfield      #15                 // Field sendfileData:Ljava/util/HashMap;
     198: aload         5
     200: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     203: invokestatic  #53                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     206: aload         5
     208: invokevirtual #61                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     211: pop
     212: aload_0
     213: dup
     214: getfield      #6                  // Field sendfileCount:I
     217: iconst_1
     218: iadd
     219: putfield      #6                  // Field sendfileCount:I
     222: goto          277
     225: aload_0
     226: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     229: invokevirtual #62                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     232: getstatic     #46                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     235: ldc           #63                 // String endpoint.sendfile.addfail
     237: iconst_2
     238: anewarray     #64                 // class java/lang/Object
     241: dup
     242: iconst_0
     243: iload         6
     245: invokestatic  #65                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     248: aastore
     249: dup
     250: iconst_1
     251: iload         6
     253: invokestatic  #66                 // Method org/apache/tomcat/jni/Error.strerror:(I)Ljava/lang/String;
     256: aastore
     257: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     260: invokeinterface #68,  2           // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;)V
     265: aload_0
     266: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     269: aload         5
     271: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     274: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     277: iinc          4, -1
     280: goto          155
     283: aload_0
     284: getfield      #18                 // Field addS:Ljava/util/ArrayList;
     287: invokevirtual #69                 // Method java/util/ArrayList.clear:()V
     290: aload_3
     291: monitorexit
     292: goto          302
     295: astore        7
     297: aload_3
     298: monitorexit
     299: aload         7
     301: athrow
     302: lload_1
     303: aload_0
     304: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     307: getfield      #20                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
     310: i2l
     311: ladd
     312: lstore_1
     313: aload_0
     314: getfield      #3                  // Field sendfilePollset:J
     317: aload_0
     318: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     321: getfield      #20                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
     324: i2l
     325: aload_0
     326: getfield      #12                 // Field desc:[J
     329: iconst_0
     330: invokestatic  #70                 // Method org/apache/tomcat/jni/Poll.poll:(JJ[JZ)I
     333: istore_3
     334: iload_3
     335: ifle          707
     338: iconst_0
     339: istore        4
     341: iload         4
     343: iload_3
     344: if_icmpge     704
     347: aload_0
     348: getfield      #15                 // Field sendfileData:Ljava/util/HashMap;
     351: aload_0
     352: getfield      #12                 // Field desc:[J
     355: iload         4
     357: iconst_2
     358: imul
     359: iconst_1
     360: iadd
     361: laload
     362: invokestatic  #53                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     365: invokevirtual #71                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     368: checkcast     #25                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     371: astore        5
     373: aload_0
     374: getfield      #12                 // Field desc:[J
     377: iload         4
     379: iconst_2
     380: imul
     381: laload
     382: ldc2_w        #72                 // long 32l
     385: land
     386: ldc2_w        #72                 // long 32l
     389: lcmp
     390: ifeq          413
     393: aload_0
     394: getfield      #12                 // Field desc:[J
     397: iload         4
     399: iconst_2
     400: imul
     401: laload
     402: ldc2_w        #74                 // long 16l
     405: land
     406: ldc2_w        #74                 // long 16l
     409: lcmp
     410: ifne          434
     413: aload_0
     414: aload         5
     416: invokevirtual #76                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     419: aload_0
     420: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     423: aload         5
     425: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     428: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     431: goto          698
     434: aload         5
     436: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     439: aload         5
     441: getfield      #35                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
     444: aload         5
     446: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     449: aload         5
     451: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     454: iconst_0
     455: invokestatic  #39                 // Method org/apache/tomcat/jni/Socket.sendfilen:(JJJJI)J
     458: lstore        6
     460: lload         6
     462: lconst_0
     463: lcmp
     464: ifge          488
     467: aload_0
     468: aload         5
     470: invokevirtual #76                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     473: aload_0
     474: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     477: aload         5
     479: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     482: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     485: goto          698
     488: aload         5
     490: dup
     491: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     494: lload         6
     496: ladd
     497: putfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     500: aload         5
     502: dup
     503: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     506: lload         6
     508: lsub
     509: putfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     512: aload         5
     514: getfield      #38                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     517: lconst_0
     518: lcmp
     519: ifne          698
     522: aload_0
     523: aload         5
     525: invokevirtual #76                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     528: getstatic     #77                 // Field org/apache/tomcat/util/net/AprEndpoint$1.$SwitchMap$org$apache$tomcat$util$net$SendfileKeepAliveState:[I
     531: aload         5
     533: getfield      #78                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.keepAliveState:Lorg/apache/tomcat/util/net/SendfileKeepAliveState;
     536: invokevirtual #79                 // Method org/apache/tomcat/util/net/SendfileKeepAliveState.ordinal:()I
     539: iaload
     540: tableswitch   { // 1 to 3
                     1: 568
                     2: 583
                     3: 645
               default: 698
          }
     568: aload_0
     569: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     572: aload         5
     574: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     577: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     580: goto          698
     583: aload         5
     585: getfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     588: invokestatic  #29                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     591: aload         5
     593: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     596: aload_0
     597: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     600: invokevirtual #10                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     603: sipush        1000
     606: imul
     607: i2l
     608: invokestatic  #36                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     611: pop
     612: aload_0
     613: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     616: aload         5
     618: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     621: getstatic     #80                 // Field org/apache/tomcat/util/net/SocketEvent.OPEN_READ:Lorg/apache/tomcat/util/net/SocketEvent;
     624: invokevirtual #81                 // Method org/apache/tomcat/util/net/AprEndpoint.processSocket:(JLorg/apache/tomcat/util/net/SocketEvent;)Z
     627: ifne          698
     630: aload_0
     631: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     634: aload         5
     636: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     639: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     642: goto          698
     645: aload         5
     647: getfield      #32                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     650: invokestatic  #29                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     653: aload         5
     655: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     658: aload_0
     659: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     662: invokevirtual #10                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     665: sipush        1000
     668: imul
     669: i2l
     670: invokestatic  #36                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     673: pop
     674: aload_0
     675: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     678: invokevirtual #82                 // Method org/apache/tomcat/util/net/AprEndpoint.getPoller:()Lorg/apache/tomcat/util/net/AprEndpoint$Poller;
     681: aload         5
     683: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     686: aload_0
     687: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     690: invokevirtual #83                 // Method org/apache/tomcat/util/net/AprEndpoint.getKeepAliveTimeout:()I
     693: i2l
     694: iconst_1
     695: invokestatic  #84                 // Method org/apache/tomcat/util/net/AprEndpoint$Poller.access$500:(Lorg/apache/tomcat/util/net/AprEndpoint$Poller;JJI)V
     698: iinc          4, 1
     701: goto          341
     704: goto          813
     707: iload_3
     708: ifge          813
     711: iload_3
     712: ineg
     713: istore        4
     715: iload         4
     717: ldc           #85                 // int 120001
     719: if_icmpeq     813
     722: iload         4
     724: ldc           #86                 // int 120003
     726: if_icmpeq     813
     729: iload         4
     731: ldc           #87                 // int 120000
     733: if_icmple     743
     736: iload         4
     738: ldc           #87                 // int 120000
     740: isub
     741: istore        4
     743: aload_0
     744: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     747: invokevirtual #62                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     750: getstatic     #46                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     753: ldc           #88                 // String endpoint.apr.pollError
     755: iconst_2
     756: anewarray     #64                 // class java/lang/Object
     759: dup
     760: iconst_0
     761: iload         4
     763: invokestatic  #65                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     766: aastore
     767: dup
     768: iconst_1
     769: iload         4
     771: invokestatic  #66                 // Method org/apache/tomcat/jni/Error.strerror:(I)Ljava/lang/String;
     774: aastore
     775: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     778: invokeinterface #89,  2           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;)V
     783: aload_0
     784: dup
     785: astore        5
     787: monitorenter
     788: aload_0
     789: invokevirtual #90                 // Method destroy:()V
     792: aload_0
     793: invokevirtual #91                 // Method init:()V
     796: aload         5
     798: monitorexit
     799: goto          810
     802: astore        8
     804: aload         5
     806: monitorexit
     807: aload         8
     809: athrow
     810: goto          2
     813: aload_0
     814: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     817: invokevirtual #10                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     820: ifle          912
     823: lload_1
     824: ldc2_w        #92                 // long 1000000l
     827: lcmp
     828: ifle          912
     831: aload_0
     832: getfield      #5                  // Field sendfileRunning:Z
     835: ifeq          912
     838: aload_0
     839: getfield      #3                  // Field sendfilePollset:J
     842: aload_0
     843: getfield      #12                 // Field desc:[J
     846: iconst_0
     847: invokestatic  #94                 // Method org/apache/tomcat/jni/Poll.maintain:(J[JZ)I
     850: istore_3
     851: lconst_0
     852: lstore_1
     853: iload_3
     854: ifle          912
     857: iconst_0
     858: istore        4
     860: iload         4
     862: iload_3
     863: if_icmpge     912
     866: aload_0
     867: getfield      #15                 // Field sendfileData:Ljava/util/HashMap;
     870: aload_0
     871: getfield      #12                 // Field desc:[J
     874: iload         4
     876: laload
     877: invokestatic  #53                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     880: invokevirtual #71                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     883: checkcast     #25                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     886: astore        5
     888: aload_0
     889: aload         5
     891: invokevirtual #76                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     894: aload_0
     895: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     898: aload         5
     900: getfield      #26                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     903: invokestatic  #27                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     906: iinc          4, 1
     909: goto          860
     912: goto          2
     915: astore_3
     916: aload_3
     917: invokestatic  #96                 // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     920: aload_0
     921: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     924: invokevirtual #62                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     927: getstatic     #46                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     930: ldc           #97                 // String endpoint.poll.error
     932: invokevirtual #48                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     935: aload_3
     936: invokeinterface #98,  3           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     941: goto          2
     944: aload_0
     945: dup
     946: astore_3
     947: monitorenter
     948: aload_0
     949: invokevirtual #99                 // Method java/lang/Object.notifyAll:()V
     952: aload_3
     953: monitorexit
     954: goto          964
     957: astore        9
     959: aload_3
     960: monitorexit
     961: aload         9
     963: athrow
     964: return
    Exception table:
       from    to  target type
          26    32    35   Class java/lang/InterruptedException
          71   103   106   any
         106   110   106   any
          67   113   116   Class java/lang/InterruptedException
         144   292   295   any
         295   299   295   any
         788   799   802   any
         802   807   802   any
         130   810   915   Class java/lang/Throwable
         813   912   915   Class java/lang/Throwable
         948   954   957   any
         957   961   957   any
}

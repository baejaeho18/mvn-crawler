Compiled from "ReactiveTypeHandler.java"
abstract class org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber implements org.reactivestreams.Subscriber<java.lang.Object>, java.lang.Runnable {
  private final org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter emitter;

  private final org.springframework.core.task.TaskExecutor taskExecutor;

  private org.reactivestreams.Subscription subscription;

  private final java.util.concurrent.atomic.AtomicReference<java.lang.Object> elementRef;

  private java.lang.Throwable error;

  private volatile boolean terminated;

  private final java.util.concurrent.atomic.AtomicLong executing;

  private volatile boolean done;

  protected org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber(org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter, org.springframework.core.task.TaskExecutor);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicReference
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicReference."<init>":()V
      12: putfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      15: aload_0
      16: new           #5                  // class java/util/concurrent/atomic/AtomicLong
      19: dup
      20: invokespecial #6                  // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      23: putfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      26: aload_0
      27: aload_1
      28: putfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      31: aload_0
      32: aload_2
      33: putfield      #9                  // Field taskExecutor:Lorg/springframework/core/task/TaskExecutor;
      36: return

  public void connect(org.springframework.core.ReactiveAdapter, java.lang.Object);
    Code:
       0: aload_1
       1: aload_2
       2: invokevirtual #10                 // Method org/springframework/core/ReactiveAdapter.toPublisher:(Ljava/lang/Object;)Lorg/reactivestreams/Publisher;
       5: astore_3
       6: aload_3
       7: aload_0
       8: invokeinterface #11,  2           // InterfaceMethod org/reactivestreams/Publisher.subscribe:(Lorg/reactivestreams/Subscriber;)V
      13: return

  protected org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter getEmitter();
    Code:
       0: aload_0
       1: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
       4: areturn

  public final void onSubscribe(org.reactivestreams.Subscription);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
       5: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
       8: invokeinterface #14,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      13: ifeq          46
      16: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      19: new           #15                 // class java/lang/StringBuilder
      22: dup
      23: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      26: ldc           #17                 // String Subscribed to Publisher for
      28: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      31: aload_0
      32: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      35: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      38: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      41: invokeinterface #21,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      46: aload_0
      47: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      50: aload_0
      51: invokedynamic #22,  0             // InvokeDynamic #0:run:(Lorg/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler$AbstractEmitterSubscriber;)Ljava/lang/Runnable;
      56: invokevirtual #23                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.onTimeout:(Ljava/lang/Runnable;)V
      59: aload_0
      60: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      63: aload_0
      64: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      67: dup
      68: invokevirtual #24                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      71: pop
      72: invokedynamic #25,  0             // InvokeDynamic #1:accept:(Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;)Ljava/util/function/Consumer;
      77: invokevirtual #26                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.onError:(Ljava/util/function/Consumer;)V
      80: aload_1
      81: lconst_1
      82: invokeinterface #27,  3           // InterfaceMethod org/reactivestreams/Subscription.request:(J)V
      87: return

  public final void onNext(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
       4: aload_1
       5: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
       8: aload_0
       9: invokespecial #29                 // Method trySchedule:()V
      12: return

  public final void onError(java.lang.Throwable);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #30                 // Field error:Ljava/lang/Throwable;
       5: aload_0
       6: iconst_1
       7: putfield      #31                 // Field terminated:Z
      10: aload_0
      11: invokespecial #29                 // Method trySchedule:()V
      14: return

  public final void onComplete();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #31                 // Field terminated:Z
       5: aload_0
       6: invokespecial #29                 // Method trySchedule:()V
       9: return

  private void trySchedule();
    Code:
       0: aload_0
       1: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #32                 // Method java/util/concurrent/atomic/AtomicLong.getAndIncrement:()J
       7: lconst_0
       8: lcmp
       9: ifne          16
      12: aload_0
      13: invokespecial #33                 // Method schedule:()V
      16: return

  private void schedule();
    Code:
       0: aload_0
       1: getfield      #9                  // Field taskExecutor:Lorg/springframework/core/task/TaskExecutor;
       4: aload_0
       5: invokeinterface #34,  2           // InterfaceMethod org/springframework/core/task/TaskExecutor.execute:(Ljava/lang/Runnable;)V
      10: goto          56
      13: astore_1
      14: aload_0
      15: invokespecial #36                 // Method terminate:()V
      18: aload_0
      19: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      22: invokevirtual #37                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
      25: pop2
      26: aload_0
      27: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      30: aconst_null
      31: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      34: goto          56
      37: astore_2
      38: aload_0
      39: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      42: invokevirtual #37                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
      45: pop2
      46: aload_0
      47: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      50: aconst_null
      51: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      54: aload_2
      55: athrow
      56: return
    Exception table:
       from    to  target type
           0    10    13   Class java/lang/Throwable
          14    18    37   any

  public void run();
    Code:
       0: aload_0
       1: getfield      #38                 // Field done:Z
       4: ifeq          16
       7: aload_0
       8: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      11: aconst_null
      12: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      15: return
      16: aload_0
      17: getfield      #31                 // Field terminated:Z
      20: istore_1
      21: aload_0
      22: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      25: invokevirtual #39                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      28: astore_2
      29: aload_2
      30: ifnull        124
      33: aload_0
      34: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      37: aconst_null
      38: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      41: aload_0
      42: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      45: ifnull        52
      48: iconst_1
      49: goto          53
      52: iconst_0
      53: ldc           #40                 // String No subscription
      55: invokestatic  #41                 // Method org/springframework/util/Assert.state:(ZLjava/lang/String;)V
      58: aload_0
      59: aload_2
      60: invokevirtual #42                 // Method send:(Ljava/lang/Object;)V
      63: aload_0
      64: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      67: lconst_1
      68: invokeinterface #27,  3           // InterfaceMethod org/reactivestreams/Subscription.request:(J)V
      73: goto          124
      76: astore_3
      77: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      80: invokeinterface #14,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      85: ifeq          119
      88: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      91: new           #15                 // class java/lang/StringBuilder
      94: dup
      95: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      98: ldc           #43                 // String Send error for
     100: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     103: aload_0
     104: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     107: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     110: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     113: aload_3
     114: invokeinterface #44,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     119: aload_0
     120: invokespecial #36                 // Method terminate:()V
     123: return
     124: iload_1
     125: ifeq          249
     128: aload_0
     129: iconst_1
     130: putfield      #38                 // Field done:Z
     133: aload_0
     134: getfield      #30                 // Field error:Ljava/lang/Throwable;
     137: astore_3
     138: aload_0
     139: aconst_null
     140: putfield      #30                 // Field error:Ljava/lang/Throwable;
     143: aload_3
     144: ifnull        200
     147: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     150: invokeinterface #14,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     155: ifeq          189
     158: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     161: new           #15                 // class java/lang/StringBuilder
     164: dup
     165: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     168: ldc           #45                 // String Publisher error for
     170: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     173: aload_0
     174: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     177: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     180: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     183: aload_3
     184: invokeinterface #44,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     189: aload_0
     190: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     193: aload_3
     194: invokevirtual #46                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.completeWithError:(Ljava/lang/Throwable;)V
     197: goto          248
     200: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     203: invokeinterface #14,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     208: ifeq          241
     211: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     214: new           #15                 // class java/lang/StringBuilder
     217: dup
     218: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     221: ldc           #47                 // String Publishing completed for
     223: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     226: aload_0
     227: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     230: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     233: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     236: invokeinterface #21,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     241: aload_0
     242: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     245: invokevirtual #48                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.complete:()V
     248: return
     249: aload_0
     250: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
     253: invokevirtual #37                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
     256: lconst_0
     257: lcmp
     258: ifeq          265
     261: aload_0
     262: invokespecial #33                 // Method schedule:()V
     265: return
    Exception table:
       from    to  target type
          58    73    76   Class java/lang/Throwable

  protected abstract void send(java.lang.Object) throws java.io.IOException;

  private void terminate();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #38                 // Field done:Z
       5: aload_0
       6: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
       9: ifnull        21
      12: aload_0
      13: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      16: invokeinterface #49,  1           // InterfaceMethod org/reactivestreams/Subscription.cancel:()V
      21: return

  private void lambda$onSubscribe$0();
    Code:
       0: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
       3: invokeinterface #14,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
       8: ifeq          41
      11: invokestatic  #13                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      14: new           #15                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #50                 // String Connection timed out for
      23: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      30: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: invokeinterface #21,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      41: aload_0
      42: invokespecial #36                 // Method terminate:()V
      45: aload_0
      46: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      49: invokevirtual #48                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.complete:()V
      52: return
}

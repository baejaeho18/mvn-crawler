Compiled from "DatabaseStartupValidator.java"
public class org.springframework.jdbc.support.DatabaseStartupValidator implements org.springframework.beans.factory.InitializingBean {
  public static final int DEFAULT_INTERVAL;

  public static final int DEFAULT_TIMEOUT;

  protected final org.apache.commons.logging.Log logger;

  private javax.sql.DataSource dataSource;

  private java.lang.String validationQuery;

  private int interval;

  private int timeout;

  public org.springframework.jdbc.support.DatabaseStartupValidator();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_0
       6: invokevirtual #2                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
       9: invokestatic  #3                  // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
      12: putfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
      15: aload_0
      16: iconst_1
      17: putfield      #6                  // Field interval:I
      20: aload_0
      21: bipush        60
      23: putfield      #7                  // Field timeout:I
      26: return

  public void setDataSource(javax.sql.DataSource);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #8                  // Field dataSource:Ljavax/sql/DataSource;
       5: return

  public void setValidationQuery(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #9                  // Field validationQuery:Ljava/lang/String;
       5: return

  public void setInterval(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #6                  // Field interval:I
       5: return

  public void setTimeout(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #7                  // Field timeout:I
       5: return

  public void afterPropertiesSet();
    Code:
       0: aload_0
       1: getfield      #8                  // Field dataSource:Ljavax/sql/DataSource;
       4: astore_1
       5: aload_1
       6: ifnonnull     19
       9: new           #10                 // class java/lang/IllegalArgumentException
      12: dup
      13: ldc           #11                 // String Property \'dataSource\' is required
      15: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      18: athrow
      19: aload_0
      20: getfield      #9                  // Field validationQuery:Ljava/lang/String;
      23: ifnonnull     36
      26: new           #10                 // class java/lang/IllegalArgumentException
      29: dup
      30: ldc           #13                 // String Property \'validationQuery\' is required
      32: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      35: athrow
      36: iconst_0
      37: istore_2
      38: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
      41: lstore_3
      42: lload_3
      43: getstatic     #15                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
      46: aload_0
      47: getfield      #7                  // Field timeout:I
      50: i2l
      51: invokevirtual #16                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      54: ladd
      55: lstore        5
      57: aconst_null
      58: astore        7
      60: iload_2
      61: ifne          341
      64: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
      67: lload         5
      69: lcmp
      70: ifge          341
      73: aconst_null
      74: astore        8
      76: aconst_null
      77: astore        9
      79: aload_1
      80: invokeinterface #17,  1           // InterfaceMethod javax/sql/DataSource.getConnection:()Ljava/sql/Connection;
      85: astore        8
      87: aload         8
      89: ifnonnull     119
      92: new           #18                 // class org/springframework/jdbc/CannotGetJdbcConnectionException
      95: dup
      96: new           #19                 // class java/lang/StringBuilder
      99: dup
     100: invokespecial #20                 // Method java/lang/StringBuilder."<init>":()V
     103: ldc           #21                 // String Failed to execute validation query: DataSource returned null from getConnection():
     105: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     108: aload_1
     109: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     112: invokevirtual #24                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     115: invokespecial #25                 // Method org/springframework/jdbc/CannotGetJdbcConnectionException."<init>":(Ljava/lang/String;)V
     118: athrow
     119: aload         8
     121: invokeinterface #26,  1           // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
     126: astore        9
     128: aload         9
     130: aload_0
     131: getfield      #9                  // Field validationQuery:Ljava/lang/String;
     134: invokeinterface #27,  2           // InterfaceMethod java/sql/Statement.execute:(Ljava/lang/String;)Z
     139: pop
     140: iconst_1
     141: istore_2
     142: aload         9
     144: invokestatic  #28                 // Method org/springframework/jdbc/support/JdbcUtils.closeStatement:(Ljava/sql/Statement;)V
     147: aload         8
     149: invokestatic  #29                 // Method org/springframework/jdbc/support/JdbcUtils.closeConnection:(Ljava/sql/Connection;)V
     152: goto          320
     155: astore        10
     157: aload         10
     159: astore        7
     161: aload_0
     162: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     165: invokeinterface #31,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     170: ifeq          211
     173: aload_0
     174: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     177: new           #19                 // class java/lang/StringBuilder
     180: dup
     181: invokespecial #20                 // Method java/lang/StringBuilder."<init>":()V
     184: ldc           #32                 // String Validation query [
     186: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     189: aload_0
     190: getfield      #9                  // Field validationQuery:Ljava/lang/String;
     193: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     196: ldc           #33                 // String ] threw exception
     198: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     201: invokevirtual #24                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     204: aload         10
     206: invokeinterface #34,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     211: aload_0
     212: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     215: invokeinterface #35,  1           // InterfaceMethod org/apache/commons/logging/Log.isWarnEnabled:()Z
     220: ifeq          292
     223: lload         5
     225: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
     228: lsub
     229: l2f
     230: ldc           #36                 // float 1000.0f
     232: fdiv
     233: fstore        11
     235: fload         11
     237: aload_0
     238: getfield      #6                  // Field interval:I
     241: i2f
     242: fcmpl
     243: ifle          292
     246: aload_0
     247: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     250: new           #19                 // class java/lang/StringBuilder
     253: dup
     254: invokespecial #20                 // Method java/lang/StringBuilder."<init>":()V
     257: ldc           #37                 // String Database has not started up yet - retrying in
     259: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     262: aload_0
     263: getfield      #6                  // Field interval:I
     266: invokevirtual #38                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     269: ldc           #39                 // String  seconds (timeout in
     271: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     274: fload         11
     276: invokevirtual #40                 // Method java/lang/StringBuilder.append:(F)Ljava/lang/StringBuilder;
     279: ldc           #41                 // String  seconds)
     281: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     284: invokevirtual #24                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     287: invokeinterface #42,  2           // InterfaceMethod org/apache/commons/logging/Log.warn:(Ljava/lang/Object;)V
     292: aload         9
     294: invokestatic  #28                 // Method org/springframework/jdbc/support/JdbcUtils.closeStatement:(Ljava/sql/Statement;)V
     297: aload         8
     299: invokestatic  #29                 // Method org/springframework/jdbc/support/JdbcUtils.closeConnection:(Ljava/sql/Connection;)V
     302: goto          320
     305: astore        12
     307: aload         9
     309: invokestatic  #28                 // Method org/springframework/jdbc/support/JdbcUtils.closeStatement:(Ljava/sql/Statement;)V
     312: aload         8
     314: invokestatic  #29                 // Method org/springframework/jdbc/support/JdbcUtils.closeConnection:(Ljava/sql/Connection;)V
     317: aload         12
     319: athrow
     320: iload_2
     321: ifne          338
     324: getstatic     #15                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     327: aload_0
     328: getfield      #6                  // Field interval:I
     331: i2l
     332: invokevirtual #16                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
     335: invokestatic  #43                 // Method java/lang/Thread.sleep:(J)V
     338: goto          60
     341: iload_2
     342: ifne          382
     345: new           #18                 // class org/springframework/jdbc/CannotGetJdbcConnectionException
     348: dup
     349: new           #19                 // class java/lang/StringBuilder
     352: dup
     353: invokespecial #20                 // Method java/lang/StringBuilder."<init>":()V
     356: ldc           #44                 // String Database has not started up within
     358: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     361: aload_0
     362: getfield      #7                  // Field timeout:I
     365: invokevirtual #38                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     368: ldc           #45                 // String  seconds
     370: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     373: invokevirtual #24                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     376: aload         7
     378: invokespecial #46                 // Method org/springframework/jdbc/CannotGetJdbcConnectionException."<init>":(Ljava/lang/String;Ljava/sql/SQLException;)V
     381: athrow
     382: aload_0
     383: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     386: invokeinterface #47,  1           // InterfaceMethod org/apache/commons/logging/Log.isInfoEnabled:()Z
     391: ifeq          439
     394: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
     397: lload_3
     398: lsub
     399: l2f
     400: ldc           #36                 // float 1000.0f
     402: fdiv
     403: fstore        8
     405: aload_0
     406: getfield      #4                  // Field logger:Lorg/apache/commons/logging/Log;
     409: new           #19                 // class java/lang/StringBuilder
     412: dup
     413: invokespecial #20                 // Method java/lang/StringBuilder."<init>":()V
     416: ldc           #48                 // String Database startup detected after
     418: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     421: fload         8
     423: invokevirtual #40                 // Method java/lang/StringBuilder.append:(F)Ljava/lang/StringBuilder;
     426: ldc           #45                 // String  seconds
     428: invokevirtual #22                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     431: invokevirtual #24                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     434: invokeinterface #49,  2           // InterfaceMethod org/apache/commons/logging/Log.info:(Ljava/lang/Object;)V
     439: goto          449
     442: astore_2
     443: invokestatic  #51                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     446: invokevirtual #52                 // Method java/lang/Thread.interrupt:()V
     449: return
    Exception table:
       from    to  target type
          79   142   155   Class java/sql/SQLException
          79   142   305   any
         155   292   305   any
         305   307   305   any
          36   439   442   Class java/lang/InterruptedException
}

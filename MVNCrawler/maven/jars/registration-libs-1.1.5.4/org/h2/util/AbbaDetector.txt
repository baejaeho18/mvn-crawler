Compiled from "AbbaDetector.java"
public class org.h2.util.AbbaDetector {
  private static final boolean TRACE;

  private static final java.lang.ThreadLocal<java.util.Deque<java.lang.Object>> STACK;

  private static final java.util.Map<java.lang.Object, java.util.Map<java.lang.Object, java.lang.Exception>> LOCK_ORDERING;

  private static final java.util.Set<java.lang.String> KNOWN_DEADLOCKS;

  public org.h2.util.AbbaDetector();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static java.lang.Object begin(java.lang.Object);
    Code:
       0: aload_0
       1: ifnonnull     15
       4: new           #2                  // class org/h2/util/AbbaDetector$2
       7: dup
       8: invokespecial #3                  // Method org/h2/util/AbbaDetector$2."<init>":()V
      11: getfield      #4                  // Field org/h2/util/AbbaDetector$2.clazz:Ljava/lang/Class;
      14: astore_0
      15: getstatic     #5                  // Field STACK:Ljava/lang/ThreadLocal;
      18: invokevirtual #6                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      21: checkcast     #7                  // class java/util/Deque
      24: astore_1
      25: aload_1
      26: invokeinterface #8,  1            // InterfaceMethod java/util/Deque.isEmpty:()Z
      31: ifne          82
      34: aload_1
      35: aload_0
      36: invokeinterface #9,  2            // InterfaceMethod java/util/Deque.contains:(Ljava/lang/Object;)Z
      41: ifeq          46
      44: aload_0
      45: areturn
      46: aload_1
      47: invokeinterface #8,  1            // InterfaceMethod java/util/Deque.isEmpty:()Z
      52: ifne          82
      55: aload_1
      56: invokeinterface #10,  1           // InterfaceMethod java/util/Deque.peek:()Ljava/lang/Object;
      61: astore_2
      62: aload_2
      63: invokestatic  #11                 // Method java/lang/Thread.holdsLock:(Ljava/lang/Object;)Z
      66: ifeq          72
      69: goto          82
      72: aload_1
      73: invokeinterface #12,  1           // InterfaceMethod java/util/Deque.pop:()Ljava/lang/Object;
      78: pop
      79: goto          46
      82: aload_1
      83: invokeinterface #8,  1            // InterfaceMethod java/util/Deque.isEmpty:()Z
      88: ifne          96
      91: aload_0
      92: aload_1
      93: invokestatic  #13                 // Method markHigher:(Ljava/lang/Object;Ljava/util/Deque;)V
      96: aload_1
      97: aload_0
      98: invokeinterface #14,  2           // InterfaceMethod java/util/Deque.push:(Ljava/lang/Object;)V
     103: aload_0
     104: areturn

  private static java.lang.Object getTest(java.lang.Object);
    Code:
       0: aload_0
       1: areturn

  private static java.lang.String getObjectName(java.lang.Object);
    Code:
       0: new           #15                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
       7: aload_0
       8: invokevirtual #17                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      11: invokevirtual #18                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      14: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      17: ldc           #20                 // String @
      19: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: aload_0
      23: invokestatic  #21                 // Method java/lang/System.identityHashCode:(Ljava/lang/Object;)I
      26: invokevirtual #22                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      29: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      32: areturn

  private static synchronized void markHigher(java.lang.Object, java.util.Deque<java.lang.Object>);
    Code:
       0: aload_0
       1: invokestatic  #24                 // Method getTest:(Ljava/lang/Object;)Ljava/lang/Object;
       4: astore_2
       5: getstatic     #25                 // Field LOCK_ORDERING:Ljava/util/Map;
       8: aload_2
       9: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: checkcast     #27                 // class java/util/Map
      17: astore_3
      18: aload_3
      19: ifnonnull     41
      22: new           #28                 // class java/util/WeakHashMap
      25: dup
      26: invokespecial #29                 // Method java/util/WeakHashMap."<init>":()V
      29: astore_3
      30: getstatic     #25                 // Field LOCK_ORDERING:Ljava/util/Map;
      33: aload_2
      34: aload_3
      35: invokeinterface #30,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      40: pop
      41: aconst_null
      42: astore        4
      44: aload_1
      45: invokeinterface #31,  1           // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
      50: astore        5
      52: aload         5
      54: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      59: ifeq          286
      62: aload         5
      64: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      69: astore        6
      71: aload         6
      73: invokestatic  #24                 // Method getTest:(Ljava/lang/Object;)Ljava/lang/Object;
      76: astore        7
      78: aload         7
      80: aload_2
      81: if_acmpne     87
      84: goto          52
      87: getstatic     #25                 // Field LOCK_ORDERING:Ljava/util/Map;
      90: aload         7
      92: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      97: checkcast     #27                 // class java/util/Map
     100: astore        8
     102: aload         8
     104: ifnull        245
     107: aload         8
     109: aload_2
     110: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     115: checkcast     #34                 // class java/lang/Exception
     118: astore        9
     120: aload         9
     122: ifnull        245
     125: new           #15                 // class java/lang/StringBuilder
     128: dup
     129: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     132: aload_2
     133: invokevirtual #17                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     136: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     139: ldc           #36                 // String
     141: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: aload         7
     146: invokevirtual #17                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     149: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     152: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     155: astore        10
     157: getstatic     #37                 // Field KNOWN_DEADLOCKS:Ljava/util/Set;
     160: aload         10
     162: invokeinterface #38,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     167: ifne          245
     170: new           #15                 // class java/lang/StringBuilder
     173: dup
     174: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     177: aload_2
     178: invokestatic  #39                 // Method getObjectName:(Ljava/lang/Object;)Ljava/lang/String;
     181: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     184: ldc           #40                 // String  synchronized after \n
     186: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     189: aload         7
     191: invokestatic  #39                 // Method getObjectName:(Ljava/lang/Object;)Ljava/lang/String;
     194: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     197: ldc           #41                 // String , but in the past before
     199: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     202: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     205: astore        11
     207: new           #42                 // class java/lang/RuntimeException
     210: dup
     211: aload         11
     213: invokespecial #43                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
     216: astore        12
     218: aload         12
     220: aload         9
     222: invokevirtual #44                 // Method java/lang/RuntimeException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     225: pop
     226: aload         12
     228: getstatic     #45                 // Field java/lang/System.out:Ljava/io/PrintStream;
     231: invokevirtual #46                 // Method java/lang/RuntimeException.printStackTrace:(Ljava/io/PrintStream;)V
     234: getstatic     #37                 // Field KNOWN_DEADLOCKS:Ljava/util/Set;
     237: aload         10
     239: invokeinterface #47,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     244: pop
     245: aload_3
     246: aload         7
     248: invokeinterface #48,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     253: ifne          283
     256: aload         4
     258: ifnonnull     272
     261: new           #34                 // class java/lang/Exception
     264: dup
     265: ldc           #49                 // String Before
     267: invokespecial #50                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     270: astore        4
     272: aload_3
     273: aload         7
     275: aload         4
     277: invokeinterface #30,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     282: pop
     283: goto          52
     286: return

  static {};
    Code:
       0: new           #51                 // class org/h2/util/AbbaDetector$1
       3: dup
       4: invokespecial #52                 // Method org/h2/util/AbbaDetector$1."<init>":()V
       7: putstatic     #5                  // Field STACK:Ljava/lang/ThreadLocal;
      10: new           #28                 // class java/util/WeakHashMap
      13: dup
      14: invokespecial #29                 // Method java/util/WeakHashMap."<init>":()V
      17: putstatic     #25                 // Field LOCK_ORDERING:Ljava/util/Map;
      20: new           #53                 // class java/util/HashSet
      23: dup
      24: invokespecial #54                 // Method java/util/HashSet."<init>":()V
      27: putstatic     #37                 // Field KNOWN_DEADLOCKS:Ljava/util/Set;
      30: return
}

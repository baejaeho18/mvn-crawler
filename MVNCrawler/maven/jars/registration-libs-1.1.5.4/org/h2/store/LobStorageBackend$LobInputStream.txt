Compiled from "LobStorageBackend.java"
public class org.h2.store.LobStorageBackend$LobInputStream extends java.io.InputStream {
  private final long[] lobMapBlocks;

  private int lobMapIndex;

  private long remainingBytes;

  private byte[] buffer;

  private int bufferPos;

  final org.h2.store.LobStorageBackend this$0;

  public org.h2.store.LobStorageBackend$LobInputStream(org.h2.store.LobStorageBackend, long, long) throws java.sql.SQLException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/h2/store/LobStorageBackend;
       5: aload_0
       6: invokespecial #2                  // Method java/io/InputStream."<init>":()V
       9: aload_1
      10: getfield      #3                  // Field org/h2/store/LobStorageBackend.conn:Lorg/h2/jdbc/JdbcConnection;
      13: invokevirtual #4                  // Method org/h2/jdbc/JdbcConnection.getSession:()Lorg/h2/engine/SessionInterface;
      16: invokestatic  #5                  // Method org/h2/store/LobStorageBackend.assertHoldsLock:(Ljava/lang/Object;)V
      19: aload_1
      20: getfield      #6                  // Field org/h2/store/LobStorageBackend.database:Lorg/h2/engine/Database;
      23: invokestatic  #5                  // Method org/h2/store/LobStorageBackend.assertHoldsLock:(Ljava/lang/Object;)V
      26: lload         4
      28: ldc2_w        #7                  // long -1l
      31: lcmp
      32: ifne          121
      35: ldc           #9                  // String SELECT BYTE_COUNT FROM INFORMATION_SCHEMA.LOBS WHERE ID = ?
      37: astore        6
      39: aload_1
      40: aload         6
      42: invokevirtual #10                 // Method org/h2/store/LobStorageBackend.prepare:(Ljava/lang/String;)Ljava/sql/PreparedStatement;
      45: astore        7
      47: aload         7
      49: iconst_1
      50: lload_2
      51: invokeinterface #11,  4           // InterfaceMethod java/sql/PreparedStatement.setLong:(IJ)V
      56: aload         7
      58: invokeinterface #12,  1           // InterfaceMethod java/sql/PreparedStatement.executeQuery:()Ljava/sql/ResultSet;
      63: astore        8
      65: aload         8
      67: invokeinterface #13,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
      72: ifne          103
      75: ldc           #14                 // int 90028
      77: new           #15                 // class java/lang/StringBuilder
      80: dup
      81: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      84: ldc           #17                 // String Missing lob entry:
      86: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: lload_2
      90: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      93: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      96: invokestatic  #21                 // Method org/h2/message/DbException.get:(ILjava/lang/String;)Lorg/h2/message/DbException;
      99: invokevirtual #22                 // Method org/h2/message/DbException.getSQLException:()Ljava/sql/SQLException;
     102: athrow
     103: aload         8
     105: iconst_1
     106: invokeinterface #23,  2           // InterfaceMethod java/sql/ResultSet.getLong:(I)J
     111: lstore        4
     113: aload_1
     114: aload         6
     116: aload         7
     118: invokevirtual #24                 // Method org/h2/store/LobStorageBackend.reuse:(Ljava/lang/String;Ljava/sql/PreparedStatement;)V
     121: aload_0
     122: lload         4
     124: putfield      #25                 // Field remainingBytes:J
     127: ldc           #26                 // String SELECT COUNT(*) FROM INFORMATION_SCHEMA.LOB_MAP WHERE LOB = ?
     129: astore        6
     131: aload_1
     132: aload         6
     134: invokevirtual #10                 // Method org/h2/store/LobStorageBackend.prepare:(Ljava/lang/String;)Ljava/sql/PreparedStatement;
     137: astore        7
     139: aload         7
     141: iconst_1
     142: lload_2
     143: invokeinterface #11,  4           // InterfaceMethod java/sql/PreparedStatement.setLong:(IJ)V
     148: aload         7
     150: invokeinterface #12,  1           // InterfaceMethod java/sql/PreparedStatement.executeQuery:()Ljava/sql/ResultSet;
     155: astore        8
     157: aload         8
     159: invokeinterface #13,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     164: pop
     165: aload         8
     167: iconst_1
     168: invokeinterface #27,  2           // InterfaceMethod java/sql/ResultSet.getInt:(I)I
     173: istore        9
     175: iload         9
     177: ifne          208
     180: ldc           #14                 // int 90028
     182: new           #15                 // class java/lang/StringBuilder
     185: dup
     186: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     189: ldc           #17                 // String Missing lob entry:
     191: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     194: lload_2
     195: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     198: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     201: invokestatic  #21                 // Method org/h2/message/DbException.get:(ILjava/lang/String;)Lorg/h2/message/DbException;
     204: invokevirtual #22                 // Method org/h2/message/DbException.getSQLException:()Ljava/sql/SQLException;
     207: athrow
     208: aload_1
     209: aload         6
     211: aload         7
     213: invokevirtual #24                 // Method org/h2/store/LobStorageBackend.reuse:(Ljava/lang/String;Ljava/sql/PreparedStatement;)V
     216: aload_0
     217: iload         9
     219: newarray       long
     221: putfield      #28                 // Field lobMapBlocks:[J
     224: ldc           #29                 // String SELECT BLOCK FROM INFORMATION_SCHEMA.LOB_MAP WHERE LOB = ? ORDER BY SEQ
     226: astore        6
     228: aload_1
     229: aload         6
     231: invokevirtual #10                 // Method org/h2/store/LobStorageBackend.prepare:(Ljava/lang/String;)Ljava/sql/PreparedStatement;
     234: astore        7
     236: aload         7
     238: iconst_1
     239: lload_2
     240: invokeinterface #11,  4           // InterfaceMethod java/sql/PreparedStatement.setLong:(IJ)V
     245: aload         7
     247: invokeinterface #12,  1           // InterfaceMethod java/sql/PreparedStatement.executeQuery:()Ljava/sql/ResultSet;
     252: astore        8
     254: iconst_0
     255: istore        10
     257: aload         8
     259: invokeinterface #13,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     264: ifeq          288
     267: aload_0
     268: getfield      #28                 // Field lobMapBlocks:[J
     271: iload         10
     273: aload         8
     275: iconst_1
     276: invokeinterface #23,  2           // InterfaceMethod java/sql/ResultSet.getLong:(I)J
     281: lastore
     282: iinc          10, 1
     285: goto          257
     288: aload_1
     289: aload         6
     291: aload         7
     293: invokevirtual #24                 // Method org/h2/store/LobStorageBackend.reuse:(Ljava/lang/String;Ljava/sql/PreparedStatement;)V
     296: return

  public int read() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #30                 // Method fillBuffer:()V
       4: aload_0
       5: getfield      #25                 // Field remainingBytes:J
       8: lconst_0
       9: lcmp
      10: ifgt          15
      13: iconst_m1
      14: ireturn
      15: aload_0
      16: dup
      17: getfield      #25                 // Field remainingBytes:J
      20: lconst_1
      21: lsub
      22: putfield      #25                 // Field remainingBytes:J
      25: aload_0
      26: getfield      #31                 // Field buffer:[B
      29: aload_0
      30: dup
      31: getfield      #32                 // Field bufferPos:I
      34: dup_x1
      35: iconst_1
      36: iadd
      37: putfield      #32                 // Field bufferPos:I
      40: baload
      41: sipush        255
      44: iand
      45: ireturn

  public long skip(long) throws java.io.IOException;
    Code:
       0: lload_1
       1: lconst_0
       2: lcmp
       3: ifgt          8
       6: lconst_0
       7: lreturn
       8: lload_1
       9: lstore_3
      10: lload_3
      11: aload_0
      12: lload_3
      13: invokespecial #33                 // Method skipSmall:(J)I
      16: i2l
      17: lsub
      18: lstore_3
      19: lload_3
      20: ldc2_w        #34                 // long 20000l
      23: lcmp
      24: ifle          76
      27: lload_3
      28: ldc2_w        #34                 // long 20000l
      31: lcmp
      32: ifle          66
      35: lload_3
      36: ldc2_w        #34                 // long 20000l
      39: lsub
      40: lstore_3
      41: aload_0
      42: dup
      43: getfield      #25                 // Field remainingBytes:J
      46: ldc2_w        #34                 // long 20000l
      49: lsub
      50: putfield      #25                 // Field remainingBytes:J
      53: aload_0
      54: dup
      55: getfield      #36                 // Field lobMapIndex:I
      58: iconst_1
      59: iadd
      60: putfield      #36                 // Field lobMapIndex:I
      63: goto          27
      66: aload_0
      67: iconst_0
      68: putfield      #32                 // Field bufferPos:I
      71: aload_0
      72: aconst_null
      73: putfield      #31                 // Field buffer:[B
      76: aload_0
      77: invokespecial #30                 // Method fillBuffer:()V
      80: lload_3
      81: aload_0
      82: lload_3
      83: invokespecial #33                 // Method skipSmall:(J)I
      86: i2l
      87: lsub
      88: lstore_3
      89: lload_3
      90: aload_0
      91: lload_3
      92: invokespecial #37                 // Method java/io/InputStream.skip:(J)J
      95: lsub
      96: lstore_3
      97: lload_1
      98: lload_3
      99: lsub
     100: lreturn

  private int skipSmall(long);
    Code:
       0: aload_0
       1: getfield      #31                 // Field buffer:[B
       4: ifnull        61
       7: aload_0
       8: getfield      #32                 // Field bufferPos:I
      11: aload_0
      12: getfield      #31                 // Field buffer:[B
      15: arraylength
      16: if_icmpge     61
      19: lload_1
      20: aload_0
      21: getfield      #31                 // Field buffer:[B
      24: arraylength
      25: aload_0
      26: getfield      #32                 // Field bufferPos:I
      29: isub
      30: i2l
      31: invokestatic  #38                 // Method java/lang/Math.min:(JJ)J
      34: invokestatic  #39                 // Method org/h2/util/MathUtils.convertLongToInt:(J)I
      37: istore_3
      38: aload_0
      39: dup
      40: getfield      #32                 // Field bufferPos:I
      43: iload_3
      44: iadd
      45: putfield      #32                 // Field bufferPos:I
      48: aload_0
      49: dup
      50: getfield      #25                 // Field remainingBytes:J
      53: iload_3
      54: i2l
      55: lsub
      56: putfield      #25                 // Field remainingBytes:J
      59: iload_3
      60: ireturn
      61: iconst_0
      62: ireturn

  public int available() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #25                 // Field remainingBytes:J
       4: invokestatic  #39                 // Method org/h2/util/MathUtils.convertLongToInt:(J)I
       7: ireturn

  public int read(byte[]) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: aload_1
       4: arraylength
       5: invokespecial #40                 // Method readFully:([BII)I
       8: ireturn

  public int read(byte[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: iload_3
       4: invokespecial #40                 // Method readFully:([BII)I
       7: ireturn

  private int readFully(byte[], int, int) throws java.io.IOException;
    Code:
       0: iload_3
       1: ifne          6
       4: iconst_0
       5: ireturn
       6: iconst_0
       7: istore        4
       9: iload_3
      10: ifle          116
      13: aload_0
      14: invokespecial #30                 // Method fillBuffer:()V
      17: aload_0
      18: getfield      #25                 // Field remainingBytes:J
      21: lconst_0
      22: lcmp
      23: ifgt          29
      26: goto          116
      29: iload_3
      30: i2l
      31: aload_0
      32: getfield      #25                 // Field remainingBytes:J
      35: invokestatic  #38                 // Method java/lang/Math.min:(JJ)J
      38: l2i
      39: istore        5
      41: iload         5
      43: aload_0
      44: getfield      #31                 // Field buffer:[B
      47: arraylength
      48: aload_0
      49: getfield      #32                 // Field bufferPos:I
      52: isub
      53: invokestatic  #41                 // Method java/lang/Math.min:(II)I
      56: istore        5
      58: aload_0
      59: getfield      #31                 // Field buffer:[B
      62: aload_0
      63: getfield      #32                 // Field bufferPos:I
      66: aload_1
      67: iload_2
      68: iload         5
      70: invokestatic  #42                 // Method java/lang/System.arraycopy:(Ljava/lang/Object;ILjava/lang/Object;II)V
      73: aload_0
      74: dup
      75: getfield      #32                 // Field bufferPos:I
      78: iload         5
      80: iadd
      81: putfield      #32                 // Field bufferPos:I
      84: iload         4
      86: iload         5
      88: iadd
      89: istore        4
      91: aload_0
      92: dup
      93: getfield      #25                 // Field remainingBytes:J
      96: iload         5
      98: i2l
      99: lsub
     100: putfield      #25                 // Field remainingBytes:J
     103: iload_2
     104: iload         5
     106: iadd
     107: istore_2
     108: iload_3
     109: iload         5
     111: isub
     112: istore_3
     113: goto          9
     116: iload         4
     118: ifne          125
     121: iconst_m1
     122: goto          127
     125: iload         4
     127: ireturn

  private void fillBuffer() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #31                 // Field buffer:[B
       4: ifnull        20
       7: aload_0
       8: getfield      #32                 // Field bufferPos:I
      11: aload_0
      12: getfield      #31                 // Field buffer:[B
      15: arraylength
      16: if_icmpge     20
      19: return
      20: aload_0
      21: getfield      #25                 // Field remainingBytes:J
      24: lconst_0
      25: lcmp
      26: ifgt          30
      29: return
      30: aload_0
      31: getfield      #36                 // Field lobMapIndex:I
      34: aload_0
      35: getfield      #28                 // Field lobMapBlocks:[J
      38: arraylength
      39: if_icmplt     50
      42: getstatic     #43                 // Field java/lang/System.out:Ljava/io/PrintStream;
      45: ldc           #44                 // String halt!
      47: invokevirtual #45                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      50: aload_0
      51: aload_0
      52: getfield      #1                  // Field this$0:Lorg/h2/store/LobStorageBackend;
      55: aload_0
      56: getfield      #28                 // Field lobMapBlocks:[J
      59: aload_0
      60: getfield      #36                 // Field lobMapIndex:I
      63: laload
      64: invokevirtual #46                 // Method org/h2/store/LobStorageBackend.readBlock:(J)[B
      67: putfield      #31                 // Field buffer:[B
      70: aload_0
      71: dup
      72: getfield      #36                 // Field lobMapIndex:I
      75: iconst_1
      76: iadd
      77: putfield      #36                 // Field lobMapIndex:I
      80: aload_0
      81: iconst_0
      82: putfield      #32                 // Field bufferPos:I
      85: goto          94
      88: astore_1
      89: aload_1
      90: invokestatic  #48                 // Method org/h2/message/DbException.convertToIOException:(Ljava/lang/Throwable;)Ljava/io/IOException;
      93: athrow
      94: return
    Exception table:
       from    to  target type
          50    85    88   Class java/sql/SQLException
}

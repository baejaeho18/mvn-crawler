Compiled from "FilePathEncrypt.java"
public class org.h2.store.fs.FilePathEncrypt$FileEncrypt extends org.h2.store.fs.FileBase {
  static final int BLOCK_SIZE;

  static final int BLOCK_SIZE_MASK;

  static final int HEADER_LENGTH;

  private static final byte[] HEADER;

  private static final int SALT_POS;

  private static final int SALT_LENGTH;

  private static final int HASH_ITERATIONS;

  private final java.nio.channels.FileChannel base;

  private long pos;

  private long size;

  private final java.lang.String name;

  private org.h2.store.fs.FilePathEncrypt$XTS xts;

  private byte[] encryptionKey;

  public org.h2.store.fs.FilePathEncrypt$FileEncrypt(java.lang.String, byte[], java.nio.channels.FileChannel);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/h2/store/fs/FileBase."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field name:Ljava/lang/String;
       9: aload_0
      10: aload_3
      11: putfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      14: aload_0
      15: aload_2
      16: putfield      #4                  // Field encryptionKey:[B
      19: return

  private void init() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field xts:Lorg/h2/store/fs/FilePathEncrypt$XTS;
       4: ifnull        8
       7: return
       8: aload_0
       9: aload_0
      10: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      13: invokevirtual #6                  // Method java/nio/channels/FileChannel.size:()J
      16: ldc2_w        #7                  // long 4096l
      19: lsub
      20: putfield      #9                  // Field size:J
      23: aload_0
      24: getfield      #9                  // Field size:J
      27: lconst_0
      28: lcmp
      29: ifge          36
      32: iconst_1
      33: goto          37
      36: iconst_0
      37: istore_1
      38: iload_1
      39: ifeq          89
      42: getstatic     #10                 // Field HEADER:[B
      45: sipush        4096
      48: invokestatic  #11                 // Method java/util/Arrays.copyOf:([BI)[B
      51: astore_3
      52: bipush        8
      54: invokestatic  #12                 // Method org/h2/util/MathUtils.secureRandomBytes:(I)[B
      57: astore_2
      58: aload_2
      59: iconst_0
      60: aload_3
      61: getstatic     #13                 // Field SALT_POS:I
      64: aload_2
      65: arraylength
      66: invokestatic  #14                 // Method java/lang/System.arraycopy:(Ljava/lang/Object;ILjava/lang/Object;II)V
      69: aload_0
      70: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      73: lconst_0
      74: aload_3
      75: invokestatic  #15                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      78: invokestatic  #16                 // Method writeFully:(Ljava/nio/channels/FileChannel;JLjava/nio/ByteBuffer;)V
      81: aload_0
      82: lconst_0
      83: putfield      #9                  // Field size:J
      86: goto          134
      89: bipush        8
      91: newarray       byte
      93: astore_2
      94: aload_0
      95: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      98: getstatic     #13                 // Field SALT_POS:I
     101: i2l
     102: aload_2
     103: invokestatic  #15                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     106: invokestatic  #17                 // Method readFully:(Ljava/nio/channels/FileChannel;JLjava/nio/ByteBuffer;)V
     109: aload_0
     110: getfield      #9                  // Field size:J
     113: ldc2_w        #18                 // long 4095l
     116: land
     117: lconst_0
     118: lcmp
     119: ifeq          134
     122: aload_0
     123: dup
     124: getfield      #9                  // Field size:J
     127: ldc2_w        #7                  // long 4096l
     130: lsub
     131: putfield      #9                  // Field size:J
     134: new           #20                 // class org/h2/security/AES
     137: dup
     138: invokespecial #21                 // Method org/h2/security/AES."<init>":()V
     141: astore_3
     142: aload_3
     143: aload_0
     144: getfield      #4                  // Field encryptionKey:[B
     147: aload_2
     148: bipush        10
     150: bipush        16
     152: invokestatic  #22                 // Method org/h2/security/SHA256.getPBKDF2:([B[BII)[B
     155: invokevirtual #23                 // Method org/h2/security/AES.setKey:([B)V
     158: aload_0
     159: aconst_null
     160: putfield      #4                  // Field encryptionKey:[B
     163: aload_0
     164: new           #24                 // class org/h2/store/fs/FilePathEncrypt$XTS
     167: dup
     168: aload_3
     169: invokespecial #25                 // Method org/h2/store/fs/FilePathEncrypt$XTS."<init>":(Lorg/h2/security/BlockCipher;)V
     172: putfield      #5                  // Field xts:Lorg/h2/store/fs/FilePathEncrypt$XTS;
     175: return

  protected void implCloseChannel() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
       4: invokevirtual #26                 // Method java/nio/channels/FileChannel.close:()V
       7: return

  public java.nio.channels.FileChannel position(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #27                 // Field pos:J
       5: aload_0
       6: areturn

  public long position() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #27                 // Field pos:J
       4: lreturn

  public int read(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_0
       3: getfield      #27                 // Field pos:J
       6: invokevirtual #28                 // Method read:(Ljava/nio/ByteBuffer;J)I
       9: istore_2
      10: iload_2
      11: ifle          25
      14: aload_0
      15: dup
      16: getfield      #27                 // Field pos:J
      19: iload_2
      20: i2l
      21: ladd
      22: putfield      #27                 // Field pos:J
      25: iload_2
      26: ireturn

  public int read(java.nio.ByteBuffer, long) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #29                 // Method java/nio/ByteBuffer.remaining:()I
       4: istore        4
       6: iload         4
       8: ifne          13
      11: iconst_0
      12: ireturn
      13: aload_0
      14: invokespecial #30                 // Method init:()V
      17: iload         4
      19: i2l
      20: aload_0
      21: getfield      #9                  // Field size:J
      24: lload_2
      25: lsub
      26: invokestatic  #31                 // Method java/lang/Math.min:(JJ)J
      29: l2i
      30: istore        4
      32: lload_2
      33: aload_0
      34: getfield      #9                  // Field size:J
      37: lcmp
      38: iflt          43
      41: iconst_m1
      42: ireturn
      43: lload_2
      44: lconst_0
      45: lcmp
      46: ifge          76
      49: new           #32                 // class java/lang/IllegalArgumentException
      52: dup
      53: new           #33                 // class java/lang/StringBuilder
      56: dup
      57: invokespecial #34                 // Method java/lang/StringBuilder."<init>":()V
      60: ldc           #35                 // String pos:
      62: invokevirtual #36                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: lload_2
      66: invokevirtual #37                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      69: invokevirtual #38                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      72: invokespecial #39                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      75: athrow
      76: lload_2
      77: ldc2_w        #18                 // long 4095l
      80: land
      81: lconst_0
      82: lcmp
      83: ifne          95
      86: iload         4
      88: sipush        4095
      91: iand
      92: ifeq          186
      95: lload_2
      96: ldc2_w        #7                  // long 4096l
      99: ldiv
     100: ldc2_w        #7                  // long 4096l
     103: lmul
     104: lstore        5
     106: lload_2
     107: lload         5
     109: lsub
     110: l2i
     111: istore        7
     113: iload         4
     115: iload         7
     117: iadd
     118: sipush        4096
     121: iadd
     122: iconst_1
     123: isub
     124: sipush        4096
     127: idiv
     128: sipush        4096
     131: imul
     132: istore        8
     134: iload         8
     136: invokestatic  #40                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     139: astore        9
     141: aload_0
     142: aload         9
     144: lload         5
     146: iload         8
     148: invokespecial #41                 // Method readInternal:(Ljava/nio/ByteBuffer;JI)V
     151: aload         9
     153: invokevirtual #42                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     156: pop
     157: aload         9
     159: iload         7
     161: iload         4
     163: iadd
     164: invokevirtual #43                 // Method java/nio/ByteBuffer.limit:(I)Ljava/nio/Buffer;
     167: pop
     168: aload         9
     170: iload         7
     172: invokevirtual #44                 // Method java/nio/ByteBuffer.position:(I)Ljava/nio/Buffer;
     175: pop
     176: aload_1
     177: aload         9
     179: invokevirtual #45                 // Method java/nio/ByteBuffer.put:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
     182: pop
     183: iload         4
     185: ireturn
     186: aload_0
     187: aload_1
     188: lload_2
     189: iload         4
     191: invokespecial #41                 // Method readInternal:(Ljava/nio/ByteBuffer;JI)V
     194: iload         4
     196: ireturn

  private void readInternal(java.nio.ByteBuffer, long, int) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #46                 // Method java/nio/ByteBuffer.position:()I
       4: istore        5
       6: aload_0
       7: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      10: lload_2
      11: ldc2_w        #7                  // long 4096l
      14: ladd
      15: aload_1
      16: invokestatic  #17                 // Method readFully:(Ljava/nio/channels/FileChannel;JLjava/nio/ByteBuffer;)V
      19: lload_2
      20: ldc2_w        #7                  // long 4096l
      23: ldiv
      24: lstore        6
      26: iload         4
      28: ifle          74
      31: aload_0
      32: getfield      #5                  // Field xts:Lorg/h2/store/fs/FilePathEncrypt$XTS;
      35: lload         6
      37: dup2
      38: lconst_1
      39: ladd
      40: lstore        6
      42: sipush        4096
      45: aload_1
      46: invokevirtual #47                 // Method java/nio/ByteBuffer.array:()[B
      49: aload_1
      50: invokevirtual #48                 // Method java/nio/ByteBuffer.arrayOffset:()I
      53: iload         5
      55: iadd
      56: invokevirtual #49                 // Method org/h2/store/fs/FilePathEncrypt$XTS.decrypt:(JI[BI)V
      59: iinc_w        5, 4096
      65: iinc_w        4, -4096
      71: goto          26
      74: return

  private static void readFully(java.nio.channels.FileChannel, long, java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_3
       2: lload_1
       3: invokevirtual #50                 // Method java/nio/channels/FileChannel.read:(Ljava/nio/ByteBuffer;J)I
       6: istore        4
       8: iload         4
      10: ifge          21
      13: new           #51                 // class java/io/EOFException
      16: dup
      17: invokespecial #52                 // Method java/io/EOFException."<init>":()V
      20: athrow
      21: lload_1
      22: iload         4
      24: i2l
      25: ladd
      26: lstore_1
      27: aload_3
      28: invokevirtual #29                 // Method java/nio/ByteBuffer.remaining:()I
      31: ifgt          0
      34: return

  public int write(java.nio.ByteBuffer, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #30                 // Method init:()V
       4: aload_1
       5: invokevirtual #29                 // Method java/nio/ByteBuffer.remaining:()I
       8: istore        4
      10: lload_2
      11: ldc2_w        #18                 // long 4095l
      14: land
      15: lconst_0
      16: lcmp
      17: ifne          29
      20: iload         4
      22: sipush        4095
      25: iand
      26: ifeq          244
      29: lload_2
      30: ldc2_w        #7                  // long 4096l
      33: ldiv
      34: ldc2_w        #7                  // long 4096l
      37: lmul
      38: lstore        5
      40: lload_2
      41: lload         5
      43: lsub
      44: l2i
      45: istore        7
      47: iload         4
      49: iload         7
      51: iadd
      52: sipush        4096
      55: iadd
      56: iconst_1
      57: isub
      58: sipush        4096
      61: idiv
      62: sipush        4096
      65: imul
      66: istore        8
      68: iload         8
      70: invokestatic  #40                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      73: astore        9
      75: aload_0
      76: getfield      #9                  // Field size:J
      79: lload         5
      81: lsub
      82: ldc2_w        #7                  // long 4096l
      85: ladd
      86: lconst_1
      87: lsub
      88: l2i
      89: sipush        4096
      92: idiv
      93: sipush        4096
      96: imul
      97: istore        10
      99: iload         8
     101: iload         10
     103: invokestatic  #53                 // Method java/lang/Math.min:(II)I
     106: istore        11
     108: iload         11
     110: ifle          129
     113: aload_0
     114: aload         9
     116: lload         5
     118: iload         11
     120: invokespecial #41                 // Method readInternal:(Ljava/nio/ByteBuffer;JI)V
     123: aload         9
     125: invokevirtual #54                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
     128: pop
     129: aload         9
     131: iload         7
     133: iload         4
     135: iadd
     136: invokevirtual #43                 // Method java/nio/ByteBuffer.limit:(I)Ljava/nio/Buffer;
     139: pop
     140: aload         9
     142: iload         7
     144: invokevirtual #44                 // Method java/nio/ByteBuffer.position:(I)Ljava/nio/Buffer;
     147: pop
     148: aload         9
     150: aload_1
     151: invokevirtual #45                 // Method java/nio/ByteBuffer.put:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
     154: pop
     155: aload         9
     157: iload         8
     159: invokevirtual #43                 // Method java/nio/ByteBuffer.limit:(I)Ljava/nio/Buffer;
     162: pop
     163: aload         9
     165: invokevirtual #54                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
     168: pop
     169: aload_0
     170: aload         9
     172: lload         5
     174: iload         8
     176: invokespecial #55                 // Method writeInternal:(Ljava/nio/ByteBuffer;JI)V
     179: lload_2
     180: iload         4
     182: i2l
     183: ladd
     184: lstore        12
     186: aload_0
     187: aload_0
     188: getfield      #9                  // Field size:J
     191: lload         12
     193: invokestatic  #56                 // Method java/lang/Math.max:(JJ)J
     196: putfield      #9                  // Field size:J
     199: aload_0
     200: getfield      #9                  // Field size:J
     203: ldc2_w        #18                 // long 4095l
     206: land
     207: l2i
     208: istore        14
     210: iload         14
     212: ifle          241
     215: iload         14
     217: invokestatic  #40                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     220: astore        9
     222: aload_0
     223: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
     226: lload         5
     228: ldc2_w        #7                  // long 4096l
     231: ladd
     232: iload         8
     234: i2l
     235: ladd
     236: aload         9
     238: invokestatic  #16                 // Method writeFully:(Ljava/nio/channels/FileChannel;JLjava/nio/ByteBuffer;)V
     241: iload         4
     243: ireturn
     244: aload_0
     245: aload_1
     246: lload_2
     247: iload         4
     249: invokespecial #55                 // Method writeInternal:(Ljava/nio/ByteBuffer;JI)V
     252: lload_2
     253: iload         4
     255: i2l
     256: ladd
     257: lstore        5
     259: aload_0
     260: aload_0
     261: getfield      #9                  // Field size:J
     264: lload         5
     266: invokestatic  #56                 // Method java/lang/Math.max:(JJ)J
     269: putfield      #9                  // Field size:J
     272: iload         4
     274: ireturn

  private void writeInternal(java.nio.ByteBuffer, long, int) throws java.io.IOException;
    Code:
       0: iload         4
       2: invokestatic  #40                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
       5: astore        5
       7: aload         5
       9: aload_1
      10: invokevirtual #45                 // Method java/nio/ByteBuffer.put:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
      13: pop
      14: aload         5
      16: invokevirtual #42                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      19: pop
      20: lload_2
      21: ldc2_w        #7                  // long 4096l
      24: ldiv
      25: lstore        6
      27: iconst_0
      28: istore        8
      30: iload         4
      32: istore        9
      34: iload         9
      36: ifle          84
      39: aload_0
      40: getfield      #5                  // Field xts:Lorg/h2/store/fs/FilePathEncrypt$XTS;
      43: lload         6
      45: dup2
      46: lconst_1
      47: ladd
      48: lstore        6
      50: sipush        4096
      53: aload         5
      55: invokevirtual #47                 // Method java/nio/ByteBuffer.array:()[B
      58: aload         5
      60: invokevirtual #48                 // Method java/nio/ByteBuffer.arrayOffset:()I
      63: iload         8
      65: iadd
      66: invokevirtual #57                 // Method org/h2/store/fs/FilePathEncrypt$XTS.encrypt:(JI[BI)V
      69: iinc_w        8, 4096
      75: iinc_w        9, -4096
      81: goto          34
      84: aload_0
      85: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      88: lload_2
      89: ldc2_w        #7                  // long 4096l
      92: ladd
      93: aload         5
      95: invokestatic  #16                 // Method writeFully:(Ljava/nio/channels/FileChannel;JLjava/nio/ByteBuffer;)V
      98: return

  private static void writeFully(java.nio.channels.FileChannel, long, java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: iconst_0
       1: istore        4
       3: aload_0
       4: aload_3
       5: lload_1
       6: iload         4
       8: i2l
       9: ladd
      10: invokevirtual #58                 // Method java/nio/channels/FileChannel.write:(Ljava/nio/ByteBuffer;J)I
      13: istore        5
      15: iload         4
      17: iload         5
      19: iadd
      20: istore        4
      22: aload_3
      23: invokevirtual #29                 // Method java/nio/ByteBuffer.remaining:()I
      26: ifgt          3
      29: return

  public int write(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_0
       3: getfield      #27                 // Field pos:J
       6: invokevirtual #59                 // Method write:(Ljava/nio/ByteBuffer;J)I
       9: istore_2
      10: iload_2
      11: ifle          25
      14: aload_0
      15: dup
      16: getfield      #27                 // Field pos:J
      19: iload_2
      20: i2l
      21: ladd
      22: putfield      #27                 // Field pos:J
      25: iload_2
      26: ireturn

  public long size() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #30                 // Method init:()V
       4: aload_0
       5: getfield      #9                  // Field size:J
       8: lreturn

  public java.nio.channels.FileChannel truncate(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #30                 // Method init:()V
       4: lload_1
       5: aload_0
       6: getfield      #9                  // Field size:J
       9: lcmp
      10: ifle          15
      13: aload_0
      14: areturn
      15: lload_1
      16: lconst_0
      17: lcmp
      18: ifge          48
      21: new           #32                 // class java/lang/IllegalArgumentException
      24: dup
      25: new           #33                 // class java/lang/StringBuilder
      28: dup
      29: invokespecial #34                 // Method java/lang/StringBuilder."<init>":()V
      32: ldc           #60                 // String newSize:
      34: invokevirtual #36                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: lload_1
      38: invokevirtual #37                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      41: invokevirtual #38                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      44: invokespecial #39                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      47: athrow
      48: lload_1
      49: ldc2_w        #18                 // long 4095l
      52: land
      53: l2i
      54: istore_3
      55: iload_3
      56: ifle          79
      59: aload_0
      60: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      63: lload_1
      64: ldc2_w        #7                  // long 4096l
      67: ladd
      68: ldc2_w        #7                  // long 4096l
      71: ladd
      72: invokevirtual #61                 // Method java/nio/channels/FileChannel.truncate:(J)Ljava/nio/channels/FileChannel;
      75: pop
      76: goto          92
      79: aload_0
      80: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
      83: lload_1
      84: ldc2_w        #7                  // long 4096l
      87: ladd
      88: invokevirtual #61                 // Method java/nio/channels/FileChannel.truncate:(J)Ljava/nio/channels/FileChannel;
      91: pop
      92: aload_0
      93: lload_1
      94: putfield      #9                  // Field size:J
      97: aload_0
      98: aload_0
      99: getfield      #27                 // Field pos:J
     102: aload_0
     103: getfield      #9                  // Field size:J
     106: invokestatic  #31                 // Method java/lang/Math.min:(JJ)J
     109: putfield      #27                 // Field pos:J
     112: aload_0
     113: areturn

  public void force(boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
       4: iload_1
       5: invokevirtual #62                 // Method java/nio/channels/FileChannel.force:(Z)V
       8: return

  public java.nio.channels.FileLock tryLock(long, long, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field base:Ljava/nio/channels/FileChannel;
       4: lload_1
       5: lload_3
       6: iload         5
       8: invokevirtual #63                 // Method java/nio/channels/FileChannel.tryLock:(JJZ)Ljava/nio/channels/FileLock;
      11: areturn

  public java.lang.String toString();
    Code:
       0: aload_0
       1: getfield      #2                  // Field name:Ljava/lang/String;
       4: areturn

  public java.nio.channels.SeekableByteChannel truncate(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: lload_1
       2: invokevirtual #64                 // Method truncate:(J)Ljava/nio/channels/FileChannel;
       5: areturn

  public java.nio.channels.SeekableByteChannel position(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: lload_1
       2: invokevirtual #65                 // Method position:(J)Ljava/nio/channels/FileChannel;
       5: areturn

  static {};
    Code:
       0: ldc           #66                 // String H2encrypt\n
       2: invokevirtual #67                 // Method java/lang/String.getBytes:()[B
       5: putstatic     #10                 // Field HEADER:[B
       8: getstatic     #10                 // Field HEADER:[B
      11: arraylength
      12: putstatic     #13                 // Field SALT_POS:I
      15: return
}

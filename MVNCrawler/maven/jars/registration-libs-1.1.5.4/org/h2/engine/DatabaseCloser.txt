Compiled from "DatabaseCloser.java"
class org.h2.engine.DatabaseCloser extends java.lang.Thread {
  private final boolean shutdownHook;

  private final org.h2.message.Trace trace;

  private volatile java.lang.ref.WeakReference<org.h2.engine.Database> databaseRef;

  private int delayInMillis;

  org.h2.engine.DatabaseCloser(org.h2.engine.Database, int, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Thread."<init>":()V
       4: aload_0
       5: new           #2                  // class java/lang/ref/WeakReference
       8: dup
       9: aload_1
      10: invokespecial #3                  // Method java/lang/ref/WeakReference."<init>":(Ljava/lang/Object;)V
      13: putfield      #4                  // Field databaseRef:Ljava/lang/ref/WeakReference;
      16: aload_0
      17: iload_2
      18: putfield      #5                  // Field delayInMillis:I
      21: aload_0
      22: iload_3
      23: putfield      #6                  // Field shutdownHook:Z
      26: aload_0
      27: aload_1
      28: iconst_2
      29: invokevirtual #7                  // Method org/h2/engine/Database.getTrace:(I)Lorg/h2/message/Trace;
      32: putfield      #8                  // Field trace:Lorg/h2/message/Trace;
      35: return

  void reset();
    Code:
       0: aload_0
       1: dup
       2: astore_1
       3: monitorenter
       4: aload_0
       5: aconst_null
       6: putfield      #4                  // Field databaseRef:Ljava/lang/ref/WeakReference;
       9: aload_1
      10: monitorexit
      11: goto          19
      14: astore_2
      15: aload_1
      16: monitorexit
      17: aload_2
      18: athrow
      19: return
    Exception table:
       from    to  target type
           4    11    14   any
          14    17    14   any

  public void run();
    Code:
       0: aload_0
       1: getfield      #5                  // Field delayInMillis:I
       4: ifle          37
       7: bipush        100
       9: istore_1
      10: iload_1
      11: i2l
      12: invokestatic  #9                  // Method java/lang/Thread.sleep:(J)V
      15: aload_0
      16: dup
      17: getfield      #5                  // Field delayInMillis:I
      20: iload_1
      21: isub
      22: putfield      #5                  // Field delayInMillis:I
      25: goto          29
      28: astore_1
      29: aload_0
      30: getfield      #4                  // Field databaseRef:Ljava/lang/ref/WeakReference;
      33: ifnonnull     0
      36: return
      37: aconst_null
      38: astore_1
      39: aload_0
      40: dup
      41: astore_2
      42: monitorenter
      43: aload_0
      44: getfield      #4                  // Field databaseRef:Ljava/lang/ref/WeakReference;
      47: ifnull        61
      50: aload_0
      51: getfield      #4                  // Field databaseRef:Ljava/lang/ref/WeakReference;
      54: invokevirtual #11                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
      57: checkcast     #12                 // class org/h2/engine/Database
      60: astore_1
      61: aload_2
      62: monitorexit
      63: goto          71
      66: astore_3
      67: aload_2
      68: monitorexit
      69: aload_3
      70: athrow
      71: aload_1
      72: ifnull        108
      75: aload_1
      76: aload_0
      77: getfield      #6                  // Field shutdownHook:Z
      80: invokevirtual #13                 // Method org/h2/engine/Database.close:(Z)V
      83: goto          108
      86: astore_2
      87: aload_0
      88: getfield      #8                  // Field trace:Lorg/h2/message/Trace;
      91: aload_2
      92: ldc           #15                 // String could not close the database
      94: invokevirtual #16                 // Method org/h2/message/Trace.error:(Ljava/lang/Throwable;Ljava/lang/String;)V
      97: goto          108
     100: astore_3
     101: aload_2
     102: aload_3
     103: invokevirtual #18                 // Method java/lang/RuntimeException.addSuppressed:(Ljava/lang/Throwable;)V
     106: aload_2
     107: athrow
     108: return
    Exception table:
       from    to  target type
           7    25    28   Class java/lang/Exception
          43    63    66   any
          66    69    66   any
          75    83    86   Class java/lang/RuntimeException
          87    97   100   Class java/lang/Throwable
}

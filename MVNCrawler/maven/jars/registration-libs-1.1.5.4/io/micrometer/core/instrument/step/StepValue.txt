Compiled from "StepValue.java"
public abstract class io.micrometer.core.instrument.step.StepValue<V> {
  private final io.micrometer.core.instrument.Clock clock;

  private final long stepMillis;

  private java.util.concurrent.atomic.AtomicLong lastInitPos;

  private volatile V previous;

  public io.micrometer.core.instrument.step.StepValue(io.micrometer.core.instrument.Clock, long);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_0
       6: invokevirtual #7                  // Method noValue:()Ljava/lang/Object;
       9: putfield      #13                 // Field previous:Ljava/lang/Object;
      12: aload_0
      13: aload_1
      14: putfield      #17                 // Field clock:Lio/micrometer/core/instrument/Clock;
      17: aload_0
      18: lload_2
      19: putfield      #21                 // Field stepMillis:J
      22: aload_0
      23: new           #25                 // class java/util/concurrent/atomic/AtomicLong
      26: dup
      27: aload_1
      28: invokeinterface #27,  1           // InterfaceMethod io/micrometer/core/instrument/Clock.wallTime:()J
      33: lload_2
      34: ldiv
      35: invokespecial #33                 // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      38: putfield      #36                 // Field lastInitPos:Ljava/util/concurrent/atomic/AtomicLong;
      41: return

  protected abstract java.util.function.Supplier<V> valueSupplier();

  protected abstract V noValue();

  private void rollCount(long);
    Code:
       0: lload_1
       1: aload_0
       2: getfield      #21                 // Field stepMillis:J
       5: ldiv
       6: lstore_3
       7: aload_0
       8: getfield      #36                 // Field lastInitPos:Ljava/util/concurrent/atomic/AtomicLong;
      11: invokevirtual #40                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      14: lstore        5
      16: lload         5
      18: lload_3
      19: lcmp
      20: ifge          69
      23: aload_0
      24: getfield      #36                 // Field lastInitPos:Ljava/util/concurrent/atomic/AtomicLong;
      27: lload         5
      29: lload_3
      30: invokevirtual #43                 // Method java/util/concurrent/atomic/AtomicLong.compareAndSet:(JJ)Z
      33: ifeq          69
      36: aload_0
      37: invokevirtual #47                 // Method valueSupplier:()Ljava/util/function/Supplier;
      40: invokeinterface #51,  1           // InterfaceMethod java/util/function/Supplier.get:()Ljava/lang/Object;
      45: astore        7
      47: aload_0
      48: lload         5
      50: lload_3
      51: lconst_1
      52: lsub
      53: lcmp
      54: ifne          62
      57: aload         7
      59: goto          66
      62: aload_0
      63: invokevirtual #7                  // Method noValue:()Ljava/lang/Object;
      66: putfield      #13                 // Field previous:Ljava/lang/Object;
      69: return

  public V poll();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #17                 // Field clock:Lio/micrometer/core/instrument/Clock;
       5: invokeinterface #27,  1           // InterfaceMethod io/micrometer/core/instrument/Clock.wallTime:()J
      10: invokespecial #55                 // Method rollCount:(J)V
      13: aload_0
      14: getfield      #13                 // Field previous:Ljava/lang/Object;
      17: areturn
}

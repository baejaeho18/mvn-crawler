Compiled from "TimeWindowMax.java"
public class io.micrometer.core.instrument.distribution.TimeWindowMax {
  private static final java.util.concurrent.atomic.AtomicIntegerFieldUpdater<io.micrometer.core.instrument.distribution.TimeWindowMax> rotatingUpdater;

  private final io.micrometer.core.instrument.Clock clock;

  private final long durationBetweenRotatesMillis;

  private java.util.concurrent.atomic.AtomicLong[] ringBuffer;

  private int currentBucket;

  private volatile long lastRotateTimestampMillis;

  private volatile int rotating;

  public io.micrometer.core.instrument.distribution.TimeWindowMax(io.micrometer.core.instrument.Clock, io.micrometer.core.instrument.distribution.DistributionStatisticConfig);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokevirtual #1                  // Method io/micrometer/core/instrument/distribution/DistributionStatisticConfig.getExpiry:()Ljava/time/Duration;
       6: invokevirtual #7                  // Method java/time/Duration.toMillis:()J
       9: aload_2
      10: invokevirtual #13                 // Method io/micrometer/core/instrument/distribution/DistributionStatisticConfig.getBufferLength:()Ljava/lang/Integer;
      13: invokevirtual #17                 // Method java/lang/Integer.intValue:()I
      16: invokespecial #23                 // Method "<init>":(Lio/micrometer/core/instrument/Clock;JI)V
      19: return

  public io.micrometer.core.instrument.distribution.TimeWindowMax(io.micrometer.core.instrument.Clock, long, int);
    Code:
       0: aload_0
       1: invokespecial #29                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #34                 // Field rotating:I
       9: aload_0
      10: aload_1
      11: putfield      #38                 // Field clock:Lio/micrometer/core/instrument/Clock;
      14: aload_0
      15: lload_2
      16: putfield      #42                 // Field durationBetweenRotatesMillis:J
      19: aload_0
      20: aload_1
      21: invokeinterface #46,  1           // InterfaceMethod io/micrometer/core/instrument/Clock.wallTime:()J
      26: putfield      #51                 // Field lastRotateTimestampMillis:J
      29: aload_0
      30: iconst_0
      31: putfield      #54                 // Field currentBucket:I
      34: aload_0
      35: iload         4
      37: anewarray     #57                 // class java/util/concurrent/atomic/AtomicLong
      40: putfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      43: iconst_0
      44: istore        5
      46: iload         5
      48: iload         4
      50: if_icmpge     73
      53: aload_0
      54: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      57: iload         5
      59: new           #57                 // class java/util/concurrent/atomic/AtomicLong
      62: dup
      63: invokespecial #63                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      66: aastore
      67: iinc          5, 1
      70: goto          46
      73: return

  public void record(double, java.util.concurrent.TimeUnit);
    Code:
       0: aload_0
       1: invokespecial #64                 // Method rotate:()V
       4: dload_1
       5: aload_3
       6: getstatic     #67                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
       9: invokestatic  #73                 // Method io/micrometer/core/instrument/util/TimeUtils.convert:(DLjava/util/concurrent/TimeUnit;Ljava/util/concurrent/TimeUnit;)D
      12: d2l
      13: lstore        4
      15: aload_0
      16: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      19: astore        6
      21: aload         6
      23: arraylength
      24: istore        7
      26: iconst_0
      27: istore        8
      29: iload         8
      31: iload         7
      33: if_icmpge     57
      36: aload         6
      38: iload         8
      40: aaload
      41: astore        9
      43: aload_0
      44: aload         9
      46: lload         4
      48: invokespecial #79                 // Method updateMax:(Ljava/util/concurrent/atomic/AtomicLong;J)V
      51: iinc          8, 1
      54: goto          29
      57: return

  public double poll(java.util.concurrent.TimeUnit);
    Code:
       0: aload_0
       1: invokespecial #64                 // Method rotate:()V
       4: aload_0
       5: dup
       6: astore_2
       7: monitorenter
       8: aload_0
       9: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      12: aload_0
      13: getfield      #54                 // Field currentBucket:I
      16: aaload
      17: invokevirtual #83                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      20: l2d
      21: aload_1
      22: invokestatic  #86                 // Method io/micrometer/core/instrument/util/TimeUtils.nanosToUnit:(DLjava/util/concurrent/TimeUnit;)D
      25: aload_2
      26: monitorexit
      27: dreturn
      28: astore_3
      29: aload_2
      30: monitorexit
      31: aload_3
      32: athrow
    Exception table:
       from    to  target type
           8    27    28   any
          28    31    28   any

  public double poll();
    Code:
       0: aload_0
       1: invokespecial #64                 // Method rotate:()V
       4: aload_0
       5: dup
       6: astore_1
       7: monitorenter
       8: aload_0
       9: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      12: aload_0
      13: getfield      #54                 // Field currentBucket:I
      16: aaload
      17: invokevirtual #83                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      20: invokestatic  #90                 // Method java/lang/Double.longBitsToDouble:(J)D
      23: aload_1
      24: monitorexit
      25: dreturn
      26: astore_2
      27: aload_1
      28: monitorexit
      29: aload_2
      30: athrow
    Exception table:
       from    to  target type
           8    25    26   any
          26    29    26   any

  public void record(double);
    Code:
       0: aload_0
       1: invokespecial #64                 // Method rotate:()V
       4: dload_1
       5: invokestatic  #96                 // Method java/lang/Double.doubleToLongBits:(D)J
       8: lstore_3
       9: aload_0
      10: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      13: astore        5
      15: aload         5
      17: arraylength
      18: istore        6
      20: iconst_0
      21: istore        7
      23: iload         7
      25: iload         6
      27: if_icmpge     50
      30: aload         5
      32: iload         7
      34: aaload
      35: astore        8
      37: aload_0
      38: aload         8
      40: lload_3
      41: invokespecial #79                 // Method updateMax:(Ljava/util/concurrent/atomic/AtomicLong;J)V
      44: iinc          7, 1
      47: goto          23
      50: return

  private void updateMax(java.util.concurrent.atomic.AtomicLong, long);
    Code:
       0: aload_1
       1: invokevirtual #83                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
       4: lstore        4
       6: lload         4
       8: lload_2
       9: lcmp
      10: ifge          29
      13: aload_1
      14: lload         4
      16: lload_2
      17: invokevirtual #100                // Method java/util/concurrent/atomic/AtomicLong.compareAndSet:(JJ)Z
      20: ifeq          26
      23: goto          29
      26: goto          0
      29: return

  private void rotate();
    Code:
       0: aload_0
       1: getfield      #38                 // Field clock:Lio/micrometer/core/instrument/Clock;
       4: invokeinterface #46,  1           // InterfaceMethod io/micrometer/core/instrument/Clock.wallTime:()J
       9: aload_0
      10: getfield      #51                 // Field lastRotateTimestampMillis:J
      13: lsub
      14: lstore_1
      15: lload_1
      16: aload_0
      17: getfield      #42                 // Field durationBetweenRotatesMillis:J
      20: lcmp
      21: ifge          25
      24: return
      25: getstatic     #104                // Field rotatingUpdater:Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
      28: aload_0
      29: iconst_0
      30: iconst_1
      31: invokevirtual #108                // Method java/util/concurrent/atomic/AtomicIntegerFieldUpdater.compareAndSet:(Ljava/lang/Object;II)Z
      34: ifne          38
      37: return
      38: iconst_0
      39: istore_3
      40: aload_0
      41: dup
      42: astore        4
      44: monitorenter
      45: aload_0
      46: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      49: aload_0
      50: getfield      #54                 // Field currentBucket:I
      53: aaload
      54: lconst_0
      55: invokevirtual #113                // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
      58: aload_0
      59: dup
      60: getfield      #54                 // Field currentBucket:I
      63: iconst_1
      64: iadd
      65: dup_x1
      66: putfield      #54                 // Field currentBucket:I
      69: aload_0
      70: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
      73: arraylength
      74: if_icmplt     82
      77: aload_0
      78: iconst_0
      79: putfield      #54                 // Field currentBucket:I
      82: lload_1
      83: aload_0
      84: getfield      #42                 // Field durationBetweenRotatesMillis:J
      87: lsub
      88: lstore_1
      89: aload_0
      90: dup
      91: getfield      #51                 // Field lastRotateTimestampMillis:J
      94: aload_0
      95: getfield      #42                 // Field durationBetweenRotatesMillis:J
      98: ladd
      99: putfield      #51                 // Field lastRotateTimestampMillis:J
     102: lload_1
     103: aload_0
     104: getfield      #42                 // Field durationBetweenRotatesMillis:J
     107: lcmp
     108: iflt          123
     111: iinc          3, 1
     114: iload_3
     115: aload_0
     116: getfield      #59                 // Field ringBuffer:[Ljava/util/concurrent/atomic/AtomicLong;
     119: arraylength
     120: if_icmplt     45
     123: aload         4
     125: monitorexit
     126: goto          137
     129: astore        5
     131: aload         4
     133: monitorexit
     134: aload         5
     136: athrow
     137: aload_0
     138: iconst_0
     139: putfield      #34                 // Field rotating:I
     142: goto          155
     145: astore        6
     147: aload_0
     148: iconst_0
     149: putfield      #34                 // Field rotating:I
     152: aload         6
     154: athrow
     155: return
    Exception table:
       from    to  target type
          45   126   129   any
         129   134   129   any
          38   137   145   any
         145   147   145   any

  static {};
    Code:
       0: ldc           #24                 // class io/micrometer/core/instrument/distribution/TimeWindowMax
       2: ldc           #117                // String rotating
       4: invokestatic  #118                // Method java/util/concurrent/atomic/AtomicIntegerFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
       7: putstatic     #104                // Field rotatingUpdater:Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
      10: return
}

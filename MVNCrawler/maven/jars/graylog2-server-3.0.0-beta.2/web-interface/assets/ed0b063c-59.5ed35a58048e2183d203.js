(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-59"],{"0lkvuehF":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=p(t("ii0bleBb")),l=p(t("ivGQtwpr")),r=p(t("PcYM+wZ7")),o=t("wMSvutaJ"),n=t("wkvtUUMm"),i=t("oBIKikY9"),u=p(t("W+sNG9T1")),s=p(t("+CppQpVm")),c=p(t("21p8kIWv")),d=p(t("EkIyLcrB"));function p(e){return e&&e.__esModule?e:{default:e}}var f=c.default.get("Collectors").CollectorsActions,m=(0,r.default)({displayName:"SidecarEditCollectorPage",propTypes:{params:a.default.object.isRequired},getInitialState:function(){return{collector:void 0}},componentDidMount:function(){this._reloadCollector()},_reloadCollector:function(){var t=this;f.getCollector(this.props.params.collectorId).then(function(e){return t.setState({collector:e})},function(e){404===e.status&&s.default.push(u.default.SYSTEM.SIDECARS.CONFIGURATION)})},_isLoading:function(){return!this.state.collector},render:function(){return this._isLoading()?l.default.createElement(i.Spinner,null):l.default.createElement(i.DocumentTitle,{title:"Log Collector"},l.default.createElement("span",null,l.default.createElement(i.PageHeader,{title:"Log Collector"},l.default.createElement("span",null,"Some words about log collectors."),l.default.createElement("span",null,"Read more about the Graylog Sidecar in the documentation."),l.default.createElement(o.ButtonToolbar,null,l.default.createElement(n.LinkContainer,{to:u.default.SYSTEM.SIDECARS.OVERVIEW},l.default.createElement(o.Button,{bsStyle:"info"},"Overview")),l.default.createElement(n.LinkContainer,{to:u.default.SYSTEM.SIDECARS.ADMINISTRATION},l.default.createElement(o.Button,{bsStyle:"info"},"Administration")),l.default.createElement(n.LinkContainer,{to:u.default.SYSTEM.SIDECARS.CONFIGURATION},l.default.createElement(o.Button,{bsStyle:"info",className:"active"},"Configuration")))),l.default.createElement(o.Row,{className:"content"},l.default.createElement(o.Col,{md:6},l.default.createElement(d.default,{action:"edit",collector:this.state.collector})))))}});exports.default=m,e.exports=exports.default},EkIyLcrB:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=f(t("ii0bleBb")),l=f(t("ivGQtwpr")),r=f(t("PcYM+wZ7")),o=f(t("4KF7VOU5")),n=f(t("nHcjWeCO")),i=t("wMSvutaJ"),u=t("oBIKikY9"),s=t("B4BR5PLd"),c=f(t("+CppQpVm")),d=f(t("W+sNG9T1")),p=f(t("21p8kIWv"));function f(e){return e&&e.__esModule?e:{default:e}}var m=p.default.get("Collectors"),h=m.CollectorsStore,_=m.CollectorsActions,E=p.default.get("CollectorConfigurations").CollectorConfigurationsActions,v=(0,r.default)({displayName:"CollectorForm",propTypes:{action:a.default.oneOf(["create","edit"]),collector:a.default.object},mixins:[o.default.connect(h)],getDefaultProps:function(){return{action:"edit",collector:{default_template:""}}},getInitialState:function(){return{error:!1,error_message:"",formData:{id:this.props.collector.id,name:this.props.collector.name,service_type:this.props.collector.service_type,node_operating_system:this.props.collector.node_operating_system,executable_path:this.props.collector.executable_path,execute_parameters:this.props.collector.execute_parameters,validation_parameters:this.props.collector.validation_parameters,default_template:String(this.props.collector.default_template)}}},componentDidMount:function(){_.all(),E.all()},hasErrors:function(){return this.state.error},_save:function(){this.hasErrors()||("create"===this.props.action?_.create(this.state.formData).then(function(){return c.default.push(d.default.SYSTEM.SIDECARS.CONFIGURATION)}):_.update(this.state.formData))},_formDataUpdate:function(a){var l=this;return function(e){var t=n.default.cloneDeep(l.state.formData);t[a]=e,l.setState({formData:t})}},_onNameChange:function(e){var t=this,a=e.target.value;this._formDataUpdate("name")(a),_.validate(a,this.props.collector.id).then(function(e){return t.setState({error:e.error,error_message:e.error_message})})},_onInputChange:function(t){var a=this;return function(e){a._formDataUpdate(t)(e.target.value)}},_onSubmit:function(e){e.preventDefault(),this._save()},_onCancel:function(){c.default.goBack()},_formatServiceTypes:function(){var e=[];return e.push({value:"exec",label:"Foreground execution"}),e.push({value:"svc",label:"Windows service"}),e},_formatOperatingSystems:function(){var e=[];return e.push({value:"linux",label:"Linux"}),e.push({value:"windows",label:"Windows"}),e},render:function(){var e="",t="";return this.state.formData.validation_parameters&&(e=this.state.formData.validation_parameters),this.state.formData.execute_parameters&&(t=this.state.formData.execute_parameters),l.default.createElement("div",null,l.default.createElement("form",{onSubmit:this._onSubmit},l.default.createElement("fieldset",null,l.default.createElement(s.Input,{type:"text",id:"name",label:"Name",onChange:this._onNameChange,bsStyle:this.state.error?"error":null,help:this.state.error?this.state.error_message:"Name for this configuration",value:this.state.formData.name,autoFocus:!0,required:!0}),l.default.createElement(i.FormGroup,{controlId:"service_type"},l.default.createElement(i.ControlLabel,null,"Process management"),l.default.createElement(u.Select,{inputProps:{id:"service_type"},options:this._formatServiceTypes(),value:this.state.formData.service_type,onChange:this._formDataUpdate("service_type"),placeholder:"Service Type",required:!0}),l.default.createElement(i.HelpBlock,null,"Choose the service type this collector is meant for.")),l.default.createElement(i.FormGroup,{controlId:"operating_system"},l.default.createElement(i.ControlLabel,null,"Operating System"),l.default.createElement(u.Select,{inputProps:{id:"node_operating_system"},options:this._formatOperatingSystems(),value:this.state.formData.node_operating_system,onChange:this._formDataUpdate("node_operating_system"),placeholder:"Name",required:!0}),l.default.createElement(i.HelpBlock,null,"Choose the operating system this collector is meant for.")),l.default.createElement(s.Input,{type:"text",id:"executablePath",label:"Executable Path",onChange:this._onInputChange("executable_path"),help:"Path to the collector executable",value:this.state.formData.executable_path,required:!0}),l.default.createElement(s.Input,{type:"text",id:"executeParameters",label:"Execute Parameters",onChange:this._onInputChange("execute_parameters"),help:l.default.createElement("span",null,"Parameters the collector is started with.",l.default.createElement("strong",null," %s will be replaced by the path to the configuration file.")),value:t}),l.default.createElement(s.Input,{type:"text",id:"validationParameters",label:"Parameters for Configuration Validation",onChange:this._onInputChange("validation_parameters"),help:l.default.createElement("span",null,"Parameters that validate the configuration file. ",l.default.createElement("strong",null," %s will be replaced by the path to the configuration file.")),value:e}),l.default.createElement(i.FormGroup,{controlId:"defaultTemplate"},l.default.createElement(i.ControlLabel,null,"Default Template"),l.default.createElement(u.SourceCodeEditor,{id:"template",value:this.state.formData.default_template,onChange:this._formDataUpdate("default_template")}),l.default.createElement(i.HelpBlock,null,"The default Collector configuration."))),l.default.createElement(i.Row,null,l.default.createElement(i.Col,{md:12},l.default.createElement(i.FormGroup,null,l.default.createElement(i.ButtonToolbar,null,l.default.createElement(i.Button,{type:"submit",bsStyle:"primary",disabled:this.hasErrors()},"create"===this.props.action?"Create":"Update"),l.default.createElement(i.Button,{type:"button",onClick:this._onCancel},"create"===this.props.action?"Cancel":"Back")))))))}});exports.default=v,e.exports=exports.default}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-37"],{"5++uUHCc":function(e,exports,t){(exports=e.exports=t("wTjlWjHz")(!1)).push([e.i,"._3wZo8zSYOErM5bGrAtbbf{cursor:pointer}.eCGaBNt2pGCu1kqdJtVWf{width:300px}.mUZc-dWn26sYVZUvMpHFx{margin-top:5px}._2EOoEyuI0H-ZTgpCL6FX02{margin-top:10px}.MluxsFKnKF10ANeqGmdGk{white-space:pre-wrap}._16ByHLUH0BvD8tS76Xx1gu{width:1%}",""]),exports.locals={clickableRow:"_3wZo8zSYOErM5bGrAtbbf",functionTableCell:"eCGaBNt2pGCu1kqdJtVWf",marginQuickReferenceText:"mUZc-dWn26sYVZUvMpHFx",marginTab:"_2EOoEyuI0H-ZTgpCL6FX02",exampleFunction:"MluxsFKnKF10ANeqGmdGk",adjustedTableCellWidth:"_16ByHLUH0BvD8tS76Xx1gu"}},fAySu4hN:function(e,exports,t){var n=t("5++uUHCc");"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t("HkU00dYq")(n,a);n.locals&&(e.exports=n.locals)},gl5kFOV5:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=s(t("ii0bleBb")),a=s(t("ivGQtwpr")),r=s(t("PcYM+wZ7")),l=s(t("4KF7VOU5")),i=t("oBIKikY9"),o=s(t("xjRJDcjF")),u=s(t("21p8kIWv"));function s(e){return e&&e.__esModule?e:{default:e}}var c=u.default.get("Rules"),f=c.RulesStore,d=c.RulesActions,p=u.default.get("Pipelines"),m=p.PipelinesStore,h=p.PipelinesActions;var E=(0,r.default)({displayName:"RuleDetailsPage",propTypes:{params:n.default.object.isRequired},mixins:[l.default.connectFilter(f,"rule",function(e){var t=this;return e.rules?e.rules.filter(function(e){return e.id===t.props.params.ruleId})[0]:void 0}),l.default.connect(m)],componentDidMount:function(){"new"!==this.props.params.ruleId&&(h.list(),d.get(this.props.params.ruleId))},_save:function(e,t){(e.id?d.update.triggerPromise(e):d.save.triggerPromise(e)).then(function(){return t()})},_validateRule:function(e,t){d.parse(e,t)},_isLoading:function(){return"new"!==this.props.params.ruleId&&!(this.state.rule&&this.state.pipelines)},render:function(){var t=this;if(this._isLoading())return a.default.createElement(i.Spinner,null);var e="new"===this.props.params.ruleId?[]:this.state.pipelines.filter(function(e){return e.stages.some(function(e){return-1!==e.rules.indexOf(t.state.rule.title)})}),n="new"===this.props.params.ruleId?"New pipeline rule":"Pipeline rule ".concat(this.state.rule.title);return a.default.createElement(i.DocumentTitle,{title:n},a.default.createElement(o.default,{rule:this.state.rule,usedInPipelines:e,create:"new"===this.props.params.ruleId,onSave:this._save,validateRule:this._validateRule}))}});exports.default=E,e.exports=exports.default},lnbTBGCp:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=d(t("ivGQtwpr")),n=d(t("PcYM+wZ7")),r=t("wMSvutaJ"),l=d(t("4KF7VOU5")),i=d(t("s2hN4RJZ")),o=d(t("jHp4XH0b")),u=t("oBIKikY9"),s=d(t("mc0qlNhN")),c=d(t("21p8kIWv")),f=d(t("fAySu4hN"));function d(e){return e&&e.__esModule?e:{default:e}}var p=c.default.get("Rules"),m=p.RulesStore,h=p.RulesActions,E=(0,n.default)({displayName:"RuleHelper",mixins:[l.default.connect(m)],getInitialState:function(){return{expanded:{},paginatedEntries:void 0,filteredEntries:void 0,currentPage:1,pageSize:10,filter:"",filteredDescriptors:void 0,pageBeforeFilter:void 0}},componentDidMount:function(){h.loadFunctions()},ruleTemplate:'rule "function howto"\nwhen\n  has_field("transaction_date")\nthen\n  // the following date format assumes there\'s no time zone in the string\n  let new_date = parse_date(to_string($message.transaction_date), "yyyy-MM-dd HH:mm:ss");\n  set_field("transaction_year", new_date.year);\nend',_niceType:function(e){return e.replace(/^.*\.(.*?)$/,"$1")},_toggleFunctionDetail:function(e){var t=i.default.clone(this.state.expanded);t[e]=!t[e],this.setState({expanded:t})},_functionSignature:function(e){var t=e.params.map(function(e){return e.optional?"[".concat(e.name,"]"):e.name});return"".concat(e.name,"(").concat(t.join(", "),") : ").concat(this._niceType(e.return_type))},_parameters:function(e){var t=this;return e.params.map(function(e){return a.default.createElement("tr",{key:e.name},a.default.createElement("td",{className:f.default.adjustedTableCellWidth},e.name),a.default.createElement("td",{className:f.default.adjustedTableCellWidth},t._niceType(e.type)),a.default.createElement("td",{className:"".concat(f.default.adjustedTableCellWidth," text-centered")},e.optional?null:a.default.createElement("i",{className:"fa fa-check"})),a.default.createElement("td",null,e.description))})},_renderFunctions:function(e){var n=this;return e?e.map(function(e){var t=null;return n.state.expanded[e.name]&&(t=a.default.createElement("tr",null,a.default.createElement("td",{colSpan:"2"},a.default.createElement(r.Table,{condensed:!0,striped:!0,hover:!0},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"Parameter"),a.default.createElement("th",null,"Type"),a.default.createElement("th",null,"Required"),a.default.createElement("th",null,"Description"))),a.default.createElement("tbody",null,n._parameters(e)))))),a.default.createElement("tbody",{key:e.name},a.default.createElement("tr",{onClick:function(){return n._toggleFunctionDetail(e.name)},className:f.default.clickableRow},a.default.createElement("td",{className:f.default.functionTableCell},a.default.createElement("code",null,n._functionSignature(e))),a.default.createElement("td",null,e.description)),t)}):[]},_onPageChange:function(e,t){this.setState({currentPage:e,pageSize:t})},_filterDescriptors:function(n){var a=this;if(this.state.functionDescriptors)if(n.length<=0)this.setState({filteredDescriptors:this.state.functionDescriptors,filter:"",currentPage:this.state.pageBeforeFilter||1,pageBeforeFilter:void 0});else{var e=this.state.functionDescriptors.filter(function(e){var t=RegExp(n);return t.test(a._functionSignature(e))||t.test(e.description)});this.setState({filteredDescriptors:e,filter:n,pageBeforeFilter:this.pageBeforeFilter||this.state.currentPage,currentPage:1})}},_onFilterReset:function(){this.setState({filteredDescriptors:this.state.functionDescriptors,filter:"",currentPage:this.state.pageBeforeFilter||1,pageBeforeFilter:void 0})},render:function(){if(!this.state.functionDescriptors)return a.default.createElement(u.Spinner,null);var e=this.state.filteredDescriptors||this.state.functionDescriptors,t=e.slice((this.state.currentPage-1)*this.state.pageSize,this.state.currentPage*this.state.pageSize);return a.default.createElement(r.Panel,{header:"Rules quick reference"},a.default.createElement(r.Row,{className:"row-sm"},a.default.createElement(r.Col,{md:12},a.default.createElement("p",{className:f.default.marginQuickReferenceText},"Read the ",a.default.createElement(o.default,{page:s.default.PAGES.PIPELINE_RULES,text:"full documentation"})," ","to gain a better understanding of how Graylog pipeline rules work."))),a.default.createElement(r.Row,{className:"row-sm"},a.default.createElement(r.Col,{md:12},a.default.createElement(r.Tabs,{id:"functionsHelper",defaultActiveKey:1,animation:!1},a.default.createElement(r.Tab,{eventKey:1,title:"Functions"},a.default.createElement(r.Row,null,a.default.createElement(r.Col,{sm:12},a.default.createElement("p",{className:f.default.marginTab},"This is a list of all available functions in pipeline rules. Click on a row to see more information about the function parameters."))),a.default.createElement(r.Row,null,a.default.createElement(r.Col,{sm:12},a.default.createElement(u.SearchForm,{onSearch:this._filterDescriptors,label:"Filter rules",topMargin:0,searchButtonLabel:"Filter",onReset:this._onFilterReset}),a.default.createElement("div",{className:"table-responsive ".concat(f.default.marginTab)},a.default.createElement(u.PaginatedList,{totalItems:e.length,pageSize:this.state.pageSize,onChange:this._onPageChange,activePage:this.state.currentPage,showPageSizeSelect:!1},a.default.createElement(r.Table,{condensed:!0},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"Function"),a.default.createElement("th",null,"Description"))),this._renderFunctions(t))))))),a.default.createElement(r.Tab,{eventKey:2,title:"Example"},a.default.createElement("p",{className:f.default.marginTab},"Do you want to see how a pipeline rule looks like? Take a look at this example:"),a.default.createElement("pre",{className:"".concat(f.default.marginTab," ").concat(f.default.exampleFunction)},this.ruleTemplate))))))}});exports.default=E,e.exports=exports.default},nqpt4kOo:function(e,exports,t){(exports=e.exports=t("wTjlWjHz")(!1)).push([e.i,'._3uaB9lz_OlFXwnUavGFBCa{margin:0;padding:0}._3uaB9lz_OlFXwnUavGFBCa li:not(:last-child){float:left}._3uaB9lz_OlFXwnUavGFBCa li:not(:last-child):after{content:",";margin-right:5px}._3uaB9lz_OlFXwnUavGFBCa li:last-child:after{content:"."}',""]),exports.locals={usedInPipelines:"_3uaB9lz_OlFXwnUavGFBCa"}},ugojASsw:function(e,exports,t){var n=t("nqpt4kOo");"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};t("HkU00dYq")(n,a);n.locals&&(e.exports=n.locals)},xYoauGdo:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=a(t("ii0bleBb")),i=a(t("ivGQtwpr")),r=t("wMSvutaJ"),o=t("ZX4j5H1r"),u=t("oBIKikY9"),s=t("B4BR5PLd"),c=a(t("W+sNG9T1")),f=a(t("+CppQpVm")),d=a(t("ugojASsw"));function a(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){function l(e){var n,t,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=this,a=h(l).call(this,e),g(v(v(n=!a||"object"!==p(a)&&"function"!=typeof a?v(t):a)),"parseTimer",void 0),g(v(v(n)),"_setParseErrors",function(e){n.setState({parseErrors:e})}),g(v(v(n)),"_onSourceChange",function(e){void 0!==n.parseTimer&&clearTimeout(n.parseTimer);var t=n.state.rule;t.source=e,n.setState({rule:t}),n.props.validateRule&&(n.parseTimer=setTimeout(function(){return n.props.validateRule(t,n._setParseErrors)},500))}),g(v(v(n)),"_onDescriptionChange",function(e){var t=n.state.rule;t.description=e.target.value,n.setState({rule:t})}),g(v(v(n)),"_onTitleChange",function(e){var t=n.state.rule;t.title=e.target.value,n.setState({rule:t})}),g(v(v(n)),"_getId",function(e){return void 0!==n.state.name?e+n.state.name:e}),g(v(v(n)),"_goBack",function(){f.default.goBack()}),g(v(v(n)),"_saved",function(){f.default.push(c.default.SYSTEM.PIPELINES.RULES)}),g(v(v(n)),"_save",function(){0===n.state.parseErrors.length&&n.props.onSave(n.state.rule,n._saved)}),g(v(v(n)),"_submit",function(e){e.preventDefault(),n._save()}),g(v(v(n)),"_formatPipelinesUsingRule",function(){if(0===n.props.usedInPipelines.length)return"This rule is not being used in any pipelines.";var e=n.props.usedInPipelines.map(function(e){return i.default.createElement("li",{key:e.id},i.default.createElement(o.Link,{to:c.default.SYSTEM.PIPELINES.PIPELINE(e.id)},e.title))});return i.default.createElement("ul",{className:d.default.usedInPipelines},e)});var r=e.rule;return n.state={rule:{id:r.id,title:r.title,description:r.description,source:r.source},parseErrors:[]},n}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(l,i.default.Component),t=l,(n=[{key:"componentWillUnmount",value:function(){void 0!==this.parseTimer&&(clearTimeout(this.parseTimer),this.parseTimer=void 0)}},{key:"render",value:function(){var e;this.props.create||(e=i.default.createElement(s.Input,{id:"used-in-pipelines",label:"Used in pipelines",help:"Pipelines that use this rule in one or more of their stages."},i.default.createElement("div",{className:"form-control-static"},this._formatPipelinesUsingRule())));var t=this.state.parseErrors.map(function(e){return{row:e.line-1,column:e.position_in_line-1,text:e.reason,type:"error"}});return i.default.createElement("form",{onSubmit:this._submit},i.default.createElement("fieldset",null,i.default.createElement(r.FormGroup,{id:"ruleTitleInformation"},i.default.createElement(r.ControlLabel,null,"Title"),i.default.createElement(r.FormControl.Static,null,"You can set the rule title in the rule source. See the quick reference for more information.")),i.default.createElement(s.Input,{type:"textarea",id:this._getId("description"),label:"Description",onChange:this._onDescriptionChange,autoFocus:!0,help:"Rule description (optional).",value:this.state.rule.description}),e,i.default.createElement(s.Input,{id:"rule-source-editor",label:"Rule source",help:"Rule source, see quick reference for more information."},i.default.createElement(u.SourceCodeEditor,{id:"source".concat(this.props.create?"-create":"-edit"),annotations:t,value:this.state.rule.source,onLoad:this._onLoad,onChange:this._onSourceChange}))),i.default.createElement(r.Row,null,i.default.createElement(r.Col,{md:12},i.default.createElement("div",{className:"form-group"},i.default.createElement(r.Button,{type:"submit",bsStyle:"primary",style:{marginRight:10}},"Save"),i.default.createElement(r.Button,{type:"button",onClick:this._goBack},"Cancel")))))}}])&&m(t.prototype,n),a&&m(t,a),l}();g(l,"propTypes",{rule:n.default.object,usedInPipelines:n.default.array,create:n.default.bool,onSave:n.default.func.isRequired,validateRule:n.default.func.isRequired}),g(l,"defaultProps",{rule:{id:"",title:"",description:"",source:""}});var b=l;exports.default=b,e.exports=exports.default},xjRJDcjF:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=a(t("ii0bleBb")),l=a(t("ivGQtwpr")),i=t("wMSvutaJ"),o=t("wkvtUUMm"),u=t("oBIKikY9"),s=a(t("jHp4XH0b")),c=a(t("mc0qlNhN")),f=a(t("xYoauGdo")),d=a(t("lnbTBGCp")),p=a(t("W+sNG9T1"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g,b,y,_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,E(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,l.default.Component),n=t,(a=[{key:"render",value:function(){var e;return e=this.props.create?"Create pipeline rule":l.default.createElement("span",null,"Pipeline rule ",l.default.createElement("em",null,this.props.rule.title)),l.default.createElement("div",null,l.default.createElement(u.PageHeader,{title:e},l.default.createElement("span",null,"Rules are a way of applying changes to messages in Graylog. A rule consists of a condition and a list"," ","of actions."," ","Graylog evaluates the condition against a message and executes the actions if the condition is satisfied."),l.default.createElement("span",null,"Read more about Graylog pipeline rules in the ",l.default.createElement(s.default,{page:c.default.PAGES.PIPELINE_RULES,text:"documentation"}),"."),l.default.createElement("span",null,l.default.createElement(o.LinkContainer,{to:p.default.SYSTEM.PIPELINES.OVERVIEW},l.default.createElement(i.Button,{bsStyle:"info"},"Manage pipelines"))," ",l.default.createElement(o.LinkContainer,{to:p.default.SYSTEM.PIPELINES.RULES},l.default.createElement(i.Button,{bsStyle:"info",className:"active"},"Manage rules"))," ",l.default.createElement(o.LinkContainer,{to:p.default.SYSTEM.PIPELINES.SIMULATOR},l.default.createElement(i.Button,{bsStyle:"info"},"Simulator")))),l.default.createElement(i.Row,{className:"content"},l.default.createElement(i.Col,{md:6},l.default.createElement(f.default,{rule:this.props.rule,usedInPipelines:this.props.usedInPipelines,create:this.props.create,onSave:this.props.onSave,validateRule:this.props.validateRule})),l.default.createElement(i.Col,{md:6},l.default.createElement(d.default,null))))}}])&&m(n.prototype,a),r&&m(n,r),t}();g=_,b="propTypes",y={rule:n.default.object,usedInPipelines:n.default.array,create:n.default.bool,onSave:n.default.func.isRequired,validateRule:n.default.func.isRequired},b in g?Object.defineProperty(g,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[b]=y;var S=_;exports.default=S,e.exports=exports.default}}]);
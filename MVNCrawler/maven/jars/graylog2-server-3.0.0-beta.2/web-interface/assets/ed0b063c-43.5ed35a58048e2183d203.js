(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-43"],{"8GEnGjyh":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(t("ii0bleBb")),s=r(t("ivGQtwpr")),o=t("wMSvutaJ"),l=t("wkvtUUMm"),i=r(t("W+sNG9T1")),c=r(t("N/I/utFl")),f=r(t("yTX2MyD2")),d=r(t("DmKcI6vk")),m=r(t("BRu+HbLW")),p=r(t("fQFnrO3i")),a=r(t("1VnJesae"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var _=a.default.getStore("Streams"),S=a.default.getStore("StreamRules"),u=function(e){function u(){var e,a,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=this,r=(e=b(u)).call.apply(e,[this].concat(o)),E(v(v(a=!r||"object"!==h(r)&&"function"!=typeof r?v(t):r)),"state",{}),E(v(v(a)),"onMessageLoaded",function(e){a.setState({message:e}),void 0!==e?_.testMatch(a.props.streamId,{message:e.fields},function(e){a.setState({matchData:e})}):a.setState({matchData:void 0})}),E(v(v(a)),"loadData",function(){S.types().then(function(e){a.setState({streamRuleTypes:e})}),_.get(a.props.streamId,function(e){a.setState({stream:e})}),a.state.message&&a.onMessageLoaded(a.state.message)}),E(v(v(a)),"_onStreamRuleFormSubmit",function(e,t){S.create(a.props.streamId,t,function(){})}),E(v(v(a)),"_onAddStreamRule",function(e){e.preventDefault(),a.newStreamRuleForm.open()}),E(v(v(a)),"_getListClassName",function(e){return e.matches?"success":"danger"}),E(v(v(a)),"_explainMatchResult",function(){return a.state.matchData?a.state.matchData.matches?s.default.createElement("span",null,s.default.createElement("i",{className:"fa fa-check",style:{color:"green"}})," This message would be routed to this stream."):s.default.createElement("span",null,s.default.createElement("i",{className:"fa fa-remove",style:{color:"red"}})," This message would not be routed to this stream."):"Please load a message to check if it would match against these rules and therefore be routed into this stream."}),a}var t,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,s.default.Component),t=u,r=[{key:"propTypes",value:function(){return{currentUser:n.default.object.isRequired,streamId:n.default.string.isRequired,messageId:n.default.string,index:n.default.string}}}],(a=[{key:"componentDidMount",value:function(){this.loadData(),_.onChange(this.loadData),S.onChange(this.loadData)}},{key:"componentWillUnmount",value:function(){_.unregister(this.loadData),S.unregister(this.loadData)}},{key:"render",value:function(){var t=this,e=this.state.matchData?this._getListClassName(this.state.matchData):"info";return this.state.stream&&this.state.streamRuleTypes?s.default.createElement("div",{className:"row content"},s.default.createElement("div",{className:"col-md-12 streamrule-sample-message"},s.default.createElement("h2",null,"1. Load a message to test rules"),s.default.createElement("div",{className:"stream-loader"},s.default.createElement(c.default,{messageId:this.props.messageId,index:this.props.index,onMessageLoaded:this.onMessageLoaded})),s.default.createElement("div",{className:"spinner",style:{display:"none"}},s.default.createElement("h2",null,s.default.createElement("i",{className:"fa fa-spinner fa-spin"}),"  Loading message")),s.default.createElement("div",{className:"sample-message-display",style:{display:"none",marginTop:"5px"}},s.default.createElement("strong",null,"Next step:"),"Add/delete/modify stream rules in step 2 and see if the example message would have been routed into the stream or not. Use the button on the right to add a stream rule."),s.default.createElement("hr",null),s.default.createElement("div",{className:"buttons pull-right"},s.default.createElement("button",{className:"btn btn-success show-stream-rule",onClick:this._onAddStreamRule},"Add stream rule"),s.default.createElement(m.default,{ref:function(e){t.newStreamRuleForm=e},title:"New Stream Rule",streamRuleTypes:this.state.streamRuleTypes,onSubmit:this._onStreamRuleFormSubmit})),s.default.createElement("h2",null,"2. Manage stream rules"),this._explainMatchResult(),s.default.createElement(f.default,{stream:this.state.stream,onChange:this.loadData}),s.default.createElement(o.Alert,{bsStyle:e},s.default.createElement(d.default,{stream:this.state.stream,streamRuleTypes:this.state.streamRuleTypes,permissions:this.props.currentUser.permissions,matchData:this.state.matchData})),s.default.createElement("p",{style:{marginTop:"10px"}},s.default.createElement(l.LinkContainer,{to:i.default.STREAMS},s.default.createElement(o.Button,{bsStyle:"success"},"I'm done!"))))):s.default.createElement("div",{className:"row content"},s.default.createElement("div",{style:{marginLeft:10}},s.default.createElement(p.default,null)))}}])&&y(t.prototype,a),r&&y(t,r),u}();exports.default=u,e.exports=exports.default},"BRu+HbLW":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=r(t("ii0bleBb")),c=r(t("ivGQtwpr")),f=t("wMSvutaJ"),d=t("B4BR5PLd"),m=r(t("FOEh8xnd")),p=t("oBIKikY9"),h=t("2wyBGuX7"),y=r(t("mc0qlNhN")),b=r(t("dkQTzQ9h")),s=r(t("L8npJDrf")),g=r(t("Ev0XvFgJ"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var l=function(e){function u(){var e,a,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=this,r=(e=v(u)).call.apply(e,[this].concat(o)),_(E(E(a=!r||"object"!==i(r)&&"function"!=typeof r?E(t):r)),"state",a.props.streamRule),_(E(E(a)),"FIELD_PRESENCE_RULE_TYPE",5),_(E(E(a)),"ALWAYS_MATCH_RULE_TYPE",7),_(E(E(a)),"modal",void 0),_(E(E(a)),"_resetValues",function(){a.setState(a.props.streamRule)}),_(E(E(a)),"_onSubmit",function(){a.state.type===a.ALWAYS_MATCH_RULE_TYPE&&(a.state.field=""),a.state.type!==a.FIELD_PRESENCE_RULE_TYPE&&a.state.type!==a.ALWAYS_MATCH_RULE_TYPE||(a.state.value=""),a.props.onSubmit(a.props.streamRule.id,a.state),a.modal.close()}),_(E(E(a)),"_formatStreamRuleType",function(e){return c.default.createElement("option",{key:"streamRuleType".concat(e.id),value:e.id},e.short_desc)}),_(E(E(a)),"open",function(){a._resetValues(),a.modal.open()}),_(E(E(a)),"close",function(){a.modal.close()}),_(E(E(a)),"handleChange",function(e){var t={};t[e.target.name]=s.default.getValueFromInput(e.target),a.setState(t)}),a}var t,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,c.default.Component),t=u,(a=[{key:"render",value:function(){var t=this,e=this.state,a=e.field,r=e.type,n=e.value,o=e.inverted,l=e.description,u=this.props.streamRuleTypes.map(this._formatStreamRuleType),s=String(r)!==String(this.ALWAYS_MATCH_RULE_TYPE)?c.default.createElement(p.TypeAheadFieldInput,{id:"field-input",type:"text",required:!0,label:"Field",name:"field",defaultValue:a,onChange:this.handleChange,autoFocus:!0}):"",i=String(r)!==String(this.FIELD_PRESENCE_RULE_TYPE)&&String(r)!==String(this.ALWAYS_MATCH_RULE_TYPE)?c.default.createElement(d.Input,{id:"Value",type:"text",required:!0,label:"Value",name:"value",value:n,onChange:this.handleChange}):"";return c.default.createElement(m.default,{ref:function(e){t.modal=e},title:this.props.title,onSubmitForm:this._onSubmit,submitButtonText:"Save",formProps:{id:"StreamRuleForm"}},c.default.createElement("div",null,c.default.createElement(f.Col,{md:8},s,c.default.createElement(d.Input,{id:"Type",type:"select",required:!0,label:"Type",name:"type",value:r,onChange:this.handleChange},u),i,c.default.createElement(d.Input,{id:"Inverted",type:"checkbox",label:"Inverted",name:"inverted",checked:o,onChange:this.handleChange}),c.default.createElement(d.Input,{id:"Description",type:"textarea",label:"Description (optional)",name:"description",value:l,onChange:this.handleChange}),c.default.createElement("p",null,c.default.createElement("strong",null,"Result:")," ",c.default.createElement(g.default,{streamRule:this.state,streamRuleTypes:this.props.streamRuleTypes}))),c.default.createElement(f.Col,{md:4},c.default.createElement("div",{className:"well well-sm matcher-github"},"The server will try to convert to strings or numbers based on the matcher type as good as it can.",c.default.createElement("br",null),c.default.createElement("br",null),c.default.createElement("i",{className:"fa fa-github"}),c.default.createElement("a",{href:"https://github.com/Graylog2/graylog2-server/tree/".concat(b.default.getMajorAndMinorVersion(),"/graylog2-server/src/main/java/org/graylog2/streams/matchers"),target:"_blank"}," Take a look at the matcher code on GitHub"),c.default.createElement("br",null),c.default.createElement("br",null),"Regular expressions use Java syntax. ",c.default.createElement(h.DocumentationLink,{page:y.default.PAGES.STREAMS,title:"More information",text:c.default.createElement("i",{className:"fa fa-lightbulb-o"})})))))}}])&&n(t.prototype,a),r&&n(t,r),u}();_(l,"propTypes",{onSubmit:a.default.func.isRequired,streamRule:a.default.object,streamRuleTypes:a.default.array.isRequired,title:a.default.string.isRequired}),_(l,"defaultProps",{streamRule:{field:"",type:1,value:"",inverted:!1,description:""}});var u=l;exports.default=u,e.exports=exports.default},BgvbGDr4:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=c(t("ii0bleBb")),r=c(t("ivGQtwpr")),n=c(t("PcYM+wZ7")),o=c(t("4KF7VOU5")),l=t("wMSvutaJ"),u=c(t("8GEnGjyh")),s=t("oBIKikY9"),i=c(t("1VnJesae"));function c(e){return e&&e.__esModule?e:{default:e}}var f=i.default.getStore("CurrentUser"),d=i.default.getStore("Streams"),m=(0,n.default)({displayName:"StreamEditPage",propTypes:{params:a.default.object.isRequired,location:a.default.object.isRequired},mixins:[o.default.connect(f)],componentDidMount:function(){var t=this;d.get(this.props.params.streamId,function(e){t.setState({stream:e})})},_isLoading:function(){return!this.state.currentUser||!this.state.stream},render:function(){if(this._isLoading())return r.default.createElement(s.Spinner,null);var e=r.default.createElement(u.default,{currentUser:this.state.currentUser,streamId:this.props.params.streamId,messageId:this.props.location.query.message_id,index:this.props.location.query.index});return this.state.stream.is_default&&(e=r.default.createElement("div",{className:"row content"},r.default.createElement("div",{className:"col-md-12"},r.default.createElement(l.Alert,{bsStyle:"danger"},"The default stream cannot be edited.")))),r.default.createElement(s.DocumentTitle,{title:"Rules of Stream ".concat(this.state.stream.title)},r.default.createElement("div",null,r.default.createElement(s.PageHeader,{title:r.default.createElement("span",null,"Rules of Stream »",this.state.stream.title,"»")},r.default.createElement("span",null,"This screen is dedicated to an easy and comfortable creation and manipulation of stream rules. You can"," ","see the effect configured stream rules have on message matching here.")),e))}});exports.default=m,e.exports=exports.default},DmKcI6vk:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=r(t("ii0bleBb")),s=r(t("ivGQtwpr")),i=r(t("G519J5S7")),n=t("oBIKikY9");function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e){function u(){var e,t,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=this,r=(e=f(u)).call.apply(e,[this].concat(o)),m(d(d(t=!r||"object"!==c(r)&&"function"!=typeof r?d(a):r)),"_formatStreamRules",function(e){return e&&0<e.length?e.map(function(e){return s.default.createElement(i.default,{key:e.id,permissions:t.props.permissions,matchData:t.props.matchData,onSubmit:t.props.onSubmit,onDelete:t.props.onDelete,stream:t.props.stream,streamRule:e,streamRuleTypes:t.props.streamRuleTypes})}):s.default.createElement("li",null,"No rules defined.")}),t}var t,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,s.default.Component),t=u,(a=[{key:"render",value:function(){if(this.props.stream){var e=this._formatStreamRules(this.props.stream.rules);return s.default.createElement("ul",{className:"streamrules-list"},e)}return s.default.createElement(n.Spinner,null)}}])&&o(t.prototype,a),r&&o(t,r),u}();m(u,"propTypes",{matchData:a.default.object,onSubmit:a.default.func,onDelete:a.default.func,permissions:a.default.array.isRequired,stream:a.default.object.isRequired,streamRuleTypes:a.default.array.isRequired});var p=u;exports.default=p,e.exports=exports.default},Ev0XvFgJ:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=r(t("ii0bleBb")),n=r(t("ivGQtwpr"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u=function(e){function u(){var e,t,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return a=this,r=(e=i(u)).call.apply(e,[this].concat(o)),f(c(c(t=!r||"object"!==s(r)&&"function"!=typeof r?c(a):r)),"EMPTY_TAG","<empty>"),f(c(c(t)),"FIELD_PRESENCE_RULE_TYPE",5),f(c(c(t)),"ALWAYS_MATCH_RULE_TYPE",7),f(c(c(t)),"_getTypeForInteger",function(t,e){if(e)return e.filter(function(e){return String(e.id)===String(t)})[0]}),f(c(c(t)),"_formatRuleValue",function(e){return String(e.type)!==String(t.FIELD_PRESENCE_RULE_TYPE)?e.value?e.value:t.EMPTY_TAG:null}),f(c(c(t)),"_formatRuleField",function(e){return e.field?e.field:t.EMPTY_TAG}),t}var t,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,n.default.Component),t=u,(a=[{key:"render",value:function(){var e=this.props.streamRule,t=this._getTypeForInteger(e.type,this.props.streamRuleTypes),a=e.inverted?"not ":null,r=t?t.long_desc:null;return String(e.type)===String(this.ALWAYS_MATCH_RULE_TYPE)?n.default.createElement("span",null,"Rule always matches"):n.default.createElement("span",null,"Field ",n.default.createElement("em",null,this._formatRuleField(e))," must ",a,r," ",n.default.createElement("em",null,this._formatRuleValue(e)))}}])&&o(t.prototype,a),r&&o(t,r),u}();f(u,"propTypes",{streamRule:a.default.object.isRequired,streamRuleTypes:a.default.array.isRequired});var d=u;exports.default=d,e.exports=exports.default},G519J5S7:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=c(t("ii0bleBb")),l=c(t("ivGQtwpr")),r=c(t("PcYM+wZ7")),n=c(t("dOmQZ9N/")),u=c(t("BRu+HbLW")),s=c(t("Ev0XvFgJ")),o=c(t("1VnJesae")),i=c(t("8GJ6oOEd"));function c(e){return e&&e.__esModule?e:{default:e}}var f=o.default.getStore("StreamRules"),d=(0,r.default)({displayName:"StreamRule",propTypes:{matchData:a.default.array,onDelete:a.default.func,onSubmit:a.default.func,permissions:a.default.array.isRequired,stream:a.default.object.isRequired,streamRule:a.default.object.isRequired,streamRuleTypes:a.default.array.isRequired},mixins:[n.default],_onEdit:function(e){e.preventDefault(),this.streamRuleForm.open()},_onDelete:function(e){var t=this;e.preventDefault(),window.confirm("Do you really want to delete this stream rule?")&&f.remove(this.props.stream.id,this.props.streamRule.id,function(){t.props.onDelete&&t.props.onDelete(t.props.streamRule.id),i.default.success("Stream rule has been successfully deleted.","Success")})},_onSubmit:function(e,t){var a=this;f.update(this.props.stream.id,e,t,function(){a.props.onSubmit&&a.props.onSubmit(e,t),i.default.success("Stream rule has been successfully updated.","Success")})},_formatActionItems:function(){return l.default.createElement("span",null,l.default.createElement("a",{href:"#",onClick:this._onDelete,style:{marginRight:5}},l.default.createElement("i",{className:"fa fa-trash-o"})),l.default.createElement("a",{href:"#",onClick:this._onEdit,style:{marginRight:5}},l.default.createElement("i",{className:"fa fa-edit"})))},_getMatchDataClassNames:function(){return this.props.matchData.rules[this.props.streamRule.id]?"alert-success":"alert-danger"},render:function(){var t=this,e=this.props.streamRule,a=this.props.streamRuleTypes,r=this.isPermitted(this.props.permissions,["streams:edit:".concat(this.props.stream.id)])?this._formatActionItems():null,n=this.props.matchData?this._getMatchDataClassNames():null,o=this.props.streamRule.description?l.default.createElement("small",null," ","(",this.props.streamRule.description,")"):null;return l.default.createElement("li",{className:n},r,l.default.createElement(s.default,{streamRule:e,streamRuleTypes:a}),l.default.createElement(u.default,{ref:function(e){t.streamRuleForm=e},streamRule:e,streamRuleTypes:a,title:"Edit Stream Rule",onSubmit:this._onSubmit}),o)}});exports.default=d,e.exports=exports.default},yTX2MyD2:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=l(t("ii0bleBb")),n=l(t("ivGQtwpr")),o=t("B4BR5PLd"),r=l(t("1VnJesae")),s=l(t("8GJ6oOEd"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h=r.default.getStore("Streams"),u=function(e){function u(){var e,a,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=this,r=(e=f(u)).call.apply(e,[this].concat(o)),p(m(m(a=!r||"object"!==i(r)&&"function"!=typeof r?m(t):r)),"handleTypeChangeToAnd",function(){a.handleTypeChange("AND")}),p(m(m(a)),"handleTypeChangeToOr",function(){a.handleTypeChange("OR")}),p(m(m(a)),"handleTypeChange",function(t){window.confirm("You are about to change how rules are applied to this stream, do you want to continue? Changes will take effect immediately.")&&h.update(a.props.stream.id,{matching_type:t},function(e){return a.props.onChange(),s.default.success("Messages will now be routed into the stream when ".concat("AND"===t?"all":"any"," rules are matched"),"Success"),e})}),a}var t,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,n.default.Component),t=u,(a=[{key:"render",value:function(){return n.default.createElement("div",{className:"streamrule-connector-type-form"},n.default.createElement("div",null,n.default.createElement(o.Input,{id:"streamrule-and-connector",type:"radio",label:"A message must match all of the following rules",checked:"AND"===this.props.stream.matching_type,onChange:this.handleTypeChangeToAnd}),n.default.createElement(o.Input,{id:"streamrule-or-connector",type:"radio",label:"A message must match at least one of the following rules",checked:"OR"===this.props.stream.matching_type,onChange:this.handleTypeChangeToOr})))}}])&&c(t.prototype,a),r&&c(t,r),u}();p(u,"propTypes",{stream:a.default.object.isRequired,onChange:a.default.func.isRequired});var y=u;exports.default=y,e.exports=exports.default}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-22"],{"/8dZfPfB":function(Bs,exports,Fs){var Hs,Us;!function(){var z={version:"3.5.17"},o=[].slice,f=function(t){return o.call(t)},y=this.document;function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function D(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(y)try{f(y.documentElement.childNodes)[0].nodeType}catch(t){f=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),y)try{y.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var e=this.Element.prototype,n=e.setAttribute,i=e.setAttributeNS,r=this.CSSStyleDeclaration.prototype,a=r.setProperty;e.setAttribute=function(t,e){n.call(this,t,e+"")},e.setAttributeNS=function(t,e,n){i.call(this,t,e,n+"")},r.setProperty=function(t,e,n){a.call(this,t,e+"",n)}}function u(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function l(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function t(o){return{left:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;o(t[r],e)<0?n=r+1:i=r}return n},right:function(t,e,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=t.length);n<i;){var r=n+i>>>1;0<o(t[r],e)?i=r:n=r+1}return n}}}z.ascending=u,z.descending=function(t,e){return e<t?-1:t<e?1:t<=e?0:NaN},z.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&i<n&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&i<n&&(n=i)}return n},z.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;++r<o;)if(null!=(i=t[r])&&i<=i){n=i;break}for(;++r<o;)null!=(i=t[r])&&n<i&&(n=i)}else{for(;++r<o;)if(null!=(i=e.call(t,t[r],r))&&i<=i){n=i;break}for(;++r<o;)null!=(i=e.call(t,t[r],r))&&n<i&&(n=i)}return n},z.extent=function(t,e){var n,i,r,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(i=t[o])&&i<=i){n=r=i;break}for(;++o<a;)null!=(i=t[o])&&(i<n&&(n=i),r<i&&(r=i))}else{for(;++o<a;)if(null!=(i=e.call(t,t[o],o))&&i<=i){n=r=i;break}for(;++o<a;)null!=(i=e.call(t,t[o],o))&&(i<n&&(n=i),r<i&&(r=i))}return[n,r]},z.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)c(n=+t[o])&&(i+=n);else for(;++o<r;)c(n=+e.call(t,t[o],o))&&(i+=n);return i},z.mean=function(t,e){var n,i=0,r=t.length,o=-1,a=r;if(1===arguments.length)for(;++o<r;)c(n=l(t[o]))?i+=n:--a;else for(;++o<r;)c(n=l(e.call(t,t[o],o)))?i+=n:--a;if(a)return i/a},z.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},z.median=function(t,e){var n,i=[],r=t.length,o=-1;if(1===arguments.length)for(;++o<r;)c(n=l(t[o]))&&i.push(n);else for(;++o<r;)c(n=l(e.call(t,t[o],o)))&&i.push(n);if(i.length)return z.quantile(i.sort(u),.5)},z.variance=function(t,e){var n,i,r=t.length,o=0,a=0,s=-1,u=0;if(1===arguments.length)for(;++s<r;)c(n=l(t[s]))&&(a+=(i=n-o)*(n-(o+=i/++u)));else for(;++s<r;)c(n=l(e.call(t,t[s],s)))&&(a+=(i=n-o)*(n-(o+=i/++u)));if(1<u)return a/(u-1)},z.deviation=function(){var t=z.variance.apply(this,arguments);return t?Math.sqrt(t):t};var h=t(u);function d(t){return t.length}z.bisectLeft=h.left,z.bisect=z.bisectRight=h.right,z.bisector=function(n){return t(1===n.length?function(t,e){return u(n(t),e)}:n)},z.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var i,r,o=n-e;o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t},z.permute=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i},z.pairs=function(t){for(var e=0,n=t.length-1,i=t[0],r=new Array(n<0?0:n);e<n;)r[e]=[i,i=t[++e]];return r},z.transpose=function(t){if(!(r=t.length))return[];for(var e=-1,n=z.min(t,d),i=new Array(n);++e<n;)for(var r,o=-1,a=i[e]=new Array(r);++o<r;)a[o]=t[o][e];return i},z.zip=function(){return z.transpose(arguments)},z.keys=function(t){var e=[];for(var n in t)e.push(n);return e},z.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},z.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},z.merge=function(t){for(var e,n,i,r=t.length,o=-1,a=0;++o<r;)a+=t[o].length;for(n=new Array(a);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--a]=i[e];return n};var R=Math.abs;function p(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function _(){this._=Object.create(null)}z.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var i,r=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(R(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(i=t+n*++a)>e;)r.push(i/o);else for(;(i=t+n*++a)<e;)r.push(i/o);return r},z.map=function(t,e){var n=new _;if(t instanceof _)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(1===arguments.length)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e.call(t,i=t[r],r),i)}else for(var a in t)n.set(a,t[a]);return n};var g="__proto__",m="\0";function v(t){return(t+="")===g||t[0]===m?m+t:t}function x(t){return(t+="")[0]===m?t.slice(1):t}function b(t){return v(t)in this._}function w(t){return(t=v(t))in this._&&delete this._[t]}function S(){var t=[];for(var e in this._)t.push(x(e));return t}function A(){var t=0;for(var e in this._)++t;return t}function T(){for(var t in this._)return!1;return!0}function P(){this._=Object.create(null)}function I(t){return t}function C(e,n,i){return function(){var t=i.apply(n,arguments);return t===n?e:t}}function L(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,i=E.length;n<i;++n){var r=E[n]+e;if(r in t)return r}}p(_,{has:b,get:function(t){return this._[v(t)]},set:function(t,e){return this._[v(t)]=e},remove:w,keys:S,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:x(e),value:this._[e]});return t},size:A,empty:T,forEach:function(t){for(var e in this._)t.call(this,x(e),this._[e])}}),z.nest=function(){var h,f,d={},p=[],e=[];function g(n,t,i){if(i>=p.length)return f?f.call(d,t):h?t.sort(h):t;for(var e,r,o,a,s=-1,u=t.length,l=p[i++],c=new _;++s<u;)(a=c.get(e=l(r=t[s])))?a.push(r):c.set(e,[r]);return o=n?(r=n(),function(t,e){r.set(t,g(n,e,i))}):(r={},function(t,e){r[t]=g(n,e,i)}),c.forEach(o),r}return d.map=function(t,e){return g(e,t,0)},d.entries=function(t){return function n(t,i){if(i>=p.length)return t;var r=[],o=e[i++];return t.forEach(function(t,e){r.push({key:t,values:n(e,i)})}),o?r.sort(function(t,e){return o(t.key,e.key)}):r}(g(z.map,t,0),0)},d.key=function(t){return p.push(t),d},d.sortKeys=function(t){return e[p.length-1]=t,d},d.sortValues=function(t){return h=t,d},d.rollup=function(t){return f=t,d},d},z.set=function(t){var e=new P;if(t)for(var n=0,i=t.length;n<i;++n)e.add(t[n]);return e},p(P,{has:b,add:function(t){return this._[v(t+="")]=!0,t},remove:w,values:S,size:A,empty:T,forEach:function(t){for(var e in this._)t.call(this,x(e))}}),z.behavior={},z.rebind=function(t,e){for(var n,i=1,r=arguments.length;++i<r;)t[n=arguments[i]]=C(t,e,e[n]);return t};var E=["webkit","ms","moz","Moz","o","O"];function k(){}function M(){}function O(r){var o=[],a=new _;function t(){for(var t,e=o,n=-1,i=e.length;++n<i;)(t=e[n].on)&&t.apply(this,arguments);return r}return t.on=function(t,e){var n,i=a.get(t);return arguments.length<2?i&&i.on:(i&&(i.on=null,o=o.slice(0,n=o.indexOf(i)).concat(o.slice(n+1)),a.remove(t)),e&&o.push(a.set(t,{on:e})),r)},t}function G(){z.event.preventDefault()}function j(){for(var t,e=z.event;t=e.sourceEvent;)e=t;return e}function V(r){for(var o=new M,t=0,e=arguments.length;++t<e;)o[arguments[t]]=O(o);return o.of=function(n,i){return function(t){try{var e=t.sourceEvent=z.event;t.target=r,z.event=t,o[t.type].apply(n,i)}finally{z.event=e}}},o}z.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=O(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(0<=n&&(i=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},z.event=null,z.requote=function(t){return t.replace(N,"\\$&")};var N=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,B={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function F(t){return B(t,X),t}var H=function(t,e){return e.querySelector(t)},U=function(t,e){return e.querySelectorAll(t)},Z=function(t,e){var n=t.matches||t[L(t,"matchesSelector")];return(Z=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(H=function(t,e){return Sizzle(t,e)[0]||null},U=Sizzle,Z=Sizzle.matchesSelector),z.selection=function(){return z.select(y.documentElement)};var X=z.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return H(t,this)}}function W(t){return"function"==typeof t?t:function(){return U(t,this)}}X.select=function(t){var e,n,i,r,o=[];t=Y(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(i=this[a]).parentNode;for(var u=-1,l=i.length;++u<l;)(r=i[u])?(e.push(n=t.call(r,r.__data__,u,a)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return F(o)},X.selectAll=function(t){var e,n,i=[];t=W(t);for(var r=-1,o=this.length;++r<o;)for(var a=this[r],s=-1,u=a.length;++s<u;)(n=a[s])&&(i.push(e=f(t.call(n,n.__data__,s,r))),e.parentNode=n);return F(i)};var q="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function K(e,n){return e=z.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function J(t){return t.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+z.requote(t)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function nt(n,i){var r=(n=et(n).map(it)).length;return"function"==typeof i?function(){for(var t=-1,e=i.apply(this,arguments);++t<r;)n[t](this,e)}:function(){for(var t=-1;++t<r;)n[t](this,i)}}function it(i){var r=tt(i);return function(t,e){if(n=t.classList)return e?n.add(i):n.remove(i);var n=t.getAttribute("class")||"";e?(r.lastIndex=0,r.test(n)||t.setAttribute("class",J(n+" "+i))):t.setAttribute("class",J(n.replace(r," ")))}}function rt(e,n,i){return null==n?function(){this.style.removeProperty(e)}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}:function(){this.style.setProperty(e,n,i)}}function ot(e,n){return null==n?function(){delete this[e]}:"function"==typeof n?function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}:function(){this[e]=n}}function at(n){return"function"==typeof n?n:(n=z.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){var t=this.ownerDocument,e=this.namespaceURI;return e===q&&t.documentElement.namespaceURI===q?t.createElement(n):t.createElementNS(e,n)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function ut(t){return{__data__:t}}function lt(t){return function(){return Z(this,t)}}function ct(t,e){for(var n=0,i=t.length;n<i;n++)for(var r,o=t[n],a=0,s=o.length;a<s;a++)(r=o[a])&&e(r,a,n);return t}function ht(t){return B(t,ft),t}z.ns={prefix:Q,qualify:function(t){var e=t.indexOf(":"),n=t;return 0<=e&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Q.hasOwnProperty(n)?{space:Q[n],local:t}:t}},X.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=z.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(K(e,t[e]));return this}return this.each(K(t,e))},X.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),i=(t=et(t)).length,r=-1;if(e=n.classList){for(;++r<i;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");++r<i;)if(!tt(t[r]).test(e))return!1;return!0}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},X.style=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=""),t)this.each(rt(n,t[n],e));return this}if(i<2){var r=this.node();return D(r).getComputedStyle(r,null).getPropertyValue(t)}n=""}return this.each(rt(t,e,n))},X.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},X.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},X.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},X.append=function(t){return t=at(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},X.insert=function(t,e){return t=at(t),e=Y(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},X.remove=function(){return this.each(st)},X.data=function(t,p){var e,n,i=-1,r=this.length;if(!arguments.length){for(t=new Array(r=(e=this[0]).length);++i<r;)(n=e[i])&&(t[i]=n.__data__);return t}function o(t,e){var n,i,r,o=t.length,a=e.length,s=Math.min(o,a),u=new Array(a),l=new Array(a),c=new Array(o);if(p){var h,f=new _,d=new Array(o);for(n=-1;++n<o;)(i=t[n])&&(f.has(h=p.call(i,i.__data__,n))?c[n]=i:f.set(h,i),d[n]=h);for(n=-1;++n<a;)(i=f.get(h=p.call(e,r=e[n],n)))?!0!==i&&((u[n]=i).__data__=r):l[n]=ut(r),f.set(h,!0);for(n=-1;++n<o;)n in d&&!0!==f.get(d[n])&&(c[n]=t[n])}else{for(n=-1;++n<s;)i=t[n],r=e[n],i?(i.__data__=r,u[n]=i):l[n]=ut(r);for(;n<a;++n)l[n]=ut(e[n]);for(;n<o;++n)c[n]=t[n]}l.update=u,l.parentNode=u.parentNode=c.parentNode=t.parentNode,g.push(l),m.push(u),v.push(c)}var g=ht([]),m=F([]),v=F([]);if("function"==typeof t)for(;++i<r;)o(e=this[i],t.call(e,e.parentNode.__data__,i));else for(;++i<r;)o(e=this[i],t);return m.enter=function(){return g},m.exit=function(){return v},m},X.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},X.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=lt(t));for(var o=0,a=this.length;o<a;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,u=n.length;s<u;s++)(i=n[s])&&t.call(i,i.__data__,s,o)&&e.push(i)}return F(r)},X.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,i=this[t],r=i.length-1,o=i[r];0<=--r;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},X.sort=function(t){t=function(n){arguments.length||(n=u);return function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},X.each=function(i){return ct(this,function(t,e,n){i.call(t,t.__data__,e,n)})},X.call=function(t){var e=f(arguments);return t.apply(e[0]=this,e),this},X.empty=function(){return!this.node()},X.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],i=0,r=n.length;i<r;i++){var o=n[i];if(o)return o}return null},X.size=function(){var t=0;return ct(this,function(){++t}),t};var ft=[];function dt(r,e,n){var i="__on"+r,t=r.indexOf("."),o=gt;0<t&&(r=r.slice(0,t));var a=pt.get(r);function s(){var t=this[i];t&&(this.removeEventListener(r,t,t.$),delete this[i])}return a&&(r=a,o=mt),t?e?function(){var t=o(e,f(arguments));s.call(this),this.addEventListener(r,this[i]=t,t.$=n),t._=e}:s:e?k:function(){var t,e=new RegExp("^__on([^.]+)"+z.requote(r)+"$");for(var n in this)if(t=n.match(e)){var i=this[n];this.removeEventListener(t[1],i,i.$),delete this[n]}}}z.selection.enter=ht,(z.selection.enter.prototype=ft).append=X.append,ft.empty=X.empty,ft.node=X.node,ft.call=X.call,ft.size=X.size,ft.select=function(t){for(var e,n,i,r,o,a=[],s=-1,u=this.length;++s<u;){i=(r=this[s]).update,a.push(e=[]),e.parentNode=r.parentNode;for(var l=-1,c=r.length;++l<c;)(o=r[l])?(e.push(i[l]=n=t.call(r.parentNode,o.__data__,l,s)),n.__data__=o.__data__):e.push(null)}return F(a)},ft.insert=function(t,e){var a,s,u;return arguments.length<2&&(a=this,e=function(t,e,n){var i,r=a[n].update,o=r.length;for(n!=u&&(u=n,s=0),s<=e&&(s=e+1);!(i=r[s])&&++s<o;);return i}),X.insert.call(this,t,e)},z.select=function(t){var e;return"string"==typeof t?(e=[H(t,y)]).parentNode=y.documentElement:(e=[t]).parentNode=s(t),F([e])},z.selectAll=function(t){var e;return"string"==typeof t?(e=f(U(t,y))).parentNode=y.documentElement:(e=f(t)).parentNode=null,F([e])},X.on=function(t,e,n){var i=arguments.length;if(i<3){if("string"!=typeof t){for(n in i<2&&(e=!1),t)this.each(dt(n,t[n],e));return this}if(i<2)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(dt(t,e,n))};var pt=z.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(n,i){return function(t){var e=z.event;z.event=t,i[0]=this.__data__;try{n.apply(this,i)}finally{z.event=e}}}function mt(t,e){var n=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}y&&pt.forEach(function(t){"on"+t in y&&pt.remove(t)});var vt,_t=0;function yt(t){var n=".dragsuppress-"+ ++_t,i="click"+n,r=z.select(D(t)).on("touchmove"+n,G).on("dragstart"+n,G).on("selectstart"+n,G);if(null==vt&&(vt=!("onselectstart"in t)&&L(t.style,"userSelect")),vt){var o=s(t).style,a=o[vt];o[vt]="none"}return function(t){if(r.on(n,null),vt&&(o[vt]=a),t){var e=function(){r.on(i,null)};r.on(i,function(){G(),e()},!0),setTimeout(e,0)}}}z.mouse=function(t){return bt(t,j())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(xt<0){var r=D(t);if(r.scrollX||r.scrollY){var o=(n=z.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(o.f||o.e),n.remove()}}return i.y=xt?(i.x=e.pageX,e.pageY):(i.x=e.clientX,e.clientY),[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function wt(){return z.event.changedTouches[0].identifier}z.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=j().changedTouches),e)for(var i,r=0,o=e.length;r<o;++r)if((i=e[r]).identifier===n)return bt(t,i)},z.behavior.drag=function(){var g=V(n,"drag","dragstart","dragend"),m=null,t=i(k,z.mouse,D,"mousemove","mouseup"),e=i(wt,z.touch,I,"touchmove","touchend");function n(){this.on("mousedown.drag",t).on("touchstart.drag",e)}function i(c,h,f,d,p){return function(){var i,t=z.event.target.correspondingElement||z.event.target,r=this.parentNode,o=g.of(this,arguments),a=0,s=c(),e=".drag"+(null==s?"":"-"+s),n=z.select(f(t)).on(d+e,function(){var t,e,n=h(r,s);if(!n)return;t=n[0]-l[0],e=n[1]-l[1],a|=t|e,o({type:"drag",x:(l=n)[0]+i[0],y:n[1]+i[1],dx:t,dy:e})}).on(p+e,function(){if(!h(r,s))return;n.on(d+e,null).on(p+e,null),u(a),o({type:"dragend"})}),u=yt(t),l=h(r,s);i=m?[(i=m.apply(this,arguments)).x-l[0],i.y-l[1]]:[0,0],o({type:"dragstart"})}}return n.origin=function(t){return arguments.length?(m=t,n):m},z.rebind(n,g,"on")},z.touches=function(n,t){return arguments.length<2&&(t=j().touches),t?f(t).map(function(t){var e=bt(n,t);return e.identifier=t.identifier,e}):[]};var St=1e-6,At=St*St,Tt=Math.PI,Pt=2*Tt,Ct=Pt-St,Lt=Tt/2,Et=Tt/180,kt=180/Tt;function Mt(t){return 0<t?1:t<0?-1:0}function Ot(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Rt(t){return 1<t?0:t<-1?Tt:Math.acos(t)}function zt(t){return 1<t?Lt:t<-1?-Lt:Math.asin(t)}function Dt(t){return((t=Math.exp(t))+1/t)/2}function It(t){return(t=Math.sin(t/2))*t}var Gt=Math.SQRT2;z.interpolateZoom=function(t,e){var n,a,s=t[0],u=t[1],l=t[2],i=e[0],r=e[1],o=e[2],c=i-s,h=r-u,f=c*c+h*h;if(f<At)a=Math.log(o/l)/Gt,n=function(t){return[s+t*c,u+t*h,l*Math.exp(Gt*t*a)]};else{var d=Math.sqrt(f),p=(o*o-l*l+4*f)/(2*l*2*d),g=(o*o-l*l-4*f)/(2*o*2*d),m=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(g*g+1)-g);a=(v-m)/Gt,n=function(t){var e,n,i=t*a,r=Dt(m),o=l/(2*d)*(r*(n=Gt*i+m,((n=Math.exp(2*n))-1)/(n+1))-(e=m,((e=Math.exp(e))-1/e)/2));return[s+o*c,u+o*h,l*r/Dt(Gt*i+m)]}}return n.duration=1e3*a,n},z.behavior.zoom=function(){var e,u,n,i,x,r,o,a,s,b={x:0,y:0,k:1},l=[960,500],c=Nt,h=250,f=0,w="mousedown.zoom",d="mousemove.zoom",p="mouseup.zoom",S="touchstart.zoom",A=V(g,"zoomstart","zoom","zoomend");function g(t){t.on(w,O).on(Vt+".zoom",v).on("dblclick.zoom",_).on(S,R)}function T(t){return[(t[0]-b.x)/b.k,(t[1]-b.y)/b.k]}function P(t){b.k=Math.max(c[0],Math.min(c[1],t))}function C(t,e){var n;e=[(n=e)[0]*b.k+b.x,n[1]*b.k+b.y],b.x+=t[0]-e[0],b.y+=t[1]-e[1]}function L(t,e,n,i){t.__chart__={x:b.x,y:b.y,k:b.k},P(Math.pow(2,i)),C(u=e,n),t=z.select(t),0<h&&(t=t.transition().duration(h)),t.call(g.event)}function m(){o&&o.domain(r.range().map(function(t){return(t-b.x)/b.k}).map(r.invert)),s&&s.domain(a.range().map(function(t){return(t-b.y)/b.k}).map(a.invert))}function E(t){f++||t({type:"zoomstart"})}function k(t){m(),t({type:"zoom",scale:b.k,translate:[b.x,b.y]})}function M(t){--f||(t({type:"zoomend"}),u=null)}function O(){var t=this,e=A.of(t,arguments),n=0,i=z.select(D(t)).on(d,function(){n=1,C(z.mouse(t),r),k(e)}).on(p,function(){i.on(d,null).on(p,null),o(n),M(e)}),r=T(z.mouse(t)),o=yt(t);cs.call(t),E(e)}function R(){var l,c=this,h=A.of(c,arguments),f={},d=0,r=".zoom-"+z.event.changedTouches[0].identifier,p="touchmove"+r,g="touchend"+r,m=[],o=z.select(c),a=yt(c);function v(){var t=z.touches(c);return l=b.k,t.forEach(function(t){t.identifier in f&&(f[t.identifier]=T(t))}),t}function t(){var t=z.event.target;z.select(t).on(p,_).on(g,y),m.push(t);for(var e=z.event.changedTouches,n=0,i=e.length;n<i;++n)f[e[n].identifier]=null;var r=v(),o=Date.now();if(1===r.length){if(o-x<500){var a=r[0];L(c,a,f[a.identifier],Math.floor(Math.log(b.k)/Math.LN2)+1),G()}x=o}else if(1<r.length){a=r[0];var s=r[1],u=a[0]-s[0],l=a[1]-s[1];d=u*u+l*l}}function _(){var t,e,n,i,r=z.touches(c);cs.call(c);for(var o=0,a=r.length;o<a;++o,i=null)if(n=r[o],i=f[n.identifier]){if(e)break;t=n,e=i}if(i){var s=(s=n[0]-t[0])*s+(s=n[1]-t[1])*s,u=d&&Math.sqrt(s/d);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],P(u*l)}x=null,C(t,e),k(h)}function y(){if(z.event.touches.length){for(var t=z.event.changedTouches,e=0,n=t.length;e<n;++e)delete f[t[e].identifier];for(var i in f)return void v()}z.selectAll(m).on(r,null),o.on(w,O).on(S,R),a(),M(h)}t(),E(h),o.on(w,null).on(S,t)}function v(){var t=A.of(this,arguments);i?clearTimeout(i):(cs.call(this),e=T(u=n||z.mouse(this)),E(t)),i=setTimeout(function(){i=null,M(t)},50),G(),P(Math.pow(2,.002*jt())*b.k),C(u,e),k(t)}function _(){var t=z.mouse(this),e=Math.log(b.k)/Math.LN2;L(this,t,T(t),z.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Vt||(Vt="onwheel"in y?(jt=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in y?(jt=function(){return z.event.wheelDelta},"mousewheel"):(jt=function(){return-z.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var s=A.of(this,arguments),e=b;ds?z.select(this).transition().each("start.zoom",function(){b=this.__chart__||{x:0,y:0,k:1},E(s)}).tween("zoom:zoom",function(){var i=l[0],t=l[1],r=u?u[0]:i/2,o=u?u[1]:t/2,a=z.interpolateZoom([(r-b.x)/b.k,(o-b.y)/b.k,i/b.k],[(r-e.x)/e.k,(o-e.y)/e.k,i/e.k]);return function(t){var e=a(t),n=i/e[2];this.__chart__=b={x:r-e[0]*n,y:o-e[1]*n,k:n},k(s)}}).each("interrupt.zoom",function(){M(s)}).each("end.zoom",function(){M(s)}):(this.__chart__=b,E(s),k(s),M(s))})},g.translate=function(t){return arguments.length?(b={x:+t[0],y:+t[1],k:b.k},m(),g):[b.x,b.y]},g.scale=function(t){return arguments.length?(b={x:b.x,y:b.y,k:null},P(+t),m(),g):b.k},g.scaleExtent=function(t){return arguments.length?(c=null==t?Nt:[+t[0],+t[1]],g):c},g.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],g):n},g.size=function(t){return arguments.length?(l=t&&[+t[0],+t[1]],g):l},g.duration=function(t){return arguments.length?(h=+t,g):h},g.x=function(t){return arguments.length?(r=(o=t).copy(),b={x:0,y:0,k:1},g):o},g.y=function(t){return arguments.length?(a=(s=t).copy(),b={x:0,y:0,k:1},g):s},z.rebind(g,A,"on")};var jt,Vt,Nt=[0,1/0];function Bt(){}function Ft(t,e,n){return this instanceof Ft?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ft?new Ft(t.h,t.s,t.l):ce(""+t,he,Ft):new Ft(t,e,n)}(z.color=Bt).prototype.toString=function(){return this.rgb()+""};var Ht=(z.hsl=Ft).prototype=new Bt;function Ut(t,e,n){var i,r;function o(t){return Math.round(255*(360<(e=t)?e-=360:e<0&&(e+=360),e<60?i+(r-i)*e/60:e<180?r:e<240?i+(r-i)*(240-e)/60:i));var e}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:1<e?1:e,i=2*(n=n<0?0:1<n?1:n)-(r=n<=.5?n*(1+e):n+e-n*e),new oe(o(t+120),o(t),o(t-120))}function Zt(t,e,n){return this instanceof Zt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Zt?new Zt(t.h,t.c,t.l):ee(t instanceof Wt?t.l:(t=fe((t=z.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Zt(t,e,n)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ft(this.h,this.s,t*this.l)},Ht.rgb=function(){return Ut(this.h,this.s,this.l)};var Xt=(z.hcl=Zt).prototype=new Bt;function Yt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Wt(n,Math.cos(t*=Et)*e,Math.sin(t)*e)}function Wt(t,e,n){return this instanceof Wt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Wt?new Wt(t.l,t.a,t.b):t instanceof Zt?Yt(t.h,t.c,t.l):fe((t=oe(t)).r,t.g,t.b):new Wt(t,e,n)}Xt.brighter=function(t){return new Zt(this.h,this.c,Math.min(100,this.l+qt*(arguments.length?t:1)))},Xt.darker=function(t){return new Zt(this.h,this.c,Math.max(0,this.l-qt*(arguments.length?t:1)))},Xt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},z.lab=Wt;var qt=18,Qt=.95047,Kt=1,Jt=1.08883,$t=Wt.prototype=new Bt;function te(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return new oe(re(3.2404542*(r=ne(r)*Qt)-1.5371385*(i=ne(i)*Kt)-.4985314*(o=ne(o)*Jt)),re(-.969266*r+1.8760108*i+.041556*o),re(.0556434*r-.2040259*i+1.0572252*o))}function ee(t,e,n){return 0<t?new Zt(Math.atan2(n,e)*kt,Math.sqrt(e*e+n*n),t):new Zt(NaN,NaN,t)}function ne(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function ie(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function re(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t,e,n){return this instanceof oe?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof oe?new oe(t.r,t.g,t.b):ce(""+t,oe,Ut):new oe(t,e,n)}function ae(t){return new oe(t>>16,t>>8&255,255&t)}function se(t){return ae(t)+""}$t.brighter=function(t){return new Wt(Math.min(100,this.l+qt*(arguments.length?t:1)),this.a,this.b)},$t.darker=function(t){return new Wt(Math.max(0,this.l-qt*(arguments.length?t:1)),this.a,this.b)},$t.rgb=function(){return te(this.l,this.a,this.b)};var ue=(z.rgb=oe).prototype=new Bt;function le(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,n){var i,r,o,a=0,s=0,u=0;if(i=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(pe(r[0]),pe(r[1]),pe(r[2]))}return(o=ge.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,u=15&o,u|=u<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,u=255&o)),e(a,s,u))}function he(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,u=(a+o)/2;return s?(r=u<.5?s/(a+o):s/(2-a-o),i=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,i*=60):(i=NaN,r=0<u&&u<1?0:i),new Ft(i,r,u)}function fe(t,e,n){var i=ie((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(n=de(n)))/Qt),r=ie((.2126729*t+.7151522*e+.072175*n)/Kt);return Wt(116*r-16,500*(i-r),200*(r-ie((.0193339*t+.119192*e+.9503041*n)/Jt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}ue.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b;return e||n||i?(e&&e<30&&(e=30),n&&n<30&&(n=30),i&&i<30&&(i=30),new oe(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,i/t))):new oe(30,30,30)},ue.darker=function(t){return new oe((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},ue.hsl=function(){return he(this.r,this.g,this.b)},ue.toString=function(){return"#"+le(this.r)+le(this.g)+le(this.b)};var ge=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function me(t){return"function"==typeof t?t:function(){return t}}function ve(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=null),_e(t,e,i,n)}}function _e(r,o,a,t){var n,s={},u=z.dispatch("beforesend","progress","load","error"),l={},c=new XMLHttpRequest,h=null;function e(){var t,e,n,i=c.status;if(!i&&((n=(e=c).responseType)&&"text"!==n?e.response:e.responseText)||200<=i&&i<300||304===i){try{t=a.call(s,c)}catch(t){return void u.error.call(s,t)}u.load.call(s,t)}else u.error.call(s,c)}return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(r)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=e:c.onreadystatechange=function(){3<c.readyState&&e()},c.onprogress=function(t){var e=z.event;z.event=t;try{u.progress.call(s,c)}finally{z.event=e}},s.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",s)},s.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",s):o},s.responseType=function(t){return arguments.length?(h=t,s):h},s.response=function(t){return a=t,s},["get","post"].forEach(function(t){s[t]=function(){return s.send.apply(s,[t].concat(f(arguments)))}}),s.send=function(t,e,n){if(2===arguments.length&&"function"==typeof e&&(n=e,e=null),c.open(t,r,!0),null==o||"accept"in l||(l.accept=o+",*/*"),c.setRequestHeader)for(var i in l)c.setRequestHeader(i,l[i]);return null!=o&&c.overrideMimeType&&c.overrideMimeType(o),null!=h&&(c.responseType=h),null!=n&&s.on("error",n).on("load",function(t){n(null,t)}),u.beforesend.call(s,c),c.send(null==e?null:e),s},s.abort=function(){return c.abort(),s},z.rebind(s,u,"on"),null==t?s:s.get(1===(n=t).length?function(t,e){n(null==t?e:null)}:n)}ge.forEach(function(t,e){ge.set(t,ae(e))}),z.functor=me,z.xhr=ve(I),z.dsv=function(r,o){var e=new RegExp('["'+r+"\n]"),f=r.charCodeAt(0);function a(t,e,n){arguments.length<3&&(n=e,e=null);var i=_e(t,o,null==e?s:u(e),n);return i.row=function(t){return arguments.length?i.response(null==(e=t)?s:u(t)):e},i}function s(t){return a.parse(t.responseText)}function u(e){return function(t){return a.parse(t.responseText,e)}}function n(t){return t.map(l).join(r)}function l(t){return e.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,i){var r;return a.parseRows(t,function(t,e){if(r)return r(t,e-1);var n=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=i?function(t,e){return i(n(t),e)}:n})},a.parseRows=function(r,t){var e,o,a={},s={},n=[],u=r.length,l=0,i=0;function c(){if(u<=l)return s;if(o)return o=!1,a;var t=l;if(34===r.charCodeAt(t)){for(var e=t;e++<u;)if(34===r.charCodeAt(e)){if(34!==r.charCodeAt(e+1))break;++e}return l=e+2,13===(n=r.charCodeAt(e+1))?(o=!0,10===r.charCodeAt(e+2)&&++l):10===n&&(o=!0),r.slice(t+1,e).replace(/""/g,'"')}for(;l<u;){var n,i=1;if(10===(n=r.charCodeAt(l++)))o=!0;else if(13===n)o=!0,10===r.charCodeAt(l)&&(++l,++i);else if(n!==f)continue;return r.slice(t,l-i)}return r.slice(t)}for(;(e=c())!==s;){for(var h=[];e!==a&&e!==s;)h.push(e),e=c();t&&null==(h=t(h,i++))||n.push(h)}return n},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var n=new P,i=[];return t.forEach(function(t){for(var e in t)n.has(e)||i.push(n.add(e))}),[i.map(l).join(r)].concat(t.map(function(e){return i.map(function(t){return l(e[t])}).join(r)})).join("\n")},a.formatRows=function(t){return t.map(n).join("\n")},a},z.csv=z.dsv(",","text/csv"),z.tsv=z.dsv("\t","text/tab-separated-values");var ye,xe,be,we,Se=this[L(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Ae(t,e,n){var i=arguments.length;i<2&&(e=0),i<3&&(n=Date.now());var r={c:t,t:n+e,n:null};return xe?xe.n=r:ye=r,xe=r,be||(we=clearTimeout(we),be=1,Se(Te)),r}function Te(){var t=Pe(),e=Ce()-t;24<e?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Te,e)),be=0):(be=1,Se(Te))}function Pe(){for(var t=Date.now(),e=ye;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ce(){for(var t,e=ye,n=1/0;e;)e=e.c?(e.t<n&&(n=e.t),(t=e).n):t?t.n=e.n:ye=e.n;return xe=t,n}function Le(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}z.timer=function(){Ae.apply(this,arguments)},z.timer.flush=function(){Pe(),Ce()},z.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ee=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*R(8-e));return{scale:8<e?function(t){return t/n}:function(t){return t*n},symbol:t}});z.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=z.round(t,Le(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ee[8+n/3]};var ke=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Me=z.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=z.round(t,Le(t,e))).toFixed(Math.max(0,Math.min(20,Le(t*(1+1e-15),e))))}});function Oe(t){return t+""}var Re=z.time={},ze=Date;function De(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}De.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ie.setUTCDate.apply(this._,arguments)},setDay:function(){Ie.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ie.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ie.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ie.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ie.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ie.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ie.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ie.setTime.apply(this._,arguments)}};var Ie=Date.prototype;function Ge(i,o,a){function t(t){var e=i(t),n=r(e,1);return t-e<n-t?e:n}function s(t){return o(t=i(new ze(t-1)),1),t}function r(t,e){return o(t=new ze(+t),e),t}function u(t,e,n){var i=s(t),r=[];if(1<n)for(;i<e;)a(i)%n||r.push(new Date(+i)),o(i,1);else for(;i<e;)r.push(new Date(+i)),o(i,1);return r}(i.floor=i).round=t,i.ceil=s,i.offset=r,i.range=u;var e=i.utc=je(i);return(e.floor=e).round=je(t),e.ceil=je(s),e.offset=je(r),e.range=function(t,e,n){try{var i=new(ze=De);return i._=t,u(i,e,n)}finally{ze=Date}},i}function je(i){return function(t,e){try{var n=new(ze=De);return n._=t,i(n,e)._}finally{ze=Date}}}Re.year=Ge(function(t){return(t=Re.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Re.years=Re.year.range,Re.years.utc=Re.year.utc.range,Re.day=Ge(function(t){var e=new ze(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Re.days=Re.day.range,Re.days.utc=Re.day.utc.range,Re.dayOfYear=function(t){var e=Re.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=Re[t]=Ge(function(t){return(t=Re.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var e=Re.year(t).getDay();return Math.floor((Re.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});Re[t+"s"]=e.range,Re[t+"s"].utc=e.utc.range,Re[t+"OfYear"]=function(t){var e=Re.year(t).getDay();return Math.floor((Re.dayOfYear(t)+(e+n)%7)/7)}}),Re.week=Re.sunday,Re.weeks=Re.sunday.range,Re.weeks.utc=Re.sunday.utc.range,Re.weekOfYear=Re.sundayOfYear;var Ve={"-":"",_:" ",0:"0"},Ne=/^\s*\d+/,Be=/^%/;function Fe(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function He(t){return new RegExp("^(?:"+t.map(z.requote).join("|")+")","i")}function Ue(t){for(var e=new _,n=-1,i=t.length;++n<i;)e.set(t[n].toLowerCase(),n);return e}function Ze(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Xe(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function Ye(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function We(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function qe(t,e,n){Ne.lastIndex=0;var i,r=Ne.exec(e.slice(n,n+2));return r?(t.y=(i=+r[0])+(68<i?1900:2e3),n+r[0].length):-1}function Qe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Ke(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Je(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function $e(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+3));return i?(t.j=+i[0],n+i[0].length):-1}function tn(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function en(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function nn(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function rn(t,e,n){Ne.lastIndex=0;var i=Ne.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function on(t){var e=t.getTimezoneOffset(),n=0<e?"-":"+",i=R(e)/60|0,r=R(e)%60;return n+Fe(i,"0",2)+Fe(r,"0",2)}function an(t,e,n){Be.lastIndex=0;var i=Be.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function sn(i){for(var t=i.length,e=-1;++e<t;)i[e][0]=this(i[e][0]);return function(t){for(var e=0,n=i[e];!n[1](t);)n=i[++e];return n[0](t)}}z.locale=function(t){return{numberFormat:(e=t,A=e.decimal,s=e.thousands,u=e.grouping,i=e.currency,T=u&&s?function(t,e){for(var n=t.length,i=[],r=0,o=u[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),i.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=u[r=(r+1)%u.length];return i.reverse().join(s)}:I,function(t){var e=ke.exec(t),c=e[1]||" ",h=e[2]||">",f=e[3]||"-",n=e[4]||"",d=e[5],p=+e[6],g=e[7],m=e[8],v=e[9],_=1,y="",x="",b=!1,w=!0;switch(m&&(m=+m.substring(1)),(d||"0"===c&&"="===h)&&(d=c="0",h="="),v){case"n":g=!0,v="g";break;case"%":_=100,x="%",v="f";break;case"p":_=100,x="%",v="r";break;case"b":case"o":case"x":case"X":"#"===n&&(y="0"+v.toLowerCase());case"c":w=!1;case"d":b=!0,m=0;break;case"s":_=-1,v="r"}"$"===n&&(y=i[0],x=i[1]),"r"!=v||m||(v="g"),null!=m&&("g"==v?m=Math.max(1,Math.min(21,m)):"e"!=v&&"f"!=v||(m=Math.max(0,Math.min(20,m)))),v=Me.get(v)||Oe;var S=d&&g;return function(t){var e=x;if(b&&t%1)return"";var n=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===f?"":f;if(_<0){var i=z.formatPrefix(t,m);t=i.scale(t),e=i.symbol+x}else t*=_;var r,o,a=(t=v(t,m)).lastIndexOf(".");if(a<0){var s=w?t.lastIndexOf("e"):-1;o=s<0?(r=t,""):(r=t.substring(0,s),t.substring(s))}else r=t.substring(0,a),o=A+t.substring(a+1);!d&&g&&(r=T(r,1/0));var u=y.length+r.length+o.length+(S?0:n.length),l=u<p?new Array(u=p-u+1).join(c):"";return S&&(r=T(l+r,l.length?p-o.length:1/0)),n+=y,t=r+o,("<"===h?n+t+l:">"===h?l+n+t:"^"===h?l.substring(0,u>>=1)+n+t+l.substring(u):n+(S?t:l+t))+e}}),timeFormat:function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths;function l(s){var u=s.length;function t(t){for(var e,n,i,r=[],o=-1,a=0;++o<u;)37===s.charCodeAt(o)&&(r.push(s.slice(a,o)),null!=(n=Ve[e=s.charAt(++o)])&&(e=s.charAt(++o)),(i=x[e])&&(e=i(t,null==n?"e"===e?" ":"0":n)),r.push(e),a=o+1);return r.push(s.slice(a,o)),r.join("")}return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(e,s,t,0)!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var n=null!=e.Z&&ze!==De,i=new(n?De:ze);return"j"in e?i.setFullYear(e.y,0,e.j):"W"in e||"U"in e?("w"in e||(e.w="W"in e?1:0),i.setFullYear(e.y,0,1),i.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(i.getDay()+5)%7:e.w+7*e.U-(i.getDay()+6)%7)):i.setFullYear(e.y,e.m,e.d),i.setHours(e.H+(e.Z/100|0),e.M+e.Z%100,e.S,e.L),n?i._:i},t.toString=function(){return s},t}function c(t,e,n,i){for(var r,o,a,s=0,u=e.length,l=n.length;s<u;){if(l<=i)return-1;if(37===(r=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=b[a in Ve?e.charAt(s++):a])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}l.multi=(l.utc=function(t){var n=l(t);function e(t){try{var e=new(ze=De);return e._=t,n(e)}finally{ze=Date}}return e.parse=function(t){try{ze=De;var e=n.parse(t);return e&&e._}finally{ze=Date}},e.toString=n.toString,e}).multi=sn;var h=z.map(),f=He(o),d=Ue(o),p=He(a),g=Ue(a),m=He(s),v=Ue(s),_=He(u),y=Ue(u);r.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:l(e),d:function(t,e){return Fe(t.getDate(),e,2)},e:function(t,e){return Fe(t.getDate(),e,2)},H:function(t,e){return Fe(t.getHours(),e,2)},I:function(t,e){return Fe(t.getHours()%12||12,e,2)},j:function(t,e){return Fe(1+Re.dayOfYear(t),e,3)},L:function(t,e){return Fe(t.getMilliseconds(),e,3)},m:function(t,e){return Fe(t.getMonth()+1,e,2)},M:function(t,e){return Fe(t.getMinutes(),e,2)},p:function(t){return r[+(12<=t.getHours())]},S:function(t,e){return Fe(t.getSeconds(),e,2)},U:function(t,e){return Fe(Re.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Fe(Re.mondayOfYear(t),e,2)},x:l(n),X:l(i),y:function(t,e){return Fe(t.getFullYear()%100,e,2)},Y:function(t,e){return Fe(t.getFullYear()%1e4,e,4)},Z:on,"%":function(){return"%"}},b={a:function(t,e,n){p.lastIndex=0;var i=p.exec(e.slice(n));return i?(t.w=g.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){f.lastIndex=0;var i=f.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){_.lastIndex=0;var i=_.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){m.lastIndex=0;var i=m.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,e,n){return c(t,x.c.toString(),e,n)},d:Je,e:Je,H:tn,I:tn,j:$e,L:rn,m:Ke,M:en,p:function(t,e,n){var i=h.get(e.slice(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)},S:nn,U:Xe,w:Ze,W:Ye,x:function(t,e,n){return c(t,x.x.toString(),e,n)},X:function(t,e,n){return c(t,x.X.toString(),e,n)},y:qe,Y:We,Z:Qe,"%":an};return l}(t)};var e,A,s,u,i,T};var un=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}z.format=un.numberFormat,z.geo={},ln.prototype={s:0,t:0,add:function(t){hn(t,this.t,cn),hn(cn.s,this.s,this),this.s?this.t+=cn.t:this.s=cn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var cn=new ln;function hn(t,e,n){var i=n.s=t+e,r=i-t,o=i-r;n.t=t-o+(e-r)}function fn(t,e){t&&pn.hasOwnProperty(t.type)&&pn[t.type](t,e)}z.geo.stream=function(t,e){t&&dn.hasOwnProperty(t.type)?dn[t.type](t,e):fn(t,e)};var dn={Feature:function(t,e){fn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)fn(n[i].geometry,e)}},pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){gn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)gn(n[i],e,0)},Polygon:function(t,e){mn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)mn(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)fn(n[i],e)}};function gn(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function mn(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)gn(t[n],e,1);e.polygonEnd()}z.geo.area=function(t){return vn=0,z.geo.stream(t,kn),vn};var vn,_n,yn,xn,bn,wn,Sn,An,Tn,Pn,Cn,Ln,En=new ln,kn={sphere:function(){vn+=4*Tt},point:k,lineStart:k,lineEnd:k,polygonStart:function(){En.reset(),kn.lineStart=Mn},polygonEnd:function(){var t=2*En;vn+=t<0?4*Tt+t:t,kn.lineStart=kn.lineEnd=kn.point=k}};function Mn(){var n,i,c,h,f;function r(t,e){e=e*Et/2+Tt/4;var n=(t*=Et)-c,i=0<=n?1:-1,r=i*n,o=Math.cos(e),a=Math.sin(e),s=f*a,u=h*o+s*Math.cos(r),l=s*i*Math.sin(r);En.add(Math.atan2(l,u)),c=t,h=o,f=a}kn.point=function(t,e){kn.point=r,c=(n=t)*Et,h=Math.cos(e=(i=e)*Et/2+Tt/4),f=Math.sin(e)},kn.lineEnd=function(){r(n,i)}}function On(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Rn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Dn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function In(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function jn(t){return[Math.atan2(t[1],t[0]),zt(t[2])]}function Vn(t,e){return R(t[0]-e[0])<St&&R(t[1]-e[1])<St}z.geo.bounds=function(){var c,h,f,d,p,i,r,g,o,u,l,m={point:v,lineStart:t,lineEnd:e,polygonStart:function(){m.point=n,m.lineStart=s,m.lineEnd=_,o=0,kn.polygonStart()},polygonEnd:function(){kn.polygonEnd(),m.point=v,m.lineStart=t,m.lineEnd=e,En<0?(c=-(f=180),h=-(d=90)):St<o?d=90:o<-St&&(h=-90),l[0]=c,l[1]=f}};function v(t,e){u.push(l=[c=t,f=t]),e<h&&(h=e),d<e&&(d=e)}function a(t,e){var n=On([t*Et,e*Et]);if(g){var i=zn(g,n),r=zn([i[1],-i[0],0],i);Gn(r),r=jn(r);var o=t-p,a=0<o?1:-1,s=r[0]*kt*a,u=180<R(o);if(u^(a*p<s&&s<a*t)){var l=r[1]*kt;d<l&&(d=l)}else if(u^(a*p<(s=(s+360)%360-180)&&s<a*t)){(l=-r[1]*kt)<h&&(h=l)}else e<h&&(h=e),d<e&&(d=e);u?t<p?y(c,t)>y(c,f)&&(f=t):y(t,f)>y(c,f)&&(c=t):c<=f?(t<c&&(c=t),f<t&&(f=t)):p<t?y(c,t)>y(c,f)&&(f=t):y(t,f)>y(c,f)&&(c=t)}else v(t,e);g=n,p=t}function t(){m.point=a}function e(){l[0]=c,l[1]=f,m.point=v,g=null}function n(t,e){if(g){var n=t-p;o+=180<R(n)?n+(0<n?360:-360):n}else i=t,r=e;kn.point(t,e),a(t,e)}function s(){kn.lineStart()}function _(){n(i,r),kn.lineEnd(),R(o)>St&&(c=-(f=180)),l[0]=c,l[1]=f,g=null}function y(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function b(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(t){if(d=f=-(c=h=1/0),u=[],z.geo.stream(t,m),r=u.length){u.sort(x);for(var e=1,n=[s=u[0]];e<r;++e)b((o=u[e])[0],s)||b(o[1],s)?(y(s[0],o[1])>y(s[0],s[1])&&(s[1]=o[1]),y(o[0],s[1])>y(s[0],s[1])&&(s[0]=o[0])):n.push(s=o);for(var i,r,o,a=-1/0,s=(e=0,n[r=n.length-1]);e<=r;s=o,++e)o=n[e],(i=y(s[1],o[0]))>a&&(a=i,c=o[0],f=s[1])}return u=l=null,c===1/0||h===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,h],[f,d]]}}(),z.geo.centroid=function(t){_n=yn=xn=bn=wn=Sn=An=Tn=Pn=Cn=Ln=0,z.geo.stream(t,Nn);var e=Pn,n=Cn,i=Ln,r=e*e+n*n+i*i;return r<At&&(e=Sn,n=An,i=Tn,yn<St&&(e=xn,n=bn,i=wn),(r=e*e+n*n+i*i)<At)?[NaN,NaN]:[Math.atan2(n,e)*kt,zt(i/Math.sqrt(r))*kt]};var Nn={sphere:k,point:Bn,lineStart:Hn,lineEnd:Un,polygonStart:function(){Nn.lineStart=Zn},polygonEnd:function(){Nn.lineStart=Hn}};function Bn(t,e){t*=Et;var n=Math.cos(e*=Et);Fn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Fn(t,e,n){xn+=(t-xn)/++_n,bn+=(e-bn)/_n,wn+=(n-wn)/_n}function Hn(){var s,u,l;function i(t,e){t*=Et;var n=Math.cos(e*=Et),i=n*Math.cos(t),r=n*Math.sin(t),o=Math.sin(e),a=Math.atan2(Math.sqrt((a=u*o-l*r)*a+(a=l*i-s*o)*a+(a=s*r-u*i)*a),s*i+u*r+l*o);yn+=a,Sn+=a*(s+(s=i)),An+=a*(u+(u=r)),Tn+=a*(l+(l=o)),Fn(s,u,l)}Nn.point=function(t,e){t*=Et;var n=Math.cos(e*=Et);s=n*Math.cos(t),u=n*Math.sin(t),l=Math.sin(e),Nn.point=i,Fn(s,u,l)}}function Un(){Nn.point=Bn}function Zn(){var i,r,d,p,g;function o(t,e){t*=Et;var n=Math.cos(e*=Et),i=n*Math.cos(t),r=n*Math.sin(t),o=Math.sin(e),a=p*o-g*r,s=g*i-d*o,u=d*r-p*i,l=Math.sqrt(a*a+s*s+u*u),c=d*i+p*r+g*o,h=l&&-Rt(c)/l,f=Math.atan2(l,c);Pn+=h*a,Cn+=h*s,Ln+=h*u,yn+=f,Sn+=f*(d+(d=i)),An+=f*(p+(p=r)),Tn+=f*(g+(g=o)),Fn(d,p,g)}Nn.point=function(t,e){i=t,r=e,Nn.point=o,t*=Et;var n=Math.cos(e*=Et);d=n*Math.cos(t),p=n*Math.sin(t),g=Math.sin(e),Fn(d,p,g)},Nn.lineEnd=function(){o(i,r),Nn.lineEnd=Un,Nn.point=Bn}}function Xn(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t}function Yn(){return!0}function Wn(t,e,n,i,s){var u=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],i=t[e];if(Vn(n,i)){s.lineStart();for(var r=0;r<e;++r)s.point((n=t[r])[0],n[1]);s.lineEnd()}else{var o=new Qn(n,t,null,!0),a=new Qn(n,null,o,!1);o.o=a,u.push(o),l.push(a),a=new Qn(i,null,o=new Qn(i,t,null,!1),!0),o.o=a,u.push(o),l.push(a)}}}),l.sort(e),qn(u),qn(l),u.length){for(var r=0,o=n,a=l.length;r<a;++r)l[r].e=o=!o;for(var c,h,f=u[0];;){for(var d=f,p=!0;d.v;)if((d=d.n)===f)return;c=d.z,s.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(r=0,a=c.length;r<a;++r)s.point((h=c[r])[0],h[1]);else i(d.x,d.n.x,1,s);d=d.n}else{if(p)for(r=(c=d.p.z).length-1;0<=r;--r)s.point((h=c[r])[0],h[1]);else i(d.x,d.p.x,-1,s);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);s.lineEnd()}}}function qn(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function Qn(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Kn(_,y,x,b){return function(i,a){var s,r=y(a),e=i.invert(b[0],b[1]),n={point:o,lineStart:u,lineEnd:l,polygonStart:function(){n.point=g,n.lineStart=m,n.lineEnd=v,s=[],c=[]},polygonEnd:function(){n.point=o,n.lineStart=u,n.lineEnd=l,s=z.merge(s);var t=function(t,e){var n=t[0],i=t[1],r=[Math.sin(n),-Math.cos(n),0],o=0,a=0;En.reset();for(var s=0,u=e.length;s<u;++s){var l=e[s],c=l.length;if(c)for(var h=l[0],f=h[0],d=h[1]/2+Tt/4,p=Math.sin(d),g=Math.cos(d),m=1;;){m===c&&(m=0);var v=(t=l[m])[0],_=t[1]/2+Tt/4,y=Math.sin(_),x=Math.cos(_),b=v-f,w=0<=b?1:-1,S=w*b,A=Tt<S,T=p*y;if(En.add(Math.atan2(T*w*Math.sin(S),g*x+T*Math.cos(S))),o+=A?b+w*Pt:b,A^n<=f^n<=v){var P=zn(On(h),On(t));Gn(P);var C=zn(r,P);Gn(C);var L=(A^0<=b?-1:1)*zt(C[2]);(L<i||i===L&&(P[0]||P[1]))&&(a+=A^0<=b?1:-1)}if(!m++)break;f=v,p=y,g=x,h=t}}return(o<-St||o<St&&En<-St)^1&a}(e,c);s.length?(p||(a.polygonStart(),p=!0),Wn(s,ti,t,x,a)):t&&(p||(a.polygonStart(),p=!0),a.lineStart(),x(null,null,1,a),a.lineEnd()),p&&(a.polygonEnd(),p=!1),s=c=null},sphere:function(){a.polygonStart(),a.lineStart(),x(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function o(t,e){var n=i(t,e);_(t=n[0],e=n[1])&&a.point(t,e)}function t(t,e){var n=i(t,e);r.point(n[0],n[1])}function u(){n.point=t,r.lineStart()}function l(){n.point=o,r.lineEnd()}var c,h,f=$n(),d=y(f),p=!1;function g(t,e){h.push([t,e]);var n=i(t,e);d.point(n[0],n[1])}function m(){d.lineStart(),h=[]}function v(){g(h[0][0],h[0][1]),d.lineEnd();var t,e=d.clean(),n=f.buffer(),i=n.length;if(h.pop(),c.push(h),h=null,i)if(1&e){var r,o=-1;if(0<(i=(t=n[0]).length-1)){for(p||(a.polygonStart(),p=!0),a.lineStart();++o<i;)a.point((r=t[o])[0],r[1]);a.lineEnd()}}else 1<i&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Jn))}return n}}function Jn(t){return 1<t.length}function $n(){var n,e=[];return{lineStart:function(){e.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:k,buffer:function(){var t=e;return e=[],n=null,t},rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))}}}function ti(t,e){return((t=t.x)[0]<0?t[1]-Lt-St:Lt-t[1])-((e=e.x)[0]<0?e[1]-Lt-St:Lt-e[1])}var ei=Kn(Yn,function(h){var f,d=NaN,p=NaN,g=NaN;return{lineStart:function(){h.lineStart(),f=1},point:function(t,e){var n,i,r,o,a,s,u,l=0<t?Tt:-Tt,c=R(t-d);R(c-Tt)<St?(h.point(d,p=0<(p+e)/2?Lt:-Lt),h.point(g,p),h.lineEnd(),h.lineStart(),h.point(l,p),h.point(t,p),f=0):g!==l&&Tt<=c&&(R(d-g)<St&&(d-=g*St),R(t-l)<St&&(t-=l*St),n=d,i=p,r=t,o=e,u=Math.sin(n-r),p=R(u)>St?Math.atan((Math.sin(i)*(s=Math.cos(o))*Math.sin(r)-Math.sin(o)*(a=Math.cos(i))*Math.sin(n))/(a*s*u)):(i+o)/2,h.point(g,p),h.lineEnd(),h.lineStart(),h.point(l,p),f=0),h.point(d=t,p=e),g=l},lineEnd:function(){h.lineEnd(),d=p=NaN},clean:function(){return 2-f}}},function(t,e,n,i){var r;if(null==t)r=n*Lt,i.point(-Tt,r),i.point(0,r),i.point(Tt,r),i.point(Tt,0),i.point(Tt,-r),i.point(0,-r),i.point(-Tt,-r),i.point(-Tt,0),i.point(-Tt,r);else if(R(t[0]-e[0])>St){var o=t[0]<e[0]?Tt:-Tt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-Tt,-Tt/2]);function ni(c,h,f,d){return function(t){var e,n=t.a,i=t.b,r=n.x,o=n.y,a=0,s=1,u=i.x-r,l=i.y-o;if(e=c-r,u||!(0<e)){if(e/=u,u<0){if(e<a)return;e<s&&(s=e)}else if(0<u){if(s<e)return;a<e&&(a=e)}if(e=f-r,u||!(e<0)){if(e/=u,u<0){if(s<e)return;a<e&&(a=e)}else if(0<u){if(e<a)return;e<s&&(s=e)}if(e=h-o,l||!(0<e)){if(e/=l,l<0){if(e<a)return;e<s&&(s=e)}else if(0<l){if(s<e)return;a<e&&(a=e)}if(e=d-o,l||!(e<0)){if(e/=l,l<0){if(s<e)return;a<e&&(a=e)}else if(0<l){if(e<a)return;e<s&&(s=e)}return 0<a&&(t.a={x:r+a*u,y:o+a*l}),s<1&&(t.b={x:r+s*u,y:o+s*l}),t}}}}}}var ii=1e9;function ri(x,b,w,S){return function(r){var i,c,o,a,s,u,l,h,f,d,p,g=r,t=$n(),m=ni(x,b,w,S),e={point:n,lineStart:function(){e.point=y,c&&c.push(o=[]);d=!0,f=!1,l=h=NaN},lineEnd:function(){i&&(y(a,s),u&&f&&t.rejoin(),i.push(t.buffer()));e.point=n,f&&r.lineEnd()},polygonStart:function(){r=t,i=[],c=[],p=!0},polygonEnd:function(){r=g,i=z.merge(i);var t=function(t){for(var e=0,n=c.length,i=t[1],r=0;r<n;++r)for(var o,a=1,s=c[r],u=s.length,l=s[0];a<u;++a)o=s[a],l[1]<=i?o[1]>i&&0<Ot(l,o,t)&&++e:o[1]<=i&&Ot(l,o,t)<0&&--e,l=o;return 0!==e}([x,S]),e=p&&t,n=i.length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),v(null,null,1,r),r.lineEnd()),n&&Wn(i,T,t,v,r),r.polygonEnd()),i=c=o=null}};function v(t,e,n,i){var r=0,o=0;if(null==t||(r=A(t,n))!==(o=A(e,n))||P(t,e)<0^0<n)for(;i.point(0===r||3===r?x:w,1<r?S:b),(r=(r+n+4)%4)!==o;);else i.point(e[0],e[1])}function _(t,e){return x<=t&&t<=w&&b<=e&&e<=S}function n(t,e){_(t,e)&&r.point(t,e)}function y(t,e){var n=_(t=Math.max(-ii,Math.min(ii,t)),e=Math.max(-ii,Math.min(ii,e)));if(c&&o.push([t,e]),d)a=t,s=e,d=!1,(u=n)&&(r.lineStart(),r.point(t,e));else if(n&&f)r.point(t,e);else{var i={a:{x:l,y:h},b:{x:t,y:e}};m(i)?(f||(r.lineStart(),r.point(i.a.x,i.a.y)),r.point(i.b.x,i.b.y),n||r.lineEnd(),p=!1):n&&(r.lineStart(),r.point(t,e),p=!1)}l=t,h=e,f=n}return e};function A(t,e){return R(t[0]-x)<St?0<e?0:3:R(t[0]-w)<St?0<e?2:1:R(t[1]-b)<St?0<e?1:0:0<e?3:2}function T(t,e){return P(t.x,e.x)}function P(t,e){var n=A(t,1),i=A(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function oi(t){var e=0,n=Tt/3,i=Ei(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Tt/180,n=t[1]*Tt/180):[e/Tt*180,n/Tt*180]},r}function ai(t,e){var n=Math.sin(t),i=(n+Math.sin(e))/2,r=1+n*(2*i-n),o=Math.sqrt(r)/i;function a(t,e){var n=Math.sqrt(r-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,zt((r-(t*t+n*n)*i*i)/(2*i))]},a}z.geo.clipExtent=function(){var e,n,i,r,o,a,s={stream:function(t){return o&&(o.valid=!1),(o=a(t)).valid=!0,o},extent:function(t){return arguments.length?(a=ri(e=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),o&&(o.valid=!1,o=null),s):[[e,n],[i,r]]}};return s.extent([[0,0],[960,500]])},(z.geo.conicEqualArea=function(){return oi(ai)}).raw=ai,z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},z.geo.albersUsa=function(){var i,r,o,a,s=z.geo.albers(),u=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function h(t){var e=t[0],n=t[1];return i=null,r(e,n),i||(o(e,n),i)||a(e,n),i}return h.invert=function(t){var e=s.scale(),n=s.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?u:.166<=r&&r<.234&&-.214<=i&&i<-.115?l:s).invert(t)},h.stream=function(t){var n=s.stream(t),i=u.stream(t),r=l.stream(t);return{point:function(t,e){n.point(t,e),i.point(t,e),r.point(t,e)},sphere:function(){n.sphere(),i.sphere(),r.sphere()},lineStart:function(){n.lineStart(),i.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),i.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),i.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),i.polygonEnd(),r.polygonEnd()}}},h.precision=function(t){return arguments.length?(s.precision(t),u.precision(t),l.precision(t),h):s.precision()},h.scale=function(t){return arguments.length?(s.scale(t),u.scale(.35*t),l.scale(t),h.translate(s.translate())):s.scale()},h.translate=function(t){if(!arguments.length)return s.translate();var e=s.scale(),n=+t[0],i=+t[1];return r=s.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c).point,o=u.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+St,i+.12*e+St],[n-.214*e-St,i+.234*e-St]]).stream(c).point,a=l.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+St,i+.166*e+St],[n-.115*e-St,i+.234*e-St]]).stream(c).point,h},h.scale(1070)};var si,ui,li,ci,hi,fi,di={point:k,lineStart:k,lineEnd:k,polygonStart:function(){ui=0,di.lineStart=pi},polygonEnd:function(){di.lineStart=di.lineEnd=di.point=k,si+=R(ui/2)}};function pi(){var n,i,r,o;function a(t,e){ui+=o*t-r*e,r=t,o=e}di.point=function(t,e){di.point=a,n=r=t,i=o=e},di.lineEnd=function(){a(n,i)}}var gi={point:function(t,e){t<li&&(li=t);hi<t&&(hi=t);e<ci&&(ci=e);fi<e&&(fi=e)},lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k};function mi(){var n=vi(4.5),i=[],r={point:t,lineStart:function(){r.point=e},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=t},pointRadius:function(t){return n=vi(t),r},result:function(){if(i.length){var t=i.join("");return i=[],t}}};function t(t,e){i.push("M",t,",",e,n)}function e(t,e){i.push("M",t,",",e),r.point=o}function o(t,e){i.push("L",t,",",e)}function a(){r.point=t}function s(){i.push("Z")}return r}function vi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var _i,yi={point:xi,lineStart:bi,lineEnd:wi,polygonStart:function(){yi.lineStart=Si},polygonEnd:function(){yi.point=xi,yi.lineStart=bi,yi.lineEnd=wi}};function xi(t,e){xn+=t,bn+=e,++wn}function bi(){var o,a;function n(t,e){var n=t-o,i=e-a,r=Math.sqrt(n*n+i*i);Sn+=r*(o+t)/2,An+=r*(a+e)/2,Tn+=r,xi(o=t,a=e)}yi.point=function(t,e){yi.point=n,xi(o=t,a=e)}}function wi(){yi.point=xi}function Si(){var n,i,o,a;function r(t,e){var n=t-o,i=e-a,r=Math.sqrt(n*n+i*i);Sn+=r*(o+t)/2,An+=r*(a+e)/2,Tn+=r,Pn+=(r=a*t-o*e)*(o+t),Cn+=r*(a+e),Ln+=3*r,xi(o=t,a=e)}yi.point=function(t,e){yi.point=r,xi(n=o=t,i=a=e)},yi.lineEnd=function(){r(n,i)}}function Ai(n){var i=4.5,r={point:t,lineStart:function(){r.point=e},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=t},pointRadius:function(t){return i=t,r},result:k};function t(t,e){n.moveTo(t+i,e),n.arc(t,e,i,0,Pt)}function e(t,e){n.moveTo(t,e),r.point=o}function o(t,e){n.lineTo(t,e)}function a(){r.point=t}function s(){n.closePath()}return r}function Ti(E){var k=.5,M=Math.cos(30*Et),b=16;function e(t){return(b?function(r){var n,i,o,a,s,u,l,c,h,f,d,p,g={point:t,lineStart:e,lineEnd:v,polygonStart:function(){r.polygonStart(),g.lineStart=_},polygonEnd:function(){r.polygonEnd(),g.lineStart=e}};function t(t,e){t=E(t,e),r.point(t[0],t[1])}function e(){c=NaN,g.point=m,r.lineStart()}function m(t,e){var n=On([t,e]),i=E(t,e);O(c,h,l,f,d,p,c=i[0],h=i[1],l=t,f=n[0],d=n[1],p=n[2],b,r),r.point(c,h)}function v(){g.point=t,r.lineEnd()}function _(){e(),g.point=y,g.lineEnd=x}function y(t,e){m(n=t,e),i=c,o=h,a=f,s=d,u=p,g.point=m}function x(){O(c,h,l,f,d,p,i,o,n,a,s,u,b,r),(g.lineEnd=v)()}return g}:function(n){return Ci(n,function(t,e){t=E(t,e),n.point(t[0],t[1])})})(t)}function O(t,e,n,i,r,o,a,s,u,l,c,h,f,d){var p=a-t,g=s-e,m=p*p+g*g;if(4*k<m&&f--){var v=i+l,_=r+c,y=o+h,x=Math.sqrt(v*v+_*_+y*y),b=Math.asin(y/=x),w=R(R(y)-1)<St||R(n-u)<St?(n+u)/2:Math.atan2(_,v),S=E(w,b),A=S[0],T=S[1],P=A-t,C=T-e,L=g*P-p*C;(k<L*L/m||.3<R((p*P+g*C)/m-.5)||i*l+r*c+o*h<M)&&(O(t,e,n,i,r,o,A,T,w,v/=x,_/=x,y,f,d),d.point(A,T),O(A,T,w,v,_,y,a,s,u,l,c,h,f,d))}}return e.precision=function(t){return arguments.length?(b=0<(k=t*t)&&16,e):Math.sqrt(k)},e}function Pi(t){this.stream=t}function Ci(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Li(t){return Ei(function(){return t})()}function Ei(t){var n,e,i,r,o,a,s=Ti(function(t,e){return[(t=n(t,e))[0]*u+r,o-t[1]*u]}),u=150,l=480,c=250,h=0,f=0,d=0,p=0,g=0,m=ei,v=I,_=null,y=null;function x(t){return[(t=i(t[0]*Et,t[1]*Et))[0]*u+r,o-t[1]*u]}function b(t){return(t=i.invert((t[0]-r)/u,(o-t[1])/u))&&[t[0]*kt,t[1]*kt]}function w(){i=Xn(e=Ri(d,p,g),n);var t=n(h,f);return r=l-t[0]*u,o=c+t[1]*u,S()}function S(){return a&&(a.valid=!1,a=null),x}return x.stream=function(t){return a&&(a.valid=!1),(a=ki(m(e,s(v(t))))).valid=!0,a},x.clipAngle=function(t){return arguments.length?(m=null==t?(_=t,ei):function(r){var P=Math.cos(r),d=0<P,p=R(P)>St;return Kn(g,function(s){var u,l,c,h,f;return{lineStart:function(){h=c=!1,f=1},point:function(t,e){var n,i=[t,e],r=g(t,e),o=d?r?0:v(t,e):r?v(t+(t<0?Tt:-Tt),e):0;if(!u&&(h=c=r)&&s.lineStart(),r!==c&&(n=m(u,i),(Vn(u,n)||Vn(i,n))&&(i[0]+=St,i[1]+=St,r=g(i[0],i[1]))),r!==c)f=0,r?(s.lineStart(),n=m(i,u),s.point(n[0],n[1])):(n=m(u,i),s.point(n[0],n[1]),s.lineEnd()),u=n;else if(p&&u&&d^r){var a;o&l||!(a=m(i,u,!0))||(f=0,d?(s.lineStart(),s.point(a[0][0],a[0][1]),s.point(a[1][0],a[1][1]),s.lineEnd()):(s.point(a[1][0],a[1][1]),s.lineEnd(),s.lineStart(),s.point(a[0][0],a[0][1])))}!r||u&&Vn(u,i)||s.point(i[0],i[1]),u=i,c=r,l=o},lineEnd:function(){c&&s.lineEnd(),u=null},clean:function(){return f|(h&&c)<<1}}},Gi(r,6*Et),d?[0,-r]:[-Tt,r-Tt]);function g(t,e){return Math.cos(t)*Math.cos(e)>P}function m(t,e,n){var i=[1,0,0],r=zn(On(t),On(e)),o=Rn(r,r),a=r[0],s=o-a*a;if(!s)return!n&&t;var u=P*o/s,l=-P*a/s,c=zn(i,r),h=In(i,u);Dn(h,In(r,l));var f=c,d=Rn(h,f),p=Rn(f,f),g=d*d-p*(Rn(h,h)-1);if(!(g<0)){var m=Math.sqrt(g),v=In(f,(-d-m)/p);if(Dn(v,h),v=jn(v),!n)return v;var _,y=t[0],x=e[0],b=t[1],w=e[1];x<y&&(_=y,y=x,x=_);var S=x-y,A=R(S-Tt)<St;if(!A&&w<b&&(_=b,b=w,w=_),A||S<St?A?0<b+w^v[1]<(R(v[0]-y)<St?b:w):b<=v[1]&&v[1]<=w:Tt<S^(y<=v[0]&&v[0]<=x)){var T=In(f,(-d+m)/p);return Dn(T,h),[v,jn(T)]}}}function v(t,e){var n=d?r:Tt-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}}((_=+t)*Et),S()):_},x.clipExtent=function(t){return arguments.length?(v=(y=t)?ri(t[0][0],t[0][1],t[1][0],t[1][1]):I,S()):y},x.scale=function(t){return arguments.length?(u=+t,w()):u},x.translate=function(t){return arguments.length?(l=+t[0],c=+t[1],w()):[l,c]},x.center=function(t){return arguments.length?(h=t[0]%360*Et,f=t[1]%360*Et,w()):[h*kt,f*kt]},x.rotate=function(t){return arguments.length?(d=t[0]%360*Et,p=t[1]%360*Et,g=2<t.length?t[2]%360*Et:0,w()):[d*kt,p*kt,g*kt]},z.rebind(x,s,"precision"),function(){return n=t.apply(this,arguments),x.invert=n.invert&&b,w()}}function ki(n){return Ci(n,function(t,e){n.point(t*Et,e*Et)})}function Mi(t,e){return[t,e]}function Oi(t,e){return[Tt<t?t-Pt:t<-Tt?t+Pt:t,e]}function Ri(t,e,n){return t?e||n?Xn(Di(t),Ii(e,n)):Di(t):e||n?Ii(e,n):Oi}function zi(n){return function(t,e){return[Tt<(t+=n)?t-Pt:t<-Tt?t+Pt:t,e]}}function Di(t){var e=zi(t);return e.invert=zi(-t),e}function Ii(t,e){var s=Math.cos(t),u=Math.sin(t),l=Math.cos(e),c=Math.sin(e);function n(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),a=o*s+i*u;return[Math.atan2(r*l-a*c,i*s-o*u),zt(a*l+r*c)]}return n.invert=function(t,e){var n=Math.cos(e),i=Math.cos(t)*n,r=Math.sin(t)*n,o=Math.sin(e),a=o*l-r*c;return[Math.atan2(r*l+o*c,i*s+a*u),zt(a*s-i*u)]},n}function Gi(s,u){var l=Math.cos(s),c=Math.sin(s);return function(t,e,n,i){var r=n*u;null!=t?(t=ji(l,t),e=ji(l,e),(0<n?t<e:e<t)&&(t+=n*Pt)):(t=s+n*Pt,e=s-.5*r);for(var o,a=t;0<n?e<a:a<e;a-=r)i.point((o=jn([l,-c*Math.cos(a),-c*Math.sin(a)]))[0],o[1])}}function ji(t,e){var n=On(e);n[0]-=t,Gn(n);var i=Rt(-n[1]);return((-n[2]<0?-i:i)+2*Math.PI-St)%(2*Math.PI)}function Vi(t,e,n){var i=z.range(t,e-St,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Ni(t,e,n){var i=z.range(t,e-St,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Bi(t){return t.source}function Fi(t){return t.target}z.geo.path=function(){var i,e,r,n,o,a=4.5;function s(t){return t&&("function"==typeof a&&n.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(n)),z.geo.stream(t,o)),n.result()}function u(){return o=null,s}return s.area=function(t){return si=0,z.geo.stream(t,r(di)),si},s.centroid=function(t){return xn=bn=wn=Sn=An=Tn=Pn=Cn=Ln=0,z.geo.stream(t,r(yi)),Ln?[Pn/Ln,Cn/Ln]:Tn?[Sn/Tn,An/Tn]:wn?[xn/wn,bn/wn]:[NaN,NaN]},s.bounds=function(t){return hi=fi=-(li=ci=1/0),z.geo.stream(t,r(gi)),[[li,ci],[hi,fi]]},s.projection=function(t){return arguments.length?(r=(i=t)?t.stream||(n=t,e=Ti(function(t,e){return n([t*kt,e*kt])}),function(t){return ki(e(t))}):I,u()):i;var n,e},s.context=function(t){return arguments.length?(n=null==(e=t)?new mi:new Ai(t),"function"!=typeof a&&n.pointRadius(a),u()):e},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(n.pointRadius(+t),+t),s):a},s.projection(z.geo.albersUsa()).context(null)},z.geo.transform=function(i){return{stream:function(t){var e=new Pi(t);for(var n in i)e[n]=i[n];return e}}},Pi.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},z.geo.projection=Li,z.geo.projectionMutator=Ei,(z.geo.equirectangular=function(){return Li(Mi)}).raw=Mi.invert=Mi,z.geo.rotation=function(e){function t(t){return(t=e(t[0]*Et,t[1]*Et))[0]*=kt,t[1]*=kt,t}return e=Ri(e[0]%360*Et,e[1]*Et,2<e.length?e[2]*Et:0),t.invert=function(t){return(t=e.invert(t[0]*Et,t[1]*Et))[0]*=kt,t[1]*=kt,t},t},Oi.invert=Mi,z.geo.circle=function(){var e,r,o=[0,0],n=6;function i(){var t="function"==typeof o?o.apply(this,arguments):o,n=Ri(-t[0]*Et,-t[1]*Et,0).invert,i=[];return r(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=kt,t[1]*=kt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(o=t,i):o},i.angle=function(t){return arguments.length?(r=Gi((e=+t)*Et,n*Et),i):e},i.precision=function(t){return arguments.length?(r=Gi(e*Et,(n=+t)*Et),i):n},i.angle(90)},z.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Et,r=t[1]*Et,o=e[1]*Et,a=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*a)*n+(n=l*c-u*h*s)*n),u*c+l*h*s)},z.geo.graticule=function(){var e,n,i,r,o,a,s,u,l,c,h,f,d=10,p=d,g=90,m=360,v=2.5;function _(){return{type:"MultiLineString",coordinates:t()}}function t(){return z.range(Math.ceil(r/g)*g,i,g).map(h).concat(z.range(Math.ceil(u/m)*m,s,m).map(f)).concat(z.range(Math.ceil(n/d)*d,e,d).filter(function(t){return R(t%g)>St}).map(l)).concat(z.range(Math.ceil(a/p)*p,o,p).filter(function(t){return R(t%m)>St}).map(c))}return _.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(f(s).slice(1),h(i).reverse().slice(1),f(u).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.majorExtent(t).minorExtent(t):_.minorExtent()},_.majorExtent=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],u=+t[0][1],s=+t[1][1],i<r&&(t=r,r=i,i=t),s<u&&(t=u,u=s,s=t),_.precision(v)):[[r,u],[i,s]]},_.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],e<n&&(t=n,n=e,e=t),o<a&&(t=a,a=o,o=t),_.precision(v)):[[n,a],[e,o]]},_.step=function(t){return arguments.length?_.majorStep(t).minorStep(t):_.minorStep()},_.majorStep=function(t){return arguments.length?(g=+t[0],m=+t[1],_):[g,m]},_.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],_):[d,p]},_.precision=function(t){return arguments.length?(v=+t,l=Vi(a,o,90),c=Ni(n,e,v),h=Vi(u,s,90),f=Ni(r,i,v),_):v},_.majorExtent([[-180,-90+St],[180,90-St]]).minorExtent([[-180,-80-St],[180,80+St]])},z.geo.greatArc=function(){var e,n,i=Bi,r=Fi;function o(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}return o.distance=function(){return z.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},o.source=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,o):i},o.target=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,o):r},o.precision=function(){return arguments.length?o:0},o},z.geo.interpolate=function(t,e){return n=t[0]*Et,i=t[1]*Et,r=e[0]*Et,o=e[1]*Et,a=Math.cos(i),s=Math.sin(i),u=Math.cos(o),l=Math.sin(o),c=a*Math.cos(n),h=a*Math.sin(n),f=u*Math.cos(r),d=u*Math.sin(r),p=2*Math.asin(Math.sqrt(It(o-i)+a*u*It(r-n))),g=1/Math.sin(p),(m=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,i=n*c+e*f,r=n*h+e*d,o=n*s+e*l;return[Math.atan2(r,i)*kt,Math.atan2(o,Math.sqrt(i*i+r*r))*kt]}:function(){return[n*kt,i*kt]}).distance=p,m;var n,i,r,o,a,s,u,l,c,h,f,d,p,g,m},z.geo.length=function(t){return _i=0,z.geo.stream(t,Hi),_i};var Hi={sphere:k,point:k,lineStart:function(){var a,s,u;function n(t,e){var n=Math.sin(e*=Et),i=Math.cos(e),r=R((t*=Et)-a),o=Math.cos(r);_i+=Math.atan2(Math.sqrt((r=i*Math.sin(r))*r+(r=u*n-s*i*o)*r),s*n+u*i*o),a=t,s=n,u=i}Hi.point=function(t,e){a=t*Et,s=Math.sin(e*=Et),u=Math.cos(e),Hi.point=n},Hi.lineEnd=function(){Hi.point=Hi.lineEnd=k}},lineEnd:k,polygonStart:k,polygonEnd:k};function Ui(o,a){function t(t,e){var n=Math.cos(t),i=Math.cos(e),r=o(n*i);return[r*i*Math.sin(t),r*Math.sin(e)]}return t.invert=function(t,e){var n=Math.sqrt(t*t+e*e),i=a(n),r=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*r,n*o),Math.asin(n&&e*r/n)]},t}var Zi=Ui(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(z.geo.azimuthalEqualArea=function(){return Li(Zi)}).raw=Zi;var Xi=Ui(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},I);function Yi(t,e){var n=Math.cos(t),i=function(t){return Math.tan(Tt/4+t/2)},r=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(i(e)/i(t)),o=n*Math.pow(i(t),r)/r;if(!r)return Qi;function a(t,e){0<o?e<-Lt+St&&(e=-Lt+St):Lt-St<e&&(e=Lt-St);var n=o/Math.pow(i(e),r);return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}return a.invert=function(t,e){var n=o-e,i=Mt(r)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/r,2*Math.atan(Math.pow(o/i,1/r))-Lt]},a}function Wi(t,e){var n=Math.cos(t),i=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),r=n/i+t;if(R(i)<St)return Mi;function o(t,e){var n=r-e;return[n*Math.sin(i*t),r-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=r-e;return[Math.atan2(t,n)/i,r-Mt(i)*Math.sqrt(t*t+n*n)]},o}(z.geo.azimuthalEquidistant=function(){return Li(Xi)}).raw=Xi,(z.geo.conicConformal=function(){return oi(Yi)}).raw=Yi,(z.geo.conicEquidistant=function(){return oi(Wi)}).raw=Wi;var qi=Ui(function(t){return 1/t},Math.atan);function Qi(t,e){return[t,Math.log(Math.tan(Tt/4+e/2))]}function Ki(t){var r,o=Li(t),a=o.scale,s=o.translate,u=o.clipExtent;return o.scale=function(){var t=a.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.translate=function(){var t=s.apply(o,arguments);return t===o?r?o.clipExtent(null):o:t},o.clipExtent=function(t){var e=u.apply(o,arguments);if(e===o){if(r=null==t){var n=Tt*a(),i=s();u([[i[0]-n,i[1]-n],[i[0]+n,i[1]+n]])}}else r&&(e=null);return e},o.clipExtent(null)}(z.geo.gnomonic=function(){return Li(qi)}).raw=qi,Qi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Lt]},(z.geo.mercator=function(){return Ki(Qi)}).raw=Qi;var Ji=Ui(function(){return 1},Math.asin);(z.geo.orthographic=function(){return Li(Ji)}).raw=Ji;var $i=Ui(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function tr(t,e){return[Math.log(Math.tan(Tt/4+e/2)),-t]}function er(t){return t[0]}function nr(t){return t[1]}function ir(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;r++){for(;1<i&&Ot(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function rr(t,e){return t[0]-e[0]||t[1]-e[1]}(z.geo.stereographic=function(){return Li($i)}).raw=$i,tr.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Lt]},(z.geo.transverseMercator=function(){var t=Ki(tr),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=tr,z.geom={},z.geom.hull=function(t){var f=er,d=nr;if(arguments.length)return e(t);function e(t){if(t.length<3)return[];var e,n=me(f),i=me(d),r=t.length,o=[],a=[];for(e=0;e<r;e++)o.push([+n.call(this,t[e],e),+i.call(this,t[e],e),e]);for(o.sort(rr),e=0;e<r;e++)a.push([o[e][0],-o[e][1]]);var s=ir(o),u=ir(a),l=u[0]===s[0],c=u[u.length-1]===s[s.length-1],h=[];for(e=s.length-1;0<=e;--e)h.push(t[o[s[e]][2]]);for(e=+l;e<u.length-c;++e)h.push(t[o[u[e]][2]]);return h}return e.x=function(t){return arguments.length?(f=t,e):f},e.y=function(t){return arguments.length?(d=t,e):d},e},z.geom.polygon=function(t){return B(t,or),t};var or=z.geom.polygon.prototype=[];function ar(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function sr(t,e,n,i){var r=t[0],o=n[0],a=e[0]-r,s=i[0]-o,u=t[1],l=n[1],c=e[1]-u,h=i[1]-l,f=(s*(u-l)-h*(r-o))/(h*a-s*c);return[r+f*a,u+f*c]}function ur(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}or.area=function(){for(var t,e=-1,n=this.length,i=this[n-1],r=0;++e<n;)t=i,i=this[e],r+=t[1]*i[0]-t[0]*i[1];return.5*r},or.centroid=function(t){var e,n,i=-1,r=this.length,o=0,a=0,s=this[r-1];for(arguments.length||(t=-1/(6*this.area()));++i<r;)e=s,s=this[i],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},or.clip=function(t){for(var e,n,i,r,o,a,s=ur(t),u=-1,l=this.length-ur(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,r=this[u],o=e[(i=e.length-s)-1],n=-1;++n<i;)ar(a=e[n],c,r)?(ar(o,c,r)||t.push(sr(o,a,c,r)),t.push(a)):ar(o,c,r)&&t.push(sr(o,a,c,r)),o=a;s&&t.push(t[0]),c=r}return t};var lr,cr,hr,fr,dr,pr=[],gr=[];function mr(){zr(this),this.edge=this.site=this.circle=null}function vr(t){var e=pr.pop()||new mr;return e.site=t,e}function _r(t){Cr(t),hr.remove(t),pr.push(t),zr(t)}function yr(t){var e=t.circle,n=e.x,i=e.cy,r={x:n,y:i},o=t.P,a=t.N,s=[t];_r(t);for(var u=o;u.circle&&R(n-u.circle.x)<St&&R(i-u.circle.cy)<St;)o=u.P,s.unshift(u),_r(u),u=o;s.unshift(u),Cr(u);for(var l=a;l.circle&&R(n-l.circle.x)<St&&R(i-l.circle.cy)<St;)a=l.N,s.push(l),_r(l),l=a;s.push(l),Cr(l);var c,h=s.length;for(c=1;c<h;++c)l=s[c],u=s[c-1],Mr(l.edge,u.site,l.site,r);u=s[0],(l=s[h-1]).edge=kr(u.site,l.site,null,r),Pr(u),Pr(l)}function xr(t){for(var e,n,i,r,o=t.x,a=t.y,s=hr._;s;)if(i=br(s,a)-o,St<i)s=s.L;else{if(r=o-wr(s,a),!(St<r)){-St<i?(e=s.P,n=s):-St<r?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=vr(t);if(hr.insert(e,u),e||n){if(e===n)return Cr(e),n=vr(e.site),hr.insert(u,n),u.edge=n.edge=kr(e.site,u.site),Pr(e),void Pr(n);if(n){Cr(e),Cr(n);var l=e.site,c=l.x,h=l.y,f=t.x-c,d=t.y-h,p=n.site,g=p.x-c,m=p.y-h,v=2*(f*m-d*g),_=f*f+d*d,y=g*g+m*m,x={x:(m*_-d*y)/v+c,y:(f*y-g*_)/v+h};Mr(n.edge,l,p,x),u.edge=kr(l,t,null,x),n.edge=kr(t,p,null,x),Pr(e),Pr(n)}else u.edge=kr(e.site,u.site)}}function br(t,e){var n=t.site,i=n.x,r=n.y,o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,u=n.y,l=u-e;if(!l)return s;var c=s-i,h=1/o-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+r-o/2)))/h+i:(i+s)/2}function wr(t,e){var n=t.N;if(n)return br(n,e);var i=t.site;return i.y===e?i.x:1/0}function Sr(t){this.site=t,this.edges=[]}function Ar(t,e){return e.angle-t.angle}function Tr(){zr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pr(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r.x,s=r.y,u=i.x-a,l=i.y-s,c=o.x-a,h=2*(u*(m=o.y-s)-l*c);if(!(-At<=h)){var f=u*u+l*l,d=c*c+m*m,p=(m*f-l*d)/h,g=(u*d-c*f)/h,m=g+s,v=gr.pop()||new Tr;v.arc=t,v.site=r,v.x=p+a,v.y=m+Math.sqrt(p*p+g*g),v.cy=m,t.circle=v;for(var _=null,y=dr._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){_=y.P;break}y=y.L}else{if(!y.R){_=y;break}y=y.R}dr.insert(_,v),_||(fr=v)}}}}function Cr(t){var e=t.circle;e&&(e.P||(fr=e.N),dr.remove(e),gr.push(e),zr(e),t.circle=null)}function Lr(t,e){var n=t.b;if(n)return!0;var i,r,o=t.a,a=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,h=t.r,f=c.x,d=c.y,p=h.x,g=h.y,m=(f+p)/2,v=(d+g)/2;if(g===d){if(m<a||s<=m)return;if(p<f){if(o){if(o.y>=l)return}else o={x:m,y:u};n={x:m,y:l}}else{if(o){if(o.y<u)return}else o={x:m,y:l};n={x:m,y:u}}}else if(r=v-(i=(f-p)/(g-d))*m,i<-1||1<i)if(p<f){if(o){if(o.y>=l)return}else o={x:(u-r)/i,y:u};n={x:(l-r)/i,y:l}}else{if(o){if(o.y<u)return}else o={x:(l-r)/i,y:l};n={x:(u-r)/i,y:u}}else if(d<g){if(o){if(o.x>=s)return}else o={x:a,y:i*a+r};n={x:s,y:i*s+r}}else{if(o){if(o.x<a)return}else o={x:s,y:i*s+r};n={x:a,y:i*a+r}}return t.a=o,t.b=n,!0}function Er(t,e){this.l=t,this.r=e,this.a=this.b=null}function kr(t,e,n,i){var r=new Er(t,e);return lr.push(r),n&&Mr(r,t,e,n),i&&Mr(r,e,t,i),cr[t.i].edges.push(new Or(r,t,e)),cr[e.i].edges.push(new Or(r,e,t)),r}function Mr(t,e,n,i){t.a||t.b?t.l===n?t.b=i:t.a=i:(t.a=i,t.l=e,t.r=n)}function Or(t,e,n){var i=t.a,r=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(r.x-i.x,i.y-r.y):Math.atan2(i.x-r.x,r.y-i.y)}function Rr(){this._=null}function zr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Dr(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Ir(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function Gr(t){for(;t.L;)t=t.L;return t}function jr(t,e){var n,i,r,o=t.sort(Vr).pop();for(lr=[],cr=new Array(t.length),hr=new Rr,dr=new Rr;;)if(r=fr,o&&(!r||o.y<r.y||o.y===r.y&&o.x<r.x))o.x===n&&o.y===i||(cr[o.i]=new Sr(o),xr(o),n=o.x,i=o.y),o=t.pop();else{if(!r)break;yr(r.arc)}e&&(function(t){for(var e,n=lr,i=ni(t[0][0],t[0][1],t[1][0],t[1][1]),r=n.length;r--;)(!Lr(e=n[r],t)||!i(e)||R(e.a.x-e.b.x)<St&&R(e.a.y-e.b.y)<St)&&(e.a=e.b=null,n.splice(r,1))}(e),function(t){for(var e,n,i,r,o,a,s,u,l,c,h=t[0][0],f=t[1][0],d=t[0][1],p=t[1][1],g=cr,m=g.length;m--;)if((o=g[m])&&o.prepare())for(u=(s=o.edges).length,a=0;a<u;)i=(c=s[a].end()).x,r=c.y,e=(l=s[++a%u].start()).x,n=l.y,(R(i-e)>St||R(r-n)>St)&&(s.splice(a,0,new Or((v=o.site,_=c,y=R(i-h)<St&&St<p-r?{x:h,y:R(e-h)<St?n:p}:R(r-p)<St&&St<f-i?{x:R(n-p)<St?e:f,y:p}:R(i-f)<St&&St<r-d?{x:f,y:R(e-f)<St?n:d}:R(r-d)<St&&St<i-h?{x:R(n-d)<St?e:h,y:d}:null,x=void 0,x=new Er(v,null),x.a=_,x.b=y,lr.push(x),x),o.site,null)),++u);var v,_,y,x}(e));var a={cells:cr,edges:lr};return hr=dr=lr=cr=null,a}function Vr(t,e){return e.y-t.y||e.x-t.x}Sr.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Ar),e.length},Or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Rr.prototype={insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=Gr(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Dr(this,n),n=(t=n).U),n.C=!1,i.C=!0,Ir(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Ir(this,n),n=(t=n).U),n.C=!1,i.C=!0,Dr(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?Gr(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,((n.L=o).U=n)!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=a).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Dr(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ir(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Dr(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Ir(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Dr(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Ir(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}},z.geom.voronoi=function(t){var e=er,n=nr,i=e,r=n,c=Nr;if(t)return o(t);function o(r){var o=new Array(r.length),a=c[0][0],s=c[0][1],u=c[1][0],l=c[1][1];return jr(h(r),c).cells.forEach(function(t,e){var n=t.edges,i=t.site;(o[e]=n.length?n.map(function(t){var e=t.start();return[e.x,e.y]}):i.x>=a&&i.x<=u&&i.y>=s&&i.y<=l?[[a,l],[u,l],[u,s],[a,s]]:[]).point=r[e]}),o}function h(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/St)*St,y:Math.round(r(t,e)/St)*St,i:e}})}return o.links=function(e){return jr(h(e)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},o.triangles=function(f){var d=[];return jr(h(f)).cells.forEach(function(t,e){for(var n,i,r,o,a=t.site,s=t.edges.sort(Ar),u=-1,l=s.length,c=s[l-1].edge,h=c.l===a?c.r:c.l;++u<l;)c,n=h,h=(c=s[u].edge).l===a?c.r:c.l,e<n.i&&e<h.i&&(r=n,o=h,((i=a).x-o.x)*(r.y-i.y)-(i.x-r.x)*(o.y-i.y)<0)&&d.push([f[e],f[n.i],f[h.i]])}),d},o.x=function(t){return arguments.length?(i=me(e=t),o):e},o.y=function(t){return arguments.length?(r=me(n=t),o):n},o.clipExtent=function(t){return arguments.length?(c=null==t?Nr:t,o):c===Nr?null:c},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):c===Nr?null:c&&c[1]},o};var Nr=[[-1e6,-1e6],[1e6,1e6]];function Br(t){return t.x}function Fr(t){return t.y}function Hr(t,e){t=z.rgb(t),e=z.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,a=e.g-i,s=e.b-r;return function(t){return"#"+le(Math.round(n+o*t))+le(Math.round(i+a*t))+le(Math.round(r+s*t))}}function Ur(t,e){var n,i={},r={};for(n in t)n in e?i[n]=qr(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function Zr(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function Xr(t,i){var e,n,r,o=Yr.lastIndex=Wr.lastIndex=0,a=-1,s=[],u=[];for(t+="",i+="";(e=Yr.exec(t))&&(n=Wr.exec(i));)(r=n.index)>o&&(r=i.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(e=e[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:Zr(e,n)})),o=Wr.lastIndex;return o<i.length&&(r=i.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?u[0]?(i=u[0].x,function(t){return i(t)+""}):function(){return i}:(i=u.length,function(t){for(var e,n=0;n<i;++n)s[(e=u[n]).i]=e.x(t);return s.join("")})}z.geom.delaunay=function(t){return z.geom.voronoi().triangles(t)},z.geom.quadtree=function(t,_,y,x,b){var w,S=er,T=nr;if(w=arguments.length)return S=Br,T=Fr,3===w&&(b=y,x=_,y=_=0),e(t);function e(t){var e,n,i,r,o,a,s,u,l,c=me(S),h=me(T);if(null!=_)a=_,s=y,u=x,l=b;else if(u=l=-(a=s=1/0),n=[],i=[],o=t.length,w)for(r=0;r<o;++r)(e=t[r]).x<a&&(a=e.x),e.y<s&&(s=e.y),e.x>u&&(u=e.x),e.y>l&&(l=e.y),n.push(e.x),i.push(e.y);else for(r=0;r<o;++r){var f=+c(e=t[r],r),d=+h(e,r);f<a&&(a=f),d<s&&(s=d),u<f&&(u=f),l<d&&(l=d),n.push(f),i.push(d)}var p=u-a,g=l-s;function m(t,e,n,i,r,o,a,s){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(R(u-n)+R(l-i)<.01)v(t,e,n,i,r,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,v(t,c,u,l,r,o,a,s),v(t,e,n,i,r,o,a,s)}else t.x=n,t.y=i,t.point=e}else v(t,e,n,i,r,o,a,s)}function v(t,e,n,i,r,o,a,s){var u=.5*(r+a),l=.5*(o+s),c=u<=n,h=l<=i,f=h<<1|c;t.leaf=!1,c?r=u:a=u,h?o=l:s=l,m(t=t.nodes[f]||(t.nodes[f]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,i,r,o,a,s)}g<p?l=s+p:u=a+g;var A={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){m(A,t,+c(t,++r),+h(t,r),a,s,u,l)}};if(A.visit=function(t){!function t(e,n,i,r,o,a){if(!e(n,i,r,o,a)){var s=.5*(i+o),u=.5*(r+a),l=n.nodes;l[0]&&t(e,l[0],i,r,s,u),l[1]&&t(e,l[1],s,r,o,u),l[2]&&t(e,l[2],i,u,s,a),l[3]&&t(e,l[3],s,u,o,a)}}(t,A,a,s,u,l)},A.find=function(t){return e=A,m=t[0],v=t[1],S=1/0,function t(e,n,i,r,o){if(!(x<n||b<i||r<_||o<y)){if(a=e.point){var a,s=m-e.x,u=v-e.y,l=s*s+u*u;if(l<S){var c=Math.sqrt(S=l);_=m-c,y=v-c,x=m+c,b=v+c,w=a}}for(var h=e.nodes,f=.5*(n+r),d=.5*(i+o),p=(d<=v)<<1|f<=m,g=p+4;p<g;++p)if(e=h[3&p])switch(3&p){case 0:t(e,n,i,f,d);break;case 1:t(e,f,i,r,d);break;case 2:t(e,n,d,f,o);break;case 3:t(e,f,d,r,o)}}}(e,_=a,y=s,x=u,b=l),w;var e,m,v,_,y,x,b,w,S},r=-1,null==_){for(;++r<o;)m(A,t[r],n[r],i[r],a,s,u,l);--r}else t.forEach(A.add);return n=i=t=e=null,A}return e.x=function(t){return arguments.length?(S=t,e):S},e.y=function(t){return arguments.length?(T=t,e):T},e.extent=function(t){return arguments.length?(null==t?_=y=x=b=null:(_=+t[0][0],y=+t[0][1],x=+t[1][0],b=+t[1][1]),e):null==_?null:[[_,y],[x,b]]},e.size=function(t){return arguments.length?(null==t?_=y=x=b=null:(_=y=0,x=+t[0],b=+t[1]),e):null==_?null:[x-_,b-y]},e},z.interpolateRgb=Hr,z.interpolateObject=Ur,z.interpolateNumber=Zr,z.interpolateString=Xr;var Yr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wr=new RegExp(Yr.source,"g");function qr(t,e){for(var n,i=z.interpolators.length;0<=--i&&!(n=z.interpolators[i](t,e)););return n}function Qr(t,e){var n,i=[],r=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)i.push(qr(t[n],e[n]));for(;n<o;++n)r[n]=t[n];for(;n<a;++n)r[n]=e[n];return function(t){for(n=0;n<s;++n)r[n]=i[n](t);return r}}z.interpolate=qr,z.interpolators=[function(t,e){var n=typeof e;return("string"===n?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Hr:Xr:e instanceof Bt?Hr:Array.isArray(e)?Qr:"object"===n&&isNaN(e)?Ur:Zr)(t,e)}],z.interpolateArray=Qr;var Kr=function(){return I},Jr=z.map({linear:Kr,poly:function(e){return function(t){return Math.pow(t,e)}},quad:function(){return no},cubic:function(){return io},sin:function(){return oo},exp:function(){return ao},circle:function(){return so},elastic:function(e,n){var i;arguments.length<2&&(n=.45);i=arguments.length?n/Pt*Math.asin(1/e):(e=1,n/4);return function(t){return 1+e*Math.pow(2,-10*t)*Math.sin((t-i)*Pt/n)}},back:function(e){e||(e=1.70158);return function(t){return t*t*((e+1)*t-e)}},bounce:function(){return uo}}),$r=z.map({in:I,out:to,"in-out":eo,"out-in":function(t){return eo(to(t))}});function to(e){return function(t){return 1-e(1-t)}}function eo(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function no(t){return t*t}function io(t){return t*t*t}function ro(t){if(t<=0)return 0;if(1<=t)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function oo(t){return 1-Math.cos(t*Lt)}function ao(t){return Math.pow(2,10*(t-1))}function so(t){return 1-Math.sqrt(1-t*t)}function uo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function lo(e,n){return n-=e,function(t){return Math.round(e+n*t)}}function co(t){var e,n,i,r=[t.a,t.b],o=[t.c,t.d],a=fo(r),s=ho(r,o),u=fo(((e=o)[0]+=(i=-s)*(n=r)[0],e[1]+=i*n[1],e))||0;r[0]*o[1]<o[0]*r[1]&&(r[0]*=-1,r[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(r[1],r[0]):Math.atan2(-o[0],o[1]))*kt,this.translate=[t.e,t.f],this.scale=[a,u],this.skew=u?Math.atan2(s,u)*kt:0}function ho(t,e){return t[0]*e[0]+t[1]*e[1]}function fo(t){var e=Math.sqrt(ho(t,t));return e&&(t[0]/=e,t[1]/=e),e}z.ease=function(t){var e,n=t.indexOf("-"),i=0<=n?t.slice(0,n):t,r=0<=n?t.slice(n+1):"in";return i=Jr.get(i)||Kr,r=$r.get(r)||I,e=r(i.apply(null,o.call(arguments,1))),function(t){return t<=0?0:1<=t?1:e(t)}},z.interpolateHcl=function(t,e){t=z.hcl(t),e=z.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,a=e.c-i,s=e.l-r;isNaN(a)&&(a=0,i=isNaN(i)?e.c:i);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360);return function(t){return Yt(n+o*t,i+a*t,r+s*t)+""}},z.interpolateHsl=function(t,e){t=z.hsl(t),e=z.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,a=e.s-i,s=e.l-r;isNaN(a)&&(a=0,i=isNaN(i)?e.s:i);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):180<o?o-=360:o<-180&&(o+=360);return function(t){return Ut(n+o*t,i+a*t,r+s*t)+""}},z.interpolateLab=function(t,e){t=z.lab(t),e=z.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,a=e.a-i,s=e.b-r;return function(t){return te(n+o*t,i+a*t,r+s*t)+""}},z.interpolateRound=lo,z.transform=function(t){var n=y.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new co(e?e.matrix:po)})(t)},co.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var po={a:1,b:0,c:0,d:1,e:0,f:0};function go(t){return t.length?t.pop()+",":""}function mo(t,e){var n,i,r,o,a,s,u,l,c=[],h=[];return t=z.transform(t),e=z.transform(e),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push("translate(",null,",",null,")");i.push({i:r-4,x:Zr(t[0],e[0])},{i:r-2,x:Zr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,c,h),n=t.rotate,i=e.rotate,r=c,o=h,n!==i?(180<n-i?i+=360:180<i-n&&(n+=360),o.push({i:r.push(go(r)+"rotate(",null,")")-2,x:Zr(n,i)})):i&&r.push(go(r)+"rotate("+i+")"),a=t.skew,s=e.skew,u=c,l=h,a!==s?l.push({i:u.push(go(u)+"skewX(",null,")")-2,x:Zr(a,s)}):s&&u.push(go(u)+"skewX("+s+")"),function(t,e,n,i){if(t[0]!==e[0]||t[1]!==e[1]){var r=n.push(go(n)+"scale(",null,",",null,")");i.push({i:r-4,x:Zr(t[0],e[0])},{i:r-2,x:Zr(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(go(n)+"scale("+e+")")}(t.scale,e.scale,c,h),t=e=null,function(t){for(var e,n=-1,i=h.length;++n<i;)c[(e=h[n]).i]=e.x(t);return c.join("")}}function vo(e,n){return n=(n-=e=+e)||1/n,function(t){return(t-e)/n}}function _o(e,n){return n=(n-=e=+e)||1/n,function(t){return Math.max(0,Math.min(1,(t-e)/n))}}function yo(t){for(var e=t.source,n=t.target,i=function(t,e){if(t===e)return t;var n=xo(t),i=xo(e),r=n.pop(),o=i.pop(),a=null;for(;r===o;)a=r,r=n.pop(),o=i.pop();return a}(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function xo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),n=(t=n).parent;return e.push(t),e}function bo(t){t.fixed|=2}function wo(t){t.fixed&=-7}function So(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ao(t){t.fixed&=-5}z.interpolateTransform=mo,z.layout={},z.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;++n<i;)e.push(yo(t[n]));return e}},z.layout.chord=function(){var m,v,_,y,x,b,w,e={},S=0;function t(){var t,e,n,i,r,o={},a=[],s=z.range(y),u=[];for(m=[],v=[],t=0,i=-1;++i<y;){for(e=0,r=-1;++r<y;)e+=_[i][r];a.push(e),u.push(z.range(y)),t+=e}for(x&&s.sort(function(t,e){return x(a[t],a[e])}),b&&u.forEach(function(t,n){t.sort(function(t,e){return b(_[n][t],_[n][e])})}),t=(Pt-S*y)/t,e=0,i=-1;++i<y;){for(n=e,r=-1;++r<y;){var l=s[i],c=u[l][r],h=_[l][c],f=e,d=e+=h*t;o[l+"-"+c]={index:l,subindex:c,startAngle:f,endAngle:d,value:h}}v[l]={index:l,startAngle:n,endAngle:e,value:a[l]},e+=S}for(i=-1;++i<y;)for(r=i-1;++r<y;){var p=o[i+"-"+r],g=o[r+"-"+i];(p.value||g.value)&&m.push(p.value<g.value?{source:g,target:p}:{source:p,target:g})}w&&A()}function A(){m.sort(function(t,e){return w((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return e.matrix=function(t){return arguments.length?(y=(_=t)&&_.length,m=v=null,e):_},e.padding=function(t){return arguments.length?(S=t,m=v=null,e):S},e.sortGroups=function(t){return arguments.length?(x=t,m=v=null,e):x},e.sortSubgroups=function(t){return arguments.length?(b=t,m=null,e):b},e.sortChords=function(t){return arguments.length?(w=t,m&&A(),e):w},e.chords=function(){return m||t(),m},e.groups=function(){return v||t(),v},e},z.layout.force=function(){var h,t,f,d,p,g,r={},m=z.dispatch("start","tick","end"),v=[1,1],_=.9,o=To,a=Po,y=-30,c=Co,x=.1,b=.64,w=[],S=[];function A(l){return function(t,e,n,i){if(t.point!==l){var r=t.cx-l.x,o=t.cy-l.y,a=i-e,s=r*r+o*o;if(a*a/b<s){if(s<c){var u=t.charge/s;l.px-=r*u,l.py-=o*u}return!0}if(t.point&&s&&s<c){u=t.pointCharge/s;l.px-=r*u,l.py-=o*u}}return!t.charge}}function e(t){t.px=z.event.x,t.py=z.event.y,r.resume()}return r.tick=function(){if((f*=.99)<.005)return h=null,m.end({type:"end",alpha:f=0}),!0;var t,e,n,i,r,o,a,s,u,l=w.length,c=S.length;for(e=0;e<c;++e)i=(n=S[e]).source,(o=(s=(r=n.target).x-i.x)*s+(u=r.y-i.y)*u)&&(s*=o=f*p[e]*((o=Math.sqrt(o))-d[e])/o,u*=o,r.x-=s*(a=i.weight+r.weight?i.weight/(i.weight+r.weight):.5),r.y-=u*a,i.x+=s*(a=1-a),i.y+=u*a);if((a=f*x)&&(s=v[0]/2,u=v[1]/2,e=-1,a))for(;++e<l;)(n=w[e]).x+=(s-n.x)*a,n.y+=(u-n.y)*a;if(y)for(!function t(e,n,i){var r=0,o=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,u=s.length,l=-1;++l<u;)null!=(a=s[l])&&(t(a,n,i),e.charge+=a.charge,r+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*i[e.point.index];e.charge+=e.pointCharge=c,r+=c*e.point.x,o+=c*e.point.y}e.cx=r/e.charge;e.cy=o/e.charge}(t=z.geom.quadtree(w),f,g),e=-1;++e<l;)(n=w[e]).fixed||t.visit(A(n));for(e=-1;++e<l;)(n=w[e]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*_,n.y-=(n.py-(n.py=n.y))*_);m.tick({type:"tick",alpha:f})},r.nodes=function(t){return arguments.length?(w=t,r):w},r.links=function(t){return arguments.length?(S=t,r):S},r.size=function(t){return arguments.length?(v=t,r):v},r.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,r):o},r.distance=r.linkDistance,r.linkStrength=function(t){return arguments.length?(a="function"==typeof t?t:+t,r):a},r.friction=function(t){return arguments.length?(_=+t,r):_},r.charge=function(t){return arguments.length?(y="function"==typeof t?t:+t,r):y},r.chargeDistance=function(t){return arguments.length?(c=t*t,r):Math.sqrt(c)},r.gravity=function(t){return arguments.length?(x=+t,r):x},r.theta=function(t){return arguments.length?(b=t*t,r):Math.sqrt(b)},r.alpha=function(t){return arguments.length?(t=+t,f?0<t?f=t:(h.c=null,h.t=NaN,h=null,m.end({type:"end",alpha:f=0})):0<t&&(m.start({type:"start",alpha:f=t}),h=Ae(r.tick)),r):f},r.start=function(){var s,u,t,l=w.length,c=S.length,e=v[0],n=v[1];for(s=0;s<l;++s)(t=w[s]).index=s,t.weight=0;for(s=0;s<c;++s)"number"==typeof(t=S[s]).source&&(t.source=w[t.source]),"number"==typeof t.target&&(t.target=w[t.target]),++t.source.weight,++t.target.weight;for(s=0;s<l;++s)t=w[s],isNaN(t.x)&&(t.x=i("x",e)),isNaN(t.y)&&(t.y=i("y",n)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(d=[],"function"==typeof o)for(s=0;s<c;++s)d[s]=+o.call(this,S[s],s);else for(s=0;s<c;++s)d[s]=o;if(p=[],"function"==typeof a)for(s=0;s<c;++s)p[s]=+a.call(this,S[s],s);else for(s=0;s<c;++s)p[s]=a;if(g=[],"function"==typeof y)for(s=0;s<l;++s)g[s]=+y.call(this,w[s],s);else for(s=0;s<l;++s)g[s]=y;function i(t,e){if(!u){for(u=new Array(l),o=0;o<l;++o)u[o]=[];for(o=0;o<c;++o){var n=S[o];u[n.source.index].push(n.target),u[n.target.index].push(n.source)}}for(var i,r=u[s],o=-1,a=r.length;++o<a;)if(!isNaN(i=r[o][t]))return i;return Math.random()*e}return r.resume()},r.resume=function(){return r.alpha(.1)},r.stop=function(){return r.alpha(0)},r.drag=function(){if(t||(t=z.behavior.drag().origin(I).on("dragstart.force",bo).on("drag.force",e).on("dragend.force",wo)),!arguments.length)return t;this.on("mouseover.force",So).on("mouseout.force",Ao).call(t)},z.rebind(r,m,"on")};var To=20,Po=1,Co=1/0;function Lo(t,e){return z.rebind(t,e,"sort","children","value"),(t.nodes=t).links=zo,t}function Eo(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(r=t.children)&&(i=r.length))for(var i,r;0<=--i;)n.push(r[i])}function ko(t,e){for(var n=[t],i=[];null!=(t=n.pop());)if(i.push(t),(o=t.children)&&(r=o.length))for(var r,o,a=-1;++a<r;)n.push(o[a]);for(;null!=(t=i.pop());)e(t)}function Mo(t){return t.children}function Oo(t){return t.value}function Ro(t,e){return e.value-t.value}function zo(t){return z.merge(t.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}z.layout.hierarchy=function(){var s=Ro,u=Mo,l=Oo;function c(t){var e,n=[t],i=[];for(t.depth=0;null!=(e=n.pop());)if(i.push(e),(o=u.call(c,e,e.depth))&&(r=o.length)){for(var r,o,a;0<=--r;)n.push(a=o[r]),a.parent=e,a.depth=e.depth+1;l&&(e.value=0),e.children=o}else l&&(e.value=+l.call(c,e,e.depth)||0),delete e.children;return ko(t,function(t){var e,n;s&&(e=t.children)&&e.sort(s),l&&(n=t.parent)&&(n.value+=t.value)}),i}return c.sort=function(t){return arguments.length?(s=t,c):s},c.children=function(t){return arguments.length?(u=t,c):u},c.value=function(t){return arguments.length?(l=t,c):l},c.revalue=function(t){return l&&(Eo(t,function(t){t.children&&(t.value=0)}),ko(t,function(t){var e;t.children||(t.value=+l.call(c,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},c},z.layout.partition=function(){var i=z.layout.hierarchy(),r=[1,1];function e(t,e){var n=i.call(this,t,e);return function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(a=o.length)){var a,s,u,l=-1;for(i=e.value?i/e.value:0;++l<a;)t(s=o[l],n,u=s.value*i,r),n+=u}}(n[0],0,r[0],r[1]/function t(e){var n=e.children,i=0;if(n&&(r=n.length))for(var r,o=-1;++o<r;)i=Math.max(i,t(n[o]));return 1+i}(n[0])),n}return e.size=function(t){return arguments.length?(r=t,e):r},Lo(e,i)},z.layout.pie=function(){var f=Number,d=Do,p=0,g=Pt,m=0;function v(n){var e,t=n.length,i=n.map(function(t,e){return+f.call(v,t,e)}),r=+("function"==typeof p?p.apply(this,arguments):p),o=("function"==typeof g?g.apply(this,arguments):g)-r,a=Math.min(Math.abs(o)/t,+("function"==typeof m?m.apply(this,arguments):m)),s=a*(o<0?-1:1),u=z.sum(i),l=u?(o-t*s)/u:0,c=z.range(t),h=[];return null!=d&&c.sort(d===Do?function(t,e){return i[e]-i[t]}:function(t,e){return d(n[t],n[e])}),c.forEach(function(t){h[t]={data:n[t],value:e=i[t],startAngle:r,endAngle:r+=e*l+s,padAngle:a}}),h}return v.value=function(t){return arguments.length?(f=t,v):f},v.sort=function(t){return arguments.length?(d=t,v):d},v.startAngle=function(t){return arguments.length?(p=t,v):p},v.endAngle=function(t){return arguments.length?(g=t,v):g},v.padAngle=function(t){return arguments.length?(m=t,v):m},v};var Do={};function Io(t){return t.x}function Go(t){return t.y}function jo(t,e,n){t.y0=e,t.y=n}z.layout.stack=function(){var h=I,f=Bo,d=Fo,p=jo,g=Io,m=Go;function v(t,e){if(!(o=t.length))return t;var n=t.map(function(t,e){return h.call(v,t,e)}),i=n.map(function(t){return t.map(function(t,e){return[g.call(v,t,e),m.call(v,t,e)]})}),r=f.call(v,i,e);n=z.permute(n,r),i=z.permute(i,r);var o,a,s,u,l=d.call(v,i,e),c=n[0].length;for(s=0;s<c;++s)for(p.call(v,n[0][s],u=l[s],i[0][s][1]),a=1;a<o;++a)p.call(v,n[a][s],u+=i[a-1][s][1],i[a][s][1]);return t}return v.values=function(t){return arguments.length?(h=t,v):h},v.order=function(t){return arguments.length?(f="function"==typeof t?t:Vo.get(t)||Bo,v):f},v.offset=function(t){return arguments.length?(d="function"==typeof t?t:No.get(t)||Fo,v):d},v.x=function(t){return arguments.length?(g=t,v):g},v.y=function(t){return arguments.length?(m=t,v):m},v.out=function(t){return arguments.length?(p=t,v):p},v};var Vo=z.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(Ho),o=t.map(Uo),a=z.range(i).sort(function(t,e){return r[t]-r[e]}),s=0,u=0,l=[],c=[];for(e=0;e<i;++e)n=a[e],s<u?(s+=o[n],l.push(n)):(u+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return z.range(t.length).reverse()},default:Bo}),No=z.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,a=[],s=0,u=[];for(n=0;n<o;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];s<i&&(s=i),a.push(i)}for(n=0;n<o;++n)u[n]=(s-a[n])/2;return u},wiggle:function(t){var e,n,i,r,o,a,s,u,l,c=t.length,h=t[0],f=h.length,d=[];for(d[0]=u=l=0,n=1;n<f;++n){for(r=e=0;e<c;++e)r+=t[e][n][1];for(o=e=0,s=h[n][0]-h[n-1][0];e<c;++e){for(i=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);i<e;++i)a+=(t[i][n][1]-t[i][n-1][1])/s;o+=a*t[e][n][1]}d[n]=u-=r?o/r*s:0,u<l&&(l=u)}for(n=0;n<f;++n)d[n]-=l;return d},expand:function(t){var e,n,i,r=t.length,o=t[0].length,a=1/r,s=[];for(n=0;n<o;++n){for(i=e=0;e<r;e++)i+=t[e][n][1];if(i)for(e=0;e<r;e++)t[e][n][1]/=i;else for(e=0;e<r;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:Fo});function Bo(t){return z.range(t.length)}function Fo(t){for(var e=-1,n=t[0].length,i=[];++e<n;)i[e]=0;return i}function Ho(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function Uo(t){return t.reduce(Zo,0)}function Zo(t,e){return t+e[1]}function Xo(t,e){return Yo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Yo(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];++n<=e;)o[n]=r*n+i;return o}function Wo(t){return[z.min(t),z.max(t)]}function qo(t,e){return t.value-e.value}function Qo(t,e){var n=t._pack_next;(t._pack_next=e)._pack_prev=t,(e._pack_next=n)._pack_prev=e}function Ko(t,e){(t._pack_next=e)._pack_prev=t}function Jo(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return n*n+i*i<.999*r*r}function $o(t){if((e=t.children)&&(u=e.length)){var e,n,i,r,o,a,s,u,l=1/0,c=-1/0,h=1/0,f=-1/0;if(e.forEach(ta),(n=e[0]).x=-n.r,n.y=0,y(n),1<u&&((i=e[1]).x=i.r,i.y=0,y(i),2<u))for(na(n,i,r=e[2]),y(r),Qo(n,r),Qo(n._pack_prev=r,i),i=n._pack_next,o=3;o<u;o++){na(n,i,r=e[o]);var d=0,p=1,g=1;for(a=i._pack_next;a!==i;a=a._pack_next,p++)if(Jo(a,r)){d=1;break}if(1==d)for(s=n._pack_prev;s!==a._pack_prev&&!Jo(s,r);s=s._pack_prev,g++);d?(p<g||p==g&&i.r<n.r?Ko(n,i=a):Ko(n=s,i),o--):(Qo(n,r),y(i=r))}var m=(l+c)/2,v=(h+f)/2,_=0;for(o=0;o<u;o++)(r=e[o]).x-=m,r.y-=v,_=Math.max(_,r.r+Math.sqrt(r.x*r.x+r.y*r.y));t.r=_,e.forEach(ea)}function y(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),h=Math.min(t.y-t.r,h),f=Math.max(t.y+t.r,f)}}function ta(t){t._pack_next=t._pack_prev=t}function ea(t){delete t._pack_next,delete t._pack_prev}function na(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var a=e.r+n.r,s=r*r+o*o,u=.5+((i*=i)-(a*=a))/(2*s),l=Math.sqrt(Math.max(0,2*a*(i+s)-(i-=s)*i-a*a))/(2*s);n.x=t.x+u*r+l*o,n.y=t.y+u*o-l*r}else n.x=t.x+i,n.y=t.y}function ia(t,e){return t.parent==e.parent?1:2}function ra(t){var e=t.children;return e.length?e[0]:t.t}function oa(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function aa(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function sa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ua(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return r<0&&(n+=r/2,r=0),o<0&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function la(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function ca(t){return t.rangeExtent?t.rangeExtent():la(t.range())}function ha(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function fa(t,e){var n,i=0,r=t.length-1,o=t[i],a=t[r];return a<o&&(n=i,i=r,r=n,n=o,o=a,a=n),t[i]=e.floor(o),t[r]=e.ceil(a),t}function da(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:pa}z.layout.histogram=function(){var h=!0,f=Number,d=Wo,p=Xo;function n(t,e){for(var n,i,r=[],o=t.map(f,this),a=d.call(this,o,e),s=p.call(this,a,o,e),u=(e=-1,o.length),l=s.length-1,c=h?1:1/u;++e<l;)(n=r[e]=[]).dx=s[e+1]-(n.x=s[e]),n.y=0;if(0<l)for(e=-1;++e<u;)(i=o[e])>=a[0]&&i<=a[1]&&((n=r[z.bisect(s,i,1,l)-1]).y+=c,n.push(t[e]));return r}return n.value=function(t){return arguments.length?(f=t,n):f},n.range=function(t){return arguments.length?(d=me(t),n):d},n.bins=function(e){return arguments.length?(p="number"==typeof e?function(t){return Yo(t,e)}:me(e),n):p},n.frequency=function(t){return arguments.length?(h=!!t,n):h},n},z.layout.pack=function(){var u,l=z.layout.hierarchy().sort(qo),c=0,h=[1,1];function e(t,e){var n=l.call(this,t,e),i=n[0],r=h[0],o=h[1],a=null==u?Math.sqrt:"function"==typeof u?u:function(){return u};if(i.x=i.y=0,ko(i,function(t){t.r=+a(t.value)}),ko(i,$o),c){var s=c*(u?1:Math.max(2*i.r/r,2*i.r/o))/2;ko(i,function(t){t.r+=s}),ko(i,$o),ko(i,function(t){t.r-=s})}return function t(e,n,i,r){var o=e.children;e.x=n+=r*e.x;e.y=i+=r*e.y;e.r*=r;if(o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,i,r)}(i,r/2,o/2,u?1:1/Math.max(2*i.r/r,2*i.r/o)),n}return e.size=function(t){return arguments.length?(h=t,e):h},e.radius=function(t){return arguments.length?(u=null==t||"function"==typeof t?t:+t,e):u},e.padding=function(t){return arguments.length?(c=+t,e):c},Lo(e,l)},z.layout.tree=function(){var h=z.layout.hierarchy().sort(null).value(null),g=ia,f=[1,1],d=null;function e(t,e){var n=h.call(this,t,e),i=n[0],r=function(t){var e,n={A:null,children:[t]},i=[n];for(;null!=(e=i.pop());)for(var r,o=e.children,a=0,s=o.length;a<s;++a)i.push((o[a]=r={_:o[a],parent:e,children:(r=o[a].children)&&r.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=r);return n.children[0]}(i);if(ko(r,p),r.parent.m=-r.z,Eo(r,m),d)Eo(i,v);else{var o=i,a=i,s=i;Eo(i,function(t){t.x<o.x&&(o=t),t.x>a.x&&(a=t),t.depth>s.depth&&(s=t)});var u=g(o,a)/2-o.x,l=f[0]/(a.x+g(a,o)/2+u),c=f[1]/(s.depth||1);Eo(i,function(t){t.x=(t.x+u)*l,t.y=t.depth*c})}return n}function p(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,n=0,i=0,r=t.children,o=r.length;for(;0<=--o;)(e=r[o]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+g(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+g(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,r=t,o=t,a=e,s=r.parent.children[0],u=r.m,l=o.m,c=a.m,h=s.m;a=oa(a),r=ra(r),a&&r;)s=ra(s),(o=oa(o)).a=t,0<(i=a.z+c-r.z-u+g(a._,r._))&&(aa((d=t,p=n,(f=a).a.parent===d.parent?f.a:p),t,i),u+=i,l+=i),c+=a.m,u+=r.m,h+=s.m,l+=o.m;a&&!oa(o)&&(o.t=a,o.m+=c-l),r&&!ra(s)&&(s.t=r,s.m+=u-h,n=t)}var f,d,p;return n}(t,i,t.parent.A||n[0])}function m(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function v(t){t.x*=f[0],t.y=t.depth*f[1]}return e.separation=function(t){return arguments.length?(g=t,e):g},e.size=function(t){return arguments.length?(d=null==(f=t)?v:null,e):d?null:f},e.nodeSize=function(t){return arguments.length?(d=null==(f=t)?null:v,e):d?f:null},Lo(e,h)},z.layout.cluster=function(){var c=z.layout.hierarchy().sort(null).value(null),h=ia,f=[1,1],d=!1;function e(t,e){var r,n=c.call(this,t,e),i=n[0],o=0;ko(i,function(t){var e,n,i=t.children;i&&i.length?(t.x=(n=i).reduce(function(t,e){return t+e.x},0)/n.length,t.y=(e=i,1+z.max(e,function(t){return t.y}))):(t.x=r?o+=h(t,r):0,t.y=0,r=t)});var a=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(i),s=function t(e){var n,i=e.children;return i&&(n=i.length)?t(i[n-1]):e}(i),u=a.x-h(a,s)/2,l=s.x+h(s,a)/2;return ko(i,d?function(t){t.x=(t.x-i.x)*f[0],t.y=(i.y-t.y)*f[1]}:function(t){t.x=(t.x-u)/(l-u)*f[0],t.y=(1-(i.y?t.y/i.y:1))*f[1]}),n}return e.separation=function(t){return arguments.length?(h=t,e):h},e.size=function(t){return arguments.length?(d=null==(f=t),e):d?null:f},e.nodeSize=function(t){return arguments.length?(d=null!=(f=t),e):d?f:null},Lo(e,c)},z.layout.treemap=function(){var i,r=z.layout.hierarchy(),c=Math.round,o=[1,1],a=null,h=sa,s=!1,f="squarify",u=.5*(1+Math.sqrt(5));function d(t,e){for(var n,i,r=-1,o=t.length;++r<o;)i=(n=t[r]).value*(e<0?0:e),n.area=isNaN(i)||i<=0?0:i}function p(t){var e=t.children;if(e&&e.length){var n,i,r,o=h(t),a=[],s=e.slice(),u=1/0,l="slice"===f?o.dx:"dice"===f?o.dy:"slice-dice"===f?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(d(s,o.dx*o.dy/t.value),a.area=0;0<(r=s.length);)a.push(n=s[r-1]),a.area+=n.area,u="squarify"!==f||(i=g(a,l))<=u?(s.pop(),i):(a.area-=a.pop().area,m(a,l,o,!1),l=Math.min(o.dx,o.dy),a.length=a.area=0,1/0);a.length&&(m(a,l,o,!0),a.length=a.area=0),e.forEach(p)}}function l(t){var e=t.children;if(e&&e.length){var n,i=h(t),r=e.slice(),o=[];for(d(r,i.dx*i.dy/t.value),o.area=0;n=r.pop();)o.push(n),o.area+=n.area,null!=n.z&&(m(o,n.z?i.dx:i.dy,i,!r.length),o.length=o.area=0);e.forEach(l)}}function g(t,e){for(var n,i=t.area,r=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),r<n&&(r=n));return e*=e,(i*=i)?Math.max(e*r*u/i,i/(e*o*u)):1/0}function m(t,e,n,i){var r,o=-1,a=t.length,s=n.x,u=n.y,l=e?c(t.area/e):0;if(e==n.dx){for((i||l>n.dy)&&(l=n.dy);++o<a;)(r=t[o]).x=s,r.y=u,r.dy=l,s+=r.dx=Math.min(n.x+n.dx-s,l?c(r.area/l):0);r.z=!0,r.dx+=n.x+n.dx-s,n.y+=l,n.dy-=l}else{for((i||l>n.dx)&&(l=n.dx);++o<a;)(r=t[o]).x=s,r.y=u,r.dx=l,u+=r.dy=Math.min(n.y+n.dy-u,l?c(r.area/l):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=l,n.dx-=l}}function v(t){var e=i||r(t),n=e[0];return n.x=n.y=0,n.value?(n.dx=o[0],n.dy=o[1]):n.dx=n.dy=0,i&&r.revalue(n),d([n],n.dx*n.dy/n.value),(i?l:p)(n),s&&(i=e),e}return v.size=function(t){return arguments.length?(o=t,v):o},v.padding=function(n){if(!arguments.length)return a;function t(t){return ua(t,n)}var e;return h=null==(a=n)?sa:"function"==(e=typeof n)?function(t){var e=n.call(v,t,t.depth);return null==e?sa(t):ua(t,"number"==typeof e?[e,e,e,e]:e)}:("number"===e&&(n=[n,n,n,n]),t),v},v.round=function(t){return arguments.length?(c=t?Math.round:Number,v):c!=Number},v.sticky=function(t){return arguments.length?(s=t,i=null,v):s},v.ratio=function(t){return arguments.length?(u=t,v):u},v.mode=function(t){return arguments.length?(f=t+"",v):f},Lo(v,r)},z.random={normal:function(i,r){var t=arguments.length;return t<2&&(r=1),t<1&&(i=0),function(){for(var t,e,n;!(n=(t=2*Math.random()-1)*t+(e=2*Math.random()-1)*e)||1<n;);return i+r*t*Math.sqrt(-2*Math.log(n)/n)}},logNormal:function(){var t=z.random.normal.apply(z,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=z.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},z.scale={};var pa={floor:I,ceil:I};function ga(n,t,e,i){var r=[],o=[],a=0,s=Math.min(n.length,t.length)-1;for(n[s]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=s;)r.push(e(n[a-1],n[a])),o.push(i(t[a-1],t[a]));return function(t){var e=z.bisect(n,t,1,s)-1;return o[e](r[e](t))}}function ma(t,e){return z.rebind(t,e,"range","rangeRound","interpolate","clamp")}function va(t,e){return fa(t,da(_a(t,e)[2])),fa(t,da(_a(t,e)[2])),t}function _a(t,e){null==e&&(e=10);var n=la(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return o<=.15?r*=10:o<=.35?r*=5:o<=.75&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function ya(t,e){return z.range.apply(z,_a(t,e))}function xa(t,e,n){var i,r,o,a=_a(t,e);if(n){var s=ke.exec(n);if(s.shift(),"s"===s[8]){var u=z.formatPrefix(Math.max(R(a[0]),R(a[1])));return s[7]||(s[7]="."+wa(u.scale(a[2]))),s[8]="f",n=z.format(s.join("")),function(t){return n(u.scale(t))+u.symbol}}s[7]||(s[7]="."+(i=s[8],o=wa((r=a)[2]),i in ba?Math.abs(o-wa(Math.max(R(r[0]),R(r[1]))))+ +("e"!==i):o-2*("%"===i))),n=s.join("")}else n=",."+wa(a[2])+"f";return z.format(n)}z.scale.linear=function(){return function t(n,i,r,o){var a,s;function e(){var t=2<Math.min(n.length,i.length)?ga:ha,e=o?_o:vo;return a=t(n,i,e,r),s=t(i,n,e,qr),u}function u(t){return a(t)}u.invert=function(t){return s(t)};u.domain=function(t){return arguments.length?(n=t.map(Number),e()):n};u.range=function(t){return arguments.length?(i=t,e()):i};u.rangeRound=function(t){return u.range(t).interpolate(lo)};u.clamp=function(t){return arguments.length?(o=t,e()):o};u.interpolate=function(t){return arguments.length?(r=t,e()):r};u.ticks=function(t){return ya(n,t)};u.tickFormat=function(t,e){return xa(n,t,e)};u.nice=function(t){return va(n,t),e()};u.copy=function(){return t(n,i,r,o)};return e()}([0,1],[0,1],qr,!1)};var ba={s:1,g:1,p:1,r:1,e:1};function wa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}z.scale.log=function(){return function t(e,u,l,c){function h(t){return(l?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(u)}function f(t){return l?Math.pow(u,t):-Math.pow(u,-t)}function r(t){return e(h(t))}r.invert=function(t){return f(e.invert(t))};r.domain=function(t){return arguments.length?(l=0<=t[0],e.domain((c=t.map(Number)).map(h)),r):c};r.base=function(t){return arguments.length?(u=+t,e.domain(c.map(h)),r):u};r.nice=function(){var t=fa(c.map(h),l?Math:Aa);return e.domain(t),c=t.map(f),r};r.ticks=function(){var t=la(c),e=[],n=t[0],i=t[1],r=Math.floor(h(n)),o=Math.ceil(h(i)),a=u%1?2:u;if(isFinite(o-r)){if(l){for(;r<o;r++)for(var s=1;s<a;s++)e.push(f(r)*s);e.push(f(r))}else for(e.push(f(r));r++<o;)for(var s=a-1;0<s;s--)e.push(f(r)*s);for(r=0;e[r]<n;r++);for(o=e.length;e[o-1]>i;o--);e=e.slice(r,o)}return e};r.tickFormat=function(t,n){if(!arguments.length)return Sa;arguments.length<2?n=Sa:"function"!=typeof n&&(n=z.format(n));var i=Math.max(1,u*t/r.ticks().length);return function(t){var e=t/f(Math.round(h(t)));return e*u<u-.5&&(e*=u),e<=i?n(t):""}};r.copy=function(){return t(e.copy(),u,l,c)};return ma(r,e)}(z.scale.linear().domain([0,1]),10,!0,[1,10])};var Sa=z.format(".0e"),Aa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Ta(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}z.scale.pow=function(){return function t(e,n,i){var r=Ta(n),o=Ta(1/n);function a(t){return e(r(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((i=t.map(Number)).map(r)),a):i};a.ticks=function(t){return ya(i,t)};a.tickFormat=function(t,e){return xa(i,t,e)};a.nice=function(t){return a.domain(va(i,t))};a.exponent=function(t){return arguments.length?(r=Ta(n=t),o=Ta(1/n),e.domain(i.map(r)),a):n};a.copy=function(){return t(e.copy(),n,i)};return ma(a,e)}(z.scale.linear(),1,[0,1])},z.scale.sqrt=function(){return z.scale.pow().exponent(.5)},z.scale.ordinal=function(){return function t(s,u){var r,l,c;function h(t){return l[((r.get(t)||("range"===u.t?r.set(t,s.push(t)):NaN))-1)%l.length]}function f(e,n){return z.range(s.length).map(function(t){return e+n*t})}h.domain=function(t){if(!arguments.length)return s;s=[],r=new _;for(var e,n=-1,i=t.length;++n<i;)r.has(e=t[n])||r.set(e,s.push(e));return h[u.t].apply(h,u.a)};h.range=function(t){return arguments.length?(l=t,c=0,u={t:"range",a:arguments},h):l};h.rangePoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=(n+i)/2,0):(i-n)/(s.length-1+e);return l=f(n+r*e/2,r),c=0,u={t:"rangePoints",a:arguments},h};h.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var n=t[0],i=t[1],r=s.length<2?(n=i=Math.round((n+i)/2),0):(i-n)/(s.length-1+e)|0;return l=f(n+Math.round(r*e/2+(i-n-(s.length-1+e)*r)/2),r),c=0,u={t:"rangeRoundPoints",a:arguments},h};h.rangeBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],o=t[1-i],a=(o-r)/(s.length-e+2*n);return l=f(r+a*n,a),i&&l.reverse(),c=a*(1-e),u={t:"rangeBands",a:arguments},h};h.rangeRoundBands=function(t,e,n){arguments.length<2&&(e=0),arguments.length<3&&(n=e);var i=t[1]<t[0],r=t[i-0],o=t[1-i],a=Math.floor((o-r)/(s.length-e+2*n));return l=f(r+Math.round((o-r-(s.length-e)*a)/2),a),i&&l.reverse(),c=Math.round(a*(1-e)),u={t:"rangeRoundBands",a:arguments},h};h.rangeBand=function(){return c};h.rangeExtent=function(){return la(u.a[0])};h.copy=function(){return t(s,u)};return h.domain(s)}([],{t:"range",a:[[]]})},z.scale.category10=function(){return z.scale.ordinal().range(Pa)},z.scale.category20=function(){return z.scale.ordinal().range(Ca)},z.scale.category20b=function(){return z.scale.ordinal().range(La)},z.scale.category20c=function(){return z.scale.ordinal().range(Ea)};var Pa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),Ca=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),La=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),Ea=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function ka(){return 0}z.scale.quantile=function(){return function t(n,i){var r;function e(){var t=0,e=i.length;for(r=[];++t<e;)r[t-1]=z.quantile(n,t/e);return o}function o(t){if(!isNaN(t=+t))return i[z.bisect(r,t)]}o.domain=function(t){return arguments.length?(n=t.map(l).filter(c).sort(u),e()):n};o.range=function(t){return arguments.length?(i=t,e()):i};o.quantiles=function(){return r};o.invertExtent=function(t){return(t=i.indexOf(t))<0?[NaN,NaN]:[0<t?r[t-1]:n[0],t<r.length?r[t]:n[n.length-1]]};o.copy=function(){return t(n,i)};return e()}([],[])},z.scale.quantize=function(){return function t(e,n,i){var r,o;function a(t){return i[Math.max(0,Math.min(o,Math.floor(r*(t-e))))]}function s(){return r=i.length/(n-e),o=i.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};a.range=function(t){return arguments.length?(i=t,s()):i};a.invertExtent=function(t){return[t=(t=i.indexOf(t))<0?NaN:t/r+e,t+1/r]};a.copy=function(){return t(e,n,i)};return s()}(0,1,[0,1])},z.scale.threshold=function(){return function t(e,n){function i(t){if(t<=t)return n[z.bisect(e,t)]}i.domain=function(t){return arguments.length?(e=t,i):e};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};i.copy=function(){return t(e,n)};return i}([.5],[0,1])},z.scale.identity=function(){return function t(n){function e(t){return+t}e.invert=e;e.domain=e.range=function(t){return arguments.length?(n=t.map(e),e):n};e.ticks=function(t){return ya(n,t)};e.tickFormat=function(t,e){return xa(n,t,e)};e.copy=function(){return t(n)};return e}([0,1])},z.svg={},z.svg.arc=function(){var j=Oa,V=Ra,N=ka,B=Ma,F=za,H=Da,U=Ia;function e(){var t=Math.max(0,+j.apply(this,arguments)),e=Math.max(0,+V.apply(this,arguments)),n=F.apply(this,arguments)-Lt,i=H.apply(this,arguments)-Lt,r=Math.abs(i-n),o=i<n?0:1;if(e<t&&(a=e,e=t,t=a),Ct<=r)return Z(e,o)+(t?Z(t,1-o):"")+"Z";var a,s,u,l,c,h,f,d,p,g,m,v,_=0,y=0,x=[];if((l=(+U.apply(this,arguments)||0)/2)&&(u=B===Ma?Math.sqrt(t*t+e*e):+B.apply(this,arguments),o||(y*=-1),e&&(y=zt(u/e*Math.sin(l))),t&&(_=zt(u/t*Math.sin(l)))),e){c=e*Math.cos(n+y),h=e*Math.sin(n+y),f=e*Math.cos(i-y),d=e*Math.sin(i-y);var b=Math.abs(i-n-2*y)<=Tt?0:1;if(y&&Ga(c,h,f,d)===o^b){var w=(n+i)/2;c=e*Math.cos(w),h=e*Math.sin(w),f=d=null}}else c=h=0;if(t){p=t*Math.cos(i-_),g=t*Math.sin(i-_),m=t*Math.cos(n+_),v=t*Math.sin(n+_);var S=Math.abs(n-i+2*_)<=Tt?0:1;if(_&&Ga(p,g,m,v)===1-o^S){var A=(n+i)/2;p=t*Math.cos(A),g=t*Math.sin(A),m=v=null}}else p=g=0;if(St<r&&.001<(a=Math.min(Math.abs(e-t)/2,+N.apply(this,arguments)))){s=t<e^o?0:1;var T=a,P=a;if(r<Tt){var C=null==m?[p,g]:null==f?[c,h]:sr([c,h],[m,v],[f,d],[p,g]),L=c-C[0],E=h-C[1],k=f-C[0],M=d-C[1],O=1/Math.sin(Math.acos((L*k+E*M)/(Math.sqrt(L*L+E*E)*Math.sqrt(k*k+M*M)))/2),R=Math.sqrt(C[0]*C[0]+C[1]*C[1]);P=Math.min(a,(t-R)/(O-1)),T=Math.min(a,(e-R)/(O+1))}if(null!=f){var z=ja(null==m?[p,g]:[m,v],[c,h],e,T,o),D=ja([f,d],[p,g],e,T,o);a===T?x.push("M",z[0],"A",T,",",T," 0 0,",s," ",z[1],"A",e,",",e," 0 ",1-o^Ga(z[1][0],z[1][1],D[1][0],D[1][1]),",",o," ",D[1],"A",T,",",T," 0 0,",s," ",D[0]):x.push("M",z[0],"A",T,",",T," 0 1,",s," ",D[0])}else x.push("M",c,",",h);if(null!=m){var I=ja([c,h],[m,v],t,-P,o),G=ja([p,g],null==f?[c,h]:[f,d],t,-P,o);a===P?x.push("L",G[0],"A",P,",",P," 0 0,",s," ",G[1],"A",t,",",t," 0 ",o^Ga(G[1][0],G[1][1],I[1][0],I[1][1]),",",1-o," ",I[1],"A",P,",",P," 0 0,",s," ",I[0]):x.push("L",G[0],"A",P,",",P," 0 0,",s," ",I[0])}else x.push("L",p,",",g)}else x.push("M",c,",",h),null!=f&&x.push("A",e,",",e," 0 ",b,",",o," ",f,",",d),x.push("L",p,",",g),null!=m&&x.push("A",t,",",t," 0 ",S,",",1-o," ",m,",",v);return x.push("Z"),x.join("")}function Z(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return e.innerRadius=function(t){return arguments.length?(j=me(t),e):j},e.outerRadius=function(t){return arguments.length?(V=me(t),e):V},e.cornerRadius=function(t){return arguments.length?(N=me(t),e):N},e.padRadius=function(t){return arguments.length?(B=t==Ma?Ma:me(t),e):B},e.startAngle=function(t){return arguments.length?(F=me(t),e):F},e.endAngle=function(t){return arguments.length?(H=me(t),e):H},e.padAngle=function(t){return arguments.length?(U=me(t),e):U},e.centroid=function(){var t=(+j.apply(this,arguments)+ +V.apply(this,arguments))/2,e=(+F.apply(this,arguments)+ +H.apply(this,arguments))/2-Lt;return[Math.cos(e)*t,Math.sin(e)*t]},e};var Ma="auto";function Oa(t){return t.innerRadius}function Ra(t){return t.outerRadius}function za(t){return t.startAngle}function Da(t){return t.endAngle}function Ia(t){return t&&t.padAngle}function Ga(t,e,n,i){return 0<(t-n)*e-(e-i)*t?0:1}function ja(t,e,n,i,r){var o=t[0]-e[0],a=t[1]-e[1],s=(r?i:-i)/Math.sqrt(o*o+a*a),u=s*a,l=-s*o,c=t[0]+u,h=t[1]+l,f=e[0]+u,d=e[1]+l,p=(c+f)/2,g=(h+d)/2,m=f-c,v=d-h,_=m*m+v*v,y=n-i,x=c*d-f*h,b=(v<0?-1:1)*Math.sqrt(Math.max(0,y*y*_-x*x)),w=(x*v-m*b)/_,S=(-x*m-v*b)/_,A=(x*v+m*b)/_,T=(-x*m+v*b)/_,P=w-p,C=S-g,L=A-p,E=T-g;return L*L+E*E<P*P+C*C&&(w=A,S=T),[[w-u,S-l],[w*n/y,S*n/y]]}function Va(l){var c=er,h=nr,f=Yn,d=Ba,e=d.key,p=.7;function n(t){var e,n=[],i=[],r=-1,o=t.length,a=me(c),s=me(h);function u(){n.push("M",d(l(i),p))}for(;++r<o;)f.call(this,e=t[r],r)?i.push([+a.call(this,e,r),+s.call(this,e,r)]):i.length&&(u(),i=[]);return i.length&&u(),n.length?n.join(""):null}return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(h=t,n):h},n.defined=function(t){return arguments.length?(f=t,n):f},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?d=t:(d=Na.get(t)||Ba).key,n):e},n.tension=function(t){return arguments.length?(p=t,n):p},n}z.svg.line=function(){return Va(I)};var Na=z.map({linear:Ba,"linear-closed":Fa,step:function(t){var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];for(;++e<n;)r.push("H",(i[0]+(i=t[e])[0])/2,"V",i[1]);1<n&&r.push("H",i[0]);return r.join("")},"step-before":Ha,"step-after":Ua,basis:Ya,"basis-open":function(t){if(t.length<4)return Ba(t);var e,n=[],i=-1,r=t.length,o=[0],a=[0];for(;++i<3;)e=t[i],o.push(e[0]),a.push(e[1]);n.push(Wa(Ka,o)+","+Wa(Ka,a)),--i;for(;++i<r;)e=t[i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Ja(n,o,a);return n.join("")},"basis-closed":function(t){var e,n,i=-1,r=t.length,o=r+4,a=[],s=[];for(;++i<4;)n=t[i%r],a.push(n[0]),s.push(n[1]);e=[Wa(Ka,a),",",Wa(Ka,s)],--i;for(;++i<o;)n=t[i%r],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ja(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],a=t[0][1],s=t[n][0]-o,u=t[n][1]-a,l=-1;++l<=n;)i=t[l],r=l/n,i[0]=e*i[0]+(1-e)*(o+r*s),i[1]=e*i[1]+(1-e)*(a+r*u);return Ya(t)},cardinal:function(t,e){return t.length<3?Ba(t):t[0]+Za(t,Xa(t,e))},"cardinal-open":function(t,e){return t.length<4?Ba(t):t[1]+Za(t.slice(1,-1),Xa(t,e))},"cardinal-closed":function(t,e){return t.length<3?Fa(t):t[0]+Za((t.push(t[0]),t),Xa([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ba(t):t[0]+Za(t,function(t){var e,n,i,r,o=[],a=function(t){var e=0,n=t.length-1,i=[],r=t[0],o=t[1],a=i[0]=$a(r,o);for(;++e<n;)i[e]=(a+(a=$a(r=o,o=t[e+1])))/2;return i[e]=a,i}(t),s=-1,u=t.length-1;for(;++s<u;)e=$a(t[s],t[s+1]),R(e)<St?a[s]=a[s+1]=0:(n=a[s]/e,i=a[s+1]/e,9<(r=n*n+i*i)&&(r=3*e/Math.sqrt(r),a[s]=r*n,a[s+1]=r*i));s=-1;for(;++s<=u;)r=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([r||0,a[s]*r||0]);return o}(t))}});function Ba(t){return 1<t.length?t.join("L"):t+"Z"}function Fa(t){return t.join("L")+"Z"}function Ha(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Ua(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];++e<n;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Za(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ba(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],a=e[0],s=a,u=1;if(n&&(i+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],r=t[1],u=2),1<e.length){s=e[1],o=t[u],u++,i+="C"+(r[0]+a[0])+","+(r[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,u++)o=t[u],s=e[l],i+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[u];i+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return i}function Xa(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],a=t[1],s=1,u=t.length;++s<u;)n=o,o=a,a=t[s],i.push([r*(a[0]-n[0]),r*(a[1]-n[1])]);return i}function Ya(t){if(t.length<3)return Ba(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],a=[r,r,r,(i=t[1])[0]],s=[o,o,o,i[1]],u=[r,",",o,"L",Wa(Ka,a),",",Wa(Ka,s)];for(t.push(t[n-1]);++e<=n;)i=t[e],a.shift(),a.push(i[0]),s.shift(),s.push(i[1]),Ja(u,a,s);return t.pop(),u.push("L",i),u.join("")}function Wa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Na.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var qa=[0,2/3,1/3,0],Qa=[0,1/3,2/3,0],Ka=[0,1/6,2/3,1/6];function Ja(t,e,n){t.push("C",Wa(qa,e),",",Wa(qa,n),",",Wa(Qa,e),",",Wa(Qa,n),",",Wa(Ka,e),",",Wa(Ka,n))}function $a(t,e){return(e[1]-t[1])/(e[0]-t[0])}function ts(t){for(var e,n,i,r=-1,o=t.length;++r<o;)n=(e=t[r])[0],i=e[1]-Lt,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function es(p){var g=er,m=er,v=0,_=nr,y=Yn,x=Ba,e=x.key,b=x,w="L",S=.7;function n(t){var e,n,i,r=[],o=[],a=[],s=-1,u=t.length,l=me(g),c=me(v),h=g===m?function(){return n}:me(m),f=v===_?function(){return i}:me(_);function d(){r.push("M",x(p(a),S),w,b(p(o.reverse()),S),"Z")}for(;++s<u;)y.call(this,e=t[s],s)?(o.push([n=+l.call(this,e,s),i=+c.call(this,e,s)]),a.push([+h.call(this,e,s),+f.call(this,e,s)])):o.length&&(d(),o=[],a=[]);return o.length&&d(),r.length?r.join(""):null}return n.x=function(t){return arguments.length?(g=m=t,n):m},n.x0=function(t){return arguments.length?(g=t,n):g},n.x1=function(t){return arguments.length?(m=t,n):m},n.y=function(t){return arguments.length?(v=_=t,n):_},n.y0=function(t){return arguments.length?(v=t,n):v},n.y1=function(t){return arguments.length?(_=t,n):_},n.defined=function(t){return arguments.length?(y=t,n):y},n.interpolate=function(t){return arguments.length?(e="function"==typeof t?x=t:(x=Na.get(t)||Ba).key,b=x.reverse||x,w=x.closed?"M":"L",n):e},n.tension=function(t){return arguments.length?(S=t,n):S},n}function ns(t){return t.radius}function is(t){return[t.x,t.y]}function rs(){return 64}function os(){return"circle"}function as(t){var e=Math.sqrt(t/Tt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}z.svg.line.radial=function(){var t=Va(ts);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Ha.reverse=Ua).reverse=Ha,z.svg.area=function(){return es(I)},z.svg.area.radial=function(){var t=es(ts);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},z.svg.chord=function(){var a=Bi,s=Fi,u=ns,l=za,c=Da;function e(t,e){var n,i,r=h(this,a,t,e),o=h(this,s,t,e);return"M"+r.p0+f(r.r,r.p1,r.a1-r.a0)+(i=o,(n=r).a0==i.a0&&n.a1==i.a1?d(r.r,r.p1,r.r,r.p0):d(r.r,r.p1,o.r,o.p0)+f(o.r,o.p1,o.a1-o.a0)+d(o.r,o.p1,r.r,r.p0))+"Z"}function h(t,e,n,i){var r=e.call(t,n,i),o=u.call(t,r,i),a=l.call(t,r,i)-Lt,s=c.call(t,r,i)-Lt;return{r:o,a0:a,a1:s,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(s),o*Math.sin(s)]}}function f(t,e,n){return"A"+t+","+t+" 0 "+ +(Tt<n)+",1 "+e}function d(t,e,n,i){return"Q 0,0 "+i}return e.radius=function(t){return arguments.length?(u=me(t),e):u},e.source=function(t){return arguments.length?(a=me(t),e):a},e.target=function(t){return arguments.length?(s=me(t),e):s},e.startAngle=function(t){return arguments.length?(l=me(t),e):l},e.endAngle=function(t){return arguments.length?(c=me(t),e):c},e},z.svg.diagonal=function(){var a=Bi,s=Fi,u=is;function e(t,e){var n=a.call(this,t,e),i=s.call(this,t,e),r=(n.y+i.y)/2,o=[n,{x:n.x,y:r},{x:i.x,y:r},i];return"M"+(o=o.map(u))[0]+"C"+o[1]+" "+o[2]+" "+o[3]}return e.source=function(t){return arguments.length?(a=me(t),e):a},e.target=function(t){return arguments.length?(s=me(t),e):s},e.projection=function(t){return arguments.length?(u=t,e):u},e},z.svg.diagonal.radial=function(){var t=z.svg.diagonal(),e=is,n=t.projection;return t.projection=function(t){return arguments.length?n((i=e=t,function(){var t=i.apply(this,arguments),e=t[0],n=t[1]-Lt;return[e*Math.cos(n),e*Math.sin(n)]})):e;var i},t},z.svg.symbol=function(){var n=os,i=rs;function e(t,e){return(ss.get(n.call(this,t,e))||as)(i.call(this,t,e))}return e.type=function(t){return arguments.length?(n=me(t),e):n},e.size=function(t){return arguments.length?(i=me(t),e):i},e};var ss=z.map({circle:as,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ls)),n=e*ls;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/us),n=e*us/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/us),n=e*us/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});z.svg.symbolTypes=ss.keys();var us=Math.sqrt(3),ls=Math.tan(30*Et);X.transition=function(t){for(var e,n,i=ds||++ms,r=ys(t),o=[],a=ps||{time:Date.now(),ease:ro,delay:0,duration:250},s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(n=l[c])&&xs(n,c,r,i,a),e.push(n)}return fs(o,r,i)},X.interrupt=function(t){return this.each(null==t?cs:hs(ys(t)))};var cs=hs(ys());function hs(i){return function(){var t,e,n;(t=this[i])&&(n=t[e=t.active])&&(n.timer.c=null,n.timer.t=NaN,--t.count?delete t[e]:delete this[i],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function fs(t,e,n){return B(t,gs),t.namespace=e,t.id=n,t}var ds,ps,gs=[],ms=0;function vs(t,i,r,o){var a=t.id,s=t.namespace;return ct(t,"function"==typeof r?function(t,e,n){t[s][a].tween.set(i,o(r.call(t,t.__data__,e,n)))}:(r=o(r),function(t){t[s][a].tween.set(i,r)}))}function _s(t){return null==t&&(t=""),function(){this.textContent=t}}function ys(t){return null==t?"__transition__":"__transition_"+t+"__"}function xs(o,a,r,s,t){var u,l,c,h,f,d=o[r]||(o[r]={active:0,count:0}),p=d[s];function n(t){var e=d.active,n=d[e];for(var i in n&&(n.timer.c=null,n.timer.t=NaN,--d.count,delete d[e],n.event&&n.event.interrupt.call(o,o.__data__,n.index)),d)if(+i<s){var r=d[i];r.timer.c=null,r.timer.t=NaN,--d.count,delete d[i]}l.c=g,Ae(function(){return l.c&&g(t||1)&&(l.c=null,l.t=NaN),1},0,u),d.active=s,p.event&&p.event.start.call(o,o.__data__,a),f=[],p.tween.forEach(function(t,e){(e=e.call(o,o.__data__,a))&&f.push(e)}),h=p.ease,c=p.duration}function g(t){for(var e=t/c,n=h(e),i=f.length;0<i;)f[--i].call(o,n);if(1<=e)return p.event&&p.event.end.call(o,o.__data__,a),--d.count?delete d[s]:delete o[r],1}p||(u=t.time,l=Ae(function(t){var e=p.delay;if(l.t=e+u,e<=t)return n(t-e);l.c=n},0,u),p=d[s]={tween:new _,time:u,timer:l,delay:t.delay,duration:t.duration,ease:t.ease,index:a},t=null,++d.count)}gs.call=X.call,gs.empty=X.empty,gs.node=X.node,gs.size=X.size,z.transition=function(t,e){return t&&t.transition?ds?t.transition(e):t:z.selection().transition(t)},(z.transition.prototype=gs).select=function(t){var e,n,i,r=this.id,o=this.namespace,a=[];t=Y(t);for(var s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,h=l.length;++c<h;)(i=l[c])&&(n=t.call(i,i.__data__,c,s))?("__data__"in i&&(n.__data__=i.__data__),xs(n,c,o,r,i[o][r]),e.push(n)):e.push(null)}return fs(a,o,r)},gs.selectAll=function(t){var e,n,i,r,o,a=this.id,s=this.namespace,u=[];t=W(t);for(var l=-1,c=this.length;++l<c;)for(var h=this[l],f=-1,d=h.length;++f<d;)if(i=h[f]){o=i[s][a],n=t.call(i,i.__data__,f,l),u.push(e=[]);for(var p=-1,g=n.length;++p<g;)(r=n[p])&&xs(r,p,s,a,o),e.push(r)}return fs(u,s,a)},gs.filter=function(t){var e,n,i=[];"function"!=typeof t&&(t=lt(t));for(var r=0,o=this.length;r<o;r++){i.push(e=[]);for(var a,s=0,u=(a=this[r]).length;s<u;s++)(n=a[s])&&t.call(n,n.__data__,s,r)&&e.push(n)}return fs(i,this.namespace,this.id)},gs.tween=function(e,n){var i=this.id,r=this.namespace;return arguments.length<2?this.node()[r][i].tween.get(e):ct(this,null==n?function(t){t[r][i].tween.remove(e)}:function(t){t[r][i].tween.set(e,n)})},gs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?mo:qr,r=z.ns.qualify(t);function o(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}return vs(this,"attr."+t,e,r.local?function(n){return null==n?a:(n+="",function(){var e,t=this.getAttributeNS(r.space,r.local);return t!==n&&(e=i(t,n),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(n){return null==n?o:(n+="",function(){var e,t=this.getAttribute(r);return t!==n&&(e=i(t,n),function(t){this.setAttribute(r,e(t))})})})},gs.attrTween=function(t,i){var r=z.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,e){var n=i.call(this,t,e,this.getAttributeNS(r.space,r.local));return n&&function(t){this.setAttributeNS(r.space,r.local,n(t))}}:function(t,e){var n=i.call(this,t,e,this.getAttribute(r));return n&&function(t){this.setAttribute(r,n(t))}})},gs.style=function(i,t,r){var e=arguments.length;if(e<3){if("string"!=typeof i){for(r in e<2&&(t=""),i)this.style(r,i[r],t);return this}r=""}function o(){this.style.removeProperty(i)}return vs(this,"style."+i,t,function(n){return null==n?o:(n+="",function(){var e,t=D(this).getComputedStyle(this,null).getPropertyValue(i);return t!==n&&(e=qr(t,n),function(t){this.style.setProperty(i,e(t),r)})})})},gs.styleTween=function(i,r,o){return arguments.length<3&&(o=""),this.tween("style."+i,function(t,e){var n=r.call(this,t,e,D(this).getComputedStyle(this,null).getPropertyValue(i));return n&&function(t){this.style.setProperty(i,n(t),o)}})},gs.text=function(t){return vs(this,"text",t,_s)},gs.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},gs.ease=function(e){var n=this.id,i=this.namespace;return arguments.length<1?this.node()[i][n].ease:("function"!=typeof e&&(e=z.ease.apply(z,arguments)),ct(this,function(t){t[i][n].ease=e}))},gs.delay=function(i){var r=this.id,o=this.namespace;return arguments.length<1?this.node()[o][r].delay:ct(this,"function"==typeof i?function(t,e,n){t[o][r].delay=+i.call(t,t.__data__,e,n)}:(i=+i,function(t){t[o][r].delay=i}))},gs.duration=function(i){var r=this.id,o=this.namespace;return arguments.length<1?this.node()[o][r].duration:ct(this,"function"==typeof i?function(t,e,n){t[o][r].duration=Math.max(1,i.call(t,t.__data__,e,n))}:(i=Math.max(1,i),function(t){t[o][r].duration=i}))},gs.each=function(i,n){var r=this.id,o=this.namespace;if(arguments.length<2){var t=ps,e=ds;try{ds=r,ct(this,function(t,e,n){ps=t[o][r],i.call(t,t.__data__,e,n)})}finally{ps=t,ds=e}}else ct(this,function(t){var e=t[o][r];(e.event||(e.event=z.dispatch("start","end","interrupt"))).on(i,n)});return this},gs.transition=function(){for(var t,e,n,i=this.id,r=++ms,o=this.namespace,a=[],s=0,u=this.length;s<u;s++){a.push(t=[]);for(var l,c=0,h=(l=this[s]).length;c<h;c++)(e=l[c])&&xs(e,c,o,r,{time:(n=e[o][i]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return fs(a,o,r)},z.svg.axis=function(){var P,C=z.scale.linear(),L=bs,E=6,k=6,M=3,O=[10],R=null;function n(t){t.each(function(){var t,e=z.select(this),n=this.__chart__||C,i=this.__chart__=C.copy(),r=null==R?i.ticks?i.ticks.apply(i,O):i.domain():R,o=null==P?i.tickFormat?i.tickFormat.apply(i,O):I:P,a=e.selectAll(".tick").data(r,i),s=a.enter().insert("g",".domain").attr("class","tick").style("opacity",St),u=z.transition(a.exit()).style("opacity",St).remove(),l=z.transition(a.order()).style("opacity",1),c=Math.max(E,0)+M,h=ca(i),f=e.selectAll(".domain").data([0]),d=(f.enter().append("path").attr("class","domain"),z.transition(f));s.append("line"),s.append("text");var p,g,m,v,_=s.select("line"),y=l.select("line"),x=a.select("text").text(o),b=s.select("text"),w=l.select("text"),S="top"===L||"left"===L?-1:1;if("bottom"===L||"top"===L?(t=Ss,p="x",m="y",g="x2",v="y2",x.attr("dy",S<0?"0em":".71em").style("text-anchor","middle"),d.attr("d","M"+h[0]+","+S*k+"V0H"+h[1]+"V"+S*k)):(t=As,p="y",m="x",g="y2",v="x2",x.attr("dy",".32em").style("text-anchor",S<0?"end":"start"),d.attr("d","M"+S*k+","+h[0]+"H0V"+h[1]+"H"+S*k)),_.attr(v,S*E),b.attr(m,S*c),y.attr(g,0).attr(v,S*E),w.attr(p,0).attr(m,S*c),i.rangeBand){var A=i,T=A.rangeBand()/2;n=i=function(t){return A(t)+T}}else n.rangeBand?n=i:u.call(t,i,n);s.call(t,n,i),l.call(t,i,i)})}return n.scale=function(t){return arguments.length?(C=t,n):C},n.orient=function(t){return arguments.length?(L=t in ws?t+"":bs,n):L},n.ticks=function(){return arguments.length?(O=f(arguments),n):O},n.tickValues=function(t){return arguments.length?(R=t,n):R},n.tickFormat=function(t){return arguments.length?(P=t,n):P},n.tickSize=function(t){var e=arguments.length;return e?(E=+t,k=+arguments[e-1],n):E},n.innerTickSize=function(t){return arguments.length?(E=+t,n):E},n.outerTickSize=function(t){return arguments.length?(k=+t,n):k},n.tickPadding=function(t){return arguments.length?(M=+t,n):M},n.tickSubdivide=function(){return arguments.length&&n},n};var bs="bottom",ws={top:1,right:1,bottom:1,left:1};function Ss(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate("+(isFinite(e)?e:i(t))+",0)"})}function As(t,n,i){t.attr("transform",function(t){var e=n(t);return"translate(0,"+(isFinite(e)?e:i(t))+")"})}z.svg.brush=function(){var _,y,x=V(C,"brushstart","brush","brushend"),b=null,w=null,S=[0,0],A=[0,0],T=!0,P=!0,a=Ps[0];function C(t){t.each(function(){var t=z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(a,I);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ts[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",C.empty()?"none":null);var i,r=z.transition(t),o=z.transition(e);b&&(i=ca(b),o.attr("x",i[0]).attr("width",i[1]-i[0]),E(r)),w&&(i=ca(w),o.attr("y",i[0]).attr("height",i[1]-i[0]),k(r)),L(r)})}function L(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+S[+/e$/.test(t)]+","+A[+/^s/.test(t)]+")"})}function E(t){t.select(".extent").attr("x",S[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",S[1]-S[0])}function k(t){t.select(".extent").attr("y",A[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",A[1]-A[0])}function s(){var h,n,i=this,t=z.select(z.event.target),r=x.of(i,arguments),o=z.select(i),e=t.datum(),a=!/^(n|s)$/.test(e)&&b,s=!/^(e|w)$/.test(e)&&w,f=t.classed("extent"),u=yt(i),d=z.mouse(i),l=z.select(D(i)).on("keydown.brush",function(){32==z.event.keyCode&&(f||(h=null,d[0]-=S[1],d[1]-=A[1],f=2),G())}).on("keyup.brush",function(){32==z.event.keyCode&&2==f&&(d[0]+=S[1],d[1]+=A[1],f=0,G())});if(z.event.changedTouches?l.on("touchmove.brush",g).on("touchend.brush",v):l.on("mousemove.brush",g).on("mouseup.brush",v),o.interrupt().selectAll("*").interrupt(),f)d[0]=S[0]-d[0],d[1]=A[0]-d[1];else if(e){var c=+/w$/.test(e),p=+/^n/.test(e);n=[S[1-c]-d[0],A[1-p]-d[1]],d[0]=S[c],d[1]=A[p]}else z.event.altKey&&(h=d.slice());function g(){var t=z.mouse(i),e=!1;n&&(t[0]+=n[0],t[1]+=n[1]),f||(z.event.altKey?(h||(h=[(S[0]+S[1])/2,(A[0]+A[1])/2]),d[0]=S[+(t[0]<h[0])],d[1]=A[+(t[1]<h[1])]):h=null),a&&m(t,b,0)&&(E(o),e=!0),s&&m(t,w,1)&&(k(o),e=!0),e&&(L(o),r({type:"brush",mode:f?"move":"resize"}))}function m(t,e,n){var i,r,o=ca(e),a=o[0],s=o[1],u=d[n],l=n?A:S,c=l[1]-l[0];if(f&&(a-=u,s-=c+u),i=(n?P:T)?Math.max(a,Math.min(s,t[n])):t[n],f?r=(i+=u)+c:(h&&(u=Math.max(a,Math.min(s,2*h[n]-i))),u<i?(r=i,i=u):r=u),l[0]!=i||l[1]!=r)return n?y=null:_=null,l[0]=i,l[1]=r,!0}function v(){g(),o.style("pointer-events","all").selectAll(".resize").style("display",C.empty()?"none":null),z.select("body").style("cursor",null),l.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),u(),r({type:"brushend"})}o.style("pointer-events","none").selectAll(".resize").style("display",null),z.select("body").style("cursor",t.style("cursor")),r({type:"brushstart"}),g()}return C.event=function(t){t.each(function(){var i=x.of(this,arguments),r={x:S,y:A,i:_,j:y},t=this.__chart__||r;this.__chart__=r,ds?z.select(this).transition().each("start.brush",function(){_=t.i,y=t.j,S=t.x,A=t.y,i({type:"brushstart"})}).tween("brush:brush",function(){var e=Qr(S,r.x),n=Qr(A,r.y);return _=y=null,function(t){S=r.x=e(t),A=r.y=n(t),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){_=r.i,y=r.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},C.x=function(t){return arguments.length?(a=Ps[!(b=t)<<1|!w],C):b},C.y=function(t){return arguments.length?(a=Ps[!b<<1|!(w=t)],C):w},C.clamp=function(t){return arguments.length?(b&&w?(T=!!t[0],P=!!t[1]):b?T=!!t:w&&(P=!!t),C):b&&w?[T,P]:b?T:w?P:null},C.extent=function(t){var e,n,i,r,o;return arguments.length?(b&&(e=t[0],n=t[1],w&&(e=e[0],n=n[0]),_=[e,n],b.invert&&(e=b(e),n=b(n)),n<e&&(o=e,e=n,n=o),e==S[0]&&n==S[1]||(S=[e,n])),w&&(i=t[0],r=t[1],b&&(i=i[1],r=r[1]),y=[i,r],w.invert&&(i=w(i),r=w(r)),r<i&&(o=i,i=r,r=o),i==A[0]&&r==A[1]||(A=[i,r])),C):(b&&(_?(e=_[0],n=_[1]):(e=S[0],n=S[1],b.invert&&(e=b.invert(e),n=b.invert(n)),n<e&&(o=e,e=n,n=o))),w&&(y?(i=y[0],r=y[1]):(i=A[0],r=A[1],w.invert&&(i=w.invert(i),r=w.invert(r)),r<i&&(o=i,i=r,r=o))),b&&w?[[e,i],[n,r]]:b?[e,n]:w&&[i,r])},C.clear=function(){return C.empty()||(S=[0,0],A=[0,0],_=y=null),C},C.empty=function(){return!!b&&S[0]==S[1]||!!w&&A[0]==A[1]},z.rebind(C,x,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ps=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cs=Re.format=un.timeFormat,Ls=Cs.utc,Es=Ls("%Y-%m-%dT%H:%M:%S.%LZ");function ks(t){return t.toISOString()}function Ms(e,r,t){function a(t){return e(t)}function s(t,e){var n=(t[1]-t[0])/e,i=z.bisect(Rs,n);return i==Rs.length?[r.year,_a(t.map(function(t){return t/31536e6}),e)[2]]:i?r[n/Rs[i-1]<Rs[i]/n?i-1:i]:[Is,_a(t,e)[2]]}return a.invert=function(t){return Os(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain(t),a):e.domain().map(Os)},a.nice=function(e,n){var t=a.domain(),i=la(t),r=null==e?s(i,10):"number"==typeof e&&s(i,e);function o(t){return!isNaN(t)&&!e.range(t,Os(+t+1),n).length}return r&&(e=r[0],n=r[1]),a.domain(fa(t,1<n?{floor:function(t){for(;o(t=e.floor(t));)t=Os(t-1);return t},ceil:function(t){for(;o(t=e.ceil(t));)t=Os(+t+1);return t}}:e))},a.ticks=function(t,e){var n=la(a.domain()),i=null==t?s(n,10):"number"==typeof t?s(n,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(n[0],Os(+n[1]+1),e<1?1:e)},a.tickFormat=function(){return t},a.copy=function(){return Ms(e.copy(),r,t)},ma(a,e)}function Os(t){return new Date(t)}Cs.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ks:Es,ks.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ks.toString=Es.toString,Re.second=Ge(function(t){return new ze(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Re.seconds=Re.second.range,Re.seconds.utc=Re.second.utc.range,Re.minute=Ge(function(t){return new ze(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Re.minutes=Re.minute.range,Re.minutes.utc=Re.minute.utc.range,Re.hour=Ge(function(t){var e=t.getTimezoneOffset()/60;return new ze(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Re.hours=Re.hour.range,Re.hours.utc=Re.hour.utc.range,Re.month=Ge(function(t){return(t=Re.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Re.months=Re.month.range,Re.months.utc=Re.month.utc.range;var Rs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],zs=[[Re.second,1],[Re.second,5],[Re.second,15],[Re.second,30],[Re.minute,1],[Re.minute,5],[Re.minute,15],[Re.minute,30],[Re.hour,1],[Re.hour,3],[Re.hour,6],[Re.hour,12],[Re.day,1],[Re.day,2],[Re.week,1],[Re.month,1],[Re.month,3],[Re.year,1]],Ds=Cs.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Yn]]),Is={range:function(t,e,n){return z.range(Math.ceil(t/n)*n,+e,n).map(Os)},floor:I,ceil:I};zs.year=Re.year,Re.scale=function(){return Ms(z.scale.linear(),zs,Ds)};var Gs=zs.map(function(t){return[t[0].utc,t[1]]}),js=Ls.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Yn]]);function Vs(t){return JSON.parse(t.responseText)}function Ns(t){var e=y.createRange();return e.selectNode(y.body),e.createContextualFragment(t.responseText)}Gs.year=Re.year.utc,Re.scale.utc=function(){return Ms(z.scale.linear(),Gs,js)},z.text=ve(function(t){return t.responseText}),z.json=function(t,e){return _e(t,"application/json",Vs,e)},z.html=function(t,e){return _e(t,"text/html",Ns,e)},z.xml=ve(function(t){return t.responseXML}),this.d3=z,void 0===(Us="function"==typeof(Hs=z)?Hs.call(exports,Fs,exports,Bs):Hs)||(Bs.exports=Us)}()},"/XTO1Lxl":function(t,exports){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII="},"2/XQkQBN":function(t,a,s){"use strict";(function(t){var e=s("A/LJ9IOU"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=n&&"object"==typeof t&&t&&!t.nodeType&&t,r=i&&i.exports===n&&e.a.process,o=function(){try{return r&&r.binding&&r.binding("util")}catch(t){}}();a.a=o}).call(this,s("BE8oL2FB")(t))},"2FE1iu8t":function(t,exports){!function($){"use strict";var u=function(t,e){this.options=$.extend({},u.DEFAULTS,e);var n=this.options.target===u.DEFAULTS.target?$(this.options.target):$(document).find(this.options.target);this.$target=n.on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),this.$element=$(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(i){return this.each(function(){var t=$(this),e=t.data("bs.affix"),n="object"==typeof i&&i;e||t.data("bs.affix",e=new u(this,n)),"string"==typeof i&&e[i]()})}u.VERSION="3.4.0",u.RESET="affix affix-top affix-bottom",u.DEFAULTS={offset:0,target:window},u.prototype.getState=function(t,e,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return r<n&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=t-i)&&"bottom";var s=null==this.affixed,u=s?r:o.top;return null!=n&&r<=n?"top":null!=i&&t-i<=u+(s?a:e)&&"bottom"},u.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(u.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},u.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},u.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),e=this.options.offset,n=e.top,i=e.bottom,r=Math.max($(document).height(),$(document.body).height());"object"!=typeof e&&(i=n=e),"function"==typeof n&&(n=e.top(this.$element)),"function"==typeof i&&(i=e.bottom(this.$element));var o=this.getState(r,t,n,i);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var a="affix"+(o?"-"+o:""),s=$.Event(a+".bs.affix");if(this.$element.trigger(s),s.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(u.RESET).addClass(a).trigger(a.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:r-t-i})}};var t=$.fn.affix;$.fn.affix=n,$.fn.affix.Constructor=u,$.fn.affix.noConflict=function(){return $.fn.affix=t,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var t=$(this),e=t.data();e.offset=e.offset||{},null!=e.offsetBottom&&(e.offset.bottom=e.offsetBottom),null!=e.offsetTop&&(e.offset.top=e.offsetTop),n.call(t,e)})})}(jQuery)},"2nE9HQ2X":function(t,exports,e){var n=e("QDRgAkog");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("HkU00dYq")(n,i);n.locals&&(t.exports=n.locals)},"4I6bQT19":function(t,exports,e){(t.exports=e("wTjlWjHz")(!1)).push([t.i,".dc-chart path.dc-symbol,.dc-legend g.dc-legend-item.fadeout{fill-opacity:.5;stroke-opacity:.5}div.dc-chart{float:left}.dc-chart rect.bar{stroke:none;cursor:pointer}.dc-chart rect.bar:hover{fill-opacity:.5}.dc-chart rect.deselected{stroke:none;fill:#ccc}.dc-chart .pie-slice{fill:#fff;font-size:12px;cursor:pointer}.dc-chart .pie-slice.external{fill:#000}.dc-chart .pie-slice.highlight,.dc-chart .pie-slice :hover{fill-opacity:.8}.dc-chart .pie-path{fill:none;stroke-width:2px;stroke:#000;opacity:.4}.dc-chart .selected circle,.dc-chart .selected path{stroke-width:3;stroke:#ccc;fill-opacity:1}.dc-chart .deselected circle,.dc-chart .deselected path{stroke:none;fill-opacity:.5;fill:#ccc}.dc-chart .axis line,.dc-chart .axis path{fill:none;stroke:#000;shape-rendering:crispEdges}.dc-chart .axis text{font:10px sans-serif}.dc-chart .axis .grid-line,.dc-chart .axis .grid-line line,.dc-chart .grid-line,.dc-chart .grid-line line{fill:none;stroke:#ccc;opacity:.5;shape-rendering:crispEdges}.dc-chart .brush rect.background{z-index:-999}.dc-chart .brush rect.extent{fill:#4682b4;fill-opacity:.125}.dc-chart .brush .resize path{fill:#eee;stroke:#666}.dc-chart path.line{fill:none;stroke-width:1.5px}.dc-chart path.area{fill-opacity:.3;stroke:none}.dc-chart path.highlight{stroke-width:3;fill-opacity:1;stroke-opacity:1}.dc-chart g.state{cursor:pointer}.dc-chart g.state :hover{fill-opacity:.8}.dc-chart g.state path{stroke:#fff}.dc-chart g.deselected path{fill:gray}.dc-chart g.deselected text{display:none}.dc-chart g.row rect{fill-opacity:.8;cursor:pointer}.dc-chart g.row rect:hover{fill-opacity:.6}.dc-chart g.row text{fill:#fff;font-size:12px;cursor:pointer}.dc-chart g.dc-tooltip path{fill:none;stroke:gray;stroke-opacity:.8}.dc-chart g.county path{stroke:#fff;fill:none}.dc-chart g.debug rect{fill:#00f;fill-opacity:.2}.dc-chart g.axis text{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.dc-chart .node{font-size:.7em;cursor:pointer}.dc-chart .node :hover{fill-opacity:.8}.dc-chart .bubble{stroke:none;fill-opacity:.6}.dc-chart .highlight{fill-opacity:1;stroke-opacity:1}.dc-chart .fadeout{fill-opacity:.2;stroke-opacity:.2}.dc-chart .box text{font:10px sans-serif;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}.dc-chart .box circle,.dc-chart .box line{fill:#fff}.dc-chart .box circle,.dc-chart .box line,.dc-chart .box rect{stroke:#000;stroke-width:1.5px}.dc-chart .box .center{stroke-dasharray:3,3}.dc-chart .box .outlier{fill:none;stroke:#ccc}.dc-chart .box.deselected{opacity:.5}.dc-chart .box.deselected .box{fill:#ccc}.dc-chart .symbol{stroke:none}.dc-chart .heatmap .box-group.deselected rect{stroke:none;fill-opacity:.5;fill:#ccc}.dc-chart .heatmap g.axis text{pointer-events:all;cursor:pointer}.dc-chart .empty-chart .pie-slice{cursor:default}.dc-chart .empty-chart .pie-slice path{fill:#fee;cursor:default}.dc-chart circle.dot{stroke:none}.dc-data-count{float:right;margin-top:15px;margin-right:15px}.dc-data-count .filter-count,.dc-data-count .total-count{color:#3182bd;font-weight:700}.dc-legend{font-size:11px}.dc-legend .dc-legend-item{cursor:pointer}.dc-hard .number-display{float:none}",""])},"6iWVrsf8":function(t,exports){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC"},"8FtKQWAV":function(t,exports){t.exports=function e(t,n){"use strict";var i,r,o=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,u=/^0x[0-9a-f]+$/i,l=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(a,"")||"",f=c(n).replace(a,"")||"",d=h.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),p=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(h.match(u),16)||1!==d.length&&h.match(s)&&Date.parse(h),m=parseInt(f.match(u),16)||g&&f.match(s)&&Date.parse(f)||null;if(m){if(g<m)return-1;if(m<g)return 1}for(var v=0,_=Math.max(d.length,p.length);v<_;v++){if(i=!(d[v]||"").match(l)&&parseFloat(d[v])||d[v]||0,r=!(p[v]||"").match(l)&&parseFloat(p[v])||p[v]||0,isNaN(i)!==isNaN(r))return isNaN(i)?1:-1;if(typeof i!=typeof r&&(i+="",r+=""),i<r)return-1;if(r<i)return 1}return 0}},"9TIQGsxl":function(t,exports,e){!function(exports){function F(t){return t}function P(t,e){for(var n=0,i=e.length,r=new Array(i);n<i;++n)r[n]=t[e[n]];return r}s.version="1.3.14",s.permute=P;var C=s.bisect=t(F);function t(o){function t(t,e,n,i){for(;n<i;){var r=n+i>>>1;e<o(t[r])?i=r:n=r+1}return n}return(t.right=t).left=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;o(t[r])<e?n=r+1:i=r}return n},t}function H(s){function t(t,e,n){for(var i=n-e,r=1+(i>>>1);0<--r;)o(t,r,i,e);return t}function o(t,e,n,i){for(var r,o=t[--i+e],a=s(o);(r=e<<1)<=n&&(r<n&&s(t[i+r])>s(t[i+r+1])&&r++,!(a<=s(t[i+r])));)t[i+e]=t[i+r],e=r;t[i+e]=o}return t.sort=function(t,e,n){for(var i,r=n-e;0<--r;)i=t[e],t[e]=t[e+r],t[e+r]=i,o(t,1,r,e);return t},t}function U(u){var l=H(u);return function(t,e,n,i){var r,o,a,s=new Array(i=Math.min(n-e,i));for(o=0;o<i;++o)s[o]=t[e++];if(l(s,0,i),e<n)for(r=u(s[0]);u(a=t[e])>r&&(s[0]=a,r=u(l(s,0,i)[0])),++e<n;);return s}}function e(s){return function(t,e,n){for(var i=e+1;i<n;++i){for(var r=i,o=t[i],a=s(o);e<r&&s(t[r-1])>a;--r)t[r]=t[r-1];t[r]=o}return t}}function L(O){var i=e(O);function R(t,e,n){return(n-e<r?i:function(t,e,n){var i,r=(n-e)/6|0,o=e+r,a=n-1-r,s=e+n-1>>1,u=s-r,l=s+r,c=t[o],h=O(c),f=t[u],d=O(f),p=t[s],g=O(p),m=t[l],v=O(m),_=t[a],y=O(_);d<h&&(i=c,c=f,f=i,i=h,h=d,d=i);y<v&&(i=m,m=_,_=i,i=v,v=y,y=i);g<h&&(i=c,c=p,p=i,i=h,h=g,g=i);g<d&&(i=f,f=p,p=i,i=d,d=g,g=i);v<h&&(i=c,c=m,m=i,i=h,h=v,v=i);v<g&&(i=p,p=m,m=i,i=g,g=v,v=i);y<d&&(i=f,f=_,_=i,i=d,d=y,y=i);g<d&&(i=f,f=p,p=i,i=d,d=g,g=i);y<v&&(i=m,m=_,_=i,i=v,v=y,y=i);var x=f,b=d,w=m,S=v;t[o]=c,t[u]=t[e],t[s]=p,t[l]=t[n-1],t[a]=_;var A=e+1,T=n-2,P=b<=S&&S<=b;if(P)for(var C=A;C<=T;++C){var L=t[C],E=O(L);if(E<b)C!==A&&(t[C]=t[A],t[A]=L),++A;else if(b<E)for(;;){var k=O(t[T]);if(!(b<k)){if(k<b){t[C]=t[A],t[A++]=t[T],t[T--]=L;break}t[C]=t[T],t[T--]=L;break}T--}}else for(var C=A;C<=T;C++){var L=t[C],E=O(L);if(E<b)C!==A&&(t[C]=t[A],t[A]=L),++A;else if(S<E)for(;;){var k=O(t[T]);if(!(S<k)){t[T--]=(k<b?(t[C]=t[A],t[A++]=t[T]):t[C]=t[T],L);break}if(--T<C)break}}if(t[e]=t[A-1],t[A-1]=x,t[n-1]=t[T+1],t[T+1]=w,R(t,e,A-1),R(t,T+2,n),P)return t;if(A<o&&a<T){for(var M;(M=O(t[A]))<=b&&b<=M;)++A;for(;(k=O(t[T]))<=S&&S<=k;)--T;for(var C=A;C<=T;C++){var L=t[C],E=O(L);if(E<=b&&b<=E)C!==A&&(t[C]=t[A],t[A]=L),A++;else if(E<=S&&S<=E)for(;;){var k=O(t[T]);if(!(k<=S&&S<=k)){t[T--]=(k<b?(t[C]=t[A],t[A++]=t[T]):t[C]=t[T],L);break}if(--T<C)break}}}return R(t,A,T+1)})(t,e,n)}return R}C.by=t,(s.heap=H(F)).by=H,(s.heapselect=U(F)).by=U,(s.insertionsort=e(F)).by=e,(s.quicksort=L(F)).by=L;var r=32,n=a,i=a,o=a,Z=function(t,e){var n=t.length;for(;n<e;)t[n++]=0;return t},X=function(t,e){if(32<e)throw new Error("invalid array width!");return t};function a(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function E(t){return[0,t.length]}function Y(){return null}function W(){return 0}function q(t){return t+1}function Q(t){return t-1}function K(n){return function(t,e){return t+ +n(e)}}function J(n){return function(t,e){return t-n(e)}}function s(){var t={add:e,remove:function(){for(var e=tt(j,j),n=[],t=0,i=0;t<j;++t)V[t]?e[t]=i++:n.push(t);N.forEach(function(t){t(0,[],n)}),B.forEach(function(t){t(e)});for(var r,t=0,i=0;t<j;++t)(r=V[t])&&(t!==i&&(V[i]=r,G[i]=G[t]),++i);G.length=i;for(;i<j;)V[--j]=0},dimension:function(h){var f,d,p,g,m,u={filter:function(t){return null==t?s():Array.isArray(t)?a(t):"function"==typeof t?l(t):r(t)},filterExact:r,filterRange:a,filterFunction:l,filterAll:s,top:function(t){var e,n=[],i=b;for(;--i>=x&&0<t;)V[e=d[i]]||(n.push(G[e]),--t);return n},bottom:function(t){var e,n=[],i=x;for(;i<b&&0<t;)V[e=d[i]]||(n.push(G[e]),--t),i++;return n},group:w,groupAll:function(){var t=w(Y),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:t,remove:t},v=~S&-~S,z=~v,_=L(function(t){return p[t]}),y=E,D=[],I=[],x=0,b=0;T.unshift(e),T.push(n),B.push(i),S|=v,(32<=A?!v:S&-(1<<A))&&(V=X(V,A<<=1));function e(t,e,n){p=t.map(h),g=_(function(t){for(var e=tt(t,t),n=-1;++n<t;)e[n]=n;return e}(n),0,n),p=P(p,g);var i,r=y(p),o=r[0],a=r[1];if(m)for(i=0;i<n;++i)m(p[i],i)||(V[g[i]+e]|=v);else{for(i=0;i<o;++i)V[g[i]+e]|=v;for(i=a;i<n;++i)V[g[i]+e]|=v}if(!e)return f=p,d=g,x=o,void(b=a);var s=f,u=d,l=0,c=0;for(f=new Array(j),d=tt(j,j),i=0;l<e&&c<n;++i)s[l]<p[c]?(f[i]=s[l],d[i]=u[l++]):(f[i]=p[c],d[i]=g[c++]+e);for(;l<e;++l,++i)f[i]=s[l],d[i]=u[l];for(;c<n;++c,++i)f[i]=p[c],d[i]=g[c]+e;r=y(f),x=r[0],b=r[1]}function n(t,e,n){D.forEach(function(t){t(p,g,e,n)}),p=g=null}function i(t){for(var e,n=0,i=0;n<j;++n)V[e=d[n]]&&(n!==i&&(f[i]=f[n]),d[i]=t[e],++i);for(f.length=i;i<j;)d[i++]=0;var r=y(f);x=r[0],b=r[1]}function o(t){var n=t[0],i=t[1];if(m)return m=null,c(function(t,e){return n<=e&&e<i}),x=n,b=i,u;var e,r,o,a=[],s=[];if(n<x)for(e=n,r=Math.min(x,i);e<r;++e)V[o=d[e]]^=v,a.push(o);else if(x<n)for(e=x,r=Math.min(n,b);e<r;++e)V[o=d[e]]^=v,s.push(o);if(b<i)for(e=Math.max(n,b),r=i;e<r;++e)V[o=d[e]]^=v,a.push(o);else if(i<b)for(e=Math.max(x,i),r=b;e<r;++e)V[o=d[e]]^=v,s.push(o);return x=n,b=i,N.forEach(function(t){t(v,a,s)}),u}function r(t){return o((n=C,i=t,(y=function(t){var e=t.length;return[n.left(t,i,0,e),n.right(t,i,0,e)]})(f)));var n,i}function a(t){return o((n=C,i=(e=t)[0],r=e[1],(y=function(t){var e=t.length;return[n.left(t,i,0,e),n.left(t,r,0,e)]})(f)));var n,e,i,r}function s(){return o((y=E)(f))}function l(t){return y=E,c(m=t),x=0,b=j,u}function c(t){var e,n,i,r=[],o=[];for(e=0;e<j;++e)!(V[n=d[e]]&v)^!!(i=t(f[e],e))&&(i?(V[n]&=z,r.push(n)):(V[n]|=v,o.push(n)));N.forEach(function(t){t(v,r,o)})}function w(_){var i={top:function(t){var e=n(a(),0,y.length,t);return r.sort(e,0,e.length)},all:a,reduce:u,reduceCount:t,reduceSum:function(t){return u(K(t),J(t),W)},order:l,orderNatural:function(){return l(F)},size:function(){return T},dispose:c,remove:c};I.push(i);var y,x,n,r,b,s,w,S=8,A=et(S),T=0,P=Y,C=Y,L=!0,E=_===Y;function e(t,e,n,i){var r,o,a,s,u,l,c=y,h=tt(T,A),f=b,d=w,p=T,g=0,m=0;for(L&&(f=d=Y),y=new Array(T),T=0,x=1<p?Z(x,j):tt(j,A),p&&(a=(o=c[0]).key);m<i&&!((s=_(t[m]))>=s);)++m;for(;m<i;){for(o&&a<=s?(u=o,l=a,h[g]=T,(o=c[++g])&&(a=o.key)):(u={key:s,value:d()},l=s),y[T]=u;!(l<s||(x[r=e[m]+n]=T,V[r]&z||(u.value=f(u.value,G[r])),++m>=i));)s=_(t[m]);v()}for(;g<p;)y[h[g]=T]=c[g++],v();if(g<T)for(g=0;g<n;++g)x[g]=h[x[g]];function v(){++T===A&&(h=X(h,S<<=1),x=X(x,S),A=et(S))}r=N.indexOf(P),1<T?(P=k,C=O):(!T&&E&&(T=1,y=[{key:null,value:d()}]),C=1===T?(P=M,R):P=Y,x=null),N[r]=P}function o(){if(1<T){for(var t=T,e=y,n=tt(t,t),i=0,r=0;i<j;++i)V[i]&&(n[x[r]=x[i]]=1,++r);for(y=[],i=T=0;i<t;++i)n[i]&&(n[i]=T++,y.push(e[i]));if(1<T)for(var i=0;i<r;++i)x[i]=n[x[i]];else x=null;N[N.indexOf(P)]=1<T?(C=O,P=k):1===T?(C=R,P=M):C=P=Y}else if(1===T){if(E)return;for(var i=0;i<j;++i)if(V[i])return;y=[],T=0,N[N.indexOf(P)]=P=C=Y}}function k(t,e,n){if(t!==v&&!L){var i,r,o,a;for(i=0,o=e.length;i<o;++i)V[r=e[i]]&z||((a=y[x[r]]).value=b(a.value,G[r]));for(i=0,o=n.length;i<o;++i)(V[r=n[i]]&z)===t&&((a=y[x[r]]).value=s(a.value,G[r]))}}function M(t,e,n){if(t!==v&&!L){var i,r,o,a=y[0];for(i=0,o=e.length;i<o;++i)V[r=e[i]]&z||(a.value=b(a.value,G[r]));for(i=0,o=n.length;i<o;++i)(V[r=n[i]]&z)===t&&(a.value=s(a.value,G[r]))}}function O(){var t,e;for(t=0;t<T;++t)y[t].value=w();for(t=0;t<j;++t)V[t]&z||((e=y[x[t]]).value=b(e.value,G[t]))}function R(){var t,e=y[0];for(e.value=w(),t=0;t<j;++t)V[t]&z||(e.value=b(e.value,G[t]))}function a(){return L&&(C(),L=!1),y}function u(t,e,n){return b=t,s=e,w=n,L=!0,i}function t(){return u(q,Q,W)}function l(e){function t(t){return e(t.value)}return n=U(t),r=H(t),i}function c(){var t=N.indexOf(P);return 0<=t&&N.splice(t,1),0<=(t=D.indexOf(e))&&D.splice(t,1),0<=(t=B.indexOf(o))&&B.splice(t,1),i}return arguments.length<1&&(_=F),N.push(P),D.push(e),B.push(o),e(f,d,0,j),t().orderNatural()}function t(){I.forEach(function(t){t.dispose()});var t=T.indexOf(e);return 0<=t&&T.splice(t,1),0<=(t=T.indexOf(n))&&T.splice(t,1),0<=(t=B.indexOf(i))&&B.splice(t,1),S&=z,s()}return e(G,0,j),n(G,0,j),u},groupAll:function(){var a,s,u,i,r={reduce:o,reduceCount:t,reduceSum:function(t){return o(K(t),J(t),W)},value:function(){l&&(function(){var t;for(a=i(),t=0;t<j;++t)V[t]||(a=s(a,G[t]))}(),l=!1);return a},dispose:c,remove:c},l=!0;function e(t,e){var n;if(!l)for(n=e;n<j;++n)V[n]||(a=s(a,G[n]))}function n(t,e,n){var i,r,o;if(!l){for(i=0,o=e.length;i<o;++i)V[r=e[i]]||(a=s(a,G[r]));for(i=0,o=n.length;i<o;++i)V[r=n[i]]===t&&(a=u(a,G[r]))}}function o(t,e,n){return s=t,u=e,i=n,l=!0,r}function t(){return o(q,Q,W)}function c(){var t=N.indexOf(n);return 0<=t&&N.splice(t),0<=(t=T.indexOf(e))&&T.splice(t),r}return N.push(n),T.push(e),e(G,0),t()},size:function(){return j}},G=[],j=0,S=0,A=8,V=n(0),N=[],T=[],B=[];function e(e){var n=j,i=e.length;return i&&(G=G.concat(e),V=Z(V,j+=i),T.forEach(function(t){t(e,n,i)})),t}return arguments.length?e(arguments[0]):t}function tt(t,e){return(e<257?n:e<65537?i:o)(t)}function et(t){return 8===t?256:16===t?65536:4294967296}"undefined"!=typeof Uint8Array&&(n=function(t){return new Uint8Array(t)},i=function(t){return new Uint16Array(t)},o=function(t){return new Uint32Array(t)},Z=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},X=function(t,e){var n;switch(e){case 16:n=i(t.length);break;case 32:n=o(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),exports.crossfilter=s}(exports||this)},"9dgSYzhm":function(t,e,n){"use strict";e.a=function(){return!1}},"A/LJ9IOU":function(t,n,e){"use strict";(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.a=e}).call(this,e("aY11sVfy"))},AV8abhei:function(t,a,s){"use strict";(function(t){var e=s("C9CvtcdF"),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=n&&"object"==typeof t&&t&&!t.nodeType&&t,r=i&&i.exports===n?e.a.Buffer:void 0,o=r?r.allocUnsafe:void 0;a.a=function(t,e){if(e)return t.slice();var n=t.length,i=o?o(n):new t.constructor(n);return t.copy(i),i}}).call(this,s("BE8oL2FB")(t))},AhJZIvQE:function(t,exports,e){var n,i,r;
/*!
 *  dc 2.0.5
 *  http://dc-js.github.io/dc.js/
 *  Copyright 2012-2016 Nick Zhu & the dc.js Developers
 *  https://github.com/dc-js/dc.js/blob/master/AUTHORS
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */i=[e("/8dZfPfB"),e("zZ9hESjW")],void 0===(r="function"==typeof(n=function(tt,F){"use strict";var et={version:"2.0.5",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};et.chartRegistry=function(){var i={};function r(t){return t||(t=et.constants.DEFAULT_CHART_GROUP),i[t]||(i[t]=[]),t}return{has:function(t){for(var e in i)if(0<=i[e].indexOf(t))return!0;return!1},register:function(t,e){e=r(e),i[e].push(t)},deregister:function(t,e){e=r(e);for(var n=0;n<i[e].length;n++)if(i[e][n].anchorName()===t.anchorName()){i[e].splice(n,1);break}},clear:function(t){t?delete i[t]:i={}},list:function(t){return t=r(t),i[t]}}}(),et.registerChart=function(t,e){et.chartRegistry.register(t,e)},et.deregisterChart=function(t,e){et.chartRegistry.deregister(t,e)},et.hasChart=function(t){return et.chartRegistry.has(t)},et.deregisterAllCharts=function(t){et.chartRegistry.clear(t)},et.filterAll=function(t){for(var e=et.chartRegistry.list(t),n=0;n<e.length;++n)e[n].filterAll()},et.refocusAll=function(t){for(var e=et.chartRegistry.list(t),n=0;n<e.length;++n)e[n].focus&&e[n].focus()},et.renderAll=function(t){for(var e=et.chartRegistry.list(t),n=0;n<e.length;++n)e[n].render();null!==et._renderlet&&et._renderlet(t)},et.redrawAll=function(t){for(var e=et.chartRegistry.list(t),n=0;n<e.length;++n)e[n].redraw();null!==et._renderlet&&et._renderlet(t)},et.disableTransitions=!1,et.transition=function(t,e,n,i){if(et.disableTransitions||e<=0)return t;var r=t.transition(i);return(0<=e||void 0!==e)&&(r=r.duration(e)),(0<=n||void 0!==n)&&(r=r.delay(n)),r},et.optionalTransition=function(t,e,n,i){return t?function(t){return et.transition(t,e,n,i)}:function(t){return t}},et.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).each("end",function(){--n||e.call(t)})}},et.units={},et.units.integers=function(t,e){return Math.abs(e-t)},et.units.ordinal=function(t,e,n){return n},et.units.fp={},et.units.fp.precision=function(t){var i=function(t,e){var n=Math.abs((e-t)/i.resolution);return et.utils.isNegligible(n-Math.floor(n))?Math.floor(n):Math.ceil(n)};return i.resolution=t,i},et.round={},et.round.floor=function(t){return Math.floor(t)},et.round.ceil=function(t){return Math.ceil(t)},et.round.round=function(t){return Math.round(t)},et.override=function(t,e,n){var i=t[e];t["_"+e]=i,t[e]=n},et.renderlet=function(t){return arguments.length?(et._renderlet=t,et):et._renderlet},et.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},et.errors={},et.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},et.errors.Exception.prototype=Object.create(Error.prototype),et.errors.Exception.prototype.constructor=et.errors.Exception,et.errors.InvalidStateException=function(){et.errors.Exception.apply(this,arguments)},et.errors.InvalidStateException.prototype=Object.create(et.errors.Exception.prototype),et.errors.InvalidStateException.prototype.constructor=et.errors.InvalidStateException,et.errors.BadArgumentException=function(){et.errors.Exception.apply(this,arguments)},et.errors.BadArgumentException.prototype=Object.create(et.errors.Exception.prototype),et.errors.BadArgumentException.prototype.constructor=et.errors.BadArgumentException,et.dateFormat=tt.time.format("%m/%d/%Y"),et.printers={},et.printers.filters=function(t){for(var e="",n=0;n<t.length;++n)0<n&&(e+=", "),e+=et.printers.filter(t[n]);return e},et.printers.filter=function(t){var e="";return null!=t&&(t instanceof Array?2<=t.length?e="["+et.utils.printSingleValue(t[0])+" -> "+et.utils.printSingleValue(t[1])+"]":1<=t.length&&(e=et.utils.printSingleValue(t[0])):e=et.utils.printSingleValue(t)),e},et.pluck=function(n,i){return i?function(t,e){return i.call(t,t[n],e)}:function(t){return t[n]}},et.utils={},et.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=et.dateFormat(t):"string"==typeof t?e=t:et.utils.isFloat(t)?e=et.utils.printSingleValue.fformat(t):et.utils.isInteger(t)&&(e=Math.round(t)),e},et.utils.printSingleValue.fformat=tt.format(".2f"),et.utils.add=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()+e):(n=n||"day",tt.time[n].offset(t,e));if("string"!=typeof e)return t+e;var i=+e/100;return 0<t?t*(1+i):t*(1-i)},et.utils.subtract=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date)return"string"==typeof e&&(e=+e),"millis"===n?new Date(t.getTime()-e):(n=n||"day",tt.time[n].offset(t,-e));if("string"!=typeof e)return t-e;var i=+e/100;return t<0?t*(1+i):t*(1-i)},et.utils.isNumber=function(t){return t===+t},et.utils.isFloat=function(t){return t===+t&&t!==(0|t)},et.utils.isInteger=function(t){return t===+t&&t===(0|t)},et.utils.isNegligible=function(t){return!et.utils.isNumber(t)||t<et.constants.NEGLIGIBLE_NUMBER&&t>-et.constants.NEGLIGIBLE_NUMBER},et.utils.clamp=function(t,e,n){return t<e?e:n<t?n:t};var t=0;return et.utils.uniqueId=function(){return++t},et.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},et.utils.appendOrSelect=function(t,e,n){n=n||e;var i=t.select(e);return i.empty()&&(i=t.append(n)),i},et.utils.safeNumber=function(t){return et.utils.isNumber(+t)?+t:0},et.logger={},et.logger.enableDebugLog=!1,et.logger.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),et.logger},et.logger.debug=function(t){return et.logger.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),et.logger},et.logger.deprecate=function(t,e){var n=!1;return function(){return n||(et.logger.warn(e),n=!0),t.apply(this,arguments)}},et.events={current:null},et.events.trigger=function(t,e){e?(et.events.current=t,setTimeout(function(){t===et.events.current&&t()},e)):t()},et.filters={},et.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},et.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},et.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var i,e=t;return i=e[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],e.isFiltered=function(t){var e,n;return n=t instanceof Array?(e=t[0],t[1]):(e=t,i[0][1]),e>=i[0][0]&&e<i[1][0]&&n>=i[0][1]&&n<i[1][1]},e.filterType="RangedTwoDimensionalFilter",e},et.baseMixin=function(i){var e,n,r,o,a,s;i.__dcFlag__=et.utils.uniqueId();var u,l,c,h,f,d=200,p=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&d<e?e:d},g=p,m=200,v=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&m<e?e:m},_=v,y=et.pluck("key"),x=et.pluck("value"),b=et.pluck("key"),w=et.pluck("key"),S=!1,A=function(t){return i.keyAccessor()(t)+": "+i.valueAccessor()(t)},T=!0,P=!1,C=750,L=0,E=et.printers.filters,k=["dimension","group"],M=et.constants.DEFAULT_CHART_GROUP,O=tt.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),R=[],z=function(t,i){return 0===i.length?t.filter(null):1!==i.length||i[0].isFiltered?1===i.length&&"RangedFilter"===i[0].filterType?t.filterRange(i[0]):t.filterFunction(function(t){for(var e=0;e<i.length;e++){var n=i[e];if(n.isFiltered&&n.isFiltered(t))return!0;if(n<=t&&t<=n)return!0}return!1}):t.filterExact(i[0]),i},D=function(t){return t.all()};function I(){a&&a.attr("width",i.width()).attr("height",i.height())}function G(t){if(!i[t]||!i[t]())throw new et.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+i.anchorName()+"]")}i.height=function(t){return arguments.length?(_=tt.functor(t||v),l=void 0,i):(et.utils.isNumber(l)||(l=_(o.node())),l)},i.width=function(t){return arguments.length?(g=tt.functor(t||p),u=void 0,i):(et.utils.isNumber(u)||(u=g(o.node())),u)},i.minWidth=function(t){return arguments.length?(d=t,i):d},i.minHeight=function(t){return arguments.length?(m=t,i):m},i.dimension=function(t){return arguments.length?(e=t,i.expireCache(),i):e},i.data=function(t){return arguments.length?(D=tt.functor(t),i.expireCache(),i):D.call(i,n)},i.group=function(t,e){return arguments.length?(n=t,i._groupName=e,i.expireCache(),i):n},i.ordering=function(t){return arguments.length?(w=t,c=F.quicksort.by(w),i.expireCache(),i):w},i._computeOrderedGroups=function(t){var e=t.slice(0);return e.length<=1?e:(c||(c=F.quicksort.by(w)),c(e,0,e.length))},i.filterAll=function(){return i.filter(null)},i.select=function(t){return o.select(t)},i.selectAll=function(t){return o?o.selectAll(t):null},i.anchor=function(t,e){if(!arguments.length)return r;if(et.instanceOfChart(t))r=t.anchor(),o=t.root(),s=!0;else{if(!t)throw new et.errors.BadArgumentException("parent must be defined");r=t.select&&t.classed?t.node():t,(o=tt.select(r)).classed(et.constants.CHART_CLASS,!0),et.registerChart(i,e),s=!1}return M=e,i},i.anchorName=function(){var t=i.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+i.chartID()},i.root=function(t){return arguments.length?(o=t,i):o},i.svg=function(t){return arguments.length?(a=t,i):a},i.resetSvg=function(){return i.select("svg").remove(),a=i.root().append("svg"),I(),a},i.filterPrinter=function(t){return arguments.length?(E=t,i):E},i.controlsUseVisibility=function(t){return arguments.length?(P=t,i):P},i.turnOnControls=function(){if(o){var t=i.controlsUseVisibility()?"visibility":"display";i.selectAll(".reset").style(t,null),i.selectAll(".filter").text(E(i.filters())).style(t,null)}return i},i.turnOffControls=function(){if(o){var t=i.controlsUseVisibility()?"visibility":"display",e=i.controlsUseVisibility()?"hidden":"none";i.selectAll(".reset").style(t,e),i.selectAll(".filter").style(t,e).text(i.filter())}return i},i.transitionDuration=function(t){return arguments.length?(C=t,i):C},i.transitionDelay=function(t){return arguments.length?(L=t,i):L},i._mandatoryAttributes=function(t){return arguments.length?(k=t,i):k},i.render=function(){l=u=void 0,O.preRender(i),k&&k.forEach(G);var t=i._doRender();return h&&h.render(),i._activateRenderlets("postRender"),t},i._activateRenderlets=function(t){O.pretransition(i),0<i.transitionDuration()&&a?a.transition().duration(i.transitionDuration()).delay(i.transitionDelay()).each("end",function(){O.renderlet(i),t&&O[t](i)}):(O.renderlet(i),t&&O[t](i))},i.redraw=function(){I(),O.preRedraw(i);var t=i._doRedraw();return h&&h.render(),i._activateRenderlets("postRedraw"),t},i.commitHandler=function(t){return arguments.length?(f=t,i):f},i.redrawGroup=function(){return f?f(!1,function(t,e){t?console.log(t):et.redrawAll(i.chartGroup())}):et.redrawAll(i.chartGroup()),i},i.renderGroup=function(){return f?f(!1,function(t,e){t?console.log(t):et.renderAll(i.chartGroup())}):et.renderAll(i.chartGroup()),i},i._invokeFilteredListener=function(t){void 0!==t&&O.filtered(i,t)},i._invokeZoomedListener=function(){O.zoomed(i)};var j=function(t,e){return null==e?0<t.length:t.some(function(t){return e<=t&&t<=e})};i.hasFilterHandler=function(t){return arguments.length?(j=t,i):j},i.hasFilter=function(t){return j(R,t)};var V=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};i.removeFilterHandler=function(t){return arguments.length?(V=t,i):V};var N=function(t,e){return t.push(e),t};i.addFilterHandler=function(t){return arguments.length?(N=t,i):N};var B=function(t){return[]};return i.resetFilterHandler=function(t){return arguments.length?(B=t,i):B},i.replaceFilter=function(t){return R=B(R),i.filter(t),i},i.filter=function(t){return arguments.length?(t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){i.hasFilter(t)?V(R,t):N(R,t)}):null===t?R=B(R):i.hasFilter(t)?V(R,t):N(R,t),function(){if(i.dimension()&&i.dimension().filter){var t=z(i.dimension(),R);R=t||R}}(),i._invokeFilteredListener(t),null!==o&&i.hasFilter()?i.turnOnControls():i.turnOffControls(),i):0<R.length?R[0]:null},i.filters=function(){return R},i.highlightSelected=function(t){tt.select(t).classed(et.constants.SELECTED_CLASS,!0),tt.select(t).classed(et.constants.DESELECTED_CLASS,!1)},i.fadeDeselected=function(t){tt.select(t).classed(et.constants.SELECTED_CLASS,!1),tt.select(t).classed(et.constants.DESELECTED_CLASS,!0)},i.resetHighlight=function(t){tt.select(t).classed(et.constants.SELECTED_CLASS,!1),tt.select(t).classed(et.constants.DESELECTED_CLASS,!1)},i.onClick=function(t){var e=i.keyAccessor()(t);et.events.trigger(function(){i.filter(e),i.redrawGroup()})},i.filterHandler=function(t){return arguments.length?(z=t,i):z},i._doRender=function(){return i},i._doRedraw=function(){return i},i.legendables=function(){return[]},i.legendHighlight=function(){},i.legendReset=function(){},i.legendToggle=function(){},i.isLegendableHidden=function(){return!1},i.keyAccessor=function(t){return arguments.length?(y=t,i):y},i.valueAccessor=function(t){return arguments.length?(x=t,i):x},i.label=function(t,e){return arguments.length?(b=t,(void 0===e||e)&&(S=!0),i):b},i.renderLabel=function(t){return arguments.length?(S=t,i):S},i.title=function(t){return arguments.length?(A=t,i):A},i.renderTitle=function(t){return arguments.length?(T=t,i):T},i.renderlet=et.logger.deprecate(function(t){return i.on("renderlet."+et.utils.uniqueId(),t),i},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),i.chartGroup=function(t){return arguments.length?(s||et.deregisterChart(i,M),M=t,s||et.registerChart(i,M),i):M},i.expireCache=function(){return i},i.legend=function(t){return arguments.length?((h=t).parent(i),i):h},i.chartID=function(){return i.__dcFlag__},i.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var n in t)"function"==typeof i[n]?t[n]instanceof Array&&-1!==e.indexOf(n)?i[n].apply(i,t[n]):i[n].call(i,t[n]):et.logger.debug("Not a valid option setter name: "+n);return i},i.on=function(t,e){return O.on(t,e),i},i},et.marginMixin=function(e){var n={top:10,right:50,bottom:30,left:30};return e.margins=function(t){return arguments.length?(n=t,e):n},e.effectiveWidth=function(){return e.width()-e.margins().left-e.margins().right},e.effectiveHeight=function(){return e.height()-e.margins().top-e.margins().bottom},e},et.colorMixin=function(e){var n=tt.scale.category20c(),i=!0,r=function(t){return e.keyAccessor()(t)};return e.colors=function(t){return arguments.length?(n=t instanceof Array?tt.scale.quantize().range(t):tt.functor(t),e):n},e.ordinalColors=function(t){return e.colors(tt.scale.ordinal().range(t))},e.linearColors=function(t){return e.colors(tt.scale.linear().range(t).interpolate(tt.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(r=t,i=!1,e):r},e.defaultColorAccessor=function(){return i},e.colorDomain=function(t){return arguments.length?(n.domain(t),e):n.domain()},e.calculateColorDomain=function(){var t=[tt.min(e.data(),e.colorAccessor()),tt.max(e.data(),e.colorAccessor())];return n.domain(t),e},e.getColor=function(t,e){return n(r.call(this,t,e))},e.colorCalculator=et.logger.deprecate(function(t){return arguments.length?(e.getColor=t,e):e.getColor},"colorMixin.colorCalculator has been deprecated. Please colorMixin.colors and colorMixin.colorAccessor instead"),e},et.coordinateGridMixin=function(l){var r,n,i,o,c,s="grid-line",u="horizontal",a="vertical",h="y-axis-label",f="x-axis-label";(l=et.colorMixin(et.marginMixin(et.baseMixin(l)))).colors(tt.scale.category10()),l._mandatoryAttributes().push("x");var d,p,g,m,e,v,_,y,x=tt.svg.axis().orient("bottom"),b=et.units.integers,w=0,S="day",A=!1,T=0,P=tt.svg.axis().orient("left"),C=0,L=!1,E=0,k=tt.svg.brush(),M=!0,O=!1,R=!1,z=!1,D=!1,I=[1,1/0],G=!0,j=tt.behavior.zoom().on("zoom",K),t=tt.behavior.zoom().on("zoom",null),V=!1,N=!1,B=0,F=.5,H=0,U=!1;function Z(t,e){l.isOrdinal()?(l.elasticX()||0===o.domain().length)&&o.domain(l._ordinalXDomain()):l.elasticX()&&o.domain([l.xAxisMin(),l.xAxisMax()]);var n,i,r=o.domain();!e&&(i=r,(n=p)&&i&&n.length===i.length&&!n.some(function(t,e){return t&&i[e]?t.toString()!==i[e].toString():t===i[e]}))||l.rescale(),p=r,l.isOrdinal()?o.rangeBands([0,l.xAxisLength()],H,l._useOuterPadding()?F:0):o.range([0,l.xAxisLength()]),x=x.scale(l.x()),function(t){var e=t.select("g."+a);if(R){e.empty()&&(e=t.insert("g",":first-child").attr("class",s+" "+a).attr("transform","translate("+l.margins().left+","+l.margins().top+")"));var n=x.tickValues()?x.tickValues():"function"==typeof o.ticks?o.ticks(x.ticks()[0]):o.domain(),i=e.selectAll("line").data(n),r=i.enter().append("line").attr("x1",function(t){return o(t)}).attr("y1",l._xAxisY()-l.margins().top).attr("x2",function(t){return o(t)}).attr("y2",0).attr("opacity",0);et.transition(r,l.transitionDuration(),l.transitionDelay()).attr("opacity",1),et.transition(i,l.transitionDuration(),l.transitionDelay()).attr("x1",function(t){return o(t)}).attr("y1",l._xAxisY()-l.margins().top).attr("x2",function(t){return o(t)}).attr("y2",0),i.exit().remove()}else e.selectAll("line").remove()}(t)}function X(){return l._xAxisY()-l.margins().top}function Y(){return l.anchorName().replace(/[ .#=\[\]"]/g,"-")+"-clip"}function W(){var t=et.utils.appendOrSelect(r,"defs"),e=Y(),n=et.utils.appendOrSelect(t,"#"+e,"clipPath").attr("id",e),i=2*B;et.utils.appendOrSelect(n,"rect").attr("width",l.xAxisLength()+i).attr("height",l.yAxisHeight()+i).attr("transform","translate(-"+B+", -"+B+")")}function q(t){l.isOrdinal()&&(M=!1),Z(l.g(),t),l._prepareYAxis(l.g()),l.plotData(),(l.elasticX()||D||t)&&l.renderXAxis(l.g()),(l.elasticY()||D||t)&&l.renderYAxis(l.g()),t?l.renderBrush(l.g(),!1):l.redrawBrush(l.g(),D),l.fadeDeselectedArea(),D=!1}function Q(){N?l._enableMouseZoom():V&&l._disableMouseZoom()}function K(){if(z=!0,G){var t=c;_&&(n=t,i=_.x().domain(),(n[0]>i[1]||n[1]<i[0])&&console.warn("could not intersect extents"),t=[Math.max(n[0],i[0]),Math.min(n[1],i[1])]);var e=(r=l.x().domain(),o=t,a=r[1]-r[0],r[0]<o[0]?[o[0],Math.min(o[1],et.utils.add(o[0],a,"millis"))]:r[1]>o[1]?[Math.max(o[0],et.utils.subtract(o[1],a,"millis")),o[1]]:null);e&&l.x().domain(e)}var n,i,r,o,a,s=l.x().domain(),u=et.filters.RangedFilter(s[0],s[1]);l.replaceFilter(u),l.rescale(),l.redraw(),_&&!J(l.filter(),_.filter())&&et.events.trigger(function(){_.replaceFilter(u),_.redraw()}),l._invokeZoomedListener(),et.events.trigger(function(){l.redrawGroup()},et.constants.EVENT_DELAY),z=!J(s,c)}function J(t,e){return!t&&!e||!(!t||!e)&&(0===t.length&&0===e.length||t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}return l.rescale=function(){return D=!(v=void 0),l},l.resizing=function(){return D},l.rangeChart=function(t){return arguments.length?((_=t).focusChart(l),l):_},l.zoomScale=function(t){return arguments.length?(I=t,l):I},l.zoomOutRestrict=function(t){return arguments.length?(I[0]=t?1:0,G=t,l):G},l._generateG=function(t){r=void 0===t?l.svg():t;var e=window.location.href.split("#")[0];return n=r.append("g"),i=n.append("g").attr("class","chart-body").attr("transform","translate("+l.margins().left+", "+l.margins().top+")").attr("clip-path","url("+e+"#"+Y()+")"),n},l.g=function(t){return arguments.length?(n=t,l):n},l.mouseZoomable=function(t){return arguments.length?(N=t,l):N},l.chartBodyG=function(t){return arguments.length?(i=t,l):i},l.x=function(t){return arguments.length?(c=(o=t).domain(),l.rescale(),l):o},l.xOriginalDomain=function(){return c},l.xUnits=function(t){return arguments.length?(b=t,l):b},l.xAxis=function(t){return arguments.length?(x=t,l):x},l.elasticX=function(t){return arguments.length?(A=t,l):A},l.xAxisPadding=function(t){return arguments.length?(w=t,l):w},l.xAxisPaddingUnit=function(t){return arguments.length?(S=t,l):S},l.xUnitCount=function(){if(void 0===v){var t=l.xUnits()(l.x().domain()[0],l.x().domain()[1],l.x().domain());v=t instanceof Array?t.length:t}return v},l.useRightYAxis=function(t){return arguments.length?(U=t,l):U},l.isOrdinal=function(){return l.xUnits()===et.units.ordinal},l._useOuterPadding=function(){return!0},l._ordinalXDomain=function(){return l._computeOrderedGroups(l.data()).map(l.keyAccessor())},l.renderXAxis=function(t){var e=t.select("g.x");e.empty()&&(e=t.append("g").attr("class","axis x").attr("transform","translate("+l.margins().left+","+l._xAxisY()+")"));var n=t.select("text."+f);n.empty()&&l.xAxisLabel()&&(n=t.append("text").attr("class",f).attr("transform","translate("+(l.margins().left+l.xAxisLength()/2)+","+(l.height()-T)+")").attr("text-anchor","middle")),l.xAxisLabel()&&n.text()!==l.xAxisLabel()&&n.text(l.xAxisLabel()),et.transition(e,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+l.margins().left+","+l._xAxisY()+")").call(x),et.transition(n,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+(l.margins().left+l.xAxisLength()/2)+","+(l.height()-T)+")")},l._xAxisY=function(){return l.height()-l.margins().bottom},l.xAxisLength=function(){return l.effectiveWidth()},l.xAxisLabel=function(t,e){return arguments.length?(d=t,l.margins().bottom-=T,T=void 0===e?12:e,l.margins().bottom+=T,l):d},l._prepareYAxis=function(t){if(void 0===g||l.elasticY()){void 0===g&&(g=tt.scale.linear());var e=l.yAxisMin()||0,n=l.yAxisMax()||0;g.domain([e,n]).rangeRound([l.yAxisHeight(),0])}g.range([l.yAxisHeight(),0]),P=P.scale(g),U&&P.orient("right"),l._renderHorizontalGridLinesForAxis(t,g,P)},l.renderYAxisLabel=function(t,e,n,i){i=i||E;var r=l.g().select("text."+h+"."+t+"-label"),o=l.margins().top+l.yAxisHeight()/2;r.empty()&&e&&(r=l.g().append("text").attr("transform","translate("+i+","+o+"),rotate("+n+")").attr("class",h+" "+t+"-label").attr("text-anchor","middle").text(e)),e&&r.text()!==e&&r.text(e),et.transition(r,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+i+","+o+"),rotate("+n+")")},l.renderYAxisAt=function(t,e,n){var i=l.g().select("g."+t);i.empty()&&(i=l.g().append("g").attr("class","axis "+t).attr("transform","translate("+n+","+l.margins().top+")")),et.transition(i,l.transitionDuration(),l.transitionDelay()).attr("transform","translate("+n+","+l.margins().top+")").call(e)},l.renderYAxis=function(){var t=U?l.width()-l.margins().right:l._yAxisX();l.renderYAxisAt("y",P,t);var e=U?l.width()-E:E,n=U?90:-90;l.renderYAxisLabel("y",l.yAxisLabel(),n,e)},l._renderHorizontalGridLinesForAxis=function(t,e,n){var i=t.select("g."+u);if(O){var r=n.tickValues()?n.tickValues():e.ticks(n.ticks()[0]);i.empty()&&(i=t.insert("g",":first-child").attr("class",s+" "+u).attr("transform","translate("+l.margins().left+","+l.margins().top+")"));var o=i.selectAll("line").data(r),a=o.enter().append("line").attr("x1",1).attr("y1",function(t){return e(t)}).attr("x2",l.xAxisLength()).attr("y2",function(t){return e(t)}).attr("opacity",0);et.transition(a,l.transitionDuration(),l.transitionDelay()).attr("opacity",1),et.transition(o,l.transitionDuration(),l.transitionDelay()).attr("x1",1).attr("y1",function(t){return e(t)}).attr("x2",l.xAxisLength()).attr("y2",function(t){return e(t)}),o.exit().remove()}else i.selectAll("line").remove()},l._yAxisX=function(){return l.useRightYAxis()?l.width()-l.margins().right:l.margins().left},l.yAxisLabel=function(t,e){return arguments.length?(m=t,l.margins().left-=E,E=void 0===e?12:e,l.margins().left+=E,l):m},l.y=function(t){return arguments.length?(g=t,l.rescale(),l):g},l.yAxis=function(t){return arguments.length?(P=t,l):P},l.elasticY=function(t){return arguments.length?(L=t,l):L},l.renderHorizontalGridLines=function(t){return arguments.length?(O=t,l):O},l.renderVerticalGridLines=function(t){return arguments.length?(R=t,l):R},l.xAxisMin=function(){var t=tt.min(l.data(),function(t){return l.keyAccessor()(t)});return et.utils.subtract(t,w,S)},l.xAxisMax=function(){var t=tt.max(l.data(),function(t){return l.keyAccessor()(t)});return et.utils.add(t,w,S)},l.yAxisMin=function(){var t=tt.min(l.data(),function(t){return l.valueAccessor()(t)});return et.utils.subtract(t,C)},l.yAxisMax=function(){var t=tt.max(l.data(),function(t){return l.valueAccessor()(t)});return et.utils.add(t,C)},l.yAxisPadding=function(t){return arguments.length?(C=t,l):C},l.yAxisHeight=function(){return l.effectiveHeight()},l.round=function(t){return arguments.length?(e=t,l):e},l._rangeBandPadding=function(t){return arguments.length?(H=t,l):H},l._outerRangeBandPadding=function(t){return arguments.length?(F=t,l):F},et.override(l,"filter",function(t){return arguments.length?(l._filter(t),t?l.brush().extent(t):l.brush().clear(),l):l._filter()}),l.brush=function(t){return arguments.length?(k=t,l):k},l.renderBrush=function(t){if(M){k.on("brush",l._brushing),k.on("brushstart",l._disableMouseZoom),k.on("brushend",Q);var e=t.append("g").attr("class","brush").attr("transform","translate("+l.margins().left+","+l.margins().top+")").call(k.x(l.x()));l.setBrushY(e,!1),l.setHandlePaths(e),l.hasFilter()&&l.redrawBrush(t,!1)}},l.setHandlePaths=function(t){t.selectAll(".resize").append("path").attr("d",l.resizeHandlePath)},l.setBrushY=function(t){t.selectAll("rect").attr("height",X()),t.selectAll(".resize path").attr("d",l.resizeHandlePath)},l.extendBrush=function(){var t=k.extent();return l.round()&&(t[0]=t.map(l.round())[0],t[1]=t.map(l.round())[1],n.select(".brush").call(k.extent(t))),t},l.brushIsEmpty=function(t){return k.empty()||!t||t[1]<=t[0]},l._brushing=function(){var t=l.extendBrush();if(l.redrawBrush(n,!1),l.brushIsEmpty(t))et.events.trigger(function(){l.filter(null),l.redrawGroup()},et.constants.EVENT_DELAY);else{var e=et.filters.RangedFilter(t[0],t[1]);et.events.trigger(function(){l.replaceFilter(e),l.redrawGroup()},et.constants.EVENT_DELAY)}},l.redrawBrush=function(t,e){if(M){l.filter()&&l.brush().empty()&&l.brush().extent(l.filter());var n=et.optionalTransition(e,l.transitionDuration(),l.transitionDelay())(t.select("g.brush"));l.setBrushY(n),n.call(l.brush().x(l.x()).extent(l.brush().extent()))}l.fadeDeselectedArea()},l.fadeDeselectedArea=function(){},l.resizeHandlePath=function(t){var e=+("e"===t),n=e?1:-1,i=X()/3;return"M"+.5*n+","+i+"A6,6 0 0 "+e+" "+6.5*n+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*i+"ZM"+2.5*n+","+(i+8)+"V"+(2*i-8)+"M"+4.5*n+","+(i+8)+"V"+(2*i-8)},l.clipPadding=function(t){return arguments.length?(B=t,l):B},l._preprocessData=function(){},l._doRender=function(){return l.resetSvg(),l._preprocessData(),l._generateG(),W(),q(!0),Q(),l},l._doRedraw=function(){return l._preprocessData(),q(!1),W(),l},l._enableMouseZoom=function(){V=!0,j.x(l.x()).scaleExtent(I).size([l.width(),l.height()]).duration(l.transitionDuration()),l.root().call(j)},l._disableMouseZoom=function(){l.root().call(t)},l.focus=function(t){var e;(e=t)instanceof Array&&1<e.length?l.x().domain(t):l.x().domain(c),j.x(l.x()),K()},l.refocused=function(){return z},l.focusChart=function(t){return arguments.length?(y=t,l.on("filtered",function(t){t.filter()?J(t.filter(),y.filter())||et.events.trigger(function(){y.focus(t.filter())}):et.events.trigger(function(){y.x().domain(y.xOriginalDomain())})}),l):y},l.brushOn=function(t){return arguments.length?(M=t,l):M},l},et.stackMixin=function(r){function e(n,t){var i=n.accessor||r.valueAccessor();return n.name=String(n.name||t),n.values=n.group.all().map(function(t,e){return{x:r.keyAccessor()(t,e),y:n.hidden?null:i(t,e),data:t,layer:n.name,hidden:n.hidden}}),n.values=n.values.filter(function(){if(!r.x()||s)return tt.functor(!0);var e=r.x().domain();return r.isOrdinal()?function(){return!0}:r.elasticX()?function(){return!0}:function(t){return t.x>=e[0]&&t.x<=e[e.length-1]}}()),n.values}var n=tt.layout.stack().values(e),o=[],i={},a=!1,s=!1;function u(t){var e=o.map(et.pluck("name")).indexOf(t);return o[e]}function l(){var t=r.data().map(function(t){return t.values});return Array.prototype.concat.apply([],t)}function c(t){return!t.hidden}return r.stack=function(t,e,n){if(!arguments.length)return o;arguments.length<=2&&(n=e);var i={group:t};return"string"==typeof e&&(i.name=e),"function"==typeof n&&(i.accessor=n),o.push(i),r},et.override(r,"group",function(t,e,n){return arguments.length?(o=[],i={},r.stack(t,e),n&&r.valueAccessor(n),r._group(t,e)):r._group()}),r.hidableStacks=function(t){return arguments.length?(a=t,r):a},r.hideStack=function(t){var e=u(t);return e&&(e.hidden=!0),r},r.showStack=function(t){var e=u(t);return e&&(e.hidden=!1),r},r.getValueAccessorByIndex=function(t){return o[t].accessor||r.valueAccessor()},r.yAxisMin=function(){var t=tt.min(l(),function(t){return t.y<0?t.y+t.y0:t.y0});return et.utils.subtract(t,r.yAxisPadding())},r.yAxisMax=function(){var t=tt.max(l(),function(t){return 0<t.y?t.y+t.y0:t.y0});return et.utils.add(t,r.yAxisPadding())},r.xAxisMin=function(){var t=tt.min(l(),et.pluck("x"));return et.utils.subtract(t,r.xAxisPadding(),r.xAxisPaddingUnit())},r.xAxisMax=function(){var t=tt.max(l(),et.pluck("x"));return et.utils.add(t,r.xAxisPadding(),r.xAxisPaddingUnit())},et.override(r,"title",function(t,e){return t?"function"==typeof t?r._title(t):t===r._groupName&&"function"==typeof e?r._title(e):"function"!=typeof e?i[t]||r._title():(i[t]=e,r):r._title()}),r.stackLayout=function(t){return arguments.length?((n=t).values()===tt.layout.stack().values()&&n.values(e),r):n},r.evadeDomainFilter=function(t){return arguments.length?(s=t,r):s},r.data(function(){var t=o.filter(c);return t.length?r.stackLayout()(t):[]}),r._ordinalXDomain=function(){var t=l().map(et.pluck("data"));return r._computeOrderedGroups(t).map(r.keyAccessor())},r.colorAccessor(function(t){return this.layer||this.name||t.name||t.layer}),r.legendables=function(){return o.map(function(t,e){return{chart:r,name:t.name,hidden:t.hidden||!1,color:r.getColor.call(t,t.values,e)}})},r.isLegendableHidden=function(t){var e=u(t.name);return!!e&&e.hidden},r.legendToggle=function(t){a&&(r.isLegendableHidden(t)?r.showStack(t.name):r.hideStack(t.name),r.renderGroup())},r},et.capMixin=function(u){var n=1/0,e="Others",i=function(t){var e=tt.sum(t,u.valueAccessor()),n=u.group().all(),i=tt.sum(n,u.valueAccessor()),r=t.map(u.keyAccessor()),o=n.map(u.keyAccessor()),a=tt.set(r),s=o.filter(function(t){return!a.has(t)});return e<i?t.concat([{others:s,key:u.othersLabel(),value:i-e}]):t};return u.cappedKeyAccessor=function(t,e){return t.others?t.key:u.keyAccessor()(t,e)},u.cappedValueAccessor=function(t,e){return t.others?t.value:u.valueAccessor()(t,e)},u.data(function(t){if(n===1/0)return u._computeOrderedGroups(t.all());var e=t.top(n);return e=u._computeOrderedGroups(e),i?i(e):e}),u.cap=function(t){return arguments.length?(n=t,u):n},u.othersLabel=function(t){return arguments.length?(e=t,u):e},u.othersGrouper=function(t){return arguments.length?(i=t,u):i},et.override(u,"onClick",function(t){t.others&&u.filter([t.others]),u._onClick(t)}),u},et.bubbleMixin=function(i){var e=.3,n=10;i.BUBBLE_NODE_CLASS="node",i.BUBBLE_CLASS="bubble",i.MIN_RADIUS=10,(i=et.colorMixin(i)).renderLabel(!0),i.data(function(t){return t.top(1/0)});var r=tt.scale.linear().domain([0,100]),o=function(t){return t.r};i.r=function(t){return arguments.length?(r=t,i):r},i.radiusValueAccessor=function(t){return arguments.length?(o=t,i):o},i.rMin=function(){return tt.min(i.data(),function(t){return i.radiusValueAccessor()(t)})},i.rMax=function(){return tt.max(i.data(),function(t){return i.radiusValueAccessor()(t)})},i.bubbleR=function(t){var e=i.radiusValueAccessor()(t),n=i.r()(e);return(isNaN(n)||e<=0)&&(n=0),n};var a=function(t){return i.label()(t)},s=function(t){return i.bubbleR(t)>n},u=function(t){return s(t)?1:0},l=function(t){return s(t)?"all":"none"};i._doRenderLabel=function(t){if(i.renderLabel()){var e=t.select("text");e.empty()&&(e=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",i.onClick)),e.attr("opacity",0).attr("pointer-events",l).text(a),et.transition(e,i.transitionDuration(),i.transitionDelay()).attr("opacity",u)}},i.doUpdateLabels=function(t){if(i.renderLabel()){var e=t.select("text").attr("pointer-events",l).text(a);et.transition(e,i.transitionDuration(),i.transitionDelay()).attr("opacity",u)}};var c=function(t){return i.title()(t)};return i._doRenderTitles=function(t){i.renderTitle()&&t.select("title").empty()&&t.append("title").text(c)},i.doUpdateTitles=function(t){i.renderTitle()&&t.select("title").text(c)},i.minRadius=function(t){return arguments.length?(i.MIN_RADIUS=t,i):i.MIN_RADIUS},i.minRadiusWithLabel=function(t){return arguments.length?(n=t,i):n},i.maxBubbleRelativeSize=function(t){return arguments.length?(e=t,i):e},i.fadeDeselectedArea=function(){i.hasFilter()?i.selectAll("g."+i.BUBBLE_NODE_CLASS).each(function(t){i.isSelectedNode(t)?i.highlightSelected(this):i.fadeDeselected(this)}):i.selectAll("g."+i.BUBBLE_NODE_CLASS).each(function(){i.resetHighlight(this)})},i.isSelectedNode=function(t){return i.hasFilter(t.key)},i.onClick=function(t){var e=t.key;et.events.trigger(function(){i.filter(e),i.redrawGroup()})},i},et.pieChart=function(t,e){var w,S,A,n,i,T,P="pie-slice",C="pie-label",L="pie-slice-group",E="pie-label-group",k="empty-chart",M="empty",r=0,o=0,a=.5,O=!1,R=et.capMixin(et.colorMixin(et.baseMixin({})));function s(){var t=tt.min([R.width(),R.height()])/2;w=S&&S<t?S:t;var e,n,i,r,o,a,s,u,l,c,h,f,d,p,g,m,v,_=G(),y=tt.layout.pie().sort(null).value(R.cappedValueAccessor);if(tt.sum(R.data(),R.valueAccessor())?(e=y(R.data()),A.classed(k,!1)):(e=y([{key:M,value:1,others:[M]}]),A.classed(k,!0)),A){var x=A.select("g."+L).selectAll("g."+P).data(e),b=A.select("g."+E).selectAll("text."+C).data(e);c=b,h=_,f=e,d=x.enter().append("g").attr("class",function(t,e){return P+" _"+e}),g=h,m=d.append("path").attr("fill",N).on("click",B).attr("d",function(t,e){return F(t,e,g)}),(v=et.transition(m,R.transitionDuration(),R.transitionDelay())).attrTween&&v.attrTween("d",V),p=d,R.renderTitle()&&p.append("title").text(function(t){return R.title()(t.data)}),function(t,e,n){if(R.renderLabel()){var i=t.enter().append("text").attr("class",function(t,e){var n=P+" "+C+" _"+e;return T&&(n+=" external"),n}).on("click",B).on("mouseover",function(t,e){D(e,!0)}).on("mouseout",function(t,e){D(e,!1)});z(i,n),T&&O&&I(e,n)}}(c,f,h),i=s=e,r=u=_,o=A.selectAll("g."+P).data(i).select("path").attr("d",function(t,e){return F(t,e,r)}),(a=et.transition(o,R.transitionDuration(),R.transitionDelay())).attrTween&&a.attrTween("d",V),a.attr("fill",N),function(t,e){if(R.renderLabel()){var n=A.selectAll("text."+C).data(t);z(n,e),T&&O&&I(t,e)}}(s,u),l=s,R.renderTitle()&&A.selectAll("g."+P).data(l).select("title").text(function(t){return R.title()(t.data)}),n=b,x.exit().remove(),n.exit().remove(),R.hasFilter()?R.selectAll("g."+P).each(function(t){j(t)?R.highlightSelected(this):R.fadeDeselected(this)}):R.selectAll("g."+P).each(function(){R.resetHighlight(this)}),et.transition(A,R.transitionDuration(),R.transitionDelay()).attr("transform","translate("+R.cx()+","+R.cy()+")")}}function z(t,r){R._applyLabelText(t),et.transition(t,R.transitionDuration(),R.transitionDelay()).attr("transform",function(t){return e=t,n=r,i=T?tt.svg.arc().outerRadius(w-o+T).innerRadius(w-o+T).centroid(e):n.centroid(e),isNaN(i[0])||isNaN(i[1])?"translate(0,0)":"translate("+i+")";var e,n,i}).attr("text-anchor","middle")}function D(t,e){R.select("g.pie-slice._"+t).classed("highlight",e)}function I(t,i){var e=A.selectAll("polyline."+P).data(t);e.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+P}).on("click",B).on("mouseover",function(t,e){D(e,!0)}).on("mouseout",function(t,e){D(e,!1)}),e.exit().remove();var r=tt.svg.arc().outerRadius(w-o+T).innerRadius(w-o),n=et.transition(e,R.transitionDuration(),R.transitionDelay());n.attrTween?n.attrTween("points",function(t){var e=this._current||t;e={startAngle:e.startAngle,endAngle:e.endAngle};var n=tt.interpolate(e,t);return this._current=n(0),function(t){var e=n(t);return[i.centroid(e),r.centroid(e)]}}):n.attr("points",function(t){return[i.centroid(t),r.centroid(t)]}),n.style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function G(){return tt.svg.arc().outerRadius(w-o).innerRadius(r)}function j(t){return R.hasFilter(R.cappedKeyAccessor(t.data))}function V(t){t.innerRadius=r;var e,n=this._current;n=!(e=n)||isNaN(e.startAngle)||isNaN(e.endAngle)?{startAngle:0,endAngle:0}:{startAngle:n.startAngle,endAngle:n.endAngle};var i=tt.interpolate(n,t);return this._current=i(0),function(t){return F(i(t),0,G())}}function N(t,e){return R.getColor(t.data,e)}function B(t,e){A.attr("class")!==k&&R.onClick(t.data,e)}function F(t,e,n){var i=n(t,e);return 0<=i.indexOf("NaN")&&(i="M0,0"),i}function u(e,n){R.selectAll("g.pie-slice").each(function(t){e.name===t.data.key&&tt.select(this).classed("highlight",n)})}return R.colorAccessor(R.cappedKeyAccessor),R.title(function(t){return R.cappedKeyAccessor(t)+": "+R.cappedValueAccessor(t)}),R.slicesCap=R.cap,R.label(R.cappedKeyAccessor),R.renderLabel(!0),R.transitionDuration(350),R.transitionDelay(0),R._doRender=function(){return R.resetSvg(),(A=R.svg().append("g").attr("transform","translate("+R.cx()+","+R.cy()+")")).append("g").attr("class",L),A.append("g").attr("class",E),s(),R},R._applyLabelText=function(t){t.text(function(t){var e,n,i,r=t.data;return i=r,(0===R.cappedValueAccessor(i)||(n=(e=t).endAngle-e.startAngle,isNaN(n)||n<a))&&!j(t)?"":R.label()(t.data)})},R.externalRadiusPadding=function(t){return arguments.length?(o=t,R):o},R.innerRadius=function(t){return arguments.length?(r=t,R):r},R.radius=function(t){return arguments.length?(S=t,R):S},R.cx=function(t){return arguments.length?(n=t,R):n||R.width()/2},R.cy=function(t){return arguments.length?(i=t,R):i||R.height()/2},R._doRedraw=function(){return s(),R},R.minAngleForLabel=function(t){return arguments.length?(a=t,R):a},R.emptyTitle=function(t){return 0===arguments.length?M:(M=t,R)},R.externalLabels=function(t){return 0===arguments.length?T:(T=t||void 0,R)},R.drawPaths=function(t){return 0===arguments.length?O:(O=t,R)},R.legendables=function(){return R.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:R};return n.color=R.getColor(t,e),n})},R.legendHighlight=function(t){u(t,!0)},R.legendReset=function(t){u(t,!1)},R.legendToggle=function(t){R.onClick({key:t.name,others:t.others})},R.anchor(t,e)},et.barChart=function(t,e){var l,c=et.stackMixin(et.coordinateGridMixin({})),h=2,f=!1,n=!1;function d(t){return et.utils.safeNumber(Math.abs(c.y()(t.y+t.y0)-c.y()(t.y0)))}function i(e,n){return function(){var t=tt.select(this).attr("fill")===e;return n?!t:t}}return et.override(c,"rescale",function(){return c._rescale(),l=void 0,c}),et.override(c,"render",function(){return c.round()&&f&&!n&&et.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),c._render()}),c.label(function(t){return et.utils.printSingleValue(t.y0+t.y)},!1),c.plotData=function(){var t=c.chartBodyG().selectAll("g.stack").data(c.data());!function(){if(void 0===l){var t=c.xUnitCount();((l=c.isOrdinal()&&void 0===h?Math.floor(c.x().rangeBand()):h?Math.floor((c.xAxisLength()-(t-1)*h)/t):Math.floor(c.xAxisLength()/(1+c.barPadding())/t))===1/0||isNaN(l)||l<1)&&(l=1)}}(),t.enter().append("g").attr("class",function(t,e){return"stack _"+e});var u=t.size()-1;t.each(function(t,e){var n,i,r,o,a,s=tt.select(this);r=t,o=s.selectAll("rect.bar").data(r.values,et.pluck("x")),a=o.enter().append("rect").attr("class","bar").attr("fill",et.pluck("data",c.getColor)).attr("y",c.yAxisHeight()).attr("height",0),c.renderTitle()&&a.append("title").text(et.pluck("data",c.title(r.name))),c.isOrdinal()&&o.on("click",c.onClick),et.transition(o,c.transitionDuration(),c.transitionDelay()).attr("x",function(t){var e=c.x()(t.x);return f&&(e-=l/2),c.isOrdinal()&&void 0!==h&&(e+=h/2),et.utils.safeNumber(e)}).attr("y",function(t){var e=c.y()(t.y+t.y0);return t.y<0&&(e-=d(t)),et.utils.safeNumber(e)}).attr("width",l).attr("height",function(t){return d(t)}).attr("fill",et.pluck("data",c.getColor)).select("title").text(et.pluck("data",c.title(r.name))),et.transition(o.exit(),c.transitionDuration(),c.transitionDelay()).attr("x",function(t){return c.x()(t.x)}).attr("width",.9*l).remove(),c.renderLabel()&&u===e&&(n=t,(i=s.selectAll("text.barLabel").data(n.values,et.pluck("x"))).enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),c.isOrdinal()&&(i.on("click",c.onClick),i.attr("cursor","pointer")),et.transition(i,c.transitionDuration(),c.transitionDelay()).attr("x",function(t){var e=c.x()(t.x);return f||(e+=l/2),et.utils.safeNumber(e)}).attr("y",function(t){var e=c.y()(t.y+t.y0);return t.y<0&&(e-=d(t)),et.utils.safeNumber(e-3)}).text(function(t){return c.label()(t)}),et.transition(i.exit(),c.transitionDuration(),c.transitionDelay()).attr("height",0).remove())})},c.fadeDeselectedArea=function(){var t=c.chartBodyG().selectAll("rect.bar"),e=c.brush().extent();if(c.isOrdinal())c.hasFilter()?(t.classed(et.constants.SELECTED_CLASS,function(t){return c.hasFilter(t.x)}),t.classed(et.constants.DESELECTED_CLASS,function(t){return!c.hasFilter(t.x)})):(t.classed(et.constants.SELECTED_CLASS,!1),t.classed(et.constants.DESELECTED_CLASS,!1));else if(c.brushIsEmpty(e))t.classed(et.constants.DESELECTED_CLASS,!1);else{var n=e[0],i=e[1];t.classed(et.constants.DESELECTED_CLASS,function(t){return t.x<n||t.x>=i})}},c.centerBar=function(t){return arguments.length?(f=t,c):f},et.override(c,"onClick",function(t){c._onClick(t.data)}),c.barPadding=function(t){return arguments.length?(c._rangeBandPadding(t),h=void 0,c):c._rangeBandPadding()},c._useOuterPadding=function(){return void 0===h},c.outerPadding=c._outerRangeBandPadding,c.gap=function(t){return arguments.length?(h=t,c):h},c.extendBrush=function(){var t=c.brush().extent();return!c.round()||f&&!n||(t[0]=t.map(c.round())[0],t[1]=t.map(c.round())[1],c.chartBodyG().select(".brush").call(c.brush().extent(t))),t},c.alwaysUseRounding=function(t){return arguments.length?(n=t,c):n},c.legendHighlight=function(t){c.isLegendableHidden(t)||c.g().selectAll("rect.bar").classed("highlight",i(t.color)).classed("fadeout",i(t.color,!0))},c.legendReset=function(){c.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},et.override(c,"xAxisMax",function(){var t=this._xAxisMax();return"resolution"in c.xUnits()&&(t+=c.xUnits().resolution),t}),c.anchor(t,e)},et.lineChart=function(t,e){var a,r,s="dc-tooltip",l="yRef",c="xRef",h=et.stackMixin(et.coordinateGridMixin({})),o=!1,f=5,n=null,d=1e-6,p=1e-6,u="linear",g=.7,i=!0;function m(t,e){return h.getColor.call(t,t.values,e)}function v(t){return!t||0<=t.indexOf("NaN")?"M0,0":t}function _(){return n||f}function y(t,e){h.renderTitle()&&(t.select("title").remove(),t.append("title").text(et.pluck("data",h.title(e.name))))}function x(n,i,r){return function(){var t=tt.select(this),e=t.attr("stroke")===n&&t.attr("stroke-dasharray")===(i instanceof Array?i.join(","):null)||t.attr("fill")===n;return r?!e:e}}return h.transitionDuration(500),h.transitionDelay(0),h._rangeBandPadding(1),h.plotData=function(){var t=h.chartBodyG(),e=t.select("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(h.data()),i=n.enter().append("g").attr("class",function(t,e){return"stack _"+e});!function(t,e){var n=tt.svg.line().x(function(t){return h.x()(t.x)}).y(function(t){return h.y()(t.y+t.y0)}).interpolate(u).tension(g);a&&n.defined(a);var i=t.append("path").attr("class","line").attr("stroke",m);r&&i.attr("stroke-dasharray",r),et.transition(e.select("path.line"),h.transitionDuration(),h.transitionDelay()).attr("stroke",m).attr("d",function(t){return v(n(t.values))})}(i,n),function(t,e){if(o){var n=tt.svg.area().x(function(t){return h.x()(t.x)}).y(function(t){return h.y()(t.y+t.y0)}).y0(function(t){return h.y()(t.y0)}).interpolate(u).tension(g);a&&n.defined(a),t.append("path").attr("class","area").attr("fill",m).attr("d",function(t){return v(n(t.values))}),et.transition(e.select("path.area"),h.transitionDuration(),h.transitionDelay()).attr("fill",m).attr("d",function(t){return v(n(t.values))})}}(i,n),function(t,e){if("always"===h.xyTipsOn()||!h.brushOn()&&h.xyTipsOn()){var n=s+"-list",o=t.select("g."+n);o.empty()&&(o=t.append("g").attr("class",n)),e.each(function(t,e){var n=t.values;a&&(n=n.filter(a));var i,u=o.select("g."+s+"._"+e);u.empty()&&(u=o.append("g").attr("class",s+" _"+e)),((i=u).select("path."+l).empty()?i.append("path").attr("class",l):i.select("path."+l)).style("display","none").attr("stroke-dasharray","5,5"),(i.select("path."+c).empty()?i.append("path").attr("class",c):i.select("path."+c)).style("display","none").attr("stroke-dasharray","5,5");var r=u.selectAll("circle.dot").data(n,et.pluck("x"));r.enter().append("circle").attr("class","dot").attr("r",_()).style("fill-opacity",d).style("stroke-opacity",p).attr("fill",h.getColor).on("mousemove",function(){var t,e,n,i,r,o,a,s=tt.select(this);(t=s).style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",f),n=u,i=(e=s).attr("cx"),r=e.attr("cy"),o="M"+(h._yAxisX()-h.margins().left)+" "+r+"L"+i+" "+r,a="M"+i+" "+h.yAxisHeight()+"L"+i+" "+r,n.select("path."+l).style("display","").attr("d",o),n.select("path."+c).style("display","").attr("d",a)}).on("mouseout",function(){var t,e=tt.select(this);e.style("fill-opacity",d).style("stroke-opacity",p).attr("r",_()),(t=u).select("path."+l).style("display","none"),t.select("path."+c).style("display","none")}),r.call(y,t),et.transition(r,h.transitionDuration()).attr("cx",function(t){return et.utils.safeNumber(h.x()(t.x))}).attr("cy",function(t){return et.utils.safeNumber(h.y()(t.y+t.y0))}).attr("fill",h.getColor),r.exit().remove()})}}(t,n),h.renderLabel()&&n.each(function(t,e){var n=tt.select(this),i=n.selectAll("text.lineLabel").data(t.values,et.pluck("x"));i.enter().append("text").attr("class","lineLabel").attr("text-anchor","middle"),et.transition(i,h.transitionDuration()).attr("x",function(t){return et.utils.safeNumber(h.x()(t.x))}).attr("y",function(t){var e=h.y()(t.y+t.y0)-3;return et.utils.safeNumber(e)}).text(function(t){return h.label()(t)}),et.transition(i.exit(),h.transitionDuration()).attr("height",0).remove()})},h.interpolate=function(t){return arguments.length?(u=t,h):u},h.tension=function(t){return arguments.length?(g=t,h):g},h.defined=function(t){return arguments.length?(a=t,h):a},h.dashStyle=function(t){return arguments.length?(r=t,h):r},h.renderArea=function(t){return arguments.length?(o=t,h):o},h.label(function(t){return et.utils.printSingleValue(t.y0+t.y)},!1),h.xyTipsOn=function(t){return arguments.length?(i=t,h):i},h.dotRadius=function(t){return arguments.length?(f=t,h):f},h.renderDataPoints=function(t){return arguments.length?(n=t?(d=t.fillOpacity||.8,p=t.strokeOpacity||.8,t.radius||2):(p=d=1e-6,null),h):{fillOpacity:d,strokeOpacity:p,radius:n}},h.legendHighlight=function(t){h.isLegendableHidden(t)||h.g().selectAll("path.line, path.area").classed("highlight",x(t.color,t.dashstyle)).classed("fadeout",x(t.color,t.dashstyle,!0))},h.legendReset=function(){h.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},et.override(h,"legendables",function(){var t=h._legendables();return r?t.map(function(t){return t.dashstyle=r,t}):t}),h.anchor(t,e)},et.dataCount=function(t,e){var r=tt.format(",d"),o=et.baseMixin({}),a={some:"",all:""};return o.html=function(t){return arguments.length?(t.all&&(a.all=t.all),t.some&&(a.some=t.some),o):a},o.formatNumber=function(t){return arguments.length?(r=t,o):r},o._doRender=function(){var t=o.dimension().size(),e=o.group().value(),n=r(t),i=r(e);return t===e&&""!==a.all?o.root().html(a.all.replace("%total-count",n).replace("%filter-count",i)):""!==a.some?o.root().html(a.some.replace("%total-count",n).replace("%filter-count",i)):(o.selectAll(".total-count").text(n),o.selectAll(".filter-count").text(i)),o},o._doRedraw=function(){return o._doRender()},o.anchor(t,e)},et.dataTable=function(t,e){var s,i="dc-table-row",u=et.baseMixin({}),l=25,c=[],h=function(t){return t},f=tt.ascending,d=0,p=!0;return u._doRender=function(){var t,e,n;return u.selectAll("tbody").remove(),t=function(){var e=!0;if(c.forEach(function(t){e&="function"==typeof t}),!e){var t=u.selectAll("thead").data([0]);t.enter().append("thead"),t.exit().remove();var n=t.selectAll("tr").data([0]);n.enter().append("tr"),n.exit().remove();var i=n.selectAll("th").data(c);i.enter().append("th"),i.exit().remove(),i.attr("class","dc-table-head").html(function(t){return u._doColumnHeaderFormat(t)})}var r,o=u.root().selectAll("tbody").data((r=f===tt.ascending?u.dimension().bottom(l):u.dimension().top(l),tt.nest().key(u.group()).sortKeys(f).entries(r.sort(function(t,e){return f(h(t),h(e))}).slice(d,s))),function(t){return u.keyAccessor()(t)}),a=o.enter().append("tbody");return!0===p&&a.append("tr").attr("class","dc-table-group").append("td").attr("class","dc-table-label").attr("colspan",c.length).html(function(t){return u.keyAccessor()(t)}),o.exit().remove(),a}(),e=t.order().selectAll("tr."+i).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",i),c.forEach(function(e,t){n.append("td").attr("class","dc-table-column _"+t).html(function(t){return u._doColumnValueFormat(e,t)})}),e.exit().remove(),u},u._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},u._doColumnHeaderFormat=function(t){return"function"==typeof t?u._doColumnHeaderFnToString(t):"string"==typeof t?u._doColumnHeaderCapitalize(t):String(t.label)},u._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},u._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(0<=n){var i=e.lastIndexOf(";");0<=i&&0<=(e=e.substring(n+7,i)).indexOf("numberFormat")&&(e=e.replace("numberFormat",""))}return e},u._doRedraw=function(){return u._doRender()},u.size=function(t){return arguments.length?(l=t,u):l},u.beginSlice=function(t){return arguments.length?(d=t,u):d},u.endSlice=function(t){return arguments.length?(s=t,u):s},u.columns=function(t){return arguments.length?(c=t,u):c},u.sortBy=function(t){return arguments.length?(h=t,u):h},u.order=function(t){return arguments.length?(f=t,u):f},u.showGroups=function(t){return arguments.length?(p=t,u):p},u.anchor(t,e)},et.dataGrid=function(t,e){var r,o="dc-grid-item",a="dc-grid-top",s=et.baseMixin({}),u=999,l=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},c=function(t){return t},h=tt.ascending,f=0,d=function(t){return"<div class='dc-grid-group'><h1 class='dc-grid-label'>"+s.keyAccessor()(t)+"</h1></div>"};return s._doRender=function(){var t,e,n,i;return s.selectAll("div."+a).remove(),n=s.root().selectAll("div."+a).data((e=s.dimension().top(u),tt.nest().key(s.group()).sortKeys(h).entries(e.sort(function(t,e){return h(c(t),c(e))}).slice(f,r))),function(t){return s.keyAccessor()(t)}),i=n.enter().append("div").attr("class",a),d&&i.html(function(t){return d(t)}),n.exit().remove(),(t=i.order().selectAll("div."+o).data(function(t){return t.values})).enter().append("div").attr("class",o).html(function(t){return l(t)}),t.exit().remove(),s},s._doRedraw=function(){return s._doRender()},s.beginSlice=function(t){return arguments.length?(f=t,s):f},s.endSlice=function(t){return arguments.length?(r=t,s):r},s.size=function(t){return arguments.length?(u=t,s):u},s.html=function(t){return arguments.length?(l=t,s):l},s.htmlGroup=function(t){return arguments.length?(d=t,s):d},s.sortBy=function(t){return arguments.length?(c=t,s):c},s.order=function(t){return arguments.length?(h=t,s):h},s.anchor(t,e)},et.bubbleChart=function(t,e){var a=et.bubbleMixin(et.coordinateGridMixin({})),s=!1,u=!1;a.transitionDuration(750),a.transitionDelay(0);var l=function(t){return"translate("+(i=t,r=a.x()(a.keyAccessor()(i)),isNaN(r)&&(r=0),r)+","+(e=t,n=a.y()(a.valueAccessor()(e)),isNaN(n)&&(n=0),n)+")";var e,n,i,r};return a.elasticRadius=function(t){return arguments.length?(s=t,a):s},a.sortBubbleSize=function(t){return arguments.length?(u=t,a):u},a.plotData=function(){s&&a.r().domain([a.rMin(),a.rMax()]),a.r().range([a.MIN_RADIUS,a.xAxisLength()*a.maxBubbleRelativeSize()]);var t=a.data();if(u){var n=a.radiusValueAccessor();t.sort(function(t,e){return tt.descending(n(t),n(e))})}var e,i,r,o=a.chartBodyG().selectAll("g."+a.BUBBLE_NODE_CLASS).data(t,function(t){return t.key});u&&o.order(),(i=(e=o).enter().append("g")).attr("class",a.BUBBLE_NODE_CLASS).attr("transform",l).append("circle").attr("class",function(t,e){return a.BUBBLE_CLASS+" _"+e}).on("click",a.onClick).attr("fill",a.getColor).attr("r",0),et.transition(e,a.transitionDuration(),a.transitionDelay()).select("circle."+a.BUBBLE_CLASS).attr("r",function(t){return a.bubbleR(t)}).attr("opacity",function(t){return 0<a.bubbleR(t)?1:0}),a._doRenderLabel(i),a._doRenderTitles(i),r=o,et.transition(r,a.transitionDuration(),a.transitionDelay()).attr("transform",l).select("circle."+a.BUBBLE_CLASS).attr("fill",a.getColor).attr("r",function(t){return a.bubbleR(t)}).attr("opacity",function(t){return 0<a.bubbleR(t)?1:0}),a.doUpdateLabels(r),a.doUpdateTitles(r),o.exit().remove(),a.fadeDeselectedArea()},a.renderBrush=function(){},a.redrawBrush=function(){a.fadeDeselectedArea()},a.anchor(t,e)},et.compositeChart=function(t,e){var b,n="sub",w=et.coordinateGridMixin({}),i=[],r={},o=!1,a=!0,s=!1,S=tt.svg.axis(),u=0,l=12,A=!1;function c(t,e){t._generateG(w.g()),t.g().attr("class",n+" _"+e)}function T(){return i.filter(function(t){return!t.useRightYAxis()})}function P(){return i.filter(function(t){return t.useRightYAxis()})}function C(t){return t.map(function(t){return t.yAxisMin()})}function L(t){return t.map(function(t){return t.yAxisMax()})}return w._mandatoryAttributes([]),w.transitionDuration(500),w.transitionDelay(0),et.override(w,"_generateG",function(){for(var t=this.__generateG(),e=0;e<i.length;++e){var n=i[e];c(n,e),n.dimension()||n.dimension(w.dimension()),n.group()||n.group(w.group()),n.chartGroup(w.chartGroup()),n.svg(w.svg()),n.xUnits(w.xUnits()),n.transitionDuration(w.transitionDuration(),w.transitionDelay()),n.brushOn(w.brushOn()),n.renderTitle(w.renderTitle()),n.elasticX(w.elasticX())}return t}),w._brushing=function(){for(var t=w.extendBrush(),e=w.brushIsEmpty(t),n=0;n<i.length;++n)i[n].replaceFilter(e?null:t)},w._prepareYAxis=function(){var t,e,n,i,r,o,a,s,u,l,c,h,f,d,p,g,m,v,_=0!==T().length,y=0!==P().length,x=(e=y,(t=_)&&(n=tt.min(C(T())),i=et.utils.add(tt.max(L(T())),w.yAxisPadding())),e&&(r=tt.min(C(P())),o=et.utils.add(tt.max(L(P())),w.yAxisPadding())),w.alignYAxes()&&t&&e&&(h=((c=o)-(l=r))/((u=i)-(s=n)),a={lyAxisMin:Math.min(s,l/h),lyAxisMax:Math.max(u,c/h),ryAxisMin:Math.min(l,s*h),ryAxisMax:Math.max(c,u*h)}),a||{lyAxisMin:n,lyAxisMax:i,ryAxisMin:r,ryAxisMax:o});_&&(g=x,m=void 0===w.y()||w.elasticY(),v=m||w.resizing(),void 0===w.y()&&w.y(tt.scale.linear()),m&&w.y().domain([g.lyAxisMin,g.lyAxisMax]),v&&w.y().rangeRound([w.yAxisHeight(),0]),w.y().range([w.yAxisHeight(),0]),w.yAxis(w.yAxis().scale(w.y())),w.yAxis().orient("left")),y&&(f=x,d=void 0===w.rightY()||w.elasticY(),p=d||w.resizing(),void 0===w.rightY()&&w.rightY(tt.scale.linear()),d&&w.rightY().domain([f.ryAxisMin,f.ryAxisMax]),p&&w.rightY().rangeRound([w.yAxisHeight(),0]),w.rightY().range([w.yAxisHeight(),0]),w.rightYAxis(w.rightYAxis().scale(w.rightY())),w.rightYAxis().orient("right")),0<T().length&&!A?w._renderHorizontalGridLinesForAxis(w.g(),w.y(),w.yAxis()):0<P().length&&w._renderHorizontalGridLinesForAxis(w.g(),b,S)},w.renderYAxis=function(){0!==T().length&&(w.renderYAxisAt("y",w.yAxis(),w.margins().left),w.renderYAxisLabel("y",w.yAxisLabel(),-90)),0!==P().length&&(w.renderYAxisAt("yr",w.rightYAxis(),w.width()-w.margins().right),w.renderYAxisLabel("yr",w.rightYAxisLabel(),90,w.width()-l))},w.plotData=function(){for(var t=0;t<i.length;++t){var e=i[t];e.g()||c(e,t),o&&e.colors(w.colors()),e.x(w.x()),e.xAxis(w.xAxis()),e.useRightYAxis()?(e.y(w.rightY()),e.yAxis(w.rightYAxis())):(e.y(w.y()),e.yAxis(w.yAxis())),e.plotData(),e._activateRenderlets()}},w.useRightAxisGridLines=function(t){return arguments?(A=t,w):A},w.childOptions=function(t){return arguments.length?(r=t,i.forEach(function(t){t.options(r)}),w):r},w.fadeDeselectedArea=function(){for(var t=0;t<i.length;++t){var e=i[t];e.brush(w.brush()),e.fadeDeselectedArea()}},w.rightYAxisLabel=function(t,e){return arguments.length?(u=t,w.margins().right-=l,l=void 0===e?12:e,w.margins().right+=l,w):u},w.compose=function(t){return(i=t).forEach(function(t){t.height(w.height()),t.width(w.width()),t.margins(w.margins()),a&&t.title(w.title()),t.options(r)}),w},w.children=function(){return i},w.shareColors=function(t){return arguments.length?(o=t,w):o},w.shareTitle=function(t){return arguments.length?(a=t,w):a},w.rightY=function(t){return arguments.length?(b=t,w.rescale(),w):b},w.alignYAxes=function(t){return arguments.length?(s=t,w.rescale(),w):s},delete w.yAxisMin,delete w.yAxisMax,et.override(w,"xAxisMin",function(){return et.utils.subtract(tt.min(i.map(function(t){return t.xAxisMin()})),w.xAxisPadding())}),et.override(w,"xAxisMax",function(){return et.utils.add(tt.max(i.map(function(t){return t.xAxisMax()})),w.xAxisPadding())}),w.legendables=function(){return i.reduce(function(t,e){return o&&e.colors(w.colors()),t.push.apply(t,e.legendables()),t},[])},w.legendHighlight=function(t){for(var e=0;e<i.length;++e)i[e].legendHighlight(t)},w.legendReset=function(t){for(var e=0;e<i.length;++e)i[e].legendReset(t)},w.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},w.rightYAxis=function(t){return arguments.length?(S=t,w):S},w.anchor(t,e)},et.seriesChart=function(t,o){var n,a=et.compositeChart(t,o),s={},u=et.lineChart,l=tt.ascending,c=function(t,e){return tt.ascending(a.keyAccessor()(t),a.keyAccessor()(e))};function h(t){s[t].g()&&s[t].g().remove(),delete s[t]}function e(){Object.keys(s).map(h),s={}}return a._mandatoryAttributes().push("seriesAccessor","chart"),a.shareColors(!0),a._preprocessData=function(){var i,r=[],t=tt.nest().key(n);l&&t.sortKeys(l),c&&t.sortValues(c);var e=t.entries(a.data()).map(function(t,e){var n=s[t.key]||u.call(a,a,o,t.key,e);return s[t.key]||(i=!0),s[t.key]=n,r.push(t.key),n.dimension(a.dimension()).group({all:tt.functor(t.values)},t.key).keyAccessor(a.keyAccessor()).valueAccessor(a.valueAccessor()).brushOn(a.brushOn())});Object.keys(s).filter(function(t){return-1===r.indexOf(t)}).forEach(function(t){h(t),i=!0}),a._compose(e),i&&a.legend()&&a.legend().render()},a.chart=function(t){return arguments.length?(u=t,e(),a):u},a.seriesAccessor=function(t){return arguments.length?(n=t,e(),a):n},a.seriesSort=function(t){return arguments.length?(l=t,e(),a):l},a.valueSort=function(t){return arguments.length?(c=t,e(),a):c},a._compose=a.compose,delete a.compose,a},et.geoChoroplethChart=function(t,e){var h=et.colorMixin(et.baseMixin({}));h.colorAccessor(function(t){return t||0});var n,i=tt.geo.path(),r=[];function o(t){var e,i,r,n,o,a,s,u,l=function(){for(var t={},e=h.data(),n=0;n<e.length;++n)t[h.keyAccessor()(e[n])]=h.valueAccessor()(e[n]);return t}();if(g(t).keyAccessor){var c=(s=t,h.svg().selectAll((u=s,"g.layer"+u+" g."+g(u).name)).classed("selected",function(t){return f(s,t)}).classed("deselected",function(t){return d(s,t)}).attr("class",function(t){var e=g(s).name,n=et.utils.nameToId(g(s).keyAccessor(t)),i=e+" "+n;return f(s,t)&&(i+=" selected"),d(s,t)&&(i+=" deselected"),i}));n=t,o=l,a=c.select("path").attr("fill",function(){var t=tt.select(this).attr("fill");return t||"none"}).on("click",function(t){return h.onClick(t,n)}),et.transition(a,h.transitionDuration(),h.transitionDelay()).attr("fill",function(t,e){return h.getColor(o[g(n).keyAccessor(t)],e)}),e=c,i=t,r=l,h.renderTitle()&&e.selectAll("title").text(function(t){var e=p(i,t),n=r[e];return h.title()({key:e,value:n})})}}function f(t,e){return h.hasFilter()&&h.hasFilter(p(t,e))}function d(t,e){return h.hasFilter()&&!h.hasFilter(p(t,e))}function p(t,e){return g(t).keyAccessor(e)}function g(t){return r[t]}return h._doRender=function(){h.resetSvg();for(var t=0;t<r.length;++t){var e=h.svg().append("g").attr("class","layer"+t).selectAll("g."+g(t).name).data(g(t).data).enter().append("g").attr("class",g(t).name);e.append("path").attr("fill","white").attr("d",i),e.append("title"),o(t)}n=!1},h.onClick=function(t,e){var n=g(e).keyAccessor(t);et.events.trigger(function(){h.filter(n),h.redrawGroup()})},h._doRedraw=function(){for(var t=0;t<r.length;++t)o(t),n&&h.svg().selectAll("g."+g(t).name+" path").attr("d",i);n=!1},h.overlayGeoJson=function(t,e,n){for(var i=0;i<r.length;++i)if(r[i].name===e)return r[i].data=t,r[i].keyAccessor=n,h;return r.push({name:e,data:t,keyAccessor:n}),h},h.projection=function(t){return i.projection(t),n=!0,h},h.geoJsons=function(){return r},h.geoPath=function(){return i},h.removeGeoJson=function(t){for(var e=[],n=0;n<r.length;++n){var i=r[n];i.name!==t&&e.push(i)}return r=e,h},h.anchor(t,e)},et.bubbleOverlay=function(t,e){var r,n="bubble-overlay",o="node",a="bubble",s=et.bubbleMixin(et.baseMixin({})),u=[];function l(){var e={};return s.data().forEach(function(t){e[s.keyAccessor()(t)]=t}),e}function c(t,e){var n=o+" "+et.utils.nameToId(t.name),i=r.select("g."+et.utils.nameToId(t.name));return i.empty()&&(i=r.append("g").attr("class",n).attr("transform","translate("+t.x+","+t.y+")")),i.datum(e[t.name]),i}return s.transitionDuration(750),s.transitionDelay(0),s.radiusValueAccessor(function(t){return t.value}),s.point=function(t,e,n){return u.push({name:t,x:e,y:n}),s},s._doRender=function(){var i;return(r=s.select("g."+n)).empty()&&(r=s.svg().append("g").attr("class",n)),r=r,s.r().range([s.MIN_RADIUS,s.width()*s.maxBubbleRelativeSize()]),i=l(),u.forEach(function(t){var e=c(t,i),n=e.select("circle."+a);n.empty()&&(n=e.append("circle").attr("class",a).attr("r",0).attr("fill",s.getColor).on("click",s.onClick)),et.transition(n,s.transitionDuration(),s.transitionDelay()).attr("r",function(t){return s.bubbleR(t)}),s._doRenderLabel(e),s._doRenderTitles(e)}),s.fadeDeselectedArea(),s},s._doRedraw=function(){var i;return i=l(),u.forEach(function(t){var e=c(t,i),n=e.select("circle."+a);et.transition(n,s.transitionDuration(),s.transitionDelay()).attr("r",function(t){return s.bubbleR(t)}).attr("fill",s.getColor),s.doUpdateLabels(e),s.doUpdateTitles(e)}),s.fadeDeselectedArea(),s},s.debug=function(t){if(t){var n=s.select("g."+et.constants.DEBUG_GROUP_CLASS);n.empty()&&(n=s.svg().append("g").attr("class",et.constants.DEBUG_GROUP_CLASS));var i=n.append("text").attr("x",10).attr("y",20);n.append("rect").attr("width",s.width()).attr("height",s.height()).on("mousemove",function(){var t=tt.mouse(n.node()),e=t[0]+", "+t[1];i.text(e)})}else s.selectAll(".debug").remove();return s},s.anchor(t,e),s},et.rowChart=function(t,e){var i,o,n,a,s=10,u=15,l=!1,c="0.35em",h=2,f=5,d=!1,p="row",g="titlerow",r=!1,m=et.capMixin(et.marginMixin(et.colorMixin(et.baseMixin({})))),v=tt.svg.axis().orient("bottom");function _(){var t=i.select("g.axis");!function(){if(!o||n){var t=tt.extent(a,m.cappedValueAccessor);0<t[0]&&(t[0]=0),t[1]<0&&(t[1]=0),o=tt.scale.linear().domain(t).range([0,m.effectiveWidth()])}v.scale(o)}(),t.empty()&&(t=i.append("g").attr("class","axis")),t.attr("transform","translate(0, "+m.effectiveHeight()+")"),et.transition(t,m.transitionDuration(),m.transitionDelay()).call(v)}function y(){a=m.data(),_(),i.selectAll("g.tick").select("line.grid-line").remove(),i.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-m.effectiveHeight()});var t,e,n=i.selectAll("g."+p).data(a);(e=n.enter().append("g").attr("class",function(t,e){return p+" _"+e})).append("rect").attr("width",0),t=e,m.renderLabel()&&t.append("text").on("click",b),m.renderTitleLabel()&&t.append("text").attr("class",g).on("click",b),n.exit().remove(),function(t){var n,e=a.length;n=d||(m.effectiveHeight()-(e+1)*f)/e,l||(u=n/2);var i,r=t.attr("transform",function(t,e){return"translate(0,"+((e+1)*f+e*n)+")"}).select("rect").attr("height",n).attr("fill",m.getColor).on("click",b).classed("deselected",function(t){return!!m.hasFilter()&&!S(t)}).classed("selected",function(t){return!!m.hasFilter()&&S(t)});et.transition(r,m.transitionDuration(),m.transitionDelay()).attr("width",function(t){return Math.abs(x()-o(m.valueAccessor()(t)))}).attr("transform",w),i=t,m.renderTitle()&&(i.select("title").remove(),i.append("title").text(m.title())),function(t){if(m.renderLabel()){var e=t.select("text").attr("x",s).attr("y",u).attr("dy",c).on("click",b).attr("class",function(t,e){return p+" _"+e}).text(function(t){return m.label()(t)});et.transition(e,m.transitionDuration(),m.transitionDelay()).attr("transform",w)}if(m.renderTitleLabel()){var n=t.select("."+g).attr("x",m.effectiveWidth()-h).attr("y",u).attr("dy",c).attr("text-anchor","end").on("click",b).attr("class",function(t,e){return g+" _"+e}).text(function(t){return m.title()(t)});et.transition(n,m.transitionDuration(),m.transitionDelay()).attr("transform",w)}}(t)}(n)}function x(){var t=o(0);return t===-1/0||t!=t?o(1):t}function b(t){m.onClick(t)}function w(t){var e=o(m.cappedValueAccessor(t)),n=x();return"translate("+(n<e?n:e)+",0)"}function S(t){return m.hasFilter(m.cappedKeyAccessor(t))}return m.rowsCap=m.cap,m._doRender=function(){return m.resetSvg(),i=m.svg().append("g").attr("transform","translate("+m.margins().left+","+m.margins().top+")"),y(),m},m.title(function(t){return m.cappedKeyAccessor(t)+": "+m.cappedValueAccessor(t)}),m.label(m.cappedKeyAccessor),m.x=function(t){return arguments.length?(o=t,m):o},m.renderTitleLabel=function(t){return arguments.length?(r=t,m):r},m._doRedraw=function(){return y(),m},m.xAxis=function(){return v},m.fixedBarHeight=function(t){return arguments.length?(d=t,m):d},m.gap=function(t){return arguments.length?(f=t,m):f},m.elasticX=function(t){return arguments.length?(n=t,m):n},m.labelOffsetX=function(t){return arguments.length?(s=t,m):s},m.labelOffsetY=function(t){return arguments.length?(u=t,l=!0,m):u},m.titleLabelOffsetX=function(t){return arguments.length?(h=t,m):h},m.anchor(t,e)},et.legend=function(){var n,i,a,e={},s=0,u=0,l=12,c=5,h=!1,f=560,d=70,p=!1,g=et.pluck("name");function m(){return c+l}return e.parent=function(t){return arguments.length?(n=t,e):n},e.render=function(){n.svg().select("g.dc-legend").remove(),a=n.svg().append("g").attr("class","dc-legend").attr("transform","translate("+s+","+u+")");var t=n.legendables();void 0!==i&&(t=t.slice(0,i));var e=a.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){n.legendHighlight(t)}).on("mouseout",function(t){n.legendReset(t)}).on("click",function(t){t.chart.legendToggle(t)});a.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),t.some(et.pluck("dashstyle"))?e.append("line").attr("x1",0).attr("y1",l/2).attr("x2",l).attr("y2",l/2).attr("stroke-width",2).attr("stroke-dasharray",et.pluck("dashstyle")).attr("stroke",et.pluck("color")):e.append("rect").attr("width",l).attr("height",l).attr("fill",function(t){return t?t.color:"blue"}),e.append("text").text(g).attr("x",l+2).attr("y",function(){return l/2+(this.clientHeight?this.clientHeight:13)/2-2});var r=0,o=0;e.attr("transform",function(t,e){if(h){var n=!0===p?this.getBBox().width+c:d;f<r+n&&0<r&&(++o,r=0);var i="translate("+r+","+o*m()+")";return r+=n,i}return"translate(0,"+e*m()+")"})},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(u=t,e):u},e.gap=function(t){return arguments.length?(c=t,e):c},e.itemHeight=function(t){return arguments.length?(l=t,e):l},e.horizontal=function(t){return arguments.length?(h=t,e):h},e.legendWidth=function(t){return arguments.length?(f=t,e):f},e.itemWidth=function(t){return arguments.length?(d=t,e):d},e.autoItemWidth=function(t){return arguments.length?(p=t,e):p},e.legendText=function(t){return arguments.length?(g=t,e):g},e.maxItems=function(t){return arguments.length?(i=et.utils.isNumber(t)?t:void 0,e):i},e},et.scatterPlot=function(t,e){var r=et.coordinateGridMixin({}),o=tt.svg.symbol(),n=function(t){return t.value},i=r.keyAccessor();r.keyAccessor(function(t){return i(t)[0]}),r.valueAccessor(function(t){return i(t)[1]}),r.colorAccessor(function(){return r._groupName}),r.title(function(t){return r.keyAccessor()(t)+","+r.valueAccessor()(t)+": "+r.existenceAccessor()(t)});var a=function(t){return"translate("+r.x()(r.keyAccessor()(t))+","+r.y()(r.valueAccessor()(t))+")"},s=7,u=5,l=3,c=null,h=1,f=0,d=0,p=1,g=null,m=[];function v(t,e){return n(t)?m[e]?Math.pow(u,2):Math.pow(l,2):Math.pow(f,2)}function _(t,e){r.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(function(t){return r.title()(t)}))}function y(t,e){var n=r.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return t(tt.select(this))}),i=o.size();o.size(Math.pow(e,2)),et.transition(n,r.transitionDuration(),r.transitionDelay()).attr("d",o),o.size(i)}return o.size(v),et.override(r,"_filter",function(t){return arguments.length?r.__filter(et.filters.RangedTwoDimensionalFilter(t)):r.__filter()}),r.plotData=function(){var t=r.chartBodyG().selectAll("path.symbol").data(r.data());t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",r.getColor).attr("transform",a),t.call(_,r.data()),t.each(function(t,e){m[e]=!r.filter()||r.filter().isFiltered([t.key[0],t.key[1]])}),et.transition(t,r.transitionDuration(),r.transitionDelay()).attr("opacity",function(t,e){return n(t)?m[e]?p:r.excludedOpacity():d}).attr("fill",function(t,e){return g&&!n(t)?g:r.excludedColor()&&!m[e]?r.excludedColor():r.getColor(t)}).attr("transform",a).attr("d",o),et.transition(t.exit(),r.transitionDuration(),r.transitionDelay()).attr("opacity",0).remove()},r.existenceAccessor=function(t){return arguments.length?(n=t,this):n},r.symbol=function(t){return arguments.length?(o.type(t),r):o.type()},r.customSymbol=function(t){return arguments.length?((o=t).size(v),r):o},r.symbolSize=function(t){return arguments.length?(u=t,r):u},r.highlightedSize=function(t){return arguments.length?(s=t,r):s},r.excludedSize=function(t){return arguments.length?(l=t,r):l},r.excludedColor=function(t){return arguments.length?(c=t,r):c},r.excludedOpacity=function(t){return arguments.length?(h=t,r):h},r.hiddenSize=r.emptySize=function(t){return arguments.length?(f=t,r):f},r.emptyColor=function(t){return arguments.length?(g=t,r):g},r.emptyOpacity=function(t){return arguments.length?(d=t,r):d},r.nonemptyOpacity=function(t){return arguments.length?(p=t,r):d},r.legendables=function(){return[{chart:r,name:r._groupName,color:r.getColor()}]},r.legendHighlight=function(e){y(function(t){return t.attr("fill")===e.color},s),r.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return tt.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},r.legendReset=function(e){y(function(t){return t.attr("fill")===e.color},u),r.chartBodyG().selectAll(".chart-body path.symbol").filter(function(){return tt.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},r.setHandlePaths=function(){},r.extendBrush=function(){var t=r.brush().extent();return r.round()&&(t[0]=t[0].map(r.round()),t[1]=t[1].map(r.round()),r.g().select(".brush").call(r.brush().extent(t))),t},r.brushIsEmpty=function(t){return r.brush().empty()||!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},r._brushing=function(){var t=r.extendBrush();if(r.redrawBrush(r.g()),r.brushIsEmpty(t))et.events.trigger(function(){r.filter(null),r.redrawGroup()});else{var e=et.filters.RangedTwoDimensionalFilter(t);et.events.trigger(function(){r.filter(null),r.filter(e),r.redrawGroup()},et.constants.EVENT_DELAY)}},r.setBrushY=function(t){t.call(r.brush().y(r.y()))},r.anchor(t,e)},et.numberDisplay=function(t,e){var n,i="number-display",r=tt.format(".2s"),o=et.baseMixin({}),a={one:"",some:"",none:""};return o._mandatoryAttributes(["group"]),o.html=function(t){return arguments.length?(t.none?a.none=t.none:t.one?a.none=t.one:t.some&&(a.none=t.some),t.one?a.one=t.one:t.some&&(a.one=t.some),t.some?a.some=t.some:t.one&&(a.some=t.one),o):a},o.value=function(){return o.data()},o.data(function(t){var e=t.value?t.value():t.top(1)[0];return o.valueAccessor()(e)}),o.transitionDuration(250),o.transitionDelay(0),o._doRender=function(){var r=o.value(),t=o.selectAll("."+i);t.empty()&&(t=t.data([0]).enter().append("span").attr("class",i)),t.transition().duration(o.transitionDuration()).delay(o.transitionDelay()).ease("quad-out-in").tween("text",function(){var t=isFinite(n)?n:0,i=tt.interpolateNumber(t||0,r);return n=r,function(t){var e=null,n=o.formatNumber()(i(t));0===r&&""!==a.none?e=a.none:1===r&&""!==a.one?e=a.one:""!==a.some&&(e=a.some),this.innerHTML=e?e.replace("%number",n):n}})},o._doRedraw=function(){return o._doRender()},o.formatNumber=function(t){return arguments.length?(r=t,o):r},o.anchor(t,e)},et.heatMap=function(t,e){var f,n,i,d=6.75,p=6.75,g=et.colorMixin(et.marginMixin(et.baseMixin({})));g._mandatoryAttributes(["group"]),g.title(g.colorAccessor());var r=function(t){return t},o=function(t){return t};g.colsLabel=function(t){return arguments.length?(r=t,g):r},g.rowsLabel=function(t){return arguments.length?(o=t,g):o};var a=function(t){l(0,t)},s=function(t){l(1,t)},u=function(t){var e=t.key;et.events.trigger(function(){g.filter(e),g.redrawGroup()})};function l(e,n){var i=g.selectAll(".box-group").filter(function(t){return t.key[e]===n}),r=i.filter(function(t){return!g.hasFilter(t.key)});et.events.trigger(function(){var t=(r.empty()?i:r).data().map(function(t){return et.filters.TwoDimensionalFilter(t.key)});g._filter([t]),g.redrawGroup()})}function c(t,e,n){return!e||n[e-1]!==t}return et.override(g,"filter",function(t){return arguments.length?g._filter(et.filters.TwoDimensionalFilter(t)):g._filter()}),g.rows=function(t){if(arguments.length)return i=t,g;if(i)return i;var e=g.data().map(g.valueAccessor());return e.sort(tt.ascending),tt.scale.ordinal().domain(e.filter(c))},g.cols=function(t){if(arguments.length)return n=t,g;if(n)return n;var e=g.data().map(g.keyAccessor());return e.sort(tt.ascending),tt.scale.ordinal().domain(e.filter(c))},g._doRender=function(){return g.resetSvg(),f=g.svg().append("g").attr("class","heatmap").attr("transform","translate("+g.margins().left+","+g.margins().top+")"),g._doRedraw()},g._doRedraw=function(){var n=g.rows(),i=g.cols(),t=n.domain().length,e=i.domain().length,r=Math.floor(g.effectiveWidth()/e),o=Math.floor(g.effectiveHeight()/t);i.rangeRoundBands([0,g.effectiveWidth()]),n.rangeRoundBands([g.effectiveHeight(),0]);var a=f.selectAll("g.box-group").data(g.data(),function(t,e){return g.keyAccessor()(t,e)+"\0"+g.valueAccessor()(t,e)}),s=a.enter().append("g").attr("class","box-group");s.append("rect").attr("class","heat-box").attr("fill","white").on("click",g.boxOnClick()),g.renderTitle()&&(s.append("title"),a.select("title").text(g.title())),et.transition(a.select("rect"),g.transitionDuration(),g.transitionDelay()).attr("x",function(t,e){return i(g.keyAccessor()(t,e))}).attr("y",function(t,e){return n(g.valueAccessor()(t,e))}).attr("rx",d).attr("ry",p).attr("fill",g.getColor).attr("width",r).attr("height",o),a.exit().remove();var u=f.select("g.cols");u.empty()&&(u=f.append("g").attr("class","cols axis"));var l=u.selectAll("text").data(i.domain());l.enter().append("text").attr("x",function(t){return i(t)+r/2}).style("text-anchor","middle").attr("y",g.effectiveHeight()).attr("dy",12).on("click",g.xAxisOnClick()).text(g.colsLabel()),et.transition(l,g.transitionDuration(),g.transitionDelay()).text(g.colsLabel()).attr("x",function(t){return i(t)+r/2}).attr("y",g.effectiveHeight()),l.exit().remove();var c=f.select("g.rows");c.empty()&&(c=f.append("g").attr("class","rows axis"));var h=c.selectAll("text").data(n.domain());return h.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",g.yAxisOnClick()).text(g.rowsLabel()),et.transition(h,g.transitionDuration(),g.transitionDelay()).text(g.rowsLabel()).attr("y",function(t){return n(t)+o/2}),h.exit().remove(),g.hasFilter()?g.selectAll("g.box-group").each(function(t){g.isSelectedNode(t)?g.highlightSelected(this):g.fadeDeselected(this)}):g.selectAll("g.box-group").each(function(){g.resetHighlight(this)}),g},g.boxOnClick=function(t){return arguments.length?(u=t,g):u},g.xAxisOnClick=function(t){return arguments.length?(a=t,g):a},g.yAxisOnClick=function(t){return arguments.length?(s=t,g):s},g.xBorderRadius=function(t){return arguments.length?(d=t,g):d},g.yBorderRadius=function(t){return arguments.length?(p=t,g):p},g.isSelectedNode=function(t){return g.hasFilter(t.key)},g.anchor(t,e)},function(){function t(t){return[0,t.length-1]}function n(t){return[tt.quantile(t,.25),tt.quantile(t,.5),tt.quantile(t,.75)]}tt.box=function(){var x=1,b=1,w=0,S=null,A=Number,T=t,P=n,C=null;function e(t){t.each(function(e,t){e=e.map(A).sort(tt.ascending);var n=tt.select(this),i=e.length,r=e[0],o=e[i-1],a=e.quartiles=P(e),s=T&&T.call(this,e,t),u=s&&s.map(function(t){return e[t]}),l=s?tt.range(0,s[0]).concat(tt.range(s[1]+1,i)):tt.range(i),c=tt.scale.linear().domain(S&&S.call(this,e,t)||[r,o]).range([b,0]),h=this.__chart__||tt.scale.linear().domain([0,1/0]).range(c.range());this.__chart__=c;var f=n.selectAll("line.center").data(u?[u]:[]);f.enter().insert("line","rect").attr("class","center").attr("x1",x/2).attr("y1",function(t){return h(t[0])}).attr("x2",x/2).attr("y2",function(t){return h(t[1])}).style("opacity",1e-6).transition().duration(w).delay(0).style("opacity",1).attr("y1",function(t){return c(t[0])}).attr("y2",function(t){return c(t[1])}),f.transition().duration(w).delay(0).style("opacity",1).attr("x1",x/2).attr("x2",x/2).attr("y1",function(t){return c(t[0])}).attr("y2",function(t){return c(t[1])}),f.exit().transition().duration(w).delay(0).style("opacity",1e-6).attr("y1",function(t){return c(t[0])}).attr("y2",function(t){return c(t[1])}).remove();var d=n.selectAll("rect.box").data([a]);d.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return h(t[2])}).attr("width",x).attr("height",function(t){return h(t[0])-h(t[2])}).transition().duration(w).delay(0).attr("y",function(t){return c(t[2])}).attr("height",function(t){return c(t[0])-c(t[2])}),d.transition().duration(w).delay(0).attr("width",x).attr("y",function(t){return c(t[2])}).attr("height",function(t){return c(t[0])-c(t[2])});var p=n.selectAll("line.median").data([a[1]]);p.enter().append("line").attr("class","median").attr("x1",0).attr("y1",h).attr("x2",x).attr("y2",h).transition().duration(w).delay(0).attr("y1",c).attr("y2",c),p.transition().duration(w).delay(0).attr("x1",0).attr("x2",x).attr("y1",c).attr("y2",c);var g=n.selectAll("line.whisker").data(u||[]);g.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",h).attr("x2",x).attr("y2",h).style("opacity",1e-6).transition().duration(w).delay(0).attr("y1",c).attr("y2",c).style("opacity",1),g.transition().duration(w).delay(0).attr("x1",0).attr("x2",x).attr("y1",c).attr("y2",c).style("opacity",1),g.exit().transition().duration(w).delay(0).attr("y1",c).attr("y2",c).style("opacity",1e-6).remove();var m=n.selectAll("circle.outlier").data(l,Number);m.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",x/2).attr("cy",function(t){return h(e[t])}).style("opacity",1e-6).transition().duration(w).delay(0).attr("cy",function(t){return c(e[t])}).style("opacity",1),m.transition().duration(w).delay(0).attr("cx",x/2).attr("cy",function(t){return c(e[t])}).style("opacity",1),m.exit().transition().duration(w).delay(0).attr("cy",function(t){return c(e[t])}).style("opacity",1e-6).remove();var v=C||c.tickFormat(8),_=n.selectAll("text.box").data(a);_.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?x:0}).attr("y",h).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(v).transition().duration(w).delay(0).attr("y",c),_.transition().duration(w).delay(0).text(v).attr("x",function(t,e){return 1&e?x:0}).attr("y",c);var y=n.selectAll("text.whisker").data(u||[]);y.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",x).attr("y",h).text(v).style("opacity",1e-6).transition().duration(w).delay(0).attr("y",c).style("opacity",1),y.transition().duration(w).delay(0).text(v).attr("x",x).attr("y",c).style("opacity",1),y.exit().transition().duration(w).delay(0).attr("y",c).style("opacity",1e-6).remove()}),tt.timer.flush()}return e.width=function(t){return arguments.length?(x=t,e):x},e.height=function(t){return arguments.length?(b=t,e):b},e.tickFormat=function(t){return arguments.length?(C=t,e):C},e.duration=function(t){return arguments.length?(w=t,e):w},e.domain=function(t){return arguments.length?(S=null===t?t:tt.functor(t),e):S},e.value=function(t){return arguments.length?(A=t,e):A},e.whiskers=function(t){return arguments.length?(T=t,e):T},e.quartiles=function(t){return arguments.length?(P=t,e):P},e}}(),et.boxPlot=function(t,e){var a,o=et.coordinateGridMixin({}),i=(a=1.5,function(t){for(var e=t.quartiles[0],n=t.quartiles[2],i=(n-e)*a,r=-1,o=t.length;t[++r]<e-i;);for(;t[--o]>n+i;);return[r,o]}),r=tt.box(),s=null,u=function(t,e){return o.isOrdinal()?o.x().rangeBand():t/(1+o.boxPadding())/e};o.yAxisPadding(12),o.x(tt.scale.ordinal()),o.xUnits(et.units.ordinal),o.data(function(t){return t.all().map(function(e){return e.map=function(t){return t.call(e,e)},e}).filter(function(t){return 0!==o.valueAccessor()(t).length})}),o.boxPadding=o._rangeBandPadding,o.boxPadding(.8),o.outerPadding=o._outerRangeBandPadding,o.outerPadding(.5),o.boxWidth=function(t){return arguments.length?(u=tt.functor(t),o):u};var l=function(t,e){return"translate("+o.x()(o.keyAccessor()(t,e))+", 0)"};return o._preprocessData=function(){o.elasticX()&&o.x().domain([])},o.plotData=function(){var t=u(o.effectiveWidth(),o.xUnitCount());r.whiskers(i).width(t).height(o.effectiveHeight()).value(o.valueAccessor()).domain(o.y().domain()).duration(o.transitionDuration()).tickFormat(s);var e,n=o.chartBodyG().selectAll("g.box").data(o.data(),o.keyAccessor());n.enter().append("g").attr("class","box").attr("transform",l).call(r).on("click",function(t){o.filter(o.keyAccessor()(t)),o.redrawGroup()}),e=n,et.transition(e,o.transitionDuration(),o.transitionDelay()).attr("transform",l).call(r).each(function(){tt.select(this).select("rect.box").attr("fill",o.getColor)}),n.exit().remove().call(r),o.fadeDeselectedArea()},o.fadeDeselectedArea=function(){if(o.hasFilter())if(o.isOrdinal())o.g().selectAll("g.box").each(function(t){o.isSelectedNode(t)?o.highlightSelected(this):o.fadeDeselected(this)});else{var t=o.brush().extent(),n=t[0],i=t[1],r=o.keyAccessor();o.g().selectAll("g.box").each(function(t){var e=r(t);e<n||i<=e?o.fadeDeselected(this):o.highlightSelected(this)})}else o.g().selectAll("g.box").each(function(){o.resetHighlight(this)})},o.isSelectedNode=function(t){return o.hasFilter(o.keyAccessor()(t))},o.yAxisMin=function(){var t=tt.min(o.data(),function(t){return tt.min(o.valueAccessor()(t))});return et.utils.subtract(t,o.yAxisPadding())},o.yAxisMax=function(){var t=tt.max(o.data(),function(t){return tt.max(o.valueAccessor()(t))});return et.utils.add(t,o.yAxisPadding())},o.tickFormat=function(t){return arguments.length?(s=t,o):s},o.anchor(t,e)},et.abstractBubbleChart=et.bubbleMixin,et.baseChart=et.baseMixin,et.capped=et.capMixin,et.colorChart=et.colorMixin,et.coordinateGridChart=et.coordinateGridMixin,et.marginable=et.marginMixin,et.stackableChart=et.stackMixin,et.d3=tt,et.crossfilter=F,et})?n.apply(exports,i):n)||(t.exports=r)},C9CvtcdF:function(t,e,n){"use strict";var i=n("A/LJ9IOU"),r="object"==typeof self&&self&&self.Object===Object&&self,o=i.a||r||Function("return this")();e.a=o},DcMooPoT:function(t,exports,e){"use strict";exports.__esModule=!0,exports.default=function(t){return(0,i.default)(n.default.findDOMNode(t))};var n=r(e("Y/FKx0zi")),i=r(e("pBgNkVlI"));function r(t){return t&&t.__esModule?t:{default:t}}t.exports=exports.default},"JZ9+tjpC":function(t,exports,e){var n=e("4I6bQT19");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("HkU00dYq")(n,i);n.locals&&(t.exports=n.locals)},Lb4uwLU2:function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"bounds",function(){return l}),n.d(i,"children",function(){return c}),n.d(i,"controlPosition",function(){return h}),n.d(i,"latlng",function(){return a}),n.d(i,"latlngList",function(){return u}),n.d(i,"layer",function(){return f}),n.d(i,"layerContainer",function(){return d}),n.d(i,"map",function(){return p}),n.d(i,"viewport",function(){return g});var s=n("boQe0+g+"),r=n("ii0bleBb"),o=n.n(r),a=o.a.oneOfType([o.a.arrayOf(o.a.number),o.a.shape({lat:o.a.number,lng:o.a.number}),o.a.shape({lat:o.a.number,lon:o.a.number})]),u=o.a.arrayOf(a),l=o.a.oneOfType([o.a.instanceOf(s.LatLngBounds),u]),c=o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]),h=o.a.oneOf(["topleft","topright","bottomleft","bottomright"]),f=o.a.object,d=o.a.shape({addLayer:o.a.func.isRequired,removeLayer:o.a.func.isRequired}),p=o.a.instanceOf(s.Map),g=o.a.shape({center:a,zoom:o.a.number}),m=n("ivGQtwpr"),v=n.n(m);function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return _(e,t),e.prototype.createLeafletElement=function(t){throw new Error("createLeafletElement() must be implemented")},e.prototype.updateLeafletElement=function(t,e){e.position!==t.position&&this.leafletElement.setPosition(e.position)},e.prototype.componentWillMount=function(){this.leafletElement=this.createLeafletElement(this.props)},e.prototype.componentDidMount=function(){this.leafletElement.addTo(this.context.map)},e.prototype.componentDidUpdate=function(t){this.updateLeafletElement(t,this.props)},e.prototype.componentWillUnmount=function(){this.leafletElement.remove()},e.prototype.render=function(){return null},e}(m.Component);y.propTypes={position:h},y.contextTypes={map:p};var x=y;function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var w=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return b(e,t),e.prototype.createLeafletElement=function(t){return new s.Control.Attribution(t)},e}(x);w.propTypes={position:h,prefix:o.a.string};var S=w,A=Array.isArray,T=n("C9CvtcdF"),P=T.a.Symbol,C=Object.prototype,L=C.hasOwnProperty,E=C.toString,k=P?P.toStringTag:void 0;var M=function(t){var e=L.call(t,k),n=t[k];try{var i=!(t[k]=void 0)}catch(t){}var r=E.call(t);return i&&(e?t[k]=n:delete t[k]),r},O=Object.prototype.toString;var R=function(t){return O.call(t)},z=P?P.toStringTag:void 0;var D=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":z&&z in Object(t)?M(t):R(t)};var I=function(t){return null!=t&&"object"==typeof t};var G=function(t){return"symbol"==typeof t||I(t)&&"[object Symbol]"==D(t)},j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/;var N=function(t,e){if(A(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!G(t))||V.test(t)||!j.test(t)||null!=e&&t in Object(e)};var B=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var F,H=function(t){if(!B(t))return!1;var e=D(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},U=T.a["__core-js_shared__"],Z=(F=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var X=function(t){return!!Z&&Z in t},Y=Function.prototype.toString;var W=function(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""},q=/^\[object .+?Constructor\]$/,Q=Function.prototype,K=Object.prototype,J=Q.toString,tt=K.hasOwnProperty,et=RegExp("^"+J.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var nt=function(t){return!(!B(t)||X(t))&&(H(t)?et:q).test(W(t))};var it=function(t,e){return null==t?void 0:t[e]};var rt=function(t,e){var n=it(t,e);return nt(n)?n:void 0},ot=rt(Object,"create");var at=function(){this.__data__=ot?ot(null):{},this.size=0};var st=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ut=Object.prototype.hasOwnProperty;var lt=function(t){var e=this.__data__;if(ot){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ut.call(e,t)?e[t]:void 0},ct=Object.prototype.hasOwnProperty;var ht=function(t){var e=this.__data__;return ot?void 0!==e[t]:ct.call(e,t)};var ft=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ot&&void 0===e?"__lodash_hash_undefined__":e,this};function dt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}dt.prototype.clear=at,dt.prototype.delete=st,dt.prototype.get=lt,dt.prototype.has=ht,dt.prototype.set=ft;var pt=dt;var gt=function(){this.__data__=[],this.size=0};var mt=function(t,e){return t===e||t!=t&&e!=e};var vt=function(t,e){for(var n=t.length;n--;)if(mt(t[n][0],e))return n;return-1},_t=Array.prototype.splice;var yt=function(t){var e=this.__data__,n=vt(e,t);return!(n<0||(n==e.length-1?e.pop():_t.call(e,n,1),--this.size,0))};var xt=function(t){var e=this.__data__,n=vt(e,t);return n<0?void 0:e[n][1]};var bt=function(t){return-1<vt(this.__data__,t)};var wt=function(t,e){var n=this.__data__,i=vt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}St.prototype.clear=gt,St.prototype.delete=yt,St.prototype.get=xt,St.prototype.has=bt,St.prototype.set=wt;var At=St,Tt=rt(T.a,"Map");var Pt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ct=function(t,e){var n=t.__data__;return Pt(e)?n["string"==typeof e?"string":"hash"]:n.map};var Lt=function(t){var e=Ct(this,t).delete(t);return this.size-=e?1:0,e};var Et=function(t){return Ct(this,t).get(t)};var kt=function(t){return Ct(this,t).has(t)};var Mt=function(t,e){var n=Ct(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function Ot(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ot.prototype.clear=function(){this.size=0,this.__data__={hash:new pt,map:new(Tt||At),string:new pt}},Ot.prototype.delete=Lt,Ot.prototype.get=Et,Ot.prototype.has=kt,Ot.prototype.set=Mt;var Rt=Ot,zt="Expected a function";function Dt(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new TypeError(zt);var a=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=a.cache;if(n.has(e))return n.get(e);var i=r.apply(this,t);return a.cache=n.set(e,i)||n,i};return a.cache=new(Dt.Cache||Rt),a}Dt.Cache=Rt;var It=Dt;var Gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/\\(\\)?/g,Vt=function(t){var e=It(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Gt,function(t,e,n,i){r.push(n?i.replace(jt,"$1"):e||t)}),r});var Nt=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},Bt=1/0,Ft=P?P.prototype:void 0,Ht=Ft?Ft.toString:void 0;var Ut=function t(e){if("string"==typeof e)return e;if(A(e))return Nt(e,t)+"";if(G(e))return Ht?Ht.call(e):"";var n=e+"";return"0"==n&&1/e==-Bt?"-0":n};var Zt=function(t){return null==t?"":Ut(t)};var Xt=function(t,e){return A(t)?t:N(t,e)?[t]:Vt(Zt(t))};var Yt=function(t){if("string"==typeof t||G(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Wt=function(t,e){for(var n=0,i=(e=Xt(e,t)).length;null!=t&&n<i;)t=t[Yt(e[n++])];return n&&n==i?t:void 0},qt=function(){try{var t=rt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Qt=function(t,e,n){"__proto__"==e&&qt?qt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Kt=Object.prototype.hasOwnProperty;var Jt=function(t,e,n){var i=t[e];Kt.call(t,e)&&mt(i,n)&&(void 0!==n||e in t)||Qt(t,e,n)},$t=/^(?:0|[1-9]\d*)$/;var te=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&$t.test(t))&&-1<t&&t%1==0&&t<e};var ee=function(t,e,n,i){if(!B(t))return t;for(var r=-1,o=(e=Xt(e,t)).length,a=o-1,s=t;null!=s&&++r<o;){var u=Yt(e[r]),l=n;if(r!=a){var c=s[u];void 0===(l=i?i(c,u,s):void 0)&&(l=B(c)?c:te(e[r+1])?[]:{})}Jt(s,u,l),s=s[u]}return t};var ne=function(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var a=e[i],s=Wt(t,a);n(s,a)&&ee(o,Xt(a,t),s)}return o};var ie=function(t,e){return null!=t&&e in Object(t)};var re=function(t){return I(t)&&"[object Arguments]"==D(t)},oe=Object.prototype,ae=oe.hasOwnProperty,se=oe.propertyIsEnumerable,ue=re(function(){return arguments}())?re:function(t){return I(t)&&ae.call(t,"callee")&&!se.call(t,"callee")};var le=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991};var ce=function(t,e,n){for(var i=-1,r=(e=Xt(e,t)).length,o=!1;++i<r;){var a=Yt(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&le(r)&&te(a,r)&&(A(t)||ue(t))};var he=function(t,e){return null!=t&&ce(t,e,ie)};var fe=function(n,t){return ne(n,t,function(t,e){return he(n,e)})};var de=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},pe=P?P.isConcatSpreadable:void 0;var ge=function(t){return A(t)||ue(t)||!!(pe&&t&&t[pe])};var me=function t(e,n,i,r,o){var a=-1,s=e.length;for(i||(i=ge),o||(o=[]);++a<s;){var u=e[a];0<n&&i(u)?1<n?t(u,n-1,i,r,o):de(o,u):r||(o[o.length]=u)}return o};var ve=function(t){return null!=t&&t.length?me(t,1):[]};var _e=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},ye=Math.max;var xe=function(o,a,s){return a=ye(void 0===a?o.length-1:a,0),function(){for(var t=arguments,e=-1,n=ye(t.length-a,0),i=Array(n);++e<n;)i[e]=t[a+e];e=-1;for(var r=Array(a+1);++e<a;)r[e]=t[e];return r[a]=s(i),_e(o,this,r)}};var be=function(t){return function(){return t}};var we=function(t){return t},Se=qt?function(t,e){return qt(t,"toString",{configurable:!0,enumerable:!1,value:be(e),writable:!0})}:we,Ae=Date.now;var Te=function(n){var i=0,r=0;return function(){var t=Ae(),e=16-(t-r);if(r=t,0<e){if(800<=++i)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}(Se);var Pe=function(t){return Te(xe(t,void 0,ve),t+"")},Ce=Pe(function(t,e){return null==t?{}:fe(t,e)});var Le=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Ee=function(t){return this.__data__.get(t)};var ke=function(t){return this.__data__.has(t)};var Me=function(t,e){var n=this.__data__;if(n instanceof At){var i=n.__data__;if(!Tt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Rt(i)}return n.set(t,e),this.size=n.size,this};function Oe(t){var e=this.__data__=new At(t);this.size=e.size}Oe.prototype.clear=function(){this.__data__=new At,this.size=0},Oe.prototype.delete=Le,Oe.prototype.get=Ee,Oe.prototype.has=ke,Oe.prototype.set=Me;var Re=Oe;var ze=function(t){return this.__data__.has(t)};function De(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Rt;++e<n;)this.add(t[e])}De.prototype.add=De.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},De.prototype.has=ze;var Ie=De;var Ge=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1};var je=function(t,e){return t.has(e)};var Ve=function(t,e,n,i,r,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&s<u))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=2&n?new Ie:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],p=e[c];if(i)var g=a?i(p,d,c,e,t,o):i(d,p,c,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!Ge(e,function(t,e){if(!je(f,e)&&(d===t||r(d,t,n,i,o)))return f.push(e)})){h=!1;break}}else if(d!==p&&!r(d,p,n,i,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Ne=T.a.Uint8Array;var Be=function(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i};var Fe=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},He=P?P.prototype:void 0,Ue=He?He.valueOf:void 0;var Ze=function(t,e,n,i,r,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Ne(t),new Ne(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return mt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Be;case"[object Set]":var u=1&i;if(s||(s=Fe),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;i|=2,a.set(t,e);var c=Ve(s(t),s(e),i,r,o,a);return a.delete(t),c;case"[object Symbol]":if(Ue)return Ue.call(t)==Ue.call(e)}return!1};var Xe=function(t,e,n){var i=e(t);return A(t)?i:de(i,n(t))};var Ye=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o};var We=function(){return[]},qe=Object.prototype.propertyIsEnumerable,Qe=Object.getOwnPropertySymbols,Ke=Qe?function(e){return null==e?[]:(e=Object(e),Ye(Qe(e),function(t){return qe.call(e,t)}))}:We;var Je=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},$e=n("uMCLUn5P"),tn={};tn["[object Float32Array]"]=tn["[object Float64Array]"]=tn["[object Int8Array]"]=tn["[object Int16Array]"]=tn["[object Int32Array]"]=tn["[object Uint8Array]"]=tn["[object Uint8ClampedArray]"]=tn["[object Uint16Array]"]=tn["[object Uint32Array]"]=!0,tn["[object Arguments]"]=tn["[object Array]"]=tn["[object ArrayBuffer]"]=tn["[object Boolean]"]=tn["[object DataView]"]=tn["[object Date]"]=tn["[object Error]"]=tn["[object Function]"]=tn["[object Map]"]=tn["[object Number]"]=tn["[object Object]"]=tn["[object RegExp]"]=tn["[object Set]"]=tn["[object String]"]=tn["[object WeakMap]"]=!1;var en=function(t){return I(t)&&le(t.length)&&!!tn[D(t)]};var nn=function(e){return function(t){return e(t)}},rn=n("2/XQkQBN"),on=rn.a&&rn.a.isTypedArray,an=on?nn(on):en,sn=Object.prototype.hasOwnProperty;var un=function(t,e){var n=A(t),i=!n&&ue(t),r=!n&&!i&&Object($e.a)(t),o=!n&&!i&&!r&&an(t),a=n||i||r||o,s=a?Je(t.length,String):[],u=s.length;for(var l in t)!e&&!sn.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||te(l,u))||s.push(l);return s},ln=Object.prototype;var cn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ln)};var hn=function(e,n){return function(t){return e(n(t))}},fn=hn(Object.keys,Object),dn=Object.prototype.hasOwnProperty;var pn=function(t){if(!cn(t))return fn(t);var e=[];for(var n in Object(t))dn.call(t,n)&&"constructor"!=n&&e.push(n);return e};var gn=function(t){return null!=t&&le(t.length)&&!H(t)};var mn=function(t){return gn(t)?un(t):pn(t)};var vn=function(t){return Xe(t,mn,Ke)},_n=Object.prototype.hasOwnProperty;var yn=function(t,e,n,i,r,o){var a=1&n,s=vn(t),u=s.length;if(u!=vn(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:_n.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++l<u;){var p=t[c=s[l]],g=e[c];if(i)var m=a?i(g,p,c,e,t,o):i(p,g,c,t,e,o);if(!(void 0===m?p===g||r(p,g,n,i,o):m)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var v=t.constructor,_=e.constructor;v!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(f=!1)}return o.delete(t),o.delete(e),f},xn=rt(T.a,"DataView"),bn=rt(T.a,"Promise"),wn=rt(T.a,"Set"),Sn=rt(T.a,"WeakMap"),An="[object Map]",Tn="[object Promise]",Pn="[object Set]",Cn="[object WeakMap]",Ln="[object DataView]",En=W(xn),kn=W(Tt),Mn=W(bn),On=W(wn),Rn=W(Sn),zn=D;(xn&&zn(new xn(new ArrayBuffer(1)))!=Ln||Tt&&zn(new Tt)!=An||bn&&zn(bn.resolve())!=Tn||wn&&zn(new wn)!=Pn||Sn&&zn(new Sn)!=Cn)&&(zn=function(t){var e=D(t),n="[object Object]"==e?t.constructor:void 0,i=n?W(n):"";if(i)switch(i){case En:return Ln;case kn:return An;case Mn:return Tn;case On:return Pn;case Rn:return Cn}return e});var Dn=zn,In="[object Arguments]",Gn="[object Array]",jn="[object Object]",Vn=Object.prototype.hasOwnProperty;var Nn=function(t,e,n,i,r,o){var a=A(t),s=A(e),u=a?Gn:Dn(t),l=s?Gn:Dn(e),c=(u=u==In?jn:u)==jn,h=(l=l==In?jn:l)==jn,f=u==l;if(f&&Object($e.a)(t)){if(!Object($e.a)(e))return!1;c=!(a=!0)}if(f&&!c)return o||(o=new Re),a||an(t)?Ve(t,e,n,i,r,o):Ze(t,e,u,n,i,r,o);if(!(1&n)){var d=c&&Vn.call(t,"__wrapped__"),p=h&&Vn.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,m=p?e.value():e;return o||(o=new Re),r(g,m,n,i,o)}}return!!f&&(o||(o=new Re),yn(t,e,n,i,r,o))};var Bn=function t(e,n,i,r,o){return e===n||(null==e||null==n||!I(e)&&!I(n)?e!=e&&n!=n:Nn(e,n,i,r,t,o))};var Fn=function(t,e){return Bn(t,e)};var Hn=function(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n};var Un=function(u){return function(t,e,n){for(var i=-1,r=Object(t),o=n(t),a=o.length;a--;){var s=o[u?a:++i];if(!1===e(r[s],s,r))break}return t}}();var Zn=function(o,a){return function(t,e){if(null==t)return t;if(!gn(t))return o(t,e);for(var n=t.length,i=a?n:-1,r=Object(t);(a?i--:++i<n)&&!1!==e(r[i],i,r););return t}}(function(t,e){return t&&Un(t,e,mn)});var Xn=function(t,e,n,i){var r=n.length,o=r,a=!i;if(null==t)return!o;for(t=Object(t);r--;){var s=n[r];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<o;){var u=(s=n[r])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new Re;if(i)var f=i(l,c,u,t,e,h);if(!(void 0===f?Bn(c,l,3,i,h):f))return!1}}return!0};var Yn=function(t){return t==t&&!B(t)};var Wn=function(t){for(var e=mn(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Yn(r)]}return e};var qn=function(e,n){return function(t){return null!=t&&t[e]===n&&(void 0!==n||e in Object(t))}};var Qn=function(e){var n=Wn(e);return 1==n.length&&n[0][2]?qn(n[0][0],n[0][1]):function(t){return t===e||Xn(t,e,n)}};var Kn=function(t,e,n){var i=null==t?void 0:Wt(t,e);return void 0===i?n:i};var Jn=function(n,i){return N(n)&&Yn(i)?qn(Yt(n),i):function(t){var e=Kn(t,n);return void 0===e&&e===i?he(t,n):Bn(i,e,3)}};var $n=function(e){return function(t){return null==t?void 0:t[e]}};var ti=function(e){return function(t){return Wt(t,e)}};var ei=function(t){return N(t)?$n(Yt(t)):ti(t)};var ni=function(t){return"function"==typeof t?t:null==t?we:"object"==typeof t?A(t)?Jn(t[0],t[1]):Qn(t):ei(t)};var ii=function(t,i,r,o,e){return e(t,function(t,e,n){r=o?(o=!1,t):i(r,t,e,n)}),r};var ri=function(t,e,n){var i=A(t)?Hn:ii,r=arguments.length<3;return i(t,ni(e,4),n,r,Zn)};var oi=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t};var ai=function(t){return"function"==typeof t?t:we};var si=function(t,e){return(A(t)?oi:Zn)(t,ai(e))};var ui=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=i?i(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),r?Qt(n,s,u):Jt(n,s,u)}return n};var li=function(t,e){return t&&ui(e,mn(e),t)};var ci=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},hi=Object.prototype.hasOwnProperty;var fi=function(t){if(!B(t))return ci(t);var e=cn(t),n=[];for(var i in t)("constructor"!=i||!e&&hi.call(t,i))&&n.push(i);return n};var di=function(t){return gn(t)?un(t,!0):fi(t)};var pi=function(t,e){return t&&ui(e,di(e),t)},gi=n("AV8abhei");var mi=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e};var vi=function(t,e){return ui(t,Ke(t),e)},_i=hn(Object.getPrototypeOf,Object),yi=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)de(e,Ke(t)),t=_i(t);return e}:We;var xi=function(t,e){return ui(t,yi(t),e)};var bi=function(t){return Xe(t,di,yi)},wi=Object.prototype.hasOwnProperty;var Si=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&wi.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var Ai=function(t){var e=new t.constructor(t.byteLength);return new Ne(e).set(new Ne(t)),e};var Ti=function(t,e){var n=e?Ai(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Pi=/\w*$/;var Ci=function(t){var e=new t.constructor(t.source,Pi.exec(t));return e.lastIndex=t.lastIndex,e},Li=P?P.prototype:void 0,Ei=Li?Li.valueOf:void 0;var ki=function(t){return Ei?Object(Ei.call(t)):{}};var Mi=function(t,e){var n=e?Ai(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Oi=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return Ai(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return Ti(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Mi(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return Ci(t);case"[object Set]":return new i;case"[object Symbol]":return ki(t)}},Ri=Object.create,zi=function(){function n(){}return function(t){if(!B(t))return{};if(Ri)return Ri(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}();var Di=function(t){return"function"!=typeof t.constructor||cn(t)?{}:zi(_i(t))};var Ii=function(t){return I(t)&&"[object Map]"==Dn(t)},Gi=rn.a&&rn.a.isMap,ji=Gi?nn(Gi):Ii;var Vi=function(t){return I(t)&&"[object Set]"==Dn(t)},Ni=rn.a&&rn.a.isSet,Bi=Ni?nn(Ni):Vi,Fi=1,Hi=2,Ui=4,Zi="[object Arguments]",Xi="[object Function]",Yi="[object GeneratorFunction]",Wi="[object Object]",qi={};qi[Zi]=qi["[object Array]"]=qi["[object ArrayBuffer]"]=qi["[object DataView]"]=qi["[object Boolean]"]=qi["[object Date]"]=qi["[object Float32Array]"]=qi["[object Float64Array]"]=qi["[object Int8Array]"]=qi["[object Int16Array]"]=qi["[object Int32Array]"]=qi["[object Map]"]=qi["[object Number]"]=qi[Wi]=qi["[object RegExp]"]=qi["[object Set]"]=qi["[object String]"]=qi["[object Symbol]"]=qi["[object Uint8Array]"]=qi["[object Uint8ClampedArray]"]=qi["[object Uint16Array]"]=qi["[object Uint32Array]"]=!0,qi["[object Error]"]=qi[Xi]=qi["[object WeakMap]"]=!1;var Qi=function n(i,r,o,t,e,a){var s,u=r&Fi,l=r&Hi,c=r&Ui;if(o&&(s=e?o(i,t,e,a):o(i)),void 0!==s)return s;if(!B(i))return i;var h=A(i);if(h){if(s=Si(i),!u)return mi(i,s)}else{var f=Dn(i),d=f==Xi||f==Yi;if(Object($e.a)(i))return Object(gi.a)(i,u);if(f==Wi||f==Zi||d&&!e){if(s=l||d?{}:Di(i),!u)return l?xi(i,pi(s,i)):vi(i,li(s,i))}else{if(!qi[f])return e?i:{};s=Oi(i,f,u)}}a||(a=new Re);var p=a.get(i);if(p)return p;if(a.set(i,s),Bi(i))return i.forEach(function(t){s.add(n(t,r,o,t,i,a))}),s;if(ji(i))return i.forEach(function(t,e){s.set(e,n(t,r,o,e,i,a))}),s;var g=c?l?bi:vn:l?keysIn:mn,m=h?void 0:g(i);return oi(m||i,function(t,e){m&&(t=i[e=t]),Jt(s,e,n(t,r,o,e,i,a))}),s};var Ki=function(t){return Qi(t,4)},Ji=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function $i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var tr=/^on(.+)$/i,er=function(i){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t,e));return n._leafletEvents={},n}return $i(r,i),r.prototype.componentWillMount=function(){this._leafletEvents=this.extractLeafletEvents(this.props)},r.prototype.componentDidMount=function(){this.bindLeafletEvents(this._leafletEvents)},r.prototype.componentWillReceiveProps=function(t){var e=this.extractLeafletEvents(t);this._leafletEvents=this.bindLeafletEvents(e,this._leafletEvents)},r.prototype.componentWillUnmount=function(){var n=this.leafletElement;n&&si(this._leafletEvents,function(t,e){n.off(e,t)})},r.prototype.extractLeafletEvents=function(i){return ri(mn(i),function(t,e){if(tr.test(e)){var n=e.replace(tr,function(t,e){return e.toLowerCase()});null!=i[e]&&(t[n]=i[e])}return t},{})},r.prototype.bindLeafletEvents=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.leafletElement;if(null==r||null==r.on)return{};var o=Ki(i);return si(i,function(t,e){n[e]&&t===n[e]||(delete o[e],r.off(e,t))}),si(n,function(t,e){i[e]&&t===i[e]||(o[e]=t,r.on(e,t))}),o},r.prototype.fireLeafletEvent=function(t,e){var n=this.leafletElement;n&&n.fire(t,e)},r.prototype.getOptions=function(t){var e=null==t.pane?this.context.pane:t.pane;return e?Ji({},t,{pane:e}):t},r}(m.Component),nr=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function ir(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var rr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return ir(e,t),e.prototype.createLeafletElement=function(t){throw new Error("createLeafletElement() must be implemented")},e.prototype.updateLeafletElement=function(t,e){},e.prototype.componentWillMount=function(){t.prototype.componentWillMount.call(this),this.leafletElement=this.createLeafletElement(this.props)},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.layerContainer.addLayer(this.leafletElement)},e.prototype.componentDidUpdate=function(t){this.updateLeafletElement(t,this.props)},e.prototype.componentWillUnmount=function(){t.prototype.componentWillUnmount.call(this),this.layerContainer.removeLayer(this.leafletElement)},e.prototype.render=function(){var t=this.props.children;return 1<m.Children.count(t)?v.a.createElement("div",{style:{display:"none"}},t):null==t?null:t},nr(e,[{key:"layerContainer",get:function(){return this.context.layerContainer||this.context.map}}]),e}(er);rr.propTypes={children:c},rr.contextTypes={layerContainer:d,map:p,pane:o.a.string};var or=rr;function ar(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var sr=["stroke","color","weight","opacity","lineCap","lineJoin","dashArray","dashOffset","fill","fillColor","fillOpacity","fillRule","bubblingMouseEvents","renderer","className","interactive","pane","attribution"],ur=function(e){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,e.apply(this,arguments))}return ar(t,e),t.prototype.componentDidUpdate=function(t){e.prototype.componentDidUpdate.call(this,t),this.setStyleIfChanged(t,this.props)},t.prototype.getChildContext=function(){return{popupContainer:this.leafletElement}},t.prototype.getPathOptions=function(t){return Ce(t,sr)},t.prototype.setStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.leafletElement.setStyle(t)},t.prototype.setStyleIfChanged=function(t,e){var n=this.getPathOptions(e);Fn(n,this.getPathOptions(t))||this.setStyle(n)},t}(or);ur.childContextTypes={children:c,popupContainer:f};var lr=ur;function cr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var hr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return cr(e,t),e.prototype.createLeafletElement=function(t){var e=t.center,n=t.radius,i=function(t,e){var n={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["center","radius"]);return new s.Circle(e,n,this.getOptions(i))},e.prototype.updateLeafletElement=function(t,e){e.center!==t.center&&this.leafletElement.setLatLng(e.center),e.radius!==t.radius&&this.leafletElement.setRadius(e.radius)},e}(lr);hr.propTypes={center:a.isRequired,children:c,radius:o.a.number.isRequired};var fr=hr;function dr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var pr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return dr(e,t),e.prototype.getChildContext=function(){return{popupContainer:this.leafletElement}},e.prototype.createLeafletElement=function(t){return new s.CircleMarker(t.center,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.center!==t.center&&this.leafletElement.setLatLng(e.center),e.radius!==t.radius&&this.leafletElement.setRadius(e.radius)},e}(lr);pr.propTypes={center:a.isRequired,children:c,radius:o.a.number},pr.childContextTypes={popupContainer:f};var gr=pr,mr=n("Y/FKx0zi"),vr=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").split(" ").filter(Boolean)},_r=function(e,t,n){null!=e&&n!==t&&(null!=t&&0<t.length&&si(vr(t),function(t){s.DomUtil.removeClass(e,t)}),null!=n&&0<n.length&&si(vr(n),function(t){s.DomUtil.addClass(e,t)}))};function yr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function xr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var br=function(o){function a(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e=yr(this,o.call.apply(o,[this].concat(i)))).onClose=function(){e.removeContent(),e.props.onClose&&e.props.onClose()},e.onOpen=function(){e.renderContent(),e.props.onOpen&&e.props.onOpen()},e.renderContent=function(){null==e.props.children?e.removeContent():Object(mr.render)(m.Children.only(e.props.children),e.leafletElement._contentNode,function(){e.leafletElement.update(),e.onRender()})},e.removeContent=function(){e.leafletElement._contentNode&&Object(mr.unmountComponentAtNode)(e.leafletElement._contentNode)},yr(e,t)}return xr(a,o),a.prototype.updateLeafletElement=function(t,e){},a.prototype.componentDidUpdate=function(t){_r(this.leafletElement._container,t.className,this.props.className),this.updateLeafletElement(t,this.props),this.leafletElement.isOpen()&&this.renderContent()},a.prototype.onRender=function(){},a.prototype.render=function(){return null},a}(er);br.propTypes={children:o.a.node,onClose:o.a.func,onOpen:o.a.func};var wr=br;function Sr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Ar=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Sr(e,t),e.prototype.getChildContext=function(){return{layerContainer:this.leafletElement,popupContainer:this.leafletElement}},e.prototype.createLeafletElement=function(t){return new s.FeatureGroup(this.getOptions(t))},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),this.setStyle(this.props)},e}(lr);Ar.childContextTypes={children:c,layerContainer:d,popupContainer:f};var Tr=Ar;function Pr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Cr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Pr(e,t),e.prototype.createLeafletElement=function(t){return new s.GeoJSON(t.data,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){H(e.style)?this.setStyle(e.style):this.setStyleIfChanged(t,e)},e}(lr);Cr.propTypes={children:c,data:o.a.oneOfType([o.a.array,o.a.object]).isRequired};var Lr=Cr;function Er(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var kr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Er(e,t),e.prototype.createLeafletElement=function(t){return new s.GridLayer(this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){var n=e.opacity,i=e.zIndex;n!==t.opacity&&this.leafletElement.setOpacity(n),i!==t.zIndex&&this.leafletElement.setZIndex(i)},e.prototype.render=function(){return null},e}(or);kr.propTypes={children:c,opacity:o.a.number,zIndex:o.a.number};var Mr=kr;function Or(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Rr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Or(e,t),e.prototype.getChildContext=function(){return{popupContainer:this.leafletElement}},e.prototype.createLeafletElement=function(t){return new s.ImageOverlay(t.url,t.bounds,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.url!==t.url&&this.leafletElement.setUrl(e.url),e.bounds!==t.bounds&&this.leafletElement.setBounds(Object(s.latLngBounds)(e.bounds)),e.opacity!==t.opacity&&this.leafletElement.setOpacity(e.opacity),e.zIndex!==t.zIndex&&this.leafletElement.setZIndex(e.zIndex)},e}(or);Rr.propTypes={attribution:o.a.string,bounds:l.isRequired,children:c,opacity:o.a.number,url:o.a.oneOfType([o.a.string,o.a.instanceOf(HTMLImageElement)]).isRequired,zIndex:o.a.number},Rr.childContextTypes={popupContainer:f};var zr=Rr;function Dr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Ir=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Dr(e,t),e.prototype.getChildContext=function(){return{layerContainer:this.leafletElement}},e.prototype.createLeafletElement=function(){return new s.LayerGroup(this.getOptions(this.props))},e}(or);Ir.childContextTypes={layerContainer:d};var Gr=Ir,jr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function Vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nr(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Br(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Fr={checked:o.a.bool,children:o.a.node.isRequired,removeLayer:o.a.func,removeLayerControl:o.a.func},Hr=jr({},Fr,{addBaseLayer:o.a.func,addOverlay:o.a.func,name:o.a.string.isRequired}),Ur=function(t){function e(){return Vr(this,e),Nr(this,t.apply(this,arguments))}return Br(e,t),e.prototype.getChildContext=function(){return{layerContainer:{addLayer:this.addLayer.bind(this),removeLayer:this.removeLayer.bind(this)}}},e.prototype.componentWillReceiveProps=function(t){var e=t.checked;!0!==e||null!=this.props.checked&&!1!==this.props.checked?!0!==this.props.checked||null!=e&&!1!==e||this.context.map.removeLayer(this.layer):this.context.map.addLayer(this.layer)},e.prototype.componentWillUnmount=function(){this.props.removeLayerControl(this.layer)},e.prototype.addLayer=function(){throw new Error("Must be implemented in extending class")},e.prototype.removeLayer=function(t){this.props.removeLayer(t)},e.prototype.render=function(){return this.props.children||null},e}(m.Component);Ur.propTypes=Fr,Ur.contextTypes={map:p},Ur.childContextTypes={layerContainer:d};var Zr=function(t){function e(){return Vr(this,e),Nr(this,t.apply(this,arguments))}return Br(e,t),e.prototype.addLayer=function(t){this.layer=t;var e=this.props,n=e.addBaseLayer,i=e.checked;n(t,e.name,i)},e}(Ur);Zr.propTypes=Hr;var Xr=function(t){function e(){return Vr(this,e),Nr(this,t.apply(this,arguments))}return Br(e,t),e.prototype.addLayer=function(t){this.layer=t;var e=this.props,n=e.addOverlay,i=e.checked;n(t,e.name,i)},e}(Ur);Xr.propTypes=Hr;var Yr=function(e){function t(){return Vr(this,t),Nr(this,e.apply(this,arguments))}return Br(t,e),t.prototype.createLeafletElement=function(t){t.children;var e=function(t,e){var n={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["children"]);return new s.Control.Layers(void 0,void 0,e)},t.prototype.componentWillMount=function(){e.prototype.componentWillMount.call(this),this.controlProps={addBaseLayer:this.addBaseLayer.bind(this),addOverlay:this.addOverlay.bind(this),removeLayer:this.removeLayer.bind(this),removeLayerControl:this.removeLayerControl.bind(this)}},t.prototype.componentWillUnmount=function(){var t=this;setTimeout(function(){e.prototype.componentWillUnmount.call(t)},0)},t.prototype.addBaseLayer=function(t,e){2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&this.context.map.addLayer(t),this.leafletElement.addBaseLayer(t,e)},t.prototype.addOverlay=function(t,e){2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&this.context.map.addLayer(t),this.leafletElement.addOverlay(t,e)},t.prototype.removeLayer=function(t){this.context.map.removeLayer(t)},t.prototype.removeLayerControl=function(t){this.leafletElement.removeLayer(t)},t.prototype.render=function(){var e=this,t=m.Children.map(this.props.children,function(t){return t?Object(m.cloneElement)(t,e.controlProps):null});return v.a.createElement("div",{style:{display:"none"}},t)},t}(x);Yr.propTypes={baseLayers:o.a.object,children:c,overlays:o.a.object,position:h},Yr.contextTypes={layerContainer:d,map:p};var Wr=Yr;Yr.BaseLayer=Zr,Yr.Overlay=Xr;var qr=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var Qr=function(t,e,n){var i=-1,r=t.length;e<0&&(e=r<-e?0:r+e),(n=r<n?r:n)<0&&(n+=r),r=n<e?0:n-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=t[i+e];return o};var Kr=function(t,e){return e.length<2?t:Wt(t,Qr(e,0,-1))};var Jr=function(t,e){return e=Xt(e,t),null==(t=Kr(t,e))||delete t[Yt(qr(e))]},$r=Function.prototype,to=Object.prototype,eo=$r.toString,no=to.hasOwnProperty,io=eo.call(Object);var ro=function(t){if(!I(t)||"[object Object]"!=D(t))return!1;var e=_i(t);if(null===e)return!0;var n=no.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&eo.call(n)==io};var oo=function(t){return ro(t)?void 0:t},ao=Pe(function(e,t){var n={};if(null==e)return n;var i=!1;t=Nt(t,function(t){return t=Xt(t,e),i||(i=1<t.length),t}),ui(e,bi(e),n),i&&(n=Qi(n,7,oo));for(var r=t.length;r--;)Jr(n,t[r]);return n});var so=function(t){return void 0===t};function uo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var lo=["children","className","id","style","useFlyTo","whenReady"],co=function(t){return Array.isArray(t)?[t[0],t[1]]:[t.lat,t.lon?t.lon:t.lng]},ho=function(i){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t,e));return n.viewport={center:void 0,zoom:void 0},n._updating=!1,n.onViewportChange=function(){var t=n.leafletElement.getCenter();n.viewport={center:t?[t.lat,t.lng]:void 0,zoom:n.leafletElement.getZoom()},n.props.onViewportChange&&!n._updating&&n.props.onViewportChange(n.viewport)},n.onViewportChanged=function(){n.props.onViewportChanged&&!n._updating&&n.props.onViewportChanged(n.viewport)},n.bindContainer=function(t){n.container=t},n.className=t.className,n}return uo(r,i),r.prototype.getChildContext=function(){return{layerContainer:this.leafletElement,map:this.leafletElement}},r.prototype.createLeafletElement=function(t){var e=t.viewport,n=function(t,e){var n={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["viewport"]);return e&&(e.center&&(n.center=e.center),"number"==typeof e.zoom&&(n.zoom=e.zoom)),new s.Map(this.container,n)},r.prototype.updateLeafletElement=function(t,e){this._updating=!0;var n=e.animate,i=e.bounds,r=e.boundsOptions,o=e.boxZoom,a=e.center,s=e.className,u=e.doubleClickZoom,l=e.dragging,c=e.keyboard,h=e.maxBounds,f=e.scrollWheelZoom,d=e.tap,p=e.touchZoom,g=e.useFlyTo,m=e.viewport,v=e.zoom;if(_r(this.container,t.className,s),m&&m!==t.viewport){var _=m.center?m.center:a,y=null==m.zoom?v:m.zoom;!0===g?this.leafletElement.flyTo(_,y,{animate:n}):this.leafletElement.setView(_,y,{animate:n})}else a&&this.shouldUpdateCenter(a,t.center)?!0===g?this.leafletElement.flyTo(a,v,{animate:n}):this.leafletElement.setView(a,v,{animate:n}):"number"==typeof v&&v!==t.zoom&&(null==t.zoom?this.leafletElement.setView(a,v):this.leafletElement.setZoom(v));h&&this.shouldUpdateBounds(h,t.maxBounds)&&this.leafletElement.setMaxBounds(h),i&&(this.shouldUpdateBounds(i,t.bounds)||r!==t.boundsOptions)&&(!0===g?this.leafletElement.flyToBounds(i,r):this.leafletElement.fitBounds(i,r)),o!==t.boxZoom&&(!0===o?this.leafletElement.boxZoom.enable():this.leafletElement.boxZoom.disable()),u!==t.doubleClickZoom&&(!0===u?this.leafletElement.doubleClickZoom.enable():this.leafletElement.doubleClickZoom.disable()),l!==t.dragging&&(!0===l?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable()),c!==t.keyboard&&(!0===c?this.leafletElement.keyboard.enable():this.leafletElement.keyboard.disable()),f!==t.scrollWheelZoom&&(!0===f||"string"==typeof f?(this.leafletElement.options.scrollWheelZoom=f,this.leafletElement.scrollWheelZoom.enable()):this.leafletElement.scrollWheelZoom.disable()),d!==t.tap&&(!0===d?this.leafletElement.tap.enable():this.leafletElement.tap.disable()),p!==t.touchZoom&&(!0===p||"string"==typeof p?(this.leafletElement.options.touchZoom=p,this.leafletElement.touchZoom.enable()):this.leafletElement.touchZoom.disable()),this._updating=!1},r.prototype.componentDidMount=function(){var t=ao(this.props,lo);this.leafletElement=this.createLeafletElement(t),this.leafletElement.on("move",this.onViewportChange),this.leafletElement.on("moveend",this.onViewportChanged),so(t.bounds)||this.leafletElement.fitBounds(t.bounds,t.boundsOptions),this.props.whenReady&&this.leafletElement.whenReady(this.props.whenReady),i.prototype.componentDidMount.call(this),this.forceUpdate()},r.prototype.componentDidUpdate=function(t){this.updateLeafletElement(t,this.props)},r.prototype.componentWillUnmount=function(){i.prototype.componentWillUnmount.call(this),this.leafletElement.off("move",this.onViewportChange),this.leafletElement.off("moveend",this.onViewportChanged),!0===this.props.preferCanvas?(this.leafletElement._initEvents(!0),this.leafletElement._stop()):this.leafletElement.remove()},r.prototype.shouldUpdateCenter=function(t,e){return!e||(t=co(t),e=co(e),t[0]!==e[0]||t[1]!==e[1])},r.prototype.shouldUpdateBounds=function(t,e){return!e||!Object(s.latLngBounds)(t).equals(Object(s.latLngBounds)(e))},r.prototype.render=function(){var t=this.leafletElement?this.props.children:null;return v.a.createElement("div",{className:this.className,id:this.props.id,ref:this.bindContainer,style:this.props.style},t)},r}(er);ho.propTypes={animate:o.a.bool,bounds:l,boundsOptions:o.a.object,center:a,children:c,className:o.a.string,id:o.a.string,maxBounds:l,maxZoom:o.a.number,minZoom:o.a.number,style:o.a.object,useFlyTo:o.a.bool,viewport:g,whenReady:o.a.func,zoom:o.a.number},ho.childContextTypes={layerContainer:d,map:p};var fo=ho;function po(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var go=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return po(e,t),e.prototype.getChildContext=function(){return{popupContainer:this.leafletElement}},e.prototype.createLeafletElement=function(t){return new s.Marker(t.position,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.position!==t.position&&this.leafletElement.setLatLng(e.position),e.icon!==t.icon&&this.leafletElement.setIcon(e.icon),e.zIndexOffset!==t.zIndexOffset&&this.leafletElement.setZIndexOffset(e.zIndexOffset),e.opacity!==t.opacity&&this.leafletElement.setOpacity(e.opacity),e.draggable!==t.draggable&&(!0===e.draggable?this.leafletElement.dragging.enable():this.leafletElement.dragging.disable())},e}(or);go.propTypes={children:c,draggable:o.a.bool,icon:o.a.instanceOf(s.Icon),opacity:o.a.number,position:a.isRequired,zIndexOffset:o.a.number},go.childContextTypes={popupContainer:f};var mo=go,vo=0;var _o=function(t){var e=++vo;return Zt(t)+e};n("f4eLuV7G");function yo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function xo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var bo=["tile","shadow","overlay","map","marker","tooltip","popup"],wo={position:"absolute",top:0,right:0,bottom:0,left:0},So=function(o){function a(){var t,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(t=r=yo(this,o.call.apply(o,[this].concat(n)))).state={name:void 0},r.setStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.props,e=t.style,n=t.className,i=r.getPane(r.state.name);i&&(n&&i.classList.add(n),e&&si(e,function(t,e){i.style[e]=t}))},yo(r,t)}return xo(a,o),a.prototype.getChildContext=function(){return{pane:this.state.name}},a.prototype.componentDidMount=function(){this.createPane(this.props)},a.prototype.componentWillReceiveProps=function(t){if(this.state.name)if(t.name!==this.props.name)this.removePane(),this.createPane(t);else{if(this.props.className&&t.className!==this.props.className){var e=this.getPane();e&&this.props.className&&e.classList.remove(this.props.className)}this.setStyle(t)}},a.prototype.componentWillUnmount=function(){this.removePane()},a.prototype.createPane=function(t){var e,n=this.context.map,i=t.name||"pane-"+_o();if(n&&n.createPane){var r=(e=i,-1!==bo.indexOf(e.replace(/-*pane/gi,"")));if(r||this.getPane(i));else n.createPane(i,this.getParentPane());this.setState({name:i},this.setStyle)}},a.prototype.removePane=function(){var t=this.state.name;if(t){var e=this.getPane(t);e&&e.remove&&e.remove();var n=this.context.map;n&&n._panes&&(n._panes=ao(n._panes,t),n._paneRenderers=ao(n._paneRenderers,t)),this.setState({name:void 0})}},a.prototype.getParentPane=function(){return this.getPane(this.props.pane||this.context.pane)},a.prototype.getPane=function(t){return t?this.context.map.getPane(t):void 0},a.prototype.render=function(){return this.state.name?v.a.createElement("div",{style:wo},this.props.children):null},a}(m.Component);So.propTypes={name:o.a.string,children:c,map:p,className:o.a.string,style:o.a.object,pane:o.a.string},So.contextTypes={map:p,pane:o.a.string},So.childContextTypes={pane:o.a.string};var Ao=So;function To(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Po=o.a.arrayOf(u),Co=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return To(e,t),e.prototype.createLeafletElement=function(t){return new s.Polygon(t.positions,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.positions!==t.positions&&this.leafletElement.setLatLngs(e.positions),this.setStyleIfChanged(t,e)},e}(lr);Co.propTypes={children:c,positions:o.a.oneOfType([u,Po,o.a.arrayOf(Po)]).isRequired};var Lo=Co;function Eo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var ko=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Eo(e,t),e.prototype.createLeafletElement=function(t){return new s.Polyline(t.positions,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.positions!==t.positions&&this.leafletElement.setLatLngs(e.positions),this.setStyleIfChanged(t,e)},e}(lr);ko.propTypes={children:c,positions:o.a.oneOfType([u,o.a.arrayOf(u)]).isRequired};var Mo=ko,Oo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function Ro(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function zo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Do=function(o){function a(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e=Ro(this,o.call.apply(o,[this].concat(i)))).onPopupOpen=function(t){t.popup===e.leafletElement&&e.onOpen()},e.onPopupClose=function(t){t.popup===e.leafletElement&&e.onClose()},e.onRender=function(){!1!==e.props.autoPan&&e.leafletElement.isOpen()&&(e.leafletElement._map&&e.leafletElement._map._panAnim&&(e.leafletElement._map._panAnim=void 0),e.leafletElement._adjustPan())},Ro(e,t)}return zo(a,o),a.prototype.getOptions=function(t){return Oo({},o.prototype.getOptions.call(this,t),{autoPan:!1})},a.prototype.createLeafletElement=function(t){return new s.Popup(this.getOptions(t),this.context.popupContainer)},a.prototype.updateLeafletElement=function(t,e){e.position!==t.position&&this.leafletElement.setLatLng(e.position)},a.prototype.componentWillMount=function(){o.prototype.componentWillMount.call(this),this.leafletElement=this.createLeafletElement(this.props),this.leafletElement.options.autoPan=!1!==this.props.autoPan,this.context.map.on({popupopen:this.onPopupOpen,popupclose:this.onPopupClose})},a.prototype.componentDidMount=function(){var t=this.props.position,e=this.context,n=e.map,i=e.popupContainer,r=this.leafletElement;i?i.bindPopup(r):(t&&r.setLatLng(t),r.openOn(n))},a.prototype.componentWillUnmount=function(){this.removeContent(),this.context.map.off({popupopen:this.onPopupOpen,popupclose:this.onPopupClose}),this.context.map.removeLayer(this.leafletElement),o.prototype.componentWillUnmount.call(this)},a}(wr);Do.propTypes={children:o.a.node,onClose:o.a.func,onOpen:o.a.func,position:a},Do.contextTypes={map:p,popupContainer:f,pane:o.a.string},Do.defaultProps={pane:"popupPane"};var Io=Do;function Go(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var jo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Go(e,t),e.prototype.createLeafletElement=function(t){return new s.Rectangle(t.bounds,this.getOptions(t))},e.prototype.updateLeafletElement=function(t,e){e.bounds!==t.bounds&&this.leafletElement.setBounds(e.bounds),this.setStyleIfChanged(t,e)},e}(lr);jo.propTypes={children:c,bounds:l.isRequired};var Vo=jo;function No(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Bo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return No(e,t),e.prototype.createLeafletElement=function(t){return new s.Control.Scale(t)},e}(x);Bo.propTypes={imperial:o.a.bool,maxWidth:o.a.number,metric:o.a.bool,position:h,updateWhenIdle:o.a.bool};var Fo=Bo;function Ho(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Uo=function(n){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.apply(this,arguments))}return Ho(t,n),t.prototype.createLeafletElement=function(t){return new s.TileLayer(t.url,this.getOptions(t))},t.prototype.updateLeafletElement=function(t,e){n.prototype.updateLeafletElement.call(this,t,e),e.url!==t.url&&this.leafletElement.setUrl(e.url)},t}(Mr);Uo.propTypes={children:c,opacity:o.a.number,url:o.a.string.isRequired,zIndex:o.a.number};var Zo=Uo;function Xo(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Yo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Wo=function(o){function a(){var t,e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e=Xo(this,o.call.apply(o,[this].concat(i)))).onTooltipOpen=function(t){t.tooltip===e.leafletElement&&e.onOpen()},e.onTooltipClose=function(t){t.tooltip===e.leafletElement&&e.onClose()},Xo(e,t)}return Yo(a,o),a.prototype.createLeafletElement=function(t){return new s.Tooltip(this.getOptions(t),this.context.popupContainer)},a.prototype.componentWillMount=function(){o.prototype.componentWillMount.call(this),this.leafletElement=this.createLeafletElement(this.props),this.context.popupContainer.on({tooltipopen:this.onTooltipOpen,tooltipclose:this.onTooltipClose})},a.prototype.componentDidMount=function(){this.context.popupContainer.bindTooltip(this.leafletElement)},a.prototype.componentWillUnmount=function(){var t=this.context.popupContainer;this.removeContent(),t.off({tooltipopen:this.onTooltipOpen,tooltipclose:this.onTooltipClose}),null!=t._map&&t.unbindTooltip(this.leafletElement),o.prototype.componentWillUnmount.call(this)},a}(wr);Wo.propTypes={children:o.a.node,onClose:o.a.func,onOpen:o.a.func},Wo.contextTypes={map:p,popupContainer:f,pane:o.a.string},Wo.defaultProps={pane:"tooltipPane"};var qo=Wo;function Qo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var Ko=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return Qo(e,t),e.prototype.createLeafletElement=function(t){return new s.VideoOverlay(t.url,t.bounds,this.getOptions(t))},e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this),!0===this.props.play&&this.leafletElement.getElement().play()},e.prototype.updateLeafletElement=function(t,e){e.url!==t.url&&this.leafletElement.setUrl(e.url),e.bounds!==t.bounds&&this.leafletElement.setBounds(Object(s.latLngBounds)(e.bounds)),e.opacity!==t.opacity&&this.leafletElement.setOpacity(e.opacity),e.zIndex!==t.zIndex&&this.leafletElement.setZIndex(e.zIndex),!0!==e.play||t.play?e.play||!0!==t.play||this.leafletElement.getElement().pause():this.leafletElement.getElement().play()},e}(or);Ko.propTypes={attribution:o.a.string,bounds:l.isRequired,opacity:o.a.number,play:o.a.bool,url:o.a.oneOfType([o.a.string,o.a.arrayOf(o.a.string),o.a.instanceOf(HTMLVideoElement)]).isRequired,zIndex:o.a.number};var Jo=Ko;function $o(t,e){var n={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function ta(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var ea=function(a){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.apply(this,arguments))}return ta(t,a),t.prototype.createLeafletElement=function(t){var e=t.url,n=$o(t,["url"]);return new s.TileLayer.WMS(e,this.getOptions(n))},t.prototype.updateLeafletElement=function(t,e){a.prototype.updateLeafletElement.call(this,t,e);var n=t.url,i=(t.opacity,t.zIndex,$o(t,["url","opacity","zIndex"])),r=e.url,o=(e.opacity,e.zIndex,$o(e,["url","opacity","zIndex"]));r!==n&&this.leafletElement.setUrl(r),Fn(o,i)||this.leafletElement.setParams(o)},t.prototype.getOptions=function(t){return ri(a.prototype.getOptions.call(this,t),function(t,e,n){return tr.test(n)||(t[n]=e),t},{})},t}(Mr);ea.propTypes={children:c,opacity:o.a.number,url:o.a.string.isRequired,zIndex:o.a.number};var na=ea;function ia(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),i=0;i<n.length;i++){var r=n[i],o=Object.getOwnPropertyDescriptor(e,r);o&&o.configurable&&void 0===t[r]&&Object.defineProperty(t,r,o)}}(t,e))}var ra=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return ia(e,t),e.prototype.createLeafletElement=function(t){return new s.Control.Zoom(t)},e}(x);ra.propTypes={position:h,zoomInText:o.a.string,zoomInTitle:o.a.string,zoomOutText:o.a.string,zoomOutTitle:o.a.string};var oa=ra;n.d(e,"PropTypes",function(){return i}),n.d(e,"AttributionControl",function(){return S}),n.d(e,"Circle",function(){return fr}),n.d(e,"CircleMarker",function(){return gr}),n.d(e,"DivOverlay",function(){return wr}),n.d(e,"FeatureGroup",function(){return Tr}),n.d(e,"GeoJSON",function(){return Lr}),n.d(e,"GridLayer",function(){return Mr}),n.d(e,"ImageOverlay",function(){return zr}),n.d(e,"LayerGroup",function(){return Gr}),n.d(e,"LayersControl",function(){return Wr}),n.d(e,"Map",function(){return fo}),n.d(e,"MapComponent",function(){return er}),n.d(e,"MapControl",function(){return x}),n.d(e,"MapLayer",function(){return or}),n.d(e,"Marker",function(){return mo}),n.d(e,"Pane",function(){return Ao}),n.d(e,"Path",function(){return lr}),n.d(e,"Polygon",function(){return Lo}),n.d(e,"Polyline",function(){return Mo}),n.d(e,"Popup",function(){return Io}),n.d(e,"Rectangle",function(){return Vo}),n.d(e,"ScaleControl",function(){return Fo}),n.d(e,"TileLayer",function(){return Zo}),n.d(e,"Tooltip",function(){return qo}),n.d(e,"VideoOverlay",function(){return Jo}),n.d(e,"WMSTileLayer",function(){return na}),n.d(e,"ZoomControl",function(){return oa})},MNGAHOYH:function(t,exports){t.exports=function(){throw new Error("define cannot be used indirect")}},"NFIOG/dB":function(t,exports,e){(t.exports=e("wTjlWjHz")(!1)).push([t.i,".c3 svg{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3 line,.c3 path{fill:none;stroke:#000}.c3 text{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-bars path,.c3-event-rect,.c3-legend-item-tile,.c3-xgrid-focus,.c3-ygrid{shape-rendering:crispEdges}.c3-chart-arc path{stroke:#fff}.c3-chart-arc rect{stroke:#fff;stroke-width:1}.c3-chart-arc text{fill:#fff;font-size:13px}.c3-grid line{stroke:#aaa}.c3-grid text{fill:#aaa}.c3-xgrid,.c3-ygrid{stroke-dasharray:3 3}.c3-text.c3-empty{fill:gray;font-size:2em}.c3-line{stroke-width:1px}.c3-circle._expanded_{stroke-width:1px;stroke:#fff}.c3-selected-circle{fill:#fff;stroke-width:2px}.c3-bar{stroke-width:0}.c3-bar._expanded_{fill-opacity:1;fill-opacity:.75}.c3-target.c3-focused{opacity:1}.c3-target.c3-focused path.c3-line,.c3-target.c3-focused path.c3-step{stroke-width:2px}.c3-target.c3-defocused{opacity:.3!important}.c3-region{fill:#4682b4;fill-opacity:.1}.c3-brush .extent{fill-opacity:.1}.c3-legend-item{font-size:12px}.c3-legend-item-hidden{opacity:.15}.c3-legend-background{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title{font:14px sans-serif}.c3-tooltip-container{z-index:10}.c3-tooltip{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;-webkit-box-shadow:7px 7px 12px -9px #777;-moz-box-shadow:7px 7px 12px -9px #777;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip tr{border:1px solid #ccc}.c3-tooltip th{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#fff}.c3-tooltip td{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip td>span{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip td.value{text-align:right}.c3-area{stroke-width:0;opacity:.2}.c3-chart-arcs-title{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs .c3-chart-arcs-background{fill:#e0e0e0;stroke:#fff}.c3-chart-arcs .c3-chart-arcs-gauge-unit{fill:#000;font-size:16px}.c3-chart-arcs .c3-chart-arcs-gauge-max,.c3-chart-arcs .c3-chart-arcs-gauge-min{fill:#777}.c3-chart-arc .c3-gauge-value{fill:#000}.c3-chart-arc.c3-target.c3-focused g path,.c3-chart-arc.c3-target g path{opacity:1}",""])},QDRgAkog:function(t,exports,e){var n=e("hq3wPd23");(t.exports=e("wTjlWjHz")(!1)).push([t.i,".leaflet-image-layer,.leaflet-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane,.leaflet-pane>canvas,.leaflet-pane>svg,.leaflet-tile,.leaflet-tile-container,.leaflet-zoom-box{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile{-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer{max-width:none!important;max-height:none!important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51,181,229,.4)}.leaflet-tile{filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-bottom,.leaflet-top{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;transition:opacity .2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{will-change:transform;-webkit-transition:-webkit-transform .25s cubic-bezier(0,0,.25,1);-moz-transition:-moz-transform .25s cubic-bezier(0,0,.25,1);transition:transform .25s cubic-bezier(0,0,.25,1)}.leaflet-pan-anim .leaflet-tile,.leaflet-zoom-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-control,.leaflet-popup-pane{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-image-layer,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-image-layer.leaflet-interactive,.leaflet-marker-icon.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078a8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:hsla(0,0%,100%,.5)}.leaflet-container{font:12px/1.5 Helvetica Neue,Arial,Helvetica,sans-serif}.leaflet-bar{box-shadow:0 1px 5px rgba(0,0,0,.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:#000}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:700 18px Lucida Console,Monaco,monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{box-shadow:0 1px 5px rgba(0,0,0,.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url("+n(e("6iWVrsf8"))+");width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url("+n(e("hLQulRdj"))+");background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers-expanded .leaflet-control-layers-toggle,.leaflet-control-layers .leaflet-control-layers-list{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url("+n(e("/XTO1Lxl"))+')}.leaflet-container .leaflet-control-attribution{background:#fff;background:hsla(0,0%,100%,.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;background:hsla(0,0%,100%,.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers{box-shadow:none}.leaflet-touch .leaflet-bar,.leaflet-touch .leaflet-control-layers{border:2px solid rgba(0,0,0,.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:#fff;color:#333;box-shadow:0 3px 14px rgba(0,0,0,.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;border:none;text-align:center;width:18px;height:14px;font:16px/14px Tahoma,Verdana,sans-serif;color:#c3c3c3;text-decoration:none;font-weight:700;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678,M12=0.70710678,M21=-0.70710678,M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;box-shadow:0 1px 3px rgba(0,0,0,.4)}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before,.leaflet-tooltip-top:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:""}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}',""])},TivnP0t5:function(t,exports,e){t.exports=e("UjNE15Zy").crossfilter},UdiOqQpn:function(t,exports,e){var n=e("NFIOG/dB");"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("HkU00dYq")(n,i);n.locals&&(t.exports=n.locals)},UjNE15Zy:function(t,exports,e){!function(exports){function F(t){return t}function P(t,e){for(var n=0,i=e.length,r=new Array(i);n<i;++n)r[n]=t[e[n]];return r}s.version="1.3.12",s.permute=P;var C=s.bisect=t(F);function t(o){function t(t,e,n,i){for(;n<i;){var r=n+i>>>1;e<o(t[r])?i=r:n=r+1}return n}return(t.right=t).left=function(t,e,n,i){for(;n<i;){var r=n+i>>>1;o(t[r])<e?n=r+1:i=r}return n},t}function H(s){function t(t,e,n){for(var i=n-e,r=1+(i>>>1);0<--r;)o(t,r,i,e);return t}function o(t,e,n,i){for(var r,o=t[--i+e],a=s(o);(r=e<<1)<=n&&(r<n&&s(t[i+r])>s(t[i+r+1])&&r++,!(a<=s(t[i+r])));)t[i+e]=t[i+r],e=r;t[i+e]=o}return t.sort=function(t,e,n){for(var i,r=n-e;0<--r;)i=t[e],t[e]=t[e+r],t[e+r]=i,o(t,1,r,e);return t},t}function U(u){var l=H(u);return function(t,e,n,i){var r,o,a,s=new Array(i=Math.min(n-e,i));for(o=0;o<i;++o)s[o]=t[e++];if(l(s,0,i),e<n)for(r=u(s[0]);u(a=t[e])>r&&(s[0]=a,r=u(l(s,0,i)[0])),++e<n;);return s}}function e(s){return function(t,e,n){for(var i=e+1;i<n;++i){for(var r=i,o=t[i],a=s(o);e<r&&s(t[r-1])>a;--r)t[r]=t[r-1];t[r]=o}return t}}function L(O){var i=e(O);function R(t,e,n){return(n-e<r?i:function(t,e,n){var i,r=(n-e)/6|0,o=e+r,a=n-1-r,s=e+n-1>>1,u=s-r,l=s+r,c=t[o],h=O(c),f=t[u],d=O(f),p=t[s],g=O(p),m=t[l],v=O(m),_=t[a],y=O(_);d<h&&(i=c,c=f,f=i,i=h,h=d,d=i);y<v&&(i=m,m=_,_=i,i=v,v=y,y=i);g<h&&(i=c,c=p,p=i,i=h,h=g,g=i);g<d&&(i=f,f=p,p=i,i=d,d=g,g=i);v<h&&(i=c,c=m,m=i,i=h,h=v,v=i);v<g&&(i=p,p=m,m=i,i=g,g=v,v=i);y<d&&(i=f,f=_,_=i,i=d,d=y,y=i);g<d&&(i=f,f=p,p=i,i=d,d=g,g=i);y<v&&(i=m,m=_,_=i,i=v,v=y,y=i);var x=f,b=d,w=m,S=v;t[o]=c,t[u]=t[e],t[s]=p,t[l]=t[n-1],t[a]=_;var A=e+1,T=n-2,P=b<=S&&S<=b;if(P)for(var C=A;C<=T;++C){var L=t[C],E=O(L);if(E<b)C!==A&&(t[C]=t[A],t[A]=L),++A;else if(b<E)for(;;){var k=O(t[T]);if(!(b<k)){if(k<b){t[C]=t[A],t[A++]=t[T],t[T--]=L;break}t[C]=t[T],t[T--]=L;break}T--}}else for(var C=A;C<=T;C++){var L=t[C],E=O(L);if(E<b)C!==A&&(t[C]=t[A],t[A]=L),++A;else if(S<E)for(;;){var k=O(t[T]);if(!(S<k)){t[T--]=(k<b?(t[C]=t[A],t[A++]=t[T]):t[C]=t[T],L);break}if(--T<C)break}}if(t[e]=t[A-1],t[A-1]=x,t[n-1]=t[T+1],t[T+1]=w,R(t,e,A-1),R(t,T+2,n),P)return t;if(A<o&&a<T){for(var M;(M=O(t[A]))<=b&&b<=M;)++A;for(;(k=O(t[T]))<=S&&S<=k;)--T;for(var C=A;C<=T;C++){var L=t[C],E=O(L);if(E<=b&&b<=E)C!==A&&(t[C]=t[A],t[A]=L),A++;else if(E<=S&&S<=E)for(;;){var k=O(t[T]);if(!(k<=S&&S<=k)){t[T--]=(k<b?(t[C]=t[A],t[A++]=t[T]):t[C]=t[T],L);break}if(--T<C)break}}}return R(t,A,T+1)})(t,e,n)}return R}C.by=t,(s.heap=H(F)).by=H,(s.heapselect=U(F)).by=U,(s.insertionsort=e(F)).by=e,(s.quicksort=L(F)).by=L;var r=32,n=a,i=a,o=a,Z=function(t,e){var n=t.length;for(;n<e;)t[n++]=0;return t},X=function(t,e){if(32<e)throw new Error("invalid array width!");return t};function a(t){for(var e=new Array(t),n=-1;++n<t;)e[n]=0;return e}function E(t){return[0,t.length]}function Y(){return null}function W(){return 0}function q(t){return t+1}function Q(t){return t-1}function K(n){return function(t,e){return t+ +n(e)}}function J(n){return function(t,e){return t-n(e)}}function s(){var t={add:e,remove:function(){for(var e=tt(j,j),n=[],t=0,i=0;t<j;++t)V[t]?e[t]=i++:n.push(t);N.forEach(function(t){t(0,[],n)}),B.forEach(function(t){t(e)});for(var r,t=0,i=0;t<j;++t)(r=V[t])&&(t!==i&&(V[i]=r,G[i]=G[t]),++i);G.length=i;for(;i<j;)V[--j]=0},dimension:function(h){var f,d,p,g,m,u={filter:function(t){return null==t?s():Array.isArray(t)?a(t):"function"==typeof t?l(t):r(t)},filterExact:r,filterRange:a,filterFunction:l,filterAll:s,top:function(t){var e,n=[],i=b;for(;--i>=x&&0<t;)V[e=d[i]]||(n.push(G[e]),--t);return n},bottom:function(t){var e,n=[],i=x;for(;i<b&&0<t;)V[e=d[i]]||(n.push(G[e]),--t),i++;return n},group:w,groupAll:function(){var t=w(Y),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t},dispose:t,remove:t},v=~S&-~S,z=~v,_=L(function(t){return p[t]}),y=E,D=[],I=[],x=0,b=0;T.unshift(e),T.push(n),B.push(i),S|=v,(32<=A?!v:S&-(1<<A))&&(V=X(V,A<<=1));function e(t,e,n){p=t.map(h),g=_(function(t){for(var e=tt(t,t),n=-1;++n<t;)e[n]=n;return e}(n),0,n),p=P(p,g);var i,r=y(p),o=r[0],a=r[1];if(m)for(i=0;i<n;++i)m(p[i],i)||(V[g[i]+e]|=v);else{for(i=0;i<o;++i)V[g[i]+e]|=v;for(i=a;i<n;++i)V[g[i]+e]|=v}if(!e)return f=p,d=g,x=o,void(b=a);var s=f,u=d,l=0,c=0;for(f=new Array(j),d=tt(j,j),i=0;l<e&&c<n;++i)s[l]<p[c]?(f[i]=s[l],d[i]=u[l++]):(f[i]=p[c],d[i]=g[c++]+e);for(;l<e;++l,++i)f[i]=s[l],d[i]=u[l];for(;c<n;++c,++i)f[i]=p[c],d[i]=g[c]+e;r=y(f),x=r[0],b=r[1]}function n(t,e,n){D.forEach(function(t){t(p,g,e,n)}),p=g=null}function i(t){for(var e,n=0,i=0;n<j;++n)V[e=d[n]]&&(n!==i&&(f[i]=f[n]),d[i]=t[e],++i);for(f.length=i;i<j;)d[i++]=0;var r=y(f);x=r[0],b=r[1]}function o(t){var n=t[0],i=t[1];if(m)return m=null,c(function(t,e){return n<=e&&e<i}),x=n,b=i,u;var e,r,o,a=[],s=[];if(n<x)for(e=n,r=Math.min(x,i);e<r;++e)V[o=d[e]]^=v,a.push(o);else if(x<n)for(e=x,r=Math.min(n,b);e<r;++e)V[o=d[e]]^=v,s.push(o);if(b<i)for(e=Math.max(n,b),r=i;e<r;++e)V[o=d[e]]^=v,a.push(o);else if(i<b)for(e=Math.max(x,i),r=b;e<r;++e)V[o=d[e]]^=v,s.push(o);return x=n,b=i,N.forEach(function(t){t(v,a,s)}),u}function r(t){return o((n=C,i=t,(y=function(t){var e=t.length;return[n.left(t,i,0,e),n.right(t,i,0,e)]})(f)));var n,i}function a(t){return o((n=C,i=(e=t)[0],r=e[1],(y=function(t){var e=t.length;return[n.left(t,i,0,e),n.left(t,r,0,e)]})(f)));var n,e,i,r}function s(){return o((y=E)(f))}function l(t){return y=E,c(m=t),x=0,b=j,u}function c(t){var e,n,i,r=[],o=[];for(e=0;e<j;++e)!(V[n=d[e]]&v)^!!(i=t(f[e],e))&&(i?(V[n]&=z,r.push(n)):(V[n]|=v,o.push(n)));N.forEach(function(t){t(v,r,o)})}function w(_){var i={top:function(t){var e=n(a(),0,y.length,t);return r.sort(e,0,e.length)},all:a,reduce:u,reduceCount:t,reduceSum:function(t){return u(K(t),J(t),W)},order:l,orderNatural:function(){return l(F)},size:function(){return T},dispose:c,remove:c};I.push(i);var y,x,n,r,b,s,w,S=8,A=et(S),T=0,P=Y,C=Y,L=!0,E=_===Y;function e(t,e,n,i){var r,o,a,s,u,l,c=y,h=tt(T,A),f=b,d=w,p=T,g=0,m=0;for(L&&(f=d=Y),y=new Array(T),T=0,x=1<p?Z(x,j):tt(j,A),p&&(a=(o=c[0]).key);m<i&&!((s=_(t[m]))>=s);)++m;for(;m<i;){for(o&&a<=s?(u=o,l=a,h[g]=T,(o=c[++g])&&(a=o.key)):(u={key:s,value:d()},l=s),y[T]=u;!(l<s||(x[r=e[m]+n]=T,V[r]&z||(u.value=f(u.value,G[r])),++m>=i));)s=_(t[m]);v()}for(;g<p;)y[h[g]=T]=c[g++],v();if(g<T)for(g=0;g<n;++g)x[g]=h[x[g]];function v(){++T===A&&(h=X(h,S<<=1),x=X(x,S),A=et(S))}r=N.indexOf(P),1<T?(P=k,C=O):(!T&&E&&(T=1,y=[{key:null,value:d()}]),C=1===T?(P=M,R):P=Y,x=null),N[r]=P}function o(){if(1<T){for(var t=T,e=y,n=tt(t,t),i=0,r=0;i<j;++i)V[i]&&(n[x[r]=x[i]]=1,++r);for(y=[],i=T=0;i<t;++i)n[i]&&(n[i]=T++,y.push(e[i]));if(1<T)for(var i=0;i<r;++i)x[i]=n[x[i]];else x=null;N[N.indexOf(P)]=1<T?(C=O,P=k):1===T?(C=R,P=M):C=P=Y}else if(1===T){if(E)return;for(var i=0;i<j;++i)if(V[i])return;y=[],T=0,N[N.indexOf(P)]=P=C=Y}}function k(t,e,n){if(t!==v&&!L){var i,r,o,a;for(i=0,o=e.length;i<o;++i)V[r=e[i]]&z||((a=y[x[r]]).value=b(a.value,G[r]));for(i=0,o=n.length;i<o;++i)(V[r=n[i]]&z)===t&&((a=y[x[r]]).value=s(a.value,G[r]))}}function M(t,e,n){if(t!==v&&!L){var i,r,o,a=y[0];for(i=0,o=e.length;i<o;++i)V[r=e[i]]&z||(a.value=b(a.value,G[r]));for(i=0,o=n.length;i<o;++i)(V[r=n[i]]&z)===t&&(a.value=s(a.value,G[r]))}}function O(){var t,e;for(t=0;t<T;++t)y[t].value=w();for(t=0;t<j;++t)V[t]&z||((e=y[x[t]]).value=b(e.value,G[t]))}function R(){var t,e=y[0];for(e.value=w(),t=0;t<j;++t)V[t]&z||(e.value=b(e.value,G[t]))}function a(){return L&&(C(),L=!1),y}function u(t,e,n){return b=t,s=e,w=n,L=!0,i}function t(){return u(q,Q,W)}function l(e){function t(t){return e(t.value)}return n=U(t),r=H(t),i}function c(){var t=N.indexOf(P);return 0<=t&&N.splice(t,1),0<=(t=D.indexOf(e))&&D.splice(t,1),0<=(t=B.indexOf(o))&&B.splice(t,1),i}return arguments.length<1&&(_=F),N.push(P),D.push(e),B.push(o),e(f,d,0,j),t().orderNatural()}function t(){I.forEach(function(t){t.dispose()});var t=T.indexOf(e);return 0<=t&&T.splice(t,1),0<=(t=T.indexOf(n))&&T.splice(t,1),0<=(t=B.indexOf(i))&&B.splice(t,1),S&=z,s()}return e(G,0,j),n(G,0,j),u},groupAll:function(){var a,s,u,i,r={reduce:o,reduceCount:t,reduceSum:function(t){return o(K(t),J(t),W)},value:function(){l&&(function(){var t;for(a=i(),t=0;t<j;++t)V[t]||(a=s(a,G[t]))}(),l=!1);return a},dispose:c,remove:c},l=!0;function e(t,e){var n;if(!l)for(n=e;n<j;++n)V[n]||(a=s(a,G[n]))}function n(t,e,n){var i,r,o;if(!l){for(i=0,o=e.length;i<o;++i)V[r=e[i]]||(a=s(a,G[r]));for(i=0,o=n.length;i<o;++i)V[r=n[i]]===t&&(a=u(a,G[r]))}}function o(t,e,n){return s=t,u=e,i=n,l=!0,r}function t(){return o(q,Q,W)}function c(){var t=N.indexOf(n);return 0<=t&&N.splice(t),0<=(t=T.indexOf(e))&&T.splice(t),r}return N.push(n),T.push(e),e(G,0),t()},size:function(){return j}},G=[],j=0,S=0,A=8,V=n(0),N=[],T=[],B=[];function e(e){var n=j,i=e.length;return i&&(G=G.concat(e),V=Z(V,j+=i),T.forEach(function(t){t(e,n,i)})),t}return arguments.length?e(arguments[0]):t}function tt(t,e){return(e<257?n:e<65537?i:o)(t)}function et(t){return 8===t?256:16===t?65536:4294967296}"undefined"!=typeof Uint8Array&&(n=function(t){return new Uint8Array(t)},i=function(t){return new Uint16Array(t)},o=function(t){return new Uint32Array(t)},Z=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},X=function(t,e){var n;switch(e){case 16:n=i(t.length);break;case 32:n=o(t.length);break;default:throw new Error("invalid array width!")}return n.set(t),n}),exports.crossfilter=s}(exports||this)},VgplIV7d:function(t,exports,e){"use strict";exports.__esModule=!0,exports.RootCloseWrapper=exports.Transition=exports.Position=exports.Portal=exports.Overlay=exports.Modal=exports.AutoAffix=exports.Affix=void 0;var n=c(e("YF9tlnD2")),i=c(e("t05cJ/Bt")),r=c(e("d6abCJZV")),o=c(e("65tSD0Bz")),a=c(e("yRl9KuEp")),s=c(e("v77QxM/C")),u=c(e("nUYd5M56")),l=c(e("xSx+WgFt"));function c(t){return t&&t.__esModule?t:{default:t}}exports.Affix=n.default,exports.AutoAffix=i.default,exports.Modal=r.default,exports.Overlay=o.default,exports.Portal=a.default,exports.Position=s.default,exports.Transition=u.default,exports.RootCloseWrapper=l.default},YF9tlnD2:function(t,exports,e){"use strict";exports.__esModule=!0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},c=i(e("uRLsxEc6")),o=i(e("Yrs7+jfN")),a=i(e("/0VBPG/8")),s=i(e("hKPTbziM")),u=i(e("DeiD6s5V")),h=i(e("kjzo3jwQ")),n=i(e("ii0bleBb")),f=i(e("ivGQtwpr")),d=i(e("Y/FKx0zi")),r=i(e("G1eldzYB")),p=i(e("qfB6P2cO")),g=i(e("ZFtIpBXX")),m=i(e("DcMooPoT"));function i(t){return t&&t.__esModule?t:{default:t}}var v=function(n){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));return r.onWindowScroll=function(){r.onUpdate()},r.onDocumentClick=function(){(0,h.default)(function(){return r.onUpdate()})},r.onUpdate=function(){if(r._isMounted){var t=r.props,e=t.offsetTop,n=t.viewportOffsetTop,i=(0,u.default)((0,m.default)(r))+(n||0);i<=e?r.updateState("top",null,null):i>r.getPositionTopMax()?"bottom"===r.state.affixed?r.updateStateAtBottom():r.setState({affixed:"bottom",position:"absolute",top:null},function(){r._isMounted&&r.updateStateAtBottom()}):r.updateState("affix","fixed",n)}},r.getPositionTopMax=function(){return(0,p.default)((0,g.default)(r))-(0,o.default)(d.default.findDOMNode(r))-r.props.offsetBottom},r.updateState=function(t,e,n){if(t!==r.state.affixed||e!==r.state.position||n!==r.state.top){var i="affix"===t?"":t.charAt(0).toUpperCase()+t.substr(1);r.props["onAffix"+i]&&r.props["onAffix"+i](),r.setState({affixed:t,position:e,top:n},function(){r.props["onAffixed"+i]&&r.props["onAffixed"+i]()})}},r.updateStateAtBottom=function(){var t=r.getPositionTopMax(),e=(0,s.default)(d.default.findDOMNode(r)),n=(0,a.default)(e).top;r.updateState("bottom","absolute",t-n)},r.state={affixed:"top",position:null,top:null},r._needPositionUpdate=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype.componentDidMount=function(){var t=this;this._isMounted=!0,this._windowScrollListener=(0,r.default)((0,m.default)(this),"scroll",function(){return t.onWindowScroll()}),this._documentClickListener=(0,r.default)((0,g.default)(this),"click",function(){return t.onDocumentClick()}),this.onUpdate()},i.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},i.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},i.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},i.prototype.render=function(){var t=f.default.Children.only(this.props.children),e=t.props,n=e.className,i=e.style,r=this.state,o=r.affixed,a={position:r.position,top:r.top},s=void 0,u=void 0;return u="top"===o?(s=this.props.topClassName,this.props.topStyle):"bottom"===o?(s=this.props.bottomClassName,this.props.bottomStyle):(s=this.props.affixClassName,this.props.affixStyle),f.default.cloneElement(t,{className:(0,c.default)(s,n),style:l({},a,u,i)})},i}(f.default.Component);v.propTypes={offsetTop:n.default.number,viewportOffsetTop:n.default.number,offsetBottom:n.default.number,topClassName:n.default.string,topStyle:n.default.object,affixClassName:n.default.string,affixStyle:n.default.object,bottomClassName:n.default.string,bottomStyle:n.default.object,onAffix:n.default.func,onAffixed:n.default.func,onAffixTop:n.default.func,onAffixedTop:n.default.func,onAffixBottom:n.default.func,onAffixedBottom:n.default.func},v.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},exports.default=v,t.exports=exports.default},"Yrs7+jfN":function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t,e){var n=(0,r.default)(t);return n?n.innerHeight:e?t.clientHeight:(0,i.default)(t).height};var i=n(e("/0VBPG/8")),r=n(e("rVanvUPw"));function n(t){return t&&t.__esModule?t:{default:t}}t.exports=exports.default},"boQe0+g+":function(t,exports,e){
/* @preserve
 * Leaflet 1.3.4, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2018 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(exports){"use strict";var t=Object.freeze;function u(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}Object.freeze=function(t){return t};var o=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function p(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var e=0;function l(t){return t._leaflet_id=t._leaflet_id||++e,t._leaflet_id}function n(t,e,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function r(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function s(){return!1}function i(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function a(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function c(t){return a(t).split(/\s+/)}function h(t,e){for(var n in t.hasOwnProperty("options")||(t.options=t.options?o(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var d=/\{ *([\w_-]+) *\}/g;function g(t,i){return t.replace(d,function(t,e){var n=i[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})}var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function y(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var x=0;function b(t){var e=+new Date,n=Math.max(0,16-(e-x));return x=e+n,window.setTimeout(t,n)}var w=window.requestAnimationFrame||y("RequestAnimationFrame")||b,S=window.cancelAnimationFrame||y("CancelAnimationFrame")||y("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function A(t,e,n){if(!n||w!==b)return w.call(window,p(t,e));t.call(e)}function T(t){t&&S.call(window,t)}var P=(Object.freeze||Object)({freeze:t,extend:u,create:o,bind:p,lastId:e,stamp:l,throttle:n,wrapNum:r,falseFn:s,formatNum:i,trim:a,splitWords:c,setOptions:h,getParamString:f,template:g,isArray:m,indexOf:v,emptyImageUrl:_,requestFn:w,cancelFn:S,requestAnimFrame:A,cancelAnimFrame:T});function C(){}C.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,i=o(n);for(var r in(i.constructor=e).prototype=i,this)this.hasOwnProperty(r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(u(e,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=m(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),u.apply(null,[i].concat(t.includes)),delete t.includes),i.options&&(t.options=u(o(i.options),t.options)),u(i,t),i._initHooks=[],i.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=i._initHooks.length;t<e;t++)i._initHooks[t].call(this)}},e},C.include=function(t){return u(this.prototype,t),this},C.mergeOptions=function(t){return u(this.prototype.options,t),this},C.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var E={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else{t=c(t);for(var r=0,o=t.length;r<o;r++)this._on(t[r],e,n)}return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else{t=c(t);for(var r=0,o=t.length;r<o;r++)this._off(t[r],e,n)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=s,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=s;delete this._events[t]}},fire:function(t,e,n){if(!this.listens(t,n))return this;var i=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var o=0,a=r.length;o<a;o++){var s=r[o];s.fn.call(s.ctx||this,i)}this._firingCount--}}return n&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var r=p(function(){this.off(t,e,n).off(t,r,n)},this);return this.on(t,e,n).on(t,r,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[l(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[l(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};E.addEventListener=E.on,E.removeEventListener=E.clearAllEventListeners=E.off,E.addOneTimeEventListener=E.once,E.fireEvent=E.fire,E.hasEventListeners=E.listens;var k=C.extend(E);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var O=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof M?t:m(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function z(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function D(t,e){return!t||t instanceof z?t:new z(t,e)}function I(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function G(t,e){return t instanceof I?t:new I(t,e)}function j(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function V(t,e,n){return t instanceof j?t:m(t)&&"object"!=typeof t[0]?3===t.length?new j(t[0],t[1],t[2]):2===t.length?new j(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new j(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new j(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+i(this.x)+", "+i(this.y)+")"}},z.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"==typeof t[0]||t instanceof M?R(t):D(t))instanceof z?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},overlaps:function(t){t=D(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},I.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof j)n=e=t;else{if(!(t instanceof I))return t?this.extend(V(t)||G(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new j(e.lat,e.lng),this._northEast=new j(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new I(new j(e.lat-i,e.lng-r),new j(n.lat+i,n.lng+r))},getCenter:function(){return new j((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new j(this.getNorth(),this.getWest())},getSouthEast:function(){return new j(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof j||"lat"in t?V(t):G(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof I?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=G(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},overlaps:function(t){t=G(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=G(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var N,B={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),i=this.transformation.transform(e.min,n),r=this.transformation.transform(e.max,n);return new z(i,r)},infinite:!(j.prototype={equals:function(t,e){if(!t)return!1;t=V(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(void 0===e?1e-9:e)},toString:function(t){return"LatLng("+i(this.lat,t)+", "+i(this.lng,t)+")"},distanceTo:function(t){return F.distance(this,V(t))},wrap:function(){return F.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return G([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new j(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?r(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?r(t.lat,this.wrapLat,!0):t.lat,i=t.alt;return new j(n,e,i)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast(),s=new j(o.lat-i,o.lng-r),u=new j(a.lat-i,a.lng-r);return new I(s,u)}},F=u({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),H={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new M(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new j((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(N=6378137*Math.PI,new z([-N,-N],[N,N]))};function U(t,e,n,i){if(m(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function Z(t,e,n,i){return new U(t,e,n,i)}U.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var X,Y=u({},F,{code:"EPSG:3857",projection:H,transformation:(X=.5/(Math.PI*H.R),Z(X,.5,-X,.5))}),W=u({},Y,{code:"EPSG:900913"});function q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,i,r,o,a,s,u="";for(n=0,r=t.length;n<r;n++){for(a=t[n],i=0,o=a.length;i<o;i++)s=a[i],u+=(i?"L":"M")+s.x+" "+s.y;u+=e?Lt?"z":"x":""}return u||"M0 0"}var K=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=kt("webkit"),it=kt("android"),rt=kt("android 2")||kt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=it&&kt("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,ut=kt("chrome"),lt=kt("gecko")&&!nt&&!st&&!J,ct=!ut&&kt("safari"),ht=kt("phantom"),ft="OTransition"in K,dt=0===navigator.platform.indexOf("Win"),pt=J&&"transition"in K,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,mt="MozPerspective"in K,vt=!window.L_DISABLE_3D&&(pt||gt||mt)&&!ft&&!ht,_t="undefined"!=typeof orientation||kt("mobile"),yt=_t&&nt,xt=_t&&gt,bt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!bt),St=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),At=_t&&st,Tt=_t&&lt,Pt=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Ct=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!q("svg").createSVGRect),Et=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function kt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Mt=(Object.freeze||Object)({ie:J,ielt9:tt,edge:et,webkit:nt,android:it,android23:rt,androidStock:at,opera:st,chrome:ut,gecko:lt,safari:ct,phantom:ht,opera12:ft,win:dt,ie3d:pt,webkit3d:gt,gecko3d:mt,any3d:vt,mobile:_t,mobileWebkit:yt,mobileWebkit3d:xt,msPointer:bt,pointer:wt,touch:St,mobileOpera:At,mobileGecko:Tt,retina:Pt,canvas:Ct,svg:Lt,vml:Et}),Ot=bt?"MSPointerDown":"pointerdown",Rt=bt?"MSPointerMove":"pointermove",zt=bt?"MSPointerUp":"pointerup",Dt=bt?"MSPointerCancel":"pointercancel",It=["INPUT","SELECT","OPTION"],Gt={},jt=!1,Vt=0;function Nt(t,e,n,i){var r,o,a,s,u,l,c,h,f,d;return"touchstart"===e?(c=t,h=n,f=i,d=p(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(It.indexOf(t.target.tagName)<0))return;Ge(t)}Ut(t,h)}),c["_leaflet_touchstart"+f]=d,c.addEventListener(Ot,d,!1),jt||(document.documentElement.addEventListener(Ot,Bt,!0),document.documentElement.addEventListener(Rt,Ft,!0),document.documentElement.addEventListener(zt,Ht,!0),document.documentElement.addEventListener(Dt,Ht,!0),jt=!0)):"touchmove"===e?(u=n,l=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Ut(t,u)},(s=t)["_leaflet_touchmove"+i]=l,s.addEventListener(Rt,l,!1)):"touchend"===e&&(o=n,a=function(t){Ut(t,o)},(r=t)["_leaflet_touchend"+i]=a,r.addEventListener(zt,a,!1),r.addEventListener(Dt,a,!1)),this}function Bt(t){Gt[t.pointerId]=t,Vt++}function Ft(t){Gt[t.pointerId]&&(Gt[t.pointerId]=t)}function Ht(t){delete Gt[t.pointerId],Vt--}function Ut(t,e){for(var n in t.touches=[],Gt)t.touches.push(Gt[n]);t.changedTouches=[t],e(t)}var Zt=bt?"MSPointerDown":wt?"pointerdown":"touchstart",Xt=bt?"MSPointerUp":wt?"pointerup":"touchend",Yt="_leaflet_";function Wt(t,r,e){var o,a,s=!1;function n(t){var e;if(wt){if(!et||"mouse"===t.pointerType)return;e=Vt}else e=t.touches.length;if(!(1<e)){var n=Date.now(),i=n-(o||n);a=t.touches?t.touches[0]:t,s=0<i&&i<=250,o=n}}function i(t){if(s&&!a.cancelBubble){if(wt){if(!et||"mouse"===t.pointerType)return;var e,n,i={};for(n in a)e=a[n],i[n]=e&&e.bind?e.bind(a):e;a=i}a.type="dblclick",r(a),o=null}}return t[Yt+Zt+e]=n,t[Yt+Xt+e]=i,t[Yt+"dblclick"+e]=r,t.addEventListener(Zt,n,!1),t.addEventListener(Xt,i,!1),t.addEventListener("dblclick",r,!1),this}function qt(t,e){var n=t[Yt+Zt+e],i=t[Yt+Xt+e],r=t[Yt+"dblclick"+e];return t.removeEventListener(Zt,n,!1),t.removeEventListener(Xt,i,!1),et||t.removeEventListener("dblclick",r,!1),this}var Qt,Kt,Jt,$t,te,ee=ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ne=ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ie="webkitTransition"===ne||"OTransition"===ne?ne+"End":"transitionend";function re(t){return"string"==typeof t?document.getElementById(t):t}function oe(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function ae(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function se(t){var e=t.parentNode;e&&e.removeChild(t)}function ue(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function le(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function ce(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function he(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ge(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function fe(t,e){if(void 0!==t.classList)for(var n=c(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!he(t,e)){var o=ge(t);pe(t,(o?o+" ":"")+e)}}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,a((" "+ge(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ge(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ve(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function _e(t,e,n){var i=e||new M(0,0);t.style[ee]=(pt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ye(t,e){t._leaflet_pos=e,vt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function xe(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)Qt=function(){Ee(window,"selectstart",Ge)},Kt=function(){Me(window,"selectstart",Ge)};else{var be=ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qt=function(){if(be){var t=document.documentElement.style;Jt=t[be],t[be]="none"}},Kt=function(){be&&(document.documentElement.style[be]=Jt,Jt=void 0)}}function we(){Ee(window,"dragstart",Ge)}function Se(){Me(window,"dragstart",Ge)}function Ae(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Te(),te=($t=t).style.outline,t.style.outline="none",Ee(window,"keydown",Te))}function Te(){$t&&($t.style.outline=te,te=$t=void 0,Me(window,"keydown",Te))}function Pe(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Ce(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Le=(Object.freeze||Object)({TRANSFORM:ee,TRANSITION:ne,TRANSITION_END:ie,get:re,getStyle:oe,create:ae,remove:se,empty:ue,toFront:le,toBack:ce,hasClass:he,addClass:fe,removeClass:de,setClass:pe,getClass:ge,setOpacity:me,testProp:ve,setTransform:_e,setPosition:ye,getPosition:xe,disableTextSelection:Qt,enableTextSelection:Kt,disableImageDrag:we,enableImageDrag:Se,preventOutline:Ae,restoreOutline:Te,getSizedParentNode:Pe,getScale:Ce});function Ee(t,e,n,i){if("object"==typeof e)for(var r in e)Oe(t,r,e[r],n);else{e=c(e);for(var o=0,a=e.length;o<a;o++)Oe(t,e[o],n,i)}return this}var ke="_leaflet_events";function Me(t,e,n,i){if("object"==typeof e)for(var r in e)Re(t,r,e[r],n);else if(e){e=c(e);for(var o=0,a=e.length;o<a;o++)Re(t,e[o],n,i)}else{for(var s in t[ke])Re(t,s,t[ke][s]);delete t[ke]}return this}function Oe(e,t,n,i){var r=t+l(n)+(i?"_"+l(i):"");if(e[ke]&&e[ke][r])return this;var o=function(t){return n.call(i||e,t||window.event)},a=o;wt&&0===t.indexOf("touch")?Nt(e,t,o,r):!St||"dblclick"!==t||wt&&ut?"addEventListener"in e?"mousewheel"===t?e.addEventListener("onwheel"in e?"wheel":"mousewheel",o,!1):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,Xe(e,t)&&a(t)},e.addEventListener("mouseenter"===t?"mouseover":"mouseout",o,!1)):("click"===t&&it&&(o=function(t){!function(t,e){var n=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,i=Fe&&n-Fe;if(i&&100<i&&i<500||t.target._simulatedClick&&!t._simulated)return je(t);Fe=n,e(t)}(t,a)}),e.addEventListener(t,o,!1)):"attachEvent"in e&&e.attachEvent("on"+t,o):Wt(e,o,r),e[ke]=e[ke]||{},e[ke][r]=o}function Re(t,e,n,i){var r,o,a,s=e+l(n)+(i?"_"+l(i):""),u=t[ke]&&t[ke][s];if(!u)return this;wt&&0===e.indexOf("touch")?(a=(r=t)["_leaflet_"+(o=e)+s],"touchstart"===o?r.removeEventListener(Ot,a,!1):"touchmove"===o?r.removeEventListener(Rt,a,!1):"touchend"===o&&(r.removeEventListener(zt,a,!1),r.removeEventListener(Dt,a,!1))):!St||"dblclick"!==e||wt&&ut?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",u,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,u,!1):"detachEvent"in t&&t.detachEvent("on"+e,u):qt(t,s),t[ke][s]=null}function ze(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ze(t),this}function De(t){return Oe(t,"mousewheel",ze),this}function Ie(t){return Ee(t,"mousedown touchstart dblclick",ze),Oe(t,"click",Ue),this}function Ge(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function je(t){return Ge(t),ze(t),this}function Ve(t,e){if(!e)return new M(t.clientX,t.clientY);var n=Ce(e),i=n.boundingClientRect;return new M((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Ne=dt&&ut?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Be(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ne:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Fe,He={};function Ue(t){He[t.type]=!0}function Ze(t){var e=He[t.type];return He[t.type]=!1,e}function Xe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ye=(Object.freeze||Object)({on:Ee,off:Me,stopPropagation:ze,disableScrollPropagation:De,disableClickPropagation:Ie,preventDefault:Ge,stop:je,getMousePosition:Ve,getWheelDelta:Be,fakeStop:Ue,skipped:Ze,isExternalTarget:Xe,addListener:Ee,removeListener:Me}),We=k.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=xe(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=A(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ye(this._el,n),this.fire("step")},_complete:function(){T(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),qe=k.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=h(this,e),this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(V(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=ne&&vt&&!At&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,ie,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(V(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&!0!==n){void 0!==n.animate&&(n.zoom=u({animate:n.animate},n.zoom),n.pan=u({animate:n.animate,duration:n.duration},n.pan));var i=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(i)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=t instanceof M?t:this.latLngToContainerPoint(t),a=o.subtract(r).multiplyBy(1-1/i),s=this.containerPointToLatLng(r.add(a));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():G(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),i=R(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r),u=this.unproject(a.add(s).divideBy(2).add(o),r);return{center:u,zoom:r}},fitBounds:function(t,e){if(!(t=G(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=R(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){fe(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(o,a,t){if(!1===(t=t||{}).animate||!vt)return this.setView(o,a,t);this._stop();var s=this.project(this.getCenter()),u=this.project(o),e=this.getSize(),l=this._zoom;o=V(o),a=void 0===a?l:a;var c=Math.max(e.x,e.y),h=c*this.getZoomScale(l,a),f=u.distanceTo(s)||1,d=1.42,p=d*d;function n(t){var e=t?-1:1,n=t?h:c,i=h*h-c*c+e*p*p*f*f,r=2*n*p*f,o=i/r,a=Math.sqrt(o*o+1)-o,s=a<1e-9?-18:Math.log(a);return s}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function g(t){return(Math.exp(t)+Math.exp(-t))/2}var m=n(0);function v(t){return c*(g(m)*(i(e=m+d*t)/g(e))-i(m))/p;var e}var _=Date.now(),y=(n(1)-m)/d,x=t.duration?1e3*t.duration:1e3*y*.8;return this._moveStart(!0,t.noMoveStart),function t(){var e,n,i=(Date.now()-_)/x,r=(e=i,(1-Math.pow(1-e,1.5))*y);i<=1?(this._flyToFrame=A(t,this),this._move(this.unproject(s.add(u.subtract(s).multiplyBy(v(r)/f)),l),this.getScaleZoom(c/(n=r,c*(g(m)/g(m+d*n))),l),{flyTo:!0})):this._move(o,a)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=G(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,G(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),i=e.divideBy(2).round(),r=n.divideBy(2).round(),o=i.subtract(r);return o.x||o.y?(t.animate&&t.pan?this.panBy(o):(t.pan&&this._rawPanBy(o),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),n=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,n=t.coords.longitude,i=new j(e,n),r=i.toBounds(2*t.coords.accuracy),o=this._locateOptions;if(o.setView){var a=this.getBoundsZoom(r);this.setView(i,o.maxZoom?Math.min(a,o.maxZoom):a)}var s={latlng:i,bounds:r,timestamp:t.timestamp};for(var u in t.coords)"number"==typeof t.coords[u]&&(s[u]=t.coords[u]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),se(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(T(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)se(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),i=ae("div",n,e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new I(e,n)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=G(t),n=R(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=D(this.project(s,i),this.project(a,i)).getSize(),c=vt?this.options.zoomSnap:1,h=u.x/l.x,f=u.y/l.y,d=e?Math.max(h,f):Math.min(h,f);return i=this.getScaleZoom(d,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new z(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(V(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(V(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(V(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(G(t))},distance:function(t,e){return this.options.crs.distance(V(t),V(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(V(t)))},mouseEventToContainerPoint:function(t){return Ve(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=re(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ee(e,"scroll",this._onScroll,this),this._containerId=l(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,fe(t,"leaflet-container"+(St?" leaflet-touch":"")+(Pt?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=oe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ye(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(fe(t.markerPane,"leaflet-zoom-hide"),fe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ye(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return T(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ye(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[l(this._container)]=this;var e=t?Me:Ee;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){T(this._resizeRequest),this._resizeRequest=A(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[l(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(r&&!Xe(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||a||r||!Xe(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ze(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||Ae(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var i=u({},t);i.type="preclick",this._fireDOMEvent(i,i.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e))).length){var r=n[0];"contextmenu"===e&&r.listens(e,!0)&&Ge(t);var o={originalEvent:t};if("keypress"!==t.type){var a=r.getLatLng&&(!r._radius||r._radius<=10);o.containerPoint=a?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),o.layerPoint=this.containerPointToLayerPoint(o.containerPoint),o.latlng=a?r.getLatLng():this.layerPointToLatLng(o.layerPoint)}for(var s=0;s<n.length;s++)if(n[s].fire(e,o,!0),o.originalEvent._stopped||!1===n[s].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return xe(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return D([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new z(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new z(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max),a=this._rebound(r.x,-o.x),s=this._rebound(r.y,-o.y);return new M(a,s)},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n)||(this.panBy(n,e),0))},_createAnimProxy:function(){var t=this._proxy=ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=ee,n=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){se(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r)||(A(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),0))},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),A(function(){this._moveEnd(!0)},this))}}),Qe=C.extend({options:{position:"topright"},initialize:function(t){h(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return fe(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this},remove:function(){return this._map&&(se(this._container),this.onRemove&&this.onRemove(this._map),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}}),Ke=function(t){return new Qe(t)};qe.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var i=this._controlCorners={},r="leaflet-",o=this._controlContainer=ae("div",r+"control-container",this._container);function t(t,e){var n=r+t+" "+r+e;i[t+e]=ae("div",n,o)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)se(this._controlCorners[t]);se(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Je=Qe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in h(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Qe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(l(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){fe(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(fe(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):de(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=ae("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ie(e),De(e);var i=this._form=ae("form",t+"-list");n&&(this._map.on("click",this.collapse,this),it||Ee(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=ae("a",t+"-toggle",e);r.href="#",r.title="Layers",St?(Ee(r,"click",je),Ee(r,"click",this.expand,this)):Ee(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=ae("div",t+"-base",i),this._separator=ae("div",t+"-separator",i),this._overlaysList=ae("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&l(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(p(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ue(this._baseLayersList),ue(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<r,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(l(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers",i),this._layerControlInputs.push(e),e.layerId=l(t.layer),Ee(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");n.appendChild(o),o.appendChild(e),o.appendChild(r);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),$e=Qe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=ae("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=ae("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ie(o),Ee(o,"click",je),Ee(o,"click",r,this),Ee(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&fe(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&fe(this._zoomInButton,e)}});qe.mergeOptions({zoomControl:!0}),qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))});var tn=Qe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=ae("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=ae("div",e,n)),t.imperial&&(this._iScale=ae("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;5280<r?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),en=Qe.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){h(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=ae("div","leaflet-control-attribution"),Ie(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});qe.mergeOptions({attributionControl:!0}),qe.addInitHook(function(){this.options.attributionControl&&(new en).addTo(this)}),Qe.Layers=Je,Qe.Zoom=$e,Qe.Scale=tn,Qe.Attribution=en,Ke.layers=function(t,e,n){return new Je(t,e,n)},Ke.zoom=function(t){return new $e(t)},Ke.scale=function(t){return new tn(t)},Ke.attribution=function(t){return new en(t)};var nn=C.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});nn.addTo=function(t,e){return t.addHandler(e,this),this};var rn,on={Events:E},an=St?"touchstart mousedown":"mousedown",sn={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},un={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ln=k.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){h(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ee(this._dragStartTarget,an,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ln._dragging===this&&this.finishDrag(),Me(this._dragStartTarget,an,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!he(this._element,"leaflet-zoom-anim")&&!(ln._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((ln._dragging=this)._preventOutline&&Ae(this._element),we(),Qt(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Pe(this._element);this._startPoint=new M(e.clientX,e.clientY),this._parentScale=Ce(n),Ee(document,un[t.type],this._onMove,this),Ee(document,sn[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&1<t.touches.length)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new M(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ge(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=xe(this._element).subtract(n),fe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,T(this._animRequest),this._lastEvent=t,this._animRequest=A(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ye(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),un)Me(document,un[t],this._onMove,this),Me(document,sn[t],this._onUp,this);Se(),Kt(),this._moved&&this._moving&&(T(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ln._dragging=!1}});function cn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var a,s,u,l=0;for(s=r+1;s<=o-1;s++)u=gn(e[s],e[r],e[o],!0),l<u&&(a=s,l=u);i<l&&(n[a]=1,t(e,n,i,r,a),t(e,n,i,a,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)a=t[i],s=t[r],u=s.x-a.x,l=s.y-a.y,e<u*u+l*l&&(n.push(t[i]),r=i);var a,s,u,l;return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function hn(t,e,n){return Math.sqrt(gn(t,e,n,!0))}function fn(t,e,n,i,r){var o,a,s,u=i?rn:pn(t,n),l=pn(e,n);for(rn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;a=dn(t,e,o=u||l,n,r),s=pn(a,n),o===u?(t=a,u=s):(e=a,l=s)}}function dn(t,e,n,i,r){var o,a,s=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new M(o,a,r)}function pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function gn(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return 0<l&&(1<(r=((t.x-o)*s+(t.y-a)*u)/l)?(o=n.x,a=n.y):0<r&&(o+=s*r,a+=u*r)),s=t.x-o,u=t.y-a,i?s*s+u*u:new M(o,a)}function mn(t){return!m(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function vn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}var _n=(Object.freeze||Object)({simplify:cn,pointToSegmentDistance:hn,closestPointOnSegment:function(t,e,n){return gn(t,e,n)},clipSegment:fn,_getEdgeIntersection:dn,_getBitCode:pn,_sqClosestPointOnSegment:gn,isFlat:mn,_flat:vn});function yn(t,e,n){var i,r,o,a,s,u,l,c,h,f=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=pn(t[r],e);for(a=0;a<4;a++){for(c=f[a],i=[],r=0,l=t.length,o=l-1;r<l;o=r++)s=t[r],u=t[o],s._code&c?u._code&c||((h=dn(u,s,c,e,n))._code=pn(h,e),i.push(h)):(u._code&c&&((h=dn(u,s,c,e,n))._code=pn(h,e),i.push(h)),i.push(s));t=i}return t}var xn,bn=(Object.freeze||Object)({clipPolygon:yn}),wn={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new j(t.y,t.x)},bounds:new z([-180,-90],[180,90])},Sn={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new M(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&1e-7<Math.abs(l);u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),l=Math.PI/2-2*Math.atan(a*e)-s,s+=l;return new j(s*n,t.x*n/i)}},An=(Object.freeze||Object)({LonLat:wn,Mercator:Sn,SphericalMercator:H}),Tn=u({},F,{code:"EPSG:3395",projection:Sn,transformation:(xn=.5/(Math.PI*Sn.R),Z(xn,.5,-xn,.5))}),Pn=u({},F,{code:"EPSG:4326",projection:wn,transformation:Z(1/180,1,-1/180,.5)}),Cn=u({},B,{projection:wn,transformation:Z(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});B.Earth=F,B.EPSG3395=Tn,B.EPSG3857=Y,B.EPSG900913=W,B.EPSG4326=Pn,B.Simple=Cn;var Ln=k.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[l(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[l(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});qe.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=l(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=l(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&l(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?m(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[l(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=l(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var En=Ln.extend({initialize:function(t,e){var n,i;if(h(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return l(t)}}),kn=En.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),En.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),En.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new I;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Mn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){h(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=R(i),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Pt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),On=Mn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return On.imagePath||(On.imagePath=this._detectIconPath()),(this.options.imagePath||On.imagePath)+Mn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=ae("div","leaflet-default-icon-path",document.body),e=oe(t,"background-image")||oe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Rn=nn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ln(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),fe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=xe(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=D(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!u.contains(o)){var l=R((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),ye(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=A(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(T(this._panRequest),this._panRequest=A(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=xe(e._icon),r=e._map.layerPointToLatLng(i);n&&ye(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){T(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),zn=Ln.extend({options:{icon:new On,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){h(this,e),this._latlng=V(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=V(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),fe(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(fe(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),se(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&se(this._shadow),this._shadow=null},_setPos:function(t){ye(this._icon,t),this._shadow&&ye(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Rn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Rn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Dn=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return h(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),In=Dn.extend({options:{fill:!0,radius:10},initialize:function(t,e){h(this,e),this._latlng=V(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=V(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Dn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new z(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Gn=In.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=u({},n,{radius:e})),h(this,e),this._latlng=V(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new I(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Dn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===F.distance){var r=Math.PI/180,o=this._mRadius/F.R/r,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),jn=Dn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){h(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=gn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){e=u[l-1],n=u[l];var h=o(t,e,n,!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(e=t=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(i=t=0;t<u-1;t++)if(r=s[t],o=s[t+1],n=r.distanceTo(o),e<(i+=n))return a=(i-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=V(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new I,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),i=0,r=t.length;i<r;i++)n?(e[i]=V(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),n=new M(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(n),t.max._add(n),this._pxBounds=t)},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof j,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,a,s,u=this._parts;for(i=e=0,r=this._rings.length;e<r;e++)for(s=this._rings[e],n=0,o=s.length;n<o-1;n++)(a=fn(s[n],s[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=cn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(s=this._parts[n],i=0,a=s.length,r=a-1;i<a;r=i++)if((e||0!==i)&&hn(t,s[r],s[i])<=u)return!0;return!1}});jn._flat=vn;var Vn=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=jn.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof j&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new z(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=yn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(e=this._parts[r],o=0,u=e.length,a=u-1;o<u;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||jn.prototype._containsPoint.call(this,t,!0)}}),Nn=kn.extend({initialize:function(t,e){h(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=m(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Bn(t,o);return a?(a.feature=Yn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}});function Bn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Fn;if(!s&&!a)return null;switch(a.type){case"Point":return n=c(s),l?l(t,n):new zn(n);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),u.push(l?l(t,n):new zn(n));return new kn(u);case"LineString":case"MultiLineString":return i=Hn(s,"LineString"===a.type?0:1,c),new jn(i,e);case"Polygon":case"MultiPolygon":return i=Hn(s,"Polygon"===a.type?1:2,c),new Vn(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=Bn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new kn(u);default:throw new Error("Invalid GeoJSON object.")}}function Fn(t){return new j(t[1],t[0],t[2])}function Hn(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?Hn(t[o],e-1,n):(n||Fn)(t[o]),r.push(i);return r}function Un(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[i(t.lng,e),i(t.lat,e),i(t.alt,e)]:[i(t.lng,e),i(t.lat,e)]}function Zn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?Zn(t[o],e-1,n,i):Un(t[o],i));return!e&&n&&r.push(r[0]),r}function Xn(t,e){return t.feature?u({},t.feature,{geometry:e}):Yn(e)}function Yn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Wn={toGeoJSON:function(t){return Xn(this,{type:"Point",coordinates:Un(this.getLatLng(),t)})}};function qn(t,e){return new Nn(t,e)}zn.include(Wn),Gn.include(Wn),In.include(Wn),jn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=Zn(this._latlngs,e?1:0,!1,t);return Xn(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),Vn.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),i=Zn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Xn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),En.include({toMultiPoint:function(e){var n=[];return this.eachLayer(function(t){n.push(t.toGeoJSON(e).geometry.coordinates)}),Xn(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(i){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(i);var r="GeometryCollection"===t,o=[];return this.eachLayer(function(t){if(t.toGeoJSON){var e=t.toGeoJSON(i);if(r)o.push(e.geometry);else{var n=Yn(e);"FeatureCollection"===n.type?o.push.apply(o,n.features):o.push(n)}}}),r?Xn(this,{geometries:o,type:"GeometryCollection"}):{type:"FeatureCollection",features:o}}});var Qn=qn,Kn=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=G(e),h(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){se(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&ce(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=G(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:ae("img");fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),this.options.className&&fe(e,this.options.className),e.onselectstart=s,e.onmousemove=s,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,n,e)},_reset:function(){var t=this._image,e=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ye(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Jn=Kn.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:ae("video");if(fe(e,"leaflet-image-layer"),this._zoomAnimated&&fe(e,"leaflet-zoom-animated"),e.onselectstart=s,e.onmousemove=s,e.onloadeddata=p(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],r=0;r<n.length;r++)i.push(n[r].src);this._url=0<n.length?i:[e.src]}else{m(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var o=0;o<this._url.length;o++){var a=ae("source");a.src=this._url[o],e.appendChild(a)}}}}),$n=Ln.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){h(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(p(se,void 0,this._container),200)):se(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=V(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&ce(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?ye(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),ti=$n.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){$n.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Dn||this._source.on("preclick",ze))},onRemove:function(t){$n.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Dn||this._source.off("preclick",ze))},getEvents:function(){var t=$n.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=ae("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ae("div",t+"-content-wrapper",e);if(this._contentNode=ae("div",t+"-content",n),Ie(n),De(this._contentNode),Ee(n,"contextmenu",ze),this._tipContainer=ae("div",t+"-tip-container",e),this._tip=ae("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=ae("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Ee(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&r<i?(e.height=r+"px",fe(t,o)):de(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ye(this._container,e.add(n))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(oe(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new M(this._containerLeft,-n-this._containerBottom);r._add(xe(this._container));var o=t.layerPointToContainerPoint(r),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),u=R(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),je(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});qe.mergeOptions({closePopupOnClick:!0}),qe.include({openPopup:function(t,e,n){return t instanceof ti||(t=new ti(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Ln.include({bindPopup:function(t,e){return t instanceof ti?(h(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new ti(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof Ln||(e=t,t=this),t instanceof kn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(je(t),e instanceof Dn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ei=$n.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){$n.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){$n.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=$n.prototype.getEvents.call(this);return St&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ae("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,n=this._container,i=e.latLngToContainerPoint(e.getCenter()),r=e.layerPointToContainerPoint(t),o=this.options.direction,a=n.offsetWidth,s=n.offsetHeight,u=R(this.options.offset),l=this._getAnchor();t="top"===o?t.add(R(-a/2+u.x,-s+u.y+l.y,!0)):"bottom"===o?t.subtract(R(a/2-u.x,-u.y,!0)):"center"===o?t.subtract(R(a/2+u.x,s/2-l.y+u.y,!0)):"right"===o||"auto"===o&&r.x<i.x?(o="right",t.add(R(u.x+l.x,l.y-s/2+u.y,!0))):(o="left",t.subtract(R(a+l.x-u.x,s/2-l.y-u.y,!0))),de(n,"leaflet-tooltip-right"),de(n,"leaflet-tooltip-left"),de(n,"leaflet-tooltip-top"),de(n,"leaflet-tooltip-bottom"),fe(n,"leaflet-tooltip-"+o),ye(n,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});qe.include({openTooltip:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Ln.include({bindTooltip:function(t,e){return t instanceof ei?(h(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new ei(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),St&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof Ln||(e=t,t=this),t instanceof kn)for(var n in this._layers){t=this._layers[n];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(fe(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ni=Mn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=R(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});Mn.Default=On;var ii=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_t,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){h(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),se(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ce(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);me(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(T(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this))}},_onOpaqueTile:s,_initContainer:function(){this._container||(this._container=ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(se(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),i.el.offsetWidth,this._onCreateLevel(i)),this._level=i}},_onUpdateLevel:s,_onRemoveLevel:s,_onCreateLevel:s,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)se(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new M(+r,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i<a&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new M(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom)&&(r=void 0);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?_e(t.el,r,i):ye(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new z(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,u=new z(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new M(c.x,c.y))||(this._tiles[l].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var f=r.min.x;f<=r.max.x;f++){var d=new M(f,h);if(d.z=this._tileZoom,this._isValidTile(d)){var p=this._tiles[this._tileCoordsToKey(d)];p?p.current=!0:a.push(d)}}if(a.sort(function(t,e){return t.distanceTo(o)-e.distanceTo(o)}),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return G(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n),o=e.unproject(i,t.z),a=e.unproject(r,t.z);return[o,a]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new I(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(se(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){fe(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s,t.onmousemove=s,tt&&this.options.opacity<1&&me(t,this.options.opacity),it&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),r=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(r),this.createTile.length<2&&A(p(this._tileReady,this,t,null,r)),ye(r,n),this._tiles[i]={el:r,coords:t,current:!0},e.appendChild(r),this.fire("tileloadstart",{tile:r,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),T(this._fadeFrame),this._fadeFrame=A(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(fe(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?A(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?r(t.x,this._wrapX):t.x,this._wrapY?r(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),ri=ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=h(this,e)).detectRetina&&Pt&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),it||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ee(n,"load",p(this._tileOnLoad,this,e,n)),Ee(n,"error",p(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Pt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return g(this._url,u(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,i=this.options.zoomOffset;return n&&(t=e-t),t+i},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=s,e.onerror=s,e.complete||(e.src=_,se(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",_),ii.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==_))return ii.prototype._tileReady.call(this,t,e,n)}});function oi(t,e){return new ri(t,e)}var ai=ri.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=u({},this.defaultWmsParams);for(var i in e)i in this.options||(n[i]=e[i]);var r=(e=h(this,e)).detectRetina&&Pt?2:1,o=this.getTileSize();n.width=o.x*r,n.height=o.y*r,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,ri.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=D(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(1.3<=this._wmsVersion&&this._crs===Pn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=ri.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});ri.WMS=ai,oi.wms=function(t,e){return new ai(t,e)};var si=Ln.extend({options:{padding:.1,tolerance:0},initialize:function(t){h(this,t),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=xe(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e),s=a.subtract(o),u=r.multiplyBy(-n).add(i).add(r).subtract(s);vt?_e(this._container,u,n):ye(this._container,u)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new z(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ui=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ee(t,"mousemove",n(this._onMouseMove,32,this),this),Ee(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){T(this._redrawRequest),delete this._ctx,se(this._container),Me(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},si.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=Pt?2:1;ye(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Pt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[l(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete this._drawnLayers[t._leaflet_id],delete t._order,delete this._layers[l(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,n=t.options.dashArray.split(/[, ]+/),i=[];for(e=0;e<n.length;e++)i.push(Number(n[e]));t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||A(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,u.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;this._drawnLayers[t._leaflet_id]=t,1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&!this._map._draggableMoved(e)&&(n=e);n&&(Ue(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var n,i,r=this._drawFirst;r;r=r.next)(n=r.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(fe(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order,n=e.next,i=e.prev;n&&((n.prev=i)?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,(this._drawLast.next=e).next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,n=e.next,i=e.prev;i&&((i.next=n)?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}});function li(t){return Ct?new ui(t):null}var ci=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),hi={_initContainer:function(){this._container=ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(si.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=ci("shape");fe(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=ci("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[l(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;se(e),t.removeInteractiveTarget(e),delete this._layers[l(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=ci("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=m(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=ci("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){le(t._container)},_bringToBack:function(t){ce(t._container)}},fi=Et?ci:q,di=si.extend({getEvents:function(){var t=si.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=fi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){se(this._container),Me(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){si.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ye(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=fi("path");t.options.className&&fe(e,t.options.className),t.options.interactive&&fe(e,"leaflet-interactive"),this._updateStyle(t),this._layers[l(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){se(t._path),t.removeInteractiveTarget(t._path),delete this._layers[l(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i=Math.max(Math.round(t._radiusY),1)||n,r="a"+n+","+i+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){le(t._path)},_bringToBack:function(t){ce(t._path)}});function pi(t){return Lt||Et?new di(t):null}Et&&di.include(hi),qe.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&li(t)||pi(t)}});var gi=Vn.extend({initialize:function(t,e){Vn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=G(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});di.create=fi,di.pointsToPath=Q,Nn.geometryToLayer=Bn,Nn.coordsToLatLng=Fn,Nn.coordsToLatLngs=Hn,Nn.latLngToCoords=Un,Nn.latLngsToCoords=Zn,Nn.getFeature=Xn,Nn.asFeature=Yn,qe.mergeOptions({boxZoom:!0});var mi=nn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Me(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){se(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Qt(),we(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ee(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=ae("div","leaflet-zoom-box",this._container),fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),n=e.getSize();ye(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(se(this._box),de(this._container,"leaflet-crosshair")),Kt(),Se(),Me(document,{contextmenu:je,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var e=new I(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});qe.addInitHook("addHandler","boxZoom",mi),qe.mergeOptions({doubleClickZoom:!0});var vi=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});qe.addInitHook("addHandler","doubleClickZoom",vi),qe.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var _i=nn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ln(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=G(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=r.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),h=l/(n.inertiaDeceleration*a),f=c.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),A(function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});qe.addInitHook("addHandler","dragging",_i),qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yi=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ee(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Me(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Me(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}je(t)}}});qe.addInitHook("addHandler","keyboard",yi),qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xi=nn.extend({addHooks:function(){Ee(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Me(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Be(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),i),je(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(0<this._delta?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});qe.addInitHook("addHandler","scrollWheelZoom",xi),qe.mergeOptions({tap:!0,tapTolerance:15});var bi=nn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Me(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ge(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&fe(n,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),Ee(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Me(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});St&&!wt&&qe.addInitHook("addHandler","tap",bi),qe.mergeOptions({touchZoom:St&&!rt,bounceAtZoomLimits:!0});var wi=nn.extend({addHooks:function(){fe(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Me(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend",this._onTouchEnd,this),Ge(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),r=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(r,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&r<1||this._zoom>e.getMaxZoom()&&1<r)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===r)return}else{var o=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===r&&0===o.x&&0===o.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),T(this._animRequest);var a=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=A(a,this,!0),Ge(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,T(this._animRequest),Me(document,"touchmove",this._onTouchMove),Me(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});qe.addInitHook("addHandler","touchZoom",wi),qe.BoxZoom=mi,qe.DoubleClickZoom=vi,qe.Drag=_i,qe.Keyboard=yi,qe.ScrollWheelZoom=xi,qe.Tap=bi,qe.TouchZoom=wi,Object.freeze=t,exports.version="1.3.4",exports.Control=Qe,exports.control=Ke,exports.Browser=Mt,exports.Evented=k,exports.Mixin=on,exports.Util=P,exports.Class=C,exports.Handler=nn,exports.extend=u,exports.bind=p,exports.stamp=l,exports.setOptions=h,exports.DomEvent=Ye,exports.DomUtil=Le,exports.PosAnimation=We,exports.Draggable=ln,exports.LineUtil=_n,exports.PolyUtil=bn,exports.Point=M,exports.point=R,exports.Bounds=z,exports.bounds=D,exports.Transformation=U,exports.transformation=Z,exports.Projection=An,exports.LatLng=j,exports.latLng=V,exports.LatLngBounds=I,exports.latLngBounds=G,exports.CRS=B,exports.GeoJSON=Nn,exports.geoJSON=qn,exports.geoJson=Qn,exports.Layer=Ln,exports.LayerGroup=En,exports.layerGroup=function(t,e){return new En(t,e)},exports.FeatureGroup=kn,exports.featureGroup=function(t){return new kn(t)},exports.ImageOverlay=Kn,exports.imageOverlay=function(t,e,n){return new Kn(t,e,n)},exports.VideoOverlay=Jn,exports.videoOverlay=function(t,e,n){return new Jn(t,e,n)},exports.DivOverlay=$n,exports.Popup=ti,exports.popup=function(t,e){return new ti(t,e)},exports.Tooltip=ei,exports.tooltip=function(t,e){return new ei(t,e)},exports.Icon=Mn,exports.icon=function(t){return new Mn(t)},exports.DivIcon=ni,exports.divIcon=function(t){return new ni(t)},exports.Marker=zn,exports.marker=function(t,e){return new zn(t,e)},exports.TileLayer=ri,exports.tileLayer=oi,exports.GridLayer=ii,exports.gridLayer=function(t){return new ii(t)},exports.SVG=di,exports.svg=pi,exports.Renderer=si,exports.Canvas=ui,exports.canvas=li,exports.Path=Dn,exports.CircleMarker=In,exports.circleMarker=function(t,e){return new In(t,e)},exports.Circle=Gn,exports.circle=function(t,e,n){return new Gn(t,e,n)},exports.Polyline=jn,exports.polyline=function(t,e){return new jn(t,e)},exports.Polygon=Vn,exports.polygon=function(t,e){return new Vn(t,e)},exports.Rectangle=gi,exports.rectangle=function(t,e){return new gi(t,e)},exports.Map=qe,exports.map=function(t,e){return new qe(t,e)};var Si=window.L;exports.noConflict=function(){return window.L=Si,this},window.L=exports}(exports)},hLQulRdj:function(t,exports){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII="},icISWNQa:function(t,exports,e){var n,i,r;
/*!
 * jQuery UI Effects Bounce 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[e("gCzbTwtZ"),e("r7NGCpeE"),e("pGJdemrO")],void 0===(r="function"==typeof(n=function($){return $.effects.define("bounce",function(t,e){var n,i,r,o=$(this),a=t.mode,s="hide"===a,u="show"===a,l=t.direction||"up",c=t.distance,h=t.times||5,f=2*h+(u||s?1:0),d=t.duration/f,p=t.easing,g="up"===l||"down"===l?"top":"left",m="up"===l||"left"===l,v=0,_=o.queue().length;for($.effects.createPlaceholder(o),r=o.css(g),c||(c=o["top"===g?"outerHeight":"outerWidth"]()/3),u&&((i={opacity:1})[g]=r,o.css("opacity",0).css(g,m?2*-c:2*c).animate(i,d,p)),s&&(c/=Math.pow(2,h-1)),(i={})[g]=r;v<h;v++)(n={})[g]=(m?"-=":"+=")+c,o.animate(n,d,p).animate(i,d,p),c=s?2*c:c/2;s&&((n={opacity:0})[g]=(m?"-=":"+=")+c,o.animate(n,d,p)),o.queue(e),$.effects.unshift(o,_,f+1)})})?n.apply(exports,i):n)||(t.exports=r)},ieFRrI0A:function(t,exports,e){var n,i;e("MNGAHOYH"),n=[e("gCzbTwtZ")],void 0===(i=function($){return function(){var m,e,v,_=0,i="error",r="info",o="success",a="warning",t={clear:function(t,e){var n=b();m||y(n),s(t,n,e)||function(t){for(var e=m.children(),n=e.length-1;0<=n;n--)s($(e[n]),t)}(n)},remove:function(t){var e=b();m||y(e),t&&0===$(":focus",t).length?w(t):m.children().length&&m.remove()},error:function(t,e,n){return u({type:i,iconClass:b().iconClasses.error,message:t,optionsOverride:n,title:e})},getContainer:y,info:function(t,e,n){return u({type:r,iconClass:b().iconClasses.info,message:t,optionsOverride:n,title:e})},options:{},subscribe:function(t){e=t},success:function(t,e,n){return u({type:o,iconClass:b().iconClasses.success,message:t,optionsOverride:n,title:e})},version:"2.1.4",warning:function(t,e,n){return u({type:a,iconClass:b().iconClasses.warning,message:t,optionsOverride:n,title:e})}};return t;function y(t,e){return t||(t=b()),(m=$("#"+t.containerId)).length||e&&(n=t,(m=$("<div/>").attr("id",n.containerId).addClass(n.positionClass)).appendTo($(n.target)),m=m),m;var n}function s(t,e,n){var i=!(!n||!n.force)&&n.force;return!(!t||!i&&0!==$(":focus",t).length||(t[e.hideMethod]({duration:e.hideDuration,easing:e.hideEasing,complete:function(){w(t)}}),0))}function x(t){e&&e(t)}function u(e){var r=b(),t=e.iconClass||r.iconClass;if(void 0!==e.optionsOverride&&(r=$.extend(r,e.optionsOverride),t=e.optionsOverride.iconClass||t),!function(t,e){if(t.preventDuplicates){if(e.message===v)return!0;v=e.message}return!1}(r,e)){_++,m=y(r,!0);var o=null,a=$("<div/>"),n=$("<div/>"),i=$("<div/>"),s=$("<div/>"),u=$(r.closeHtml),l={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:_,state:"visible",startTime:new Date,options:r,map:e};return e.iconClass&&a.addClass(r.toastClass).addClass(t),function(){if(e.title){var t=e.title;r.escapeHtml&&(t=h(e.title)),n.append(t).addClass(r.titleClass),a.append(n)}}(),function(){if(e.message){var t=e.message;r.escapeHtml&&(t=h(e.message)),i.append(t).addClass(r.messageClass),a.append(i)}}(),r.closeButton&&(u.addClass(r.closeClass).attr("role","button"),a.prepend(u)),r.progressBar&&(s.addClass(r.progressClass),a.prepend(s)),r.rtl&&a.addClass("rtl"),r.newestOnTop?m.prepend(a):m.append(a),function(){var t="";switch(e.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive"}a.attr("aria-live",t)}(),a.hide(),a[r.showMethod]({duration:r.showDuration,easing:r.showEasing,complete:r.onShown}),0<r.timeOut&&(o=setTimeout(f,r.timeOut),l.maxHideTime=parseFloat(r.timeOut),l.hideEta=(new Date).getTime()+l.maxHideTime,r.progressBar&&(l.intervalId=setInterval(g,10))),r.closeOnHover&&a.hover(p,d),!r.onclick&&r.tapToDismiss&&a.click(f),r.closeButton&&u&&u.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),r.onCloseClick&&r.onCloseClick(t),f(!0)}),r.onclick&&a.click(function(t){r.onclick(t),f()}),x(c),r.debug&&console&&console.log(c),a}function h(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(t){var e=t&&!1!==r.closeMethod?r.closeMethod:r.hideMethod,n=t&&!1!==r.closeDuration?r.closeDuration:r.hideDuration,i=t&&!1!==r.closeEasing?r.closeEasing:r.hideEasing;if(!$(":focus",a).length||t)return clearTimeout(l.intervalId),a[e]({duration:n,easing:i,complete:function(){w(a),clearTimeout(o),r.onHidden&&"hidden"!==c.state&&r.onHidden(),c.state="hidden",c.endTime=new Date,x(c)}})}function d(){(0<r.timeOut||0<r.extendedTimeOut)&&(o=setTimeout(f,r.extendedTimeOut),l.maxHideTime=parseFloat(r.extendedTimeOut),l.hideEta=(new Date).getTime()+l.maxHideTime)}function p(){clearTimeout(o),l.hideEta=0,a.stop(!0,!0)[r.showMethod]({duration:r.showDuration,easing:r.showEasing})}function g(){var t=(l.hideEta-(new Date).getTime())/l.maxHideTime*100;s.width(t+"%")}}function b(){return $.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},t.options)}function w(t){m||(m=y()),t.is(":visible")||(t.remove(),t=null,0===m.children().length&&(m.remove(),v=void 0))}}()}.apply(exports,n))||(t.exports=i)},kjzo3jwQ:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n,i=e("LTzf75YS"),r=(n=i)&&n.__esModule?n:{default:n};var o,a="clearTimeout",s=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-l)),i=setTimeout(t,n);return l=e,i},u=function(t,e){return t+(t?e[0].toUpperCase()+e.substr(1):e)+"AnimationFrame"};r.default&&["","webkit","moz","o","ms"].some(function(t){var e=u(t,"request");if(e in window)return a=u(t,"cancel"),s=function(t){return window[e](t)}});var l=(new Date).getTime();(o=function(t){return s(t)}).cancel=function(t){window[a]&&"function"==typeof window[a]&&window[a](t)},exports.default=o,t.exports=exports.default},pBgNkVlI:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(t){var e=(0,r.default)(t);return e&&e.defaultView||e.parentWindow};var n,i=e("BirbXSOg"),r=(n=i)&&n.__esModule?n:{default:n};t.exports=exports.default},pGJdemrO:function(t,exports,e){var n,i,r;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */i=[e("gCzbTwtZ"),e("r7NGCpeE")],void 0===(r="function"==typeof(n=function($){var n,s="ui-effects-",u="ui-effects-style",h="ui-effects-animated",i=$;return $.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(c,h){var l,f=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],d=c.Color=function(t,e,n,i){return new c.Color.fn.parse(t,e,n,i)},p={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},g={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=d.support={},e=c("<p>")[0],m=c.each;function v(t,e,n){var i=g[e.type]||{};return null==t?n||!e.def?null:e.def:(t=i.floor?~~t:parseFloat(t),isNaN(t)?e.def:i.mod?(t+i.mod)%i.mod:t<0?0:i.max<t?i.max:t)}function s(a){var s=d(),u=s._rgba=[];return a=a.toLowerCase(),m(t,function(t,e){var n,i=e.re.exec(a),r=i&&e.parse(i),o=e.space||"rgba";if(r)return n=s[o](r),s[p[o].cache]=n[p[o].cache],u=s._rgba=n._rgba,!1}),u.length?("0,0,0,0"===u.join()&&c.extend(u,l.transparent),s):l[a]}function u(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}e.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=-1<e.style.backgroundColor.indexOf("rgba"),m(p,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),d.fn=c.extend(d.prototype,{parse:function(r,t,e,n){if(r===h)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=c(r).css(t),t=h);var o=this,i=c.type(r),a=this._rgba=[];return t!==h&&(r=[r,t,e,n],i="array"),"string"===i?this.parse(s(r)||l._default):"array"===i?(m(p.rgba.props,function(t,e){a[e.idx]=v(r[e.idx],e)}),this):"object"===i?(m(p,r instanceof d?function(t,e){r[e.cache]&&(o[e.cache]=r[e.cache].slice())}:function(t,n){var i=n.cache;m(n.props,function(t,e){if(!o[i]&&n.to){if("alpha"===t||null==r[t])return;o[i]=n.to(o._rgba)}o[i][e.idx]=v(r[t],e,!0)}),o[i]&&c.inArray(null,o[i].slice(0,3))<0&&(o[i][3]=1,n.from&&(o._rgba=n.from(o[i])))}),this):void 0},is:function(t){var r=d(t),o=!0,a=this;return m(p,function(t,e){var n,i=r[e.cache];return i&&(n=a[e.cache]||e.to&&e.to(a._rgba)||[],m(e.props,function(t,e){if(null!=i[e.idx])return o=i[e.idx]===n[e.idx]})),o}),o},_space:function(){var n=[],i=this;return m(p,function(t,e){i[e.cache]&&n.push(t)}),n.pop()},transition:function(t,a){var s=d(t),e=s._space(),n=p[e],i=0===this.alpha()?d("transparent"):this,u=i[n.cache]||n.to(i._rgba),l=u.slice();return s=s[n.cache],m(n.props,function(t,e){var n=e.idx,i=u[n],r=s[n],o=g[e.type]||{};null!==r&&(l[n]=null===i?r:(o.mod&&(r-i>o.mod/2?i+=o.mod:i-r>o.mod/2&&(i-=o.mod)),v((r-i)*a+i,e)))}),this[e](l)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),i=d(t)._rgba;return d(c.map(e,function(t,e){return(1-n)*i[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=c.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=c.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+c.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),d.fn.parse.prototype=d.fn,p.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=t[3],s=Math.max(i,r,o),u=Math.min(i,r,o),l=s-u,c=s+u,h=.5*c;return e=u===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===l?0:h<=.5?l/c:l/(2-c),[Math.round(e)%360,n,h,null==a?1:a]},p.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],i=t[2],r=t[3],o=i<=.5?i*(1+n):i+n-i*n,a=2*i-o;return[Math.round(255*u(a,o,e+1/3)),Math.round(255*u(a,o,e)),Math.round(255*u(a,o,e-1/3)),r]},m(p,function(u,t){var n=t.props,a=t.cache,s=t.to,l=t.from;d.fn[u]=function(t){if(s&&!this[a]&&(this[a]=s(this._rgba)),t===h)return this[a].slice();var e,i=c.type(t),r="array"===i||"object"===i?t:arguments,o=this[a].slice();return m(n,function(t,e){var n=r["object"===i?t:e.idx];null==n&&(n=o[e.idx]),o[e.idx]=v(n,e)}),l?((e=d(l(o)))[a]=o,e):d(o)},m(n,function(a,s){d.fn[a]||(d.fn[a]=function(t){var e,n=c.type(t),i="alpha"===a?this._hsla?"hsla":"rgba":u,r=this[i](),o=r[s.idx];return"undefined"===n?o:("function"===n&&(t=t.call(this,o),n=c.type(t)),null==t&&s.empty?this:("string"===n&&(e=f.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),r[s.idx]=t,this[i](r)))})})}),d.hook=function(t){var e=t.split(" ");m(e,function(t,o){c.cssHooks[o]={set:function(t,e){var n,i,r="";if("transparent"!==e&&("string"!==c.type(e)||(n=s(e)))){if(e=d(n||e),!a.rgba&&1!==e._rgba[3]){for(i="backgroundColor"===o?t.parentNode:t;(""===r||"transparent"===r)&&i&&i.style;)try{r=c.css(i,"backgroundColor"),i=i.parentNode}catch(t){}e=e.blend(r&&"transparent"!==r?r:"_default")}e=e.toRgbaString()}try{t.style[o]=e}catch(t){}}},c.fx.step[o]=function(t){t.colorInit||(t.start=d(t.elem,o),t.end=d(t.end),t.colorInit=!0),c.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})},d.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),c.cssHooks.borderColor={expand:function(n){var i={};return m(["Top","Right","Bottom","Left"],function(t,e){i["border"+e+"Color"]=n}),i}},l=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){var o,r,a,s=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function l(t){var e,n,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)"string"==typeof i[e=i[n]]&&(r[$.camelCase(e)]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){$.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(i.style(t.elem,e,t.end),t.setAttr=!0)}}),$.fn.addBack||($.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),$.effects.animateClass=function(r,t,e,n){var o=$.speed(t,e,n);return this.queue(function(){var t,n=$(this),e=n.attr("class")||"",i=o.children?n.find("*").addBack():n;i=i.map(function(){return{el:$(this),start:l(this)}}),(t=function(){$.each(s,function(t,e){r[e]&&n[e+"Class"](r[e])})})(),i=i.map(function(){return this.end=l(this.el[0]),this.diff=function(t,e){var n,i,r={};for(n in e)i=e[n],t[n]!==i&&(u[n]||!$.fx.step[n]&&isNaN(parseFloat(i))||(r[n]=i));return r}(this.start,this.end),this}),n.attr("class",e),i=i.map(function(){var t=this,e=$.Deferred(),n=$.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),$.when.apply($,i.get()).done(function(){t(),$.each(arguments,function(){var e=this.el;$.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(n[0])})})},$.fn.extend({addClass:(a=$.fn.addClass,function(t,e,n,i){return e?$.effects.animateClass.call(this,{add:t},e,n,i):a.apply(this,arguments)}),removeClass:(r=$.fn.removeClass,function(t,e,n,i){return 1<arguments.length?$.effects.animateClass.call(this,{remove:t},e,n,i):r.apply(this,arguments)}),toggleClass:(o=$.fn.toggleClass,function(t,e,n,i,r){return"boolean"==typeof e||void 0===e?n?$.effects.animateClass.call(this,e?{add:t}:{remove:t},n,i,r):o.apply(this,arguments):$.effects.animateClass.call(this,{toggle:t},e,n,i)}),switchClass:function(t,e,n,i,r){return $.effects.animateClass.call(this,{add:e,remove:t},n,i,r)}})}(),function(){var e,n,i,r;function c(t,e,n,i){return $.isPlainObject(t)&&(t=(e=t).effect),t={effect:t},null==e&&(e={}),$.isFunction(e)&&(i=e,n=null,e={}),("number"==typeof e||$.fx.speeds[e])&&(i=n,n=e,e={}),$.isFunction(n)&&(i=n,n=null),e&&$.extend(t,e),n=n||e.duration,t.duration=$.fx.off?0:"number"==typeof n?n:n in $.fx.speeds?$.fx.speeds[n]:$.fx.speeds._default,t.complete=i||e.complete,t}function o(t){return!(t&&"number"!=typeof t&&!$.fx.speeds[t])||"string"==typeof t&&!$.effects.effect[t]||!!$.isFunction(t)||"object"==typeof t&&!t.effect}function a(t,e){var n=e.outerWidth(),i=e.outerHeight(),r=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,i,0];return{top:parseFloat(r[1])||0,right:"auto"===r[2]?n:parseFloat(r[2]),bottom:"auto"===r[3]?i:parseFloat(r[3]),left:parseFloat(r[4])||0}}$.expr&&$.expr.filters&&$.expr.filters.animated&&($.expr.filters.animated=(e=$.expr.filters.animated,function(t){return!!$(t).data(h)||e(t)})),!1!==$.uiBackCompat&&$.extend($.effects,{save:function(t,e){for(var n=0,i=e.length;n<i;n++)null!==e[n]&&t.data(s+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,i=0,r=e.length;i<r;i++)null!==e[i]&&(n=t.data(s+e[i]),t.css(e[i],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var i={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return n.wrap(t),(n[0]===r||$.contains(n[0],r))&&$(r).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):($.extend(i,{position:n.css("position"),zIndex:n.css("z-index")}),$.each(["top","left","bottom","right"],function(t,e){i[e]=n.css(e),isNaN(parseInt(i[e],10))&&(i[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(i).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===e||$.contains(t[0],e))&&$(e).trigger("focus")),t}}),$.extend($.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),$.effects.effect[t]=n,$.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var i="horizontal"!==n?(e||100)/100:1,r="vertical"!==n?(e||100)/100:1;return{height:t.height()*r,width:t.width()*i,outerHeight:t.outerHeight()*r,outerWidth:t.outerWidth()*i}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var i=t.queue();1<e&&i.splice.apply(i,[1,0].concat(i.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(u,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(u)||"",t.removeData(u)},mode:function(t,e){var n=t.is(":hidden");return"toggle"===e&&(e=n?"show":"hide"),(n?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var n,i;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=t[1]/e.width}return{x:i,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=$("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(s+"placeholder",e)),t.css({position:n,left:i.left,top:i.top}),e},removePlaceholder:function(t){var e=s+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){$.effects.restoreStyle(t),$.effects.removePlaceholder(t)},setTransition:function(i,t,r,o){return o=o||{},$.each(t,function(t,e){var n=i.cssUnit(e);0<n[0]&&(o[e]=n[0]*r+n[1])}),o}}),$.fn.extend({effect:function(){var i=c.apply(this,arguments),r=$.effects.effect[i.effect],o=r.mode,t=i.queue,e=t||"fx",a=i.complete,s=i.mode,u=[],n=function(t){var e=$(this),n=$.effects.mode(e,s)||o;e.data(h,!0),u.push(n),o&&("show"===n||n===o&&"hide"===n)&&e.show(),o&&"none"===n||$.effects.saveStyle(e),$.isFunction(t)&&t()};if($.fx.off||!r)return s?this[s](i.duration,a):this.each(function(){a&&a.call(this)});function l(t){var e=$(this);function n(){$.isFunction(a)&&a.call(e[0]),$.isFunction(t)&&t()}i.mode=u.shift(),!1===$.uiBackCompat||o?"none"===i.mode?(e[s](),n()):r.call(e[0],i,function(){e.removeData(h),$.effects.cleanUp(e),"hide"===i.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===s:"show"===s)?(e[s](),n()):r.call(e[0],i,n)}return!1===t?this.each(n).each(l):this.queue(e,n).queue(e,l)},show:(r=$.fn.show,function(t){if(o(t))return r.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(i=$.fn.hide,function(t){if(o(t))return i.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(n=$.fn.toggle,function(t){if(o(t)||"boolean"==typeof t)return n.apply(this,arguments);var e=c.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),i=[];return $.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(i=[parseFloat(n),e])}),i},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):a(this.css("clip"),this)},transfer:function(t,e){var n=$(this),i=$(t.to),r="fixed"===i.css("position"),o=$("body"),a=r?o.scrollTop():0,s=r?o.scrollLeft():0,u=i.offset(),l={top:u.top-a,left:u.left-s,height:i.innerHeight(),width:i.innerWidth()},c=n.offset(),h=$("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:c.top-a,left:c.left-s,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),$.isFunction(e)&&e()})}}),$.fx.step.clip=function(t){t.clipInit||(t.start=$(t.elem).cssClip(),"string"==typeof t.end&&(t.end=a(t.end,t.elem)),t.clipInit=!0),$(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),n={},$.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){n[t]=function(t){return Math.pow(t,e+2)}}),$.extend(n,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),$.each(n,function(t,e){$.easing["easeIn"+t]=e,$.easing["easeOut"+t]=function(t){return 1-e(1-t)},$.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}),$.effects})?n.apply(exports,i):n)||(t.exports=r)},qfB6P2cO:function(t,exports,e){"use strict";exports.__esModule=!0,exports.default=function(t){return Math.max(t.documentElement.offsetHeight||0,t.height||0,t.body.scrollHeight||0,t.body.offsetHeight||0)},t.exports=exports.default},r7NGCpeE:function(t,exports,e){var n,i,r;i=[e("gCzbTwtZ")],void 0===(r="function"==typeof(n=function($){return $.ui=$.ui||{},$.ui.version="1.12.1"})?n.apply(exports,i):n)||(t.exports=r)},rHbN75bt:function(t,exports,e){var n,i,r;r=this,n=[e("/8dZfPfB")],void 0===(i=function(t){return r.Rickshaw=(_=t,function(t){var e=Object.prototype.toString,i="Null",r="Undefined",o="Boolean",a="Number",s="String",u="Object",n="[object Function]";function h(t){return e.call(t)===n}function f(t){if(function(t){switch(t){case null:return i;case void 0:return r}switch(typeof t){case"boolean":return o;case"number":return a;case"string":return s}return u}(t)!==u)throw new TypeError;var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}var l=Array.prototype.slice;function d(t,e){var n=t;return function(){var t=c([p(n,this)],arguments);return e.apply(this,t)}}function c(t,e){for(var n=t.length,i=e.length;i--;)t[n+i]=e[i];return t}function p(t,i){if(arguments.length<2&&void 0===t)return this;var r=t,o=l.call(arguments,2);return function(){var t,e,n=(t=o,e=arguments,c(t=l.call(t,0),e));return r.apply(i,n)}}var g=function(){},m=function(){var c=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}();function o(){}return{create:function(){var t=null,e=[].slice.apply(arguments);function n(){this.initialize.apply(this,arguments)}if(h(e[0])&&(t=e.shift()),function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(n,m.Methods),n.superclass=t,n.subclasses=[],t){o.prototype=t.prototype,n.prototype=new o;try{t.subclasses.push(n)}catch(t){}}for(var i=0,r=e.length;i<r;i++)n.addMethods(e[i]);return n.prototype.initialize||(n.prototype.initialize=g),n.prototype.constructor=n},Methods:{addMethods:function(t){var e,n,i=this.superclass&&this.superclass.prototype,r=f(t);c&&(t.toString!=Object.prototype.toString&&r.push("toString"),t.valueOf!=Object.prototype.valueOf&&r.push("valueOf"));for(var o=0,a=r.length;o<a;o++){var s=r[o],u=t[s];if(i&&h(u)&&"$super"==(e=u,n=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(","),1!=n.length||n[0]?n:[])[0]){var l=u;(u=d(function(t){return function(){return i[t].apply(this,arguments)}}(s),l)).valueOf=p(l.valueOf,l),u.toString=p(l.toString,l)}this.prototype[s]=u}return this}}}}();t.exports?t.exports.Class=m:t.Class=m}(u={version:"1.6.5",namespace:function(t,e){for(var n=t.split("."),i=u,r=1,o=n.length;r<o;r++){var a=n[r];i[a]=i[a]||{},i=i[a]}return i},keys:function(t){var e=[];for(var n in t)e.push(n);return e},extend:function(t,e){for(var n in e)t[n]=e[n];return t},clone:function(t){return JSON.parse(JSON.stringify(t))}}),u.namespace("Rickshaw.Compat.ClassList"),u.Compat.ClassList=function(){"undefined"==typeof document||"classList"in document.createElement("a")||function(t){"use strict";var e="classList",n="prototype",i=(t.HTMLElement||t.Element)[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},u=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},l=function(t){for(var e=o.call(t.className),n=e?e.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){t.className=this.toString()}},c=l[n]=[],h=function(){return new l(this)};if(s[n]=Error[n],c.item=function(t){return this[t]||null},c.contains=function(t){return-1!==u(this,t+="")},c.add=function(t){-1===u(this,t+="")&&(this.push(t),this._updateClassName())},c.remove=function(t){var e=u(this,t+="");-1!==e&&(this.splice(e,1),this._updateClassName())},c.toggle=function(t){-1===u(this,t+="")?this.add(t):this.remove(t)},c.toString=function(){return this.join(" ")},r.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{r.defineProperty(i,e,f)}catch(t){-2146823252===t.number&&(f.enumerable=!1,r.defineProperty(i,e,f))}}else r[n].__defineGetter__&&i.__defineGetter__(e,h)}(window)},("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new u.Compat.ClassList,u.namespace("Rickshaw.Graph"),u.Graph=function(t){var o=this;this.initialize=function(t){if(!t.element)throw"Rickshaw.Graph needs a reference to an element";if(1!==t.element.nodeType)throw"Rickshaw.Graph element was defined but not an HTML element";this.element=t.element,this.series=t.series,this.window={},this.updateCallbacks=[],this.configureCallbacks=[],this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1,xScale:void 0,yScale:void 0,stack:!0},this._loadRenderers(),this.configure(t),this.setSeries(t.series),this.setSize({width:t.width,height:t.height}),this.element.classList.add("rickshaw_graph"),this.vis=_.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height),this.discoverRange()},this._loadRenderers=function(){for(var t in u.Graph.Renderer)if(t&&u.Graph.Renderer.hasOwnProperty(t)){var e=u.Graph.Renderer[t];e&&e.prototype&&e.prototype.render&&o.registerRenderer(new e({graph:o}))}},this.validateSeries=function(t){if(!(Array.isArray(t)||t instanceof u.Series))throw"series is not an array: "+Object.prototype.toString.apply(t);t.forEach(function(t){if(!(t instanceof Object))throw"series element is not an object: "+t;if(!t.data)throw"series has no data: "+JSON.stringify(t);if(!Array.isArray(t.data))throw"series data is not an array: "+JSON.stringify(t.data);if(0<t.data.length){var e=t.data[0].x,n=t.data[0].y;if("number"!=typeof e||"number"!=typeof n&&null!==n)throw"x and y properties of points should be numbers instead of "+typeof e+" and "+typeof n}if(3<=t.data.length&&(t.data[2].x<t.data[1].x||t.data[1].x<t.data[0].x||t.data[t.data.length-1].x<t.data[0].x))throw"series data needs to be sorted on x values for series name: "+t.name},this)},this.setSeries=function(t){this.validateSeries(t),this.series=t,this.series.active=function(){return o.series.filter(function(t){return!t.disabled})}},this.dataDomain=function(){var t=this.series.map(function(t){return t.data});return[_.min(t.map(function(t){return t[0].x})),_.max(t.map(function(t){return t[t.length-1].x}))]},this.discoverRange=function(){var t=this.renderer.domain();this.x=(this.xScale||_.scale.linear()).copy().domain(t.x).range([0,this.width]),this.y=(this.yScale||_.scale.linear()).copy().domain(t.y).range([this.height,0]),this.x.magnitude=_.scale.linear().domain([t.x[0]-t.x[0],t.x[1]-t.x[0]]).range([0,this.width]),this.y.magnitude=_.scale.linear().domain([t.y[0]-t.y[0],t.y[1]-t.y[0]]).range([0,this.height])},this.render=function(){this.stackData(),this.discoverRange(),this.renderer.render(),this.updateCallbacks.forEach(function(t){t()})},this.update=this.render,this.stackData=function(){var e,i=this.series.active().map(function(t){return t.data}).map(function(t){return t.filter(function(t){return this._slice(t)},this)},this),n=this.preserve;if(n||this.series.forEach(function(t){t.scale&&(n=!0)}),i=n?u.clone(i):i,this.series.active().forEach(function(e,t){if(e.scale){var n=i[t];n&&n.forEach(function(t){t.y=e.scale(t.y)})}}),this.stackData.hooks.data.forEach(function(t){i=t.f.apply(o,[i])}),!this.renderer.unstack){this._validateStackable();var t=_.layout.stack();t.offset(o.offset),e=t(i)}e=e||i,this.renderer.unstack&&e.forEach(function(t){t.forEach(function(t){t.y0=void 0===t.y0?0:t.y0})}),this.stackData.hooks.after.forEach(function(t){e=t.f.apply(o,[i])});var r=0;return this.series.forEach(function(t){t.disabled||(t.stack=e[r++])}),this.stackedData=e},this._validateStackable=function(){var e;this.series.forEach(function(t){if((e=e||t.data.length)&&t.data.length!=e)throw"stacked series cannot have differing numbers of points: "+e+" vs "+t.data.length+"; see Rickshaw.Series.fill()"},this)},this.stackData.hooks={data:[],after:[]},this._slice=function(t){if(this.window.xMin||this.window.xMax){var e=!0;return this.window.xMin&&t.x<this.window.xMin&&(e=!1),this.window.xMax&&t.x>this.window.xMax&&(e=!1),e}return!0},this.onUpdate=function(t){this.updateCallbacks.push(t)},this.onConfigure=function(t){this.configureCallbacks.push(t)},this.registerRenderer=function(t){this._renderers=this._renderers||{},this._renderers[t.name]=t},this.configure=function(e){this.config=this.config||{},(e.width||e.height)&&this.setSize(e),u.keys(this.defaults).forEach(function(t){this.config[t]=t in e?e[t]:t in this?this[t]:this.defaults[t]},this),u.keys(this.config).forEach(function(t){this[t]=this.config[t]},this),"stack"in e&&(e.unstack=!e.stack);var t=e.renderer||this.renderer&&this.renderer.name||"stack";this.setRenderer(t,e),this.configureCallbacks.forEach(function(t){t(e)})},this.setRenderer=function(t,e){if("function"==typeof t)this.renderer=new t({graph:o}),this.registerRenderer(this.renderer);else{if(!this._renderers[t])throw"couldn't find renderer "+t;this.renderer=this._renderers[t]}"object"==typeof e&&this.renderer.configure(e)},this.setSize=function(t){if((t=t||{}).width&&t.height)this.width=t.width,this.height=t.height;else{if("undefined"!=typeof window)var e=window.getComputedStyle(this.element,null),n=parseInt(e.getPropertyValue("width"),10),i=parseInt(e.getPropertyValue("height"),10);this.width=t.width||n||400,this.height=t.height||i||250}this.vis&&this.vis.attr("width",this.width).attr("height",this.height)},this.initialize(t)},u.namespace("Rickshaw.Fixtures.Color"),u.Fixtures.Color=function(){this.schemes={},this.schemes.spectrum14=["#ecb796","#dc8f70","#b2a470","#92875a","#716c49","#d2ed82","#bbe468","#a1d05d","#e7cbe6","#d8aad6","#a888c2","#9dc2d3","#649eb9","#387aa3"].reverse(),this.schemes.spectrum2000=["#57306f","#514c76","#646583","#738394","#6b9c7d","#84b665","#a7ca50","#bfe746","#e2f528","#fff726","#ecdd00","#d4b11d","#de8800","#de4800","#c91515","#9a0000","#7b0429","#580839","#31082b"],this.schemes.spectrum2001=["#2f243f","#3c2c55","#4a3768","#565270","#6b6b7c","#72957f","#86ad6e","#a1bc5e","#b8d954","#d3e04e","#ccad2a","#cc8412","#c1521d","#ad3821","#8a1010","#681717","#531e1e","#3d1818","#320a1b"],this.schemes.classic9=["#423d4f","#4a6860","#848f39","#a2b73c","#ddcb53","#c5a32f","#7d5836","#963b20","#7c2626","#491d37","#2f254a"].reverse(),this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"},this.schemes.colorwheel=["#b5b6a9","#858772","#785f43","#96557e","#4682b4","#65b9ac","#73c03a","#cb513a"].reverse(),this.schemes.cool=["#5e9d2f","#73c03a","#4682b4","#7bc3b8","#a9884e","#c1b266","#a47493","#c09fb5"],this.schemes.munin=["#00cc00","#0066b3","#ff8000","#ffcc00","#330099","#990099","#ccff00","#ff0000","#808080","#008f00","#00487d","#b35a00","#b38f00","#6b006b","#8fb300","#b30000","#bebebe","#80ff80","#80c9ff","#ffc080","#ffe680","#aa80ff","#ee00cc","#ff8080","#666600","#ffbfff","#00ffcc","#cc6699","#999900"]},u.namespace("Rickshaw.Fixtures.RandomData"),u.Fixtures.RandomData=function(a){a=a||1;var e=200,s=Math.floor((new Date).getTime()/1e3);this.addData=function(t){var i=100*Math.random()+15+e,r=t[0].length,o=1;t.forEach(function(t){var e=20*Math.random(),n=i/25+o+++15*(Math.cos(r*o*11/960)+2)+7*(Math.cos(r/7)+2)+1*(Math.cos(r/17)+2);t.push({x:r*a+s,y:n+e})}),e=.85*i},this.removeData=function(t){t.forEach(function(t){t.shift()}),s+=a}},u.namespace("Rickshaw.Fixtures.Time"),u.Fixtures.Time=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getUTCMinutes()+"m"}},{name:"15 second",seconds:15,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getUTCSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getUTCMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getUTCMilliseconds()+"ms"}}],this.unit=function(e){return this.units.filter(function(t){return e==t.name}).shift()},this.formatDate=function(t){return _.time.format("%b %e")(t)},this.formatTime=function(t){return t.toUTCString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,i;if("month"!=e.name)return"year"==e.name?(n=new Date(1e3*t),Date.UTC(n.getUTCFullYear(),0)/1e3==t?t:(i=n.getUTCFullYear()+1,Date.UTC(i,0)/1e3)):Math.ceil(t/e.seconds)*e.seconds;if(n=new Date(1e3*t),Date.UTC(n.getUTCFullYear(),n.getUTCMonth())/1e3==t)return t;i=n.getUTCFullYear();var r=n.getUTCMonth();return 11==r?(r=0,i+=1):r+=1,Date.UTC(i,r)/1e3}},u.namespace("Rickshaw.Fixtures.Time.Local"),u.Fixtures.Time.Local=function(){var e=this;this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.units=[{name:"decade",seconds:315576e3,formatter:function(t){return 10*parseInt(t.getFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(t){return t.getFullYear()}},{name:"month",seconds:2635200,formatter:function(t){return e.months[t.getMonth()]}},{name:"week",seconds:604800,formatter:function(t){return e.formatDate(t)}},{name:"day",seconds:86400,formatter:function(t){return t.getDate()}},{name:"6 hour",seconds:21600,formatter:function(t){return e.formatTime(t)}},{name:"hour",seconds:3600,formatter:function(t){return e.formatTime(t)}},{name:"15 minute",seconds:900,formatter:function(t){return e.formatTime(t)}},{name:"minute",seconds:60,formatter:function(t){return t.getMinutes()}},{name:"15 second",seconds:15,formatter:function(t){return t.getSeconds()+"s"}},{name:"second",seconds:1,formatter:function(t){return t.getSeconds()+"s"}},{name:"decisecond",seconds:.1,formatter:function(t){return t.getMilliseconds()+"ms"}},{name:"centisecond",seconds:.01,formatter:function(t){return t.getMilliseconds()+"ms"}}],this.unit=function(e){return this.units.filter(function(t){return e==t.name}).shift()},this.formatDate=function(t){return _.time.format("%b %e")(t)},this.formatTime=function(t){return t.toString().match(/(\d+:\d+):/)[1]},this.ceil=function(t,e){var n,i,r;if("day"==e.name){var o=new Date(1e3*(t+e.seconds-1)),a=new Date(0);return a.setFullYear(o.getFullYear()),a.setMonth(o.getMonth()),a.setDate(o.getDate()),a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a.getTime()/1e3}if("month"!=e.name)return"year"==e.name?(n=new Date(1e3*t),new Date(n.getUTCFullYear(),0).getTime()/1e3==t?t:(i=n.getFullYear()+1,new Date(i,0).getTime()/1e3)):(r=60*new Date(1e3*t).getTimezoneOffset(),Math.ceil((t-r)/e.seconds)*e.seconds+r);if(n=new Date(1e3*t),new Date(n.getFullYear(),n.getMonth()).getTime()/1e3==t)return t;i=n.getFullYear();var s=n.getMonth();return 11==s?(s=0,i+=1):s+=1,new Date(i,s).getTime()/1e3}},u.namespace("Rickshaw.Fixtures.Number"),u.Fixtures.Number.formatKMBT=function(t){var e=Math.abs(t);return 1e12<=e?t/1e12+"T":1e9<=e?t/1e9+"B":1e6<=e?t/1e6+"M":1e3<=e?t/1e3+"K":e<1&&0<e?t.toFixed(2):0===e?"":t},u.Fixtures.Number.formatBase1024KMGTP=function(t){var e=Math.abs(t);return 0x4000000000000<=e?t/0x4000000000000+"P":1099511627776<=e?t/1099511627776+"T":1073741824<=e?t/1073741824+"G":1048576<=e?t/1048576+"M":1024<=e?t/1024+"K":e<1&&0<e?t.toFixed(2):0===e?"":t},u.namespace("Rickshaw.Color.Palette"),u.Color.Palette=function(t){var e=new u.Fixtures.Color;if(t=t||{},this.schemes={},this.scheme=e.schemes[t.scheme]||t.scheme||e.schemes.colorwheel,this.runningIndex=0,this.generatorIndex=0,t.interpolatedStopCount){var n,i,r=this.scheme.length-1,o=[];for(n=0;n<r;n++){o.push(this.scheme[n]);var a=_.interpolateHsl(this.scheme[n],this.scheme[n+1]);for(i=1;i<t.interpolatedStopCount;i++)o.push(a(1/t.interpolatedStopCount*i))}o.push(this.scheme[this.scheme.length-1]),this.scheme=o}this.rotateCount=this.scheme.length,this.color=function(t){return this.scheme[t]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"},this.interpolateColor=function(){var t;if(Array.isArray(this.scheme))return this.generatorIndex==2*this.rotateCount-1?(t=_.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(.5),this.generatorIndex=0,this.rotateCount*=2):(t=_.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(.5),this.generatorIndex++),this.scheme.push(t),t}},u.namespace("Rickshaw.Graph.Ajax"),u.Graph.Ajax=u.Class.create({initialize:function(t){this.dataURL=t.dataURL,this.onData=t.onData||function(t){return t},this.onComplete=t.onComplete||function(){},this.onError=t.onError||function(){},this.args=t,this.request()},request:function(){jQuery.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL),this.onError(this)},success:function(t,e){t=this.onData(t),this.args.series=this._splice({data:t,series:this.args.series}),this.graph=this.graph||new u.Graph(this.args),this.graph.render(),this.onComplete(this)},_splice:function(t){var e=t.data,n=t.series;return t.series?(n.forEach(function(n){var i=n.key||n.name;if(!i)throw"series needs a key or a name";e.forEach(function(e){var t=e.key||e.name;if(!t)throw"data needs a key or a name";i==t&&["color","name","data"].forEach(function(t){e[t]&&(n[t]=e[t])})})}),n):e}}),u.namespace("Rickshaw.Graph.Annotate"),u.Graph.Annotate=function(t){this.graph=t.graph,this.elements={timeline:t.element};var s=this;this.data={},this.elements.timeline.classList.add("rickshaw_annotation_timeline"),this.add=function(t,e,n){s.data[t]=s.data[t]||{boxes:[]},s.data[t].boxes.push({content:e,end:n})},this.update=function(){u.keys(s.data).forEach(function(t){var o=s.data[t],a=s.graph.x(t);if(a<0||a>s.graph.x.range()[1])return o.element&&(o.line.classList.add("offscreen"),o.element.style.display="none"),void o.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.add("offscreen")});if(!o.element){var e=o.element=document.createElement("div");e.classList.add("annotation"),this.elements.timeline.appendChild(e),e.addEventListener("click",function(t){e.classList.toggle("active"),o.line.classList.toggle("active"),o.boxes.forEach(function(t){t.rangeElement&&t.rangeElement.classList.toggle("active")})},!1)}o.element.style.left=a+"px",o.element.style.display="block",o.boxes.forEach(function(t){var e=t.element;if(e||((e=t.element=document.createElement("div")).classList.add("content"),e.innerHTML=t.content,o.element.appendChild(e),o.line=document.createElement("div"),o.line.classList.add("annotation_line"),s.graph.element.appendChild(o.line),t.end&&(t.rangeElement=document.createElement("div"),t.rangeElement.classList.add("annotation_range"),s.graph.element.appendChild(t.rangeElement))),t.end){var n=a,i=Math.min(s.graph.x(t.end),s.graph.x.range()[1]);i<n&&(i=a,n=Math.max(s.graph.x(t.end),s.graph.x.range()[0]));var r=i-n;t.rangeElement.style.left=n+"px",t.rangeElement.style.width=r+"px",t.rangeElement.classList.remove("offscreen")}o.line.classList.remove("offscreen"),o.line.style.left=a+"px"})},this)},this.graph.onUpdate(function(){s.update()})},u.namespace("Rickshaw.Graph.Axis.Time"),u.Graph.Axis.Time=function(t){var i=this;this.graph=t.graph,this.elements=[],this.ticksTreatment=t.ticksTreatment||"plain",this.fixedTimeUnit=t.timeUnit;var s=t.timeFixture||new u.Fixtures.Time;this.appropriateTimeUnit=function(){var e,t=s.units,n=this.graph.x.domain(),i=n[1]-n[0];return t.forEach(function(t){2<=Math.floor(i/t.seconds)&&(e=e||t)}),e||s.units[s.units.length-1]},this.tickOffsets=function(){for(var t=this.graph.x.domain(),e=this.fixedTimeUnit||this.appropriateTimeUnit(),n=Math.ceil((t[1]-t[0])/e.seconds),i=t[0],r=[],o=0;o<n;o++){var a=s.ceil(i,e);i=a+e.seconds/2,r.push({value:a,unit:e})}return r},this.render=function(){this.elements.forEach(function(t){t.parentNode.removeChild(t)}),this.elements=[],this.tickOffsets().forEach(function(t){if(!(i.graph.x(t.value)>i.graph.x.range()[1])){var e=document.createElement("div");e.style.left=i.graph.x(t.value)+"px",e.classList.add("x_tick"),e.classList.add(i.ticksTreatment);var n=document.createElement("div");n.classList.add("title"),n.innerHTML=t.unit.formatter(new Date(1e3*t.value)),e.appendChild(n),i.graph.element.appendChild(e),i.elements.push(e)}})},this.graph.onUpdate(function(){i.render()})},u.namespace("Rickshaw.Graph.Axis.X"),u.Graph.Axis.X=function(o){var e=this;this.initialize=function(t){this.graph=t.graph,this.orientation=t.orientation||"top",this.pixelsPerTick=t.pixelsPerTick||75,t.ticks&&(this.staticTicks=t.ticks),t.tickValues&&(this.tickValues=t.tickValues),this.tickSize=t.tickSize||4,this.ticksTreatment=t.ticksTreatment||"plain",t.element?(this.element=t.element,this._discoverSize(t.element,t),this.vis=_.select(t.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis,this.graph.onUpdate(function(){e.render()})},this.setSize=function(t){if(t=t||{},this.element){this._discoverSize(this.element.parentNode,t),this.vis.attr("height",this.height).attr("width",1.1*this.width);var e=Math.floor(.1*this.width/2);this.element.style.left=-1*e+"px"}},this.render=function(){void 0!==this._renderWidth&&this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var t=_.svg.axis().scale(this.graph.x).orient(this.orientation);t.tickFormat(o.tickFormat||function(t){return t}),this.tickValues&&t.tickValues(this.tickValues),this.ticks=this.staticTicks||Math.floor(this.graph.width/this.pixelsPerTick);var e,n=Math.floor(.1*this.width/2)||0,i="bar"==this.graph.renderer.name&&Math.ceil(.95*this.graph.width/this.graph.series[0].data.length/2)||0;e="top"==this.orientation?"translate("+(n+i)+","+(this.height||this.graph.height)+")":"translate("+(n+i)+", 0)",this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",e).call(t.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));var r=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class","x_grid_d3").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(r)).selectAll("text").each(function(){this.parentNode.setAttribute("data-x-value",this.textContent)}),this._renderHeight=this.graph.height},this._discoverSize=function(t,e){if("undefined"!=typeof window){var n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("height"),10);if(!e.auto)var r=parseInt(n.getPropertyValue("width"),10)}this.width=1.1*(e.width||r||this.graph.width),this.height=e.height||i||40},this.initialize(o)},u.namespace("Rickshaw.Graph.Axis.Y"),u.Graph.Axis.Y=u.Class.create({initialize:function(t){this.graph=t.graph,this.orientation=t.orientation||"right",this.pixelsPerTick=t.pixelsPerTick||75,t.ticks&&(this.staticTicks=t.ticks),t.tickValues&&(this.tickValues=t.tickValues),this.tickSize=t.tickSize||4,this.ticksTreatment=t.ticksTreatment||"plain",this.tickFormat=t.tickFormat||function(t){return t},this.berthRate=.1,t.element?(this.element=t.element,this.vis=_.select(t.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:t.width,height:t.height})):this.vis=this.graph.vis;var e=this;this.graph.onUpdate(function(){e.render()})},setSize:function(t){if(t=t||{},this.element){if("undefined"!=typeof window){var e=window.getComputedStyle(this.element.parentNode,null),n=parseInt(e.getPropertyValue("width"),10);if(!t.auto)var i=parseInt(e.getPropertyValue("height"),10)}this.width=t.width||n||this.graph.width*this.berthRate,this.height=t.height||i||this.graph.height,this.vis.attr("width",this.width).attr("height",this.height*(1+this.berthRate));var r=this.height*this.berthRate;"left"==this.orientation&&(this.element.style.top=-1*r+"px")}},render:function(){void 0!==this._renderHeight&&this.graph.height!==this._renderHeight&&this.setSize({auto:!0}),this.ticks=this.staticTicks||Math.floor(this.graph.height/this.pixelsPerTick);var t=this._drawAxis(this.graph.y);this._drawGrid(t),this._renderHeight=this.graph.height},_drawAxis:function(t){var e=_.svg.axis().scale(t).orient(this.orientation);if(e.tickFormat(this.tickFormat),this.tickValues&&e.tickValues(this.tickValues),"left"==this.orientation)var n=this.height*this.berthRate,i="translate("+this.width+", "+n+")";return this.element&&this.vis.selectAll("*").remove(),this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",i).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize)),e},_drawGrid:function(t){var e=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(t.ticks(this.ticks).tickSubdivide(0).tickSize(e)).selectAll("text").each(function(){this.parentNode.setAttribute("data-y-value",this.textContent)})}}),u.namespace("Rickshaw.Graph.Axis.Y.Scaled"),u.Graph.Axis.Y.Scaled=u.Class.create(u.Graph.Axis.Y,{initialize:function($super,t){if(void 0===t.scale)throw new Error("Scaled requires scale");this.scale=t.scale,void 0===t.grid?this.grid=!0:this.grid=t.grid,$super(t)},_drawAxis:function($super,t){var e=this.scale.domain(),n=this.graph.renderer.domain().y,i=[Math.min.apply(Math,e),Math.max.apply(Math,e)],r=_.scale.linear().domain([0,1]).range(i),o=[r(n[0]),r(n[1])],a=_.scale.linear().domain(i).range(o);return $super(this.scale.copy().domain(e.map(a)).range(t.range()))},_drawGrid:function($super,t){this.grid&&$super(t)}}),u.namespace("Rickshaw.Graph.Behavior.Series.Highlight"),u.Graph.Behavior.Series.Highlight=function(t){this.graph=t.graph,this.legend=t.legend;var r=this,o={},e=null,a=t.disabledColor||function(t){return _.interpolateRgb(t,_.rgb("#d8d8d8"))(.8).toString()};this.addHighlightEvents=function(i){i.element.addEventListener("mouseover",function(t){e||(e=i,r.legend.lines.forEach(function(t){if(i!==t)o[t.series.name]=o[t.series.name]||t.series.color,t.series.color=a(t.series.color);else if(r.graph.renderer.unstack&&(!t.series.renderer||t.series.renderer.unstack)){var e=r.graph.series.indexOf(t.series);t.originalIndex=e;var n=r.graph.series.splice(e,1)[0];r.graph.series.push(n)}}),r.graph.update())},!1),i.element.addEventListener("mouseout",function(t){e&&(e=null,r.legend.lines.forEach(function(t){if(i===t&&t.hasOwnProperty("originalIndex")){var e=r.graph.series.pop();r.graph.series.splice(t.originalIndex,0,e),delete t.originalIndex}o[t.series.name]&&(t.series.color=o[t.series.name])}),r.graph.update())},!1)},this.legend&&this.legend.lines.forEach(function(t){r.addHighlightEvents(t)})},u.namespace("Rickshaw.Graph.Behavior.Series.Order"),u.Graph.Behavior.Series.Order=function(t){this.graph=t.graph,this.legend=t.legend;var r=this;if(void 0===window.jQuery)throw"couldn't find jQuery at window.jQuery";if(void 0===window.jQuery.ui)throw"couldn't find jQuery UI at window.jQuery.ui";jQuery(function(){jQuery(r.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(t,e){var n=[];jQuery(r.legend.list).find("li").each(function(t,e){e.series&&n.push(e.series)});for(var i=r.graph.series.length-1;0<=i;i--)r.graph.series[i]=n.shift();r.graph.update()}}),jQuery(r.legend.list).disableSelection()}),this.graph.onUpdate(function(){var t=window.getComputedStyle(r.legend.element).height;r.legend.element.style.height=t})},u.namespace("Rickshaw.Graph.Behavior.Series.Toggle"),u.Graph.Behavior.Series.Toggle=function(t){this.graph=t.graph,this.legend=t.legend;var o=this;this.addAnchor=function(r){var t=document.createElement("a");t.innerHTML="&#10004;",t.classList.add("action"),r.element.insertBefore(t,r.element.firstChild),t.onclick=function(t){if(r.series.disabled)r.series.enable(),r.element.classList.remove("disabled");else{if(this.graph.series.filter(function(t){return!t.disabled}).length<=1)return;r.series.disable(),r.element.classList.add("disabled")}o.graph.update()}.bind(this),r.element.getElementsByTagName("span")[0].onclick=function(t){var e=r.series.disabled;if(!e)for(var n=0;n<o.legend.lines.length;n++){var i=o.legend.lines[n];if(r.series===i.series);else if(!i.series.disabled){e=!0;break}}e?(r.series.enable(),r.element.classList.remove("disabled"),o.legend.lines.forEach(function(t){r.series===t.series||(t.series.disable(),t.element.classList.add("disabled"))})):o.legend.lines.forEach(function(t){t.series.enable(),t.element.classList.remove("disabled")}),o.graph.update()}},this.legend&&("undefined"!=typeof jQuery&&jQuery(this.legend.list).sortable&&jQuery(this.legend.list).sortable({start:function(t,e){e.item.bind("no.onclick",function(t){t.preventDefault()})},stop:function(t,e){setTimeout(function(){e.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(t){o.addAnchor(t)})),this._addBehavior=function(){this.graph.series.forEach(function(t){t.disable=function(){if(o.graph.series.length<=1)throw"only one series left";t.disabled=!0},t.enable=function(){t.disabled=!1}})},this._addBehavior(),this.updateBehaviour=function(){this._addBehavior()}},u.namespace("Rickshaw.Graph.DragZoom"),u.Graph.DragZoom=u.Class.create({initialize:function(t){if(!t||!t.graph)throw new Error("Rickshaw.Graph.DragZoom needs a reference to a graph");var e={opacity:.5,fill:"steelblue",minimumTimeSelection:60,callback:function(){}};this.graph=t.graph,this.svg=_.select(this.graph.element).select("svg"),this.svgWidth=parseInt(this.svg.attr("width"),10),this.opacity=t.opacity||e.opacity,this.fill=t.fill||e.fill,this.minimumTimeSelection=t.minimumTimeSelection||e.minimumTimeSelection,this.callback=t.callback||e.callback,this.registerMouseEvents()},registerMouseEvents:function(){var i,o=this,e=27,a={startDt:null,stopDt:null,startPX:null,stopPX:null};function n(t,e){a.stopDt=l(_.event);var n=[a.startDt,a.stopDt].sort(u);o.graph.window.xMin=n[0],o.graph.window.xMax=n[1];var i=o.graph.window.xMax,r=o.graph.window.xMax-o.graph.window.xMin;s(this),r<o.minimumTimeSelection||isNaN(r)||(o.graph.update(),o.callback({range:r,endTime:i}))}function r(){var t=a.stopPX=_.event.offsetX||_.event.layerX;if(!(t>o.svgWidth-1||t<1)){var e=[a.startPX,t].sort(u),n=e[1]-e[0];if(isNaN(n))return s(this);i.attr("fill",o.fill).attr("x",e[0]).attr("width",n)}}function s(t){_.select(t).on("mousemove",null),_.select(document).on("mouseup",null),a={},i.remove()}function u(t,e){return t-e}function l(t){return Math.floor(o.graph.x.invert(t.offsetX||t.layerX))}this.svg.on("mousedown",function(){var t=_.select(this);i=t.append("rect").style("opacity",o.opacity).attr("y",0).attr("height","100%"),_.event.preventDefault?_.event.preventDefault():_.event.returnValue=!1,a.target=_.event.target,a.startDt=l(_.event),a.startPX=_.event.offsetX||_.event.layerX,t.on("mousemove",r),_.select(document).on("mouseup",n),_.select(document).on("keyup",function(){_.event.keyCode===e&&s(this)})})}}),u.namespace("Rickshaw.Graph.HoverDetail"),u.Graph.HoverDetail=u.Class.create({initialize:function(t){var e=this.graph=t.graph;this.xFormatter=t.xFormatter||function(t){return new Date(1e3*t).toUTCString()},this.yFormatter=t.yFormatter||function(t){return null===t?t:t.toFixed(2)};var n=this.element=document.createElement("div");n.className="detail inactive",this.visible=!0,e.element.appendChild(n),this.lastEvent=null,this._addListeners(),this.onShow=t.onShow,this.onHide=t.onHide,this.onRender=t.onRender,this.formatter=t.formatter||this.formatter},formatter:function(t,e,n,i,r,o){return t.name+":&nbsp;"+r},update:function(t){if((t=t||this.lastEvent)&&(this.lastEvent=t).target.nodeName.match(/^(path|svg|rect|circle)$/)){var f,d=this.graph,e=d.element.getBoundingClientRect(),p=t.clientX-e.left,g=t.clientY-e.top,m=0,v=[];if(this.graph.series.active().forEach(function(t){var e=this.graph.stackedData[m++];if(e.length){var n=d.x.invert(p),i=_.scale.linear().domain([e[0].x,e.slice(-1)[0].x]).range([0,e.length-1]),r=Math.round(i(n));r==e.length-1&&r--;for(var o=Math.min(r||0,e.length-1),a=r;a<e.length-1&&e[a]&&e[a+1];){if(e[a].x<=n&&e[a+1].x>n){o=Math.abs(n-e[a].x)<Math.abs(n-e[a+1].x)?a:a+1;break}e[a+1].x<=n?a++:a--}o<0&&(o=0);var s=e[o],u=Math.sqrt(Math.pow(Math.abs(d.x(s.x)-p),2)+Math.pow(Math.abs(d.y(s.y+s.y0)-g),2)),l=t.xFormatter||this.xFormatter,c=t.yFormatter||this.yFormatter,h={formattedXValue:l(s.x),formattedYValue:c(t.scale?t.scale.invert(s.y):s.y),series:t,value:s,distance:u,order:m,name:t.name};(!f||u<f.distance)&&(f=h),v.push(h)}},this),f){f.active=!0;var n=f.value.x,i=f.formattedXValue;this.element.innerHTML="",this.element.style.left=d.x(n)+"px",this.visible&&this.render({points:v,detail:v,mouseX:p,mouseY:g,formattedXValue:i,domainX:n})}}},hide:function(){this.visible=!1,this.element.classList.add("inactive"),"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0,this.element.classList.remove("inactive"),"function"==typeof this.onShow&&this.onShow()},render:function(t){var e=this.graph,n=t.points.filter(function(t){return t.active}).shift();if(null!==n.value.y){var i=n.formattedXValue,r=n.formattedYValue;this.element.innerHTML="",this.element.style.left=e.x(n.value.x)+"px";var o=document.createElement("div");o.className="x_label",o.innerHTML=i,this.element.appendChild(o);var a=document.createElement("div");a.className="item";var s=n.series,u=s.scale?s.scale.invert(n.value.y):n.value.y;a.innerHTML=this.formatter(s,n.value.x,u,i,r,n),a.style.top=this.graph.y(n.value.y0+n.value.y)+"px",this.element.appendChild(a);var l=document.createElement("div");l.className="dot",l.style.top=a.style.top,l.style.borderColor=s.color,this.element.appendChild(l),n.active&&(a.classList.add("active"),l.classList.add("active"));var c=[o,a];c.forEach(function(t){t.classList.add("left")}),this.show();var h=this._calcLayoutError(c);0<h&&(c.forEach(function(t){t.classList.remove("left"),t.classList.add("right")}),h<this._calcLayoutError(c)&&c.forEach(function(t){t.classList.remove("right"),t.classList.add("left")})),"function"==typeof this.onRender&&this.onRender(t)}},_calcLayoutError:function(t){var n=this.element.parentNode.getBoundingClientRect(),i=0;return t.forEach(function(t){var e=t.getBoundingClientRect();e.width&&(e.right>n.right&&(i+=e.right-n.right),e.left<n.left&&(i+=n.left-e.left))}),i},_addListeners:function(){this.mousemoveListener=function(t){this.visible=!0,this.update(t)}.bind(this),this.graph.element.addEventListener("mousemove",this.mousemoveListener,!1),this.graph.onUpdate(function(){this.update()}.bind(this)),this.mouseoutListener=function(t){!t.relatedTarget||t.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS||this.hide()}.bind(this),this.graph.element.addEventListener("mouseout",this.mouseoutListener,!1)},_removeListeners:function(){this.mousemoveListener&&this.graph.element.removeEventListener("mousemove",this.mousemoveListener,!1),this.mouseoutListener&&this.graph.element.removeEventListener("mouseout",this.mouseoutListener,!1)}}),u.namespace("Rickshaw.Graph.JSONP"),u.Graph.JSONP=u.Class.create(u.Graph.Ajax,{request:function(){jQuery.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}}),u.namespace("Rickshaw.Graph.Legend"),u.Graph.Legend=u.Class.create({className:"rickshaw_legend",initialize:function(t){this.element=t.element,this.graph=t.graph,this.naturalOrder=t.naturalOrder,this.element.classList.add(this.className),this.list=document.createElement("ul"),this.element.appendChild(this.list),this.render(),this.graph.onUpdate(function(){})},render:function(){for(var e=this;this.list.firstChild;)this.list.removeChild(this.list.firstChild);this.lines=[];var t=this.graph.series.map(function(t){return t});this.naturalOrder||(t=t.reverse()),t.forEach(function(t){e.addLine(t)})},addLine:function(t){var e=document.createElement("li");e.className="line",t.disabled&&(e.className+=" disabled"),t.className&&_.select(e).classed(t.className,!0);var n=document.createElement("div");n.className="swatch",n.style.backgroundColor=t.color,e.appendChild(n);var i=document.createElement("span");i.className="label",i.innerHTML=t.name,e.appendChild(i),this.list.appendChild(e),(e.series=t).noLegend&&(e.style.display="none");var r={element:e,series:t};return this.shelving&&(this.shelving.addAnchor(r),this.shelving.updateBehaviour()),this.highlighter&&this.highlighter.addHighlightEvents(r),this.lines.push(r),e}}),u.namespace("Rickshaw.Graph.RangeSlider"),u.Graph.RangeSlider=u.Class.create({initialize:function(t){var $=jQuery,e=this,n=(this.element=t.element,this.graphs=t.graphs);n||(n=this.graph=t.graph),n.constructor!==Array&&(n=[n]),this.graph=n[0],this.slideCallbacks=[],this.build();for(var i=0;i<n.length;i++)n[i].onUpdate(function(){e.update()}.bind(e)),function(t){n[t].onConfigure(function(){$(this.element)[0].style.width=n[t].width+"px"}.bind(e))}(i)},build:function(){var t,e=this.element,$=jQuery,i=this,r=this.graphs||this.graph;r.constructor!==Array&&(r=[r]),this.graph=r[0],t=r[0].dataDomain(),$(function(){$(e).slider({range:!0,min:t[0],max:t[1],values:[t[0],t[1]],start:function(t,e){i.slideStarted({event:t,ui:e})},stop:function(t,e){i.slideFinished({event:t,ui:e})},slide:function(t,e){if(i.slideShouldUpdate(t,e)&&!(e.values[1]<=e.values[0]))for(var n=0;n<r.length;n++)i.processSlideChange({event:t,ui:e,graph:r[n]})}})}),r[0].onConfigure(function(){$(this.element)[0].style.width=r[0].width+"px"}.bind(this))},update:function(){var t=this.element,e=this.graph,$=jQuery,n=$(t).slider("option","values"),i=e.dataDomain();$(t).slider("option","min",i[0]),$(t).slider("option","max",i[1]),null==e.window.xMin&&(n[0]=i[0]),null==e.window.xMax&&(n[1]=i[1]),$(t).slider("option","values",n)},onSlide:function(t){this.slideCallbacks.push(t)},processSlideChange:function(t){t.event;var e=t.ui,n=t.graph;n.window.xMin=e.values[0],n.window.xMax=e.values[1],n.update();var i=n.dataDomain();i[0]==e.values[0]&&(n.window.xMin=void 0),i[1]==e.values[1]&&(n.window.xMax=void 0),this.slideCallbacks.forEach(function(t){t(n,n.window.xMin,n.window.xMax)})},slideShouldUpdate:function(){return!0},slideStarted:function(){},slideFinished:function(){}}),u.namespace("Rickshaw.Graph.RangeSlider.Preview"),u.Graph.RangeSlider.Preview=u.Class.create({initialize:function(t){if(!t.element)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an element";if(!t.graph&&!t.graphs)throw"Rickshaw.Graph.RangeSlider.Preview needs a reference to an graph or an array of graphs";this.element=t.element,this.element.style.position="relative",this.graphs=t.graph?[t.graph]:t.graphs,this.defaults={height:75,width:400,gripperColor:void 0,frameTopThickness:3,frameHandleThickness:10,frameColor:"#d4d4d4",frameOpacity:1,minimumFrameWidth:0,heightRatio:.2},this.heightRatio=t.heightRatio||this.defaults.heightRatio,this.defaults.gripperColor=_.rgb(this.defaults.frameColor).darker().toString(),this.configureCallbacks=[],this.slideCallbacks=[],this.previews=[],t.width||(this.widthFromGraph=!0),t.height||(this.heightFromGraph=!0),(this.widthFromGraph||this.heightFromGraph)&&this.graphs[0].onConfigure(function(){this.configure(t),this.render()}.bind(this)),t.width=t.width||this.graphs[0].width||this.defaults.width,t.height=t.height||this.graphs[0].height*this.heightRatio||this.defaults.height,this.configure(t),this.render()},onSlide:function(t){this.slideCallbacks.push(t)},onConfigure:function(t){this.configureCallbacks.push(t)},configure:function(e){this.config=this.config||{},this.configureCallbacks.forEach(function(t){t(e)}),u.keys(this.defaults).forEach(function(t){this.config[t]=t in e?e[t]:t in this.config?this.config[t]:this.defaults[t]},this),("width"in e||"height"in e)&&(this.widthFromGraph&&(this.config.width=this.graphs[0].width),this.heightFromGraph&&(this.config.height=this.graphs[0].height*this.heightRatio,this.previewHeight=this.config.height),this.previews.forEach(function(t){var e=this.previewHeight/this.graphs.length-2*this.config.frameTopThickness,n=this.config.width-2*this.config.frameHandleThickness;if(t.setSize({width:n,height:e}),this.svg){var i=e+2*this.config.frameHandleThickness,r=n+2*this.config.frameHandleThickness;this.svg.style("width",r+"px"),this.svg.style("height",i+"px")}},this))},render:function(){var a=this;this.svg=_.select(this.element).selectAll("svg.rickshaw_range_slider_preview").data([null]),this.previewHeight=this.config.height-2*this.config.frameTopThickness,this.previewWidth=this.config.width-2*this.config.frameHandleThickness,this.currentFrame=[0,this.previewWidth];var t=_.select(this.element).selectAll("div.rickshaw_range_slider_preview_container").data(this.graphs),e="translate("+this.config.frameHandleThickness+"px, "+this.config.frameTopThickness+"px)";t.enter().append("div").classed("rickshaw_range_slider_preview_container",!0).style("-webkit-transform",e).style("-moz-transform",e).style("-ms-transform",e).style("transform",e).each(function(t,e){var n=u.extend({},t.config),i=a.previewHeight/a.graphs.length,r=t.renderer.name;u.extend(n,{element:this.appendChild(document.createElement("div")),height:i,width:a.previewWidth,series:t.series,renderer:r});var o=new u.Graph(n);a.previews.push(o),t.onUpdate(function(){o.render(),a.render()}),t.onConfigure(function(t){delete t.height,t.width=t.width-2*a.config.frameHandleThickness,o.configure(t),o.render()}),o.render()}),t.exit().remove();var n=this.graphs[0],i=_.scale.linear().domain([0,this.previewWidth]).range(n.dataDomain()),r=[n.window.xMin,n.window.xMax];this.currentFrame[0]=void 0===r[0]?0:Math.round(i.invert(r[0])),this.currentFrame[0]<0&&(this.currentFrame[0]=0),this.currentFrame[1]=void 0===r[1]?this.previewWidth:i.invert(r[1]),this.currentFrame[1]-this.currentFrame[0]<a.config.minimumFrameWidth&&(this.currentFrame[1]=(this.currentFrame[0]||0)+a.config.minimumFrameWidth),this.svg.enter().append("svg").classed("rickshaw_range_slider_preview",!0).style("height",this.config.height+"px").style("width",this.config.width+"px").style("position","absolute").style("top",0),this._renderDimming(),this._renderFrame(),this._renderGrippers(),this._renderHandles(),this._renderMiddle(),this._registerMouseEvents()},_renderDimming:function(){var t=this.svg.selectAll("path.dimming").data([null]);t.enter().append("path").attr("fill","white").attr("fill-opacity","0.7").attr("fill-rule","evenodd").classed("dimming",!0);var e="";e+=" M "+this.config.frameHandleThickness+" "+this.config.frameTopThickness,e+=" h "+this.previewWidth,e+=" v "+this.previewHeight,e+=" h "+-this.previewWidth,e+=" z ",e+=" M "+Math.max(this.currentFrame[0],this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+Math.min(this.currentFrame[1]+2*this.config.frameHandleThickness,this.previewWidth+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+Math.max(this.currentFrame[0],this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderFrame:function(){var t=this.svg.selectAll("path.frame").data([null]);t.enter().append("path").attr("stroke","white").attr("stroke-width","1px").attr("stroke-linejoin","round").attr("fill",this.config.frameColor).attr("fill-opacity",this.config.frameOpacity).attr("fill-rule","evenodd").classed("frame",!0);var e="";e+=" M "+this.currentFrame[0]+" 0",e+=" H "+(this.currentFrame[1]+2*this.config.frameHandleThickness),e+=" V "+this.config.height,e+=" H "+this.currentFrame[0],e+=" z",e+=" M "+(this.currentFrame[0]+this.config.frameHandleThickness)+" "+this.config.frameTopThickness,e+=" H "+(this.currentFrame[1]+this.config.frameHandleThickness),e+=" v "+this.previewHeight,e+=" H "+(this.currentFrame[0]+this.config.frameHandleThickness),e+=" z",t.attr("d",e)},_renderGrippers:function(){var t=this.svg.selectAll("path.gripper").data([null]);t.enter().append("path").attr("stroke",this.config.gripperColor).classed("gripper",!0);var e="";[.4,.6].forEach(function(t){e+=" M "+Math.round(this.currentFrame[0]+this.config.frameHandleThickness*t)+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height),e+=" M "+Math.round(this.currentFrame[1]+this.config.frameHandleThickness*(1+t))+" "+Math.round(.3*this.config.height),e+=" V "+Math.round(.7*this.config.height)}.bind(this)),t.attr("d",e)},_renderHandles:function(){var t=this.svg.selectAll("rect.left_handle").data([null]);t.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("left_handle",!0),t.attr("x",this.currentFrame[0]).attr("height",this.config.height);var e=this.svg.selectAll("rect.right_handle").data([null]);e.enter().append("rect").attr("width",this.config.frameHandleThickness).style("cursor","ew-resize").style("fill-opacity","0").classed("right_handle",!0),e.attr("x",this.currentFrame[1]+this.config.frameHandleThickness).attr("height",this.config.height)},_renderMiddle:function(){var t=this.svg.selectAll("rect.middle_handle").data([null]);t.enter().append("rect").style("cursor","move").style("fill-opacity","0").classed("middle_handle",!0),t.attr("width",Math.max(0,this.currentFrame[1]-this.currentFrame[0])).attr("x",this.currentFrame[0]+this.config.frameHandleThickness).attr("height",this.config.height)},_registerMouseEvents:function(){var t=_.select(this.element),o={target:null,start:null,stop:null,left:!1,right:!1,rigid:!1},a=this;function e(t,e){o.stop=a._getClientXFromEvent(_.event,o);var n=o.stop-o.start,i=a.frameBeforeDrag.slice(0),r=a.config.minimumFrameWidth;o.rigid&&(r=a.frameBeforeDrag[1]-a.frameBeforeDrag[0]),o.left&&(i[0]=Math.max(i[0]+n,0)),o.right&&(i[1]=Math.min(i[1]+n,a.previewWidth)),i[1]-i[0]<=r&&(o.left&&(i[0]=i[1]-r),o.right&&(i[1]=i[0]+r),i[0]<=0&&(i[1]-=i[0],i[0]=0),i[1]>=a.previewWidth&&(i[0]-=i[1]-a.previewWidth,i[1]=a.previewWidth)),a.graphs.forEach(function(e){var t=_.scale.linear().interpolate(_.interpolateNumber).domain([0,a.previewWidth]).range(e.dataDomain()),n=[t(i[0]),t(i[1])];a.slideCallbacks.forEach(function(t){t(e,n[0],n[1])}),0===i[0]&&(n[0]=void 0),i[1]===a.previewWidth&&(n[1]=void 0),e.window.xMin=n[0],e.window.xMax=n[1],e.update()})}function n(){o.target=_.event.target,o.start=a._getClientXFromEvent(_.event,o),a.frameBeforeDrag=a.currentFrame.slice(),_.event.preventDefault?_.event.preventDefault():_.event.returnValue=!1,_.select(document).on("mousemove.rickshaw_range_slider_preview",e),_.select(document).on("mouseup.rickshaw_range_slider_preview",u),_.select(document).on("touchmove.rickshaw_range_slider_preview",e),_.select(document).on("touchend.rickshaw_range_slider_preview",u),_.select(document).on("touchcancel.rickshaw_range_slider_preview",u)}function i(t,e){o.left=!0,n()}function r(t,e){o.right=!0,n()}function s(t,e){o.left=!0,o.right=!0,o.rigid=!0,n()}function u(t,e){_.select(document).on("mousemove.rickshaw_range_slider_preview",null),_.select(document).on("mouseup.rickshaw_range_slider_preview",null),_.select(document).on("touchmove.rickshaw_range_slider_preview",null),_.select(document).on("touchend.rickshaw_range_slider_preview",null),_.select(document).on("touchcancel.rickshaw_range_slider_preview",null),delete a.frameBeforeDrag,o.left=!1,o.right=!1,o.rigid=!1}t.select("rect.left_handle").on("mousedown",i),t.select("rect.right_handle").on("mousedown",r),t.select("rect.middle_handle").on("mousedown",s),t.select("rect.left_handle").on("touchstart",i),t.select("rect.right_handle").on("touchstart",r),t.select("rect.middle_handle").on("touchstart",s)},_getClientXFromEvent:function(t,e){switch(t.type){case"touchstart":case"touchmove":for(var n=t.changedTouches,i=null,r=0;r<n.length;r++)if(n[r].target===e.target){i=n[r];break}return null!==i?i.clientX:void 0;default:return t.clientX}}}),u.namespace("Rickshaw.Graph.Renderer"),u.Graph.Renderer=u.Class.create({initialize:function(t){this.graph=t.graph,this.tension=t.tension||this.tension,this.configure(t)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:.8,strokeWidth:2,unstack:!0,padding:{top:.01,right:0,bottom:.01,left:0},stroke:!1,fill:!1,opacity:1}},domain:function(t){var e=t||this.graph.stackedData||this.graph.stackData();e=e.filter(function(t){return t&&0!==t.length});var n=1/0,i=-1/0,r=1/0,o=-1/0;return e.forEach(function(t){t.forEach(function(t){if(null!=t.y){var e=t.y+t.y0;e<r&&(r=e),o<e&&(o=e)}}),t.length&&(t[0].x<n&&(n=t[0].x),t[t.length-1].x>i&&(i=t[t.length-1].x))}),n-=(i-n)*this.padding.left,i+=(i-n)*this.padding.right,r="auto"===this.graph.min?r:this.graph.min||0,o=void 0===this.graph.max?o:this.graph.max,("auto"===this.graph.min||r<0)&&(r-=(o-r)*this.padding.bottom),void 0===this.graph.max&&(o+=(o-r)*this.padding.top),{x:[n,i],y:[r,o]}},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis;i.selectAll("*").remove();var r=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),o=i.selectAll("path.path").data(r).enter().append("svg:path").classed("path",!0).attr("d",this.seriesPathFactory());if(this.stroke)var a=i.selectAll("path.stroke").data(r).enter().append("svg:path").classed("stroke",!0).attr("d",this.seriesStrokeFactory());var s=0;n.forEach(function(t){t.disabled||(t.path=o[0][s],this.stroke&&(t.stroke=a[0][s]),this._styleSeries(t),s++)},this)},_styleSeries:function(t){var e=this.fill?t.color:"none",n=this.stroke?t.color:"none",i=t.strokeWidth?t.strokeWidth:this.strokeWidth,r=t.opacity?t.opacity:this.opacity;t.path.setAttribute("fill",e),t.path.setAttribute("stroke",n),t.path.setAttribute("stroke-width",i),t.path.setAttribute("opacity",r),t.className&&_.select(t.path).classed(t.className,!0),t.className&&this.stroke&&_.select(t.stroke).classed(t.className,!0)},configure:function(n){n=n||{},u.keys(this.defaults()).forEach(function(e){n.hasOwnProperty(e)?"object"==typeof this.defaults()[e]?u.keys(this.defaults()[e]).forEach(function(t){this[e][t]=void 0!==n[e][t]?n[e][t]:void 0!==this[e][t]?this[e][t]:this.defaults()[e][t]},this):this[e]=void 0!==n[e]?n[e]:void 0!==this[e]?this[e]:void 0!==this.graph[e]?this.graph[e]:this.defaults()[e]:this[e]=this[e]||this.graph[e]||this.defaults()[e]},this)},setStrokeWidth:function(t){void 0!==t&&(this.strokeWidth=t)},setTension:function(t){void 0!==t&&(this.tension=t)}}),u.namespace("Rickshaw.Graph.Renderer.Line"),u.Graph.Renderer.Line=u.Class.create(u.Graph.Renderer,{name:"line",defaults:function($super){return u.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var e=this.graph,t=_.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(t){return null!==t.y}),t}}),u.namespace("Rickshaw.Graph.Renderer.Stack"),u.Graph.Renderer.Stack=u.Class.create(u.Graph.Renderer,{name:"stack",defaults:function($super){return u.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var e=this.graph,t=_.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(t){return null!==t.y}),t}}),u.namespace("Rickshaw.Graph.Renderer.Bar"),u.Graph.Renderer.Bar=u.Class.create(u.Graph.Renderer,{name:"bar",defaults:function($super){var t=u.extend($super(),{gapSize:.05,unstack:!1,opacity:1});return delete t.tension,t},initialize:function($super,t){t=t||{},this.gapSize=t.gapSize||this.gapSize,$super(t)},domain:function($super){var t=$super(),e=this._frequentInterval(this.graph.stackedData.slice(-1).shift());return t.x[1]+=Number(e.magnitude),t},barWidth:function(t){var e=this._frequentInterval(t.stack);return this.graph.x.magnitude(e.magnitude)*(1-this.gapSize)},render:function(t){t=t||{};var n=this.graph,e=t.series||n.series,i=t.vis||n.vis;i.selectAll("*").remove();var r=this.barWidth(e.active()[0]),o=0,a=e.filter(function(t){return!t.disabled}).length,s=this.unstack?r/a:r,u=function(t){return"matrix("+[1,0,0,t.y<0?-1:1,0,t.y<0?2*n.y.magnitude(Math.abs(t.y)):0].join(",")+")"};e.forEach(function(e){if(!e.disabled){this.barWidth(e);var t=i.selectAll("path").data(e.stack.filter(function(t){return null!==t.y})).enter().append("svg:rect").attr("x",function(t){return n.x(t.x)+o}).attr("y",function(t){return n.y(t.y0+Math.abs(t.y))*(t.y<0?-1:1)}).attr("width",s).attr("height",function(t){return n.y.magnitude(Math.abs(t.y))}).attr("opacity",e.opacity).attr("transform",u);Array.prototype.forEach.call(t[0],function(t){t.setAttribute("fill",e.color)}),this.unstack&&(o+=s)}},this)},_frequentInterval:function(t){for(var e={},n=0;n<t.length-1;n++){var i=t[n+1].x-t[n].x;e[i]=e[i]||0,e[i]++}var r={count:0,magnitude:1};return u.keys(e).sort(function(t,e){return Number(t)-Number(e)}).forEach(function(t){r.count<e[t]&&(r={count:e[t],magnitude:t})}),r}}),u.namespace("Rickshaw.Graph.Renderer.Area"),u.Graph.Renderer.Area=u.Class.create(u.Graph.Renderer,{name:"area",defaults:function($super){return u.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var e=this.graph,t=_.svg.area().x(function(t){return e.x(t.x)}).y0(function(t){return e.y(t.y0)}).y1(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return t.defined&&t.defined(function(t){return null!==t.y}),t},seriesStrokeFactory:function(){var e=this.graph,t=_.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y+t.y0)}).interpolate(e.interpolation).tension(this.tension);return t.defined&&t.defined(function(t){return null!==t.y}),t},render:function(t){t=t||{};var e=this.graph,n=t.series||e.series,i=t.vis||e.vis;i.selectAll("*").remove();var r=this.unstack?"append":"insert",o=n.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=i.selectAll("path").data(o).enter()[r]("svg:g","g");a.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area"),this.stroke&&a.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class","line");var s=0;n.forEach(function(t){t.disabled||(t.path=a[0][s++],this._styleSeries(t))},this)},_styleSeries:function(t){t.path&&(_.select(t.path).select(".area").attr("fill",t.color),this.stroke&&_.select(t.path).select(".line").attr("fill","none").attr("stroke",t.stroke||_.interpolateRgb(t.color,"black")(.125)).attr("stroke-width",this.strokeWidth),t.className&&t.path.setAttribute("class",t.className))}}),u.namespace("Rickshaw.Graph.Renderer.ScatterPlot"),u.Graph.Renderer.ScatterPlot=u.Class.create(u.Graph.Renderer,{name:"scatterplot",defaults:function($super){return u.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:4})},initialize:function($super,t){$super(t)},render:function(t){t=t||{};var i=this.graph,e=t.series||i.series,r=t.vis||i.vis,o=this.dotSize;r.selectAll("*").remove(),e.forEach(function(e){if(!e.disabled){var n=e.opacity?e.opacity:1,t=r.selectAll("path").data(e.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return i.x(t.x)}).attr("cy",function(t){return i.y(t.y)}).attr("r",function(t){return"r"in t?t.r:o}).attr("opacity",function(t){return"opacity"in t?t.opacity:n});e.className&&t.classed(e.className,!0),Array.prototype.forEach.call(t[0],function(t){t.setAttribute("fill",e.color)})}},this)}}),u.namespace("Rickshaw.Graph.Renderer.Multi"),u.Graph.Renderer.Multi=u.Class.create(u.Graph.Renderer,{name:"multi",initialize:function($super,t){$super(t)},defaults:function($super){return u.extend($super(),{unstack:!0,fill:!1,stroke:!0})},configure:function($super,t){t=t||{},$super(this.config=t)},domain:function($super){this.graph.stackData();var i=[],t=this._groups();return this._stack(t),t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled}).map(function(t){return t.stack});if(e.length){var n=null;n=t.renderer&&t.renderer.domain?t.renderer.domain(e):$super(e),i.push(n)}}),{x:[_.min(i.map(function(t){return t.x[0]})),_.max(i.map(function(t){return t.x[1]}))],y:[_.min(i.map(function(t){return t.y[0]})),_.max(i.map(function(t){return t.y[1]}))]}},_groups:function(){var r=this.graph,o={};r.series.forEach(function(t){if(!t.disabled){if(!o[t.renderer]){var e=document.createElementNS("http://www.w3.org/2000/svg","g");r.vis[0][0].appendChild(e);var n=r._renderers[t.renderer],i={};[this.defaults(),n.defaults(),this.config,this.graph].forEach(function(t){u.extend(i,t)}),n.configure(i),o[t.renderer]={renderer:n,series:[],vis:_.select(e)}}o[t.renderer].series.push(t)}},this);var n=[];return Object.keys(o).forEach(function(t){var e=o[t];n.push(e)}),n},_stack:function(t){return t.forEach(function(t){var e=t.series.filter(function(t){return!t.disabled}),n=e.map(function(t){return t.stack});if(!t.renderer.unstack){var i=_.layout.stack(),r=u.clone(i(n));e.forEach(function(t,e){t._stack=u.clone(r[e])})}},this),t},render:function(){this.graph.series.forEach(function(t){if(!t.renderer)throw new Error("Each series needs a renderer for graph 'multi' renderer")}),this.graph.vis.selectAll("*").remove();var t=this._groups();(t=this._stack(t)).forEach(function(t){var e=t.series.filter(function(t){return!t.disabled});e.active=function(){return e},t.renderer.render({series:e,vis:t.vis}),e.forEach(function(t){t.stack=t._stack||t.stack||t.data})})}}),u.namespace("Rickshaw.Graph.Renderer.LinePlot"),u.Graph.Renderer.LinePlot=u.Class.create(u.Graph.Renderer,{name:"lineplot",defaults:function($super){return u.extend($super(),{unstack:!0,fill:!1,stroke:!0,padding:{top:.01,right:.01,bottom:.01,left:.01},dotSize:3,strokeWidth:2})},seriesPathFactory:function(){var e=this.graph,t=_.svg.line().x(function(t){return e.x(t.x)}).y(function(t){return e.y(t.y)}).interpolate(this.graph.interpolation).tension(this.tension);return t.defined&&t.defined(function(t){return null!==t.y}),t},render:function(t){t=t||{};var n=this.graph,e=t.series||n.series,i=t.vis||n.vis,r=this.dotSize;i.selectAll("*").remove();var o=e.filter(function(t){return!t.disabled}).map(function(t){return t.stack}),a=i.selectAll("path").data(o).enter().append("svg:path").attr("d",this.seriesPathFactory()),s=0;e.forEach(function(t){t.disabled||(t.path=a[0][s++],this._styleSeries(t))},this),e.forEach(function(e){if(!e.disabled){var t=i.selectAll("x").data(e.stack.filter(function(t){return null!==t.y})).enter().append("svg:circle").attr("cx",function(t){return n.x(t.x)}).attr("cy",function(t){return n.y(t.y)}).attr("r",function(t){return"r"in t?t.r:r});Array.prototype.forEach.call(t[0],function(t){t&&(t.setAttribute("data-color",e.color),t.setAttribute("fill","white"),t.setAttribute("stroke",e.color),t.setAttribute("stroke-width",this.strokeWidth))}.bind(this))}},this)}}),u.namespace("Rickshaw.Graph.Smoother"),u.Graph.Smoother=u.Class.create({initialize:function(t){this.graph=t.graph,this.element=t.element,this.aggregationScale=1,this.build(),this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var n=this,$=jQuery;this.element&&$(function(){$(n.element).slider({min:1,max:100,slide:function(t,e){n.setScale(e.value)}})})},setScale:function(t){if(t<1)throw"scale out of range: "+t;this.aggregationScale=t,this.graph.update()},transformer:function(t){if(1==this.aggregationScale)return t;var o=[];return t.forEach(function(t){for(var e=[];t.length;){var n=0,i=0,r=t.splice(0,this.aggregationScale);r.forEach(function(t){n+=t.x/r.length,i+=t.y/r.length}),e.push({x:n,y:i})}o.push(e)}.bind(this)),o}}),u.namespace("Rickshaw.Graph.Socketio"),u.Graph.Socketio=u.Class.create(u.Graph.Ajax,{request:function(){var t=io.connect(this.dataURL),e=this;t.on("rickshaw",function(t){e.success(t)})}}),u.namespace("Rickshaw.Series"),u.Series=u.Class.create(Array,{initialize:function(t,e,n){n=n||{},this.palette=new u.Color.Palette(e),this.timeBase=void 0===n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase;var i=void 0===n.timeInterval?1e3:n.timeInterval;this.setTimeInterval(i),t&&"object"==typeof t&&Array.isArray(t)&&t.forEach(function(t){this.addItem(t)},this)},addItem:function(e){if(void 0===e.name)throw"addItem() needs a name";e.color=e.color||this.palette.color(e.name),e.data=e.data||[],0===e.data.length&&this.length&&0<this.getIndex()?this[0].data.forEach(function(t){e.data.push({x:t.x,y:0})}):0===e.data.length&&e.data.push({x:this.timeBase-(this.timeInterval||0),y:0}),this.push(e),this.legend&&this.legend.addLine(this.itemByName(e.name))},addData:function(e,n){var i=this.getIndex();u.keys(e).forEach(function(t){this.itemByName(t)||this.addItem({name:t})},this),this.forEach(function(t){t.data.push({x:n||(i*this.timeInterval||1)+this.timeBase,y:e[t.name]||0})},this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return this[e]},setTimeInterval:function(t){this.timeInterval=t/1e3},setTimeBase:function(t){this.timeBase=t},dump:function(){var n={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(t){var e={color:t.color,name:t.name,data:[]};t.data.forEach(function(t){e.data.push({x:t.x,y:t.y})}),n.items.push(e)}),n},load:function(t){t.timeInterval&&(this.timeInterval=t.timeInterval),t.timeBase&&(this.timeBase=t.timeBase),t.items&&t.items.forEach(function(t){this.push(t),this.legend&&this.legend.addLine(this.itemByName(t.name))},this)}}),u.Series.zeroFill=function(t){u.Series.fill(t,0)},u.Series.fill=function(t,e){for(var n,i=0,r=t.map(function(t){return t.data});i<Math.max.apply(null,r.map(function(t){return t.length}));)n=Math.min.apply(null,r.filter(function(t){return t[i]}).map(function(t){return t[i].x})),r.forEach(function(t){t[i]&&t[i].x==n||t.splice(i,0,{x:n,y:e})}),i++},u.namespace("Rickshaw.Series.FixedDuration"),u.Series.FixedDuration=u.Class.create(u.Series,{initialize:function(t,e,n){if(void 0===(n=n||{}).timeInterval)throw new Error("FixedDuration series requires timeInterval");if(void 0===n.maxDataPoints)throw new Error("FixedDuration series requires maxDataPoints");if(this.palette=new u.Color.Palette(e),this.timeBase=void 0===n.timeBase?Math.floor((new Date).getTime()/1e3):n.timeBase,this.setTimeInterval(n.timeInterval),this[0]&&this[0].data&&this[0].data.length?(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0),this.maxDataPoints=n.maxDataPoints,t&&"object"==typeof t&&Array.isArray(t)&&(t.forEach(function(t){this.addItem(t)},this),this.currentSize+=1,this.currentIndex+=1),this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval,void 0!==this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var i=this.maxDataPoints-this.currentSize-1;1<i;i--)this.currentSize+=1,this.currentIndex+=1,this.forEach(function(t){t.data.unshift({x:((i-1)*this.timeInterval||1)+this.timeBase,y:0,i:i})},this)},addData:function($super,t,e){if($super(t,e),this.currentSize+=1,this.currentIndex+=1,void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(t){t.data.splice(0,1)}),this.currentSize-=1},getIndex:function(){return this.currentIndex}}),u);var _,u}.apply(exports,n))||(t.exports=i)},"t05cJ/Bt":function(t,exports,e){"use strict";exports.__esModule=!0;var p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=s(e("/0VBPG/8")),r=s(e("kjzo3jwQ")),n=s(e("ii0bleBb")),i=s(e("vZGZtUkV")),g=s(e("ivGQtwpr")),m=s(e("YF9tlnD2")),o=s(e("G1eldzYB")),l=s(e("asxtTLAV")),c=s(e("qfB6P2cO")),h=s(e("ZFtIpBXX")),a=s(e("DcMooPoT"));function s(t){return t&&t.__esModule?t:{default:t}}var f=p({},m.default.propTypes,{container:n.default.oneOfType([i.default,n.default.func]),autoWidth:n.default.bool}),d=function(n){function i(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));return s.onWindowScroll=function(){s.onUpdate()},s.onWindowResize=function(){s.props.autoWidth&&(0,r.default)(function(){return s.onUpdate()})},s.onDocumentClick=function(){(0,r.default)(function(){return s.onUpdate()})},s.onUpdate=function(){if(s._isMounted){var t=(0,u.default)(s.positioner),e=t.top,n=t.width,i=(0,l.default)(s.props.container),r=void 0;if(i){var o=(0,c.default)((0,h.default)(s)),a=(0,u.default)(i);r=o-a.top-a.height}else r=null;s.updateState(e,r,n)}},s.updateState=function(t,e,n){t===s.state.offsetTop&&e===s.state.offsetBottom&&n===s.state.width||s.setState({offsetTop:t,offsetBottom:e,width:n})},s.state={offsetTop:null,offsetBottom:null,width:null},s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,n),i.prototype.componentDidMount=function(){var t=this;this._isMounted=!0,this._windowScrollListener=(0,o.default)((0,a.default)(this),"scroll",function(){return t.onWindowScroll()}),this._windowResizeListener=(0,o.default)((0,a.default)(this),"resize",function(){return t.onWindowResize()}),this._documentClickListener=(0,o.default)((0,h.default)(this),"click",function(){return t.onDocumentClick()}),this.onUpdate()},i.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},i.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},i.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},i.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,i=t.viewportOffsetTop,r=t.children,o=function(t,e){var n={};for(var i in t)0<=e.indexOf(i)||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}(t,["autoWidth","viewportOffsetTop","children"]),a=this.state,s=a.offsetTop,u=a.offsetBottom,l=a.width;delete o.container;var c=Math.max(s,i||0),h=this.props,f=h.affixStyle,d=h.bottomStyle;return n&&(f=p({width:l},f),d=p({width:l},d)),g.default.createElement("div",null,g.default.createElement("div",{ref:function(t){e.positioner=t}}),g.default.createElement(m.default,p({},o,{offsetTop:c,viewportOffsetTop:i,offsetBottom:u,affixStyle:f,bottomStyle:d}),r))},i}(g.default.Component);d.displayName="AutoAffix",d.propTypes=f,d.defaultProps={viewportOffsetTop:0,autoWidth:!0},exports.default=d,t.exports=exports.default},tTiaHtSE:function(t,exports,x){
/* @license C3.js v0.4.22 | (c) C3 Team and other contributors | http://c3js.org/ */
t.exports=function(){"use strict";var r,o,B={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P=function(t){return t||0===t},f=function(t){return"function"==typeof t},a=function(t){return Array.isArray(t)},u=function(t){return"string"==typeof t},w=function(t){return void 0===t},D=function(t){return void 0!==t},n=function(t){return 10*Math.ceil(t/10)},l=function(t){return Math.ceil(t)+.5},I=function(t){return t[1]-t[0]},h=function(t){return null==t||u(t)&&0===t.length||"object"===(void 0===t?"undefined":s(t))&&0===Object.keys(t).length},C=function(t){return!m.isEmpty(t)},F=function(t,e,n){return D(t[e])?t[e]:n},i=function(e,n){var i=!1;return Object.keys(e).forEach(function(t){e[t]===n&&(i=!0)}),i},g=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},_=function(t){var e=t.getBoundingClientRect(),n=[t.pathSegList.getItem(0),t.pathSegList.getItem(1)],i=n[0].x,r=Math.min(n[0].y,n[1].y);return{x:i,y:r,width:e.width,height:e.height}};function c(t,e){var n=this;n.component=t,n.params=e||{},n.d3=t.d3,n.scale=n.d3.scale.linear(),n.range,n.orient="bottom",n.innerTickSize=6,n.outerTickSize=this.params.withOuterTick?6:0,n.tickPadding=3,n.tickValues=null,n.tickFormat,n.tickArguments,n.tickOffset=0,n.tickCulling=!0,n.tickCentered,n.tickTextCharSize,n.tickTextRotate=n.params.tickTextRotate,n.tickLength,n.axis=n.generateAxis()}(o=c.prototype).axisX=function(t,e,n){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+n)+", 0)"})},o.axisY=function(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})},o.scaleExtent=function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},o.generateTicks=function(t){var e,n,i=[];if(t.ticks)return t.ticks.apply(t,this.tickArguments);for(n=t.domain(),e=Math.ceil(n[0]);e<n[1];e++)i.push(e);return 0<i.length&&0<i[0]&&i.unshift(i[0]-(i[1]-i[0])),i},o.copyScale=function(){var t,e=this.scale.copy();return this.params.isCategory&&(t=this.scale.domain(),e.domain([t[0],t[1]-1])),e},o.textFormatted=function(t){var e=this.tickFormat?this.tickFormat(t):t;return void 0!==e?e:""},o.updateRange=function(){return this.range=this.scale.rangeExtent?this.scale.rangeExtent():this.scaleExtent(this.scale.range()),this.range},o.updateTickTextCharSize=function(t){var o=this;if(o.tickTextCharSize)return o.tickTextCharSize;var a={h:11.5,w:5.5};return t.select("text").text(function(t){return o.textFormatted(t)}).each(function(t){var e=this.getBoundingClientRect(),n=o.textFormatted(t),i=e.height,r=n?e.width/n.length:void 0;i&&r&&(a.h=i,a.w=r)}).text(""),o.tickTextCharSize=a},o.transitionise=function(t){return this.params.withoutTransition?t:this.d3.transition(t)},o.isVertical=function(){return"left"===this.orient||"right"===this.orient},o.tspanData=function(t,e,n,i){var r=this.params.tickMultiline?this.splitTickText(t,n,i):[].concat(this.textFormatted(t));return r.map(function(t){return{index:e,splitted:t,length:r.length}})},o.splitTickText=function(t,e,n){var r,o,a,s=this,i=s.textFormatted(t),u=s.params.tickWidth;return"[object Array]"===Object.prototype.toString.call(i)?i:((!u||u<=0)&&(u=s.isVertical()?95:s.params.isCategory?Math.ceil(n(e[1])-n(e[0]))-12:110),function t(e,n){o=void 0;for(var i=1;i<n.length;i++)if(" "===n.charAt(i)&&(o=i),r=n.substr(0,i+1),a=s.tickTextCharSize.w*r.length,u<a)return t(e.concat(n.substr(0,o||i)),n.slice(o?o+1:i));return e.concat(n)}([],i+""))},o.updateTickLength=function(){this.tickLength=Math.max(this.innerTickSize,0)+this.tickPadding},o.lineY2=function(t){var e=this.scale(t)+(this.tickCentered?0:this.tickOffset);return this.range[0]<e&&e<this.range[1]?this.innerTickSize:0},o.textY=function(){var t=this.tickTextRotate;return t?11.5-t/15*2.5*(0<t?1:-1):this.tickLength},o.textTransform=function(){var t=this.tickTextRotate;return t?"rotate("+t+")":""},o.textTextAnchor=function(){var t=this.tickTextRotate;return t?0<t?"start":"end":"middle"},o.tspanDx=function(){var t=this.tickTextRotate;return t?8*Math.sin(Math.PI*(t/180)):0},o.tspanDy=function(t,e){var n=this.tickTextCharSize.h;return 0===e&&(n=this.isVertical()?-((t.length-1)*(this.tickTextCharSize.h/2)-3):".71em"),n},o.generateAxis=function(){var _=this,y=_.d3,x=_.params;function b(t){t.each(function(){var t,e,n,i=b.g=y.select(this),r=this.__chart__||_.scale,o=this.__chart__=_.copyScale(),a=_.tickValues?_.tickValues:_.generateTicks(o),s=i.selectAll(".tick").data(a,o),u=s.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),l=s.exit().remove(),c=_.transitionise(s).style("opacity",1);x.isCategory?(_.tickOffset=Math.ceil((o(1)-o(0))/2),e=_.tickCentered?0:_.tickOffset,n=_.tickCentered?_.tickOffset:0):_.tickOffset=e=0,u.append("line"),u.append("text"),_.updateRange(),_.updateTickLength(),_.updateTickTextCharSize(i.select(".tick"));var h=c.select("line"),f=c.select("text"),d=s.select("text").selectAll("tspan").data(function(t,e){return _.tspanData(t,e,a,o)});d.enter().append("tspan"),d.exit().remove(),d.text(function(t){return t.splitted});var p=i.selectAll(".domain").data([0]),g=(p.enter().append("path").attr("class","domain"),_.transitionise(p));switch(_.orient){case"bottom":t=_.axisX,h.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return _.lineY2(t,e)}),f.attr("x",0).attr("y",function(t,e){return _.textY(t,e)}).attr("transform",function(t,e){return _.textTransform(t,e)}).style("text-anchor",function(t,e){return _.textTextAnchor(t,e)}),d.attr("x",0).attr("dy",function(t,e){return _.tspanDy(t,e)}).attr("dx",function(t,e){return _.tspanDx(t,e)}),g.attr("d","M"+_.range[0]+","+_.outerTickSize+"V0H"+_.range[1]+"V"+_.outerTickSize);break;case"top":t=_.axisX,h.attr("x1",e).attr("x2",e).attr("y2",function(t,e){return-1*_.lineY2(t,e)}),f.attr("x",0).attr("y",function(t,e){return-1*_.textY(t,e)-(x.isCategory?2:_.tickLength-2)}).attr("transform",function(t,e){return _.textTransform(t,e)}).style("text-anchor",function(t,e){return _.textTextAnchor(t,e)}),d.attr("x",0).attr("dy",function(t,e){return _.tspanDy(t,e)}).attr("dx",function(t,e){return _.tspanDx(t,e)}),g.attr("d","M"+_.range[0]+","+-_.outerTickSize+"V0H"+_.range[1]+"V"+-_.outerTickSize);break;case"left":t=_.axisY,h.attr("x2",-_.innerTickSize).attr("y1",n).attr("y2",n),f.attr("x",-_.tickLength).attr("y",_.tickOffset).style("text-anchor","end"),d.attr("x",-_.tickLength).attr("dy",function(t,e){return _.tspanDy(t,e)}),g.attr("d","M"+-_.outerTickSize+","+_.range[0]+"H0V"+_.range[1]+"H"+-_.outerTickSize);break;case"right":t=_.axisY,h.attr("x2",_.innerTickSize).attr("y1",n).attr("y2",n),f.attr("x",_.tickLength).attr("y",_.tickOffset).style("text-anchor","start"),d.attr("x",_.tickLength).attr("dy",function(t,e){return _.tspanDy(t,e)}),g.attr("d","M"+_.outerTickSize+","+_.range[0]+"H0V"+_.range[1]+"H"+_.outerTickSize)}if(o.rangeBand){var m=o,v=m.rangeBand()/2;r=o=function(t){return m(t)+v}}else r.rangeBand?r=o:l.call(t,o,_.tickOffset);u.call(t,r,_.tickOffset),c.call(t,o,_.tickOffset)})}return b.scale=function(t){return arguments.length?(_.scale=t,b):_.scale},b.orient=function(t){return arguments.length?(_.orient=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",b):_.orient},b.tickFormat=function(t){return arguments.length?(_.tickFormat=t,b):_.tickFormat},b.tickCentered=function(t){return arguments.length?(_.tickCentered=t,b):_.tickCentered},b.tickOffset=function(){return _.tickOffset},b.tickInterval=function(){var t;return(t=x.isCategory?2*_.tickOffset:(b.g.select("path.domain").node().getTotalLength()-2*_.outerTickSize)/b.g.selectAll("line").size())==1/0?0:t},b.ticks=function(){return arguments.length?(_.tickArguments=arguments,b):_.tickArguments},b.tickCulling=function(t){return arguments.length?(_.tickCulling=t,b):_.tickCulling},b.tickValues=function(t){if("function"==typeof t)_.tickValues=function(){return t(_.scale.domain())};else{if(!arguments.length)return _.tickValues;_.tickValues=t}return b},b};var d=function(t){function i(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var e={fn:r,internal:{fn:o}},n=function(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"axis",e));return n.d3=t.d3,n.internal=c,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,t),i}(function(t,e,n){this.owner=t,v.chart.internal[e]=n});(r=d.prototype).init=function(){var t=this.owner,e=t.config,n=t.main;t.axes.x=n.append("g").attr("class",B.axis+" "+B.axisX).attr("clip-path",e.axis_x_inner?"":t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden"),t.axes.x.append("text").attr("class",B.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=n.append("g").attr("class",B.axis+" "+B.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden"),t.axes.y.append("text").attr("class",B.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=n.append("g").attr("class",B.axis+" "+B.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden"),t.axes.y2.append("text").attr("class",B.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},r.getXAxis=function(t,e,n,i,r,o,a){var s=this.owner,u=s.config,l={isCategory:s.isCategorized(),withOuterTick:r,tickMultiline:u.axis_x_tick_multiline,tickWidth:u.axis_x_tick_width,tickTextRotate:a?0:u.axis_x_tick_rotate,withoutTransition:o},c=new this.internal(this,l).axis.scale(t).orient(e);return s.isTimeSeries()&&i&&"function"!=typeof i&&(i=i.map(function(t){return s.parseDate(t)})),c.tickFormat(n).tickValues(i),s.isCategorized()&&(c.tickCentered(u.axis_x_tick_centered),h(u.axis_x_tick_culling)&&(u.axis_x_tick_culling=!1)),c},r.updateXAxisTickValues=function(t,e){var n,i=this.owner,r=i.config;return(r.axis_x_tick_fit||r.axis_x_tick_count)&&(n=this.generateTickValues(i.mapTargetsToUniqueXs(t),r.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(n):(i.xAxis.tickValues(n),i.subXAxis.tickValues(n)),n},r.getYAxis=function(t,e,n,i,r,o,a){var s=this.owner,u=s.config,l={withOuterTick:r,withoutTransition:o,tickTextRotate:a?0:u.axis_y_tick_rotate},c=new this.internal(this,l).axis.scale(t).orient(e).tickFormat(n);return s.isTimeSeriesY()?c.ticks(s.d3.time[u.axis_y_tick_time_value],u.axis_y_tick_time_interval):c.tickValues(i),c},r.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},r.getXAxisTickFormat=function(){var e=this.owner,n=e.config,i=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(t){return t<0?t.toFixed(0):t};return n.axis_x_tick_format&&(f(n.axis_x_tick_format)?i=n.axis_x_tick_format:e.isTimeSeries()&&(i=function(t){return t?e.axisTimeFormat(n.axis_x_tick_format)(t):""})),f(i)?function(t){return i.call(e,t)}:i},r.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},r.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},r.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},r.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},r.getLabelOptionByAxisId=function(t){var e,n=this.owner,i=n.config;return"y"===t?e=i.axis_y_label:"y2"===t?e=i.axis_y2_label:"x"===t&&(e=i.axis_x_label),e},r.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return u(e)?e:e?e.text:null},r.setLabelText=function(t,e){var n=this.owner,i=n.config,r=this.getLabelOptionByAxisId(t);u(r)?"y"===t?i.axis_y_label=e:"y2"===t?i.axis_y2_label=e:"x"===t&&(i.axis_x_label=e):r&&(r.text=e)},r.getLabelPosition=function(t,e){var n=this.getLabelOptionByAxisId(t),i=n&&"object"===(void 0===n?"undefined":s(n))&&n.position?n.position:e;return{isInner:0<=i.indexOf("inner"),isOuter:0<=i.indexOf("outer"),isLeft:0<=i.indexOf("left"),isCenter:0<=i.indexOf("center"),isRight:0<=i.indexOf("right"),isTop:0<=i.indexOf("top"),isMiddle:0<=i.indexOf("middle"),isBottom:0<=i.indexOf("bottom")}},r.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},r.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},r.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},r.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},r.textForXAxisLabel=function(){return this.getLabelText("x")},r.textForYAxisLabel=function(){return this.getLabelText("y")},r.textForY2AxisLabel=function(){return this.getLabelText("y2")},r.xForAxisLabel=function(t,e){var n=this.owner;return t?e.isLeft?0:e.isCenter?n.width/2:n.width:e.isBottom?-n.height:e.isMiddle?-n.height/2:0},r.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},r.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},r.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},r.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},r.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},r.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},r.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},r.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},r.dyForXAxisLabel=function(){var t=this.owner,e=t.config,n=this.getXAxisLabelPosition();return e.axis_rotated?n.isInner?"1.2em":-25-(t.config.axis_x_inner?0:this.getMaxTickWidth("x")):n.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:"3em"},r.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"3em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},r.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},r.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},r.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},r.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},r.getMaxTickWidth=function(t,e){var n,i,r,o,a=this.owner,s=a.config,u=0;return e&&a.currentMaxTickWidths[t]||(a.svg&&(n=a.filterTargetsToShow(a.data.targets),"y"===t?(i=a.y.copy().domain(a.getYDomain(n,"y")),r=this.getYAxis(i,a.yOrient,s.axis_y_tick_format,a.yAxisTickValues,!1,!0,!0)):"y2"===t?(i=a.y2.copy().domain(a.getYDomain(n,"y2")),r=this.getYAxis(i,a.y2Orient,s.axis_y2_tick_format,a.y2AxisTickValues,!1,!0,!0)):(i=a.x.copy().domain(a.getXDomain(n)),r=this.getXAxis(i,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(n,r)),(o=a.d3.select("body").append("div").classed("c3",!0)).append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).append("g").call(r).each(function(){a.d3.select(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();u<t.width&&(u=t.width)}),o.remove()})),a.currentMaxTickWidths[t]=u<=0?a.currentMaxTickWidths[t]:u),a.currentMaxTickWidths[t]},r.updateLabels=function(t){var e=this.owner,n=e.main.select("."+B.axisX+" ."+B.axisXLabel),i=e.main.select("."+B.axisY+" ."+B.axisYLabel),r=e.main.select("."+B.axisY2+" ."+B.axisY2Label);(t?n.transition():n).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?r.transition():r).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},r.getPadding=function(t,e,n,i){var r="number"==typeof t?t:t[e];return P(r)?"ratio"===t.unit?t[e]*i:this.convertPixelsToAxisPadding(r,i):n},r.convertPixelsToAxisPadding=function(t,e){var n=this.owner,i=n.config.axis_rotated?n.width:n.height;return e*(t/i)},r.generateTickValues=function(t,e,n){var i,r,o,a,s,u,l,c=t;if(e)if(1===(i=f(e)?e():e))c=[t[0]];else if(2===i)c=[t[0],t[t.length-1]];else if(2<i){for(a=i-2,r=t[0],o=t[t.length-1],s=(o-r)/(a+1),c=[r],u=0;u<a;u++)l=+r+s*(u+1),c.push(n?new Date(l):l);c.push(o)}return n||(c=c.sort(function(t,e){return t-e})),c},r.generateTransitions=function(t){var e=this.owner,n=e.axes;return{axisX:t?n.x.transition().duration(t):n.x,axisY:t?n.y.transition().duration(t):n.y,axisY2:t?n.y2.transition().duration(t):n.y2,axisSubX:t?n.subx.transition().duration(t):n.subx}},r.redraw=function(t,e){var n=this.owner;n.axes.x.style("opacity",e?0:1),n.axes.y.style("opacity",e?0:1),n.axes.y2.style("opacity",e?0:1),n.axes.subx.style("opacity",e?0:1),t.axisX.call(n.xAxis),t.axisY.call(n.yAxis),t.axisY2.call(n.y2Axis),t.axisSubX.call(n.subXAxis)};var p,m,v={version:"0.4.22"};function e(t){var e=this.internal=new y(this);e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function e(n,i,r){Object.keys(n).forEach(function(t){i[t]=n[t].bind(r),0<Object.keys(n[t]).length&&e(n[t],i[t],r)})}(p,this,this)}function y(t){this.d3=window.d3?window.d3:x("/8dZfPfB"),this.api=t,this.config=this.getDefaultConfig(),this.data={},this.cache={},this.axes={}}return v.generate=function(t){return new e(t)},v.chart={fn:e.prototype,internal:{fn:y.prototype}},p=v.chart.fn,(m=v.chart.internal.fn).beforeInit=function(){},m.afterInit=function(){},m.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},m.initParams=function(){var t=this,e=t.d3,n=t.config;t.clipId="c3-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=n.data_xLocaltime?e.time.format:e.time.format.utc,t.axisTimeFormat=n.axis_x_localtime?e.time.format:e.time.format.utc,t.defaultAxisTimeFormat=t.axisTimeFormat.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%-m/%-d",function(t){return t.getDay()&&1!==t.getDate()}],["%-m/%-d",function(t){return 1!==t.getDate()}],["%-m/%-d",function(t){return t.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=n.axis_rotated?n.axis_x_inner?"right":"left":n.axis_x_inner?"top":"bottom",t.yOrient=n.axis_rotated?n.axis_y_inner?"top":"bottom":n.axis_y_inner?"right":"left",t.y2Orient=n.axis_rotated?n.axis_y2_inner?"bottom":"top":n.axis_y2_inner?"left":"right",t.subXOrient=n.axis_rotated?"left":"bottom",t.isLegendRight="right"===n.legend_position,t.isLegendInset="inset"===n.legend_position,t.isLegendTop="top-left"===n.legend_inset_anchor||"top-right"===n.legend_inset_anchor,t.isLegendLeft="top-left"===n.legend_inset_anchor||"bottom-left"===n.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=n.axis_rotated&&!n.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.axes.subx=e.selectAll([])},m.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},m.initWithData=function(t){var e,n,i=this,r=i.d3,o=i.config,a=!0;i.axis=new d(i),i.initPie&&i.initPie(),i.initBrush&&i.initBrush(),i.initZoom&&i.initZoom(),o.bindto?"function"==typeof o.bindto.node?i.selectChart=o.bindto:i.selectChart=r.select(o.bindto):i.selectChart=r.selectAll([]),i.selectChart.empty()&&(i.selectChart=r.select(document.createElement("div")).style("opacity",0),i.observeInserted(i.selectChart),a=!1),i.selectChart.html("").classed("c3",!0),i.data.xs={},i.data.targets=i.convertDataToTargets(t),o.data_filter&&(i.data.targets=i.data.targets.filter(o.data_filter)),o.data_hide&&i.addHiddenTargetIds(!0===o.data_hide?i.mapToIds(i.data.targets):o.data_hide),o.legend_hide&&i.addHiddenLegendIds(!0===o.legend_hide?i.mapToIds(i.data.targets):o.legend_hide),i.updateSizes(),i.updateScales(),i.x.domain(r.extent(i.getXDomain(i.data.targets))),i.y.domain(i.getYDomain(i.data.targets,"y")),i.y2.domain(i.getYDomain(i.data.targets,"y2")),i.subX.domain(i.x.domain()),i.subY.domain(i.y.domain()),i.subY2.domain(i.y2.domain()),i.orgXDomain=i.x.domain(),i.brush&&i.brush.scale(i.subX),o.zoom_enabled&&i.zoom.scale(i.x),i.svg=i.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return o.onmouseover.call(i)}).on("mouseleave",function(){return o.onmouseout.call(i)}),i.config.svg_classname&&i.svg.attr("class",i.config.svg_classname),e=i.svg.append("defs"),i.clipChart=i.appendClip(e,i.clipId),i.clipXAxis=i.appendClip(e,i.clipIdForXAxis),i.clipYAxis=i.appendClip(e,i.clipIdForYAxis),i.clipGrid=i.appendClip(e,i.clipIdForGrid),i.clipSubchart=i.appendClip(e,i.clipIdForSubchart),i.updateSvgSize(),n=i.main=i.svg.append("g").attr("transform",i.getTranslate("main")),i.initSubchart&&i.initSubchart(),i.initTooltip&&i.initTooltip(),i.initLegend&&i.initLegend(),i.initTitle&&i.initTitle(),n.append("text").attr("class",B.text+" "+B.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),i.initRegion(),i.initGrid(),n.append("g").attr("clip-path",i.clipPath).attr("class",B.chart),o.grid_lines_front&&i.initGridLines(),i.initEventRect(),i.initChartElements(),n.insert("rect",o.zoom_privileged?null:"g."+B.regions).attr("class",B.zoomRect).attr("width",i.width).attr("height",i.height).style("opacity",0).on("dblclick.zoom",null),o.axis_x_extent&&i.brush.extent(i.getDefaultExtent()),i.axis.init(),i.updateTargets(i.data.targets),a&&(i.updateDimension(),i.config.oninit.call(i),i.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),i.bindResize(),i.api.element=i.selectChart.node()},m.smoothLines=function(t,e){var o=this;"grid"===e&&t.each(function(){var t=o.d3.select(this),e=t.attr("x1"),n=t.attr("x2"),i=t.attr("y1"),r=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(n),y1:Math.ceil(i),y2:Math.ceil(r)})})},m.updateSizes=function(){var t=this,e=t.config,n=t.legend?t.getLegendHeight():0,i=t.legend?t.getLegendWidth():0,r=t.isLegendRight||t.isLegendInset?0:n,o=t.hasArcType(),a=e.axis_rotated||o?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!o?e.subchart_size_height+a:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+r+t.getCurrentPaddingBottom(),left:s+(o?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:o?0:t.getCurrentPaddingRight(),bottom:a+s+r+t.getCurrentPaddingBottom(),left:o?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+r,left:t.rotated_padding_left}:{top:t.currentHeight-s-r,right:NaN,bottom:a+r,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(n,i),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?i+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&o&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},m.updateTargets=function(t){this.updateTargetsForText(t),this.updateTargetsForBar(t),this.updateTargetsForLine(t),this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(t),this.updateTargetsForSubchart&&this.updateTargetsForSubchart(t),this.showTargets()},m.showTargets=function(){var e=this;e.svg.selectAll("."+B.target).filter(function(t){return e.isTargetToShow(t.id)}).transition().duration(e.config.transition_duration).style("opacity",1)},m.redraw=function(t,e){var n,i,r,o,a,s,u,l,c,h,f,d,p,g,m,v,_,y,x,b,w,S,A,T,P,C,L,E,k,M=this,O=M.main,R=M.d3,z=M.config,D=M.getShapeIndices(M.isAreaType),I=M.getShapeIndices(M.isBarType),G=M.getShapeIndices(M.isLineType),j=M.hasArcType(),V=M.filterTargetsToShow(M.data.targets),N=M.xv.bind(M);if(n=F(t=t||{},"withY",!0),i=F(t,"withSubchart",!0),r=F(t,"withTransition",!0),s=F(t,"withTransform",!1),u=F(t,"withUpdateXDomain",!1),l=F(t,"withUpdateOrgXDomain",!1),c=F(t,"withTrimXDomain",!0),p=F(t,"withUpdateXAxis",u),h=F(t,"withLegend",!1),f=F(t,"withEventRect",!0),d=F(t,"withDimension",!0),o=F(t,"withTransitionForExit",r),a=F(t,"withTransitionForAxis",r),x=r?z.transition_duration:0,b=o?x:0,w=a?x:0,e=e||M.axis.generateTransitions(w),h&&z.legend_show?M.updateLegend(M.mapToIds(M.data.targets),t,e):d&&M.updateDimension(!0),M.isCategorized()&&0===V.length&&M.x.domain([0,M.axes.x.selectAll(".tick").size()]),V.length?(M.updateXDomain(V,u,l,c),z.axis_x_tick_values||(T=M.axis.updateXAxisTickValues(V))):(M.xAxis.tickValues([]),M.subXAxis.tickValues([])),z.zoom_rescale&&!t.flow&&(L=M.x.orgDomain()),M.y.domain(M.getYDomain(V,"y",L)),M.y2.domain(M.getYDomain(V,"y2",L)),!z.axis_y_tick_values&&z.axis_y_tick_count&&M.yAxis.tickValues(M.axis.generateTickValues(M.y.domain(),z.axis_y_tick_count)),!z.axis_y2_tick_values&&z.axis_y2_tick_count&&M.y2Axis.tickValues(M.axis.generateTickValues(M.y2.domain(),z.axis_y2_tick_count)),M.axis.redraw(e,j),M.axis.updateLabels(r),(u||p)&&V.length)if(z.axis_x_tick_culling&&T){for(P=1;P<T.length;P++)if(T.length/P<z.axis_x_tick_culling_max){C=P;break}M.svg.selectAll("."+B.axisX+" .tick text").each(function(t){var e=T.indexOf(t);0<=e&&R.select(this).style("display",e%C?"none":"block")})}else M.svg.selectAll("."+B.axisX+" .tick text").style("display","block");g=M.generateDrawArea?M.generateDrawArea(D,!1):void 0,m=M.generateDrawBar?M.generateDrawBar(I):void 0,v=M.generateDrawLine?M.generateDrawLine(G,!1):void 0,_=M.generateXYForText(D,I,G,!0),y=M.generateXYForText(D,I,G,!1),n&&(M.subY.domain(M.getYDomain(V,"y")),M.subY2.domain(M.getYDomain(V,"y2"))),M.updateXgridFocus(),O.select("text."+B.text+"."+B.empty).attr("x",M.width/2).attr("y",M.height/2).text(z.data_empty_label_text).transition().style("opacity",V.length?0:1),M.updateGrid(x),M.updateRegion(x),M.updateBar(b),M.updateLine(b),M.updateArea(b),M.updateCircle(),M.hasDataLabel()&&M.updateText(b),M.redrawTitle&&M.redrawTitle(),M.redrawArc&&M.redrawArc(x,b,s),M.redrawSubchart&&M.redrawSubchart(i,e,x,b,D,I,G),O.selectAll("."+B.selectedCircles).filter(M.isBarType.bind(M)).selectAll("circle").remove(),z.interaction_enabled&&!t.flow&&f&&(M.redrawEventRect(),M.updateZoom&&M.updateZoom()),M.updateCircleY(),E=(M.config.axis_rotated?M.circleY:M.circleX).bind(M),k=(M.config.axis_rotated?M.circleX:M.circleY).bind(M),t.flow&&(A=M.generateFlow({targets:V,flow:t.flow,duration:t.flow.duration,drawBar:m,drawLine:v,drawArea:g,cx:E,cy:k,xv:N,xForText:_,yForText:y})),(x||A)&&M.isTabVisible()?R.transition().duration(x).each(function(){var e=[];[M.redrawBar(m,!0),M.redrawLine(v,!0),M.redrawArea(g,!0),M.redrawCircle(E,k,!0),M.redrawText(_,y,t.flow,!0),M.redrawRegion(!0),M.redrawGrid(!0)].forEach(function(t){t.forEach(function(t){e.push(t)})}),S=M.generateWait(),e.forEach(function(t){S.add(t)})}).call(S,function(){A&&A(),z.onrendered&&z.onrendered.call(M)}):(M.redrawBar(m),M.redrawLine(v),M.redrawArea(g),M.redrawCircle(E,k),M.redrawText(_,y,t.flow),M.redrawRegion(),M.redrawGrid(),z.onrendered&&z.onrendered.call(M)),M.mapToIds(M.data.targets).forEach(function(t){M.withoutFadeIn[t]=!0})},m.updateAndRedraw=function(t){var e,n=this.config;(t=t||{}).withTransition=F(t,"withTransition",!0),t.withTransform=F(t,"withTransform",!1),t.withLegend=F(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=F(t,"withTransitionForTransform",t.withTransition),this.updateSizes(),t.withLegend&&n.legend_show||(e=this.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(t.withTransitionForTransform,e)),this.redraw(t,e)},m.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},m.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},m.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")},m.isCustomX=function(){var t=this.config;return!this.isTimeSeries()&&(t.data_x||C(t.data_xs))},m.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},m.getTranslate=function(t){var e,n,i=this,r=i.config;return"main"===t?(e=l(i.margin.left),n=l(i.margin.top)):"context"===t?(e=l(i.margin2.left),n=l(i.margin2.top)):"legend"===t?(e=i.margin3.left,n=i.margin3.top):"x"===t?(e=0,n=r.axis_rotated?0:i.height):"y"===t?(e=0,n=r.axis_rotated?i.height:0):"y2"===t?(e=r.axis_rotated?0:i.width,n=r.axis_rotated?1:0):"subx"===t?(e=0,n=r.axis_rotated?0:i.height2):"arc"===t&&(e=i.arcWidth/2,n=i.arcHeight/2-(i.hasType("gauge")?6:0)),"translate("+e+","+n+")"},m.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?1:0},m.initialOpacityForCircle=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForCircle(t):0},m.opacityForCircle=function(t){var e=(f(this.config.point_show)?this.config.point_show(t):this.config.point_show)?1:0;return P(t.value)?this.isScatterType(t)?.5:e:0},m.opacityForText=function(){return this.hasDataLabel()?1:0},m.xx=function(t){return t?this.x(t.x):null},m.xv=function(t){var e=t.value;return this.isTimeSeries()?e=this.parseDate(t.value):this.isCategorized()&&"string"==typeof t.value&&(e=this.config.axis_x_categories.indexOf(t.value)),Math.ceil(this.x(e))},m.yv=function(t){var e=t.axis&&"y2"===t.axis?this.y2:this.y;return Math.ceil(e(t.value))},m.subxx=function(t){return t?this.subX(t.x):null},m.transformMain=function(t,e){var n,i,r,o=this;e&&e.axisX?n=e.axisX:(n=o.main.select("."+B.axisX),t&&(n=n.transition())),e&&e.axisY?i=e.axisY:(i=o.main.select("."+B.axisY),t&&(i=i.transition())),e&&e.axisY2?r=e.axisY2:(r=o.main.select("."+B.axisY2),t&&(r=r.transition())),(t?o.main.transition():o.main).attr("transform",o.getTranslate("main")),n.attr("transform",o.getTranslate("x")),i.attr("transform",o.getTranslate("y")),r.attr("transform",o.getTranslate("y2")),o.main.select("."+B.chartArcs).attr("transform",o.getTranslate("arc"))},m.transformAll=function(t,e){this.transformMain(t,e),this.config.subchart_show&&this.transformContext(t,e),this.legend&&this.transformLegend(t)},m.updateSvgSize=function(){var t=this,e=t.svg.select(".c3-brush .background");t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",e.size()?e.attr("height"):0),t.svg.select("."+B.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px")},m.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(),e.updateSvgSize(),e.transformAll(!1)},m.observeInserted=function(e){var n,i=this;"undefined"!=typeof MutationObserver?(n=new MutationObserver(function(t){t.forEach(function(t){"childList"===t.type&&t.previousSibling&&(n.disconnect(),i.intervalForObserveInserted=window.setInterval(function(){e.node().parentNode&&(window.clearInterval(i.intervalForObserveInserted),i.updateDimension(),i.brush&&i.brush.update(),i.config.oninit.call(i),i.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),e.transition().style("opacity",1))},10))})})).observe(e.node(),{attributes:!0,childList:!0,characterData:!0}):window.console.error("MutationObserver not defined.")},m.bindResize=function(){var t=this,e=t.config;if(t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.api.flush()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),t.resizeIfElementDisplayed=function(){null!=t.api&&t.api.element.offsetParent&&t.resizeFunction()},window.attachEvent)window.attachEvent("onresize",t.resizeIfElementDisplayed);else if(window.addEventListener)window.addEventListener("resize",t.resizeIfElementDisplayed,!1);else{var n=window.onresize;n?n.add&&n.remove||(n=t.generateResize()).add(window.onresize):n=t.generateResize(),n.add(t.resizeFunction),window.onresize=function(){t.api.element.offsetParent&&n()}}},m.generateResize=function(){var n=[];function t(){n.forEach(function(t){t()})}return t.add=function(t){n.push(t)},t.remove=function(t){for(var e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}},t},m.endall=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},m.generateWait=function(){var r=[],t=function(t,n){var i=setInterval(function(){var e=0;r.forEach(function(t){if(t.empty())e+=1;else try{t.transition()}catch(t){e+=1}}),e===r.length&&(clearInterval(i),n&&n())},10)};return t.add=function(t){r.push(t)},t},m.parseDate=function(t){var e;return t instanceof Date?e=t:"string"==typeof t?e=this.dataTimeFormat(this.config.data_xFormat).parse(t):"object"===(void 0===t?"undefined":s(t))?e=new Date(+t):"number"!=typeof t||isNaN(t)||(e=new Date(+t)),e&&!isNaN(+e)||window.console.error("Failed to parse x '"+t+"' to Date object"),e},m.isTabVisible=function(){var t;return void 0!==document.hidden?t="hidden":void 0!==document.mozHidden?t="mozHidden":void 0!==document.msHidden?t="msHidden":void 0!==document.webkitHidden&&(t="webkitHidden"),!document[t]},m.isValue=P,m.isFunction=f,m.isString=u,m.isUndefined=w,m.isDefined=D,m.ceil10=n,m.asHalfPixel=l,m.diffDomain=I,m.isEmpty=h,m.notEmpty=C,m.notEmpty=C,m.getOption=F,m.hasValue=i,m.sanitise=g,m.getPathBox=_,m.CLASS=B,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,n){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=n},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=n},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=n},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=n},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=n},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,n,i,r,o,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=n,this._x1=i,this._y1=r,this._x2=o,this._y2=a},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=n,this._x1=i,this._y1=r},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,n,i,r,o,a,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=n,this._r1=i,this._r2=r,this._angle=o,this._largeArcFlag=a,this._sweepFlag=s},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i,r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=n,this._x2=i,this._y2=r},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,n){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=n},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,n,i,r,o){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,n,i,r,o){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,n,i,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,n,i){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,n,i,r,o,a){return new window.SVGPathSegArcAbs(void 0,t,e,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,n,i,r,o,a){return new window.SVGPathSegArcRel(void 0,t,e,n,i,r,o,a)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,n,i){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,n,i)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var n=e.pathSegList.numberOfItems-1;if(n<=0)return 0;do{if(e.pathSegList.removeItem(n),t>e.getTotalLength())break;n--}while(0<n);return n})),"SVGPathSegList"in window||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",n=!0;return t.forEach(function(t){n?(n=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];var i=this,e=function(){this.pathSegList=[]};e.prototype.appendSegment=function(t){this.pathSegList.push(t)};var n=function(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};n.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},n.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},n.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},n.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},n.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},n.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},n.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},n.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},n.prototype._parseNumber=function(){var t=0,e=0,n=1,i=0,r=1,o=1,a=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var s=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=s)for(var u=this._currentIndex-1,l=1;s<=u;)e+=l*(this._string.charAt(u--)-"0"),l*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)n*=10,i+=(this._string.charAt(this._currentIndex)-"0")/n,this._currentIndex+=1}if(this._currentIndex!=a&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=e+i;if(c*=r,t&&(c*=Math.pow(10,o*t)),a!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},n.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},n.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(i,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(i);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicAbs(i,n.x,n.y,n.x1,n.y1,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothRel(i,n.x,n.y,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:return n={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoCubicSmoothAbs(i,n.x,n.y,n.x2,n.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticRel(i,n.x,n.y,n.x1,n.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegCurvetoQuadraticAbs(i,n.x,n.y,n.x1,n.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(i,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:return n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcRel(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:return n={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()},new window.SVGPathSegArcAbs(i,n.x,n.y,n.x1,n.y1,n.arcAngle,n.arcLarge,n.arcSweep);default:throw"Unknown path seg type."}};var r=new e,o=new n(t);if(!o.initialCommandIsMoveTo())return[];for(;o.hasMoreData();){var a=o.parseSegment();if(!a)return[];r.appendSegment(a)}return r.pathSegList}),p.axis=function(){},p.axis.labels=function(e){var n=this.internal;arguments.length&&(Object.keys(e).forEach(function(t){n.axis.setLabelText(t,e[t])}),n.axis.updateLabels())},p.axis.max=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_max,y:n.axis_y_max,y2:n.axis_y2_max};"object"===(void 0===t?"undefined":s(t))?(P(t.x)&&(n.axis_x_max=t.x),P(t.y)&&(n.axis_y_max=t.y),P(t.y2)&&(n.axis_y2_max=t.y2)):n.axis_y_max=n.axis_y2_max=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},p.axis.min=function(t){var e=this.internal,n=e.config;if(!arguments.length)return{x:n.axis_x_min,y:n.axis_y_min,y2:n.axis_y2_min};"object"===(void 0===t?"undefined":s(t))?(P(t.x)&&(n.axis_x_min=t.x),P(t.y)&&(n.axis_y_min=t.y),P(t.y2)&&(n.axis_y2_min=t.y2)):n.axis_y_min=n.axis_y2_min=t,e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},p.axis.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};D(t.max)&&this.axis.max(t.max),D(t.min)&&this.axis.min(t.min)},p.category=function(t,e){var n=this.internal,i=n.config;return 1<arguments.length&&(i.axis_x_categories[t]=e,n.redraw()),i.axis_x_categories[t]},p.categories=function(t){var e=this.internal,n=e.config;return arguments.length&&(n.axis_x_categories=t,e.redraw()),n.axis_x_categories},p.resize=function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},p.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},p.destroy=function(){var e=this.internal;if(window.clearInterval(e.intervalForObserveInserted),void 0!==e.resizeTimeout&&window.clearTimeout(e.resizeTimeout),window.detachEvent)window.detachEvent("onresize",e.resizeIfElementDisplayed);else if(window.removeEventListener)window.removeEventListener("resize",e.resizeIfElementDisplayed);else{var t=window.onresize;t&&t.add&&t.remove&&t.remove(e.resizeFunction)}return e.resizeFunction.remove(),e.selectChart.classed("c3",!1).html(""),Object.keys(e).forEach(function(t){e[t]=null}),null},p.color=function(t){return this.internal.color(t)},p.data=function(e){var t=this.internal.data.targets;return void 0===e?t:t.filter(function(t){return 0<=[].concat(e).indexOf(t.id)})},p.data.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},p.data.values=function(t){var e,n=null;return t&&(n=(e=this.data(t))[0]?e[0].values.map(function(t){return t.value}):null),n},p.data.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},p.data.colors=function(t){return this.internal.updateDataAttributes("colors",t)},p.data.axes=function(t){return this.internal.updateDataAttributes("axes",t)},p.flow=function(t){var r,e,n,i,o,a,s,u=this.internal,l=[],c=u.getMaxDataCount(),h=0,f=0;if(t.json)e=u.convertJsonToData(t.json,t.keys);else if(t.rows)e=u.convertRowsToData(t.rows);else{if(!t.columns)return;e=u.convertColumnsToData(t.columns)}r=u.convertDataToTargets(e,!0),u.data.targets.forEach(function(t){var e,n,i=!1;for(e=0;e<r.length;e++)if(t.id===r[e].id){for(i=!0,t.values[t.values.length-1]&&(f=t.values[t.values.length-1].index+1),h=r[e].values.length,n=0;n<h;n++)r[e].values[n].index=f+n,u.isTimeSeries()||(r[e].values[n].x=f+n);t.values=t.values.concat(r[e].values),r.splice(e,1);break}i||l.push(t.id)}),u.data.targets.forEach(function(t){var e,n;for(e=0;e<l.length;e++)if(t.id===l[e])for(f=t.values[t.values.length-1].index+1,n=0;n<h;n++)t.values.push({id:t.id,index:f+n,x:u.isTimeSeries()?u.getOtherTargetX(f+n):f+n,value:null})}),u.data.targets.length&&r.forEach(function(t){var e,n=[];for(e=u.data.targets[0].values[0].index;e<f;e++)n.push({id:t.id,index:e,x:u.isTimeSeries()?u.getOtherTargetX(e):e,value:null});t.values.forEach(function(t){t.index+=f,u.isTimeSeries()||(t.x+=f)}),t.values=n.concat(t.values)}),u.data.targets=u.data.targets.concat(r),u.getMaxDataCount(),o=(i=u.data.targets[0]).values[0],D(t.to)?(h=0,s=u.isTimeSeries()?u.parseDate(t.to):t.to,i.values.forEach(function(t){t.x<s&&h++})):D(t.length)&&(h=t.length),c?1===c&&u.isTimeSeries()&&(a=(i.values[i.values.length-1].x-o.x)/2,n=[new Date(+o.x-a),new Date(+o.x+a)],u.updateXDomain(null,!0,!0,!1,n)):(a=u.isTimeSeries()?1<i.values.length?i.values[i.values.length-1].x-o.x:o.x-u.getXDomain(u.data.targets)[0]:1,n=[o.x-a,o.x],u.updateXDomain(null,!0,!0,!1,n)),u.updateTargets(u.data.targets),u.redraw({flow:{index:o.index,length:h,duration:P(t.duration)?t.duration:u.config.transition_duration,done:t.done,orgDataCount:c},withLegend:!0,withTransition:1<c,withTrimXDomain:!1,withUpdateXAxis:!0})},m.generateFlow=function(M){var O=this,R=O.config,z=O.d3;return function(){var t,e,n,i,r=M.targets,o=M.flow,a=M.drawBar,s=M.drawLine,u=M.drawArea,l=M.cx,c=M.cy,h=M.xv,f=M.xForText,d=M.yForText,p=M.duration,g=o.index,m=o.length,v=O.getValueOnIndex(O.data.targets[0].values,g),_=O.getValueOnIndex(O.data.targets[0].values,g+m),y=O.x.domain(),x=o.duration||p,b=o.done||function(){},w=O.generateWait(),S=O.xgrid||z.selectAll([]),A=O.xgridLines||z.selectAll([]),T=O.mainRegion||z.selectAll([]),P=O.mainText||z.selectAll([]),C=O.mainBar||z.selectAll([]),L=O.mainLine||z.selectAll([]),E=O.mainArea||z.selectAll([]),k=O.mainCircle||z.selectAll([]);O.flowing=!0,O.data.targets.forEach(function(t){t.values.splice(0,m)}),i=O.updateXDomain(r,!0,!0),O.updateXGrid&&O.updateXGrid(!0),t=o.orgDataCount?1===o.orgDataCount||(v&&v.x)===(_&&_.x)?O.x(y[0])-O.x(i[0]):O.isTimeSeries()?O.x(y[0])-O.x(i[0]):O.x(v.x)-O.x(_.x):1!==O.data.targets[0].values.length?O.x(y[0])-O.x(i[0]):O.isTimeSeries()?(v=O.getValueOnIndex(O.data.targets[0].values,0),_=O.getValueOnIndex(O.data.targets[0].values,O.data.targets[0].values.length-1),O.x(v.x)-O.x(_.x)):I(i)/2,e=I(y)/I(i),n="translate("+t+",0) scale("+e+",1)",O.hideXGridFocus(),z.transition().ease("linear").duration(x).each(function(){w.add(O.axes.x.transition().call(O.xAxis)),w.add(C.transition().attr("transform",n)),w.add(L.transition().attr("transform",n)),w.add(E.transition().attr("transform",n)),w.add(k.transition().attr("transform",n)),w.add(P.transition().attr("transform",n)),w.add(T.filter(O.isRegionOnX).transition().attr("transform",n)),w.add(S.transition().attr("transform",n)),w.add(A.transition().attr("transform",n))}).call(w,function(){var t,e=[],n=[],i=[];if(m){for(t=0;t<m;t++)e.push("."+B.shape+"-"+(g+t)),n.push("."+B.text+"-"+(g+t)),i.push("."+B.eventRect+"-"+(g+t));O.svg.selectAll("."+B.shapes).selectAll(e).remove(),O.svg.selectAll("."+B.texts).selectAll(n).remove(),O.svg.selectAll("."+B.eventRects).selectAll(i).remove(),O.svg.select("."+B.xgrid).remove()}S.attr("transform",null).attr(O.xgridAttr),A.attr("transform",null),A.select("line").attr("x1",R.axis_rotated?0:h).attr("x2",R.axis_rotated?O.width:h),A.select("text").attr("x",R.axis_rotated?O.width:0).attr("y",h),C.attr("transform",null).attr("d",a),L.attr("transform",null).attr("d",s),E.attr("transform",null).attr("d",u),k.attr("transform",null).attr("cx",l).attr("cy",c),P.attr("transform",null).attr("x",f).attr("y",d).style("fill-opacity",O.opacityForText.bind(O)),T.attr("transform",null),T.select("rect").filter(O.isRegionOnX).attr("x",O.regionX.bind(O)).attr("width",O.regionWidth.bind(O)),R.interaction_enabled&&O.redrawEventRect(),b(),O.flowing=!1})}},p.focus=function(e){var t,n=this.internal;e=n.mapToTargetIds(e),t=n.svg.selectAll(n.selectorTargets(e.filter(n.isTargetToShow,n))),this.revert(),this.defocus(),t.classed(B.focused,!0).classed(B.defocused,!1),n.hasArcType()&&n.expandArc(e),n.toggleFocusLegend(e,!0),n.focusedTargetIds=e,n.defocusedTargetIds=n.defocusedTargetIds.filter(function(t){return e.indexOf(t)<0})},p.defocus=function(e){var t=this.internal;e=t.mapToTargetIds(e),t.svg.selectAll(t.selectorTargets(e.filter(t.isTargetToShow,t))).classed(B.focused,!1).classed(B.defocused,!0),t.hasArcType()&&t.unexpandArc(e),t.toggleFocusLegend(e,!1),t.focusedTargetIds=t.focusedTargetIds.filter(function(t){return e.indexOf(t)<0}),t.defocusedTargetIds=e},p.revert=function(t){var e=this.internal;t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t)).classed(B.focused,!1).classed(B.defocused,!1),e.hasArcType()&&e.unexpandArc(t),e.config.legend_show&&(e.showLegend(t.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(t)).filter(function(){return e.d3.select(this).classed(B.legendItemFocused)}).classed(B.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]},p.xgrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_x_lines=t,e.redrawWithoutRescale()),n.grid_x_lines},p.xgrids.add=function(t){var e=this.internal;return this.xgrids(e.config.grid_x_lines.concat(t||[]))},p.xgrids.remove=function(t){this.internal.removeGridLines(t,!0)},p.ygrids=function(t){var e=this.internal,n=e.config;return t&&(n.grid_y_lines=t,e.redrawWithoutRescale()),n.grid_y_lines},p.ygrids.add=function(t){var e=this.internal;return this.ygrids(e.config.grid_y_lines.concat(t||[]))},p.ygrids.remove=function(t){this.internal.removeGridLines(t,!1)},p.groups=function(t){var e=this.internal,n=e.config;return w(t)||(n.data_groups=t,e.redraw()),n.data_groups},p.legend=function(){},p.legend.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},p.legend.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},p.load=function(e){var t=this.internal,n=t.config;e.xs&&t.addXs(e.xs),"names"in e&&p.data.names.bind(this)(e.names),"classes"in e&&Object.keys(e.classes).forEach(function(t){n.data_classes[t]=e.classes[t]}),"categories"in e&&t.isCategorized()&&(n.axis_x_categories=e.categories),"axes"in e&&Object.keys(e.axes).forEach(function(t){n.data_axes[t]=e.axes[t]}),"colors"in e&&Object.keys(e.colors).forEach(function(t){n.data_colors[t]=e.colors[t]}),"cacheIds"in e&&t.hasCaches(e.cacheIds)?t.load(t.getCaches(e.cacheIds),e.done):"unload"in e?t.unload(t.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){t.loadFromArgs(e)}):t.loadFromArgs(e)},p.unload=function(t){var e=this.internal;(t=t||{})instanceof Array?t={ids:t}:"string"==typeof t&&(t={ids:[t]}),e.unload(e.mapToTargetIds(t.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),t.done&&t.done()})},p.regions=function(t){var e=this.internal,n=e.config;return t&&(n.regions=t,e.redrawWithoutRescale()),n.regions},p.regions.add=function(t){var e=this.internal,n=e.config;return t&&(n.regions=n.regions.concat(t),e.redrawWithoutRescale()),n.regions},p.regions.remove=function(t){var e,n,i,r=this.internal,o=r.config;return t=t||{},e=r.getOption(t,"duration",o.transition_duration),n=r.getOption(t,"classes",[B.region]),i=r.main.select("."+B.regions).selectAll(n.map(function(t){return"."+t})),(e?i.transition().duration(e):i).style("opacity",0).remove(),o.regions=o.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){0<=n.indexOf(t)&&(e=!0)}),!e)}),o.regions},p.selected=function(t){var e=this.internal,n=e.d3;return n.merge(e.main.selectAll("."+B.shapes+e.getTargetSelectorSuffix(t)).selectAll("."+B.shape).filter(function(){return n.select(this).classed(B.SELECTED)}).map(function(t){return t.map(function(t){var e=t.__data__;return e.data?e.data:e})}))},p.select=function(u,l,c){var h=this.internal,f=h.d3,d=h.config;d.data_selection_enabled&&h.main.selectAll("."+B.shapes).selectAll("."+B.shape).each(function(t,e){var n=f.select(this),i=t.data?t.data.id:t.id,r=h.getToggle(this,t).bind(h),o=d.data_selection_grouped||!u||0<=u.indexOf(i),a=!l||0<=l.indexOf(e),s=n.classed(B.SELECTED);n.classed(B.line)||n.classed(B.area)||(o&&a?d.data_selection_isselectable(t)&&!s&&r(!0,n.classed(B.SELECTED,!0),t,e):D(c)&&c&&s&&r(!1,n.classed(B.SELECTED,!1),t,e))})},p.unselect=function(u,l){var c=this.internal,h=c.d3,f=c.config;f.data_selection_enabled&&c.main.selectAll("."+B.shapes).selectAll("."+B.shape).each(function(t,e){var n=h.select(this),i=t.data?t.data.id:t.id,r=c.getToggle(this,t).bind(c),o=f.data_selection_grouped||!u||0<=u.indexOf(i),a=!l||0<=l.indexOf(e),s=n.classed(B.SELECTED);n.classed(B.line)||n.classed(B.area)||o&&a&&f.data_selection_isselectable(t)&&s&&r(!1,n.classed(B.SELECTED,!1),t,e)})},p.show=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.removeHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",1,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",1)}),e.withLegend&&i.showLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},p.hide=function(t,e){var n,i=this.internal;t=i.mapToTargetIds(t),e=e||{},i.addHiddenTargetIds(t),(n=i.svg.selectAll(i.selectorTargets(t))).transition().style("opacity",0,"important").call(i.endall,function(){n.style("opacity",null).style("opacity",0)}),e.withLegend&&i.hideLegend(t),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},p.toggle=function(t,e){var n=this,i=this.internal;i.mapToTargetIds(t).forEach(function(t){i.isTargetToShow(t)?n.hide(t,e):n.show(t,e)})},p.tooltip=function(){},p.tooltip.show=function(t){var e,n,i=this.internal;t.mouse&&(n=t.mouse),t.data?e=i.isMultipleX()?(n=[i.x(t.data.x),i.getYScale(t.data.id)(t.data.value)],null):P(t.data.index)?t.data.index:i.getIndexByX(t.data.x):void 0!==t.x?e=i.getIndexByX(t.x):void 0!==t.index&&(e=t.index),i.dispatchEvent("mouseover",e,n),i.dispatchEvent("mousemove",e,n),i.config.tooltip_onshow.call(i,t.data)},p.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},p.transform=function(t,e){var n=this.internal,i=0<=["pie","donut"].indexOf(t)?{withTransform:!0}:null;n.transformTo(e,t,i)},m.transformTo=function(t,e,n){var i=!this.hasArcType(),r=n||{withTransitionForAxis:i};r.withTransitionForTransform=!1,this.transiting=!1,this.setTargetType(t,e),this.updateTargets(this.data.targets),this.updateAndRedraw(r)},p.x=function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},p.xs=function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},p.zoom=function(t){var e=this.internal;return t&&(e.isTimeSeries()&&(t=t.map(function(t){return e.parseDate(t)})),e.brush.extent(t),e.redraw({withUpdateXDomain:!0,withY:e.config.zoom_rescale}),e.config.zoom_onzoom.call(this,e.x.orgDomain())),e.brush.extent()},p.zoom.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},p.unzoom=function(){var t=this.internal;t.brush.clear().update(),t.redraw({withUpdateXDomain:!0})},p.zoom.max=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_max;n.zoom_x_max=i.max([e.orgXDomain[1],t])},p.zoom.min=function(t){var e=this.internal,n=e.config,i=e.d3;if(0!==t&&!t)return n.zoom_x_min;n.zoom_x_min=i.min([e.orgXDomain[0],t])},p.zoom.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};D(t.max)&&this.domain.max(t.max),D(t.min)&&this.domain.min(t.min)},m.initPie=function(){var t=this.d3;this.pie=t.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}),this.pie.sort(this.getOrderFunction()||null)},m.updateRadius=function(){var t=this,e=t.config,n=e.gauge_width||e.donut_width,i=t.filterTargetsToShow(t.data.targets).length*t.config.gauge_arcs_minWidth;t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2*(t.hasType("gauge")?.85:1),t.radius=.95*t.radiusExpanded,t.innerRadiusRatio=n?(t.radius-n)/t.radius:.6,t.innerRadius=t.hasType("donut")||t.hasType("gauge")?t.radius*t.innerRadiusRatio:0,t.gaugeArcWidth=n||(i<=t.radius-t.innerRadius?t.radius-t.innerRadius:i<=t.radius?i:t.radius)},m.updateArc=function(){this.svgArc=this.getSvgArc(),this.svgArcExpanded=this.getSvgArcExpanded(),this.svgArcExpandedSub=this.getSvgArcExpanded(.98)},m.updateAngle=function(e){var t,n,i,r,o=this.config,a=!1,s=0;return o?(this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(t){a||t.data.id!==e.data.id||(a=!0,(e=t).index=s),s++}),isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=e.startAngle),this.isGaugeType(e.data)&&(t=o.gauge_min,n=o.gauge_max,i=Math.PI*(o.gauge_fullCircle?2:1)/(n-t),r=e.value<t?0:e.value<n?e.value-t:n-t,e.startAngle=o.gauge_startingAngle,e.endAngle=e.startAngle+i*r),a?e:null):null},m.getSvgArc=function(){var i=this,e=i.hasType("gauge"),n=i.gaugeArcWidth/i.filterTargetsToShow(i.data.targets).length,r=i.d3.svg.arc().outerRadius(function(t){return e?i.radius-n*t.index:i.radius}).innerRadius(function(t){return e?i.radius-n*(t.index+1):i.innerRadius}),t=function(t,e){var n;return e?r(t):(n=i.updateAngle(t))?r(n):"M 0 0"};return t.centroid=r.centroid,t},m.getSvgArcExpanded=function(e){e=e||1;var n=this,i=n.hasType("gauge"),r=n.gaugeArcWidth/n.filterTargetsToShow(n.data.targets).length,o=Math.min(n.radiusExpanded*e-n.radius,.8*r-100*(1-e)),a=n.d3.svg.arc().outerRadius(function(t){return i?n.radius-r*t.index+o:n.radiusExpanded*e}).innerRadius(function(t){return i?n.radius-r*(t.index+1):n.innerRadius});return function(t){var e=n.updateAngle(t);return e?a(e):"M 0 0"}},m.getArc=function(t,e,n){return n||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},m.transformForArcLabel=function(t){var e,n,i,r,o,a=this,s=a.config,u=a.updateAngle(t),l="",c=a.hasType("gauge");if(u&&!c)e=this.svgArc.centroid(u),n=isNaN(e[0])?0:e[0],i=isNaN(e[1])?0:e[1],r=Math.sqrt(n*n+i*i),l="translate("+n*(o=a.hasType("donut")&&s.donut_label_ratio?f(s.donut_label_ratio)?s.donut_label_ratio(t,a.radius,r):s.donut_label_ratio:a.hasType("pie")&&s.pie_label_ratio?f(s.pie_label_ratio)?s.pie_label_ratio(t,a.radius,r):s.pie_label_ratio:a.radius&&r?(.375<36/a.radius?1.175-36/a.radius:.8)*a.radius/r:0)+","+i*o+")";else if(u&&c&&1<a.filterTargetsToShow(a.data.targets).length){var h=Math.sin(u.endAngle-Math.PI/2);l="translate("+(n=Math.cos(u.endAngle-Math.PI/2)*(a.radiusExpanded+25))+","+(i=h*(a.radiusExpanded+15-Math.abs(10*h))+3)+")"}return l},m.getArcRatio=function(t){var e=this.config,n=Math.PI*(this.hasType("gauge")&&!e.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},m.convertToArcData=function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},m.textForArcLabel=function(t){var e,n,i,r,o;return this.shouldShowArcLabel()?(n=(e=this.updateAngle(t))?e.value:null,i=this.getArcRatio(e),r=t.data.id,this.hasType("gauge")||this.meetsArcLabelThreshold(i)?(o=this.getArcLabelFormat())?o(n,i,r):this.defaultArcValueFormat(n,i):""):""},m.textForGaugeMinMax=function(t,e){var n=this.getGaugeLabelExtents();return n?n(t,e):t},m.expandArc=function(t){var e,n=this;n.transiting?e=window.setInterval(function(){n.transiting||(window.clearInterval(e),0<n.legend.selectAll(".c3-legend-item-focused").size()&&n.expandArc(t))},10):(t=n.mapToTargetIds(t),n.svg.selectAll(n.selectorTargets(t,"."+B.chartArc)).each(function(t){n.shouldExpand(t.data.id)&&n.d3.select(this).selectAll("path").transition().duration(n.expandDuration(t.data.id)).attr("d",n.svgArcExpanded).transition().duration(2*n.expandDuration(t.data.id)).attr("d",n.svgArcExpandedSub).each(function(t){n.isDonutType(t.data)})}))},m.unexpandArc=function(t){var e=this;e.transiting||(t=e.mapToTargetIds(t),e.svg.selectAll(e.selectorTargets(t,"."+B.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll("."+B.arc))},m.expandDuration=function(t){var e=this.config;return this.isDonutType(t)?e.donut_expand_duration:this.isGaugeType(t)?e.gauge_expand_duration:this.isPieType(t)?e.pie_expand_duration:50},m.shouldExpand=function(t){var e=this.config;return this.isDonutType(t)&&e.donut_expand||this.isGaugeType(t)&&e.gauge_expand||this.isPieType(t)&&e.pie_expand},m.shouldShowArcLabel=function(){var t=this.config,e=!0;return this.hasType("donut")?e=t.donut_label_show:this.hasType("pie")&&(e=t.pie_label_show),e},m.meetsArcLabelThreshold=function(t){var e=this.config;return(this.hasType("donut")?e.donut_label_threshold:e.pie_label_threshold)<=t},m.getArcLabelFormat=function(){var t=this.config,e=t.pie_label_format;return this.hasType("gauge")?e=t.gauge_label_format:this.hasType("donut")&&(e=t.donut_label_format),e},m.getGaugeLabelExtents=function(){return this.config.gauge_label_extents},m.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""},m.updateTargetsForArc=function(t){var e,n=this.main,i=this.classChartArc.bind(this),r=this.classArcs.bind(this),o=this.classFocus.bind(this);(e=n.select("."+B.chartArcs).selectAll("."+B.chartArc).data(this.pie(t)).attr("class",function(t){return i(t)+o(t.data)}).enter().append("g").attr("class",i)).append("g").attr("class",r),e.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},m.initArc=function(){this.arcs=this.main.select("."+B.chart).append("g").attr("class",B.chartArcs).attr("transform",this.getTranslate("arc")),this.arcs.append("text").attr("class",B.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())},m.redrawArc=function(t,e,n){var i,r,o,c=this,h=c.d3,a=c.config,s=c.main,u=c.hasType("gauge");if((i=s.selectAll("."+B.arcs).selectAll("."+B.arc).data(c.arcData.bind(c))).enter().append("path").attr("class",c.classArc.bind(c)).style("fill",function(t){return c.color(t.data)}).style("cursor",function(t){return a.interaction_enabled&&a.data_selection_isselectable(t)?"pointer":null}).each(function(t){c.isGaugeType(t.data)&&(t.startAngle=t.endAngle=a.gauge_startingAngle),this._current=t}),u&&((o=s.selectAll("."+B.arcs).selectAll("."+B.arcLabelLine).data(c.arcData.bind(c))).enter().append("rect").attr("class",function(t){return B.arcLabelLine+" "+B.target+" "+B.target+"-"+t.data.id}),1===c.filterTargetsToShow(c.data.targets).length?o.style("display","none"):o.style("fill",function(t){return 0<a.color_pattern.length?c.levelColor(t.data.values[0].value):c.color(t.data)}).style("display",a.gauge_labelLine_show?"":"none").each(function(t){var e=0,n=0,i=0,r="";if(c.hiddenTargetIds.indexOf(t.data.id)<0){var o=c.updateAngle(t),a=c.gaugeArcWidth/c.filterTargetsToShow(c.data.targets).length*(o.index+1),s=o.endAngle-Math.PI/2,u=c.radius-a,l=s-(0===u?0:1/u);e=c.radiusExpanded-c.radius+a,n=Math.cos(l)*u,i=Math.sin(l)*u,r="rotate("+180*s/Math.PI+", "+n+", "+i+")"}h.select(this).attr({x:n,y:i,width:e,height:2,transform:r}).style("stroke-dasharray","0, "+(e+2)+", 0")})),i.attr("transform",function(t){return!c.isGaugeType(t.data)&&n?"scale(0)":""}).on("mouseover",a.interaction_enabled?function(t){var e,n;c.transiting||(e=c.updateAngle(t))&&(n=c.convertToArcData(e),c.expandArc(e.data.id),c.api.focus(e.data.id),c.toggleFocusLegend(e.data.id,!0),c.config.data_onmouseover(n,this))}:null).on("mousemove",a.interaction_enabled?function(t){var e,n=c.updateAngle(t);n&&(e=[c.convertToArcData(n)],c.showTooltip(e,this))}:null).on("mouseout",a.interaction_enabled?function(t){var e,n;c.transiting||(e=c.updateAngle(t))&&(n=c.convertToArcData(e),c.unexpandArc(e.data.id),c.api.revert(),c.revertLegend(),c.hideTooltip(),c.config.data_onmouseout(n,this))}:null).on("click",a.interaction_enabled?function(t,e){var n,i=c.updateAngle(t);i&&(n=c.convertToArcData(i),c.toggleShape&&c.toggleShape(this,n,e),c.config.data_onclick.call(c.api,n,this))}:null).each(function(){c.transiting=!0}).transition().duration(t).attrTween("d",function(n){var i,t=c.updateAngle(n);return t?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),i=h.interpolate(this._current,t),this._current=i(0),function(t){var e=i(t);return e.data=n.data,c.getArc(e,!0)}):function(){return"M 0 0"}}).attr("transform",n?"scale(1)":"").style("fill",function(t){return c.levelColor?c.levelColor(t.data.values[0].value):c.color(t.data.id)}).call(c.endall,function(){c.transiting=!1}),i.exit().transition().duration(e).style("opacity",0).remove(),s.selectAll("."+B.chartArc).select("text").style("opacity",0).attr("class",function(t){return c.isGaugeType(t.data)?B.gaugeValue:""}).text(c.textForArcLabel.bind(c)).attr("transform",c.transformForArcLabel.bind(c)).style("font-size",function(t){return c.isGaugeType(t.data)&&1===c.filterTargetsToShow(c.data.targets).length?Math.round(c.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return c.isTargetToShow(t.data.id)&&c.isArcType(t.data)?1:0}),s.select("."+B.chartArcsTitle).style("opacity",c.hasType("donut")||u?1:0),u){var l=0;(r=c.arcs.select("g."+B.chartArcsBackground).selectAll("path."+B.chartArcsBackground).data(c.data.targets)).enter().append("path"),r.attr("class",function(t,e){return B.chartArcsBackground+" "+B.chartArcsBackground+"-"+e}).attr("d",function(t){if(0<=c.hiddenTargetIds.indexOf(t.id))return"M 0 0";var e={data:[{value:a.gauge_max}],startAngle:a.gauge_startingAngle,endAngle:-1*a.gauge_startingAngle*(a.gauge_fullCircle?Math.PI:1),index:l++};return c.getArc(e,!0,!0)}),r.exit().remove(),c.arcs.select("."+B.chartArcsGaugeUnit).attr("dy",".75em").text(a.gauge_label_show?a.gauge_units:""),c.arcs.select("."+B.chartArcsGaugeMin).attr("dx",-1*(c.innerRadius+(c.radius-c.innerRadius)/(a.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(a.gauge_label_show?c.textForGaugeMinMax(a.gauge_min,!1):""),c.arcs.select("."+B.chartArcsGaugeMax).attr("dx",c.innerRadius+(c.radius-c.innerRadius)/(a.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(a.gauge_label_show?c.textForGaugeMinMax(a.gauge_max,!0):"")}},m.initGauge=function(){var t=this.arcs;this.hasType("gauge")&&(t.append("g").attr("class",B.chartArcsBackground),t.append("text").attr("class",B.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",B.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",B.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},m.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},m.hasCaches=function(t){for(var e=0;e<t.length;e++)if(!(t[e]in this.cache))return!1;return!0},m.addCache=function(t,e){this.cache[t]=this.cloneTarget(e)},m.getCaches=function(t){var e,n=[];for(e=0;e<t.length;e++)t[e]in this.cache&&n.push(this.cloneTarget(this.cache[t[e]]));return n},m.categoryName=function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},m.generateClass=function(t,e){return" "+t+" "+t+this.getTargetSelectorSuffix(e)},m.classText=function(t){return this.generateClass(B.text,t.index)},m.classTexts=function(t){return this.generateClass(B.texts,t.id)},m.classShape=function(t){return this.generateClass(B.shape,t.index)},m.classShapes=function(t){return this.generateClass(B.shapes,t.id)},m.classLine=function(t){return this.classShape(t)+this.generateClass(B.line,t.id)},m.classLines=function(t){return this.classShapes(t)+this.generateClass(B.lines,t.id)},m.classCircle=function(t){return this.classShape(t)+this.generateClass(B.circle,t.index)},m.classCircles=function(t){return this.classShapes(t)+this.generateClass(B.circles,t.id)},m.classBar=function(t){return this.classShape(t)+this.generateClass(B.bar,t.index)},m.classBars=function(t){return this.classShapes(t)+this.generateClass(B.bars,t.id)},m.classArc=function(t){return this.classShape(t.data)+this.generateClass(B.arc,t.data.id)},m.classArcs=function(t){return this.classShapes(t.data)+this.generateClass(B.arcs,t.data.id)},m.classArea=function(t){return this.classShape(t)+this.generateClass(B.area,t.id)},m.classAreas=function(t){return this.classShapes(t)+this.generateClass(B.areas,t.id)},m.classRegion=function(t,e){return this.generateClass(B.region,e)+" "+("class"in t?t.class:"")},m.classEvent=function(t){return this.generateClass(B.eventRect,t.index)},m.classTarget=function(t){var e=this.config.data_classes[t],n="";return e&&(n=" "+B.target+"-"+e),this.generateClass(B.target,t)+n},m.classFocus=function(t){return this.classFocused(t)+this.classDefocused(t)},m.classFocused=function(t){return" "+(0<=this.focusedTargetIds.indexOf(t.id)?B.focused:"")},m.classDefocused=function(t){return" "+(0<=this.defocusedTargetIds.indexOf(t.id)?B.defocused:"")},m.classChartText=function(t){return B.chartText+this.classTarget(t.id)},m.classChartLine=function(t){return B.chartLine+this.classTarget(t.id)},m.classChartBar=function(t){return B.chartBar+this.classTarget(t.id)},m.classChartArc=function(t){return B.chartArc+this.classTarget(t.data.id)},m.getTargetSelectorSuffix=function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},m.selectorTarget=function(t,e){return(e||"")+"."+B.target+this.getTargetSelectorSuffix(t)},m.selectorTargets=function(t,e){var n=this;return(t=t||[]).length?t.map(function(t){return n.selectorTarget(t,e)}):null},m.selectorLegend=function(t){return"."+B.legendItem+this.getTargetSelectorSuffix(t)},m.selectorLegends=function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},m.getClipPath=function(t){return"url("+(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+t+")"},m.appendClip=function(t,e){return t.append("clipPath").attr("id",e).append("rect")},m.getAxisClipX=function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},m.getAxisClipY=function(t){return t?-20:-this.margin.top},m.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)},m.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)},m.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)},m.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)},m.getAxisClipWidth=function(t){var e=Math.max(30,this.margin.left),n=Math.max(30,this.margin.right);return t?this.width+2+e+n:this.margin.left+20},m.getAxisClipHeight=function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},m.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)},m.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)},m.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)},m.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)},m.generateColor=function(){var t=this.config,e=this.d3,i=t.data_colors,r=C(t.color_pattern)?t.color_pattern:e.scale.category10().range(),o=t.data_color,a=[];return function(t){var e,n=t.id||t.data&&t.data.id||t;return i[n]instanceof Function?e=i[n](t):i[n]?e=i[n]:(a.indexOf(n)<0&&a.push(n),e=r[a.indexOf(n)%r.length],i[n]=e),o instanceof Function?o(e,t):e}},m.generateLevelColor=function(){var t=this.config,i=t.color_pattern,e=t.color_threshold,r="value"===e.unit,o=e.values&&e.values.length?e.values:[],a=e.max||100;return C(t.color_threshold)?function(t){var e,n=i[i.length-1];for(e=0;e<o.length;e++)if((r?t:100*t/a)<o[e]){n=i[e];break}return n}:null},m.getDefaultConfig=function(){var e={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,n,i){return this.getTooltipContent?this.getTooltipContent(t,e,n,i):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(t){e[t]=this.additionalConfig[t]},this),e},m.additionalConfig={},m.loadConfig=function(e){var n,i,r,o=this.config;Object.keys(o).forEach(function(t){n=e,i=t.split("_"),r=function t(){var e=i.shift();return e&&n&&"object"===(void 0===n?"undefined":s(n))&&e in n?(n=n[e],t()):e?void 0:n}(),D(r)&&(o[t]=r)})},m.convertUrlToData=function(t,e,n,r,o){var a=this,s=e||"csv",i=a.d3.xhr(t);n&&Object.keys(n).forEach(function(t){i.header(t,n[t])}),i.get(function(t,e){var n,i=e.response||e.responseText;if(!e)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");n="json"===s?a.convertJsonToData(JSON.parse(i),r):"tsv"===s?a.convertTsvToData(i):a.convertCsvToData(i),o.call(a,n)})},m.convertXsvToData=function(t,e){var n,i=e.parseRows(t);return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=e.parse(t),n},m.convertCsvToData=function(t){return this.convertXsvToData(t,this.d3.csv)},m.convertTsvToData=function(t){return this.convertXsvToData(t,this.d3.tsv)},m.convertJsonToData=function(e,t){var r,o=this,a=[];return t?(t.x?(r=t.value.concat(t.x),o.config.data_x=t.x):r=t.value,a.push(r),e.forEach(function(n){var i=[];r.forEach(function(t){var e=o.findValueInJson(n,t);w(e)&&(e=null),i.push(e)}),a.push(i)}),o.convertRowsToData(a)):(Object.keys(e).forEach(function(t){a.push([t].concat(e[t]))}),o.convertColumnsToData(a))},m.findValueInJson=function(t,e){for(var n=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<n.length;++i){var r=n[i];if(!(r in t))return;t=t[r]}return t},m.convertRowsToData=function(t){for(var e=[],n=t[0],i=1;i<t.length;i++){for(var r={},o=0;o<t[i].length;o++){if(w(t[i][o]))throw new Error("Source data is missing a component at ("+i+","+o+")!");r[n[o]]=t[i][o]}e.push(r)}return e},m.convertColumnsToData=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n][0],r=1;r<t[n].length;r++){if(w(e[r-1])&&(e[r-1]={}),w(t[n][r]))throw new Error("Source data is missing a component at ("+n+","+r+")!");e[r-1][i]=t[n][r]}return e},m.convertDataToTargets=function(t,i){var e,u=this,l=u.config,n=u.d3.keys(t[0]).filter(u.isNotX,u),r=u.d3.keys(t[0]).filter(u.isX,u);return n.forEach(function(n){var e=u.getXKey(n);u.isCustomX()||u.isTimeSeries()?0<=r.indexOf(e)?u.data.xs[n]=(i&&u.data.xs[n]?u.data.xs[n]:[]).concat(t.map(function(t){return t[e]}).filter(P).map(function(t,e){return u.generateTargetX(t,n,e)})):l.data_x?u.data.xs[n]=u.getOtherTargetXs():C(l.data_xs)&&(u.data.xs[n]=u.getXValuesOfXKey(e,u.data.targets)):u.data.xs[n]=t.map(function(t,e){return e})}),n.forEach(function(t){if(!u.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}),(e=n.map(function(o,a){var s=l.data_idConverter(o);return{id:s,id_org:o,values:t.map(function(t,e){var n,i=t[u.getXKey(o)],r=null===t[o]||isNaN(t[o])?null:+t[o];return u.isCustomX()&&u.isCategorized()&&!w(i)?(0===a&&0===e&&(l.axis_x_categories=[]),-1===(n=l.axis_x_categories.indexOf(i))&&(n=l.axis_x_categories.length,l.axis_x_categories.push(i))):n=u.generateTargetX(i,o,e),(w(t[o])||u.data.xs[o].length<=e)&&(n=void 0),{x:n,value:r,id:s}}).filter(function(t){return D(t.x)})}})).forEach(function(t){var e;l.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),u.data.xs[t.id].sort(function(t,e){return t-e})}),u.hasNegativeValue=u.hasNegativeValueInTargets(e),u.hasPositiveValue=u.hasPositiveValueInTargets(e),l.data_type&&u.setTargetType(u.mapToIds(e).filter(function(t){return!(t in l.data_types)}),l.data_type),e.forEach(function(t){u.addCache(t.id_org,t)}),e},m.isX=function(t){var e=this.config;return e.data_x&&t===e.data_x||C(e.data_xs)&&i(e.data_xs,t)},m.isNotX=function(t){return!this.isX(t)},m.getXKey=function(t){var e=this.config;return e.data_x?e.data_x:C(e.data_xs)?e.data_xs[t]:null},m.getXValuesOfXKey=function(e,t){var n,i=this;return(t&&C(t)?i.mapToIds(t):[]).forEach(function(t){i.getXKey(t)===e&&(n=i.data.xs[t])}),n},m.getIndexByX=function(t){var e=this.filterByX(this.data.targets,t);return e.length?e[0].index:null},m.getXValue=function(t,e){return t in this.data.xs&&this.data.xs[t]&&P(this.data.xs[t][e])?this.data.xs[t][e]:e},m.getOtherTargetXs=function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},m.getOtherTargetX=function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},m.addXs=function(e){var n=this;Object.keys(e).forEach(function(t){n.config.data_xs[t]=e[t]})},m.hasMultipleX=function(e){return 1<this.d3.set(Object.keys(e).map(function(t){return e[t]})).size()},m.isMultipleX=function(){return C(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},m.addName=function(t){var e;return t&&(e=this.config.data_names[t.id],t.name=void 0!==e?e:t.id),t},m.getValueOnIndex=function(t,e){var n=t.filter(function(t){return t.index===e});return n.length?n[0]:null},m.updateTargetX=function(t,i){var r=this;t.forEach(function(n){n.values.forEach(function(t,e){t.x=r.generateTargetX(i[e],n.id,e)}),r.data.xs[n.id]=i})},m.updateTargetXs=function(t,e){var n=this;t.forEach(function(t){e[t.id]&&n.updateTargetX([t],e[t.id])})},m.generateTargetX=function(t,e,n){return this.isTimeSeries()?t?this.parseDate(t):this.parseDate(this.getXValue(e,n)):this.isCustomX()&&!this.isCategorized()?P(t)?+t:this.getXValue(e,n):n},m.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},m.updateXs=function(){var e=this;e.data.targets.length&&(e.xs=[],e.data.targets[0].values.forEach(function(t){e.xs[t.index]=t.x}))},m.getPrevX=function(t){var e=this.xs[t-1];return void 0!==e?e:null},m.getNextX=function(t){var e=this.xs[t+1];return void 0!==e?e:null},m.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(t){return t.values.length})},m.getMaxDataCountTarget=function(t){var e,n=t.length,i=0;return 1<n?t.forEach(function(t){t.values.length>i&&(i=(e=t).values.length)}):e=n?t[0]:null,e},m.getEdgeX=function(t){return t.length?[this.d3.min(t,function(t){return t.values[0].x}),this.d3.max(t,function(t){return t.values[t.values.length-1].x})]:[0,0]},m.mapToIds=function(t){return t.map(function(t){return t.id})},m.mapToTargetIds=function(t){return t?[].concat(t):this.mapToIds(this.data.targets)},m.hasTarget=function(t,e){var n,i=this.mapToIds(t);for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},m.isTargetToShow=function(t){return this.hiddenTargetIds.indexOf(t)<0},m.isLegendToShow=function(t){return this.hiddenLegendIds.indexOf(t)<0},m.filterTargetsToShow=function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},m.mapTargetsToUniqueXs=function(t){var e=this.d3.set(this.d3.merge(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return(e=this.isTimeSeries()?e.map(function(t){return new Date(+t)}):e.map(function(t){return+t})).sort(function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN})},m.addHiddenTargetIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenTargetIds.indexOf(t[e])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(t[e]))},m.removeHiddenTargetIds=function(e){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(t){return e.indexOf(t)<0})},m.addHiddenLegendIds=function(t){t=t instanceof Array?t:new Array(t);for(var e=0;e<t.length;e++)this.hiddenLegendIds.indexOf(t[e])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(t[e]))},m.removeHiddenLegendIds=function(e){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(t){return e.indexOf(t)<0})},m.getValuesAsIdKeyed=function(t){var n={};return t.forEach(function(e){n[e.id]=[],e.values.forEach(function(t){n[e.id].push(t.value)})}),n},m.checkValueInTargets=function(t,e){var n,i,r,o=Object.keys(t);for(n=0;n<o.length;n++)for(r=t[o[n]].values,i=0;i<r.length;i++)if(e(r[i].value))return!0;return!1},m.hasNegativeValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return t<0})},m.hasPositiveValueInTargets=function(t){return this.checkValueInTargets(t,function(t){return 0<t})},m.isOrderDesc=function(){var t=this.config;return"string"==typeof t.data_order&&"desc"===t.data_order.toLowerCase()},m.isOrderAsc=function(){var t=this.config;return"string"==typeof t.data_order&&"asc"===t.data_order.toLowerCase()},m.getOrderFunction=function(){var t=this.config,e=this.isOrderAsc(),o=this.isOrderDesc();if(e||o)return function(t,e){var n=function(t,e){return t+Math.abs(e.value)},i=t.values.reduce(n,0),r=e.values.reduce(n,0);return o?r-i:i-r};if(f(t.data_order))return t.data_order;if(a(t.data_order)){var n=t.data_order;return function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}},m.orderTargets=function(t){var e=this.getOrderFunction();return e&&(t.sort(e),(this.isOrderAsc()||this.isOrderDesc())&&t.reverse()),t},m.filterByX=function(t,e){return this.d3.merge(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},m.filterRemoveNull=function(t){return t.filter(function(t){return P(t.value)})},m.filterByXDomain=function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},m.hasDataLabel=function(){var t=this.config;return!("boolean"!=typeof t.data_labels||!t.data_labels)||!("object"!==s(t.data_labels)||!C(t.data_labels))},m.getDataLabelLength=function(t,e,n){var i=this,r=[0,0];return i.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return i.dataLabelFormat(t.id)(t)}).each(function(t,e){r[e]=1.3*this.getBoundingClientRect()[n]}).remove(),r},m.isNoneArc=function(t){return this.hasTarget(this.data.targets,t.id)},m.isArc=function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},m.findSameXOfValues=function(t,e){var n,i=t[e].x,r=[];for(n=e-1;0<=n&&i===t[n].x;n--)r.push(t[n]);for(n=e;n<t.length&&i===t[n].x;n++)r.push(t[n]);return r},m.findClosestFromTargets=function(t,e){var n,i=this;return n=t.map(function(t){return i.findClosest(t.values,e)}),i.findClosest(n,e)},m.findClosest=function(t,n){var i,r=this,o=r.config.point_sensitivity;return t.filter(function(t){return t&&r.isBarType(t.id)}).forEach(function(t){var e=r.main.select("."+B.bars+r.getTargetSelectorSuffix(t.id)+" ."+B.bar+"-"+t.index).node();!i&&r.isWithinBar(e)&&(i=t)}),t.filter(function(t){return t&&!r.isBarType(t.id)}).forEach(function(t){var e=r.dist(t,n);e<o&&(o=e,i=t)}),i},m.dist=function(t,e){var n=this.config,i=n.axis_rotated?1:0,r=n.axis_rotated?0:1,o=this.circleY(t,t.index),a=this.x(t.x);return Math.sqrt(Math.pow(a-e[i],2)+Math.pow(o-e[r],2))},m.convertValuesToStep=function(t){var e,n=[].concat(t);if(!this.isCategorized())return t;for(e=t.length+1;0<e;e--)n[e]=n[e-1];return n[0]={x:n[0].x-1,value:n[0].value,id:n[0].id},n[t.length+1]={x:n[t.length].x+1,value:n[t.length].value,id:n[t.length].id},n},m.updateDataAttributes=function(t,e){var n=this.config["data_"+t];return void 0===e||(Object.keys(e).forEach(function(t){n[t]=e[t]}),this.redraw({withLegend:!0})),n},m.load=function(n,i){var r=this;n&&(i.filter&&(n=n.filter(i.filter)),(i.type||i.types)&&n.forEach(function(t){var e=i.types&&i.types[t.id]?i.types[t.id]:i.type;r.setTargetType(t.id,e)}),r.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),r.data.targets=r.data.targets.concat(n)),r.updateTargets(r.data.targets),r.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.done&&i.done()},m.loadFromArgs=function(e){var n=this;e.data?n.load(n.convertDataToTargets(e.data),e):e.url?n.convertUrlToData(e.url,e.mimeType,e.headers,e.keys,function(t){n.load(n.convertDataToTargets(t),e)}):e.json?n.load(n.convertDataToTargets(n.convertJsonToData(e.json,e.keys)),e):e.rows?n.load(n.convertDataToTargets(n.convertRowsToData(e.rows)),e):e.columns?n.load(n.convertDataToTargets(n.convertColumnsToData(e.columns)),e):n.load(null,e)},m.unload=function(t,e){var n=this;e||(e=function(){}),(t=t.filter(function(t){return n.hasTarget(n.data.targets,t)}))&&0!==t.length?(n.svg.selectAll(t.map(function(t){return n.selectorTarget(t)})).transition().style("opacity",0).remove().call(n.endall,e),t.forEach(function(e){n.withoutFadeIn[e]=!1,n.legend&&n.legend.selectAll("."+B.legendItem+n.getTargetSelectorSuffix(e)).remove(),n.data.targets=n.data.targets.filter(function(t){return t.id!==e})})):e()},m.getYDomainMin=function(t){var e,n,i,r,o,a,s=this,u=s.config,l=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(a=s.hasNegativeValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=l.indexOf(t)})).length)for(i=r[0],a&&c[i]&&c[i].forEach(function(t,e){c[i][e]=t<0?t:0}),n=1;n<r.length;n++)o=r[n],c[o]&&c[o].forEach(function(t,e){s.axis.getId(o)!==s.axis.getId(i)||!c[i]||a&&0<+t||(c[i][e]+=+t)});return s.d3.min(Object.keys(c).map(function(t){return s.d3.min(c[t])}))},m.getYDomainMax=function(t){var e,n,i,r,o,a,s=this,u=s.config,l=s.mapToIds(t),c=s.getValuesAsIdKeyed(t);if(0<u.data_groups.length)for(a=s.hasPositiveValueInTargets(t),e=0;e<u.data_groups.length;e++)if(0!==(r=u.data_groups[e].filter(function(t){return 0<=l.indexOf(t)})).length)for(i=r[0],a&&c[i]&&c[i].forEach(function(t,e){c[i][e]=0<t?t:0}),n=1;n<r.length;n++)o=r[n],c[o]&&c[o].forEach(function(t,e){s.axis.getId(o)!==s.axis.getId(i)||!c[i]||a&&+t<0||(c[i][e]+=+t)});return s.d3.max(Object.keys(c).map(function(t){return s.d3.max(c[t])}))},m.getYDomain=function(t,e,n){var i,r,o,a,s,u,l,c,h,f,d=this,p=d.config,g=t.filter(function(t){return d.axis.getId(t.id)===e}),m=n?d.filterByXDomain(g,n):g,v="y2"===e?p.axis_y2_min:p.axis_y_min,_="y2"===e?p.axis_y2_max:p.axis_y_max,y=d.getYDomainMin(m),x=d.getYDomainMax(m),b="y2"===e?p.axis_y2_center:p.axis_y_center,w=d.hasType("bar",m)&&p.bar_zerobased||d.hasType("area",m)&&p.area_zerobased,S="y2"===e?p.axis_y2_inverted:p.axis_y_inverted,A=d.hasDataLabel()&&p.axis_rotated,T=d.hasDataLabel()&&!p.axis_rotated;return y=P(v)?v:P(_)?y<_?y:_-10:y,x=P(_)?_:P(v)?v<x?x:v+10:x,0===m.length?"y2"===e?d.y2.domain():d.y.domain():(isNaN(y)&&(y=0),isNaN(x)&&(x=y),y===x&&(y<0?x=0:y=0),h=0<=y&&0<=x,f=y<=0&&x<=0,(P(v)&&h||P(_)&&f)&&(w=!1),w&&(h&&(y=0),f&&(x=0)),o=a=.1*(r=Math.abs(x-y)),void 0!==b&&(x=b+(s=Math.max(Math.abs(y),Math.abs(x))),y=b-s),A?(u=d.getDataLabelLength(y,x,"width"),l=I(d.y.range()),o+=r*((c=[u[0]/l,u[1]/l])[1]/(1-c[0]-c[1])),a+=r*(c[0]/(1-c[0]-c[1]))):T&&(u=d.getDataLabelLength(y,x,"height"),o+=d.axis.convertPixelsToAxisPadding(u[1],r),a+=d.axis.convertPixelsToAxisPadding(u[0],r)),"y"===e&&C(p.axis_y_padding)&&(o=d.axis.getPadding(p.axis_y_padding,"top",o,r),a=d.axis.getPadding(p.axis_y_padding,"bottom",a,r)),"y2"===e&&C(p.axis_y2_padding)&&(o=d.axis.getPadding(p.axis_y2_padding,"top",o,r),a=d.axis.getPadding(p.axis_y2_padding,"bottom",a,r)),w&&(h&&(a=y),f&&(o=-x)),i=[y-a,x+o],S?i.reverse():i)},m.getXDomainMin=function(t){var e=this,n=e.config;return D(n.axis_x_min)?e.isTimeSeries()?this.parseDate(n.axis_x_min):n.axis_x_min:e.d3.min(t,function(t){return e.d3.min(t.values,function(t){return t.x})})},m.getXDomainMax=function(t){var e=this,n=e.config;return D(n.axis_x_max)?e.isTimeSeries()?this.parseDate(n.axis_x_max):n.axis_x_max:e.d3.max(t,function(t){return e.d3.max(t.values,function(t){return t.x})})},m.getXDomainPadding=function(t){var e,n,i,r,o=this.config,a=t[1]-t[0];return n=this.isCategorized()?0:this.hasType("bar")?1<(e=this.getMaxDataCount())?a/(e-1)/2:.5:.01*a,"object"===s(o.axis_x_padding)&&C(o.axis_x_padding)?(i=P(o.axis_x_padding.left)?o.axis_x_padding.left:n,r=P(o.axis_x_padding.right)?o.axis_x_padding.right:n):i=r="number"==typeof o.axis_x_padding?o.axis_x_padding:n,{left:i,right:r}},m.getXDomain=function(t){var e=[this.getXDomainMin(t),this.getXDomainMax(t)],n=e[0],i=e[1],r=this.getXDomainPadding(e),o=0,a=0;return n-i!=0||this.isCategorized()||(i=this.isTimeSeries()?(n=new Date(.5*n.getTime()),new Date(1.5*i.getTime())):(n=0===n?1:.5*n,0===i?-1:1.5*i)),(n||0===n)&&(o=this.isTimeSeries()?new Date(n.getTime()-r.left):n-r.left),(i||0===i)&&(a=this.isTimeSeries()?new Date(i.getTime()+r.right):i+r.right),[o,a]},m.updateXDomain=function(t,e,n,i,r){var o=this,a=o.config;return n&&(o.x.domain(r||o.d3.extent(o.getXDomain(t))),o.orgXDomain=o.x.domain(),a.zoom_enabled&&o.zoom.scale(o.x).updateScaleExtent(),o.subX.domain(o.x.domain()),o.brush&&o.brush.scale(o.subX)),e&&(o.x.domain(r||(!o.brush||o.brush.empty()?o.orgXDomain:o.brush.extent())),a.zoom_enabled&&o.zoom.scale(o.x).updateScaleExtent()),i&&o.x.domain(o.trimXDomain(o.x.orgDomain())),o.x.domain()},m.trimXDomain=function(t){var e=this.getZoomDomain(),n=e[0],i=e[1];return t[0]<=n&&(t[1]=+t[1]+(n-t[0]),t[0]=n),i<=t[1]&&(t[0]=+t[0]-(t[1]-i),t[1]=i),t},m.drag=function(t){var e,n,i,r,f,d,p,g,m=this,o=m.config,a=m.main,v=m.d3;m.hasArcType()||o.data_selection_enabled&&(o.zoom_enabled&&!m.zoom.altDomain||o.data_selection_multiple&&(e=m.dragStart[0],n=m.dragStart[1],i=t[0],r=t[1],f=Math.min(e,i),d=Math.max(e,i),p=o.data_selection_grouped?m.margin.top:Math.min(n,r),g=o.data_selection_grouped?m.height:Math.max(n,r),a.select("."+B.dragarea).attr("x",f).attr("y",p).attr("width",d-f).attr("height",g-p),a.selectAll("."+B.shapes).selectAll("."+B.shape).filter(function(t){return o.data_selection_isselectable(t)}).each(function(t,e){var n,i,r,o,a,s,u=v.select(this),l=u.classed(B.SELECTED),c=u.classed(B.INCLUDED),h=!1;if(u.classed(B.circle))n=1*u.attr("cx"),i=1*u.attr("cy"),a=m.togglePoint,h=f<n&&n<d&&p<i&&i<g;else{if(!u.classed(B.bar))return;n=(s=_(this)).x,i=s.y,r=s.width,o=s.height,a=m.togglePath,h=!(d<n||n+r<f||g<i||i+o<p)}h^c&&(u.classed(B.INCLUDED,!c),u.classed(B.SELECTED,!l),a.call(m,!l,u,t,e))})))},m.dragstart=function(t){var e=this.config;this.hasArcType()||e.data_selection_enabled&&(this.dragStart=t,this.main.select("."+B.chart).append("rect").attr("class",B.dragarea).style("opacity",.1),this.dragging=!0)},m.dragend=function(){var t=this.config;this.hasArcType()||t.data_selection_enabled&&(this.main.select("."+B.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+B.shape).classed(B.INCLUDED,!1),this.dragging=!1)},m.getYFormat=function(t){var i=this,r=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.yFormat,o=t&&!i.hasType("gauge")?i.defaultArcValueFormat:i.y2Format;return function(t,e,n){return("y2"===i.axis.getId(n)?o:r).call(i,t,e)}},m.yFormat=function(t){var e=this.config;return(e.axis_y_tick_format?e.axis_y_tick_format:this.defaultValueFormat)(t)},m.y2Format=function(t){var e=this.config;return(e.axis_y2_tick_format?e.axis_y2_tick_format:this.defaultValueFormat)(t)},m.defaultValueFormat=function(t){return P(t)?+t:""},m.defaultArcValueFormat=function(t,e){return(100*e).toFixed(1)+"%"},m.dataLabelFormat=function(t){var e=this.config.data_labels,n=function(t){return P(t)?+t:""};return"function"==typeof e.format?e.format:"object"===s(e.format)?e.format[t]?!0===e.format[t]?n:e.format[t]:function(){return""}:n},m.initGrid=function(){var t=this,e=t.config,n=t.d3;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",B.grid),e.grid_x_show&&t.grid.append("g").attr("class",B.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",B.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",B.xgridFocus).append("line").attr("class",B.xgridFocus),t.xgrid=n.selectAll([]),e.grid_lines_front||t.initGridLines()},m.initGridLines=function(){var t=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",B.grid+" "+B.gridLines),this.gridLines.append("g").attr("class",B.xgridLines),this.gridLines.append("g").attr("class",B.ygridLines),this.xgridLines=t.selectAll([])},m.updateXGrid=function(t){var e=this,n=e.config,i=e.d3,r=e.generateGridData(n.grid_x_type,e.x),o=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=n.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-o},y2:function(t){return e.x(t)-o}}:{x1:function(t){return e.x(t)+o},x2:function(t){return e.x(t)+o},y1:0,y2:e.height},e.xgrid=e.main.select("."+B.xgrids).selectAll("."+B.xgrid).data(r),e.xgrid.enter().append("line").attr("class",B.xgrid),t||e.xgrid.attr(e.xgridAttr).style("opacity",function(){return+i.select(this).attr(n.axis_rotated?"y1":"x1")===(n.axis_rotated?e.height:0)?0:1}),e.xgrid.exit().remove()},m.updateYGrid=function(){var t=this,e=t.config,n=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+B.ygrids).selectAll("."+B.ygrid).data(n),t.ygrid.enter().append("line").attr("class",B.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.ygrid.exit().remove(),t.smoothLines(t.ygrid,"grid")},m.gridTextAnchor=function(t){return t.position?t.position:"end"},m.gridTextDx=function(t){return"start"===t.position?4:"middle"===t.position?0:-4},m.xGridTextX=function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},m.yGridTextX=function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},m.updateGrid=function(t){var e,n,i,r=this,o=r.main,a=r.config;r.grid.style("visibility",r.hasArcType()?"hidden":"visible"),o.select("line."+B.xgridFocus).style("visibility","hidden"),a.grid_x_show&&r.updateXGrid(),r.xgridLines=o.select("."+B.xgridLines).selectAll("."+B.xgridLine).data(a.grid_x_lines),(e=r.xgridLines.enter().append("g").attr("class",function(t){return B.xgridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),e.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"":"rotate(-90)").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),r.xgridLines.exit().transition().duration(t).style("opacity",0).remove(),a.grid_y_show&&r.updateYGrid(),r.ygridLines=o.select("."+B.ygridLines).selectAll("."+B.ygridLine).data(a.grid_y_lines),(n=r.ygridLines.enter().append("g").attr("class",function(t){return B.ygridLine+(t.class?" "+t.class:"")})).append("line").style("opacity",0),n.append("text").attr("text-anchor",r.gridTextAnchor).attr("transform",a.axis_rotated?"rotate(-90)":"").attr("dx",r.gridTextDx).attr("dy",-5).style("opacity",0),i=r.yv.bind(r),r.ygridLines.select("line").transition().duration(t).attr("x1",a.axis_rotated?i:0).attr("x2",a.axis_rotated?i:r.width).attr("y1",a.axis_rotated?0:i).attr("y2",a.axis_rotated?r.height:i).style("opacity",1),r.ygridLines.select("text").transition().duration(t).attr("x",a.axis_rotated?r.xGridTextX.bind(r):r.yGridTextX.bind(r)).attr("y",i).text(function(t){return t.text}).style("opacity",1),r.ygridLines.exit().transition().duration(t).style("opacity",0).remove()},m.redrawGrid=function(t){var e=this,n=e.config,i=e.xv.bind(e),r=e.xgridLines.select("line"),o=e.xgridLines.select("text");return[(t?r.transition():r).attr("x1",n.axis_rotated?0:i).attr("x2",n.axis_rotated?e.width:i).attr("y1",n.axis_rotated?i:0).attr("y2",n.axis_rotated?i:e.height).style("opacity",1),(t?o.transition():o).attr("x",n.axis_rotated?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",i).text(function(t){return t.text}).style("opacity",1)]},m.showXGridFocus=function(t){var e=this.config,n=t.filter(function(t){return t&&P(t.value)}),i=this.main.selectAll("line."+B.xgridFocus),r=this.xx.bind(this);e.tooltip_show&&(this.hasType("scatter")||this.hasArcType()||(i.style("visibility","visible").data([n[0]]).attr(e.axis_rotated?"y1":"x1",r).attr(e.axis_rotated?"y2":"x2",r),this.smoothLines(i,"grid")))},m.hideXGridFocus=function(){this.main.select("line."+B.xgridFocus).style("visibility","hidden")},m.updateXgridFocus=function(){var t=this.config;this.main.select("line."+B.xgridFocus).attr("x1",t.axis_rotated?0:-10).attr("x2",t.axis_rotated?this.width:-10).attr("y1",t.axis_rotated?-10:0).attr("y2",t.axis_rotated?-10:this.height)},m.generateGridData=function(t,e){var n,i,r,o,a=[],s=this.main.select("."+B.axisX).selectAll(".tick").size();if("year"===t)for(i=(n=this.getXDomain())[0].getFullYear(),r=n[1].getFullYear(),o=i;o<=r;o++)a.push(new Date(o+"-01-01 00:00:00"));else(a=e.ticks(10)).length>s&&(a=a.filter(function(t){return(""+t).indexOf(".")<0}));return a},m.getGridFilterToRemove=function(t){return t?function(e){var n=!1;return[].concat(t).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(n=!0)}),n}:function(){return!0}},m.removeGridLines=function(t,e){var n=this.config,i=this.getGridFilterToRemove(t),r=function(t){return!i(t)},o=e?B.xgridLines:B.ygridLines,a=e?B.xgridLine:B.ygridLine;this.main.select("."+o).selectAll("."+a).filter(i).transition().duration(n.transition_duration).style("opacity",0).remove(),e?n.grid_x_lines=n.grid_x_lines.filter(r):n.grid_y_lines=n.grid_y_lines.filter(r)},m.initEventRect=function(){this.main.select("."+B.chart).append("g").attr("class",B.eventRects).style("fill-opacity",0)},m.redrawEventRect=function(){var t,e,n=this,i=n.config,r=n.isMultipleX(),o=n.main.select("."+B.eventRects).style("cursor",i.zoom_enabled?i.axis_rotated?"ns-resize":"ew-resize":null).classed(B.eventRectsMultiple,r).classed(B.eventRectsSingle,!r);o.selectAll("."+B.eventRect).remove(),n.eventRect=o.selectAll("."+B.eventRect),r?(t=n.eventRect.data([0]),n.generateEventRectsForMultipleXs(t.enter()),n.updateEventRect(t)):(e=n.getMaxDataCountTarget(n.data.targets),o.datum(e?e.values:[]),n.eventRect=o.selectAll("."+B.eventRect),t=n.eventRect.data(function(t){return t}),n.generateEventRectsForSingleX(t.enter()),n.updateEventRect(t),t.exit().remove())},m.updateEventRect=function(t){var e,n,i,r,o,a,s=this,u=s.config;t=t||s.eventRect.data(function(t){return t}),r=s.isMultipleX()?(n=e=0,i=s.width,s.height):(a=!s.isCustomX()&&!s.isTimeSeries()||s.isCategorized()?(o=s.getEventRectWidth(),function(t){return s.x(t.x)-o/2}):(s.updateXs(),o=function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index);return null===e&&null===n?u.axis_rotated?s.height:s.width:(null===e&&(e=s.x.domain()[0]),null===n&&(n=s.x.domain()[1]),Math.max(0,(s.x(n)-s.x(e))/2))},function(t){var e=s.getPrevX(t.index),n=s.getNextX(t.index),i=s.data.xs[t.id][t.index];return null===e&&null===n?0:(null===e&&(e=s.x.domain()[0]),(s.x(i)+s.x(e))/2)}),e=u.axis_rotated?0:a,n=u.axis_rotated?a:0,i=u.axis_rotated?s.width:o,u.axis_rotated?o:s.height),t.attr("class",s.classEvent.bind(s)).attr("x",e).attr("y",n).attr("width",i).attr("height",r)},m.generateEventRectsForSingleX=function(t){var r=this,o=r.d3,a=r.config;t.append("rect").attr("class",r.classEvent.bind(r)).style("cursor",a.data_selection_enabled&&a.data_selection_grouped?"pointer":null).on("mouseover",function(t){var e=t.index;r.dragging||r.flowing||r.hasArcType()||(a.point_focus_expand_enabled&&r.expandCircles(e,null,!0),r.expandBars(e,null,!0),r.main.selectAll("."+B.shape+"-"+e).each(function(t){a.data_onmouseover.call(r.api,t)}))}).on("mouseout",function(t){var e=t.index;r.config&&(r.hasArcType()||(r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars(),r.main.selectAll("."+B.shape+"-"+e).each(function(t){a.data_onmouseout.call(r.api,t)})))}).on("mousemove",function(t){var e,n=t.index,i=r.svg.select("."+B.eventRect+"-"+n);r.dragging||r.flowing||r.hasArcType()||(r.isStepType(t)&&"step-after"===r.config.line_step_type&&o.mouse(this)[0]<r.x(r.getXValue(t.id,n))&&(n-=1),e=r.filterTargetsToShow(r.data.targets).map(function(t){return r.addName(r.getValueOnIndex(t.values,n))}),a.tooltip_grouped&&(r.showTooltip(e,this),r.showXGridFocus(e)),(!a.tooltip_grouped||a.data_selection_enabled&&!a.data_selection_grouped)&&r.main.selectAll("."+B.shape+"-"+n).each(function(){o.select(this).classed(B.EXPANDED,!0),a.data_selection_enabled&&i.style("cursor",a.data_selection_grouped?"pointer":null),a.tooltip_grouped||(r.hideXGridFocus(),r.hideTooltip(),a.data_selection_grouped||(r.unexpandCircles(n),r.unexpandBars(n)))}).filter(function(t){return r.isWithinShape(this,t)}).each(function(t){a.data_selection_enabled&&(a.data_selection_grouped||a.data_selection_isselectable(t))&&i.style("cursor","pointer"),a.tooltip_grouped||(r.showTooltip([t],this),r.showXGridFocus([t]),a.point_focus_expand_enabled&&r.expandCircles(n,t.id,!0),r.expandBars(n,t.id,!0))}))}).on("click",function(t){var e=t.index;!r.hasArcType()&&r.toggleShape&&(r.cancelClick?r.cancelClick=!1:(r.isStepType(t)&&"step-after"===a.line_step_type&&o.mouse(this)[0]<r.x(r.getXValue(t.id,e))&&(e-=1),r.main.selectAll("."+B.shape+"-"+e).each(function(t){(a.data_selection_grouped||r.isWithinShape(this,t))&&(r.toggleShape(this,t,e),r.config.data_onclick.call(r.api,t,this))})))}).call(a.data_selection_draggable&&r.drag?o.behavior.drag().origin(Object).on("drag",function(){r.drag(o.mouse(this))}).on("dragstart",function(){r.dragstart(o.mouse(this))}).on("dragend",function(){r.dragend()}):function(){})},m.generateEventRectsForMultipleXs=function(t){var r=this,o=r.d3,a=r.config;function s(){r.svg.select("."+B.eventRect).style("cursor",null),r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars()}t.append("rect").attr("x",0).attr("y",0).attr("width",r.width).attr("height",r.height).attr("class",B.eventRect).on("mouseout",function(){r.config&&(r.hasArcType()||s())}).on("mousemove",function(){var t,e,n,i=r.filterTargetsToShow(r.data.targets);r.dragging||r.hasArcType(i)||(t=o.mouse(this),e=r.findClosestFromTargets(i,t),!r.mouseover||e&&e.id===r.mouseover.id||(a.data_onmouseout.call(r.api,r.mouseover),r.mouseover=void 0),e?(n=(r.isScatterType(e)||!a.tooltip_grouped?[e]:r.filterByX(i,e.x)).map(function(t){return r.addName(t)}),r.showTooltip(n,this),a.point_focus_expand_enabled&&r.expandCircles(e.index,e.id,!0),r.expandBars(e.index,e.id,!0),r.showXGridFocus(n),(r.isBarType(e.id)||r.dist(e,t)<a.point_sensitivity)&&(r.svg.select("."+B.eventRect).style("cursor","pointer"),r.mouseover||(a.data_onmouseover.call(r.api,e),r.mouseover=e))):s())}).on("click",function(){var t,e,n=r.filterTargetsToShow(r.data.targets);r.hasArcType(n)||(t=o.mouse(this),(e=r.findClosestFromTargets(n,t))&&(r.isBarType(e.id)||r.dist(e,t)<a.point_sensitivity)&&r.main.selectAll("."+B.shapes+r.getTargetSelectorSuffix(e.id)).selectAll("."+B.shape+"-"+e.index).each(function(){(a.data_selection_grouped||r.isWithinShape(this,e))&&(r.toggleShape(this,e,e.index),r.config.data_onclick.call(r.api,e,this))}))}).call(a.data_selection_draggable&&r.drag?o.behavior.drag().origin(Object).on("drag",function(){r.drag(o.mouse(this))}).on("dragstart",function(){r.dragstart(o.mouse(this))}).on("dragend",function(){r.dragend()}):function(){})},m.dispatchEvent=function(t,e,n){var i="."+B.eventRect+(this.isMultipleX()?"":"-"+e),r=this.main.select(i).node(),o=r.getBoundingClientRect(),a=o.left+(n?n[0]:0),s=o.top+(n?n[1]:0),u=document.createEvent("MouseEvents");u.initMouseEvent(t,!0,!0,window,0,a,s,a,s,!1,!1,!1,!1,0,null),r.dispatchEvent(u)},m.initLegend=function(){var t=this;if(t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g").attr("transform",t.getTranslate("legend")),!t.config.legend_show)return t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets));t.updateLegendWithDefaults()},m.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},m.updateSizeForLegend=function(t,e){var n=this,i=n.config,r={top:n.isLegendTop?n.getCurrentPaddingTop()+i.legend_inset_y+5.5:n.currentHeight-t-n.getCurrentPaddingBottom()-i.legend_inset_y,left:n.isLegendLeft?n.getCurrentPaddingLeft()+i.legend_inset_x+.5:n.currentWidth-e-n.getCurrentPaddingRight()-i.legend_inset_x+.5};n.margin3={top:n.isLegendRight?0:n.isLegendInset?r.top:n.currentHeight-t,right:NaN,bottom:0,left:n.isLegendRight?n.currentWidth-e:n.isLegendInset?r.left:0}},m.transformLegend=function(t){(t?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))},m.updateLegendStep=function(t){this.legendStep=t},m.updateLegendItemWidth=function(t){this.legendItemWidth=t},m.updateLegendItemHeight=function(t){this.legendItemHeight=t},m.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0},m.getLegendHeight=function(){var t=0;return this.config.legend_show&&(t=this.isLegendRight?this.currentHeight:Math.max(20,this.legendItemHeight)*(this.legendStep+1)),t},m.opacityForLegend=function(t){return t.classed(B.legendItemHidden)?null:1},m.opacityForUnfocusedLegend=function(t){return t.classed(B.legendItemHidden)?null:.3},m.toggleFocusLegend=function(e,t){var n=this;e=n.mapToTargetIds(e),n.legend.selectAll("."+B.legendItem).filter(function(t){return 0<=e.indexOf(t)}).classed(B.legendItemFocused,t).transition().duration(100).style("opacity",function(){return(t?n.opacityForLegend:n.opacityForUnfocusedLegend).call(n,n.d3.select(this))})},m.revertLegend=function(){var t=this,e=t.d3;t.legend.selectAll("."+B.legendItem).classed(B.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend(e.select(this))})},m.showLegend=function(t){var e=this,n=e.config;n.legend_show||(n.legend_show=!0,e.legend.style("visibility","visible"),e.legendHasRendered||e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend(e.d3.select(this))})},m.hideLegend=function(t){var e=this.config;e.legend_show&&h(t)&&(e.legend_show=!1,this.legend.style("visibility","hidden")),this.addHiddenLegendIds(t),this.legend.selectAll(this.selectorLegends(t)).style("opacity",0).style("visibility","hidden")},m.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},m.updateLegend=function(g,t,e){var n,i,r,o,a,s,u,l,c,h,f,d,p,m,v,_,y=this,x=y.config,b=4,w=10,S=0,A=0,T=10,P=x.legend_item_tile_width+5,C=0,L={},E={},k={},M=[0],O={},R=0;function z(t,e,n){var i,r,o,a,s=0===n,u=n===g.length-1,l=(o=t,a=e,y.legendItemTextBox[a]||(y.legendItemTextBox[a]=y.getTextRect(o.textContent,B.legendItem,o)),y.legendItemTextBox[a]),c=l.width+P+(!u||y.isLegendRight||y.isLegendInset?w:0)+x.legend_padding,h=l.height+b,f=y.isLegendRight||y.isLegendInset?h:c,d=y.isLegendRight||y.isLegendInset?y.getLegendHeight():y.getLegendWidth();function p(t,e){e||(i=(d-C-f)/2)<T&&(i=(d-f)/2,C=0,R++),O[t]=R,M[R]=y.isLegendInset?10:i,L[t]=C,C+=f}s&&(A=S=R=C=0),!x.legend_show||y.isLegendToShow(e)?(E[e]=c,k[e]=h,(!S||S<=c)&&(S=c),(!A||A<=h)&&(A=h),r=y.isLegendRight||y.isLegendInset?A:S,x.legend_equally?(Object.keys(E).forEach(function(t){E[t]=S}),Object.keys(k).forEach(function(t){k[t]=A}),(i=(d-r*g.length)/2)<T?(R=C=0,g.forEach(function(t){p(t)})):p(e,!0)):p(e)):E[e]=k[e]=O[e]=L[e]=0}g=g.filter(function(t){return!D(x.data_names[t])||null!==x.data_names[t]}),f=F(t=t||{},"withTransition",!0),d=F(t,"withTransitionForTransform",!0),y.isLegendInset&&(R=x.legend_inset_step?x.legend_inset_step:g.length,y.updateLegendStep(R)),o=y.isLegendRight?(n=function(t){return S*O[t]},function(t){return M[O[t]]+L[t]}):y.isLegendInset?(n=function(t){return S*O[t]+10},function(t){return M[O[t]]+L[t]}):(n=function(t){return M[O[t]]+L[t]},function(t){return A*O[t]}),i=function(t,e){return n(t,e)+4+x.legend_item_tile_width},a=function(t,e){return o(t,e)+9},r=function(t,e){return n(t,e)},s=function(t,e){return o(t,e)-5},u=function(t,e){return n(t,e)-2},l=function(t,e){return n(t,e)-2+x.legend_item_tile_width},c=function(t,e){return o(t,e)+4},(h=y.legend.selectAll("."+B.legendItem).data(g).enter().append("g").attr("class",function(t){return y.generateClass(B.legendItem,t)}).style("visibility",function(t){return y.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on("click",function(t){x.legend_item_onclick?x.legend_item_onclick.call(y,t):y.d3.event.altKey?(y.api.hide(),y.api.show(t)):(y.api.toggle(t),y.isTargetToShow(t)?y.api.focus(t):y.api.revert())}).on("mouseover",function(t){x.legend_item_onmouseover?x.legend_item_onmouseover.call(y,t):(y.d3.select(this).classed(B.legendItemFocused,!0),!y.transiting&&y.isTargetToShow(t)&&y.api.focus(t))}).on("mouseout",function(t){x.legend_item_onmouseout?x.legend_item_onmouseout.call(y,t):(y.d3.select(this).classed(B.legendItemFocused,!1),y.api.revert())})).append("text").text(function(t){return D(x.data_names[t])?x.data_names[t]:t}).each(function(t,e){z(this,t,e)}).style("pointer-events","none").attr("x",y.isLegendRight||y.isLegendInset?i:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:a),h.append("rect").attr("class",B.legendItemEvent).style("fill-opacity",0).attr("x",y.isLegendRight||y.isLegendInset?r:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:s),h.append("line").attr("class",B.legendItemTile).style("stroke",y.color).style("pointer-events","none").attr("x1",y.isLegendRight||y.isLegendInset?u:-200).attr("y1",y.isLegendRight||y.isLegendInset?-200:c).attr("x2",y.isLegendRight||y.isLegendInset?l:-200).attr("y2",y.isLegendRight||y.isLegendInset?-200:c).attr("stroke-width",x.legend_item_tile_height),_=y.legend.select("."+B.legendBackground+" rect"),y.isLegendInset&&0<S&&0===_.size()&&(_=y.legend.insert("g","."+B.legendItem).attr("class",B.legendBackground).append("rect")),p=y.legend.selectAll("text").data(g).text(function(t){return D(x.data_names[t])?x.data_names[t]:t}).each(function(t,e){z(this,t,e)}),(f?p.transition():p).attr("x",i).attr("y",a),m=y.legend.selectAll("rect."+B.legendItemEvent).data(g),(f?m.transition():m).attr("width",function(t){return E[t]}).attr("height",function(t){return k[t]}).attr("x",r).attr("y",s),v=y.legend.selectAll("line."+B.legendItemTile).data(g),(f?v.transition():v).style("stroke",y.levelColor?function(t){return y.levelColor(y.cache[t].values[0].value)}:y.color).attr("x1",u).attr("y1",c).attr("x2",l).attr("y2",c),_&&(f?_.transition():_).attr("height",y.getLegendHeight()-12).attr("width",S*(R+1)+10),y.legend.selectAll("."+B.legendItem).classed(B.legendItemHidden,function(t){return!y.isTargetToShow(t)}),y.updateLegendItemWidth(S),y.updateLegendItemHeight(A),y.updateLegendStep(R),y.updateSizes(),y.updateScales(),y.updateSvgSize(),y.transformAll(d,e),y.legendHasRendered=!0},m.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",B.regions)},m.updateRegion=function(t){var e=this,n=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegion=e.main.select("."+B.regions).selectAll("."+B.region).data(n.regions),e.mainRegion.enter().append("g").append("rect").style("fill-opacity",0),e.mainRegion.attr("class",e.classRegion.bind(e)),e.mainRegion.exit().transition().duration(t).style("opacity",0).remove()},m.redrawRegion=function(t){var e=this,n=e.mainRegion.selectAll("rect").each(function(){var t=e.d3.select(this.parentNode).datum();e.d3.select(this).datum(t)}),i=e.regionX.bind(e),r=e.regionY.bind(e),o=e.regionWidth.bind(e),a=e.regionHeight.bind(e);return[(t?n.transition():n).attr("x",i).attr("y",r).attr("width",o).attr("height",a).style("fill-opacity",function(t){return P(t.opacity)?t.opacity:.1})]},m.regionX=function(t){var e=this.config,n="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated&&"start"in t?n(t.start):0:e.axis_rotated?0:"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},m.regionY=function(t){var e=this.config,n="y"===t.axis?this.y:this.y2;return"y"===t.axis||"y2"===t.axis?e.axis_rotated?0:"end"in t?n(t.end):0:e.axis_rotated&&"start"in t?this.x(this.isTimeSeries()?this.parseDate(t.start):t.start):0},m.regionWidth=function(t){var e,n=this,i=n.config,r=n.regionX(t),o="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated&&"end"in t?o(t.end):n.width:i.axis_rotated?n.width:"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.width)<r?0:e-r},m.regionHeight=function(t){var e,n=this,i=n.config,r=this.regionY(t),o="y"===t.axis?n.y:n.y2;return(e="y"===t.axis||"y2"===t.axis?i.axis_rotated?n.height:"start"in t?o(t.start):n.height:i.axis_rotated&&"end"in t?n.x(n.isTimeSeries()?n.parseDate(t.end):t.end):n.height)<r?0:e-r},m.isRegionOnX=function(t){return!t.axis||"x"===t.axis},m.getScale=function(t,e,n){return(n?this.d3.time.scale():this.d3.scale.linear()).range([t,e])},m.getX=function(t,e,n,i){var r,o=this.getScale(t,e,this.isTimeSeries()),a=n?o.domain(n):o;for(r in o=this.isCategorized()?(i=i||function(){return 0},function(t,e){var n=a(t)+i(t);return e?n:Math.ceil(n)}):function(t,e){var n=a(t);return e?n:Math.ceil(n)},a)o[r]=a[r];return o.orgDomain=function(){return a.domain()},this.isCategorized()&&(o.domain=function(t){return arguments.length?(a.domain(t),o):[(t=this.orgDomain())[0],t[1]+1]}),o},m.getY=function(t,e,n){var i=this.getScale(t,e,this.isTimeSeriesY());return n&&i.domain(n),i},m.getYScale=function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},m.getSubYScale=function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},m.updateScales=function(){var e=this,t=e.config,n=!e.x;e.xMin=t.axis_rotated?1:0,e.xMax=t.axis_rotated?e.height:e.width,e.yMin=t.axis_rotated?0:e.height,e.yMax=t.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=t.axis_rotated?0:e.height2,e.subYMax=t.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?t.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?t.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?t.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?t.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,t.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,t.axis_y_tick_format,e.yAxisTickValues,t.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,t.axis_y2_tick_format,e.y2AxisTickValues,t.axis_y2_tick_outer),n||(e.brush&&e.brush.scale(e.subX),t.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},m.selectPoint=function(t,e,n){var i=this,r=i.config,o=(r.axis_rotated?i.circleY:i.circleX).bind(i),a=(r.axis_rotated?i.circleX:i.circleY).bind(i),s=i.pointSelectR.bind(i);r.data_onselected.call(i.api,e,t.node()),i.main.select("."+B.selectedCircles+i.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle+"-"+n).data([e]).enter().append("circle").attr("class",function(){return i.generateClass(B.selectedCircle,n)}).attr("cx",o).attr("cy",a).attr("stroke",function(){return i.color(e)}).attr("r",function(t){return 1.4*i.pointSelectR(t)}).transition().duration(100).attr("r",s)},m.unselectPoint=function(t,e,n){this.config.data_onunselected.call(this.api,e,t.node()),this.main.select("."+B.selectedCircles+this.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle+"-"+n).transition().duration(100).attr("r",0).remove()},m.togglePoint=function(t,e,n,i){t?this.selectPoint(e,n,i):this.unselectPoint(e,n,i)},m.selectPath=function(t,e){var n=this;n.config.data_onselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.d3.rgb(n.color(e)).brighter(.75)})},m.unselectPath=function(t,e){var n=this;n.config.data_onunselected.call(n,e,t.node()),n.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return n.color(e)})},m.togglePath=function(t,e,n,i){t?this.selectPath(e,n,i):this.unselectPath(e,n,i)},m.getToggle=function(t,e){var n;return"circle"===t.nodeName?n=this.isStepType(e)?function(){}:this.togglePoint:"path"===t.nodeName&&(n=this.togglePath),n},m.toggleShape=function(t,e,n){var i=this.d3,r=this.config,o=i.select(t),a=o.classed(B.SELECTED),s=this.getToggle(t,e).bind(this);r.data_selection_enabled&&r.data_selection_isselectable(e)&&(r.data_selection_multiple||this.main.selectAll("."+B.shapes+(r.data_selection_grouped?this.getTargetSelectorSuffix(e.id):"")).selectAll("."+B.shape).each(function(t,e){var n=i.select(this);n.classed(B.SELECTED)&&s(!1,n.classed(B.SELECTED,!1),t,e)}),o.classed(B.SELECTED,!a),s(!a,o,e,n))},m.initBar=function(){this.main.select("."+B.chart).append("g").attr("class",B.chartBars)},m.updateTargetsForBar=function(t){var e=this.config,n=this.classChartBar.bind(this),i=this.classBars.bind(this),r=this.classFocus.bind(this);this.main.select("."+B.chartBars).selectAll("."+B.chartBar).data(t).attr("class",function(t){return n(t)+r(t)}).enter().append("g").attr("class",n).style("pointer-events","none").append("g").attr("class",i).style("cursor",function(t){return e.data_selection_isselectable(t)?"pointer":null})},m.updateBar=function(t){var e=this,n=e.barData.bind(e),i=e.classBar.bind(e),r=e.initialOpacity.bind(e),o=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+B.bars).selectAll("."+B.bar).data(n),e.mainBar.enter().append("path").attr("class",i).style("stroke",o).style("fill",o),e.mainBar.style("opacity",r),e.mainBar.exit().transition().duration(t).remove()},m.redrawBar=function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("stroke",this.color).style("fill",this.color).style("opacity",1)]},m.getBarW=function(t,e){var n=this.config,i="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&i>n.bar_width_max?n.bar_width_max:i},m.getBars=function(t,e){return(e?this.main.selectAll("."+B.bars+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+B.bar+(P(t)?"-"+t:""))},m.expandBars=function(t,e,n){n&&this.unexpandBars(),this.getBars(t,e).classed(B.EXPANDED,!0)},m.unexpandBars=function(t){this.getBars(t).classed(B.EXPANDED,!1)},m.generateDrawBar=function(t,e){var o=this.config,a=this.generateGetBarPoints(t,e);return function(t,e){var n=a(t,e),i=o.axis_rotated?1:0,r=o.axis_rotated?0:1;return"M "+n[0][i]+","+n[0][r]+" L"+n[1][i]+","+n[1][r]+" L"+n[2][i]+","+n[2][r]+" L"+n[3][i]+","+n[3][r]+" z"}},m.generateGetBarPoints=function(t,e){var a=this,n=e?a.subXAxis:a.xAxis,i=t.__max__+1,s=a.getBarW(n,i),u=a.getShapeX(s,i,t,!!e),l=a.getShapeY(!!e),c=a.getShapeOffset(a.isBarType,t,!!e),h=s*(a.config.bar_space/2),f=e?a.getSubYScale:a.getYScale;return function(t,e){var n=f.call(a,t.id)(0),i=c(t,e)||n,r=u(t),o=l(t);return a.config.axis_rotated&&(0<t.value&&o<n||t.value<0&&n<o)&&(o=n),[[r+h,i],[r+h,o-(n-i)],[r+s-h,o-(n-i)],[r+s-h,i]]}},m.isWithinBar=function(t){var e=this.d3.mouse(t),n=t.getBoundingClientRect(),i=t.pathSegList.getItem(0),r=t.pathSegList.getItem(1),o=Math.min(i.x,r.x),a=Math.min(i.y,r.y),s=o+n.width+2,u=a+n.height+2,l=a-2;return o-2<e[0]&&e[0]<s&&l<e[1]&&e[1]<u},m.getShapeIndices=function(t){var e,n,i=this.config,r={},o=0;return this.filterTargetsToShow(this.data.targets.filter(t,this)).forEach(function(t){for(e=0;e<i.data_groups.length;e++)if(!(i.data_groups[e].indexOf(t.id)<0))for(n=0;n<i.data_groups[e].length;n++)if(i.data_groups[e][n]in r){r[t.id]=r[i.data_groups[e][n]];break}w(r[t.id])&&(r[t.id]=o++)}),r.__max__=o-1,r},m.getShapeX=function(n,i,r,t){var o=t?this.subX:this.x;return function(t){var e=t.id in r?r[t.id]:0;return t.x||0===t.x?o(t.x)-n*(i/2-e):0}},m.getShapeY=function(e){var n=this;return function(t){return(e?n.getSubYScale(t.id):n.getYScale(t.id))(t.value)}},m.getShapeOffset=function(t,s,e){var u=this,l=u.orderTargets(u.filterTargetsToShow(u.data.targets.filter(t,u))),c=l.map(function(t){return t.id});return function(n,i){var r=e?u.getSubYScale(n.id):u.getYScale(n.id),o=r(0),a=o;return l.forEach(function(t){var e=u.isStepType(n)?u.convertValuesToStep(t.values):t.values;t.id!==n.id&&s[t.id]===s[n.id]&&c.indexOf(t.id)<c.indexOf(n.id)&&(void 0!==e[i]&&+e[i].x==+n.x||(i=-1,e.forEach(function(t,e){t.x===n.x&&(i=e)})),i in e&&0<=e[i].value*n.value&&(a+=r(e[i].value)-o))}),a}},m.isWithinShape=function(t,e){var n,i=this.d3.select(t);return this.isTargetToShow(e.id)?"circle"===t.nodeName?n=this.isStepType(e)?this.isWithinStep(t,this.getYScale(e.id)(e.value)):this.isWithinCircle(t,1.5*this.pointSelectR(e)):"path"===t.nodeName&&(n=!i.classed(B.bar)||this.isWithinBar(t)):n=!1,n},m.getInterpolate=function(t){var e=this.isInterpolationType(this.config.spline_interpolation_type)?this.config.spline_interpolation_type:"cardinal";return this.isSplineType(t)?e:this.isStepType(t)?this.config.line_step_type:"linear"},m.initLine=function(){this.main.select("."+B.chart).append("g").attr("class",B.chartLines)},m.updateTargetsForLine=function(t){var e,n=this,i=n.config,r=n.classChartLine.bind(n),o=n.classLines.bind(n),a=n.classAreas.bind(n),s=n.classCircles.bind(n),u=n.classFocus.bind(n);(e=n.main.select("."+B.chartLines).selectAll("."+B.chartLine).data(t).attr("class",function(t){return r(t)+u(t)}).enter().append("g").attr("class",r).style("opacity",0).style("pointer-events","none")).append("g").attr("class",o),e.append("g").attr("class",a),e.append("g").attr("class",function(t){return n.generateClass(B.selectedCircles,t.id)}),e.append("g").attr("class",s).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(e){n.main.selectAll("."+B.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+B.selectedCircle).each(function(t){t.value=e.values[t.index].value})})},m.updateLine=function(t){var e=this;e.mainLine=e.main.selectAll("."+B.lines).selectAll("."+B.line).data(e.lineData.bind(e)),e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.mainLine.style("opacity",e.initialOpacity.bind(e)).style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null),e.mainLine.exit().transition().duration(t).style("opacity",0).remove()},m.redrawLine=function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity",1)]},m.generateDrawLine=function(t,a){var s=this,u=s.config,l=s.d3.svg.line(),n=s.generateGetLinePoints(t,a),c=a?s.getSubYScale:s.getYScale,e=function(t){return(a?s.subxx:s.xx).call(s,t)},i=function(t,e){return 0<u.data_groups.length?n(t,e)[0][1]:c.call(s,t.id)(t.value)};return l=u.axis_rotated?l.x(i).y(e):l.x(e).y(i),u.line_connectNull||(l=l.defined(function(t){return null!=t.value})),function(t){var e=u.line_connectNull?s.filterRemoveNull(t.values):t.values,n=a?s.x:s.subX,i=c.call(s,t.id),r=0,o=0;return(s.isLineType(t)?u.data_regions[t.id]?s.lineWithRegions(e,n,i,u.data_regions[t.id]):(s.isStepType(t)&&(e=s.convertValuesToStep(e)),l.interpolate(s.getInterpolate(t))(e)):(e[0]&&(r=n(e[0].x),o=i(e[0].value)),u.axis_rotated?"M "+o+" "+r:"M "+r+" "+o))||"M 0 0"}},m.generateGetLinePoints=function(t,e){var a=this,s=a.config,n=t.__max__+1,u=a.getShapeX(0,n,t,!!e),l=a.getShapeY(!!e),c=a.getShapeOffset(a.isLineType,t,!!e),h=e?a.getSubYScale:a.getYScale;return function(t,e){var n=h.call(a,t.id)(0),i=c(t,e)||n,r=u(t),o=l(t);return s.axis_rotated&&(0<t.value&&o<n||t.value<0&&n<o)&&(o=n),[[r,o-(n-i)],[r,o-(n-i)],[r,o-(n-i)],[r,o-(n-i)]]}},m.lineWithRegions=function(t,u,l,e){var n,i,r,o,c,a,s,h,f,d,p,g=this,m=g.config,v="M",_=g.isCategorized()?.5:0,y=[];function x(t,e){var n;for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0;return!1}if(D(e))for(n=0;n<e.length;n++)y[n]={},w(e[n].start)?y[n].start=t[0].x:y[n].start=g.isTimeSeries()?g.parseDate(e[n].start):e[n].start,w(e[n].end)?y[n].end=t[t.length-1].x:y[n].end=g.isTimeSeries()?g.parseDate(e[n].end):e[n].end;function b(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}for(d=m.axis_rotated?function(t){return l(t.value)}:function(t){return u(t.x)},p=m.axis_rotated?function(t){return u(t.x)}:function(t){return l(t.value)},r=g.isTimeSeries()?function(t,e,n,i){var r=t.x.getTime(),o=e.x-t.x,a=new Date(r+o*n),s=new Date(r+o*(n+i));return b(m.axis_rotated?[[l(c(n)),u(a)],[l(c(n+i)),u(s)]]:[[u(a),l(c(n))],[u(s),l(c(n+i))]])}:function(t,e,n,i){return b(m.axis_rotated?[[l(c(n),!0),u(o(n))],[l(c(n+i),!0),u(o(n+i))]]:[[u(o(n),!0),l(c(n))],[u(o(n+i),!0),l(c(n+i))]])},n=0;n<t.length;n++){if(w(y)||!x(t[n].x,y))v+=" "+d(t[n])+" "+p(t[n]);else for(o=g.getScale(t[n-1].x+_,t[n].x+_,g.isTimeSeries()),c=g.getScale(t[n-1].value,t[n].value),a=u(t[n].x)-u(t[n-1].x),s=l(t[n].value)-l(t[n-1].value),f=2*(h=2/Math.sqrt(Math.pow(a,2)+Math.pow(s,2))),i=h;i<=1;i+=f)v+=r(t[n-1],t[n],i,h);t[n].x}return v},m.updateArea=function(t){var e=this,n=e.d3;e.mainArea=e.main.selectAll("."+B.areas).selectAll("."+B.area).data(e.lineData.bind(e)),e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.mainArea.style("opacity",e.orgAreaOpacity),e.mainArea.exit().transition().duration(t).style("opacity",0).remove()},m.redrawArea=function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},m.generateDrawArea=function(t,e){var r=this,o=r.config,a=r.d3.svg.area(),n=r.generateGetAreaPoints(t,e),i=e?r.getSubYScale:r.getYScale,s=function(t){return(e?r.subxx:r.xx).call(r,t)},u=function(t,e){return 0<o.data_groups.length?n(t,e)[0][1]:i.call(r,t.id)(r.getAreaBaseValue(t.id))},l=function(t,e){return 0<o.data_groups.length?n(t,e)[1][1]:i.call(r,t.id)(t.value)};return a=o.axis_rotated?a.x0(u).x1(l).y(s):a.x(s).y0(o.area_above?0:u).y1(l),o.line_connectNull||(a=a.defined(function(t){return null!==t.value})),function(t){var e=o.line_connectNull?r.filterRemoveNull(t.values):t.values,n=0,i=0;return(r.isAreaType(t)?(r.isStepType(t)&&(e=r.convertValuesToStep(e)),a.interpolate(r.getInterpolate(t))(e)):(e[0]&&(n=r.x(e[0].x),i=r.getYScale(t.id)(e[0].value)),o.axis_rotated?"M "+i+" "+n:"M "+n+" "+i))||"M 0 0"}},m.getAreaBaseValue=function(){return 0},m.generateGetAreaPoints=function(t,e){var a=this,s=a.config,n=t.__max__+1,u=a.getShapeX(0,n,t,!!e),l=a.getShapeY(!!e),c=a.getShapeOffset(a.isAreaType,t,!!e),h=e?a.getSubYScale:a.getYScale;return function(t,e){var n=h.call(a,t.id)(0),i=c(t,e)||n,r=u(t),o=l(t);return s.axis_rotated&&(0<t.value&&o<n||t.value<0&&n<o)&&(o=n),[[r,i],[r,o-(n-i)],[r,o-(n-i)],[r,i]]}},m.updateCircle=function(){var t=this;t.mainCircle=t.main.selectAll("."+B.circles).selectAll("."+B.circle).data(t.lineOrScatterData.bind(t)),t.mainCircle.enter().append("circle").attr("class",t.classCircle.bind(t)).attr("r",t.pointR.bind(t)).style("fill",t.color),t.mainCircle.style("opacity",t.initialOpacityForCircle.bind(t)),t.mainCircle.exit().remove()},m.redrawCircle=function(t,e,n){var i=this.main.selectAll("."+B.selectedCircle);return[(n?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",t).attr("cy",e),(n?i.transition(Math.random().toString()):i).attr("cx",t).attr("cy",e)]},m.circleX=function(t){return t.x||0===t.x?this.x(t.x):null},m.updateCircleY=function(){var t,n,e=this;0<e.config.data_groups.length?(t=e.getShapeIndices(e.isLineType),n=e.generateGetLinePoints(t),e.circleY=function(t,e){return n(t,e)[0][1]}):e.circleY=function(t){return e.getYScale(t.id)(t.value)}},m.getCircles=function(t,e){return(e?this.main.selectAll("."+B.circles+this.getTargetSelectorSuffix(e)):this.main).selectAll("."+B.circle+(P(t)?"-"+t:""))},m.expandCircles=function(t,e,n){var i=this.pointExpandedR.bind(this);n&&this.unexpandCircles(),this.getCircles(t,e).classed(B.EXPANDED,!0).attr("r",i)},m.unexpandCircles=function(t){var e=this,n=e.pointR.bind(e);e.getCircles(t).filter(function(){return e.d3.select(this).classed(B.EXPANDED)}).classed(B.EXPANDED,!1).attr("r",n)},m.pointR=function(t){var e=this.config;return this.isStepType(t)?0:f(e.point_r)?e.point_r(t):e.point_r},m.pointExpandedR=function(t){var e=this.config;return e.point_focus_expand_enabled?f(e.point_focus_expand_r)?e.point_focus_expand_r(t):e.point_focus_expand_r?e.point_focus_expand_r:1.75*this.pointR(t):this.pointR(t)},m.pointSelectR=function(t){var e=this.config;return f(e.point_select_r)?e.point_select_r(t):e.point_select_r?e.point_select_r:4*this.pointR(t)},m.isWithinCircle=function(t,e){var n=this.d3,i=n.mouse(t),r=n.select(t),o=+r.attr("cx"),a=+r.attr("cy");return Math.sqrt(Math.pow(o-i[0],2)+Math.pow(a-i[1],2))<e},m.isWithinStep=function(t,e){return Math.abs(e-this.d3.mouse(t)[1])<30},m.getCurrentWidth=function(){var t=this.config;return t.size_width?t.size_width:this.getParentWidth()},m.getCurrentHeight=function(){var t=this.config,e=t.size_height?t.size_height:this.getParentHeight();return 0<e?e:320/(this.hasType("gauge")&&!t.gauge_fullCircle?2:1)},m.getCurrentPaddingTop=function(){var t=this.config,e=P(t.padding_top)?t.padding_top:0;return this.title&&this.title.node()&&(e+=this.getTitlePadding()),e},m.getCurrentPaddingBottom=function(){var t=this.config;return P(t.padding_bottom)?t.padding_bottom:0},m.getCurrentPaddingLeft=function(t){var e=this.config;return P(e.padding_left)?e.padding_left:e.axis_rotated?!e.axis_x_show||e.axis_x_inner?1:Math.max(n(this.getAxisWidthByAxisId("x",t)),40):!e.axis_y_show||e.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:n(this.getAxisWidthByAxisId("y",t))},m.getCurrentPaddingRight=function(){var t=this.config,e=this.isLegendRight?this.getLegendWidth()+20:0;return P(t.padding_right)?t.padding_right+1:t.axis_rotated?10+e:!t.axis_y2_show||t.axis_y2_inner?2+e+(this.axis.getY2AxisLabelPosition().isOuter?20:0):n(this.getAxisWidthByAxisId("y2"))+e},m.getParentRectValue=function(e){for(var n,i=this.selectChart.node();i&&"BODY"!==i.tagName;){try{n=i.getBoundingClientRect()[e]}catch(t){"width"===e&&(n=i.offsetWidth)}if(n)break;i=i.parentNode}return n},m.getParentWidth=function(){return this.getParentRectValue("width")},m.getParentHeight=function(){var t=this.selectChart.style("height");return 0<t.indexOf("px")?+t.replace("px",""):0},m.getSvgLeft=function(t){var e=this.config,n=e.axis_rotated||!e.axis_rotated&&!e.axis_y_inner,i=e.axis_rotated?B.axisX:B.axisY,r=this.main.select("."+i).node(),o=r&&n?r.getBoundingClientRect():{right:0},a=this.selectChart.node().getBoundingClientRect(),s=this.hasArcType(),u=o.right-a.left-(s?0:this.getCurrentPaddingLeft(t));return 0<u?u:0},m.getAxisWidthByAxisId=function(t,e){var n=this.axis.getLabelPositionById(t);return this.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},m.getHorizontalAxisHeight=function(t){var e=this.config,n=30;return"x"!==t||e.axis_x_show?"x"===t&&e.axis_x_height?e.axis_x_height:"y"!==t||e.axis_y_show?"y2"!==t||e.axis_y2_show?("x"===t&&!e.axis_rotated&&e.axis_x_tick_rotate&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-e.axis_x_tick_rotate)/180)),"y"===t&&e.axis_rotated&&e.axis_y_tick_rotate&&(n=30+this.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-e.axis_y_tick_rotate)/180)),n+(this.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):this.rotated_padding_top:!e.legend_show||this.isLegendRight||this.isLegendInset?1:10:8},m.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},m.initBrush=function(){var e=this,t=e.d3;e.brush=t.svg.brush().on("brush",function(){e.redrawForBrush()}),e.brush.update=function(){return e.context&&e.context.select("."+B.brush).call(this),this},e.brush.scale=function(t){return e.config.axis_rotated?this.y(t):this.x(t)}},m.initSubchart=function(){var t=this,e=t.config,n=t.context=t.svg.append("g").attr("transform",t.getTranslate("context")),i=e.subchart_show?"visible":"hidden";n.style("visibility",i),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",B.chart),n.select("."+B.chart).append("g").attr("class",B.chartBars),n.select("."+B.chart).append("g").attr("class",B.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",B.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",B.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},m.updateTargetsForSubchart=function(t){var e,n=this,i=n.context,r=n.config,o=n.classChartBar.bind(n),a=n.classBars.bind(n),s=n.classChartLine.bind(n),u=n.classLines.bind(n),l=n.classAreas.bind(n);r.subchart_show&&(i.select("."+B.chartBars).selectAll("."+B.chartBar).data(t).attr("class",o).enter().append("g").style("opacity",0).attr("class",o).append("g").attr("class",a),(e=i.select("."+B.chartLines).selectAll("."+B.chartLine).data(t).attr("class",s).enter().append("g").style("opacity",0).attr("class",s)).append("g").attr("class",u),e.append("g").attr("class",l),i.selectAll("."+B.brush+" rect").attr(r.axis_rotated?"width":"height",r.axis_rotated?n.width2:n.height2))},m.updateBarForSubchart=function(t){var e=this;e.contextBar=e.context.selectAll("."+B.bars).selectAll("."+B.bar).data(e.barData.bind(e)),e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color),e.contextBar.style("opacity",e.initialOpacity.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity",0).remove()},m.redrawBarForSubchart=function(t,e,n){(e?this.contextBar.transition(Math.random().toString()).duration(n):this.contextBar).attr("d",t).style("opacity",1)},m.updateLineForSubchart=function(t){var e=this;e.contextLine=e.context.selectAll("."+B.lines).selectAll("."+B.line).data(e.lineData.bind(e)),e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color),e.contextLine.style("opacity",e.initialOpacity.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity",0).remove()},m.redrawLineForSubchart=function(t,e,n){(e?this.contextLine.transition(Math.random().toString()).duration(n):this.contextLine).attr("d",t).style("opacity",1)},m.updateAreaForSubchart=function(t){var e=this,n=e.d3;e.contextArea=e.context.selectAll("."+B.areas).selectAll("."+B.area).data(e.lineData.bind(e)),e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=+n.select(this).style("opacity"),0}),e.contextArea.style("opacity",0),e.contextArea.exit().transition().duration(t).style("opacity",0).remove()},m.redrawAreaForSubchart=function(t,e,n){(e?this.contextArea.transition(Math.random().toString()).duration(n):this.contextArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},m.redrawSubchart=function(t,e,n,i,r,o,a){var s,u,l,c=this,h=c.d3,f=c.config;c.context.style("visibility",f.subchart_show?"visible":"hidden"),f.subchart_show&&(h.event&&"zoom"===h.event.type&&c.brush.extent(c.x.orgDomain()).update(),t&&(c.brush.empty()||c.brush.extent(c.x.orgDomain()).update(),s=c.generateDrawArea(r,!0),u=c.generateDrawBar(o,!0),l=c.generateDrawLine(a,!0),c.updateBarForSubchart(n),c.updateLineForSubchart(n),c.updateAreaForSubchart(n),c.redrawBarForSubchart(u,n,n),c.redrawLineForSubchart(l,n,n),c.redrawAreaForSubchart(s,n,n)))},m.redrawForBrush=function(){var t=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),this.config.subchart_onbrush.call(this.api,t.orgDomain())},m.transformContext=function(t,e){var n;e&&e.axisSubX?n=e.axisSubX:(n=this.context.select("."+B.axisX),t&&(n=n.transition())),this.context.attr("transform",this.getTranslate("context")),n.attr("transform",this.getTranslate("subx"))},m.getDefaultExtent=function(){var t=this.config,e=f(t.axis_x_extent)?t.axis_x_extent(this.getXDomain(this.data.targets)):t.axis_x_extent;return this.isTimeSeries()&&(e=[this.parseDate(e[0]),this.parseDate(e[1])]),e},m.initText=function(){this.main.select("."+B.chart).append("g").attr("class",B.chartTexts),this.mainText=this.d3.selectAll([])},m.updateTargetsForText=function(t){var e=this.classChartText.bind(this),n=this.classTexts.bind(this),i=this.classFocus.bind(this);this.main.select("."+B.chartTexts).selectAll("."+B.chartText).data(t).attr("class",function(t){return e(t)+i(t)}).enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none").append("g").attr("class",n)},m.updateText=function(t){var i=this,e=i.config,n=i.barOrLineData.bind(i),r=i.classText.bind(i);i.mainText=i.main.selectAll("."+B.texts).selectAll("."+B.text).data(n),i.mainText.enter().append("text").attr("class",r).attr("text-anchor",function(t){return e.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(t){return i.color(t)}).style("fill-opacity",0),i.mainText.text(function(t,e,n){return i.dataLabelFormat(t.id)(t.value,t.id,e,n)}),i.mainText.exit().transition().duration(t).style("fill-opacity",0).remove()},m.redrawText=function(t,e,n,i){return[(i?this.mainText.transition():this.mainText).attr("x",t).attr("y",e).style("fill",this.color).style("fill-opacity",n?0:this.opacityForText.bind(this))]},m.getTextRect=function(t,e,n){var i,r=this.d3.select("body").append("div").classed("c3",!0),o=r.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),a=this.d3.select(n).style("font");return o.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",a).text(t).each(function(){i=this.getBoundingClientRect()}),r.remove(),i},m.generateXYForText=function(t,e,n,i){var r=this,o=r.generateGetAreaPoints(t,!1),a=r.generateGetBarPoints(e,!1),s=r.generateGetLinePoints(n,!1),u=i?r.getXForText:r.getYForText;return function(t,e){var n=r.isAreaType(t)?o:r.isBarType(t)?a:s;return u.call(r,n(t,e),t,this)}},m.getXForText=function(t,e,n){var i,r,o=n.getBoundingClientRect();return i=this.config.axis_rotated?(r=this.isBarType(e)?4:6,t[2][1]+r*(e.value<0?-1:1)):this.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(i>this.width?i=this.width-o.width:i<0&&(i=4)),i},m.getYForText=function(t,e,n){var i,r=n.getBoundingClientRect();return this.config.axis_rotated?i=(t[0][0]+t[2][0]+.6*r.height)/2:(i=t[2][1],e.value<0||0===e.value&&!this.hasPositiveValue?(i+=r.height,this.isBarType(e)&&this.isSafari()?i-=3:!this.isBarType(e)&&this.isChrome()&&(i+=3)):i+=this.isBarType(e)?-3:-6),null!==e.value||this.config.axis_rotated||(i<r.height?i=r.height:i>this.height&&(i=this.height-4)),i},m.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)},m.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))},m.xForTitle=function(){var t=this,e=t.config,n=e.title_position||"left";return 0<=n.indexOf("right")?t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width-e.title_padding.right:0<=n.indexOf("center")?(t.currentWidth-t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width)/2:e.title_padding.left},m.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).height},m.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom},m.initTooltip=function(){var t,e=this,n=e.config;if(e.tooltip=e.selectChart.style("position","relative").append("div").attr("class",B.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),n.tooltip_init_show){if(e.isTimeSeries()&&u(n.tooltip_init_x)){for(n.tooltip_init_x=e.parseDate(n.tooltip_init_x),t=0;t<e.data.targets[0].values.length&&e.data.targets[0].values[t].x-n.tooltip_init_x!=0;t++);n.tooltip_init_x=t}e.tooltip.html(n.tooltip_contents.call(e,e.data.targets.map(function(t){return e.addName(t.values[n.tooltip_init_x])}),e.axis.getXAxisTickFormat(),e.getYFormat(e.hasArcType()),e.color)),e.tooltip.style("top",n.tooltip_init_position.top).style("left",n.tooltip_init_position.left).style("display","block")}},m.getTooltipSortFunction=function(){var t=this.config;if(0!==t.data_groups.length&&void 0===t.tooltip_order){var n=this.orderTargets(this.data.targets).map(function(t){return t.id});return(this.isOrderAsc()||this.isOrderDesc())&&(n=n.reverse()),function(t,e){return n.indexOf(t.id)-n.indexOf(e.id)}}var i=t.tooltip_order;void 0===i&&(i=t.data_order);var r=function(t){return t?t.value:null};if(u(i)&&"asc"===i.toLowerCase())return function(t,e){return r(t)-r(e)};if(u(i)&&"desc"===i.toLowerCase())return function(t,e){return r(e)-r(t)};if(f(i)){var e=i;return void 0===t.tooltip_order&&(e=function(t,e){return i(t?{id:t.id,values:[t]}:null,e?{id:e.id,values:[e]}:null)}),e}return a(i)?function(t,e){return i.indexOf(t.id)-i.indexOf(e.id)}:void 0},m.getTooltipContent=function(t,e,n,i){var r,o,a,s,u,l,c=this.config,h=c.tooltip_format_title||e,f=c.tooltip_format_name||function(t){return t},d=c.tooltip_format_value||n,p=this.getTooltipSortFunction();for(p&&t.sort(p),o=0;o<t.length;o++)if(t[o]&&(t[o].value||0===t[o].value)&&(r||(a=g(h?h(t[o].x):t[o].x),r="<table class='"+this.CLASS.tooltip+"'>"+(a||0===a?"<tr><th colspan='2'>"+a+"</th></tr>":"")),void 0!==(s=g(d(t[o].value,t[o].ratio,t[o].id,t[o].index,t))))){if(null===t[o].name)continue;u=g(f(t[o].name,t[o].ratio,t[o].id,t[o].index)),l=this.levelColor?this.levelColor(t[o].value):i(t[o].id),r+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(t[o].id)+"'>",r+="<td class='name'><span style='background-color:"+l+"'></span>"+u+"</td>",r+="<td class='value'>"+s+"</td>",r+="</tr>"}return r+"</table>"},m.tooltipPosition=function(t,e,n,i){var r,o,a,s,u,l=this,c=l.config,h=l.d3,f=l.hasArcType(),d=h.mouse(i);return f?(o=(l.width-(l.isLegendRight?l.getLegendWidth():0))/2+d[0],s=(l.hasType("gauge")?l.height:l.height/2)+d[1]+20):(r=l.getSvgLeft(!0),s=c.axis_rotated?(a=(o=r+d[0]+100)+e,u=l.currentWidth-l.getCurrentPaddingRight(),l.x(t[0].x)+20):(a=(o=r+l.getCurrentPaddingLeft(!0)+l.x(t[0].x)+20)+e,u=r+l.currentWidth-l.getCurrentPaddingRight(),d[1]+15),u<a&&(o-=a-u+20),s+n>l.currentHeight&&(s-=n+30)),s<0&&(s=0),{top:s,left:o}},m.showTooltip=function(t,e){var n,i,r,o=this,a=o.config,s=o.hasArcType(),u=t.filter(function(t){return t&&P(t.value)}),l=a.tooltip_position||m.tooltipPosition;0!==u.length&&a.tooltip_show&&(o.tooltip.html(a.tooltip_contents.call(o,t,o.axis.getXAxisTickFormat(),o.getYFormat(s),o.color)).style("display","block"),n=o.tooltip.property("offsetWidth"),i=o.tooltip.property("offsetHeight"),r=l.call(this,u,n,i,e),o.tooltip.style("top",r.top+"px").style("left",r.left+"px"))},m.hideTooltip=function(){this.tooltip.style("display","none")},m.setTargetType=function(t,e){var n=this,i=n.config;n.mapToTargetIds(t).forEach(function(t){n.withoutFadeIn[t]=e===i.data_types[t],i.data_types[t]=e}),t||(i.data_type=e)},m.hasType=function(n,t){var i=this.config.data_types,r=!1;return(t=t||this.data.targets)&&t.length?t.forEach(function(t){var e=i[t.id];(e&&0<=e.indexOf(n)||!e&&"line"===n)&&(r=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(t){i[t]===n&&(r=!0)}):r=this.config.data_type===n,r},m.hasArcType=function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)},m.isLineType=function(t){var e=this.config,n=u(t)?t:t.id;return!e.data_types[n]||0<=["line","spline","area","area-spline","step","area-step"].indexOf(e.data_types[n])},m.isStepType=function(t){var e=u(t)?t:t.id;return 0<=["step","area-step"].indexOf(this.config.data_types[e])},m.isSplineType=function(t){var e=u(t)?t:t.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[e])},m.isAreaType=function(t){var e=u(t)?t:t.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[e])},m.isBarType=function(t){var e=u(t)?t:t.id;return"bar"===this.config.data_types[e]},m.isScatterType=function(t){var e=u(t)?t:t.id;return"scatter"===this.config.data_types[e]},m.isPieType=function(t){var e=u(t)?t:t.id;return"pie"===this.config.data_types[e]},m.isGaugeType=function(t){var e=u(t)?t:t.id;return"gauge"===this.config.data_types[e]},m.isDonutType=function(t){var e=u(t)?t:t.id;return"donut"===this.config.data_types[e]},m.isArcType=function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},m.lineData=function(t){return this.isLineType(t)?[t]:[]},m.arcData=function(t){return this.isArcType(t.data)?[t]:[]},m.barData=function(t){return this.isBarType(t)?t.values:[]},m.lineOrScatterData=function(t){return this.isLineType(t)||this.isScatterType(t)?t.values:[]},m.barOrLineData=function(t){return this.isBarType(t)||this.isLineType(t)?t.values:[]},m.isInterpolationType=function(t){return 0<=["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(t)},m.isSafari=function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari")&&t.indexOf("Chrome")<0},m.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")},m.initZoom=function(){var e,n=this,i=n.d3,r=n.config;n.zoom=i.behavior.zoom().on("zoomstart",function(){e=i.event.sourceEvent,n.zoom.altDomain=i.event.sourceEvent.altKey?n.x.orgDomain():null,r.zoom_onzoomstart.call(n.api,i.event.sourceEvent)}).on("zoom",function(){n.redrawForZoom.call(n)}).on("zoomend",function(){var t=i.event.sourceEvent;t&&e.clientX===t.clientX&&e.clientY===t.clientY||(n.redrawEventRect(),n.updateZoom(),r.zoom_onzoomend.call(n.api,n.x.orgDomain()))}),n.zoom.scale=function(t){return r.axis_rotated?this.y(t):this.x(t)},n.zoom.orgScaleExtent=function(){var t=r.zoom_extent?r.zoom_extent:[1,10];return[t[0],Math.max(n.getMaxDataCount()/t[1],t[1])]},n.zoom.updateScaleExtent=function(){var t=I(n.x.orgDomain())/I(n.getZoomDomain()),e=this.orgScaleExtent();return this.scaleExtent([e[0]*t,e[1]*t]),this}},m.getZoomDomain=function(){var t=this.config,e=this.d3;return[e.min([this.orgXDomain[0],t.zoom_x_min]),e.max([this.orgXDomain[1],t.zoom_x_max])]},m.updateZoom=function(){var t=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+B.zoomRect).call(t).on("dblclick.zoom",null),this.main.selectAll("."+B.eventRect).call(t).on("dblclick.zoom",null)},m.redrawForZoom=function(){var t=this,e=t.d3,n=t.config,i=t.zoom,r=t.x;if(n.zoom_enabled&&0!==t.filterTargetsToShow(t.data.targets).length){if("mousemove"===e.event.sourceEvent.type&&i.altDomain)return r.domain(i.altDomain),void i.scale(r).updateScaleExtent();t.isCategorized()&&r.orgDomain()[0]===t.orgXDomain[0]&&r.domain([t.orgXDomain[0]-1e-10,r.orgDomain()[1]]),t.redraw({withTransition:!1,withY:n.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===e.event.sourceEvent.type&&(t.cancelClick=!0),n.zoom_onzoom.call(t.api,r.orgDomain())}},v}()},uMCLUn5P:function(t,s,u){"use strict";(function(t){var e=u("C9CvtcdF"),n=u("9dgSYzhm"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===i?e.a.Buffer:void 0,a=(o?o.isBuffer:void 0)||n.a;s.a=a}).call(this,u("BE8oL2FB")(t))},zZ9hESjW:function(t,exports,e){t.exports=e("9TIQGsxl").crossfilter}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-13"],{"1MawR+7+":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=o(t("ii0bleBb")),i=o(t("ivGQtwpr")),a=o(t("8FtKQWAV")),l=t("nHcjWeCO"),c=t("wMSvutaJ"),u=t("B4BR5PLd"),s=t("oBIKikY9"),r=o(t("L8npJDrf")),f=o(t("OI/ji6gQ")),p=o(t("U11dbnfr"));function o(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function o(e){var a,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=this,n=m(o).call(this,e),P(v(v(a=!n||"object"!==d(n)&&"function"!=typeof n?v(t):n)),"_validate",function(e){var r=a.state.contentPack,n=e||a.props.selectedEntities,t=["name","summary","vendor"].reduce(function(e,t){var n=e;return(!r[t]||r[t].length<=0)&&(n[t]="Must be filled out."),n},{});Object.keys(n).reduce(function(e,t){return e+n[t].length},0)<=0&&(t.selection="Select at least one entity."),a.setState({errors:t})}),P(v(v(a)),"_updateSelectionEntity",function(t){var e=t.type.name,n=(0,l.cloneDeep)(a.props.selectedEntities);n[e]=n[e]||[];var r=n[e].findIndex(function(e){return e.id===t.id});r<0?n[e].push(t):n[e].splice(r,1),a._validate(n),a.props.onStateChange({selectedEntities:n})}),P(v(v(a)),"_updateSelectionGroup",function(e){var t=(0,l.cloneDeep)(a.props.selectedEntities);a._isGroupSelected(e)?t[e]=[]:t[e]=a.props.entities[e],a._validate(t),a.props.onStateChange({selectedEntities:t})}),P(v(v(a)),"_onSetFilter",function(e){a._filterEntities(e)}),P(v(v(a)),"_onClearFilter",function(){a._filterEntities("")}),P(v(v(a)),"_filterEntities",function(e){var r=e;if(r.length<=0)a.setState({filteredEntities:(0,l.cloneDeep)(a.props.entities),isFiltered:!1,filter:r});else{var t=Object.keys(a.props.entities).reduce(function(e,t){var n=(0,l.cloneDeep)(e);return n[t]=a.props.entities[t].filter(function(e){return RegExp(r,"i").test(e.title)}),n},{});a.setState({filteredEntities:t,isFiltered:!0,filter:r})}}),P(v(v(a)),"_entityItemHeader",function(e){return e.constructor.name===f.default.name?i.default.createElement("span",null,i.default.createElement("i",{className:"fa fa-archive ".concat(p.default.contentPackEntity)})," ",i.default.createElement("span",null,e.title)):i.default.createElement("span",null,i.default.createElement("i",{className:"fa fa-server"})," ",i.default.createElement("span",null,e.title))}),a._bindValue=a._bindValue.bind(v(v(a))),a.state={contentPack:a.props.contentPack,filteredEntities:a.props.entities,filter:"",isFiltered:!1,errors:{}},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,i.default.Component),y(o,null,[{key:"_toDisplayTitle",value:function(e){var t=e.split("_").join(" ");return t[0].toUpperCase()+t.substr(1)}}]),y(o,[{key:"componentWillReceiveProps",value:function(e){this.setState({filteredEntities:e.entities,contentPack:e.contentPack}),this.state.isFiltered&&this._filterEntities(this.state.filter)}},{key:"_updateField",value:function(e,t){var n=this.state.contentPack.toBuilder()[e](t).build();this.props.onStateChange({contentPack:n}),this.setState({contentPack:n},this._validate)}},{key:"_bindValue",value:function(e){this._updateField(e.target.name,r.default.getValueFromInput(e.target))}},{key:"_isUndetermined",value:function(e){return!!this.props.selectedEntities[e]&&!(this.props.selectedEntities[e].length===this.props.entities[e].length||0===this.props.selectedEntities[e].length)}},{key:"_isSelected",value:function(t){var e=t.type.name;return!!this.props.selectedEntities[e]&&0<=this.props.selectedEntities[e].findIndex(function(e){return e.id===t.id})}},{key:"_isGroupSelected",value:function(e){return!!this.props.selectedEntities[e]&&this.props.selectedEntities[e].length===this.props.entities[e].length}},{key:"render",value:function(){var r=this,e=Object.keys(this.state.filteredEntities||{}).sort(function(e,t){return(0,a.default)(e,t)}).map(function(e){var t=r.state.filteredEntities[e],n=t.sort(function(e,t){return(0,a.default)(e.title,t.title)}).map(function(e){var t=r._isSelected(e),n=r._entityItemHeader(e);return i.default.createElement(s.ExpandableListItem,{onChange:function(){return r._updateSelectionEntity(e)},key:e.id,checked:t,expandable:!1,padded:!1,header:n})});return t.length<=0?null:i.default.createElement(s.ExpandableListItem,{key:e,onChange:function(){return r._updateSelectionGroup(e)},indetermined:r._isUndetermined(e),checked:r._isGroupSelected(e),stayExpanded:r.state.isFiltered,expanded:r.state.isFiltered,padded:!1,header:o._toDisplayTitle(e)},i.default.createElement(s.ExpandableList,null,n))}),t=this.state.errors;return i.default.createElement("div",null,i.default.createElement(c.Row,null,i.default.createElement(c.Col,{smOffset:1,lg:8},i.default.createElement("h2",null,"General Information"),i.default.createElement("br",null),i.default.createElement("form",{className:"content-selection-form",id:"content-selection-form",onSubmit:function(e){e.preventDefault()}},i.default.createElement("fieldset",null,i.default.createElement(u.Input,{name:"name",id:"name",type:"text",bsStyle:t.name?"error":null,maxLength:250,value:this.state.contentPack.name,onChange:this._bindValue,label:"Name",help:t.name?t.name:"Required. Give a descriptive name for this content pack.",required:!0}),i.default.createElement(u.Input,{name:"summary",id:"summary",type:"text",bsStyle:t.summary?"error":null,maxLength:250,value:this.state.contentPack.summary,onChange:this._bindValue,label:"Summary",help:t.summary?t.summary:"Required. Give a short summary of the content pack.",required:!0}),i.default.createElement(u.Input,{name:"description",id:"description",type:"textarea",value:this.state.contentPack.description,onChange:this._bindValue,rows:6,label:"Description",help:"Give a long description of the content pack in markdown."}),i.default.createElement(u.Input,{name:"vendor",id:"vendor",type:"text",bsStyle:t.vendor?"error":null,maxLength:250,value:this.state.contentPack.vendor,onChange:this._bindValue,label:"Vendor",help:t.vendor?t.vendor:"Required. Who did this content pack and how can he be reached. e.g Name and eMail",required:!0}),i.default.createElement(u.Input,{name:"url",id:"url",type:"text",maxLength:250,value:this.state.contentPack.url,onChange:this._bindValue,label:"URL",help:"Where can I find the content pack. e.g. github url"}))))),i.default.createElement(c.Row,null,i.default.createElement(c.Col,{smOffset:1,lg:8},i.default.createElement("h2",null,"Content Pack selection"),this.props.edit&&i.default.createElement(c.HelpBlock,null,"You can select between installed entities from the server (",i.default.createElement("i",{className:"fa fa-server"}),") or entities from the former content pack revision (",i.default.createElement("i",{className:"fa fa-archive ".concat(p.default.contentPackEntity)}),")."))),i.default.createElement(c.Row,null,i.default.createElement(c.Col,{smOffset:1,lg:8},i.default.createElement(s.SearchForm,{id:"filter-input",onSearch:this._onSetFilter,onReset:this._onClearFilter,searchButtonLabel:"Filter"}))),i.default.createElement(c.Row,null,i.default.createElement(c.Col,{smOffset:1,sm:8,lg:8},t.selection&&i.default.createElement(c.Panel,{bsStyle:"danger"},t.selection),i.default.createElement(s.ExpandableList,null,e))))}}]),o}();P(E,"propTypes",{contentPack:n.default.object.isRequired,onStateChange:n.default.func,entities:n.default.object,selectedEntities:n.default.object,edit:n.default.bool}),P(E,"defaultProps",{edit:!1,onStateChange:function(){},entities:{},selectedEntities:{}});var _=E;exports.default=_,e.exports=exports.default},"6qgml9Rf":function(e,exports,t){(exports=e.exports=t("wTjlWjHz")(!1)).push([e.i,"._1glWojMayeh_ollzGHnL8K{color:rgba(158,31,99,.43)}",""]),exports.locals={contentPackEntity:"_1glWojMayeh_ollzGHnL8K"}},BR7UKDRe:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(t("ii0bleBb")),o=r(t("ivGQtwpr")),i=t("wMSvutaJ"),l=r(t("84/cUDhd")),c=r(t("ln+mw4M8")),u=r(t("mvLrBbmL")),s=r(t("+qdgLVR6"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,o.default.Component),n=t,(r=[{key:"_renderDownload",value:function(){var e=encodeURIComponent(JSON.stringify(this.props.contentPack,null,2)),t="data:text/plain;charset=utf-8,".concat(e),n="content-pack-".concat(this.props.contentPack.id,"-").concat(this.props.contentPack.rev,".json");return o.default.createElement("a",{download:n,href:t},o.default.createElement(i.Button,{id:"download",bsStyle:"info",onClick:this.props.onSave},"Create and Download"))}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement(i.Row,null,o.default.createElement(i.Col,{sm:6},o.default.createElement(l.default,{contentPack:this.props.contentPack})),o.default.createElement(i.Col,{sm:6},o.default.createElement(c.default,{constraints:this.props.contentPack.constraints,isFulfilled:!0}),o.default.createElement(u.default,{contentPack:this.props.contentPack,readOnly:!0}),o.default.createElement(s.default,{contentPack:this.props.contentPack,readOnly:!0}))),o.default.createElement(i.Row,null,o.default.createElement(i.Col,{sm:6},o.default.createElement(i.Button,{id:"create",bsStyle:"primary",onClick:this.props.onSave},"Create"),"Â ",this._renderDownload())))}}])&&f(n.prototype,r),a&&f(n,a),t}();h(y,"propTypes",{contentPack:n.default.object.isRequired,onSave:n.default.func}),h(y,"defaultProps",{onSave:function(){}});var b=y;exports.default=b,e.exports=exports.default},U11dbnfr:function(e,exports,t){var n=t("6qgml9Rf");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("HkU00dYq")(n,r);n.locals&&(e.exports=n.locals)},"a6HJy+Cb":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(t("ii0bleBb")),i=r(t("ivGQtwpr")),l=r(t("nHcjWeCO")),o=t("wMSvutaJ"),c=t("B4BR5PLd"),u=r(t("s2hN4RJZ")),s=r(t("mvLrBbmL")),f=r(t("+qdgLVR6"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){function r(e){var o,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=this,n=m(r).call(this,e),b(y(y(o=!n||"object"!==p(n)&&"function"!=typeof n?y(t):n)),"_addNewParameter",function(t,n){var e=o.props.contentPack.toBuilder(),r=u.default.clone(o.props.appliedParameter);n&&(Object.keys(r).forEach(function(e){r[e]=r[e].map(function(e){return e.paramName===n.name?{configKey:e.configKey,paramName:t.name}:e})}),e=e.removeParameter(n)),e.addParameter(t),o.props.onStateChange({contentPack:e.build(),appliedParameter:r})}),b(y(y(o)),"_onParameterApply",function(e,t,n){var r={configKey:t,paramName:n},a=u.default.clone(o.props.appliedParameter);a[e]=a[e]||[],a[e].push(r),o.props.onStateChange({appliedParameter:a})}),b(y(y(o)),"_onParameterClear",function(e,t){var n=u.default.clone(o.props.appliedParameter);l.default.remove(n[e],function(e){return e.configKey===t}),o.props.onStateChange({appliedParameter:n})}),b(y(y(o)),"_deleteParameter",function(t){var e=o.props.contentPack,n=u.default.clone(o.props.appliedParameter);Object.keys(n).forEach(function(e){l.default.remove(n[e],function(e){return e.paramName===t.name}),n[e].length<=0&&delete n[e]});var r=e.toBuilder().removeParameter(t).build();o.props.onStateChange({contentPack:r,appliedParameter:n}),o._closeConfirmModal()}),b(y(y(o)),"_confirmationModal",function(){return i.default.createElement(c.BootstrapModalConfirm,{ref:function(e){o.modal=e},title:"Confirm deletion",onConfirm:function(){o._deleteParameter(o.state.parameterToDelete)},onCancel:o._closeConfirmModal},"Are you sure you want to do delete this parameter: ".concat((o.state.parameterToDelete||{}).title,"?"))}),b(y(y(o)),"_openConfirmModal",function(e){o.setState({parameterToDelete:e}),o.modal.open()}),b(y(y(o)),"_closeConfirmModal",function(){o.setState({parameterToDelete:void 0}),o.modal.close()}),o.state={newParameter:u.default.clone(r.emptyParameter),parameterToDelete:void 0,defaultValueError:void 0,nameError:void 0},o}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,i.default.Component),t=r,(n=[{key:"render",value:function(){return i.default.createElement("div",null,i.default.createElement(o.Row,null,i.default.createElement(o.Col,{smOffset:1,sm:9},i.default.createElement(f.default,{contentPack:this.props.contentPack,onAddParameter:this._addNewParameter,onDeleteParameter:this._openConfirmModal,appliedParameter:this.props.appliedParameter}),this._confirmationModal())),i.default.createElement(o.Row,null,i.default.createElement(o.Col,{smOffset:1,sm:9},i.default.createElement(s.default,{contentPack:this.props.contentPack,onParameterClear:this._onParameterClear,onParameterApply:this._onParameterApply,appliedParameter:this.props.appliedParameter}))))}}])&&d(t.prototype,n),a&&d(t,a),r}();b(a,"propTypes",{contentPack:n.default.object.isRequired,onStateChange:n.default.func,appliedParameter:n.default.object.isRequired}),b(a,"defaultProps",{onStateChange:function(){}}),b(a,"emptyParameter",{name:"",title:"",description:"",type:"string",default_value:""});var v=a;exports.default=v,e.exports=exports.default},w982HK6j:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(t("ii0bleBb")),o=r(t("ivGQtwpr")),i=t("VgplIV7d"),l=t("oBIKikY9"),c=r(t("F6dBIxHb")),u=r(t("1MawR+7+")),s=r(t("84/cUDhd")),f=r(t("BR7UKDRe")),p=r(t("a6HJy+Cb"));function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(e){function a(e){var n,t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=this,r=h(a).call(this,e),v(b(b(n=!r||"object"!==d(r)&&"function"!=typeof r?b(t):r)),"_stepChanged",function(e){switch(e){case"parameters":var t=n.props.contentPack.toBuilder().entities(n.props.fetchedEntities||[]).build();n.props.onStateChange({contentPack:t}),0<Object.keys(n.props.selectedEntities).length&&n.props.onGetEntities(n.props.selectedEntities);break;case"preview":n._prepareForPreview()}n.setState({selectedStep:e})}),n.state={selectedStep:"selection"},n}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,o.default.Component),t=a,(n=[{key:"_disableParameters",value:function(){var e=this.props.contentPack,n=this.props.selectedEntities,t=0<Object.keys(n).reduce(function(e,t){return e+n[t].length},0);return!(e.name&&e.summary&&e.vendor&&t)}},{key:"_disablePreview",value:function(){return"selection"===this.state.selectedStep||!this.state.selectedStep}},{key:"_prepareForPreview",value:function(){var o=this,e=this.props.fetchedEntities.map(function(e){var n=o.props.appliedParameter[e.id]||[],t=e.toBuilder(),r=new c.default(e.data),a=r.getPaths();return Object.keys(a).forEach(function(t){var e=n.findIndex(function(e){return e.configKey===t});0<=e&&a[t].setParameter(n[e].paramName)}),t.data(r.getData()),t.build()}),t=this.props.contentPack.toBuilder().entities(e).build();this.props.onStateChange({contentPack:t})}},{key:"render",value:function(){if(!this.props.contentPack)return o.default.createElement(l.Spinner,null);var e=o.default.createElement(u.default,{contentPack:this.props.contentPack,selectedEntities:this.props.selectedEntities,edit:this.props.edit,onStateChange:this.props.onStateChange,entities:this.props.entityIndex}),t=o.default.createElement(p.default,{contentPack:this.props.contentPack,onStateChange:this.props.onStateChange,appliedParameter:this.props.appliedParameter}),n=o.default.createElement(f.default,{contentPack:this.props.contentPack,onSave:this.props.onSave}),r=[{key:"selection",title:"Content Selection",component:e},{key:"parameters",title:"Parameters",component:t,disabled:this._disableParameters()},{key:"preview",title:"Preview",component:n,disabled:this._disablePreview()}];return o.default.createElement("div",null,o.default.createElement(l.Wizard,{steps:r,onStepChange:this._stepChanged,affixed:!0},"preview"!==this.state.selectedStep?o.default.createElement(i.AutoAffix,{viewportOffsetTop:65},o.default.createElement("div",null,o.default.createElement(s.default,{contentPack:this.props.contentPack}))):void 0),o.default.createElement(l.ScrollButton,{possition:"middle"}))}}])&&m(t.prototype,n),r&&m(t,r),a}();v(a,"propTypes",{contentPack:n.default.object,onGetEntities:n.default.func,onStateChange:n.default.func,onSave:n.default.func,fetchedEntities:n.default.array,entityIndex:n.default.object,selectedEntities:n.default.object,appliedParameter:n.default.object,edit:n.default.bool}),v(a,"defaultProps",{edit:!1,contentPack:void 0,onGetEntities:function(){},onStateChange:function(){},onSave:function(){},fetchedEntities:[],entityIndex:{},selectedEntities:{},appliedParameter:{}});var P=a;exports.default=P,e.exports=exports.default}}]);
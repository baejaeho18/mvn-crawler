(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-45"],{YrdwRziO:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n={setFieldValidity:function(e,t,n){"function"==typeof e.setCustomValidity&&e.setCustomValidity(t?n:"")}};exports.default=n,e.exports=exports.default},dMzYukQi:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=s(t("ii0bleBb")),o=s(t("ivGQtwpr")),r=s(t("PcYM+wZ7")),a=t("wMSvutaJ"),l=t("B4BR5PLd"),u=s(t("niSA6NTH"));function s(e){return e&&e.__esModule?e:{default:e}}var i=(0,r.default)({displayName:"TimeoutInput",propTypes:{controlSize:n.default.number,labelSize:n.default.number,value:n.default.number,onChange:n.default.func},getDefaultProps:function(){return{value:36e5,labelSize:2,controlSize:10}},getInitialState:function(){var e=this._estimateUnit(this.props.value);return{sessionTimeoutNever:!!this.props.value&&-1===this.props.value,value:this.props.value?Math.floor(this.props.value/e):0,unit:e}},getValue:function(){return this.state.sessionTimeoutNever?-1:this.timeout.value*this.session_timeout_unit.getValue()},MS_DAY:864e5,MS_HOUR:36e5,MS_MINUTE:6e4,MS_SECOND:1e3,_estimateUnit:function(e){return 0===e?this.MS_SECOND:e%this.MS_DAY==0?this.MS_DAY:e%this.MS_HOUR==0?this.MS_HOUR:e%this.MS_MINUTE==0?this.MS_MINUTE:this.MS_SECOND},_onClick:function(e){this.setState({sessionTimeoutNever:e.target.checked},this._notifyChange)},_onChangeValue:function(e){this.setState({value:e.target.value},this._notifyChange)},_onChangeUnit:function(e){this.setState({unit:e.target.value},this._notifyChange)},_notifyChange:function(){"function"==typeof this.props.onChange&&this.props.onChange(this.getValue())},render:function(){var t=this;return o.default.createElement("span",null,o.default.createElement(l.Input,{type:"checkbox",id:"session-timeout-never",name:"session_timeout_never",labelClassName:"col-sm-".concat(this.props.controlSize),wrapperClassName:"col-sm-offset-".concat(this.props.labelSize," col-sm-").concat(this.props.controlSize),label:"Sessions do not time out",help:"When checked sessions never time out due to inactivity.",onChange:this._onClick,checked:this.state.sessionTimeoutNever}),o.default.createElement(l.Input,{id:"timeout-controls",label:"Timeout",help:"Session automatically end after this amount of time, unless they are actively used.",labelClassName:"col-sm-".concat(this.props.labelSize),wrapperClassName:"col-sm-".concat(this.props.controlSize)},o.default.createElement(a.Row,null,o.default.createElement(a.Col,{sm:2},o.default.createElement("input",{ref:function(e){t.timeout=e},type:"number",id:"timeout",className:"session-timeout-fields validatable form-control",name:"timeout",min:1,"data-validate":"positive_number",disabled:this.state.sessionTimeoutNever,value:this.state.value,onChange:this._onChangeValue})),o.default.createElement(a.Col,{sm:3},o.default.createElement(u.default,{ref:function(e){t.session_timeout_unit=e},className:"form-control session-timeout-fields",disabled:this.state.sessionTimeoutNever,value:this.state.unit,onChange:this._onChangeUnit})))))}});exports.default=i,e.exports=exports.default},h4jJ1pj3:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=u(t("ii0bleBb")),r=u(t("ivGQtwpr")),a=t("wMSvutaJ"),l=t("B4BR5PLd"),s=u(t("uKl89mWU")),i=u(t("dMzYukQi")),c=t("oBIKikY9"),o=u(t("1VnJesae")),f=u(t("YrdwRziO"));function u(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=o.default.getStore("Users"),_=function(e){function u(){var e,o,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=this,n=(e=m(u)).call.apply(e,[this].concat(a)),y(b(b(o=!n||"object"!==p(n)&&"function"!=typeof n?b(t):n)),"state",{users:[],newRoles:null}),y(b(b(o)),"inputs",{}),y(b(b(o)),"_onUsernameChange",function(t){var e=o.inputs.username.getInputDOMNode(),n=o.state.users.some(function(e){return e.username===t.target.value});f.default.setFieldValidity(e,n,"Username is already taken")}),y(b(b(o)),"_onPasswordChange",function(){var e=o.inputs.password,t=o.inputs.password_repeat;""!==e.value&&""!==t.value&&f.default.setFieldValidity(t,e.value!==t.value,"Passwords do not match")}),y(b(b(o)),"_onSubmit",function(e){e.preventDefault();var t={};Object.keys(o.inputs).forEach(function(e){"password_repeat"!==e&&(t[e]=o.inputs[e].getValue?o.inputs[e].getValue():o.inputs[e].value)}),o.props.onSubmit(t)}),y(b(b(o)),"_onValueChange",function(e){var t=e.split(",");o.setState({newRoles:t})}),o}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,r.default.Component),t=u,(n=[{key:"componentDidMount",value:function(){var t=this;v.loadUsers().then(function(e){t.setState({users:e})})}},{key:"render",value:function(){var t=this,e=r.default.createElement("span",{className:"help-block"},"Assign the relevant roles to this user to grant them access to the relevant streams and dashboards.",r.default.createElement("br",null),"The ",r.default.createElement("em",null,"Reader")," role grants basic access to the system and will be enabled.",r.default.createElement("br",null),"The ",r.default.createElement("em",null,"Admin")," role grants access to everything in Graylog."),n=this.state.newRoles,o=null;return null==n||n.includes("Reader")||n.includes("Admin")||(o=r.default.createElement(a.Alert,{bsStyle:"danger",role:"alert"},"You need to select at least one of the ",r.default.createElement("em",null,"Reader")," or ",r.default.createElement("em",null,"Admin")," roles.")),r.default.createElement("form",{id:"create-user-form",className:"form-horizontal",onSubmit:this._onSubmit},r.default.createElement(l.Input,{ref:function(e){t.inputs.username=e},name:"username",id:"username",type:"text",maxLength:100,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Username",help:"Select a unique user name used to log in with.",required:!0,onChange:this._onUsernameChange,autoFocus:!0}),r.default.createElement(l.Input,{ref:function(e){t.inputs.full_name=e},name:"fullname",id:"fullname",type:"text",maxLength:200,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Full Name",help:"Give a descriptive name for this account, e.g. the full name.",required:!0}),r.default.createElement(l.Input,{ref:function(e){t.inputs.email=e},name:"email",id:"email",type:"email",maxLength:254,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10",label:"Email Address",help:"Give the contact email address.",required:!0}),r.default.createElement(l.Input,{id:"password-field",label:"Password",help:"Passwords must be at least 6 characters long. We recommend using a strong password.",labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},r.default.createElement(a.Row,null,r.default.createElement(a.Col,{sm:6},r.default.createElement("input",{className:"form-control",ref:function(e){t.inputs.password=e},name:"password",id:"password",type:"password",placeholder:"Password",required:!0,minLength:"6",onChange:this._onPasswordChange})),r.default.createElement(a.Col,{sm:6},r.default.createElement("input",{className:"form-control",ref:function(e){t.inputs.password_repeat=e},id:"password-repeat",type:"password",placeholder:"Repeat password",required:!0,minLength:"6",onChange:this._onPasswordChange})))),r.default.createElement(l.Input,{id:"roles-select",label:"Roles",help:e,labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},r.default.createElement("span",null,r.default.createElement(s.default,{ref:function(e){t.inputs.roles=e},availableRoles:this.props.roles,userRoles:["Reader"],className:"form-control",onValueChange:this._onValueChange}),o)),r.default.createElement(i.default,{ref:function(e){t.inputs.session_timeout_ms=e}}),r.default.createElement(l.Input,{id:"timezone-select",label:"Time Zone",help:"Choose the timezone to use to display times, or leave it as it is to use the system's default.",labelClassName:"col-sm-2",wrapperClassName:"col-sm-10"},r.default.createElement(c.TimezoneSelect,{ref:function(e){t.inputs.timezone=e},className:"timezone-select"})),r.default.createElement("div",{className:"form-group"},r.default.createElement(a.Col,{smOffset:2,sm:10},r.default.createElement(a.Button,{type:"submit",bsStyle:"primary",className:"create-user save-button-margin",disabled:!!o},"Create User"),r.default.createElement(a.Button,{onClick:this.props.onCancel},"Cancel"))))}}])&&d(t.prototype,n),o&&d(t,o),u}();y(_,"propTypes",{roles:n.default.array.isRequired,onSubmit:n.default.func.isRequired,onCancel:n.default.func.isRequired});var g=_;exports.default=g,e.exports=exports.default},niSA6NTH:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n,r=(n=t("ivGQtwpr"))&&n.__esModule?n:{default:n};function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var o=function(e){function c(){var e,t,n,o,r,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];return n=this,o=(e=p(c)).call.apply(e,[this].concat(s)),t=!o||"object"!==f(o)&&"function"!=typeof o?d(n):o,r=d(d(t)),l=function(){return t.session_timeout_unit.value},(a="getValue")in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(c,r.default.Component),t=c,(n=[{key:"render",value:function(){var t=this;return r.default.createElement("select",a({className:"form-control",ref:function(e){t.session_timeout_unit=e}},this.props),r.default.createElement("option",{value:1e3},"Seconds"),r.default.createElement("option",{value:6e4},"Minutes"),r.default.createElement("option",{value:36e5},"Hours"),r.default.createElement("option",{value:864e5},"Days"))}}])&&l(t.prototype,n),o&&l(t,o),c}();exports.default=o,e.exports=exports.default},uKl89mWU:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=o(t("ii0bleBb")),r=o(t("ivGQtwpr")),a=o(t("f5bAsAu+"));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){function u(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=this,o=(e=i(u)).call.apply(e,[this].concat(a)),p(f(f(t=!o||"object"!==s(o)&&"function"!=typeof o?f(n):o)),"getValue",function(){return t.select.getValue().split(",")}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(u,r.default.Component),t=u,(n=[{key:"render",value:function(){var t=this,e=this.props.userRoles.join(","),n=this.props.availableRoles.map(function(e){return{value:e.name,label:e.name}});return r.default.createElement(a.default,{ref:function(e){t.select=e},options:n,value:e,onChange:this.props.onValueChange,placeholder:"Choose roles..."})}}])&&l(t.prototype,n),o&&l(t,o),u}();p(u,"propTypes",{userRoles:n.default.arrayOf(n.default.string),availableRoles:n.default.array.isRequired,onValueChange:n.default.func}),p(u,"defaultProps",{userRoles:[]});var d=u;exports.default=d,e.exports=exports.default},"xyP/sji6":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=o(t("ivGQtwpr")),a=t("wMSvutaJ"),s=o(t("W+sNG9T1")),i=o(t("8GJ6oOEd")),c=o(t("+CppQpVm")),n=o(t("1VnJesae")),l=t("oBIKikY9"),f=o(t("h4jJ1pj3"));function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=n.default.getStore("Roles"),_=n.default.getStore("Users"),u=function(e){function u(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return n=this,y(b(b(t=!(o=(e=m(u)).call.apply(e,[this].concat(a)))||"object"!==p(o)&&"function"!=typeof o?b(n):o)),"state",{roles:void 0}),y(b(b(t)),"_onSubmit",function(e){var t=e;t.permissions=[],delete t["session-timeout-never"],_.create(t).then(function(){i.default.success("User ".concat(t.username," was created successfully."),"Success!"),c.default.replace(s.default.SYSTEM.AUTHENTICATION.USERS.LIST)},function(){i.default.error("Failed to create user!","Error!")})}),y(b(b(t)),"_onCancel",function(){c.default.push(s.default.SYSTEM.AUTHENTICATION.USERS.LIST)}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,r.default.Component),t=u,(n=[{key:"componentDidMount",value:function(){var t=this;v.loadRoles().then(function(e){t.setState({roles:e})})}},{key:"render",value:function(){return this.state.roles?r.default.createElement(l.DocumentTitle,{title:"Create new user"},r.default.createElement("span",null,r.default.createElement(l.PageHeader,{title:"Create new user",subpage:!0},r.default.createElement("span",null,"Use this page to create new Graylog users. The users and their permissions created here are not limited to the web interface but valid and required for the REST APIs of your Graylog server nodes, too.")),r.default.createElement(a.Row,null,r.default.createElement(a.Col,{lg:8},r.default.createElement(f.default,{roles:this.state.roles,onSubmit:this._onSubmit,onCancel:this._onCancel}))))):r.default.createElement(l.Spinner,null)}}])&&d(t.prototype,n),o&&d(t,o),u}();exports.default=u,e.exports=exports.default}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-39"],{"9rseX8iM":function(t,exports,e){var n=e("E/vvYj+l");"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e("HkU00dYq")(n,r);n.locals&&(t.exports=n.locals)},"E/vvYj+l":function(t,exports,e){(exports=t.exports=e("wTjlWjHz")(!1)).push([t.i,"._3PpHCh7IoFl4CRkFV55NLr{height:160px;max-height:160px;overflow:hidden;overflow-y:scroll;padding-left:0;border-bottom:1px solid #ddd}._10xUP19hn9AcGI3Zn_QnTG{margin-bottom:0}._3XACxXVlgUgDyKtC1XF2Fq{position:absolute;top:7px;right:7px}._1eISBHB6XPPAMWV2quKARp{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block}",""]),exports.locals={resultList:"_3PpHCh7IoFl4CRkFV55NLr",filterFormGroup:"_10xUP19hn9AcGI3Zn_QnTG",addButton:"_3XACxXVlgUgDyKtC1XF2Fq",patternDisplay:"_1eISBHB6XPPAMWV2quKARp"}},E8y30Nm1:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("ii0bleBb")),a=i(e("ivGQtwpr")),o=e("wMSvutaJ"),l=e("B4BR5PLd"),s=i(e("8GJ6oOEd")),r=i(e("1VnJesae")),u=i(e("FOEh8xnd"));function i(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=r.default.getStore("GrokPatterns"),b=function(t){function i(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=this,r=(t=p(i)).call.apply(t,[this].concat(o)),h(m(m(n=!r||"object"!==c(r)&&"function"!=typeof r?m(e):r)),"state",{replacePatterns:!1}),h(m(m(n)),"_onSubmit",function(t){t.preventDefault();var e=new FileReader;e.onload=function(t){var e=t.target.result;y.bulkImport(e,n.state.replacePatterns).then(function(){s.default.success("Grok Patterns imported successfully","Success!"),n.modal.close(),n.props.onSuccess()})},e.readAsText(n.patternFile.getInputDOMNode().files[0])}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(i,a.default.Component),e=i,(n=[{key:"render",value:function(){var e=this;return a.default.createElement("span",null,a.default.createElement(o.Button,{bsStyle:"info",style:{marginRight:5},onClick:function(){return e.modal.open()}},"Import pattern file"),a.default.createElement(u.default,{ref:function(t){e.modal=t},title:"Import Grok patterns from file",submitButtonText:"Upload",formProps:{onSubmit:this._onSubmit}},a.default.createElement(l.Input,{id:"pattern-file",type:"file",ref:function(t){e.patternFile=t},name:"patterns",label:"Pattern file",help:"A file containing Grok patterns, one per line. Name and patterns should be separated by whitespace.",required:!0}),a.default.createElement(l.Input,{id:"replace-patterns-checkbox",type:"checkbox",name:"replace",label:"Replace all existing patterns?",onChange:function(t){return e.setState({replacePatterns:t.target.checked})}})))}}])&&f(e.prototype,n),r&&f(e,r),i}();h(b,"propTypes",{onSuccess:n.default.func.isRequired});var v=b;exports.default=v,t.exports=exports.default},HLGC678t:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=n(e("ivGQtwpr")),l=n(e("wit2XGpX")),i=e("oBIKikY9");function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,c(e).apply(this,arguments))}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.default.Component),n=e,(r=[{key:"render",value:function(){return o.default.createElement(i.DocumentTitle,{title:"Grok patterns"},o.default.createElement(l.default,null))}}])&&s(n.prototype,r),a&&s(n,a),e}();exports.default=a,t.exports=exports.default},I8zlNHhV:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(e("ii0bleBb")),o=r(e("ivGQtwpr")),l=e("B4BR5PLd"),i=e("wMSvutaJ"),s=r(e("9rseX8iM"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(t){function r(t){var o,e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),e=this,n=f(r).call(this,t),m(d(d(o=!n||"object"!==u(n)&&"function"!=typeof n?d(e):n)),"shownListItems",[]),m(d(d(o)),"_onPatternChange",function(t){o.props.onPatternChange(t.target.value)}),m(d(d(o)),"_onPatternFilterChange",function(t){o.setState({patternFilter:t.target.value,activeListItem:-1})}),m(d(d(o)),"_onPatternFilterKeyDown",function(t){var e,n=o.shownListItems[o.state.activeListItem],r=0,a=document.getElementById("list-item-0");switch(t.keyCode){case 40:if((r=o.state.activeListItem+1)>=o.shownListItems.length)return;(e=document.getElementById("list-item-".concat(r))).parentElement.scrollTop=e.offsetTop-a.offsetTop,o.setState({activeListItem:r}),t.preventDefault();break;case 38:if((r=o.state.activeListItem-1)<0)return;(e=document.getElementById("list-item-".concat(r))).parentElement.scrollTop=e.offsetTop-a.offsetTop,o.setState({activeListItem:r}),t.preventDefault();break;case 13:n&&o._addToPattern(n),t.preventDefault()}}),m(d(d(o)),"_addToPattern",function(t){var e=o.props.pattern||"",n=o.patternInput.getInputDOMNode().selectionStart||e.length,r="".concat(e.slice(0,n),"%{").concat(t,"}").concat(e.slice(n));o.props.onPatternChange(r)}),o.state={patternFilter:"",activeListItem:-1},o}var e,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(r,o.default.Component),e=r,(n=[{key:"render",value:function(){var r=this,e=RegExp(this.state.patternFilter,"i");this.shownListItems=[];var t=this.props.patterns.filter(function(t){return e.test(t.name)}).map(function(t,e){var n=e===r.state.activeListItem;return r.shownListItems.push(t.name),o.default.createElement(i.ListGroupItem,{id:"list-item-".concat(e),header:t.name,bsStyle:n?"info":void 0,onKeyDown:r._onPatternFilterKeyDown,key:t.name},o.default.createElement("span",{className:s.default.patternDisplay},t.pattern),o.default.createElement("span",{className:s.default.addButton},o.default.createElement(i.Button,{bsSize:"xsmall",bsStyle:"primary",onClick:function(){r._addToPattern(t.name)}},"Add")))});return o.default.createElement(i.Row,{className:this.props.className},o.default.createElement(i.Col,{sm:8},o.default.createElement(l.Input,{ref:function(t){r.patternInput=t},type:"textarea",id:"pattern-input",label:"Pattern",help:"The pattern which will match the log line e.g: '%{IP:client}' or '.*?'",rows:9,onChange:this._onPatternChange,value:this.props.pattern,required:!0})),o.default.createElement(i.Col,{sm:4},o.default.createElement(l.Input,{type:"text",id:"pattern-selector",label:"Filter pattern",onChange:this._onPatternFilterChange,autoComplete:"off",formGroupClassName:s.default.filterFormGroup,onKeyDown:this._onPatternFilterKeyDown,value:this.state.patternFilter}),o.default.createElement(i.ListGroup,{bsClass:s.default.resultList},t)))}}])&&c(e.prototype,n),a&&c(e,a),r}();m(a,"propTypes",{pattern:n.default.string,patterns:n.default.array,onPatternChange:n.default.func,className:n.default.string}),m(a,"defaultProps",{pattern:"",patterns:[],onPatternChange:function(){},className:""});var h=a;exports.default=h,t.exports=exports.default},oR5lYc7u:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(e("ii0bleBb")),a=r(e("ivGQtwpr")),o=e("B4BR5PLd"),l=e("wMSvutaJ"),s=r(e("I8zlNHhV"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=function(t){function i(){var t,n,e,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=this,r=(t=f(i)).call.apply(t,[this].concat(o)),m(d(d(n=!r||"object"!==u(r)&&"function"!=typeof r?d(e):r)),"state",{id:n.props.id,name:n.props.name,pattern:n.props.pattern,sampleData:n.props.sampleData,test_result:"",test_error:void 0,error:!1,error_message:""}),m(d(d(n)),"openModal",function(){n.modal.open()}),m(d(d(n)),"_onPatternChange",function(t){n.setState({pattern:t})}),m(d(d(n)),"_onNameChange",function(t){var e=t.target.value;n.props.validPatternName(e)?n.setState({name:e,error:!1,error_message:""}):n.setState({name:e,error:!0,error_message:"Pattern with that name already exists!"})}),m(d(d(n)),"_onSampleDataChange",function(t){n.setState({sampleData:t.target.value})}),m(d(d(n)),"_getId",function(t){return void 0!==n.state.name?t+n.state.name:t}),m(d(d(n)),"_closeModal",function(){n.modal.close()}),m(d(d(n)),"_saved",function(){n._closeModal(),n.props.create&&n.setState({name:"",pattern:"",sampleData:"",test_result:""})}),m(d(d(n)),"_save",function(){var t=n.state;t.error||n.props.savePattern(t,n._saved)}),m(d(d(n)),"_testPattern",function(){""!==n.state.name&&""!==n.state.pattern?(n.setState({error:!1,error_message:""}),n.props.testPattern(n.state,function(t){n.setState({test_result:JSON.stringify(t,null,2),test_error:void 0})},function(t){n.setState({test_result:"",test_error:t})})):n.setState({error:!0,error_message:"To test the pattern a name and a pattern must be given!"})}),n}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(i,a.default.Component),e=i,(n=[{key:"render",value:function(){var t,e=this;return t=this.props.create?"Create pattern":a.default.createElement("span",null,"Edit"),a.default.createElement("span",null,a.default.createElement("button",{onClick:this.openModal,className:this.props.create?"btn btn-success":"btn btn-info btn-xs"},t),a.default.createElement(o.BootstrapModalForm,{ref:function(t){e.modal=t},title:"".concat(this.props.create?"Create":"Edit"," Grok Pattern ").concat(this.state.name),bsSize:"large",onSubmitForm:this._save,submitButtonText:"Save"},a.default.createElement("fieldset",null,a.default.createElement(o.Input,{type:"text",id:this._getId("pattern-name"),label:"Name",onChange:this._onNameChange,value:this.state.name,bsStyle:this.state.error?"error":null,help:this.state.error?this.state.error_message:"Under this name the pattern will be stored and can be used like: '%{THISNAME}' later on ",autoFocus:!0,required:!0}),a.default.createElement(s.default,{onPatternChange:this._onPatternChange,pattern:this.state.pattern,patterns:this.props.patterns}),this.state.test_error&&a.default.createElement(l.Panel,{bsStyle:"danger",header:"Grok Error"},a.default.createElement("code",{style:{display:"block",whiteSpace:"pre-wrap"}},this.state.test_error)),a.default.createElement(o.Input,{type:"textarea",id:this._getId("sampleData"),label:"Sample Data",help:"Here you can add sample data to test your pattern",onChange:this._onSampleDataChange,value:this.state.sampleData}),a.default.createElement(l.Button,{bsStyle:"info",onClick:this._testPattern},"Test with Sample Data"),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement(o.Input,{type:"textarea",id:this._getId("test_result"),readOnly:!0,rows:8,help:"Will contain the result of your test in a JSON format",label:"Test Result",value:this.state.test_result}))))}}])&&c(e.prototype,n),r&&c(e,r),i}();m(i,"propTypes",{id:n.default.string,name:n.default.string,pattern:n.default.string,patterns:n.default.array,create:n.default.bool,sampleData:n.default.string,savePattern:n.default.func.isRequired,testPattern:n.default.func.isRequired,validPatternName:n.default.func.isRequired}),m(i,"defaultProps",{id:"",name:"",pattern:"",patterns:[],create:!1,sampleData:""});var h=i;exports.default=h,t.exports=exports.default},wit2XGpX:function(t,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=c(e("ivGQtwpr")),n=c(e("PcYM+wZ7")),a=e("wMSvutaJ"),o=c(e("BpTi3BgK")),l=c(e("oR5lYc7u")),i=c(e("E8y30Nm1")),s=c(e("KJPoPjzh")),u=c(e("gh96amoG"));function c(t){return t&&t.__esModule?t:{default:t}}var f=c(e("1VnJesae")).default.getStore("GrokPatterns"),p=(0,n.default)({displayName:"GrokPatterns",getInitialState:function(){return{patterns:[]}},componentDidMount:function(){this.loadData()},componentWillUnmount:function(){this.loadPromise&&this.loadPromise.cancel()},loadData:function(){var e=this;this.loadPromise=f.loadPatterns(function(t){e.loadPromise.isCancelled()||(e.loadPromise=void 0,e.setState({patterns:t}))})},validPatternName:function(e){return!this.state.patterns.some(function(t){return t.name===e})},savePattern:function(t,e){var n=this;f.savePattern(t,function(){e(),n.loadData()})},testPattern:function(t,e,n){f.testPattern(t,e,n)},confirmedRemove:function(t){window.confirm("Really delete the grok pattern ".concat(t.name,"?\nIt will be removed from the system and unavailable for any extractor. If it is still in use by extractors those will fail to work."))&&f.deletePattern(t,this.loadData)},_headerCellFormatter:function(t){var e;switch(t.toLocaleLowerCase()){case"name":e=r.default.createElement("th",{className:"name"},t);break;case"actions":e=r.default.createElement("th",{className:"actions"},t);break;default:e=r.default.createElement("th",null,t)}return e},_patternFormatter:function(e){var t=this,n=this.state.patterns.filter(function(t){return t.name!==e.name});return r.default.createElement("tr",{key:e.id},r.default.createElement("td",null,e.name),r.default.createElement("td",null,e.pattern),r.default.createElement("td",null,r.default.createElement(u.default,{permissions:"inputs:edit"},r.default.createElement(a.Button,{style:{marginRight:5},bsStyle:"primary",bsSize:"xs",onClick:function(){return t.confirmedRemove(e)}},"Delete"),r.default.createElement(l.default,{id:e.id,name:e.name,pattern:e.pattern,testPattern:this.testPattern,patterns:n,create:!1,reload:this.loadData,savePattern:this.savePattern,validPatternName:this.validPatternName}))))},render:function(){return r.default.createElement("div",null,r.default.createElement(o.default,{title:"Grok patterns"},r.default.createElement("span",null,"This is a list of grok patterns you can use in your Graylog grok extractors. You can add your own manually or import a whole list of patterns from a so called pattern file."),null,r.default.createElement(u.default,{permissions:"inputs:edit"},r.default.createElement("span",null,r.default.createElement(i.default,{onSuccess:this.loadData}),r.default.createElement(l.default,{id:"",name:"",pattern:"",patterns:this.state.patterns,create:!0,testPattern:this.testPattern,reload:this.loadData,savePattern:this.savePattern,validPatternName:this.validPatternName})))),r.default.createElement(a.Row,{className:"content"},r.default.createElement(a.Col,{md:12},r.default.createElement(u.default,{permissions:"inputs:read"},r.default.createElement(s.default,{id:"grok-pattern-list",className:"table-striped table-hover",headers:["Name","Pattern","Actions"],headerCellFormatter:this._headerCellFormatter,sortByKey:"name",rows:this.state.patterns,dataRowFormatter:this._patternFormatter,filterLabel:"Filter patterns",filterKeys:["name"]})))))}});exports.default=p,t.exports=exports.default}}]);
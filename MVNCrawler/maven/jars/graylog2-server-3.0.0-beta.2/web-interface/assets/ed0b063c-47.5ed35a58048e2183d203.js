(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-47"],{"16lyf7Ak":function(e,exports,t){(e.exports=t("wTjlWjHz")(!1)).push([e.i,".pipeline-stage{border:1px solid #666;border-radius:4px;display:inline-block;margin-right:15px;padding:20px;text-align:center;width:120px}.pipeline-stage.idle-stage{background-color:#e3e5e5;border-color:#d0d4d4}.pipeline-stage.used-stage{background-color:#fff}.pipeline-name{max-width:300px;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;width:300px}.stream-list{max-width:150px;width:150px;word-wrap:break-word}",""])},ItlNlFoh:function(e,exports,t){var n,r=0,o=t("16lyf7Ak");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(exports.locals=o.locals),exports.use=exports.ref=function(){return r++||(n=t("HkU00dYq")(o,{hmr:!0})),exports},exports.unuse=exports.unref=function(){0<r&&!--r&&(n(),n=null)}},d3CAvxUh:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=m(t("ivGQtwpr")),n=m(t("PcYM+wZ7")),r=m(t("4KF7VOU5")),i=t("wMSvutaJ"),a=t("wkvtUUMm"),l=t("ZX4j5H1r"),s=m(t("8FtKQWAV")),u=t("oBIKikY9"),c=t("hX+ZxOpo"),f=m(t("W+sNG9T1")),d=m(t("21p8kIWv")),p=m(t("jnXsgakn"));function m(e){return e&&e.__esModule?e:{default:e}}var y=d.default.get("Pipelines"),h=y.PipelinesStore,b=y.PipelinesActions,E=d.default.get("PipelineConnections"),g=E.PipelineConnectionsStore,S=E.PipelineConnectionsActions,v=d.default.get("Streams").StreamsStore,P=(0,n.default)({displayName:"ProcessingTimelineComponent",mixins:[r.default.connect(h),r.default.connect(g)],componentDidMount:function(){var t=this;this.style.use(),b.list(),S.list(),v.listStreams().then(function(e){t.setState({streams:e})})},componentWillUnmount:function(){this.style.unuse()},style:t("ItlNlFoh"),_calculateUsedStages:function(e){return e.map(function(e){return e.stages}).reduce(function(t,e){return t.concat(e.map(function(e){return e.stage}).filter(function(e){return-1===t.indexOf(e)}))},[]).sort(s.default)},_headerCellFormatter:function(e){var t;return"Actions"===e&&(t="actions"),o.default.createElement("th",{className:t},e)},_formatConnectedStreams:function(e){return e.map(function(e){return e.title}).join(", ")},_formatStages:function(t,e){var n=[],r=e.map(function(e){return e.stage});return this.usedStages.forEach(function(e){-1===r.indexOf(e)?n.push(o.default.createElement("div",{key:"".concat(t.id,"-stage").concat(e),className:"pipeline-stage idle-stage"},"Idle")):n.push(o.default.createElement("div",{key:"".concat(t.id,"-stage").concat(e),className:"pipeline-stage used-stage"},"Stage ",e))},this),n},_pipelineFormatter:function(e){return o.default.createElement("tr",{key:e.id},o.default.createElement("td",{className:"pipeline-name"},o.default.createElement(l.Link,{to:f.default.SYSTEM.PIPELINES.PIPELINE(e.id)},e.title),o.default.createElement("br",null),e.description,o.default.createElement("br",null),o.default.createElement(c.MetricContainer,{name:"org.graylog.plugins.pipelineprocessor.ast.Pipeline.".concat(e.id,".executed")},o.default.createElement(c.CounterRate,{prefix:"Throughput:",suffix:"msg/s"}))),o.default.createElement("td",{className:"stream-list"},o.default.createElement(p.default,{pipeline:e,connections:this.state.connections,streams:this.state.streams,streamsFormatter:this._formatConnectedStreams,noConnectionsMessage:o.default.createElement("em",null,"Not connected")})),o.default.createElement("td",null,this._formatStages(e,e.stages)),o.default.createElement("td",null,o.default.createElement(i.Button,{bsStyle:"primary",bsSize:"xsmall",onClick:this._deletePipeline(e)},"Delete")," ",o.default.createElement(a.LinkContainer,{to:f.default.SYSTEM.PIPELINES.PIPELINE(e.id)},o.default.createElement(i.Button,{bsStyle:"info",bsSize:"xsmall"},"Edit"))))},_deletePipeline:function(e){return function(){confirm('Do you really want to delete pipeline "'.concat(e.title,'"? This action cannot be undone.'))&&b.delete(e.id)}},_isLoading:function(){return!this.state.pipelines||!this.state.streams||!this.state.connections},render:function(){if(this._isLoading())return o.default.createElement(u.Spinner,null);var e=o.default.createElement("div",{className:"pull-right"},o.default.createElement(a.LinkContainer,{to:f.default.SYSTEM.PIPELINES.PIPELINE("new")},o.default.createElement(i.Button,{bsStyle:"success"},"Add new pipeline")));if(0===this.state.pipelines.length)return o.default.createElement("div",null,e,o.default.createElement(i.Alert,null,"There are no pipelines configured in your system. Create one to start processing your messages."));this.usedStages=this._calculateUsedStages(this.state.pipelines);return o.default.createElement("div",null,e,o.default.createElement(u.DataTable,{id:"processing-timeline",className:"table-hover",headers:["Pipeline","Connected to Streams","Processing Timeline","Actions"],headerCellFormatter:this._headerCellFormatter,sortByKey:"title",rows:this.state.pipelines,dataRowFormatter:this._pipelineFormatter,filterLabel:"Filter pipelines",filterKeys:["title"]}))}});exports.default=P,e.exports=exports.default},jnXsgakn:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=r(t("ii0bleBb")),i=r(t("ivGQtwpr")),a=r(t("8FtKQWAV"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i.default.Component),n=t,(r=[{key:"render",value:function(){var n=this,e=this.props.connections.filter(function(e){return e.pipeline_ids&&e.pipeline_ids.includes(n.props.pipeline.id)}).filter(function(t){return n.props.streams.some(function(e){return e.id===t.stream_id})}).map(function(t){return n.props.streams.find(function(e){return e.id===t.stream_id})}).sort(function(e,t){return(0,a.default)(e.title,t.title)});return i.default.createElement("span",null,0===e.length?this.props.noConnectionsMessage:this.props.streamsFormatter(e))}}])&&l(n.prototype,r),o&&l(n,o),t}();f(d,"propTypes",{pipeline:n.default.object.isRequired,connections:n.default.array.isRequired,streams:n.default.array.isRequired,streamsFormatter:n.default.func.isRequired,noConnectionsMessage:n.default.any}),f(d,"defaultProps",{noConnectionsMessage:"Pipeline not connected to any streams"});var p=d;exports.default=p,e.exports=exports.default},oqlE5Aas:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=n(t("ivGQtwpr")),a=t("wMSvutaJ"),l=t("wkvtUUMm"),s=t("oBIKikY9"),u=n(t("jHp4XH0b")),c=n(t("d3CAvxUh")),f=n(t("W+sNG9T1")),d=n(t("mc0qlNhN"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.default.Component),n=t,(r=[{key:"render",value:function(){return i.default.createElement(s.DocumentTitle,{title:"Pipelines"},i.default.createElement("div",null,i.default.createElement(s.PageHeader,{title:"Pipelines overview"},i.default.createElement("span",null,"Pipelines let you transform and process messages coming from streams. Pipelines consist of stages where rules are evaluated and applied. Messages can go through one or more stages."),i.default.createElement("span",null,"Read more about Graylog pipelines in the ",i.default.createElement(u.default,{page:d.default.PAGES.PIPELINES,text:"documentation"}),"."),i.default.createElement("span",null,i.default.createElement(l.LinkContainer,{to:f.default.SYSTEM.PIPELINES.OVERVIEW},i.default.createElement(a.Button,{bsStyle:"info",className:"active"},"Manage pipelines"))," ",i.default.createElement(l.LinkContainer,{to:f.default.SYSTEM.PIPELINES.RULES},i.default.createElement(a.Button,{bsStyle:"info"},"Manage rules"))," ",i.default.createElement(l.LinkContainer,{to:f.default.SYSTEM.PIPELINES.SIMULATOR},i.default.createElement(a.Button,{bsStyle:"info"},"Simulator")))),i.default.createElement(a.Row,{className:"content"},i.default.createElement(a.Col,{md:12},i.default.createElement(c.default,null)))))}}])&&p(n.prototype,r),o&&p(n,o),t}();exports.default=o,e.exports=exports.default}}]);
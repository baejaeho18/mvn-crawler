(window.webpackJsonp=window.webpackJsonp||[]).push([["ed0b063c-33"],{"50zRJo86":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=a(t("ii0bleBb")),i=a(t("ivGQtwpr")),l=t("wMSvutaJ"),s=a(t("+CppQpVm")),r=a(t("cjmxJah+")),u=a(t("W+sNG9T1"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e){function o(){var e,t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return n=this,a=(e=d(o)).call.apply(e,[this].concat(l)),h(m(m(t=!a||"object"!==c(a)&&"function"!=typeof a?m(n):a)),"_onChange",function(e){t.props.onChange(e,t._goToPipeline)}),h(m(m(t)),"_goToPipeline",function(e){s.default.push(u.default.SYSTEM.PIPELINES.PIPELINE(e.id))}),h(m(m(t)),"_goBack",function(){s.default.goBack()}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,i.default.Component),t=o,(n=[{key:"render",value:function(){return i.default.createElement(l.Row,null,i.default.createElement(l.Col,{md:6},i.default.createElement("p",null,"Give a name and description to the new pipeline. You can add stages to it when you save the changes."),i.default.createElement(r.default,{create:!0,onChange:this._onChange,onCancel:this._goBack})))}}])&&p(t.prototype,n),a&&p(t,a),o}();h(o,"propTypes",{onChange:n.default.func.isRequired});var g=o;exports.default=g,e.exports=exports.default},"7Hbo70Cc":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=h(t("ii0bleBb")),a=h(t("ivGQtwpr")),i=h(t("PcYM+wZ7")),l=h(t("4KF7VOU5")),r=t("wMSvutaJ"),o=t("wkvtUUMm"),s=t("oBIKikY9"),u=h(t("J0qkuG3s")),c=h(t("50zRJo86")),p=h(t("LqNyJFiW")),d=h(t("s2hN4RJZ")),f=h(t("W+sNG9T1")),m=h(t("21p8kIWv"));function h(e){return e&&e.__esModule?e:{default:e}}var g=m.default.get("Pipelines"),v=g.PipelinesStore,b=g.PipelinesActions,y=m.default.get("Rules").RulesStore,E=m.default.get("PipelineConnections"),_=E.PipelineConnectionsStore,S=E.PipelineConnectionsActions,w=m.default.get("Streams").StreamsStore;var C=(0,i.default)({displayName:"PipelineDetailsPage",propTypes:{params:n.default.object.isRequired},mixins:[l.default.connectFilter(v,"pipeline",function(e){var t=this;return e.pipelines?e.pipelines.filter(function(e){return e.id===t.props.params.pipelineId})[0]:void 0}),l.default.connectFilter(_,"connections",function(e){var t=this;if(e.connections)return e.connections.filter(function(e){return e.pipeline_ids&&e.pipeline_ids.includes(t.props.params.pipelineId)})})],componentDidMount:function(){var t=this;this._isNewPipeline(this.props.params.pipelineId)||b.get(this.props.params.pipelineId),y.list(),S.list(),w.listStreams().then(function(e){t.setState({streams:e})})},componentWillReceiveProps:function(e){this._isNewPipeline(e.params.pipelineId)||b.get(e.params.pipelineId)},_onConnectionsChange:function(e,t){S.connectToPipeline(e),t()},_onStagesChange:function(e,t){var n=d.default.clone(this.state.pipeline);n.stages=e;var a=p.default.generatePipeline(n);n.source=a,b.update(n),"function"==typeof t&&t()},_savePipeline:function(e,t){var n=d.default.clone(e);n.source=p.default.generatePipeline(e),(n.id?b.update(n):b.save(n)).then(function(e){return t(e)})},_isNewPipeline:function(e){return"new"===e},_isLoading:function(){return!(this._isNewPipeline(this.props.params.pipelineId)||this.state.pipeline&&this.state.connections&&this.state.streams)},render:function(){if(this._isLoading())return a.default.createElement(s.Spinner,null);var e,t;e=this._isNewPipeline(this.props.params.pipelineId)?"New pipeline":a.default.createElement("span",null,"Pipeline ",a.default.createElement("em",null,this.state.pipeline.title)),t=this._isNewPipeline(this.props.params.pipelineId)?a.default.createElement(c.default,{onChange:this._savePipeline}):a.default.createElement(u.default,{pipeline:this.state.pipeline,connections:this.state.connections,streams:this.state.streams,rules:this.state.rules,onConnectionsChange:this._onConnectionsChange,onStagesChange:this._onStagesChange,onPipelineChange:this._savePipeline});var n=this._isNewPipeline(this.props.params.pipelineId)?"New pipeline":"Pipeline ".concat(this.state.pipeline.title);return a.default.createElement(s.DocumentTitle,{title:n},a.default.createElement("div",null,a.default.createElement(s.PageHeader,{title:e},a.default.createElement("span",null,"Pipelines let you transform and process messages coming from streams. Pipelines consist of stages where rules are evaluated and applied. Messages can go through one or more stages."),a.default.createElement("span",null,"After each stage is completed, you can decide if messages matching all or one of the rules continue to the next stage."),a.default.createElement("span",null,a.default.createElement(o.LinkContainer,{to:f.default.SYSTEM.PIPELINES.OVERVIEW},a.default.createElement(r.Button,{bsStyle:"info",className:"active"},"Manage pipelines"))," ",a.default.createElement(o.LinkContainer,{to:f.default.SYSTEM.PIPELINES.RULES},a.default.createElement(r.Button,{bsStyle:"info"},"Manage rules"))," ",a.default.createElement(o.LinkContainer,{to:f.default.SYSTEM.PIPELINES.SIMULATOR},a.default.createElement(r.Button,{bsStyle:"info"},"Simulator")))),a.default.createElement(r.Row,{className:"content"},a.default.createElement(r.Col,{md:12},t))))}});exports.default=C,e.exports=exports.default},"7TL5WG1w":function(e,exports,t){(e.exports=t("wTjlWjHz")(!1)).push([e.i,'.pipeline-dl{margin-bottom:0}dl.pipeline-dl>dt{text-align:left;width:140px}dl.pipeline-dl>dt:after{content:":"}dl.pipeline-dl>dd{margin-left:100px}.row-margin-top{margin-top:10px}.description-margin-top{margin-top:5px}.pipeline-no-connections-warning{margin-bottom:13px}',""])},"C6/cDBCN":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=u(t("ii0bleBb")),a=u(t("ivGQtwpr")),i=u(t("PcYM+wZ7")),l=t("wMSvutaJ"),r=t("B4BR5PLd"),o=u(t("s2hN4RJZ")),s=u(t("L8npJDrf"));function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)({displayName:"PipelineForm",propTypes:{pipeline:n.default.object,create:n.default.bool,modal:n.default.bool,save:n.default.func.isRequired,validatePipeline:n.default.func.isRequired,onCancel:n.default.func},getDefaultProps:function(){return{modal:!0,pipeline:{id:void 0,title:"",description:"",stages:[{stage:0,rules:[]}]}}},getInitialState:function(){var e=o.default.clone(this.props.pipeline);return{pipeline:{id:e.id,title:e.title,description:e.description,stages:e.stages}}},openModal:function(){this.modal.open()},_onChange:function(e){var t=o.default.clone(this.state.pipeline);t[e.target.name]=s.default.getValueFromInput(e.target),this.setState({pipeline:t})},_closeModal:function(){this.modal.close()},_saved:function(){this.props.modal&&this._closeModal(),this.props.create&&this.setState(this.getInitialState())},_save:function(e){e&&e.preventDefault(),this.props.save(this.state.pipeline,this._saved)},render:function(){var e,t=this;e=this.props.create?"Add new pipeline":"Edit pipeline details";var n=a.default.createElement("fieldset",null,a.default.createElement(r.Input,{type:"text",id:"title",name:"title",label:"Title",autoFocus:!0,required:!0,onChange:this._onChange,help:"Pipeline name.",value:this.state.pipeline.title}),a.default.createElement(r.Input,{type:"text",id:"description",name:"description",label:"Description",onChange:this._onChange,help:"Pipeline description.",value:this.state.pipeline.description}));return this.props.modal?a.default.createElement("span",null,a.default.createElement(l.Button,{onClick:this.openModal,bsStyle:"success"},e),a.default.createElement(r.BootstrapModalForm,{ref:function(e){t.modal=e},title:"".concat(this.props.create?"Add new":"Edit"," pipeline ").concat(this.state.pipeline.title),onSubmitForm:this._save,submitButtonText:"Save"},n)):a.default.createElement("form",{onSubmit:this._save},n,a.default.createElement(l.Row,null,a.default.createElement(l.Col,{md:12},a.default.createElement(l.Button,{type:"submit",bsStyle:"primary",style:{marginRight:10}},"Save"),a.default.createElement(l.Button,{type:"button",onClick:this.props.onCancel},"Cancel"))))}});exports.default=c,e.exports=exports.default},J0qkuG3s:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=d(t("ii0bleBb")),i=d(t("ivGQtwpr")),a=d(t("PcYM+wZ7")),l=t("wMSvutaJ"),r=(t("wkvtUUMm"),t("oBIKikY9")),o=d(t("TQURjBrX")),s=d(t("xQ8BRtPo")),u=d(t("cjmxJah+")),c=d(t("nreK1T+G")),p=d(t("jnXsgakn"));d(t("W+sNG9T1"));function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.default)({displayName:"Pipeline",propTypes:{pipeline:n.default.object.isRequired,connections:n.default.array.isRequired,streams:n.default.array.isRequired,onConnectionsChange:n.default.func.isRequired,onStagesChange:n.default.func.isRequired,onPipelineChange:n.default.func.isRequired},componentDidMount:function(){this.style.use()},componentWillUnmount:function(){this.style.unuse()},style:t("bzA7IatG"),_connections_warning:function(){if(0==this.props.connections.length)return i.default.createElement(l.Alert,{bsStyle:"danger",className:"pipeline-no-connections-warning"},"This pipeline is currently not connected to any streams. You have to connect a pipeline to at least one stream to make it process incoming messages. Note that this is not required if you intend to use this pipeline only for search result transformation using decorators.")},_saveStage:function(e,t){var n=this.props.pipeline.stages.slice();n.push(e),this.props.onStagesChange(n,t)},_updateStage:function(a){var i=this;return function(e,t){var n=i.props.pipeline.stages.filter(function(e){return e.stage!==a.stage});n.push(e),i.props.onStagesChange(n,t)}},_deleteStage:function(t){var n=this;return function(){if(confirm("You are about to delete stage ".concat(t.stage,", are you sure you want to proceed?"))){var e=n.props.pipeline.stages.filter(function(e){return e.stage!==t.stage});n.props.onStagesChange(e)}}},_formatConnectedStreams:function(e){var t=e.map(function(e){return'"'.concat(e.title,'"')}),n=1<e.length?[t.slice(0,-1).join(", "),t.slice(-1)].join(" and "):t[0];return i.default.createElement("span",null,"This pipeline is processing messages from the"," ",i.default.createElement(r.Pluralize,{singular:"stream",plural:"streams",value:e.length})," ",n,".")},_formatStage:function(e,t){return i.default.createElement(o.default,{key:"stage-".concat(e.stage),pipeline:this.props.pipeline,stage:e,isLastStage:e.stage===t,onUpdate:this._updateStage(e),onDelete:this._deleteStage(e)})},render:function(){var t=this,e=this.props.pipeline,n=e.stages.reduce(function(e,t){return Math.max(e,t.stage)},-1/0),a=e.stages.sort(function(e,t){return e.stage-t.stage}).map(function(e){return t._formatStage(e,n)});return i.default.createElement("div",null,this._connections_warning(),i.default.createElement(u.default,{pipeline:e,onChange:this.props.onPipelineChange}),i.default.createElement(l.Row,{className:"row-sm row-margin-top"},i.default.createElement(l.Col,{md:12},i.default.createElement("div",{className:"pull-right"},i.default.createElement(c.default,{pipeline:e,connections:this.props.connections,streams:this.props.streams,save:this.props.onConnectionsChange})),i.default.createElement("h2",null,"Pipeline connections"),i.default.createElement("p",{className:"description-margin-top"},i.default.createElement(p.default,{pipeline:e,connections:this.props.connections,streams:this.props.streams,streamsFormatter:this._formatConnectedStreams,noConnectionsMessage:"Select streams that will be processed by this pipeline."})),i.default.createElement("hr",null))),i.default.createElement(l.Row,{className:"row-sm row-margin-top"},i.default.createElement(l.Col,{md:12},i.default.createElement("div",{className:"pull-right"},i.default.createElement(s.default,{create:!0,save:this._saveStage})),i.default.createElement("h2",null,"Pipeline Stages"),i.default.createElement("p",{className:"description-margin-top"},"Stages are groups of conditions and actions which need to run in order, and provide the necessary"," ","control flow to decide whether or not to run the rest of a pipeline."))),i.default.createElement(r.EntityList,{bsNoItemsStyle:"info",noItemsText:"There are no rules on this stage.",items:a}))}});exports.default=f,e.exports=exports.default},LqNyJFiW:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n={generatePipeline:function(e){var t='pipeline "'.concat(e.title,'"\n');return e.stages.forEach(function(e){t+="stage ".concat(e.stage," match ").concat(e.match_all?"all":"either","\n"),e.rules.forEach(function(e){t+='rule "'.concat(e,'"\n')})}),t+="end"}};exports.default=n,e.exports=exports.default},TQURjBrX:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=f(t("ii0bleBb")),s=f(t("ivGQtwpr")),a=f(t("PcYM+wZ7")),i=f(t("4KF7VOU5")),u=t("wMSvutaJ"),l=t("ZX4j5H1r"),c=t("oBIKikY9"),p=t("hX+ZxOpo"),r=f(t("W+sNG9T1")),o=f(t("21p8kIWv")),d=f(t("xQ8BRtPo"));function f(e){return e&&e.__esModule?e:{default:e}}var m=o.default.get("Rules").RulesStore,h=(0,a.default)({displayName:"Stage",propTypes:{stage:n.default.object.isRequired,pipeline:n.default.object.isRequired,isLastStage:n.default.bool.isRequired,onUpdate:n.default.func.isRequired,onDelete:n.default.func.isRequired},mixins:[i.default.connect(m)],_ruleHeaderFormatter:function(e){return s.default.createElement("th",null,e)},_ruleRowFormatter:function(e,t,n){var a,i=t;return a=i?s.default.createElement(l.Link,{to:r.default.SYSTEM.PIPELINES.RULE(i.id)},i.title):(i={id:"invalid-".concat(n),description:"Rule ".concat(e.rules[n]," has been renamed or removed. This rule will be skipped.")},s.default.createElement("span",null,s.default.createElement("i",{className:"fa fa-warning text-danger"})," ",e.rules[n])),s.default.createElement("tr",{key:i.id},s.default.createElement("td",{style:{width:400}},a),s.default.createElement("td",null,i.description),s.default.createElement("td",null,s.default.createElement(p.MetricContainer,{name:"org.graylog.plugins.pipelineprocessor.ast.Rule.".concat(i.id,".").concat(this.props.pipeline.id,".").concat(e.stage,".executed")},s.default.createElement(p.CounterRate,{zeroOnMissing:!0,suffix:"msg/s"}))),s.default.createElement("td",null,s.default.createElement(p.MetricContainer,{name:"org.graylog.plugins.pipelineprocessor.ast.Rule.".concat(i.id,".").concat(this.props.pipeline.id,".").concat(e.stage,".failed")},s.default.createElement(p.CounterRate,{showTotal:!0,zeroOnMissing:!0,suffix:"errors/s"}))))},_formatRules:function(n,e){var a=this;return s.default.createElement(c.DataTable,{id:"processing-timeline",className:"table-hover",headers:["Title","Description","Throughput","Errors"],headerCellFormatter:this._ruleHeaderFormatter,rows:e,dataRowFormatter:function(e,t){return a._ruleRowFormatter(n,e,t)},noDataText:"This stage has no rules yet. Click on edit to add some.",filterLabel:"",filterKeys:[]})},render:function(){var e,n=this,t=this.props.stage,a="Contains ".concat(1===t.rules.length?"1 rule":"".concat(t.rules.length," rules")),i=s.default.createElement(p.MetricContainer,{name:"org.graylog.plugins.pipelineprocessor.ast.Pipeline.".concat(this.props.pipeline.id,".stage.").concat(t.stage,".executed")},s.default.createElement(p.CounterRate,{showTotal:!1,prefix:"Throughput: ",suffix:"msg/s"})),l=[s.default.createElement(u.Button,{key:"delete-stage",bsStyle:"primary",onClick:this.props.onDelete},"Delete"),s.default.createElement(d.default,{key:"edit-stage",stage:t,save:this.props.onUpdate})];e=this.props.isLastStage?"There are no further stages in this pipeline. Once rules in this stage are applied, the pipeline will have finished processing.":s.default.createElement("span",null,"Messages satisfying ",s.default.createElement("strong",null,t.match_all?"all rules":"at least one rule")," ","in this stage, will continue to the next stage.");var r,o=s.default.createElement("span",null,e,s.default.createElement("br",null),i);return r=this.state.rules?this._formatRules(t,this.props.stage.rules.map(function(t){return n.state.rules.filter(function(e){return e.title===t})[0]})):s.default.createElement(c.Spinner,null),s.default.createElement(c.EntityListItem,{title:"Stage ".concat(t.stage),titleSuffix:a,actions:l,description:o,contentRow:s.default.createElement(u.Col,{md:12},r)})}});exports.default=h,e.exports=exports.default},bzA7IatG:function(e,exports,t){var n,a=0,i=t("7TL5WG1w");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(exports.locals=i.locals),exports.use=exports.ref=function(){return a++||(n=t("HkU00dYq")(i,{hmr:!0})),exports},exports.unuse=exports.unref=function(){0<a&&!--a&&(n(),n=null)}},"cjmxJah+":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=a(t("ii0bleBb")),l=a(t("ivGQtwpr")),r=t("wMSvutaJ"),o=t("oBIKikY9"),s=a(t("C6/cDBCN")),u=t("hX+ZxOpo");function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,h,g,v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,l.default.Component),n=t,(a=[{key:"render",value:function(){if(this.props.create)return l.default.createElement(s.default,{create:!0,save:this.props.onChange,onCancel:this.props.onCancel,modal:!1});var e=this.props.pipeline;return l.default.createElement("div",null,l.default.createElement(r.Row,null,l.default.createElement(r.Col,{md:12},l.default.createElement("div",{className:"pull-right"},l.default.createElement(s.default,{pipeline:e,save:this.props.onChange})),l.default.createElement("h2",null,"Details"),l.default.createElement("dl",{className:"dl-horizontal pipeline-dl",style:{marginTop:10}},l.default.createElement("dt",null,"Title"),l.default.createElement("dd",null,e.title),l.default.createElement("dt",null,"Description"),l.default.createElement("dd",null,e.description),l.default.createElement("dt",null,"Created"),l.default.createElement("dd",null,l.default.createElement(o.Timestamp,{dateTime:e.created_at,relative:!0})),l.default.createElement("dt",null,"Last modified"),l.default.createElement("dd",null,l.default.createElement(o.Timestamp,{dateTime:e.modified_at,relative:!0})),l.default.createElement("dt",null,"Current throughput"),l.default.createElement("dd",null,l.default.createElement(u.MetricContainer,{name:"org.graylog.plugins.pipelineprocessor.ast.Pipeline.".concat(e.id,".executed")},l.default.createElement(u.CounterRate,{suffix:"msg/s"})))))),l.default.createElement("hr",null))}}])&&c(n.prototype,a),i&&c(n,i),t}();m=v,h="propTypes",g={pipeline:n.default.object,create:n.default.bool,onChange:n.default.func.isRequired,onCancel:n.default.func},h in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g;var b=v;exports.default=b,e.exports=exports.default},jnXsgakn:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=a(t("ii0bleBb")),l=a(t("ivGQtwpr")),r=a(t("8FtKQWAV"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,l.default.Component),n=t,(a=[{key:"render",value:function(){var n=this,e=this.props.connections.filter(function(e){return e.pipeline_ids&&e.pipeline_ids.includes(n.props.pipeline.id)}).filter(function(t){return n.props.streams.some(function(e){return e.id===t.stream_id})}).map(function(t){return n.props.streams.find(function(e){return e.id===t.stream_id})}).sort(function(e,t){return(0,r.default)(e.title,t.title)});return l.default.createElement("span",null,0===e.length?this.props.noConnectionsMessage:this.props.streamsFormatter(e))}}])&&o(n.prototype,a),i&&o(n,i),t}();p(d,"propTypes",{pipeline:n.default.object.isRequired,connections:n.default.array.isRequired,streams:n.default.array.isRequired,streamsFormatter:n.default.func.isRequired,noConnectionsMessage:n.default.any}),p(d,"defaultProps",{noConnectionsMessage:"Pipeline not connected to any streams"});var f=d;exports.default=f,e.exports=exports.default},"nreK1T+G":function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=p(t("ii0bleBb")),a=p(t("ivGQtwpr")),i=p(t("PcYM+wZ7")),l=t("wMSvutaJ"),r=t("ZX4j5H1r"),o=p(t("8FtKQWAV")),s=t("oBIKikY9"),u=p(t("FOEh8xnd")),c=p(t("W+sNG9T1"));function p(e){return e&&e.__esModule?e:{default:e}}var d=(0,i.default)({displayName:"PipelineConnectionsForm",propTypes:{pipeline:n.default.object.isRequired,connections:n.default.array.isRequired,streams:n.default.array.isRequired,save:n.default.func.isRequired},getInitialState:function(){return{connectedStreams:this._getFormattedStreams(this._getConnectedStreams(this.props.pipeline,this.props.connections,this.props.streams))}},openModal:function(){this.modal.open()},_onStreamsChange:function(e){this.setState({connectedStreams:e.sort(function(e,t){return(0,o.default)(e.label,t.label)})})},_closeModal:function(){this.modal.close()},_resetForm:function(){this.setState(this.getInitialState())},_saved:function(){this._closeModal()},_save:function(){var e=this.state.connectedStreams.map(function(e){return e.value}),t={pipeline:this.props.pipeline.id,streams:e};this.props.save(t,this._saved)},_getConnectedStreams:function(t,e,n){var a=this;return e.filter(function(e){return e.pipeline_ids&&e.pipeline_ids.includes(t.id)}).filter(function(t){return n.some(function(e){return e.id===t.stream_id})}).map(function(t){return a.props.streams.find(function(e){return e.id===t.stream_id})})},_getFormattedStreams:function(e){return e.map(function(e){return{value:e.id,label:e.title}}).sort(function(e,t){return(0,o.default)(e.label,t.label)})},_getFilteredStreams:function(e){var n=this;return e.filter(function(t){return!n.state.connectedStreams.some(function(e){return e.value.toLowerCase()===t.id.toLowerCase()})})},render:function(){var t=this,e=a.default.createElement("span",null,"Select the streams you want to connect to this pipeline, or create one in the"," ",a.default.createElement(r.Link,{to:c.default.STREAMS},"Streams page"),".");return a.default.createElement("span",null,a.default.createElement(l.Button,{onClick:this.openModal,bsStyle:"info"},a.default.createElement("span",null,"Edit connections")),a.default.createElement(u.default,{ref:function(e){t.modal=e},title:a.default.createElement("span",null,"Edit connections for ",a.default.createElement("em",null,this.props.pipeline.title)),onSubmitForm:this._save,onCancel:this._resetForm,submitButtonText:"Save"},a.default.createElement("fieldset",null,a.default.createElement(l.FormGroup,{id:"streamsConnections"},a.default.createElement(l.ControlLabel,null,"Streams"),a.default.createElement(s.SelectableList,{options:this._getFormattedStreams(this._getFilteredStreams(this.props.streams)),onChange:this._onStreamsChange,selectedOptionsType:"object",selectedOptions:this.state.connectedStreams}),a.default.createElement(l.HelpBlock,null,e)))))}});exports.default=d,e.exports=exports.default},xQ8BRtPo:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=f(t("ii0bleBb")),a=f(t("ivGQtwpr")),i=f(t("PcYM+wZ7")),l=f(t("4KF7VOU5")),r=t("wMSvutaJ"),o=t("ZX4j5H1r"),s=t("oBIKikY9"),u=t("B4BR5PLd"),c=f(t("s2hN4RJZ")),p=f(t("L8npJDrf")),d=f(t("W+sNG9T1"));function f(e){return e&&e.__esModule?e:{default:e}}var m=f(t("21p8kIWv")).default.get("Rules").RulesStore,h=(0,i.default)({displayName:"StageForm",propTypes:{stage:n.default.object,create:n.default.bool,save:n.default.func.isRequired},mixins:[l.default.connect(m)],getDefaultProps:function(){return{create:!1,stage:{stage:0,match_all:!1,rules:[]}}},getInitialState:function(){var e=c.default.clone(this.props.stage);return{stage:{stage:e.stage,match_all:e.match_all,rules:e.rules}}},openModal:function(){this.modal.open()},_onChange:function(e){var t=c.default.clone(this.state.stage);t[e.target.name]=p.default.getValueFromInput(e.target),this.setState({stage:t})},_onRulesChange:function(e){var t=c.default.clone(this.state.stage);t.rules=e,this.setState({stage:t})},_closeModal:function(){this.modal.close()},_saved:function(){this._closeModal(),this.props.create&&this.setState(this.getInitialState())},_save:function(){this.props.save(this.state.stage,this._saved)},_getFormattedOptions:function(e){return e?e.map(function(e){return{value:e.title,label:e.title}}):[]},render:function(){var e,t=this;e=this.props.create?"Add new stage":a.default.createElement("span",null,"Edit");var n=a.default.createElement("span",null,"Select the rules evaluated on this stage, or create one in the"," ",a.default.createElement(o.Link,{to:d.default.SYSTEM.PIPELINES.RULES},"Pipeline Rules page"),".");return a.default.createElement("span",null,a.default.createElement(r.Button,{onClick:this.openModal,bsStyle:this.props.create?"success":"info"},e),a.default.createElement(u.BootstrapModalForm,{ref:function(e){t.modal=e},title:"".concat(this.props.create?"Add new":"Edit"," stage ").concat(this.state.stage.stage),onSubmitForm:this._save,submitButtonText:"Save"},a.default.createElement("fieldset",null,a.default.createElement(u.Input,{type:"number",id:"stage",name:"stage",label:"Stage",autoFocus:!0,onChange:this._onChange,help:"Stage priority. The lower the number, the earlier it will execute.",value:this.state.stage.stage}),a.default.createElement(r.FormGroup,null,a.default.createElement(r.ControlLabel,null,"Continue processing on next stage when")),a.default.createElement(u.Input,{type:"radio",id:"match_all",name:"match_all",value:"true",label:"All rules on this stage match the message",onChange:this._onChange,checked:this.state.stage.match_all}),a.default.createElement(u.Input,{type:"radio",id:"match_any",name:"match_all",value:"false",label:"At least one of the rules on this stage matches the message",onChange:this._onChange,checked:!this.state.stage.match_all}),a.default.createElement(u.Input,{id:"stage-rules-select",label:"Stage rules",help:n},a.default.createElement(s.SelectableList,{options:this._getFormattedOptions(this.state.rules),isLoading:!this.state.rules,onChange:this._onRulesChange,selectedOptions:this.state.stage.rules})))))}});exports.default=h,e.exports=exports.default}}]);
Compiled from "MongoIndexSetService.java"
public class org.graylog2.indexer.indexset.MongoIndexSetService implements org.graylog2.indexer.indexset.IndexSetService {
  private static final java.lang.String COLLECTION_NAME;

  private final org.mongojack.JacksonDBCollection<org.graylog2.indexer.indexset.IndexSetConfig, org.bson.types.ObjectId> collection;

  private final org.graylog2.plugin.cluster.ClusterConfigService clusterConfigService;

  private final org.graylog2.events.ClusterEventBus clusterEventBus;

  private final org.graylog2.streams.StreamService streamService;

  public org.graylog2.indexer.indexset.MongoIndexSetService(org.graylog2.database.MongoConnection, org.graylog2.bindings.providers.MongoJackObjectMapperProvider, org.graylog2.streams.StreamService, org.graylog2.plugin.cluster.ClusterConfigService, org.graylog2.events.ClusterEventBus);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #1,  1            // InterfaceMethod org/graylog2/database/MongoConnection.getDatabase:()Lcom/mongodb/DB;
       7: ldc           #3                  // String index_sets
       9: invokevirtual #4                  // Method com/mongodb/DB.getCollection:(Ljava/lang/String;)Lcom/mongodb/DBCollection;
      12: ldc           #5                  // class org/graylog2/indexer/indexset/IndexSetConfig
      14: ldc           #6                  // class org/bson/types/ObjectId
      16: aload_2
      17: invokevirtual #7                  // Method org/graylog2/bindings/providers/MongoJackObjectMapperProvider.get:()Lcom/fasterxml/jackson/databind/ObjectMapper;
      20: invokestatic  #8                  // Method org/mongojack/JacksonDBCollection.wrap:(Lcom/mongodb/DBCollection;Ljava/lang/Class;Ljava/lang/Class;Lcom/fasterxml/jackson/databind/ObjectMapper;)Lorg/mongojack/JacksonDBCollection;
      23: aload_3
      24: aload         4
      26: aload         5
      28: invokespecial #9                  // Method "<init>":(Lorg/mongojack/JacksonDBCollection;Lorg/graylog2/streams/StreamService;Lorg/graylog2/plugin/cluster/ClusterConfigService;Lorg/graylog2/events/ClusterEventBus;)V
      31: return

  protected org.graylog2.indexer.indexset.MongoIndexSetService(org.mongojack.JacksonDBCollection<org.graylog2.indexer.indexset.IndexSetConfig, org.bson.types.ObjectId>, org.graylog2.streams.StreamService, org.graylog2.plugin.cluster.ClusterConfigService, org.graylog2.events.ClusterEventBus);
    Code:
       0: aload_0
       1: invokespecial #10                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: invokestatic  #11                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
       9: checkcast     #12                 // class org/mongojack/JacksonDBCollection
      12: putfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      15: aload_0
      16: aload_2
      17: putfield      #14                 // Field streamService:Lorg/graylog2/streams/StreamService;
      20: aload_0
      21: aload_3
      22: putfield      #15                 // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      25: aload_0
      26: aload         4
      28: invokestatic  #11                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      31: checkcast     #16                 // class org/graylog2/events/ClusterEventBus
      34: putfield      #17                 // Field clusterEventBus:Lorg/graylog2/events/ClusterEventBus;
      37: aload_0
      38: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      41: invokevirtual #18                 // Method org/mongojack/JacksonDBCollection.getDbCollection:()Lcom/mongodb/DBCollection;
      44: ldc           #19                 // String index_prefix
      46: invokestatic  #20                 // Method org/mongojack/DBSort.asc:(Ljava/lang/String;)Lorg/mongojack/DBSort$SortBuilder;
      49: aconst_null
      50: iconst_1
      51: invokevirtual #21                 // Method com/mongodb/DBCollection.createIndex:(Lcom/mongodb/DBObject;Ljava/lang/String;Z)V
      54: aload_0
      55: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      58: invokevirtual #18                 // Method org/mongojack/JacksonDBCollection.getDbCollection:()Lcom/mongodb/DBCollection;
      61: ldc           #22                 // String creation_date
      63: invokestatic  #23                 // Method org/mongojack/DBSort.desc:(Ljava/lang/String;)Lorg/mongojack/DBSort$SortBuilder;
      66: invokevirtual #24                 // Method com/mongodb/DBCollection.createIndex:(Lcom/mongodb/DBObject;)V
      69: return

  public java.util.Optional<org.graylog2.indexer.indexset.IndexSetConfig> get(java.lang.String);
    Code:
       0: aload_0
       1: new           #6                  // class org/bson/types/ObjectId
       4: dup
       5: aload_1
       6: invokespecial #25                 // Method org/bson/types/ObjectId."<init>":(Ljava/lang/String;)V
       9: invokevirtual #26                 // Method get:(Lorg/bson/types/ObjectId;)Ljava/util/Optional;
      12: areturn

  public java.util.Optional<org.graylog2.indexer.indexset.IndexSetConfig> get(org.bson.types.ObjectId);
    Code:
       0: ldc           #27                 // String _id
       2: aload_1
       3: invokestatic  #28                 // Method org/mongojack/DBQuery.is:(Ljava/lang/String;Ljava/lang/Object;)Lorg/mongojack/DBQuery$Query;
       6: astore_2
       7: aload_0
       8: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      11: aload_2
      12: invokevirtual #29                 // Method org/mongojack/JacksonDBCollection.findOne:(Lorg/mongojack/DBQuery$Query;)Ljava/lang/Object;
      15: checkcast     #5                  // class org/graylog2/indexer/indexset/IndexSetConfig
      18: astore_3
      19: aload_3
      20: invokestatic  #30                 // Method java/util/Optional.ofNullable:(Ljava/lang/Object;)Ljava/util/Optional;
      23: areturn

  public org.graylog2.indexer.indexset.IndexSetConfig getDefault();
    Code:
       0: aload_0
       1: getfield      #15                 // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       4: ldc           #31                 // class org/graylog2/indexer/indexset/DefaultIndexSetConfig
       6: invokeinterface #32,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: checkcast     #31                 // class org/graylog2/indexer/indexset/DefaultIndexSetConfig
      14: astore_1
      15: aload_1
      16: ifnull        23
      19: iconst_1
      20: goto          24
      23: iconst_0
      24: ldc           #33                 // String No default index set configured. This is a bug!
      26: invokestatic  #34                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      29: aload_1
      30: invokevirtual #35                 // Method org/graylog2/indexer/indexset/DefaultIndexSetConfig.defaultIndexSetId:()Ljava/lang/String;
      33: astore_2
      34: aload_0
      35: aload_2
      36: invokevirtual #36                 // Method get:(Ljava/lang/String;)Ljava/util/Optional;
      39: aload_2
      40: invokedynamic #37,  0             // InvokeDynamic #0:get:(Ljava/lang/String;)Ljava/util/function/Supplier;
      45: invokevirtual #38                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      48: checkcast     #5                  // class org/graylog2/indexer/indexset/IndexSetConfig
      51: areturn

  public java.util.Optional<org.graylog2.indexer.indexset.IndexSetConfig> findOne(org.mongojack.DBQuery$Query);
    Code:
       0: aload_0
       1: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
       4: aload_1
       5: invokevirtual #29                 // Method org/mongojack/JacksonDBCollection.findOne:(Lorg/mongojack/DBQuery$Query;)Ljava/lang/Object;
       8: checkcast     #5                  // class org/graylog2/indexer/indexset/IndexSetConfig
      11: invokestatic  #30                 // Method java/util/Optional.ofNullable:(Ljava/lang/Object;)Ljava/util/Optional;
      14: areturn

  public java.util.List<org.graylog2.indexer.indexset.IndexSetConfig> findAll();
    Code:
       0: aload_0
       1: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
       4: invokevirtual #39                 // Method org/mongojack/JacksonDBCollection.find:()Lorg/mongojack/DBCursor;
       7: ldc           #40                 // String title
       9: invokestatic  #20                 // Method org/mongojack/DBSort.asc:(Ljava/lang/String;)Lorg/mongojack/DBSort$SortBuilder;
      12: invokevirtual #41                 // Method org/mongojack/DBCursor.sort:(Lcom/mongodb/DBObject;)Lorg/mongojack/DBCursor;
      15: invokestatic  #42                 // Method com/google/common/collect/ImmutableList.copyOf:(Ljava/util/Iterator;)Lcom/google/common/collect/ImmutableList;
      18: areturn

  public java.util.List<org.graylog2.indexer.indexset.IndexSetConfig> findPaginated(java.util.Set<java.lang.String>, int, int);
    Code:
       0: aload_1
       1: invokeinterface #43,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
       6: invokedynamic #44,  0             // InvokeDynamic #1:apply:()Ljava/util/function/Function;
      11: invokeinterface #45,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      16: invokestatic  #46                 // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
      19: invokeinterface #47,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      24: checkcast     #48                 // class java/util/List
      27: astore        4
      29: aload         4
      31: iconst_0
      32: anewarray     #49                 // class org/mongojack/DBQuery$Query
      35: invokeinterface #50,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
      40: checkcast     #51                 // class "[Lorg/mongojack/DBQuery$Query;"
      43: invokestatic  #52                 // Method org/mongojack/DBQuery.or:([Lorg/mongojack/DBQuery$Query;)Lorg/mongojack/DBQuery$Query;
      46: astore        5
      48: aload_0
      49: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      52: aload         5
      54: invokevirtual #53                 // Method org/mongojack/JacksonDBCollection.find:(Lorg/mongojack/DBQuery$Query;)Lorg/mongojack/DBCursor;
      57: ldc           #40                 // String title
      59: invokestatic  #20                 // Method org/mongojack/DBSort.asc:(Ljava/lang/String;)Lorg/mongojack/DBSort$SortBuilder;
      62: invokevirtual #41                 // Method org/mongojack/DBCursor.sort:(Lcom/mongodb/DBObject;)Lorg/mongojack/DBCursor;
      65: iload_3
      66: invokevirtual #54                 // Method org/mongojack/DBCursor.skip:(I)Lorg/mongojack/DBCursor;
      69: iload_2
      70: invokevirtual #55                 // Method org/mongojack/DBCursor.limit:(I)Lorg/mongojack/DBCursor;
      73: invokevirtual #56                 // Method org/mongojack/DBCursor.toArray:()Ljava/util/List;
      76: invokestatic  #57                 // Method com/google/common/collect/ImmutableList.copyOf:(Ljava/util/Collection;)Lcom/google/common/collect/ImmutableList;
      79: areturn

  public org.graylog2.indexer.indexset.IndexSetConfig save(org.graylog2.indexer.indexset.IndexSetConfig);
    Code:
       0: aload_0
       1: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
       4: aload_1
       5: invokevirtual #58                 // Method org/mongojack/JacksonDBCollection.save:(Ljava/lang/Object;)Lorg/mongojack/WriteResult;
       8: astore_2
       9: aload_2
      10: invokevirtual #59                 // Method org/mongojack/WriteResult.getSavedObject:()Ljava/lang/Object;
      13: checkcast     #5                  // class org/graylog2/indexer/indexset/IndexSetConfig
      16: astore_3
      17: aload_3
      18: invokestatic  #60                 // Method org/graylog2/indexer/indexset/events/IndexSetCreatedEvent.create:(Lorg/graylog2/indexer/indexset/IndexSetConfig;)Lorg/graylog2/indexer/indexset/events/IndexSetCreatedEvent;
      21: astore        4
      23: aload_0
      24: getfield      #17                 // Field clusterEventBus:Lorg/graylog2/events/ClusterEventBus;
      27: aload         4
      29: invokevirtual #61                 // Method org/graylog2/events/ClusterEventBus.post:(Ljava/lang/Object;)V
      32: aload_3
      33: areturn

  public int delete(java.lang.String);
    Code:
       0: aload_0
       1: new           #6                  // class org/bson/types/ObjectId
       4: dup
       5: aload_1
       6: invokespecial #25                 // Method org/bson/types/ObjectId."<init>":(Ljava/lang/String;)V
       9: invokevirtual #62                 // Method delete:(Lorg/bson/types/ObjectId;)I
      12: ireturn

  public int delete(org.bson.types.ObjectId);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #63                 // Method isDeletable:(Lorg/bson/types/ObjectId;)Z
       5: ifne          10
       8: iconst_0
       9: ireturn
      10: ldc           #27                 // String _id
      12: aload_1
      13: invokestatic  #28                 // Method org/mongojack/DBQuery.is:(Ljava/lang/String;Ljava/lang/Object;)Lorg/mongojack/DBQuery$Query;
      16: astore_2
      17: aload_0
      18: getfield      #13                 // Field collection:Lorg/mongojack/JacksonDBCollection;
      21: aload_2
      22: invokevirtual #64                 // Method org/mongojack/JacksonDBCollection.remove:(Lorg/mongojack/DBQuery$Query;)Lorg/mongojack/WriteResult;
      25: astore_3
      26: aload_3
      27: invokevirtual #65                 // Method org/mongojack/WriteResult.getN:()I
      30: istore        4
      32: iload         4
      34: ifle          55
      37: aload_1
      38: invokevirtual #66                 // Method org/bson/types/ObjectId.toHexString:()Ljava/lang/String;
      41: invokestatic  #67                 // Method org/graylog2/indexer/indexset/events/IndexSetDeletedEvent.create:(Ljava/lang/String;)Lorg/graylog2/indexer/indexset/events/IndexSetDeletedEvent;
      44: astore        5
      46: aload_0
      47: getfield      #17                 // Field clusterEventBus:Lorg/graylog2/events/ClusterEventBus;
      50: aload         5
      52: invokevirtual #61                 // Method org/graylog2/events/ClusterEventBus.post:(Ljava/lang/Object;)V
      55: iload         4
      57: ireturn

  private boolean isDeletable(org.bson.types.ObjectId);
    Code:
       0: aload_0
       1: getfield      #14                 // Field streamService:Lorg/graylog2/streams/StreamService;
       4: aload_1
       5: invokevirtual #66                 // Method org/bson/types/ObjectId.toHexString:()Ljava/lang/String;
       8: invokeinterface #68,  2           // InterfaceMethod org/graylog2/streams/StreamService.loadAllWithIndexSet:(Ljava/lang/String;)Ljava/util/List;
      13: invokeinterface #69,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      18: ireturn

  private static org.mongojack.DBQuery$Query lambda$findPaginated$1(java.lang.String);
    Code:
       0: ldc           #27                 // String _id
       2: aload_0
       3: invokestatic  #28                 // Method org/mongojack/DBQuery.is:(Ljava/lang/String;Ljava/lang/Object;)Lorg/mongojack/DBQuery$Query;
       6: areturn

  private static java.lang.IllegalStateException lambda$getDefault$0(java.lang.String);
    Code:
       0: new           #70                 // class java/lang/IllegalStateException
       3: dup
       4: new           #71                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #72                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #73                 // String Couldn\'t find default index set <
      13: invokevirtual #74                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_0
      17: invokevirtual #74                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      20: ldc           #75                 // String >. This is a bug!
      22: invokevirtual #74                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: invokevirtual #76                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      28: invokespecial #77                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      31: areturn
}

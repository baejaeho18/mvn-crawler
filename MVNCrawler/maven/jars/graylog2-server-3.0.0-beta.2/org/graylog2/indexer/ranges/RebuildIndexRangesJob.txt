Compiled from "RebuildIndexRangesJob.java"
public class org.graylog2.indexer.ranges.RebuildIndexRangesJob extends org.graylog2.system.jobs.SystemJob {
  private static final org.slf4j.Logger LOG;

  private static final int MAX_CONCURRENCY;

  private volatile boolean cancelRequested;

  private volatile int indicesToCalculate;

  private final java.util.concurrent.atomic.AtomicInteger indicesCalculated;

  protected final java.util.Set<org.graylog2.indexer.IndexSet> indexSets;

  private final org.graylog2.shared.system.activities.ActivityWriter activityWriter;

  protected final org.graylog2.indexer.ranges.IndexRangeService indexRangeService;

  public org.graylog2.indexer.ranges.RebuildIndexRangesJob(java.util.Set<org.graylog2.indexer.IndexSet>, org.graylog2.shared.system.activities.ActivityWriter, org.graylog2.indexer.ranges.IndexRangeService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/system/jobs/SystemJob."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field cancelRequested:Z
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field indicesToCalculate:I
      14: aload_0
      15: new           #4                  // class java/util/concurrent/atomic/AtomicInteger
      18: dup
      19: iconst_0
      20: invokespecial #5                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":(I)V
      23: putfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
      26: aload_0
      27: aload_1
      28: putfield      #7                  // Field indexSets:Ljava/util/Set;
      31: aload_0
      32: aload_2
      33: putfield      #8                  // Field activityWriter:Lorg/graylog2/shared/system/activities/ActivityWriter;
      36: aload_0
      37: aload_3
      38: putfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
      41: return

  public void requestCancel();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #2                  // Field cancelRequested:Z
       5: return

  public int getProgress();
    Code:
       0: aload_0
       1: getfield      #3                  // Field indicesToCalculate:I
       4: ifgt          9
       7: iconst_0
       8: ireturn
       9: aload_0
      10: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
      13: invokevirtual #10                 // Method java/util/concurrent/atomic/AtomicInteger.floatValue:()F
      16: aload_0
      17: getfield      #3                  // Field indicesToCalculate:I
      20: i2f
      21: fdiv
      22: ldc           #11                 // float 100.0f
      24: fmul
      25: f2d
      26: invokestatic  #12                 // Method java/lang/Math.floor:(D)D
      29: d2i
      30: ireturn

  public java.lang.String getDescription();
    Code:
       0: ldc           #13                 // String Rebuilds index range information.
       2: areturn

  public void execute();
    Code:
       0: aload_0
       1: ldc           #14                 // String Recalculating index ranges.
       3: invokevirtual #15                 // Method info:(Ljava/lang/String;)V
       6: invokestatic  #16                 // Method com/google/common/collect/MultimapBuilder.hashKeys:()Lcom/google/common/collect/MultimapBuilder$MultimapBuilderWithKeys;
       9: invokevirtual #17                 // Method com/google/common/collect/MultimapBuilder$MultimapBuilderWithKeys.arrayListValues:()Lcom/google/common/collect/MultimapBuilder$ListMultimapBuilder;
      12: invokevirtual #18                 // Method com/google/common/collect/MultimapBuilder$ListMultimapBuilder.build:()Lcom/google/common/collect/ListMultimap;
      15: astore_1
      16: aload_0
      17: getfield      #7                  // Field indexSets:Ljava/util/Set;
      20: invokeinterface #19,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      25: astore_2
      26: aload_2
      27: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      32: ifeq          98
      35: aload_2
      36: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      41: checkcast     #22                 // class org/graylog2/indexer/IndexSet
      44: astore_3
      45: aload_3
      46: invokeinterface #23,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getManagedIndices:()[Ljava/lang/String;
      51: astore        4
      53: aload         4
      55: astore        5
      57: aload         5
      59: arraylength
      60: istore        6
      62: iconst_0
      63: istore        7
      65: iload         7
      67: iload         6
      69: if_icmpge     95
      72: aload         5
      74: iload         7
      76: aaload
      77: astore        8
      79: aload_1
      80: aload_3
      81: aload         8
      83: invokeinterface #24,  3           // InterfaceMethod com/google/common/collect/ListMultimap.put:(Ljava/lang/Object;Ljava/lang/Object;)Z
      88: pop
      89: iinc          7, 1
      92: goto          65
      95: goto          26
      98: aload_1
      99: invokeinterface #25,  1           // InterfaceMethod com/google/common/collect/ListMultimap.size:()I
     104: ifne          114
     107: aload_0
     108: ldc           #26                 // String No indices, nothing to calculate.
     110: invokevirtual #15                 // Method info:(Ljava/lang/String;)V
     113: return
     114: aload_0
     115: aload_1
     116: invokeinterface #27,  1           // InterfaceMethod com/google/common/collect/ListMultimap.values:()Ljava/util/Collection;
     121: invokeinterface #28,  1           // InterfaceMethod java/util/Collection.size:()I
     126: putfield      #3                  // Field indicesToCalculate:I
     129: invokestatic  #29                 // Method com/google/common/base/Stopwatch.createStarted:()Lcom/google/common/base/Stopwatch;
     132: astore_2
     133: aload_1
     134: invokeinterface #30,  1           // InterfaceMethod com/google/common/collect/ListMultimap.keySet:()Ljava/util/Set;
     139: invokeinterface #19,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     144: astore_3
     145: aload_3
     146: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     151: ifeq          567
     154: aload_3
     155: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     160: checkcast     #22                 // class org/graylog2/indexer/IndexSet
     163: astore        4
     165: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     168: ldc           #32                 // String Recalculating index ranges for index set {} ({}): {} indices affected.
     170: iconst_3
     171: anewarray     #33                 // class java/lang/Object
     174: dup
     175: iconst_0
     176: aload         4
     178: invokeinterface #34,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getConfig:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
     183: invokevirtual #35                 // Method org/graylog2/indexer/indexset/IndexSetConfig.title:()Ljava/lang/String;
     186: aastore
     187: dup
     188: iconst_1
     189: aload         4
     191: invokeinterface #36,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getIndexWildcard:()Ljava/lang/String;
     196: aastore
     197: dup
     198: iconst_2
     199: aload_1
     200: aload         4
     202: invokeinterface #37,  2           // InterfaceMethod com/google/common/collect/ListMultimap.get:(Ljava/lang/Object;)Ljava/util/List;
     207: invokeinterface #38,  1           // InterfaceMethod java/util/List.size:()I
     212: invokestatic  #39                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     215: aastore
     216: invokeinterface #40,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     221: aload_1
     222: aload         4
     224: invokeinterface #37,  2           // InterfaceMethod com/google/common/collect/ListMultimap.get:(Ljava/lang/Object;)Ljava/util/List;
     229: invokeinterface #41,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     234: astore        5
     236: aload         5
     238: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     243: ifeq          564
     246: aload         5
     248: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     253: checkcast     #42                 // class java/lang/String
     256: astore        6
     258: aload         6
     260: aload         4
     262: invokeinterface #43,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getActiveWriteIndex:()Ljava/lang/String;
     267: invokevirtual #44                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     270: ifeq          405
     273: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     276: ldc           #45                 // String {} is current write target, do not calculate index range for it
     278: aload         6
     280: invokeinterface #46,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     285: aload_0
     286: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     289: aload         6
     291: invokeinterface #47,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.createUnknownRange:(Ljava/lang/String;)Lorg/graylog2/indexer/ranges/IndexRange;
     296: astore        7
     298: aload_0
     299: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     302: aload         6
     304: invokeinterface #48,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.get:(Ljava/lang/String;)Lorg/graylog2/indexer/ranges/IndexRange;
     309: astore        8
     311: aload         8
     313: invokeinterface #49,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRange.begin:()Lorg/joda/time/DateTime;
     318: invokevirtual #50                 // Method org/joda/time/DateTime.getMillis:()J
     321: lconst_0
     322: lcmp
     323: ifne          341
     326: aload         8
     328: invokeinterface #51,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRange.end:()Lorg/joda/time/DateTime;
     333: invokevirtual #50                 // Method org/joda/time/DateTime.getMillis:()J
     336: lconst_0
     337: lcmp
     338: ifeq          365
     341: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     344: ldc           #52                 // String Invalid date ranges for write index {}, resetting it.
     346: aload         6
     348: invokeinterface #53,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     353: aload_0
     354: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     357: aload         7
     359: invokeinterface #54,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.save:(Lorg/graylog2/indexer/ranges/IndexRange;)Lorg/mongojack/WriteResult;
     364: pop
     365: goto          394
     368: astore        8
     370: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     373: ldc           #56                 // String No index range found for write index {}, recreating it.
     375: aload         6
     377: invokeinterface #53,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     382: aload_0
     383: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     386: aload         7
     388: invokeinterface #54,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.save:(Lorg/graylog2/indexer/ranges/IndexRange;)Lorg/mongojack/WriteResult;
     393: pop
     394: aload_0
     395: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
     398: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     401: pop
     402: goto          236
     405: goto          431
     408: astore        7
     410: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     413: ldc           #59                 // String Multiple write alias targets found, this is a bug.
     415: invokeinterface #60,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     420: aload_0
     421: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
     424: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     427: pop
     428: goto          236
     431: aload_0
     432: getfield      #2                  // Field cancelRequested:Z
     435: ifeq          450
     438: aload_0
     439: ldc           #61                 // String Stop requested. Not calculating next index range, not updating ranges.
     441: invokevirtual #15                 // Method info:(Ljava/lang/String;)V
     444: aload_2
     445: invokevirtual #62                 // Method com/google/common/base/Stopwatch.stop:()Lcom/google/common/base/Stopwatch;
     448: pop
     449: return
     450: aload_0
     451: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     454: aload         6
     456: invokeinterface #63,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.calculateRange:(Ljava/lang/String;)Lorg/graylog2/indexer/ranges/IndexRange;
     461: astore        7
     463: aload_0
     464: getfield      #9                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     467: aload         7
     469: invokeinterface #54,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.save:(Lorg/graylog2/indexer/ranges/IndexRange;)Lorg/mongojack/WriteResult;
     474: pop
     475: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     478: ldc           #64                 // String Created ranges for index {}: {}
     480: aload         6
     482: aload         7
     484: invokeinterface #65,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     489: aload_0
     490: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
     493: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     496: pop
     497: goto          561
     500: astore        7
     502: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     505: new           #67                 // class java/lang/StringBuilder
     508: dup
     509: invokespecial #68                 // Method java/lang/StringBuilder."<init>":()V
     512: ldc           #69                 // String Could not calculate range of index [
     514: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     517: aload         6
     519: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     522: ldc           #71                 // String ]. Skipping.
     524: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     527: invokevirtual #72                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     530: aload         7
     532: invokeinterface #73,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Throwable;)V
     537: aload_0
     538: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
     541: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     544: pop
     545: goto          561
     548: astore        9
     550: aload_0
     551: getfield      #6                  // Field indicesCalculated:Ljava/util/concurrent/atomic/AtomicInteger;
     554: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     557: pop
     558: aload         9
     560: athrow
     561: goto          236
     564: goto          145
     567: aload_0
     568: new           #67                 // class java/lang/StringBuilder
     571: dup
     572: invokespecial #68                 // Method java/lang/StringBuilder."<init>":()V
     575: ldc           #74                 // String Done calculating index ranges for
     577: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     580: aload_0
     581: getfield      #3                  // Field indicesToCalculate:I
     584: invokevirtual #75                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     587: ldc           #76                 // String  indices. Took
     589: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     592: aload_2
     593: invokevirtual #62                 // Method com/google/common/base/Stopwatch.stop:()Lcom/google/common/base/Stopwatch;
     596: getstatic     #77                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     599: invokevirtual #78                 // Method com/google/common/base/Stopwatch.elapsed:(Ljava/util/concurrent/TimeUnit;)J
     602: invokevirtual #79                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     605: ldc           #80                 // String ms.
     607: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     610: invokevirtual #72                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     613: invokevirtual #15                 // Method info:(Ljava/lang/String;)V
     616: return
    Exception table:
       from    to  target type
         298   365   368   Class org/graylog2/database/NotFoundException
         258   402   408   Class org/graylog2/indexer/indices/TooManyAliasesException
         450   489   500   Class java/lang/Exception
         450   489   548   any
         500   537   548   any
         548   550   548   any

  protected void info(java.lang.String);
    Code:
       0: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
       3: aload_1
       4: invokeinterface #81,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
       9: aload_0
      10: getfield      #8                  // Field activityWriter:Lorg/graylog2/shared/system/activities/ActivityWriter;
      13: new           #82                 // class org/graylog2/shared/system/activities/Activity
      16: dup
      17: aload_1
      18: ldc           #83                 // class org/graylog2/indexer/ranges/RebuildIndexRangesJob
      20: invokespecial #84                 // Method org/graylog2/shared/system/activities/Activity."<init>":(Ljava/lang/String;Ljava/lang/Class;)V
      23: invokeinterface #85,  2           // InterfaceMethod org/graylog2/shared/system/activities/ActivityWriter.write:(Lorg/graylog2/shared/system/activities/Activity;)V
      28: return

  public boolean providesProgress();
    Code:
       0: iconst_1
       1: ireturn

  public boolean isCancelable();
    Code:
       0: iconst_1
       1: ireturn

  public int maxConcurrency();
    Code:
       0: iconst_1
       1: ireturn

  public java.lang.String getClassName();
    Code:
       0: aload_0
       1: invokevirtual #86                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       4: invokevirtual #87                 // Method java/lang/Class.getCanonicalName:()Ljava/lang/String;
       7: areturn

  static {};
    Code:
       0: ldc           #83                 // class org/graylog2/indexer/ranges/RebuildIndexRangesJob
       2: invokestatic  #88                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

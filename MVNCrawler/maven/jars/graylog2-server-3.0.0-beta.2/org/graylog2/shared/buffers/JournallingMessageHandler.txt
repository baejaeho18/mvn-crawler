Compiled from "JournallingMessageHandler.java"
public class org.graylog2.shared.buffers.JournallingMessageHandler implements com.lmax.disruptor.EventHandler<org.graylog2.shared.buffers.RawMessageEvent> {
  private static final org.slf4j.Logger log;

  private static final java.util.Set<org.graylog2.shared.journal.Journal$Entry> NULL_SINGLETON;

  private static final com.github.rholder.retry.Retryer<java.lang.Void> JOURNAL_WRITE_RETRYER;

  private final java.util.List<org.graylog2.shared.buffers.RawMessageEvent> batch;

  private final com.codahale.metrics.Counter byteCounter;

  private final org.graylog2.shared.journal.Journal journal;

  private final java.util.concurrent.Semaphore journalFilled;

  public org.graylog2.shared.buffers.JournallingMessageHandler(com.codahale.metrics.MetricRegistry, org.graylog2.shared.journal.Journal, java.util.concurrent.Semaphore);
    Code:
       0: aload_0
       1: invokespecial #5                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #6                  // Method com/google/common/collect/Lists.newArrayList:()Ljava/util/ArrayList;
       8: putfield      #7                  // Field batch:Ljava/util/List;
      11: aload_0
      12: aload_2
      13: putfield      #1                  // Field journal:Lorg/graylog2/shared/journal/Journal;
      16: aload_0
      17: aload_3
      18: putfield      #8                  // Field journalFilled:Ljava/util/concurrent/Semaphore;
      21: aload_0
      22: aload_1
      23: ldc           #9                  // class org/graylog2/shared/buffers/JournallingMessageHandler
      25: iconst_1
      26: anewarray     #10                 // class java/lang/String
      29: dup
      30: iconst_0
      31: ldc           #11                 // String written_bytes
      33: aastore
      34: invokestatic  #12                 // Method com/codahale/metrics/MetricRegistry.name:(Ljava/lang/Class;[Ljava/lang/String;)Ljava/lang/String;
      37: invokevirtual #13                 // Method com/codahale/metrics/MetricRegistry.counter:(Ljava/lang/String;)Lcom/codahale/metrics/Counter;
      40: putfield      #2                  // Field byteCounter:Lcom/codahale/metrics/Counter;
      43: return

  public void onEvent(org.graylog2.shared.buffers.RawMessageEvent, long, boolean) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #7                  // Field batch:Ljava/util/List;
       4: aload_1
       5: invokeinterface #14,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      10: pop
      11: iload         4
      13: ifeq          127
      16: getstatic     #4                  // Field log:Lorg/slf4j/Logger;
      19: ldc           #15                 // String End of batch, journalling {} messages
      21: aload_0
      22: getfield      #7                  // Field batch:Ljava/util/List;
      25: invokeinterface #16,  1           // InterfaceMethod java/util/List.size:()I
      30: invokestatic  #17                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      33: invokeinterface #18,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      38: new           #19                 // class org/graylog2/shared/buffers/JournallingMessageHandler$Converter
      41: dup
      42: aload_0
      43: aconst_null
      44: invokespecial #20                 // Method org/graylog2/shared/buffers/JournallingMessageHandler$Converter."<init>":(Lorg/graylog2/shared/buffers/JournallingMessageHandler;Lorg/graylog2/shared/buffers/JournallingMessageHandler$1;)V
      47: astore        5
      49: aload_0
      50: getfield      #7                  // Field batch:Ljava/util/List;
      53: aload         5
      55: invokestatic  #21                 // Method com/google/common/collect/Lists.transform:(Ljava/util/List;Lcom/google/common/base/Function;)Ljava/util/List;
      58: invokestatic  #22                 // Method com/google/common/collect/Lists.newArrayList:(Ljava/lang/Iterable;)Ljava/util/ArrayList;
      61: astore        6
      63: aload         6
      65: getstatic     #23                 // Field NULL_SINGLETON:Ljava/util/Set;
      68: invokeinterface #24,  2           // InterfaceMethod java/util/List.removeAll:(Ljava/util/Collection;)Z
      73: pop
      74: aload_0
      75: getfield      #7                  // Field batch:Ljava/util/List;
      78: invokeinterface #25,  1           // InterfaceMethod java/util/List.clear:()V
      83: aload_0
      84: aload         5
      86: aload         6
      88: invokespecial #3                  // Method writeToJournal:(Lorg/graylog2/shared/buffers/JournallingMessageHandler$Converter;Ljava/util/List;)V
      91: goto          127
      94: astore        7
      96: getstatic     #4                  // Field log:Lorg/slf4j/Logger;
      99: ldc           #27                 // String Unable to write to journal - retrying
     101: aload         7
     103: invokeinterface #28,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     108: getstatic     #29                 // Field JOURNAL_WRITE_RETRYER:Lcom/github/rholder/retry/Retryer;
     111: new           #30                 // class org/graylog2/shared/buffers/JournallingMessageHandler$2
     114: dup
     115: aload_0
     116: aload         5
     118: aload         6
     120: invokespecial #31                 // Method org/graylog2/shared/buffers/JournallingMessageHandler$2."<init>":(Lorg/graylog2/shared/buffers/JournallingMessageHandler;Lorg/graylog2/shared/buffers/JournallingMessageHandler$Converter;Ljava/util/List;)V
     123: invokevirtual #32                 // Method com/github/rholder/retry/Retryer.call:(Ljava/util/concurrent/Callable;)Ljava/lang/Object;
     126: pop
     127: return
    Exception table:
       from    to  target type
          83    91    94   Class java/lang/Exception

  private void writeToJournal(org.graylog2.shared.buffers.JournallingMessageHandler$Converter, java.util.List<org.graylog2.shared.journal.Journal$Entry>);
    Code:
       0: aload_0
       1: getfield      #1                  // Field journal:Lorg/graylog2/shared/journal/Journal;
       4: aload_2
       5: invokeinterface #33,  2           // InterfaceMethod org/graylog2/shared/journal/Journal.write:(Ljava/util/List;)J
      10: lstore_3
      11: getstatic     #4                  // Field log:Lorg/slf4j/Logger;
      14: ldc           #34                 // String Processed batch, wrote {} bytes, last journal offset: {}, signalling reader.
      16: aload_1
      17: invokevirtual #35                 // Method org/graylog2/shared/buffers/JournallingMessageHandler$Converter.getBytesWritten:()J
      20: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      23: lload_3
      24: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      27: invokeinterface #37,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      32: aload_0
      33: getfield      #8                  // Field journalFilled:Ljava/util/concurrent/Semaphore;
      36: invokevirtual #38                 // Method java/util/concurrent/Semaphore.release:()V
      39: return

  public void onEvent(java.lang.Object, long, boolean) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #39                 // class org/graylog2/shared/buffers/RawMessageEvent
       5: lload_2
       6: iload         4
       8: invokevirtual #40                 // Method onEvent:(Lorg/graylog2/shared/buffers/RawMessageEvent;JZ)V
      11: return

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #4                  // Field log:Lorg/slf4j/Logger;
       3: areturn

  static void access$200(org.graylog2.shared.buffers.JournallingMessageHandler, org.graylog2.shared.buffers.JournallingMessageHandler$Converter, java.util.List);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #3                  // Method writeToJournal:(Lorg/graylog2/shared/buffers/JournallingMessageHandler$Converter;Ljava/util/List;)V
       6: return

  static com.codahale.metrics.Counter access$300(org.graylog2.shared.buffers.JournallingMessageHandler);
    Code:
       0: aload_0
       1: getfield      #2                  // Field byteCounter:Lcom/codahale/metrics/Counter;
       4: areturn

  static org.graylog2.shared.journal.Journal access$400(org.graylog2.shared.buffers.JournallingMessageHandler);
    Code:
       0: aload_0
       1: getfield      #1                  // Field journal:Lorg/graylog2/shared/journal/Journal;
       4: areturn

  static {};
    Code:
       0: ldc           #9                  // class org/graylog2/shared/buffers/JournallingMessageHandler
       2: invokestatic  #41                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #4                  // Field log:Lorg/slf4j/Logger;
       8: aconst_null
       9: invokestatic  #42                 // Method java/util/Collections.singleton:(Ljava/lang/Object;)Ljava/util/Set;
      12: putstatic     #23                 // Field NULL_SINGLETON:Ljava/util/Set;
      15: invokestatic  #43                 // Method com/github/rholder/retry/RetryerBuilder.newBuilder:()Lcom/github/rholder/retry/RetryerBuilder;
      18: new           #44                 // class org/graylog2/shared/buffers/JournallingMessageHandler$1
      21: dup
      22: invokespecial #45                 // Method org/graylog2/shared/buffers/JournallingMessageHandler$1."<init>":()V
      25: invokevirtual #46                 // Method com/github/rholder/retry/RetryerBuilder.retryIfException:(Lcom/google/common/base/Predicate;)Lcom/github/rholder/retry/RetryerBuilder;
      28: ldc2_w        #47                 // long 250l
      31: lconst_1
      32: getstatic     #49                 // Field java/util/concurrent/TimeUnit.MINUTES:Ljava/util/concurrent/TimeUnit;
      35: invokestatic  #50                 // Method com/github/rholder/retry/WaitStrategies.exponentialWait:(JJLjava/util/concurrent/TimeUnit;)Lcom/github/rholder/retry/WaitStrategy;
      38: invokevirtual #51                 // Method com/github/rholder/retry/RetryerBuilder.withWaitStrategy:(Lcom/github/rholder/retry/WaitStrategy;)Lcom/github/rholder/retry/RetryerBuilder;
      41: invokestatic  #52                 // Method com/github/rholder/retry/StopStrategies.neverStop:()Lcom/github/rholder/retry/StopStrategy;
      44: invokevirtual #53                 // Method com/github/rholder/retry/RetryerBuilder.withStopStrategy:(Lcom/github/rholder/retry/StopStrategy;)Lcom/github/rholder/retry/RetryerBuilder;
      47: invokevirtual #54                 // Method com/github/rholder/retry/RetryerBuilder.build:()Lcom/github/rholder/retry/Retryer;
      50: putstatic     #29                 // Field JOURNAL_WRITE_RETRYER:Lcom/github/rholder/retry/Retryer;
      53: return
}

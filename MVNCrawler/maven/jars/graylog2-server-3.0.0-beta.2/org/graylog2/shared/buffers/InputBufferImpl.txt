Compiled from "InputBufferImpl.java"
public class org.graylog2.shared.buffers.InputBufferImpl implements org.graylog2.plugin.buffers.InputBuffer {
  private static final org.slf4j.Logger LOG;

  private final com.lmax.disruptor.RingBuffer<org.graylog2.shared.buffers.RawMessageEvent> ringBuffer;

  private final com.codahale.metrics.Meter incomingMessages;

  public org.graylog2.shared.buffers.InputBufferImpl(com.codahale.metrics.MetricRegistry, org.graylog2.plugin.BaseConfiguration, javax.inject.Provider<org.graylog2.shared.buffers.DirectMessageHandler>, javax.inject.Provider<org.graylog2.shared.buffers.RawMessageEncoderHandler>, javax.inject.Provider<org.graylog2.shared.buffers.JournallingMessageHandler>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: new           #2                  // class com/lmax/disruptor/dsl/Disruptor
       7: dup
       8: getstatic     #3                  // Field org/graylog2/shared/buffers/RawMessageEvent.FACTORY:Lcom/lmax/disruptor/EventFactory;
      11: aload_2
      12: invokevirtual #4                  // Method org/graylog2/plugin/BaseConfiguration.getInputBufferRingSize:()I
      15: aload_0
      16: aload_1
      17: invokespecial #5                  // Method threadFactory:(Lcom/codahale/metrics/MetricRegistry;)Ljava/util/concurrent/ThreadFactory;
      20: getstatic     #6                  // Field com/lmax/disruptor/dsl/ProducerType.MULTI:Lcom/lmax/disruptor/dsl/ProducerType;
      23: aload_2
      24: invokevirtual #7                  // Method org/graylog2/plugin/BaseConfiguration.getInputBufferWaitStrategy:()Lcom/lmax/disruptor/WaitStrategy;
      27: invokespecial #8                  // Method com/lmax/disruptor/dsl/Disruptor."<init>":(Lcom/lmax/disruptor/EventFactory;ILjava/util/concurrent/ThreadFactory;Lcom/lmax/disruptor/dsl/ProducerType;Lcom/lmax/disruptor/WaitStrategy;)V
      30: astore        6
      32: aload         6
      34: new           #9                  // class org/graylog2/shared/buffers/LoggingExceptionHandler
      37: dup
      38: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      41: invokespecial #11                 // Method org/graylog2/shared/buffers/LoggingExceptionHandler."<init>":(Lorg/slf4j/Logger;)V
      44: invokevirtual #12                 // Method com/lmax/disruptor/dsl/Disruptor.setDefaultExceptionHandler:(Lcom/lmax/disruptor/ExceptionHandler;)V
      47: aload_2
      48: invokevirtual #13                 // Method org/graylog2/plugin/BaseConfiguration.getInputbufferProcessors:()I
      51: istore        7
      53: aload_2
      54: invokevirtual #14                 // Method org/graylog2/plugin/BaseConfiguration.isMessageJournalEnabled:()Z
      57: ifeq          139
      60: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      63: ldc           #15                 // String Message journal is enabled.
      65: invokeinterface #16,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      70: iload         7
      72: anewarray     #17                 // class org/graylog2/shared/buffers/RawMessageEncoderHandler
      75: astore        8
      77: iconst_0
      78: istore        9
      80: iload         9
      82: iload         7
      84: if_icmpge     108
      87: aload         8
      89: iload         9
      91: aload         4
      93: invokeinterface #18,  1           // InterfaceMethod javax/inject/Provider.get:()Ljava/lang/Object;
      98: checkcast     #17                 // class org/graylog2/shared/buffers/RawMessageEncoderHandler
     101: aastore
     102: iinc          9, 1
     105: goto          80
     108: aload         6
     110: aload         8
     112: invokevirtual #19                 // Method com/lmax/disruptor/dsl/Disruptor.handleEventsWithWorkerPool:([Lcom/lmax/disruptor/WorkHandler;)Lcom/lmax/disruptor/dsl/EventHandlerGroup;
     115: iconst_1
     116: anewarray     #20                 // class com/lmax/disruptor/EventHandler
     119: dup
     120: iconst_0
     121: aload         5
     123: invokeinterface #18,  1           // InterfaceMethod javax/inject/Provider.get:()Ljava/lang/Object;
     128: checkcast     #20                 // class com/lmax/disruptor/EventHandler
     131: aastore
     132: invokevirtual #21                 // Method com/lmax/disruptor/dsl/EventHandlerGroup.then:([Lcom/lmax/disruptor/EventHandler;)Lcom/lmax/disruptor/dsl/EventHandlerGroup;
     135: pop
     136: goto          194
     139: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
     142: ldc           #22                 // String Message journal is disabled.
     144: invokeinterface #16,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     149: iload         7
     151: anewarray     #23                 // class org/graylog2/shared/buffers/DirectMessageHandler
     154: astore        8
     156: iconst_0
     157: istore        9
     159: iload         9
     161: iload         7
     163: if_icmpge     186
     166: aload         8
     168: iload         9
     170: aload_3
     171: invokeinterface #18,  1           // InterfaceMethod javax/inject/Provider.get:()Ljava/lang/Object;
     176: checkcast     #23                 // class org/graylog2/shared/buffers/DirectMessageHandler
     179: aastore
     180: iinc          9, 1
     183: goto          159
     186: aload         6
     188: aload         8
     190: invokevirtual #19                 // Method com/lmax/disruptor/dsl/Disruptor.handleEventsWithWorkerPool:([Lcom/lmax/disruptor/WorkHandler;)Lcom/lmax/disruptor/dsl/EventHandlerGroup;
     193: pop
     194: aload_0
     195: aload         6
     197: invokevirtual #24                 // Method com/lmax/disruptor/dsl/Disruptor.start:()Lcom/lmax/disruptor/RingBuffer;
     200: putfield      #25                 // Field ringBuffer:Lcom/lmax/disruptor/RingBuffer;
     203: aload_0
     204: aload_1
     205: ldc           #26                 // class org/graylog2/shared/buffers/InputBufferImpl
     207: iconst_1
     208: anewarray     #27                 // class java/lang/String
     211: dup
     212: iconst_0
     213: ldc           #28                 // String incomingMessages
     215: aastore
     216: invokestatic  #29                 // Method com/codahale/metrics/MetricRegistry.name:(Ljava/lang/Class;[Ljava/lang/String;)Ljava/lang/String;
     219: invokevirtual #30                 // Method com/codahale/metrics/MetricRegistry.meter:(Ljava/lang/String;)Lcom/codahale/metrics/Meter;
     222: putfield      #31                 // Field incomingMessages:Lcom/codahale/metrics/Meter;
     225: aload_1
     226: ldc           #33                 // String org.graylog2.buffers.input.usage
     228: new           #34                 // class org/graylog2/shared/buffers/InputBufferImpl$1
     231: dup
     232: aload_0
     233: invokespecial #35                 // Method org/graylog2/shared/buffers/InputBufferImpl$1."<init>":(Lorg/graylog2/shared/buffers/InputBufferImpl;)V
     236: invokestatic  #36                 // Method org/graylog2/shared/metrics/MetricUtils.safelyRegister:(Lcom/codahale/metrics/MetricRegistry;Ljava/lang/String;Lcom/codahale/metrics/Metric;)Lcom/codahale/metrics/Metric;
     239: pop
     240: aload_1
     241: ldc           #37                 // String org.graylog2.buffers.input.size
     243: aload_0
     244: getfield      #25                 // Field ringBuffer:Lcom/lmax/disruptor/RingBuffer;
     247: invokevirtual #38                 // Method com/lmax/disruptor/RingBuffer.getBufferSize:()I
     250: i2l
     251: invokestatic  #39                 // Method org/graylog2/shared/metrics/MetricUtils.constantGauge:(J)Lcom/codahale/metrics/Gauge;
     254: invokestatic  #36                 // Method org/graylog2/shared/metrics/MetricUtils.safelyRegister:(Lcom/codahale/metrics/MetricRegistry;Ljava/lang/String;Lcom/codahale/metrics/Metric;)Lcom/codahale/metrics/Metric;
     257: pop
     258: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
     261: ldc           #40                 // String Initialized {} with ring size <{}> and wait strategy <{}>, running {} parallel message handlers.
     263: iconst_4
     264: anewarray     #41                 // class java/lang/Object
     267: dup
     268: iconst_0
     269: aload_0
     270: invokevirtual #42                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     273: invokevirtual #43                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
     276: aastore
     277: dup
     278: iconst_1
     279: aload_2
     280: invokevirtual #4                  // Method org/graylog2/plugin/BaseConfiguration.getInputBufferRingSize:()I
     283: invokestatic  #44                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     286: aastore
     287: dup
     288: iconst_2
     289: aload_2
     290: invokevirtual #7                  // Method org/graylog2/plugin/BaseConfiguration.getInputBufferWaitStrategy:()Lcom/lmax/disruptor/WaitStrategy;
     293: invokevirtual #42                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     296: invokevirtual #43                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
     299: aastore
     300: dup
     301: iconst_3
     302: iload         7
     304: invokestatic  #44                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     307: aastore
     308: invokeinterface #45,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     313: return

  public void insert(org.graylog2.plugin.journal.RawMessage);
    Code:
       0: aload_0
       1: getfield      #25                 // Field ringBuffer:Lcom/lmax/disruptor/RingBuffer;
       4: getstatic     #46                 // Field org/graylog2/shared/buffers/RawMessageEvent.TRANSLATOR:Lcom/lmax/disruptor/EventTranslatorOneArg;
       7: aload_1
       8: invokevirtual #47                 // Method com/lmax/disruptor/RingBuffer.publishEvent:(Lcom/lmax/disruptor/EventTranslatorOneArg;Ljava/lang/Object;)V
      11: aload_0
      12: getfield      #31                 // Field incomingMessages:Lcom/codahale/metrics/Meter;
      15: invokevirtual #48                 // Method com/codahale/metrics/Meter.mark:()V
      18: return

  public long getUsage();
    Code:
       0: aload_0
       1: getfield      #25                 // Field ringBuffer:Lcom/lmax/disruptor/RingBuffer;
       4: invokevirtual #38                 // Method com/lmax/disruptor/RingBuffer.getBufferSize:()I
       7: i2l
       8: aload_0
       9: getfield      #25                 // Field ringBuffer:Lcom/lmax/disruptor/RingBuffer;
      12: invokevirtual #49                 // Method com/lmax/disruptor/RingBuffer.remainingCapacity:()J
      15: lsub
      16: lreturn

  private java.util.concurrent.ThreadFactory threadFactory(com.codahale.metrics.MetricRegistry);
    Code:
       0: new           #50                 // class com/google/common/util/concurrent/ThreadFactoryBuilder
       3: dup
       4: invokespecial #51                 // Method com/google/common/util/concurrent/ThreadFactoryBuilder."<init>":()V
       7: ldc           #52                 // String inputbufferprocessor-%d
       9: invokevirtual #53                 // Method com/google/common/util/concurrent/ThreadFactoryBuilder.setNameFormat:(Ljava/lang/String;)Lcom/google/common/util/concurrent/ThreadFactoryBuilder;
      12: invokevirtual #54                 // Method com/google/common/util/concurrent/ThreadFactoryBuilder.build:()Ljava/util/concurrent/ThreadFactory;
      15: astore_2
      16: new           #55                 // class com/codahale/metrics/InstrumentedThreadFactory
      19: dup
      20: aload_2
      21: aload_1
      22: aload_0
      23: invokevirtual #42                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      26: iconst_1
      27: anewarray     #27                 // class java/lang/String
      30: dup
      31: iconst_0
      32: ldc           #56                 // String thread-factory
      34: aastore
      35: invokestatic  #29                 // Method com/codahale/metrics/MetricRegistry.name:(Ljava/lang/Class;[Ljava/lang/String;)Ljava/lang/String;
      38: invokespecial #57                 // Method com/codahale/metrics/InstrumentedThreadFactory."<init>":(Ljava/util/concurrent/ThreadFactory;Lcom/codahale/metrics/MetricRegistry;Ljava/lang/String;)V
      41: areturn

  static {};
    Code:
       0: ldc           #26                 // class org/graylog2/shared/buffers/InputBufferImpl
       2: invokestatic  #58                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

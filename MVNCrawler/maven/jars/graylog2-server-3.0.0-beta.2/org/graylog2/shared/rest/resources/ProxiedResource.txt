Compiled from "ProxiedResource.java"
public abstract class org.graylog2.shared.rest.resources.ProxiedResource extends org.graylog2.shared.rest.resources.RestResource {
  private static final org.slf4j.Logger LOG;

  protected final java.lang.String authenticationToken;

  protected final org.graylog2.cluster.NodeService nodeService;

  protected final org.graylog2.rest.RemoteInterfaceProvider remoteInterfaceProvider;

  private final java.util.concurrent.ExecutorService executor;

  protected org.graylog2.shared.rest.resources.ProxiedResource(javax.ws.rs.core.HttpHeaders, org.graylog2.cluster.NodeService, org.graylog2.rest.RemoteInterfaceProvider, java.util.concurrent.ExecutorService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/shared/rest/resources/RestResource."<init>":()V
       4: aload_0
       5: aload_2
       6: putfield      #2                  // Field nodeService:Lorg/graylog2/cluster/NodeService;
       9: aload_0
      10: aload_3
      11: putfield      #3                  // Field remoteInterfaceProvider:Lorg/graylog2/rest/RemoteInterfaceProvider;
      14: aload_0
      15: aload         4
      17: putfield      #4                  // Field executor:Ljava/util/concurrent/ExecutorService;
      20: aload_1
      21: ldc           #5                  // String Authorization
      23: invokeinterface #6,  2            // InterfaceMethod javax/ws/rs/core/HttpHeaders.getRequestHeader:(Ljava/lang/String;)Ljava/util/List;
      28: astore        5
      30: aload         5
      32: ifnull        64
      35: aload         5
      37: invokeinterface #7,  1            // InterfaceMethod java/util/List.size:()I
      42: iconst_1
      43: if_icmplt     64
      46: aload_0
      47: aload         5
      49: iconst_0
      50: invokeinterface #8,  2            // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      55: checkcast     #9                  // class java/lang/String
      58: putfield      #10                 // Field authenticationToken:Ljava/lang/String;
      61: goto          69
      64: aload_0
      65: aconst_null
      66: putfield      #10                 // Field authenticationToken:Ljava/lang/String;
      69: return

  protected <RemoteInterfaceType, RemoteCallResponseType> java.util.Map<java.lang.String, java.util.Optional<RemoteCallResponseType>> getForAllNodes(java.util.function.Function<RemoteInterfaceType, retrofit2.Call<RemoteCallResponseType>>, java.util.function.Function<java.lang.String, java.util.Optional<RemoteInterfaceType>>);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokestatic  #11                 // InterfaceMethod java/util/function/Function.identity:()Ljava/util/function/Function;
       6: invokevirtual #12                 // Method getForAllNodes:(Ljava/util/function/Function;Ljava/util/function/Function;Ljava/util/function/Function;)Ljava/util/Map;
       9: areturn

  protected <RemoteInterfaceType, FinalResponseType, RemoteCallResponseType> java.util.Map<java.lang.String, java.util.Optional<FinalResponseType>> getForAllNodes(java.util.function.Function<RemoteInterfaceType, retrofit2.Call<RemoteCallResponseType>>, java.util.function.Function<java.lang.String, java.util.Optional<RemoteInterfaceType>>, java.util.function.Function<RemoteCallResponseType, FinalResponseType>);
    Code:
       0: aload_0
       1: getfield      #2                  // Field nodeService:Lorg/graylog2/cluster/NodeService;
       4: invokeinterface #13,  1           // InterfaceMethod org/graylog2/cluster/NodeService.allActive:()Ljava/util/Map;
       9: invokeinterface #14,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      14: invokeinterface #15,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
      19: invokestatic  #11                 // InterfaceMethod java/util/function/Function.identity:()Ljava/util/function/Function;
      22: aload_0
      23: aload_2
      24: aload_1
      25: aload_3
      26: invokedynamic #16,  0             // InvokeDynamic #0:apply:(Lorg/graylog2/shared/rest/resources/ProxiedResource;Ljava/util/function/Function;Ljava/util/function/Function;Ljava/util/function/Function;)Ljava/util/function/Function;
      31: invokestatic  #17                 // Method java/util/stream/Collectors.toMap:(Ljava/util/function/Function;Ljava/util/function/Function;)Ljava/util/stream/Collector;
      34: invokeinterface #18,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      39: checkcast     #19                 // class java/util/Map
      42: astore        4
      44: aload         4
      46: invokeinterface #20,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      51: invokeinterface #15,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
      56: invokedynamic #21,  0             // InvokeDynamic #1:apply:()Ljava/util/function/Function;
      61: invokedynamic #22,  0             // InvokeDynamic #2:apply:()Ljava/util/function/Function;
      66: invokestatic  #17                 // Method java/util/stream/Collectors.toMap:(Ljava/util/function/Function;Ljava/util/function/Function;)Ljava/util/stream/Collector;
      69: invokeinterface #18,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      74: checkcast     #19                 // class java/util/Map
      77: areturn

  protected <RemoteInterfaceType> java.util.function.Function<java.lang.String, java.util.Optional<RemoteInterfaceType>> createRemoteInterfaceProvider(java.lang.Class<RemoteInterfaceType>);
    Code:
       0: aload_0
       1: aload_1
       2: invokedynamic #23,  0             // InvokeDynamic #3:apply:(Lorg/graylog2/shared/rest/resources/ProxiedResource;Ljava/lang/Class;)Ljava/util/function/Function;
       7: areturn

  protected <RemoteInterfaceType, RemoteCallResponseType> org.graylog2.shared.rest.resources.ProxiedResource$MasterResponse<RemoteCallResponseType> requestOnMaster(java.util.function.Function<RemoteInterfaceType, retrofit2.Call<RemoteCallResponseType>>, java.util.function.Function<java.lang.String, java.util.Optional<RemoteInterfaceType>>) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field nodeService:Lorg/graylog2/cluster/NodeService;
       4: invokeinterface #13,  1           // InterfaceMethod org/graylog2/cluster/NodeService.allActive:()Ljava/util/Map;
       9: invokeinterface #24,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      14: invokeinterface #25,  1           // InterfaceMethod java/util/Collection.stream:()Ljava/util/stream/Stream;
      19: invokedynamic #26,  0             // InvokeDynamic #4:test:()Ljava/util/function/Predicate;
      24: invokeinterface #27,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      29: invokeinterface #28,  1           // InterfaceMethod java/util/stream/Stream.findFirst:()Ljava/util/Optional;
      34: invokedynamic #29,  0             // InvokeDynamic #5:get:()Ljava/util/function/Supplier;
      39: invokevirtual #30                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      42: checkcast     #31                 // class org/graylog2/cluster/Node
      45: astore_3
      46: aload_2
      47: aload_3
      48: invokeinterface #32,  1           // InterfaceMethod org/graylog2/cluster/Node.getNodeId:()Ljava/lang/String;
      53: invokeinterface #33,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      58: checkcast     #34                 // class java/util/Optional
      61: aload_3
      62: invokedynamic #35,  0             // InvokeDynamic #6:get:(Lorg/graylog2/cluster/Node;)Ljava/util/function/Supplier;
      67: invokevirtual #30                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      70: astore        4
      72: aload_1
      73: aload         4
      75: invokeinterface #33,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      80: checkcast     #36                 // class retrofit2/Call
      83: astore        5
      85: aload         5
      87: invokeinterface #37,  1           // InterfaceMethod retrofit2/Call.execute:()Lretrofit2/Response;
      92: astore        6
      94: aload         6
      96: invokevirtual #38                 // Method retrofit2/Response.errorBody:()Lokhttp3/ResponseBody;
      99: ifnonnull     106
     102: aconst_null
     103: goto          114
     106: aload         6
     108: invokevirtual #38                 // Method retrofit2/Response.errorBody:()Lokhttp3/ResponseBody;
     111: invokevirtual #39                 // Method okhttp3/ResponseBody.bytes:()[B
     114: astore        7
     116: aload         6
     118: invokevirtual #40                 // Method retrofit2/Response.isSuccessful:()Z
     121: aload         6
     123: invokevirtual #41                 // Method retrofit2/Response.code:()I
     126: aload         6
     128: invokevirtual #42                 // Method retrofit2/Response.body:()Ljava/lang/Object;
     131: aload         7
     133: invokestatic  #43                 // Method org/graylog2/shared/rest/resources/ProxiedResource$MasterResponse.create:(ZILjava/lang/Object;[B)Lorg/graylog2/shared/rest/resources/ProxiedResource$MasterResponse;
     136: areturn

  private static java.lang.IllegalStateException lambda$requestOnMaster$6(org.graylog2.cluster.Node);
    Code:
       0: new           #44                 // class java/lang/IllegalStateException
       3: dup
       4: new           #45                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #46                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #47                 // String Master node
      13: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_0
      17: invokeinterface #32,  1           // InterfaceMethod org/graylog2/cluster/Node.getNodeId:()Ljava/lang/String;
      22: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: ldc           #49                 // String  not found
      27: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokespecial #51                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      36: areturn

  private static java.lang.IllegalStateException lambda$requestOnMaster$5();
    Code:
       0: new           #44                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #52                 // String No active master node found
       6: invokespecial #51                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  private java.util.Optional lambda$createRemoteInterfaceProvider$4(java.lang.Class, java.lang.String);
    Code:
       0: aload_0
       1: getfield      #2                  // Field nodeService:Lorg/graylog2/cluster/NodeService;
       4: aload_2
       5: invokeinterface #53,  2           // InterfaceMethod org/graylog2/cluster/NodeService.byNodeId:(Ljava/lang/String;)Lorg/graylog2/cluster/Node;
      10: astore_3
      11: aload_0
      12: getfield      #3                  // Field remoteInterfaceProvider:Lorg/graylog2/rest/RemoteInterfaceProvider;
      15: aload_3
      16: aload_0
      17: getfield      #10                 // Field authenticationToken:Ljava/lang/String;
      20: aload_1
      21: invokevirtual #54                 // Method org/graylog2/rest/RemoteInterfaceProvider.get:(Lorg/graylog2/cluster/Node;Ljava/lang/String;Ljava/lang/Class;)Ljava/lang/Object;
      24: invokestatic  #55                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
      27: areturn
      28: astore_3
      29: getstatic     #57                 // Field LOG:Lorg/slf4j/Logger;
      32: new           #45                 // class java/lang/StringBuilder
      35: dup
      36: invokespecial #46                 // Method java/lang/StringBuilder."<init>":()V
      39: ldc           #58                 // String Node <
      41: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      44: aload_2
      45: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      48: ldc           #59                 // String > not found while trying to call
      50: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      53: aload_1
      54: invokevirtual #60                 // Method java/lang/Class.getName:()Ljava/lang/String;
      57: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      60: ldc           #61                 // String  on it.
      62: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      68: invokeinterface #62,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
      73: invokestatic  #63                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      76: areturn
    Exception table:
       from    to  target type
           0    27    28   Class org/graylog2/cluster/NodeNotFoundException

  private static java.util.Optional lambda$getForAllNodes$3(java.util.Map$Entry);
    Code:
       0: aload_0
       1: invokeinterface #64,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
       6: checkcast     #65                 // class java/util/concurrent/Future
       9: invokeinterface #66,  1           // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
      14: checkcast     #34                 // class java/util/Optional
      17: areturn
      18: astore_1
      19: getstatic     #57                 // Field LOG:Lorg/slf4j/Logger;
      22: ldc           #69                 // String Couldn\'t retrieve future
      24: aload_1
      25: invokeinterface #70,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      30: invokestatic  #63                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      33: areturn
    Exception table:
       from    to  target type
           0    17    18   Class java/lang/InterruptedException
           0    17    18   Class java/util/concurrent/ExecutionException

  private java.util.concurrent.Future lambda$getForAllNodes$2(java.util.function.Function, java.util.function.Function, java.util.function.Function, java.lang.String);
    Code:
       0: aload_1
       1: aload         4
       3: invokeinterface #33,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
       8: checkcast     #34                 // class java/util/Optional
      11: aload_0
      12: aload_2
      13: aload_3
      14: aload         4
      16: invokedynamic #71,  0             // InvokeDynamic #7:apply:(Lorg/graylog2/shared/rest/resources/ProxiedResource;Ljava/util/function/Function;Ljava/util/function/Function;Ljava/lang/String;)Ljava/util/function/Function;
      21: invokevirtual #72                 // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      24: invokestatic  #63                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      27: invokestatic  #73                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
      30: invokevirtual #74                 // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
      33: checkcast     #65                 // class java/util/concurrent/Future
      36: areturn

  private java.util.concurrent.Future lambda$getForAllNodes$1(java.util.function.Function, java.util.function.Function, java.lang.String, java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #4                  // Field executor:Ljava/util/concurrent/ExecutorService;
       4: aload_1
       5: aload         4
       7: aload_2
       8: aload_3
       9: invokedynamic #75,  0             // InvokeDynamic #8:call:(Ljava/util/function/Function;Ljava/lang/Object;Ljava/util/function/Function;Ljava/lang/String;)Ljava/util/concurrent/Callable;
      14: invokeinterface #76,  2           // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
      19: areturn

  private static java.util.Optional lambda$getForAllNodes$0(java.util.function.Function, java.lang.Object, java.util.function.Function, java.lang.String) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #33,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
       7: checkcast     #36                 // class retrofit2/Call
      10: astore        4
      12: aload         4
      14: invokeinterface #37,  1           // InterfaceMethod retrofit2/Call.execute:()Lretrofit2/Response;
      19: astore        5
      21: aload         5
      23: invokevirtual #40                 // Method retrofit2/Response.isSuccessful:()Z
      26: ifeq          44
      29: aload_2
      30: aload         5
      32: invokevirtual #42                 // Method retrofit2/Response.body:()Ljava/lang/Object;
      35: invokeinterface #33,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      40: invokestatic  #55                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
      43: areturn
      44: getstatic     #57                 // Field LOG:Lorg/slf4j/Logger;
      47: ldc           #77                 // String Unable to call {} on node <{}>, result: {}
      49: iconst_3
      50: anewarray     #78                 // class java/lang/Object
      53: dup
      54: iconst_0
      55: aload         4
      57: invokeinterface #79,  1           // InterfaceMethod retrofit2/Call.request:()Lokhttp3/Request;
      62: invokevirtual #80                 // Method okhttp3/Request.url:()Lokhttp3/HttpUrl;
      65: aastore
      66: dup
      67: iconst_1
      68: aload_3
      69: aastore
      70: dup
      71: iconst_2
      72: aload         5
      74: invokevirtual #81                 // Method retrofit2/Response.message:()Ljava/lang/String;
      77: aastore
      78: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      83: invokestatic  #63                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      86: areturn
      87: astore        5
      89: getstatic     #57                 // Field LOG:Lorg/slf4j/Logger;
      92: ldc           #84                 // String Unable to call {} on node <{}>
      94: iconst_3
      95: anewarray     #78                 // class java/lang/Object
      98: dup
      99: iconst_0
     100: aload         4
     102: invokeinterface #79,  1           // InterfaceMethod retrofit2/Call.request:()Lokhttp3/Request;
     107: invokevirtual #80                 // Method okhttp3/Request.url:()Lokhttp3/HttpUrl;
     110: aastore
     111: dup
     112: iconst_1
     113: aload_3
     114: aastore
     115: dup
     116: iconst_2
     117: aload         5
     119: aastore
     120: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     125: invokestatic  #63                 // Method java/util/Optional.empty:()Ljava/util/Optional;
     128: areturn
    Exception table:
       from    to  target type
          12    43    87   Class java/io/IOException
          44    86    87   Class java/io/IOException

  static {};
    Code:
       0: ldc           #85                 // class org/graylog2/shared/rest/resources/ProxiedResource
       2: invokestatic  #86                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #57                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

Compiled from "LookupDataAdapterRefreshService.java"
public class org.graylog2.lookup.LookupDataAdapterRefreshService extends com.google.common.util.concurrent.AbstractIdleService {
  private static final org.slf4j.Logger LOG;

  private final java.util.concurrent.ScheduledExecutorService scheduler;

  private final java.util.concurrent.ConcurrentMap<java.lang.String, org.graylog2.lookup.LookupTable> liveTables;

  private final java.util.concurrent.ConcurrentMap<java.lang.String, java.util.concurrent.ScheduledFuture<?>> futures;

  public org.graylog2.lookup.LookupDataAdapterRefreshService(java.util.concurrent.ScheduledExecutorService, java.util.concurrent.ConcurrentMap<java.lang.String, org.graylog2.lookup.LookupTable>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method com/google/common/util/concurrent/AbstractIdleService."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      15: aload_0
      16: aload_1
      17: putfield      #5                  // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      20: aload_0
      21: aload_2
      22: putfield      #6                  // Field liveTables:Ljava/util/concurrent/ConcurrentMap;
      25: return

  protected void startUp() throws java.lang.Exception;
    Code:
       0: return

  protected void shutDown() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
       4: dup
       5: astore_1
       6: monitorenter
       7: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      10: ldc           #8                  // String Stopping {} jobs
      12: aload_0
      13: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      16: invokeinterface #9,  1            // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
      21: invokestatic  #10                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      24: invokeinterface #11,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      29: aload_0
      30: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      33: invokeinterface #12,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.values:()Ljava/util/Collection;
      38: invokeinterface #13,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      43: astore_2
      44: aload_2
      45: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      50: ifeq          71
      53: aload_2
      54: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      59: checkcast     #16                 // class java/util/concurrent/ScheduledFuture
      62: astore_3
      63: aload_0
      64: aload_3
      65: invokespecial #17                 // Method cancel:(Ljava/util/concurrent/ScheduledFuture;)V
      68: goto          44
      71: aload_0
      72: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      75: invokeinterface #18,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.clear:()V
      80: aload_1
      81: monitorexit
      82: goto          92
      85: astore        4
      87: aload_1
      88: monitorexit
      89: aload         4
      91: athrow
      92: return
    Exception table:
       from    to  target type
           7    82    85   any
          85    89    85   any

  public org.graylog2.lookup.LookupDataAdapterRefreshService$Listener newServiceListener(org.graylog2.plugin.lookup.LookupDataAdapter);
    Code:
       0: new           #19                 // class org/graylog2/lookup/LookupDataAdapterRefreshService$Listener
       3: dup
       4: aload_0
       5: aload_1
       6: invokespecial #20                 // Method org/graylog2/lookup/LookupDataAdapterRefreshService$Listener."<init>":(Lorg/graylog2/lookup/LookupDataAdapterRefreshService;Lorg/graylog2/plugin/lookup/LookupDataAdapter;)V
       9: areturn

  public void add(org.graylog2.plugin.lookup.LookupDataAdapter);
    Code:
       0: aload_0
       1: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
       4: getstatic     #22                 // Field com/google/common/util/concurrent/Service$State.STOPPING:Lcom/google/common/util/concurrent/Service$State;
       7: if_acmpeq     20
      10: aload_0
      11: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
      14: getstatic     #23                 // Field com/google/common/util/concurrent/Service$State.TERMINATED:Lcom/google/common/util/concurrent/Service$State;
      17: if_acmpne     63
      20: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      23: ldc           #24                 // String Service is in state <{}> - not adding new job for <{}/{}/@{}>
      25: iconst_4
      26: anewarray     #25                 // class java/lang/Object
      29: dup
      30: iconst_0
      31: aload_0
      32: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
      35: aastore
      36: dup
      37: iconst_1
      38: aload_1
      39: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
      42: aastore
      43: dup
      44: iconst_2
      45: aload_1
      46: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
      49: aastore
      50: dup
      51: iconst_3
      52: aload_1
      53: invokestatic  #28                 // Method org/graylog2/utilities/ObjectUtils.objectId:(Ljava/lang/Object;)Ljava/lang/String;
      56: aastore
      57: invokeinterface #29,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      62: return
      63: aload_1
      64: invokevirtual #30                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.refreshInterval:()Lorg/joda/time/Duration;
      67: astore_2
      68: aload_2
      69: getstatic     #31                 // Field org/joda/time/Duration.ZERO:Lorg/joda/time/Duration;
      72: invokevirtual #32                 // Method org/joda/time/Duration.equals:(Ljava/lang/Object;)Z
      75: ifne          212
      78: aload_1
      79: invokestatic  #28                 // Method org/graylog2/utilities/ObjectUtils.objectId:(Ljava/lang/Object;)Ljava/lang/String;
      82: astore_3
      83: aload_0
      84: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      87: dup
      88: astore        4
      90: monitorenter
      91: aload_0
      92: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      95: aload_3
      96: invokeinterface #33,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.containsKey:(Ljava/lang/Object;)Z
     101: ifne          166
     104: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
     107: ldc           #34                 // String Adding job for <{}/{}/@{}> [interval={}ms]
     109: iconst_4
     110: anewarray     #25                 // class java/lang/Object
     113: dup
     114: iconst_0
     115: aload_1
     116: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
     119: aastore
     120: dup
     121: iconst_1
     122: aload_1
     123: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
     126: aastore
     127: dup
     128: iconst_2
     129: aload_3
     130: aastore
     131: dup
     132: iconst_3
     133: aload_2
     134: invokevirtual #35                 // Method org/joda/time/Duration.getMillis:()J
     137: invokestatic  #36                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     140: aastore
     141: invokeinterface #37,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     146: aload_0
     147: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
     150: aload_3
     151: aload_0
     152: aload_1
     153: aload_2
     154: invokespecial #38                 // Method schedule:(Lorg/graylog2/plugin/lookup/LookupDataAdapter;Lorg/joda/time/Duration;)Ljava/util/concurrent/ScheduledFuture;
     157: invokeinterface #39,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     162: pop
     163: goto          198
     166: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
     169: ldc           #40                 // String Job for <{}/{}/@{}> already exists, not adding it again.
     171: iconst_3
     172: anewarray     #25                 // class java/lang/Object
     175: dup
     176: iconst_0
     177: aload_1
     178: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
     181: aastore
     182: dup
     183: iconst_1
     184: aload_1
     185: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
     188: aastore
     189: dup
     190: iconst_2
     191: aload_3
     192: aastore
     193: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     198: aload         4
     200: monitorexit
     201: goto          212
     204: astore        5
     206: aload         4
     208: monitorexit
     209: aload         5
     211: athrow
     212: return
    Exception table:
       from    to  target type
          91   201   204   any
         204   209   204   any

  public void remove(org.graylog2.plugin.lookup.LookupDataAdapter);
    Code:
       0: aload_0
       1: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
       4: getstatic     #22                 // Field com/google/common/util/concurrent/Service$State.STOPPING:Lcom/google/common/util/concurrent/Service$State;
       7: if_acmpeq     20
      10: aload_0
      11: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
      14: getstatic     #23                 // Field com/google/common/util/concurrent/Service$State.TERMINATED:Lcom/google/common/util/concurrent/Service$State;
      17: if_acmpne     63
      20: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      23: ldc           #42                 // String Service is in state <{}> - not removing job for <{}/{}/@{}>
      25: iconst_4
      26: anewarray     #25                 // class java/lang/Object
      29: dup
      30: iconst_0
      31: aload_0
      32: invokevirtual #21                 // Method state:()Lcom/google/common/util/concurrent/Service$State;
      35: aastore
      36: dup
      37: iconst_1
      38: aload_1
      39: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
      42: aastore
      43: dup
      44: iconst_2
      45: aload_1
      46: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
      49: aastore
      50: dup
      51: iconst_3
      52: aload_1
      53: invokestatic  #28                 // Method org/graylog2/utilities/ObjectUtils.objectId:(Ljava/lang/Object;)Ljava/lang/String;
      56: aastore
      57: invokeinterface #29,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      62: return
      63: aload_1
      64: invokestatic  #28                 // Method org/graylog2/utilities/ObjectUtils.objectId:(Ljava/lang/Object;)Ljava/lang/String;
      67: astore_2
      68: aload_0
      69: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
      72: aload_2
      73: invokeinterface #33,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.containsKey:(Ljava/lang/Object;)Z
      78: ifeq          113
      81: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      84: ldc           #43                 // String Removing job for <{}/{}/@{}>
      86: iconst_3
      87: anewarray     #25                 // class java/lang/Object
      90: dup
      91: iconst_0
      92: aload_1
      93: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
      96: aastore
      97: dup
      98: iconst_1
      99: aload_1
     100: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
     103: aastore
     104: dup
     105: iconst_2
     106: aload_2
     107: aastore
     108: invokeinterface #37,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     113: aload_0
     114: aload_0
     115: getfield      #4                  // Field futures:Ljava/util/concurrent/ConcurrentMap;
     118: aload_2
     119: invokeinterface #44,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     124: checkcast     #16                 // class java/util/concurrent/ScheduledFuture
     127: invokespecial #17                 // Method cancel:(Ljava/util/concurrent/ScheduledFuture;)V
     130: return

  private java.util.concurrent.ScheduledFuture<?> schedule(org.graylog2.plugin.lookup.LookupDataAdapter, org.joda.time.Duration);
    Code:
       0: new           #45                 // class org/graylog2/lookup/CachePurge
       3: dup
       4: aload_0
       5: getfield      #6                  // Field liveTables:Ljava/util/concurrent/ConcurrentMap;
       8: aload_1
       9: invokespecial #46                 // Method org/graylog2/lookup/CachePurge."<init>":(Ljava/util/concurrent/ConcurrentMap;Lorg/graylog2/plugin/lookup/LookupDataAdapter;)V
      12: astore_3
      13: aload_0
      14: getfield      #5                  // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      17: aload_1
      18: aload_3
      19: invokedynamic #47,  0             // InvokeDynamic #0:run:(Lorg/graylog2/plugin/lookup/LookupDataAdapter;Lorg/graylog2/lookup/CachePurge;)Ljava/lang/Runnable;
      24: aload_2
      25: invokevirtual #35                 // Method org/joda/time/Duration.getMillis:()J
      28: aload_2
      29: invokevirtual #35                 // Method org/joda/time/Duration.getMillis:()J
      32: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      35: invokeinterface #49,  7           // InterfaceMethod java/util/concurrent/ScheduledExecutorService.scheduleAtFixedRate:(Ljava/lang/Runnable;JJLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;
      40: areturn

  private void cancel(java.util.concurrent.ScheduledFuture<?>);
    Code:
       0: aload_1
       1: ifnull        33
       4: aload_1
       5: invokeinterface #50,  1           // InterfaceMethod java/util/concurrent/ScheduledFuture.isCancelled:()Z
      10: ifne          33
      13: aload_1
      14: iconst_1
      15: invokeinterface #51,  2           // InterfaceMethod java/util/concurrent/ScheduledFuture.cancel:(Z)Z
      20: ifne          33
      23: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      26: ldc           #52                 // String Could not cancel refresh job
      28: invokeinterface #53,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
      33: return

  private static void lambda$schedule$0(org.graylog2.plugin.lookup.LookupDataAdapter, org.graylog2.lookup.CachePurge);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #54                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.refresh:(Lorg/graylog2/plugin/lookup/LookupCachePurge;)V
       5: goto          48
       8: astore_2
       9: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      12: ldc           #56                 // String Unhandled error while refreshing <{}/{}/@{}>
      14: iconst_4
      15: anewarray     #25                 // class java/lang/Object
      18: dup
      19: iconst_0
      20: aload_0
      21: invokevirtual #26                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.name:()Ljava/lang/String;
      24: aastore
      25: dup
      26: iconst_1
      27: aload_0
      28: invokevirtual #27                 // Method org/graylog2/plugin/lookup/LookupDataAdapter.id:()Ljava/lang/String;
      31: aastore
      32: dup
      33: iconst_2
      34: aload_0
      35: invokestatic  #28                 // Method org/graylog2/utilities/ObjectUtils.objectId:(Ljava/lang/Object;)Ljava/lang/String;
      38: aastore
      39: dup
      40: iconst_3
      41: aload_2
      42: aastore
      43: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      48: return
    Exception table:
       from    to  target type
           0     5     8   Class java/lang/Exception

  static {};
    Code:
       0: ldc           #57                 // class org/graylog2/lookup/LookupDataAdapterRefreshService
       2: invokestatic  #58                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
       8: return
}

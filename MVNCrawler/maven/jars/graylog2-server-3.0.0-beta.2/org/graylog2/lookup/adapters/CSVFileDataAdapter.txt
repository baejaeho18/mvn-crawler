Compiled from "CSVFileDataAdapter.java"
public class org.graylog2.lookup.adapters.CSVFileDataAdapter extends org.graylog2.plugin.lookup.LookupDataAdapter {
  private static final org.slf4j.Logger LOG;

  public static final java.lang.String NAME;

  private final org.graylog2.lookup.adapters.CSVFileDataAdapter$Config config;

  private final java.util.concurrent.atomic.AtomicReference<java.util.Map<java.lang.String, java.lang.String>> lookupRef;

  private org.graylog2.plugin.utilities.FileInfo fileInfo;

  public org.graylog2.lookup.adapters.CSVFileDataAdapter(java.lang.String, java.lang.String, org.graylog2.plugin.lookup.LookupDataAdapterConfiguration, com.codahale.metrics.MetricRegistry);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: invokespecial #1                  // Method org/graylog2/plugin/lookup/LookupDataAdapter."<init>":(Ljava/lang/String;Ljava/lang/String;Lorg/graylog2/plugin/lookup/LookupDataAdapterConfiguration;Lcom/codahale/metrics/MetricRegistry;)V
       9: aload_0
      10: new           #2                  // class java/util/concurrent/atomic/AtomicReference
      13: dup
      14: invokestatic  #3                  // Method com/google/common/collect/ImmutableMap.of:()Lcom/google/common/collect/ImmutableMap;
      17: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicReference."<init>":(Ljava/lang/Object;)V
      20: putfield      #5                  // Field lookupRef:Ljava/util/concurrent/atomic/AtomicReference;
      23: aload_0
      24: invokestatic  #6                  // Method org/graylog2/plugin/utilities/FileInfo.empty:()Lorg/graylog2/plugin/utilities/FileInfo;
      27: putfield      #7                  // Field fileInfo:Lorg/graylog2/plugin/utilities/FileInfo;
      30: aload_0
      31: aload_3
      32: checkcast     #8                  // class org/graylog2/lookup/adapters/CSVFileDataAdapter$Config
      35: putfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      38: return

  public void doStart() throws java.lang.Exception;
    Code:
       0: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #11                 // String Starting CSV data adapter for file: {}
       5: aload_0
       6: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
       9: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
      12: invokeinterface #13,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      17: aload_0
      18: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      21: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
      24: invokestatic  #14                 // Method com/google/common/base/Strings.isNullOrEmpty:(Ljava/lang/String;)Z
      27: ifeq          40
      30: new           #15                 // class java/lang/IllegalStateException
      33: dup
      34: ldc           #16                 // String File path needs to be set
      36: invokespecial #17                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_0
      41: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      44: invokevirtual #18                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.checkInterval:()J
      47: lconst_1
      48: lcmp
      49: ifge          62
      52: new           #15                 // class java/lang/IllegalStateException
      55: dup
      56: ldc           #19                 // String Check interval setting cannot be smaller than 1
      58: invokespecial #17                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      61: athrow
      62: aload_0
      63: aload_0
      64: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      67: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
      70: iconst_0
      71: anewarray     #20                 // class java/lang/String
      74: invokestatic  #21                 // Method java/nio/file/Paths.get:(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;
      77: invokestatic  #22                 // Method org/graylog2/plugin/utilities/FileInfo.forPath:(Ljava/nio/file/Path;)Lorg/graylog2/plugin/utilities/FileInfo;
      80: putfield      #7                  // Field fileInfo:Lorg/graylog2/plugin/utilities/FileInfo;
      83: aload_0
      84: getfield      #5                  // Field lookupRef:Ljava/util/concurrent/atomic/AtomicReference;
      87: aload_0
      88: invokespecial #23                 // Method parseCSVFile:()Ljava/util/Map;
      91: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      94: return

  public org.joda.time.Duration refreshInterval();
    Code:
       0: aload_0
       1: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
       4: invokevirtual #18                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.checkInterval:()J
       7: invokestatic  #25                 // Method com/google/common/primitives/Ints.saturatedCast:(J)I
      10: i2l
      11: invokestatic  #26                 // Method org/joda/time/Duration.standardSeconds:(J)Lorg/joda/time/Duration;
      14: areturn

  protected void doRefresh(org.graylog2.plugin.lookup.LookupCachePurge) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #7                  // Field fileInfo:Lorg/graylog2/plugin/utilities/FileInfo;
       4: invokevirtual #27                 // Method org/graylog2/plugin/utilities/FileInfo.checkForChange:()Lorg/graylog2/plugin/utilities/FileInfo$Change;
       7: astore_2
       8: aload_2
       9: invokevirtual #28                 // Method org/graylog2/plugin/utilities/FileInfo$Change.isChanged:()Z
      12: ifne          26
      15: aload_0
      16: invokevirtual #29                 // Method getError:()Ljava/util/Optional;
      19: invokevirtual #30                 // Method java/util/Optional.isPresent:()Z
      22: ifne          26
      25: return
      26: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      29: ldc           #31                 // String CSV file {} has changed, updating data
      31: aload_0
      32: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      35: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
      38: invokeinterface #13,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      43: aload_0
      44: getfield      #5                  // Field lookupRef:Ljava/util/concurrent/atomic/AtomicReference;
      47: aload_0
      48: invokespecial #23                 // Method parseCSVFile:()Ljava/util/Map;
      51: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      54: aload_1
      55: invokeinterface #32,  1           // InterfaceMethod org/graylog2/plugin/lookup/LookupCachePurge.purgeAll:()V
      60: aload_0
      61: aload_2
      62: invokevirtual #33                 // Method org/graylog2/plugin/utilities/FileInfo$Change.fileInfo:()Lorg/graylog2/plugin/utilities/FileInfo;
      65: putfield      #7                  // Field fileInfo:Lorg/graylog2/plugin/utilities/FileInfo;
      68: aload_0
      69: invokevirtual #34                 // Method clearError:()V
      72: goto          129
      75: astore_2
      76: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      79: ldc           #36                 // String Couldn\'t check data adapter <{}> CSV file {} for updates: {} {}
      81: iconst_4
      82: anewarray     #37                 // class java/lang/Object
      85: dup
      86: iconst_0
      87: aload_0
      88: invokevirtual #38                 // Method name:()Ljava/lang/String;
      91: aastore
      92: dup
      93: iconst_1
      94: aload_0
      95: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      98: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
     101: aastore
     102: dup
     103: iconst_2
     104: aload_2
     105: invokevirtual #39                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     108: invokevirtual #40                 // Method java/lang/Class.getCanonicalName:()Ljava/lang/String;
     111: aastore
     112: dup
     113: iconst_3
     114: aload_2
     115: invokevirtual #41                 // Method java/io/IOException.getMessage:()Ljava/lang/String;
     118: aastore
     119: invokeinterface #42,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     124: aload_0
     125: aload_2
     126: invokevirtual #43                 // Method setError:(Ljava/lang/Throwable;)V
     129: return
    Exception table:
       from    to  target type
           0    25    75   Class java/io/IOException
          26    72    75   Class java/io/IOException

  private java.util.Map<java.lang.String, java.lang.String> parseCSVFile() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
       4: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
       7: iconst_0
       8: anewarray     #20                 // class java/lang/String
      11: invokestatic  #21                 // Method java/nio/file/Paths.get:(Ljava/lang/String;[Ljava/lang/String;)Ljava/nio/file/Path;
      14: iconst_0
      15: anewarray     #44                 // class java/nio/file/OpenOption
      18: invokestatic  #45                 // Method java/nio/file/Files.newInputStream:(Ljava/nio/file/Path;[Ljava/nio/file/OpenOption;)Ljava/io/InputStream;
      21: astore_1
      22: new           #46                 // class java/io/InputStreamReader
      25: dup
      26: aload_1
      27: getstatic     #47                 // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
      30: invokespecial #48                 // Method java/io/InputStreamReader."<init>":(Ljava/io/InputStream;Ljava/nio/charset/Charset;)V
      33: astore_2
      34: invokestatic  #49                 // Method com/google/common/collect/ImmutableMap.builder:()Lcom/google/common/collect/ImmutableMap$Builder;
      37: astore_3
      38: new           #50                 // class au/com/bytecode/opencsv/CSVReader
      41: dup
      42: aload_2
      43: aload_0
      44: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      47: invokevirtual #51                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.separatorAsChar:()C
      50: aload_0
      51: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
      54: invokevirtual #52                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.quotecharAsChar:()C
      57: invokespecial #53                 // Method au/com/bytecode/opencsv/CSVReader."<init>":(Ljava/io/Reader;CC)V
      60: astore        4
      62: aconst_null
      63: astore        5
      65: iconst_0
      66: istore        6
      68: iconst_m1
      69: istore        7
      71: iconst_m1
      72: istore        8
      74: aload         4
      76: invokevirtual #54                 // Method au/com/bytecode/opencsv/CSVReader.readNext:()[Ljava/lang/String;
      79: astore        9
      81: aload         9
      83: ifnonnull     89
      86: goto          257
      89: iinc          6, 1
      92: iload         6
      94: iconst_1
      95: if_icmpne     185
      98: iconst_0
      99: istore        10
     101: aload         9
     103: astore        11
     105: aload         11
     107: arraylength
     108: istore        12
     110: iconst_0
     111: istore        13
     113: iload         13
     115: iload         12
     117: if_icmpge     182
     120: aload         11
     122: iload         13
     124: aaload
     125: astore        14
     127: aload         14
     129: invokestatic  #14                 // Method com/google/common/base/Strings.isNullOrEmpty:(Ljava/lang/String;)Z
     132: ifne          173
     135: aload_0
     136: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     139: invokevirtual #55                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.keyColumn:()Ljava/lang/String;
     142: aload         14
     144: invokevirtual #56                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     147: ifeq          154
     150: iload         10
     152: istore        7
     154: aload_0
     155: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     158: invokevirtual #57                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.valueColumn:()Ljava/lang/String;
     161: aload         14
     163: invokevirtual #56                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     166: ifeq          173
     169: iload         10
     171: istore        8
     173: iinc          10, 1
     176: iinc          13, 1
     179: goto          113
     182: goto          254
     185: iload         7
     187: iflt          195
     190: iload         8
     192: ifge          205
     195: new           #15                 // class java/lang/IllegalStateException
     198: dup
     199: ldc           #58                 // String Couldn\'t detect column number for key or value - check CSV file format
     201: invokespecial #17                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     204: athrow
     205: aload_0
     206: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     209: invokevirtual #59                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.isCaseInsensitiveLookup:()Z
     212: ifeq          239
     215: aload_3
     216: aload         9
     218: iload         7
     220: aaload
     221: getstatic     #60                 // Field java/util/Locale.ENGLISH:Ljava/util/Locale;
     224: invokevirtual #61                 // Method java/lang/String.toLowerCase:(Ljava/util/Locale;)Ljava/lang/String;
     227: aload         9
     229: iload         8
     231: aaload
     232: invokevirtual #62                 // Method com/google/common/collect/ImmutableMap$Builder.put:(Ljava/lang/Object;Ljava/lang/Object;)Lcom/google/common/collect/ImmutableMap$Builder;
     235: pop
     236: goto          254
     239: aload_3
     240: aload         9
     242: iload         7
     244: aaload
     245: aload         9
     247: iload         8
     249: aaload
     250: invokevirtual #62                 // Method com/google/common/collect/ImmutableMap$Builder.put:(Ljava/lang/Object;Ljava/lang/Object;)Lcom/google/common/collect/ImmutableMap$Builder;
     253: pop
     254: goto          74
     257: aload         5
     259: ifnull        282
     262: aload         4
     264: invokevirtual #63                 // Method au/com/bytecode/opencsv/CSVReader.close:()V
     267: goto          334
     270: astore        6
     272: aload         5
     274: aload         6
     276: invokevirtual #65                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     279: goto          334
     282: aload         4
     284: invokevirtual #63                 // Method au/com/bytecode/opencsv/CSVReader.close:()V
     287: goto          334
     290: astore        6
     292: aload         6
     294: astore        5
     296: aload         6
     298: athrow
     299: astore        15
     301: aload         5
     303: ifnull        326
     306: aload         4
     308: invokevirtual #63                 // Method au/com/bytecode/opencsv/CSVReader.close:()V
     311: goto          331
     314: astore        16
     316: aload         5
     318: aload         16
     320: invokevirtual #65                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     323: goto          331
     326: aload         4
     328: invokevirtual #63                 // Method au/com/bytecode/opencsv/CSVReader.close:()V
     331: aload         15
     333: athrow
     334: goto          415
     337: astore        4
     339: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
     342: ldc           #67                 // String Couldn\'t parse CSV file {} (settings separator=<{}> quotechar=<{}> key_column=<{}> value_column=<{}>)
     344: bipush        6
     346: anewarray     #37                 // class java/lang/Object
     349: dup
     350: iconst_0
     351: aload_0
     352: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     355: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
     358: aastore
     359: dup
     360: iconst_1
     361: aload_0
     362: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     365: invokevirtual #68                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.separator:()Ljava/lang/String;
     368: aastore
     369: dup
     370: iconst_2
     371: aload_0
     372: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     375: invokevirtual #69                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.quotechar:()Ljava/lang/String;
     378: aastore
     379: dup
     380: iconst_3
     381: aload_0
     382: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     385: invokevirtual #55                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.keyColumn:()Ljava/lang/String;
     388: aastore
     389: dup
     390: iconst_4
     391: aload_0
     392: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
     395: invokevirtual #57                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.valueColumn:()Ljava/lang/String;
     398: aastore
     399: dup
     400: iconst_5
     401: aload         4
     403: aastore
     404: invokeinterface #42,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     409: aload_0
     410: aload         4
     412: invokevirtual #43                 // Method setError:(Ljava/lang/Throwable;)V
     415: aload_3
     416: invokevirtual #70                 // Method com/google/common/collect/ImmutableMap$Builder.build:()Lcom/google/common/collect/ImmutableMap;
     419: areturn
    Exception table:
       from    to  target type
         262   267   270   Class java/lang/Throwable
          65   257   290   Class java/lang/Throwable
          65   257   299   any
         306   311   314   Class java/lang/Throwable
         290   301   299   any
          38   334   337   Class java/lang/Exception

  public void doStop() throws java.lang.Exception;
    Code:
       0: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #71                 // String Stopping CSV data adapter for file: {}
       5: aload_0
       6: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
       9: invokevirtual #12                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.path:()Ljava/lang/String;
      12: invokeinterface #13,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      17: return

  public org.graylog2.plugin.lookup.LookupResult doGet(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #9                  // Field config:Lorg/graylog2/lookup/adapters/CSVFileDataAdapter$Config;
       4: invokevirtual #59                 // Method org/graylog2/lookup/adapters/CSVFileDataAdapter$Config.isCaseInsensitiveLookup:()Z
       7: ifeq          23
      10: aload_1
      11: invokestatic  #72                 // Method java/lang/String.valueOf:(Ljava/lang/Object;)Ljava/lang/String;
      14: getstatic     #60                 // Field java/util/Locale.ENGLISH:Ljava/util/Locale;
      17: invokevirtual #61                 // Method java/lang/String.toLowerCase:(Ljava/util/Locale;)Ljava/lang/String;
      20: goto          27
      23: aload_1
      24: invokestatic  #72                 // Method java/lang/String.valueOf:(Ljava/lang/Object;)Ljava/lang/String;
      27: astore_2
      28: aload_0
      29: getfield      #5                  // Field lookupRef:Ljava/util/concurrent/atomic/AtomicReference;
      32: invokevirtual #73                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      35: checkcast     #74                 // class java/util/Map
      38: aload_2
      39: invokeinterface #75,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      44: checkcast     #20                 // class java/lang/String
      47: astore_3
      48: aload_3
      49: ifnonnull     56
      52: invokestatic  #76                 // Method org/graylog2/plugin/lookup/LookupResult.empty:()Lorg/graylog2/plugin/lookup/LookupResult;
      55: areturn
      56: aload_3
      57: invokestatic  #77                 // Method org/graylog2/plugin/lookup/LookupResult.single:(Ljava/lang/CharSequence;)Lorg/graylog2/plugin/lookup/LookupResult;
      60: areturn

  public void set(java.lang.Object, java.lang.Object);
    Code:
       0: return

  static {};
    Code:
       0: ldc           #78                 // class org/graylog2/lookup/adapters/CSVFileDataAdapter
       2: invokestatic  #79                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

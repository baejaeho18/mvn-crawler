Compiled from "IndexRetentionThread.java"
public class org.graylog2.periodical.IndexRetentionThread extends org.graylog2.plugin.periodical.Periodical {
  private static final org.slf4j.Logger LOG;

  private final org.graylog2.configuration.ElasticsearchConfiguration configuration;

  private final org.graylog2.indexer.IndexSetRegistry indexSetRegistry;

  private final org.graylog2.indexer.cluster.Cluster cluster;

  private final org.graylog2.plugin.system.NodeId nodeId;

  private final org.graylog2.notifications.NotificationService notificationService;

  private final java.util.Map<java.lang.String, javax.inject.Provider<org.graylog2.plugin.indexer.retention.RetentionStrategy>> retentionStrategyMap;

  public org.graylog2.periodical.IndexRetentionThread(org.graylog2.configuration.ElasticsearchConfiguration, org.graylog2.indexer.IndexSetRegistry, org.graylog2.indexer.cluster.Cluster, org.graylog2.plugin.system.NodeId, org.graylog2.notifications.NotificationService, java.util.Map<java.lang.String, javax.inject.Provider<org.graylog2.plugin.indexer.retention.RetentionStrategy>>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/plugin/periodical/Periodical."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field configuration:Lorg/graylog2/configuration/ElasticsearchConfiguration;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field indexSetRegistry:Lorg/graylog2/indexer/IndexSetRegistry;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field nodeId:Lorg/graylog2/plugin/system/NodeId;
      25: aload_0
      26: aload         5
      28: putfield      #6                  // Field notificationService:Lorg/graylog2/notifications/NotificationService;
      31: aload_0
      32: aload         6
      34: putfield      #7                  // Field retentionStrategyMap:Ljava/util/Map;
      37: return

  public void doRun();
    Code:
       0: aload_0
       1: getfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
       4: invokevirtual #8                  // Method org/graylog2/indexer/cluster/Cluster.isConnected:()Z
       7: ifeq          20
      10: aload_0
      11: getfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
      14: invokevirtual #9                  // Method org/graylog2/indexer/cluster/Cluster.isHealthy:()Z
      17: ifne          31
      20: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      23: ldc           #11                 // String Elasticsearch cluster not available, skipping index retention checks.
      25: invokeinterface #12,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      30: return
      31: aload_0
      32: getfield      #3                  // Field indexSetRegistry:Lorg/graylog2/indexer/IndexSetRegistry;
      35: invokeinterface #13,  1           // InterfaceMethod org/graylog2/indexer/IndexSetRegistry.iterator:()Ljava/util/Iterator;
      40: astore_1
      41: aload_1
      42: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      47: ifeq          202
      50: aload_1
      51: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      56: checkcast     #16                 // class org/graylog2/indexer/IndexSet
      59: astore_2
      60: aload_2
      61: invokeinterface #17,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getConfig:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
      66: invokevirtual #18                 // Method org/graylog2/indexer/indexset/IndexSetConfig.isWritable:()Z
      69: ifne          103
      72: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      75: ldc           #19                 // String Skipping non-writable index set <{}> ({})
      77: aload_2
      78: invokeinterface #17,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getConfig:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
      83: invokevirtual #20                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
      86: aload_2
      87: invokeinterface #17,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getConfig:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
      92: invokevirtual #21                 // Method org/graylog2/indexer/indexset/IndexSetConfig.title:()Ljava/lang/String;
      95: invokeinterface #22,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     100: goto          41
     103: aload_2
     104: invokeinterface #17,  1           // InterfaceMethod org/graylog2/indexer/IndexSet.getConfig:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
     109: astore_3
     110: aload_0
     111: getfield      #7                  // Field retentionStrategyMap:Ljava/util/Map;
     114: aload_3
     115: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategyClass:()Ljava/lang/String;
     118: invokeinterface #24,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     123: checkcast     #25                 // class javax/inject/Provider
     126: astore        4
     128: aload         4
     130: ifnonnull     183
     133: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
     136: ldc           #26                 // String Retention strategy \"{}\" not found, not running index retention!
     138: aload_3
     139: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategyClass:()Ljava/lang/String;
     142: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     147: aload_0
     148: ldc           #28                 // String Index Retention Problem!
     150: new           #29                 // class java/lang/StringBuilder
     153: dup
     154: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
     157: ldc           #31                 // String Index retention strategy
     159: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     162: aload_3
     163: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategyClass:()Ljava/lang/String;
     166: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     169: ldc           #33                 // String  not found! Please fix your index retention configuration!
     171: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     174: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     177: invokespecial #35                 // Method retentionProblemNotification:(Ljava/lang/String;Ljava/lang/String;)V
     180: goto          41
     183: aload         4
     185: invokeinterface #36,  1           // InterfaceMethod javax/inject/Provider.get:()Ljava/lang/Object;
     190: checkcast     #37                 // class org/graylog2/plugin/indexer/retention/RetentionStrategy
     193: aload_2
     194: invokeinterface #38,  2           // InterfaceMethod org/graylog2/plugin/indexer/retention/RetentionStrategy.retain:(Lorg/graylog2/indexer/IndexSet;)V
     199: goto          41
     202: return

  private void retentionProblemNotification(java.lang.String, java.lang.String);
    Code:
       0: aload_0
       1: getfield      #6                  // Field notificationService:Lorg/graylog2/notifications/NotificationService;
       4: invokeinterface #39,  1           // InterfaceMethod org/graylog2/notifications/NotificationService.buildNow:()Lorg/graylog2/notifications/Notification;
       9: aload_0
      10: getfield      #5                  // Field nodeId:Lorg/graylog2/plugin/system/NodeId;
      13: invokevirtual #40                 // Method org/graylog2/plugin/system/NodeId.toString:()Ljava/lang/String;
      16: invokeinterface #41,  2           // InterfaceMethod org/graylog2/notifications/Notification.addNode:(Ljava/lang/String;)Lorg/graylog2/notifications/Notification;
      21: getstatic     #42                 // Field org/graylog2/notifications/Notification$Type.GENERIC:Lorg/graylog2/notifications/Notification$Type;
      24: invokeinterface #43,  2           // InterfaceMethod org/graylog2/notifications/Notification.addType:(Lorg/graylog2/notifications/Notification$Type;)Lorg/graylog2/notifications/Notification;
      29: getstatic     #44                 // Field org/graylog2/notifications/Notification$Severity.URGENT:Lorg/graylog2/notifications/Notification$Severity;
      32: invokeinterface #45,  2           // InterfaceMethod org/graylog2/notifications/Notification.addSeverity:(Lorg/graylog2/notifications/Notification$Severity;)Lorg/graylog2/notifications/Notification;
      37: ldc           #46                 // String title
      39: aload_1
      40: invokeinterface #47,  3           // InterfaceMethod org/graylog2/notifications/Notification.addDetail:(Ljava/lang/String;Ljava/lang/Object;)Lorg/graylog2/notifications/Notification;
      45: ldc           #48                 // String description
      47: aload_2
      48: invokeinterface #47,  3           // InterfaceMethod org/graylog2/notifications/Notification.addDetail:(Ljava/lang/String;Ljava/lang/Object;)Lorg/graylog2/notifications/Notification;
      53: astore_3
      54: aload_0
      55: getfield      #6                  // Field notificationService:Lorg/graylog2/notifications/NotificationService;
      58: aload_3
      59: invokeinterface #49,  2           // InterfaceMethod org/graylog2/notifications/NotificationService.publishIfFirst:(Lorg/graylog2/notifications/Notification;)Z
      64: pop
      65: return

  protected org.slf4j.Logger getLogger();
    Code:
       0: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  public boolean runsForever();
    Code:
       0: iconst_0
       1: ireturn

  public boolean stopOnGracefulShutdown();
    Code:
       0: iconst_1
       1: ireturn

  public boolean masterOnly();
    Code:
       0: iconst_1
       1: ireturn

  public boolean startOnThisNode();
    Code:
       0: aload_0
       1: getfield      #2                  // Field configuration:Lorg/graylog2/configuration/ElasticsearchConfiguration;
       4: invokevirtual #50                 // Method org/graylog2/configuration/ElasticsearchConfiguration.performRetention:()Z
       7: ireturn

  public boolean isDaemon();
    Code:
       0: iconst_0
       1: ireturn

  public int getInitialDelaySeconds();
    Code:
       0: iconst_0
       1: ireturn

  public int getPeriodSeconds();
    Code:
       0: getstatic     #51                 // Field java/util/concurrent/TimeUnit.MINUTES:Ljava/util/concurrent/TimeUnit;
       3: ldc2_w        #52                 // long 5l
       6: invokevirtual #54                 // Method java/util/concurrent/TimeUnit.toSeconds:(J)J
       9: l2i
      10: ireturn

  static {};
    Code:
       0: ldc           #55                 // class org/graylog2/periodical/IndexRetentionThread
       2: invokestatic  #56                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

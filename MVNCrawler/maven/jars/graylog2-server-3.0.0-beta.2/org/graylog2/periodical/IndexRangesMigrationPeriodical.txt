Compiled from "IndexRangesMigrationPeriodical.java"
public class org.graylog2.periodical.IndexRangesMigrationPeriodical extends org.graylog2.plugin.periodical.Periodical {
  private static final org.slf4j.Logger LOG;

  private final org.graylog2.indexer.cluster.Cluster cluster;

  private final org.graylog2.indexer.IndexSetRegistry indexSetRegistry;

  private final org.graylog2.indexer.ranges.IndexRangeService indexRangeService;

  private final org.graylog2.notifications.NotificationService notificationService;

  private final org.graylog2.indexer.ranges.LegacyMongoIndexRangeService legacyMongoIndexRangeService;

  private final org.graylog2.plugin.cluster.ClusterConfigService clusterConfigService;

  public org.graylog2.periodical.IndexRangesMigrationPeriodical(org.graylog2.indexer.cluster.Cluster, org.graylog2.indexer.IndexSetRegistry, org.graylog2.indexer.ranges.IndexRangeService, org.graylog2.notifications.NotificationService, org.graylog2.indexer.ranges.LegacyMongoIndexRangeService, org.graylog2.plugin.cluster.ClusterConfigService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/plugin/periodical/Periodical."<init>":()V
       4: aload_0
       5: aload_1
       6: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
       9: checkcast     #3                  // class org/graylog2/indexer/cluster/Cluster
      12: putfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
      15: aload_0
      16: aload_2
      17: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      20: checkcast     #5                  // class org/graylog2/indexer/IndexSetRegistry
      23: putfield      #6                  // Field indexSetRegistry:Lorg/graylog2/indexer/IndexSetRegistry;
      26: aload_0
      27: aload_3
      28: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      31: checkcast     #7                  // class org/graylog2/indexer/ranges/IndexRangeService
      34: putfield      #8                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
      37: aload_0
      38: aload         4
      40: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      43: checkcast     #9                  // class org/graylog2/notifications/NotificationService
      46: putfield      #10                 // Field notificationService:Lorg/graylog2/notifications/NotificationService;
      49: aload_0
      50: aload         5
      52: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      55: checkcast     #11                 // class org/graylog2/indexer/ranges/LegacyMongoIndexRangeService
      58: putfield      #12                 // Field legacyMongoIndexRangeService:Lorg/graylog2/indexer/ranges/LegacyMongoIndexRangeService;
      61: aload_0
      62: aload         6
      64: invokestatic  #2                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      67: checkcast     #13                 // class org/graylog2/plugin/cluster/ClusterConfigService
      70: putfield      #14                 // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      73: return

  public void doRun();
    Code:
       0: aload_0
       1: getfield      #14                 // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       4: ldc           #15                 // class org/graylog2/periodical/IndexRangesMigrationPeriodical$MongoIndexRangesMigrationComplete
       6: invokeinterface #16,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: checkcast     #15                 // class org/graylog2/periodical/IndexRangesMigrationPeriodical$MongoIndexRangesMigrationComplete
      14: astore_1
      15: aload_1
      16: ifnull        37
      19: aload_1
      20: getfield      #17                 // Field org/graylog2/periodical/IndexRangesMigrationPeriodical$MongoIndexRangesMigrationComplete.complete:Z
      23: ifeq          37
      26: getstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
      29: ldc           #19                 // String Migration of index ranges (pre Graylog 1.2.2) already complete. Skipping migration process.
      31: invokeinterface #20,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      36: return
      37: aload_0
      38: getfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
      41: invokevirtual #21                 // Method org/graylog2/indexer/cluster/Cluster.isConnected:()Z
      44: ifeq          57
      47: aload_0
      48: getfield      #4                  // Field cluster:Lorg/graylog2/indexer/cluster/Cluster;
      51: invokevirtual #22                 // Method org/graylog2/indexer/cluster/Cluster.isHealthy:()Z
      54: ifne          69
      57: ldc2_w        #23                 // long 5l
      60: getstatic     #25                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
      63: invokestatic  #26                 // Method com/google/common/util/concurrent/Uninterruptibles.sleepUninterruptibly:(JLjava/util/concurrent/TimeUnit;)V
      66: goto          37
      69: aload_0
      70: getfield      #6                  // Field indexSetRegistry:Lorg/graylog2/indexer/IndexSetRegistry;
      73: invokeinterface #27,  1           // InterfaceMethod org/graylog2/indexer/IndexSetRegistry.getManagedIndices:()[Ljava/lang/String;
      78: invokestatic  #28                 // Method com/google/common/collect/ImmutableSet.copyOf:([Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet;
      81: astore_2
      82: aload_0
      83: getfield      #12                 // Field legacyMongoIndexRangeService:Lorg/graylog2/indexer/ranges/LegacyMongoIndexRangeService;
      86: invokevirtual #29                 // Method org/graylog2/indexer/ranges/LegacyMongoIndexRangeService.findAll:()Ljava/util/SortedSet;
      89: astore_3
      90: aload_3
      91: invokeinterface #30,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
      96: astore        4
      98: aload         4
     100: invokeinterface #31,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     105: ifeq          193
     108: aload         4
     110: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     115: checkcast     #33                 // class org/graylog2/indexer/ranges/IndexRange
     118: astore        5
     120: aload_2
     121: aload         5
     123: invokeinterface #34,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRange.indexName:()Ljava/lang/String;
     128: invokeinterface #35,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     133: ifeq          163
     136: getstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
     139: ldc           #36                 // String Migrating index range from MongoDB: {}
     141: aload         5
     143: invokeinterface #37,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     148: aload_0
     149: getfield      #8                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     152: aload         5
     154: invokeinterface #38,  2           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.save:(Lorg/graylog2/indexer/ranges/IndexRange;)Lorg/mongojack/WriteResult;
     159: pop
     160: goto          175
     163: getstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
     166: ldc           #39                 // String Removing stale index range from MongoDB: {}
     168: aload         5
     170: invokeinterface #37,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     175: aload_0
     176: getfield      #12                 // Field legacyMongoIndexRangeService:Lorg/graylog2/indexer/ranges/LegacyMongoIndexRangeService;
     179: aload         5
     181: invokeinterface #34,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRange.indexName:()Ljava/lang/String;
     186: invokevirtual #40                 // Method org/graylog2/indexer/ranges/LegacyMongoIndexRangeService.delete:(Ljava/lang/String;)I
     189: pop
     190: goto          98
     193: aload_2
     194: invokeinterface #41,  1           // InterfaceMethod java/util/Set.size:()I
     199: istore        4
     201: aload_0
     202: getfield      #8                  // Field indexRangeService:Lorg/graylog2/indexer/ranges/IndexRangeService;
     205: invokeinterface #42,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRangeService.findAll:()Ljava/util/SortedSet;
     210: astore        5
     212: aload         5
     214: invokeinterface #43,  1           // InterfaceMethod java/util/SortedSet.size:()I
     219: istore        6
     221: iload         4
     223: iload         6
     225: if_icmple     441
     228: getstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
     231: ldc           #44                 // String There are more indices ({}) than there are index ranges ({}). Notifying administrator.
     233: iload         4
     235: invokestatic  #45                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     238: iload         6
     240: invokestatic  #45                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     243: invokeinterface #46,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     248: aload_2
     249: invokestatic  #47                 // Method com/google/common/collect/Sets.newHashSet:(Ljava/lang/Iterable;)Ljava/util/HashSet;
     252: astore        7
     254: aload         5
     256: aload         7
     258: invokedynamic #48,  0             // InvokeDynamic #0:accept:(Ljava/util/Set;)Ljava/util/function/Consumer;
     263: invokeinterface #49,  2           // InterfaceMethod java/util/SortedSet.forEach:(Ljava/util/function/Consumer;)V
     268: aload         7
     270: invokeinterface #50,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
     275: aload_0
     276: getfield      #6                  // Field indexSetRegistry:Lorg/graylog2/indexer/IndexSetRegistry;
     279: dup
     280: invokestatic  #51                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
     283: pop
     284: invokedynamic #52,  0             // InvokeDynamic #1:apply:(Lorg/graylog2/indexer/IndexSetRegistry;)Ljava/util/function/Function;
     289: invokeinterface #53,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     294: invokedynamic #54,  0             // InvokeDynamic #2:test:()Ljava/util/function/Predicate;
     299: invokeinterface #55,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
     304: invokedynamic #56,  0             // InvokeDynamic #3:apply:()Ljava/util/function/Function;
     309: invokeinterface #53,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     314: invokedynamic #57,  0             // InvokeDynamic #4:apply:()Ljava/util/function/Function;
     319: invokeinterface #53,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     324: invokedynamic #58,  0             // InvokeDynamic #5:apply:()Ljava/util/function/Function;
     329: invokeinterface #53,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     334: invokestatic  #59                 // Method java/util/stream/Collectors.toSet:()Ljava/util/stream/Collector;
     337: invokeinterface #60,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
     342: checkcast     #61                 // class java/util/Set
     345: astore        8
     347: aload_0
     348: getfield      #10                 // Field notificationService:Lorg/graylog2/notifications/NotificationService;
     351: invokeinterface #62,  1           // InterfaceMethod org/graylog2/notifications/NotificationService.buildNow:()Lorg/graylog2/notifications/Notification;
     356: getstatic     #63                 // Field org/graylog2/notifications/Notification$Severity.URGENT:Lorg/graylog2/notifications/Notification$Severity;
     359: invokeinterface #64,  2           // InterfaceMethod org/graylog2/notifications/Notification.addSeverity:(Lorg/graylog2/notifications/Notification$Severity;)Lorg/graylog2/notifications/Notification;
     364: getstatic     #65                 // Field org/graylog2/notifications/Notification$Type.INDEX_RANGES_RECALCULATION:Lorg/graylog2/notifications/Notification$Type;
     367: invokeinterface #66,  2           // InterfaceMethod org/graylog2/notifications/Notification.addType:(Lorg/graylog2/notifications/Notification$Type;)Lorg/graylog2/notifications/Notification;
     372: ldc           #67                 // String indices
     374: iload         4
     376: invokestatic  #45                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     379: invokeinterface #68,  3           // InterfaceMethod org/graylog2/notifications/Notification.addDetail:(Ljava/lang/String;Ljava/lang/Object;)Lorg/graylog2/notifications/Notification;
     384: ldc           #69                 // String index_ranges
     386: iload         6
     388: invokestatic  #45                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     391: invokeinterface #68,  3           // InterfaceMethod org/graylog2/notifications/Notification.addDetail:(Ljava/lang/String;Ljava/lang/Object;)Lorg/graylog2/notifications/Notification;
     396: ldc           #70                 // String index_sets
     398: aload         8
     400: invokeinterface #71,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
     405: ifeq          412
     408: aconst_null
     409: goto          422
     412: ldc           #72                 // String ,
     414: invokestatic  #73                 // Method com/google/common/base/Joiner.on:(Ljava/lang/String;)Lcom/google/common/base/Joiner;
     417: aload         8
     419: invokevirtual #74                 // Method com/google/common/base/Joiner.join:(Ljava/lang/Iterable;)Ljava/lang/String;
     422: invokeinterface #68,  3           // InterfaceMethod org/graylog2/notifications/Notification.addDetail:(Ljava/lang/String;Ljava/lang/Object;)Lorg/graylog2/notifications/Notification;
     427: astore        9
     429: aload_0
     430: getfield      #10                 // Field notificationService:Lorg/graylog2/notifications/NotificationService;
     433: aload         9
     435: invokeinterface #75,  2           // InterfaceMethod org/graylog2/notifications/NotificationService.publishIfFirst:(Lorg/graylog2/notifications/Notification;)Z
     440: pop
     441: aload_0
     442: getfield      #14                 // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     445: new           #15                 // class org/graylog2/periodical/IndexRangesMigrationPeriodical$MongoIndexRangesMigrationComplete
     448: dup
     449: iconst_1
     450: invokespecial #76                 // Method org/graylog2/periodical/IndexRangesMigrationPeriodical$MongoIndexRangesMigrationComplete."<init>":(Z)V
     453: invokeinterface #77,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     458: return

  public boolean runsForever();
    Code:
       0: iconst_1
       1: ireturn

  public boolean stopOnGracefulShutdown();
    Code:
       0: iconst_0
       1: ireturn

  public boolean masterOnly();
    Code:
       0: iconst_1
       1: ireturn

  public boolean startOnThisNode();
    Code:
       0: iconst_1
       1: ireturn

  public boolean isDaemon();
    Code:
       0: iconst_1
       1: ireturn

  public int getInitialDelaySeconds();
    Code:
       0: iconst_0
       1: ireturn

  public int getPeriodSeconds();
    Code:
       0: iconst_0
       1: ireturn

  protected org.slf4j.Logger getLogger();
    Code:
       0: getstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  private static void lambda$doRun$0(java.util.Set, org.graylog2.indexer.ranges.IndexRange);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #34,  1           // InterfaceMethod org/graylog2/indexer/ranges/IndexRange.indexName:()Ljava/lang/String;
       7: invokeinterface #78,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      12: pop
      13: return

  static {};
    Code:
       0: ldc           #79                 // class org/graylog2/periodical/IndexRangesMigrationPeriodical
       2: invokestatic  #80                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #18                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

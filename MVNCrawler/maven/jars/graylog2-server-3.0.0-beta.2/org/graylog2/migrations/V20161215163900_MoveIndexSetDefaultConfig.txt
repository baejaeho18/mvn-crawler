Compiled from "V20161215163900_MoveIndexSetDefaultConfig.java"
public class org.graylog2.migrations.V20161215163900_MoveIndexSetDefaultConfig extends org.graylog2.migrations.Migration {
  private static final org.slf4j.Logger LOG;

  private static final java.lang.String FIELD_DEFAULT;

  private static final java.lang.String FIELD_CREATION_DATE;

  private static final java.lang.String FIELD_TITLE;

  private static final java.lang.String FIELD_ID;

  private final com.mongodb.client.MongoCollection<org.bson.Document> collection;

  private final org.graylog2.plugin.cluster.ClusterConfigService clusterConfigService;

  public org.graylog2.migrations.V20161215163900_MoveIndexSetDefaultConfig(org.graylog2.database.MongoConnection, org.graylog2.plugin.cluster.ClusterConfigService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/migrations/Migration."<init>":()V
       4: aload_0
       5: aload_1
       6: invokeinterface #2,  1            // InterfaceMethod org/graylog2/database/MongoConnection.getMongoDatabase:()Lcom/mongodb/client/MongoDatabase;
      11: ldc           #3                  // String index_sets
      13: invokeinterface #4,  2            // InterfaceMethod com/mongodb/client/MongoDatabase.getCollection:(Ljava/lang/String;)Lcom/mongodb/client/MongoCollection;
      18: putfield      #5                  // Field collection:Lcom/mongodb/client/MongoCollection;
      21: aload_0
      22: aload_2
      23: putfield      #6                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      26: return

  public java.time.ZonedDateTime createdAt();
    Code:
       0: ldc           #7                  // String 2016-12-15T16:39:00Z
       2: invokestatic  #8                  // Method java/time/ZonedDateTime.parse:(Ljava/lang/CharSequence;)Ljava/time/ZonedDateTime;
       5: areturn

  public void upgrade();
    Code:
       0: aload_0
       1: getfield      #6                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       4: ldc           #9                  // class org/graylog2/migrations/V20161215163900_MoveIndexSetDefaultConfig$MigrationCompleted
       6: invokeinterface #10,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: ifnull        25
      14: getstatic     #11                 // Field LOG:Lorg/slf4j/Logger;
      17: ldc           #12                 // String Migration already done.
      19: invokeinterface #13,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      24: return
      25: aload_0
      26: getfield      #6                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      29: ldc           #14                 // class org/graylog2/indexer/indexset/DefaultIndexSetConfig
      31: invokeinterface #10,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      36: ifnull        43
      39: iconst_1
      40: goto          44
      43: iconst_0
      44: istore_1
      45: invokestatic  #15                 // Method com/google/common/collect/ImmutableSet.builder:()Lcom/google/common/collect/ImmutableSet$Builder;
      48: astore_2
      49: aload_0
      50: getfield      #5                  // Field collection:Lcom/mongodb/client/MongoCollection;
      53: ldc           #17                 // String default
      55: invokestatic  #18                 // Method com/mongodb/client/model/Filters.exists:(Ljava/lang/String;)Lorg/bson/conversions/Bson;
      58: invokeinterface #19,  2           // InterfaceMethod com/mongodb/client/MongoCollection.find:(Lorg/bson/conversions/Bson;)Lcom/mongodb/client/FindIterable;
      63: iconst_1
      64: anewarray     #20                 // class java/lang/String
      67: dup
      68: iconst_0
      69: ldc           #21                 // String creation_date
      71: aastore
      72: invokestatic  #22                 // Method com/mongodb/client/model/Sorts.ascending:([Ljava/lang/String;)Lorg/bson/conversions/Bson;
      75: invokeinterface #23,  2           // InterfaceMethod com/mongodb/client/FindIterable.sort:(Lorg/bson/conversions/Bson;)Lcom/mongodb/client/FindIterable;
      80: astore_3
      81: aload_3
      82: invokeinterface #24,  1           // InterfaceMethod com/mongodb/client/FindIterable.iterator:()Lcom/mongodb/client/MongoCursor;
      87: astore        4
      89: aload         4
      91: invokeinterface #25,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      96: ifeq          258
      99: aload         4
     101: invokeinterface #26,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     106: checkcast     #27                 // class org/bson/Document
     109: astore        5
     111: aload         5
     113: ldc           #28                 // String _id
     115: invokevirtual #29                 // Method org/bson/Document.getObjectId:(Ljava/lang/Object;)Lorg/bson/types/ObjectId;
     118: astore        6
     120: aload         6
     122: invokevirtual #30                 // Method org/bson/types/ObjectId.toHexString:()Ljava/lang/String;
     125: astore        7
     127: aload         5
     129: ldc           #17                 // String default
     131: invokevirtual #31                 // Method org/bson/Document.getBoolean:(Ljava/lang/Object;)Ljava/lang/Boolean;
     134: iconst_0
     135: invokestatic  #32                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     138: invokestatic  #33                 // Method com/google/common/base/MoreObjects.firstNonNull:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     141: checkcast     #34                 // class java/lang/Boolean
     144: invokevirtual #35                 // Method java/lang/Boolean.booleanValue:()Z
     147: istore        8
     149: iload_1
     150: ifne          174
     153: iload         8
     155: ifeq          174
     158: iconst_1
     159: istore_1
     160: aload_0
     161: getfield      #6                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     164: aload         7
     166: invokestatic  #36                 // Method org/graylog2/indexer/indexset/DefaultIndexSetConfig.create:(Ljava/lang/String;)Lorg/graylog2/indexer/indexset/DefaultIndexSetConfig;
     169: invokeinterface #37,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     174: aload_0
     175: getfield      #5                  // Field collection:Lcom/mongodb/client/MongoCollection;
     178: ldc           #28                 // String _id
     180: aload         6
     182: invokestatic  #38                 // Method com/mongodb/client/model/Filters.eq:(Ljava/lang/String;Ljava/lang/Object;)Lorg/bson/conversions/Bson;
     185: ldc           #17                 // String default
     187: invokestatic  #39                 // Method com/mongodb/client/model/Updates.unset:(Ljava/lang/String;)Lorg/bson/conversions/Bson;
     190: invokeinterface #40,  3           // InterfaceMethod com/mongodb/client/MongoCollection.updateOne:(Lorg/bson/conversions/Bson;Lorg/bson/conversions/Bson;)Lcom/mongodb/client/result/UpdateResult;
     195: invokevirtual #41                 // Method com/mongodb/client/result/UpdateResult.getMatchedCount:()J
     198: lstore        9
     200: lload         9
     202: lconst_0
     203: lcmp
     204: ifle          236
     207: getstatic     #11                 // Field LOG:Lorg/slf4j/Logger;
     210: ldc           #42                 // String Removed <default> field from index set <{}> ({})
     212: aload         5
     214: ldc           #43                 // String title
     216: invokevirtual #44                 // Method org/bson/Document.getString:(Ljava/lang/Object;)Ljava/lang/String;
     219: aload         7
     221: invokeinterface #45,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     226: aload_2
     227: aload         7
     229: invokevirtual #46                 // Method com/google/common/collect/ImmutableSet$Builder.add:(Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet$Builder;
     232: pop
     233: goto          255
     236: getstatic     #11                 // Field LOG:Lorg/slf4j/Logger;
     239: ldc           #47                 // String Couldn\'t remove <default> field from index set <{}> ({})
     241: aload         5
     243: ldc           #43                 // String title
     245: invokevirtual #44                 // Method org/bson/Document.getString:(Ljava/lang/Object;)Ljava/lang/String;
     248: aload         7
     250: invokeinterface #48,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     255: goto          89
     258: aload_0
     259: getfield      #6                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     262: aload_2
     263: invokevirtual #49                 // Method com/google/common/collect/ImmutableSet$Builder.build:()Lcom/google/common/collect/ImmutableSet;
     266: invokestatic  #50                 // Method org/graylog2/migrations/V20161215163900_MoveIndexSetDefaultConfig$MigrationCompleted.create:(Ljava/util/Set;)Lorg/graylog2/migrations/V20161215163900_MoveIndexSetDefaultConfig$MigrationCompleted;
     269: invokeinterface #37,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     274: return

  static {};
    Code:
       0: ldc           #16                 // class org/graylog2/migrations/V20161215163900_MoveIndexSetDefaultConfig
       2: invokestatic  #51                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #11                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

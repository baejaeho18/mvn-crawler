Compiled from "V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration.java"
public class org.graylog2.migrations.V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration extends org.graylog2.migrations.Migration {
  private static final org.slf4j.Logger LOG;

  private final org.graylog2.plugin.cluster.ClusterConfigService clusterConfigService;

  private final org.graylog2.indexer.indexset.IndexSetService indexSetService;

  public org.graylog2.migrations.V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration(org.graylog2.indexer.indexset.IndexSetService, org.graylog2.plugin.cluster.ClusterConfigService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/migrations/Migration."<init>":()V
       4: aload_0
       5: aload_2
       6: putfield      #2                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       9: aload_0
      10: aload_1
      11: putfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
      14: return

  public java.time.ZonedDateTime createdAt();
    Code:
       0: ldc           #4                  // String 2016-11-24T10:47:00Z
       2: invokestatic  #5                  // Method java/time/ZonedDateTime.parse:(Ljava/lang/CharSequence;)Ljava/time/ZonedDateTime;
       5: areturn

  public void upgrade();
    Code:
       0: aload_0
       1: getfield      #2                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       4: ldc           #6                  // class org/graylog2/migrations/V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration$MigrationCompleted
       6: invokeinterface #7,  2            // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: ifnull        25
      14: getstatic     #8                  // Field LOG:Lorg/slf4j/Logger;
      17: ldc           #9                  // String Migration already completed!
      19: invokeinterface #10,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      24: return
      25: invokestatic  #11                 // Method com/google/common/collect/ImmutableSet.builder:()Lcom/google/common/collect/ImmutableSet$Builder;
      28: astore_1
      29: invokestatic  #11                 // Method com/google/common/collect/ImmutableSet.builder:()Lcom/google/common/collect/ImmutableSet$Builder;
      32: astore_2
      33: aload_0
      34: getfield      #2                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      37: ldc           #12                 // class org/graylog2/indexer/management/IndexManagementConfig
      39: invokeinterface #7,  2            // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      44: checkcast     #12                 // class org/graylog2/indexer/management/IndexManagementConfig
      47: astore_3
      48: aload_3
      49: ifnull        56
      52: iconst_1
      53: goto          57
      56: iconst_0
      57: ldc           #13                 // String Couldn\'t find index management configuration
      59: invokestatic  #14                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      62: aload_0
      63: getfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
      66: invokeinterface #15,  1           // InterfaceMethod org/graylog2/indexer/indexset/IndexSetService.findAll:()Ljava/util/List;
      71: invokeinterface #16,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      76: astore        4
      78: aload         4
      80: invokeinterface #17,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      85: ifeq          341
      88: aload         4
      90: invokeinterface #18,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      95: checkcast     #19                 // class org/graylog2/indexer/indexset/IndexSetConfig
      98: astore        5
     100: aload         5
     102: invokevirtual #20                 // Method org/graylog2/indexer/indexset/IndexSetConfig.toBuilder:()Lorg/graylog2/indexer/indexset/IndexSetConfig$Builder;
     105: astore        6
     107: aload         5
     109: invokevirtual #21                 // Method org/graylog2/indexer/indexset/IndexSetConfig.rotationStrategyClass:()Ljava/lang/String;
     112: invokestatic  #22                 // Method com/google/common/base/Strings.isNullOrEmpty:(Ljava/lang/String;)Z
     115: ifeq          183
     118: aload         5
     120: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.rotationStrategy:()Lorg/graylog2/plugin/indexer/rotation/RotationStrategyConfig;
     123: invokeinterface #24,  1           // InterfaceMethod org/graylog2/plugin/indexer/rotation/RotationStrategyConfig.type:()Ljava/lang/String;
     128: aload_3
     129: invokevirtual #25                 // Method org/graylog2/indexer/management/IndexManagementConfig.rotationStrategy:()Ljava/lang/String;
     132: invokevirtual #26                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     135: ldc           #27                 // String rotation strategy config type <%s> does not match rotation strategy <%s>
     137: aload         5
     139: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.rotationStrategy:()Lorg/graylog2/plugin/indexer/rotation/RotationStrategyConfig;
     142: invokeinterface #24,  1           // InterfaceMethod org/graylog2/plugin/indexer/rotation/RotationStrategyConfig.type:()Ljava/lang/String;
     147: aload_3
     148: invokevirtual #25                 // Method org/graylog2/indexer/management/IndexManagementConfig.rotationStrategy:()Ljava/lang/String;
     151: invokestatic  #28                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     154: getstatic     #8                  // Field LOG:Lorg/slf4j/Logger;
     157: ldc           #29                 // String Adding rotation_strategy_class <{}> to index set <{}>
     159: aload_3
     160: invokevirtual #25                 // Method org/graylog2/indexer/management/IndexManagementConfig.rotationStrategy:()Ljava/lang/String;
     163: aload         5
     165: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     168: invokeinterface #31,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     173: aload         6
     175: aload_3
     176: invokevirtual #25                 // Method org/graylog2/indexer/management/IndexManagementConfig.rotationStrategy:()Ljava/lang/String;
     179: invokevirtual #32                 // Method org/graylog2/indexer/indexset/IndexSetConfig$Builder.rotationStrategyClass:(Ljava/lang/String;)Lorg/graylog2/indexer/indexset/IndexSetConfig$Builder;
     182: pop
     183: aload         5
     185: invokevirtual #33                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategyClass:()Ljava/lang/String;
     188: invokestatic  #22                 // Method com/google/common/base/Strings.isNullOrEmpty:(Ljava/lang/String;)Z
     191: ifeq          259
     194: aload         5
     196: invokevirtual #34                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategy:()Lorg/graylog2/plugin/indexer/retention/RetentionStrategyConfig;
     199: invokeinterface #35,  1           // InterfaceMethod org/graylog2/plugin/indexer/retention/RetentionStrategyConfig.type:()Ljava/lang/String;
     204: aload_3
     205: invokevirtual #36                 // Method org/graylog2/indexer/management/IndexManagementConfig.retentionStrategy:()Ljava/lang/String;
     208: invokevirtual #26                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     211: ldc           #37                 // String retention strategy config type <%s> does not match retention strategy <%s>
     213: aload         5
     215: invokevirtual #34                 // Method org/graylog2/indexer/indexset/IndexSetConfig.retentionStrategy:()Lorg/graylog2/plugin/indexer/retention/RetentionStrategyConfig;
     218: invokeinterface #35,  1           // InterfaceMethod org/graylog2/plugin/indexer/retention/RetentionStrategyConfig.type:()Ljava/lang/String;
     223: aload_3
     224: invokevirtual #36                 // Method org/graylog2/indexer/management/IndexManagementConfig.retentionStrategy:()Ljava/lang/String;
     227: invokestatic  #28                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     230: getstatic     #8                  // Field LOG:Lorg/slf4j/Logger;
     233: ldc           #38                 // String Adding retention_strategy_class <{}> to index set <{}>
     235: aload_3
     236: invokevirtual #36                 // Method org/graylog2/indexer/management/IndexManagementConfig.retentionStrategy:()Ljava/lang/String;
     239: aload         5
     241: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     244: invokeinterface #31,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     249: aload         6
     251: aload_3
     252: invokevirtual #36                 // Method org/graylog2/indexer/management/IndexManagementConfig.retentionStrategy:()Ljava/lang/String;
     255: invokevirtual #39                 // Method org/graylog2/indexer/indexset/IndexSetConfig$Builder.retentionStrategyClass:(Ljava/lang/String;)Lorg/graylog2/indexer/indexset/IndexSetConfig$Builder;
     258: pop
     259: aload         5
     261: aload         6
     263: invokevirtual #40                 // Method org/graylog2/indexer/indexset/IndexSetConfig$Builder.build:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
     266: invokevirtual #41                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     269: ifne          314
     272: aload_0
     273: getfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
     276: aload         6
     278: invokevirtual #40                 // Method org/graylog2/indexer/indexset/IndexSetConfig$Builder.build:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
     281: invokeinterface #42,  2           // InterfaceMethod org/graylog2/indexer/indexset/IndexSetService.save:(Lorg/graylog2/indexer/indexset/IndexSetConfig;)Lorg/graylog2/indexer/indexset/IndexSetConfig;
     286: pop
     287: aload_1
     288: aload         5
     290: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     293: invokestatic  #43                 // Method java/util/Optional.ofNullable:(Ljava/lang/Object;)Ljava/util/Optional;
     296: invokedynamic #44,  0             // InvokeDynamic #0:get:()Ljava/util/function/Supplier;
     301: invokevirtual #45                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     304: checkcast     #46                 // class java/lang/String
     307: invokevirtual #47                 // Method com/google/common/collect/ImmutableSet$Builder.add:(Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet$Builder;
     310: pop
     311: goto          338
     314: aload_2
     315: aload         5
     317: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     320: invokestatic  #43                 // Method java/util/Optional.ofNullable:(Ljava/lang/Object;)Ljava/util/Optional;
     323: invokedynamic #48,  0             // InvokeDynamic #1:get:()Ljava/util/function/Supplier;
     328: invokevirtual #45                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     331: checkcast     #46                 // class java/lang/String
     334: invokevirtual #47                 // Method com/google/common/collect/ImmutableSet$Builder.add:(Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet$Builder;
     337: pop
     338: goto          78
     341: aload_0
     342: getfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
     345: invokeinterface #15,  1           // InterfaceMethod org/graylog2/indexer/indexset/IndexSetService.findAll:()Ljava/util/List;
     350: invokeinterface #49,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
     355: invokedynamic #50,  0             // InvokeDynamic #2:apply:()Ljava/util/function/Function;
     360: invokestatic  #51                 // InterfaceMethod java/util/Comparator.comparing:(Ljava/util/function/Function;)Ljava/util/Comparator;
     363: invokeinterface #52,  2           // InterfaceMethod java/util/stream/Stream.sorted:(Ljava/util/Comparator;)Ljava/util/stream/Stream;
     368: invokeinterface #53,  1           // InterfaceMethod java/util/stream/Stream.findFirst:()Ljava/util/Optional;
     373: invokedynamic #54,  0             // InvokeDynamic #3:get:()Ljava/util/function/Supplier;
     378: invokevirtual #45                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     381: checkcast     #19                 // class org/graylog2/indexer/indexset/IndexSetConfig
     384: astore        4
     386: getstatic     #8                  // Field LOG:Lorg/slf4j/Logger;
     389: ldc           #55                 // String Setting index set <{}> as default
     391: aload         4
     393: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     396: invokeinterface #56,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     401: aload_0
     402: getfield      #2                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     405: aload         4
     407: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     410: invokestatic  #57                 // Method org/graylog2/indexer/indexset/DefaultIndexSetConfig.create:(Ljava/lang/String;)Lorg/graylog2/indexer/indexset/DefaultIndexSetConfig;
     413: invokeinterface #58,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     418: aload_0
     419: getfield      #2                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     422: aload_1
     423: invokevirtual #59                 // Method com/google/common/collect/ImmutableSet$Builder.build:()Lcom/google/common/collect/ImmutableSet;
     426: aload_2
     427: invokevirtual #59                 // Method com/google/common/collect/ImmutableSet$Builder.build:()Lcom/google/common/collect/ImmutableSet;
     430: aload         4
     432: invokevirtual #30                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     435: invokestatic  #60                 // Method org/graylog2/migrations/V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration$MigrationCompleted.create:(Ljava/util/Set;Ljava/util/Set;Ljava/lang/String;)Lorg/graylog2/migrations/V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration$MigrationCompleted;
     438: invokeinterface #58,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     443: return

  private static java.lang.IllegalStateException lambda$upgrade$2();
    Code:
       0: new           #61                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #62                 // String Unable to find any index set - this should not happen!
       6: invokespecial #63                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  private static java.lang.IllegalStateException lambda$upgrade$1();
    Code:
       0: new           #61                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #64                 // String no id??
       6: invokespecial #63                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  private static java.lang.IllegalStateException lambda$upgrade$0();
    Code:
       0: new           #61                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #64                 // String no id??
       6: invokespecial #63                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  static {};
    Code:
       0: ldc           #65                 // class org/graylog2/migrations/V20161124104700_AddRetentionRotationAndDefaultFlagToIndexSetMigration
       2: invokestatic  #66                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #8                  // Field LOG:Lorg/slf4j/Logger;
       8: return
}

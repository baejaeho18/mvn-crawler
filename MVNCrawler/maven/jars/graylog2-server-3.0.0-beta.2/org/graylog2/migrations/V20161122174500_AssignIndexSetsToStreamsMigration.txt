Compiled from "V20161122174500_AssignIndexSetsToStreamsMigration.java"
public class org.graylog2.migrations.V20161122174500_AssignIndexSetsToStreamsMigration extends org.graylog2.migrations.Migration {
  private static final org.slf4j.Logger LOG;

  private final org.graylog2.streams.StreamService streamService;

  private final org.graylog2.indexer.indexset.IndexSetService indexSetService;

  private final org.graylog2.plugin.cluster.ClusterConfigService clusterConfigService;

  public org.graylog2.migrations.V20161122174500_AssignIndexSetsToStreamsMigration(org.graylog2.streams.StreamService, org.graylog2.indexer.indexset.IndexSetService, org.graylog2.plugin.cluster.ClusterConfigService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/graylog2/migrations/Migration."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field streamService:Lorg/graylog2/streams/StreamService;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
      19: return

  public java.time.ZonedDateTime createdAt();
    Code:
       0: ldc           #5                  // String 2016-11-22T17:45:00Z
       2: invokestatic  #6                  // Method java/time/ZonedDateTime.parse:(Ljava/lang/CharSequence;)Ljava/time/ZonedDateTime;
       5: areturn

  public void upgrade();
    Code:
       0: aload_0
       1: getfield      #4                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
       4: ldc           #7                  // class org/graylog2/migrations/V20161122174500_AssignIndexSetsToStreamsMigration$MigrationCompleted
       6: invokeinterface #8,  2            // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: ifnull        25
      14: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      17: ldc           #10                 // String Migration already completed.
      19: invokeinterface #11,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      24: return
      25: aload_0
      26: invokespecial #12                 // Method findDefaultIndexSet:()Lorg/graylog2/indexer/indexset/IndexSetConfig;
      29: astore_1
      30: invokestatic  #13                 // Method com/google/common/collect/ImmutableSet.builder:()Lcom/google/common/collect/ImmutableSet$Builder;
      33: astore_2
      34: invokestatic  #13                 // Method com/google/common/collect/ImmutableSet.builder:()Lcom/google/common/collect/ImmutableSet$Builder;
      37: astore_3
      38: aload_0
      39: getfield      #2                  // Field streamService:Lorg/graylog2/streams/StreamService;
      42: invokeinterface #14,  1           // InterfaceMethod org/graylog2/streams/StreamService.loadAll:()Ljava/util/List;
      47: invokeinterface #15,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      52: astore        4
      54: aload         4
      56: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      61: ifeq          211
      64: aload         4
      66: invokeinterface #17,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      71: checkcast     #18                 // class org/graylog2/plugin/streams/Stream
      74: astore        5
      76: aload         5
      78: invokeinterface #19,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getIndexSetId:()Ljava/lang/String;
      83: invokestatic  #20                 // Method com/google/common/base/Strings.isNullOrEmpty:(Ljava/lang/String;)Z
      86: ifeq          208
      89: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      92: ldc           #21                 // String Assigning index set <{}> ({}) to stream <{}> ({})
      94: iconst_4
      95: anewarray     #22                 // class java/lang/Object
      98: dup
      99: iconst_0
     100: aload_1
     101: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     104: aastore
     105: dup
     106: iconst_1
     107: aload_1
     108: invokevirtual #24                 // Method org/graylog2/indexer/indexset/IndexSetConfig.title:()Ljava/lang/String;
     111: aastore
     112: dup
     113: iconst_2
     114: aload         5
     116: invokeinterface #25,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
     121: aastore
     122: dup
     123: iconst_3
     124: aload         5
     126: invokeinterface #26,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getTitle:()Ljava/lang/String;
     131: aastore
     132: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     137: aload         5
     139: aload_1
     140: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     143: invokeinterface #28,  2           // InterfaceMethod org/graylog2/plugin/streams/Stream.setIndexSetId:(Ljava/lang/String;)V
     148: aload_0
     149: getfield      #2                  // Field streamService:Lorg/graylog2/streams/StreamService;
     152: aload         5
     154: invokeinterface #29,  2           // InterfaceMethod org/graylog2/streams/StreamService.save:(Lorg/graylog2/plugin/streams/Stream;)Ljava/lang/String;
     159: pop
     160: aload_2
     161: aload         5
     163: invokeinterface #25,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
     168: invokevirtual #30                 // Method com/google/common/collect/ImmutableSet$Builder.add:(Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet$Builder;
     171: pop
     172: goto          208
     175: astore        6
     177: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     180: ldc           #32                 // String Unable to save stream <{}>
     182: aload         5
     184: invokeinterface #25,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
     189: aload         6
     191: invokeinterface #33,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     196: aload_3
     197: aload         5
     199: invokeinterface #25,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
     204: invokevirtual #30                 // Method com/google/common/collect/ImmutableSet$Builder.add:(Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet$Builder;
     207: pop
     208: goto          54
     211: aload_0
     212: getfield      #4                  // Field clusterConfigService:Lorg/graylog2/plugin/cluster/ClusterConfigService;
     215: aload_1
     216: invokevirtual #23                 // Method org/graylog2/indexer/indexset/IndexSetConfig.id:()Ljava/lang/String;
     219: aload_2
     220: invokevirtual #34                 // Method com/google/common/collect/ImmutableSet$Builder.build:()Lcom/google/common/collect/ImmutableSet;
     223: aload_3
     224: invokevirtual #34                 // Method com/google/common/collect/ImmutableSet$Builder.build:()Lcom/google/common/collect/ImmutableSet;
     227: invokestatic  #35                 // Method org/graylog2/migrations/V20161122174500_AssignIndexSetsToStreamsMigration$MigrationCompleted.create:(Ljava/lang/String;Ljava/util/Set;Ljava/util/Set;)Lorg/graylog2/migrations/V20161122174500_AssignIndexSetsToStreamsMigration$MigrationCompleted;
     230: invokeinterface #36,  2           // InterfaceMethod org/graylog2/plugin/cluster/ClusterConfigService.write:(Ljava/lang/Object;)V
     235: return
    Exception table:
       from    to  target type
         148   172   175   Class org/graylog2/plugin/database/ValidationException

  private org.graylog2.indexer.indexset.IndexSetConfig findDefaultIndexSet();
    Code:
       0: aload_0
       1: getfield      #3                  // Field indexSetService:Lorg/graylog2/indexer/indexset/IndexSetService;
       4: invokeinterface #37,  1           // InterfaceMethod org/graylog2/indexer/indexset/IndexSetService.findAll:()Ljava/util/List;
       9: astore_1
      10: aload_1
      11: invokeinterface #38,  1           // InterfaceMethod java/util/List.size:()I
      16: iconst_2
      17: if_icmpge     24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ldc           #39                 // String Found more than one index set config!
      27: invokestatic  #40                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      30: aload_1
      31: invokeinterface #41,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      36: invokeinterface #42,  1           // InterfaceMethod java/util/stream/Stream.findFirst:()Ljava/util/Optional;
      41: invokedynamic #43,  0             // InvokeDynamic #0:get:()Ljava/util/function/Supplier;
      46: invokevirtual #44                 // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      49: checkcast     #45                 // class org/graylog2/indexer/indexset/IndexSetConfig
      52: areturn

  private static java.lang.IllegalStateException lambda$findDefaultIndexSet$0();
    Code:
       0: new           #46                 // class java/lang/IllegalStateException
       3: dup
       4: ldc           #47                 // String Couldn\'t find any index set config!
       6: invokespecial #48                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
       9: areturn

  static {};
    Code:
       0: ldc           #49                 // class org/graylog2/migrations/V20161122174500_AssignIndexSetsToStreamsMigration
       2: invokestatic  #50                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
       8: return
}

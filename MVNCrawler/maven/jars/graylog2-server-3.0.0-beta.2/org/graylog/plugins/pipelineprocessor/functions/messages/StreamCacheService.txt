Compiled from "StreamCacheService.java"
public class org.graylog.plugins.pipelineprocessor.functions.messages.StreamCacheService extends com.google.common.util.concurrent.AbstractIdleService {
  private static final org.slf4j.Logger LOG;

  private final com.google.common.eventbus.EventBus eventBus;

  private final org.graylog2.streams.StreamService streamService;

  private final java.util.concurrent.ScheduledExecutorService executorService;

  private final com.google.common.collect.SortedSetMultimap<java.lang.String, org.graylog2.plugin.streams.Stream> nameToStream;

  private final java.util.Map<java.lang.String, org.graylog2.plugin.streams.Stream> idToStream;

  public org.graylog.plugins.pipelineprocessor.functions.messages.StreamCacheService(com.google.common.eventbus.EventBus, org.graylog2.streams.StreamService, java.util.concurrent.ScheduledExecutorService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method com/google/common/util/concurrent/AbstractIdleService."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method com/google/common/collect/MultimapBuilder.hashKeys:()Lcom/google/common/collect/MultimapBuilder$MultimapBuilderWithKeys;
       8: invokedynamic #3,  0              // InvokeDynamic #0:apply:()Ljava/util/function/Function;
      13: invokestatic  #4                  // InterfaceMethod java/util/Comparator.comparing:(Ljava/util/function/Function;)Ljava/util/Comparator;
      16: invokevirtual #5                  // Method com/google/common/collect/MultimapBuilder$MultimapBuilderWithKeys.treeSetValues:(Ljava/util/Comparator;)Lcom/google/common/collect/MultimapBuilder$SortedSetMultimapBuilder;
      19: invokevirtual #6                  // Method com/google/common/collect/MultimapBuilder$SortedSetMultimapBuilder.build:()Lcom/google/common/collect/SortedSetMultimap;
      22: invokestatic  #7                  // Method com/google/common/collect/Multimaps.synchronizedSortedSetMultimap:(Lcom/google/common/collect/SortedSetMultimap;)Lcom/google/common/collect/SortedSetMultimap;
      25: putfield      #8                  // Field nameToStream:Lcom/google/common/collect/SortedSetMultimap;
      28: aload_0
      29: invokestatic  #9                  // Method com/google/common/collect/Maps.newConcurrentMap:()Ljava/util/concurrent/ConcurrentMap;
      32: putfield      #10                 // Field idToStream:Ljava/util/Map;
      35: aload_0
      36: aload_1
      37: putfield      #11                 // Field eventBus:Lcom/google/common/eventbus/EventBus;
      40: aload_0
      41: aload_2
      42: putfield      #12                 // Field streamService:Lorg/graylog2/streams/StreamService;
      45: aload_0
      46: aload_3
      47: putfield      #13                 // Field executorService:Ljava/util/concurrent/ScheduledExecutorService;
      50: return

  protected void startUp() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #12                 // Field streamService:Lorg/graylog2/streams/StreamService;
       4: invokeinterface #14,  1           // InterfaceMethod org/graylog2/streams/StreamService.loadAllEnabled:()Ljava/util/List;
       9: aload_0
      10: invokedynamic #15,  0             // InvokeDynamic #1:accept:(Lorg/graylog/plugins/pipelineprocessor/functions/messages/StreamCacheService;)Ljava/util/function/Consumer;
      15: invokeinterface #16,  2           // InterfaceMethod java/util/List.forEach:(Ljava/util/function/Consumer;)V
      20: aload_0
      21: getfield      #11                 // Field eventBus:Lcom/google/common/eventbus/EventBus;
      24: aload_0
      25: invokevirtual #17                 // Method com/google/common/eventbus/EventBus.register:(Ljava/lang/Object;)V
      28: return

  protected void shutDown() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #11                 // Field eventBus:Lcom/google/common/eventbus/EventBus;
       4: aload_0
       5: invokevirtual #18                 // Method com/google/common/eventbus/EventBus.unregister:(Ljava/lang/Object;)V
       8: return

  public void handleStreamUpdate(org.graylog2.streams.events.StreamsChangedEvent);
    Code:
       0: aload_0
       1: getfield      #13                 // Field executorService:Ljava/util/concurrent/ScheduledExecutorService;
       4: aload_0
       5: aload_1
       6: invokedynamic #19,  0             // InvokeDynamic #2:run:(Lorg/graylog/plugins/pipelineprocessor/functions/messages/StreamCacheService;Lorg/graylog2/streams/events/StreamsChangedEvent;)Ljava/lang/Runnable;
      11: lconst_0
      12: getstatic     #20                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
      15: invokeinterface #21,  5           // InterfaceMethod java/util/concurrent/ScheduledExecutorService.schedule:(Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;
      20: pop
      21: return

  public void updateStreams(java.util.Collection<java.lang.String>);
    Code:
       0: aload_1
       1: invokeinterface #22,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
       6: astore_2
       7: aload_2
       8: invokeinterface #23,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      13: ifeq          95
      16: aload_2
      17: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      22: checkcast     #25                 // class java/lang/String
      25: astore_3
      26: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      29: ldc           #27                 // String Updating stream id/title cache for id {}
      31: aload_3
      32: invokeinterface #28,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      37: aload_0
      38: getfield      #12                 // Field streamService:Lorg/graylog2/streams/StreamService;
      41: aload_3
      42: invokeinterface #29,  2           // InterfaceMethod org/graylog2/streams/StreamService.load:(Ljava/lang/String;)Lorg/graylog2/plugin/streams/Stream;
      47: astore        4
      49: aload         4
      51: invokeinterface #30,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getDisabled:()Ljava/lang/Boolean;
      56: invokevirtual #31                 // Method java/lang/Boolean.booleanValue:()Z
      59: ifeq          76
      62: aload_0
      63: aload         4
      65: invokeinterface #32,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
      70: invokespecial #33                 // Method purgeCache:(Ljava/lang/String;)V
      73: goto          82
      76: aload_0
      77: aload         4
      79: invokespecial #34                 // Method updateCache:(Lorg/graylog2/plugin/streams/Stream;)V
      82: goto          92
      85: astore        4
      87: aload_0
      88: aload_3
      89: invokespecial #33                 // Method purgeCache:(Ljava/lang/String;)V
      92: goto          7
      95: return
    Exception table:
       from    to  target type
          37    82    85   Class org/graylog2/database/NotFoundException

  private void purgeCache(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field idToStream:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #36,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #37                 // class org/graylog2/plugin/streams/Stream
      13: astore_2
      14: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      17: ldc           #38                 // String Purging stream id/title cache for id {}, stream {}
      19: aload_1
      20: aload_2
      21: invokeinterface #39,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      26: aload_2
      27: ifnull        47
      30: aload_0
      31: getfield      #8                  // Field nameToStream:Lcom/google/common/collect/SortedSetMultimap;
      34: aload_2
      35: invokeinterface #40,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getTitle:()Ljava/lang/String;
      40: aload_2
      41: invokeinterface #41,  3           // InterfaceMethod com/google/common/collect/SortedSetMultimap.remove:(Ljava/lang/Object;Ljava/lang/Object;)Z
      46: pop
      47: return

  private void updateCache(org.graylog2.plugin.streams.Stream);
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #42                 // String Updating stream id/title cache for {}/\'{}\'
       5: aload_1
       6: invokeinterface #32,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
      11: aload_1
      12: invokeinterface #40,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getTitle:()Ljava/lang/String;
      17: invokeinterface #39,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      22: aload_0
      23: getfield      #10                 // Field idToStream:Ljava/util/Map;
      26: aload_1
      27: invokeinterface #32,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getId:()Ljava/lang/String;
      32: aload_1
      33: invokeinterface #43,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      38: pop
      39: aload_0
      40: getfield      #8                  // Field nameToStream:Lcom/google/common/collect/SortedSetMultimap;
      43: aload_1
      44: invokeinterface #40,  1           // InterfaceMethod org/graylog2/plugin/streams/Stream.getTitle:()Ljava/lang/String;
      49: aload_1
      50: invokeinterface #44,  3           // InterfaceMethod com/google/common/collect/SortedSetMultimap.put:(Ljava/lang/Object;Ljava/lang/Object;)Z
      55: pop
      56: return

  public java.util.Collection<org.graylog2.plugin.streams.Stream> getByName(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #8                  // Field nameToStream:Lcom/google/common/collect/SortedSetMultimap;
       4: aload_1
       5: invokeinterface #45,  2           // InterfaceMethod com/google/common/collect/SortedSetMultimap.get:(Ljava/lang/Object;)Ljava/util/SortedSet;
      10: areturn

  public org.graylog2.plugin.streams.Stream getById(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field idToStream:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #46,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #37                 // class org/graylog2/plugin/streams/Stream
      13: areturn

  private void lambda$handleStreamUpdate$0(org.graylog2.streams.events.StreamsChangedEvent);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #47                 // Method org/graylog2/streams/events/StreamsChangedEvent.streamIds:()Lcom/google/common/collect/ImmutableSet;
       5: invokevirtual #48                 // Method updateStreams:(Ljava/util/Collection;)V
       8: return

  static {};
    Code:
       0: ldc           #49                 // class org/graylog/plugins/pipelineprocessor/functions/messages/StreamCacheService
       2: invokestatic  #50                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

Compiled from "TestServerCertificates.java"
public class prompto.security.TestServerCertificates {
  static java.lang.String CERTS_DIR;

  static prompto.utils.Instance<java.lang.String> password;

  static java.util.function.Supplier<java.lang.String> PASSWORD;

  public prompto.security.TestServerCertificates();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void before() throws java.lang.Exception;
    Code:
       0: invokestatic  #2                  // Method prompto/security/MockTrustManager.install:()V
       3: return

  public void after();
    Code:
       0: invokestatic  #3                  // Method prompto/security/MockTrustManager.restore:()V
       3: return

  public void testLoadCertificate() throws java.lang.Throwable;
    Code:
       0: invokestatic  #4                  // Method javax/net/ssl/KeyManagerFactory.getDefaultAlgorithm:()Ljava/lang/String;
       3: invokestatic  #5                  // Method javax/net/ssl/KeyManagerFactory.getInstance:(Ljava/lang/String;)Ljavax/net/ssl/KeyManagerFactory;
       6: astore_1
       7: aload_0
       8: new           #6                  // class java/lang/StringBuilder
      11: dup
      12: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      15: getstatic     #8                  // Field CERTS_DIR:Ljava/lang/String;
      18: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: ldc           #10                 // String keystore.jks
      23: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: invokevirtual #11                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      29: invokespecial #12                 // Method loadKeyStore:(Ljava/lang/String;)Ljava/security/KeyStore;
      32: astore_2
      33: aload_1
      34: aload_2
      35: getstatic     #13                 // Field PASSWORD:Ljava/util/function/Supplier;
      38: invokeinterface #14,  1           // InterfaceMethod java/util/function/Supplier.get:()Ljava/lang/Object;
      43: checkcast     #15                 // class java/lang/String
      46: invokevirtual #16                 // Method java/lang/String.toCharArray:()[C
      49: invokevirtual #17                 // Method javax/net/ssl/KeyManagerFactory.init:(Ljava/security/KeyStore;[C)V
      52: return

  public void testRealCertificates() throws java.lang.Throwable;
    Code:
       0: new           #18                 // class org/eclipse/jetty/server/Server
       3: dup
       4: invokespecial #19                 // Method org/eclipse/jetty/server/Server."<init>":()V
       7: astore_1
       8: aload_0
       9: aload_1
      10: invokespecial #20                 // Method createConnector:(Lorg/eclipse/jetty/server/Server;)Lorg/eclipse/jetty/server/ServerConnector;
      13: astore_2
      14: aload_1
      15: iconst_1
      16: anewarray     #21                 // class org/eclipse/jetty/server/Connector
      19: dup
      20: iconst_0
      21: aload_2
      22: aastore
      23: invokevirtual #22                 // Method org/eclipse/jetty/server/Server.setConnectors:([Lorg/eclipse/jetty/server/Connector;)V
      26: aload_1
      27: aload_0
      28: invokespecial #23                 // Method createHandler:()Lorg/eclipse/jetty/server/Handler;
      31: invokevirtual #24                 // Method org/eclipse/jetty/server/Server.setHandler:(Lorg/eclipse/jetty/server/Handler;)V
      34: new           #25                 // class java/lang/Thread
      37: dup
      38: aload_1
      39: invokedynamic #26,  0             // InvokeDynamic #0:run:(Lorg/eclipse/jetty/server/Server;)Ljava/lang/Runnable;
      44: invokespecial #27                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;)V
      47: astore_3
      48: aload_3
      49: invokevirtual #28                 // Method java/lang/Thread.start:()V
      52: aload_1
      53: invokevirtual #29                 // Method org/eclipse/jetty/server/Server.isStarted:()Z
      56: ifne          68
      59: ldc2_w        #30                 // long 10l
      62: invokestatic  #32                 // Method java/lang/Thread.sleep:(J)V
      65: goto          52
      68: aload_1
      69: invokevirtual #33                 // Method org/eclipse/jetty/server/Server.join:()V
      72: return

  private org.eclipse.jetty.server.ServerConnector createConnector(org.eclipse.jetty.server.Server) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #34                 // Method createSSLFactory:()Lorg/eclipse/jetty/server/SslConnectionFactory;
       4: astore_2
       5: aload_0
       6: invokespecial #35                 // Method createHttpsFactory:()Lorg/eclipse/jetty/server/HttpConnectionFactory;
       9: astore_3
      10: new           #36                 // class org/eclipse/jetty/server/ServerConnector
      13: dup
      14: aload_1
      15: iconst_2
      16: anewarray     #37                 // class org/eclipse/jetty/server/ConnectionFactory
      19: dup
      20: iconst_0
      21: aload_2
      22: aastore
      23: dup
      24: iconst_1
      25: aload_3
      26: aastore
      27: invokespecial #38                 // Method org/eclipse/jetty/server/ServerConnector."<init>":(Lorg/eclipse/jetty/server/Server;[Lorg/eclipse/jetty/server/ConnectionFactory;)V
      30: astore        4
      32: aload         4
      34: sipush        8443
      37: invokevirtual #39                 // Method org/eclipse/jetty/server/ServerConnector.setPort:(I)V
      40: aload         4
      42: areturn

  private org.eclipse.jetty.server.Handler createHandler();
    Code:
       0: new           #40                 // class prompto/security/TestServerCertificates$1
       3: dup
       4: aload_0
       5: invokespecial #41                 // Method prompto/security/TestServerCertificates$1."<init>":(Lprompto/security/TestServerCertificates;)V
       8: areturn

  private org.eclipse.jetty.server.HttpConnectionFactory createHttpsFactory();
    Code:
       0: new           #42                 // class org/eclipse/jetty/server/HttpConfiguration
       3: dup
       4: invokespecial #43                 // Method org/eclipse/jetty/server/HttpConfiguration."<init>":()V
       7: astore_1
       8: aload_1
       9: new           #44                 // class org/eclipse/jetty/server/SecureRequestCustomizer
      12: dup
      13: invokespecial #45                 // Method org/eclipse/jetty/server/SecureRequestCustomizer."<init>":()V
      16: invokevirtual #46                 // Method org/eclipse/jetty/server/HttpConfiguration.addCustomizer:(Lorg/eclipse/jetty/server/HttpConfiguration$Customizer;)V
      19: new           #47                 // class org/eclipse/jetty/server/HttpConnectionFactory
      22: dup
      23: aload_1
      24: invokespecial #48                 // Method org/eclipse/jetty/server/HttpConnectionFactory."<init>":(Lorg/eclipse/jetty/server/HttpConfiguration;)V
      27: areturn

  private org.eclipse.jetty.server.SslConnectionFactory createSSLFactory() throws java.lang.Exception;
    Code:
       0: new           #49                 // class org/eclipse/jetty/util/ssl/SslContextFactory
       3: dup
       4: invokespecial #50                 // Method org/eclipse/jetty/util/ssl/SslContextFactory."<init>":()V
       7: astore_1
       8: aload_0
       9: new           #6                  // class java/lang/StringBuilder
      12: dup
      13: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      16: getstatic     #8                  // Field CERTS_DIR:Ljava/lang/String;
      19: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: ldc           #10                 // String keystore.jks
      24: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: invokevirtual #11                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      30: invokespecial #12                 // Method loadKeyStore:(Ljava/lang/String;)Ljava/security/KeyStore;
      33: astore_2
      34: aload_1
      35: aload_2
      36: invokevirtual #51                 // Method org/eclipse/jetty/util/ssl/SslContextFactory.setKeyStore:(Ljava/security/KeyStore;)V
      39: aload_1
      40: getstatic     #13                 // Field PASSWORD:Ljava/util/function/Supplier;
      43: invokeinterface #14,  1           // InterfaceMethod java/util/function/Supplier.get:()Ljava/lang/Object;
      48: checkcast     #15                 // class java/lang/String
      51: invokevirtual #52                 // Method org/eclipse/jetty/util/ssl/SslContextFactory.setKeyStorePassword:(Ljava/lang/String;)V
      54: aload_0
      55: new           #6                  // class java/lang/StringBuilder
      58: dup
      59: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      62: getstatic     #8                  // Field CERTS_DIR:Ljava/lang/String;
      65: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      68: ldc           #53                 // String truststore.jks
      70: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      73: invokevirtual #11                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      76: invokespecial #12                 // Method loadKeyStore:(Ljava/lang/String;)Ljava/security/KeyStore;
      79: astore_2
      80: aload_1
      81: aload_2
      82: invokevirtual #54                 // Method org/eclipse/jetty/util/ssl/SslContextFactory.setTrustStore:(Ljava/security/KeyStore;)V
      85: aload_1
      86: getstatic     #13                 // Field PASSWORD:Ljava/util/function/Supplier;
      89: invokeinterface #14,  1           // InterfaceMethod java/util/function/Supplier.get:()Ljava/lang/Object;
      94: checkcast     #15                 // class java/lang/String
      97: invokevirtual #55                 // Method org/eclipse/jetty/util/ssl/SslContextFactory.setTrustStorePassword:(Ljava/lang/String;)V
     100: new           #56                 // class org/eclipse/jetty/server/SslConnectionFactory
     103: dup
     104: aload_1
     105: ldc           #57                 // String http/1.1
     107: invokespecial #58                 // Method org/eclipse/jetty/server/SslConnectionFactory."<init>":(Lorg/eclipse/jetty/util/ssl/SslContextFactory;Ljava/lang/String;)V
     110: areturn

  private java.security.KeyStore loadKeyStore(java.lang.String) throws java.lang.Exception;
    Code:
       0: new           #59                 // class java/io/FileInputStream
       3: dup
       4: aload_1
       5: invokespecial #60                 // Method java/io/FileInputStream."<init>":(Ljava/lang/String;)V
       8: astore_2
       9: aconst_null
      10: astore_3
      11: ldc           #61                 // String JKS
      13: invokestatic  #62                 // Method java/security/KeyStore.getInstance:(Ljava/lang/String;)Ljava/security/KeyStore;
      16: astore        4
      18: aload         4
      20: aload_2
      21: aconst_null
      22: invokevirtual #63                 // Method java/security/KeyStore.load:(Ljava/io/InputStream;[C)V
      25: aload         4
      27: astore        5
      29: aload_2
      30: ifnull        59
      33: aload_3
      34: ifnull        55
      37: aload_2
      38: invokevirtual #64                 // Method java/io/InputStream.close:()V
      41: goto          59
      44: astore        6
      46: aload_3
      47: aload         6
      49: invokevirtual #66                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      52: goto          59
      55: aload_2
      56: invokevirtual #64                 // Method java/io/InputStream.close:()V
      59: aload         5
      61: areturn
      62: astore        4
      64: aload         4
      66: astore_3
      67: aload         4
      69: athrow
      70: astore        7
      72: aload_2
      73: ifnull        102
      76: aload_3
      77: ifnull        98
      80: aload_2
      81: invokevirtual #64                 // Method java/io/InputStream.close:()V
      84: goto          102
      87: astore        8
      89: aload_3
      90: aload         8
      92: invokevirtual #66                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      95: goto          102
      98: aload_2
      99: invokevirtual #64                 // Method java/io/InputStream.close:()V
     102: aload         7
     104: athrow
    Exception table:
       from    to  target type
          37    41    44   Class java/lang/Throwable
          11    29    62   Class java/lang/Throwable
          11    29    70   any
          80    84    87   Class java/lang/Throwable
          62    72    70   any

  private static void lambda$testRealCertificates$21(org.eclipse.jetty.server.Server);
    Code:
       0: aload_0
       1: invokevirtual #67                 // Method org/eclipse/jetty/server/Server.start:()V
       4: goto          12
       7: astore_1
       8: aload_1
       9: invokevirtual #69                 // Method java/lang/Exception.printStackTrace:()V
      12: return
    Exception table:
       from    to  target type
           0     4     7   Class java/lang/Exception

  private static java.lang.String lambda$static$20();
    Code:
       0: getstatic     #70                 // Field password:Lprompto/utils/Instance;
       3: invokevirtual #71                 // Method prompto/utils/Instance.get:()Ljava/lang/Object;
       6: ifnonnull     58
       9: getstatic     #72                 // Field java/lang/System.out:Ljava/io/PrintStream;
      12: ldc           #73                 // String Enter keystore password:
      14: invokevirtual #74                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      17: new           #75                 // class java/io/BufferedReader
      20: dup
      21: new           #76                 // class java/io/InputStreamReader
      24: dup
      25: getstatic     #77                 // Field java/lang/System.in:Ljava/io/InputStream;
      28: invokespecial #78                 // Method java/io/InputStreamReader."<init>":(Ljava/io/InputStream;)V
      31: invokespecial #79                 // Method java/io/BufferedReader."<init>":(Ljava/io/Reader;)V
      34: invokevirtual #80                 // Method java/io/BufferedReader.readLine:()Ljava/lang/String;
      37: astore_0
      38: getstatic     #70                 // Field password:Lprompto/utils/Instance;
      41: aload_0
      42: invokevirtual #81                 // Method prompto/utils/Instance.set:(Ljava/lang/Object;)V
      45: goto          58
      48: astore_0
      49: new           #83                 // class java/lang/RuntimeException
      52: dup
      53: aload_0
      54: invokespecial #84                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
      57: athrow
      58: getstatic     #70                 // Field password:Lprompto/utils/Instance;
      61: invokevirtual #71                 // Method prompto/utils/Instance.get:()Ljava/lang/Object;
      64: checkcast     #15                 // class java/lang/String
      67: areturn
    Exception table:
       from    to  target type
           9    45    48   Class java/io/IOException

  static {};
    Code:
       0: ldc           #85                 // String /Users/ericvergnaud/Prompto/certificates/JavaCertificates/
       2: putstatic     #8                  // Field CERTS_DIR:Ljava/lang/String;
       5: new           #86                 // class prompto/utils/Instance
       8: dup
       9: invokespecial #87                 // Method prompto/utils/Instance."<init>":()V
      12: putstatic     #70                 // Field password:Lprompto/utils/Instance;
      15: invokedynamic #88,  0             // InvokeDynamic #1:get:()Ljava/util/function/Supplier;
      20: putstatic     #13                 // Field PASSWORD:Ljava/util/function/Supplier;
      23: return
}

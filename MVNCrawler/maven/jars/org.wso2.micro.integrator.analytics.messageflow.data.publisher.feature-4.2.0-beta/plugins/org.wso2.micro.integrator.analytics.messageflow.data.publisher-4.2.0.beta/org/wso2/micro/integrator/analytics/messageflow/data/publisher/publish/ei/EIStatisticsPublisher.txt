Compiled from "EIStatisticsPublisher.java"
public class org.wso2.micro.integrator.analytics.messageflow.data.publisher.publish.ei.EIStatisticsPublisher implements org.wso2.micro.integrator.analytics.messageflow.data.publisher.publish.StatisticsPublisher {
  private static org.apache.commons.logging.Log log;

  private static org.wso2.micro.integrator.analytics.messageflow.data.publisher.publish.ei.EIStatisticsPublisher instance;

  private static java.lang.String streamId;

  private static java.lang.ThreadLocal<com.esotericsoftware.kryo.Kryo> kryoTL;

  public org.wso2.micro.integrator.analytics.messageflow.data.publisher.publish.ei.EIStatisticsPublisher();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static org.wso2.micro.integrator.analytics.messageflow.data.publisher.publish.ei.EIStatisticsPublisher GetInstance();
    Code:
       0: getstatic     #2                  // Field instance:Lorg/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher;
       3: ifnonnull     16
       6: new           #3                  // class org/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher
       9: dup
      10: invokespecial #4                  // Method "<init>":()V
      13: putstatic     #2                  // Field instance:Lorg/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher;
      16: getstatic     #2                  // Field instance:Lorg/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher;
      19: areturn

  public void process(org.apache.synapse.aspects.flow.statistics.publishing.PublishingFlow, int);
    Code:
       0: iconst_2
       1: anewarray     #5                  // class java/lang/Object
       4: astore_3
       5: iconst_2
       6: anewarray     #5                  // class java/lang/Object
       9: astore        4
      11: aload_3
      12: iload_2
      13: invokestatic  #6                  // Method addMetaData:([Ljava/lang/Object;I)V
      16: aload         4
      18: aload_1
      19: invokestatic  #7                  // Method addEventData:([Ljava/lang/Object;Lorg/apache/synapse/aspects/flow/statistics/publishing/PublishingFlow;)V
      22: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
      25: invokeinterface #9,  1            // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      30: ifeq          101
      33: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
      36: ldc           #10                 // String Before sending to analytic server ------
      38: invokeinterface #11,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      43: iconst_0
      44: istore        5
      46: iload         5
      48: aload         4
      50: arraylength
      51: if_icmpge     101
      54: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
      57: new           #12                 // class java/lang/StringBuilder
      60: dup
      61: invokespecial #13                 // Method java/lang/StringBuilder."<init>":()V
      64: ldc           #14                 // String Section-
      66: invokevirtual #15                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      69: iload         5
      71: invokevirtual #16                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      74: ldc           #17                 // String  ->
      76: invokevirtual #15                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      79: aload         4
      81: iload         5
      83: aaload
      84: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      87: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      90: invokeinterface #11,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      95: iinc          5, 1
      98: goto          46
     101: aload         4
     103: aload_3
     104: invokestatic  #20                 // Method publishToAgent:([Ljava/lang/Object;[Ljava/lang/Object;)V
     107: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     110: invokeinterface #9,  1            // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     115: ifeq          128
     118: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     121: ldc           #21                 // String ------ After sending to analytic server
     123: invokeinterface #11,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     128: return

  private static void addMetaData(java.lang.Object[], int);
    Code:
       0: aload_0
       1: iconst_0
       2: iconst_1
       3: invokestatic  #22                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
       6: aastore
       7: aload_0
       8: iconst_1
       9: iload_1
      10: invokestatic  #23                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      13: aastore
      14: return

  private static void addEventData(java.lang.Object[], org.apache.synapse.aspects.flow.statistics.publishing.PublishingFlow);
    Code:
       0: aload_0
       1: iconst_0
       2: aload_1
       3: invokevirtual #24                 // Method org/apache/synapse/aspects/flow/statistics/publishing/PublishingFlow.getMessageFlowId:()Ljava/lang/String;
       6: aastore
       7: aload_1
       8: invokevirtual #25                 // Method org/apache/synapse/aspects/flow/statistics/publishing/PublishingFlow.getObjectAsMap:()Ljava/util/Map;
      11: astore_2
      12: aconst_null
      13: astore_3
      14: aconst_null
      15: astore        4
      17: invokestatic  #26                 // Method org/wso2/micro/integrator/analytics/data/publisher/util/PublisherUtil.getHostAddress:()Ljava/lang/String;
      20: astore_3
      21: aload_2
      22: ldc           #27                 // String host
      24: aload_3
      25: invokeinterface #28,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      30: pop
      31: aload         4
      33: ifnull        47
      36: aload_2
      37: ldc           #29                 // String port
      39: aload         4
      41: invokeinterface #28,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      46: pop
      47: new           #30                 // class java/io/ByteArrayOutputStream
      50: dup
      51: invokespecial #31                 // Method java/io/ByteArrayOutputStream."<init>":()V
      54: astore        5
      56: new           #32                 // class com/esotericsoftware/kryo/io/Output
      59: dup
      60: aload         5
      62: invokespecial #33                 // Method com/esotericsoftware/kryo/io/Output."<init>":(Ljava/io/OutputStream;)V
      65: astore        6
      67: getstatic     #34                 // Field kryoTL:Ljava/lang/ThreadLocal;
      70: invokevirtual #35                 // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      73: checkcast     #36                 // class com/esotericsoftware/kryo/Kryo
      76: aload         6
      78: aload_2
      79: invokevirtual #37                 // Method com/esotericsoftware/kryo/Kryo.writeObject:(Lcom/esotericsoftware/kryo/io/Output;Ljava/lang/Object;)V
      82: aload         6
      84: invokevirtual #38                 // Method com/esotericsoftware/kryo/io/Output.flush:()V
      87: aload_0
      88: iconst_1
      89: aload         5
      91: invokevirtual #39                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      94: invokestatic  #40                 // Method compress:([B)Ljava/lang/String;
      97: aastore
      98: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     101: invokeinterface #9,  1            // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     106: ifeq          166
     109: new           #41                 // class com/fasterxml/jackson/databind/ObjectMapper
     112: dup
     113: invokespecial #42                 // Method com/fasterxml/jackson/databind/ObjectMapper."<init>":()V
     116: astore        7
     118: aconst_null
     119: astore        8
     121: aload         7
     123: aload_2
     124: invokevirtual #43                 // Method com/fasterxml/jackson/databind/ObjectMapper.writeValueAsString:(Ljava/lang/Object;)Ljava/lang/String;
     127: astore        8
     129: goto          146
     132: astore        9
     134: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     137: ldc           #45                 // String Unable to convert
     139: aload         9
     141: invokeinterface #46,  3           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     146: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     149: ldc           #47                 // String Uncompressed data :
     151: invokeinterface #11,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     156: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
     159: aload         8
     161: invokeinterface #11,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     166: return
    Exception table:
       from    to  target type
         121   129   132   Class com/fasterxml/jackson/core/JsonProcessingException

  private static void publishToAgent(java.lang.Object[], java.lang.Object[]);
    Code:
       0: new           #48                 // class org/wso2/carbon/databridge/commons/Event
       3: dup
       4: getstatic     #49                 // Field streamId:Ljava/lang/String;
       7: invokestatic  #50                 // Method java/lang/System.currentTimeMillis:()J
      10: aload_1
      11: aconst_null
      12: aload_0
      13: invokespecial #51                 // Method org/wso2/carbon/databridge/commons/Event."<init>":(Ljava/lang/String;J[Ljava/lang/Object;[Ljava/lang/Object;[Ljava/lang/Object;)V
      16: astore_2
      17: invokestatic  #52                 // Method org/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/DataBridgePublisher.getDataPublisher:()Lorg/wso2/carbon/databridge/agent/DataPublisher;
      20: aload_2
      21: invokevirtual #53                 // Method org/wso2/carbon/databridge/agent/DataPublisher.publish:(Lorg/wso2/carbon/databridge/commons/Event;)V
      24: return

  private static java.lang.String compress(byte[]);
    Code:
       0: aload_0
       1: ifnull        9
       4: aload_0
       5: arraylength
       6: ifne          11
       9: aconst_null
      10: areturn
      11: new           #30                 // class java/io/ByteArrayOutputStream
      14: dup
      15: invokespecial #31                 // Method java/io/ByteArrayOutputStream."<init>":()V
      18: astore_1
      19: new           #54                 // class java/util/zip/GZIPOutputStream
      22: dup
      23: aload_1
      24: invokespecial #55                 // Method java/util/zip/GZIPOutputStream."<init>":(Ljava/io/OutputStream;)V
      27: astore_2
      28: aload_2
      29: aload_0
      30: invokevirtual #56                 // Method java/util/zip/GZIPOutputStream.write:([B)V
      33: aload_2
      34: invokevirtual #57                 // Method java/util/zip/GZIPOutputStream.close:()V
      37: aload_1
      38: invokevirtual #39                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      41: invokestatic  #58                 // Method javax/xml/bind/DatatypeConverter.printBase64Binary:([B)Ljava/lang/String;
      44: areturn
      45: astore_2
      46: getstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
      49: ldc           #60                 // String Unable to compress data
      51: aload_2
      52: invokeinterface #46,  3           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      57: aconst_null
      58: areturn
    Exception table:
       from    to  target type
          19    44    45   Class java/io/IOException

  static {};
    Code:
       0: ldc           #3                  // class org/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher
       2: invokestatic  #61                 // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
       5: putstatic     #8                  // Field log:Lorg/apache/commons/logging/Log;
       8: aconst_null
       9: putstatic     #2                  // Field instance:Lorg/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher;
      12: ldc           #63                 // String org.wso2.esb.analytics.stream.FlowEntry
      14: ldc           #64                 // String 1.0.0
      16: invokestatic  #65                 // Method org/wso2/carbon/databridge/commons/utils/DataBridgeCommonsUtils.generateStreamId:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      19: putstatic     #49                 // Field streamId:Ljava/lang/String;
      22: new           #66                 // class org/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher$1
      25: dup
      26: invokespecial #67                 // Method org/wso2/micro/integrator/analytics/messageflow/data/publisher/publish/ei/EIStatisticsPublisher$1."<init>":()V
      29: putstatic     #34                 // Field kryoTL:Ljava/lang/ThreadLocal;
      32: return
}

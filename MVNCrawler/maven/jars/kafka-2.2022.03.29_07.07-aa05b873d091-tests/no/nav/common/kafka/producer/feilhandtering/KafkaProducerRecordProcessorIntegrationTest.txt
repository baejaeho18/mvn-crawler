Compiled from "KafkaProducerRecordProcessorIntegrationTest.java"
public class no.nav.common.kafka.producer.feilhandtering.KafkaProducerRecordProcessorIntegrationTest {
  private static final java.lang.String TEST_TOPIC_A;

  private static final java.lang.String TEST_TOPIC_B;

  public static org.testcontainers.containers.KafkaContainer kafka;

  private javax.sql.DataSource dataSource;

  private no.nav.common.kafka.producer.feilhandtering.KafkaProducerRepository producerRepository;

  private no.nav.common.kafka.producer.feilhandtering.KafkaProducerRecordProcessor recordProcessor;

  private no.nav.common.kafka.consumer.KafkaConsumerClientImpl<java.lang.String, java.lang.String> consumerClient;

  private java.util.concurrent.atomic.AtomicInteger counterTopicA;

  private java.util.concurrent.atomic.AtomicInteger counterTopicB;

  public no.nav.common.kafka.producer.feilhandtering.KafkaProducerRecordProcessorIntegrationTest();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class java/util/concurrent/atomic/AtomicInteger
       8: dup
       9: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      12: putfield      #5                  // Field counterTopicA:Ljava/util/concurrent/atomic/AtomicInteger;
      15: aload_0
      16: new           #3                  // class java/util/concurrent/atomic/AtomicInteger
      19: dup
      20: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      23: putfield      #6                  // Field counterTopicB:Ljava/util/concurrent/atomic/AtomicInteger;
      26: return

  public void setup();
    Code:
       0: aload_0
       1: getfield      #5                  // Field counterTopicA:Ljava/util/concurrent/atomic/AtomicInteger;
       4: iconst_0
       5: invokevirtual #7                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
       8: aload_0
       9: getfield      #6                  // Field counterTopicB:Ljava/util/concurrent/atomic/AtomicInteger;
      12: iconst_0
      13: invokevirtual #7                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
      16: getstatic     #8                  // Field kafka:Lorg/testcontainers/containers/KafkaContainer;
      19: invokevirtual #9                  // Method org/testcontainers/containers/KafkaContainer.getBootstrapServers:()Ljava/lang/String;
      22: astore_1
      23: aload_0
      24: invokestatic  #10                 // Method no/nav/common/kafka/utils/LocalOracleH2Database.createDatabase:()Ljavax/sql/DataSource;
      27: putfield      #11                 // Field dataSource:Ljavax/sql/DataSource;
      30: aload_0
      31: getfield      #11                 // Field dataSource:Ljavax/sql/DataSource;
      34: ldc           #12                 // String kafka-producer-record-oracle.sql
      36: invokestatic  #13                 // Method no/nav/common/kafka/utils/DbUtils.runScript:(Ljavax/sql/DataSource;Ljava/lang/String;)V
      39: aload_0
      40: new           #14                 // class no/nav/common/kafka/spring/OracleJdbcTemplateProducerRepository
      43: dup
      44: new           #15                 // class org/springframework/jdbc/core/JdbcTemplate
      47: dup
      48: aload_0
      49: getfield      #11                 // Field dataSource:Ljavax/sql/DataSource;
      52: invokespecial #16                 // Method org/springframework/jdbc/core/JdbcTemplate."<init>":(Ljavax/sql/DataSource;)V
      55: invokespecial #17                 // Method no/nav/common/kafka/spring/OracleJdbcTemplateProducerRepository."<init>":(Lorg/springframework/jdbc/core/JdbcTemplate;)V
      58: putfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
      61: ldc           #20                 // String bootstrap.servers
      63: aload_1
      64: invokestatic  #21                 // InterfaceMethod java/util/Map.of:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/Map;
      67: invokestatic  #22                 // Method org/apache/kafka/clients/admin/KafkaAdminClient.create:(Ljava/util/Map;)Lorg/apache/kafka/clients/admin/AdminClient;
      70: astore_2
      71: aload_2
      72: ldc           #24                 // String test-topic-a
      74: ldc           #25                 // String test-topic-b
      76: invokestatic  #26                 // InterfaceMethod java/util/List.of:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/List;
      79: invokevirtual #27                 // Method org/apache/kafka/clients/admin/AdminClient.deleteTopics:(Ljava/util/Collection;)Lorg/apache/kafka/clients/admin/DeleteTopicsResult;
      82: pop
      83: aload_2
      84: new           #28                 // class org/apache/kafka/clients/admin/NewTopic
      87: dup
      88: ldc           #24                 // String test-topic-a
      90: iconst_1
      91: iconst_1
      92: invokespecial #29                 // Method org/apache/kafka/clients/admin/NewTopic."<init>":(Ljava/lang/String;IS)V
      95: new           #28                 // class org/apache/kafka/clients/admin/NewTopic
      98: dup
      99: ldc           #25                 // String test-topic-b
     101: iconst_1
     102: iconst_1
     103: invokespecial #29                 // Method org/apache/kafka/clients/admin/NewTopic."<init>":(Ljava/lang/String;IS)V
     106: invokestatic  #26                 // InterfaceMethod java/util/List.of:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/List;
     109: invokevirtual #30                 // Method org/apache/kafka/clients/admin/AdminClient.createTopics:(Ljava/util/Collection;)Lorg/apache/kafka/clients/admin/CreateTopicsResult;
     112: pop
     113: aload_2
     114: invokevirtual #31                 // Method org/apache/kafka/clients/admin/AdminClient.close:()V
     117: new           #32                 // class no/nav/common/kafka/producer/KafkaProducerClientImpl
     120: dup
     121: getstatic     #8                  // Field kafka:Lorg/testcontainers/containers/KafkaContainer;
     124: invokevirtual #9                  // Method org/testcontainers/containers/KafkaContainer.getBootstrapServers:()Ljava/lang/String;
     127: invokestatic  #33                 // Method no/nav/common/kafka/utils/TestUtils.kafkaTestByteProducerProperties:(Ljava/lang/String;)Ljava/util/Properties;
     130: invokespecial #34                 // Method no/nav/common/kafka/producer/KafkaProducerClientImpl."<init>":(Ljava/util/Properties;)V
     133: astore_3
     134: invokedynamic #35,  0             // InvokeDynamic #0:isLeader:()Lno/nav/common/job/leader_election/LeaderElectionClient;
     139: astore        4
     141: aload_0
     142: new           #36                 // class no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor
     145: dup
     146: aload_0
     147: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
     150: aload_3
     151: aload         4
     153: invokespecial #37                 // Method no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor."<init>":(Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;Lno/nav/common/kafka/producer/KafkaProducerClient;Lno/nav/common/job/leader_election/LeaderElectionClient;)V
     156: putfield      #38                 // Field recordProcessor:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor;
     159: new           #39                 // class no/nav/common/kafka/consumer/KafkaConsumerClientConfig
     162: dup
     163: getstatic     #8                  // Field kafka:Lorg/testcontainers/containers/KafkaContainer;
     166: invokevirtual #9                  // Method org/testcontainers/containers/KafkaContainer.getBootstrapServers:()Ljava/lang/String;
     169: invokestatic  #40                 // Method no/nav/common/kafka/utils/TestUtils.kafkaTestConsumerProperties:(Ljava/lang/String;)Ljava/util/Properties;
     172: ldc           #24                 // String test-topic-a
     174: aload_0
     175: invokedynamic #41,  0             // InvokeDynamic #1:consume:(Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessorIntegrationTest;)Lno/nav/common/kafka/consumer/TopicConsumer;
     180: ldc           #25                 // String test-topic-b
     182: aload_0
     183: invokedynamic #42,  0             // InvokeDynamic #2:consume:(Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessorIntegrationTest;)Lno/nav/common/kafka/consumer/TopicConsumer;
     188: invokestatic  #43                 // InterfaceMethod java/util/Map.of:(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/Map;
     191: invokespecial #44                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientConfig."<init>":(Ljava/util/Properties;Ljava/util/Map;)V
     194: astore        5
     196: aload_0
     197: new           #45                 // class no/nav/common/kafka/consumer/KafkaConsumerClientImpl
     200: dup
     201: aload         5
     203: invokespecial #46                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientImpl."<init>":(Lno/nav/common/kafka/consumer/KafkaConsumerClientConfig;)V
     206: putfield      #47                 // Field consumerClient:Lno/nav/common/kafka/consumer/KafkaConsumerClientImpl;
     209: return

  public void cleanup();
    Code:
       0: aload_0
       1: getfield      #11                 // Field dataSource:Ljavax/sql/DataSource;
       4: invokestatic  #48                 // Method no/nav/common/kafka/utils/DbUtils.cleanupProducer:(Ljavax/sql/DataSource;)V
       7: return

  public void should_send_stored_records_to_kafka() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
       4: aload_0
       5: ldc           #24                 // String test-topic-a
       7: ldc           #49                 // String value1
       9: ldc           #50                 // String key1
      11: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      14: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      19: pop2
      20: aload_0
      21: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
      24: aload_0
      25: ldc           #24                 // String test-topic-a
      27: ldc           #53                 // String value2
      29: ldc           #54                 // String key2
      31: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      34: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      39: pop2
      40: aload_0
      41: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
      44: aload_0
      45: ldc           #24                 // String test-topic-a
      47: ldc           #55                 // String value3
      49: ldc           #50                 // String key1
      51: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      54: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      59: pop2
      60: aload_0
      61: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
      64: aload_0
      65: ldc           #25                 // String test-topic-b
      67: ldc           #49                 // String value1
      69: ldc           #50                 // String key1
      71: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      74: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      79: pop2
      80: aload_0
      81: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
      84: aload_0
      85: ldc           #25                 // String test-topic-b
      87: ldc           #53                 // String value2
      89: ldc           #54                 // String key2
      91: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      94: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      99: pop2
     100: aload_0
     101: getfield      #38                 // Field recordProcessor:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor;
     104: invokevirtual #56                 // Method no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor.start:()V
     107: ldc2_w        #57                 // long 1000l
     110: invokestatic  #59                 // Method java/lang/Thread.sleep:(J)V
     113: aload_0
     114: getfield      #38                 // Field recordProcessor:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor;
     117: invokevirtual #60                 // Method no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor.close:()V
     120: aload_0
     121: getfield      #47                 // Field consumerClient:Lno/nav/common/kafka/consumer/KafkaConsumerClientImpl;
     124: invokevirtual #61                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientImpl.start:()V
     127: ldc2_w        #57                 // long 1000l
     130: invokestatic  #59                 // Method java/lang/Thread.sleep:(J)V
     133: aload_0
     134: getfield      #47                 // Field consumerClient:Lno/nav/common/kafka/consumer/KafkaConsumerClientImpl;
     137: invokevirtual #62                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientImpl.stop:()V
     140: ldc2_w        #63                 // long 3l
     143: aload_0
     144: getfield      #5                  // Field counterTopicA:Ljava/util/concurrent/atomic/AtomicInteger;
     147: invokevirtual #65                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
     150: i2l
     151: invokestatic  #66                 // Method org/junit/Assert.assertEquals:(JJ)V
     154: ldc2_w        #67                 // long 2l
     157: aload_0
     158: getfield      #6                  // Field counterTopicB:Ljava/util/concurrent/atomic/AtomicInteger;
     161: invokevirtual #65                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
     164: i2l
     165: invokestatic  #66                 // Method org/junit/Assert.assertEquals:(JJ)V
     168: aload_0
     169: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
     172: bipush        10
     174: invokeinterface #69,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.getRecords:(I)Ljava/util/List;
     179: invokeinterface #70,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     184: invokestatic  #71                 // Method org/junit/Assert.assertTrue:(Z)V
     187: return

  public void should_not_send_records_to_kafka_stored_in_a_transaction_that_gets_rolled_back() throws java.lang.InterruptedException;
    Code:
       0: new           #72                 // class org/springframework/transaction/support/TransactionTemplate
       3: dup
       4: new           #73                 // class org/springframework/jdbc/datasource/DataSourceTransactionManager
       7: dup
       8: aload_0
       9: getfield      #11                 // Field dataSource:Ljavax/sql/DataSource;
      12: invokespecial #74                 // Method org/springframework/jdbc/datasource/DataSourceTransactionManager."<init>":(Ljavax/sql/DataSource;)V
      15: invokespecial #75                 // Method org/springframework/transaction/support/TransactionTemplate."<init>":(Lorg/springframework/transaction/PlatformTransactionManager;)V
      18: astore_1
      19: aload_0
      20: getfield      #47                 // Field consumerClient:Lno/nav/common/kafka/consumer/KafkaConsumerClientImpl;
      23: invokevirtual #61                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientImpl.start:()V
      26: aload_0
      27: getfield      #38                 // Field recordProcessor:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor;
      30: invokevirtual #56                 // Method no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor.start:()V
      33: aload_1
      34: aload_0
      35: invokedynamic #76,  0             // InvokeDynamic #3:doInTransaction:(Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessorIntegrationTest;)Lorg/springframework/transaction/support/TransactionCallback;
      40: invokevirtual #77                 // Method org/springframework/transaction/support/TransactionTemplate.execute:(Lorg/springframework/transaction/support/TransactionCallback;)Ljava/lang/Object;
      43: pop
      44: ldc2_w        #78                 // long 4000l
      47: invokestatic  #59                 // Method java/lang/Thread.sleep:(J)V
      50: aload_0
      51: getfield      #38                 // Field recordProcessor:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor;
      54: invokevirtual #60                 // Method no/nav/common/kafka/producer/feilhandtering/KafkaProducerRecordProcessor.close:()V
      57: aload_0
      58: getfield      #47                 // Field consumerClient:Lno/nav/common/kafka/consumer/KafkaConsumerClientImpl;
      61: invokevirtual #62                 // Method no/nav/common/kafka/consumer/KafkaConsumerClientImpl.stop:()V
      64: lconst_0
      65: aload_0
      66: getfield      #5                  // Field counterTopicA:Ljava/util/concurrent/atomic/AtomicInteger;
      69: invokevirtual #65                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      72: i2l
      73: invokestatic  #66                 // Method org/junit/Assert.assertEquals:(JJ)V
      76: return

  private no.nav.common.kafka.producer.feilhandtering.StoredProducerRecord storedRecord(java.lang.String, java.lang.String, java.lang.String);
    Code:
       0: new           #80                 // class no/nav/common/kafka/producer/feilhandtering/StoredProducerRecord
       3: dup
       4: aload_1
       5: aload_2
       6: invokevirtual #81                 // Method java/lang/String.getBytes:()[B
       9: aload_3
      10: invokevirtual #81                 // Method java/lang/String.getBytes:()[B
      13: ldc           #82                 // String []
      15: invokespecial #83                 // Method no/nav/common/kafka/producer/feilhandtering/StoredProducerRecord."<init>":(Ljava/lang/String;[B[BLjava/lang/String;)V
      18: areturn

  private java.lang.Object lambda$should_not_send_records_to_kafka_stored_in_a_transaction_that_gets_rolled_back$3(org.springframework.transaction.TransactionStatus);
    Code:
       0: aload_0
       1: getfield      #18                 // Field producerRepository:Lno/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository;
       4: aload_0
       5: ldc           #24                 // String test-topic-a
       7: ldc           #49                 // String value1
       9: ldc           #50                 // String key1
      11: invokevirtual #51                 // Method storedRecord:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;
      14: invokeinterface #52,  2           // InterfaceMethod no/nav/common/kafka/producer/feilhandtering/KafkaProducerRepository.storeRecord:(Lno/nav/common/kafka/producer/feilhandtering/StoredProducerRecord;)J
      19: pop2
      20: ldc2_w        #78                 // long 4000l
      23: invokestatic  #59                 // Method java/lang/Thread.sleep:(J)V
      26: goto          30
      29: astore_2
      30: aload_1
      31: invokeinterface #85,  1           // InterfaceMethod org/springframework/transaction/TransactionStatus.setRollbackOnly:()V
      36: aconst_null
      37: areturn
    Exception table:
       from    to  target type
          20    26    29   Class java/lang/InterruptedException

  private no.nav.common.kafka.consumer.ConsumeStatus lambda$setup$2(org.apache.kafka.clients.consumer.ConsumerRecord);
    Code:
       0: aload_0
       1: getfield      #6                  // Field counterTopicB:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #86                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
       7: pop
       8: getstatic     #87                 // Field no/nav/common/kafka/consumer/ConsumeStatus.OK:Lno/nav/common/kafka/consumer/ConsumeStatus;
      11: areturn

  private no.nav.common.kafka.consumer.ConsumeStatus lambda$setup$1(org.apache.kafka.clients.consumer.ConsumerRecord);
    Code:
       0: aload_0
       1: getfield      #5                  // Field counterTopicA:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #86                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
       7: pop
       8: getstatic     #87                 // Field no/nav/common/kafka/consumer/ConsumeStatus.OK:Lno/nav/common/kafka/consumer/ConsumeStatus;
      11: areturn

  private static boolean lambda$setup$0();
    Code:
       0: iconst_1
       1: ireturn

  static {};
    Code:
       0: new           #88                 // class org/testcontainers/containers/KafkaContainer
       3: dup
       4: ldc           #89                 // String confluentinc/cp-kafka:5.4.3
       6: invokestatic  #90                 // Method org/testcontainers/utility/DockerImageName.parse:(Ljava/lang/String;)Lorg/testcontainers/utility/DockerImageName;
       9: invokespecial #91                 // Method org/testcontainers/containers/KafkaContainer."<init>":(Lorg/testcontainers/utility/DockerImageName;)V
      12: putstatic     #8                  // Field kafka:Lorg/testcontainers/containers/KafkaContainer;
      15: return
}

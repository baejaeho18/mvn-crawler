Compiled from "SslUpgradeTestCase.java"
public class io.undertow.servlet.test.upgrade.SslUpgradeTestCase {
  public io.undertow.servlet.test.upgrade.SslUpgradeTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void setup() throws javax.servlet.ServletException, java.io.IOException;
    Code:
       0: invokestatic  #2                  // Method io/undertow/testutils/DefaultServer.startSSLServer:()V
       3: iconst_2
       4: anewarray     #3                  // class io/undertow/servlet/api/ServletInfo
       7: dup
       8: iconst_0
       9: new           #3                  // class io/undertow/servlet/api/ServletInfo
      12: dup
      13: ldc           #4                  // String upgradeServlet
      15: ldc           #5                  // class io/undertow/servlet/test/upgrade/UpgradeServlet
      17: invokespecial #6                  // Method io/undertow/servlet/api/ServletInfo."<init>":(Ljava/lang/String;Ljava/lang/Class;)V
      20: ldc           #7                  // String /upgrade
      22: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.addMapping:(Ljava/lang/String;)Lio/undertow/servlet/api/ServletInfo;
      25: aastore
      26: dup
      27: iconst_1
      28: new           #3                  // class io/undertow/servlet/api/ServletInfo
      31: dup
      32: ldc           #9                  // String upgradeAsyncServlet
      34: ldc           #10                 // class io/undertow/servlet/test/upgrade/AsyncUpgradeServlet
      36: invokespecial #6                  // Method io/undertow/servlet/api/ServletInfo."<init>":(Ljava/lang/String;Ljava/lang/Class;)V
      39: ldc           #11                 // String /asyncupgrade
      41: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.addMapping:(Ljava/lang/String;)Lio/undertow/servlet/api/ServletInfo;
      44: aastore
      45: invokestatic  #12                 // Method io/undertow/servlet/test/util/DeploymentUtils.setupServlet:([Lio/undertow/servlet/api/ServletInfo;)Lio/undertow/servlet/api/Deployment;
      48: pop
      49: return

  public static void stop() throws java.io.IOException;
    Code:
       0: invokestatic  #13                 // Method io/undertow/testutils/DefaultServer.stopSSLServer:()V
       3: return

  public void testBlockingUpgrade() throws java.io.IOException;
    Code:
       0: aload_0
       1: ldc           #14                 // String /servletContext/upgrade
       3: invokevirtual #15                 // Method runTest:(Ljava/lang/String;)V
       6: return

  public void testAsyncUpgrade() throws java.io.IOException;
    Code:
       0: aload_0
       1: ldc           #16                 // String /servletContext/asyncupgrade
       3: invokevirtual #15                 // Method runTest:(Ljava/lang/String;)V
       6: return

  public void runTest(java.lang.String) throws java.io.IOException;
    Code:
       0: new           #17                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #18                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_2
       8: invokestatic  #19                 // Method io/undertow/testutils/DefaultServer.getClientSSLContext:()Ljavax/net/ssl/SSLContext;
      11: invokevirtual #20                 // Method javax/net/ssl/SSLContext.getSocketFactory:()Ljavax/net/ssl/SSLSocketFactory;
      14: new           #21                 // class java/net/Socket
      17: dup
      18: ldc           #22                 // String default
      20: invokestatic  #23                 // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
      23: ldc           #22                 // String default
      25: invokestatic  #24                 // Method io/undertow/testutils/DefaultServer.getHostSSLPort:(Ljava/lang/String;)I
      28: invokespecial #25                 // Method java/net/Socket."<init>":(Ljava/lang/String;I)V
      31: ldc           #22                 // String default
      33: invokestatic  #23                 // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
      36: ldc           #22                 // String default
      38: invokestatic  #24                 // Method io/undertow/testutils/DefaultServer.getHostSSLPort:(Ljava/lang/String;)I
      41: iconst_1
      42: invokevirtual #26                 // Method javax/net/ssl/SSLSocketFactory.createSocket:(Ljava/net/Socket;Ljava/lang/String;IZ)Ljava/net/Socket;
      45: astore_3
      46: aload_3
      47: invokevirtual #27                 // Method java/net/Socket.getInputStream:()Ljava/io/InputStream;
      50: astore        4
      52: aload_3
      53: invokevirtual #28                 // Method java/net/Socket.getOutputStream:()Ljava/io/OutputStream;
      56: astore        5
      58: aload         5
      60: new           #29                 // class java/lang/StringBuilder
      63: dup
      64: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
      67: ldc           #31                 // String GET
      69: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      72: aload_1
      73: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      76: ldc           #33                 // String  HTTP/1.1\r\nConnection: upgrade\r\nUpgrade:servlet\r\n\r\n
      78: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      84: invokevirtual #35                 // Method java/lang/String.getBytes:()[B
      87: invokevirtual #36                 // Method java/io/OutputStream.write:([B)V
      90: aload         5
      92: invokevirtual #37                 // Method java/io/OutputStream.flush:()V
      95: aload_0
      96: aload         4
      98: invokespecial #38                 // Method readBytes:(Ljava/io/InputStream;)Ljava/lang/String;
     101: astore        6
     103: aload         6
     105: aload         6
     107: ldc           #39                 // String HTTP/1.1 101 Switching Protocols\r\n
     109: invokevirtual #40                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     112: invokestatic  #41                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     115: aload         5
     117: ldc           #42                 // String Echo Messages\r\n\r\n
     119: invokevirtual #35                 // Method java/lang/String.getBytes:()[B
     122: invokevirtual #36                 // Method java/io/OutputStream.write:([B)V
     125: aload         5
     127: invokevirtual #37                 // Method java/io/OutputStream.flush:()V
     130: ldc           #42                 // String Echo Messages\r\n\r\n
     132: aload_0
     133: aload         4
     135: invokespecial #38                 // Method readBytes:(Ljava/io/InputStream;)Ljava/lang/String;
     138: invokestatic  #43                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     141: aload         5
     143: ldc           #44                 // String Echo Messages2\r\n\r\n
     145: invokevirtual #35                 // Method java/lang/String.getBytes:()[B
     148: invokevirtual #36                 // Method java/io/OutputStream.write:([B)V
     151: aload         5
     153: invokevirtual #37                 // Method java/io/OutputStream.flush:()V
     156: ldc           #44                 // String Echo Messages2\r\n\r\n
     158: aload_0
     159: aload         4
     161: invokespecial #38                 // Method readBytes:(Ljava/io/InputStream;)Ljava/lang/String;
     164: invokestatic  #43                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     167: aload         5
     169: ldc           #45                 // String exit\r\n\r\n
     171: invokevirtual #35                 // Method java/lang/String.getBytes:()[B
     174: invokevirtual #36                 // Method java/io/OutputStream.write:([B)V
     177: aload         5
     179: invokevirtual #37                 // Method java/io/OutputStream.flush:()V
     182: aload_3
     183: invokevirtual #46                 // Method java/net/Socket.close:()V
     186: aload_2
     187: invokevirtual #47                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     190: invokeinterface #48,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     195: goto          212
     198: astore        7
     200: aload_2
     201: invokevirtual #47                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     204: invokeinterface #48,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     209: aload         7
     211: athrow
     212: return
    Exception table:
       from    to  target type
           8   186   198   any
         198   200   198   any

  private java.lang.String readBytes(java.io.InputStream) throws java.io.IOException;
    Code:
       0: new           #29                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
       7: astore_2
       8: bipush        100
      10: newarray       byte
      12: astore_3
      13: aload_2
      14: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      17: ldc           #49                 // String \r\n\r\n
      19: invokevirtual #50                 // Method java/lang/String.endsWith:(Ljava/lang/String;)Z
      22: ifne          56
      25: aload_1
      26: aload_3
      27: invokevirtual #51                 // Method java/io/InputStream.read:([B)I
      30: dup
      31: istore        4
      33: iconst_m1
      34: if_icmpeq     56
      37: aload_2
      38: new           #52                 // class java/lang/String
      41: dup
      42: aload_3
      43: iconst_0
      44: iload         4
      46: invokespecial #53                 // Method java/lang/String."<init>":([BII)V
      49: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: pop
      53: goto          13
      56: aload_2
      57: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      60: areturn
}

Compiled from "WeightedRoundRobinPartitionSelector.java"
public class org.joyqueue.client.internal.producer.support.WeightedRoundRobinPartitionSelector extends org.joyqueue.client.internal.producer.support.AbstractPartitionSelector {
  public static final java.lang.String NAME;

  private final java.util.concurrent.atomic.AtomicInteger next;

  private final java.util.concurrent.atomic.AtomicInteger currentWeight;

  private org.joyqueue.client.internal.metadata.domain.TopicMetadata lastTopicMetadata;

  public org.joyqueue.client.internal.producer.support.WeightedRoundRobinPartitionSelector();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/joyqueue/client/internal/producer/support/AbstractPartitionSelector."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicInteger
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      12: putfield      #4                  // Field next:Ljava/util/concurrent/atomic/AtomicInteger;
      15: aload_0
      16: new           #2                  // class java/util/concurrent/atomic/AtomicInteger
      19: dup
      20: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      23: putfield      #5                  // Field currentWeight:Ljava/util/concurrent/atomic/AtomicInteger;
      26: return

  protected org.joyqueue.client.internal.metadata.domain.PartitionMetadata nextPartition(org.joyqueue.client.internal.producer.domain.ProduceMessage, org.joyqueue.client.internal.metadata.domain.TopicMetadata, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>);
    Code:
       0: aload_0
       1: getfield      #4                  // Field next:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #6                  // Method java/util/concurrent/atomic/AtomicInteger.get:()I
       7: istore        4
       9: aload_0
      10: getfield      #5                  // Field currentWeight:Ljava/util/concurrent/atomic/AtomicInteger;
      13: invokevirtual #6                  // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      16: istore        5
      18: aload_3
      19: invokeinterface #7,  1            // InterfaceMethod java/util/List.size:()I
      24: istore        6
      26: aload_0
      27: getfield      #8                  // Field lastTopicMetadata:Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
      30: aload_2
      31: if_acmpeq     38
      34: iconst_1
      35: goto          39
      38: iconst_0
      39: istore        7
      41: iconst_0
      42: istore        8
      44: iload         7
      46: ifeq          54
      49: aload_0
      50: aload_2
      51: putfield      #8                  // Field lastTopicMetadata:Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
      54: iload         4
      56: iload         6
      58: if_icmplt     72
      61: aload_0
      62: getfield      #4                  // Field next:Ljava/util/concurrent/atomic/AtomicInteger;
      65: iconst_1
      66: invokevirtual #9                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
      69: iconst_0
      70: istore        4
      72: iload         4
      74: iconst_1
      75: iadd
      76: iload         6
      78: irem
      79: istore        4
      81: iload         4
      83: ifeq          91
      86: iload         7
      88: ifeq          158
      91: iconst_0
      92: istore        7
      94: aload_0
      95: aload_3
      96: invokevirtual #10                 // Method getMaxGcd:(Ljava/util/List;)I
      99: istore        9
     101: iload         5
     103: iload         9
     105: isub
     106: istore        5
     108: iload         5
     110: ifgt          158
     113: aload_0
     114: aload_3
     115: invokevirtual #11                 // Method getMaxWeight:(Ljava/util/List;)I
     118: istore        10
     120: iload         10
     122: istore        5
     124: aload_0
     125: getfield      #5                  // Field currentWeight:Ljava/util/concurrent/atomic/AtomicInteger;
     128: iload         10
     130: invokevirtual #9                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
     133: aload_0
     134: getfield      #4                  // Field next:Ljava/util/concurrent/atomic/AtomicInteger;
     137: iload         4
     139: invokevirtual #9                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
     142: iload         5
     144: ifne          158
     147: aload_3
     148: iconst_0
     149: invokeinterface #12,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     154: checkcast     #13                 // class org/joyqueue/client/internal/metadata/domain/PartitionMetadata
     157: areturn
     158: aload_3
     159: iload         4
     161: invokeinterface #12,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     166: checkcast     #13                 // class org/joyqueue/client/internal/metadata/domain/PartitionMetadata
     169: astore        9
     171: aload         9
     173: invokevirtual #14                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
     176: astore        10
     178: aload         10
     180: ifnonnull     197
     183: iload         8
     185: iconst_5
     186: if_icmple     191
     189: aconst_null
     190: areturn
     191: iinc          8, 1
     194: goto          72
     197: aload         10
     199: invokevirtual #15                 // Method org/joyqueue/network/domain/BrokerNode.getWeight:()I
     202: istore        11
     204: iload         11
     206: iload         5
     208: if_icmplt     232
     211: aload_0
     212: getfield      #5                  // Field currentWeight:Ljava/util/concurrent/atomic/AtomicInteger;
     215: iload         5
     217: invokevirtual #9                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
     220: aload_0
     221: getfield      #4                  // Field next:Ljava/util/concurrent/atomic/AtomicInteger;
     224: iload         4
     226: invokevirtual #9                  // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
     229: aload         9
     231: areturn
     232: goto          72

  protected int getMaxGcd(java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>);
    Code:
       0: iconst_0
       1: istore_2
       2: iconst_0
       3: istore_3
       4: iload_3
       5: aload_1
       6: invokeinterface #7,  1            // InterfaceMethod java/util/List.size:()I
      11: iconst_1
      12: isub
      13: if_icmpge     84
      16: aload_1
      17: iload_3
      18: invokeinterface #12,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      23: checkcast     #13                 // class org/joyqueue/client/internal/metadata/domain/PartitionMetadata
      26: invokevirtual #14                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
      29: astore        4
      31: aload_1
      32: iload_3
      33: iconst_1
      34: iadd
      35: invokeinterface #12,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      40: checkcast     #13                 // class org/joyqueue/client/internal/metadata/domain/PartitionMetadata
      43: invokevirtual #14                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
      46: astore        5
      48: aload         4
      50: ifnull        78
      53: aload         5
      55: ifnull        78
      58: aload_0
      59: iload_2
      60: aload_0
      61: aload         4
      63: invokevirtual #15                 // Method org/joyqueue/network/domain/BrokerNode.getWeight:()I
      66: aload         5
      68: invokevirtual #15                 // Method org/joyqueue/network/domain/BrokerNode.getWeight:()I
      71: invokevirtual #16                 // Method getGcd:(II)I
      74: invokevirtual #16                 // Method getGcd:(II)I
      77: istore_2
      78: iinc          3, 1
      81: goto          4
      84: iload_2
      85: ireturn

  protected int getMaxWeight(java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>);
    Code:
       0: iconst_0
       1: istore_2
       2: aload_1
       3: invokeinterface #17,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       8: astore_3
       9: aload_3
      10: invokeinterface #18,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      15: ifeq          60
      18: aload_3
      19: invokeinterface #19,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      24: checkcast     #13                 // class org/joyqueue/client/internal/metadata/domain/PartitionMetadata
      27: astore        4
      29: aload         4
      31: invokevirtual #14                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
      34: ifnonnull     40
      37: goto          9
      40: aload         4
      42: invokevirtual #14                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
      45: invokevirtual #15                 // Method org/joyqueue/network/domain/BrokerNode.getWeight:()I
      48: istore        5
      50: iload         5
      52: iload_2
      53: invokestatic  #20                 // Method java/lang/Math.max:(II)I
      56: istore_2
      57: goto          9
      60: iload_2
      61: ireturn

  protected int getGcd(int, int);
    Code:
       0: new           #21                 // class java/math/BigInteger
       3: dup
       4: iload_1
       5: invokestatic  #22                 // Method java/lang/String.valueOf:(I)Ljava/lang/String;
       8: invokespecial #23                 // Method java/math/BigInteger."<init>":(Ljava/lang/String;)V
      11: astore_3
      12: new           #21                 // class java/math/BigInteger
      15: dup
      16: iload_2
      17: invokestatic  #22                 // Method java/lang/String.valueOf:(I)Ljava/lang/String;
      20: invokespecial #23                 // Method java/math/BigInteger."<init>":(Ljava/lang/String;)V
      23: astore        4
      25: aload_3
      26: aload         4
      28: invokevirtual #24                 // Method java/math/BigInteger.gcd:(Ljava/math/BigInteger;)Ljava/math/BigInteger;
      31: invokevirtual #25                 // Method java/math/BigInteger.intValue:()I
      34: ireturn

  public java.lang.String type();
    Code:
       0: ldc           #27                 // String roundrobin
       2: areturn

  public java.lang.Object type();
    Code:
       0: aload_0
       1: invokevirtual #28                 // Method type:()Ljava/lang/String;
       4: areturn
}

Compiled from "MessageProducerInner.java"
public class org.joyqueue.client.internal.producer.support.MessageProducerInner extends org.joyqueue.toolkit.service.Service {
  protected static final org.slf4j.Logger logger;

  private org.joyqueue.client.internal.producer.config.ProducerConfig config;

  private org.joyqueue.client.internal.nameserver.NameServerConfig nameServerConfig;

  private org.joyqueue.client.internal.producer.MessageSender messageSender;

  private org.joyqueue.client.internal.cluster.ClusterManager clusterManager;

  private org.joyqueue.client.internal.producer.transport.ProducerClientManager producerClientManager;

  private org.joyqueue.client.internal.producer.support.PartitionSelectorManager partitionSelectorManager;

  private org.joyqueue.client.internal.producer.interceptor.ProducerInterceptorManager producerInterceptorManager;

  public org.joyqueue.client.internal.producer.support.MessageProducerInner(org.joyqueue.client.internal.producer.config.ProducerConfig, org.joyqueue.client.internal.nameserver.NameServerConfig, org.joyqueue.client.internal.producer.MessageSender, org.joyqueue.client.internal.cluster.ClusterManager, org.joyqueue.client.internal.producer.transport.ProducerClientManager);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: aload         5
       8: new           #1                  // class org/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager
      11: dup
      12: invokespecial #2                  // Method org/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager."<init>":()V
      15: invokespecial #3                  // Method "<init>":(Lorg/joyqueue/client/internal/producer/config/ProducerConfig;Lorg/joyqueue/client/internal/nameserver/NameServerConfig;Lorg/joyqueue/client/internal/producer/MessageSender;Lorg/joyqueue/client/internal/cluster/ClusterManager;Lorg/joyqueue/client/internal/producer/transport/ProducerClientManager;Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;)V
      18: return

  public org.joyqueue.client.internal.producer.support.MessageProducerInner(org.joyqueue.client.internal.producer.config.ProducerConfig, org.joyqueue.client.internal.nameserver.NameServerConfig, org.joyqueue.client.internal.producer.MessageSender, org.joyqueue.client.internal.cluster.ClusterManager, org.joyqueue.client.internal.producer.transport.ProducerClientManager, org.joyqueue.client.internal.producer.interceptor.ProducerInterceptorManager);
    Code:
       0: aload_0
       1: invokespecial #4                  // Method org/joyqueue/toolkit/service/Service."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
       9: aload_0
      10: aload_2
      11: putfield      #6                  // Field nameServerConfig:Lorg/joyqueue/client/internal/nameserver/NameServerConfig;
      14: aload_0
      15: aload_3
      16: putfield      #7                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
      19: aload_0
      20: aload         4
      22: putfield      #8                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
      25: aload_0
      26: aload         5
      28: putfield      #9                  // Field producerClientManager:Lorg/joyqueue/client/internal/producer/transport/ProducerClientManager;
      31: aload_0
      32: aload         6
      34: putfield      #10                 // Field producerInterceptorManager:Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;
      37: return

  protected void validate() throws java.lang.Exception;
    Code:
       0: aload_0
       1: new           #11                 // class org/joyqueue/client/internal/producer/support/PartitionSelectorManager
       4: dup
       5: invokespecial #12                 // Method org/joyqueue/client/internal/producer/support/PartitionSelectorManager."<init>":()V
       8: putfield      #13                 // Field partitionSelectorManager:Lorg/joyqueue/client/internal/producer/support/PartitionSelectorManager;
      11: return

  public synchronized void addInterceptor(org.joyqueue.client.internal.producer.interceptor.ProducerInterceptor);
    Code:
       0: aload_0
       1: getfield      #10                 // Field producerInterceptorManager:Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;
       4: aload_1
       5: invokevirtual #14                 // Method org/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager.addInterceptor:(Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptor;)V
       8: return

  public synchronized void removeInterceptor(org.joyqueue.client.internal.producer.interceptor.ProducerInterceptor);
    Code:
       0: aload_0
       1: getfield      #10                 // Field producerInterceptorManager:Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;
       4: aload_1
       5: invokevirtual #15                 // Method org/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager.removeInterceptor:(Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptor;)V
       8: return

  public org.joyqueue.client.internal.producer.domain.SendResult send(org.joyqueue.client.internal.producer.domain.ProduceMessage, java.lang.String, long, java.util.concurrent.TimeUnit, boolean, boolean, org.joyqueue.client.internal.producer.callback.AsyncProduceCallback);
    Code:
       0: aload         8
       2: ifnonnull     9
       5: aconst_null
       6: goto          18
       9: new           #16                 // class org/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallbackAdapter
      12: dup
      13: aload         8
      15: invokespecial #17                 // Method org/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallbackAdapter."<init>":(Lorg/joyqueue/client/internal/producer/callback/AsyncProduceCallback;)V
      18: astore        9
      20: aload_0
      21: iconst_1
      22: anewarray     #18                 // class org/joyqueue/client/internal/producer/domain/ProduceMessage
      25: dup
      26: iconst_0
      27: aload_1
      28: aastore
      29: invokestatic  #19                 // Method com/google/common/collect/Lists.newArrayList:([Ljava/lang/Object;)Ljava/util/ArrayList;
      32: aload_2
      33: lload_3
      34: aload         5
      36: iload         6
      38: iload         7
      40: aload         9
      42: invokevirtual #20                 // Method batchSend:(Ljava/util/List;Ljava/lang/String;JLjava/util/concurrent/TimeUnit;ZZLorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)Ljava/util/List;
      45: astore        10
      47: aload         10
      49: invokestatic  #21                 // Method org/apache/commons/collections/CollectionUtils.isEmpty:(Ljava/util/Collection;)Z
      52: ifeq          57
      55: aconst_null
      56: areturn
      57: aload         10
      59: iconst_0
      60: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      65: checkcast     #23                 // class org/joyqueue/client/internal/producer/domain/SendResult
      68: areturn

  public java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> batchSend(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, java.lang.String, long, java.util.concurrent.TimeUnit, boolean, boolean, org.joyqueue.client.internal.producer.callback.AsyncBatchProduceCallback);
    Code:
       0: aload         5
       2: ifnull        9
       5: iconst_1
       6: goto          10
       9: iconst_0
      10: ldc           #24                 // String timeoutUnit not null
      12: invokestatic  #25                 // Method com/google/common/base/Preconditions.checkArgument:(ZLjava/lang/Object;)V
      15: aload_1
      16: aload_0
      17: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      20: invokestatic  #26                 // Method org/joyqueue/client/internal/producer/checker/ProduceMessageChecker.checkMessages:(Ljava/util/List;Lorg/joyqueue/client/internal/producer/config/ProducerConfig;)V
      23: aload_0
      24: aload_1
      25: aload_2
      26: lload_3
      27: aload         5
      29: iload         6
      31: iload         7
      33: aload         8
      35: invokevirtual #27                 // Method doBatchSend:(Ljava/util/List;Ljava/lang/String;JLjava/util/concurrent/TimeUnit;ZZLorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)Ljava/util/List;
      38: areturn

  public java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> doBatchSend(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, java.lang.String, long, java.util.concurrent.TimeUnit, boolean, boolean, org.joyqueue.client.internal.producer.callback.AsyncBatchProduceCallback);
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
       8: checkcast     #18                 // class org/joyqueue/client/internal/producer/domain/ProduceMessage
      11: invokevirtual #28                 // Method org/joyqueue/client/internal/producer/domain/ProduceMessage.getTopic:()Ljava/lang/String;
      14: invokevirtual #29                 // Method getAndCheckTopicMetadata:(Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
      17: astore        9
      19: aload_0
      20: aload         9
      22: invokevirtual #30                 // Method getRegionBrokers:(Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;)Ljava/util/List;
      25: astore        10
      27: aload_0
      28: aload         10
      30: invokevirtual #31                 // Method filterNotAvailableBrokers:(Ljava/util/List;)Ljava/util/List;
      33: astore        10
      35: aload_0
      36: aload         9
      38: aload         10
      40: invokevirtual #32                 // Method getBrokerPartitions:(Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;)Ljava/util/List;
      43: astore        11
      45: aload_0
      46: aload_1
      47: aload         9
      49: aconst_null
      50: aload         11
      52: aload_2
      53: lload_3
      54: aload         5
      56: iload         6
      58: iload         7
      60: aload         8
      62: invokevirtual #33                 // Method doBatchSend:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;Ljava/util/List;Ljava/lang/String;JLjava/util/concurrent/TimeUnit;ZZLorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)Ljava/util/List;
      65: areturn

  public java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> doBatchSend(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, org.joyqueue.client.internal.metadata.domain.TopicMetadata, org.joyqueue.client.internal.metadata.domain.PartitionMetadata, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>, java.lang.String, long, java.util.concurrent.TimeUnit, boolean, boolean, org.joyqueue.client.internal.producer.callback.AsyncBatchProduceCallback);
    Code:
       0: new           #34                 // class org/joyqueue/client/internal/producer/interceptor/ProducerInvocation
       3: dup
       4: aload_0
       5: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
       8: aload_0
       9: getfield      #6                  // Field nameServerConfig:Lorg/joyqueue/client/internal/nameserver/NameServerConfig;
      12: aload_2
      13: aload_1
      14: aload_0
      15: getfield      #10                 // Field producerInterceptorManager:Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;
      18: new           #35                 // class org/joyqueue/client/internal/producer/support/MessageProducerInner$1
      21: dup
      22: aload_0
      23: aload_1
      24: aload_2
      25: aload_3
      26: aload         4
      28: aload         5
      30: lload         6
      32: aload         8
      34: iload         9
      36: iload         10
      38: aload         11
      40: invokespecial #36                 // Method org/joyqueue/client/internal/producer/support/MessageProducerInner$1."<init>":(Lorg/joyqueue/client/internal/producer/support/MessageProducerInner;Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;Ljava/util/List;Ljava/lang/String;JLjava/util/concurrent/TimeUnit;ZZLorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)V
      43: invokespecial #37                 // Method org/joyqueue/client/internal/producer/interceptor/ProducerInvocation."<init>":(Lorg/joyqueue/client/internal/producer/config/ProducerConfig;Lorg/joyqueue/client/internal/nameserver/NameServerConfig;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Lorg/joyqueue/client/internal/producer/interceptor/ProducerInterceptorManager;Lorg/joyqueue/client/internal/producer/interceptor/ProducerInvoker;)V
      46: invokevirtual #38                 // Method org/joyqueue/client/internal/producer/interceptor/ProducerInvocation.invoke:()Ljava/util/List;
      49: areturn
      50: astore        12
      52: aload         12
      54: instanceof    #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      57: ifeq          66
      60: aload         12
      62: checkcast     #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      65: athrow
      66: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      69: dup
      70: aload         12
      72: invokespecial #41                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/Throwable;)V
      75: athrow
    Exception table:
       from    to  target type
           0    49    50   Class java/lang/Exception

  protected java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> doBatchSendInternal(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, org.joyqueue.client.internal.metadata.domain.TopicMetadata, org.joyqueue.client.internal.metadata.domain.PartitionMetadata, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>, java.lang.String, long, java.util.concurrent.TimeUnit, boolean, boolean, org.joyqueue.client.internal.producer.callback.AsyncBatchProduceCallback);
    Code:
       0: aconst_null
       1: astore        12
       3: aload_2
       4: invokevirtual #42                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getProducerPolicy:()Lorg/joyqueue/domain/ProducerPolicy;
       7: astore        13
       9: aload_2
      10: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
      13: astore        14
      15: aload_0
      16: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      19: invokevirtual #44                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getApp:()Ljava/lang/String;
      22: astore        15
      24: aload_0
      25: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      28: invokevirtual #45                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getProduceTimeout:()J
      31: ldc2_w        #47                 // long -1l
      34: lcmp
      35: ifne          50
      38: aload         13
      40: invokevirtual #49                 // Method org/joyqueue/domain/ProducerPolicy.getTimeOut:()Ljava/lang/Integer;
      43: invokevirtual #50                 // Method java/lang/Integer.intValue:()I
      46: i2l
      47: goto          57
      50: aload_0
      51: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      54: invokevirtual #45                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getProduceTimeout:()J
      57: lstore        16
      59: aload         8
      61: lload         6
      63: invokevirtual #51                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      66: lstore        6
      68: iload         10
      70: ifeq          85
      73: aload_0
      74: aload_1
      75: invokevirtual #52                 // Method isFailover:(Ljava/util/List;)Z
      78: ifeq          85
      81: iconst_1
      82: goto          86
      85: iconst_0
      86: istore        10
      88: aload_0
      89: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      92: invokevirtual #53                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getRetryPolicy:()Lorg/joyqueue/toolkit/retry/RetryPolicy;
      95: astore        18
      97: iconst_0
      98: istore        19
     100: iload         10
     102: ifeq          116
     105: aload         18
     107: invokevirtual #54                 // Method org/joyqueue/toolkit/retry/RetryPolicy.getMaxRetrys:()Ljava/lang/Integer;
     110: invokevirtual #50                 // Method java/lang/Integer.intValue:()I
     113: goto          117
     116: iconst_0
     117: istore        20
     119: aconst_null
     120: astore        21
     122: aconst_null
     123: astore        22
     125: aload_3
     126: ifnonnull     140
     129: aload_0
     130: aload_1
     131: aload_2
     132: aload         4
     134: aload         12
     136: invokevirtual #55                 // Method dispatchPartitions:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Ljava/util/List;)Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;
     139: astore_3
     140: iconst_0
     141: istore        23
     143: iload         23
     145: iload         20
     147: if_icmpgt     458
     150: iload         19
     152: ifeq          194
     155: iload         10
     157: ifeq          194
     160: aload         12
     162: ifnonnull     170
     165: invokestatic  #56                 // Method com/google/common/collect/Lists.newLinkedList:()Ljava/util/LinkedList;
     168: astore        12
     170: aload         12
     172: aload_3
     173: invokeinterface #57,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     178: pop
     179: aload_1
     180: invokestatic  #58                 // Method org/joyqueue/client/internal/producer/helper/ProducerHelper.clearPartitions:(Ljava/util/List;)V
     183: aload_0
     184: aload_1
     185: aload_2
     186: aload         4
     188: aload         12
     190: invokevirtual #55                 // Method dispatchPartitions:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Ljava/util/List;)Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;
     193: astore_3
     194: aload_0
     195: aload_3
     196: invokevirtual #59                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
     199: aload         14
     201: aload         15
     203: aload_1
     204: aload         5
     206: aload_0
     207: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
     210: invokevirtual #60                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getQosLevel:()Lorg/joyqueue/domain/QosLevel;
     213: lload         16
     215: lload         6
     217: iload         9
     219: aload         11
     221: invokevirtual #61                 // Method doSendBatchMessage:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Ljava/lang/String;Lorg/joyqueue/domain/QosLevel;JJZLorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)Ljava/util/List;
     224: astore        22
     226: goto          458
     229: astore        24
     231: aload         24
     233: astore        21
     235: iinc          19, 1
     238: aload_0
     239: aload_2
     240: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
     243: invokevirtual #29                 // Method getAndCheckTopicMetadata:(Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
     246: astore_2
     247: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     250: ldc           #64                 // String send message exception, topic: {}, app:{}, messages: {}
     252: iconst_4
     253: anewarray     #65                 // class java/lang/Object
     256: dup
     257: iconst_0
     258: aload         14
     260: aastore
     261: dup
     262: iconst_1
     263: aload         15
     265: aastore
     266: dup
     267: iconst_2
     268: aload_1
     269: aastore
     270: dup
     271: iconst_3
     272: aload         24
     274: aastore
     275: invokeinterface #66,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     280: goto          452
     283: astore        24
     285: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     288: dup
     289: aload         24
     291: invokevirtual #68                 // Method org/joyqueue/client/internal/producer/exception/NeedRetryException.getMessage:()Ljava/lang/String;
     294: aload         24
     296: invokevirtual #69                 // Method org/joyqueue/client/internal/producer/exception/NeedRetryException.getCode:()I
     299: aload         24
     301: invokevirtual #70                 // Method org/joyqueue/client/internal/producer/exception/NeedRetryException.getCause:()Ljava/lang/Throwable;
     304: invokespecial #71                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;ILjava/lang/Throwable;)V
     307: astore        21
     309: iinc          19, 1
     312: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     315: ldc           #64                 // String send message exception, topic: {}, app:{}, messages: {}
     317: iconst_4
     318: anewarray     #65                 // class java/lang/Object
     321: dup
     322: iconst_0
     323: aload         14
     325: aastore
     326: dup
     327: iconst_1
     328: aload         15
     330: aastore
     331: dup
     332: iconst_2
     333: aload_1
     334: aastore
     335: dup
     336: iconst_3
     337: aload         24
     339: aastore
     340: invokeinterface #66,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     345: goto          452
     348: astore        24
     350: aload         24
     352: astore        21
     354: iinc          19, 1
     357: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     360: ldc           #64                 // String send message exception, topic: {}, app:{}, messages: {}
     362: iconst_4
     363: anewarray     #65                 // class java/lang/Object
     366: dup
     367: iconst_0
     368: aload         14
     370: aastore
     371: dup
     372: iconst_1
     373: aload         15
     375: aastore
     376: dup
     377: iconst_2
     378: aload_1
     379: aastore
     380: dup
     381: iconst_3
     382: aload         24
     384: aastore
     385: invokeinterface #66,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     390: goto          452
     393: astore        24
     395: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     398: ldc           #64                 // String send message exception, topic: {}, app:{}, messages: {}
     400: iconst_4
     401: anewarray     #65                 // class java/lang/Object
     404: dup
     405: iconst_0
     406: aload         14
     408: aastore
     409: dup
     410: iconst_1
     411: aload         15
     413: aastore
     414: dup
     415: iconst_2
     416: aload_1
     417: aastore
     418: dup
     419: iconst_3
     420: aload         24
     422: aastore
     423: invokeinterface #73,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     428: aload         24
     430: instanceof    #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     433: ifeq          442
     436: aload         24
     438: checkcast     #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     441: athrow
     442: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     445: dup
     446: aload         24
     448: invokespecial #41                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/Throwable;)V
     451: athrow
     452: iinc          23, 1
     455: goto          143
     458: iload         19
     460: aload         18
     462: invokevirtual #54                 // Method org/joyqueue/toolkit/retry/RetryPolicy.getMaxRetrys:()Ljava/lang/Integer;
     465: invokevirtual #50                 // Method java/lang/Integer.intValue:()I
     468: if_icmple     495
     471: aload         21
     473: instanceof    #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     476: ifeq          485
     479: aload         21
     481: checkcast     #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     484: athrow
     485: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     488: dup
     489: aload         21
     491: invokespecial #41                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/Throwable;)V
     494: athrow
     495: iload         19
     497: ifeq          545
     500: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     503: ldc           #74                 // String send message success, retry {} times, topic: {}, app: {}, partitions: {}, error: {}
     505: iconst_5
     506: anewarray     #65                 // class java/lang/Object
     509: dup
     510: iconst_0
     511: iload         19
     513: invokestatic  #75                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     516: aastore
     517: dup
     518: iconst_1
     519: aload         14
     521: aastore
     522: dup
     523: iconst_2
     524: aload         15
     526: aastore
     527: dup
     528: iconst_3
     529: aload         12
     531: aastore
     532: dup
     533: iconst_4
     534: aload         21
     536: invokevirtual #76                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     539: aastore
     540: invokeinterface #77,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     545: aload         22
     547: areturn
    Exception table:
       from    to  target type
         194   226   229   Class org/joyqueue/client/internal/metadata/exception/MetadataException
         194   226   283   Class org/joyqueue/client/internal/producer/exception/NeedRetryException
         194   226   348   Class org/joyqueue/client/internal/exception/ClientException
         194   226   393   Class java/lang/Exception

  protected java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> doSendBatchMessage(org.joyqueue.network.domain.BrokerNode, java.lang.String, java.lang.String, java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, java.lang.String, org.joyqueue.domain.QosLevel, long, long, boolean, org.joyqueue.client.internal.producer.callback.AsyncBatchProduceCallback);
    Code:
       0: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
       3: invokeinterface #78,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          53
      11: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
      14: ldc           #79                 // String batch send message, broker: {}, topic: {}, app: {}, messages: {}, txId: {}, qosLevel: {}
      16: bipush        6
      18: anewarray     #65                 // class java/lang/Object
      21: dup
      22: iconst_0
      23: aload_1
      24: aastore
      25: dup
      26: iconst_1
      27: aload_2
      28: aastore
      29: dup
      30: iconst_2
      31: aload_3
      32: aastore
      33: dup
      34: iconst_3
      35: aload         4
      37: aastore
      38: dup
      39: iconst_4
      40: aload         5
      42: aastore
      43: dup
      44: iconst_5
      45: aload         6
      47: aastore
      48: invokeinterface #66,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      53: iload         11
      55: ifeq          82
      58: aload_0
      59: getfield      #7                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
      62: aload_1
      63: aload_2
      64: aload_3
      65: aload         5
      67: aload         4
      69: aload         6
      71: lload         7
      73: lload         9
      75: invokeinterface #80,  11          // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.batchSendOneway:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Lorg/joyqueue/domain/QosLevel;JJ)V
      80: aconst_null
      81: areturn
      82: aload         12
      84: ifnonnull     120
      87: aload_0
      88: getfield      #7                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
      91: aload_1
      92: aload_2
      93: aload_3
      94: aload         5
      96: aload         4
      98: aload         6
     100: lload         7
     102: lload         9
     104: invokeinterface #81,  11          // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.batchSend:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Lorg/joyqueue/domain/QosLevel;JJ)Lorg/joyqueue/client/internal/producer/domain/SendBatchResultData;
     109: astore        13
     111: aload_0
     112: aload_2
     113: aload_3
     114: aload         13
     116: invokevirtual #82                 // Method handleSendBatchResultData:(Ljava/lang/String;Ljava/lang/String;Lorg/joyqueue/client/internal/producer/domain/SendBatchResultData;)Ljava/util/List;
     119: areturn
     120: aload_0
     121: getfield      #7                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
     124: aload_1
     125: aload_2
     126: aload_3
     127: aload         5
     129: aload         4
     131: aload         6
     133: lload         7
     135: lload         9
     137: new           #83                 // class org/joyqueue/client/internal/producer/support/MessageProducerInner$2
     140: dup
     141: aload_0
     142: aload         12
     144: invokespecial #84                 // Method org/joyqueue/client/internal/producer/support/MessageProducerInner$2."<init>":(Lorg/joyqueue/client/internal/producer/support/MessageProducerInner;Lorg/joyqueue/client/internal/producer/callback/AsyncBatchProduceCallback;)V
     147: invokeinterface #85,  12          // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.batchSendAsync:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/List;Lorg/joyqueue/domain/QosLevel;JJLorg/joyqueue/client/internal/producer/callback/AsyncBatchSendCallback;)V
     152: aconst_null
     153: areturn

  protected java.util.List<org.joyqueue.client.internal.producer.domain.SendResult> handleSendBatchResultData(java.lang.String, java.lang.String, org.joyqueue.client.internal.producer.domain.SendBatchResultData);
    Code:
       0: aload_3
       1: ifnonnull     28
       4: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
       7: dup
       8: getstatic     #86                 // Field org/joyqueue/exception/JoyQueueCode.CN_UNKNOWN_ERROR:Lorg/joyqueue/exception/JoyQueueCode;
      11: iconst_0
      12: anewarray     #65                 // class java/lang/Object
      15: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
      18: getstatic     #86                 // Field org/joyqueue/exception/JoyQueueCode.CN_UNKNOWN_ERROR:Lorg/joyqueue/exception/JoyQueueCode;
      21: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
      24: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
      27: athrow
      28: aload_3
      29: invokevirtual #90                 // Method org/joyqueue/client/internal/producer/domain/SendBatchResultData.getCode:()Lorg/joyqueue/exception/JoyQueueCode;
      32: astore        4
      34: aload         4
      36: getstatic     #91                 // Field org/joyqueue/exception/JoyQueueCode.SUCCESS:Lorg/joyqueue/exception/JoyQueueCode;
      39: invokevirtual #92                 // Method org/joyqueue/exception/JoyQueueCode.equals:(Ljava/lang/Object;)Z
      42: ifeq          50
      45: aload_3
      46: invokevirtual #93                 // Method org/joyqueue/client/internal/producer/domain/SendBatchResultData.getResult:()Ljava/util/List;
      49: areturn
      50: getstatic     #94                 // Field org/joyqueue/client/internal/producer/support/MessageProducerInner$3.$SwitchMap$org$joyqueue$exception$JoyQueueCode:[I
      53: aload         4
      55: invokevirtual #95                 // Method org/joyqueue/exception/JoyQueueCode.ordinal:()I
      58: iaload
      59: tableswitch   { // 1 to 6
                     1: 96
                     2: 96
                     3: 96
                     4: 139
                     5: 153
                     6: 186
               default: 210
          }
      96: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
      99: ldc           #96                 // String send message error, no permission, topic: {}
     101: aload_1
     102: invokeinterface #97,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     107: aload_0
     108: getfield      #8                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
     111: aload_1
     112: aload_2
     113: invokevirtual #98                 // Method org/joyqueue/client/internal/cluster/ClusterManager.updateTopicMetadata:(Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
     116: pop
     117: new           #62                 // class org/joyqueue/client/internal/metadata/exception/MetadataException
     120: dup
     121: aload         4
     123: iconst_0
     124: anewarray     #65                 // class java/lang/Object
     127: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
     130: aload         4
     132: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
     135: invokespecial #99                 // Method org/joyqueue/client/internal/metadata/exception/MetadataException."<init>":(Ljava/lang/String;I)V
     138: athrow
     139: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     142: ldc           #100                // String send message error, topic not write, topic: {}
     144: aload_1
     145: invokeinterface #97,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     150: goto          267
     153: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     156: ldc           #101                // String send message error, topic not exist, topic: {}
     158: aload_1
     159: invokeinterface #97,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     164: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     167: dup
     168: aload         4
     170: iconst_0
     171: anewarray     #65                 // class java/lang/Object
     174: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
     177: aload         4
     179: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
     182: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
     185: athrow
     186: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     189: ldc           #102                // String send message error, broker not writable, topic: {}
     191: aload_1
     192: invokeinterface #97,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     197: aload_0
     198: getfield      #8                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
     201: aload_1
     202: aload_2
     203: invokevirtual #98                 // Method org/joyqueue/client/internal/cluster/ClusterManager.updateTopicMetadata:(Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
     206: pop
     207: goto          267
     210: getstatic     #63                 // Field logger:Lorg/slf4j/Logger;
     213: ldc           #103                // String send message error, topic: {}, code: {}, error: {}
     215: iconst_3
     216: anewarray     #65                 // class java/lang/Object
     219: dup
     220: iconst_0
     221: aload_1
     222: aastore
     223: dup
     224: iconst_1
     225: aload         4
     227: aastore
     228: dup
     229: iconst_2
     230: aload         4
     232: iconst_0
     233: anewarray     #65                 // class java/lang/Object
     236: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
     239: aastore
     240: invokeinterface #73,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     245: new           #67                 // class org/joyqueue/client/internal/producer/exception/NeedRetryException
     248: dup
     249: aload         4
     251: iconst_0
     252: anewarray     #65                 // class java/lang/Object
     255: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
     258: aload         4
     260: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
     263: invokespecial #104                // Method org/joyqueue/client/internal/producer/exception/NeedRetryException."<init>":(Ljava/lang/String;I)V
     266: athrow
     267: new           #67                 // class org/joyqueue/client/internal/producer/exception/NeedRetryException
     270: dup
     271: aload         4
     273: iconst_0
     274: anewarray     #65                 // class java/lang/Object
     277: invokevirtual #87                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
     280: aload         4
     282: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
     285: invokespecial #104                // Method org/joyqueue/client/internal/producer/exception/NeedRetryException."<init>":(Ljava/lang/String;I)V
     288: athrow

  public org.joyqueue.client.internal.metadata.domain.TopicMetadata getAndCheckTopicMetadata(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #8                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
       4: aload_0
       5: aload_1
       6: invokevirtual #105                // Method getTopicFullName:(Ljava/lang/String;)Ljava/lang/String;
       9: aload_0
      10: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
      13: invokevirtual #44                 // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getApp:()Ljava/lang/String;
      16: invokevirtual #106                // Method org/joyqueue/client/internal/cluster/ClusterManager.fetchTopicMetadata:(Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
      19: astore_2
      20: aload_2
      21: ifnonnull     51
      24: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      27: dup
      28: ldc           #107                // String topic %s is not exist
      30: iconst_1
      31: anewarray     #65                 // class java/lang/Object
      34: dup
      35: iconst_0
      36: aload_1
      37: aastore
      38: invokestatic  #108                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      41: getstatic     #109                // Field org/joyqueue/exception/JoyQueueCode.FW_TOPIC_NOT_EXIST:Lorg/joyqueue/exception/JoyQueueCode;
      44: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
      47: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
      50: athrow
      51: aload_2
      52: invokevirtual #42                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getProducerPolicy:()Lorg/joyqueue/domain/ProducerPolicy;
      55: ifnonnull     95
      58: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      61: dup
      62: ldc           #110                // String topic %s producer %s is not exist
      64: iconst_2
      65: anewarray     #65                 // class java/lang/Object
      68: dup
      69: iconst_0
      70: aload_1
      71: aastore
      72: dup
      73: iconst_1
      74: aload_0
      75: getfield      #6                  // Field nameServerConfig:Lorg/joyqueue/client/internal/nameserver/NameServerConfig;
      78: invokevirtual #111                // Method org/joyqueue/client/internal/nameserver/NameServerConfig.getApp:()Ljava/lang/String;
      81: aastore
      82: invokestatic  #108                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      85: getstatic     #112                // Field org/joyqueue/exception/JoyQueueCode.FW_PRODUCER_NOT_EXISTS:Lorg/joyqueue/exception/JoyQueueCode;
      88: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
      91: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
      94: athrow
      95: aload_2
      96: areturn

  public java.lang.String getTopicFullName(java.lang.String);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #6                  // Field nameServerConfig:Lorg/joyqueue/client/internal/nameserver/NameServerConfig;
       5: invokestatic  #113                // Method org/joyqueue/client/internal/nameserver/helper/NameServerHelper.getTopicFullName:(Ljava/lang/String;Lorg/joyqueue/client/internal/nameserver/NameServerConfig;)Ljava/lang/String;
       8: areturn

  public java.util.List<org.joyqueue.network.domain.BrokerNode> getRegionBrokers(org.joyqueue.client.internal.metadata.domain.TopicMetadata);
    Code:
       0: aload_1
       1: invokevirtual #42                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getProducerPolicy:()Lorg/joyqueue/domain/ProducerPolicy;
       4: invokevirtual #114                // Method org/joyqueue/domain/ProducerPolicy.getNearby:()Ljava/lang/Boolean;
       7: invokevirtual #115                // Method java/lang/Boolean.booleanValue:()Z
      10: ifeq          18
      13: aload_1
      14: invokevirtual #116                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getNearbyBrokers:()Ljava/util/List;
      17: areturn
      18: aload_1
      19: invokevirtual #117                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getBrokers:()Ljava/util/List;
      22: areturn

  public java.util.List<org.joyqueue.network.domain.BrokerNode> filterNotAvailableBrokers(java.util.List<org.joyqueue.network.domain.BrokerNode>);
    Code:
       0: aload_1
       1: invokestatic  #21                 // Method org/apache/commons/collections/CollectionUtils.isEmpty:(Ljava/util/Collection;)Z
       4: ifeq          9
       7: aload_1
       8: areturn
       9: aconst_null
      10: astore_2
      11: aload_1
      12: invokeinterface #118,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      17: astore_3
      18: aload_3
      19: invokeinterface #119,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      24: ifeq          92
      27: aload_3
      28: invokeinterface #120,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #121                // class org/joyqueue/network/domain/BrokerNode
      36: astore        4
      38: aload_0
      39: getfield      #9                  // Field producerClientManager:Lorg/joyqueue/client/internal/producer/transport/ProducerClientManager;
      42: aload         4
      44: invokevirtual #122                // Method org/joyqueue/client/internal/producer/transport/ProducerClientManager.tryGetClient:(Lorg/joyqueue/network/domain/BrokerNode;)Lorg/joyqueue/client/internal/producer/transport/ProducerClient;
      47: astore        5
      49: aload         5
      51: ifnull        18
      54: aload         5
      56: invokevirtual #123                // Method org/joyqueue/client/internal/producer/transport/ProducerClient.getState:()Lorg/joyqueue/client/internal/transport/ClientState;
      59: getstatic     #124                // Field org/joyqueue/client/internal/transport/ClientState.CONNECTED:Lorg/joyqueue/client/internal/transport/ClientState;
      62: invokevirtual #125                // Method org/joyqueue/client/internal/transport/ClientState.equals:(Ljava/lang/Object;)Z
      65: ifeq          71
      68: goto          18
      71: aload_2
      72: ifnonnull     80
      75: aload_1
      76: invokestatic  #126                // Method com/google/common/collect/Lists.newArrayList:(Ljava/lang/Iterable;)Ljava/util/ArrayList;
      79: astore_2
      80: aload_2
      81: aload         4
      83: invokeinterface #127,  2          // InterfaceMethod java/util/List.remove:(Ljava/lang/Object;)Z
      88: pop
      89: goto          18
      92: aload_2
      93: ifnonnull     98
      96: aload_1
      97: areturn
      98: aload_2
      99: areturn

  public java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata> getBrokerPartitions(org.joyqueue.client.internal.metadata.domain.TopicMetadata, java.util.List<org.joyqueue.network.domain.BrokerNode>);
    Code:
       0: aload_1
       1: invokevirtual #117                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getBrokers:()Ljava/util/List;
       4: aload_2
       5: invokeinterface #128,  2          // InterfaceMethod java/util/List.equals:(Ljava/lang/Object;)Z
      10: ifeq          18
      13: aload_1
      14: invokevirtual #129                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getPartitions:()Ljava/util/List;
      17: areturn
      18: aload_1
      19: invokevirtual #129                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getPartitions:()Ljava/util/List;
      22: invokeinterface #130,  1          // InterfaceMethod java/util/List.size:()I
      27: invokestatic  #131                // Method com/google/common/collect/Lists.newArrayListWithCapacity:(I)Ljava/util/ArrayList;
      30: astore_3
      31: aload_2
      32: invokeinterface #118,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      37: astore        4
      39: aload         4
      41: invokeinterface #119,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      46: ifeq          89
      49: aload         4
      51: invokeinterface #120,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      56: checkcast     #121                // class org/joyqueue/network/domain/BrokerNode
      59: astore        5
      61: aload_1
      62: aload         5
      64: invokevirtual #132                // Method org/joyqueue/network/domain/BrokerNode.getId:()I
      67: invokevirtual #133                // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getBrokerPartitions:(I)Ljava/util/List;
      70: astore        6
      72: aload         6
      74: ifnull        86
      77: aload_3
      78: aload         6
      80: invokeinterface #134,  2          // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      85: pop
      86: goto          39
      89: aload_3
      90: areturn

  public org.joyqueue.client.internal.metadata.domain.PartitionMetadata dispatchPartitions(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, org.joyqueue.client.internal.metadata.domain.TopicMetadata, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aconst_null
       5: invokevirtual #55                 // Method dispatchPartitions:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Ljava/util/List;)Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;
       8: areturn

  public org.joyqueue.client.internal.metadata.domain.PartitionMetadata dispatchPartitions(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>, org.joyqueue.client.internal.metadata.domain.TopicMetadata, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>, java.util.List<org.joyqueue.client.internal.metadata.domain.PartitionMetadata>);
    Code:
       0: aload_3
       1: invokestatic  #21                 // Method org/apache/commons/collections/CollectionUtils.isEmpty:(Ljava/util/Collection;)Z
       4: ifeq          41
       7: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      10: dup
      11: ldc           #135                // String no partitions available, topic: %s, messages: %s
      13: iconst_2
      14: anewarray     #65                 // class java/lang/Object
      17: dup
      18: iconst_0
      19: aload_2
      20: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
      23: aastore
      24: dup
      25: iconst_1
      26: aload_1
      27: aastore
      28: invokestatic  #108                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      31: getstatic     #136                // Field org/joyqueue/exception/JoyQueueCode.FW_TOPIC_NO_PARTITIONGROUP:Lorg/joyqueue/exception/JoyQueueCode;
      34: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
      37: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
      40: athrow
      41: aload         4
      43: ifnull        53
      46: aload_3
      47: aload         4
      49: invokestatic  #137                // Method org/joyqueue/client/internal/producer/helper/ProducerHelper.filterBlackList:(Ljava/util/List;Ljava/util/List;)Ljava/util/List;
      52: astore_3
      53: aload_3
      54: invokestatic  #21                 // Method org/apache/commons/collections/CollectionUtils.isEmpty:(Ljava/util/Collection;)Z
      57: ifeq          94
      60: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
      63: dup
      64: ldc           #135                // String no partitions available, topic: %s, messages: %s
      66: iconst_2
      67: anewarray     #65                 // class java/lang/Object
      70: dup
      71: iconst_0
      72: aload_2
      73: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
      76: aastore
      77: dup
      78: iconst_1
      79: aload_1
      80: aastore
      81: invokestatic  #108                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      84: getstatic     #136                // Field org/joyqueue/exception/JoyQueueCode.FW_TOPIC_NO_PARTITIONGROUP:Lorg/joyqueue/exception/JoyQueueCode;
      87: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
      90: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
      93: athrow
      94: aload_0
      95: getfield      #13                 // Field partitionSelectorManager:Lorg/joyqueue/client/internal/producer/support/PartitionSelectorManager;
      98: aload_2
      99: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
     102: aload_0
     103: getfield      #5                  // Field config:Lorg/joyqueue/client/internal/producer/config/ProducerConfig;
     106: invokevirtual #138                // Method org/joyqueue/client/internal/producer/config/ProducerConfig.getSelectorType:()Ljava/lang/String;
     109: invokevirtual #139                // Method org/joyqueue/client/internal/producer/support/PartitionSelectorManager.getPartitionSelector:(Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/producer/PartitionSelector;
     112: astore        5
     114: aload_1
     115: aload_2
     116: aload_3
     117: aload         5
     119: invokestatic  #140                // Method org/joyqueue/client/internal/producer/helper/ProducerHelper.dispatchPartitions:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Lorg/joyqueue/client/internal/producer/PartitionSelector;)Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;
     122: astore        6
     124: aload         6
     126: ifnonnull     163
     129: new           #40                 // class org/joyqueue/client/internal/producer/exception/ProducerException
     132: dup
     133: ldc           #141                // String partition not available, topic: %s, messages: %s
     135: iconst_2
     136: anewarray     #65                 // class java/lang/Object
     139: dup
     140: iconst_0
     141: aload_2
     142: invokevirtual #43                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
     145: aastore
     146: dup
     147: iconst_1
     148: aload_1
     149: aastore
     150: invokestatic  #108                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     153: getstatic     #136                // Field org/joyqueue/exception/JoyQueueCode.FW_TOPIC_NO_PARTITIONGROUP:Lorg/joyqueue/exception/JoyQueueCode;
     156: invokevirtual #88                 // Method org/joyqueue/exception/JoyQueueCode.getCode:()I
     159: invokespecial #89                 // Method org/joyqueue/client/internal/producer/exception/ProducerException."<init>":(Ljava/lang/String;I)V
     162: athrow
     163: aload         6
     165: invokevirtual #59                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
     168: ifnull        182
     171: aload         6
     173: invokevirtual #59                 // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getLeader:()Lorg/joyqueue/network/domain/BrokerNode;
     176: invokevirtual #142                // Method org/joyqueue/network/domain/BrokerNode.isWritable:()Z
     179: ifne          212
     182: aload         4
     184: ifnonnull     192
     187: invokestatic  #143                // Method com/google/common/collect/Lists.newArrayList:()Ljava/util/ArrayList;
     190: astore        4
     192: aload         4
     194: aload         6
     196: invokeinterface #57,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     201: pop
     202: aload_0
     203: aload_1
     204: aload_2
     205: aload_3
     206: aload         4
     208: invokevirtual #55                 // Method dispatchPartitions:(Ljava/util/List;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Ljava/util/List;Ljava/util/List;)Lorg/joyqueue/client/internal/metadata/domain/PartitionMetadata;
     211: areturn
     212: aload_1
     213: aload         6
     215: invokevirtual #144                // Method org/joyqueue/client/internal/metadata/domain/PartitionMetadata.getId:()S
     218: invokestatic  #145                // Method org/joyqueue/client/internal/producer/helper/ProducerHelper.setPartitions:(Ljava/util/List;S)V
     221: aload         6
     223: areturn

  public boolean isFailover(java.util.List<org.joyqueue.client.internal.producer.domain.ProduceMessage>);
    Code:
       0: aload_1
       1: iconst_0
       2: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
       7: checkcast     #18                 // class org/joyqueue/client/internal/producer/domain/ProduceMessage
      10: invokevirtual #146                // Method org/joyqueue/client/internal/producer/domain/ProduceMessage.getPartition:()S
      13: sipush        -32768
      16: if_icmpne     23
      19: iconst_1
      20: goto          24
      23: iconst_0
      24: ireturn

  static {};
    Code:
       0: ldc           #147                // class org/joyqueue/client/internal/producer/support/MessageProducerInner
       2: invokestatic  #148                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #63                 // Field logger:Lorg/slf4j/Logger;
       8: return
}

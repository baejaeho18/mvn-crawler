Compiled from "TxFeedbackDispatcher.java"
public class org.joyqueue.client.internal.producer.feedback.TxFeedbackDispatcher {
  protected static final org.slf4j.Logger logger;

  private org.joyqueue.client.internal.producer.feedback.config.TxFeedbackConfig config;

  private java.lang.String topic;

  private org.joyqueue.client.internal.producer.callback.TxFeedbackCallback txFeedbackCallback;

  private org.joyqueue.client.internal.producer.MessageSender messageSender;

  private org.joyqueue.client.internal.cluster.ClusterManager clusterManager;

  public org.joyqueue.client.internal.producer.feedback.TxFeedbackDispatcher(org.joyqueue.client.internal.producer.feedback.config.TxFeedbackConfig, java.lang.String, org.joyqueue.client.internal.producer.callback.TxFeedbackCallback, org.joyqueue.client.internal.producer.MessageSender, org.joyqueue.client.internal.cluster.ClusterManager);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field topic:Ljava/lang/String;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field txFeedbackCallback:Lorg/joyqueue/client/internal/producer/callback/TxFeedbackCallback;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
      25: aload_0
      26: aload         5
      28: putfield      #6                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
      31: return

  public void dispatch();
    Code:
       0: aload_0
       1: getfield      #6                  // Field clusterManager:Lorg/joyqueue/client/internal/cluster/ClusterManager;
       4: aload_0
       5: getfield      #3                  // Field topic:Ljava/lang/String;
       8: aload_0
       9: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
      12: invokevirtual #7                  // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getApp:()Ljava/lang/String;
      15: invokevirtual #8                  // Method org/joyqueue/client/internal/cluster/ClusterManager.fetchTopicMetadata:(Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;
      18: astore_1
      19: aload_1
      20: ifnonnull     38
      23: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
      26: ldc           #10                 // String topic {} not exist
      28: aload_0
      29: getfield      #3                  // Field topic:Ljava/lang/String;
      32: invokeinterface #11,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      37: return
      38: aload_1
      39: invokevirtual #12                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getBrokers:()Ljava/util/List;
      42: invokeinterface #13,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      47: astore_2
      48: aload_2
      49: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      54: ifeq          76
      57: aload_2
      58: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      63: checkcast     #16                 // class org/joyqueue/network/domain/BrokerNode
      66: astore_3
      67: aload_0
      68: aload_1
      69: aload_3
      70: invokevirtual #17                 // Method doFeedback:(Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Lorg/joyqueue/network/domain/BrokerNode;)V
      73: goto          48
      76: return

  protected void doFeedback(org.joyqueue.client.internal.metadata.domain.TopicMetadata, org.joyqueue.network.domain.BrokerNode);
    Code:
       0: aconst_null
       1: astore_3
       2: aload_0
       3: getfield      #5                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
       6: aload_2
       7: aload_0
       8: getfield      #3                  // Field topic:Ljava/lang/String;
      11: aload_0
      12: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
      15: invokevirtual #7                  // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getApp:()Ljava/lang/String;
      18: getstatic     #18                 // Field org/joyqueue/network/command/TxStatus.UNKNOWN:Lorg/joyqueue/network/command/TxStatus;
      21: aload_0
      22: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
      25: invokevirtual #19                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getFetchSize:()I
      28: aload_0
      29: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
      32: invokevirtual #20                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getLongPollTimeout:()J
      35: aload_0
      36: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
      39: invokevirtual #21                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getTimeout:()J
      42: invokeinterface #22,  10          // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.fetchFeedback:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Lorg/joyqueue/network/command/TxStatus;IJJ)Lorg/joyqueue/client/internal/producer/domain/FetchFeedbackData;
      47: astore_3
      48: aload_3
      49: invokevirtual #23                 // Method org/joyqueue/client/internal/producer/domain/FetchFeedbackData.getCode:()Lorg/joyqueue/exception/JoyQueueCode;
      52: getstatic     #24                 // Field org/joyqueue/exception/JoyQueueCode.SUCCESS:Lorg/joyqueue/exception/JoyQueueCode;
      55: invokevirtual #25                 // Method org/joyqueue/exception/JoyQueueCode.equals:(Ljava/lang/Object;)Z
      58: ifne          87
      61: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
      64: ldc           #26                 // String fetch feedback error, topic: {}, error: {}
      66: aload_0
      67: getfield      #3                  // Field topic:Ljava/lang/String;
      70: aload_3
      71: invokevirtual #23                 // Method org/joyqueue/client/internal/producer/domain/FetchFeedbackData.getCode:()Lorg/joyqueue/exception/JoyQueueCode;
      74: iconst_0
      75: anewarray     #27                 // class java/lang/Object
      78: invokevirtual #28                 // Method org/joyqueue/exception/JoyQueueCode.getMessage:([Ljava/lang/Object;)Ljava/lang/String;
      81: invokeinterface #29,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      86: return
      87: goto          109
      90: astore        4
      92: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
      95: ldc           #31                 // String fetch feedback exception, topic: {}
      97: aload_0
      98: getfield      #3                  // Field topic:Ljava/lang/String;
     101: aload         4
     103: invokeinterface #29,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     108: return
     109: aload_3
     110: invokevirtual #32                 // Method org/joyqueue/client/internal/producer/domain/FetchFeedbackData.getData:()Ljava/util/List;
     113: invokestatic  #33                 // Method org/apache/commons/collections/CollectionUtils.isEmpty:(Ljava/util/Collection;)Z
     116: ifeq          134
     119: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
     122: ldc           #34                 // String fetch feedback is empty, topic: {}
     124: aload_0
     125: getfield      #3                  // Field topic:Ljava/lang/String;
     128: invokeinterface #35,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     133: return
     134: aload_3
     135: invokevirtual #32                 // Method org/joyqueue/client/internal/producer/domain/FetchFeedbackData.getData:()Ljava/util/List;
     138: invokeinterface #13,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     143: astore        4
     145: aload         4
     147: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     152: ifeq          178
     155: aload         4
     157: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     162: checkcast     #36                 // class org/joyqueue/client/internal/producer/domain/FeedbackData
     165: astore        5
     167: aload_0
     168: aload_2
     169: aload_1
     170: aload         5
     172: invokevirtual #37                 // Method doConfirm:(Lorg/joyqueue/network/domain/BrokerNode;Lorg/joyqueue/client/internal/metadata/domain/TopicMetadata;Lorg/joyqueue/client/internal/producer/domain/FeedbackData;)V
     175: goto          145
     178: return
    Exception table:
       from    to  target type
           2    86    90   Class java/lang/Exception

  protected void doConfirm(org.joyqueue.network.domain.BrokerNode, org.joyqueue.client.internal.metadata.domain.TopicMetadata, org.joyqueue.client.internal.producer.domain.FeedbackData);
    Code:
       0: aload_2
       1: invokevirtual #38                 // Method org/joyqueue/client/internal/metadata/domain/TopicMetadata.getTopic:()Ljava/lang/String;
       4: invokestatic  #39                 // Method org/joyqueue/domain/TopicName.parse:(Ljava/lang/String;)Lorg/joyqueue/domain/TopicName;
       7: astore        4
       9: aconst_null
      10: astore        5
      12: aload_0
      13: getfield      #4                  // Field txFeedbackCallback:Lorg/joyqueue/client/internal/producer/callback/TxFeedbackCallback;
      16: aload         4
      18: aload_3
      19: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
      22: aload_3
      23: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
      26: invokeinterface #42,  4           // InterfaceMethod org/joyqueue/client/internal/producer/callback/TxFeedbackCallback.confirm:(Lorg/joyqueue/domain/TopicName;Ljava/lang/String;Ljava/lang/String;)Lorg/joyqueue/client/internal/producer/domain/TransactionStatus;
      31: astore        5
      33: aload         5
      35: ifnonnull     57
      38: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
      41: ldc           #43                 // String confirm feedback error, status is null, topic: {}, transactionId: {}
      43: aload_0
      44: getfield      #3                  // Field topic:Ljava/lang/String;
      47: aload_3
      48: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
      51: invokeinterface #44,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      56: return
      57: goto          96
      60: astore        6
      62: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
      65: ldc           #45                 // String confirm feedback exception, topic: {}, transactionId: {}
      67: iconst_3
      68: anewarray     #27                 // class java/lang/Object
      71: dup
      72: iconst_0
      73: aload_0
      74: getfield      #3                  // Field topic:Ljava/lang/String;
      77: aastore
      78: dup
      79: iconst_1
      80: aload_3
      81: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
      84: aastore
      85: dup
      86: iconst_2
      87: aload         6
      89: aastore
      90: invokeinterface #46,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
      95: return
      96: aload         5
      98: getstatic     #47                 // Field org/joyqueue/client/internal/producer/domain/TransactionStatus.PREPARE:Lorg/joyqueue/client/internal/producer/domain/TransactionStatus;
     101: invokevirtual #48                 // Method org/joyqueue/client/internal/producer/domain/TransactionStatus.equals:(Ljava/lang/Object;)Z
     104: ifeq          176
     107: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
     110: ldc           #49                 // String commit transaction, status: {}, txId: {}, transactionId: {}
     112: iconst_3
     113: anewarray     #27                 // class java/lang/Object
     116: dup
     117: iconst_0
     118: aload         5
     120: aastore
     121: dup
     122: iconst_1
     123: aload_3
     124: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     127: aastore
     128: dup
     129: iconst_2
     130: aload_3
     131: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
     134: aastore
     135: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     140: aload_0
     141: getfield      #5                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
     144: aload_1
     145: aload_0
     146: getfield      #3                  // Field topic:Ljava/lang/String;
     149: aload_0
     150: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     153: invokevirtual #7                  // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getApp:()Ljava/lang/String;
     156: aload_3
     157: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     160: aload_0
     161: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     164: invokevirtual #21                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getTimeout:()J
     167: invokeinterface #51,  7           // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.commit:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;J)Lorg/joyqueue/exception/JoyQueueCode;
     172: pop
     173: goto          333
     176: aload         5
     178: getstatic     #52                 // Field org/joyqueue/client/internal/producer/domain/TransactionStatus.COMMITTED:Lorg/joyqueue/client/internal/producer/domain/TransactionStatus;
     181: invokevirtual #48                 // Method org/joyqueue/client/internal/producer/domain/TransactionStatus.equals:(Ljava/lang/Object;)Z
     184: ifeq          256
     187: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
     190: ldc           #53                 // String rollback transaction, status: {}, txId: {}, transactionId: {}
     192: iconst_3
     193: anewarray     #27                 // class java/lang/Object
     196: dup
     197: iconst_0
     198: aload         5
     200: aastore
     201: dup
     202: iconst_1
     203: aload_3
     204: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     207: aastore
     208: dup
     209: iconst_2
     210: aload_3
     211: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
     214: aastore
     215: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     220: aload_0
     221: getfield      #5                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
     224: aload_1
     225: aload_0
     226: getfield      #3                  // Field topic:Ljava/lang/String;
     229: aload_0
     230: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     233: invokevirtual #7                  // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getApp:()Ljava/lang/String;
     236: aload_3
     237: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     240: aload_0
     241: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     244: invokevirtual #21                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getTimeout:()J
     247: invokeinterface #54,  7           // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.rollback:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;J)Lorg/joyqueue/exception/JoyQueueCode;
     252: pop
     253: goto          333
     256: aload         5
     258: getstatic     #55                 // Field org/joyqueue/client/internal/producer/domain/TransactionStatus.ROLLBACK:Lorg/joyqueue/client/internal/producer/domain/TransactionStatus;
     261: invokevirtual #48                 // Method org/joyqueue/client/internal/producer/domain/TransactionStatus.equals:(Ljava/lang/Object;)Z
     264: ifeq          333
     267: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
     270: ldc           #53                 // String rollback transaction, status: {}, txId: {}, transactionId: {}
     272: iconst_3
     273: anewarray     #27                 // class java/lang/Object
     276: dup
     277: iconst_0
     278: aload         5
     280: aastore
     281: dup
     282: iconst_1
     283: aload_3
     284: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     287: aastore
     288: dup
     289: iconst_2
     290: aload_3
     291: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
     294: aastore
     295: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     300: aload_0
     301: getfield      #5                  // Field messageSender:Lorg/joyqueue/client/internal/producer/MessageSender;
     304: aload_1
     305: aload_0
     306: getfield      #3                  // Field topic:Ljava/lang/String;
     309: aload_0
     310: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     313: invokevirtual #7                  // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getApp:()Ljava/lang/String;
     316: aload_3
     317: invokevirtual #40                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTxId:()Ljava/lang/String;
     320: aload_0
     321: getfield      #2                  // Field config:Lorg/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig;
     324: invokevirtual #21                 // Method org/joyqueue/client/internal/producer/feedback/config/TxFeedbackConfig.getTimeout:()J
     327: invokeinterface #54,  7           // InterfaceMethod org/joyqueue/client/internal/producer/MessageSender.rollback:(Lorg/joyqueue/network/domain/BrokerNode;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;J)Lorg/joyqueue/exception/JoyQueueCode;
     332: pop
     333: goto          371
     336: astore        6
     338: getstatic     #9                  // Field logger:Lorg/slf4j/Logger;
     341: ldc           #56                 // String commit feedback exception, topic: {}, transactionId: {}
     343: iconst_3
     344: anewarray     #27                 // class java/lang/Object
     347: dup
     348: iconst_0
     349: aload_0
     350: getfield      #3                  // Field topic:Ljava/lang/String;
     353: aastore
     354: dup
     355: iconst_1
     356: aload_3
     357: invokevirtual #41                 // Method org/joyqueue/client/internal/producer/domain/FeedbackData.getTransactionId:()Ljava/lang/String;
     360: aastore
     361: dup
     362: iconst_2
     363: aload         6
     365: aastore
     366: invokeinterface #46,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     371: return
    Exception table:
       from    to  target type
          12    56    60   Class java/lang/Exception
          96   333   336   Class java/lang/Exception

  static {};
    Code:
       0: ldc           #57                 // class org/joyqueue/client/internal/producer/feedback/TxFeedbackDispatcher
       2: invokestatic  #58                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #9                  // Field logger:Lorg/slf4j/Logger;
       8: return
}

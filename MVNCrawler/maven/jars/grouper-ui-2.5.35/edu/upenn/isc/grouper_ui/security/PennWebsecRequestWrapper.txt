Compiled from "PennWebsecRequestWrapper.java"
public class edu.upenn.isc.grouper_ui.security.PennWebsecRequestWrapper extends javax.servlet.http.HttpServletRequestWrapper {
  protected static final org.apache.commons.logging.Log LOG;

  private static final java.lang.String PENN_SESSION_USER_KEY;

  private static final java.lang.String PENN_SESSION_TOKEN_KEY;

  private javax.servlet.http.HttpServletResponse httpServletResponse;

  private java.lang.String retrievePennToken();
    Code:
       0: aload_0
       1: ldc           #1                  // String websec_token
       3: invokevirtual #2                  // Method getParameter:(Ljava/lang/String;)Ljava/lang/String;
       6: astore_1
       7: aload_1
       8: invokestatic  #3                  // Method org/apache/commons/lang/StringUtils.isNotBlank:(Ljava/lang/String;)Z
      11: ifeq          16
      14: aload_1
      15: areturn
      16: ldc           #1                  // String websec_token
      18: aload_0
      19: invokevirtual #4                  // Method getCookies:()[Ljavax/servlet/http/Cookie;
      22: invokestatic  #5                  // Method edu/internet2/middleware/grouper/ui/util/GrouperUiUtils.cookieValue:(Ljava/lang/String;[Ljavax/servlet/http/Cookie;)Ljava/lang/String;
      25: areturn

  public java.lang.String getRemoteUser();
    Code:
       0: aload_0
       1: invokevirtual #6                  // Method getSession:()Ljavax/servlet/http/HttpSession;
       4: astore_1
       5: aload_1
       6: ldc           #8                  // String pennToken
       8: invokeinterface #9,  2            // InterfaceMethod javax/servlet/http/HttpSession.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      13: checkcast     #10                 // class java/lang/String
      16: astore_2
      17: aload_0
      18: invokespecial #11                 // Method retrievePennToken:()Ljava/lang/String;
      21: astore_3
      22: aload_2
      23: invokestatic  #12                 // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
      26: ifne          65
      29: aload_3
      30: invokestatic  #12                 // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
      33: ifne          65
      36: aload_2
      37: aload_3
      38: invokestatic  #13                 // Method org/apache/commons/lang/StringUtils.equals:(Ljava/lang/String;Ljava/lang/String;)Z
      41: ifne          65
      44: aload_1
      45: invokeinterface #14,  1           // InterfaceMethod javax/servlet/http/HttpSession.invalidate:()V
      50: ldc           #1                  // String websec_token
      52: aload_0
      53: invokevirtual #4                  // Method getCookies:()[Ljavax/servlet/http/Cookie;
      56: aload_0
      57: getfield      #15                 // Field httpServletResponse:Ljavax/servlet/http/HttpServletResponse;
      60: invokestatic  #16                 // Method edu/internet2/middleware/grouper/ui/util/GrouperUiUtils.killCookie:(Ljava/lang/String;[Ljavax/servlet/http/Cookie;Ljavax/servlet/http/HttpServletResponse;)V
      63: aconst_null
      64: areturn
      65: aload_1
      66: ldc           #17                 // String pennUser
      68: invokeinterface #9,  2            // InterfaceMethod javax/servlet/http/HttpSession.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      73: checkcast     #10                 // class java/lang/String
      76: astore        4
      78: aload         4
      80: invokestatic  #12                 // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
      83: ifeq          329
      86: aload_3
      87: invokestatic  #12                 // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
      90: ifeq          95
      93: aconst_null
      94: areturn
      95: ldc           #18                 // String resources/custom/media.properties
      97: invokestatic  #19                 // Method edu/internet2/middleware/grouper/ui/util/GrouperUiUtils.propertiesFromResourceName:(Ljava/lang/String;)Ljava/util/Properties;
     100: astore        5
     102: aload         5
     104: ldc           #20                 // String pennWebsecAppName
     106: invokevirtual #21                 // Method java/util/Properties.get:(Ljava/lang/Object;)Ljava/lang/Object;
     109: checkcast     #10                 // class java/lang/String
     112: ldc           #22                 // String StudentHome
     114: invokestatic  #23                 // Method org/apache/commons/lang/StringUtils.defaultIfEmpty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     117: astore        6
     119: aload         5
     121: ldc           #24                 // String pennWebsecBinary
     123: invokevirtual #21                 // Method java/util/Properties.get:(Ljava/lang/Object;)Ljava/lang/Object;
     126: checkcast     #10                 // class java/lang/String
     129: ldc           #25                 // String os.name
     131: invokestatic  #26                 // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
     134: ldc           #27                 // String Windows
     136: invokevirtual #28                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     139: ifeq          147
     142: ldc           #29                 // String c:\\websec\\websec_client.exe
     144: goto          149
     147: ldc           #30                 // String /usr/local/lib/websec/websec_client
     149: invokestatic  #23                 // Method org/apache/commons/lang/StringUtils.defaultIfEmpty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     152: astore        7
     154: new           #31                 // class java/lang/StringBuffer
     157: dup
     158: invokespecial #32                 // Method java/lang/StringBuffer."<init>":()V
     161: astore        8
     163: aload         5
     165: ldc           #33                 // String penn.uiGroup
     167: invokevirtual #21                 // Method java/util/Properties.get:(Ljava/lang/Object;)Ljava/lang/Object;
     170: checkcast     #10                 // class java/lang/String
     173: astore        9
     175: aload         9
     177: invokestatic  #12                 // Method org/apache/commons/lang/StringUtils.isBlank:(Ljava/lang/String;)Z
     180: ifne          310
     183: aconst_null
     184: astore        10
     186: ldc           #34                 // String GrouperSystem
     188: iconst_1
     189: invokestatic  #35                 // Method edu/internet2/middleware/grouper/SubjectFinder.findById:(Ljava/lang/String;Z)Ledu/internet2/middleware/subject/Subject;
     192: invokestatic  #36                 // Method edu/internet2/middleware/grouper/GrouperSession.start:(Ledu/internet2/middleware/subject/Subject;)Ledu/internet2/middleware/grouper/GrouperSession;
     195: astore        10
     197: aload         4
     199: iconst_1
     200: invokestatic  #37                 // Method edu/internet2/middleware/grouper/SubjectFinder.findByIdentifier:(Ljava/lang/String;Z)Ledu/internet2/middleware/subject/Subject;
     203: astore        11
     205: aload         10
     207: aload         9
     209: iconst_1
     210: invokestatic  #38                 // Method edu/internet2/middleware/grouper/GroupFinder.findByName:(Ledu/internet2/middleware/grouper/GrouperSession;Ljava/lang/String;Z)Ledu/internet2/middleware/grouper/Group;
     213: astore        12
     215: aload         12
     217: aload         11
     219: invokevirtual #39                 // Method edu/internet2/middleware/grouper/Group.hasMember:(Ledu/internet2/middleware/subject/Subject;)Z
     222: ifne          235
     225: new           #40                 // class java/lang/RuntimeException
     228: dup
     229: ldc           #41                 // String User is not authorized
     231: invokespecial #42                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
     234: athrow
     235: aload         10
     237: invokestatic  #43                 // Method edu/internet2/middleware/grouper/GrouperSession.stopQuietly:(Ledu/internet2/middleware/grouper/GrouperSession;)V
     240: goto          310
     243: astore        11
     245: getstatic     #45                 // Field LOG:Lorg/apache/commons/logging/Log;
     248: new           #46                 // class java/lang/StringBuilder
     251: dup
     252: invokespecial #47                 // Method java/lang/StringBuilder."<init>":()V
     255: ldc           #48                 // String user: \'
     257: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     260: aload         4
     262: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     265: ldc           #50                 // String \' is not a member of group: \'
     267: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     270: aload         9
     272: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     275: ldc           #51                 // String \', and therefore is not authorized to use the app (configured in local media.properties penn.uiGroup
     277: invokevirtual #49                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     280: invokevirtual #52                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     283: invokeinterface #53,  2           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;)V
     288: new           #40                 // class java/lang/RuntimeException
     291: dup
     292: ldc           #41                 // String User is not authorized
     294: aload         11
     296: invokespecial #54                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     299: athrow
     300: astore        13
     302: aload         10
     304: invokestatic  #43                 // Method edu/internet2/middleware/grouper/GrouperSession.stopQuietly:(Ledu/internet2/middleware/grouper/GrouperSession;)V
     307: aload         13
     309: athrow
     310: aload_1
     311: ldc           #17                 // String pennUser
     313: aload         4
     315: invokeinterface #55,  3           // InterfaceMethod javax/servlet/http/HttpSession.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     320: aload_1
     321: ldc           #8                  // String pennToken
     323: aload_3
     324: invokeinterface #55,  3           // InterfaceMethod javax/servlet/http/HttpSession.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     329: aload         4
     331: areturn
    Exception table:
       from    to  target type
         186   235   243   Class java/lang/Exception
         186   235   300   any
         243   302   300   any

  public edu.upenn.isc.grouper_ui.security.PennWebsecRequestWrapper(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #56                 // Method javax/servlet/http/HttpServletRequestWrapper."<init>":(Ljavax/servlet/http/HttpServletRequest;)V
       5: aload_0
       6: aconst_null
       7: putfield      #15                 // Field httpServletResponse:Ljavax/servlet/http/HttpServletResponse;
      10: aload_0
      11: aload_2
      12: putfield      #15                 // Field httpServletResponse:Ljavax/servlet/http/HttpServletResponse;
      15: return

  static {};
    Code:
       0: ldc           #7                  // class edu/upenn/isc/grouper_ui/security/PennWebsecRequestWrapper
       2: invokestatic  #57                 // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
       5: putstatic     #45                 // Field LOG:Lorg/apache/commons/logging/Log;
       8: return
}

Compiled from "ReverseProxyService.java"
class org.smallmind.web.reverse.http1_1.ReverseProxyService$EventLoop implements java.lang.Runnable {
  private java.lang.Thread runnableThread;

  private boolean stopped;

  final org.smallmind.web.reverse.http1_1.ReverseProxyService this$0;

  private org.smallmind.web.reverse.http1_1.ReverseProxyService$EventLoop(org.smallmind.web.reverse.http1_1.ReverseProxyService);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field stopped:Z
      14: return

  private void stop() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #3                  // Field stopped:Z
       5: aload_0
       6: getfield      #4                  // Field runnableThread:Ljava/lang/Thread;
       9: ifnull        19
      12: aload_0
      13: getfield      #4                  // Field runnableThread:Ljava/lang/Thread;
      16: invokevirtual #5                  // Method java/lang/Thread.interrupt:()V
      19: aload_0
      20: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      23: getfield      #6                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.terminationLatch:Ljava/util/concurrent/CountDownLatch;
      26: invokevirtual #7                  // Method java/util/concurrent/CountDownLatch.await:()V
      29: return

  public void run();
    Code:
       0: aload_0
       1: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       4: putfield      #4                  // Field runnableThread:Ljava/lang/Thread;
       7: aload_0
       8: getfield      #3                  // Field stopped:Z
      11: ifne          489
      14: iconst_0
      15: istore_1
      16: aload_0
      17: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      20: getfield      #9                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selectLock:Ljava/util/concurrent/locks/Lock;
      23: invokeinterface #10,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      28: aload_0
      29: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      32: getfield      #11                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selector:Ljava/nio/channels/Selector;
      35: ldc2_w        #12                 // long 100l
      38: invokevirtual #14                 // Method java/nio/channels/Selector.select:(J)I
      41: istore_1
      42: aload_0
      43: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      46: getfield      #9                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selectLock:Ljava/util/concurrent/locks/Lock;
      49: invokeinterface #15,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      54: goto          97
      57: astore_2
      58: ldc           #17                 // class org/smallmind/web/reverse/http1_1/ReverseProxyService
      60: invokestatic  #18                 // Method org/smallmind/scribe/pen/LoggerManager.getLogger:(Ljava/lang/Class;)Lorg/smallmind/scribe/pen/Logger;
      63: aload_2
      64: invokevirtual #19                 // Method org/smallmind/scribe/pen/Logger.error:(Ljava/lang/Throwable;)V
      67: aload_0
      68: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      71: getfield      #9                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selectLock:Ljava/util/concurrent/locks/Lock;
      74: invokeinterface #15,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      79: goto          97
      82: astore_3
      83: aload_0
      84: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
      87: getfield      #9                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selectLock:Ljava/util/concurrent/locks/Lock;
      90: invokeinterface #15,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      95: aload_3
      96: athrow
      97: aload_0
      98: getfield      #3                  // Field stopped:Z
     101: ifne          473
     104: iload_1
     105: ifle          473
     108: aload_0
     109: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     112: getfield      #11                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selector:Ljava/nio/channels/Selector;
     115: invokevirtual #20                 // Method java/nio/channels/Selector.selectedKeys:()Ljava/util/Set;
     118: invokeinterface #21,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     123: astore_2
     124: aload_0
     125: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     128: getfield      #22                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.loopLock:Ljava/util/concurrent/locks/Lock;
     131: invokeinterface #10,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
     136: aload_2
     137: invokeinterface #23,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     142: ifeq          441
     145: aload_2
     146: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     151: checkcast     #25                 // class java/nio/channels/SelectionKey
     154: astore_3
     155: aload_3
     156: invokevirtual #26                 // Method java/nio/channels/SelectionKey.isValid:()Z
     159: ifeq          414
     162: aload_3
     163: invokevirtual #27                 // Method java/nio/channels/SelectionKey.isAcceptable:()Z
     166: ifeq          278
     169: aconst_null
     170: astore        4
     172: aload_3
     173: invokevirtual #28                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     176: checkcast     #29                 // class java/nio/channels/ServerSocketChannel
     179: invokevirtual #30                 // Method java/nio/channels/ServerSocketChannel.accept:()Ljava/nio/channels/SocketChannel;
     182: getstatic     #31                 // Field java/net/StandardSocketOptions.SO_KEEPALIVE:Ljava/net/SocketOption;
     185: iconst_1
     186: invokestatic  #32                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     189: invokevirtual #33                 // Method java/nio/channels/SocketChannel.setOption:(Ljava/net/SocketOption;Ljava/lang/Object;)Ljava/nio/channels/SocketChannel;
     192: getstatic     #34                 // Field java/net/StandardSocketOptions.TCP_NODELAY:Ljava/net/SocketOption;
     195: iconst_1
     196: invokestatic  #32                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     199: invokevirtual #33                 // Method java/nio/channels/SocketChannel.setOption:(Ljava/net/SocketOption;Ljava/lang/Object;)Ljava/nio/channels/SocketChannel;
     202: iconst_0
     203: invokevirtual #35                 // Method java/nio/channels/SocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
     206: checkcast     #36                 // class java/nio/channels/SocketChannel
     209: astore        4
     211: aload         4
     213: aload_0
     214: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     217: getfield      #11                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.selector:Ljava/nio/channels/Selector;
     220: iconst_1
     221: new           #37                 // class org/smallmind/web/reverse/http1_1/HttpRequestFrameReader
     224: dup
     225: aload_0
     226: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     229: aload         4
     231: aload_0
     232: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     235: getfield      #38                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.connectTimeoutMillis:I
     238: invokespecial #39                 // Method org/smallmind/web/reverse/http1_1/HttpRequestFrameReader."<init>":(Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;Ljava/nio/channels/SocketChannel;I)V
     241: invokevirtual #40                 // Method java/nio/channels/SocketChannel.register:(Ljava/nio/channels/Selector;ILjava/lang/Object;)Ljava/nio/channels/SelectionKey;
     244: pop
     245: goto          275
     248: astore        5
     250: aload         4
     252: ifnull        260
     255: aload         4
     257: invokevirtual #41                 // Method java/nio/channels/SocketChannel.close:()V
     260: goto          275
     263: astore        6
     265: ldc           #17                 // class org/smallmind/web/reverse/http1_1/ReverseProxyService
     267: invokestatic  #18                 // Method org/smallmind/scribe/pen/LoggerManager.getLogger:(Ljava/lang/Class;)Lorg/smallmind/scribe/pen/Logger;
     270: aload         6
     272: invokevirtual #19                 // Method org/smallmind/scribe/pen/Logger.error:(Ljava/lang/Throwable;)V
     275: goto          418
     278: aload_3
     279: invokevirtual #42                 // Method java/nio/channels/SelectionKey.isReadable:()Z
     282: ifeq          418
     285: aload_3
     286: invokevirtual #28                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     289: invokevirtual #43                 // Method java/nio/channels/SelectableChannel.isOpen:()Z
     292: ifeq          418
     295: iconst_0
     296: istore        4
     298: aload_0
     299: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     302: getfield      #44                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.byteBuffer:Ljava/nio/ByteBuffer;
     305: invokevirtual #45                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/ByteBuffer;
     308: pop
     309: aload_3
     310: invokevirtual #28                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     313: checkcast     #36                 // class java/nio/channels/SocketChannel
     316: aload_0
     317: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     320: getfield      #44                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.byteBuffer:Ljava/nio/ByteBuffer;
     323: invokevirtual #46                 // Method java/nio/channels/SocketChannel.read:(Ljava/nio/ByteBuffer;)I
     326: istore        4
     328: goto          355
     331: astore        5
     333: aload_3
     334: invokevirtual #47                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     337: checkcast     #48                 // class org/smallmind/web/reverse/http1_1/FrameReader
     340: getstatic     #49                 // Field org/smallmind/web/reverse/http1_1/CannedResponse.BAD_REQUEST:Lorg/smallmind/web/reverse/http1_1/CannedResponse;
     343: aload_3
     344: invokevirtual #28                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     347: checkcast     #36                 // class java/nio/channels/SocketChannel
     350: invokeinterface #50,  3           // InterfaceMethod org/smallmind/web/reverse/http1_1/FrameReader.fail:(Lorg/smallmind/web/reverse/http1_1/CannedResponse;Ljava/nio/channels/SocketChannel;)V
     355: iload         4
     357: ifle          394
     360: aload_0
     361: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     364: getfield      #44                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.byteBuffer:Ljava/nio/ByteBuffer;
     367: invokevirtual #51                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/ByteBuffer;
     370: pop
     371: aload_3
     372: invokevirtual #47                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     375: checkcast     #48                 // class org/smallmind/web/reverse/http1_1/FrameReader
     378: aload_3
     379: aload_0
     380: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     383: getfield      #44                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.byteBuffer:Ljava/nio/ByteBuffer;
     386: invokeinterface #52,  3           // InterfaceMethod org/smallmind/web/reverse/http1_1/FrameReader.processInput:(Ljava/nio/channels/SelectionKey;Ljava/nio/ByteBuffer;)V
     391: goto          411
     394: iload         4
     396: ifge          411
     399: aload_3
     400: invokevirtual #47                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     403: checkcast     #48                 // class org/smallmind/web/reverse/http1_1/FrameReader
     406: invokeinterface #53,  1           // InterfaceMethod org/smallmind/web/reverse/http1_1/FrameReader.closeChannels:()V
     411: goto          418
     414: aload_3
     415: invokevirtual #54                 // Method java/nio/channels/SelectionKey.cancel:()V
     418: aload_2
     419: invokeinterface #55,  1           // InterfaceMethod java/util/Iterator.remove:()V
     424: goto          438
     427: astore        7
     429: aload_2
     430: invokeinterface #55,  1           // InterfaceMethod java/util/Iterator.remove:()V
     435: aload         7
     437: athrow
     438: goto          136
     441: aload_0
     442: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     445: getfield      #22                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.loopLock:Ljava/util/concurrent/locks/Lock;
     448: invokeinterface #15,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     453: goto          473
     456: astore        8
     458: aload_0
     459: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     462: getfield      #22                 // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.loopLock:Ljava/util/concurrent/locks/Lock;
     465: invokeinterface #15,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     470: aload         8
     472: athrow
     473: goto          7
     476: astore_1
     477: ldc           #17                 // class org/smallmind/web/reverse/http1_1/ReverseProxyService
     479: invokestatic  #18                 // Method org/smallmind/scribe/pen/LoggerManager.getLogger:(Ljava/lang/Class;)Lorg/smallmind/scribe/pen/Logger;
     482: aload_1
     483: invokevirtual #19                 // Method org/smallmind/scribe/pen/Logger.error:(Ljava/lang/Throwable;)V
     486: goto          7
     489: aload_0
     490: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     493: getfield      #6                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.terminationLatch:Ljava/util/concurrent/CountDownLatch;
     496: invokevirtual #57                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     499: goto          517
     502: astore        9
     504: aload_0
     505: getfield      #1                  // Field this$0:Lorg/smallmind/web/reverse/http1_1/ReverseProxyService;
     508: getfield      #6                  // Field org/smallmind/web/reverse/http1_1/ReverseProxyService.terminationLatch:Ljava/util/concurrent/CountDownLatch;
     511: invokevirtual #57                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     514: aload         9
     516: athrow
     517: return
    Exception table:
       from    to  target type
          28    42    57   Class java/io/IOException
          28    42    82   any
          57    67    82   any
         172   245   248   Class java/io/IOException
         250   260   263   Class java/io/IOException
         298   328   331   Class java/io/IOException
         155   418   427   any
         427   429   427   any
         136   441   456   any
         456   458   456   any
          14   473   476   Class java/lang/Exception
           0   489   502   any
         502   504   502   any
}

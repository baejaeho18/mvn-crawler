Compiled from "BundlePatchingTestCase.java"
public class org.jboss.as.patching.runner.BundlePatchingTestCase extends org.jboss.as.patching.runner.AbstractTaskTestCase {
  public org.jboss.as.patching.runner.BundlePatchingTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jboss/as/patching/runner/AbstractTaskTestCase."<init>":()V
       4: return

  public void testAddBundle() throws java.lang.Exception;
    Code:
       0: ldc           #2                  // String patchID
       2: astore_1
       3: aload_0
       4: getfield      #3                  // Field tempDir:Ljava/io/File;
       7: iconst_1
       8: anewarray     #4                  // class java/lang/String
      11: dup
      12: iconst_0
      13: aload_1
      14: aastore
      15: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      18: astore_2
      19: ldc           #6                  // String baseLayerPatchID
      21: astore_3
      22: ldc           #7                  // String bundleName
      24: astore        4
      26: aload_2
      27: aload_3
      28: aload         4
      30: invokestatic  #8                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addBundle:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      33: astore        5
      35: invokestatic  #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      38: aload_1
      39: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      42: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      45: invokevirtual #12                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      48: aload_0
      49: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      52: invokevirtual #14                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
      55: aload_0
      56: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      59: invokevirtual #15                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
      62: invokevirtual #16                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
      65: invokevirtual #17                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      68: aload_3
      69: ldc           #18                 // String base
      71: iconst_0
      72: invokevirtual #19                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
      75: aload         5
      77: invokevirtual #20                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
      80: checkcast     #21                 // class org/jboss/as/patching/metadata/PatchElementBuilder
      83: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      86: invokevirtual #23                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
      89: astore        6
      91: aload_2
      92: aload         6
      94: invokestatic  #24                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
      97: aload_2
      98: aload_1
      99: invokestatic  #25                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     102: astore        7
     104: aload_0
     105: aload         7
     107: invokevirtual #26                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     110: astore        8
     112: aload         8
     114: aload         6
     116: invokestatic  #27                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     119: aload_0
     120: invokevirtual #28                 // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     123: astore        9
     125: aload         9
     127: invokevirtual #29                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     130: iconst_0
     131: invokeinterface #30,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     136: checkcast     #31                 // class org/jboss/as/patching/installation/Layer
     139: invokeinterface #32,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     144: invokeinterface #33,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     149: aload_3
     150: invokevirtual #34                 // Method org/jboss/as/patching/DirectoryStructure.getBundlesPatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     153: astore        10
     155: aload         10
     157: iconst_0
     158: anewarray     #4                  // class java/lang/String
     161: invokestatic  #35                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     164: pop
     165: aload         10
     167: aload         4
     169: aload         5
     171: invokevirtual #36                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     174: invokevirtual #37                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     177: invokestatic  #38                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedBundle:(Ljava/io/File;Ljava/lang/String;[B)V
     180: return

  public void testUpdateBundle() throws java.lang.Exception;
    Code:
       0: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       3: astore_1
       4: aload_0
       5: getfield      #39                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
       8: invokevirtual #40                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
      11: invokeinterface #41,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getBundlesDir:()Ljava/io/File;
      16: iconst_3
      17: anewarray     #4                  // class java/lang/String
      20: dup
      21: iconst_0
      22: ldc           #42                 // String system
      24: aastore
      25: dup
      26: iconst_1
      27: ldc           #43                 // String layers
      29: aastore
      30: dup
      31: iconst_2
      32: ldc           #18                 // String base
      34: aastore
      35: invokestatic  #44                 // Method org/jboss/as/patching/IoUtils.newFile:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      38: astore_2
      39: aload_2
      40: aload_1
      41: ldc           #45                 // String bundle content
      43: invokestatic  #46                 // Method org/jboss/as/patching/runner/TestUtils.createBundle0:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Ljava/io/File;
      46: astore_3
      47: aload_3
      48: invokestatic  #47                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      51: astore        4
      53: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      56: astore        5
      58: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      61: astore        6
      63: aload_0
      64: getfield      #3                  // Field tempDir:Ljava/io/File;
      67: iconst_1
      68: anewarray     #4                  // class java/lang/String
      71: dup
      72: iconst_0
      73: aload         5
      75: aastore
      76: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      79: astore        7
      81: aload         7
      83: aload         6
      85: aload_3
      86: ldc           #48                 // String updated bundle content
      88: invokestatic  #49                 // Method org/jboss/as/patching/runner/ContentModificationUtils.modifyBundle:(Ljava/io/File;Ljava/lang/String;Ljava/io/File;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      91: astore        8
      93: invokestatic  #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      96: aload         5
      98: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     101: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     104: invokevirtual #12                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     107: aload_0
     108: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     111: invokevirtual #14                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     114: aload_0
     115: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     118: invokevirtual #15                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
     121: invokevirtual #16                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     124: invokevirtual #17                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     127: aload         6
     129: ldc           #18                 // String base
     131: iconst_0
     132: invokevirtual #19                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     135: aload         8
     137: invokevirtual #20                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     140: checkcast     #21                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     143: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     146: invokevirtual #23                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     149: astore        9
     151: aload         7
     153: aload         9
     155: invokestatic  #24                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     158: aload         7
     160: aload         5
     162: invokestatic  #25                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     165: astore        10
     167: aload_0
     168: aload         10
     170: invokevirtual #26                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     173: astore        11
     175: aload         11
     177: aload         9
     179: invokestatic  #27                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     182: aload_0
     183: invokevirtual #28                 // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     186: astore        12
     188: aload         12
     190: invokevirtual #29                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     193: iconst_0
     194: invokeinterface #30,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     199: checkcast     #31                 // class org/jboss/as/patching/installation/Layer
     202: invokeinterface #32,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     207: invokeinterface #33,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     212: aload         6
     214: invokevirtual #34                 // Method org/jboss/as/patching/DirectoryStructure.getBundlesPatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     217: astore        13
     219: aload         13
     221: iconst_0
     222: anewarray     #4                  // class java/lang/String
     225: invokestatic  #35                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     228: pop
     229: aload         13
     231: aload_1
     232: aload         8
     234: invokevirtual #36                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     237: invokevirtual #37                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     240: invokestatic  #38                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedBundle:(Ljava/io/File;Ljava/lang/String;[B)V
     243: return

  public void testRemoveBundle() throws java.lang.Exception;
    Code:
       0: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       3: astore_1
       4: aload_0
       5: getfield      #39                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
       8: invokevirtual #40                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
      11: invokeinterface #41,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getBundlesDir:()Ljava/io/File;
      16: iconst_3
      17: anewarray     #4                  // class java/lang/String
      20: dup
      21: iconst_0
      22: ldc           #42                 // String system
      24: aastore
      25: dup
      26: iconst_1
      27: ldc           #43                 // String layers
      29: aastore
      30: dup
      31: iconst_2
      32: ldc           #18                 // String base
      34: aastore
      35: invokestatic  #44                 // Method org/jboss/as/patching/IoUtils.newFile:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      38: astore_2
      39: aload_2
      40: aload_1
      41: ldc           #45                 // String bundle content
      43: invokestatic  #46                 // Method org/jboss/as/patching/runner/TestUtils.createBundle0:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Ljava/io/File;
      46: astore_3
      47: aload_3
      48: invokestatic  #50                 // Method org/jboss/as/patching/runner/ContentModificationUtils.removeBundle:(Ljava/io/File;)Lorg/jboss/as/patching/metadata/ContentModification;
      51: astore        4
      53: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      56: astore        5
      58: invokestatic  #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      61: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      64: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      67: invokestatic  #11                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      70: invokevirtual #12                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      73: aload_0
      74: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      77: invokevirtual #14                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
      80: aload_0
      81: getfield      #13                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      84: invokevirtual #15                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
      87: invokevirtual #16                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
      90: invokevirtual #17                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      93: aload         5
      95: ldc           #18                 // String base
      97: iconst_0
      98: invokevirtual #19                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     101: aload         4
     103: invokevirtual #20                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     106: checkcast     #21                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     109: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     112: invokevirtual #23                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     115: astore        6
     117: aload_0
     118: getfield      #3                  // Field tempDir:Ljava/io/File;
     121: iconst_1
     122: anewarray     #4                  // class java/lang/String
     125: dup
     126: iconst_0
     127: aload         6
     129: invokeinterface #51,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
     134: aastore
     135: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     138: astore        7
     140: aload         7
     142: aload         6
     144: invokestatic  #24                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     147: aload         7
     149: aload         6
     151: invokeinterface #51,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
     156: invokestatic  #25                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     159: astore        8
     161: aload_0
     162: aload         8
     164: invokevirtual #26                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     167: astore        9
     169: aload         9
     171: aload         6
     173: invokestatic  #27                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     176: aload_0
     177: invokevirtual #28                 // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     180: astore        10
     182: aload         10
     184: invokevirtual #29                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     187: iconst_0
     188: invokeinterface #30,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     193: checkcast     #31                 // class org/jboss/as/patching/installation/Layer
     196: invokeinterface #32,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     201: invokeinterface #33,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     206: aload         5
     208: invokevirtual #34                 // Method org/jboss/as/patching/DirectoryStructure.getBundlesPatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     211: astore        11
     213: aload         11
     215: iconst_0
     216: anewarray     #4                  // class java/lang/String
     219: invokestatic  #35                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     222: pop
     223: aload         11
     225: aload_1
     226: invokestatic  #52                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedAbsentBundle:(Ljava/io/File;Ljava/lang/String;)V
     229: return
}

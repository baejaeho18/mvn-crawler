Compiled from "CumulativePatchTestCase.java"
public class org.jboss.as.patching.runner.CumulativePatchTestCase extends org.jboss.as.patching.runner.AbstractTaskTestCase {
  public org.jboss.as.patching.runner.CumulativePatchTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jboss/as/patching/runner/AbstractTaskTestCase."<init>":()V
       4: return

  public void testApplyReleasePatch() throws java.lang.Exception;
    Code:
       0: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       3: astore_1
       4: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       7: astore_2
       8: aload_0
       9: getfield      #3                  // Field tempDir:Ljava/io/File;
      12: iconst_1
      13: anewarray     #4                  // class java/lang/String
      16: dup
      17: iconst_0
      18: aload_1
      19: aastore
      20: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      23: astore_3
      24: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      27: astore        4
      29: aload_3
      30: aload_2
      31: aload         4
      33: invokestatic  #6                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      36: astore        5
      38: aload_0
      39: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
      42: astore        6
      44: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      47: aload_1
      48: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      51: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      54: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      57: aload         6
      59: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      62: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
      67: aload         6
      69: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      72: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
      77: new           #14                 // class java/lang/StringBuilder
      80: dup
      81: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      84: aload_0
      85: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      88: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
      91: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      94: ldc           #19                 // String -Release1
      96: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      99: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     102: invokevirtual #21                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeIdentity:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     105: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     108: aload_2
     109: ldc           #23                 // String base
     111: iconst_0
     112: invokevirtual #24                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     115: aload         5
     117: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     120: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     123: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     126: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     129: astore        7
     131: aload_3
     132: aload         7
     134: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     137: aload_3
     138: aload_1
     139: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     142: astore        8
     144: aload_0
     145: aload         8
     147: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     150: astore        9
     152: aload         9
     154: aload         7
     156: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     159: aload_0
     160: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     163: astore        10
     165: aload         10
     167: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     170: iconst_0
     171: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     176: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     179: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     184: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     189: aload_2
     190: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     193: astore        11
     195: aload         11
     197: iconst_0
     198: anewarray     #4                  // class java/lang/String
     201: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     204: pop
     205: aload         11
     207: aload         4
     209: aload         5
     211: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     214: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     217: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     220: return

  public void testApplyReleasePatchAndRollback() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #43                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
       4: invokevirtual #44                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
       7: invokeinterface #45,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
      12: iconst_1
      13: anewarray     #4                  // class java/lang/String
      16: dup
      17: iconst_0
      18: ldc           #46                 // String bin
      20: aastore
      21: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      24: astore_1
      25: ldc           #47                 // String standalone.sh
      27: astore_2
      28: aload_1
      29: iconst_1
      30: anewarray     #4                  // class java/lang/String
      33: dup
      34: iconst_0
      35: aload_2
      36: aastore
      37: invokestatic  #48                 // Method org/jboss/as/patching/runner/TestUtils.touch:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      40: astore_3
      41: aload_3
      42: ldc           #49                 // String original script to run standalone AS7
      44: invokestatic  #50                 // Method org/jboss/as/patching/runner/TestUtils.dump:(Ljava/io/File;Ljava/lang/String;)V
      47: aload_3
      48: invokestatic  #51                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      51: astore        4
      53: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      56: astore        5
      58: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      61: astore        6
      63: aload_0
      64: getfield      #3                  // Field tempDir:Ljava/io/File;
      67: iconst_1
      68: anewarray     #4                  // class java/lang/String
      71: dup
      72: iconst_0
      73: aload         5
      75: aastore
      76: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      79: astore        7
      81: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      84: astore        8
      86: aload         7
      88: aload         6
      90: aload         8
      92: invokestatic  #6                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      95: astore        9
      97: aload         7
      99: aload         5
     101: ldc           #52                 // String updated script
     103: aload_3
     104: iconst_2
     105: anewarray     #4                  // class java/lang/String
     108: dup
     109: iconst_0
     110: ldc           #46                 // String bin
     112: aastore
     113: dup
     114: iconst_1
     115: ldc           #47                 // String standalone.sh
     117: aastore
     118: invokestatic  #53                 // Method org/jboss/as/patching/runner/ContentModificationUtils.modifyMisc:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;Ljava/io/File;[Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
     121: astore        10
     123: aload_0
     124: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     127: astore        11
     129: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     132: aload         5
     134: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     137: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     140: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     143: aload         11
     145: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     148: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
     153: aload         11
     155: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     158: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     163: new           #14                 // class java/lang/StringBuilder
     166: dup
     167: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     170: aload_0
     171: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     174: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
     177: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     180: ldc           #19                 // String -Release1
     182: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     185: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     188: invokevirtual #21                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeIdentity:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     191: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     194: aload         6
     196: ldc           #23                 // String base
     198: iconst_0
     199: invokevirtual #24                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     202: aload         9
     204: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     207: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     210: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     213: aload         10
     215: invokevirtual #54                 // Method org/jboss/as/patching/metadata/PatchBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     218: checkcast     #55                 // class org/jboss/as/patching/metadata/PatchBuilder
     221: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     224: astore        12
     226: aload         7
     228: aload         12
     230: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     233: aload         7
     235: aload         5
     237: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     240: astore        13
     242: aload_0
     243: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     246: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     249: astore        14
     251: aload_0
     252: aload         13
     254: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     257: astore        15
     259: aload         15
     261: aload         12
     263: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     266: aload_3
     267: iconst_0
     268: anewarray     #4                  // class java/lang/String
     271: invokestatic  #56                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     274: pop
     275: aload         10
     277: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     280: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     283: aload_3
     284: invokestatic  #57                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileContent:([BLjava/io/File;)V
     287: aload_0
     288: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     291: astore        16
     293: aload         16
     295: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     298: iconst_0
     299: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     304: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     307: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     312: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     317: aload         6
     319: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     322: astore        17
     324: aload         17
     326: iconst_0
     327: anewarray     #4                  // class java/lang/String
     330: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     333: pop
     334: aload         17
     336: aload         8
     338: aload         9
     340: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     343: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     346: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     349: aload_0
     350: aload         5
     352: invokevirtual #58                 // Method rollback:(Ljava/lang/String;)Lorg/jboss/as/patching/tool/PatchingResult;
     355: astore        18
     357: aload_0
     358: getfield      #43                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
     361: invokevirtual #44                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
     364: invokeinterface #45,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
     369: invokestatic  #59                 // Method org/jboss/as/patching/runner/TestUtils.tree:(Ljava/io/File;)V
     372: aload         18
     374: aload         14
     376: invokestatic  #60                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenRolledBack:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/installation/Identity;)V
     379: aload_3
     380: iconst_0
     381: anewarray     #4                  // class java/lang/String
     384: invokestatic  #56                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     387: pop
     388: aload         4
     390: aload_3
     391: invokestatic  #57                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileContent:([BLjava/io/File;)V
     394: return

  public void testApplyReleasePatchThenOneOffPatch() throws java.lang.Exception;
    Code:
       0: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       3: astore_1
       4: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       7: astore_2
       8: aload_0
       9: getfield      #3                  // Field tempDir:Ljava/io/File;
      12: iconst_1
      13: anewarray     #4                  // class java/lang/String
      16: dup
      17: iconst_0
      18: aload_1
      19: aastore
      20: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      23: astore_3
      24: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      27: astore        4
      29: aload_3
      30: aload_2
      31: aload         4
      33: invokestatic  #6                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      36: astore        5
      38: aload_0
      39: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
      42: astore        6
      44: new           #14                 // class java/lang/StringBuilder
      47: dup
      48: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      51: aload_0
      52: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      55: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
      58: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: ldc           #19                 // String -Release1
      63: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      66: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      69: astore        7
      71: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      74: aload_1
      75: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      78: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      81: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      84: aload         6
      86: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      89: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
      94: aload         6
      96: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      99: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     104: aload         7
     106: invokevirtual #21                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeIdentity:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     109: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     112: aload_2
     113: ldc           #23                 // String base
     115: iconst_0
     116: invokevirtual #24                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     119: aload         5
     121: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     124: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     127: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     130: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     133: astore        8
     135: aload_3
     136: aload         8
     138: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     141: aload_3
     142: aload_1
     143: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     146: astore        9
     148: aload_0
     149: aload         9
     151: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     154: astore        10
     156: aload         10
     158: aload         8
     160: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     163: aload_0
     164: new           #61                 // class org/jboss/as/version/ProductConfig
     167: dup
     168: aload_0
     169: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     172: invokevirtual #62                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     175: new           #14                 // class java/lang/StringBuilder
     178: dup
     179: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     182: aload_0
     183: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     186: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
     189: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     192: ldc           #19                 // String -Release1
     194: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     197: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     200: aload_0
     201: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     204: invokevirtual #63                 // Method org/jboss/as/version/ProductConfig.getConsoleSlot:()Ljava/lang/String;
     207: invokespecial #64                 // Method org/jboss/as/version/ProductConfig."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     210: putfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     213: aload_0
     214: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     217: astore        11
     219: aload         11
     221: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     224: iconst_0
     225: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     230: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     233: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     238: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     243: aload_2
     244: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     247: astore        12
     249: aload         12
     251: iconst_0
     252: anewarray     #4                  // class java/lang/String
     255: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     258: pop
     259: aload         12
     261: aload         4
     263: aload         5
     265: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     268: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     271: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     274: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     277: astore        13
     279: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     282: astore        14
     284: aload_0
     285: getfield      #3                  // Field tempDir:Ljava/io/File;
     288: iconst_1
     289: anewarray     #4                  // class java/lang/String
     292: dup
     293: iconst_0
     294: aload         13
     296: aastore
     297: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     300: astore        15
     302: aload         15
     304: aload         14
     306: aload         12
     308: iconst_1
     309: anewarray     #4                  // class java/lang/String
     312: dup
     313: iconst_0
     314: aload         4
     316: aastore
     317: invokestatic  #65                 // Method org/jboss/as/patching/IoUtils.newFile:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     320: ldc           #66                 // String new resource in the module
     322: invokestatic  #67                 // Method org/jboss/as/patching/runner/ContentModificationUtils.modifyModule:(Ljava/io/File;Ljava/lang/String;Ljava/io/File;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
     325: astore        16
     327: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     330: aload         13
     332: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     335: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     338: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     341: aload_0
     342: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     345: invokevirtual #62                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     348: aload         7
     350: invokevirtual #68                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     353: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     356: aload         14
     358: ldc           #23                 // String base
     360: iconst_0
     361: invokevirtual #69                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     364: aload         16
     366: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     369: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     372: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     375: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     378: astore        17
     380: aload         15
     382: aload         17
     384: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     387: aload         15
     389: aload         13
     391: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     394: astore        18
     396: aload_0
     397: aload         18
     399: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     402: astore        19
     404: aload         19
     406: aload         17
     408: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     411: aload_0
     412: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     415: astore        20
     417: aload         20
     419: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     422: iconst_0
     423: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     428: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     431: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     436: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     441: aload         14
     443: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     446: astore        12
     448: aload         12
     450: iconst_0
     451: anewarray     #4                  // class java/lang/String
     454: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     457: pop
     458: aload         12
     460: aload         4
     462: aload         16
     464: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     467: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     470: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     473: return

  public void testApplyReleasePatchThenOneOffPatchThenRollbackReleasePatch() throws java.lang.Exception;
    Code:
       0: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       3: astore_1
       4: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
       7: astore_2
       8: aload_0
       9: getfield      #3                  // Field tempDir:Ljava/io/File;
      12: iconst_1
      13: anewarray     #4                  // class java/lang/String
      16: dup
      17: iconst_0
      18: aload_1
      19: aastore
      20: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      23: astore_3
      24: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      27: astore        4
      29: aload_3
      30: aload_2
      31: aload         4
      33: invokestatic  #6                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      36: astore        5
      38: aload_0
      39: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
      42: astore        6
      44: new           #14                 // class java/lang/StringBuilder
      47: dup
      48: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      51: aload         6
      53: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      56: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
      61: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      64: ldc           #19                 // String -Release1
      66: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      69: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      72: astore        7
      74: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      77: aload_1
      78: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      81: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      84: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      87: aload         6
      89: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      92: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
      97: aload         6
      99: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     102: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     107: aload         7
     109: invokevirtual #21                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeIdentity:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     112: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     115: aload_2
     116: ldc           #23                 // String base
     118: iconst_0
     119: invokevirtual #24                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     122: aload         5
     124: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     127: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     130: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     133: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     136: astore        8
     138: aload_3
     139: aload         8
     141: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     144: aload_3
     145: aload_1
     146: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     149: astore        9
     151: aload_0
     152: aload         9
     154: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     157: astore        10
     159: aload         10
     161: aload         8
     163: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     166: aload_0
     167: new           #61                 // class org/jboss/as/version/ProductConfig
     170: dup
     171: aload_0
     172: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     175: invokevirtual #62                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     178: new           #14                 // class java/lang/StringBuilder
     181: dup
     182: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     185: aload_0
     186: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     189: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
     192: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     195: ldc           #19                 // String -Release1
     197: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     200: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     203: aload_0
     204: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     207: invokevirtual #63                 // Method org/jboss/as/version/ProductConfig.getConsoleSlot:()Ljava/lang/String;
     210: invokespecial #64                 // Method org/jboss/as/version/ProductConfig."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     213: putfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     216: aload_0
     217: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     220: astore        11
     222: aload         11
     224: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     227: iconst_0
     228: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     233: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     236: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     241: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     246: aload_2
     247: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     250: astore        12
     252: aload         12
     254: iconst_0
     255: anewarray     #4                  // class java/lang/String
     258: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     261: pop
     262: aload         12
     264: aload         4
     266: aload         5
     268: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     271: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     274: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     277: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     280: astore        13
     282: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     285: astore        14
     287: aload_0
     288: getfield      #3                  // Field tempDir:Ljava/io/File;
     291: iconst_1
     292: anewarray     #4                  // class java/lang/String
     295: dup
     296: iconst_0
     297: aload         13
     299: aastore
     300: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     303: astore        15
     305: aload         15
     307: aload         14
     309: aload         12
     311: iconst_1
     312: anewarray     #4                  // class java/lang/String
     315: dup
     316: iconst_0
     317: aload         4
     319: aastore
     320: invokestatic  #65                 // Method org/jboss/as/patching/IoUtils.newFile:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     323: ldc           #66                 // String new resource in the module
     325: invokestatic  #67                 // Method org/jboss/as/patching/runner/ContentModificationUtils.modifyModule:(Ljava/io/File;Ljava/lang/String;Ljava/io/File;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
     328: astore        16
     330: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     333: aload         13
     335: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     338: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     341: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     344: aload_0
     345: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     348: invokevirtual #62                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     351: aload         7
     353: invokevirtual #68                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     356: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     359: aload         14
     361: ldc           #23                 // String base
     363: iconst_0
     364: invokevirtual #69                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     367: aload         16
     369: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     372: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     375: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     378: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     381: astore        17
     383: aload         15
     385: aload         17
     387: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     390: aload         15
     392: aload         13
     394: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     397: astore        18
     399: aload_0
     400: aload         18
     402: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     405: astore        19
     407: aload         19
     409: aload         17
     411: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     414: aload_0
     415: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     418: astore        20
     420: aload         20
     422: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     425: iconst_0
     426: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     431: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     434: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     439: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     444: aload         14
     446: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     449: astore        12
     451: aload         12
     453: iconst_0
     454: anewarray     #4                  // class java/lang/String
     457: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     460: pop
     461: aload         12
     463: aload         4
     465: aload         16
     467: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     470: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     473: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     476: aload_0
     477: aload_1
     478: invokevirtual #58                 // Method rollback:(Ljava/lang/String;)Lorg/jboss/as/patching/tool/PatchingResult;
     481: astore        21
     483: aload_0
     484: getfield      #43                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
     487: invokevirtual #44                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
     490: invokeinterface #45,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
     495: invokestatic  #59                 // Method org/jboss/as/patching/runner/TestUtils.tree:(Ljava/io/File;)V
     498: aload         21
     500: aload         6
     502: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     505: invokestatic  #60                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenRolledBack:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/installation/Identity;)V
     508: aload_0
     509: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     512: astore        11
     514: aload         11
     516: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     519: iconst_0
     520: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     525: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     528: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     533: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     538: invokevirtual #70                 // Method org/jboss/as/patching/DirectoryStructure.getModuleRoot:()Ljava/io/File;
     541: astore        22
     543: aload         22
     545: iconst_1
     546: anewarray     #4                  // class java/lang/String
     549: dup
     550: iconst_0
     551: aload         4
     553: aastore
     554: invokestatic  #65                 // Method org/jboss/as/patching/IoUtils.newFile:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     557: iconst_0
     558: anewarray     #4                  // class java/lang/String
     561: invokestatic  #71                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirDoesNotExist:(Ljava/io/File;[Ljava/lang/String;)V
     564: return

  public void testInvalidateOneOffPatches() throws java.lang.Exception;
    Code:
       0: ldc           #72                 // String oneOffPatchID
       2: astore_1
       3: ldc           #73                 // String oneOffLayerPatchID
       5: astore_2
       6: aload_0
       7: getfield      #3                  // Field tempDir:Ljava/io/File;
      10: iconst_1
      11: anewarray     #4                  // class java/lang/String
      14: dup
      15: iconst_0
      16: aload_1
      17: aastore
      18: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      21: astore_3
      22: ldc           #74                 // String mymodule
      24: astore        4
      26: aload_3
      27: aload_2
      28: aload         4
      30: invokestatic  #6                  // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
      33: astore        5
      35: aload_0
      36: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
      39: astore        6
      41: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      44: aload_1
      45: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      48: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      51: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
      54: aload_0
      55: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      58: invokevirtual #62                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
      61: aload_0
      62: getfield      #16                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
      65: invokevirtual #17                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
      68: invokevirtual #68                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
      71: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      74: aload_2
      75: ldc           #23                 // String base
      77: iconst_0
      78: invokevirtual #69                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
      81: aload         5
      83: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
      86: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
      89: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
      92: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
      95: astore        7
      97: aload_3
      98: aload         7
     100: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     103: aload_3
     104: aload_1
     105: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     108: astore        8
     110: aload_0
     111: aload         8
     113: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     116: astore        9
     118: aload         9
     120: aload         7
     122: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     125: aload_0
     126: invokevirtual #7                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     129: astore        10
     131: aload         10
     133: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     136: iconst_0
     137: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     142: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     145: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     150: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     155: aload_2
     156: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     159: astore        11
     161: aload         11
     163: iconst_0
     164: anewarray     #4                  // class java/lang/String
     167: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     170: pop
     171: aload         11
     173: aload         4
     175: aload         5
     177: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     180: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     183: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     186: ldc           #75                 // String releasePatchID
     188: astore        12
     190: ldc           #76                 // String releaseLayerPatchID
     192: astore        13
     194: aload_0
     195: getfield      #3                  // Field tempDir:Ljava/io/File;
     198: iconst_1
     199: anewarray     #4                  // class java/lang/String
     202: dup
     203: iconst_0
     204: aload         12
     206: aastore
     207: invokestatic  #5                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     210: astore        14
     212: aload         14
     214: aload         13
     216: aload         4
     218: iconst_1
     219: anewarray     #4                  // class java/lang/String
     222: dup
     223: iconst_0
     224: ldc           #77                 // String different content in the module
     226: aastore
     227: invokestatic  #78                 // Method org/jboss/as/patching/runner/ContentModificationUtils.addModule:(Ljava/io/File;Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)Lorg/jboss/as/patching/metadata/ContentModification;
     230: astore        15
     232: new           #14                 // class java/lang/StringBuilder
     235: dup
     236: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     239: aload         6
     241: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     244: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     249: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     252: ldc           #19                 // String -Release1
     254: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     257: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     260: astore        16
     262: invokestatic  #8                  // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     265: aload         12
     267: invokevirtual #9                  // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     270: invokestatic  #2                  // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     273: invokevirtual #10                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     276: aload         6
     278: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     281: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
     286: aload         6
     288: invokevirtual #11                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     291: invokeinterface #13,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     296: aload         16
     298: invokevirtual #21                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeIdentity:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     301: invokevirtual #22                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     304: aload         13
     306: ldc           #23                 // String base
     308: iconst_0
     309: invokevirtual #24                 // Method org/jboss/as/patching/metadata/PatchBuilder.upgradeElement:(Ljava/lang/String;Ljava/lang/String;Z)Lorg/jboss/as/patching/metadata/PatchElementBuilder;
     312: aload         15
     314: invokevirtual #25                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     317: checkcast     #26                 // class org/jboss/as/patching/metadata/PatchElementBuilder
     320: invokevirtual #27                 // Method org/jboss/as/patching/metadata/PatchElementBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     323: invokevirtual #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     326: astore        17
     328: aload         14
     330: aload         17
     332: invokestatic  #29                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     335: aload         14
     337: aload         12
     339: invokestatic  #30                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     342: astore        18
     344: aload_0
     345: aload         18
     347: invokevirtual #31                 // Method executePatch:(Ljava/io/File;)Lorg/jboss/as/patching/tool/PatchingResult;
     350: astore        19
     352: aload         19
     354: aload         17
     356: invokestatic  #32                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
     359: aload_0
     360: getfield      #43                 // Field env:Lorg/jboss/as/patching/DirectoryStructure;
     363: invokevirtual #44                 // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
     366: invokeinterface #45,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
     371: invokestatic  #59                 // Method org/jboss/as/patching/runner/TestUtils.tree:(Ljava/io/File;)V
     374: aload         10
     376: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayers:()Ljava/util/List;
     379: iconst_0
     380: invokeinterface #34,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     385: checkcast     #35                 // class org/jboss/as/patching/installation/Layer
     388: invokeinterface #36,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
     393: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     398: aload         13
     400: invokevirtual #38                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     403: astore        11
     405: aload         11
     407: iconst_0
     408: anewarray     #4                  // class java/lang/String
     411: invokestatic  #39                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDirExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     414: pop
     415: aload         11
     417: aload         4
     419: aload         15
     421: invokevirtual #40                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
     424: invokevirtual #41                 // Method org/jboss/as/patching/metadata/ContentItem.getContentHash:()[B
     427: invokestatic  #42                 // Method org/jboss/as/patching/runner/PatchingAssert.assertDefinedModule:(Ljava/io/File;Ljava/lang/String;[B)V
     430: return
}

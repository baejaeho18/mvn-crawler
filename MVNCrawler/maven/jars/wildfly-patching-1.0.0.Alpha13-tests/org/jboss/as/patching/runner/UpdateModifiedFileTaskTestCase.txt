Compiled from "UpdateModifiedFileTaskTestCase.java"
public class org.jboss.as.patching.runner.UpdateModifiedFileTaskTestCase extends org.jboss.as.patching.runner.AbstractTaskTestCase {
  private org.jboss.as.patching.tool.PatchTool runner;

  private java.io.File zippedPatch;

  private org.jboss.as.patching.metadata.Patch patch;

  private org.jboss.as.patching.metadata.ContentModification fileUpdated;

  private java.io.File modifiedFile;

  private byte[] expectedModifiedHash;

  private byte[] updatedHash;

  public org.jboss.as.patching.runner.UpdateModifiedFileTaskTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jboss/as/patching/runner/AbstractTaskTestCase."<init>":()V
       4: return

  public void setUp() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokevirtual #2                  // Method loadInstalledIdentity:()Lorg/jboss/as/patching/installation/InstalledIdentity;
       4: astore_1
       5: aload_0
       6: getfield      #3                  // Field env:Lorg/jboss/as/patching/DirectoryStructure;
       9: invokevirtual #4                  // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
      12: invokeinterface #5,  1            // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
      17: iconst_1
      18: anewarray     #6                  // class java/lang/String
      21: dup
      22: iconst_0
      23: ldc           #7                  // String bin
      25: aastore
      26: invokestatic  #8                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      29: astore_2
      30: ldc           #9                  // String standalone.sh
      32: astore_3
      33: aload_0
      34: aload_2
      35: iconst_1
      36: anewarray     #6                  // class java/lang/String
      39: dup
      40: iconst_0
      41: aload_3
      42: aastore
      43: invokestatic  #10                 // Method org/jboss/as/patching/runner/TestUtils.touch:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      46: putfield      #11                 // Field modifiedFile:Ljava/io/File;
      49: aload_0
      50: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      53: ldc           #12                 // String modified script to run standalone AS7
      55: invokestatic  #13                 // Method org/jboss/as/patching/runner/TestUtils.dump:(Ljava/io/File;Ljava/lang/String;)V
      58: aload_0
      59: aload_0
      60: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      63: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      66: putfield      #15                 // Field expectedModifiedHash:[B
      69: invokestatic  #16                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      72: invokevirtual #17                 // Method java/lang/String.getBytes:()[B
      75: astore        4
      77: invokestatic  #16                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
      80: astore        5
      82: aload_0
      83: getfield      #18                 // Field tempDir:Ljava/io/File;
      86: iconst_1
      87: anewarray     #6                  // class java/lang/String
      90: dup
      91: iconst_0
      92: aload         5
      94: aastore
      95: invokestatic  #8                  // Method org/jboss/as/patching/IoUtils.mkdir:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      98: astore        6
     100: aload         6
     102: iconst_4
     103: anewarray     #6                  // class java/lang/String
     106: dup
     107: iconst_0
     108: aload         5
     110: aastore
     111: dup
     112: iconst_1
     113: ldc           #19                 // String misc
     115: aastore
     116: dup
     117: iconst_2
     118: ldc           #7                  // String bin
     120: aastore
     121: dup
     122: iconst_3
     123: aload_3
     124: aastore
     125: invokestatic  #10                 // Method org/jboss/as/patching/runner/TestUtils.touch:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
     128: astore        7
     130: aload         7
     132: ldc           #20                 // String updated script
     134: invokestatic  #13                 // Method org/jboss/as/patching/runner/TestUtils.dump:(Ljava/io/File;Ljava/lang/String;)V
     137: aload_0
     138: aload         7
     140: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
     143: putfield      #21                 // Field updatedHash:[B
     146: aload_0
     147: new           #22                 // class org/jboss/as/patching/metadata/ContentModification
     150: dup
     151: new           #23                 // class org/jboss/as/patching/metadata/MiscContentItem
     154: dup
     155: aload_3
     156: iconst_1
     157: anewarray     #6                  // class java/lang/String
     160: dup
     161: iconst_0
     162: ldc           #7                  // String bin
     164: aastore
     165: aload_0
     166: getfield      #21                 // Field updatedHash:[B
     169: invokespecial #24                 // Method org/jboss/as/patching/metadata/MiscContentItem."<init>":(Ljava/lang/String;[Ljava/lang/String;[B)V
     172: aload         4
     174: getstatic     #25                 // Field org/jboss/as/patching/metadata/ModificationType.MODIFY:Lorg/jboss/as/patching/metadata/ModificationType;
     177: invokespecial #26                 // Method org/jboss/as/patching/metadata/ContentModification."<init>":(Lorg/jboss/as/patching/metadata/ContentItem;[BLorg/jboss/as/patching/metadata/ModificationType;)V
     180: putfield      #27                 // Field fileUpdated:Lorg/jboss/as/patching/metadata/ContentModification;
     183: invokestatic  #28                 // Method org/jboss/as/patching/metadata/PatchBuilder.create:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     186: aload         5
     188: invokevirtual #29                 // Method org/jboss/as/patching/metadata/PatchBuilder.setPatchId:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     191: invokestatic  #16                 // Method org/jboss/as/patching/runner/TestUtils.randomString:()Ljava/lang/String;
     194: invokevirtual #30                 // Method org/jboss/as/patching/metadata/PatchBuilder.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchBuilder;
     197: aload_0
     198: getfield      #31                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     201: invokevirtual #32                 // Method org/jboss/as/version/ProductConfig.getProductName:()Ljava/lang/String;
     204: aload_0
     205: getfield      #31                 // Field productConfig:Lorg/jboss/as/version/ProductConfig;
     208: invokevirtual #33                 // Method org/jboss/as/version/ProductConfig.getProductVersion:()Ljava/lang/String;
     211: invokevirtual #34                 // Method org/jboss/as/patching/metadata/PatchBuilder.oneOffPatchIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/metadata/PatchIdentityBuilder;
     214: invokevirtual #35                 // Method org/jboss/as/patching/metadata/PatchIdentityBuilder.getParent:()Lorg/jboss/as/patching/metadata/PatchBuilder;
     217: astore        8
     219: aload         8
     221: aload_0
     222: getfield      #27                 // Field fileUpdated:Lorg/jboss/as/patching/metadata/ContentModification;
     225: invokevirtual #36                 // Method org/jboss/as/patching/metadata/PatchBuilder.addContentModification:(Lorg/jboss/as/patching/metadata/ContentModification;)Ljava/lang/Object;
     228: pop
     229: aload_0
     230: aload         8
     232: invokevirtual #37                 // Method org/jboss/as/patching/metadata/PatchBuilder.build:()Lorg/jboss/as/patching/metadata/Patch;
     235: putfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
     238: aload         6
     240: aload_0
     241: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
     244: invokestatic  #39                 // Method org/jboss/as/patching/runner/TestUtils.createPatchXMLFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/Patch;)V
     247: aload_0
     248: aload         6
     250: aload_0
     251: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
     254: invokeinterface #40,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
     259: invokestatic  #41                 // Method org/jboss/as/patching/runner/TestUtils.createZippedPatchFile:(Ljava/io/File;Ljava/lang/String;)Ljava/io/File;
     262: putfield      #42                 // Field zippedPatch:Ljava/io/File;
     265: new           #43                 // class org/jboss/as/patching/installation/InstallationManagerImpl
     268: dup
     269: aload_1
     270: invokespecial #44                 // Method org/jboss/as/patching/installation/InstallationManagerImpl."<init>":(Lorg/jboss/as/patching/installation/InstalledIdentity;)V
     273: astore        9
     275: aload_0
     276: aload         9
     278: invokestatic  #45                 // Method org/jboss/as/patching/tool/PatchTool$Factory.create:(Lorg/jboss/as/patching/installation/InstallationManager;)Lorg/jboss/as/patching/tool/PatchTool;
     281: putfield      #46                 // Field runner:Lorg/jboss/as/patching/tool/PatchTool;
     284: return

  public void tearDown();
    Code:
       0: aload_0
       1: invokespecial #47                 // Method org/jboss/as/patching/runner/AbstractTaskTestCase.tearDown:()V
       4: aload_0
       5: aconst_null
       6: putfield      #46                 // Field runner:Lorg/jboss/as/patching/tool/PatchTool;
       9: aload_0
      10: aconst_null
      11: putfield      #42                 // Field zippedPatch:Ljava/io/File;
      14: aload_0
      15: aconst_null
      16: putfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
      19: aload_0
      20: aconst_null
      21: putfield      #27                 // Field fileUpdated:Lorg/jboss/as/patching/metadata/ContentModification;
      24: aload_0
      25: aconst_null
      26: putfield      #11                 // Field modifiedFile:Ljava/io/File;
      29: aload_0
      30: aconst_null
      31: putfield      #15                 // Field expectedModifiedHash:[B
      34: aload_0
      35: aconst_null
      36: putfield      #21                 // Field updatedHash:[B
      39: return

  public void testUpdateModifiedFileWithSTRICT() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #46                 // Field runner:Lorg/jboss/as/patching/tool/PatchTool;
       4: aload_0
       5: getfield      #42                 // Field zippedPatch:Ljava/io/File;
       8: getstatic     #48                 // Field org/jboss/as/patching/tool/ContentVerificationPolicy.STRICT:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
      11: invokeinterface #49,  3           // InterfaceMethod org/jboss/as/patching/tool/PatchTool.applyPatch:(Ljava/io/File;Lorg/jboss/as/patching/tool/ContentVerificationPolicy;)Lorg/jboss/as/patching/tool/PatchingResult;
      16: pop
      17: goto          66
      20: astore_1
      21: aload_1
      22: aload_0
      23: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
      26: aload_0
      27: getfield      #27                 // Field fileUpdated:Lorg/jboss/as/patching/metadata/ContentModification;
      30: invokevirtual #51                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
      33: aload_0
      34: getfield      #3                  // Field env:Lorg/jboss/as/patching/DirectoryStructure;
      37: invokestatic  #52                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasNotBeenApplied:(Lorg/jboss/as/patching/ContentConflictsException;Lorg/jboss/as/patching/metadata/Patch;Lorg/jboss/as/patching/metadata/ContentItem;Lorg/jboss/as/patching/DirectoryStructure;)V
      40: aload_0
      41: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      44: iconst_0
      45: anewarray     #6                  // class java/lang/String
      48: invokestatic  #53                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      51: pop
      52: aload_0
      53: getfield      #15                 // Field expectedModifiedHash:[B
      56: aload_0
      57: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      60: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      63: invokestatic  #54                 // Method org/junit/Assert.assertArrayEquals:([B[B)V
      66: return
    Exception table:
       from    to  target type
           0    17    20   Class org/jboss/as/patching/ContentConflictsException

  public void testUpdateModifiedFileWithOVERRIDE_ALL() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #46                 // Field runner:Lorg/jboss/as/patching/tool/PatchTool;
       4: aload_0
       5: getfield      #42                 // Field zippedPatch:Ljava/io/File;
       8: getstatic     #55                 // Field org/jboss/as/patching/tool/ContentVerificationPolicy.OVERRIDE_ALL:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
      11: invokeinterface #49,  3           // InterfaceMethod org/jboss/as/patching/tool/PatchTool.applyPatch:(Ljava/io/File;Lorg/jboss/as/patching/tool/ContentVerificationPolicy;)Lorg/jboss/as/patching/tool/PatchingResult;
      16: astore_1
      17: aload_1
      18: aload_0
      19: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
      22: invokestatic  #56                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasBeenApplied:(Lorg/jboss/as/patching/tool/PatchingResult;Lorg/jboss/as/patching/metadata/Patch;)V
      25: aload_0
      26: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      29: iconst_0
      30: anewarray     #6                  // class java/lang/String
      33: invokestatic  #53                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      36: pop
      37: aload_0
      38: getfield      #21                 // Field updatedHash:[B
      41: aload_0
      42: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      45: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      48: invokestatic  #54                 // Method org/junit/Assert.assertArrayEquals:([B[B)V
      51: aload_0
      52: getfield      #3                  // Field env:Lorg/jboss/as/patching/DirectoryStructure;
      55: invokevirtual #4                  // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
      58: aload_0
      59: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
      62: invokeinterface #40,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
      67: invokeinterface #57,  2           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getPatchHistoryDir:(Ljava/lang/String;)Ljava/io/File;
      72: iconst_3
      73: anewarray     #6                  // class java/lang/String
      76: dup
      77: iconst_0
      78: ldc           #19                 // String misc
      80: aastore
      81: dup
      82: iconst_1
      83: ldc           #7                  // String bin
      85: aastore
      86: dup
      87: iconst_2
      88: aload_0
      89: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      92: invokevirtual #58                 // Method java/io/File.getName:()Ljava/lang/String;
      95: aastore
      96: invokestatic  #53                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      99: astore_2
     100: aload_0
     101: getfield      #15                 // Field expectedModifiedHash:[B
     104: aload_2
     105: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
     108: invokestatic  #54                 // Method org/junit/Assert.assertArrayEquals:([B[B)V
     111: return

  public void testUpdateModifiedFileWithPRESERVE_ALL() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #46                 // Field runner:Lorg/jboss/as/patching/tool/PatchTool;
       4: aload_0
       5: getfield      #42                 // Field zippedPatch:Ljava/io/File;
       8: getstatic     #59                 // Field org/jboss/as/patching/tool/ContentVerificationPolicy.PRESERVE_ALL:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
      11: invokeinterface #49,  3           // InterfaceMethod org/jboss/as/patching/tool/PatchTool.applyPatch:(Ljava/io/File;Lorg/jboss/as/patching/tool/ContentVerificationPolicy;)Lorg/jboss/as/patching/tool/PatchingResult;
      16: pop
      17: goto          66
      20: astore_1
      21: aload_1
      22: aload_0
      23: getfield      #38                 // Field patch:Lorg/jboss/as/patching/metadata/Patch;
      26: aload_0
      27: getfield      #27                 // Field fileUpdated:Lorg/jboss/as/patching/metadata/ContentModification;
      30: invokevirtual #51                 // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
      33: aload_0
      34: getfield      #3                  // Field env:Lorg/jboss/as/patching/DirectoryStructure;
      37: invokestatic  #52                 // Method org/jboss/as/patching/runner/PatchingAssert.assertPatchHasNotBeenApplied:(Lorg/jboss/as/patching/ContentConflictsException;Lorg/jboss/as/patching/metadata/Patch;Lorg/jboss/as/patching/metadata/ContentItem;Lorg/jboss/as/patching/DirectoryStructure;)V
      40: aload_0
      41: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      44: iconst_0
      45: anewarray     #6                  // class java/lang/String
      48: invokestatic  #53                 // Method org/jboss/as/patching/runner/PatchingAssert.assertFileExists:(Ljava/io/File;[Ljava/lang/String;)Ljava/io/File;
      51: pop
      52: aload_0
      53: getfield      #15                 // Field expectedModifiedHash:[B
      56: aload_0
      57: getfield      #11                 // Field modifiedFile:Ljava/io/File;
      60: invokestatic  #14                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
      63: invokestatic  #54                 // Method org/junit/Assert.assertArrayEquals:([B[B)V
      66: return
    Exception table:
       from    to  target type
           0    17    20   Class org/jboss/as/patching/ContentConflictsException
}

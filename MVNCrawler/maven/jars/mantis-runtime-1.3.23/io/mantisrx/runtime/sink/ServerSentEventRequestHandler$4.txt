Compiled from "ServerSentEventRequestHandler.java"
class io.mantisrx.runtime.sink.ServerSentEventRequestHandler$4 implements rx.functions.Func1<java.util.List<java.lang.String>, rx.Observable<java.lang.Void>> {
  final mantis.io.reactivex.netty.protocol.http.server.HttpServerResponse val$response;

  final io.mantisrx.common.network.ServerSlotManager$SlotAssignmentManager val$slotMgr;

  final io.mantisrx.common.network.WritableEndpoint val$sn;

  final io.mantisrx.common.metrics.Counter val$flushCounter;

  final byte[] val$delimiter;

  final io.mantisrx.common.metrics.Counter val$msgProcessedCounter;

  final java.util.concurrent.atomic.AtomicLong val$lastResponseSent;

  final io.mantisrx.common.metrics.Counter val$droppedWrites;

  final io.mantisrx.runtime.sink.ServerSentEventRequestHandler this$0;

  io.mantisrx.runtime.sink.ServerSentEventRequestHandler$4(io.mantisrx.runtime.sink.ServerSentEventRequestHandler, mantis.io.reactivex.netty.protocol.http.server.HttpServerResponse, io.mantisrx.common.network.ServerSlotManager$SlotAssignmentManager, io.mantisrx.common.network.WritableEndpoint, io.mantisrx.common.metrics.Counter, byte[], io.mantisrx.common.metrics.Counter, java.util.concurrent.atomic.AtomicLong, io.mantisrx.common.metrics.Counter);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lio/mantisrx/runtime/sink/ServerSentEventRequestHandler;
       5: aload_0
       6: aload_2
       7: putfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
      10: aload_0
      11: aload_3
      12: putfield      #4                  // Field val$slotMgr:Lio/mantisrx/common/network/ServerSlotManager$SlotAssignmentManager;
      15: aload_0
      16: aload         4
      18: putfield      #5                  // Field val$sn:Lio/mantisrx/common/network/WritableEndpoint;
      21: aload_0
      22: aload         5
      24: putfield      #6                  // Field val$flushCounter:Lio/mantisrx/common/metrics/Counter;
      27: aload_0
      28: aload         6
      30: putfield      #7                  // Field val$delimiter:[B
      33: aload_0
      34: aload         7
      36: putfield      #8                  // Field val$msgProcessedCounter:Lio/mantisrx/common/metrics/Counter;
      39: aload_0
      40: aload         8
      42: putfield      #9                  // Field val$lastResponseSent:Ljava/util/concurrent/atomic/AtomicLong;
      45: aload_0
      46: aload         9
      48: putfield      #10                 // Field val$droppedWrites:Lio/mantisrx/common/metrics/Counter;
      51: aload_0
      52: invokespecial #11                 // Method java/lang/Object."<init>":()V
      55: return

  public rx.Observable<java.lang.Void> call(java.util.List<java.lang.String>);
    Code:
       0: aload_0
       1: getfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
       4: invokevirtual #12                 // Method mantis/io/reactivex/netty/protocol/http/server/HttpServerResponse.isCloseIssued:()Z
       7: ifne          25
      10: aload_0
      11: getfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
      14: invokevirtual #13                 // Method mantis/io/reactivex/netty/protocol/http/server/HttpServerResponse.getChannel:()Lio/netty/channel/Channel;
      17: invokeinterface #14,  1           // InterfaceMethod io/netty/channel/Channel.isActive:()Z
      22: ifne          46
      25: invokestatic  #15                 // Method io/mantisrx/runtime/sink/ServerSentEventRequestHandler.access$100:()Lorg/slf4j/Logger;
      28: ldc           #16                 // String Client closed detected, throwing closed channel exception
      30: invokeinterface #17,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      35: new           #18                 // class java/nio/channels/ClosedChannelException
      38: dup
      39: invokespecial #19                 // Method java/nio/channels/ClosedChannelException."<init>":()V
      42: invokestatic  #20                 // Method rx/Observable.error:(Ljava/lang/Throwable;)Lrx/Observable;
      45: areturn
      46: aload_1
      47: invokeinterface #21,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      52: aload_0
      53: getfield      #4                  // Field val$slotMgr:Lio/mantisrx/common/network/ServerSlotManager$SlotAssignmentManager;
      56: aload_0
      57: getfield      #5                  // Field val$sn:Lio/mantisrx/common/network/WritableEndpoint;
      60: invokedynamic #22,  0             // InvokeDynamic #0:test:(Lio/mantisrx/common/network/ServerSlotManager$SlotAssignmentManager;Lio/mantisrx/common/network/WritableEndpoint;)Ljava/util/function/Predicate;
      65: invokeinterface #23,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      70: invokestatic  #24                 // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
      73: invokeinterface #25,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      78: checkcast     #26                 // class java/util/List
      81: astore_2
      82: aload_0
      83: getfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
      86: invokevirtual #13                 // Method mantis/io/reactivex/netty/protocol/http/server/HttpServerResponse.getChannel:()Lio/netty/channel/Channel;
      89: invokeinterface #27,  1           // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
      94: ifeq          389
      97: aload_0
      98: getfield      #6                  // Field val$flushCounter:Lio/mantisrx/common/metrics/Counter;
     101: invokeinterface #28,  1           // InterfaceMethod io/mantisrx/common/metrics/Counter.increment:()V
     106: aload_0
     107: getfield      #2                  // Field this$0:Lio/mantisrx/runtime/sink/ServerSentEventRequestHandler;
     110: invokestatic  #29                 // Method io/mantisrx/runtime/sink/ServerSentEventRequestHandler.access$500:(Lio/mantisrx/runtime/sink/ServerSentEventRequestHandler;)Ljava/lang/String;
     113: getstatic     #30                 // Field io/mantisrx/runtime/sink/ServerSentEventRequestHandler.BINARY_FORMAT:Ljava/lang/Object;
     116: invokevirtual #31                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     119: ifeq          276
     122: iconst_1
     123: istore_3
     124: aload_0
     125: getfield      #7                  // Field val$delimiter:[B
     128: ifnonnull     139
     131: aload_2
     132: iload_3
     133: invokestatic  #32                 // Method io/mantisrx/common/compression/CompressionUtils.compressAndBase64Encode:(Ljava/util/List;Z)Ljava/lang/String;
     136: goto          148
     139: aload_2
     140: iload_3
     141: aload_0
     142: getfield      #7                  // Field val$delimiter:[B
     145: invokestatic  #33                 // Method io/mantisrx/common/compression/CompressionUtils.compressAndBase64Encode:(Ljava/util/List;Z[B)Ljava/lang/String;
     148: astore        4
     150: new           #34                 // class java/lang/StringBuilder
     153: dup
     154: iconst_3
     155: invokespecial #35                 // Method java/lang/StringBuilder."<init>":(I)V
     158: astore        5
     160: aload         5
     162: ldc           #36                 // String data:
     164: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     167: pop
     168: aload         5
     170: aload         4
     172: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     175: pop
     176: aload         5
     178: ldc           #38                 // String \n\n
     180: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     183: pop
     184: aload_0
     185: getfield      #8                  // Field val$msgProcessedCounter:Lio/mantisrx/common/metrics/Counter;
     188: aload_1
     189: invokeinterface #39,  1           // InterfaceMethod java/util/List.size:()I
     194: i2l
     195: invokeinterface #40,  3           // InterfaceMethod io/mantisrx/common/metrics/Counter.increment:(J)V
     200: aload_0
     201: getfield      #9                  // Field val$lastResponseSent:Ljava/util/concurrent/atomic/AtomicLong;
     204: invokestatic  #41                 // Method java/lang/System.currentTimeMillis:()J
     207: invokevirtual #42                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     210: aload_0
     211: getfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
     214: aload         5
     216: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     219: invokevirtual #44                 // Method mantis/io/reactivex/netty/protocol/http/server/HttpServerResponse.writeStringAndFlush:(Ljava/lang/String;)Lrx/Observable;
     222: areturn
     223: astore        4
     225: invokestatic  #15                 // Method io/mantisrx/runtime/sink/ServerSentEventRequestHandler.access$100:()Lorg/slf4j/Logger;
     228: new           #34                 // class java/lang/StringBuilder
     231: dup
     232: invokespecial #46                 // Method java/lang/StringBuilder."<init>":()V
     235: ldc           #47                 // String Could not compress data
     237: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     240: aload         4
     242: invokevirtual #48                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     245: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     248: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     251: invokeinterface #49,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     256: aload_0
     257: getfield      #10                 // Field val$droppedWrites:Lio/mantisrx/common/metrics/Counter;
     260: aload_1
     261: invokeinterface #39,  1           // InterfaceMethod java/util/List.size:()I
     266: i2l
     267: invokeinterface #40,  3           // InterfaceMethod io/mantisrx/common/metrics/Counter.increment:(J)V
     272: invokestatic  #50                 // Method rx/Observable.empty:()Lrx/Observable;
     275: areturn
     276: iconst_0
     277: istore_3
     278: new           #34                 // class java/lang/StringBuilder
     281: dup
     282: aload_1
     283: invokeinterface #39,  1           // InterfaceMethod java/util/List.size:()I
     288: iconst_3
     289: imul
     290: invokespecial #35                 // Method java/lang/StringBuilder."<init>":(I)V
     293: astore        4
     295: aload_2
     296: invokeinterface #51,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     301: astore        5
     303: aload         5
     305: invokeinterface #52,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     310: ifeq          355
     313: aload         5
     315: invokeinterface #53,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     320: checkcast     #54                 // class java/lang/String
     323: astore        6
     325: aload         4
     327: ldc           #36                 // String data:
     329: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     332: pop
     333: aload         4
     335: aload         6
     337: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     340: pop
     341: aload         4
     343: ldc           #38                 // String \n\n
     345: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     348: pop
     349: iinc          3, 1
     352: goto          303
     355: aload_0
     356: getfield      #8                  // Field val$msgProcessedCounter:Lio/mantisrx/common/metrics/Counter;
     359: iload_3
     360: i2l
     361: invokeinterface #40,  3           // InterfaceMethod io/mantisrx/common/metrics/Counter.increment:(J)V
     366: aload_0
     367: getfield      #9                  // Field val$lastResponseSent:Ljava/util/concurrent/atomic/AtomicLong;
     370: invokestatic  #41                 // Method java/lang/System.currentTimeMillis:()J
     373: invokevirtual #42                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     376: aload_0
     377: getfield      #3                  // Field val$response:Lmantis/io/reactivex/netty/protocol/http/server/HttpServerResponse;
     380: aload         4
     382: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     385: invokevirtual #44                 // Method mantis/io/reactivex/netty/protocol/http/server/HttpServerResponse.writeStringAndFlush:(Ljava/lang/String;)Lrx/Observable;
     388: areturn
     389: aload_0
     390: getfield      #10                 // Field val$droppedWrites:Lio/mantisrx/common/metrics/Counter;
     393: aload_2
     394: invokeinterface #39,  1           // InterfaceMethod java/util/List.size:()I
     399: i2l
     400: invokeinterface #40,  3           // InterfaceMethod io/mantisrx/common/metrics/Counter.increment:(J)V
     405: invokestatic  #50                 // Method rx/Observable.empty:()Lrx/Observable;
     408: areturn
    Exception table:
       from    to  target type
         124   222   223   Class java/lang/Exception

  public java.lang.Object call(java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #26                 // class java/util/List
       5: invokevirtual #55                 // Method call:(Ljava/util/List;)Lrx/Observable;
       8: areturn

  private static boolean lambda$call$0(io.mantisrx.common.network.ServerSlotManager$SlotAssignmentManager, io.mantisrx.common.network.WritableEndpoint, java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokevirtual #56                 // Method java/lang/String.getBytes:()[B
       6: invokevirtual #57                 // Method io/mantisrx/common/network/ServerSlotManager$SlotAssignmentManager.filter:(Lio/mantisrx/common/network/WritableEndpoint;[B)Z
       9: ireturn
}

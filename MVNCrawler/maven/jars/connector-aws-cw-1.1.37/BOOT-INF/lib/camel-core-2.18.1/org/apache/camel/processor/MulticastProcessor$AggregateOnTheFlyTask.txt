Compiled from "MulticastProcessor.java"
final class org.apache.camel.processor.MulticastProcessor$AggregateOnTheFlyTask implements java.lang.Runnable {
  private final org.apache.camel.util.concurrent.AtomicExchange result;

  private final org.apache.camel.Exchange original;

  private final java.util.concurrent.atomic.AtomicInteger total;

  private final java.util.concurrent.CompletionService<org.apache.camel.Exchange> completion;

  private final java.util.concurrent.atomic.AtomicBoolean running;

  private final java.util.concurrent.CountDownLatch aggregationOnTheFlyDone;

  private final java.util.concurrent.atomic.AtomicBoolean allTasksSubmitted;

  private final org.apache.camel.util.concurrent.AtomicException executionException;

  final org.apache.camel.processor.MulticastProcessor this$0;

  private org.apache.camel.processor.MulticastProcessor$AggregateOnTheFlyTask(org.apache.camel.util.concurrent.AtomicExchange, org.apache.camel.Exchange, java.util.concurrent.atomic.AtomicInteger, java.util.concurrent.CompletionService<org.apache.camel.Exchange>, java.util.concurrent.atomic.AtomicBoolean, java.util.concurrent.CountDownLatch, java.util.concurrent.atomic.AtomicBoolean, org.apache.camel.util.concurrent.AtomicException);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
       5: aload_0
       6: invokespecial #43                 // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #45                 // Field result:Lorg/apache/camel/util/concurrent/AtomicExchange;
      14: aload_0
      15: aload_3
      16: putfield      #47                 // Field original:Lorg/apache/camel/Exchange;
      19: aload_0
      20: aload         4
      22: putfield      #49                 // Field total:Ljava/util/concurrent/atomic/AtomicInteger;
      25: aload_0
      26: aload         5
      28: putfield      #51                 // Field completion:Ljava/util/concurrent/CompletionService;
      31: aload_0
      32: aload         6
      34: putfield      #53                 // Field running:Ljava/util/concurrent/atomic/AtomicBoolean;
      37: aload_0
      38: aload         7
      40: putfield      #55                 // Field aggregationOnTheFlyDone:Ljava/util/concurrent/CountDownLatch;
      43: aload_0
      44: aload         8
      46: putfield      #57                 // Field allTasksSubmitted:Ljava/util/concurrent/atomic/AtomicBoolean;
      49: aload_0
      50: aload         9
      52: putfield      #59                 // Field executionException:Lorg/apache/camel/util/concurrent/AtomicException;
      55: return

  public void run();
    Code:
       0: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
       3: ldc           #70                 // String Aggregate on the fly task started for exchangeId: {}
       5: aload_0
       6: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
       9: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      14: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      19: aload_0
      20: invokespecial #85                 // Method aggregateOnTheFly:()V
      23: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
      26: ldc           #87                 // String Signaling we are done aggregating on the fly for exchangeId: {}
      28: aload_0
      29: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
      32: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      37: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      42: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
      45: ldc           #92                 // String Aggregate on the fly task done for exchangeId: {}
      47: aload_0
      48: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
      51: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      56: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      61: aload_0
      62: getfield      #55                 // Field aggregationOnTheFlyDone:Ljava/util/concurrent/CountDownLatch;
      65: invokevirtual #97                 // Method java/util/concurrent/CountDownLatch.countDown:()V
      68: goto          200
      71: astore_1
      72: aload_1
      73: instanceof    #99                 // class java/lang/Exception
      76: ifeq          93
      79: aload_0
      80: getfield      #59                 // Field executionException:Lorg/apache/camel/util/concurrent/AtomicException;
      83: aload_1
      84: checkcast     #99                 // class java/lang/Exception
      87: invokevirtual #105                // Method org/apache/camel/util/concurrent/AtomicException.set:(Ljava/lang/Object;)V
      90: goto          104
      93: aload_0
      94: getfield      #59                 // Field executionException:Lorg/apache/camel/util/concurrent/AtomicException;
      97: aload_1
      98: invokestatic  #111                // Method org/apache/camel/util/ObjectHelper.wrapRuntimeCamelException:(Ljava/lang/Throwable;)Lorg/apache/camel/RuntimeCamelException;
     101: invokevirtual #105                // Method org/apache/camel/util/concurrent/AtomicException.set:(Ljava/lang/Object;)V
     104: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     107: ldc           #87                 // String Signaling we are done aggregating on the fly for exchangeId: {}
     109: aload_0
     110: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
     113: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
     118: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     123: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     126: ldc           #92                 // String Aggregate on the fly task done for exchangeId: {}
     128: aload_0
     129: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
     132: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
     137: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
     142: aload_0
     143: getfield      #55                 // Field aggregationOnTheFlyDone:Ljava/util/concurrent/CountDownLatch;
     146: invokevirtual #97                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     149: goto          200
     152: astore_2
     153: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     156: ldc           #87                 // String Signaling we are done aggregating on the fly for exchangeId: {}
     158: aload_0
     159: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
     162: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
     167: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     172: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     175: ldc           #92                 // String Aggregate on the fly task done for exchangeId: {}
     177: aload_0
     178: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
     181: invokeinterface #76,  1           // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
     186: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
     191: aload_0
     192: getfield      #55                 // Field aggregationOnTheFlyDone:Ljava/util/concurrent/CountDownLatch;
     195: invokevirtual #97                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     198: aload_2
     199: athrow
     200: return
    Exception table:
       from    to  target type
          19    23    71   Class java/lang/Throwable
          19    23   152   any
          71   104   152   any

  private void aggregateOnTheFly() throws java.lang.InterruptedException, java.util.concurrent.ExecutionException;
    Code:
       0: new           #119                // class java/util/concurrent/atomic/AtomicBoolean
       3: dup
       4: invokespecial #120                // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
       7: astore_1
       8: iconst_0
       9: istore_2
      10: new           #122                // class org/apache/camel/util/StopWatch
      13: dup
      14: invokespecial #123                // Method org/apache/camel/util/StopWatch."<init>":()V
      17: astore_3
      18: new           #125                // class java/util/concurrent/atomic/AtomicInteger
      21: dup
      22: invokespecial #126                // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      25: astore        4
      27: iconst_0
      28: istore        5
      30: iload         5
      32: ifne          431
      35: aload_0
      36: getfield      #57                 // Field allTasksSubmitted:Ljava/util/concurrent/atomic/AtomicBoolean;
      39: invokevirtual #130                // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      42: ifeq          75
      45: aload         4
      47: invokevirtual #134                // Method java/util/concurrent/atomic/AtomicInteger.intValue:()I
      50: aload_0
      51: getfield      #49                 // Field total:Ljava/util/concurrent/atomic/AtomicInteger;
      54: invokevirtual #136                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      57: if_icmplt     75
      60: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
      63: ldc           #138                // String Done aggregating {} exchanges on the fly.
      65: aload         4
      67: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      72: goto          431
      75: aload_1
      76: invokevirtual #130                // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      79: ifeq          110
      82: aload_0
      83: getfield      #51                 // Field completion:Ljava/util/concurrent/CompletionService;
      86: invokeinterface #144,  1          // InterfaceMethod java/util/concurrent/CompletionService.poll:()Ljava/util/concurrent/Future;
      91: astore        6
      93: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
      96: ldc           #146                // String Polled completion task #{} after timeout to grab already completed tasks: {}
      98: aload         4
     100: aload         6
     102: invokeinterface #149,  4          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     107: goto          217
     110: aload_0
     111: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     114: invokestatic  #153                // Method org/apache/camel/processor/MulticastProcessor.access$500:(Lorg/apache/camel/processor/MulticastProcessor;)J
     117: lconst_0
     118: lcmp
     119: ifle          182
     122: aload_0
     123: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     126: invokestatic  #153                // Method org/apache/camel/processor/MulticastProcessor.access$500:(Lorg/apache/camel/processor/MulticastProcessor;)J
     129: aload_3
     130: invokevirtual #157                // Method org/apache/camel/util/StopWatch.taken:()J
     133: lsub
     134: lstore        7
     136: lload         7
     138: lconst_0
     139: lcmp
     140: ifge          146
     143: lconst_0
     144: lstore        7
     146: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     149: ldc           #159                // String Polling completion task #{} using timeout {} millis.
     151: aload         4
     153: lload         7
     155: invokestatic  #165                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     158: invokeinterface #149,  4          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     163: aload_0
     164: getfield      #51                 // Field completion:Ljava/util/concurrent/CompletionService;
     167: lload         7
     169: getstatic     #171                // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     172: invokeinterface #174,  4          // InterfaceMethod java/util/concurrent/CompletionService.poll:(JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/Future;
     177: astore        6
     179: goto          217
     182: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     185: ldc           #176                // String Polling completion task #{}
     187: aload         4
     189: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
     194: aload_0
     195: getfield      #51                 // Field completion:Ljava/util/concurrent/CompletionService;
     198: lconst_1
     199: getstatic     #179                // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     202: invokeinterface #174,  4          // InterfaceMethod java/util/concurrent/CompletionService.poll:(JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/Future;
     207: astore        6
     209: aload         6
     211: ifnonnull     217
     214: goto          30
     217: aload         6
     219: ifnonnull     291
     222: new           #12                 // class org/apache/camel/processor/MulticastProcessor$ParallelAggregateTimeoutTask
     225: dup
     226: aload_0
     227: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     230: aload_0
     231: getfield      #47                 // Field original:Lorg/apache/camel/Exchange;
     234: aload_0
     235: getfield      #45                 // Field result:Lorg/apache/camel/util/concurrent/AtomicExchange;
     238: aload_0
     239: getfield      #51                 // Field completion:Ljava/util/concurrent/CompletionService;
     242: aload         4
     244: aload_0
     245: getfield      #49                 // Field total:Ljava/util/concurrent/atomic/AtomicInteger;
     248: aload_1
     249: aconst_null
     250: invokespecial #184                // Method org/apache/camel/processor/MulticastProcessor$ParallelAggregateTimeoutTask."<init>":(Lorg/apache/camel/processor/MulticastProcessor;Lorg/apache/camel/Exchange;Lorg/apache/camel/util/concurrent/AtomicExchange;Ljava/util/concurrent/CompletionService;Ljava/util/concurrent/atomic/AtomicInteger;Ljava/util/concurrent/atomic/AtomicInteger;Ljava/util/concurrent/atomic/AtomicBoolean;Lorg/apache/camel/processor/MulticastProcessor$1;)V
     253: astore        9
     255: aload_0
     256: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     259: invokestatic  #188                // Method org/apache/camel/processor/MulticastProcessor.access$700:(Lorg/apache/camel/processor/MulticastProcessor;)Z
     262: ifeq          283
     265: aload_0
     266: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     269: invokestatic  #192                // Method org/apache/camel/processor/MulticastProcessor.access$100:(Lorg/apache/camel/processor/MulticastProcessor;)Ljava/util/concurrent/ExecutorService;
     272: aload         9
     274: invokeinterface #198,  2          // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/lang/Runnable;)Ljava/util/concurrent/Future;
     279: pop
     280: goto          288
     283: aload         9
     285: invokevirtual #200                // Method org/apache/camel/processor/MulticastProcessor$ParallelAggregateTimeoutTask.run:()V
     288: goto          428
     291: aload         6
     293: invokeinterface #203,  1          // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     298: checkcast     #72                 // class org/apache/camel/Exchange
     301: astore        9
     303: aload_0
     304: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     307: aload         9
     309: invokevirtual #207                // Method org/apache/camel/processor/MulticastProcessor.getExchangeIndex:(Lorg/apache/camel/Exchange;)Ljava/lang/Integer;
     312: astore        10
     314: aload         9
     316: new           #209                // class java/lang/StringBuilder
     319: dup
     320: invokespecial #210                // Method java/lang/StringBuilder."<init>":()V
     323: ldc           #212                // String Parallel processing failed for number
     325: invokevirtual #216                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     328: aload         10
     330: invokevirtual #219                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     333: invokevirtual #222                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     336: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     339: invokestatic  #228                // Method org/apache/camel/processor/PipelineHelper.continueProcessing:(Lorg/apache/camel/Exchange;Ljava/lang/String;Lorg/slf4j/Logger;)Z
     342: istore        11
     344: aload_0
     345: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     348: invokestatic  #231                // Method org/apache/camel/processor/MulticastProcessor.access$400:(Lorg/apache/camel/processor/MulticastProcessor;)Z
     351: ifeq          373
     354: iload         11
     356: ifne          373
     359: aload_0
     360: getfield      #45                 // Field result:Lorg/apache/camel/util/concurrent/AtomicExchange;
     363: aload         9
     365: invokevirtual #234                // Method org/apache/camel/util/concurrent/AtomicExchange.set:(Ljava/lang/Object;)V
     368: iconst_1
     369: istore_2
     370: goto          431
     373: new           #15                 // class org/apache/camel/processor/MulticastProcessor$ParallelAggregateTask
     376: dup
     377: aload_0
     378: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     381: aload_0
     382: getfield      #45                 // Field result:Lorg/apache/camel/util/concurrent/AtomicExchange;
     385: aload         9
     387: aload         4
     389: aconst_null
     390: invokespecial #239                // Method org/apache/camel/processor/MulticastProcessor$ParallelAggregateTask."<init>":(Lorg/apache/camel/processor/MulticastProcessor;Lorg/apache/camel/util/concurrent/AtomicExchange;Lorg/apache/camel/Exchange;Ljava/util/concurrent/atomic/AtomicInteger;Lorg/apache/camel/processor/MulticastProcessor$1;)V
     393: astore        12
     395: aload_0
     396: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     399: invokestatic  #188                // Method org/apache/camel/processor/MulticastProcessor.access$700:(Lorg/apache/camel/processor/MulticastProcessor;)Z
     402: ifeq          423
     405: aload_0
     406: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     409: invokestatic  #192                // Method org/apache/camel/processor/MulticastProcessor.access$100:(Lorg/apache/camel/processor/MulticastProcessor;)Ljava/util/concurrent/ExecutorService;
     412: aload         12
     414: invokeinterface #198,  2          // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/lang/Runnable;)Ljava/util/concurrent/Future;
     419: pop
     420: goto          428
     423: aload         12
     425: invokevirtual #240                // Method org/apache/camel/processor/MulticastProcessor$ParallelAggregateTask.run:()V
     428: goto          30
     431: aload_1
     432: invokevirtual #130                // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
     435: ifne          442
     438: iload_2
     439: ifeq          491
     442: aload_1
     443: invokevirtual #130                // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
     446: ifeq          469
     449: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     452: ldc           #242                // String Cancelling tasks due timeout after {} millis.
     454: aload_0
     455: getfield      #40                 // Field this$0:Lorg/apache/camel/processor/MulticastProcessor;
     458: invokestatic  #153                // Method org/apache/camel/processor/MulticastProcessor.access$500:(Lorg/apache/camel/processor/MulticastProcessor;)J
     461: invokestatic  #165                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     464: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     469: iload_2
     470: ifeq          483
     473: invokestatic  #68                 // Method org/apache/camel/processor/MulticastProcessor.access$300:()Lorg/slf4j/Logger;
     476: ldc           #244                // String Cancelling tasks due stopOnException.
     478: invokeinterface #247,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     483: aload_0
     484: getfield      #53                 // Field running:Ljava/util/concurrent/atomic/AtomicBoolean;
     487: iconst_0
     488: invokevirtual #250                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
     491: return

  org.apache.camel.processor.MulticastProcessor$AggregateOnTheFlyTask(org.apache.camel.processor.MulticastProcessor, org.apache.camel.util.concurrent.AtomicExchange, org.apache.camel.Exchange, java.util.concurrent.atomic.AtomicInteger, java.util.concurrent.CompletionService, java.util.concurrent.atomic.AtomicBoolean, java.util.concurrent.CountDownLatch, java.util.concurrent.atomic.AtomicBoolean, org.apache.camel.util.concurrent.AtomicException, org.apache.camel.processor.MulticastProcessor$1);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: aload         5
       8: aload         6
      10: aload         7
      12: aload         8
      14: aload         9
      16: invokespecial #271                // Method "<init>":(Lorg/apache/camel/processor/MulticastProcessor;Lorg/apache/camel/util/concurrent/AtomicExchange;Lorg/apache/camel/Exchange;Ljava/util/concurrent/atomic/AtomicInteger;Ljava/util/concurrent/CompletionService;Ljava/util/concurrent/atomic/AtomicBoolean;Ljava/util/concurrent/CountDownLatch;Ljava/util/concurrent/atomic/AtomicBoolean;Lorg/apache/camel/util/concurrent/AtomicException;)V
      19: return
}

Compiled from "BatchProcessor.java"
class org.apache.camel.processor.BatchProcessor$BatchSender extends java.lang.Thread {
  private java.util.Queue<org.apache.camel.Exchange> queue;

  private java.util.concurrent.locks.Lock queueLock;

  private final java.util.concurrent.atomic.AtomicBoolean exchangeEnqueued;

  private final java.util.Queue<java.lang.String> completionPredicateMatched;

  private java.util.concurrent.locks.Condition exchangeEnqueuedCondition;

  final org.apache.camel.processor.BatchProcessor this$0;

  org.apache.camel.processor.BatchProcessor$BatchSender(org.apache.camel.processor.BatchProcessor);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
       5: aload_0
       6: aload_1
       7: invokestatic  #29                 // Method org/apache/camel/processor/BatchProcessor.access$000:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/CamelContext;
      10: invokeinterface #35,  1           // InterfaceMethod org/apache/camel/CamelContext.getExecutorServiceManager:()Lorg/apache/camel/spi/ExecutorServiceManager;
      15: ldc           #37                 // String Batch Sender
      17: invokeinterface #43,  2           // InterfaceMethod org/apache/camel/spi/ExecutorServiceManager.resolveThreadName:(Ljava/lang/String;)Ljava/lang/String;
      22: invokespecial #46                 // Method java/lang/Thread."<init>":(Ljava/lang/String;)V
      25: aload_0
      26: new           #48                 // class java/util/concurrent/locks/ReentrantLock
      29: dup
      30: invokespecial #51                 // Method java/util/concurrent/locks/ReentrantLock."<init>":()V
      33: putfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      36: aload_0
      37: new           #55                 // class java/util/concurrent/atomic/AtomicBoolean
      40: dup
      41: invokespecial #56                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
      44: putfield      #58                 // Field exchangeEnqueued:Ljava/util/concurrent/atomic/AtomicBoolean;
      47: aload_0
      48: new           #60                 // class java/util/concurrent/ConcurrentLinkedQueue
      51: dup
      52: invokespecial #61                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
      55: putfield      #63                 // Field completionPredicateMatched:Ljava/util/Queue;
      58: aload_0
      59: aload_0
      60: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      63: invokeinterface #69,  1           // InterfaceMethod java/util/concurrent/locks/Lock.newCondition:()Ljava/util/concurrent/locks/Condition;
      68: putfield      #71                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      71: aload_0
      72: new           #73                 // class java/util/LinkedList
      75: dup
      76: invokespecial #74                 // Method java/util/LinkedList."<init>":()V
      79: putfield      #76                 // Field queue:Ljava/util/Queue;
      82: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
       4: invokeinterface #86,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
       9: aload_0
      10: getfield      #58                 // Field exchangeEnqueued:Ljava/util/concurrent/atomic/AtomicBoolean;
      13: invokevirtual #90                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      16: ifne          59
      19: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      22: ldc           #96                 // String Waiting for new exchange to arrive or batchTimeout to occur after {} ms.
      24: aload_0
      25: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      28: invokestatic  #100                // Method org/apache/camel/processor/BatchProcessor.access$100:(Lorg/apache/camel/processor/BatchProcessor;)J
      31: invokestatic  #106                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      34: invokeinterface #112,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      39: aload_0
      40: getfield      #71                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      43: aload_0
      44: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      47: invokestatic  #100                // Method org/apache/camel/processor/BatchProcessor.access$100:(Lorg/apache/camel/processor/BatchProcessor;)J
      50: getstatic     #118                // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      53: invokeinterface #124,  4          // InterfaceMethod java/util/concurrent/locks/Condition.await:(JLjava/util/concurrent/TimeUnit;)Z
      58: pop
      59: aconst_null
      60: astore_1
      61: aload_0
      62: getfield      #63                 // Field completionPredicateMatched:Ljava/util/Queue;
      65: invokeinterface #129,  1          // InterfaceMethod java/util/Queue.isEmpty:()Z
      70: ifne          86
      73: aload_0
      74: getfield      #63                 // Field completionPredicateMatched:Ljava/util/Queue;
      77: invokeinterface #133,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      82: checkcast     #135                // class java/lang/String
      85: astore_1
      86: aload_1
      87: ifnonnull     100
      90: aload_0
      91: getfield      #58                 // Field exchangeEnqueued:Ljava/util/concurrent/atomic/AtomicBoolean;
      94: invokevirtual #90                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      97: ifne          149
     100: aload_1
     101: ifnull        117
     104: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     107: ldc           #137                // String Collecting exchanges to be aggregated triggered by completion predicate
     109: invokeinterface #139,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     114: goto          127
     117: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     120: ldc           #141                // String Collecting exchanges to be aggregated triggered by batch timeout
     122: invokeinterface #139,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     127: aload_0
     128: aload_0
     129: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     132: invokestatic  #145                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
     135: aload_0
     136: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     139: invokestatic  #149                // Method org/apache/camel/processor/BatchProcessor.access$400:(Lorg/apache/camel/processor/BatchProcessor;)I
     142: aload_1
     143: invokespecial #153                // Method drainQueueTo:(Ljava/util/Collection;ILjava/lang/String;)V
     146: goto          229
     149: aload_0
     150: getfield      #58                 // Field exchangeEnqueued:Ljava/util/concurrent/atomic/AtomicBoolean;
     153: iconst_0
     154: invokevirtual #157                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
     157: iconst_0
     158: istore_2
     159: aload_0
     160: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     163: aload_0
     164: getfield      #76                 // Field queue:Ljava/util/Queue;
     167: invokeinterface #161,  1          // InterfaceMethod java/util/Queue.size:()I
     172: invokestatic  #165                // Method org/apache/camel/processor/BatchProcessor.access$500:(Lorg/apache/camel/processor/BatchProcessor;I)Z
     175: ifeq          202
     178: iconst_1
     179: istore_2
     180: aload_0
     181: aload_0
     182: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     185: invokestatic  #145                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
     188: aload_0
     189: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     192: invokestatic  #149                // Method org/apache/camel/processor/BatchProcessor.access$400:(Lorg/apache/camel/processor/BatchProcessor;)I
     195: aload_1
     196: invokespecial #153                // Method drainQueueTo:(Ljava/util/Collection;ILjava/lang/String;)V
     199: goto          159
     202: iload_2
     203: ifeq          216
     206: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     209: ldc           #167                // String Collecting exchanges to be aggregated triggered by new exchanges received
     211: invokeinterface #139,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     216: aload_0
     217: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     220: invokestatic  #171                // Method org/apache/camel/processor/BatchProcessor.access$600:(Lorg/apache/camel/processor/BatchProcessor;)Z
     223: ifne          229
     226: goto          290
     229: aload_0
     230: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     233: invokeinterface #174,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     238: aload_0
     239: invokespecial #177                // Method sendExchanges:()V
     242: goto          259
     245: astore_2
     246: aload_0
     247: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     250: invokevirtual #181                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
     253: aload_2
     254: invokeinterface #187,  2          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/Throwable;)V
     259: aload_0
     260: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     263: invokeinterface #86,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
     268: goto          283
     271: astore_3
     272: aload_0
     273: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     276: invokeinterface #86,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
     281: aload_3
     282: athrow
     283: goto          290
     286: astore_1
     287: goto          300
     290: aload_0
     291: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     294: invokevirtual #190                // Method org/apache/camel/processor/BatchProcessor.isRunAllowed:()Z
     297: ifne          9
     300: aload_0
     301: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     304: invokeinterface #174,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     309: goto          326
     312: astore        4
     314: aload_0
     315: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     318: invokeinterface #174,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     323: aload         4
     325: athrow
     326: return
    Exception table:
       from    to  target type
         238   242   245   Class java/lang/Throwable
         238   259   271   any
           9   226   286   Class java/lang/InterruptedException
         229   283   286   Class java/lang/InterruptedException
           9   300   312   any
         312   314   312   any

  private void drainQueueTo(java.util.Collection<org.apache.camel.Exchange>, int, java.lang.String);
    Code:
       0: iconst_0
       1: istore        4
       3: iload         4
       5: iload_2
       6: if_icmpge     97
       9: aload_0
      10: getfield      #76                 // Field queue:Ljava/util/Queue;
      13: invokeinterface #133,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      18: checkcast     #202                // class org/apache/camel/Exchange
      21: astore        5
      23: aload         5
      25: ifnull        97
      28: aload_1
      29: aload         5
      31: invokeinterface #208,  2          // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      36: pop
      37: goto          70
      40: astore        6
      42: aload         5
      44: aload         6
      46: invokeinterface #211,  2          // InterfaceMethod org/apache/camel/Exchange.setException:(Ljava/lang/Throwable;)V
      51: goto          70
      54: astore        6
      56: aload_0
      57: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      60: invokevirtual #181                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
      63: aload         6
      65: invokeinterface #187,  2          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/Throwable;)V
      70: aload_3
      71: ifnull        91
      74: aload_3
      75: aload         5
      77: invokeinterface #215,  1          // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      82: invokevirtual #218                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      85: ifeq          91
      88: goto          97
      91: iinc          4, 1
      94: goto          3
      97: return
    Exception table:
       from    to  target type
          28    37    40   Class java/lang/Exception
          28    37    54   Class java/lang/Throwable

  public void cancel();
    Code:
       0: aload_0
       1: invokevirtual #231                // Method interrupt:()V
       4: return

  public void enqueueExchange(org.apache.camel.Exchange);
    Code:
       0: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
       3: ldc           #235                // String Received exchange to be batched: {}
       5: aload_1
       6: invokeinterface #238,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      11: aload_0
      12: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      15: invokeinterface #86,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      20: aload_0
      21: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      24: invokestatic  #242                // Method org/apache/camel/processor/BatchProcessor.access$700:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/Predicate;
      27: ifnull        75
      30: aload_0
      31: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      34: invokestatic  #242                // Method org/apache/camel/processor/BatchProcessor.access$700:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/Predicate;
      37: aload_1
      38: invokeinterface #248,  2          // InterfaceMethod org/apache/camel/Predicate.matches:(Lorg/apache/camel/Exchange;)Z
      43: istore_2
      44: iload_2
      45: ifeq          75
      48: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      51: ldc           #250                // String Exchange matched completion predicate: {}
      53: aload_1
      54: invokeinterface #112,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      59: aload_0
      60: getfield      #63                 // Field completionPredicateMatched:Ljava/util/Queue;
      63: aload_1
      64: invokeinterface #215,  1          // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      69: invokeinterface #251,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      74: pop
      75: aload_0
      76: getfield      #76                 // Field queue:Ljava/util/Queue;
      79: aload_1
      80: invokeinterface #251,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      85: pop
      86: aload_0
      87: getfield      #58                 // Field exchangeEnqueued:Ljava/util/concurrent/atomic/AtomicBoolean;
      90: iconst_1
      91: invokevirtual #157                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
      94: aload_0
      95: getfield      #71                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      98: invokeinterface #254,  1          // InterfaceMethod java/util/concurrent/locks/Condition.signal:()V
     103: aload_0
     104: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     107: invokeinterface #174,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     112: goto          127
     115: astore_3
     116: aload_0
     117: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     120: invokeinterface #174,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     125: aload_3
     126: athrow
     127: return
    Exception table:
       from    to  target type
          20   103   115   any

  private void sendExchanges() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
       4: invokestatic  #145                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
       7: invokeinterface #259,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      12: astore_1
      13: aload_1
      14: invokeinterface #264,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      19: ifeq          98
      22: aload_1
      23: invokeinterface #267,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      28: checkcast     #202                // class org/apache/camel/Exchange
      31: astore_2
      32: aload_1
      33: invokeinterface #270,  1          // InterfaceMethod java/util/Iterator.remove:()V
      38: invokestatic  #94                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      41: ldc_w         #272                // String Sending aggregated exchange: {}
      44: aload_2
      45: invokeinterface #238,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      50: aload_0
      51: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      54: aload_2
      55: invokevirtual #275                // Method org/apache/camel/processor/BatchProcessor.processExchange:(Lorg/apache/camel/Exchange;)V
      58: goto          95
      61: astore_3
      62: aload_0
      63: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      66: invokevirtual #181                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
      69: new           #277                // class java/lang/StringBuilder
      72: dup
      73: invokespecial #278                // Method java/lang/StringBuilder."<init>":()V
      76: ldc_w         #280                // String Error processing aggregated exchange:
      79: invokevirtual #284                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      82: aload_2
      83: invokevirtual #287                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      86: invokevirtual #290                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      89: aload_3
      90: invokeinterface #293,  3          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/String;Ljava/lang/Throwable;)V
      95: goto          13
      98: return
    Exception table:
       from    to  target type
          38    58    61   Class java/lang/Throwable
}

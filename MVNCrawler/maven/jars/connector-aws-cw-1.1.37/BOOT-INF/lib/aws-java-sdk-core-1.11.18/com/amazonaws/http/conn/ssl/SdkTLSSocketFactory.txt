Compiled from "SdkTLSSocketFactory.java"
public class com.amazonaws.http.conn.ssl.SdkTLSSocketFactory extends org.apache.http.conn.ssl.SSLConnectionSocketFactory {
  private static final org.apache.commons.logging.Log LOG;

  private final javax.net.ssl.SSLContext sslContext;

  private final com.amazonaws.http.conn.ssl.MasterSecretValidators$MasterSecretValidator masterSecretValidator;

  private final com.amazonaws.http.conn.ssl.ShouldClearSslSessionPredicate shouldClearSslSessionsPredicate;

  public com.amazonaws.http.conn.ssl.SdkTLSSocketFactory(javax.net.ssl.SSLContext, javax.net.ssl.HostnameVerifier);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #1                  // Method org/apache/http/conn/ssl/SSLConnectionSocketFactory."<init>":(Ljavax/net/ssl/SSLContext;Ljavax/net/ssl/HostnameVerifier;)V
       6: aload_1
       7: ifnonnull     20
      10: new           #2                  // class java/lang/IllegalArgumentException
      13: dup
      14: ldc           #3                  // String sslContext must not be null. Use SSLContext.getDefault() if you are unsure.
      16: invokespecial #4                  // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: aload_1
      22: putfield      #5                  // Field sslContext:Ljavax/net/ssl/SSLContext;
      25: aload_0
      26: invokestatic  #6                  // Method com/amazonaws/http/conn/ssl/MasterSecretValidators.getMasterSecretValidator:()Lcom/amazonaws/http/conn/ssl/MasterSecretValidators$MasterSecretValidator;
      29: putfield      #7                  // Field masterSecretValidator:Lcom/amazonaws/http/conn/ssl/MasterSecretValidators$MasterSecretValidator;
      32: aload_0
      33: new           #8                  // class com/amazonaws/http/conn/ssl/ShouldClearSslSessionPredicate
      36: dup
      37: invokestatic  #9                  // Method com/amazonaws/util/JavaVersionParser.getCurrentJavaVersion:()Lcom/amazonaws/util/JavaVersionParser$JavaVersion;
      40: invokespecial #10                 // Method com/amazonaws/http/conn/ssl/ShouldClearSslSessionPredicate."<init>":(Lcom/amazonaws/util/JavaVersionParser$JavaVersion;)V
      43: putfield      #11                 // Field shouldClearSslSessionsPredicate:Lcom/amazonaws/http/conn/ssl/ShouldClearSslSessionPredicate;
      46: return

  protected final void prepareSocket(javax.net.ssl.SSLSocket);
    Code:
       0: aload_1
       1: invokevirtual #12                 // Method javax/net/ssl/SSLSocket.getSupportedProtocols:()[Ljava/lang/String;
       4: astore_2
       5: aload_1
       6: invokevirtual #13                 // Method javax/net/ssl/SSLSocket.getEnabledProtocols:()[Ljava/lang/String;
       9: astore_3
      10: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
      13: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      18: ifeq          63
      21: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
      24: new           #16                 // class java/lang/StringBuilder
      27: dup
      28: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      31: ldc           #18                 // String socket.getSupportedProtocols():
      33: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      36: aload_2
      37: invokestatic  #20                 // Method java/util/Arrays.toString:([Ljava/lang/Object;)Ljava/lang/String;
      40: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      43: ldc           #21                 // String , socket.getEnabledProtocols():
      45: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      48: aload_3
      49: invokestatic  #20                 // Method java/util/Arrays.toString:([Ljava/lang/Object;)Ljava/lang/String;
      52: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      55: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      58: invokeinterface #23,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      63: new           #24                 // class java/util/ArrayList
      66: dup
      67: invokespecial #25                 // Method java/util/ArrayList."<init>":()V
      70: astore        4
      72: aload_2
      73: ifnull        128
      76: invokestatic  #26                 // Method com/amazonaws/http/conn/ssl/TLSProtocol.values:()[Lcom/amazonaws/http/conn/ssl/TLSProtocol;
      79: astore        5
      81: iconst_0
      82: istore        6
      84: iload         6
      86: aload         5
      88: arraylength
      89: if_icmpge     128
      92: aload         5
      94: iload         6
      96: aaload
      97: invokevirtual #27                 // Method com/amazonaws/http/conn/ssl/TLSProtocol.getProtocolName:()Ljava/lang/String;
     100: astore        7
     102: aload_0
     103: aload         7
     105: aload_2
     106: invokespecial #28                 // Method existsIn:(Ljava/lang/String;[Ljava/lang/String;)Z
     109: ifeq          122
     112: aload         4
     114: aload         7
     116: invokeinterface #29,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     121: pop
     122: iinc          6, 1
     125: goto          84
     128: aload_3
     129: ifnull        185
     132: aload_3
     133: astore        5
     135: aload         5
     137: arraylength
     138: istore        6
     140: iconst_0
     141: istore        7
     143: iload         7
     145: iload         6
     147: if_icmpge     185
     150: aload         5
     152: iload         7
     154: aaload
     155: astore        8
     157: aload         4
     159: aload         8
     161: invokeinterface #30,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
     166: ifne          179
     169: aload         4
     171: aload         8
     173: invokeinterface #29,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     178: pop
     179: iinc          7, 1
     182: goto          143
     185: aload         4
     187: invokeinterface #31,  1           // InterfaceMethod java/util/List.size:()I
     192: ifle          265
     195: aload         4
     197: aload         4
     199: invokeinterface #31,  1           // InterfaceMethod java/util/List.size:()I
     204: anewarray     #32                 // class java/lang/String
     207: invokeinterface #33,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     212: checkcast     #34                 // class "[Ljava/lang/String;"
     215: astore        5
     217: aload_1
     218: aload         5
     220: invokevirtual #35                 // Method javax/net/ssl/SSLSocket.setEnabledProtocols:([Ljava/lang/String;)V
     223: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     226: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     231: ifeq          265
     234: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     237: new           #16                 // class java/lang/StringBuilder
     240: dup
     241: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     244: ldc           #36                 // String TLS protocol enabled for SSL handshake:
     246: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     249: aload         5
     251: invokestatic  #20                 // Method java/util/Arrays.toString:([Ljava/lang/Object;)Ljava/lang/String;
     254: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     257: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     260: invokeinterface #23,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     265: return

  private boolean existsIn(java.lang.String, java.lang.String[]);
    Code:
       0: aload_2
       1: astore_3
       2: aload_3
       3: arraylength
       4: istore        4
       6: iconst_0
       7: istore        5
       9: iload         5
      11: iload         4
      13: if_icmpge     39
      16: aload_3
      17: iload         5
      19: aaload
      20: astore        6
      22: aload_1
      23: aload         6
      25: invokevirtual #37                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      28: ifeq          33
      31: iconst_1
      32: ireturn
      33: iinc          5, 1
      36: goto          9
      39: iconst_0
      40: ireturn

  public java.net.Socket connectSocket(int, java.net.Socket, org.apache.http.HttpHost, java.net.InetSocketAddress, java.net.InetSocketAddress, org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
       3: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
       8: ifeq          55
      11: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
      14: new           #16                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #38                 // String connecting to
      23: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload         4
      28: invokevirtual #39                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
      31: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      34: ldc           #41                 // String :
      36: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: aload         4
      41: invokevirtual #42                 // Method java/net/InetSocketAddress.getPort:()I
      44: invokevirtual #43                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      47: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      50: invokeinterface #23,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      55: aload_0
      56: iload_1
      57: aload_2
      58: aload_3
      59: aload         4
      61: aload         5
      63: aload         6
      65: invokespecial #44                 // Method org/apache/http/conn/ssl/SSLConnectionSocketFactory.connectSocket:(ILjava/net/Socket;Lorg/apache/http/HttpHost;Ljava/net/InetSocketAddress;Ljava/net/InetSocketAddress;Lorg/apache/http/protocol/HttpContext;)Ljava/net/Socket;
      68: astore        7
      70: aload_0
      71: getfield      #7                  // Field masterSecretValidator:Lcom/amazonaws/http/conn/ssl/MasterSecretValidators$MasterSecretValidator;
      74: aload         7
      76: invokeinterface #45,  2           // InterfaceMethod com/amazonaws/http/conn/ssl/MasterSecretValidators$MasterSecretValidator.isMasterSecretValid:(Ljava/net/Socket;)Z
      81: ifne          101
      84: aload_0
      85: new           #46                 // class java/lang/IllegalStateException
      88: dup
      89: ldc           #47                 // String Invalid SSL master secret
      91: invokespecial #48                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      94: invokespecial #49                 // Method log:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      97: checkcast     #46                 // class java/lang/IllegalStateException
     100: athrow
     101: goto          157
     104: astore        8
     106: aload_0
     107: getfield      #11                 // Field shouldClearSslSessionsPredicate:Lcom/amazonaws/http/conn/ssl/ShouldClearSslSessionPredicate;
     110: aload         8
     112: invokevirtual #51                 // Method com/amazonaws/http/conn/ssl/ShouldClearSslSessionPredicate.test:(Ljavax/net/ssl/SSLException;)Z
     115: ifeq          154
     118: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     121: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     126: ifeq          141
     129: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     132: ldc           #52                 // String connection failed due to SSL error, clearing TLS session cache
     134: aload         8
     136: invokeinterface #53,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     141: aload_0
     142: aload_0
     143: getfield      #5                  // Field sslContext:Ljavax/net/ssl/SSLContext;
     146: invokevirtual #54                 // Method javax/net/ssl/SSLContext.getClientSessionContext:()Ljavax/net/ssl/SSLSessionContext;
     149: aload         4
     151: invokespecial #55                 // Method clearSessionCache:(Ljavax/net/ssl/SSLSessionContext;Ljava/net/InetSocketAddress;)V
     154: aload         8
     156: athrow
     157: aload         7
     159: instanceof    #56                 // class javax/net/ssl/SSLSocket
     162: ifeq          200
     165: new           #57                 // class com/amazonaws/internal/SdkSSLSocket
     168: dup
     169: aload         7
     171: checkcast     #56                 // class javax/net/ssl/SSLSocket
     174: invokespecial #58                 // Method com/amazonaws/internal/SdkSSLSocket."<init>":(Ljavax/net/ssl/SSLSocket;)V
     177: astore        8
     179: invokestatic  #59                 // Method com/amazonaws/metrics/AwsSdkMetrics.isHttpSocketReadMetricEnabled:()Z
     182: ifeq          197
     185: new           #60                 // class com/amazonaws/internal/SdkSSLMetricsSocket
     188: dup
     189: aload         8
     191: invokespecial #61                 // Method com/amazonaws/internal/SdkSSLMetricsSocket."<init>":(Ljavax/net/ssl/SSLSocket;)V
     194: goto          199
     197: aload         8
     199: areturn
     200: new           #62                 // class com/amazonaws/internal/SdkSocket
     203: dup
     204: aload         7
     206: invokespecial #63                 // Method com/amazonaws/internal/SdkSocket."<init>":(Ljava/net/Socket;)V
     209: astore        8
     211: invokestatic  #59                 // Method com/amazonaws/metrics/AwsSdkMetrics.isHttpSocketReadMetricEnabled:()Z
     214: ifeq          229
     217: new           #64                 // class com/amazonaws/internal/SdkMetricsSocket
     220: dup
     221: aload         8
     223: invokespecial #65                 // Method com/amazonaws/internal/SdkMetricsSocket."<init>":(Ljava/net/Socket;)V
     226: goto          231
     229: aload         8
     231: areturn
    Exception table:
       from    to  target type
          55   101   104   Class javax/net/ssl/SSLException

  private void clearSessionCache(javax.net.ssl.SSLSessionContext, java.net.InetSocketAddress);
    Code:
       0: aload_2
       1: invokevirtual #66                 // Method java/net/InetSocketAddress.getHostName:()Ljava/lang/String;
       4: astore_3
       5: aload_2
       6: invokevirtual #42                 // Method java/net/InetSocketAddress.getPort:()I
       9: istore        4
      11: aload_1
      12: invokeinterface #67,  1           // InterfaceMethod javax/net/ssl/SSLSessionContext.getIds:()Ljava/util/Enumeration;
      17: astore        5
      19: aload         5
      21: ifnonnull     25
      24: return
      25: aload         5
      27: invokeinterface #68,  1           // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
      32: ifeq          147
      35: aload         5
      37: invokeinterface #69,  1           // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
      42: checkcast     #70                 // class "[B"
      45: astore        6
      47: aload_1
      48: aload         6
      50: invokeinterface #71,  2           // InterfaceMethod javax/net/ssl/SSLSessionContext.getSession:([B)Ljavax/net/ssl/SSLSession;
      55: astore        7
      57: aload         7
      59: ifnull        144
      62: aload         7
      64: invokeinterface #72,  1           // InterfaceMethod javax/net/ssl/SSLSession.getPeerHost:()Ljava/lang/String;
      69: ifnull        144
      72: aload         7
      74: invokeinterface #72,  1           // InterfaceMethod javax/net/ssl/SSLSession.getPeerHost:()Ljava/lang/String;
      79: aload_3
      80: invokevirtual #73                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      83: ifeq          144
      86: aload         7
      88: invokeinterface #74,  1           // InterfaceMethod javax/net/ssl/SSLSession.getPeerPort:()I
      93: iload         4
      95: if_icmpne     144
      98: aload         7
     100: invokeinterface #75,  1           // InterfaceMethod javax/net/ssl/SSLSession.invalidate:()V
     105: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     108: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     113: ifeq          144
     116: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
     119: new           #16                 // class java/lang/StringBuilder
     122: dup
     123: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     126: ldc           #76                 // String Invalidated session
     128: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     131: aload         7
     133: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     136: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     139: invokeinterface #23,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     144: goto          25
     147: return

  private <T extends java.lang.Throwable> T log(T);
    Code:
       0: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
       3: invokeinterface #15,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
       8: ifeq          22
      11: getstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
      14: ldc           #77                 // String
      16: aload_1
      17: invokeinterface #53,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      22: aload_1
      23: areturn

  static {};
    Code:
       0: ldc           #78                 // class com/amazonaws/http/conn/ssl/SdkTLSSocketFactory
       2: invokestatic  #79                 // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
       5: putstatic     #14                 // Field LOG:Lorg/apache/commons/logging/Log;
       8: return
}

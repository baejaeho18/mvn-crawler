Compiled from "PollingFileSystemWatcher.java"
class org.xnio.PollingFileSystemWatcher implements org.xnio.FileSystemWatcher,java.lang.Runnable {
  private static final java.util.concurrent.atomic.AtomicInteger threadIdCounter;

  public static final java.lang.String THREAD_NAME;

  private final java.util.Map<java.io.File, org.xnio.PollingFileSystemWatcher$PollHolder> files;

  private final java.lang.Thread watchThread;

  private final int pollInterval;

  private volatile boolean stopped;

  org.xnio.PollingFileSystemWatcher(java.lang.String, int, boolean);
    Code:
       0: aload_0
       1: invokespecial #44                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #46                 // class java/util/HashMap
       8: dup
       9: invokespecial #47                 // Method java/util/HashMap."<init>":()V
      12: invokestatic  #53                 // Method java/util/Collections.synchronizedMap:(Ljava/util/Map;)Ljava/util/Map;
      15: putfield      #55                 // Field files:Ljava/util/Map;
      18: aload_0
      19: iconst_0
      20: putfield      #57                 // Field stopped:Z
      23: aload_0
      24: new           #59                 // class java/lang/Thread
      27: dup
      28: aload_0
      29: new           #61                 // class java/lang/StringBuilder
      32: dup
      33: invokespecial #62                 // Method java/lang/StringBuilder."<init>":()V
      36: ldc           #64                 // String xnio-polling-file-watcher[
      38: invokevirtual #68                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      41: aload_1
      42: invokevirtual #68                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      45: ldc           #70                 // String ]-
      47: invokevirtual #68                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      50: getstatic     #72                 // Field threadIdCounter:Ljava/util/concurrent/atomic/AtomicInteger;
      53: invokevirtual #75                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      56: invokevirtual #79                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      59: invokespecial #82                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;Ljava/lang/String;)V
      62: putfield      #84                 // Field watchThread:Ljava/lang/Thread;
      65: aload_0
      66: getfield      #84                 // Field watchThread:Ljava/lang/Thread;
      69: iload_3
      70: invokevirtual #88                 // Method java/lang/Thread.setDaemon:(Z)V
      73: aload_0
      74: getfield      #84                 // Field watchThread:Ljava/lang/Thread;
      77: invokevirtual #91                 // Method java/lang/Thread.start:()V
      80: aload_0
      81: iload_2
      82: putfield      #93                 // Field pollInterval:I
      85: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #57                 // Field stopped:Z
       4: ifne          26
       7: aload_0
       8: invokespecial #103                // Method doNotify:()V
      11: aload_0
      12: getfield      #93                 // Field pollInterval:I
      15: i2l
      16: invokestatic  #107                // Method java/lang/Thread.sleep:(J)V
      19: goto          0
      22: astore_1
      23: goto          0
      26: return
    Exception table:
       from    to  target type
           7    19    22   Class java/lang/InterruptedException

  private void doNotify();
    Code:
       0: aload_0
       1: getfield      #55                 // Field files:Ljava/util/Map;
       4: invokeinterface #113,  1          // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
       9: invokeinterface #119,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      14: astore_1
      15: aload_1
      16: invokeinterface #125,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          143
      24: aload_1
      25: invokeinterface #129,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #16                 // class java/util/Map$Entry
      33: astore_2
      34: aload_2
      35: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      40: checkcast     #134                // class java/io/File
      43: invokestatic  #138                // Method doScan:(Ljava/io/File;)Ljava/util/Map;
      46: astore_3
      47: aload_0
      48: aload_3
      49: aload_2
      50: invokeinterface #141,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      55: checkcast     #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      58: getfield      #144                // Field org/xnio/PollingFileSystemWatcher$PollHolder.currentFileState:Ljava/util/Map;
      61: invokespecial #148                // Method doDiff:(Ljava/util/Map;Ljava/util/Map;)Ljava/util/List;
      64: astore        4
      66: aload         4
      68: invokeinterface #153,  1          // InterfaceMethod java/util/List.isEmpty:()Z
      73: ifne          140
      76: aload_2
      77: invokeinterface #141,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      82: checkcast     #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      85: aload_3
      86: putfield      #144                // Field org/xnio/PollingFileSystemWatcher$PollHolder.currentFileState:Ljava/util/Map;
      89: aload_2
      90: invokeinterface #141,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      95: checkcast     #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      98: getfield      #157                // Field org/xnio/PollingFileSystemWatcher$PollHolder.callbacks:Ljava/util/List;
     101: invokeinterface #158,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     106: astore        5
     108: aload         5
     110: invokeinterface #125,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     115: ifeq          140
     118: aload         5
     120: invokeinterface #129,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     125: checkcast     #160                // class org/xnio/FileChangeCallback
     128: astore        6
     130: aload         6
     132: aload         4
     134: invokestatic  #164                // Method invokeCallback:(Lorg/xnio/FileChangeCallback;Ljava/util/List;)V
     137: goto          108
     140: goto          15
     143: return

  private java.util.List<org.xnio.FileChangeEvent> doDiff(java.util.Map<java.io.File, java.lang.Long>, java.util.Map<java.io.File, java.lang.Long>);
    Code:
       0: new           #177                // class java/util/ArrayList
       3: dup
       4: invokespecial #178                // Method java/util/ArrayList."<init>":()V
       7: astore_3
       8: new           #46                 // class java/util/HashMap
      11: dup
      12: aload_2
      13: invokespecial #181                // Method java/util/HashMap."<init>":(Ljava/util/Map;)V
      16: astore        4
      18: aload_1
      19: invokeinterface #113,  1          // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      24: invokeinterface #119,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      29: astore        5
      31: aload         5
      33: invokeinterface #125,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      38: ifeq          168
      41: aload         5
      43: invokeinterface #129,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      48: checkcast     #16                 // class java/util/Map$Entry
      51: astore        6
      53: aload         4
      55: aload         6
      57: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      62: invokeinterface #185,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      67: checkcast     #187                // class java/lang/Long
      70: astore        7
      72: aload         7
      74: ifnonnull     107
      77: aload_3
      78: new           #23                 // class org/xnio/FileChangeEvent
      81: dup
      82: aload         6
      84: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      89: checkcast     #134                // class java/io/File
      92: getstatic     #191                // Field org/xnio/FileChangeEvent$Type.ADDED:Lorg/xnio/FileChangeEvent$Type;
      95: invokespecial #194                // Method org/xnio/FileChangeEvent."<init>":(Ljava/io/File;Lorg/xnio/FileChangeEvent$Type;)V
      98: invokeinterface #198,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     103: pop
     104: goto          165
     107: aload         7
     109: aload         6
     111: invokeinterface #141,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     116: invokevirtual #201                // Method java/lang/Long.equals:(Ljava/lang/Object;)Z
     119: ifne          165
     122: aload         6
     124: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     129: checkcast     #134                // class java/io/File
     132: invokevirtual #204                // Method java/io/File.isDirectory:()Z
     135: ifne          165
     138: aload_3
     139: new           #23                 // class org/xnio/FileChangeEvent
     142: dup
     143: aload         6
     145: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     150: checkcast     #134                // class java/io/File
     153: getstatic     #207                // Field org/xnio/FileChangeEvent$Type.MODIFIED:Lorg/xnio/FileChangeEvent$Type;
     156: invokespecial #194                // Method org/xnio/FileChangeEvent."<init>":(Ljava/io/File;Lorg/xnio/FileChangeEvent$Type;)V
     159: invokeinterface #198,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     164: pop
     165: goto          31
     168: aload         4
     170: invokeinterface #113,  1          // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
     175: invokeinterface #119,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     180: astore        5
     182: aload         5
     184: invokeinterface #125,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     189: ifeq          234
     192: aload         5
     194: invokeinterface #129,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     199: checkcast     #16                 // class java/util/Map$Entry
     202: astore        6
     204: aload_3
     205: new           #23                 // class org/xnio/FileChangeEvent
     208: dup
     209: aload         6
     211: invokeinterface #132,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     216: checkcast     #134                // class java/io/File
     219: getstatic     #210                // Field org/xnio/FileChangeEvent$Type.REMOVED:Lorg/xnio/FileChangeEvent$Type;
     222: invokespecial #194                // Method org/xnio/FileChangeEvent."<init>":(Ljava/io/File;Lorg/xnio/FileChangeEvent$Type;)V
     225: invokeinterface #198,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     230: pop
     231: goto          182
     234: aload_3
     235: areturn

  public synchronized void watchPath(java.io.File, org.xnio.FileChangeCallback);
    Code:
       0: aload_0
       1: getfield      #55                 // Field files:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #222,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      13: astore_3
      14: aload_3
      15: ifnonnull     44
      18: aload_0
      19: getfield      #55                 // Field files:Ljava/util/Map;
      22: aload_1
      23: new           #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      26: dup
      27: aload_0
      28: aload_1
      29: invokestatic  #138                // Method doScan:(Ljava/io/File;)Ljava/util/Map;
      32: aconst_null
      33: invokespecial #225                // Method org/xnio/PollingFileSystemWatcher$PollHolder."<init>":(Lorg/xnio/PollingFileSystemWatcher;Ljava/util/Map;Lorg/xnio/PollingFileSystemWatcher$1;)V
      36: dup
      37: astore_3
      38: invokeinterface #229,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      43: pop
      44: aload_3
      45: getfield      #157                // Field org/xnio/PollingFileSystemWatcher$PollHolder.callbacks:Ljava/util/List;
      48: aload_2
      49: invokeinterface #198,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      54: pop
      55: return

  public synchronized void unwatchPath(java.io.File, org.xnio.FileChangeCallback);
    Code:
       0: aload_0
       1: getfield      #55                 // Field files:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #222,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #13                 // class org/xnio/PollingFileSystemWatcher$PollHolder
      13: astore_3
      14: aload_3
      15: ifnull        52
      18: aload_3
      19: getfield      #157                // Field org/xnio/PollingFileSystemWatcher$PollHolder.callbacks:Ljava/util/List;
      22: aload_2
      23: invokeinterface #236,  2          // InterfaceMethod java/util/List.remove:(Ljava/lang/Object;)Z
      28: pop
      29: aload_3
      30: getfield      #157                // Field org/xnio/PollingFileSystemWatcher$PollHolder.callbacks:Ljava/util/List;
      33: invokeinterface #153,  1          // InterfaceMethod java/util/List.isEmpty:()Z
      38: ifeq          52
      41: aload_0
      42: getfield      #55                 // Field files:Ljava/util/Map;
      45: aload_1
      46: invokeinterface #185,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      51: pop
      52: aload_0
      53: getfield      #55                 // Field files:Ljava/util/Map;
      56: aload_1
      57: invokeinterface #185,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      62: pop
      63: return

  public void close() throws java.io.IOException;
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #57                 // Field stopped:Z
       5: aload_0
       6: getfield      #84                 // Field watchThread:Ljava/lang/Thread;
       9: invokevirtual #242                // Method java/lang/Thread.interrupt:()V
      12: return

  static java.util.Map<java.io.File, java.lang.Long> doScan(java.io.File);
    Code:
       0: new           #46                 // class java/util/HashMap
       3: dup
       4: invokespecial #47                 // Method java/util/HashMap."<init>":()V
       7: astore_1
       8: new           #244                // class java/util/ArrayDeque
      11: dup
      12: invokespecial #245                // Method java/util/ArrayDeque."<init>":()V
      15: astore_2
      16: aload_2
      17: aload_0
      18: invokeinterface #248,  2          // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
      23: pop
      24: aload_2
      25: invokeinterface #249,  1          // InterfaceMethod java/util/Deque.isEmpty:()Z
      30: ifne          147
      33: aload_2
      34: invokeinterface #252,  1          // InterfaceMethod java/util/Deque.pop:()Ljava/lang/Object;
      39: checkcast     #134                // class java/io/File
      42: astore_3
      43: aload_3
      44: invokevirtual #204                // Method java/io/File.isDirectory:()Z
      47: ifeq          129
      50: aload_1
      51: aload_3
      52: aload_3
      53: invokevirtual #256                // Method java/io/File.lastModified:()J
      56: invokestatic  #260                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      59: invokeinterface #229,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      64: pop
      65: aload_3
      66: invokevirtual #264                // Method java/io/File.listFiles:()[Ljava/io/File;
      69: astore        4
      71: aload         4
      73: ifnull        126
      76: aload         4
      78: astore        5
      80: aload         5
      82: arraylength
      83: istore        6
      85: iconst_0
      86: istore        7
      88: iload         7
      90: iload         6
      92: if_icmpge     126
      95: aload         5
      97: iload         7
      99: aaload
     100: astore        8
     102: aload_2
     103: new           #134                // class java/io/File
     106: dup
     107: aload         8
     109: invokevirtual #269                // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
     112: invokespecial #272                // Method java/io/File."<init>":(Ljava/lang/String;)V
     115: invokeinterface #276,  2          // InterfaceMethod java/util/Deque.push:(Ljava/lang/Object;)V
     120: iinc          7, 1
     123: goto          88
     126: goto          144
     129: aload_1
     130: aload_3
     131: aload_3
     132: invokevirtual #256                // Method java/io/File.lastModified:()J
     135: invokestatic  #260                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     138: invokeinterface #229,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     143: pop
     144: goto          24
     147: aload_1
     148: areturn

  static void invokeCallback(org.xnio.FileChangeCallback, java.util.List<org.xnio.FileChangeEvent>);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #289,  2          // InterfaceMethod org/xnio/FileChangeCallback.handleChanges:(Ljava/util/Collection;)V
       7: goto          20
      10: astore_2
      11: getstatic     #295                // Field org/xnio/_private/Messages.msg:Lorg/xnio/_private/Messages;
      14: aload_2
      15: invokeinterface #299,  2          // InterfaceMethod org/xnio/_private/Messages.failedToInvokeFileWatchCallback:(Ljava/lang/Throwable;)V
      20: return
    Exception table:
       from    to  target type
           0     7    10   Class java/lang/Exception

  static {};
    Code:
       0: new           #303                // class java/util/concurrent/atomic/AtomicInteger
       3: dup
       4: iconst_0
       5: invokespecial #306                // Method java/util/concurrent/atomic/AtomicInteger."<init>":(I)V
       8: putstatic     #72                 // Field threadIdCounter:Ljava/util/concurrent/atomic/AtomicInteger;
      11: return
}

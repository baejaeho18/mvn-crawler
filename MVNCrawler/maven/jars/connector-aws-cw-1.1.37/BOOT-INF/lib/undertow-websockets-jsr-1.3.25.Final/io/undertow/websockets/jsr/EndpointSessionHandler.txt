Compiled from "EndpointSessionHandler.java"
public final class io.undertow.websockets.jsr.EndpointSessionHandler implements io.undertow.websockets.WebSocketConnectionCallback {
  private final io.undertow.websockets.jsr.ServerWebSocketContainer container;

  public io.undertow.websockets.jsr.EndpointSessionHandler(io.undertow.websockets.jsr.ServerWebSocketContainer);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       9: return

  io.undertow.websockets.jsr.ServerWebSocketContainer getContainer();
    Code:
       0: aload_0
       1: getfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       4: areturn

  public void onConnect(io.undertow.websockets.spi.WebSocketHttpExchange, io.undertow.websockets.core.WebSocketChannel);
    Code:
       0: aload_2
       1: invokestatic  #3                  // Method io/undertow/websockets/jsr/handshake/HandshakeUtil.getConfig:(Lio/undertow/websockets/core/WebSocketChannel;)Lio/undertow/websockets/jsr/ConfiguredServerEndpoint;
       4: astore_3
       5: aload_0
       6: getfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       9: invokevirtual #4                  // Method io/undertow/websockets/jsr/ServerWebSocketContainer.isClosed:()Z
      12: ifeq          24
      15: aload_2
      16: invokevirtual #5                  // Method io/undertow/websockets/core/WebSocketChannel.sendClose:()V
      19: aload_2
      20: invokevirtual #6                  // Method io/undertow/websockets/core/WebSocketChannel.resumeReceives:()V
      23: return
      24: aload_3
      25: invokevirtual #7                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointFactory:()Lio/undertow/servlet/api/InstanceFactory;
      28: astore        4
      30: aload_3
      31: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljavax/websocket/server/ServerEndpointConfig;
      34: invokeinterface #9,  1            // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getConfigurator:()Ljavax/websocket/server/ServerEndpointConfig$Configurator;
      39: astore        5
      41: aload         4
      43: invokestatic  #10                 // Method io/undertow/websockets/jsr/DefaultContainerConfigurator.setCurrentInstanceFactory:(Lio/undertow/servlet/api/InstanceFactory;)V
      46: aload         5
      48: aload_3
      49: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljavax/websocket/server/ServerEndpointConfig;
      52: invokeinterface #11,  1           // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getEndpointClass:()Ljava/lang/Class;
      57: invokevirtual #12                 // Method javax/websocket/server/ServerEndpointConfig$Configurator.getEndpointInstance:(Ljava/lang/Class;)Ljava/lang/Object;
      60: astore        7
      62: invokestatic  #13                 // Method io/undertow/websockets/jsr/DefaultContainerConfigurator.clearCurrentInstanceFactory:()Lio/undertow/servlet/api/InstanceHandle;
      65: astore        8
      67: aload         8
      69: ifnonnull     86
      72: new           #14                 // class io/undertow/servlet/util/ImmediateInstanceHandle
      75: dup
      76: aload         7
      78: invokespecial #15                 // Method io/undertow/servlet/util/ImmediateInstanceHandle."<init>":(Ljava/lang/Object;)V
      81: astore        6
      83: goto          119
      86: aload         8
      88: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
      93: aload         7
      95: if_acmpne     105
      98: aload         8
     100: astore        6
     102: goto          119
     105: new           #17                 // class io/undertow/websockets/jsr/EndpointSessionHandler$1
     108: dup
     109: aload_0
     110: aload         7
     112: aload         8
     114: invokespecial #18                 // Method io/undertow/websockets/jsr/EndpointSessionHandler$1."<init>":(Lio/undertow/websockets/jsr/EndpointSessionHandler;Ljava/lang/Object;Lio/undertow/servlet/api/InstanceHandle;)V
     117: astore        6
     119: aload_1
     120: getstatic     #19                 // Field io/undertow/servlet/handlers/ServletRequestContext.ATTACHMENT_KEY:Lio/undertow/util/AttachmentKey;
     123: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     128: checkcast     #21                 // class io/undertow/servlet/handlers/ServletRequestContext
     131: astore        9
     133: aload_1
     134: getstatic     #22                 // Field io/undertow/websockets/jsr/handshake/HandshakeUtil.PRINCIPAL:Lio/undertow/util/AttachmentKey;
     137: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     142: checkcast     #23                 // class java/security/Principal
     145: astore        10
     147: aload         10
     149: ifnonnull     191
     152: aload         9
     154: invokevirtual #24                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletRequest:()Ljavax/servlet/ServletRequest;
     157: instanceof    #25                 // class javax/servlet/http/HttpServletRequest
     160: ifeq          181
     163: aload         9
     165: invokevirtual #24                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletRequest:()Ljavax/servlet/ServletRequest;
     168: checkcast     #25                 // class javax/servlet/http/HttpServletRequest
     171: invokeinterface #26,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
     176: astore        10
     178: goto          191
     181: aload         9
     183: invokevirtual #27                 // Method io/undertow/servlet/handlers/ServletRequestContext.getOriginalRequest:()Lio/undertow/servlet/spec/HttpServletRequestImpl;
     186: invokevirtual #28                 // Method io/undertow/servlet/spec/HttpServletRequestImpl.getUserPrincipal:()Ljava/security/Principal;
     189: astore        10
     191: aload_3
     192: invokevirtual #29                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getAnnotatedEndpointFactory:()Lio/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory;
     195: ifnull        226
     198: aload_3
     199: invokevirtual #29                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getAnnotatedEndpointFactory:()Lio/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory;
     202: aload         6
     204: invokevirtual #30                 // Method io/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory.createInstance:(Lio/undertow/servlet/api/InstanceHandle;)Lio/undertow/websockets/jsr/annotated/AnnotatedEndpoint;
     207: astore        12
     209: new           #31                 // class io/undertow/websockets/jsr/EndpointSessionHandler$2
     212: dup
     213: aload_0
     214: aload         12
     216: aload         6
     218: invokespecial #32                 // Method io/undertow/websockets/jsr/EndpointSessionHandler$2."<init>":(Lio/undertow/websockets/jsr/EndpointSessionHandler;Lio/undertow/websockets/jsr/annotated/AnnotatedEndpoint;Lio/undertow/servlet/api/InstanceHandle;)V
     221: astore        11
     223: goto          230
     226: aload         6
     228: astore        11
     230: new           #33                 // class io/undertow/websockets/jsr/UndertowSession
     233: dup
     234: aload_2
     235: aload_1
     236: invokeinterface #34,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getRequestURI:()Ljava/lang/String;
     241: invokestatic  #35                 // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
     244: aload_1
     245: getstatic     #36                 // Field io/undertow/websockets/jsr/handshake/HandshakeUtil.PATH_PARAMS:Lio/undertow/util/AttachmentKey;
     248: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     253: checkcast     #37                 // class java/util/Map
     256: aload_1
     257: invokeinterface #38,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getRequestParameters:()Ljava/util/Map;
     262: aload_0
     263: aload         10
     265: aload         11
     267: aload_3
     268: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljavax/websocket/server/ServerEndpointConfig;
     271: aload_1
     272: invokeinterface #39,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getQueryString:()Ljava/lang/String;
     277: aload_3
     278: invokevirtual #40                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEncodingFactory:()Lio/undertow/websockets/jsr/EncodingFactory;
     281: aload_3
     282: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljavax/websocket/server/ServerEndpointConfig;
     285: invokevirtual #41                 // Method io/undertow/websockets/jsr/EncodingFactory.createEncoding:(Ljavax/websocket/EndpointConfig;)Lio/undertow/websockets/jsr/Encoding;
     288: aload_3
     289: aload_2
     290: invokevirtual #42                 // Method io/undertow/websockets/core/WebSocketChannel.getSubProtocol:()Ljava/lang/String;
     293: invokestatic  #43                 // Method java/util/Collections.emptyList:()Ljava/util/List;
     296: aconst_null
     297: invokespecial #44                 // Method io/undertow/websockets/jsr/UndertowSession."<init>":(Lio/undertow/websockets/core/WebSocketChannel;Ljava/net/URI;Ljava/util/Map;Ljava/util/Map;Lio/undertow/websockets/jsr/EndpointSessionHandler;Ljava/security/Principal;Lio/undertow/servlet/api/InstanceHandle;Ljavax/websocket/EndpointConfig;Ljava/lang/String;Lio/undertow/websockets/jsr/Encoding;Lio/undertow/websockets/jsr/SessionContainer;Ljava/lang/String;Ljava/util/List;Lio/undertow/websockets/client/WebSocketClient$ConnectionBuilder;)V
     300: astore        12
     302: aload_3
     303: aload         12
     305: invokevirtual #45                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.addOpenSession:(Ljavax/websocket/Session;)V
     308: aload         12
     310: aload_0
     311: invokevirtual #46                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     314: invokevirtual #47                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxBinaryMessageBufferSize:()I
     317: invokevirtual #48                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxBinaryMessageBufferSize:(I)V
     320: aload         12
     322: aload_0
     323: invokevirtual #46                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     326: invokevirtual #49                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxTextMessageBufferSize:()I
     329: invokevirtual #50                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxTextMessageBufferSize:(I)V
     332: aload         12
     334: aload_0
     335: invokevirtual #46                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     338: invokevirtual #51                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxSessionIdleTimeout:()J
     341: invokevirtual #52                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxIdleTimeout:(J)V
     344: aload         12
     346: invokevirtual #53                 // Method io/undertow/websockets/jsr/UndertowSession.getAsyncRemote:()Ljavax/websocket/RemoteEndpoint$Async;
     349: aload_0
     350: invokevirtual #46                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     353: invokevirtual #54                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultAsyncSendTimeout:()J
     356: invokeinterface #55,  3           // InterfaceMethod javax/websocket/RemoteEndpoint$Async.setSendTimeout:(J)V
     361: aload         11
     363: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
     368: checkcast     #56                 // class javax/websocket/Endpoint
     371: aload         12
     373: aload_3
     374: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljavax/websocket/server/ServerEndpointConfig;
     377: invokevirtual #57                 // Method javax/websocket/Endpoint.onOpen:(Ljavax/websocket/Session;Ljavax/websocket/EndpointConfig;)V
     380: goto          407
     383: astore        13
     385: aload         11
     387: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
     392: checkcast     #56                 // class javax/websocket/Endpoint
     395: aload         12
     397: aload         13
     399: invokevirtual #59                 // Method javax/websocket/Endpoint.onError:(Ljavax/websocket/Session;Ljava/lang/Throwable;)V
     402: aload         12
     404: invokestatic  #60                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     407: aload_2
     408: invokevirtual #6                  // Method io/undertow/websockets/core/WebSocketChannel.resumeReceives:()V
     411: goto          430
     414: astore        4
     416: getstatic     #61                 // Field io/undertow/websockets/jsr/JsrWebSocketLogger.REQUEST_LOGGER:Lio/undertow/websockets/jsr/JsrWebSocketLogger;
     419: aload         4
     421: invokeinterface #62,  2           // InterfaceMethod io/undertow/websockets/jsr/JsrWebSocketLogger.endpointCreationFailed:(Ljava/lang/Exception;)V
     426: aload_2
     427: invokestatic  #60                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     430: return
    Exception table:
       from    to  target type
         361   380   383   Class java/lang/Exception
           5    23   414   Class java/lang/Exception
          24   411   414   Class java/lang/Exception
}

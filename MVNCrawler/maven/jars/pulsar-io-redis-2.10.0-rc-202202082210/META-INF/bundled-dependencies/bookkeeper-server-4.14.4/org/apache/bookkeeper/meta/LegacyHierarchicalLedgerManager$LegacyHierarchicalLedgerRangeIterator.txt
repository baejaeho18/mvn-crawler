Compiled from "LegacyHierarchicalLedgerManager.java"
class org.apache.bookkeeper.meta.LegacyHierarchicalLedgerManager$LegacyHierarchicalLedgerRangeIterator implements org.apache.bookkeeper.meta.LedgerManager$LedgerRangeIterator {
  private java.util.Iterator<java.lang.String> l1NodesIter;

  private java.util.Iterator<java.lang.String> l2NodesIter;

  private java.lang.String curL1Nodes;

  private boolean iteratorDone;

  private org.apache.bookkeeper.meta.LedgerManager$LedgerRange nextRange;

  private final long zkOpTimeoutMs;

  final org.apache.bookkeeper.meta.LegacyHierarchicalLedgerManager this$0;

  public org.apache.bookkeeper.meta.LegacyHierarchicalLedgerManager$LegacyHierarchicalLedgerRangeIterator(org.apache.bookkeeper.meta.LegacyHierarchicalLedgerManager, long);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aconst_null
      11: putfield      #3                  // Field l1NodesIter:Ljava/util/Iterator;
      14: aload_0
      15: aconst_null
      16: putfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
      19: aload_0
      20: ldc           #5                  // String
      22: putfield      #6                  // Field curL1Nodes:Ljava/lang/String;
      25: aload_0
      26: iconst_0
      27: putfield      #7                  // Field iteratorDone:Z
      30: aload_0
      31: aconst_null
      32: putfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
      35: aload_0
      36: lload_2
      37: putfield      #9                  // Field zkOpTimeoutMs:J
      40: return

  private boolean nextL1Node() throws org.apache.zookeeper.KeeperException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: aconst_null
       2: putfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
       5: aload_0
       6: getfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
       9: ifnonnull     143
      12: aload_0
      13: getfield      #3                  // Field l1NodesIter:Ljava/util/Iterator;
      16: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          43
      24: aload_0
      25: aload_0
      26: getfield      #3                  // Field l1NodesIter:Ljava/util/Iterator;
      29: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      34: checkcast     #12                 // class java/lang/String
      37: putfield      #6                  // Field curL1Nodes:Ljava/lang/String;
      40: goto          45
      43: iconst_0
      44: ireturn
      45: aload_0
      46: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      49: aload_0
      50: getfield      #6                  // Field curL1Nodes:Ljava/lang/String;
      53: invokevirtual #13                 // Method org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.isLedgerParentNode:(Ljava/lang/String;)Z
      56: ifne          62
      59: goto          5
      62: aload_0
      63: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      66: getfield      #14                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.zk:Lorg/apache/zookeeper/ZooKeeper;
      69: new           #15                 // class java/lang/StringBuilder
      72: dup
      73: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      76: aload_0
      77: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      80: getfield      #17                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.ledgerRootPath:Ljava/lang/String;
      83: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      86: ldc           #19                 // String /
      88: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      91: aload_0
      92: getfield      #6                  // Field curL1Nodes:Ljava/lang/String;
      95: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      98: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     101: aconst_null
     102: invokevirtual #21                 // Method org/apache/zookeeper/ZooKeeper.getChildren:(Ljava/lang/String;Lorg/apache/zookeeper/Watcher;)Ljava/util/List;
     105: astore_1
     106: aload_1
     107: invokestatic  #22                 // Method java/util/Collections.sort:(Ljava/util/List;)V
     110: aload_0
     111: aload_1
     112: invokeinterface #23,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     117: putfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
     120: aload_0
     121: getfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
     124: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     129: ifne          140
     132: aload_0
     133: aconst_null
     134: putfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
     137: goto          5
     140: goto          5
     143: iconst_1
     144: ireturn

  private synchronized void preload() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
       4: ifnonnull     180
       7: aload_0
       8: getfield      #7                  // Field iteratorDone:Z
      11: ifne          180
      14: iconst_0
      15: istore_1
      16: aload_0
      17: getfield      #3                  // Field l1NodesIter:Ljava/util/Iterator;
      20: ifnonnull     64
      23: aload_0
      24: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      27: getfield      #14                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.zk:Lorg/apache/zookeeper/ZooKeeper;
      30: aload_0
      31: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      34: getfield      #17                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.ledgerRootPath:Ljava/lang/String;
      37: aconst_null
      38: invokevirtual #21                 // Method org/apache/zookeeper/ZooKeeper.getChildren:(Ljava/lang/String;Lorg/apache/zookeeper/Watcher;)Ljava/util/List;
      41: astore_2
      42: aload_2
      43: invokestatic  #22                 // Method java/util/Collections.sort:(Ljava/util/List;)V
      46: aload_0
      47: aload_2
      48: invokeinterface #23,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      53: putfield      #3                  // Field l1NodesIter:Ljava/util/Iterator;
      56: aload_0
      57: invokespecial #24                 // Method nextL1Node:()Z
      60: istore_1
      61: goto          93
      64: aload_0
      65: getfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
      68: ifnull        83
      71: aload_0
      72: getfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
      75: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      80: ifne          91
      83: aload_0
      84: invokespecial #24                 // Method nextL1Node:()Z
      87: istore_1
      88: goto          93
      91: iconst_1
      92: istore_1
      93: goto          126
      96: astore_2
      97: new           #26                 // class java/io/IOException
     100: dup
     101: ldc           #27                 // String Error preloading next range
     103: aload_2
     104: invokespecial #28                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     107: athrow
     108: astore_2
     109: invokestatic  #30                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     112: invokevirtual #31                 // Method java/lang/Thread.interrupt:()V
     115: new           #26                 // class java/io/IOException
     118: dup
     119: ldc           #32                 // String Interrupted while preloading
     121: aload_2
     122: invokespecial #28                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     125: athrow
     126: iload_1
     127: ifeq          172
     130: aload_0
     131: aload_0
     132: aload_0
     133: getfield      #6                  // Field curL1Nodes:Ljava/lang/String;
     136: aload_0
     137: getfield      #4                  // Field l2NodesIter:Ljava/util/Iterator;
     140: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     145: checkcast     #12                 // class java/lang/String
     148: invokevirtual #33                 // Method getLedgerRangeByLevel:(Ljava/lang/String;Ljava/lang/String;)Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
     151: putfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
     154: aload_0
     155: getfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
     158: invokevirtual #34                 // Method org/apache/bookkeeper/meta/LedgerManager$LedgerRange.size:()I
     161: ifne          177
     164: aload_0
     165: aconst_null
     166: putfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
     169: goto          177
     172: aload_0
     173: iconst_1
     174: putfield      #7                  // Field iteratorDone:Z
     177: goto          0
     180: return
    Exception table:
       from    to  target type
          16    93    96   Class org/apache/zookeeper/KeeperException
          16    93   108   Class java/lang/InterruptedException

  public synchronized boolean hasNext() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #35                 // Method preload:()V
       4: aload_0
       5: getfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
       8: ifnull        22
      11: aload_0
      12: getfield      #7                  // Field iteratorDone:Z
      15: ifne          22
      18: iconst_1
      19: goto          23
      22: iconst_0
      23: ireturn

  public synchronized org.apache.bookkeeper.meta.LedgerManager$LedgerRange next() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #36                 // Method hasNext:()Z
       4: ifne          15
       7: new           #37                 // class java/util/NoSuchElementException
      10: dup
      11: invokespecial #38                 // Method java/util/NoSuchElementException."<init>":()V
      14: athrow
      15: aload_0
      16: getfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
      19: astore_1
      20: aload_0
      21: aconst_null
      22: putfield      #8                  // Field nextRange:Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
      25: aload_1
      26: areturn

  org.apache.bookkeeper.meta.LedgerManager$LedgerRange getLedgerRangeByLevel(java.lang.String, java.lang.String) throws java.io.IOException;
    Code:
       0: invokestatic  #39                 // Method org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.access$000:()Ljava/lang/ThreadLocal;
       3: invokevirtual #40                 // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
       6: checkcast     #15                 // class java/lang/StringBuilder
       9: astore_3
      10: aload_3
      11: iconst_0
      12: invokevirtual #41                 // Method java/lang/StringBuilder.setLength:(I)V
      15: aload_3
      16: aload_0
      17: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      20: getfield      #17                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.ledgerRootPath:Ljava/lang/String;
      23: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: ldc           #19                 // String /
      28: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      31: aload_1
      32: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: ldc           #19                 // String /
      37: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: aload_2
      41: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      44: pop
      45: aload_3
      46: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      49: astore        4
      51: aconst_null
      52: astore        5
      54: aload_0
      55: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
      58: getfield      #14                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.zk:Lorg/apache/zookeeper/ZooKeeper;
      61: aload         4
      63: aload_0
      64: getfield      #9                  // Field zkOpTimeoutMs:J
      67: invokestatic  #42                 // Method org/apache/bookkeeper/util/ZkUtils.getChildrenInSingleNode:(Lorg/apache/zookeeper/ZooKeeper;Ljava/lang/String;J)Ljava/util/List;
      70: astore        5
      72: goto          109
      75: astore        6
      77: new           #44                 // class java/util/ArrayList
      80: dup
      81: invokespecial #45                 // Method java/util/ArrayList."<init>":()V
      84: astore        5
      86: goto          109
      89: astore        6
      91: invokestatic  #30                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      94: invokevirtual #31                 // Method java/lang/Thread.interrupt:()V
      97: new           #26                 // class java/io/IOException
     100: dup
     101: ldc           #46                 // String Error when get child nodes from zk
     103: aload         6
     105: invokespecial #28                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     108: athrow
     109: aload_0
     110: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
     113: aload         5
     115: aload         4
     117: invokevirtual #47                 // Method org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.ledgerListToSet:(Ljava/util/List;Ljava/lang/String;)Ljava/util/NavigableSet;
     120: astore        6
     122: getstatic     #48                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.LOG:Lorg/slf4j/Logger;
     125: invokeinterface #49,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     130: ifeq          179
     133: getstatic     #48                 // Field org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.LOG:Lorg/slf4j/Logger;
     136: new           #15                 // class java/lang/StringBuilder
     139: dup
     140: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     143: ldc           #50                 // String All active ledgers from ZK for hash node
     145: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     148: aload_1
     149: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     152: ldc           #19                 // String /
     154: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     157: aload_2
     158: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: ldc           #51                 // String  :
     163: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     166: aload         6
     168: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     171: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     174: invokeinterface #53,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     179: new           #54                 // class org/apache/bookkeeper/meta/LedgerManager$LedgerRange
     182: dup
     183: aload         6
     185: aload_0
     186: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
     189: aload_1
     190: aload_2
     191: invokestatic  #55                 // Method org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.access$100:(Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;Ljava/lang/String;Ljava/lang/String;)J
     194: invokestatic  #56                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     197: iconst_1
     198: aload_0
     199: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;
     202: aload_1
     203: aload_2
     204: invokestatic  #57                 // Method org/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager.access$200:(Lorg/apache/bookkeeper/meta/LegacyHierarchicalLedgerManager;Ljava/lang/String;Ljava/lang/String;)J
     207: invokestatic  #56                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     210: iconst_1
     211: invokeinterface #58,  5           // InterfaceMethod java/util/NavigableSet.subSet:(Ljava/lang/Object;ZLjava/lang/Object;Z)Ljava/util/NavigableSet;
     216: invokespecial #59                 // Method org/apache/bookkeeper/meta/LedgerManager$LedgerRange."<init>":(Ljava/util/Set;)V
     219: areturn
    Exception table:
       from    to  target type
          54    72    75   Class org/apache/zookeeper/KeeperException$NoNodeException
          54    72    89   Class java/lang/InterruptedException
}

Compiled from "LedgerDescriptorImpl.java"
public class org.apache.bookkeeper.bookie.LedgerDescriptorImpl extends org.apache.bookkeeper.bookie.LedgerDescriptor {
  private static final org.slf4j.Logger LOG;

  final org.apache.bookkeeper.bookie.LedgerStorage ledgerStorage;

  private long ledgerId;

  final byte[] masterKey;

  private java.util.concurrent.atomic.AtomicBoolean fenceEntryPersisted;

  private com.google.common.util.concurrent.SettableFuture<java.lang.Boolean> logFenceResult;

  org.apache.bookkeeper.bookie.LedgerDescriptorImpl(byte[], long, org.apache.bookkeeper.bookie.LedgerStorage);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/bookkeeper/bookie/LedgerDescriptor."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicBoolean
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
      12: putfield      #4                  // Field fenceEntryPersisted:Ljava/util/concurrent/atomic/AtomicBoolean;
      15: aload_0
      16: aconst_null
      17: putfield      #5                  // Field logFenceResult:Lcom/google/common/util/concurrent/SettableFuture;
      20: aload_0
      21: aload_1
      22: putfield      #6                  // Field masterKey:[B
      25: aload_0
      26: lload_2
      27: putfield      #7                  // Field ledgerId:J
      30: aload_0
      31: aload         4
      33: putfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
      36: return

  void checkAccess(byte[]) throws org.apache.bookkeeper.bookie.BookieException, java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field masterKey:[B
       4: aload_1
       5: invokestatic  #9                  // Method java/util/Arrays.equals:([B[B)Z
       8: ifne          57
      11: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      14: ldc           #11                 // String [{}] Requested master key {} does not match the cached master key {}
      16: iconst_3
      17: anewarray     #12                 // class java/lang/Object
      20: dup
      21: iconst_0
      22: aload_0
      23: getfield      #7                  // Field ledgerId:J
      26: invokestatic  #13                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      29: aastore
      30: dup
      31: iconst_1
      32: aload_1
      33: invokestatic  #14                 // Method java/util/Arrays.toString:([B)Ljava/lang/String;
      36: aastore
      37: dup
      38: iconst_2
      39: aload_0
      40: getfield      #6                  // Field masterKey:[B
      43: invokestatic  #14                 // Method java/util/Arrays.toString:([B)Ljava/lang/String;
      46: aastore
      47: invokeinterface #15,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
      52: iconst_m1
      53: invokestatic  #17                 // Method org/apache/bookkeeper/bookie/BookieException.create:(I)Lorg/apache/bookkeeper/bookie/BookieException;
      56: athrow
      57: return

  public long getLedgerId();
    Code:
       0: aload_0
       1: getfield      #7                  // Field ledgerId:J
       4: lreturn

  boolean setFenced() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: invokeinterface #18,  3           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.setFenced:(J)Z
      13: ireturn

  boolean isFenced() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.isFenced:(J)Z
      13: ireturn

  void setExplicitLac(io.netty.buffer.ByteBuf) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: aload_1
       9: invokeinterface #20,  4           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.setExplicitLac:(JLio/netty/buffer/ByteBuf;)V
      14: return

  io.netty.buffer.ByteBuf getExplicitLac() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: invokeinterface #21,  3           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.getExplicitLac:(J)Lio/netty/buffer/ByteBuf;
      13: areturn

  synchronized com.google.common.util.concurrent.SettableFuture<java.lang.Boolean> fenceAndLogInJournal(org.apache.bookkeeper.bookie.Journal) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #22                 // Method setFenced:()Z
       4: istore_2
       5: iload_2
       6: ifeq          15
       9: aload_0
      10: aload_1
      11: invokespecial #23                 // Method logFenceEntryInJournal:(Lorg/apache/bookkeeper/bookie/Journal;)Lcom/google/common/util/concurrent/SettableFuture;
      14: areturn
      15: aload_0
      16: getfield      #5                  // Field logFenceResult:Lcom/google/common/util/concurrent/SettableFuture;
      19: ifnull        32
      22: aload_0
      23: getfield      #4                  // Field fenceEntryPersisted:Ljava/util/concurrent/atomic/AtomicBoolean;
      26: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      29: ifeq          47
      32: invokestatic  #25                 // Method com/google/common/util/concurrent/SettableFuture.create:()Lcom/google/common/util/concurrent/SettableFuture;
      35: astore_3
      36: aload_3
      37: iconst_1
      38: invokestatic  #26                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      41: invokevirtual #27                 // Method com/google/common/util/concurrent/SettableFuture.set:(Ljava/lang/Object;)Z
      44: pop
      45: aload_3
      46: areturn
      47: aload_0
      48: getfield      #5                  // Field logFenceResult:Lcom/google/common/util/concurrent/SettableFuture;
      51: invokevirtual #28                 // Method com/google/common/util/concurrent/SettableFuture.isDone:()Z
      54: ifeq          63
      57: aload_0
      58: aload_1
      59: invokespecial #23                 // Method logFenceEntryInJournal:(Lorg/apache/bookkeeper/bookie/Journal;)Lcom/google/common/util/concurrent/SettableFuture;
      62: areturn
      63: aload_0
      64: getfield      #5                  // Field logFenceResult:Lcom/google/common/util/concurrent/SettableFuture;
      67: areturn

  private com.google.common.util.concurrent.SettableFuture<java.lang.Boolean> logFenceEntryInJournal(org.apache.bookkeeper.bookie.Journal);
    Code:
       0: aload_0
       1: dup
       2: astore_3
       3: monitorenter
       4: aload_0
       5: invokestatic  #25                 // Method com/google/common/util/concurrent/SettableFuture.create:()Lcom/google/common/util/concurrent/SettableFuture;
       8: dup_x1
       9: putfield      #5                  // Field logFenceResult:Lcom/google/common/util/concurrent/SettableFuture;
      12: astore_2
      13: aload_3
      14: monitorexit
      15: goto          25
      18: astore        4
      20: aload_3
      21: monitorexit
      22: aload         4
      24: athrow
      25: aload_0
      26: getfield      #7                  // Field ledgerId:J
      29: invokestatic  #13                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      32: invokestatic  #29                 // Method createLedgerFenceEntry:(Ljava/lang/Long;)Lio/netty/buffer/ByteBuf;
      35: astore_3
      36: aload_1
      37: aload_3
      38: iconst_0
      39: aload_0
      40: aload_2
      41: invokedynamic #30,  0             // InvokeDynamic #0:writeComplete:(Lorg/apache/bookkeeper/bookie/LedgerDescriptorImpl;Lcom/google/common/util/concurrent/SettableFuture;)Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$WriteCallback;
      46: aconst_null
      47: invokevirtual #31                 // Method org/apache/bookkeeper/bookie/Journal.logAddEntry:(Lio/netty/buffer/ByteBuf;ZLorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$WriteCallback;Ljava/lang/Object;)V
      50: goto          68
      53: astore        4
      55: invokestatic  #33                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      58: invokevirtual #34                 // Method java/lang/Thread.interrupt:()V
      61: aload_2
      62: aload         4
      64: invokevirtual #35                 // Method com/google/common/util/concurrent/SettableFuture.setException:(Ljava/lang/Throwable;)Z
      67: pop
      68: aload_2
      69: areturn
    Exception table:
       from    to  target type
           4    15    18   any
          18    22    18   any
          36    50    53   Class java/lang/InterruptedException

  long addEntry(io.netty.buffer.ByteBuf) throws java.io.IOException, org.apache.bookkeeper.bookie.BookieException;
    Code:
       0: aload_1
       1: aload_1
       2: invokevirtual #36                 // Method io/netty/buffer/ByteBuf.readerIndex:()I
       5: invokevirtual #37                 // Method io/netty/buffer/ByteBuf.getLong:(I)J
       8: lstore_2
       9: lload_2
      10: aload_0
      11: getfield      #7                  // Field ledgerId:J
      14: lcmp
      15: ifeq          57
      18: new           #38                 // class java/io/IOException
      21: dup
      22: new           #39                 // class java/lang/StringBuilder
      25: dup
      26: invokespecial #40                 // Method java/lang/StringBuilder."<init>":()V
      29: ldc           #41                 // String Entry for ledger
      31: invokevirtual #42                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: lload_2
      35: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      38: ldc           #44                 // String  was sent to
      40: invokevirtual #42                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      43: aload_0
      44: getfield      #7                  // Field ledgerId:J
      47: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      50: invokevirtual #45                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      53: invokespecial #46                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      56: athrow
      57: aload_0
      58: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
      61: aload_1
      62: invokeinterface #47,  2           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.addEntry:(Lio/netty/buffer/ByteBuf;)J
      67: lreturn

  io.netty.buffer.ByteBuf readEntry(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: lload_1
       9: invokeinterface #48,  5           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.getEntry:(JJ)Lio/netty/buffer/ByteBuf;
      14: areturn

  long getLastAddConfirmed() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: invokeinterface #49,  3           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.getLastAddConfirmed:(J)J
      13: lreturn

  boolean waitForLastAddConfirmedUpdate(long, org.apache.bookkeeper.common.util.Watcher<org.apache.bookkeeper.bookie.LastAddConfirmedUpdateNotification>) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: lload_1
       9: aload_3
      10: invokeinterface #50,  6           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.waitForLastAddConfirmedUpdate:(JJLorg/apache/bookkeeper/common/util/Watcher;)Z
      15: ireturn

  void cancelWaitForLastAddConfirmedUpdate(org.apache.bookkeeper.common.util.Watcher<org.apache.bookkeeper.bookie.LastAddConfirmedUpdateNotification>) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: aload_0
       5: getfield      #7                  // Field ledgerId:J
       8: aload_1
       9: invokeinterface #51,  4           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.cancelWaitForLastAddConfirmedUpdate:(JLorg/apache/bookkeeper/common/util/Watcher;)V
      14: return

  java.util.PrimitiveIterator$OfLong getListOfEntriesOfLedger(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/LedgerStorage;
       4: lload_1
       5: invokeinterface #52,  3           // InterfaceMethod org/apache/bookkeeper/bookie/LedgerStorage.getListOfEntriesOfLedger:(J)Ljava/util/PrimitiveIterator$OfLong;
      10: areturn

  private void lambda$logFenceEntryInJournal$0(com.google.common.util.concurrent.SettableFuture, int, long, long, org.apache.bookkeeper.net.BookieId, java.lang.Object);
    Code:
       0: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          29
      11: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      14: ldc           #54                 // String Record fenced state for ledger {} in journal with rc {}
      16: lload_3
      17: invokestatic  #13                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      20: iload_2
      21: invokestatic  #55                 // Method org/apache/bookkeeper/client/api/BKException.codeLogger:(I)Ljava/lang/Object;
      24: invokeinterface #56,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      29: iload_2
      30: ifne          55
      33: aload_0
      34: getfield      #4                  // Field fenceEntryPersisted:Ljava/util/concurrent/atomic/AtomicBoolean;
      37: iconst_0
      38: iconst_1
      39: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
      42: pop
      43: aload_1
      44: iconst_1
      45: invokestatic  #26                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      48: invokevirtual #27                 // Method com/google/common/util/concurrent/SettableFuture.set:(Ljava/lang/Object;)Z
      51: pop
      52: goto          64
      55: aload_1
      56: iconst_0
      57: invokestatic  #26                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      60: invokevirtual #27                 // Method com/google/common/util/concurrent/SettableFuture.set:(Ljava/lang/Object;)Z
      63: pop
      64: return

  static {};
    Code:
       0: ldc           #58                 // class org/apache/bookkeeper/bookie/LedgerDescriptorImpl
       2: invokestatic  #59                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

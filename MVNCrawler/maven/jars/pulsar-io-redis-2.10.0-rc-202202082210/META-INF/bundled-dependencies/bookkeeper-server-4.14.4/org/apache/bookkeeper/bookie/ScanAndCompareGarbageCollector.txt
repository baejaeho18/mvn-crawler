Compiled from "ScanAndCompareGarbageCollector.java"
public class org.apache.bookkeeper.bookie.ScanAndCompareGarbageCollector implements org.apache.bookkeeper.bookie.GarbageCollector {
  static final org.slf4j.Logger LOG;

  static final int MAX_CONCURRENT_METADATA_REQUESTS;

  private final org.apache.bookkeeper.meta.LedgerManager ledgerManager;

  private final org.apache.bookkeeper.bookie.CompactableLedgerStorage ledgerStorage;

  private final org.apache.bookkeeper.conf.ServerConfiguration conf;

  private final org.apache.bookkeeper.net.BookieId selfBookieAddress;

  private boolean enableGcOverReplicatedLedger;

  private final long gcOverReplicatedLedgerIntervalMillis;

  private long lastOverReplicatedLedgerGcTimeMillis;

  private final boolean verifyMetadataOnGc;

  private int activeLedgerCounter;

  private org.apache.bookkeeper.stats.StatsLogger statsLogger;

  public org.apache.bookkeeper.bookie.ScanAndCompareGarbageCollector(org.apache.bookkeeper.meta.LedgerManager, org.apache.bookkeeper.bookie.CompactableLedgerStorage, org.apache.bookkeeper.conf.ServerConfiguration, org.apache.bookkeeper.stats.StatsLogger) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/CompactableLedgerStorage;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      19: aload_0
      20: aload_3
      21: invokestatic  #5                  // Method org/apache/bookkeeper/bookie/Bookie.getBookieId:(Lorg/apache/bookkeeper/conf/ServerConfiguration;)Lorg/apache/bookkeeper/net/BookieId;
      24: putfield      #6                  // Field selfBookieAddress:Lorg/apache/bookkeeper/net/BookieId;
      27: aload_0
      28: aload         4
      30: putfield      #7                  // Field statsLogger:Lorg/apache/bookkeeper/stats/StatsLogger;
      33: aload_0
      34: aload_3
      35: invokevirtual #8                  // Method org/apache/bookkeeper/conf/ServerConfiguration.getGcOverreplicatedLedgerWaitTimeMillis:()J
      38: putfield      #9                  // Field gcOverReplicatedLedgerIntervalMillis:J
      41: aload_0
      42: invokestatic  #10                 // Method java/lang/System.currentTimeMillis:()J
      45: putfield      #11                 // Field lastOverReplicatedLedgerGcTimeMillis:J
      48: aload_0
      49: getfield      #9                  // Field gcOverReplicatedLedgerIntervalMillis:J
      52: lconst_0
      53: lcmp
      54: ifle          62
      57: aload_0
      58: iconst_1
      59: putfield      #12                 // Field enableGcOverReplicatedLedger:Z
      62: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
      65: new           #14                 // class java/lang/StringBuilder
      68: dup
      69: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      72: ldc           #16                 // String Over Replicated Ledger Deletion : enabled=
      74: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      77: aload_0
      78: getfield      #12                 // Field enableGcOverReplicatedLedger:Z
      81: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
      84: ldc           #19                 // String , interval=
      86: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: aload_0
      90: getfield      #9                  // Field gcOverReplicatedLedgerIntervalMillis:J
      93: invokevirtual #20                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      96: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      99: invokeinterface #22,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     104: aload_0
     105: aload_3
     106: invokevirtual #23                 // Method org/apache/bookkeeper/conf/ServerConfiguration.getVerifyMetadataOnGC:()Z
     109: putfield      #24                 // Field verifyMetadataOnGc:Z
     112: aload_0
     113: iconst_0
     114: putfield      #25                 // Field activeLedgerCounter:I
     117: return

  public int getNumActiveLedgers();
    Code:
       0: aload_0
       1: getfield      #25                 // Field activeLedgerCounter:I
       4: ireturn

  public void gc(org.apache.bookkeeper.bookie.GarbageCollector$GarbageCleaner);
    Code:
       0: aconst_null
       1: aload_0
       2: getfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
       5: if_acmpne     9
       8: return
       9: aload_0
      10: getfield      #3                  // Field ledgerStorage:Lorg/apache/bookkeeper/bookie/CompactableLedgerStorage;
      13: lconst_0
      14: ldc2_w        #27                 // long 9223372036854775807l
      17: invokeinterface #29,  5           // InterfaceMethod org/apache/bookkeeper/bookie/CompactableLedgerStorage.getActiveLedgersInRange:(JJ)Ljava/lang/Iterable;
      22: invokestatic  #30                 // Method com/google/common/collect/Sets.newTreeSet:(Ljava/lang/Iterable;)Ljava/util/TreeSet;
      25: astore_2
      26: aload_0
      27: aload_2
      28: invokeinterface #31,  1           // InterfaceMethod java/util/NavigableSet.size:()I
      33: putfield      #25                 // Field activeLedgerCounter:I
      36: invokestatic  #10                 // Method java/lang/System.currentTimeMillis:()J
      39: lstore_3
      40: aload_0
      41: getfield      #12                 // Field enableGcOverReplicatedLedger:Z
      44: ifeq          65
      47: lload_3
      48: aload_0
      49: getfield      #11                 // Field lastOverReplicatedLedgerGcTimeMillis:J
      52: lsub
      53: aload_0
      54: getfield      #9                  // Field gcOverReplicatedLedgerIntervalMillis:J
      57: lcmp
      58: ifle          65
      61: iconst_1
      62: goto          66
      65: iconst_0
      66: istore        5
      68: iload         5
      70: ifeq          123
      73: aload_0
      74: aload_2
      75: aload_1
      76: invokespecial #32                 // Method removeOverReplicatedledgers:(Ljava/util/Set;Lorg/apache/bookkeeper/bookie/GarbageCollector$GarbageCleaner;)Ljava/util/Set;
      79: astore        6
      81: aload         6
      83: invokeinterface #33,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      88: ifeq          104
      91: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
      94: ldc           #34                 // String No over-replicated ledgers found.
      96: invokeinterface #22,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     101: goto          116
     104: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     107: ldc           #35                 // String Removed over-replicated ledgers: {}
     109: aload         6
     111: invokeinterface #36,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     116: aload_0
     117: invokestatic  #10                 // Method java/lang/System.currentTimeMillis:()J
     120: putfield      #11                 // Field lastOverReplicatedLedgerGcTimeMillis:J
     123: aload_0
     124: getfield      #4                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
     127: invokevirtual #37                 // Method org/apache/bookkeeper/conf/ServerConfiguration.getZkTimeout:()I
     130: iconst_2
     131: imul
     132: i2l
     133: lstore        6
     135: aload_0
     136: getfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
     139: lload         6
     141: invokeinterface #38,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.getLedgerRanges:(J)Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRangeIterator;
     146: astore        8
     148: aconst_null
     149: astore        9
     151: ldc2_w        #39                 // long -1l
     154: lstore        12
     156: iconst_0
     157: istore        14
     159: new           #41                 // class java/util/concurrent/atomic/AtomicBoolean
     162: dup
     163: iconst_0
     164: invokespecial #42                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
     167: astore        15
     169: aconst_null
     170: astore        16
     172: iload         14
     174: ifne          513
     177: lload         12
     179: lconst_1
     180: ladd
     181: lstore        10
     183: aload         8
     185: invokeinterface #43,  1           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager$LedgerRangeIterator.hasNext:()Z
     190: ifeq          222
     193: aload         8
     195: invokeinterface #44,  1           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager$LedgerRangeIterator.next:()Lorg/apache/bookkeeper/meta/LedgerManager$LedgerRange;
     200: astore        17
     202: aload         17
     204: invokevirtual #45                 // Method org/apache/bookkeeper/meta/LedgerManager$LedgerRange.getLedgers:()Ljava/util/Set;
     207: astore        9
     209: aload         17
     211: invokevirtual #46                 // Method org/apache/bookkeeper/meta/LedgerManager$LedgerRange.end:()Ljava/lang/Long;
     214: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     217: lstore        12
     219: goto          239
     222: new           #48                 // class java/util/TreeSet
     225: dup
     226: invokespecial #49                 // Method java/util/TreeSet."<init>":()V
     229: astore        9
     231: ldc2_w        #27                 // long 9223372036854775807l
     234: lstore        12
     236: iconst_1
     237: istore        14
     239: aload_2
     240: lload         10
     242: invokestatic  #50                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     245: iconst_1
     246: lload         12
     248: invokestatic  #50                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     251: iconst_1
     252: invokeinterface #51,  5           // InterfaceMethod java/util/NavigableSet.subSet:(Ljava/lang/Object;ZLjava/lang/Object;Z)Ljava/util/NavigableSet;
     257: astore        17
     259: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     262: invokeinterface #52,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     267: ifeq          284
     270: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     273: ldc           #53                 // String Active in metadata {}, Active in bookie {}
     275: aload         9
     277: aload         17
     279: invokeinterface #54,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     284: aload         17
     286: invokeinterface #55,  1           // InterfaceMethod java/lang/Iterable.iterator:()Ljava/util/Iterator;
     291: astore        18
     293: aload         18
     295: invokeinterface #56,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     300: ifeq          510
     303: aload         18
     305: invokeinterface #57,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     310: checkcast     #26                 // class java/lang/Long
     313: astore        19
     315: aload         9
     317: aload         19
     319: invokeinterface #58,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     324: ifne          507
     327: aload_0
     328: getfield      #24                 // Field verifyMetadataOnGc:Z
     331: ifeq          496
     334: aload         15
     336: iconst_0
     337: invokevirtual #59                 // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
     340: aconst_null
     341: astore        16
     343: iconst_0
     344: istore        20
     346: aload_0
     347: getfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
     350: aload         19
     352: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     355: invokeinterface #61,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.readLedgerMetadata:(J)Ljava/util/concurrent/CompletableFuture;
     360: lload         6
     362: getstatic     #62                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     365: invokestatic  #63                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
     368: checkcast     #64                 // class org/apache/bookkeeper/versioning/Versioned
     371: astore        16
     373: goto          419
     376: astore        21
     378: aload         21
     380: instanceof    #65                 // class org/apache/bookkeeper/client/BKException
     383: ifeq          399
     386: aload         21
     388: checkcast     #65                 // class org/apache/bookkeeper/client/BKException
     391: invokevirtual #67                 // Method org/apache/bookkeeper/client/BKException.getCode:()I
     394: istore        20
     396: goto          419
     399: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     402: ldc           #68                 // String Time-out while fetching metadata for Ledger {} : {}.
     404: aload         19
     406: aload         21
     408: invokevirtual #69                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     411: invokeinterface #70,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     416: goto          293
     419: aload         16
     421: ifnull        469
     424: aload         16
     426: invokevirtual #71                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
     429: ifnull        469
     432: aload         16
     434: invokevirtual #71                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
     437: checkcast     #72                 // class org/apache/bookkeeper/client/api/LedgerMetadata
     440: invokeinterface #73,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getAllEnsembles:()Ljava/util/NavigableMap;
     445: aload_0
     446: aload         15
     448: invokedynamic #74,  0             // InvokeDynamic #0:accept:(Lorg/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector;Ljava/util/concurrent/atomic/AtomicBoolean;)Ljava/util/function/BiConsumer;
     453: invokeinterface #75,  2           // InterfaceMethod java/util/NavigableMap.forEach:(Ljava/util/function/BiConsumer;)V
     458: aload         15
     460: invokevirtual #76                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
     463: ifeq          496
     466: goto          293
     469: iload         20
     471: bipush        -25
     473: if_icmpeq     496
     476: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     479: ldc           #77                 // String Ledger {} Missing in metadata list, but ledgerManager returned rc: {}.
     481: aload         19
     483: iload         20
     485: invokestatic  #78                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     488: invokeinterface #70,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     493: goto          293
     496: aload_1
     497: aload         19
     499: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     502: invokeinterface #79,  3           // InterfaceMethod org/apache/bookkeeper/bookie/GarbageCollector$GarbageCleaner.clean:(J)V
     507: goto          293
     510: goto          172
     513: goto          528
     516: astore_2
     517: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     520: ldc           #81                 // String Exception when iterating over the metadata
     522: aload_2
     523: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     528: return
    Exception table:
       from    to  target type
         346   373   376   Class org/apache/bookkeeper/client/BKException
         346   373   376   Class java/util/concurrent/TimeoutException
           9   513   516   Class java/lang/Throwable

  private java.util.Set<java.lang.Long> removeOverReplicatedledgers(java.util.Set<java.lang.Long>, org.apache.bookkeeper.bookie.GarbageCollector$GarbageCleaner) throws java.lang.Exception;
    Code:
       0: invokestatic  #83                 // Method com/google/common/collect/Sets.newHashSet:()Ljava/util/HashSet;
       3: astore_3
       4: new           #84                 // class java/util/concurrent/Semaphore
       7: dup
       8: sipush        1000
      11: invokespecial #86                 // Method java/util/concurrent/Semaphore."<init>":(I)V
      14: astore        4
      16: new           #87                 // class java/util/concurrent/CountDownLatch
      19: dup
      20: aload_1
      21: invokeinterface #88,  1           // InterfaceMethod java/util/Set.size:()I
      26: invokespecial #89                 // Method java/util/concurrent/CountDownLatch."<init>":(I)V
      29: astore        5
      31: aload_0
      32: getfield      #4                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      35: aload_0
      36: getfield      #7                  // Field statsLogger:Lorg/apache/bookkeeper/stats/StatsLogger;
      39: invokestatic  #90                 // Method instantiateMetadataDriver:(Lorg/apache/bookkeeper/conf/ServerConfiguration;Lorg/apache/bookkeeper/stats/StatsLogger;)Lorg/apache/bookkeeper/meta/MetadataBookieDriver;
      42: astore        6
      44: aload         6
      46: invokeinterface #91,  1           // InterfaceMethod org/apache/bookkeeper/meta/MetadataBookieDriver.getLedgerManagerFactory:()Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
      51: astore        7
      53: aload         7
      55: invokeinterface #92,  1           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManagerFactory.newLedgerUnderreplicationManager:()Lorg/apache/bookkeeper/meta/LedgerUnderreplicationManager;
      60: astore        8
      62: aload_1
      63: invokeinterface #93,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      68: astore        9
      70: aload         9
      72: invokeinterface #56,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      77: ifeq          243
      80: aload         9
      82: invokeinterface #57,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      87: checkcast     #26                 // class java/lang/Long
      90: astore        10
      92: aload_0
      93: getfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
      96: aload         10
      98: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     101: invokeinterface #61,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.readLedgerMetadata:(J)Ljava/util/concurrent/CompletableFuture;
     106: invokevirtual #94                 // Method java/util/concurrent/CompletableFuture.get:()Ljava/lang/Object;
     109: checkcast     #64                 // class org/apache/bookkeeper/versioning/Versioned
     112: astore        11
     114: aload_0
     115: aload         11
     117: invokespecial #95                 // Method isNotBookieIncludedInLedgerEnsembles:(Lorg/apache/bookkeeper/versioning/Versioned;)Z
     120: ifne          131
     123: aload         5
     125: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     128: goto          70
     131: goto          144
     134: astore        11
     136: aload         5
     138: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     141: goto          70
     144: aload         8
     146: aload         10
     148: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     151: invokeinterface #97,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.isLedgerBeingReplicated:(J)Z
     156: ifeq          167
     159: aload         5
     161: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     164: goto          70
     167: aload         8
     169: aload         10
     171: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     174: invokeinterface #98,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.acquireUnderreplicatedLedger:(J)V
     179: aload         4
     181: invokevirtual #99                 // Method java/util/concurrent/Semaphore.acquire:()V
     184: aload_0
     185: getfield      #2                  // Field ledgerManager:Lorg/apache/bookkeeper/meta/LedgerManager;
     188: aload         10
     190: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     193: invokeinterface #61,  3           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.readLedgerMetadata:(J)Ljava/util/concurrent/CompletableFuture;
     198: aload_0
     199: aload_3
     200: aload         10
     202: aload_2
     203: aload         4
     205: aload         5
     207: aload         8
     209: invokedynamic #100,  0            // InvokeDynamic #1:accept:(Lorg/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector;Ljava/util/Set;Ljava/lang/Long;Lorg/apache/bookkeeper/bookie/GarbageCollector$GarbageCleaner;Ljava/util/concurrent/Semaphore;Ljava/util/concurrent/CountDownLatch;Lorg/apache/bookkeeper/meta/LedgerUnderreplicationManager;)Ljava/util/function/BiConsumer;
     214: invokevirtual #101                // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
     217: pop
     218: goto          240
     221: astore        11
     223: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     226: ldc           #102                // String Exception when iterating through the ledgers to check for over-replication
     228: aload         11
     230: invokeinterface #103,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     235: aload         5
     237: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
     240: goto          70
     243: aload         5
     245: invokevirtual #104                // Method java/util/concurrent/CountDownLatch.await:()V
     248: aload_1
     249: aload_3
     250: invokeinterface #105,  2          // InterfaceMethod java/util/Set.removeAll:(Ljava/util/Collection;)Z
     255: pop
     256: aload_3
     257: astore        9
     259: aload         8
     261: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     264: iconst_0
     265: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     270: ifnull        280
     273: aload         8
     275: invokeinterface #108,  1          // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.close:()V
     280: aload         7
     282: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     285: iconst_0
     286: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     291: ifnull        301
     294: aload         7
     296: invokeinterface #109,  1          // InterfaceMethod org/apache/bookkeeper/meta/LedgerManagerFactory.close:()V
     301: aload         6
     303: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     306: iconst_0
     307: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     312: ifnull        322
     315: aload         6
     317: invokeinterface #110,  1          // InterfaceMethod org/apache/bookkeeper/meta/MetadataBookieDriver.close:()V
     322: aload         9
     324: areturn
     325: astore        12
     327: aload         8
     329: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     332: iconst_0
     333: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     338: ifnull        348
     341: aload         8
     343: invokeinterface #108,  1          // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.close:()V
     348: aload         12
     350: athrow
     351: astore        13
     353: aload         7
     355: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     358: iconst_0
     359: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     364: ifnull        374
     367: aload         7
     369: invokeinterface #109,  1          // InterfaceMethod org/apache/bookkeeper/meta/LedgerManagerFactory.close:()V
     374: aload         13
     376: athrow
     377: astore        14
     379: aload         6
     381: invokestatic  #106                // Method java/util/Collections.singletonList:(Ljava/lang/Object;)Ljava/util/List;
     384: iconst_0
     385: invokeinterface #107,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     390: ifnull        400
     393: aload         6
     395: invokeinterface #110,  1          // InterfaceMethod org/apache/bookkeeper/meta/MetadataBookieDriver.close:()V
     400: aload         14
     402: athrow
    Exception table:
       from    to  target type
          92   128   134   Class java/lang/Throwable
         144   164   221   Class java/lang/Throwable
         167   218   221   Class java/lang/Throwable
          62   259   325   any
         325   327   325   any
          53   280   351   any
         325   353   351   any
          44   301   377   any
         325   379   377   any

  private static org.apache.bookkeeper.meta.MetadataBookieDriver instantiateMetadataDriver(org.apache.bookkeeper.conf.ServerConfiguration, org.apache.bookkeeper.stats.StatsLogger) throws org.apache.bookkeeper.bookie.BookieException;
    Code:
       0: aload_0
       1: invokevirtual #111                // Method org/apache/bookkeeper/conf/ServerConfiguration.getMetadataServiceUri:()Ljava/lang/String;
       4: astore_2
       5: aload_2
       6: invokestatic  #112                // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
       9: invokestatic  #113                // Method org/apache/bookkeeper/meta/MetadataDrivers.getBookieDriver:(Ljava/net/URI;)Lorg/apache/bookkeeper/meta/MetadataBookieDriver;
      12: astore_3
      13: aload_3
      14: aload_0
      15: invokedynamic #114,  0            // InvokeDynamic #2:onRegistrationExpired:()Lorg/apache/bookkeeper/discover/RegistrationManager$RegistrationListener;
      20: aload_1
      21: invokeinterface #115,  4          // InterfaceMethod org/apache/bookkeeper/meta/MetadataBookieDriver.initialize:(Lorg/apache/bookkeeper/conf/ServerConfiguration;Lorg/apache/bookkeeper/discover/RegistrationManager$RegistrationListener;Lorg/apache/bookkeeper/stats/StatsLogger;)Lorg/apache/bookkeeper/meta/MetadataBookieDriver;
      26: pop
      27: aload_3
      28: areturn
      29: astore_2
      30: new           #117                // class org/apache/bookkeeper/bookie/BookieException$MetadataStoreException
      33: dup
      34: ldc           #118                // String Failed to initialize metadata bookie driver
      36: aload_2
      37: invokespecial #119                // Method org/apache/bookkeeper/bookie/BookieException$MetadataStoreException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      40: athrow
      41: astore_2
      42: new           #121                // class org/apache/bookkeeper/bookie/BookieException$BookieIllegalOpException
      45: dup
      46: aload_2
      47: invokespecial #122                // Method org/apache/bookkeeper/bookie/BookieException$BookieIllegalOpException."<init>":(Ljava/lang/Throwable;)V
      50: athrow
    Exception table:
       from    to  target type
           0    28    29   Class org/apache/bookkeeper/meta/exceptions/MetadataException
           0    28    41   Class org/apache/commons/configuration/ConfigurationException

  private boolean isNotBookieIncludedInLedgerEnsembles(org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>);
    Code:
       0: aload_1
       1: invokevirtual #71                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
       4: checkcast     #72                 // class org/apache/bookkeeper/client/api/LedgerMetadata
       7: invokeinterface #123,  1          // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.isClosed:()Z
      12: ifne          17
      15: iconst_0
      16: ireturn
      17: aload_1
      18: invokevirtual #71                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
      21: checkcast     #72                 // class org/apache/bookkeeper/client/api/LedgerMetadata
      24: invokeinterface #73,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getAllEnsembles:()Ljava/util/NavigableMap;
      29: astore_2
      30: aload_2
      31: invokeinterface #124,  1          // InterfaceMethod java/util/SortedMap.values:()Ljava/util/Collection;
      36: invokeinterface #125,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      41: astore_3
      42: aload_3
      43: invokeinterface #56,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      48: ifeq          81
      51: aload_3
      52: invokeinterface #57,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      57: checkcast     #126                // class java/util/List
      60: astore        4
      62: aload         4
      64: aload_0
      65: getfield      #6                  // Field selfBookieAddress:Lorg/apache/bookkeeper/net/BookieId;
      68: invokeinterface #127,  2          // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      73: ifeq          78
      76: iconst_0
      77: ireturn
      78: goto          42
      81: iconst_1
      82: ireturn

  private static void lambda$instantiateMetadataDriver$2();
    Code:
       0: return

  private void lambda$removeOverReplicatedledgers$1(java.util.Set, java.lang.Long, org.apache.bookkeeper.bookie.GarbageCollector$GarbageCleaner, java.util.concurrent.Semaphore, java.util.concurrent.CountDownLatch, org.apache.bookkeeper.meta.LedgerUnderreplicationManager, org.apache.bookkeeper.versioning.Versioned, java.lang.Throwable);
    Code:
       0: aload         8
       2: ifnonnull     32
       5: aload_0
       6: aload         7
       8: invokespecial #95                 // Method isNotBookieIncludedInLedgerEnsembles:(Lorg/apache/bookkeeper/versioning/Versioned;)Z
      11: ifeq          32
      14: aload_1
      15: aload_2
      16: invokeinterface #128,  2          // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      21: pop
      22: aload_3
      23: aload_2
      24: invokevirtual #47                 // Method java/lang/Long.longValue:()J
      27: invokeinterface #79,  3           // InterfaceMethod org/apache/bookkeeper/bookie/GarbageCollector$GarbageCleaner.clean:(J)V
      32: aload         4
      34: invokevirtual #129                // Method java/util/concurrent/Semaphore.release:()V
      37: aload         5
      39: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
      42: aload         6
      44: aload_2
      45: invokevirtual #47                 // Method java/lang/Long.longValue:()J
      48: invokeinterface #130,  3          // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.releaseUnderreplicatedLedger:(J)V
      53: goto          118
      56: astore        9
      58: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
      61: ldc           #131                // String Exception when removing underreplicated lock for ledger {}
      63: aload_2
      64: aload         9
      66: invokeinterface #132,  4          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      71: goto          118
      74: astore        10
      76: aload         4
      78: invokevirtual #129                // Method java/util/concurrent/Semaphore.release:()V
      81: aload         5
      83: invokevirtual #96                 // Method java/util/concurrent/CountDownLatch.countDown:()V
      86: aload         6
      88: aload_2
      89: invokevirtual #47                 // Method java/lang/Long.longValue:()J
      92: invokeinterface #130,  3          // InterfaceMethod org/apache/bookkeeper/meta/LedgerUnderreplicationManager.releaseUnderreplicatedLedger:(J)V
      97: goto          115
     100: astore        11
     102: getstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
     105: ldc           #131                // String Exception when removing underreplicated lock for ledger {}
     107: aload_2
     108: aload         11
     110: invokeinterface #132,  4          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     115: aload         10
     117: athrow
     118: return
    Exception table:
       from    to  target type
          42    53    56   Class java/lang/Throwable
           0    32    74   any
          86    97   100   Class java/lang/Throwable
          74    76    74   any

  private void lambda$gc$0(java.util.concurrent.atomic.AtomicBoolean, java.lang.Long, java.util.List);
    Code:
       0: aload_3
       1: ifnull        22
       4: aload_3
       5: aload_0
       6: getfield      #6                  // Field selfBookieAddress:Lorg/apache/bookkeeper/net/BookieId;
       9: invokeinterface #127,  2          // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      14: ifeq          22
      17: aload_1
      18: iconst_1
      19: invokevirtual #59                 // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
      22: return

  static {};
    Code:
       0: ldc           #85                 // class org/apache/bookkeeper/bookie/ScanAndCompareGarbageCollector
       2: invokestatic  #133                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #13                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

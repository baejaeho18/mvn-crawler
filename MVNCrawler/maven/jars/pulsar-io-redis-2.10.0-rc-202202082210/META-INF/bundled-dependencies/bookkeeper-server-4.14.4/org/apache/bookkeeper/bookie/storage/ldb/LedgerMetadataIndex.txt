Compiled from "LedgerMetadataIndex.java"
public class org.apache.bookkeeper.bookie.storage.ldb.LedgerMetadataIndex implements java.io.Closeable {
  private final org.apache.bookkeeper.util.collections.ConcurrentLongHashMap<org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorageDataFormats$LedgerData> ledgers;

  private final java.util.concurrent.atomic.AtomicInteger ledgersCount;

  private final org.apache.bookkeeper.bookie.storage.ldb.KeyValueStorage ledgersDb;

  private final org.apache.bookkeeper.bookie.storage.ldb.LedgerMetadataIndexStats stats;

  private final java.util.concurrent.ConcurrentLinkedQueue<java.util.Map$Entry<java.lang.Long, org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorageDataFormats$LedgerData>> pendingLedgersUpdates;

  private final java.util.concurrent.ConcurrentLinkedQueue<java.lang.Long> pendingDeletedLedgers;

  private static final org.slf4j.Logger log;

  public org.apache.bookkeeper.bookie.storage.ldb.LedgerMetadataIndex(org.apache.bookkeeper.conf.ServerConfiguration, org.apache.bookkeeper.bookie.storage.ldb.KeyValueStorageFactory, java.lang.String, org.apache.bookkeeper.stats.StatsLogger) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_2
       6: aload_3
       7: ldc           #2                  // String ledgers
       9: getstatic     #3                  // Field org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageFactory$DbConfigType.Small:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageFactory$DbConfigType;
      12: aload_1
      13: invokeinterface #4,  5            // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageFactory.newKeyValueStorage:(Ljava/lang/String;Ljava/lang/String;Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorageFactory$DbConfigType;Lorg/apache/bookkeeper/conf/ServerConfiguration;)Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
      18: putfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
      21: aload_0
      22: new           #6                  // class org/apache/bookkeeper/util/collections/ConcurrentLongHashMap
      25: dup
      26: invokespecial #7                  // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap."<init>":()V
      29: putfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
      32: aload_0
      33: new           #9                  // class java/util/concurrent/atomic/AtomicInteger
      36: dup
      37: invokespecial #10                 // Method java/util/concurrent/atomic/AtomicInteger."<init>":()V
      40: putfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
      43: aload_0
      44: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
      47: invokeinterface #12,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.iterator:()Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage$CloseableIterator;
      52: astore        5
      54: aload         5
      56: invokeinterface #13,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage$CloseableIterator.hasNext:()Z
      61: ifeq          130
      64: aload         5
      66: invokeinterface #14,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage$CloseableIterator.next:()Ljava/lang/Object;
      71: checkcast     #15                 // class java/util/Map$Entry
      74: astore        6
      76: aload         6
      78: invokeinterface #16,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      83: checkcast     #17                 // class "[B"
      86: iconst_0
      87: invokestatic  #18                 // Method org/apache/bookkeeper/bookie/storage/ldb/ArrayUtil.getLong:([BI)J
      90: lstore        7
      92: aload         6
      94: invokeinterface #19,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      99: checkcast     #17                 // class "[B"
     102: invokestatic  #20                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.parseFrom:([B)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
     105: astore        9
     107: aload_0
     108: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
     111: lload         7
     113: aload         9
     115: invokevirtual #21                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.put:(JLjava/lang/Object;)Ljava/lang/Object;
     118: pop
     119: aload_0
     120: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
     123: invokevirtual #22                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     126: pop
     127: goto          54
     130: aload         5
     132: invokeinterface #23,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage$CloseableIterator.close:()V
     137: goto          152
     140: astore        10
     142: aload         5
     144: invokeinterface #23,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage$CloseableIterator.close:()V
     149: aload         10
     151: athrow
     152: aload_0
     153: new           #24                 // class java/util/concurrent/ConcurrentLinkedQueue
     156: dup
     157: invokespecial #25                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
     160: putfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
     163: aload_0
     164: new           #24                 // class java/util/concurrent/ConcurrentLinkedQueue
     167: dup
     168: invokespecial #25                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
     171: putfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
     174: aload_0
     175: new           #28                 // class org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndexStats
     178: dup
     179: aload         4
     181: aload_0
     182: invokedynamic #29,  0             // InvokeDynamic #0:get:(Lorg/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex;)Ljava/util/function/Supplier;
     187: invokespecial #30                 // Method org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndexStats."<init>":(Lorg/apache/bookkeeper/stats/StatsLogger;Ljava/util/function/Supplier;)V
     190: putfield      #31                 // Field stats:Lorg/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndexStats;
     193: return
    Exception table:
       from    to  target type
          54   130   140   any
         140   142   140   any

  public void close() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
       4: invokeinterface #32,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.close:()V
       9: return

  public org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorageDataFormats$LedgerData get(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
       4: lload_1
       5: invokevirtual #33                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.get:(J)Ljava/lang/Object;
       8: checkcast     #34                 // class org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData
      11: astore_3
      12: aload_3
      13: ifnonnull     50
      16: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      19: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      24: ifeq          41
      27: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      30: ldc           #37                 // String Ledger not found {}
      32: lload_1
      33: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      36: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      41: new           #40                 // class org/apache/bookkeeper/bookie/Bookie$NoLedgerException
      44: dup
      45: lload_1
      46: invokespecial #41                 // Method org/apache/bookkeeper/bookie/Bookie$NoLedgerException."<init>":(J)V
      49: athrow
      50: aload_3
      51: areturn

  public void set(long, org.apache.bookkeeper.bookie.storage.ldb.DbLedgerStorageDataFormats$LedgerData) throws java.io.IOException;
    Code:
       0: aload_3
       1: invokestatic  #42                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.newBuilder:(Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
       4: iconst_1
       5: invokevirtual #43                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setExists:(Z)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
       8: invokevirtual #44                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.build:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
      11: astore_3
      12: aload_0
      13: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
      16: lload_1
      17: aload_3
      18: invokevirtual #21                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.put:(JLjava/lang/Object;)Ljava/lang/Object;
      21: ifnonnull     57
      24: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      27: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      32: ifeq          49
      35: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      38: ldc           #45                 // String Added new ledger {}
      40: lload_1
      41: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      44: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      49: aload_0
      50: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
      53: invokevirtual #22                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
      56: pop
      57: aload_0
      58: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
      61: new           #46                 // class java/util/AbstractMap$SimpleEntry
      64: dup
      65: lload_1
      66: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      69: aload_3
      70: invokespecial #47                 // Method java/util/AbstractMap$SimpleEntry."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
      73: invokevirtual #48                 // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
      76: pop
      77: aload_0
      78: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
      81: lload_1
      82: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      85: invokevirtual #49                 // Method java/util/concurrent/ConcurrentLinkedQueue.remove:(Ljava/lang/Object;)Z
      88: pop
      89: return

  public void delete(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
       4: lload_1
       5: invokevirtual #50                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.remove:(J)Ljava/lang/Object;
       8: ifnull        44
      11: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      14: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      19: ifeq          36
      22: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      25: ldc           #51                 // String Removed ledger {}
      27: lload_1
      28: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      31: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      36: aload_0
      37: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
      40: invokevirtual #52                 // Method java/util/concurrent/atomic/AtomicInteger.decrementAndGet:()I
      43: pop
      44: aload_0
      45: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
      48: lload_1
      49: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      52: invokevirtual #48                 // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
      55: pop
      56: aload_0
      57: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
      60: lload_1
      61: invokedynamic #53,  0             // InvokeDynamic #1:test:(J)Ljava/util/function/Predicate;
      66: invokevirtual #54                 // Method java/util/concurrent/ConcurrentLinkedQueue.removeIf:(Ljava/util/function/Predicate;)Z
      69: pop
      70: return

  public java.lang.Iterable<java.lang.Long> getActiveLedgersInRange(long, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
       4: invokevirtual #55                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.keys:()Ljava/util/List;
       7: new           #56                 // class org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex$1
      10: dup
      11: aload_0
      12: lload_1
      13: lload_3
      14: invokespecial #57                 // Method org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex$1."<init>":(Lorg/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex;JJ)V
      17: invokestatic  #58                 // Method com/google/common/collect/Iterables.filter:(Ljava/lang/Iterable;Lcom/google/common/base/Predicate;)Ljava/lang/Iterable;
      20: areturn

  public boolean setFenced(long) throws java.io.IOException;
    Code:
       0: aload_0
       1: lload_1
       2: invokevirtual #59                 // Method get:(J)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
       5: astore_3
       6: aload_3
       7: invokevirtual #60                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.getFenced:()Z
      10: ifeq          15
      13: iconst_0
      14: ireturn
      15: aload_3
      16: invokestatic  #42                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.newBuilder:(Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      19: iconst_1
      20: invokevirtual #61                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setFenced:(Z)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      23: invokevirtual #44                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.build:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
      26: astore        4
      28: aload_0
      29: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
      32: lload_1
      33: aload         4
      35: invokevirtual #21                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.put:(JLjava/lang/Object;)Ljava/lang/Object;
      38: ifnonnull     77
      41: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      44: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      49: ifeq          66
      52: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      55: ldc           #62                 // String Re-inserted fenced ledger {}
      57: lload_1
      58: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      61: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      66: aload_0
      67: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
      70: invokevirtual #22                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
      73: pop
      74: goto          102
      77: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      80: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      85: ifeq          102
      88: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      91: ldc           #63                 // String Set fenced ledger {}
      93: lload_1
      94: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      97: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     102: aload_0
     103: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
     106: new           #46                 // class java/util/AbstractMap$SimpleEntry
     109: dup
     110: lload_1
     111: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     114: aload         4
     116: invokespecial #47                 // Method java/util/AbstractMap$SimpleEntry."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     119: invokevirtual #48                 // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
     122: pop
     123: aload_0
     124: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
     127: lload_1
     128: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     131: invokevirtual #49                 // Method java/util/concurrent/ConcurrentLinkedQueue.remove:(Ljava/lang/Object;)Z
     134: pop
     135: iconst_1
     136: ireturn

  public void setMasterKey(long, byte[]) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
       4: lload_1
       5: invokevirtual #33                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.get:(J)Ljava/lang/Object;
       8: checkcast     #34                 // class org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData
      11: astore        4
      13: aload         4
      15: ifnonnull     69
      18: invokestatic  #64                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.newBuilder:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      21: iconst_1
      22: invokevirtual #43                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setExists:(Z)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      25: iconst_0
      26: invokevirtual #61                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setFenced:(Z)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      29: aload_3
      30: invokestatic  #65                 // Method com/google/protobuf/ByteString.copyFrom:([B)Lcom/google/protobuf/ByteString;
      33: invokevirtual #66                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setMasterKey:(Lcom/google/protobuf/ByteString;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      36: invokevirtual #44                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.build:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
      39: astore        4
      41: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      44: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      49: ifeq          174
      52: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      55: ldc           #67                 // String Inserting new ledger {}
      57: lload_1
      58: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      61: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      66: goto          174
      69: aload         4
      71: invokevirtual #68                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.getMasterKey:()Lcom/google/protobuf/ByteString;
      74: invokevirtual #69                 // Method com/google/protobuf/ByteString.toByteArray:()[B
      77: astore        5
      79: aload         5
      81: invokestatic  #70                 // Method org/apache/bookkeeper/bookie/storage/ldb/ArrayUtil.isArrayAllZeros:([B)Z
      84: ifeq          131
      87: aload         4
      89: invokestatic  #42                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.newBuilder:(Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      92: aload_3
      93: invokestatic  #65                 // Method com/google/protobuf/ByteString.copyFrom:([B)Lcom/google/protobuf/ByteString;
      96: invokevirtual #66                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setMasterKey:(Lcom/google/protobuf/ByteString;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      99: invokevirtual #44                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.build:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
     102: astore        4
     104: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
     107: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     112: ifeq          174
     115: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
     118: ldc           #71                 // String Replace old master key {} with new master key {}
     120: aload         5
     122: aload_3
     123: invokeinterface #72,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     128: goto          174
     131: aload         5
     133: aload_3
     134: invokestatic  #73                 // Method java/util/Arrays.equals:([B[B)Z
     137: ifne          174
     140: aload_3
     141: invokestatic  #70                 // Method org/apache/bookkeeper/bookie/storage/ldb/ArrayUtil.isArrayAllZeros:([B)Z
     144: ifne          174
     147: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
     150: ldc           #74                 // String Ledger {} masterKey in db can only be set once.
     152: lload_1
     153: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     156: invokeinterface #75,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     161: new           #76                 // class java/io/IOException
     164: dup
     165: bipush        -100
     167: invokestatic  #78                 // Method org/apache/bookkeeper/bookie/BookieException.create:(I)Lorg/apache/bookkeeper/bookie/BookieException;
     170: invokespecial #79                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     173: athrow
     174: aload_0
     175: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
     178: lload_1
     179: aload         4
     181: invokevirtual #21                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.put:(JLjava/lang/Object;)Ljava/lang/Object;
     184: ifnonnull     195
     187: aload_0
     188: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
     191: invokevirtual #22                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     194: pop
     195: aload_0
     196: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
     199: new           #46                 // class java/util/AbstractMap$SimpleEntry
     202: dup
     203: lload_1
     204: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     207: aload         4
     209: invokespecial #47                 // Method java/util/AbstractMap$SimpleEntry."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     212: invokevirtual #48                 // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
     215: pop
     216: aload_0
     217: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
     220: lload_1
     221: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     224: invokevirtual #49                 // Method java/util/concurrent/ConcurrentLinkedQueue.remove:(Ljava/lang/Object;)Z
     227: pop
     228: return

  public void flush() throws java.io.IOException;
    Code:
       0: invokestatic  #80                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.get:()Lorg/apache/bookkeeper/bookie/storage/ldb/LongWrapper;
       3: astore_1
       4: iconst_0
       5: istore_2
       6: aload_0
       7: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
      10: invokevirtual #81                 // Method java/util/concurrent/ConcurrentLinkedQueue.isEmpty:()Z
      13: ifne          78
      16: aload_0
      17: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
      20: invokevirtual #82                 // Method java/util/concurrent/ConcurrentLinkedQueue.poll:()Ljava/lang/Object;
      23: checkcast     #15                 // class java/util/Map$Entry
      26: astore_3
      27: aload_1
      28: aload_3
      29: invokeinterface #16,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      34: checkcast     #83                 // class java/lang/Long
      37: invokevirtual #84                 // Method java/lang/Long.longValue:()J
      40: invokevirtual #85                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.set:(J)V
      43: aload_3
      44: invokeinterface #19,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      49: checkcast     #34                 // class org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData
      52: invokevirtual #86                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.toByteArray:()[B
      55: astore        4
      57: aload_0
      58: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
      61: aload_1
      62: getfield      #87                 // Field org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.array:[B
      65: aload         4
      67: invokeinterface #88,  3           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.put:([B[B)V
      72: iinc          2, 1
      75: goto          6
      78: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      81: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      86: ifeq          103
      89: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      92: ldc           #89                 // String Persisting updates to {} ledgers
      94: iload_2
      95: invokestatic  #90                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      98: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     103: aload_0
     104: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
     107: invokeinterface #91,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.sync:()V
     112: aload_1
     113: invokevirtual #92                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.recycle:()V
     116: return

  public void removeDeletedLedgers() throws java.io.IOException;
    Code:
       0: invokestatic  #80                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.get:()Lorg/apache/bookkeeper/bookie/storage/ldb/LongWrapper;
       3: astore_1
       4: aload_1
       5: getfield      #87                 // Field org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.array:[B
       8: arraylength
       9: newarray       byte
      11: astore_2
      12: iconst_0
      13: istore_3
      14: aload_0
      15: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
      18: invokevirtual #81                 // Method java/util/concurrent/ConcurrentLinkedQueue.isEmpty:()Z
      21: ifne          80
      24: aload_0
      25: getfield      #27                 // Field pendingDeletedLedgers:Ljava/util/concurrent/ConcurrentLinkedQueue;
      28: invokevirtual #82                 // Method java/util/concurrent/ConcurrentLinkedQueue.poll:()Ljava/lang/Object;
      31: checkcast     #83                 // class java/lang/Long
      34: invokevirtual #84                 // Method java/lang/Long.longValue:()J
      37: lstore        4
      39: aload_1
      40: lload         4
      42: invokevirtual #85                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.set:(J)V
      45: aload_0
      46: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
      49: aload_1
      50: getfield      #87                 // Field org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.array:[B
      53: invokeinterface #93,  2           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.delete:([B)V
      58: iload_3
      59: iinc          3, 1
      62: ifne          77
      65: aload_1
      66: getfield      #87                 // Field org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.array:[B
      69: iconst_0
      70: aload_2
      71: iconst_0
      72: aload_2
      73: arraylength
      74: invokestatic  #94                 // Method java/lang/System.arraycopy:(Ljava/lang/Object;ILjava/lang/Object;II)V
      77: goto          14
      80: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      83: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      88: ifeq          105
      91: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      94: ldc           #95                 // String Persisting deletes of ledgers {}
      96: iload_3
      97: invokestatic  #90                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     100: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     105: aload_0
     106: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
     109: invokeinterface #91,  1           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.sync:()V
     114: iload_3
     115: ifeq          132
     118: aload_0
     119: getfield      #5                  // Field ledgersDb:Lorg/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage;
     122: aload_2
     123: aload_1
     124: getfield      #87                 // Field org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.array:[B
     127: invokeinterface #96,  3           // InterfaceMethod org/apache/bookkeeper/bookie/storage/ldb/KeyValueStorage.compact:([B[B)V
     132: aload_1
     133: invokevirtual #92                 // Method org/apache/bookkeeper/bookie/storage/ldb/LongWrapper.recycle:()V
     136: return

  void setExplicitLac(long, io.netty.buffer.ByteBuf) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
       4: lload_1
       5: invokevirtual #33                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.get:(J)Ljava/lang/Object;
       8: checkcast     #34                 // class org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData
      11: astore        4
      13: aload         4
      15: ifnull        98
      18: aload         4
      20: invokestatic  #42                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData.newBuilder:(Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      23: aload_3
      24: invokevirtual #97                 // Method io/netty/buffer/ByteBuf.nioBuffer:()Ljava/nio/ByteBuffer;
      27: invokestatic  #98                 // Method com/google/protobuf/ByteString.copyFrom:(Ljava/nio/ByteBuffer;)Lcom/google/protobuf/ByteString;
      30: invokevirtual #99                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.setExplicitLac:(Lcom/google/protobuf/ByteString;)Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder;
      33: invokevirtual #44                 // Method org/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData$Builder.build:()Lorg/apache/bookkeeper/bookie/storage/ldb/DbLedgerStorageDataFormats$LedgerData;
      36: astore        5
      38: aload_0
      39: getfield      #8                  // Field ledgers:Lorg/apache/bookkeeper/util/collections/ConcurrentLongHashMap;
      42: lload_1
      43: aload         5
      45: invokevirtual #21                 // Method org/apache/bookkeeper/util/collections/ConcurrentLongHashMap.put:(JLjava/lang/Object;)Ljava/lang/Object;
      48: ifnonnull     52
      51: return
      52: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      55: invokeinterface #36,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      60: ifeq          77
      63: getstatic     #35                 // Field log:Lorg/slf4j/Logger;
      66: ldc           #100                // String Set explicitLac on ledger {}
      68: lload_1
      69: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      72: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      77: aload_0
      78: getfield      #26                 // Field pendingLedgersUpdates:Ljava/util/concurrent/ConcurrentLinkedQueue;
      81: new           #46                 // class java/util/AbstractMap$SimpleEntry
      84: dup
      85: lload_1
      86: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      89: aload         5
      91: invokespecial #47                 // Method java/util/AbstractMap$SimpleEntry."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
      94: invokevirtual #48                 // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
      97: pop
      98: return

  private static boolean lambda$delete$1(long, java.util.Map$Entry);
    Code:
       0: aload_2
       1: invokeinterface #16,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
       6: checkcast     #83                 // class java/lang/Long
       9: invokevirtual #84                 // Method java/lang/Long.longValue:()J
      12: lload_0
      13: lcmp
      14: ifne          21
      17: iconst_1
      18: goto          22
      21: iconst_0
      22: ireturn

  private java.lang.Long lambda$new$0();
    Code:
       0: aload_0
       1: getfield      #11                 // Field ledgersCount:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #101                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
       7: i2l
       8: invokestatic  #38                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      11: areturn

  static {};
    Code:
       0: ldc           #102                // class org/apache/bookkeeper/bookie/storage/ldb/LedgerMetadataIndex
       2: invokestatic  #103                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #35                 // Field log:Lorg/slf4j/Logger;
       8: return
}

Compiled from "PacketProcessorBaseV3.java"
public abstract class org.apache.bookkeeper.proto.PacketProcessorBaseV3 extends org.apache.bookkeeper.util.SafeRunnable {
  final org.apache.bookkeeper.proto.BookkeeperProtocol$Request request;

  final io.netty.channel.Channel channel;

  final org.apache.bookkeeper.proto.BookieRequestProcessor requestProcessor;

  final long enqueueNanos;

  public org.apache.bookkeeper.proto.PacketProcessorBaseV3(org.apache.bookkeeper.proto.BookkeeperProtocol$Request, io.netty.channel.Channel, org.apache.bookkeeper.proto.BookieRequestProcessor);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/bookkeeper/util/SafeRunnable."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field channel:Lio/netty/channel/Channel;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
      19: aload_0
      20: invokestatic  #5                  // Method org/apache/bookkeeper/util/MathUtils.nowInNano:()J
      23: putfield      #6                  // Field enqueueNanos:J
      26: return

  protected void sendResponse(org.apache.bookkeeper.proto.BookkeeperProtocol$StatusCode, java.lang.Object, org.apache.bookkeeper.stats.OpStatsLogger);
    Code:
       0: invokestatic  #5                  // Method org/apache/bookkeeper/util/MathUtils.nowInNano:()J
       3: lstore        4
       5: aload_0
       6: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
       9: invokevirtual #7                  // Method org/apache/bookkeeper/proto/BookieRequestProcessor.getWaitTimeoutOnBackpressureMillis:()J
      12: lstore        6
      14: lload         6
      16: lconst_0
      17: lcmp
      18: iflt          262
      21: aload_0
      22: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      25: invokeinterface #8,  1            // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
      30: ifne          262
      33: aload_0
      34: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
      37: aload_0
      38: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      41: invokevirtual #9                  // Method org/apache/bookkeeper/proto/BookieRequestProcessor.isBlacklisted:(Lio/netty/channel/Channel;)Z
      44: ifne          178
      47: aload_0
      48: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      51: dup
      52: astore        8
      54: monitorenter
      55: aload_0
      56: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      59: invokeinterface #8,  1            // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
      64: ifne          164
      67: aload_0
      68: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
      71: aload_0
      72: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      75: invokevirtual #9                  // Method org/apache/bookkeeper/proto/BookieRequestProcessor.isBlacklisted:(Lio/netty/channel/Channel;)Z
      78: ifne          164
      81: lload         4
      83: getstatic     #10                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      86: lload         6
      88: invokevirtual #11                 // Method java/util/concurrent/TimeUnit.toNanos:(J)J
      91: ladd
      92: lstore        9
      94: aload_0
      95: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
      98: invokeinterface #8,  1            // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
     103: ifne          130
     106: invokestatic  #5                  // Method org/apache/bookkeeper/util/MathUtils.nowInNano:()J
     109: lload         9
     111: lcmp
     112: ifge          130
     115: getstatic     #10                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     118: lconst_1
     119: invokevirtual #12                 // Method java/util/concurrent/TimeUnit.sleep:(J)V
     122: goto          94
     125: astore        11
     127: goto          130
     130: aload_0
     131: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     134: invokeinterface #8,  1            // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
     139: ifne          164
     142: aload_0
     143: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
     146: aload_0
     147: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     150: invokevirtual #14                 // Method org/apache/bookkeeper/proto/BookieRequestProcessor.blacklistChannel:(Lio/netty/channel/Channel;)V
     153: aload_0
     154: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
     157: aload_0
     158: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     161: invokevirtual #15                 // Method org/apache/bookkeeper/proto/BookieRequestProcessor.handleNonWritableChannel:(Lio/netty/channel/Channel;)V
     164: aload         8
     166: monitorexit
     167: goto          178
     170: astore        12
     172: aload         8
     174: monitorexit
     175: aload         12
     177: athrow
     178: aload_0
     179: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     182: invokeinterface #8,  1            // InterfaceMethod io/netty/channel/Channel.isWritable:()Z
     187: ifne          251
     190: getstatic     #16                 // Field LOGGER:Lorg/slf4j/Logger;
     193: ldc           #17                 // String cannot write response to non-writable channel {} for request {}
     195: aload_0
     196: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     199: aload_0
     200: getfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
     203: invokestatic  #18                 // Method org/apache/bookkeeper/util/StringUtils.requestToString:(Ljava/lang/Object;)Ljava/lang/String;
     206: invokeinterface #19,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     211: aload_0
     212: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
     215: invokevirtual #20                 // Method org/apache/bookkeeper/proto/BookieRequestProcessor.getRequestStats:()Lorg/apache/bookkeeper/proto/RequestStats;
     218: invokevirtual #21                 // Method org/apache/bookkeeper/proto/RequestStats.getChannelWriteStats:()Lorg/apache/bookkeeper/stats/OpStatsLogger;
     221: lload         4
     223: invokestatic  #22                 // Method org/apache/bookkeeper/util/MathUtils.elapsedNanos:(J)J
     226: getstatic     #23                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     229: invokeinterface #24,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerFailedEvent:(JLjava/util/concurrent/TimeUnit;)V
     234: aload_3
     235: aload_0
     236: getfield      #6                  // Field enqueueNanos:J
     239: invokestatic  #22                 // Method org/apache/bookkeeper/util/MathUtils.elapsedNanos:(J)J
     242: getstatic     #23                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     245: invokeinterface #24,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerFailedEvent:(JLjava/util/concurrent/TimeUnit;)V
     250: return
     251: aload_0
     252: getfield      #4                  // Field requestProcessor:Lorg/apache/bookkeeper/proto/BookieRequestProcessor;
     255: aload_0
     256: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     259: invokevirtual #25                 // Method org/apache/bookkeeper/proto/BookieRequestProcessor.invalidateBlacklist:(Lio/netty/channel/Channel;)V
     262: aload_0
     263: getfield      #3                  // Field channel:Lio/netty/channel/Channel;
     266: aload_2
     267: invokeinterface #26,  2           // InterfaceMethod io/netty/channel/Channel.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     272: new           #27                 // class org/apache/bookkeeper/proto/PacketProcessorBaseV3$1
     275: dup
     276: aload_0
     277: lload         4
     279: aload_1
     280: aload_3
     281: invokespecial #28                 // Method org/apache/bookkeeper/proto/PacketProcessorBaseV3$1."<init>":(Lorg/apache/bookkeeper/proto/PacketProcessorBaseV3;JLorg/apache/bookkeeper/proto/BookkeeperProtocol$StatusCode;Lorg/apache/bookkeeper/stats/OpStatsLogger;)V
     284: invokeinterface #29,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
     289: pop
     290: return
    Exception table:
       from    to  target type
         115   122   125   Class java/lang/InterruptedException
          55   167   170   any
         170   175   170   any

  protected boolean isVersionCompatible();
    Code:
       0: aload_0
       1: getfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
       4: invokevirtual #30                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$Request.getHeader:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader;
       7: invokevirtual #31                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader.getVersion:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion;
      10: getstatic     #32                 // Field org/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion.VERSION_THREE:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion;
      13: invokevirtual #33                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion.equals:(Ljava/lang/Object;)Z
      16: ireturn

  protected org.apache.bookkeeper.proto.BookkeeperProtocol$BKPacketHeader getHeader();
    Code:
       0: invokestatic  #34                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader.newBuilder:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder;
       3: astore_1
       4: aload_1
       5: getstatic     #32                 // Field org/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion.VERSION_THREE:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion;
       8: invokevirtual #35                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder.setVersion:(Lorg/apache/bookkeeper/proto/BookkeeperProtocol$ProtocolVersion;)Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder;
      11: pop
      12: aload_1
      13: aload_0
      14: getfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
      17: invokevirtual #30                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$Request.getHeader:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader;
      20: invokevirtual #36                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader.getOperation:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$OperationType;
      23: invokevirtual #37                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder.setOperation:(Lorg/apache/bookkeeper/proto/BookkeeperProtocol$OperationType;)Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder;
      26: pop
      27: aload_1
      28: aload_0
      29: getfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
      32: invokevirtual #30                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$Request.getHeader:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader;
      35: invokevirtual #38                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader.getTxnId:()J
      38: invokevirtual #39                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder.setTxnId:(J)Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder;
      41: pop
      42: aload_1
      43: invokevirtual #40                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader$Builder.build:()Lorg/apache/bookkeeper/proto/BookkeeperProtocol$BKPacketHeader;
      46: areturn

  public java.lang.String toString();
    Code:
       0: aload_0
       1: getfield      #2                  // Field request:Lorg/apache/bookkeeper/proto/BookkeeperProtocol$Request;
       4: invokevirtual #41                 // Method org/apache/bookkeeper/proto/BookkeeperProtocol$Request.toString:()Ljava/lang/String;
       7: areturn
}

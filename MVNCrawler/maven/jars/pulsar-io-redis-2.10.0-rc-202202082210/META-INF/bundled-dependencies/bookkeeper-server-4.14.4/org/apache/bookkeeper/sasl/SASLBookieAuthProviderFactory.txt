Compiled from "SASLBookieAuthProviderFactory.java"
public class org.apache.bookkeeper.sasl.SASLBookieAuthProviderFactory implements org.apache.bookkeeper.auth.BookieAuthProvider$Factory,org.apache.bookkeeper.sasl.JAASCredentialsContainer {
  private static final org.slf4j.Logger LOG;

  private java.util.regex.Pattern allowedIdsPattern;

  private org.apache.bookkeeper.conf.ServerConfiguration serverConfiguration;

  private javax.security.auth.Subject subject;

  private boolean isKrbTicket;

  private boolean isUsingTicketCache;

  private java.lang.String principal;

  private java.lang.String loginContextName;

  private javax.security.auth.login.LoginContext login;

  private org.apache.bookkeeper.sasl.TGTRefreshThread ticketRefreshThread;

  public org.apache.bookkeeper.sasl.SASLBookieAuthProviderFactory();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void init(org.apache.bookkeeper.conf.ServerConfiguration) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field serverConfiguration:Lorg/apache/bookkeeper/conf/ServerConfiguration;
       5: aload_1
       6: ldc           #4                  // String saslJaasClientAllowedIds
       8: ldc           #5                  // String .*bookkeeper.*
      10: invokevirtual #6                  // Method org/apache/bookkeeper/conf/ServerConfiguration.getString:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      13: astore_2
      14: aload_0
      15: aload_2
      16: invokestatic  #7                  // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      19: putfield      #8                  // Field allowedIdsPattern:Ljava/util/regex/Pattern;
      22: goto          63
      25: astore_3
      26: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      29: new           #11                 // class java/lang/StringBuilder
      32: dup
      33: invokespecial #12                 // Method java/lang/StringBuilder."<init>":()V
      36: ldc           #13                 // String Invalid regular expression
      38: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      41: aload_2
      42: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      45: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      48: aload_3
      49: invokeinterface #16,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      54: new           #17                 // class java/io/IOException
      57: dup
      58: aload_3
      59: invokespecial #18                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
      62: athrow
      63: aload_0
      64: aload_0
      65: getfield      #2                  // Field serverConfiguration:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      68: ldc           #19                 // String saslJaasBookieSectionName
      70: ldc           #20                 // String Bookie
      72: invokevirtual #6                  // Method org/apache/bookkeeper/conf/ServerConfiguration.getString:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      75: putfield      #21                 // Field loginContextName:Ljava/lang/String;
      78: aload_0
      79: aload_0
      80: invokespecial #22                 // Method loginServer:()Ljavax/security/auth/login/LoginContext;
      83: putfield      #23                 // Field login:Ljavax/security/auth/login/LoginContext;
      86: aload_0
      87: aload_0
      88: getfield      #23                 // Field login:Ljavax/security/auth/login/LoginContext;
      91: invokevirtual #24                 // Method javax/security/auth/login/LoginContext.getSubject:()Ljavax/security/auth/Subject;
      94: putfield      #25                 // Field subject:Ljavax/security/auth/Subject;
      97: aload_0
      98: aload_0
      99: getfield      #25                 // Field subject:Ljavax/security/auth/Subject;
     102: ldc           #26                 // class javax/security/auth/kerberos/KerberosTicket
     104: invokevirtual #27                 // Method javax/security/auth/Subject.getPrivateCredentials:(Ljava/lang/Class;)Ljava/util/Set;
     107: invokeinterface #28,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
     112: ifne          119
     115: iconst_1
     116: goto          120
     119: iconst_0
     120: putfield      #29                 // Field isKrbTicket:Z
     123: aload_0
     124: getfield      #29                 // Field isKrbTicket:Z
     127: ifeq          171
     130: aload_0
     131: aload_0
     132: getfield      #21                 // Field loginContextName:Ljava/lang/String;
     135: invokestatic  #30                 // Method org/apache/bookkeeper/sasl/SaslConstants.isUsingTicketCache:(Ljava/lang/String;)Z
     138: putfield      #31                 // Field isUsingTicketCache:Z
     141: aload_0
     142: aload_0
     143: getfield      #21                 // Field loginContextName:Ljava/lang/String;
     146: invokestatic  #32                 // Method org/apache/bookkeeper/sasl/SaslConstants.getPrincipal:(Ljava/lang/String;)Ljava/lang/String;
     149: putfield      #33                 // Field principal:Ljava/lang/String;
     152: aload_0
     153: new           #34                 // class org/apache/bookkeeper/sasl/TGTRefreshThread
     156: dup
     157: aload_0
     158: invokespecial #35                 // Method org/apache/bookkeeper/sasl/TGTRefreshThread."<init>":(Lorg/apache/bookkeeper/sasl/JAASCredentialsContainer;)V
     161: putfield      #36                 // Field ticketRefreshThread:Lorg/apache/bookkeeper/sasl/TGTRefreshThread;
     164: aload_0
     165: getfield      #36                 // Field ticketRefreshThread:Lorg/apache/bookkeeper/sasl/TGTRefreshThread;
     168: invokevirtual #37                 // Method org/apache/bookkeeper/sasl/TGTRefreshThread.start:()V
     171: goto          184
     174: astore_3
     175: new           #17                 // class java/io/IOException
     178: dup
     179: aload_3
     180: invokespecial #18                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     183: athrow
     184: return
    Exception table:
       from    to  target type
          14    22    25   Class java/util/regex/PatternSyntaxException
          63   171   174   Class javax/security/sasl/SaslException
          63   171   174   Class javax/security/auth/login/LoginException

  public org.apache.bookkeeper.auth.BookieAuthProvider newProvider(org.apache.bookkeeper.proto.BookieConnectionPeer, org.apache.bookkeeper.auth.AuthCallbacks$GenericCallback<java.lang.Void>);
    Code:
       0: new           #40                 // class org/apache/bookkeeper/sasl/SASLBookieAuthProvider
       3: dup
       4: aload_1
       5: aload_2
       6: aload_0
       7: getfield      #2                  // Field serverConfiguration:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      10: aload_0
      11: getfield      #25                 // Field subject:Ljavax/security/auth/Subject;
      14: aload_0
      15: getfield      #8                  // Field allowedIdsPattern:Ljava/util/regex/Pattern;
      18: invokespecial #41                 // Method org/apache/bookkeeper/sasl/SASLBookieAuthProvider."<init>":(Lorg/apache/bookkeeper/proto/BookieConnectionPeer;Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;Lorg/apache/bookkeeper/conf/ServerConfiguration;Ljavax/security/auth/Subject;Ljava/util/regex/Pattern;)V
      21: areturn

  public java.lang.String getPluginName();
    Code:
       0: ldc           #42                 // String sasl
       2: areturn

  public void close();
    Code:
       0: aload_0
       1: getfield      #36                 // Field ticketRefreshThread:Lorg/apache/bookkeeper/sasl/TGTRefreshThread;
       4: ifnull        56
       7: aload_0
       8: getfield      #36                 // Field ticketRefreshThread:Lorg/apache/bookkeeper/sasl/TGTRefreshThread;
      11: invokevirtual #43                 // Method org/apache/bookkeeper/sasl/TGTRefreshThread.interrupt:()V
      14: aload_0
      15: getfield      #36                 // Field ticketRefreshThread:Lorg/apache/bookkeeper/sasl/TGTRefreshThread;
      18: ldc2_w        #44                 // long 10000l
      21: invokevirtual #46                 // Method org/apache/bookkeeper/sasl/TGTRefreshThread.join:(J)V
      24: goto          56
      27: astore_1
      28: invokestatic  #48                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      31: invokevirtual #49                 // Method java/lang/Thread.interrupt:()V
      34: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      37: invokeinterface #50,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      42: ifeq          56
      45: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      48: ldc           #51                 // String interrupted while waiting for TGT reresh thread to stop
      50: aload_1
      51: invokeinterface #52,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      56: return
    Exception table:
       from    to  target type
          14    24    27   Class java/lang/InterruptedException

  public javax.security.auth.Subject getSubject();
    Code:
       0: aload_0
       1: getfield      #25                 // Field subject:Ljavax/security/auth/Subject;
       4: areturn

  public javax.security.auth.login.LoginContext getLogin();
    Code:
       0: aload_0
       1: getfield      #23                 // Field login:Ljavax/security/auth/login/LoginContext;
       4: areturn

  public void setLogin(javax.security.auth.login.LoginContext);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #23                 // Field login:Ljavax/security/auth/login/LoginContext;
       5: return

  public boolean isUsingTicketCache();
    Code:
       0: aload_0
       1: getfield      #31                 // Field isUsingTicketCache:Z
       4: ireturn

  public java.lang.String getPrincipal();
    Code:
       0: aload_0
       1: getfield      #33                 // Field principal:Ljava/lang/String;
       4: areturn

  public org.apache.bookkeeper.conf.AbstractConfiguration getConfiguration();
    Code:
       0: aload_0
       1: getfield      #2                  // Field serverConfiguration:Lorg/apache/bookkeeper/conf/ServerConfiguration;
       4: areturn

  public java.lang.String getLoginContextName();
    Code:
       0: aload_0
       1: getfield      #21                 // Field loginContextName:Ljava/lang/String;
       4: areturn

  private javax.security.auth.login.LoginContext loginServer() throws javax.security.sasl.SaslException, javax.security.auth.login.LoginException;
    Code:
       0: invokestatic  #53                 // Method javax/security/auth/login/Configuration.getConfiguration:()Ljavax/security/auth/login/Configuration;
       3: aload_0
       4: getfield      #21                 // Field loginContextName:Ljava/lang/String;
       7: invokevirtual #54                 // Method javax/security/auth/login/Configuration.getAppConfigurationEntry:(Ljava/lang/String;)[Ljavax/security/auth/login/AppConfigurationEntry;
      10: astore_1
      11: aload_1
      12: ifnonnull     52
      15: getstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
      18: new           #11                 // class java/lang/StringBuilder
      21: dup
      22: invokespecial #12                 // Method java/lang/StringBuilder."<init>":()V
      25: ldc           #55                 // String JAAS not configured or no
      27: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: aload_0
      31: getfield      #21                 // Field loginContextName:Ljava/lang/String;
      34: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: ldc           #56                 // String  present in JAAS Configuration file
      39: invokevirtual #14                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      45: invokeinterface #57,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      50: aconst_null
      51: areturn
      52: new           #58                 // class javax/security/auth/login/LoginContext
      55: dup
      56: aload_0
      57: getfield      #21                 // Field loginContextName:Ljava/lang/String;
      60: new           #59                 // class org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory$ClientCallbackHandler
      63: dup
      64: aconst_null
      65: invokespecial #60                 // Method org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory$ClientCallbackHandler."<init>":(Ljava/lang/String;)V
      68: invokespecial #61                 // Method javax/security/auth/login/LoginContext."<init>":(Ljava/lang/String;Ljavax/security/auth/callback/CallbackHandler;)V
      71: astore_2
      72: aload_2
      73: invokevirtual #62                 // Method javax/security/auth/login/LoginContext.login:()V
      76: aload_2
      77: areturn

  static {};
    Code:
       0: ldc           #63                 // class org/apache/bookkeeper/sasl/SASLBookieAuthProviderFactory
       2: invokestatic  #64                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #10                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

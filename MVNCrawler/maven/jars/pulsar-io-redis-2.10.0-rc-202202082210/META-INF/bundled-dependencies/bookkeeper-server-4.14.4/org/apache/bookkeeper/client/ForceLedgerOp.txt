Compiled from "ForceLedgerOp.java"
class org.apache.bookkeeper.client.ForceLedgerOp extends org.apache.bookkeeper.util.SafeRunnable implements org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$ForceLedgerCallback {
  private static final org.slf4j.Logger LOG;

  final java.util.concurrent.CompletableFuture<java.lang.Void> cb;

  org.apache.bookkeeper.client.DistributionSchedule$AckSet ackSet;

  boolean completed;

  boolean errored;

  int lastSeenError;

  final java.util.List<org.apache.bookkeeper.net.BookieId> currentEnsemble;

  long currentNonDurableLastAddConfirmed;

  final org.apache.bookkeeper.client.LedgerHandle lh;

  final org.apache.bookkeeper.proto.BookieClient bookieClient;

  org.apache.bookkeeper.client.ForceLedgerOp(org.apache.bookkeeper.client.LedgerHandle, org.apache.bookkeeper.proto.BookieClient, java.util.List<org.apache.bookkeeper.net.BookieId>, java.util.concurrent.CompletableFuture<java.lang.Void>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/bookkeeper/util/SafeRunnable."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field completed:Z
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field errored:Z
      14: aload_0
      15: bipush        -12
      17: putfield      #5                  // Field lastSeenError:I
      20: aload_0
      21: ldc2_w        #7                  // long -1l
      24: putfield      #9                  // Field currentNonDurableLastAddConfirmed:J
      27: aload_0
      28: aload_1
      29: putfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
      32: aload_0
      33: aload_2
      34: putfield      #11                 // Field bookieClient:Lorg/apache/bookkeeper/proto/BookieClient;
      37: aload_0
      38: aload         4
      40: putfield      #12                 // Field cb:Ljava/util/concurrent/CompletableFuture;
      43: aload_0
      44: aload_3
      45: putfield      #13                 // Field currentEnsemble:Ljava/util/List;
      48: return

  void sendForceLedgerRequest(int);
    Code:
       0: aload_0
       1: getfield      #11                 // Field bookieClient:Lorg/apache/bookkeeper/proto/BookieClient;
       4: aload_0
       5: getfield      #13                 // Field currentEnsemble:Ljava/util/List;
       8: iload_1
       9: invokeinterface #14,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      14: checkcast     #15                 // class org/apache/bookkeeper/net/BookieId
      17: aload_0
      18: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
      21: getfield      #16                 // Field org/apache/bookkeeper/client/LedgerHandle.ledgerId:J
      24: aload_0
      25: iload_1
      26: invokestatic  #17                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      29: invokeinterface #18,  6           // InterfaceMethod org/apache/bookkeeper/proto/BookieClient.forceLedger:(Lorg/apache/bookkeeper/net/BookieId;JLorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$ForceLedgerCallback;Ljava/lang/Object;)V
      34: return

  public void safeRun();
    Code:
       0: aload_0
       1: invokevirtual #19                 // Method initiate:()V
       4: return

  void initiate();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
       5: getfield      #20                 // Field org/apache/bookkeeper/client/LedgerHandle.pendingAddsSequenceHead:J
       8: putfield      #9                  // Field currentNonDurableLastAddConfirmed:J
      11: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      14: invokeinterface #22,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      19: ifeq          49
      22: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      25: ldc           #23                 // String force {} clientNonDurableLac {}
      27: aload_0
      28: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
      31: getfield      #16                 // Field org/apache/bookkeeper/client/LedgerHandle.ledgerId:J
      34: invokestatic  #24                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      37: aload_0
      38: getfield      #9                  // Field currentNonDurableLastAddConfirmed:J
      41: invokestatic  #24                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      44: invokeinterface #25,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      49: aload_0
      50: aload_0
      51: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
      54: getfield      #26                 // Field org/apache/bookkeeper/client/LedgerHandle.distributionSchedule:Lorg/apache/bookkeeper/client/DistributionSchedule;
      57: invokeinterface #27,  1           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule.getEnsembleAckSet:()Lorg/apache/bookkeeper/client/DistributionSchedule$AckSet;
      62: putfield      #28                 // Field ackSet:Lorg/apache/bookkeeper/client/DistributionSchedule$AckSet;
      65: aload_0
      66: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
      69: invokevirtual #29                 // Method org/apache/bookkeeper/client/LedgerHandle.getDistributionSchedule:()Lorg/apache/bookkeeper/client/DistributionSchedule;
      72: aload_0
      73: getfield      #9                  // Field currentNonDurableLastAddConfirmed:J
      76: invokeinterface #30,  3           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule.getEnsembleSet:(J)Lorg/apache/bookkeeper/client/DistributionSchedule$WriteSet;
      81: astore_1
      82: iconst_0
      83: istore_2
      84: iload_2
      85: aload_1
      86: invokeinterface #31,  1           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule$WriteSet.size:()I
      91: if_icmpge     111
      94: aload_0
      95: aload_1
      96: iload_2
      97: invokeinterface #32,  2           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule$WriteSet.get:(I)I
     102: invokevirtual #33                 // Method sendForceLedgerRequest:(I)V
     105: iinc          2, 1
     108: goto          84
     111: aload_1
     112: invokeinterface #34,  1           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule$WriteSet.recycle:()V
     117: goto          129
     120: astore_3
     121: aload_1
     122: invokeinterface #34,  1           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule$WriteSet.recycle:()V
     127: aload_3
     128: athrow
     129: return
    Exception table:
       from    to  target type
          82   111   120   any

  public void forceLedgerComplete(int, long, org.apache.bookkeeper.net.BookieId, java.lang.Object);
    Code:
       0: aload         5
       2: checkcast     #35                 // class java/lang/Integer
       5: invokevirtual #36                 // Method java/lang/Integer.intValue:()I
       8: istore        6
      10: aload_0
      11: getfield      #2                  // Field completed:Z
      14: ifne          21
      17: iconst_1
      18: goto          22
      21: iconst_0
      22: ldc           #37                 // String We are waiting for all the bookies, it is not expected an early exit
      24: invokestatic  #38                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      27: aload_0
      28: getfield      #3                  // Field errored:Z
      31: ifeq          35
      34: return
      35: iconst_0
      36: iload_1
      37: if_icmpeq     45
      40: aload_0
      41: iload_1
      42: putfield      #5                  // Field lastSeenError:I
      45: iload_1
      46: ifne          129
      49: aload_0
      50: getfield      #28                 // Field ackSet:Lorg/apache/bookkeeper/client/DistributionSchedule$AckSet;
      53: iload         6
      55: invokeinterface #39,  2           // InterfaceMethod org/apache/bookkeeper/client/DistributionSchedule$AckSet.completeBookieAndCheck:(I)Z
      60: ifeq          164
      63: aload_0
      64: iconst_1
      65: putfield      #2                  // Field completed:Z
      68: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      71: invokeinterface #22,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      76: ifeq          100
      79: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      82: ldc           #40                 // String After force on ledger {} updating LastAddConfirmed to {}
      84: lload_2
      85: invokestatic  #24                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      88: aload_0
      89: getfield      #9                  // Field currentNonDurableLastAddConfirmed:J
      92: invokestatic  #24                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      95: invokeinterface #25,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     100: aload_0
     101: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
     104: aload_0
     105: getfield      #9                  // Field currentNonDurableLastAddConfirmed:J
     108: aload_0
     109: getfield      #10                 // Field lh:Lorg/apache/bookkeeper/client/LedgerHandle;
     112: invokevirtual #41                 // Method org/apache/bookkeeper/client/LedgerHandle.getLength:()J
     115: invokevirtual #42                 // Method org/apache/bookkeeper/client/LedgerHandle.updateLastConfirmed:(JJ)V
     118: aload_0
     119: getfield      #12                 // Field cb:Ljava/util/concurrent/CompletableFuture;
     122: aconst_null
     123: invokestatic  #43                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.complete:(Ljava/util/concurrent/CompletableFuture;Ljava/lang/Object;)V
     126: goto          164
     129: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
     132: ldc           #44                 // String ForceLedger did not succeed: Ledger {} on {}
     134: lload_2
     135: invokestatic  #24                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     138: aload         4
     140: invokeinterface #45,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     145: aload_0
     146: iconst_1
     147: putfield      #3                  // Field errored:Z
     150: aload_0
     151: getfield      #12                 // Field cb:Ljava/util/concurrent/CompletableFuture;
     154: aload_0
     155: getfield      #5                  // Field lastSeenError:I
     158: invokestatic  #46                 // Method org/apache/bookkeeper/client/BKException.create:(I)Lorg/apache/bookkeeper/client/BKException;
     161: invokestatic  #47                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.completeExceptionally:(Ljava/util/concurrent/CompletableFuture;Ljava/lang/Throwable;)V
     164: return

  static {};
    Code:
       0: ldc           #48                 // class org/apache/bookkeeper/client/ForceLedgerOp
       2: invokestatic  #49                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

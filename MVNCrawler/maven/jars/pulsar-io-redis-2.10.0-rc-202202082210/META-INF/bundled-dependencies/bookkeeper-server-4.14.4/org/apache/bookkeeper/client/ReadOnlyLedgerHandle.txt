Compiled from "ReadOnlyLedgerHandle.java"
class org.apache.bookkeeper.client.ReadOnlyLedgerHandle extends org.apache.bookkeeper.client.LedgerHandle implements org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$LedgerMetadataListener {
  private static final org.slf4j.Logger LOG;

  private java.lang.Object metadataLock;

  private final java.util.NavigableMap<java.lang.Long, java.util.List<org.apache.bookkeeper.net.BookieId>> newEnsemblesFromRecovery;

  org.apache.bookkeeper.client.ReadOnlyLedgerHandle(org.apache.bookkeeper.client.ClientContext, long, org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>, org.apache.bookkeeper.client.BookKeeper$DigestType, byte[], boolean) throws java.security.GeneralSecurityException, java.lang.NumberFormatException;
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: aload         4
       5: aload         5
       7: aload         6
       9: getstatic     #2                  // Field org/apache/bookkeeper/client/api/WriteFlag.NONE:Ljava/util/EnumSet;
      12: invokespecial #3                  // Method org/apache/bookkeeper/client/LedgerHandle."<init>":(Lorg/apache/bookkeeper/client/ClientContext;JLorg/apache/bookkeeper/versioning/Versioned;Lorg/apache/bookkeeper/client/BookKeeper$DigestType;[BLjava/util/EnumSet;)V
      15: aload_0
      16: new           #4                  // class java/lang/Object
      19: dup
      20: invokespecial #5                  // Method java/lang/Object."<init>":()V
      23: putfield      #6                  // Field metadataLock:Ljava/lang/Object;
      26: aload_0
      27: new           #7                  // class java/util/TreeMap
      30: dup
      31: invokespecial #8                  // Method java/util/TreeMap."<init>":()V
      34: putfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      37: iload         7
      39: ifeq          55
      42: aload_1
      43: invokeinterface #10,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
      48: lload_2
      49: aload_0
      50: invokeinterface #11,  4           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.registerLedgerMetadataListener:(JLorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$LedgerMetadataListener;)V
      55: return

  public void close() throws java.lang.InterruptedException, org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
       4: invokeinterface #10,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
       9: aload_0
      10: getfield      #13                 // Field ledgerId:J
      13: aload_0
      14: invokeinterface #14,  4           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.unregisterLedgerMetadataListener:(JLorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$LedgerMetadataListener;)V
      19: return

  public void asyncClose(org.apache.bookkeeper.client.AsyncCallback$CloseCallback, java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
       4: invokeinterface #10,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
       9: aload_0
      10: getfield      #13                 // Field ledgerId:J
      13: aload_0
      14: invokeinterface #14,  4           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManager.unregisterLedgerMetadataListener:(JLorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$LedgerMetadataListener;)V
      19: aload_1
      20: iconst_0
      21: aload_0
      22: aload_2
      23: invokeinterface #16,  4           // InterfaceMethod org/apache/bookkeeper/client/AsyncCallback$CloseCallback.closeComplete:(ILorg/apache/bookkeeper/client/LedgerHandle;Ljava/lang/Object;)V
      28: return

  public long addEntry(byte[]) throws java.lang.InterruptedException, org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: aload_1
       4: arraylength
       5: invokevirtual #17                 // Method addEntry:([BII)J
       8: lreturn

  public long addEntry(byte[], int, int) throws java.lang.InterruptedException, org.apache.bookkeeper.client.BKException;
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: new           #18                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #19                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #20                 // String Tried to add entry on a Read-Only ledger handle, ledgerid=
      12: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_0
      16: getfield      #13                 // Field ledgerId:J
      19: invokevirtual #22                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      22: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      25: invokeinterface #24,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      30: bipush        -100
      32: invokestatic  #25                 // Method org/apache/bookkeeper/client/BKException.create:(I)Lorg/apache/bookkeeper/client/BKException;
      35: athrow

  public void asyncAddEntry(byte[], org.apache.bookkeeper.client.AsyncCallback$AddCallback, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: aload_1
       4: arraylength
       5: aload_2
       6: aload_3
       7: invokevirtual #26                 // Method asyncAddEntry:([BIILorg/apache/bookkeeper/client/AsyncCallback$AddCallback;Ljava/lang/Object;)V
      10: return

  public void asyncAddEntry(byte[], int, int, org.apache.bookkeeper.client.AsyncCallback$AddCallback, java.lang.Object);
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: new           #18                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #19                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #20                 // String Tried to add entry on a Read-Only ledger handle, ledgerid=
      12: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_0
      16: getfield      #13                 // Field ledgerId:J
      19: invokevirtual #22                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      22: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      25: invokeinterface #24,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      30: aload         4
      32: bipush        -100
      34: aload_0
      35: ldc2_w        #28                 // long -1l
      38: aload         5
      40: invokeinterface #30,  6           // InterfaceMethod org/apache/bookkeeper/client/AsyncCallback$AddCallback.addComplete:(ILorg/apache/bookkeeper/client/LedgerHandle;JLjava/lang/Object;)V
      45: return

  public void onChanged(long, org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>);
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #31,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          26
      11: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      14: ldc           #32                 // String Received ledger metadata update on {} : {}
      16: lload_1
      17: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      20: aload_3
      21: invokeinterface #34,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      26: aload_0
      27: getfield      #13                 // Field ledgerId:J
      30: lload_1
      31: lcmp
      32: ifeq          36
      35: return
      36: aconst_null
      37: aload_3
      38: if_acmpne     42
      41: return
      42: aload_0
      43: invokevirtual #35                 // Method getVersionedLedgerMetadata:()Lorg/apache/bookkeeper/versioning/Versioned;
      46: astore        4
      48: aload         4
      50: invokevirtual #36                 // Method org/apache/bookkeeper/versioning/Versioned.getVersion:()Lorg/apache/bookkeeper/versioning/Version;
      53: aload_3
      54: invokevirtual #36                 // Method org/apache/bookkeeper/versioning/Versioned.getVersion:()Lorg/apache/bookkeeper/versioning/Version;
      57: invokeinterface #37,  2           // InterfaceMethod org/apache/bookkeeper/versioning/Version.compare:(Lorg/apache/bookkeeper/versioning/Version;)Lorg/apache/bookkeeper/versioning/Version$Occurred;
      62: astore        5
      64: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      67: invokeinterface #31,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      72: ifeq          103
      75: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      78: ldc           #38                 // String Try to update metadata from {} to {} : {}
      80: iconst_3
      81: anewarray     #4                  // class java/lang/Object
      84: dup
      85: iconst_0
      86: aload         4
      88: aastore
      89: dup
      90: iconst_1
      91: aload_3
      92: aastore
      93: dup
      94: iconst_2
      95: aload         5
      97: aastore
      98: invokeinterface #39,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     103: getstatic     #40                 // Field org/apache/bookkeeper/versioning/Version$Occurred.BEFORE:Lorg/apache/bookkeeper/versioning/Version$Occurred;
     106: aload         5
     108: if_acmpne     159
     111: aload_0
     112: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
     115: invokeinterface #41,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getMainWorkerPool:()Lorg/apache/bookkeeper/common/util/OrderedExecutor;
     120: aload_0
     121: getfield      #13                 // Field ledgerId:J
     124: new           #42                 // class org/apache/bookkeeper/client/ReadOnlyLedgerHandle$MetadataUpdater
     127: dup
     128: aload_0
     129: aload_3
     130: invokespecial #43                 // Method org/apache/bookkeeper/client/ReadOnlyLedgerHandle$MetadataUpdater."<init>":(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;Lorg/apache/bookkeeper/versioning/Versioned;)V
     133: invokevirtual #44                 // Method org/apache/bookkeeper/common/util/OrderedExecutor.executeOrdered:(JLorg/apache/bookkeeper/common/util/SafeRunnable;)V
     136: goto          159
     139: astore        6
     141: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     144: ldc           #46                 // String Failed on submitting updater to update ledger metadata on ledger {} : {}
     146: aload_0
     147: getfield      #13                 // Field ledgerId:J
     150: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     153: aload_3
     154: invokeinterface #47,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     159: return
    Exception table:
       from    to  target type
         111   136   139   Class java/util/concurrent/RejectedExecutionException

  public java.lang.String toString();
    Code:
       0: ldc           #48                 // String ReadOnlyLedgerHandle(lid = %d, id = %d)
       2: iconst_2
       3: anewarray     #4                  // class java/lang/Object
       6: dup
       7: iconst_0
       8: aload_0
       9: getfield      #13                 // Field ledgerId:J
      12: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      15: aastore
      16: dup
      17: iconst_1
      18: aload_0
      19: invokespecial #49                 // Method java/lang/Object.hashCode:()I
      22: invokestatic  #50                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      25: aastore
      26: invokestatic  #51                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      29: areturn

  protected void initializeWriteHandleState();
    Code:
       0: aload_0
       1: getstatic     #52                 // Field org/apache/bookkeeper/client/ExplicitLacFlushPolicy.VOID_EXPLICITLAC_FLUSH_POLICY:Lorg/apache/bookkeeper/client/ExplicitLacFlushPolicy;
       4: putfield      #53                 // Field explicitLacFlushPolicy:Lorg/apache/bookkeeper/client/ExplicitLacFlushPolicy;
       7: return

  public void asyncReadLastEntry(org.apache.bookkeeper.client.AsyncCallback$ReadCallback, java.lang.Object);
    Code:
       0: aload_0
       1: new           #54                 // class org/apache/bookkeeper/client/ReadOnlyLedgerHandle$1
       4: dup
       5: aload_0
       6: aload_1
       7: invokespecial #55                 // Method org/apache/bookkeeper/client/ReadOnlyLedgerHandle$1."<init>":(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;Lorg/apache/bookkeeper/client/AsyncCallback$ReadCallback;)V
      10: aload_2
      11: invokevirtual #56                 // Method asyncReadLastConfirmed:(Lorg/apache/bookkeeper/client/AsyncCallback$ReadLastConfirmedCallback;Ljava/lang/Object;)V
      14: return

  void handleBookieFailure(java.util.Map<java.lang.Integer, org.apache.bookkeeper.net.BookieId>);
    Code:
       0: aload_0
       1: getfield      #6                  // Field metadataLock:Ljava/lang/Object;
       4: dup
       5: astore_2
       6: monitorenter
       7: ldc           #57                 // String [RecoveryEnsembleChange(ledger:%d)]
       9: iconst_1
      10: anewarray     #4                  // class java/lang/Object
      13: dup
      14: iconst_0
      15: aload_0
      16: getfield      #13                 // Field ledgerId:J
      19: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      22: aastore
      23: invokestatic  #51                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      26: astore_3
      27: aload_0
      28: invokevirtual #58                 // Method getLastAddConfirmed:()J
      31: lstore        4
      33: aload_0
      34: invokevirtual #59                 // Method getLedgerMetadata:()Lorg/apache/bookkeeper/client/api/LedgerMetadata;
      37: astore        6
      39: aload_0
      40: invokevirtual #60                 // Method getCurrentEnsemble:()Ljava/util/List;
      43: astore        7
      45: aload_0
      46: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
      49: invokeinterface #61,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getBookieWatcher:()Lorg/apache/bookkeeper/client/BookieWatcher;
      54: aload         6
      56: aload         7
      58: aload_1
      59: aload_3
      60: invokestatic  #62                 // Method org/apache/bookkeeper/client/EnsembleUtils.replaceBookiesInEnsemble:(Lorg/apache/bookkeeper/client/BookieWatcher;Lorg/apache/bookkeeper/client/api/LedgerMetadata;Ljava/util/List;Ljava/util/Map;Ljava/lang/String;)Ljava/util/List;
      63: astore        8
      65: aload         7
      67: aload         8
      69: invokestatic  #63                 // Method org/apache/bookkeeper/client/EnsembleUtils.diffEnsemble:(Ljava/util/List;Ljava/util/List;)Ljava/util/Set;
      72: astore        9
      74: aload         9
      76: invokeinterface #64,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      81: ifne          111
      84: aload_0
      85: getfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      88: lload         4
      90: lconst_1
      91: ladd
      92: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      95: aload         8
      97: invokeinterface #65,  3           // InterfaceMethod java/util/NavigableMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     102: pop
     103: aload_0
     104: aload         8
     106: aload         9
     108: invokevirtual #66                 // Method unsetSuccessAndSendWriteRequest:(Ljava/util/List;Ljava/util/Set;)V
     111: goto          145
     114: astore        8
     116: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     119: ldc           #68                 // String Could not get additional bookie to remake ensemble, closing ledger: {}
     121: aload_0
     122: getfield      #13                 // Field ledgerId:J
     125: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     128: invokeinterface #69,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     133: aload_0
     134: aload         8
     136: invokevirtual #70                 // Method org/apache/bookkeeper/client/BKException$BKNotEnoughBookiesException.getCode:()I
     139: invokevirtual #71                 // Method handleUnrecoverableErrorDuringAdd:(I)V
     142: aload_2
     143: monitorexit
     144: return
     145: aload_2
     146: monitorexit
     147: goto          157
     150: astore        10
     152: aload_2
     153: monitorexit
     154: aload         10
     156: athrow
     157: return
    Exception table:
       from    to  target type
          45   111   114   Class org/apache/bookkeeper/client/BKException$BKNotEnoughBookiesException
           7   144   150   any
         145   147   150   any
         150   154   150   any

  void handleUnrecoverableErrorDuringAdd(int);
    Code:
       0: aload_0
       1: iload_1
       2: invokevirtual #72                 // Method errorOutPendingAdds:(I)V
       5: return

  void recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$GenericCallback<java.lang.Void>);
    Code:
       0: aload_0
       1: aload_1
       2: aconst_null
       3: iconst_0
       4: invokevirtual #73                 // Method recover:(Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback;Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$ReadEntryListener;Z)V
       7: return

  void recover(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$GenericCallback<java.lang.Void>, org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$ReadEntryListener, boolean);
    Code:
       0: new           #74                 // class org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$TimedGenericCallback
       3: dup
       4: aload_1
       5: iconst_0
       6: aload_0
       7: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
      10: invokeinterface #75,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getClientStats:()Lorg/apache/bookkeeper/client/BookKeeperClientStats;
      15: invokeinterface #76,  1           // InterfaceMethod org/apache/bookkeeper/client/BookKeeperClientStats.getRecoverOpLogger:()Lorg/apache/bookkeeper/stats/OpStatsLogger;
      20: invokespecial #77                 // Method org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$TimedGenericCallback."<init>":(Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback;ILorg/apache/bookkeeper/stats/OpStatsLogger;)V
      23: astore        4
      25: invokedynamic #78,  0             // InvokeDynamic #0:needsUpdate:()Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;
      30: astore        5
      32: iload_3
      33: ifeq          43
      36: invokedynamic #79,  0             // InvokeDynamic #1:needsUpdate:()Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;
      41: astore        5
      43: new           #80                 // class org/apache/bookkeeper/client/MetadataUpdateLoop
      46: dup
      47: aload_0
      48: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
      51: invokeinterface #10,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
      56: aload_0
      57: invokevirtual #81                 // Method getId:()J
      60: aload_0
      61: invokedynamic #82,  0             // InvokeDynamic #2:get:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Ljava/util/function/Supplier;
      66: aload         5
      68: invokedynamic #83,  0             // InvokeDynamic #3:transform:()Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;
      73: aload_0
      74: invokedynamic #84,  0             // InvokeDynamic #4:updateValue:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;
      79: invokespecial #85                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop."<init>":(Lorg/apache/bookkeeper/meta/LedgerManager;JLjava/util/function/Supplier;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;)V
      82: invokevirtual #86                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop.run:()Ljava/util/concurrent/CompletableFuture;
      85: aload_0
      86: aload_2
      87: invokedynamic #87,  0             // InvokeDynamic #5:apply:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$ReadEntryListener;)Ljava/util/function/Function;
      92: invokevirtual #88                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      95: aload_0
      96: invokedynamic #89,  0             // InvokeDynamic #6:apply:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Ljava/util/function/Function;
     101: invokevirtual #88                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
     104: aload         4
     106: invokedynamic #90,  0             // InvokeDynamic #7:accept:(Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback;)Ljava/util/function/BiConsumer;
     111: invokevirtual #91                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
     114: pop
     115: return

  java.util.concurrent.CompletableFuture<org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>> closeRecovered();
    Code:
       0: aload_0
       1: dup
       2: astore        5
       4: monitorenter
       5: aload_0
       6: getfield      #92                 // Field lastAddConfirmed:J
       9: lstore_1
      10: aload_0
      11: getfield      #93                 // Field length:J
      14: lstore_3
      15: aload         5
      17: monitorexit
      18: goto          29
      21: astore        6
      23: aload         5
      25: monitorexit
      26: aload         6
      28: athrow
      29: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      32: ldc           #94                 // String Closing recovered ledger {} at entry {}
      34: aload_0
      35: invokevirtual #81                 // Method getId:()J
      38: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      41: lload_1
      42: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      45: invokeinterface #95,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      50: new           #80                 // class org/apache/bookkeeper/client/MetadataUpdateLoop
      53: dup
      54: aload_0
      55: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
      58: invokeinterface #10,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
      63: aload_0
      64: invokevirtual #81                 // Method getId:()J
      67: aload_0
      68: invokedynamic #82,  0             // InvokeDynamic #2:get:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Ljava/util/function/Supplier;
      73: invokedynamic #96,  0             // InvokeDynamic #8:needsUpdate:()Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;
      78: aload_0
      79: lload_1
      80: lload_3
      81: invokedynamic #97,  0             // InvokeDynamic #9:transform:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;JJ)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;
      86: aload_0
      87: invokedynamic #84,  0             // InvokeDynamic #4:updateValue:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;
      92: invokespecial #85                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop."<init>":(Lorg/apache/bookkeeper/meta/LedgerManager;JLjava/util/function/Supplier;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;)V
      95: invokevirtual #86                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop.run:()Ljava/util/concurrent/CompletableFuture;
      98: astore        5
     100: aload         5
     102: aload_0
     103: invokedynamic #98,  0             // InvokeDynamic #10:run:(Lorg/apache/bookkeeper/client/ReadOnlyLedgerHandle;)Ljava/lang/Runnable;
     108: invokevirtual #99                 // Method java/util/concurrent/CompletableFuture.thenRun:(Ljava/lang/Runnable;)Ljava/util/concurrent/CompletableFuture;
     111: pop
     112: aload         5
     114: areturn
    Exception table:
       from    to  target type
           5    18    21   any
          21    26    21   any

  java.util.List<org.apache.bookkeeper.net.BookieId> getCurrentEnsemble();
    Code:
       0: aload_0
       1: getfield      #6                  // Field metadataLock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      11: invokeinterface #100,  1          // InterfaceMethod java/util/NavigableMap.isEmpty:()Z
      16: ifne          39
      19: aload_0
      20: getfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      23: invokeinterface #101,  1          // InterfaceMethod java/util/NavigableMap.lastEntry:()Ljava/util/Map$Entry;
      28: invokeinterface #102,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      33: checkcast     #103                // class java/util/List
      36: aload_1
      37: monitorexit
      38: areturn
      39: aload_0
      40: invokespecial #104                // Method org/apache/bookkeeper/client/LedgerHandle.getCurrentEnsemble:()Ljava/util/List;
      43: aload_1
      44: monitorexit
      45: areturn
      46: astore_2
      47: aload_1
      48: monitorexit
      49: aload_2
      50: athrow
    Exception table:
       from    to  target type
           7    38    46   any
          39    45    46   any
          46    49    46   any

  private void lambda$closeRecovered$9();
    Code:
       0: aload_0
       1: getfield      #6                  // Field metadataLock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      11: invokeinterface #105,  1          // InterfaceMethod java/util/NavigableMap.clear:()V
      16: aload_1
      17: monitorexit
      18: goto          26
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  private org.apache.bookkeeper.client.api.LedgerMetadata lambda$closeRecovered$8(long, long, org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload         5
       2: invokestatic  #106                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.from:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
       5: astore        6
       7: aload         5
       9: invokestatic  #107                // Method org/apache/bookkeeper/client/LedgerMetadataUtils.getLastEnsembleKey:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)Ljava/lang/Long;
      12: astore        7
      14: aload_0
      15: getfield      #6                  // Field metadataLock:Ljava/lang/Object;
      18: dup
      19: astore        8
      21: monitorenter
      22: aload_0
      23: getfield      #9                  // Field newEnsemblesFromRecovery:Ljava/util/NavigableMap;
      26: invokeinterface #108,  1          // InterfaceMethod java/util/NavigableMap.entrySet:()Ljava/util/Set;
      31: aload         7
      33: aload         6
      35: invokedynamic #109,  0            // InvokeDynamic #11:accept:(Ljava/lang/Long;Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;)Ljava/util/function/Consumer;
      40: invokeinterface #110,  2          // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      45: aload         8
      47: monitorexit
      48: goto          59
      51: astore        9
      53: aload         8
      55: monitorexit
      56: aload         9
      58: athrow
      59: aload         6
      61: invokevirtual #111                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withClosedState:()Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      64: lload_1
      65: invokevirtual #112                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withLastEntryId:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      68: lload_3
      69: invokevirtual #113                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withLength:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      72: invokevirtual #114                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.build:()Lorg/apache/bookkeeper/client/api/LedgerMetadata;
      75: areturn
    Exception table:
       from    to  target type
          22    48    51   any
          51    56    51   any

  private static void lambda$null$7(java.lang.Long, org.apache.bookkeeper.client.LedgerMetadataBuilder, java.util.Map$Entry);
    Code:
       0: aload_2
       1: invokeinterface #115,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
       6: checkcast     #116                // class java/lang/Long
       9: invokevirtual #117                // Method java/lang/Long.longValue:()J
      12: aload_0
      13: invokevirtual #117                // Method java/lang/Long.longValue:()J
      16: lcmp
      17: iflt          24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ldc           #118                // String Once a ledger is in recovery, noone can add ensembles without closing
      27: invokestatic  #119                // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      30: aload_0
      31: aload_2
      32: invokeinterface #115,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      37: invokevirtual #120                // Method java/lang/Long.equals:(Ljava/lang/Object;)Z
      40: ifeq          72
      43: aload_1
      44: aload_2
      45: invokeinterface #115,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      50: checkcast     #116                // class java/lang/Long
      53: invokevirtual #117                // Method java/lang/Long.longValue:()J
      56: aload_2
      57: invokeinterface #102,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      62: checkcast     #103                // class java/util/List
      65: invokevirtual #121                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.replaceEnsembleEntry:(JLjava/util/List;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      68: pop
      69: goto          98
      72: aload_1
      73: aload_2
      74: invokeinterface #115,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      79: checkcast     #116                // class java/lang/Long
      82: invokevirtual #117                // Method java/lang/Long.longValue:()J
      85: aload_2
      86: invokeinterface #102,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      91: checkcast     #103                // class java/util/List
      94: invokevirtual #122                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.newEnsembleEntry:(JLjava/util/List;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      97: pop
      98: return

  private static boolean lambda$closeRecovered$6(org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokeinterface #123,  1          // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getState:()Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       6: getstatic     #124                // Field org/apache/bookkeeper/client/api/LedgerMetadata$State.IN_RECOVERY:Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       9: if_acmpne     16
      12: iconst_1
      13: goto          17
      16: iconst_0
      17: ireturn

  private static void lambda$recover$5(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$GenericCallback, org.apache.bookkeeper.versioning.Versioned, java.lang.Throwable);
    Code:
       0: aload_2
       1: ifnull        21
       4: aload_0
       5: aload_2
       6: sipush        -999
       9: invokestatic  #125                // Method org/apache/bookkeeper/client/BKException.getExceptionCode:(Ljava/lang/Throwable;I)I
      12: aconst_null
      13: invokeinterface #126,  3          // InterfaceMethod org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
      18: goto          29
      21: aload_0
      22: iconst_0
      23: aconst_null
      24: invokeinterface #126,  3          // InterfaceMethod org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
      29: return

  private java.util.concurrent.CompletionStage lambda$recover$4(org.apache.bookkeeper.client.LedgerHandle);
    Code:
       0: aload_0
       1: invokevirtual #127                // Method closeRecovered:()Ljava/util/concurrent/CompletableFuture;
       4: areturn

  private java.util.concurrent.CompletionStage lambda$recover$3(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$ReadEntryListener, org.apache.bookkeeper.versioning.Versioned);
    Code:
       0: aload_2
       1: invokevirtual #128                // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
       4: checkcast     #129                // class org/apache/bookkeeper/client/api/LedgerMetadata
       7: invokeinterface #130,  1          // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.isClosed:()Z
      12: ifeq          20
      15: aload_0
      16: invokestatic  #131                // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
      19: areturn
      20: new           #132                // class org/apache/bookkeeper/client/LedgerRecoveryOp
      23: dup
      24: aload_0
      25: aload_0
      26: getfield      #12                 // Field clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
      29: invokespecial #133                // Method org/apache/bookkeeper/client/LedgerRecoveryOp."<init>":(Lorg/apache/bookkeeper/client/LedgerHandle;Lorg/apache/bookkeeper/client/ClientContext;)V
      32: aload_1
      33: invokevirtual #134                // Method org/apache/bookkeeper/client/LedgerRecoveryOp.setEntryListener:(Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$ReadEntryListener;)Lorg/apache/bookkeeper/client/LedgerRecoveryOp;
      36: invokevirtual #135                // Method org/apache/bookkeeper/client/LedgerRecoveryOp.initiate:()Ljava/util/concurrent/CompletableFuture;
      39: areturn

  private static org.apache.bookkeeper.client.api.LedgerMetadata lambda$recover$2(org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokestatic  #106                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.from:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
       4: invokevirtual #136                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withInRecoveryState:()Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
       7: invokevirtual #114                // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.build:()Lorg/apache/bookkeeper/client/api/LedgerMetadata;
      10: areturn

  private static boolean lambda$recover$1(org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokeinterface #123,  1          // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getState:()Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       6: getstatic     #124                // Field org/apache/bookkeeper/client/api/LedgerMetadata$State.IN_RECOVERY:Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       9: if_acmpeq     16
      12: iconst_1
      13: goto          17
      16: iconst_0
      17: ireturn

  private static boolean lambda$recover$0(org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokeinterface #123,  1          // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getState:()Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       6: getstatic     #137                // Field org/apache/bookkeeper/client/api/LedgerMetadata$State.OPEN:Lorg/apache/bookkeeper/client/api/LedgerMetadata$State;
       9: if_acmpne     16
      12: iconst_1
      13: goto          17
      16: iconst_0
      17: ireturn

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #138                // class org/apache/bookkeeper/client/ReadOnlyLedgerHandle
       2: invokestatic  #139                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       8: return
}

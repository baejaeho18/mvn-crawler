Compiled from "BookieAuthZFactory.java"
class org.apache.bookkeeper.tls.BookieAuthZFactory$1 implements org.apache.bookkeeper.auth.BookieAuthProvider {
  org.apache.bookkeeper.auth.AuthCallbacks$GenericCallback<java.lang.Void> completeCallback;

  final org.apache.bookkeeper.auth.AuthCallbacks$GenericCallback val$completeCb;

  final org.apache.bookkeeper.proto.BookieConnectionPeer val$addr;

  final org.apache.bookkeeper.tls.BookieAuthZFactory this$0;

  org.apache.bookkeeper.tls.BookieAuthZFactory$1(org.apache.bookkeeper.tls.BookieAuthZFactory, org.apache.bookkeeper.auth.AuthCallbacks$GenericCallback, org.apache.bookkeeper.proto.BookieConnectionPeer);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/bookkeeper/tls/BookieAuthZFactory;
       5: aload_0
       6: aload_2
       7: putfield      #2                  // Field val$completeCb:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
      10: aload_0
      11: aload_3
      12: putfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
      15: aload_0
      16: invokespecial #4                  // Method java/lang/Object."<init>":()V
      19: aload_0
      20: aload_0
      21: getfield      #2                  // Field val$completeCb:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
      24: putfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
      27: return

  public void onProtocolUpgrade();
    Code:
       0: aload_0
       1: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
       4: invokeinterface #6,  1            // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.isSecure:()Z
       9: istore_1
      10: aload_0
      11: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
      14: invokeinterface #7,  1            // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getProtocolPrincipals:()Ljava/util/Collection;
      19: astore_2
      20: iload_1
      21: ifeq          271
      24: aload_2
      25: invokeinterface #8,  1            // InterfaceMethod java/util/Collection.isEmpty:()Z
      30: ifne          271
      33: aload_2
      34: invokeinterface #9,  1            // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      39: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      44: instanceof    #11                 // class java/security/cert/X509Certificate
      47: ifeq          271
      50: aload_2
      51: invokeinterface #9,  1            // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      56: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      61: checkcast     #11                 // class java/security/cert/X509Certificate
      64: astore_3
      65: aload_3
      66: invokestatic  #12                 // Method org/apache/bookkeeper/util/CertUtils.getRolesFromOU:(Ljava/security/cert/X509Certificate;)[Ljava/lang/String;
      69: astore        4
      71: aload         4
      73: ifnull        82
      76: aload         4
      78: arraylength
      79: ifne          121
      82: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
      85: ldc           #14                 // String AuthZ failed: No cert role in OU field of certificate. Must have a role from allowedRoles list {} host: {}
      87: aload_0
      88: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/tls/BookieAuthZFactory;
      91: getfield      #15                 // Field org/apache/bookkeeper/tls/BookieAuthZFactory.allowedRoles:[Ljava/lang/String;
      94: aload_0
      95: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
      98: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     103: invokeinterface #17,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     108: aload_0
     109: getfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
     112: bipush        -102
     114: aconst_null
     115: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/auth/AuthCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
     120: return
     121: iconst_0
     122: istore        5
     124: aload_0
     125: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/tls/BookieAuthZFactory;
     128: getfield      #15                 // Field org/apache/bookkeeper/tls/BookieAuthZFactory.allowedRoles:[Ljava/lang/String;
     131: astore        6
     133: aload         6
     135: arraylength
     136: istore        7
     138: iconst_0
     139: istore        8
     141: iload         8
     143: iload         7
     145: if_icmpge     176
     148: aload         6
     150: iload         8
     152: aaload
     153: astore        9
     155: aload         4
     157: iconst_0
     158: aaload
     159: aload         9
     161: invokevirtual #20                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     164: ifeq          170
     167: iconst_1
     168: istore        5
     170: iinc          8, 1
     173: goto          141
     176: iload         5
     178: ifeq          215
     181: aload_0
     182: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     185: new           #21                 // class org/apache/bookkeeper/auth/BookKeeperPrincipal
     188: dup
     189: aload         4
     191: iconst_0
     192: aaload
     193: invokespecial #22                 // Method org/apache/bookkeeper/auth/BookKeeperPrincipal."<init>":(Ljava/lang/String;)V
     196: invokeinterface #23,  2           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.setAuthorizedId:(Lorg/apache/bookkeeper/auth/BookKeeperPrincipal;)V
     201: aload_0
     202: getfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
     205: iconst_0
     206: aconst_null
     207: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/auth/AuthCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
     212: goto          268
     215: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
     218: ldc           #24                 // String AuthZ failed: Cert role {} doesn\'t match allowedRoles list {}; host: {}
     220: iconst_3
     221: anewarray     #25                 // class java/lang/Object
     224: dup
     225: iconst_0
     226: aload         4
     228: aastore
     229: dup
     230: iconst_1
     231: aload_0
     232: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/tls/BookieAuthZFactory;
     235: getfield      #15                 // Field org/apache/bookkeeper/tls/BookieAuthZFactory.allowedRoles:[Ljava/lang/String;
     238: aastore
     239: dup
     240: iconst_2
     241: aload_0
     242: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     245: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     250: aastore
     251: invokeinterface #26,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     256: aload_0
     257: getfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
     260: bipush        -102
     262: aconst_null
     263: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/auth/AuthCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
     268: goto          359
     271: iload_1
     272: ifne          297
     275: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
     278: ldc           #27                 // String AuthZ failed: Bookie side channel is not secured; host: {}
     280: aload_0
     281: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     284: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     289: invokeinterface #28,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     294: goto          347
     297: aload_2
     298: invokeinterface #8,  1            // InterfaceMethod java/util/Collection.isEmpty:()Z
     303: ifeq          328
     306: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
     309: ldc           #29                 // String AuthZ failed: Certificate missing; host: {}
     311: aload_0
     312: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     315: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     320: invokeinterface #28,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     325: goto          347
     328: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
     331: ldc           #30                 // String AuthZ failed: Certs are missing or not X509 type; host: {}
     333: aload_0
     334: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     337: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     342: invokeinterface #28,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     347: aload_0
     348: getfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
     351: bipush        -102
     353: aconst_null
     354: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/auth/AuthCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
     359: goto          395
     362: astore_1
     363: invokestatic  #13                 // Method org/apache/bookkeeper/tls/BookieAuthZFactory.access$000:()Lorg/slf4j/Logger;
     366: ldc           #32                 // String AuthZ failed: Failed to parse certificate; host: {}, {}
     368: aload_0
     369: getfield      #3                  // Field val$addr:Lorg/apache/bookkeeper/proto/BookieConnectionPeer;
     372: invokeinterface #16,  1           // InterfaceMethod org/apache/bookkeeper/proto/BookieConnectionPeer.getRemoteAddr:()Ljava/net/SocketAddress;
     377: aload_1
     378: invokeinterface #17,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     383: aload_0
     384: getfield      #5                  // Field completeCallback:Lorg/apache/bookkeeper/auth/AuthCallbacks$GenericCallback;
     387: bipush        -102
     389: aconst_null
     390: invokeinterface #19,  3           // InterfaceMethod org/apache/bookkeeper/auth/AuthCallbacks$GenericCallback.operationComplete:(ILjava/lang/Object;)V
     395: return
    Exception table:
       from    to  target type
           0   120   362   Class java/lang/Exception
         121   359   362   Class java/lang/Exception

  public void process(org.apache.bookkeeper.auth.AuthToken, org.apache.bookkeeper.auth.AuthCallbacks$GenericCallback<org.apache.bookkeeper.auth.AuthToken>);
    Code:
       0: return
}

Compiled from "LedgerHandle.java"
class org.apache.bookkeeper.client.LedgerHandle$5 extends org.apache.bookkeeper.util.SafeRunnable {
  final org.apache.bookkeeper.client.AsyncCallback$CloseCallback val$cb;

  final java.lang.Object val$ctx;

  final int val$rc;

  final org.apache.bookkeeper.client.LedgerHandle this$0;

  org.apache.bookkeeper.client.LedgerHandle$5(org.apache.bookkeeper.client.LedgerHandle, org.apache.bookkeeper.client.AsyncCallback$CloseCallback, java.lang.Object, int);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
       5: aload_0
       6: aload_2
       7: putfield      #2                  // Field val$cb:Lorg/apache/bookkeeper/client/AsyncCallback$CloseCallback;
      10: aload_0
      11: aload_3
      12: putfield      #3                  // Field val$ctx:Ljava/lang/Object;
      15: aload_0
      16: iload         4
      18: putfield      #4                  // Field val$rc:I
      21: aload_0
      22: invokespecial #5                  // Method org/apache/bookkeeper/util/SafeRunnable."<init>":()V
      25: return

  public void safeRun();
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
       4: invokestatic  #6                  // Method org/apache/bookkeeper/client/LedgerHandle.access$100:(Lorg/apache/bookkeeper/client/LedgerHandle;)Ljava/util/concurrent/CompletableFuture;
       7: aload_0
       8: aload_0
       9: getfield      #2                  // Field val$cb:Lorg/apache/bookkeeper/client/AsyncCallback$CloseCallback;
      12: aload_0
      13: getfield      #3                  // Field val$ctx:Ljava/lang/Object;
      16: invokedynamic #7,  0              // InvokeDynamic #0:accept:(Lorg/apache/bookkeeper/client/LedgerHandle$5;Lorg/apache/bookkeeper/client/AsyncCallback$CloseCallback;Ljava/lang/Object;)Ljava/util/function/BiConsumer;
      21: invokevirtual #8                  // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      24: pop
      25: aload_0
      26: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      29: dup
      30: astore        7
      32: monitorenter
      33: aload_0
      34: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      37: invokestatic  #9                  // Method org/apache/bookkeeper/client/LedgerHandle.access$200:(Lorg/apache/bookkeeper/client/LedgerHandle;)Lorg/apache/bookkeeper/client/LedgerHandle$HandleState;
      40: astore_1
      41: aload_0
      42: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      45: invokevirtual #10                 // Method org/apache/bookkeeper/client/LedgerHandle.drainPendingAddsAndAdjustLength:()Ljava/util/List;
      48: astore_2
      49: aload_0
      50: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      53: aload_0
      54: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      57: getfield      #11                 // Field org/apache/bookkeeper/client/LedgerHandle.lastAddConfirmed:J
      60: dup2_x1
      61: putfield      #12                 // Field org/apache/bookkeeper/client/LedgerHandle.lastAddPushed:J
      64: lstore_3
      65: aload_0
      66: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      69: getfield      #13                 // Field org/apache/bookkeeper/client/LedgerHandle.length:J
      72: lstore        5
      74: aload_0
      75: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      78: getstatic     #14                 // Field org/apache/bookkeeper/client/LedgerHandle$HandleState.CLOSED:Lorg/apache/bookkeeper/client/LedgerHandle$HandleState;
      81: invokestatic  #15                 // Method org/apache/bookkeeper/client/LedgerHandle.access$202:(Lorg/apache/bookkeeper/client/LedgerHandle;Lorg/apache/bookkeeper/client/LedgerHandle$HandleState;)Lorg/apache/bookkeeper/client/LedgerHandle$HandleState;
      84: pop
      85: aload         7
      87: monitorexit
      88: goto          99
      91: astore        8
      93: aload         7
      95: monitorexit
      96: aload         8
      98: athrow
      99: aload_0
     100: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     103: aload_0
     104: getfield      #4                  // Field val$rc:I
     107: aload_2
     108: invokevirtual #16                 // Method org/apache/bookkeeper/client/LedgerHandle.errorOutPendingAdds:(ILjava/util/List;)V
     111: aload_1
     112: getstatic     #14                 // Field org/apache/bookkeeper/client/LedgerHandle$HandleState.CLOSED:Lorg/apache/bookkeeper/client/LedgerHandle$HandleState;
     115: if_acmpeq     252
     118: getstatic     #17                 // Field org/apache/bookkeeper/client/LedgerHandle.LOG:Lorg/slf4j/Logger;
     121: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     126: ifeq          171
     129: getstatic     #17                 // Field org/apache/bookkeeper/client/LedgerHandle.LOG:Lorg/slf4j/Logger;
     132: ldc           #19                 // String Closing ledger: {} at entryId {} with {} bytes
     134: iconst_3
     135: anewarray     #20                 // class java/lang/Object
     138: dup
     139: iconst_0
     140: aload_0
     141: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     144: invokevirtual #21                 // Method org/apache/bookkeeper/client/LedgerHandle.getId:()J
     147: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     150: aastore
     151: dup
     152: iconst_1
     153: lload_3
     154: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     157: aastore
     158: dup
     159: iconst_2
     160: lload         5
     162: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     165: aastore
     166: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     171: aload_0
     172: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     175: invokestatic  #24                 // Method org/apache/bookkeeper/client/LedgerHandle.access$300:(Lorg/apache/bookkeeper/client/LedgerHandle;)V
     178: new           #25                 // class org/apache/bookkeeper/client/MetadataUpdateLoop
     181: dup
     182: aload_0
     183: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     186: getfield      #26                 // Field org/apache/bookkeeper/client/LedgerHandle.clientCtx:Lorg/apache/bookkeeper/client/ClientContext;
     189: invokeinterface #27,  1           // InterfaceMethod org/apache/bookkeeper/client/ClientContext.getLedgerManager:()Lorg/apache/bookkeeper/meta/LedgerManager;
     194: aload_0
     195: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     198: invokevirtual #21                 // Method org/apache/bookkeeper/client/LedgerHandle.getId:()J
     201: aload_0
     202: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     205: invokedynamic #28,  0             // InvokeDynamic #1:get:(Lorg/apache/bookkeeper/client/LedgerHandle;)Ljava/util/function/Supplier;
     210: aload_0
     211: lload_3
     212: lload         5
     214: invokedynamic #29,  0             // InvokeDynamic #2:needsUpdate:(Lorg/apache/bookkeeper/client/LedgerHandle$5;JJ)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;
     219: lload_3
     220: lload         5
     222: invokedynamic #30,  0             // InvokeDynamic #3:transform:(JJ)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;
     227: aload_0
     228: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
     231: invokedynamic #31,  0             // InvokeDynamic #4:updateValue:(Lorg/apache/bookkeeper/client/LedgerHandle;)Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;
     236: invokespecial #32                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop."<init>":(Lorg/apache/bookkeeper/meta/LedgerManager;JLjava/util/function/Supplier;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$NeedsUpdatePredicate;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$MetadataTransform;Lorg/apache/bookkeeper/client/MetadataUpdateLoop$LocalValueUpdater;)V
     239: invokevirtual #33                 // Method org/apache/bookkeeper/client/MetadataUpdateLoop.run:()Ljava/util/concurrent/CompletableFuture;
     242: aload_0
     243: invokedynamic #34,  0             // InvokeDynamic #5:accept:(Lorg/apache/bookkeeper/client/LedgerHandle$5;)Ljava/util/function/BiConsumer;
     248: invokevirtual #8                  // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
     251: pop
     252: return
    Exception table:
       from    to  target type
          33    88    91   any
          91    96    91   any

  private void lambda$safeRun$3(org.apache.bookkeeper.versioning.Versioned, java.lang.Throwable);
    Code:
       0: aload_2
       1: ifnull        19
       4: aload_0
       5: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
       8: invokestatic  #6                  // Method org/apache/bookkeeper/client/LedgerHandle.access$100:(Lorg/apache/bookkeeper/client/LedgerHandle;)Ljava/util/concurrent/CompletableFuture;
      11: aload_2
      12: invokevirtual #35                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      15: pop
      16: goto          30
      19: aload_0
      20: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      23: invokestatic  #6                  // Method org/apache/bookkeeper/client/LedgerHandle.access$100:(Lorg/apache/bookkeeper/client/LedgerHandle;)Ljava/util/concurrent/CompletableFuture;
      26: aconst_null
      27: invokestatic  #36                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.complete:(Ljava/util/concurrent/CompletableFuture;Ljava/lang/Object;)V
      30: return

  private static org.apache.bookkeeper.client.api.LedgerMetadata lambda$safeRun$2(long, long, org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload         4
       2: invokestatic  #37                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.from:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
       5: invokevirtual #38                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withClosedState:()Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
       8: lload_0
       9: invokevirtual #39                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withLastEntryId:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      12: lload_2
      13: invokevirtual #40                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withLength:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      16: invokevirtual #41                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.build:()Lorg/apache/bookkeeper/client/api/LedgerMetadata;
      19: areturn

  private boolean lambda$safeRun$1(long, long, org.apache.bookkeeper.client.api.LedgerMetadata) throws java.lang.Exception;
    Code:
       0: aload         5
       2: invokeinterface #42,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.isClosed:()Z
       7: ifeq          111
      10: lload_1
      11: aload         5
      13: invokeinterface #43,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getLastEntryId:()J
      18: lcmp
      19: ifne          36
      22: lload_3
      23: aload         5
      25: invokeinterface #44,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getLength:()J
      30: lcmp
      31: ifne          36
      34: iconst_0
      35: ireturn
      36: getstatic     #17                 // Field org/apache/bookkeeper/client/LedgerHandle.LOG:Lorg/slf4j/Logger;
      39: ldc           #45                 // String Metadata conflict when closing ledger {}. Another client may have recovered the ledger while there were writes outstanding. (local lastEntry:{} length:{})  (metadata lastEntry:{} length:{})
      41: iconst_5
      42: anewarray     #20                 // class java/lang/Object
      45: dup
      46: iconst_0
      47: aload_0
      48: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      51: invokevirtual #21                 // Method org/apache/bookkeeper/client/LedgerHandle.getId:()J
      54: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      57: aastore
      58: dup
      59: iconst_1
      60: lload_1
      61: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      64: aastore
      65: dup
      66: iconst_2
      67: lload_3
      68: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      71: aastore
      72: dup
      73: iconst_3
      74: aload         5
      76: invokeinterface #43,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getLastEntryId:()J
      81: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      84: aastore
      85: dup
      86: iconst_4
      87: aload         5
      89: invokeinterface #44,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getLength:()J
      94: invokestatic  #22                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      97: aastore
      98: invokeinterface #46,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     103: new           #47                 // class org/apache/bookkeeper/client/BKException$BKMetadataVersionException
     106: dup
     107: invokespecial #48                 // Method org/apache/bookkeeper/client/BKException$BKMetadataVersionException."<init>":()V
     110: athrow
     111: iconst_1
     112: ireturn

  private void lambda$safeRun$0(org.apache.bookkeeper.client.AsyncCallback$CloseCallback, java.lang.Object, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload         4
       2: ifnull        27
       5: aload_1
       6: aload         4
       8: sipush        -999
      11: invokestatic  #50                 // Method org/apache/bookkeeper/client/BKException.getExceptionCode:(Ljava/lang/Throwable;I)I
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      18: aload_2
      19: invokeinterface #51,  4           // InterfaceMethod org/apache/bookkeeper/client/AsyncCallback$CloseCallback.closeComplete:(ILorg/apache/bookkeeper/client/LedgerHandle;Ljava/lang/Object;)V
      24: goto          39
      27: aload_1
      28: iconst_0
      29: aload_0
      30: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/client/LedgerHandle;
      33: aload_2
      34: invokeinterface #51,  4           // InterfaceMethod org/apache/bookkeeper/client/AsyncCallback$CloseCallback.closeComplete:(ILorg/apache/bookkeeper/client/LedgerHandle;Ljava/lang/Object;)V
      39: return
}

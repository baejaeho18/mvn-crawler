Compiled from "BookieWatcherImpl.java"
class org.apache.bookkeeper.client.BookieWatcherImpl implements org.apache.bookkeeper.client.BookieWatcher {
  private static final org.slf4j.Logger log;

  private static final java.util.function.Function<java.lang.Throwable, org.apache.bookkeeper.client.BKException> EXCEPTION_FUNC;

  private final org.apache.bookkeeper.conf.ClientConfiguration conf;

  private final org.apache.bookkeeper.discover.RegistrationClient registrationClient;

  private final org.apache.bookkeeper.client.EnsemblePlacementPolicy placementPolicy;

  private final org.apache.bookkeeper.stats.OpStatsLogger newEnsembleTimer;

  private final org.apache.bookkeeper.stats.OpStatsLogger replaceBookieTimer;

  private final org.apache.bookkeeper.stats.Counter ensembleNotAdheringToPlacementPolicy;

  final com.google.common.cache.Cache<org.apache.bookkeeper.net.BookieId, java.lang.Boolean> quarantinedBookies;

  private volatile java.util.Set<org.apache.bookkeeper.net.BookieId> writableBookies;

  private volatile java.util.Set<org.apache.bookkeeper.net.BookieId> readOnlyBookies;

  private java.util.concurrent.CompletableFuture<?> initialWritableBookiesFuture;

  private java.util.concurrent.CompletableFuture<?> initialReadonlyBookiesFuture;

  private final org.apache.bookkeeper.proto.BookieAddressResolver bookieAddressResolver;

  static final boolean $assertionsDisabled;

  public org.apache.bookkeeper.client.BookieWatcherImpl(org.apache.bookkeeper.conf.ClientConfiguration, org.apache.bookkeeper.client.EnsemblePlacementPolicy, org.apache.bookkeeper.discover.RegistrationClient, org.apache.bookkeeper.proto.BookieAddressResolver, org.apache.bookkeeper.stats.StatsLogger);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #4                  // Method java/util/Collections.emptySet:()Ljava/util/Set;
       8: putfield      #5                  // Field writableBookies:Ljava/util/Set;
      11: aload_0
      12: invokestatic  #4                  // Method java/util/Collections.emptySet:()Ljava/util/Set;
      15: putfield      #6                  // Field readOnlyBookies:Ljava/util/Set;
      18: aload_0
      19: aconst_null
      20: putfield      #7                  // Field initialWritableBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      23: aload_0
      24: aconst_null
      25: putfield      #8                  // Field initialReadonlyBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      28: aload_0
      29: aload_1
      30: putfield      #9                  // Field conf:Lorg/apache/bookkeeper/conf/ClientConfiguration;
      33: aload_0
      34: aload         4
      36: putfield      #10                 // Field bookieAddressResolver:Lorg/apache/bookkeeper/proto/BookieAddressResolver;
      39: aload_0
      40: aload_2
      41: putfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
      44: aload_0
      45: aload_3
      46: putfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
      49: aload_0
      50: invokestatic  #13                 // Method com/google/common/cache/CacheBuilder.newBuilder:()Lcom/google/common/cache/CacheBuilder;
      53: aload_1
      54: invokevirtual #14                 // Method org/apache/bookkeeper/conf/ClientConfiguration.getBookieQuarantineTimeSeconds:()I
      57: i2l
      58: getstatic     #15                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
      61: invokevirtual #16                 // Method com/google/common/cache/CacheBuilder.expireAfterWrite:(JLjava/util/concurrent/TimeUnit;)Lcom/google/common/cache/CacheBuilder;
      64: new           #17                 // class org/apache/bookkeeper/client/BookieWatcherImpl$1
      67: dup
      68: aload_0
      69: invokespecial #18                 // Method org/apache/bookkeeper/client/BookieWatcherImpl$1."<init>":(Lorg/apache/bookkeeper/client/BookieWatcherImpl;)V
      72: invokevirtual #19                 // Method com/google/common/cache/CacheBuilder.removalListener:(Lcom/google/common/cache/RemovalListener;)Lcom/google/common/cache/CacheBuilder;
      75: invokevirtual #20                 // Method com/google/common/cache/CacheBuilder.build:()Lcom/google/common/cache/Cache;
      78: putfield      #21                 // Field quarantinedBookies:Lcom/google/common/cache/Cache;
      81: aload_0
      82: aload         5
      84: ldc           #22                 // String NEW_ENSEMBLE_TIME
      86: invokeinterface #23,  2           // InterfaceMethod org/apache/bookkeeper/stats/StatsLogger.getOpStatsLogger:(Ljava/lang/String;)Lorg/apache/bookkeeper/stats/OpStatsLogger;
      91: putfield      #24                 // Field newEnsembleTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
      94: aload_0
      95: aload         5
      97: ldc           #25                 // String REPLACE_BOOKIE_TIME
      99: invokeinterface #23,  2           // InterfaceMethod org/apache/bookkeeper/stats/StatsLogger.getOpStatsLogger:(Ljava/lang/String;)Lorg/apache/bookkeeper/stats/OpStatsLogger;
     104: putfield      #26                 // Field replaceBookieTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
     107: aload_0
     108: aload         5
     110: ldc           #27                 // String ENSEMBLE_NOT_ADHERING_TO_PLACEMENT_POLICY_COUNTER
     112: invokeinterface #28,  2           // InterfaceMethod org/apache/bookkeeper/stats/StatsLogger.getCounter:(Ljava/lang/String;)Lorg/apache/bookkeeper/stats/Counter;
     117: putfield      #29                 // Field ensembleNotAdheringToPlacementPolicy:Lorg/apache/bookkeeper/stats/Counter;
     120: return

  public java.util.Set<org.apache.bookkeeper.net.BookieId> getBookies() throws org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: getfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
       4: invokeinterface #30,  1           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.getWritableBookies:()Ljava/util/concurrent/CompletableFuture;
       9: getstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
      12: invokestatic  #32                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;Ljava/util/function/Function;)Ljava/lang/Object;
      15: checkcast     #33                 // class org/apache/bookkeeper/versioning/Versioned
      18: invokevirtual #34                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
      21: checkcast     #35                 // class java/util/Set
      24: areturn
      25: astore_1
      26: invokestatic  #37                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      29: invokevirtual #38                 // Method java/lang/Thread.interrupt:()V
      32: aload_1
      33: athrow
    Exception table:
       from    to  target type
           0    24    25   Class org/apache/bookkeeper/client/BKException$BKInterruptedException

  public java.util.Set<org.apache.bookkeeper.net.BookieId> getAllBookies() throws org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: getfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
       4: invokeinterface #39,  1           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.getAllBookies:()Ljava/util/concurrent/CompletableFuture;
       9: getstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
      12: invokestatic  #32                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;Ljava/util/function/Function;)Ljava/lang/Object;
      15: checkcast     #33                 // class org/apache/bookkeeper/versioning/Versioned
      18: invokevirtual #34                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
      21: checkcast     #35                 // class java/util/Set
      24: areturn
      25: astore_1
      26: invokestatic  #37                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      29: invokevirtual #38                 // Method java/lang/Thread.interrupt:()V
      32: aload_1
      33: athrow
    Exception table:
       from    to  target type
           0    24    25   Class org/apache/bookkeeper/client/BKException$BKInterruptedException

  public org.apache.bookkeeper.proto.BookieAddressResolver getBookieAddressResolver();
    Code:
       0: aload_0
       1: getfield      #10                 // Field bookieAddressResolver:Lorg/apache/bookkeeper/proto/BookieAddressResolver;
       4: areturn

  public java.util.Set<org.apache.bookkeeper.net.BookieId> getReadOnlyBookies() throws org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: getfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
       4: invokeinterface #40,  1           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.getReadOnlyBookies:()Ljava/util/concurrent/CompletableFuture;
       9: getstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
      12: invokestatic  #32                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;Ljava/util/function/Function;)Ljava/lang/Object;
      15: checkcast     #33                 // class org/apache/bookkeeper/versioning/Versioned
      18: invokevirtual #34                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
      21: checkcast     #35                 // class java/util/Set
      24: areturn
      25: astore_1
      26: invokestatic  #37                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      29: invokevirtual #38                 // Method java/lang/Thread.interrupt:()V
      32: aload_1
      33: athrow
    Exception table:
       from    to  target type
           0    24    25   Class org/apache/bookkeeper/client/BKException$BKInterruptedException

  public boolean isBookieUnavailable(org.apache.bookkeeper.net.BookieId);
    Code:
       0: aload_0
       1: getfield      #6                  // Field readOnlyBookies:Ljava/util/Set;
       4: aload_1
       5: invokeinterface #41,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
      10: ifne          30
      13: aload_0
      14: getfield      #5                  // Field writableBookies:Ljava/util/Set;
      17: aload_1
      18: invokeinterface #41,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
      23: ifne          30
      26: iconst_1
      27: goto          31
      30: iconst_0
      31: ireturn

  private synchronized void processWritableBookiesChanged(java.util.Set<org.apache.bookkeeper.net.BookieId>);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #5                  // Field writableBookies:Ljava/util/Set;
       5: aload_0
       6: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
       9: aload_1
      10: aload_0
      11: getfield      #6                  // Field readOnlyBookies:Ljava/util/Set;
      14: invokeinterface #42,  3           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.onClusterChanged:(Ljava/util/Set;Ljava/util/Set;)Ljava/util/Set;
      19: pop
      20: return

  private synchronized void processReadOnlyBookiesChanged(java.util.Set<org.apache.bookkeeper.net.BookieId>);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #6                  // Field readOnlyBookies:Ljava/util/Set;
       5: aload_0
       6: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
       9: aload_0
      10: getfield      #5                  // Field writableBookies:Ljava/util/Set;
      13: aload_1
      14: invokeinterface #42,  3           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.onClusterChanged:(Ljava/util/Set;Ljava/util/Set;)Ljava/util/Set;
      19: pop
      20: return

  public void initialBlockingBookieRead() throws org.apache.bookkeeper.client.BKException;
    Code:
       0: aload_0
       1: dup
       2: astore_3
       3: monitorenter
       4: aload_0
       5: getfield      #8                  // Field initialReadonlyBookiesFuture:Ljava/util/concurrent/CompletableFuture;
       8: ifnonnull     77
      11: getstatic     #43                 // Field $assertionsDisabled:Z
      14: ifne          32
      17: aload_0
      18: getfield      #7                  // Field initialWritableBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      21: ifnull        32
      24: new           #44                 // class java/lang/AssertionError
      27: dup
      28: invokespecial #45                 // Method java/lang/AssertionError."<init>":()V
      31: athrow
      32: aload_0
      33: getfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
      36: aload_0
      37: invokedynamic #46,  0             // InvokeDynamic #0:onBookiesChanged:(Lorg/apache/bookkeeper/client/BookieWatcherImpl;)Lorg/apache/bookkeeper/discover/RegistrationClient$RegistrationListener;
      42: invokeinterface #47,  2           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.watchWritableBookies:(Lorg/apache/bookkeeper/discover/RegistrationClient$RegistrationListener;)Ljava/util/concurrent/CompletableFuture;
      47: astore_1
      48: aload_0
      49: getfield      #12                 // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
      52: aload_0
      53: invokedynamic #48,  0             // InvokeDynamic #1:onBookiesChanged:(Lorg/apache/bookkeeper/client/BookieWatcherImpl;)Lorg/apache/bookkeeper/discover/RegistrationClient$RegistrationListener;
      58: invokeinterface #49,  2           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.watchReadOnlyBookies:(Lorg/apache/bookkeeper/discover/RegistrationClient$RegistrationListener;)Ljava/util/concurrent/CompletableFuture;
      63: astore_2
      64: aload_0
      65: aload_1
      66: putfield      #7                  // Field initialWritableBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      69: aload_0
      70: aload_2
      71: putfield      #8                  // Field initialReadonlyBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      74: goto          87
      77: aload_0
      78: getfield      #7                  // Field initialWritableBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      81: astore_1
      82: aload_0
      83: getfield      #8                  // Field initialReadonlyBookiesFuture:Ljava/util/concurrent/CompletableFuture;
      86: astore_2
      87: aload_3
      88: monitorexit
      89: goto          99
      92: astore        4
      94: aload_3
      95: monitorexit
      96: aload         4
      98: athrow
      99: aload_1
     100: getstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
     103: invokestatic  #32                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;Ljava/util/function/Function;)Ljava/lang/Object;
     106: pop
     107: goto          119
     110: astore_3
     111: invokestatic  #37                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     114: invokevirtual #38                 // Method java/lang/Thread.interrupt:()V
     117: aload_3
     118: athrow
     119: aload_2
     120: getstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
     123: invokestatic  #32                 // Method org/apache/bookkeeper/common/concurrent/FutureUtils.result:(Ljava/util/concurrent/CompletableFuture;Ljava/util/function/Function;)Ljava/lang/Object;
     126: pop
     127: goto          151
     130: astore_3
     131: invokestatic  #37                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     134: invokevirtual #38                 // Method java/lang/Thread.interrupt:()V
     137: aload_3
     138: athrow
     139: astore_3
     140: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     143: ldc           #51                 // String Failed getReadOnlyBookies:
     145: aload_3
     146: invokeinterface #52,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     151: return
    Exception table:
       from    to  target type
           4    89    92   any
          92    96    92   any
          99   107   110   Class org/apache/bookkeeper/client/BKException$BKInterruptedException
         119   127   130   Class org/apache/bookkeeper/client/BKException$BKInterruptedException
         119   127   139   Class java/lang/Exception

  public java.util.List<org.apache.bookkeeper.net.BookieId> newEnsemble(int, int, int, java.util.Map<java.lang.String, byte[]>) throws org.apache.bookkeeper.client.BKException$BKNotEnoughBookiesException;
    Code:
       0: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
       3: lstore        5
       5: aload_0
       6: getfield      #21                 // Field quarantinedBookies:Lcom/google/common/cache/Cache;
       9: invokeinterface #54,  1           // InterfaceMethod com/google/common/cache/Cache.asMap:()Ljava/util/concurrent/ConcurrentMap;
      14: invokeinterface #55,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.keySet:()Ljava/util/Set;
      19: astore        10
      21: aload_0
      22: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
      25: iload_1
      26: iload_2
      27: iload_3
      28: aload         4
      30: new           #56                 // class java/util/HashSet
      33: dup
      34: aload         10
      36: invokespecial #57                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      39: invokeinterface #58,  6           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.newEnsemble:(IIILjava/util/Map;Ljava/util/Set;)Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult;
      44: astore        7
      46: aload         7
      48: invokevirtual #59                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.getResult:()Ljava/lang/Object;
      51: checkcast     #60                 // class java/util/List
      54: astore        8
      56: aload         7
      58: invokevirtual #61                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.isAdheringToPolicy:()Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
      61: astore        9
      63: aload         9
      65: getstatic     #62                 // Field org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence.FAIL:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
      68: if_acmpne     99
      71: aload_0
      72: getfield      #29                 // Field ensembleNotAdheringToPlacementPolicy:Lorg/apache/bookkeeper/stats/Counter;
      75: invokeinterface #63,  1           // InterfaceMethod org/apache/bookkeeper/stats/Counter.inc:()V
      80: iload_1
      81: iconst_1
      82: if_icmple     99
      85: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
      88: ldc           #64                 // String New ensemble: {} is not adhering to Placement Policy. quarantinedBookies: {}
      90: aload         8
      92: aload         10
      94: invokeinterface #65,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      99: aload_0
     100: getfield      #24                 // Field newEnsembleTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
     103: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
     106: lload         5
     108: lsub
     109: getstatic     #66                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     112: invokeinterface #67,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerSuccessfulEvent:(JLjava/util/concurrent/TimeUnit;)V
     117: goto          230
     120: astore        10
     122: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     125: invokeinterface #69,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     130: ifeq          143
     133: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     136: ldc           #70                 // String Not enough healthy bookies available, using quarantined bookies
     138: invokeinterface #71,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     143: aload_0
     144: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
     147: iload_1
     148: iload_2
     149: iload_3
     150: aload         4
     152: new           #56                 // class java/util/HashSet
     155: dup
     156: invokespecial #72                 // Method java/util/HashSet."<init>":()V
     159: invokeinterface #58,  6           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.newEnsemble:(IIILjava/util/Map;Ljava/util/Set;)Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult;
     164: astore        7
     166: aload         7
     168: invokevirtual #59                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.getResult:()Ljava/lang/Object;
     171: checkcast     #60                 // class java/util/List
     174: astore        8
     176: aload         7
     178: invokevirtual #61                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.isAdheringToPolicy:()Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
     181: astore        9
     183: aload         9
     185: getstatic     #62                 // Field org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence.FAIL:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
     188: if_acmpne     212
     191: aload_0
     192: getfield      #29                 // Field ensembleNotAdheringToPlacementPolicy:Lorg/apache/bookkeeper/stats/Counter;
     195: invokeinterface #63,  1           // InterfaceMethod org/apache/bookkeeper/stats/Counter.inc:()V
     200: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     203: ldc           #73                 // String New ensemble: {} is not adhering to Placement Policy
     205: aload         8
     207: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     212: aload_0
     213: getfield      #24                 // Field newEnsembleTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
     216: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
     219: lload         5
     221: lsub
     222: getstatic     #66                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     225: invokeinterface #75,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerFailedEvent:(JLjava/util/concurrent/TimeUnit;)V
     230: aload         8
     232: areturn
    Exception table:
       from    to  target type
           5   117   120   Class org/apache/bookkeeper/client/BKException$BKNotEnoughBookiesException

  public org.apache.bookkeeper.net.BookieId replaceBookie(int, int, int, java.util.Map<java.lang.String, byte[]>, java.util.List<org.apache.bookkeeper.net.BookieId>, int, java.util.Set<org.apache.bookkeeper.net.BookieId>) throws org.apache.bookkeeper.client.BKException$BKNotEnoughBookiesException;
    Code:
       0: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
       3: lstore        8
       5: aload         5
       7: iload         6
       9: invokeinterface #76,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      14: checkcast     #77                 // class org/apache/bookkeeper/net/BookieId
      17: astore        10
      19: getstatic     #62                 // Field org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence.FAIL:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
      22: astore        13
      24: new           #56                 // class java/util/HashSet
      27: dup
      28: aload         7
      30: invokespecial #57                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      33: astore        14
      35: aload_0
      36: getfield      #21                 // Field quarantinedBookies:Lcom/google/common/cache/Cache;
      39: invokeinterface #54,  1           // InterfaceMethod com/google/common/cache/Cache.asMap:()Ljava/util/concurrent/ConcurrentMap;
      44: invokeinterface #55,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.keySet:()Ljava/util/Set;
      49: astore        15
      51: aload         14
      53: aload         15
      55: invokeinterface #78,  2           // InterfaceMethod java/util/Set.addAll:(Ljava/util/Collection;)Z
      60: pop
      61: aload_0
      62: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
      65: iload_1
      66: iload_2
      67: iload_3
      68: aload         4
      70: aload         5
      72: aload         10
      74: aload         14
      76: invokeinterface #79,  8           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.replaceBookie:(IIILjava/util/Map;Ljava/util/List;Lorg/apache/bookkeeper/net/BookieId;Ljava/util/Set;)Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult;
      81: astore        11
      83: aload         11
      85: invokevirtual #59                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.getResult:()Ljava/lang/Object;
      88: checkcast     #77                 // class org/apache/bookkeeper/net/BookieId
      91: astore        12
      93: aload         11
      95: invokevirtual #61                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.isAdheringToPolicy:()Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
      98: astore        13
     100: aload         13
     102: getstatic     #62                 // Field org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence.FAIL:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
     105: if_acmpne     156
     108: aload_0
     109: getfield      #29                 // Field ensembleNotAdheringToPlacementPolicy:Lorg/apache/bookkeeper/stats/Counter;
     112: invokeinterface #63,  1           // InterfaceMethod org/apache/bookkeeper/stats/Counter.inc:()V
     117: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     120: ldc           #80                 // String replaceBookie for bookie: {} in ensemble: {} is not adhering to placement policy and chose {}. excludedBookies {} and quarantinedBookies {}
     122: iconst_5
     123: anewarray     #81                 // class java/lang/Object
     126: dup
     127: iconst_0
     128: aload         10
     130: aastore
     131: dup
     132: iconst_1
     133: aload         5
     135: aastore
     136: dup
     137: iconst_2
     138: aload         12
     140: aastore
     141: dup
     142: iconst_3
     143: aload         7
     145: aastore
     146: dup
     147: iconst_4
     148: aload         15
     150: aastore
     151: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     156: aload_0
     157: getfield      #26                 // Field replaceBookieTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
     160: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
     163: lload         8
     165: lsub
     166: getstatic     #66                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     169: invokeinterface #67,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerSuccessfulEvent:(JLjava/util/concurrent/TimeUnit;)V
     174: goto          308
     177: astore        14
     179: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     182: invokeinterface #69,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     187: ifeq          200
     190: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     193: ldc           #70                 // String Not enough healthy bookies available, using quarantined bookies
     195: invokeinterface #71,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     200: aload_0
     201: getfield      #11                 // Field placementPolicy:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy;
     204: iload_1
     205: iload_2
     206: iload_3
     207: aload         4
     209: aload         5
     211: aload         10
     213: aload         7
     215: invokeinterface #79,  8           // InterfaceMethod org/apache/bookkeeper/client/EnsemblePlacementPolicy.replaceBookie:(IIILjava/util/Map;Ljava/util/List;Lorg/apache/bookkeeper/net/BookieId;Ljava/util/Set;)Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult;
     220: astore        11
     222: aload         11
     224: invokevirtual #59                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.getResult:()Ljava/lang/Object;
     227: checkcast     #77                 // class org/apache/bookkeeper/net/BookieId
     230: astore        12
     232: aload         11
     234: invokevirtual #61                 // Method org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementResult.isAdheringToPolicy:()Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
     237: astore        13
     239: aload         13
     241: getstatic     #62                 // Field org/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence.FAIL:Lorg/apache/bookkeeper/client/EnsemblePlacementPolicy$PlacementPolicyAdherence;
     244: if_acmpne     290
     247: aload_0
     248: getfield      #29                 // Field ensembleNotAdheringToPlacementPolicy:Lorg/apache/bookkeeper/stats/Counter;
     251: invokeinterface #63,  1           // InterfaceMethod org/apache/bookkeeper/stats/Counter.inc:()V
     256: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
     259: ldc           #83                 // String replaceBookie for bookie: {} in ensemble: {} is not adhering to placement policy and chose {}. excludedBookies {}
     261: iconst_4
     262: anewarray     #81                 // class java/lang/Object
     265: dup
     266: iconst_0
     267: aload         10
     269: aastore
     270: dup
     271: iconst_1
     272: aload         5
     274: aastore
     275: dup
     276: iconst_2
     277: aload         12
     279: aastore
     280: dup
     281: iconst_3
     282: aload         7
     284: aastore
     285: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     290: aload_0
     291: getfield      #26                 // Field replaceBookieTimer:Lorg/apache/bookkeeper/stats/OpStatsLogger;
     294: invokestatic  #53                 // Method org/apache/bookkeeper/common/util/MathUtils.nowInNano:()J
     297: lload         8
     299: lsub
     300: getstatic     #66                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     303: invokeinterface #75,  4           // InterfaceMethod org/apache/bookkeeper/stats/OpStatsLogger.registerFailedEvent:(JLjava/util/concurrent/TimeUnit;)V
     308: aload         12
     310: areturn
    Exception table:
       from    to  target type
          24   174   177   Class org/apache/bookkeeper/client/BKException$BKNotEnoughBookiesException

  public void quarantineBookie(org.apache.bookkeeper.net.BookieId);
    Code:
       0: aload_0
       1: getfield      #21                 // Field quarantinedBookies:Lcom/google/common/cache/Cache;
       4: aload_1
       5: invokeinterface #84,  2           // InterfaceMethod com/google/common/cache/Cache.getIfPresent:(Ljava/lang/Object;)Ljava/lang/Object;
      10: ifnonnull     37
      13: aload_0
      14: getfield      #21                 // Field quarantinedBookies:Lcom/google/common/cache/Cache;
      17: aload_1
      18: getstatic     #85                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      21: invokeinterface #86,  3           // InterfaceMethod com/google/common/cache/Cache.put:(Ljava/lang/Object;Ljava/lang/Object;)V
      26: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
      29: ldc           #87                 // String Bookie {} has been quarantined because of read/write errors.
      31: aload_1
      32: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      37: return

  private void lambda$initialBlockingBookieRead$2(org.apache.bookkeeper.versioning.Versioned);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #34                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
       5: checkcast     #35                 // class java/util/Set
       8: invokespecial #88                 // Method processReadOnlyBookiesChanged:(Ljava/util/Set;)V
      11: return

  private void lambda$initialBlockingBookieRead$1(org.apache.bookkeeper.versioning.Versioned);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #34                 // Method org/apache/bookkeeper/versioning/Versioned.getValue:()Ljava/lang/Object;
       5: checkcast     #35                 // class java/util/Set
       8: invokespecial #89                 // Method processWritableBookiesChanged:(Ljava/util/Set;)V
      11: return

  private static org.apache.bookkeeper.client.BKException lambda$static$0(java.lang.Throwable);
    Code:
       0: aload_0
       1: instanceof    #90                 // class org/apache/bookkeeper/client/BKException
       4: ifeq          23
       7: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
      10: ldc           #91                 // String Failed to get bookie list :
      12: aload_0
      13: invokeinterface #52,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      18: aload_0
      19: checkcast     #90                 // class org/apache/bookkeeper/client/BKException
      22: areturn
      23: aload_0
      24: instanceof    #92                 // class java/lang/InterruptedException
      27: ifeq          49
      30: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
      33: ldc           #93                 // String Interrupted reading bookie list :
      35: aload_0
      36: invokeinterface #52,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      41: new           #36                 // class org/apache/bookkeeper/client/BKException$BKInterruptedException
      44: dup
      45: invokespecial #94                 // Method org/apache/bookkeeper/client/BKException$BKInterruptedException."<init>":()V
      48: areturn
      49: new           #95                 // class org/apache/bookkeeper/client/BKException$MetaStoreException
      52: dup
      53: aload_0
      54: invokespecial #96                 // Method org/apache/bookkeeper/client/BKException$MetaStoreException."<init>":(Ljava/lang/Throwable;)V
      57: astore_1
      58: aload_1
      59: areturn

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #2                  // Field log:Lorg/slf4j/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #97                 // class org/apache/bookkeeper/client/BookieWatcherImpl
       2: invokevirtual #98                 // Method java/lang/Class.desiredAssertionStatus:()Z
       5: ifne          12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: putstatic     #43                 // Field $assertionsDisabled:Z
      16: ldc           #97                 // class org/apache/bookkeeper/client/BookieWatcherImpl
      18: invokestatic  #99                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      21: putstatic     #2                  // Field log:Lorg/slf4j/Logger;
      24: invokedynamic #100,  0            // InvokeDynamic #2:apply:()Ljava/util/function/Function;
      29: putstatic     #31                 // Field EXCEPTION_FUNC:Ljava/util/function/Function;
      32: return
}

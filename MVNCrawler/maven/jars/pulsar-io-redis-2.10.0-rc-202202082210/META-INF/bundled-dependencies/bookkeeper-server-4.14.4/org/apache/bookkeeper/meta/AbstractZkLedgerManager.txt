Compiled from "AbstractZkLedgerManager.java"
public abstract class org.apache.bookkeeper.meta.AbstractZkLedgerManager implements org.apache.bookkeeper.meta.LedgerManager,org.apache.zookeeper.Watcher {
  private static final org.slf4j.Logger LOG;

  static final int ZK_CONNECT_BACKOFF_MS;

  private final org.apache.bookkeeper.meta.LedgerMetadataSerDe serDe;

  protected final org.apache.bookkeeper.conf.AbstractConfiguration conf;

  protected final org.apache.zookeeper.ZooKeeper zk;

  protected final java.lang.String ledgerRootPath;

  protected final java.util.concurrent.ConcurrentMap<java.lang.Long, java.util.Set<org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$LedgerMetadataListener>> listeners;

  protected java.util.concurrent.ScheduledExecutorService scheduler;

  protected org.apache.bookkeeper.meta.AbstractZkLedgerManager(org.apache.bookkeeper.conf.AbstractConfiguration, org.apache.zookeeper.ZooKeeper);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #4                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #5                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
      15: aload_0
      16: new           #7                  // class org/apache/bookkeeper/meta/LedgerMetadataSerDe
      19: dup
      20: invokespecial #8                  // Method org/apache/bookkeeper/meta/LedgerMetadataSerDe."<init>":()V
      23: putfield      #1                  // Field serDe:Lorg/apache/bookkeeper/meta/LedgerMetadataSerDe;
      26: aload_0
      27: aload_1
      28: putfield      #9                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
      31: aload_0
      32: aload_2
      33: putfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
      36: aload_0
      37: aload_1
      38: invokestatic  #11                 // Method org/apache/bookkeeper/meta/zk/ZKMetadataDriverBase.resolveZkLedgersRootPath:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/lang/String;
      41: putfield      #12                 // Field ledgerRootPath:Ljava/lang/String;
      44: aload_0
      45: new           #13                 // class io/netty/util/concurrent/DefaultThreadFactory
      48: dup
      49: ldc           #14                 // String ZkLedgerManagerScheduler
      51: invokespecial #15                 // Method io/netty/util/concurrent/DefaultThreadFactory."<init>":(Ljava/lang/String;)V
      54: invokestatic  #16                 // Method java/util/concurrent/Executors.newSingleThreadScheduledExecutor:(Ljava/util/concurrent/ThreadFactory;)Ljava/util/concurrent/ScheduledExecutorService;
      57: putfield      #17                 // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      60: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      63: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      68: ifeq          85
      71: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      74: ldc           #19                 // String Using AbstractZkLedgerManager with root path : {}
      76: aload_0
      77: getfield      #12                 // Field ledgerRootPath:Ljava/lang/String;
      80: invokeinterface #20,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      85: return

  public abstract java.lang.String getLedgerPath(long);

  protected abstract long getLedgerId(java.lang.String) throws java.io.IOException;

  public void process(org.apache.zookeeper.WatchedEvent);
    Code:
       0: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #21                 // String Received watched event {} from zookeeper based ledger manager.
       5: aload_1
       6: invokeinterface #20,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      11: getstatic     #22                 // Field org/apache/zookeeper/Watcher$Event$EventType.None:Lorg/apache/zookeeper/Watcher$Event$EventType;
      14: aload_1
      15: invokevirtual #23                 // Method org/apache/zookeeper/WatchedEvent.getType:()Lorg/apache/zookeeper/Watcher$Event$EventType;
      18: if_acmpne     124
      21: getstatic     #24                 // Field org/apache/zookeeper/Watcher$Event$KeeperState.Expired:Lorg/apache/zookeeper/Watcher$Event$KeeperState;
      24: aload_1
      25: invokevirtual #25                 // Method org/apache/zookeeper/WatchedEvent.getState:()Lorg/apache/zookeeper/Watcher$Event$KeeperState;
      28: if_acmpne     123
      31: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      34: ldc           #26                 // String ZooKeeper client expired on ledger manager.
      36: invokeinterface #27,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      41: new           #28                 // class java/util/HashSet
      44: dup
      45: aload_0
      46: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
      49: invokeinterface #29,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.keySet:()Ljava/util/Set;
      54: invokespecial #30                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      57: astore_2
      58: aload_2
      59: invokeinterface #31,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      64: astore_3
      65: aload_3
      66: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      71: ifeq          123
      74: aload_3
      75: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      80: checkcast     #34                 // class java/lang/Long
      83: astore        4
      85: aload_0
      86: getfield      #17                 // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      89: new           #35                 // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask
      92: dup
      93: aload_0
      94: aload         4
      96: invokevirtual #36                 // Method java/lang/Long.longValue:()J
      99: invokespecial #37                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;J)V
     102: invokeinterface #38,  2           // InterfaceMethod java/util/concurrent/ScheduledExecutorService.submit:(Ljava/lang/Runnable;)Ljava/util/concurrent/Future;
     107: pop
     108: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     111: ldc           #39                 // String Re-read ledger metadata for {} after zookeeper session expired.
     113: aload         4
     115: invokeinterface #40,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     120: goto          65
     123: return
     124: aload_1
     125: invokevirtual #41                 // Method org/apache/zookeeper/WatchedEvent.getPath:()Ljava/lang/String;
     128: astore_2
     129: aconst_null
     130: aload_2
     131: if_acmpne     135
     134: return
     135: aload_0
     136: aload_1
     137: invokevirtual #41                 // Method org/apache/zookeeper/WatchedEvent.getPath:()Ljava/lang/String;
     140: invokevirtual #42                 // Method getLedgerId:(Ljava/lang/String;)J
     143: lstore_3
     144: goto          166
     147: astore        5
     149: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     152: ldc           #44                 // String Received invalid ledger path {} :
     154: aload_1
     155: invokevirtual #41                 // Method org/apache/zookeeper/WatchedEvent.getPath:()Ljava/lang/String;
     158: aload         5
     160: invokeinterface #45,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     165: return
     166: getstatic     #46                 // Field org/apache/bookkeeper/meta/AbstractZkLedgerManager$6.$SwitchMap$org$apache$zookeeper$Watcher$Event$EventType:[I
     169: aload_1
     170: invokevirtual #23                 // Method org/apache/zookeeper/WatchedEvent.getType:()Lorg/apache/zookeeper/Watcher$Event$EventType;
     173: invokevirtual #47                 // Method org/apache/zookeeper/Watcher$Event$EventType.ordinal:()I
     176: iaload
     177: lookupswitch  { // 2
                     1: 204
                     2: 365
               default: 380
          }
     204: aload_0
     205: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
     208: lload_3
     209: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     212: invokeinterface #49,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     217: checkcast     #50                 // class java/util/Set
     220: astore        5
     222: aconst_null
     223: aload         5
     225: if_acmpeq     337
     228: aload         5
     230: dup
     231: astore        6
     233: monitorenter
     234: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     237: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     242: ifeq          261
     245: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     248: ldc           #51                 // String Removed ledger metadata listeners on ledger {} : {}
     250: lload_3
     251: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     254: aload         5
     256: invokeinterface #52,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     261: aload         5
     263: invokeinterface #31,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     268: astore        7
     270: aload         7
     272: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     277: ifeq          304
     280: aload         7
     282: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     287: checkcast     #53                 // class org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$LedgerMetadataListener
     290: astore        8
     292: aload         8
     294: lload_3
     295: aconst_null
     296: invokeinterface #54,  4           // InterfaceMethod org/apache/bookkeeper/proto/BookkeeperInternalCallbacks$LedgerMetadataListener.onChanged:(JLorg/apache/bookkeeper/versioning/Versioned;)V
     301: goto          270
     304: aload_0
     305: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
     308: lload_3
     309: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     312: aload         5
     314: invokeinterface #55,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;Ljava/lang/Object;)Z
     319: pop
     320: aload         6
     322: monitorexit
     323: goto          334
     326: astore        9
     328: aload         6
     330: monitorexit
     331: aload         9
     333: athrow
     334: goto          409
     337: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     340: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     345: ifeq          409
     348: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     351: ldc           #56                 // String No ledger metadata listeners to remove from ledger {} after it\'s deleted.
     353: lload_3
     354: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     357: invokeinterface #20,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     362: goto          409
     365: new           #35                 // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask
     368: dup
     369: aload_0
     370: lload_3
     371: invokespecial #37                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;J)V
     374: invokevirtual #57                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask.run:()V
     377: goto          409
     380: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     383: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     388: ifeq          409
     391: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     394: ldc           #58                 // String Received event {} on {}.
     396: aload_1
     397: invokevirtual #23                 // Method org/apache/zookeeper/WatchedEvent.getType:()Lorg/apache/zookeeper/Watcher$Event$EventType;
     400: aload_1
     401: invokevirtual #41                 // Method org/apache/zookeeper/WatchedEvent.getPath:()Ljava/lang/String;
     404: invokeinterface #52,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     409: return
    Exception table:
       from    to  target type
         135   144   147   Class java/io/IOException
         234   323   326   any
         326   331   326   any

  public java.util.concurrent.CompletableFuture<org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>> createLedgerMetadata(long, org.apache.bookkeeper.client.api.LedgerMetadata);
    Code:
       0: new           #59                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #60                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore        4
       9: invokestatic  #61                 // Method java/util/concurrent/ThreadLocalRandom.current:()Ljava/util/concurrent/ThreadLocalRandom;
      12: ldc2_w        #62                 // long 9223372036854775807l
      15: invokevirtual #64                 // Method java/util/concurrent/ThreadLocalRandom.nextLong:(J)J
      18: lstore        5
      20: aload_3
      21: invokeinterface #65,  1           // InterfaceMethod org/apache/bookkeeper/client/api/LedgerMetadata.getMetadataFormatVersion:()I
      26: iconst_2
      27: if_icmple     51
      30: aload_3
      31: invokestatic  #66                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.from:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      34: lload_1
      35: invokevirtual #67                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withId:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      38: lload         5
      40: invokevirtual #68                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.withCToken:(J)Lorg/apache/bookkeeper/client/LedgerMetadataBuilder;
      43: invokevirtual #69                 // Method org/apache/bookkeeper/client/LedgerMetadataBuilder.build:()Lorg/apache/bookkeeper/client/api/LedgerMetadata;
      46: astore        7
      48: goto          54
      51: aload_3
      52: astore        7
      54: aload_0
      55: lload_1
      56: invokevirtual #70                 // Method getLedgerPath:(J)Ljava/lang/String;
      59: astore        8
      61: new           #71                 // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$1
      64: dup
      65: aload_0
      66: aload         4
      68: aload         7
      70: lload_1
      71: lload         5
      73: invokespecial #72                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$1."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;Ljava/util/concurrent/CompletableFuture;Lorg/apache/bookkeeper/client/api/LedgerMetadata;JJ)V
      76: astore        9
      78: aload_0
      79: getfield      #1                  // Field serDe:Lorg/apache/bookkeeper/meta/LedgerMetadataSerDe;
      82: aload         7
      84: invokevirtual #73                 // Method org/apache/bookkeeper/meta/LedgerMetadataSerDe.serialize:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)[B
      87: astore        10
      89: goto          112
      92: astore        11
      94: aload         4
      96: new           #74                 // class org/apache/bookkeeper/client/BKException$BKMetadataSerializationException
      99: dup
     100: aload         11
     102: invokespecial #75                 // Method org/apache/bookkeeper/client/BKException$BKMetadataSerializationException."<init>":(Ljava/lang/Throwable;)V
     105: invokevirtual #76                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
     108: pop
     109: aload         4
     111: areturn
     112: aload_0
     113: getfield      #9                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
     116: invokestatic  #77                 // Method org/apache/bookkeeper/util/ZkUtils.getACLs:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/util/List;
     119: astore        11
     121: aload_0
     122: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
     125: aload         8
     127: aload         10
     129: aload         11
     131: getstatic     #78                 // Field org/apache/zookeeper/CreateMode.PERSISTENT:Lorg/apache/zookeeper/CreateMode;
     134: aload         9
     136: aconst_null
     137: invokestatic  #79                 // Method org/apache/bookkeeper/util/ZkUtils.asyncCreateFullPathOptimistic:(Lorg/apache/zookeeper/ZooKeeper;Ljava/lang/String;[BLjava/util/List;Lorg/apache/zookeeper/CreateMode;Lorg/apache/zookeeper/AsyncCallback$StringCallback;Ljava/lang/Object;)V
     140: aload         4
     142: areturn
    Exception table:
       from    to  target type
          78    89    92   Class java/io/IOException

  public java.util.concurrent.CompletableFuture<java.lang.Void> removeLedgerMetadata(long, org.apache.bookkeeper.versioning.Version);
    Code:
       0: new           #59                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #60                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore        4
       9: iconst_m1
      10: istore        5
      12: getstatic     #80                 // Field org/apache/bookkeeper/versioning/Version.NEW:Lorg/apache/bookkeeper/versioning/Version;
      15: aload_3
      16: if_acmpne     49
      19: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      22: ldc           #81                 // String Request to delete ledger {} metadata with version set to the initial one
      24: lload_1
      25: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      28: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
      33: aload         4
      35: new           #83                 // class org/apache/bookkeeper/client/BKException$BKMetadataVersionException
      38: dup
      39: invokespecial #84                 // Method org/apache/bookkeeper/client/BKException$BKMetadataVersionException."<init>":()V
      42: invokevirtual #76                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      45: pop
      46: aload         4
      48: areturn
      49: getstatic     #85                 // Field org/apache/bookkeeper/versioning/Version.ANY:Lorg/apache/bookkeeper/versioning/Version;
      52: aload_3
      53: if_acmpeq     103
      56: aload_3
      57: instanceof    #86                 // class org/apache/bookkeeper/versioning/LongVersion
      60: ifne          93
      63: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      66: ldc           #87                 // String Not an instance of ZKVersion: {}
      68: lload_1
      69: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      72: invokeinterface #40,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      77: aload         4
      79: new           #83                 // class org/apache/bookkeeper/client/BKException$BKMetadataVersionException
      82: dup
      83: invokespecial #84                 // Method org/apache/bookkeeper/client/BKException$BKMetadataVersionException."<init>":()V
      86: invokevirtual #76                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      89: pop
      90: aload         4
      92: areturn
      93: aload_3
      94: checkcast     #86                 // class org/apache/bookkeeper/versioning/LongVersion
      97: invokevirtual #88                 // Method org/apache/bookkeeper/versioning/LongVersion.getLongVersion:()J
     100: l2i
     101: istore        5
     103: new           #89                 // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$2
     106: dup
     107: aload_0
     108: lload_1
     109: aload         4
     111: invokespecial #90                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$2."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;JLjava/util/concurrent/CompletableFuture;)V
     114: astore        6
     116: aload_0
     117: lload_1
     118: invokevirtual #70                 // Method getLedgerPath:(J)Ljava/lang/String;
     121: astore        7
     123: aload_0
     124: instanceof    #91                 // class org/apache/bookkeeper/meta/HierarchicalLedgerManager
     127: ifne          137
     130: aload_0
     131: instanceof    #92                 // class org/apache/bookkeeper/meta/LongHierarchicalLedgerManager
     134: ifeq          155
     137: aload_0
     138: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
     141: aload         7
     143: iload         5
     145: aload         6
     147: aload         7
     149: invokestatic  #93                 // Method org/apache/bookkeeper/util/ZkUtils.asyncDeleteFullPathOptimistic:(Lorg/apache/zookeeper/ZooKeeper;Ljava/lang/String;ILorg/apache/zookeeper/AsyncCallback$VoidCallback;Ljava/lang/String;)V
     152: goto          169
     155: aload_0
     156: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
     159: aload         7
     161: iload         5
     163: aload         6
     165: aconst_null
     166: invokevirtual #94                 // Method org/apache/zookeeper/ZooKeeper.delete:(Ljava/lang/String;ILorg/apache/zookeeper/AsyncCallback$VoidCallback;Ljava/lang/Object;)V
     169: aload         4
     171: areturn

  public void registerLedgerMetadataListener(long, org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$LedgerMetadataListener);
    Code:
       0: aconst_null
       1: aload_3
       2: if_acmpeq     141
       5: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       8: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      13: ifeq          31
      16: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      19: ldc           #95                 // String Registered ledger metadata listener {} on ledger {}.
      21: aload_3
      22: lload_1
      23: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      26: invokeinterface #52,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      31: aload_0
      32: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
      35: lload_1
      36: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      39: invokeinterface #49,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      44: checkcast     #50                 // class java/util/Set
      47: astore        4
      49: aload         4
      51: ifnonnull     100
      54: new           #28                 // class java/util/HashSet
      57: dup
      58: invokespecial #96                 // Method java/util/HashSet."<init>":()V
      61: astore        5
      63: aload_0
      64: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
      67: lload_1
      68: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      71: aload         5
      73: invokeinterface #97,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      78: checkcast     #50                 // class java/util/Set
      81: astore        6
      83: aconst_null
      84: aload         6
      86: if_acmpeq     96
      89: aload         6
      91: astore        4
      93: goto          100
      96: aload         5
      98: astore        4
     100: aload         4
     102: dup
     103: astore        5
     105: monitorenter
     106: aload         4
     108: aload_3
     109: invokeinterface #98,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     114: pop
     115: aload         5
     117: monitorexit
     118: goto          129
     121: astore        7
     123: aload         5
     125: monitorexit
     126: aload         7
     128: athrow
     129: new           #35                 // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask
     132: dup
     133: aload_0
     134: lload_1
     135: invokespecial #37                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;J)V
     138: invokevirtual #57                 // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$ReadLedgerMetadataTask.run:()V
     141: return
    Exception table:
       from    to  target type
         106   118   121   any
         121   126   121   any

  public void unregisterLedgerMetadataListener(long, org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$LedgerMetadataListener);
    Code:
       0: aload_0
       1: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
       4: lload_1
       5: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
       8: invokeinterface #49,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      13: checkcast     #50                 // class java/util/Set
      16: astore        4
      18: aload         4
      20: ifnull        106
      23: aload         4
      25: dup
      26: astore        5
      28: monitorenter
      29: aload         4
      31: aload_3
      32: invokeinterface #99,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      37: ifeq          66
      40: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      43: invokeinterface #18,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      48: ifeq          66
      51: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      54: ldc           #100                // String Unregistered ledger metadata listener {} on ledger {}.
      56: aload_3
      57: lload_1
      58: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      61: invokeinterface #52,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      66: aload         4
      68: invokeinterface #101,  1          // InterfaceMethod java/util/Set.isEmpty:()Z
      73: ifeq          92
      76: aload_0
      77: getfield      #6                  // Field listeners:Ljava/util/concurrent/ConcurrentMap;
      80: lload_1
      81: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      84: aload         4
      86: invokeinterface #55,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;Ljava/lang/Object;)Z
      91: pop
      92: aload         5
      94: monitorexit
      95: goto          106
      98: astore        6
     100: aload         5
     102: monitorexit
     103: aload         6
     105: athrow
     106: return
    Exception table:
       from    to  target type
          29    95    98   any
          98   103    98   any

  public java.util.concurrent.CompletableFuture<org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>> readLedgerMetadata(long);
    Code:
       0: aload_0
       1: lload_1
       2: aconst_null
       3: invokevirtual #102                // Method readLedgerMetadata:(JLorg/apache/zookeeper/Watcher;)Ljava/util/concurrent/CompletableFuture;
       6: areturn

  protected java.util.concurrent.CompletableFuture<org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>> readLedgerMetadata(long, org.apache.zookeeper.Watcher);
    Code:
       0: new           #59                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #60                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore        4
       9: aload_0
      10: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
      13: aload_0
      14: lload_1
      15: invokevirtual #70                 // Method getLedgerPath:(J)Ljava/lang/String;
      18: aload_3
      19: new           #103                // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$3
      22: dup
      23: aload_0
      24: lload_1
      25: aload         4
      27: invokespecial #104                // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$3."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;JLjava/util/concurrent/CompletableFuture;)V
      30: aconst_null
      31: invokevirtual #105                // Method org/apache/zookeeper/ZooKeeper.getData:(Ljava/lang/String;Lorg/apache/zookeeper/Watcher;Lorg/apache/zookeeper/AsyncCallback$DataCallback;Ljava/lang/Object;)V
      34: aload         4
      36: areturn

  public java.util.concurrent.CompletableFuture<org.apache.bookkeeper.versioning.Versioned<org.apache.bookkeeper.client.api.LedgerMetadata>> writeLedgerMetadata(long, org.apache.bookkeeper.client.api.LedgerMetadata, org.apache.bookkeeper.versioning.Version);
    Code:
       0: new           #59                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #60                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore        5
       9: aload         4
      11: instanceof    #86                 // class org/apache/bookkeeper/versioning/LongVersion
      14: ifne          33
      17: aload         5
      19: new           #83                 // class org/apache/bookkeeper/client/BKException$BKMetadataVersionException
      22: dup
      23: invokespecial #84                 // Method org/apache/bookkeeper/client/BKException$BKMetadataVersionException."<init>":()V
      26: invokevirtual #76                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      29: pop
      30: aload         5
      32: areturn
      33: aload         4
      35: checkcast     #86                 // class org/apache/bookkeeper/versioning/LongVersion
      38: astore        6
      40: aload_0
      41: getfield      #1                  // Field serDe:Lorg/apache/bookkeeper/meta/LedgerMetadataSerDe;
      44: aload_3
      45: invokevirtual #73                 // Method org/apache/bookkeeper/meta/LedgerMetadataSerDe.serialize:(Lorg/apache/bookkeeper/client/api/LedgerMetadata;)[B
      48: astore        7
      50: goto          73
      53: astore        8
      55: aload         5
      57: new           #74                 // class org/apache/bookkeeper/client/BKException$BKMetadataSerializationException
      60: dup
      61: aload         8
      63: invokespecial #75                 // Method org/apache/bookkeeper/client/BKException$BKMetadataSerializationException."<init>":(Ljava/lang/Throwable;)V
      66: invokevirtual #76                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      69: pop
      70: aload         5
      72: areturn
      73: aload_0
      74: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
      77: aload_0
      78: lload_1
      79: invokevirtual #70                 // Method getLedgerPath:(J)Ljava/lang/String;
      82: aload         7
      84: aload         6
      86: invokevirtual #88                 // Method org/apache/bookkeeper/versioning/LongVersion.getLongVersion:()J
      89: l2i
      90: new           #106                // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$4
      93: dup
      94: aload_0
      95: aload         5
      97: aload_3
      98: lload_1
      99: invokespecial #107                // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$4."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;Ljava/util/concurrent/CompletableFuture;Lorg/apache/bookkeeper/client/api/LedgerMetadata;J)V
     102: aconst_null
     103: invokevirtual #108                // Method org/apache/zookeeper/ZooKeeper.setData:(Ljava/lang/String;[BILorg/apache/zookeeper/AsyncCallback$StatCallback;Ljava/lang/Object;)V
     106: aload         5
     108: areturn
    Exception table:
       from    to  target type
          40    50    53   Class java/io/IOException

  protected void asyncProcessLedgersInSingleNode(java.lang.String, org.apache.bookkeeper.proto.BookkeeperInternalCallbacks$Processor<java.lang.Long>, org.apache.zookeeper.AsyncCallback$VoidCallback, java.lang.Object, int, int);
    Code:
       0: aload_0
       1: getfield      #10                 // Field zk:Lorg/apache/zookeeper/ZooKeeper;
       4: aload_1
       5: new           #109                // class org/apache/bookkeeper/meta/AbstractZkLedgerManager$5
       8: dup
       9: aload_0
      10: aload_3
      11: iload         5
      13: aload         4
      15: iload         6
      17: aload_1
      18: aload_2
      19: invokespecial #110                // Method org/apache/bookkeeper/meta/AbstractZkLedgerManager$5."<init>":(Lorg/apache/bookkeeper/meta/AbstractZkLedgerManager;Lorg/apache/zookeeper/AsyncCallback$VoidCallback;ILjava/lang/Object;ILjava/lang/String;Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$Processor;)V
      22: invokestatic  #111                // Method org/apache/bookkeeper/util/ZkUtils.getChildrenInSingleNode:(Lorg/apache/zookeeper/ZooKeeper;Ljava/lang/String;Lorg/apache/bookkeeper/proto/BookkeeperInternalCallbacks$GenericCallback;)V
      25: return

  public static boolean isSpecialZnode(java.lang.String);
    Code:
       0: ldc           #113                // String available
       2: aload_0
       3: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
       6: ifne          52
       9: ldc           #115                // String cookies
      11: aload_0
      12: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      15: ifne          52
      18: ldc           #116                // String LAYOUT
      20: aload_0
      21: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      24: ifne          52
      27: ldc           #117                // String INSTANCEID
      29: aload_0
      30: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      33: ifne          52
      36: ldc           #118                // String underreplication
      38: aload_0
      39: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      42: ifne          52
      45: aload_0
      46: invokestatic  #119                // Method isLeadgerIdGeneratorZnode:(Ljava/lang/String;)Z
      49: ifeq          56
      52: iconst_1
      53: goto          57
      56: iconst_0
      57: ireturn

  public static boolean isLeadgerIdGeneratorZnode(java.lang.String);
    Code:
       0: ldc           #121                // String idgen
       2: aload_0
       3: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
       6: ifne          27
       9: ldc           #122                // String idgen-long
      11: aload_0
      12: invokevirtual #114                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      15: ifne          27
      18: aload_0
      19: ldc           #124                // String ID-
      21: invokevirtual #125                // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      24: ifeq          31
      27: iconst_1
      28: goto          32
      31: iconst_0
      32: ireturn

  protected abstract java.lang.String getLedgerParentNodeRegex();

  public boolean isLedgerParentNode(java.lang.String);
    Code:
       0: aload_1
       1: aload_0
       2: invokevirtual #126                // Method getLedgerParentNodeRegex:()Ljava/lang/String;
       5: invokevirtual #127                // Method java/lang/String.matches:(Ljava/lang/String;)Z
       8: ireturn

  protected java.util.NavigableSet<java.lang.Long> ledgerListToSet(java.util.List<java.lang.String>, java.lang.String);
    Code:
       0: new           #128                // class java/util/TreeSet
       3: dup
       4: invokespecial #129                // Method java/util/TreeSet."<init>":()V
       7: astore_3
       8: aload_1
       9: invokeinterface #130,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      14: astore        4
      16: aload         4
      18: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          126
      26: aload         4
      28: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #131                // class java/lang/String
      36: astore        5
      38: aload         5
      40: invokestatic  #132                // Method isSpecialZnode:(Ljava/lang/String;)Z
      43: ifeq          49
      46: goto          16
      49: aload_3
      50: aload_0
      51: new           #133                // class java/lang/StringBuilder
      54: dup
      55: invokespecial #134                // Method java/lang/StringBuilder."<init>":()V
      58: aload_2
      59: invokevirtual #135                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: ldc           #136                // String /
      64: invokevirtual #135                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      67: aload         5
      69: invokevirtual #135                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      72: invokevirtual #137                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      75: invokevirtual #42                 // Method getLedgerId:(Ljava/lang/String;)J
      78: invokestatic  #48                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      81: invokeinterface #138,  2          // InterfaceMethod java/util/NavigableSet.add:(Ljava/lang/Object;)Z
      86: pop
      87: goto          123
      90: astore        6
      92: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      95: new           #133                // class java/lang/StringBuilder
      98: dup
      99: invokespecial #134                // Method java/lang/StringBuilder."<init>":()V
     102: ldc           #139                // String Error extracting ledgerId from ZK ledger node:
     104: invokevirtual #135                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     107: aload         5
     109: invokevirtual #135                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     112: invokevirtual #137                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     115: invokeinterface #140,  2          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     120: goto          16
     123: goto          16
     126: aload_3
     127: areturn
    Exception table:
       from    to  target type
          49    87    90   Class java/io/IOException

  public void close();
    Code:
       0: aload_0
       1: getfield      #17                 // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
       4: invokeinterface #141,  1          // InterfaceMethod java/util/concurrent/ScheduledExecutorService.shutdown:()V
       9: goto          24
      12: astore_1
      13: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      16: ldc           #143                // String Error when closing zookeeper based ledger manager:
      18: aload_1
      19: invokeinterface #144,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      24: return
    Exception table:
       from    to  target type
           0     9    12   Class java/lang/Exception

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static org.apache.bookkeeper.meta.LedgerMetadataSerDe access$100(org.apache.bookkeeper.meta.AbstractZkLedgerManager);
    Code:
       0: aload_0
       1: getfield      #1                  // Field serDe:Lorg/apache/bookkeeper/meta/LedgerMetadataSerDe;
       4: areturn

  static {};
    Code:
       0: ldc           #145                // class org/apache/bookkeeper/meta/AbstractZkLedgerManager
       2: invokestatic  #146                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       8: return
}

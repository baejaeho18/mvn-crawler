Compiled from "ZkLedgerAuditorManager.java"
public class org.apache.bookkeeper.meta.ZkLedgerAuditorManager implements org.apache.bookkeeper.meta.LedgerAuditorManager {
  private static final org.slf4j.Logger log;

  private final org.apache.zookeeper.ZooKeeper zkc;

  private final org.apache.bookkeeper.conf.ServerConfiguration conf;

  private final java.lang.String basePath;

  private final java.lang.String electionPath;

  private java.lang.String myVote;

  private static final java.lang.String ELECTION_ZNODE;

  private static final int AUDITOR_INDEX;

  private static final java.lang.String VOTE_PREFIX;

  private static final java.lang.String PATH_SEPARATOR;

  private volatile java.util.function.Consumer<org.apache.bookkeeper.meta.LedgerAuditorManager$AuditorEvent> listener;

  private volatile boolean isClosed;

  private final org.apache.bookkeeper.stats.Counter electionAttempts;

  public org.apache.bookkeeper.meta.ZkLedgerAuditorManager(org.apache.zookeeper.ZooKeeper, org.apache.bookkeeper.conf.ServerConfiguration, org.apache.bookkeeper.stats.StatsLogger);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #3                  // Field isClosed:Z
       9: aload_0
      10: aload_1
      11: putfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      14: aload_0
      15: aload_2
      16: putfield      #5                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      19: aload_0
      20: new           #6                  // class java/lang/StringBuilder
      23: dup
      24: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      27: aload_2
      28: invokestatic  #8                  // Method org/apache/bookkeeper/meta/zk/ZKMetadataDriverBase.resolveZkLedgersRootPath:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/lang/String;
      31: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: bipush        47
      36: invokevirtual #10                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      39: ldc           #12                 // String underreplication
      41: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      44: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      47: putfield      #14                 // Field basePath:Ljava/lang/String;
      50: aload_0
      51: new           #6                  // class java/lang/StringBuilder
      54: dup
      55: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      58: aload_0
      59: getfield      #14                 // Field basePath:Ljava/lang/String;
      62: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: bipush        47
      67: invokevirtual #10                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      70: ldc           #16                 // String auditorelection
      72: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      75: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      78: putfield      #17                 // Field electionPath:Ljava/lang/String;
      81: aload_0
      82: aload_3
      83: ldc           #18                 // String election_attempts
      85: invokeinterface #19,  2           // InterfaceMethod org/apache/bookkeeper/stats/StatsLogger.getCounter:(Ljava/lang/String;)Lorg/apache/bookkeeper/stats/Counter;
      90: putfield      #20                 // Field electionAttempts:Lorg/apache/bookkeeper/stats/Counter;
      93: return

  public void tryToBecomeAuditor(java.lang.String, java.util.function.Consumer<org.apache.bookkeeper.meta.LedgerAuditorManager$AuditorEvent>) throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: aload_2
       2: putfield      #21                 // Field listener:Ljava/util/function/Consumer;
       5: aload_0
       6: invokespecial #22                 // Method createElectorPath:()V
       9: aload_0
      10: getfield      #3                  // Field isClosed:Z
      13: ifne          248
      16: aload_0
      17: aload_1
      18: invokespecial #23                 // Method createMyVote:(Ljava/lang/String;)V
      21: aload_0
      22: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      25: aload_0
      26: ldc           #24                 // String
      28: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
      31: iconst_0
      32: invokevirtual #26                 // Method org/apache/zookeeper/ZooKeeper.getChildren:(Ljava/lang/String;Z)Ljava/util/List;
      35: astore_3
      36: iconst_0
      37: aload_3
      38: invokeinterface #27,  1           // InterfaceMethod java/util/List.size:()I
      43: if_icmplt     56
      46: new           #28                 // class java/lang/IllegalArgumentException
      49: dup
      50: ldc           #29                 // String At least one bookie server should present to elect the Auditor!
      52: invokespecial #30                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      55: athrow
      56: aload_3
      57: new           #31                 // class org/apache/bookkeeper/meta/ZkLedgerAuditorManager$ElectionComparator
      60: dup
      61: aconst_null
      62: invokespecial #32                 // Method org/apache/bookkeeper/meta/ZkLedgerAuditorManager$ElectionComparator."<init>":(Lorg/apache/bookkeeper/meta/ZkLedgerAuditorManager$1;)V
      65: invokestatic  #33                 // Method java/util/Collections.sort:(Ljava/util/List;Ljava/util/Comparator;)V
      68: aload_0
      69: getfield      #34                 // Field myVote:Ljava/lang/String;
      72: ldc           #35                 // String /
      74: invokestatic  #36                 // Method org/apache/commons/lang/StringUtils.substringAfterLast:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      77: astore        4
      79: aload_3
      80: iconst_0
      81: invokeinterface #37,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      86: checkcast     #38                 // class java/lang/String
      89: aload         4
      91: invokevirtual #39                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      94: ifeq          136
      97: invokestatic  #40                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.newBuilder:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder;
     100: aload_1
     101: invokevirtual #41                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder.setBookieId:(Ljava/lang/String;)Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder;
     104: astore        5
     106: aload_0
     107: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
     110: aload_0
     111: ldc           #24                 // String
     113: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
     116: aload         5
     118: invokevirtual #42                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder.build:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat;
     121: invokevirtual #43                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.toString:()Ljava/lang/String;
     124: getstatic     #44                 // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
     127: invokevirtual #45                 // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
     130: iconst_m1
     131: invokevirtual #46                 // Method org/apache/zookeeper/ZooKeeper.setData:(Ljava/lang/String;[BI)Lorg/apache/zookeeper/data/Stat;
     134: pop
     135: return
     136: aload_3
     137: aload         4
     139: invokeinterface #47,  2           // InterfaceMethod java/util/List.indexOf:(Ljava/lang/Object;)I
     144: istore        5
     146: iload         5
     148: ifge          161
     151: new           #28                 // class java/lang/IllegalArgumentException
     154: dup
     155: ldc           #48                 // String My vote has disappeared
     157: invokespecial #30                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     160: athrow
     161: iload         5
     163: iconst_1
     164: isub
     165: istore        6
     167: new           #49                 // class java/util/concurrent/CountDownLatch
     170: dup
     171: iconst_1
     172: invokespecial #50                 // Method java/util/concurrent/CountDownLatch."<init>":(I)V
     175: astore        7
     177: aconst_null
     178: aload_0
     179: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
     182: new           #6                  // class java/lang/StringBuilder
     185: dup
     186: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
     189: aload_0
     190: ldc           #35                 // String /
     192: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
     195: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     198: aload_3
     199: iload         6
     201: invokeinterface #37,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     206: checkcast     #38                 // class java/lang/String
     209: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     212: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     215: aload         7
     217: invokedynamic #51,  0             // InvokeDynamic #0:process:(Ljava/util/concurrent/CountDownLatch;)Lorg/apache/zookeeper/Watcher;
     222: invokevirtual #52                 // Method org/apache/zookeeper/ZooKeeper.exists:(Ljava/lang/String;Lorg/apache/zookeeper/Watcher;)Lorg/apache/zookeeper/data/Stat;
     225: if_acmpne     231
     228: goto          9
     231: aload         7
     233: invokevirtual #53                 // Method java/util/concurrent/CountDownLatch.await:()V
     236: aload_0
     237: getfield      #20                 // Field electionAttempts:Lorg/apache/bookkeeper/stats/Counter;
     240: invokeinterface #54,  1           // InterfaceMethod org/apache/bookkeeper/stats/Counter.inc:()V
     245: goto          9
     248: goto          261
     251: astore_3
     252: new           #56                 // class java/io/IOException
     255: dup
     256: aload_3
     257: invokespecial #57                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     260: athrow
     261: return
    Exception table:
       from    to  target type
           9   135   251   Class org/apache/zookeeper/KeeperException
         136   248   251   Class org/apache/zookeeper/KeeperException

  public org.apache.bookkeeper.net.BookieId getCurrentAuditor() throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: new           #6                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
       7: aload_0
       8: getfield      #5                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
      11: invokestatic  #8                  // Method org/apache/bookkeeper/meta/zk/ZKMetadataDriverBase.resolveZkLedgersRootPath:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/lang/String;
      14: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      17: bipush        47
      19: invokevirtual #10                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      22: ldc           #12                 // String underreplication
      24: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: bipush        47
      29: invokevirtual #10                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      32: ldc           #16                 // String auditorelection
      34: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      40: astore_1
      41: aload_0
      42: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      45: aload_1
      46: iconst_0
      47: invokevirtual #26                 // Method org/apache/zookeeper/ZooKeeper.getChildren:(Ljava/lang/String;Z)Ljava/util/List;
      50: astore_2
      51: aload_2
      52: new           #31                 // class org/apache/bookkeeper/meta/ZkLedgerAuditorManager$ElectionComparator
      55: dup
      56: aconst_null
      57: invokespecial #32                 // Method org/apache/bookkeeper/meta/ZkLedgerAuditorManager$ElectionComparator."<init>":(Lorg/apache/bookkeeper/meta/ZkLedgerAuditorManager$1;)V
      60: invokestatic  #33                 // Method java/util/Collections.sort:(Ljava/util/List;Ljava/util/Comparator;)V
      63: aload_2
      64: invokeinterface #27,  1           // InterfaceMethod java/util/List.size:()I
      69: iconst_1
      70: if_icmpge     75
      73: aconst_null
      74: areturn
      75: new           #6                  // class java/lang/StringBuilder
      78: dup
      79: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      82: aload_1
      83: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      86: ldc           #35                 // String /
      88: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      91: aload_2
      92: iconst_0
      93: invokeinterface #37,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      98: checkcast     #38                 // class java/lang/String
     101: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     104: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     107: astore_3
     108: aload_0
     109: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
     112: aload_3
     113: iconst_0
     114: aconst_null
     115: invokevirtual #58                 // Method org/apache/zookeeper/ZooKeeper.getData:(Ljava/lang/String;ZLorg/apache/zookeeper/data/Stat;)[B
     118: astore        4
     120: invokestatic  #40                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.newBuilder:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder;
     123: astore        5
     125: new           #38                 // class java/lang/String
     128: dup
     129: aload         4
     131: getstatic     #44                 // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
     134: invokespecial #59                 // Method java/lang/String."<init>":([BLjava/nio/charset/Charset;)V
     137: aload         5
     139: invokestatic  #60                 // Method com/google/protobuf/TextFormat.merge:(Ljava/lang/CharSequence;Lcom/google/protobuf/Message$Builder;)V
     142: aload         5
     144: invokevirtual #42                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder.build:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat;
     147: astore        6
     149: aload         6
     151: invokevirtual #61                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.getBookieId:()Ljava/lang/String;
     154: invokestatic  #62                 // Method org/apache/bookkeeper/net/BookieId.parse:(Ljava/lang/String;)Lorg/apache/bookkeeper/net/BookieId;
     157: areturn
     158: astore_2
     159: new           #56                 // class java/io/IOException
     162: dup
     163: aload_2
     164: invokespecial #57                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     167: athrow
    Exception table:
       from    to  target type
          41    74   158   Class org/apache/zookeeper/KeeperException
          75   157   158   Class org/apache/zookeeper/KeeperException

  public void close() throws java.lang.Exception;
    Code:
       0: getstatic     #63                 // Field log:Lorg/slf4j/Logger;
       3: ldc           #64                 // String Shutting down AuditorElector
       5: invokeinterface #65,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      10: aload_0
      11: iconst_1
      12: putfield      #3                  // Field isClosed:Z
      15: aload_0
      16: getfield      #34                 // Field myVote:Ljava/lang/String;
      19: ifnull        114
      22: aload_0
      23: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      26: aload_0
      27: getfield      #34                 // Field myVote:Ljava/lang/String;
      30: iconst_m1
      31: invokevirtual #66                 // Method org/apache/zookeeper/ZooKeeper.delete:(Ljava/lang/String;I)V
      34: goto          114
      37: astore_1
      38: goto          114
      41: astore_1
      42: invokestatic  #69                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      45: invokevirtual #70                 // Method java/lang/Thread.interrupt:()V
      48: getstatic     #63                 // Field log:Lorg/slf4j/Logger;
      51: new           #6                  // class java/lang/StringBuilder
      54: dup
      55: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      58: ldc           #71                 // String InterruptedException while deleting myVote:
      60: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: aload_0
      64: getfield      #34                 // Field myVote:Ljava/lang/String;
      67: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      70: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      73: aload_1
      74: invokeinterface #72,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      79: goto          114
      82: astore_1
      83: getstatic     #63                 // Field log:Lorg/slf4j/Logger;
      86: new           #6                  // class java/lang/StringBuilder
      89: dup
      90: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      93: ldc           #73                 // String Exception while deleting myVote:
      95: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      98: aload_0
      99: getfield      #34                 // Field myVote:Ljava/lang/String;
     102: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     105: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     108: aload_1
     109: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     114: return
    Exception table:
       from    to  target type
          22    34    37   Class org/apache/zookeeper/KeeperException$NoNodeException
          22    34    41   Class java/lang/InterruptedException
          22    34    82   Class org/apache/zookeeper/KeeperException

  private void createMyVote(java.lang.String) throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
       4: invokestatic  #75                 // Method org/apache/bookkeeper/util/ZkUtils.getACLs:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/util/List;
       7: astore_2
       8: invokestatic  #40                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.newBuilder:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder;
      11: aload_1
      12: invokevirtual #41                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder.setBookieId:(Ljava/lang/String;)Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder;
      15: astore_3
      16: aconst_null
      17: aload_0
      18: getfield      #34                 // Field myVote:Ljava/lang/String;
      21: if_acmpeq     40
      24: aconst_null
      25: aload_0
      26: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      29: aload_0
      30: getfield      #34                 // Field myVote:Ljava/lang/String;
      33: iconst_0
      34: invokevirtual #76                 // Method org/apache/zookeeper/ZooKeeper.exists:(Ljava/lang/String;Z)Lorg/apache/zookeeper/data/Stat;
      37: if_acmpne     74
      40: aload_0
      41: aload_0
      42: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      45: aload_0
      46: ldc           #77                 // String /V_
      48: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
      51: aload_3
      52: invokevirtual #42                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat$Builder.build:()Lorg/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat;
      55: invokevirtual #43                 // Method org/apache/bookkeeper/proto/DataFormats$AuditorVoteFormat.toString:()Ljava/lang/String;
      58: getstatic     #44                 // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
      61: invokevirtual #45                 // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      64: aload_2
      65: getstatic     #78                 // Field org/apache/zookeeper/CreateMode.EPHEMERAL_SEQUENTIAL:Lorg/apache/zookeeper/CreateMode;
      68: invokevirtual #79                 // Method org/apache/zookeeper/ZooKeeper.create:(Ljava/lang/String;[BLjava/util/List;Lorg/apache/zookeeper/CreateMode;)Ljava/lang/String;
      71: putfield      #34                 // Field myVote:Ljava/lang/String;
      74: goto          89
      77: astore        4
      79: new           #56                 // class java/io/IOException
      82: dup
      83: aload         4
      85: invokespecial #57                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
      88: athrow
      89: return
    Exception table:
       from    to  target type
          16    74    77   Class org/apache/zookeeper/KeeperException

  private void createElectorPath() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field conf:Lorg/apache/bookkeeper/conf/ServerConfiguration;
       4: invokestatic  #75                 // Method org/apache/bookkeeper/util/ZkUtils.getACLs:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;)Ljava/util/List;
       7: astore_1
       8: aload_0
       9: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      12: aload_0
      13: getfield      #14                 // Field basePath:Ljava/lang/String;
      16: iconst_0
      17: invokevirtual #76                 // Method org/apache/zookeeper/ZooKeeper.exists:(Ljava/lang/String;Z)Lorg/apache/zookeeper/data/Stat;
      20: ifnonnull     46
      23: aload_0
      24: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      27: aload_0
      28: getfield      #14                 // Field basePath:Ljava/lang/String;
      31: iconst_0
      32: newarray       byte
      34: aload_1
      35: getstatic     #80                 // Field org/apache/zookeeper/CreateMode.PERSISTENT:Lorg/apache/zookeeper/CreateMode;
      38: invokevirtual #79                 // Method org/apache/zookeeper/ZooKeeper.create:(Ljava/lang/String;[BLjava/util/List;Lorg/apache/zookeeper/CreateMode;)Ljava/lang/String;
      41: pop
      42: goto          46
      45: astore_2
      46: aload_0
      47: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      50: aload_0
      51: ldc           #24                 // String
      53: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
      56: iconst_0
      57: invokevirtual #76                 // Method org/apache/zookeeper/ZooKeeper.exists:(Ljava/lang/String;Z)Lorg/apache/zookeeper/data/Stat;
      60: ifnonnull     88
      63: aload_0
      64: getfield      #4                  // Field zkc:Lorg/apache/zookeeper/ZooKeeper;
      67: aload_0
      68: ldc           #24                 // String
      70: invokespecial #25                 // Method getVotePath:(Ljava/lang/String;)Ljava/lang/String;
      73: iconst_0
      74: newarray       byte
      76: aload_1
      77: getstatic     #80                 // Field org/apache/zookeeper/CreateMode.PERSISTENT:Lorg/apache/zookeeper/CreateMode;
      80: invokevirtual #79                 // Method org/apache/zookeeper/ZooKeeper.create:(Ljava/lang/String;[BLjava/util/List;Lorg/apache/zookeeper/CreateMode;)Ljava/lang/String;
      83: pop
      84: goto          88
      87: astore_2
      88: goto          121
      91: astore_1
      92: new           #56                 // class java/io/IOException
      95: dup
      96: ldc           #82                 // String Failed to initialize Auditor Elector
      98: aload_1
      99: invokespecial #83                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     102: athrow
     103: astore_1
     104: invokestatic  #69                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     107: invokevirtual #70                 // Method java/lang/Thread.interrupt:()V
     110: new           #56                 // class java/io/IOException
     113: dup
     114: ldc           #82                 // String Failed to initialize Auditor Elector
     116: aload_1
     117: invokespecial #83                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     120: athrow
     121: return
    Exception table:
       from    to  target type
          23    42    45   Class org/apache/zookeeper/KeeperException$NodeExistsException
          63    84    87   Class org/apache/zookeeper/KeeperException$NodeExistsException
           0    88    91   Class org/apache/zookeeper/KeeperException
           0    88   103   Class java/lang/InterruptedException

  private java.lang.String getVotePath(java.lang.String);
    Code:
       0: new           #6                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
       7: aload_0
       8: getfield      #17                 // Field electionPath:Ljava/lang/String;
      11: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      14: aload_1
      15: invokevirtual #9                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      18: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      21: areturn

  private void handleZkWatch(org.apache.zookeeper.WatchedEvent);
    Code:
       0: aload_0
       1: getfield      #3                  // Field isClosed:Z
       4: ifeq          8
       7: return
       8: aload_1
       9: invokevirtual #84                 // Method org/apache/zookeeper/WatchedEvent.getState:()Lorg/apache/zookeeper/Watcher$Event$KeeperState;
      12: getstatic     #85                 // Field org/apache/zookeeper/Watcher$Event$KeeperState.Expired:Lorg/apache/zookeeper/Watcher$Event$KeeperState;
      15: if_acmpne     43
      18: getstatic     #63                 // Field log:Lorg/slf4j/Logger;
      21: ldc           #86                 // String Lost ZK connection, shutting down
      23: invokeinterface #87,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      28: aload_0
      29: getfield      #21                 // Field listener:Ljava/util/function/Consumer;
      32: getstatic     #88                 // Field org/apache/bookkeeper/meta/LedgerAuditorManager$AuditorEvent.SessionLost:Lorg/apache/bookkeeper/meta/LedgerAuditorManager$AuditorEvent;
      35: invokeinterface #89,  2           // InterfaceMethod java/util/function/Consumer.accept:(Ljava/lang/Object;)V
      40: goto          65
      43: aload_1
      44: invokevirtual #90                 // Method org/apache/zookeeper/WatchedEvent.getType:()Lorg/apache/zookeeper/Watcher$Event$EventType;
      47: getstatic     #91                 // Field org/apache/zookeeper/Watcher$Event$EventType.NodeDeleted:Lorg/apache/zookeeper/Watcher$Event$EventType;
      50: if_acmpne     65
      53: aload_0
      54: getfield      #21                 // Field listener:Ljava/util/function/Consumer;
      57: getstatic     #92                 // Field org/apache/bookkeeper/meta/LedgerAuditorManager$AuditorEvent.VoteWasDeleted:Lorg/apache/bookkeeper/meta/LedgerAuditorManager$AuditorEvent;
      60: invokeinterface #89,  2           // InterfaceMethod java/util/function/Consumer.accept:(Ljava/lang/Object;)V
      65: return

  private static void lambda$tryToBecomeAuditor$0(java.util.concurrent.CountDownLatch, org.apache.zookeeper.WatchedEvent);
    Code:
       0: aload_0
       1: invokevirtual #93                 // Method java/util/concurrent/CountDownLatch.countDown:()V
       4: return

  static {};
    Code:
       0: ldc           #15                 // class org/apache/bookkeeper/meta/ZkLedgerAuditorManager
       2: invokestatic  #94                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #63                 // Field log:Lorg/slf4j/Logger;
       8: return
}

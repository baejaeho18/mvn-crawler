Compiled from "ProxyDetectorImpl.java"
class io.grpc.internal.ProxyDetectorImpl implements io.grpc.ProxyDetector {
  private static final java.util.logging.Logger log;

  private static final io.grpc.internal.ProxyDetectorImpl$AuthenticationProvider DEFAULT_AUTHENTICATOR;

  private static final com.google.common.base.Supplier<java.net.ProxySelector> DEFAULT_PROXY_SELECTOR;

  private static final java.lang.String GRPC_PROXY_ENV_VAR;

  private final com.google.common.base.Supplier<java.net.ProxySelector> proxySelector;

  private final io.grpc.internal.ProxyDetectorImpl$AuthenticationProvider authenticationProvider;

  private final java.net.InetSocketAddress overrideProxyAddress;

  static final java.lang.String PROXY_SCHEME;

  public io.grpc.internal.ProxyDetectorImpl();
    Code:
       0: aload_0
       1: getstatic     #2                  // Field DEFAULT_PROXY_SELECTOR:Lcom/google/common/base/Supplier;
       4: getstatic     #3                  // Field DEFAULT_AUTHENTICATOR:Lio/grpc/internal/ProxyDetectorImpl$AuthenticationProvider;
       7: ldc           #5                  // String GRPC_PROXY_EXP
       9: invokestatic  #6                  // Method java/lang/System.getenv:(Ljava/lang/String;)Ljava/lang/String;
      12: invokespecial #7                  // Method "<init>":(Lcom/google/common/base/Supplier;Lio/grpc/internal/ProxyDetectorImpl$AuthenticationProvider;Ljava/lang/String;)V
      15: return

  io.grpc.internal.ProxyDetectorImpl(com.google.common.base.Supplier<java.net.ProxySelector>, io.grpc.internal.ProxyDetectorImpl$AuthenticationProvider, java.lang.String);
    Code:
       0: aload_0
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: invokestatic  #9                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
       9: checkcast     #10                 // class com/google/common/base/Supplier
      12: putfield      #11                 // Field proxySelector:Lcom/google/common/base/Supplier;
      15: aload_0
      16: aload_2
      17: invokestatic  #9                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      20: checkcast     #12                 // class io/grpc/internal/ProxyDetectorImpl$AuthenticationProvider
      23: putfield      #13                 // Field authenticationProvider:Lio/grpc/internal/ProxyDetectorImpl$AuthenticationProvider;
      26: aload_3
      27: ifnull        41
      30: aload_0
      31: aload_3
      32: invokestatic  #14                 // Method overrideProxy:(Ljava/lang/String;)Ljava/net/InetSocketAddress;
      35: putfield      #15                 // Field overrideProxyAddress:Ljava/net/InetSocketAddress;
      38: goto          46
      41: aload_0
      42: aconst_null
      43: putfield      #15                 // Field overrideProxyAddress:Ljava/net/InetSocketAddress;
      46: return

  public io.grpc.ProxiedSocketAddress proxyFor(java.net.SocketAddress) throws java.io.IOException;
    Code:
       0: aload_1
       1: instanceof    #16                 // class java/net/InetSocketAddress
       4: ifne          9
       7: aconst_null
       8: areturn
       9: aload_0
      10: getfield      #15                 // Field overrideProxyAddress:Ljava/net/InetSocketAddress;
      13: ifnull        37
      16: invokestatic  #17                 // Method io/grpc/HttpConnectProxiedSocketAddress.newBuilder:()Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
      19: aload_0
      20: getfield      #15                 // Field overrideProxyAddress:Ljava/net/InetSocketAddress;
      23: invokevirtual #18                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setProxyAddress:(Ljava/net/SocketAddress;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
      26: aload_1
      27: checkcast     #16                 // class java/net/InetSocketAddress
      30: invokevirtual #19                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setTargetAddress:(Ljava/net/InetSocketAddress;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
      33: invokevirtual #20                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.build:()Lio/grpc/HttpConnectProxiedSocketAddress;
      36: areturn
      37: aload_0
      38: aload_1
      39: checkcast     #16                 // class java/net/InetSocketAddress
      42: invokespecial #21                 // Method detectProxy:(Ljava/net/InetSocketAddress;)Lio/grpc/ProxiedSocketAddress;
      45: areturn

  private io.grpc.ProxiedSocketAddress detectProxy(java.net.InetSocketAddress) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokestatic  #22                 // Method io/grpc/internal/GrpcUtil.getHost:(Ljava/net/InetSocketAddress;)Ljava/lang/String;
       4: astore_3
       5: goto          25
       8: astore        4
      10: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
      13: getstatic     #24                 // Field java/util/logging/Level.WARNING:Ljava/util/logging/Level;
      16: ldc           #25                 // String Failed to get host for proxy lookup, proceeding without proxy
      18: aload         4
      20: invokevirtual #26                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      23: aconst_null
      24: areturn
      25: new           #27                 // class java/net/URI
      28: dup
      29: ldc           #28                 // String https
      31: aconst_null
      32: aload_3
      33: aload_1
      34: invokevirtual #29                 // Method java/net/InetSocketAddress.getPort:()I
      37: aconst_null
      38: aconst_null
      39: aconst_null
      40: invokespecial #30                 // Method java/net/URI."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      43: astore_2
      44: goto          64
      47: astore        4
      49: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
      52: getstatic     #24                 // Field java/util/logging/Level.WARNING:Ljava/util/logging/Level;
      55: ldc           #32                 // String Failed to construct URI for proxy lookup, proceeding without proxy
      57: aload         4
      59: invokevirtual #26                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      62: aconst_null
      63: areturn
      64: aload_0
      65: getfield      #11                 // Field proxySelector:Lcom/google/common/base/Supplier;
      68: invokeinterface #33,  1           // InterfaceMethod com/google/common/base/Supplier.get:()Ljava/lang/Object;
      73: checkcast     #34                 // class java/net/ProxySelector
      76: astore        4
      78: aload         4
      80: ifnonnull     96
      83: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
      86: getstatic     #35                 // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
      89: ldc           #36                 // String proxy selector is null, so continuing without proxy lookup
      91: invokevirtual #37                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;)V
      94: aconst_null
      95: areturn
      96: aload         4
      98: aload_2
      99: invokevirtual #38                 // Method java/net/ProxySelector.select:(Ljava/net/URI;)Ljava/util/List;
     102: astore        5
     104: aload         5
     106: invokeinterface #39,  1           // InterfaceMethod java/util/List.size:()I
     111: iconst_1
     112: if_icmple     123
     115: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
     118: ldc           #40                 // String More than 1 proxy detected, gRPC will select the first one
     120: invokevirtual #41                 // Method java/util/logging/Logger.warning:(Ljava/lang/String;)V
     123: aload         5
     125: iconst_0
     126: invokeinterface #42,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     131: checkcast     #43                 // class java/net/Proxy
     134: astore        6
     136: aload         6
     138: invokevirtual #44                 // Method java/net/Proxy.type:()Ljava/net/Proxy$Type;
     141: getstatic     #45                 // Field java/net/Proxy$Type.DIRECT:Ljava/net/Proxy$Type;
     144: if_acmpne     149
     147: aconst_null
     148: areturn
     149: aload         6
     151: invokevirtual #46                 // Method java/net/Proxy.address:()Ljava/net/SocketAddress;
     154: checkcast     #16                 // class java/net/InetSocketAddress
     157: astore        7
     159: ldc           #47                 // String
     161: astore        8
     163: aload_0
     164: getfield      #13                 // Field authenticationProvider:Lio/grpc/internal/ProxyDetectorImpl$AuthenticationProvider;
     167: aload         7
     169: invokestatic  #22                 // Method io/grpc/internal/GrpcUtil.getHost:(Ljava/net/InetSocketAddress;)Ljava/lang/String;
     172: aload         7
     174: invokevirtual #48                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
     177: aload         7
     179: invokevirtual #29                 // Method java/net/InetSocketAddress.getPort:()I
     182: ldc           #28                 // String https
     184: aload         8
     186: aconst_null
     187: invokeinterface #49,  7           // InterfaceMethod io/grpc/internal/ProxyDetectorImpl$AuthenticationProvider.requestPasswordAuthentication:(Ljava/lang/String;Ljava/net/InetAddress;ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/net/PasswordAuthentication;
     192: astore        9
     194: aload         7
     196: invokevirtual #50                 // Method java/net/InetSocketAddress.isUnresolved:()Z
     199: ifeq          231
     202: aload         7
     204: invokevirtual #51                 // Method java/net/InetSocketAddress.getHostName:()Ljava/lang/String;
     207: invokestatic  #52                 // Method java/net/InetAddress.getByName:(Ljava/lang/String;)Ljava/net/InetAddress;
     210: astore        11
     212: new           #16                 // class java/net/InetSocketAddress
     215: dup
     216: aload         11
     218: aload         7
     220: invokevirtual #29                 // Method java/net/InetSocketAddress.getPort:()I
     223: invokespecial #53                 // Method java/net/InetSocketAddress."<init>":(Ljava/net/InetAddress;I)V
     226: astore        10
     228: goto          235
     231: aload         7
     233: astore        10
     235: invokestatic  #17                 // Method io/grpc/HttpConnectProxiedSocketAddress.newBuilder:()Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
     238: aload_1
     239: invokevirtual #19                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setTargetAddress:(Ljava/net/InetSocketAddress;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
     242: aload         10
     244: invokevirtual #18                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setProxyAddress:(Ljava/net/SocketAddress;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
     247: astore        11
     249: aload         9
     251: ifnonnull     260
     254: aload         11
     256: invokevirtual #20                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.build:()Lio/grpc/HttpConnectProxiedSocketAddress;
     259: areturn
     260: aload         11
     262: aload         9
     264: invokevirtual #54                 // Method java/net/PasswordAuthentication.getUserName:()Ljava/lang/String;
     267: invokevirtual #55                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setUsername:(Ljava/lang/String;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
     270: aload         9
     272: invokevirtual #56                 // Method java/net/PasswordAuthentication.getPassword:()[C
     275: ifnonnull     282
     278: aconst_null
     279: goto          294
     282: new           #57                 // class java/lang/String
     285: dup
     286: aload         9
     288: invokevirtual #56                 // Method java/net/PasswordAuthentication.getPassword:()[C
     291: invokespecial #58                 // Method java/lang/String."<init>":([C)V
     294: invokevirtual #59                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.setPassword:(Ljava/lang/String;)Lio/grpc/HttpConnectProxiedSocketAddress$Builder;
     297: invokevirtual #20                 // Method io/grpc/HttpConnectProxiedSocketAddress$Builder.build:()Lio/grpc/HttpConnectProxiedSocketAddress;
     300: areturn
    Exception table:
       from    to  target type
           0     5     8   Class java/lang/Throwable
          25    44    47   Class java/net/URISyntaxException

  private static java.net.InetSocketAddress overrideProxy(java.lang.String);
    Code:
       0: aload_0
       1: ifnonnull     6
       4: aconst_null
       5: areturn
       6: aload_0
       7: ldc           #60                 // String :
       9: iconst_2
      10: invokevirtual #61                 // Method java/lang/String.split:(Ljava/lang/String;I)[Ljava/lang/String;
      13: astore_1
      14: bipush        80
      16: istore_2
      17: aload_1
      18: arraylength
      19: iconst_1
      20: if_icmple     30
      23: aload_1
      24: iconst_1
      25: aaload
      26: invokestatic  #62                 // Method java/lang/Integer.parseInt:(Ljava/lang/String;)I
      29: istore_2
      30: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
      33: ldc           #63                 // String Detected GRPC_PROXY_EXP and will honor it, but this feature will be removed in a future release. Use the JVM flags \"-Dhttps.proxyHost=HOST -Dhttps.proxyPort=PORT\" to set the https proxy for this JVM.
      35: invokevirtual #41                 // Method java/util/logging/Logger.warning:(Ljava/lang/String;)V
      38: new           #16                 // class java/net/InetSocketAddress
      41: dup
      42: aload_1
      43: iconst_0
      44: aaload
      45: iload_2
      46: invokespecial #64                 // Method java/net/InetSocketAddress."<init>":(Ljava/lang/String;I)V
      49: areturn

  static java.util.logging.Logger access$000();
    Code:
       0: getstatic     #1                  // Field log:Ljava/util/logging/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #4                  // class io/grpc/internal/ProxyDetectorImpl
       2: invokevirtual #65                 // Method java/lang/Class.getName:()Ljava/lang/String;
       5: invokestatic  #66                 // Method java/util/logging/Logger.getLogger:(Ljava/lang/String;)Ljava/util/logging/Logger;
       8: putstatic     #1                  // Field log:Ljava/util/logging/Logger;
      11: new           #67                 // class io/grpc/internal/ProxyDetectorImpl$1
      14: dup
      15: invokespecial #68                 // Method io/grpc/internal/ProxyDetectorImpl$1."<init>":()V
      18: putstatic     #3                  // Field DEFAULT_AUTHENTICATOR:Lio/grpc/internal/ProxyDetectorImpl$AuthenticationProvider;
      21: new           #69                 // class io/grpc/internal/ProxyDetectorImpl$2
      24: dup
      25: invokespecial #70                 // Method io/grpc/internal/ProxyDetectorImpl$2."<init>":()V
      28: putstatic     #2                  // Field DEFAULT_PROXY_SELECTOR:Lcom/google/common/base/Supplier;
      31: return
}

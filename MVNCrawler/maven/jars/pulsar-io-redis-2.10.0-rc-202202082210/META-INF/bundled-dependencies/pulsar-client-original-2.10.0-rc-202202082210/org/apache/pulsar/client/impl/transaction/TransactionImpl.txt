Compiled from "TransactionImpl.java"
public class org.apache.pulsar.client.impl.transaction.TransactionImpl implements org.apache.pulsar.client.api.transaction.Transaction,io.netty.util.TimerTask {
  private static final org.slf4j.Logger log;

  private final org.apache.pulsar.client.impl.PulsarClientImpl client;

  private final long transactionTimeoutMs;

  private final long txnIdLeastBits;

  private final long txnIdMostBits;

  private final java.util.Map<java.lang.String, java.util.concurrent.CompletableFuture<java.lang.Void>> registerPartitionMap;

  private final java.util.Map<org.apache.commons.lang3.tuple.Pair<java.lang.String, java.lang.String>, java.util.concurrent.CompletableFuture<java.lang.Void>> registerSubscriptionMap;

  private final org.apache.pulsar.client.impl.transaction.TransactionCoordinatorClientImpl tcClient;

  private java.util.Map<org.apache.pulsar.client.impl.ConsumerImpl<?>, java.lang.Integer> cumulativeAckConsumers;

  private final java.util.ArrayList<java.util.concurrent.CompletableFuture<org.apache.pulsar.client.api.MessageId>> sendFutureList;

  private final java.util.ArrayList<java.util.concurrent.CompletableFuture<java.lang.Void>> ackFutureList;

  private volatile org.apache.pulsar.client.impl.transaction.TransactionImpl$State state;

  private static final java.util.concurrent.atomic.AtomicReferenceFieldUpdater<org.apache.pulsar.client.impl.transaction.TransactionImpl, org.apache.pulsar.client.impl.transaction.TransactionImpl$State> STATE_UPDATE;

  public void run(io.netty.util.Timeout) throws java.lang.Exception;
    Code:
       0: getstatic     #1                  // Field STATE_UPDATE:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
       3: aload_0
       4: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       7: getstatic     #3                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.TIMEOUT:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      10: invokevirtual #4                  // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.compareAndSet:(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Z
      13: pop
      14: return

  org.apache.pulsar.client.impl.transaction.TransactionImpl(org.apache.pulsar.client.impl.PulsarClientImpl, long, long, long);
    Code:
       0: aload_0
       1: invokespecial #5                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       8: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      11: aload_0
      12: aload_1
      13: putfield      #7                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      16: aload_0
      17: lload_2
      18: putfield      #8                  // Field transactionTimeoutMs:J
      21: aload_0
      22: lload         4
      24: putfield      #9                  // Field txnIdLeastBits:J
      27: aload_0
      28: lload         6
      30: putfield      #10                 // Field txnIdMostBits:J
      33: aload_0
      34: new           #11                 // class java/util/concurrent/ConcurrentHashMap
      37: dup
      38: invokespecial #12                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      41: putfield      #13                 // Field registerPartitionMap:Ljava/util/Map;
      44: aload_0
      45: new           #11                 // class java/util/concurrent/ConcurrentHashMap
      48: dup
      49: invokespecial #12                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      52: putfield      #14                 // Field registerSubscriptionMap:Ljava/util/Map;
      55: aload_0
      56: aload_1
      57: invokevirtual #15                 // Method org/apache/pulsar/client/impl/PulsarClientImpl.getTcClient:()Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      60: putfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      63: aload_0
      64: new           #17                 // class java/util/ArrayList
      67: dup
      68: invokespecial #18                 // Method java/util/ArrayList."<init>":()V
      71: putfield      #19                 // Field sendFutureList:Ljava/util/ArrayList;
      74: aload_0
      75: new           #17                 // class java/util/ArrayList
      78: dup
      79: invokespecial #18                 // Method java/util/ArrayList."<init>":()V
      82: putfield      #20                 // Field ackFutureList:Ljava/util/ArrayList;
      85: return

  public java.util.concurrent.CompletableFuture<java.lang.Void> registerProducedTopic(java.lang.String);
    Code:
       0: new           #21                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #22                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore_2
       8: aload_0
       9: aload_2
      10: invokevirtual #23                 // Method checkIfOpen:(Ljava/util/concurrent/CompletableFuture;)Z
      13: ifeq          50
      16: aload_0
      17: dup
      18: astore_3
      19: monitorenter
      20: aload_0
      21: getfield      #13                 // Field registerPartitionMap:Ljava/util/Map;
      24: aload_1
      25: aload_0
      26: aload_1
      27: invokedynamic #24,  0             // InvokeDynamic #0:apply:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/lang/String;)Ljava/util/function/BiFunction;
      32: invokeinterface #25,  3           // InterfaceMethod java/util/Map.compute:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      37: checkcast     #21                 // class java/util/concurrent/CompletableFuture
      40: aload_3
      41: monitorexit
      42: areturn
      43: astore        4
      45: aload_3
      46: monitorexit
      47: aload         4
      49: athrow
      50: aload_2
      51: areturn
    Exception table:
       from    to  target type
          20    42    43   any
          43    47    43   any

  public synchronized void registerSendOp(java.util.concurrent.CompletableFuture<org.apache.pulsar.client.api.MessageId>);
    Code:
       0: aload_0
       1: getfield      #19                 // Field sendFutureList:Ljava/util/ArrayList;
       4: aload_1
       5: invokevirtual #26                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
       8: pop
       9: return

  public java.util.concurrent.CompletableFuture<java.lang.Void> registerAckedTopic(java.lang.String, java.lang.String);
    Code:
       0: new           #21                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #22                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore_3
       8: aload_0
       9: aload_3
      10: invokevirtual #23                 // Method checkIfOpen:(Ljava/util/concurrent/CompletableFuture;)Z
      13: ifeq          58
      16: aload_0
      17: dup
      18: astore        4
      20: monitorenter
      21: aload_0
      22: getfield      #14                 // Field registerSubscriptionMap:Ljava/util/Map;
      25: aload_1
      26: aload_2
      27: invokestatic  #27                 // Method org/apache/commons/lang3/tuple/Pair.of:(Ljava/lang/Object;Ljava/lang/Object;)Lorg/apache/commons/lang3/tuple/Pair;
      30: aload_0
      31: aload_1
      32: aload_2
      33: invokedynamic #28,  0             // InvokeDynamic #1:apply:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/lang/String;Ljava/lang/String;)Ljava/util/function/BiFunction;
      38: invokeinterface #25,  3           // InterfaceMethod java/util/Map.compute:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      43: checkcast     #21                 // class java/util/concurrent/CompletableFuture
      46: aload         4
      48: monitorexit
      49: areturn
      50: astore        5
      52: aload         4
      54: monitorexit
      55: aload         5
      57: athrow
      58: aload_3
      59: areturn
    Exception table:
       from    to  target type
          21    49    50   any
          50    55    50   any

  public synchronized void registerAckOp(java.util.concurrent.CompletableFuture<java.lang.Void>);
    Code:
       0: aload_0
       1: getfield      #20                 // Field ackFutureList:Ljava/util/ArrayList;
       4: aload_1
       5: invokevirtual #26                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
       8: pop
       9: return

  public synchronized void registerCumulativeAckConsumer(org.apache.pulsar.client.impl.ConsumerImpl<?>);
    Code:
       0: aload_0
       1: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
       4: ifnonnull     18
       7: aload_0
       8: new           #30                 // class java/util/HashMap
      11: dup
      12: invokespecial #31                 // Method java/util/HashMap."<init>":()V
      15: putfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      18: aload_0
      19: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      22: aload_1
      23: iconst_0
      24: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      27: invokeinterface #33,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      32: pop
      33: return

  public java.util.concurrent.CompletableFuture<java.lang.Void> commit();
    Code:
       0: aload_0
       1: invokespecial #34                 // Method checkIfOpenOrCommitting:()Ljava/util/concurrent/CompletableFuture;
       4: aload_0
       5: invokedynamic #35,  0             // InvokeDynamic #2:apply:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;)Ljava/util/function/Function;
      10: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      13: areturn

  public java.util.concurrent.CompletableFuture<java.lang.Void> abort();
    Code:
       0: aload_0
       1: invokespecial #37                 // Method checkIfOpenOrAborting:()Ljava/util/concurrent/CompletableFuture;
       4: aload_0
       5: invokedynamic #38,  0             // InvokeDynamic #3:apply:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;)Ljava/util/function/Function;
      10: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      13: areturn

  public org.apache.pulsar.client.api.transaction.TxnID getTxnID();
    Code:
       0: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
       3: dup
       4: aload_0
       5: getfield      #10                 // Field txnIdMostBits:J
       8: aload_0
       9: getfield      #9                  // Field txnIdLeastBits:J
      12: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      15: areturn

  public <T> boolean checkIfOpen(java.util.concurrent.CompletableFuture<T>);
    Code:
       0: aload_0
       1: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       4: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       7: if_acmpne     12
      10: iconst_1
      11: ireturn
      12: aload_1
      13: new           #41                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException
      16: dup
      17: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
      20: dup
      21: aload_0
      22: getfield      #10                 // Field txnIdMostBits:J
      25: aload_0
      26: getfield      #9                  // Field txnIdLeastBits:J
      29: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      32: invokevirtual #42                 // Method org/apache/pulsar/client/api/transaction/TxnID.toString:()Ljava/lang/String;
      35: aload_0
      36: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      39: invokevirtual #43                 // Method org/apache/pulsar/client/impl/transaction/TransactionImpl$State.name:()Ljava/lang/String;
      42: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      45: invokevirtual #43                 // Method org/apache/pulsar/client/impl/transaction/TransactionImpl$State.name:()Ljava/lang/String;
      48: invokespecial #44                 // Method org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      51: invokevirtual #45                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      54: pop
      55: iconst_0
      56: ireturn

  private java.util.concurrent.CompletableFuture<java.lang.Void> checkIfOpenOrCommitting();
    Code:
       0: aload_0
       1: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       4: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       7: if_acmpeq     20
      10: aload_0
      11: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      14: getstatic     #46                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.COMMITTING:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      17: if_acmpne     25
      20: aconst_null
      21: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
      24: areturn
      25: aload_0
      26: invokespecial #48                 // Method invalidTxnStatusFuture:()Ljava/util/concurrent/CompletableFuture;
      29: areturn

  private java.util.concurrent.CompletableFuture<java.lang.Void> checkIfOpenOrAborting();
    Code:
       0: aload_0
       1: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       4: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       7: if_acmpeq     20
      10: aload_0
      11: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      14: getstatic     #49                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.ABORTING:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      17: if_acmpne     25
      20: aconst_null
      21: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
      24: areturn
      25: aload_0
      26: invokespecial #48                 // Method invalidTxnStatusFuture:()Ljava/util/concurrent/CompletableFuture;
      29: areturn

  private java.util.concurrent.CompletableFuture<java.lang.Void> invalidTxnStatusFuture();
    Code:
       0: new           #41                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException
       3: dup
       4: new           #50                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #51                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #52                 // String [
      13: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_0
      17: getfield      #10                 // Field txnIdMostBits:J
      20: invokevirtual #54                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      23: ldc           #55                 // String :
      25: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_0
      29: getfield      #9                  // Field txnIdLeastBits:J
      32: invokevirtual #54                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      35: ldc           #56                 // String ] with unexpected state :
      37: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: aload_0
      41: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      44: invokevirtual #43                 // Method org/apache/pulsar/client/impl/transaction/TransactionImpl$State.name:()Ljava/lang/String;
      47: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      50: ldc           #57                 // String , expect
      52: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      55: getstatic     #2                  // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.OPEN:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      58: invokevirtual #58                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      61: ldc           #59                 // String  state!
      63: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      66: invokevirtual #60                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      69: invokespecial #61                 // Method org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException."<init>":(Ljava/lang/String;)V
      72: invokestatic  #62                 // Method org/apache/pulsar/common/util/FutureUtil.failedFuture:(Ljava/lang/Throwable;)Ljava/util/concurrent/CompletableFuture;
      75: areturn

  private java.util.concurrent.CompletableFuture<java.lang.Void> allOpComplete();
    Code:
       0: new           #17                 // class java/util/ArrayList
       3: dup
       4: invokespecial #18                 // Method java/util/ArrayList."<init>":()V
       7: astore_1
       8: aload_1
       9: aload_0
      10: getfield      #19                 // Field sendFutureList:Ljava/util/ArrayList;
      13: invokeinterface #63,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      18: pop
      19: aload_1
      20: aload_0
      21: getfield      #20                 // Field ackFutureList:Ljava/util/ArrayList;
      24: invokeinterface #63,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      29: pop
      30: aload_1
      31: iconst_0
      32: anewarray     #21                 // class java/util/concurrent/CompletableFuture
      35: invokeinterface #64,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
      40: checkcast     #65                 // class "[Ljava/util/concurrent/CompletableFuture;"
      43: invokestatic  #66                 // Method java/util/concurrent/CompletableFuture.allOf:([Ljava/util/concurrent/CompletableFuture;)Ljava/util/concurrent/CompletableFuture;
      46: areturn

  public org.apache.pulsar.client.impl.PulsarClientImpl getClient();
    Code:
       0: aload_0
       1: getfield      #7                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
       4: areturn

  public long getTransactionTimeoutMs();
    Code:
       0: aload_0
       1: getfield      #8                  // Field transactionTimeoutMs:J
       4: lreturn

  public long getTxnIdLeastBits();
    Code:
       0: aload_0
       1: getfield      #9                  // Field txnIdLeastBits:J
       4: lreturn

  public long getTxnIdMostBits();
    Code:
       0: aload_0
       1: getfield      #10                 // Field txnIdMostBits:J
       4: lreturn

  public java.util.Map<java.lang.String, java.util.concurrent.CompletableFuture<java.lang.Void>> getRegisterPartitionMap();
    Code:
       0: aload_0
       1: getfield      #13                 // Field registerPartitionMap:Ljava/util/Map;
       4: areturn

  public java.util.Map<org.apache.commons.lang3.tuple.Pair<java.lang.String, java.lang.String>, java.util.concurrent.CompletableFuture<java.lang.Void>> getRegisterSubscriptionMap();
    Code:
       0: aload_0
       1: getfield      #14                 // Field registerSubscriptionMap:Ljava/util/Map;
       4: areturn

  public org.apache.pulsar.client.impl.transaction.TransactionCoordinatorClientImpl getTcClient();
    Code:
       0: aload_0
       1: getfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
       4: areturn

  public java.util.Map<org.apache.pulsar.client.impl.ConsumerImpl<?>, java.lang.Integer> getCumulativeAckConsumers();
    Code:
       0: aload_0
       1: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
       4: areturn

  public java.util.ArrayList<java.util.concurrent.CompletableFuture<org.apache.pulsar.client.api.MessageId>> getSendFutureList();
    Code:
       0: aload_0
       1: getfield      #19                 // Field sendFutureList:Ljava/util/ArrayList;
       4: areturn

  public java.util.ArrayList<java.util.concurrent.CompletableFuture<java.lang.Void>> getAckFutureList();
    Code:
       0: aload_0
       1: getfield      #20                 // Field ackFutureList:Ljava/util/ArrayList;
       4: areturn

  public org.apache.pulsar.client.impl.transaction.TransactionImpl$State getState();
    Code:
       0: aload_0
       1: getfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
       4: areturn

  private java.util.concurrent.CompletionStage lambda$abort$13(java.lang.Void);
    Code:
       0: new           #21                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #22                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore_2
       8: aload_0
       9: getstatic     #49                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.ABORTING:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      12: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      15: aload_0
      16: invokespecial #67                 // Method allOpComplete:()Ljava/util/concurrent/CompletableFuture;
      19: aload_0
      20: aload_2
      21: invokedynamic #68,  0             // InvokeDynamic #4:accept:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/util/concurrent/CompletableFuture;)Ljava/util/function/BiConsumer;
      26: invokevirtual #69                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      29: pop
      30: aload_2
      31: areturn

  private void lambda$null$12(java.util.concurrent.CompletableFuture, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload_3
       1: ifnull        16
       4: getstatic     #70                 // Field log:Lorg/slf4j/Logger;
       7: aload_3
       8: invokevirtual #71                 // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
      11: invokeinterface #72,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      16: aload_0
      17: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      20: ifnull        38
      23: aload_0
      24: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      27: aload_0
      28: invokedynamic #73,  0             // InvokeDynamic #5:accept:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;)Ljava/util/function/BiConsumer;
      33: invokeinterface #74,  2           // InterfaceMethod java/util/Map.forEach:(Ljava/util/function/BiConsumer;)V
      38: aload_0
      39: getfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      42: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
      45: dup
      46: aload_0
      47: getfield      #10                 // Field txnIdMostBits:J
      50: aload_0
      51: getfield      #9                  // Field txnIdLeastBits:J
      54: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      57: invokevirtual #75                 // Method org/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl.abortAsync:(Lorg/apache/pulsar/client/api/transaction/TxnID;)Ljava/util/concurrent/CompletableFuture;
      60: aload_0
      61: aload_1
      62: invokedynamic #76,  0             // InvokeDynamic #6:accept:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/util/concurrent/CompletableFuture;)Ljava/util/function/BiConsumer;
      67: invokevirtual #69                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      70: pop
      71: return

  private void lambda$null$11(java.util.concurrent.CompletableFuture, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
       4: ifnull        30
       7: aload_0
       8: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      11: invokedynamic #77,  0             // InvokeDynamic #7:accept:()Ljava/util/function/BiConsumer;
      16: invokeinterface #74,  2           // InterfaceMethod java/util/Map.forEach:(Ljava/util/function/BiConsumer;)V
      21: aload_0
      22: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
      25: invokeinterface #78,  1           // InterfaceMethod java/util/Map.clear:()V
      30: aload_3
      31: ifnull        64
      34: aload_3
      35: instanceof    #79                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$TransactionNotFoundException
      38: ifne          48
      41: aload_3
      42: instanceof    #41                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException
      45: ifeq          55
      48: aload_0
      49: getstatic     #80                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.ERROR:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      52: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      55: aload_1
      56: aload_3
      57: invokevirtual #45                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      60: pop
      61: goto          77
      64: aload_0
      65: getstatic     #81                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.ABORTED:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      68: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      71: aload_1
      72: aconst_null
      73: invokevirtual #82                 // Method java/util/concurrent/CompletableFuture.complete:(Ljava/lang/Object;)Z
      76: pop
      77: return

  private void lambda$null$10(org.apache.pulsar.client.impl.ConsumerImpl, java.lang.Integer);
    Code:
       0: aload_0
       1: getfield      #29                 // Field cumulativeAckConsumers:Ljava/util/Map;
       4: aload_1
       5: aload_1
       6: invokevirtual #83                 // Method org/apache/pulsar/client/impl/ConsumerImpl.clearIncomingMessagesAndGetMessageNumber:()I
       9: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: invokeinterface #84,  3           // InterfaceMethod java/util/Map.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      17: checkcast     #85                 // class java/lang/Integer
      20: pop
      21: return

  private java.util.concurrent.CompletionStage lambda$commit$9(java.lang.Void);
    Code:
       0: new           #21                 // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #22                 // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore_2
       8: aload_0
       9: getstatic     #46                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.COMMITTING:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      12: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      15: aload_0
      16: invokespecial #67                 // Method allOpComplete:()Ljava/util/concurrent/CompletableFuture;
      19: aload_0
      20: aload_2
      21: invokedynamic #86,  0             // InvokeDynamic #8:accept:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/util/concurrent/CompletableFuture;)Ljava/util/function/BiConsumer;
      26: invokevirtual #69                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      29: pop
      30: aload_2
      31: areturn

  private void lambda$null$8(java.util.concurrent.CompletableFuture, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload_3
       1: ifnull        22
       4: aload_0
       5: invokevirtual #87                 // Method abort:()Ljava/util/concurrent/CompletableFuture;
       8: aload_1
       9: aload_3
      10: invokedynamic #88,  0             // InvokeDynamic #9:accept:(Ljava/util/concurrent/CompletableFuture;Ljava/lang/Throwable;)Ljava/util/function/BiConsumer;
      15: invokevirtual #69                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      18: pop
      19: goto          55
      22: aload_0
      23: getfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      26: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
      29: dup
      30: aload_0
      31: getfield      #10                 // Field txnIdMostBits:J
      34: aload_0
      35: getfield      #9                  // Field txnIdLeastBits:J
      38: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      41: invokevirtual #89                 // Method org/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl.commitAsync:(Lorg/apache/pulsar/client/api/transaction/TxnID;)Ljava/util/concurrent/CompletableFuture;
      44: aload_0
      45: aload_1
      46: invokedynamic #90,  0             // InvokeDynamic #10:accept:(Lorg/apache/pulsar/client/impl/transaction/TransactionImpl;Ljava/util/concurrent/CompletableFuture;)Ljava/util/function/BiConsumer;
      51: invokevirtual #69                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      54: pop
      55: return

  private void lambda$null$7(java.util.concurrent.CompletableFuture, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload_3
       1: ifnull        34
       4: aload_3
       5: instanceof    #79                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$TransactionNotFoundException
       8: ifne          18
      11: aload_3
      12: instanceof    #41                 // class org/apache/pulsar/client/api/transaction/TransactionCoordinatorClientException$InvalidTxnStatusException
      15: ifeq          25
      18: aload_0
      19: getstatic     #80                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.ERROR:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      22: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      25: aload_1
      26: aload_3
      27: invokevirtual #45                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
      30: pop
      31: goto          47
      34: aload_0
      35: getstatic     #91                 // Field org/apache/pulsar/client/impl/transaction/TransactionImpl$State.COMMITTED:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      38: putfield      #6                  // Field state:Lorg/apache/pulsar/client/impl/transaction/TransactionImpl$State;
      41: aload_1
      42: aload_2
      43: invokevirtual #82                 // Method java/util/concurrent/CompletableFuture.complete:(Ljava/lang/Object;)Z
      46: pop
      47: return

  private static void lambda$null$6(java.util.concurrent.CompletableFuture, java.lang.Throwable, java.lang.Void, java.lang.Throwable);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #45                 // Method java/util/concurrent/CompletableFuture.completeExceptionally:(Ljava/lang/Throwable;)Z
       5: pop
       6: return

  private java.util.concurrent.CompletableFuture lambda$registerAckedTopic$5(java.lang.String, java.lang.String, org.apache.commons.lang3.tuple.Pair, java.util.concurrent.CompletableFuture);
    Code:
       0: aload         4
       2: ifnull        16
       5: aload         4
       7: invokedynamic #92,  0             // InvokeDynamic #11:apply:()Ljava/util/function/Function;
      12: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      15: areturn
      16: aload_0
      17: getfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      20: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
      23: dup
      24: aload_0
      25: getfield      #10                 // Field txnIdMostBits:J
      28: aload_0
      29: getfield      #9                  // Field txnIdLeastBits:J
      32: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      35: aload_1
      36: aload_2
      37: invokevirtual #93                 // Method org/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl.addSubscriptionToTxnAsync:(Lorg/apache/pulsar/client/api/transaction/TxnID;Ljava/lang/String;Ljava/lang/String;)Ljava/util/concurrent/CompletableFuture;
      40: invokedynamic #94,  0             // InvokeDynamic #12:apply:()Ljava/util/function/Function;
      45: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      48: areturn

  private static java.util.concurrent.CompletionStage lambda$null$4(java.lang.Void);
    Code:
       0: aconst_null
       1: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
       4: areturn

  private static java.util.concurrent.CompletionStage lambda$null$3(java.lang.Void);
    Code:
       0: aconst_null
       1: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
       4: areturn

  private java.util.concurrent.CompletableFuture lambda$registerProducedTopic$2(java.lang.String, java.lang.String, java.util.concurrent.CompletableFuture);
    Code:
       0: aload_3
       1: ifnull        14
       4: aload_3
       5: invokedynamic #95,  0             // InvokeDynamic #13:apply:()Ljava/util/function/Function;
      10: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      13: areturn
      14: aload_0
      15: getfield      #16                 // Field tcClient:Lorg/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl;
      18: new           #39                 // class org/apache/pulsar/client/api/transaction/TxnID
      21: dup
      22: aload_0
      23: getfield      #10                 // Field txnIdMostBits:J
      26: aload_0
      27: getfield      #9                  // Field txnIdLeastBits:J
      30: invokespecial #40                 // Method org/apache/pulsar/client/api/transaction/TxnID."<init>":(JJ)V
      33: iconst_1
      34: anewarray     #96                 // class java/lang/String
      37: dup
      38: iconst_0
      39: aload_1
      40: aastore
      41: invokestatic  #97                 // Method com/google/common/collect/Lists.newArrayList:([Ljava/lang/Object;)Ljava/util/ArrayList;
      44: invokevirtual #98                 // Method org/apache/pulsar/client/impl/transaction/TransactionCoordinatorClientImpl.addPublishPartitionToTxnAsync:(Lorg/apache/pulsar/client/api/transaction/TxnID;Ljava/util/List;)Ljava/util/concurrent/CompletableFuture;
      47: invokedynamic #99,  0             // InvokeDynamic #14:apply:()Ljava/util/function/Function;
      52: invokevirtual #36                 // Method java/util/concurrent/CompletableFuture.thenCompose:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      55: areturn

  private static java.util.concurrent.CompletionStage lambda$null$1(java.lang.Void);
    Code:
       0: aconst_null
       1: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
       4: areturn

  private static java.util.concurrent.CompletionStage lambda$null$0(java.lang.Void);
    Code:
       0: aconst_null
       1: invokestatic  #47                 // Method java/util/concurrent/CompletableFuture.completedFuture:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
       4: areturn

  static {};
    Code:
       0: ldc           #100                // class org/apache/pulsar/client/impl/transaction/TransactionImpl
       2: invokestatic  #101                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #70                 // Field log:Lorg/slf4j/Logger;
       8: ldc           #100                // class org/apache/pulsar/client/impl/transaction/TransactionImpl
      10: ldc           #102                // class org/apache/pulsar/client/impl/transaction/TransactionImpl$State
      12: ldc           #103                // String state
      14: invokestatic  #104                // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      17: putstatic     #1                  // Field STATE_UPDATE:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      20: return
}

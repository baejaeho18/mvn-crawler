Compiled from "RoundRobinPartitionMessageRouterImpl.java"
public class org.apache.pulsar.client.impl.RoundRobinPartitionMessageRouterImpl extends org.apache.pulsar.client.impl.MessageRouterBase {
  private static final long serialVersionUID;

  private static final java.util.concurrent.atomic.AtomicIntegerFieldUpdater<org.apache.pulsar.client.impl.RoundRobinPartitionMessageRouterImpl> PARTITION_INDEX_UPDATER;

  private volatile int partitionIndex;

  private final int startPtnIdx;

  private final boolean isBatchingEnabled;

  private final long partitionSwitchMs;

  private final java.time.Clock clock;

  private static final java.time.Clock SYSTEM_CLOCK;

  public org.apache.pulsar.client.impl.RoundRobinPartitionMessageRouterImpl(org.apache.pulsar.client.api.HashingScheme, int, boolean, long);
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: iload_3
       4: lload         4
       6: getstatic     #1                  // Field SYSTEM_CLOCK:Ljava/time/Clock;
       9: invokespecial #2                  // Method "<init>":(Lorg/apache/pulsar/client/api/HashingScheme;IZJLjava/time/Clock;)V
      12: return

  public org.apache.pulsar.client.impl.RoundRobinPartitionMessageRouterImpl(org.apache.pulsar.client.api.HashingScheme, int, boolean, long, java.time.Clock);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #3                  // Method org/apache/pulsar/client/impl/MessageRouterBase."<init>":(Lorg/apache/pulsar/client/api/HashingScheme;)V
       5: aload_0
       6: iconst_0
       7: putfield      #4                  // Field partitionIndex:I
      10: getstatic     #5                  // Field PARTITION_INDEX_UPDATER:Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
      13: aload_0
      14: iload_2
      15: invokevirtual #6                  // Method java/util/concurrent/atomic/AtomicIntegerFieldUpdater.set:(Ljava/lang/Object;I)V
      18: aload_0
      19: iload_2
      20: putfield      #7                  // Field startPtnIdx:I
      23: aload_0
      24: iload_3
      25: putfield      #8                  // Field isBatchingEnabled:Z
      28: aload_0
      29: lconst_1
      30: lload         4
      32: invokestatic  #9                  // Method java/lang/Math.max:(JJ)J
      35: putfield      #10                 // Field partitionSwitchMs:J
      38: aload_0
      39: aload         6
      41: putfield      #11                 // Field clock:Ljava/time/Clock;
      44: return

  public int choosePartition(org.apache.pulsar.client.api.Message<?>, org.apache.pulsar.client.api.TopicMetadata);
    Code:
       0: aload_1
       1: invokeinterface #12,  1           // InterfaceMethod org/apache/pulsar/client/api/Message.hasKey:()Z
       6: ifeq          35
       9: aload_0
      10: getfield      #13                 // Field hash:Lorg/apache/pulsar/client/impl/Hash;
      13: aload_1
      14: invokeinterface #14,  1           // InterfaceMethod org/apache/pulsar/client/api/Message.getKey:()Ljava/lang/String;
      19: invokeinterface #15,  2           // InterfaceMethod org/apache/pulsar/client/impl/Hash.makeHash:(Ljava/lang/String;)I
      24: i2l
      25: aload_2
      26: invokeinterface #16,  1           // InterfaceMethod org/apache/pulsar/client/api/TopicMetadata.numPartitions:()I
      31: invokestatic  #17                 // Method org/apache/pulsar/client/util/MathUtils.signSafeMod:(JI)I
      34: ireturn
      35: aload_0
      36: getfield      #8                  // Field isBatchingEnabled:Z
      39: ifeq          72
      42: aload_0
      43: getfield      #11                 // Field clock:Ljava/time/Clock;
      46: invokevirtual #18                 // Method java/time/Clock.millis:()J
      49: lstore_3
      50: lload_3
      51: aload_0
      52: getfield      #10                 // Field partitionSwitchMs:J
      55: ldiv
      56: aload_0
      57: getfield      #7                  // Field startPtnIdx:I
      60: i2l
      61: ladd
      62: aload_2
      63: invokeinterface #16,  1           // InterfaceMethod org/apache/pulsar/client/api/TopicMetadata.numPartitions:()I
      68: invokestatic  #17                 // Method org/apache/pulsar/client/util/MathUtils.signSafeMod:(JI)I
      71: ireturn
      72: getstatic     #5                  // Field PARTITION_INDEX_UPDATER:Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
      75: aload_0
      76: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicIntegerFieldUpdater.getAndIncrement:(Ljava/lang/Object;)I
      79: i2l
      80: aload_2
      81: invokeinterface #16,  1           // InterfaceMethod org/apache/pulsar/client/api/TopicMetadata.numPartitions:()I
      86: invokestatic  #17                 // Method org/apache/pulsar/client/util/MathUtils.signSafeMod:(JI)I
      89: ireturn

  static {};
    Code:
       0: ldc           #20                 // class org/apache/pulsar/client/impl/RoundRobinPartitionMessageRouterImpl
       2: ldc           #21                 // String partitionIndex
       4: invokestatic  #22                 // Method java/util/concurrent/atomic/AtomicIntegerFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
       7: putstatic     #5                  // Field PARTITION_INDEX_UPDATER:Ljava/util/concurrent/atomic/AtomicIntegerFieldUpdater;
      10: invokestatic  #23                 // Method java/time/Clock.systemUTC:()Ljava/time/Clock;
      13: putstatic     #1                  // Field SYSTEM_CLOCK:Ljava/time/Clock;
      16: return
}

Compiled from "NegativeAcksTracker.java"
class org.apache.pulsar.client.impl.NegativeAcksTracker implements java.io.Closeable {
  private java.util.HashMap<org.apache.pulsar.client.api.MessageId, java.lang.Long> nackedMessages;

  private final org.apache.pulsar.client.impl.ConsumerBase<?> consumer;

  private final io.netty.util.Timer timer;

  private final long nackDelayNanos;

  private final long timerIntervalNanos;

  private final org.apache.pulsar.client.api.RedeliveryBackoff negativeAckRedeliveryBackoff;

  private io.netty.util.Timeout timeout;

  private static final long MIN_NACK_DELAY_NANOS;

  public org.apache.pulsar.client.impl.NegativeAcksTracker(org.apache.pulsar.client.impl.ConsumerBase<?>, org.apache.pulsar.client.impl.conf.ConsumerConfigurationData<?>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aconst_null
       6: putfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
       9: aload_0
      10: aload_1
      11: putfield      #3                  // Field consumer:Lorg/apache/pulsar/client/impl/ConsumerBase;
      14: aload_0
      15: aload_1
      16: invokevirtual #4                  // Method org/apache/pulsar/client/impl/ConsumerBase.getClient:()Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      19: invokevirtual #5                  // Method org/apache/pulsar/client/impl/PulsarClientImpl.timer:()Lio/netty/util/Timer;
      22: putfield      #6                  // Field timer:Lio/netty/util/Timer;
      25: aload_0
      26: getstatic     #7                  // Field java/util/concurrent/TimeUnit.MICROSECONDS:Ljava/util/concurrent/TimeUnit;
      29: aload_2
      30: invokevirtual #8                  // Method org/apache/pulsar/client/impl/conf/ConsumerConfigurationData.getNegativeAckRedeliveryDelayMicros:()J
      33: invokevirtual #9                  // Method java/util/concurrent/TimeUnit.toNanos:(J)J
      36: getstatic     #10                 // Field MIN_NACK_DELAY_NANOS:J
      39: invokestatic  #11                 // Method java/lang/Math.max:(JJ)J
      42: putfield      #12                 // Field nackDelayNanos:J
      45: aload_0
      46: aload_2
      47: invokevirtual #13                 // Method org/apache/pulsar/client/impl/conf/ConsumerConfigurationData.getNegativeAckRedeliveryBackoff:()Lorg/apache/pulsar/client/api/RedeliveryBackoff;
      50: putfield      #14                 // Field negativeAckRedeliveryBackoff:Lorg/apache/pulsar/client/api/RedeliveryBackoff;
      53: aload_0
      54: getfield      #14                 // Field negativeAckRedeliveryBackoff:Lorg/apache/pulsar/client/api/RedeliveryBackoff;
      57: ifnull        93
      60: aload_0
      61: getstatic     #15                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      64: aload_0
      65: getfield      #14                 // Field negativeAckRedeliveryBackoff:Lorg/apache/pulsar/client/api/RedeliveryBackoff;
      68: iconst_0
      69: invokeinterface #16,  2           // InterfaceMethod org/apache/pulsar/client/api/RedeliveryBackoff.next:(I)J
      74: invokevirtual #9                  // Method java/util/concurrent/TimeUnit.toNanos:(J)J
      77: getstatic     #10                 // Field MIN_NACK_DELAY_NANOS:J
      80: invokestatic  #11                 // Method java/lang/Math.max:(JJ)J
      83: ldc2_w        #17                 // long 3l
      86: ldiv
      87: putfield      #19                 // Field timerIntervalNanos:J
      90: goto          105
      93: aload_0
      94: aload_0
      95: getfield      #12                 // Field nackDelayNanos:J
      98: ldc2_w        #17                 // long 3l
     101: ldiv
     102: putfield      #19                 // Field timerIntervalNanos:J
     105: return

  private synchronized void triggerRedelivery(io.netty.util.Timeout);
    Code:
       0: aload_0
       1: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
       4: invokevirtual #20                 // Method java/util/HashMap.isEmpty:()Z
       7: ifeq          16
      10: aload_0
      11: aconst_null
      12: putfield      #21                 // Field timeout:Lio/netty/util/Timeout;
      15: return
      16: new           #22                 // class java/util/HashSet
      19: dup
      20: invokespecial #23                 // Method java/util/HashSet."<init>":()V
      23: astore_2
      24: invokestatic  #24                 // Method java/lang/System.nanoTime:()J
      27: lstore_3
      28: aload_0
      29: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      32: aload_0
      33: lload_3
      34: aload_2
      35: invokedynamic #25,  0             // InvokeDynamic #0:accept:(Lorg/apache/pulsar/client/impl/NegativeAcksTracker;JLjava/util/Set;)Ljava/util/function/BiConsumer;
      40: invokevirtual #26                 // Method java/util/HashMap.forEach:(Ljava/util/function/BiConsumer;)V
      43: aload_2
      44: aload_0
      45: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      48: dup
      49: invokevirtual #27                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      52: pop
      53: invokedynamic #28,  0             // InvokeDynamic #1:accept:(Ljava/util/HashMap;)Ljava/util/function/Consumer;
      58: invokeinterface #29,  2           // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      63: aload_0
      64: getfield      #3                  // Field consumer:Lorg/apache/pulsar/client/impl/ConsumerBase;
      67: aload_2
      68: invokevirtual #30                 // Method org/apache/pulsar/client/impl/ConsumerBase.onNegativeAcksSend:(Ljava/util/Set;)V
      71: aload_0
      72: getfield      #3                  // Field consumer:Lorg/apache/pulsar/client/impl/ConsumerBase;
      75: aload_2
      76: invokevirtual #31                 // Method org/apache/pulsar/client/impl/ConsumerBase.redeliverUnacknowledgedMessages:(Ljava/util/Set;)V
      79: aload_0
      80: aload_0
      81: getfield      #6                  // Field timer:Lio/netty/util/Timer;
      84: aload_0
      85: invokedynamic #32,  0             // InvokeDynamic #2:run:(Lorg/apache/pulsar/client/impl/NegativeAcksTracker;)Lio/netty/util/TimerTask;
      90: aload_0
      91: getfield      #19                 // Field timerIntervalNanos:J
      94: getstatic     #33                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      97: invokeinterface #34,  5           // InterfaceMethod io/netty/util/Timer.newTimeout:(Lio/netty/util/TimerTask;JLjava/util/concurrent/TimeUnit;)Lio/netty/util/Timeout;
     102: putfield      #21                 // Field timeout:Lio/netty/util/Timeout;
     105: return

  public synchronized void add(org.apache.pulsar.client.api.MessageId);
    Code:
       0: aload_1
       1: instanceof    #35                 // class org/apache/pulsar/client/impl/BatchMessageIdImpl
       4: ifeq          32
       7: aload_1
       8: checkcast     #35                 // class org/apache/pulsar/client/impl/BatchMessageIdImpl
      11: astore_2
      12: new           #36                 // class org/apache/pulsar/client/impl/MessageIdImpl
      15: dup
      16: aload_2
      17: invokevirtual #37                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getLedgerId:()J
      20: aload_2
      21: invokevirtual #38                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getEntryId:()J
      24: aload_2
      25: invokevirtual #39                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getPartitionIndex:()I
      28: invokespecial #40                 // Method org/apache/pulsar/client/impl/MessageIdImpl."<init>":(JJI)V
      31: astore_1
      32: aload_0
      33: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      36: ifnonnull     50
      39: aload_0
      40: new           #41                 // class java/util/HashMap
      43: dup
      44: invokespecial #42                 // Method java/util/HashMap."<init>":()V
      47: putfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      50: aload_0
      51: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      54: aload_1
      55: invokestatic  #24                 // Method java/lang/System.nanoTime:()J
      58: aload_0
      59: getfield      #12                 // Field nackDelayNanos:J
      62: ladd
      63: invokestatic  #43                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      66: invokevirtual #44                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      69: pop
      70: aload_0
      71: getfield      #21                 // Field timeout:Lio/netty/util/Timeout;
      74: ifnonnull     103
      77: aload_0
      78: aload_0
      79: getfield      #6                  // Field timer:Lio/netty/util/Timer;
      82: aload_0
      83: invokedynamic #32,  0             // InvokeDynamic #2:run:(Lorg/apache/pulsar/client/impl/NegativeAcksTracker;)Lio/netty/util/TimerTask;
      88: aload_0
      89: getfield      #19                 // Field timerIntervalNanos:J
      92: getstatic     #33                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      95: invokeinterface #34,  5           // InterfaceMethod io/netty/util/Timer.newTimeout:(Lio/netty/util/TimerTask;JLjava/util/concurrent/TimeUnit;)Lio/netty/util/Timeout;
     100: putfield      #21                 // Field timeout:Lio/netty/util/Timeout;
     103: return

  public synchronized void add(org.apache.pulsar.client.api.Message<?>);
    Code:
       0: aload_0
       1: getfield      #14                 // Field negativeAckRedeliveryBackoff:Lorg/apache/pulsar/client/api/RedeliveryBackoff;
       4: ifnonnull     18
       7: aload_0
       8: aload_1
       9: invokeinterface #45,  1           // InterfaceMethod org/apache/pulsar/client/api/Message.getMessageId:()Lorg/apache/pulsar/client/api/MessageId;
      14: invokevirtual #46                 // Method add:(Lorg/apache/pulsar/client/api/MessageId;)V
      17: return
      18: aload_0
      19: aload_1
      20: invokeinterface #45,  1           // InterfaceMethod org/apache/pulsar/client/api/Message.getMessageId:()Lorg/apache/pulsar/client/api/MessageId;
      25: aload_1
      26: invokeinterface #47,  1           // InterfaceMethod org/apache/pulsar/client/api/Message.getRedeliveryCount:()I
      31: invokespecial #48                 // Method add:(Lorg/apache/pulsar/client/api/MessageId;I)V
      34: return

  private synchronized void add(org.apache.pulsar.client.api.MessageId, int);
    Code:
       0: aload_1
       1: instanceof    #49                 // class org/apache/pulsar/client/impl/TopicMessageIdImpl
       4: ifeq          17
       7: aload_1
       8: checkcast     #49                 // class org/apache/pulsar/client/impl/TopicMessageIdImpl
      11: astore_3
      12: aload_3
      13: invokevirtual #50                 // Method org/apache/pulsar/client/impl/TopicMessageIdImpl.getInnerMessageId:()Lorg/apache/pulsar/client/api/MessageId;
      16: astore_1
      17: aload_1
      18: instanceof    #35                 // class org/apache/pulsar/client/impl/BatchMessageIdImpl
      21: ifeq          49
      24: aload_1
      25: checkcast     #35                 // class org/apache/pulsar/client/impl/BatchMessageIdImpl
      28: astore_3
      29: new           #36                 // class org/apache/pulsar/client/impl/MessageIdImpl
      32: dup
      33: aload_3
      34: invokevirtual #37                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getLedgerId:()J
      37: aload_3
      38: invokevirtual #38                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getEntryId:()J
      41: aload_3
      42: invokevirtual #39                 // Method org/apache/pulsar/client/impl/BatchMessageIdImpl.getPartitionIndex:()I
      45: invokespecial #40                 // Method org/apache/pulsar/client/impl/MessageIdImpl."<init>":(JJI)V
      48: astore_1
      49: aload_0
      50: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      53: ifnonnull     67
      56: aload_0
      57: new           #41                 // class java/util/HashMap
      60: dup
      61: invokespecial #42                 // Method java/util/HashMap."<init>":()V
      64: putfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      67: getstatic     #15                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      70: aload_0
      71: getfield      #14                 // Field negativeAckRedeliveryBackoff:Lorg/apache/pulsar/client/api/RedeliveryBackoff;
      74: iload_2
      75: invokeinterface #16,  2           // InterfaceMethod org/apache/pulsar/client/api/RedeliveryBackoff.next:(I)J
      80: invokevirtual #9                  // Method java/util/concurrent/TimeUnit.toNanos:(J)J
      83: lstore_3
      84: aload_0
      85: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      88: aload_1
      89: invokestatic  #24                 // Method java/lang/System.nanoTime:()J
      92: lload_3
      93: ladd
      94: invokestatic  #43                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      97: invokevirtual #44                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     100: pop
     101: aload_0
     102: getfield      #21                 // Field timeout:Lio/netty/util/Timeout;
     105: ifnonnull     134
     108: aload_0
     109: aload_0
     110: getfield      #6                  // Field timer:Lio/netty/util/Timer;
     113: aload_0
     114: invokedynamic #32,  0             // InvokeDynamic #2:run:(Lorg/apache/pulsar/client/impl/NegativeAcksTracker;)Lio/netty/util/TimerTask;
     119: aload_0
     120: getfield      #19                 // Field timerIntervalNanos:J
     123: getstatic     #33                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
     126: invokeinterface #34,  5           // InterfaceMethod io/netty/util/Timer.newTimeout:(Lio/netty/util/TimerTask;JLjava/util/concurrent/TimeUnit;)Lio/netty/util/Timeout;
     131: putfield      #21                 // Field timeout:Lio/netty/util/Timeout;
     134: return

  public synchronized void close();
    Code:
       0: aload_0
       1: getfield      #21                 // Field timeout:Lio/netty/util/Timeout;
       4: ifnull        34
       7: aload_0
       8: getfield      #21                 // Field timeout:Lio/netty/util/Timeout;
      11: invokeinterface #51,  1           // InterfaceMethod io/netty/util/Timeout.isCancelled:()Z
      16: ifne          34
      19: aload_0
      20: getfield      #21                 // Field timeout:Lio/netty/util/Timeout;
      23: invokeinterface #52,  1           // InterfaceMethod io/netty/util/Timeout.cancel:()Z
      28: pop
      29: aload_0
      30: aconst_null
      31: putfield      #21                 // Field timeout:Lio/netty/util/Timeout;
      34: aload_0
      35: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      38: ifnull        53
      41: aload_0
      42: getfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      45: invokevirtual #53                 // Method java/util/HashMap.clear:()V
      48: aload_0
      49: aconst_null
      50: putfield      #2                  // Field nackedMessages:Ljava/util/HashMap;
      53: return

  private void lambda$triggerRedelivery$0(long, java.util.Set, org.apache.pulsar.client.api.MessageId, java.lang.Long);
    Code:
       0: aload         5
       2: invokevirtual #54                 // Method java/lang/Long.longValue:()J
       5: lload_1
       6: lcmp
       7: ifge          29
      10: aload         4
      12: aload_3
      13: aload_0
      14: getfield      #3                  // Field consumer:Lorg/apache/pulsar/client/impl/ConsumerBase;
      17: invokestatic  #55                 // Method org/apache/pulsar/client/impl/UnAckedMessageTracker.addChunkedMessageIdsAndRemoveFromSequenceMap:(Lorg/apache/pulsar/client/api/MessageId;Ljava/util/Set;Lorg/apache/pulsar/client/impl/ConsumerBase;)V
      20: aload_3
      21: aload         4
      23: invokeinterface #56,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      28: pop
      29: return

  static {};
    Code:
       0: getstatic     #15                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
       3: ldc2_w        #57                 // long 100l
       6: invokevirtual #9                  // Method java/util/concurrent/TimeUnit.toNanos:(J)J
       9: putstatic     #10                 // Field MIN_NACK_DELAY_NANOS:J
      12: return
}

Compiled from "WebSocketServerProtocolHandshakeHandler.java"
class io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandshakeHandler extends io.netty.channel.ChannelInboundHandlerAdapter {
  private final io.netty.handler.codec.http.websocketx.WebSocketServerProtocolConfig serverConfig;

  private io.netty.channel.ChannelHandlerContext ctx;

  private io.netty.channel.ChannelPromise handshakePromise;

  private boolean isWebSocketPath;

  io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandshakeHandler(io.netty.handler.codec.http.websocketx.WebSocketServerProtocolConfig);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method io/netty/channel/ChannelInboundHandlerAdapter."<init>":()V
       4: aload_0
       5: aload_1
       6: ldc           #3                  // String serverConfig
       8: invokestatic  #4                  // Method io/netty/util/internal/ObjectUtil.checkNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      11: checkcast     #5                  // class io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig
      14: putfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
      17: return

  public void handlerAdded(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field ctx:Lio/netty/channel/ChannelHandlerContext;
       5: aload_0
       6: aload_1
       7: invokeinterface #7,  1            // InterfaceMethod io/netty/channel/ChannelHandlerContext.newPromise:()Lio/netty/channel/ChannelPromise;
      12: putfield      #8                  // Field handshakePromise:Lio/netty/channel/ChannelPromise;
      15: return

  public void channelRead(io.netty.channel.ChannelHandlerContext, java.lang.Object) throws java.lang.Exception;
    Code:
       0: aload_2
       1: checkcast     #9                  // class io/netty/handler/codec/http/HttpObject
       4: astore_3
       5: aload_3
       6: instanceof    #10                 // class io/netty/handler/codec/http/HttpRequest
       9: ifeq          261
      12: aload_3
      13: checkcast     #10                 // class io/netty/handler/codec/http/HttpRequest
      16: astore        4
      18: aload_0
      19: aload_0
      20: aload         4
      22: invokespecial #11                 // Method isWebSocketPath:(Lio/netty/handler/codec/http/HttpRequest;)Z
      25: putfield      #12                 // Field isWebSocketPath:Z
      28: aload_0
      29: getfield      #12                 // Field isWebSocketPath:Z
      32: ifne          44
      35: aload_1
      36: aload_2
      37: invokeinterface #13,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.fireChannelRead:(Ljava/lang/Object;)Lio/netty/channel/ChannelHandlerContext;
      42: pop
      43: return
      44: getstatic     #14                 // Field io/netty/handler/codec/http/HttpMethod.GET:Lio/netty/handler/codec/http/HttpMethod;
      47: aload         4
      49: invokeinterface #15,  1           // InterfaceMethod io/netty/handler/codec/http/HttpRequest.method:()Lio/netty/handler/codec/http/HttpMethod;
      54: invokevirtual #16                 // Method io/netty/handler/codec/http/HttpMethod.equals:(Ljava/lang/Object;)Z
      57: ifne          98
      60: aload_1
      61: aload         4
      63: new           #17                 // class io/netty/handler/codec/http/DefaultFullHttpResponse
      66: dup
      67: getstatic     #18                 // Field io/netty/handler/codec/http/HttpVersion.HTTP_1_1:Lio/netty/handler/codec/http/HttpVersion;
      70: getstatic     #19                 // Field io/netty/handler/codec/http/HttpResponseStatus.FORBIDDEN:Lio/netty/handler/codec/http/HttpResponseStatus;
      73: aload_1
      74: invokeinterface #20,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.alloc:()Lio/netty/buffer/ByteBufAllocator;
      79: iconst_0
      80: invokeinterface #21,  2           // InterfaceMethod io/netty/buffer/ByteBufAllocator.buffer:(I)Lio/netty/buffer/ByteBuf;
      85: invokespecial #22                 // Method io/netty/handler/codec/http/DefaultFullHttpResponse."<init>":(Lio/netty/handler/codec/http/HttpVersion;Lio/netty/handler/codec/http/HttpResponseStatus;Lio/netty/buffer/ByteBuf;)V
      88: invokestatic  #23                 // Method sendHttpResponse:(Lio/netty/channel/ChannelHandlerContext;Lio/netty/handler/codec/http/HttpRequest;Lio/netty/handler/codec/http/HttpResponse;)V
      91: aload         4
      93: invokestatic  #24                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
      96: pop
      97: return
      98: new           #25                 // class io/netty/handler/codec/http/websocketx/WebSocketServerHandshakerFactory
     101: dup
     102: aload_1
     103: invokeinterface #26,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
     108: aload         4
     110: aload_0
     111: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
     114: invokevirtual #27                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.websocketPath:()Ljava/lang/String;
     117: invokestatic  #28                 // Method getWebSocketLocation:(Lio/netty/channel/ChannelPipeline;Lio/netty/handler/codec/http/HttpRequest;Ljava/lang/String;)Ljava/lang/String;
     120: aload_0
     121: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
     124: invokevirtual #29                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.subprotocols:()Ljava/lang/String;
     127: aload_0
     128: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
     131: invokevirtual #30                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.decoderConfig:()Lio/netty/handler/codec/http/websocketx/WebSocketDecoderConfig;
     134: invokespecial #31                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerHandshakerFactory."<init>":(Ljava/lang/String;Ljava/lang/String;Lio/netty/handler/codec/http/websocketx/WebSocketDecoderConfig;)V
     137: astore        5
     139: aload         5
     141: aload         4
     143: invokevirtual #32                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerHandshakerFactory.newHandshaker:(Lio/netty/handler/codec/http/HttpRequest;)Lio/netty/handler/codec/http/websocketx/WebSocketServerHandshaker;
     146: astore        6
     148: aload_0
     149: getfield      #8                  // Field handshakePromise:Lio/netty/channel/ChannelPromise;
     152: astore        7
     154: aload         6
     156: ifnonnull     172
     159: aload_1
     160: invokeinterface #33,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
     165: invokestatic  #34                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerHandshakerFactory.sendUnsupportedVersionResponse:(Lio/netty/channel/Channel;)Lio/netty/channel/ChannelFuture;
     168: pop
     169: goto          238
     172: aload_1
     173: invokeinterface #33,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
     178: aload         6
     180: invokestatic  #35                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandler.setHandshaker:(Lio/netty/channel/Channel;Lio/netty/handler/codec/http/websocketx/WebSocketServerHandshaker;)V
     183: aload_1
     184: invokeinterface #26,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
     189: aload_0
     190: invokeinterface #36,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.remove:(Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     195: pop
     196: aload         6
     198: aload_1
     199: invokeinterface #33,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
     204: aload         4
     206: invokevirtual #37                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerHandshaker.handshake:(Lio/netty/channel/Channel;Lio/netty/handler/codec/http/HttpRequest;)Lio/netty/channel/ChannelFuture;
     209: astore        8
     211: aload         8
     213: new           #38                 // class io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$1
     216: dup
     217: aload_0
     218: aload         7
     220: aload_1
     221: aload         4
     223: aload         6
     225: invokespecial #39                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$1."<init>":(Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler;Lio/netty/channel/ChannelPromise;Lio/netty/channel/ChannelHandlerContext;Lio/netty/handler/codec/http/HttpRequest;Lio/netty/handler/codec/http/websocketx/WebSocketServerHandshaker;)V
     228: invokeinterface #40,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
     233: pop
     234: aload_0
     235: invokespecial #41                 // Method applyHandshakeTimeout:()V
     238: aload         4
     240: invokestatic  #24                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
     243: pop
     244: goto          258
     247: astore        9
     249: aload         4
     251: invokestatic  #24                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
     254: pop
     255: aload         9
     257: athrow
     258: goto          284
     261: aload_0
     262: getfield      #12                 // Field isWebSocketPath:Z
     265: ifne          279
     268: aload_1
     269: aload_2
     270: invokeinterface #13,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.fireChannelRead:(Ljava/lang/Object;)Lio/netty/channel/ChannelHandlerContext;
     275: pop
     276: goto          284
     279: aload_2
     280: invokestatic  #24                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
     283: pop
     284: return
    Exception table:
       from    to  target type
          44    91   247   any
          98   238   247   any
         247   249   247   any

  private boolean isWebSocketPath(io.netty.handler.codec.http.HttpRequest);
    Code:
       0: aload_0
       1: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
       4: invokevirtual #27                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.websocketPath:()Ljava/lang/String;
       7: astore_2
       8: aload_1
       9: invokeinterface #42,  1           // InterfaceMethod io/netty/handler/codec/http/HttpRequest.uri:()Ljava/lang/String;
      14: astore_3
      15: aload_3
      16: aload_2
      17: invokevirtual #43                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      20: istore        4
      22: ldc           #44                 // String /
      24: aload_2
      25: invokevirtual #45                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      28: ifne          40
      31: aload_0
      32: aload_3
      33: aload_2
      34: invokespecial #46                 // Method checkNextUri:(Ljava/lang/String;Ljava/lang/String;)Z
      37: ifeq          44
      40: iconst_1
      41: goto          45
      44: iconst_0
      45: istore        5
      47: aload_0
      48: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
      51: invokevirtual #47                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.checkStartsWith:()Z
      54: ifeq          75
      57: iload         4
      59: ifeq          71
      62: iload         5
      64: ifeq          71
      67: iconst_1
      68: goto          80
      71: iconst_0
      72: goto          80
      75: aload_3
      76: aload_2
      77: invokevirtual #45                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      80: ireturn

  private boolean checkNextUri(java.lang.String, java.lang.String);
    Code:
       0: aload_2
       1: invokevirtual #48                 // Method java/lang/String.length:()I
       4: istore_3
       5: aload_1
       6: invokevirtual #48                 // Method java/lang/String.length:()I
       9: iload_3
      10: if_icmple     40
      13: aload_1
      14: iload_3
      15: invokevirtual #49                 // Method java/lang/String.charAt:(I)C
      18: istore        4
      20: iload         4
      22: bipush        47
      24: if_icmpeq     34
      27: iload         4
      29: bipush        63
      31: if_icmpne     38
      34: iconst_1
      35: goto          39
      38: iconst_0
      39: ireturn
      40: iconst_1
      41: ireturn

  private static void sendHttpResponse(io.netty.channel.ChannelHandlerContext, io.netty.handler.codec.http.HttpRequest, io.netty.handler.codec.http.HttpResponse);
    Code:
       0: aload_0
       1: invokeinterface #33,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
       6: aload_2
       7: invokeinterface #50,  2           // InterfaceMethod io/netty/channel/Channel.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
      12: astore_3
      13: aload_1
      14: invokestatic  #51                 // Method io/netty/handler/codec/http/HttpUtil.isKeepAlive:(Lio/netty/handler/codec/http/HttpMessage;)Z
      17: ifeq          35
      20: aload_2
      21: invokeinterface #52,  1           // InterfaceMethod io/netty/handler/codec/http/HttpResponse.status:()Lio/netty/handler/codec/http/HttpResponseStatus;
      26: invokevirtual #53                 // Method io/netty/handler/codec/http/HttpResponseStatus.code:()I
      29: sipush        200
      32: if_icmpeq     45
      35: aload_3
      36: getstatic     #54                 // Field io/netty/channel/ChannelFutureListener.CLOSE:Lio/netty/channel/ChannelFutureListener;
      39: invokeinterface #40,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
      44: pop
      45: return

  private static java.lang.String getWebSocketLocation(io.netty.channel.ChannelPipeline, io.netty.handler.codec.http.HttpRequest, java.lang.String);
    Code:
       0: ldc           #55                 // String ws
       2: astore_3
       3: aload_0
       4: ldc           #56                 // class io/netty/handler/ssl/SslHandler
       6: invokeinterface #57,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.get:(Ljava/lang/Class;)Lio/netty/channel/ChannelHandler;
      11: ifnull        17
      14: ldc           #58                 // String wss
      16: astore_3
      17: aload_1
      18: invokeinterface #59,  1           // InterfaceMethod io/netty/handler/codec/http/HttpRequest.headers:()Lio/netty/handler/codec/http/HttpHeaders;
      23: getstatic     #60                 // Field io/netty/handler/codec/http/HttpHeaderNames.HOST:Lio/netty/util/AsciiString;
      26: invokevirtual #61                 // Method io/netty/handler/codec/http/HttpHeaders.get:(Ljava/lang/CharSequence;)Ljava/lang/String;
      29: astore        4
      31: new           #62                 // class java/lang/StringBuilder
      34: dup
      35: invokespecial #63                 // Method java/lang/StringBuilder."<init>":()V
      38: aload_3
      39: invokevirtual #64                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: ldc           #65                 // String ://
      44: invokevirtual #64                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      47: aload         4
      49: invokevirtual #64                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: aload_2
      53: invokevirtual #64                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      56: invokevirtual #66                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      59: areturn

  private void applyHandshakeTimeout();
    Code:
       0: aload_0
       1: getfield      #8                  // Field handshakePromise:Lio/netty/channel/ChannelPromise;
       4: astore_1
       5: aload_0
       6: getfield      #6                  // Field serverConfig:Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig;
       9: invokevirtual #67                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolConfig.handshakeTimeoutMillis:()J
      12: lstore_2
      13: lload_2
      14: lconst_0
      15: lcmp
      16: ifle          28
      19: aload_1
      20: invokeinterface #68,  1           // InterfaceMethod io/netty/channel/ChannelPromise.isDone:()Z
      25: ifeq          29
      28: return
      29: aload_0
      30: getfield      #1                  // Field ctx:Lio/netty/channel/ChannelHandlerContext;
      33: invokeinterface #69,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.executor:()Lio/netty/util/concurrent/EventExecutor;
      38: new           #70                 // class io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$2
      41: dup
      42: aload_0
      43: aload_1
      44: invokespecial #71                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$2."<init>":(Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler;Lio/netty/channel/ChannelPromise;)V
      47: lload_2
      48: getstatic     #72                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      51: invokeinterface #73,  5           // InterfaceMethod io/netty/util/concurrent/EventExecutor.schedule:(Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Lio/netty/util/concurrent/ScheduledFuture;
      56: astore        4
      58: aload_1
      59: new           #74                 // class io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$3
      62: dup
      63: aload_0
      64: aload         4
      66: invokespecial #75                 // Method io/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler$3."<init>":(Lio/netty/handler/codec/http/websocketx/WebSocketServerProtocolHandshakeHandler;Lio/netty/util/concurrent/Future;)V
      69: invokeinterface #76,  2           // InterfaceMethod io/netty/channel/ChannelPromise.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelPromise;
      74: pop
      75: return

  static io.netty.channel.ChannelHandlerContext access$000(io.netty.handler.codec.http.websocketx.WebSocketServerProtocolHandshakeHandler);
    Code:
       0: aload_0
       1: getfield      #1                  // Field ctx:Lio/netty/channel/ChannelHandlerContext;
       4: areturn
}

Compiled from "SslConnectionBuilder.java"
class io.lettuce.core.SslConnectionBuilder$SslChannelInitializer extends io.netty.channel.ChannelInitializer<io.netty.channel.Channel> implements io.lettuce.core.RedisChannelInitializer {
  private final java.util.function.Supplier<io.lettuce.core.protocol.AsyncCommand<?, ?, ?>> pingCommandSupplier;

  private final java.util.function.Supplier<java.util.List<io.netty.channel.ChannelHandler>> handlers;

  private final io.lettuce.core.RedisURI redisURI;

  private final io.lettuce.core.resource.ClientResources clientResources;

  private final java.time.Duration timeout;

  private final io.lettuce.core.SslOptions sslOptions;

  private volatile java.util.concurrent.CompletableFuture<java.lang.Boolean> initializedFuture;

  public io.lettuce.core.SslConnectionBuilder$SslChannelInitializer(java.util.function.Supplier<io.lettuce.core.protocol.AsyncCommand<?, ?, ?>>, java.util.function.Supplier<java.util.List<io.netty.channel.ChannelHandler>>, io.lettuce.core.RedisURI, io.lettuce.core.resource.ClientResources, java.time.Duration, io.lettuce.core.SslOptions);
    Code:
       0: aload_0
       1: invokespecial #5                  // Method io/netty/channel/ChannelInitializer."<init>":()V
       4: aload_0
       5: new           #6                  // class java/util/concurrent/CompletableFuture
       8: dup
       9: invokespecial #7                  // Method java/util/concurrent/CompletableFuture."<init>":()V
      12: putfield      #3                  // Field initializedFuture:Ljava/util/concurrent/CompletableFuture;
      15: aload_0
      16: aload_1
      17: putfield      #2                  // Field pingCommandSupplier:Ljava/util/function/Supplier;
      20: aload_0
      21: aload_2
      22: putfield      #8                  // Field handlers:Ljava/util/function/Supplier;
      25: aload_0
      26: aload_3
      27: putfield      #9                  // Field redisURI:Lio/lettuce/core/RedisURI;
      30: aload_0
      31: aload         4
      33: putfield      #4                  // Field clientResources:Lio/lettuce/core/resource/ClientResources;
      36: aload_0
      37: aload         5
      39: putfield      #1                  // Field timeout:Ljava/time/Duration;
      42: aload_0
      43: aload         6
      45: putfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      48: return

  protected void initChannel(io.netty.channel.Channel) throws java.lang.Exception;
    Code:
       0: new           #11                 // class javax/net/ssl/SSLParameters
       3: dup
       4: invokespecial #12                 // Method javax/net/ssl/SSLParameters."<init>":()V
       7: astore_2
       8: invokestatic  #13                 // Method io/netty/handler/ssl/SslContextBuilder.forClient:()Lio/netty/handler/ssl/SslContextBuilder;
      11: aload_0
      12: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      15: invokevirtual #14                 // Method io/lettuce/core/SslOptions.getSslProvider:()Lio/netty/handler/ssl/SslProvider;
      18: invokevirtual #15                 // Method io/netty/handler/ssl/SslContextBuilder.sslProvider:(Lio/netty/handler/ssl/SslProvider;)Lio/netty/handler/ssl/SslContextBuilder;
      21: astore_3
      22: aload_0
      23: getfield      #9                  // Field redisURI:Lio/lettuce/core/RedisURI;
      26: invokevirtual #16                 // Method io/lettuce/core/RedisURI.isVerifyPeer:()Z
      29: ifeq          41
      32: aload_2
      33: ldc           #17                 // String HTTPS
      35: invokevirtual #18                 // Method javax/net/ssl/SSLParameters.setEndpointIdentificationAlgorithm:(Ljava/lang/String;)V
      38: goto          49
      41: aload_3
      42: getstatic     #19                 // Field io/netty/handler/ssl/util/InsecureTrustManagerFactory.INSTANCE:Ljavax/net/ssl/TrustManagerFactory;
      45: invokevirtual #20                 // Method io/netty/handler/ssl/SslContextBuilder.trustManager:(Ljavax/net/ssl/TrustManagerFactory;)Lio/netty/handler/ssl/SslContextBuilder;
      48: pop
      49: aload_0
      50: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      53: invokevirtual #21                 // Method io/lettuce/core/SslOptions.getKeystore:()Ljava/net/URL;
      56: ifnull        193
      59: aload_0
      60: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      63: invokevirtual #21                 // Method io/lettuce/core/SslOptions.getKeystore:()Ljava/net/URL;
      66: invokevirtual #22                 // Method java/net/URL.openStream:()Ljava/io/InputStream;
      69: astore        4
      71: aconst_null
      72: astore        5
      74: aload_3
      75: aload         4
      77: aload_0
      78: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      81: invokevirtual #23                 // Method io/lettuce/core/SslOptions.getKeystorePassword:()[C
      84: arraylength
      85: ifne          92
      88: aconst_null
      89: goto          99
      92: aload_0
      93: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
      96: invokevirtual #23                 // Method io/lettuce/core/SslOptions.getKeystorePassword:()[C
      99: invokestatic  #24                 // Method createKeyManagerFactory:(Ljava/io/InputStream;[C)Ljavax/net/ssl/KeyManagerFactory;
     102: invokevirtual #25                 // Method io/netty/handler/ssl/SslContextBuilder.keyManager:(Ljavax/net/ssl/KeyManagerFactory;)Lio/netty/handler/ssl/SslContextBuilder;
     105: pop
     106: aload         4
     108: ifnull        193
     111: aload         5
     113: ifnull        136
     116: aload         4
     118: invokevirtual #26                 // Method java/io/InputStream.close:()V
     121: goto          193
     124: astore        6
     126: aload         5
     128: aload         6
     130: invokevirtual #28                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     133: goto          193
     136: aload         4
     138: invokevirtual #26                 // Method java/io/InputStream.close:()V
     141: goto          193
     144: astore        6
     146: aload         6
     148: astore        5
     150: aload         6
     152: athrow
     153: astore        7
     155: aload         4
     157: ifnull        190
     160: aload         5
     162: ifnull        185
     165: aload         4
     167: invokevirtual #26                 // Method java/io/InputStream.close:()V
     170: goto          190
     173: astore        8
     175: aload         5
     177: aload         8
     179: invokevirtual #28                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     182: goto          190
     185: aload         4
     187: invokevirtual #26                 // Method java/io/InputStream.close:()V
     190: aload         7
     192: athrow
     193: aload_0
     194: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
     197: invokevirtual #29                 // Method io/lettuce/core/SslOptions.getTruststore:()Ljava/net/URL;
     200: ifnull        337
     203: aload_0
     204: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
     207: invokevirtual #29                 // Method io/lettuce/core/SslOptions.getTruststore:()Ljava/net/URL;
     210: invokevirtual #22                 // Method java/net/URL.openStream:()Ljava/io/InputStream;
     213: astore        4
     215: aconst_null
     216: astore        5
     218: aload_3
     219: aload         4
     221: aload_0
     222: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
     225: invokevirtual #30                 // Method io/lettuce/core/SslOptions.getTruststorePassword:()[C
     228: arraylength
     229: ifne          236
     232: aconst_null
     233: goto          243
     236: aload_0
     237: getfield      #10                 // Field sslOptions:Lio/lettuce/core/SslOptions;
     240: invokevirtual #30                 // Method io/lettuce/core/SslOptions.getTruststorePassword:()[C
     243: invokestatic  #31                 // Method createTrustManagerFactory:(Ljava/io/InputStream;[C)Ljavax/net/ssl/TrustManagerFactory;
     246: invokevirtual #20                 // Method io/netty/handler/ssl/SslContextBuilder.trustManager:(Ljavax/net/ssl/TrustManagerFactory;)Lio/netty/handler/ssl/SslContextBuilder;
     249: pop
     250: aload         4
     252: ifnull        337
     255: aload         5
     257: ifnull        280
     260: aload         4
     262: invokevirtual #26                 // Method java/io/InputStream.close:()V
     265: goto          337
     268: astore        6
     270: aload         5
     272: aload         6
     274: invokevirtual #28                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     277: goto          337
     280: aload         4
     282: invokevirtual #26                 // Method java/io/InputStream.close:()V
     285: goto          337
     288: astore        6
     290: aload         6
     292: astore        5
     294: aload         6
     296: athrow
     297: astore        9
     299: aload         4
     301: ifnull        334
     304: aload         5
     306: ifnull        329
     309: aload         4
     311: invokevirtual #26                 // Method java/io/InputStream.close:()V
     314: goto          334
     317: astore        10
     319: aload         5
     321: aload         10
     323: invokevirtual #28                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     326: goto          334
     329: aload         4
     331: invokevirtual #26                 // Method java/io/InputStream.close:()V
     334: aload         9
     336: athrow
     337: aload_3
     338: invokevirtual #32                 // Method io/netty/handler/ssl/SslContextBuilder.build:()Lio/netty/handler/ssl/SslContext;
     341: astore        4
     343: aload         4
     345: aload_1
     346: invokeinterface #33,  1           // InterfaceMethod io/netty/channel/Channel.alloc:()Lio/netty/buffer/ByteBufAllocator;
     351: aload_0
     352: getfield      #9                  // Field redisURI:Lio/lettuce/core/RedisURI;
     355: invokevirtual #34                 // Method io/lettuce/core/RedisURI.getHost:()Ljava/lang/String;
     358: aload_0
     359: getfield      #9                  // Field redisURI:Lio/lettuce/core/RedisURI;
     362: invokevirtual #35                 // Method io/lettuce/core/RedisURI.getPort:()I
     365: invokevirtual #36                 // Method io/netty/handler/ssl/SslContext.newEngine:(Lio/netty/buffer/ByteBufAllocator;Ljava/lang/String;I)Ljavax/net/ssl/SSLEngine;
     368: astore        5
     370: aload         5
     372: aload_2
     373: invokevirtual #37                 // Method javax/net/ssl/SSLEngine.setSSLParameters:(Ljavax/net/ssl/SSLParameters;)V
     376: aload_1
     377: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     382: ldc           #39                 // String first
     384: invokeinterface #40,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.get:(Ljava/lang/String;)Lio/netty/channel/ChannelHandler;
     389: ifnonnull     414
     392: aload_1
     393: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     398: ldc           #39                 // String first
     400: new           #41                 // class io/lettuce/core/SslConnectionBuilder$SslChannelInitializer$1
     403: dup
     404: aload_0
     405: invokespecial #42                 // Method io/lettuce/core/SslConnectionBuilder$SslChannelInitializer$1."<init>":(Lio/lettuce/core/SslConnectionBuilder$SslChannelInitializer;)V
     408: invokeinterface #43,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addFirst:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     413: pop
     414: new           #44                 // class io/netty/handler/ssl/SslHandler
     417: dup
     418: aload         5
     420: aload_0
     421: getfield      #9                  // Field redisURI:Lio/lettuce/core/RedisURI;
     424: invokevirtual #45                 // Method io/lettuce/core/RedisURI.isStartTls:()Z
     427: invokespecial #46                 // Method io/netty/handler/ssl/SslHandler."<init>":(Ljavax/net/ssl/SSLEngine;Z)V
     430: astore        6
     432: aload_1
     433: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     438: iconst_1
     439: anewarray     #47                 // class io/netty/channel/ChannelHandler
     442: dup
     443: iconst_0
     444: aload         6
     446: aastore
     447: invokeinterface #48,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:([Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     452: pop
     453: aload_1
     454: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     459: ldc           #49                 // String channelActivator
     461: invokeinterface #40,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.get:(Ljava/lang/String;)Lio/netty/channel/ChannelHandler;
     466: ifnonnull     491
     469: aload_1
     470: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     475: ldc           #49                 // String channelActivator
     477: new           #50                 // class io/lettuce/core/SslConnectionBuilder$SslChannelInitializer$2
     480: dup
     481: aload_0
     482: invokespecial #51                 // Method io/lettuce/core/SslConnectionBuilder$SslChannelInitializer$2."<init>":(Lio/lettuce/core/SslConnectionBuilder$SslChannelInitializer;)V
     485: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     490: pop
     491: aload_0
     492: getfield      #8                  // Field handlers:Ljava/util/function/Supplier;
     495: invokeinterface #53,  1           // InterfaceMethod java/util/function/Supplier.get:()Ljava/lang/Object;
     500: checkcast     #54                 // class java/util/List
     503: invokeinterface #55,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     508: astore        7
     510: aload         7
     512: invokeinterface #56,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     517: ifeq          556
     520: aload         7
     522: invokeinterface #57,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     527: checkcast     #47                 // class io/netty/channel/ChannelHandler
     530: astore        8
     532: aload_1
     533: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     538: iconst_1
     539: anewarray     #47                 // class io/netty/channel/ChannelHandler
     542: dup
     543: iconst_0
     544: aload         8
     546: aastore
     547: invokeinterface #48,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:([Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     552: pop
     553: goto          510
     556: aload_0
     557: getfield      #4                  // Field clientResources:Lio/lettuce/core/resource/ClientResources;
     560: invokeinterface #58,  1           // InterfaceMethod io/lettuce/core/resource/ClientResources.nettyCustomizer:()Lio/lettuce/core/resource/NettyCustomizer;
     565: aload_1
     566: invokeinterface #59,  2           // InterfaceMethod io/lettuce/core/resource/NettyCustomizer.afterChannelInitialized:(Lio/netty/channel/Channel;)V
     571: return
    Exception table:
       from    to  target type
         116   121   124   Class java/lang/Throwable
          74   106   144   Class java/lang/Throwable
          74   106   153   any
         165   170   173   Class java/lang/Throwable
         144   155   153   any
         260   265   268   Class java/lang/Throwable
         218   250   288   Class java/lang/Throwable
         218   250   297   any
         309   314   317   Class java/lang/Throwable
         288   299   297   any

  public java.util.concurrent.CompletableFuture<java.lang.Boolean> channelInitialized();
    Code:
       0: aload_0
       1: getfield      #3                  // Field initializedFuture:Ljava/util/concurrent/CompletableFuture;
       4: areturn

  private static javax.net.ssl.KeyManagerFactory createKeyManagerFactory(java.io.InputStream, char[]) throws java.security.GeneralSecurityException, java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #60                 // Method getKeyStore:(Ljava/io/InputStream;[C)Ljava/security/KeyStore;
       5: astore_2
       6: invokestatic  #61                 // Method javax/net/ssl/TrustManagerFactory.getDefaultAlgorithm:()Ljava/lang/String;
       9: invokestatic  #62                 // Method javax/net/ssl/KeyManagerFactory.getInstance:(Ljava/lang/String;)Ljavax/net/ssl/KeyManagerFactory;
      12: astore_3
      13: aload_3
      14: aload_2
      15: aload_1
      16: ifnonnull     25
      19: iconst_0
      20: newarray       char
      22: goto          26
      25: aload_1
      26: invokevirtual #63                 // Method javax/net/ssl/KeyManagerFactory.init:(Ljava/security/KeyStore;[C)V
      29: aload_3
      30: areturn

  private static java.security.KeyStore getKeyStore(java.io.InputStream, char[]) throws java.security.KeyStoreException, java.io.IOException, java.security.NoSuchAlgorithmException, java.security.cert.CertificateException;
    Code:
       0: invokestatic  #64                 // Method java/security/KeyStore.getDefaultType:()Ljava/lang/String;
       3: invokestatic  #65                 // Method java/security/KeyStore.getInstance:(Ljava/lang/String;)Ljava/security/KeyStore;
       6: astore_2
       7: aload_2
       8: aload_0
       9: aload_1
      10: invokevirtual #66                 // Method java/security/KeyStore.load:(Ljava/io/InputStream;[C)V
      13: aload_0
      14: invokevirtual #26                 // Method java/io/InputStream.close:()V
      17: goto          27
      20: astore_3
      21: aload_0
      22: invokevirtual #26                 // Method java/io/InputStream.close:()V
      25: aload_3
      26: athrow
      27: aload_2
      28: areturn
    Exception table:
       from    to  target type
           7    13    20   any

  private static javax.net.ssl.TrustManagerFactory createTrustManagerFactory(java.io.InputStream, char[]) throws java.security.GeneralSecurityException, java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #60                 // Method getKeyStore:(Ljava/io/InputStream;[C)Ljava/security/KeyStore;
       5: astore_2
       6: invokestatic  #61                 // Method javax/net/ssl/TrustManagerFactory.getDefaultAlgorithm:()Ljava/lang/String;
       9: invokestatic  #67                 // Method javax/net/ssl/TrustManagerFactory.getInstance:(Ljava/lang/String;)Ljavax/net/ssl/TrustManagerFactory;
      12: astore_3
      13: aload_3
      14: aload_2
      15: invokevirtual #68                 // Method javax/net/ssl/TrustManagerFactory.init:(Ljava/security/KeyStore;)V
      18: aload_3
      19: areturn

  static io.lettuce.core.resource.ClientResources access$000(io.lettuce.core.SslConnectionBuilder$SslChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #4                  // Field clientResources:Lio/lettuce/core/resource/ClientResources;
       4: areturn

  static java.util.concurrent.CompletableFuture access$100(io.lettuce.core.SslConnectionBuilder$SslChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #3                  // Field initializedFuture:Ljava/util/concurrent/CompletableFuture;
       4: areturn

  static java.util.concurrent.CompletableFuture access$102(io.lettuce.core.SslConnectionBuilder$SslChannelInitializer, java.util.concurrent.CompletableFuture);
    Code:
       0: aload_0
       1: aload_1
       2: dup_x1
       3: putfield      #3                  // Field initializedFuture:Ljava/util/concurrent/CompletableFuture;
       6: areturn

  static java.util.function.Supplier access$200(io.lettuce.core.SslConnectionBuilder$SslChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #2                  // Field pingCommandSupplier:Ljava/util/function/Supplier;
       4: areturn

  static java.time.Duration access$300(io.lettuce.core.SslConnectionBuilder$SslChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #1                  // Field timeout:Ljava/time/Duration;
       4: areturn
}

Compiled from "AuthInterceptor.java"
public class io.etcd.jetcd.auth.AuthInterceptor implements io.grpc.ClientInterceptor {
  private static final io.grpc.Metadata$Key<java.lang.String> TOKEN;

  private final java.lang.Object lock;

  private final io.etcd.jetcd.ClientBuilder builder;

  private final io.grpc.ClientInterceptor[] interceptors;

  private volatile java.lang.String token;

  public io.etcd.jetcd.auth.AuthInterceptor(io.etcd.jetcd.ClientBuilder);
    Code:
       0: aload_0
       1: invokespecial #4                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #5                  // class java/lang/Object
       8: dup
       9: invokespecial #4                  // Method java/lang/Object."<init>":()V
      12: putfield      #6                  // Field lock:Ljava/lang/Object;
      15: aload_0
      16: aload_1
      17: putfield      #7                  // Field builder:Lio/etcd/jetcd/ClientBuilder;
      20: new           #8                  // class java/util/ArrayList
      23: dup
      24: invokespecial #9                  // Method java/util/ArrayList."<init>":()V
      27: astore_2
      28: aload_1
      29: invokevirtual #10                 // Method io/etcd/jetcd/ClientBuilder.authHeaders:()Ljava/util/Map;
      32: ifnull        74
      35: new           #11                 // class io/grpc/Metadata
      38: dup
      39: invokespecial #12                 // Method io/grpc/Metadata."<init>":()V
      42: astore_3
      43: aload_1
      44: invokevirtual #10                 // Method io/etcd/jetcd/ClientBuilder.authHeaders:()Ljava/util/Map;
      47: aload_3
      48: dup
      49: invokevirtual #13                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      52: pop
      53: invokedynamic #14,  0             // InvokeDynamic #0:accept:(Lio/grpc/Metadata;)Ljava/util/function/BiConsumer;
      58: invokeinterface #15,  2           // InterfaceMethod java/util/Map.forEach:(Ljava/util/function/BiConsumer;)V
      63: aload_2
      64: aload_3
      65: invokestatic  #16                 // Method io/grpc/stub/MetadataUtils.newAttachHeadersInterceptor:(Lio/grpc/Metadata;)Lio/grpc/ClientInterceptor;
      68: invokeinterface #17,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      73: pop
      74: aload_1
      75: invokevirtual #18                 // Method io/etcd/jetcd/ClientBuilder.authInterceptors:()Ljava/util/List;
      78: ifnull        92
      81: aload_2
      82: aload_1
      83: invokevirtual #18                 // Method io/etcd/jetcd/ClientBuilder.authInterceptors:()Ljava/util/List;
      86: invokeinterface #19,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      91: pop
      92: aload_0
      93: aload_2
      94: invokeinterface #20,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      99: ifeq          106
     102: aconst_null
     103: goto          119
     106: aload_2
     107: iconst_0
     108: anewarray     #21                 // class io/grpc/ClientInterceptor
     111: invokeinterface #22,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     116: checkcast     #23                 // class "[Lio/grpc/ClientInterceptor;"
     119: putfield      #24                 // Field interceptors:[Lio/grpc/ClientInterceptor;
     122: return

  public <ReqT, RespT> io.grpc.ClientCall<ReqT, RespT> interceptCall(io.grpc.MethodDescriptor<ReqT, RespT>, io.grpc.CallOptions, io.grpc.Channel);
    Code:
       0: new           #25                 // class io/etcd/jetcd/auth/AuthInterceptor$1
       3: dup
       4: aload_0
       5: aload_3
       6: aload_1
       7: aload_2
       8: invokevirtual #26                 // Method io/grpc/Channel.newCall:(Lio/grpc/MethodDescriptor;Lio/grpc/CallOptions;)Lio/grpc/ClientCall;
      11: aload_3
      12: invokespecial #27                 // Method io/etcd/jetcd/auth/AuthInterceptor$1."<init>":(Lio/etcd/jetcd/auth/AuthInterceptor;Lio/grpc/ClientCall;Lio/grpc/Channel;)V
      15: areturn

  public void refresh();
    Code:
       0: aload_0
       1: getfield      #6                  // Field lock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: aconst_null
       9: putfield      #28                 // Field token:Ljava/lang/String;
      12: aload_1
      13: monitorexit
      14: goto          22
      17: astore_2
      18: aload_1
      19: monitorexit
      20: aload_2
      21: athrow
      22: return
    Exception table:
       from    to  target type
           7    14    17   any
          17    20    17   any

  private com.google.common.util.concurrent.ListenableFuture<io.etcd.jetcd.api.AuthenticateResponse> authenticate(io.grpc.Channel);
    Code:
       0: aload_0
       1: getfield      #7                  // Field builder:Lio/etcd/jetcd/ClientBuilder;
       4: invokevirtual #29                 // Method io/etcd/jetcd/ClientBuilder.user:()Lio/etcd/jetcd/ByteSequence;
       7: invokevirtual #30                 // Method io/etcd/jetcd/ByteSequence.getBytes:()[B
      10: invokestatic  #31                 // Method com/google/protobuf/ByteString.copyFrom:([B)Lcom/google/protobuf/ByteString;
      13: astore_2
      14: aload_0
      15: getfield      #7                  // Field builder:Lio/etcd/jetcd/ClientBuilder;
      18: invokevirtual #32                 // Method io/etcd/jetcd/ClientBuilder.password:()Lio/etcd/jetcd/ByteSequence;
      21: invokevirtual #30                 // Method io/etcd/jetcd/ByteSequence.getBytes:()[B
      24: invokestatic  #31                 // Method com/google/protobuf/ByteString.copyFrom:([B)Lcom/google/protobuf/ByteString;
      27: astore_3
      28: aload_2
      29: invokevirtual #33                 // Method com/google/protobuf/ByteString.isEmpty:()Z
      32: ifne          39
      35: iconst_1
      36: goto          40
      39: iconst_0
      40: ldc           #34                 // String username can not be empty.
      42: invokestatic  #35                 // Method com/google/common/base/Preconditions.checkArgument:(ZLjava/lang/Object;)V
      45: aload_3
      46: invokevirtual #33                 // Method com/google/protobuf/ByteString.isEmpty:()Z
      49: ifne          56
      52: iconst_1
      53: goto          57
      56: iconst_0
      57: ldc           #36                 // String password can not be empty.
      59: invokestatic  #35                 // Method com/google/common/base/Preconditions.checkArgument:(ZLjava/lang/Object;)V
      62: aload_1
      63: invokestatic  #37                 // Method io/etcd/jetcd/api/AuthGrpc.newFutureStub:(Lio/grpc/Channel;)Lio/etcd/jetcd/api/AuthGrpc$AuthFutureStub;
      66: astore        4
      68: aload_0
      69: getfield      #24                 // Field interceptors:[Lio/grpc/ClientInterceptor;
      72: ifnull        89
      75: aload         4
      77: aload_0
      78: getfield      #24                 // Field interceptors:[Lio/grpc/ClientInterceptor;
      81: invokevirtual #38                 // Method io/etcd/jetcd/api/AuthGrpc$AuthFutureStub.withInterceptors:([Lio/grpc/ClientInterceptor;)Lio/grpc/stub/AbstractStub;
      84: checkcast     #39                 // class io/etcd/jetcd/api/AuthGrpc$AuthFutureStub
      87: astore        4
      89: aload         4
      91: invokestatic  #40                 // Method io/etcd/jetcd/api/AuthenticateRequest.newBuilder:()Lio/etcd/jetcd/api/AuthenticateRequest$Builder;
      94: aload_2
      95: invokevirtual #41                 // Method io/etcd/jetcd/api/AuthenticateRequest$Builder.setNameBytes:(Lcom/google/protobuf/ByteString;)Lio/etcd/jetcd/api/AuthenticateRequest$Builder;
      98: aload_3
      99: invokevirtual #42                 // Method io/etcd/jetcd/api/AuthenticateRequest$Builder.setPasswordBytes:(Lcom/google/protobuf/ByteString;)Lio/etcd/jetcd/api/AuthenticateRequest$Builder;
     102: invokevirtual #43                 // Method io/etcd/jetcd/api/AuthenticateRequest$Builder.build:()Lio/etcd/jetcd/api/AuthenticateRequest;
     105: invokevirtual #44                 // Method io/etcd/jetcd/api/AuthGrpc$AuthFutureStub.authenticate:(Lio/etcd/jetcd/api/AuthenticateRequest;)Lcom/google/common/util/concurrent/ListenableFuture;
     108: areturn

  private java.lang.String getToken(io.grpc.Channel);
    Code:
       0: aload_0
       1: getfield      #28                 // Field token:Ljava/lang/String;
       4: ifnonnull     40
       7: aload_0
       8: getfield      #6                  // Field lock:Ljava/lang/Object;
      11: dup
      12: astore_2
      13: monitorenter
      14: aload_0
      15: getfield      #28                 // Field token:Ljava/lang/String;
      18: ifnonnull     30
      21: aload_0
      22: aload_0
      23: aload_1
      24: invokespecial #45                 // Method generateToken:(Lio/grpc/Channel;)Ljava/lang/String;
      27: putfield      #28                 // Field token:Ljava/lang/String;
      30: aload_2
      31: monitorexit
      32: goto          40
      35: astore_3
      36: aload_2
      37: monitorexit
      38: aload_3
      39: athrow
      40: aload_0
      41: getfield      #28                 // Field token:Ljava/lang/String;
      44: areturn
    Exception table:
       from    to  target type
          14    32    35   any
          35    38    35   any

  private void refreshToken(io.grpc.Channel);
    Code:
       0: aload_0
       1: getfield      #6                  // Field lock:Ljava/lang/Object;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: aload_0
       9: aload_1
      10: invokespecial #45                 // Method generateToken:(Lio/grpc/Channel;)Ljava/lang/String;
      13: putfield      #28                 // Field token:Ljava/lang/String;
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  private java.lang.String generateToken(io.grpc.Channel);
    Code:
       0: aload_0
       1: getfield      #7                  // Field builder:Lio/etcd/jetcd/ClientBuilder;
       4: invokevirtual #29                 // Method io/etcd/jetcd/ClientBuilder.user:()Lio/etcd/jetcd/ByteSequence;
       7: ifnull        49
      10: aload_0
      11: getfield      #7                  // Field builder:Lio/etcd/jetcd/ClientBuilder;
      14: invokevirtual #32                 // Method io/etcd/jetcd/ClientBuilder.password:()Lio/etcd/jetcd/ByteSequence;
      17: ifnull        49
      20: aload_0
      21: aload_1
      22: invokespecial #46                 // Method authenticate:(Lio/grpc/Channel;)Lcom/google/common/util/concurrent/ListenableFuture;
      25: invokeinterface #47,  1           // InterfaceMethod com/google/common/util/concurrent/ListenableFuture.get:()Ljava/lang/Object;
      30: checkcast     #48                 // class io/etcd/jetcd/api/AuthenticateResponse
      33: invokevirtual #49                 // Method io/etcd/jetcd/api/AuthenticateResponse.getToken:()Ljava/lang/String;
      36: areturn
      37: astore_2
      38: aload_2
      39: invokestatic  #51                 // Method io/etcd/jetcd/common/exception/EtcdExceptionFactory.handleInterrupt:(Ljava/lang/InterruptedException;)Lio/etcd/jetcd/common/exception/EtcdException;
      42: athrow
      43: astore_2
      44: aload_2
      45: invokestatic  #53                 // Method io/etcd/jetcd/common/exception/EtcdExceptionFactory.toEtcdException:(Ljava/lang/Throwable;)Lio/etcd/jetcd/common/exception/EtcdException;
      48: athrow
      49: aconst_null
      50: areturn
    Exception table:
       from    to  target type
          20    36    37   Class java/lang/InterruptedException
          20    36    43   Class java/util/concurrent/ExecutionException

  static java.lang.String access$000(io.etcd.jetcd.auth.AuthInterceptor, io.grpc.Channel);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #3                  // Method getToken:(Lio/grpc/Channel;)Ljava/lang/String;
       5: areturn

  static io.grpc.Metadata$Key access$100();
    Code:
       0: getstatic     #2                  // Field TOKEN:Lio/grpc/Metadata$Key;
       3: areturn

  static void access$200(io.etcd.jetcd.auth.AuthInterceptor, io.grpc.Channel);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method refreshToken:(Lio/grpc/Channel;)V
       5: return

  static {};
    Code:
       0: ldc           #54                 // String token
       2: getstatic     #55                 // Field io/grpc/Metadata.ASCII_STRING_MARSHALLER:Lio/grpc/Metadata$AsciiMarshaller;
       5: invokestatic  #56                 // Method io/grpc/Metadata$Key.of:(Ljava/lang/String;Lio/grpc/Metadata$AsciiMarshaller;)Lio/grpc/Metadata$Key;
       8: putstatic     #2                  // Field TOKEN:Lio/grpc/Metadata$Key;
      11: return
}

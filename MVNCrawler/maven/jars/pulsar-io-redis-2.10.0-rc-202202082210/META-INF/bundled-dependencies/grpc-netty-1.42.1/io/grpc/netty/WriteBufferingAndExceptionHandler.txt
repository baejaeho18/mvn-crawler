Compiled from "WriteBufferingAndExceptionHandler.java"
final class io.grpc.netty.WriteBufferingAndExceptionHandler extends io.netty.channel.ChannelDuplexHandler {
  private static final java.util.logging.Logger logger;

  private final java.util.Queue<io.grpc.netty.WriteBufferingAndExceptionHandler$ChannelWrite> bufferedWrites;

  private final io.netty.channel.ChannelHandler next;

  private boolean writing;

  private boolean flushRequested;

  private java.lang.Throwable failCause;

  static final boolean $assertionsDisabled;

  io.grpc.netty.WriteBufferingAndExceptionHandler(io.netty.channel.ChannelHandler);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method io/netty/channel/ChannelDuplexHandler."<init>":()V
       4: aload_0
       5: new           #4                  // class java/util/ArrayDeque
       8: dup
       9: invokespecial #5                  // Method java/util/ArrayDeque."<init>":()V
      12: putfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      15: aload_0
      16: aload_1
      17: ldc           #7                  // String next
      19: invokestatic  #8                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      22: checkcast     #9                  // class io/netty/channel/ChannelHandler
      25: putfield      #10                 // Field next:Lio/netty/channel/ChannelHandler;
      28: return

  public void handlerAdded(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
       6: aload_1
       7: invokeinterface #12,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.name:()Ljava/lang/String;
      12: aconst_null
      13: aload_0
      14: getfield      #10                 // Field next:Lio/netty/channel/ChannelHandler;
      17: invokeinterface #13,  4           // InterfaceMethod io/netty/channel/ChannelPipeline.addBefore:(Ljava/lang/String;Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      22: pop
      23: aload_0
      24: aload_1
      25: invokespecial #14                 // Method io/netty/channel/ChannelDuplexHandler.handlerAdded:(Lio/netty/channel/ChannelHandlerContext;)V
      28: aload_1
      29: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      34: getstatic     #15                 // Field io/grpc/netty/ProtocolNegotiationEvent.DEFAULT:Lio/grpc/netty/ProtocolNegotiationEvent;
      37: invokeinterface #16,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.fireUserEventTriggered:(Ljava/lang/Object;)Lio/netty/channel/ChannelPipeline;
      42: pop
      43: return

  public void handlerRemoved(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
       4: invokeinterface #17,  1           // InterfaceMethod java/util/Queue.isEmpty:()Z
       9: ifne          29
      12: getstatic     #18                 // Field io/grpc/Status.INTERNAL:Lio/grpc/Status;
      15: ldc           #19                 // String Buffer removed before draining writes
      17: invokevirtual #20                 // Method io/grpc/Status.withDescription:(Ljava/lang/String;)Lio/grpc/Status;
      20: astore_2
      21: aload_0
      22: aload_2
      23: invokevirtual #21                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
      26: invokespecial #1                  // Method failWrites:(Ljava/lang/Throwable;)V
      29: aload_0
      30: aload_1
      31: invokespecial #22                 // Method io/netty/channel/ChannelDuplexHandler.handlerRemoved:(Lio/netty/channel/ChannelHandlerContext;)V
      34: return

  public void channelInactive(io.netty.channel.ChannelHandlerContext);
    Code:
       0: getstatic     #23                 // Field io/grpc/Status.UNAVAILABLE:Lio/grpc/Status;
       3: new           #24                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #26                 // String Connection closed while performing protocol negotiation for
      12: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_1
      16: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      21: invokeinterface #28,  1           // InterfaceMethod io/netty/channel/ChannelPipeline.names:()Ljava/util/List;
      26: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      29: invokevirtual #30                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      32: invokevirtual #20                 // Method io/grpc/Status.withDescription:(Ljava/lang/String;)Lio/grpc/Status;
      35: astore_2
      36: aload_0
      37: aload_2
      38: invokevirtual #21                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
      41: invokespecial #1                  // Method failWrites:(Ljava/lang/Throwable;)V
      44: return

  public void exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable);
    Code:
       0: getstatic     #31                 // Field $assertionsDisabled:Z
       3: ifne          18
       6: aload_2
       7: ifnonnull     18
      10: new           #32                 // class java/lang/AssertionError
      13: dup
      14: invokespecial #33                 // Method java/lang/AssertionError."<init>":()V
      17: athrow
      18: aload_0
      19: getfield      #34                 // Field failCause:Ljava/lang/Throwable;
      22: astore_3
      23: aload_2
      24: invokestatic  #35                 // Method io/grpc/netty/Utils.statusFromThrowable:(Ljava/lang/Throwable;)Lio/grpc/Status;
      27: new           #24                 // class java/lang/StringBuilder
      30: dup
      31: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
      34: ldc           #36                 // String Channel Pipeline:
      36: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: aload_1
      40: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      45: invokeinterface #28,  1           // InterfaceMethod io/netty/channel/ChannelPipeline.names:()Ljava/util/List;
      50: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      53: invokevirtual #30                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      56: invokevirtual #37                 // Method io/grpc/Status.augmentDescription:(Ljava/lang/String;)Lio/grpc/Status;
      59: astore        4
      61: aload_0
      62: aload         4
      64: invokevirtual #21                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
      67: invokespecial #1                  // Method failWrites:(Ljava/lang/Throwable;)V
      70: aload_1
      71: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
      76: invokeinterface #39,  1           // InterfaceMethod io/netty/channel/Channel.isActive:()Z
      81: ifeq          108
      84: aload_3
      85: ifnonnull     108
      88: aload_1
      89: invokeinterface #40,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
      94: new           #41                 // class io/grpc/netty/WriteBufferingAndExceptionHandler$1LogOnFailure
      97: dup
      98: aload_0
      99: invokespecial #42                 // Method io/grpc/netty/WriteBufferingAndExceptionHandler$1LogOnFailure."<init>":(Lio/grpc/netty/WriteBufferingAndExceptionHandler;)V
     102: invokeinterface #43,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
     107: pop
     108: return

  public void write(io.netty.channel.ChannelHandlerContext, java.lang.Object, io.netty.channel.ChannelPromise);
    Code:
       0: aload_0
       1: getfield      #34                 // Field failCause:Ljava/lang/Throwable;
       4: ifnull        26
       7: aload_3
       8: aload_0
       9: getfield      #34                 // Field failCause:Ljava/lang/Throwable;
      12: invokeinterface #44,  2           // InterfaceMethod io/netty/channel/ChannelPromise.setFailure:(Ljava/lang/Throwable;)Lio/netty/channel/ChannelPromise;
      17: pop
      18: aload_2
      19: invokestatic  #45                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
      22: pop
      23: goto          66
      26: aload_2
      27: instanceof    #46                 // class io/grpc/netty/GracefulCloseCommand
      30: ifne          40
      33: aload_2
      34: instanceof    #47                 // class io/grpc/netty/ForcefulCloseCommand
      37: ifeq          47
      40: aload_1
      41: invokeinterface #40,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
      46: pop
      47: aload_0
      48: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      51: new           #48                 // class io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite
      54: dup
      55: aload_2
      56: aload_3
      57: invokespecial #49                 // Method io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite."<init>":(Ljava/lang/Object;Lio/netty/channel/ChannelPromise;)V
      60: invokeinterface #50,  2           // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      65: pop
      66: return

  public void connect(io.netty.channel.ChannelHandlerContext, java.net.SocketAddress, java.net.SocketAddress, io.netty.channel.ChannelPromise) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: invokespecial #51                 // Method io/netty/channel/ChannelDuplexHandler.connect:(Lio/netty/channel/ChannelHandlerContext;Ljava/net/SocketAddress;Ljava/net/SocketAddress;Lio/netty/channel/ChannelPromise;)V
       9: aload         4
      11: new           #52                 // class io/grpc/netty/WriteBufferingAndExceptionHandler$1ConnectListener
      14: dup
      15: aload_0
      16: invokespecial #53                 // Method io/grpc/netty/WriteBufferingAndExceptionHandler$1ConnectListener."<init>":(Lio/grpc/netty/WriteBufferingAndExceptionHandler;)V
      19: invokeinterface #54,  2           // InterfaceMethod io/netty/channel/ChannelPromise.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelPromise;
      24: pop
      25: return

  public void channelRead(io.netty.channel.ChannelHandlerContext, java.lang.Object);
    Code:
       0: getstatic     #2                  // Field logger:Ljava/util/logging/Logger;
       3: getstatic     #55                 // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
       6: invokevirtual #56                 // Method java/util/logging/Logger.isLoggable:(Ljava/util/logging/Level;)Z
       9: ifeq          64
      12: aload_2
      13: instanceof    #57                 // class io/netty/buffer/ByteBuf
      16: ifeq          29
      19: aload_2
      20: checkcast     #57                 // class io/netty/buffer/ByteBuf
      23: invokestatic  #58                 // Method io/netty/buffer/ByteBufUtil.hexDump:(Lio/netty/buffer/ByteBuf;)Ljava/lang/String;
      26: goto          30
      29: aload_2
      30: astore_3
      31: getstatic     #2                  // Field logger:Ljava/util/logging/Logger;
      34: getstatic     #55                 // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
      37: ldc           #59                 // String Unexpected channelRead()->{0} reached end of pipeline {1}
      39: iconst_2
      40: anewarray     #60                 // class java/lang/Object
      43: dup
      44: iconst_0
      45: aload_3
      46: aastore
      47: dup
      48: iconst_1
      49: aload_1
      50: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      55: invokeinterface #28,  1           // InterfaceMethod io/netty/channel/ChannelPipeline.names:()Ljava/util/List;
      60: aastore
      61: invokevirtual #61                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;[Ljava/lang/Object;)V
      64: aload_0
      65: aload_1
      66: getstatic     #18                 // Field io/grpc/Status.INTERNAL:Lio/grpc/Status;
      69: new           #24                 // class java/lang/StringBuilder
      72: dup
      73: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
      76: ldc           #62                 // String channelRead() missed by ProtocolNegotiator handler:
      78: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: aload_2
      82: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      85: invokevirtual #30                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      88: invokevirtual #20                 // Method io/grpc/Status.withDescription:(Ljava/lang/String;)Lio/grpc/Status;
      91: invokevirtual #21                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
      94: invokevirtual #63                 // Method exceptionCaught:(Lio/netty/channel/ChannelHandlerContext;Ljava/lang/Throwable;)V
      97: aload_2
      98: invokestatic  #64                 // Method io/netty/util/ReferenceCountUtil.safeRelease:(Ljava/lang/Object;)V
     101: goto          113
     104: astore        4
     106: aload_2
     107: invokestatic  #64                 // Method io/netty/util/ReferenceCountUtil.safeRelease:(Ljava/lang/Object;)V
     110: aload         4
     112: athrow
     113: return
    Exception table:
       from    to  target type
           0    97   104   any
         104   106   104   any

  public void flush(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #65                 // Field flushRequested:Z
       5: return

  public void close(io.netty.channel.ChannelHandlerContext, io.netty.channel.ChannelPromise) throws java.lang.Exception;
    Code:
       0: getstatic     #23                 // Field io/grpc/Status.UNAVAILABLE:Lio/grpc/Status;
       3: new           #24                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #66                 // String Connection closing while performing protocol negotiation for
      12: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_1
      16: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      21: invokeinterface #28,  1           // InterfaceMethod io/netty/channel/ChannelPipeline.names:()Ljava/util/List;
      26: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      29: invokevirtual #30                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      32: invokevirtual #20                 // Method io/grpc/Status.withDescription:(Ljava/lang/String;)Lio/grpc/Status;
      35: astore_3
      36: aload_0
      37: aload_3
      38: invokevirtual #21                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
      41: invokespecial #1                  // Method failWrites:(Ljava/lang/Throwable;)V
      44: aload_0
      45: aload_1
      46: aload_2
      47: invokespecial #67                 // Method io/netty/channel/ChannelDuplexHandler.close:(Lio/netty/channel/ChannelHandlerContext;Lio/netty/channel/ChannelPromise;)V
      50: return

  final void writeBufferedAndRemove(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_1
       1: invokeinterface #38,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
       6: invokeinterface #39,  1           // InterfaceMethod io/netty/channel/Channel.isActive:()Z
      11: ifeq          21
      14: aload_0
      15: getfield      #68                 // Field writing:Z
      18: ifeq          22
      21: return
      22: aload_0
      23: iconst_1
      24: putfield      #68                 // Field writing:Z
      27: aload_0
      28: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      31: invokeinterface #17,  1           // InterfaceMethod java/util/Queue.isEmpty:()Z
      36: ifne          70
      39: aload_0
      40: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      43: invokeinterface #69,  1           // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      48: checkcast     #48                 // class io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite
      51: astore_2
      52: aload_1
      53: aload_2
      54: getfield      #70                 // Field io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite.msg:Ljava/lang/Object;
      57: aload_2
      58: getfield      #71                 // Field io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite.promise:Lio/netty/channel/ChannelPromise;
      61: invokeinterface #72,  3           // InterfaceMethod io/netty/channel/ChannelHandlerContext.write:(Ljava/lang/Object;Lio/netty/channel/ChannelPromise;)Lio/netty/channel/ChannelFuture;
      66: pop
      67: goto          27
      70: aload_0
      71: getfield      #65                 // Field flushRequested:Z
      74: ifeq          84
      77: aload_1
      78: invokeinterface #73,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.flush:()Lio/netty/channel/ChannelHandlerContext;
      83: pop
      84: aload_1
      85: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      90: aload_0
      91: invokeinterface #74,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.remove:(Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      96: pop
      97: return

  private void failWrites(java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #34                 // Field failCause:Ljava/lang/Throwable;
       4: ifnonnull     15
       7: aload_0
       8: aload_1
       9: putfield      #34                 // Field failCause:Ljava/lang/Throwable;
      12: goto          27
      15: getstatic     #2                  // Field logger:Ljava/util/logging/Logger;
      18: getstatic     #55                 // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
      21: ldc           #75                 // String Ignoring duplicate failure
      23: aload_1
      24: invokevirtual #76                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      27: aload_0
      28: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      31: invokeinterface #17,  1           // InterfaceMethod java/util/Queue.isEmpty:()Z
      36: ifne          74
      39: aload_0
      40: getfield      #6                  // Field bufferedWrites:Ljava/util/Queue;
      43: invokeinterface #69,  1           // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      48: checkcast     #48                 // class io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite
      51: astore_2
      52: aload_2
      53: getfield      #71                 // Field io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite.promise:Lio/netty/channel/ChannelPromise;
      56: aload_1
      57: invokeinterface #44,  2           // InterfaceMethod io/netty/channel/ChannelPromise.setFailure:(Ljava/lang/Throwable;)Lio/netty/channel/ChannelPromise;
      62: pop
      63: aload_2
      64: getfield      #70                 // Field io/grpc/netty/WriteBufferingAndExceptionHandler$ChannelWrite.msg:Ljava/lang/Object;
      67: invokestatic  #45                 // Method io/netty/util/ReferenceCountUtil.release:(Ljava/lang/Object;)Z
      70: pop
      71: goto          27
      74: return

  static java.util.logging.Logger access$000();
    Code:
       0: getstatic     #2                  // Field logger:Ljava/util/logging/Logger;
       3: areturn

  static void access$100(io.grpc.netty.WriteBufferingAndExceptionHandler, java.lang.Throwable);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method failWrites:(Ljava/lang/Throwable;)V
       5: return

  static {};
    Code:
       0: ldc           #77                 // class io/grpc/netty/WriteBufferingAndExceptionHandler
       2: invokevirtual #78                 // Method java/lang/Class.desiredAssertionStatus:()Z
       5: ifne          12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: putstatic     #31                 // Field $assertionsDisabled:Z
      16: ldc           #77                 // class io/grpc/netty/WriteBufferingAndExceptionHandler
      18: invokevirtual #79                 // Method java/lang/Class.getName:()Ljava/lang/String;
      21: invokestatic  #80                 // Method java/util/logging/Logger.getLogger:(Ljava/lang/String;)Ljava/util/logging/Logger;
      24: putstatic     #2                  // Field logger:Ljava/util/logging/Logger;
      27: return
}

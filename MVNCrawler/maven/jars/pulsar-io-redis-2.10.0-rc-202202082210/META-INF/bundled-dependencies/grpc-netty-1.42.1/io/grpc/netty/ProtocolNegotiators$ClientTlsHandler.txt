Compiled from "ProtocolNegotiators.java"
final class io.grpc.netty.ProtocolNegotiators$ClientTlsHandler extends io.grpc.netty.ProtocolNegotiators$ProtocolNegotiationHandler {
  private final io.netty.handler.ssl.SslContext sslContext;

  private final java.lang.String host;

  private final int port;

  private java.util.concurrent.Executor executor;

  io.grpc.netty.ProtocolNegotiators$ClientTlsHandler(io.netty.channel.ChannelHandler, io.netty.handler.ssl.SslContext, java.lang.String, java.util.concurrent.Executor, io.grpc.ChannelLogger);
    Code:
       0: aload_0
       1: aload_1
       2: aload         5
       4: invokespecial #1                  // Method io/grpc/netty/ProtocolNegotiators$ProtocolNegotiationHandler."<init>":(Lio/netty/channel/ChannelHandler;Lio/grpc/ChannelLogger;)V
       7: aload_0
       8: aload_2
       9: ldc           #2                  // String sslContext
      11: invokestatic  #3                  // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      14: checkcast     #4                  // class io/netty/handler/ssl/SslContext
      17: putfield      #5                  // Field sslContext:Lio/netty/handler/ssl/SslContext;
      20: aload_3
      21: invokestatic  #6                  // Method io/grpc/netty/ProtocolNegotiators.parseAuthority:(Ljava/lang/String;)Lio/grpc/netty/ProtocolNegotiators$HostPort;
      24: astore        6
      26: aload_0
      27: aload         6
      29: getfield      #7                  // Field io/grpc/netty/ProtocolNegotiators$HostPort.host:Ljava/lang/String;
      32: putfield      #8                  // Field host:Ljava/lang/String;
      35: aload_0
      36: aload         6
      38: getfield      #9                  // Field io/grpc/netty/ProtocolNegotiators$HostPort.port:I
      41: putfield      #10                 // Field port:I
      44: aload_0
      45: aload         4
      47: putfield      #11                 // Field executor:Ljava/util/concurrent/Executor;
      50: return

  protected void handlerAdded0(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: getfield      #5                  // Field sslContext:Lio/netty/handler/ssl/SslContext;
       4: aload_1
       5: invokeinterface #12,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.alloc:()Lio/netty/buffer/ByteBufAllocator;
      10: aload_0
      11: getfield      #8                  // Field host:Ljava/lang/String;
      14: aload_0
      15: getfield      #10                 // Field port:I
      18: invokevirtual #13                 // Method io/netty/handler/ssl/SslContext.newEngine:(Lio/netty/buffer/ByteBufAllocator;Ljava/lang/String;I)Ljavax/net/ssl/SSLEngine;
      21: astore_2
      22: aload_2
      23: invokevirtual #14                 // Method javax/net/ssl/SSLEngine.getSSLParameters:()Ljavax/net/ssl/SSLParameters;
      26: astore_3
      27: aload_3
      28: ldc           #15                 // String HTTPS
      30: invokevirtual #16                 // Method javax/net/ssl/SSLParameters.setEndpointIdentificationAlgorithm:(Ljava/lang/String;)V
      33: aload_2
      34: aload_3
      35: invokevirtual #17                 // Method javax/net/ssl/SSLEngine.setSSLParameters:(Ljavax/net/ssl/SSLParameters;)V
      38: aload_1
      39: invokeinterface #18,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      44: aload_1
      45: invokeinterface #19,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.name:()Ljava/lang/String;
      50: aconst_null
      51: aload_0
      52: getfield      #11                 // Field executor:Ljava/util/concurrent/Executor;
      55: ifnull        74
      58: new           #20                 // class io/netty/handler/ssl/SslHandler
      61: dup
      62: aload_2
      63: iconst_0
      64: aload_0
      65: getfield      #11                 // Field executor:Ljava/util/concurrent/Executor;
      68: invokespecial #21                 // Method io/netty/handler/ssl/SslHandler."<init>":(Ljavax/net/ssl/SSLEngine;ZLjava/util/concurrent/Executor;)V
      71: goto          83
      74: new           #20                 // class io/netty/handler/ssl/SslHandler
      77: dup
      78: aload_2
      79: iconst_0
      80: invokespecial #22                 // Method io/netty/handler/ssl/SslHandler."<init>":(Ljavax/net/ssl/SSLEngine;Z)V
      83: invokeinterface #23,  4           // InterfaceMethod io/netty/channel/ChannelPipeline.addBefore:(Ljava/lang/String;Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      88: pop
      89: return

  protected void userEventTriggered0(io.netty.channel.ChannelHandlerContext, java.lang.Object) throws java.lang.Exception;
    Code:
       0: aload_2
       1: instanceof    #24                 // class io/netty/handler/ssl/SslHandshakeCompletionEvent
       4: ifeq          162
       7: aload_2
       8: checkcast     #24                 // class io/netty/handler/ssl/SslHandshakeCompletionEvent
      11: astore_3
      12: aload_3
      13: invokevirtual #25                 // Method io/netty/handler/ssl/SslHandshakeCompletionEvent.isSuccess:()Z
      16: ifeq          118
      19: aload_1
      20: invokeinterface #18,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      25: ldc           #20                 // class io/netty/handler/ssl/SslHandler
      27: invokeinterface #26,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.get:(Ljava/lang/Class;)Lio/netty/channel/ChannelHandler;
      32: checkcast     #20                 // class io/netty/handler/ssl/SslHandler
      35: astore        4
      37: aload_0
      38: getfield      #5                  // Field sslContext:Lio/netty/handler/ssl/SslContext;
      41: invokevirtual #27                 // Method io/netty/handler/ssl/SslContext.applicationProtocolNegotiator:()Lio/netty/handler/ssl/ApplicationProtocolNegotiator;
      44: invokeinterface #28,  1           // InterfaceMethod io/netty/handler/ssl/ApplicationProtocolNegotiator.protocols:()Ljava/util/List;
      49: aload         4
      51: invokevirtual #29                 // Method io/netty/handler/ssl/SslHandler.applicationProtocol:()Ljava/lang/String;
      54: invokeinterface #30,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      59: ifeq          88
      62: getstatic     #31                 // Field java/util/logging/Level.FINER:Ljava/util/logging/Level;
      65: aload_1
      66: ldc           #32                 // String TLS negotiation succeeded.
      68: aconst_null
      69: invokestatic  #33                 // Method io/grpc/netty/ProtocolNegotiators.logSslEngineDetails:(Ljava/util/logging/Level;Lio/netty/channel/ChannelHandlerContext;Ljava/lang/String;Ljava/lang/Throwable;)V
      72: aload_0
      73: aload_1
      74: aload         4
      76: invokevirtual #34                 // Method io/netty/handler/ssl/SslHandler.engine:()Ljavax/net/ssl/SSLEngine;
      79: invokevirtual #35                 // Method javax/net/ssl/SSLEngine.getSession:()Ljavax/net/ssl/SSLSession;
      82: invokespecial #36                 // Method propagateTlsComplete:(Lio/netty/channel/ChannelHandlerContext;Ljavax/net/ssl/SSLSession;)V
      85: goto          115
      88: ldc           #37                 // String Failed ALPN negotiation: Unable to find compatible protocol
      90: invokestatic  #38                 // Method io/grpc/netty/ProtocolNegotiators.access$000:(Ljava/lang/String;)Ljava/lang/RuntimeException;
      93: astore        5
      95: getstatic     #39                 // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
      98: aload_1
      99: ldc           #40                 // String TLS negotiation failed.
     101: aload         5
     103: invokestatic  #33                 // Method io/grpc/netty/ProtocolNegotiators.logSslEngineDetails:(Ljava/util/logging/Level;Lio/netty/channel/ChannelHandlerContext;Ljava/lang/String;Ljava/lang/Throwable;)V
     106: aload_1
     107: aload         5
     109: invokeinterface #41,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.fireExceptionCaught:(Ljava/lang/Throwable;)Lio/netty/channel/ChannelHandlerContext;
     114: pop
     115: goto          159
     118: aload_3
     119: invokevirtual #42                 // Method io/netty/handler/ssl/SslHandshakeCompletionEvent.cause:()Ljava/lang/Throwable;
     122: astore        4
     124: aload         4
     126: instanceof    #43                 // class java/nio/channels/ClosedChannelException
     129: ifeq          150
     132: getstatic     #44                 // Field io/grpc/Status.UNAVAILABLE:Lio/grpc/Status;
     135: ldc           #45                 // String Connection closed while performing TLS negotiation
     137: invokevirtual #46                 // Method io/grpc/Status.withDescription:(Ljava/lang/String;)Lio/grpc/Status;
     140: aload         4
     142: invokevirtual #47                 // Method io/grpc/Status.withCause:(Ljava/lang/Throwable;)Lio/grpc/Status;
     145: invokevirtual #48                 // Method io/grpc/Status.asRuntimeException:()Lio/grpc/StatusRuntimeException;
     148: astore        4
     150: aload_1
     151: aload         4
     153: invokeinterface #41,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.fireExceptionCaught:(Ljava/lang/Throwable;)Lio/netty/channel/ChannelHandlerContext;
     158: pop
     159: goto          168
     162: aload_0
     163: aload_1
     164: aload_2
     165: invokespecial #49                 // Method io/grpc/netty/ProtocolNegotiators$ProtocolNegotiationHandler.userEventTriggered0:(Lio/netty/channel/ChannelHandlerContext;Ljava/lang/Object;)V
     168: return

  private void propagateTlsComplete(io.netty.channel.ChannelHandlerContext, javax.net.ssl.SSLSession);
    Code:
       0: new           #50                 // class io/grpc/InternalChannelz$Security
       3: dup
       4: new           #51                 // class io/grpc/InternalChannelz$Tls
       7: dup
       8: aload_2
       9: invokespecial #52                 // Method io/grpc/InternalChannelz$Tls."<init>":(Ljavax/net/ssl/SSLSession;)V
      12: invokespecial #53                 // Method io/grpc/InternalChannelz$Security."<init>":(Lio/grpc/InternalChannelz$Tls;)V
      15: astore_3
      16: aload_0
      17: invokevirtual #54                 // Method getProtocolNegotiationEvent:()Lio/grpc/netty/ProtocolNegotiationEvent;
      20: astore        4
      22: aload         4
      24: invokevirtual #55                 // Method io/grpc/netty/ProtocolNegotiationEvent.getAttributes:()Lio/grpc/Attributes;
      27: invokevirtual #56                 // Method io/grpc/Attributes.toBuilder:()Lio/grpc/Attributes$Builder;
      30: getstatic     #57                 // Field io/grpc/internal/GrpcAttributes.ATTR_SECURITY_LEVEL:Lio/grpc/Attributes$Key;
      33: getstatic     #58                 // Field io/grpc/SecurityLevel.PRIVACY_AND_INTEGRITY:Lio/grpc/SecurityLevel;
      36: invokevirtual #59                 // Method io/grpc/Attributes$Builder.set:(Lio/grpc/Attributes$Key;Ljava/lang/Object;)Lio/grpc/Attributes$Builder;
      39: getstatic     #60                 // Field io/grpc/Grpc.TRANSPORT_ATTR_SSL_SESSION:Lio/grpc/Attributes$Key;
      42: aload_2
      43: invokevirtual #59                 // Method io/grpc/Attributes$Builder.set:(Lio/grpc/Attributes$Key;Ljava/lang/Object;)Lio/grpc/Attributes$Builder;
      46: invokevirtual #61                 // Method io/grpc/Attributes$Builder.build:()Lio/grpc/Attributes;
      49: astore        5
      51: aload_0
      52: aload         4
      54: aload         5
      56: invokevirtual #62                 // Method io/grpc/netty/ProtocolNegotiationEvent.withAttributes:(Lio/grpc/Attributes;)Lio/grpc/netty/ProtocolNegotiationEvent;
      59: aload_3
      60: invokevirtual #63                 // Method io/grpc/netty/ProtocolNegotiationEvent.withSecurity:(Lio/grpc/InternalChannelz$Security;)Lio/grpc/netty/ProtocolNegotiationEvent;
      63: invokevirtual #64                 // Method replaceProtocolNegotiationEvent:(Lio/grpc/netty/ProtocolNegotiationEvent;)V
      66: aload_0
      67: aload_1
      68: invokevirtual #65                 // Method fireProtocolNegotiationEvent:(Lio/netty/channel/ChannelHandlerContext;)V
      71: return
}

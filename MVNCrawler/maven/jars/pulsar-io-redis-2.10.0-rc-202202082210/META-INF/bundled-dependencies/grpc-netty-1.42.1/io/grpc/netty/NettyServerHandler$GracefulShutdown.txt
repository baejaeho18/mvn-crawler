Compiled from "NettyServerHandler.java"
final class io.grpc.netty.NettyServerHandler$GracefulShutdown {
  java.lang.String goAwayMessage;

  java.lang.Long graceTimeInNanos;

  boolean pingAckedOrTimeout;

  java.util.concurrent.Future<?> pingFuture;

  final io.grpc.netty.NettyServerHandler this$0;

  io.grpc.netty.NettyServerHandler$GracefulShutdown(io.grpc.netty.NettyServerHandler, java.lang.String, java.lang.Long);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
       5: aload_0
       6: invokespecial #4                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #5                  // Field goAwayMessage:Ljava/lang/String;
      14: aload_0
      15: aload_3
      16: putfield      #6                  // Field graceTimeInNanos:Ljava/lang/Long;
      19: return

  void start(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
       4: aload_1
       5: ldc           #8                  // int 2147483647
       7: getstatic     #9                  // Field io/netty/handler/codec/http2/Http2Error.NO_ERROR:Lio/netty/handler/codec/http2/Http2Error;
      10: invokevirtual #10                 // Method io/netty/handler/codec/http2/Http2Error.code:()J
      13: aload_1
      14: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.alloc:()Lio/netty/buffer/ByteBufAllocator;
      19: aload_0
      20: getfield      #5                  // Field goAwayMessage:Ljava/lang/String;
      23: invokestatic  #12                 // Method io/netty/buffer/ByteBufUtil.writeAscii:(Lio/netty/buffer/ByteBufAllocator;Ljava/lang/CharSequence;)Lio/netty/buffer/ByteBuf;
      26: aload_1
      27: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.newPromise:()Lio/netty/channel/ChannelPromise;
      32: invokevirtual #14                 // Method io/grpc/netty/NettyServerHandler.goAway:(Lio/netty/channel/ChannelHandlerContext;IJLio/netty/buffer/ByteBuf;Lio/netty/channel/ChannelPromise;)Lio/netty/channel/ChannelFuture;
      35: pop
      36: aload_0
      37: aload_1
      38: invokeinterface #15,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.executor:()Lio/netty/util/concurrent/EventExecutor;
      43: new           #16                 // class io/grpc/netty/NettyServerHandler$GracefulShutdown$1
      46: dup
      47: aload_0
      48: aload_1
      49: invokespecial #17                 // Method io/grpc/netty/NettyServerHandler$GracefulShutdown$1."<init>":(Lio/grpc/netty/NettyServerHandler$GracefulShutdown;Lio/netty/channel/ChannelHandlerContext;)V
      52: invokestatic  #18                 // Method io/grpc/netty/NettyServerHandler.access$1600:()J
      55: getstatic     #19                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      58: invokeinterface #20,  5           // InterfaceMethod io/netty/util/concurrent/EventExecutor.schedule:(Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Lio/netty/util/concurrent/ScheduledFuture;
      63: putfield      #21                 // Field pingFuture:Ljava/util/concurrent/Future;
      66: aload_0
      67: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
      70: invokevirtual #22                 // Method io/grpc/netty/NettyServerHandler.encoder:()Lio/netty/handler/codec/http2/Http2ConnectionEncoder;
      73: aload_1
      74: iconst_0
      75: ldc2_w        #23                 // long 40715087873l
      78: aload_1
      79: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.newPromise:()Lio/netty/channel/ChannelPromise;
      84: invokeinterface #25,  6           // InterfaceMethod io/netty/handler/codec/http2/Http2ConnectionEncoder.writePing:(Lio/netty/channel/ChannelHandlerContext;ZJLio/netty/channel/ChannelPromise;)Lio/netty/channel/ChannelFuture;
      89: pop
      90: return

  void secondGoAwayAndClose(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: getfield      #26                 // Field pingAckedOrTimeout:Z
       4: ifeq          8
       7: return
       8: aload_0
       9: iconst_1
      10: putfield      #26                 // Field pingAckedOrTimeout:Z
      13: aload_0
      14: getfield      #21                 // Field pingFuture:Ljava/util/concurrent/Future;
      17: ldc           #27                 // String pingFuture
      19: invokestatic  #28                 // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      22: pop
      23: aload_0
      24: getfield      #21                 // Field pingFuture:Ljava/util/concurrent/Future;
      27: iconst_0
      28: invokeinterface #29,  2           // InterfaceMethod java/util/concurrent/Future.cancel:(Z)Z
      33: pop
      34: aload_0
      35: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
      38: aload_1
      39: aload_0
      40: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
      43: invokevirtual #30                 // Method io/grpc/netty/NettyServerHandler.connection:()Lio/netty/handler/codec/http2/Http2Connection;
      46: invokeinterface #31,  1           // InterfaceMethod io/netty/handler/codec/http2/Http2Connection.remote:()Lio/netty/handler/codec/http2/Http2Connection$Endpoint;
      51: invokeinterface #32,  1           // InterfaceMethod io/netty/handler/codec/http2/Http2Connection$Endpoint.lastStreamCreated:()I
      56: getstatic     #9                  // Field io/netty/handler/codec/http2/Http2Error.NO_ERROR:Lio/netty/handler/codec/http2/Http2Error;
      59: invokevirtual #10                 // Method io/netty/handler/codec/http2/Http2Error.code:()J
      62: aload_1
      63: invokeinterface #11,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.alloc:()Lio/netty/buffer/ByteBufAllocator;
      68: aload_0
      69: getfield      #5                  // Field goAwayMessage:Ljava/lang/String;
      72: invokestatic  #12                 // Method io/netty/buffer/ByteBufUtil.writeAscii:(Lio/netty/buffer/ByteBufAllocator;Ljava/lang/CharSequence;)Lio/netty/buffer/ByteBuf;
      75: aload_1
      76: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.newPromise:()Lio/netty/channel/ChannelPromise;
      81: invokevirtual #14                 // Method io/grpc/netty/NettyServerHandler.goAway:(Lio/netty/channel/ChannelHandlerContext;IJLio/netty/buffer/ByteBuf;Lio/netty/channel/ChannelPromise;)Lio/netty/channel/ChannelFuture;
      84: pop
      85: aload_0
      86: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
      89: invokevirtual #33                 // Method io/grpc/netty/NettyServerHandler.gracefulShutdownTimeoutMillis:()J
      92: lstore_2
      93: aload_0
      94: lload_2
      95: invokespecial #34                 // Method graceTimeOverrideMillis:(J)J
      98: lstore        4
     100: aload_0
     101: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     104: lload         4
     106: invokevirtual #35                 // Method io/grpc/netty/NettyServerHandler.gracefulShutdownTimeoutMillis:(J)V
     109: aload_0
     110: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     113: aload_1
     114: aload_1
     115: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.newPromise:()Lio/netty/channel/ChannelPromise;
     120: invokestatic  #36                 // Method io/grpc/netty/NettyServerHandler.access$1701:(Lio/grpc/netty/NettyServerHandler;Lio/netty/channel/ChannelHandlerContext;Lio/netty/channel/ChannelPromise;)V
     123: aload_0
     124: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     127: lload_2
     128: invokevirtual #35                 // Method io/grpc/netty/NettyServerHandler.gracefulShutdownTimeoutMillis:(J)V
     131: goto          171
     134: astore        6
     136: aload_0
     137: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     140: aload_1
     141: iconst_1
     142: aload         6
     144: invokevirtual #38                 // Method io/grpc/netty/NettyServerHandler.onError:(Lio/netty/channel/ChannelHandlerContext;ZLjava/lang/Throwable;)V
     147: aload_0
     148: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     151: lload_2
     152: invokevirtual #35                 // Method io/grpc/netty/NettyServerHandler.gracefulShutdownTimeoutMillis:(J)V
     155: goto          171
     158: astore        7
     160: aload_0
     161: getfield      #3                  // Field this$0:Lio/grpc/netty/NettyServerHandler;
     164: lload_2
     165: invokevirtual #35                 // Method io/grpc/netty/NettyServerHandler.gracefulShutdownTimeoutMillis:(J)V
     168: aload         7
     170: athrow
     171: return
    Exception table:
       from    to  target type
         100   123   134   Class java/lang/Exception
         100   123   158   any
         134   147   158   any
         158   160   158   any

  private long graceTimeOverrideMillis(long);
    Code:
       0: aload_0
       1: getfield      #6                  // Field graceTimeInNanos:Ljava/lang/Long;
       4: ifnonnull     9
       7: lload_1
       8: lreturn
       9: aload_0
      10: getfield      #6                  // Field graceTimeInNanos:Ljava/lang/Long;
      13: invokevirtual #39                 // Method java/lang/Long.longValue:()J
      16: ldc2_w        #40                 // long 9223372036854775807l
      19: lcmp
      20: ifne          27
      23: ldc2_w        #42                 // long -1l
      26: lreturn
      27: getstatic     #19                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      30: aload_0
      31: getfield      #6                  // Field graceTimeInNanos:Ljava/lang/Long;
      34: invokevirtual #39                 // Method java/lang/Long.longValue:()J
      37: invokevirtual #44                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      40: lreturn
}

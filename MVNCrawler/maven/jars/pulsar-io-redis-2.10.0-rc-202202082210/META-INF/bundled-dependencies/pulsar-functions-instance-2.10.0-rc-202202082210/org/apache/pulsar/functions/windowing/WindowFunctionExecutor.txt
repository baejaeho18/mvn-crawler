Compiled from "WindowFunctionExecutor.java"
public class org.apache.pulsar.functions.windowing.WindowFunctionExecutor<I, O> implements org.apache.pulsar.functions.api.Function<I, O> {
  private static final org.slf4j.Logger log;

  private boolean initialized;

  protected org.apache.pulsar.common.functions.WindowConfig windowConfig;

  private org.apache.pulsar.functions.windowing.WindowManager<org.apache.pulsar.functions.api.Record<I>> windowManager;

  private org.apache.pulsar.functions.windowing.TimestampExtractor<I> timestampExtractor;

  protected transient org.apache.pulsar.functions.windowing.WaterMarkEventGenerator<org.apache.pulsar.functions.api.Record<I>> waterMarkEventGenerator;

  protected java.util.function.Function<java.util.Collection<I>, O> bareWindowFunction;

  protected org.apache.pulsar.functions.api.WindowFunction<I, O> windowFunction;

  public org.apache.pulsar.functions.windowing.WindowFunctionExecutor();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: return

  public void initialize(org.apache.pulsar.functions.api.Context);
    Code:
       0: aload_0
       1: aload_0
       2: aload_1
       3: invokespecial #3                  // Method getWindowConfigs:(Lorg/apache/pulsar/functions/api/Context;)Lorg/apache/pulsar/common/functions/WindowConfig;
       6: putfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
       9: aload_0
      10: aload_0
      11: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      14: invokespecial #5                  // Method initializeUserFunction:(Lorg/apache/pulsar/common/functions/WindowConfig;)V
      17: getstatic     #6                  // Field log:Lorg/slf4j/Logger;
      20: ldc           #7                  // String Window Config: {}
      22: aload_0
      23: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      26: invokeinterface #8,  3            // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      31: aload_0
      32: aload_0
      33: aload_0
      34: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      37: aload_1
      38: invokespecial #9                  // Method getWindowManager:(Lorg/apache/pulsar/common/functions/WindowConfig;Lorg/apache/pulsar/functions/api/Context;)Lorg/apache/pulsar/functions/windowing/WindowManager;
      41: putfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
      44: aload_0
      45: iconst_1
      46: putfield      #11                 // Field initialized:Z
      49: aload_0
      50: invokespecial #12                 // Method start:()V
      53: return

  private void initializeUserFunction(org.apache.pulsar.common.functions.WindowConfig);
    Code:
       0: aload_1
       1: invokevirtual #13                 // Method org/apache/pulsar/common/functions/WindowConfig.getActualWindowFunctionClassName:()Ljava/lang/String;
       4: astore_2
       5: invokestatic  #14                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       8: invokevirtual #15                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      11: astore_3
      12: aload_2
      13: aload_3
      14: invokestatic  #16                 // Method org/apache/pulsar/common/util/Reflections.createInstance:(Ljava/lang/String;Ljava/lang/ClassLoader;)Ljava/lang/Object;
      17: astore        4
      19: aload         4
      21: instanceof    #17                 // class java/util/function/Function
      24: ifeq          76
      27: ldc           #17                 // class java/util/function/Function
      29: aload         4
      31: invokevirtual #18                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      34: invokestatic  #19                 // Method net/jodah/typetools/TypeResolver.resolveRawArguments:(Ljava/lang/reflect/Type;Ljava/lang/Class;)[Ljava/lang/Class;
      37: astore        5
      39: aload         5
      41: iconst_0
      42: aaload
      43: ldc           #20                 // class java/util/Collection
      45: invokevirtual #21                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      48: ifeq          63
      51: aload_0
      52: aload         4
      54: checkcast     #17                 // class java/util/function/Function
      57: putfield      #22                 // Field bareWindowFunction:Ljava/util/function/Function;
      60: goto          73
      63: new           #23                 // class java/lang/IllegalArgumentException
      66: dup
      67: ldc           #24                 // String Window function must take a collection as input
      69: invokespecial #25                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      72: athrow
      73: goto          106
      76: aload         4
      78: instanceof    #26                 // class org/apache/pulsar/functions/api/WindowFunction
      81: ifeq          96
      84: aload_0
      85: aload         4
      87: checkcast     #26                 // class org/apache/pulsar/functions/api/WindowFunction
      90: putfield      #27                 // Field windowFunction:Lorg/apache/pulsar/functions/api/WindowFunction;
      93: goto          106
      96: new           #23                 // class java/lang/IllegalArgumentException
      99: dup
     100: ldc           #28                 // String Window function does not implement the correct interface
     102: invokespecial #25                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     105: athrow
     106: return

  private org.apache.pulsar.common.functions.WindowConfig getWindowConfigs(org.apache.pulsar.functions.api.Context);
    Code:
       0: aload_1
       1: ldc           #30                 // String __WINDOWCONFIGS__
       3: invokeinterface #31,  2           // InterfaceMethod org/apache/pulsar/functions/api/Context.getUserConfigValue:(Ljava/lang/String;)Ljava/util/Optional;
       8: invokevirtual #32                 // Method java/util/Optional.isPresent:()Z
      11: ifne          24
      14: new           #23                 // class java/lang/IllegalArgumentException
      17: dup
      18: ldc           #33                 // String Window Configs cannot be found
      20: invokespecial #25                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: new           #34                 // class com/google/gson/Gson
      27: dup
      28: invokespecial #35                 // Method com/google/gson/Gson."<init>":()V
      31: new           #34                 // class com/google/gson/Gson
      34: dup
      35: invokespecial #35                 // Method com/google/gson/Gson."<init>":()V
      38: aload_1
      39: ldc           #30                 // String __WINDOWCONFIGS__
      41: invokeinterface #31,  2           // InterfaceMethod org/apache/pulsar/functions/api/Context.getUserConfigValue:(Ljava/lang/String;)Ljava/util/Optional;
      46: invokevirtual #36                 // Method java/util/Optional.get:()Ljava/lang/Object;
      49: invokevirtual #37                 // Method com/google/gson/Gson.toJson:(Ljava/lang/Object;)Ljava/lang/String;
      52: ldc           #29                 // class org/apache/pulsar/common/functions/WindowConfig
      54: invokevirtual #38                 // Method com/google/gson/Gson.fromJson:(Ljava/lang/String;Ljava/lang/Class;)Ljava/lang/Object;
      57: checkcast     #29                 // class org/apache/pulsar/common/functions/WindowConfig
      60: astore_2
      61: aload_2
      62: areturn

  private org.apache.pulsar.functions.windowing.WindowManager<org.apache.pulsar.functions.api.Record<I>> getWindowManager(org.apache.pulsar.common.functions.WindowConfig, org.apache.pulsar.functions.api.Context);
    Code:
       0: aload_0
       1: aload_2
       2: invokevirtual #39                 // Method newWindowLifecycleListener:(Lorg/apache/pulsar/functions/api/Context;)Lorg/apache/pulsar/functions/windowing/WindowLifecycleListener;
       5: astore_3
       6: new           #40                 // class org/apache/pulsar/functions/windowing/WindowManager
       9: dup
      10: aload_3
      11: new           #41                 // class java/util/concurrent/ConcurrentLinkedQueue
      14: dup
      15: invokespecial #42                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
      18: invokespecial #43                 // Method org/apache/pulsar/functions/windowing/WindowManager."<init>":(Lorg/apache/pulsar/functions/windowing/WindowLifecycleListener;Ljava/util/Collection;)V
      21: astore        4
      23: aload_0
      24: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      27: invokevirtual #44                 // Method org/apache/pulsar/common/functions/WindowConfig.getTimestampExtractorClassName:()Ljava/lang/String;
      30: ifnull        92
      33: aload_0
      34: aload_0
      35: aload_1
      36: invokespecial #45                 // Method getTimeStampExtractor:(Lorg/apache/pulsar/common/functions/WindowConfig;)Lorg/apache/pulsar/functions/windowing/TimestampExtractor;
      39: putfield      #46                 // Field timestampExtractor:Lorg/apache/pulsar/functions/windowing/TimestampExtractor;
      42: aload_0
      43: new           #47                 // class org/apache/pulsar/functions/windowing/WaterMarkEventGenerator
      46: dup
      47: aload         4
      49: aload_0
      50: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      53: invokevirtual #48                 // Method org/apache/pulsar/common/functions/WindowConfig.getWatermarkEmitIntervalMs:()Ljava/lang/Long;
      56: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      59: aload_0
      60: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      63: invokevirtual #50                 // Method org/apache/pulsar/common/functions/WindowConfig.getMaxLagMs:()Ljava/lang/Long;
      66: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      69: new           #51                 // class java/util/HashSet
      72: dup
      73: aload_2
      74: invokeinterface #52,  1           // InterfaceMethod org/apache/pulsar/functions/api/Context.getInputTopics:()Ljava/util/Collection;
      79: invokespecial #53                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      82: aload_2
      83: invokespecial #54                 // Method org/apache/pulsar/functions/windowing/WaterMarkEventGenerator."<init>":(Lorg/apache/pulsar/functions/windowing/WindowManager;JJLjava/util/Set;Lorg/apache/pulsar/functions/api/Context;)V
      86: putfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
      89: goto          112
      92: aload_0
      93: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      96: invokevirtual #56                 // Method org/apache/pulsar/common/functions/WindowConfig.getLateDataTopic:()Ljava/lang/String;
      99: ifnull        112
     102: new           #23                 // class java/lang/IllegalArgumentException
     105: dup
     106: ldc           #57                 // String Late data topic can be defined only when specifying a timestamp extractor class
     108: invokespecial #25                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     111: athrow
     112: aload_0
     113: aload_1
     114: invokespecial #58                 // Method getEvictionPolicy:(Lorg/apache/pulsar/common/functions/WindowConfig;)Lorg/apache/pulsar/functions/windowing/EvictionPolicy;
     117: astore        5
     119: aload_0
     120: aload_1
     121: aload         4
     123: aload         5
     125: aload_2
     126: invokespecial #59                 // Method getTriggerPolicy:(Lorg/apache/pulsar/common/functions/WindowConfig;Lorg/apache/pulsar/functions/windowing/WindowManager;Lorg/apache/pulsar/functions/windowing/EvictionPolicy;Lorg/apache/pulsar/functions/api/Context;)Lorg/apache/pulsar/functions/windowing/TriggerPolicy;
     129: astore        6
     131: aload         4
     133: aload         5
     135: invokevirtual #60                 // Method org/apache/pulsar/functions/windowing/WindowManager.setEvictionPolicy:(Lorg/apache/pulsar/functions/windowing/EvictionPolicy;)V
     138: aload         4
     140: aload         6
     142: invokevirtual #61                 // Method org/apache/pulsar/functions/windowing/WindowManager.setTriggerPolicy:(Lorg/apache/pulsar/functions/windowing/TriggerPolicy;)V
     145: aload         4
     147: areturn

  private org.apache.pulsar.functions.windowing.TimestampExtractor<I> getTimeStampExtractor(org.apache.pulsar.common.functions.WindowConfig);
    Code:
       0: aload_1
       1: invokevirtual #44                 // Method org/apache/pulsar/common/functions/WindowConfig.getTimestampExtractorClassName:()Ljava/lang/String;
       4: iconst_1
       5: invokestatic  #14                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       8: invokevirtual #15                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      11: invokestatic  #62                 // Method java/lang/Class.forName:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
      14: astore_2
      15: goto          44
      18: astore_3
      19: new           #65                 // class java/lang/RuntimeException
      22: dup
      23: ldc           #66                 // String Timestamp extractor class %s must be in class path
      25: iconst_1
      26: anewarray     #67                 // class java/lang/Object
      29: dup
      30: iconst_0
      31: aload_1
      32: invokevirtual #44                 // Method org/apache/pulsar/common/functions/WindowConfig.getTimestampExtractorClassName:()Ljava/lang/String;
      35: aastore
      36: invokestatic  #68                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      39: aload_3
      40: invokespecial #69                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      43: athrow
      44: aload_2
      45: iconst_0
      46: anewarray     #70                 // class java/lang/Class
      49: invokevirtual #71                 // Method java/lang/Class.getDeclaredConstructor:([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
      52: astore        4
      54: aload         4
      56: iconst_1
      57: invokevirtual #72                 // Method java/lang/reflect/Constructor.setAccessible:(Z)V
      60: aload         4
      62: iconst_0
      63: anewarray     #67                 // class java/lang/Object
      66: invokevirtual #73                 // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
      69: astore_3
      70: goto          129
      73: astore        4
      75: new           #65                 // class java/lang/RuntimeException
      78: dup
      79: ldc           #75                 // String User class must be concrete
      81: aload         4
      83: invokespecial #69                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      86: athrow
      87: astore        4
      89: new           #65                 // class java/lang/RuntimeException
      92: dup
      93: ldc           #77                 // String User class doesn\'t have such method
      95: aload         4
      97: invokespecial #69                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     100: athrow
     101: astore        4
     103: new           #65                 // class java/lang/RuntimeException
     106: dup
     107: ldc           #79                 // String User class must have a no-arg constructor
     109: aload         4
     111: invokespecial #69                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     114: athrow
     115: astore        4
     117: new           #65                 // class java/lang/RuntimeException
     120: dup
     121: ldc           #81                 // String User class constructor throws exception
     123: aload         4
     125: invokespecial #69                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     128: athrow
     129: ldc           #82                 // class org/apache/pulsar/functions/windowing/TimestampExtractor
     131: aload_3
     132: invokevirtual #18                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     135: invokestatic  #19                 // Method net/jodah/typetools/TypeResolver.resolveRawArguments:(Ljava/lang/reflect/Type;Ljava/lang/Class;)[Ljava/lang/Class;
     138: astore        4
     140: ldc           #83                 // class org/apache/pulsar/functions/api/Function
     142: aload_0
     143: invokevirtual #18                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     146: invokestatic  #84                 // Method net/jodah/typetools/TypeResolver.resolveRawArguments:(Ljava/lang/Class;Ljava/lang/Class;)[Ljava/lang/Class;
     149: astore        5
     151: aload         5
     153: iconst_0
     154: aaload
     155: aload         4
     157: iconst_0
     158: aaload
     159: invokevirtual #21                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     162: ifne          207
     165: new           #65                 // class java/lang/RuntimeException
     168: dup
     169: new           #85                 // class java/lang/StringBuilder
     172: dup
     173: invokespecial #86                 // Method java/lang/StringBuilder."<init>":()V
     176: ldc           #87                 // String Inconsistent types found between function input type and timestamp extractor type:  function type =
     178: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     181: aload         5
     183: iconst_0
     184: aaload
     185: invokevirtual #89                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     188: ldc           #90                 // String , timestamp extractor type =
     190: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     193: aload         4
     195: iconst_0
     196: aaload
     197: invokevirtual #89                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     200: invokevirtual #91                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     203: invokespecial #92                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
     206: athrow
     207: aload_3
     208: checkcast     #82                 // class org/apache/pulsar/functions/windowing/TimestampExtractor
     211: areturn
    Exception table:
       from    to  target type
           0    15    18   Class java/lang/ClassNotFoundException
           0    15    18   Class java/lang/NoClassDefFoundError
          44    70    73   Class java/lang/InstantiationException
          44    70    87   Class java/lang/NoSuchMethodException
          44    70   101   Class java/lang/IllegalAccessException
          44    70   115   Class java/lang/reflect/InvocationTargetException

  private org.apache.pulsar.functions.windowing.TriggerPolicy<org.apache.pulsar.functions.api.Record<I>, ?> getTriggerPolicy(org.apache.pulsar.common.functions.WindowConfig, org.apache.pulsar.functions.windowing.WindowManager<org.apache.pulsar.functions.api.Record<I>>, org.apache.pulsar.functions.windowing.EvictionPolicy<org.apache.pulsar.functions.api.Record<I>, ?>, org.apache.pulsar.functions.api.Context);
    Code:
       0: aload_1
       1: invokevirtual #93                 // Method org/apache/pulsar/common/functions/WindowConfig.getSlidingIntervalCount:()Ljava/lang/Integer;
       4: ifnull        49
       7: aload_0
       8: invokespecial #94                 // Method isEventTime:()Z
      11: ifeq          32
      14: new           #95                 // class org/apache/pulsar/functions/windowing/triggers/WatermarkCountTriggerPolicy
      17: dup
      18: aload_1
      19: invokevirtual #93                 // Method org/apache/pulsar/common/functions/WindowConfig.getSlidingIntervalCount:()Ljava/lang/Integer;
      22: invokevirtual #96                 // Method java/lang/Integer.intValue:()I
      25: aload_2
      26: aload_3
      27: aload_2
      28: invokespecial #97                 // Method org/apache/pulsar/functions/windowing/triggers/WatermarkCountTriggerPolicy."<init>":(ILorg/apache/pulsar/functions/windowing/TriggerHandler;Lorg/apache/pulsar/functions/windowing/EvictionPolicy;Lorg/apache/pulsar/functions/windowing/WindowManager;)V
      31: areturn
      32: new           #98                 // class org/apache/pulsar/functions/windowing/triggers/CountTriggerPolicy
      35: dup
      36: aload_1
      37: invokevirtual #93                 // Method org/apache/pulsar/common/functions/WindowConfig.getSlidingIntervalCount:()Ljava/lang/Integer;
      40: invokevirtual #96                 // Method java/lang/Integer.intValue:()I
      43: aload_2
      44: aload_3
      45: invokespecial #99                 // Method org/apache/pulsar/functions/windowing/triggers/CountTriggerPolicy."<init>":(ILorg/apache/pulsar/functions/windowing/TriggerHandler;Lorg/apache/pulsar/functions/windowing/EvictionPolicy;)V
      48: areturn
      49: aload_0
      50: invokespecial #94                 // Method isEventTime:()Z
      53: ifeq          74
      56: new           #100                // class org/apache/pulsar/functions/windowing/triggers/WatermarkTimeTriggerPolicy
      59: dup
      60: aload_1
      61: invokevirtual #101                // Method org/apache/pulsar/common/functions/WindowConfig.getSlidingIntervalDurationMs:()Ljava/lang/Long;
      64: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      67: aload_2
      68: aload_3
      69: aload_2
      70: invokespecial #102                // Method org/apache/pulsar/functions/windowing/triggers/WatermarkTimeTriggerPolicy."<init>":(JLorg/apache/pulsar/functions/windowing/TriggerHandler;Lorg/apache/pulsar/functions/windowing/EvictionPolicy;Lorg/apache/pulsar/functions/windowing/WindowManager;)V
      73: areturn
      74: new           #103                // class org/apache/pulsar/functions/windowing/triggers/TimeTriggerPolicy
      77: dup
      78: aload_1
      79: invokevirtual #101                // Method org/apache/pulsar/common/functions/WindowConfig.getSlidingIntervalDurationMs:()Ljava/lang/Long;
      82: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      85: aload_2
      86: aload_3
      87: aload         4
      89: invokespecial #104                // Method org/apache/pulsar/functions/windowing/triggers/TimeTriggerPolicy."<init>":(JLorg/apache/pulsar/functions/windowing/TriggerHandler;Lorg/apache/pulsar/functions/windowing/EvictionPolicy;Lorg/apache/pulsar/functions/api/Context;)V
      92: areturn

  private org.apache.pulsar.functions.windowing.EvictionPolicy<org.apache.pulsar.functions.api.Record<I>, ?> getEvictionPolicy(org.apache.pulsar.common.functions.WindowConfig);
    Code:
       0: aload_1
       1: invokevirtual #105                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthCount:()Ljava/lang/Integer;
       4: ifnull        44
       7: aload_0
       8: invokespecial #94                 // Method isEventTime:()Z
      11: ifeq          29
      14: new           #106                // class org/apache/pulsar/functions/windowing/evictors/WatermarkCountEvictionPolicy
      17: dup
      18: aload_1
      19: invokevirtual #105                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthCount:()Ljava/lang/Integer;
      22: invokevirtual #96                 // Method java/lang/Integer.intValue:()I
      25: invokespecial #107                // Method org/apache/pulsar/functions/windowing/evictors/WatermarkCountEvictionPolicy."<init>":(I)V
      28: areturn
      29: new           #108                // class org/apache/pulsar/functions/windowing/evictors/CountEvictionPolicy
      32: dup
      33: aload_1
      34: invokevirtual #105                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthCount:()Ljava/lang/Integer;
      37: invokevirtual #96                 // Method java/lang/Integer.intValue:()I
      40: invokespecial #109                // Method org/apache/pulsar/functions/windowing/evictors/CountEvictionPolicy."<init>":(I)V
      43: areturn
      44: aload_0
      45: invokespecial #94                 // Method isEventTime:()Z
      48: ifeq          73
      51: new           #110                // class org/apache/pulsar/functions/windowing/evictors/WatermarkTimeEvictionPolicy
      54: dup
      55: aload_1
      56: invokevirtual #111                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthDurationMs:()Ljava/lang/Long;
      59: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      62: aload_1
      63: invokevirtual #50                 // Method org/apache/pulsar/common/functions/WindowConfig.getMaxLagMs:()Ljava/lang/Long;
      66: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      69: invokespecial #112                // Method org/apache/pulsar/functions/windowing/evictors/WatermarkTimeEvictionPolicy."<init>":(JJ)V
      72: areturn
      73: new           #113                // class org/apache/pulsar/functions/windowing/evictors/TimeEvictionPolicy
      76: dup
      77: aload_1
      78: invokevirtual #111                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthDurationMs:()Ljava/lang/Long;
      81: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      84: invokespecial #114                // Method org/apache/pulsar/functions/windowing/evictors/TimeEvictionPolicy."<init>":(J)V
      87: areturn

  protected org.apache.pulsar.functions.windowing.WindowLifecycleListener<org.apache.pulsar.functions.windowing.Event<org.apache.pulsar.functions.api.Record<I>>> newWindowLifecycleListener(org.apache.pulsar.functions.api.Context);
    Code:
       0: new           #115                // class org/apache/pulsar/functions/windowing/WindowFunctionExecutor$1
       3: dup
       4: aload_0
       5: aload_1
       6: invokespecial #116                // Method org/apache/pulsar/functions/windowing/WindowFunctionExecutor$1."<init>":(Lorg/apache/pulsar/functions/windowing/WindowFunctionExecutor;Lorg/apache/pulsar/functions/api/Context;)V
       9: areturn

  private void processWindow(org.apache.pulsar.functions.api.Context, java.util.List<org.apache.pulsar.functions.api.Record<I>>, java.util.List<org.apache.pulsar.functions.api.Record<I>>, java.util.List<org.apache.pulsar.functions.api.Record<I>>, java.lang.Long);
    Code:
       0: aconst_null
       1: astore        6
       3: aload_0
       4: new           #117                // class org/apache/pulsar/functions/windowing/WindowImpl
       7: dup
       8: aload_2
       9: aload_3
      10: aload         4
      12: aload_0
      13: aload         5
      15: invokespecial #118                // Method getWindowStartTs:(Ljava/lang/Long;)Ljava/lang/Long;
      18: aload         5
      20: invokespecial #119                // Method org/apache/pulsar/functions/windowing/WindowImpl."<init>":(Ljava/util/List;Ljava/util/List;Ljava/util/List;Ljava/lang/Long;Ljava/lang/Long;)V
      23: new           #120                // class org/apache/pulsar/functions/windowing/WindowContextImpl
      26: dup
      27: aload_1
      28: invokespecial #121                // Method org/apache/pulsar/functions/windowing/WindowContextImpl."<init>":(Lorg/apache/pulsar/functions/api/Context;)V
      31: invokevirtual #122                // Method process:(Lorg/apache/pulsar/functions/windowing/Window;Lorg/apache/pulsar/functions/api/WindowContext;)Ljava/lang/Object;
      34: astore        6
      36: goto          51
      39: astore        7
      41: new           #65                 // class java/lang/RuntimeException
      44: dup
      45: aload         7
      47: invokespecial #124                // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
      50: athrow
      51: aload         6
      53: ifnull        77
      56: aload_1
      57: aload_1
      58: invokeinterface #125,  1          // InterfaceMethod org/apache/pulsar/functions/api/Context.getOutputTopic:()Ljava/lang/String;
      63: aload         6
      65: aload_1
      66: invokeinterface #126,  1          // InterfaceMethod org/apache/pulsar/functions/api/Context.getOutputSchemaType:()Ljava/lang/String;
      71: invokeinterface #127,  4          // InterfaceMethod org/apache/pulsar/functions/api/Context.publish:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/String;)Ljava/util/concurrent/CompletableFuture;
      76: pop
      77: return
    Exception table:
       from    to  target type
           3    36    39   Class java/lang/Exception

  private java.lang.Long getWindowStartTs(java.lang.Long);
    Code:
       0: aconst_null
       1: astore_2
       2: aload_1
       3: ifnull        35
       6: aload_0
       7: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      10: invokevirtual #111                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthDurationMs:()Ljava/lang/Long;
      13: ifnull        35
      16: aload_1
      17: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      20: aload_0
      21: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      24: invokevirtual #111                // Method org/apache/pulsar/common/functions/WindowConfig.getWindowLengthDurationMs:()Ljava/lang/Long;
      27: invokevirtual #49                 // Method java/lang/Long.longValue:()J
      30: lsub
      31: invokestatic  #128                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      34: astore_2
      35: aload_2
      36: areturn

  private void start();
    Code:
       0: aload_0
       1: getfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
       4: ifnull        24
       7: getstatic     #6                  // Field log:Lorg/slf4j/Logger;
      10: ldc           #129                // String Starting waterMarkEventGenerator
      12: invokeinterface #130,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      17: aload_0
      18: getfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
      21: invokevirtual #131                // Method org/apache/pulsar/functions/windowing/WaterMarkEventGenerator.start:()V
      24: getstatic     #6                  // Field log:Lorg/slf4j/Logger;
      27: ldc           #132                // String Starting trigger policy
      29: invokeinterface #130,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      34: aload_0
      35: getfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
      38: getfield      #133                // Field org/apache/pulsar/functions/windowing/WindowManager.triggerPolicy:Lorg/apache/pulsar/functions/windowing/TriggerPolicy;
      41: invokeinterface #134,  1          // InterfaceMethod org/apache/pulsar/functions/windowing/TriggerPolicy.start:()V
      46: return

  public void shutdown();
    Code:
       0: aload_0
       1: getfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
       4: ifnull        14
       7: aload_0
       8: getfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
      11: invokevirtual #135                // Method org/apache/pulsar/functions/windowing/WaterMarkEventGenerator.shutdown:()V
      14: aload_0
      15: getfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
      18: ifnull        28
      21: aload_0
      22: getfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
      25: invokevirtual #136                // Method org/apache/pulsar/functions/windowing/WindowManager.shutdown:()V
      28: return

  private boolean isEventTime();
    Code:
       0: aload_0
       1: getfield      #46                 // Field timestampExtractor:Lorg/apache/pulsar/functions/windowing/TimestampExtractor;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  public O process(I, org.apache.pulsar.functions.api.Context) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #11                 // Field initialized:Z
       4: ifne          12
       7: aload_0
       8: aload_2
       9: invokevirtual #137                // Method initialize:(Lorg/apache/pulsar/functions/api/Context;)V
      12: aload_2
      13: invokeinterface #138,  1          // InterfaceMethod org/apache/pulsar/functions/api/Context.getCurrentRecord:()Lorg/apache/pulsar/functions/api/Record;
      18: astore_3
      19: aload_0
      20: invokespecial #94                 // Method isEventTime:()Z
      23: ifeq          158
      26: aload_0
      27: getfield      #46                 // Field timestampExtractor:Lorg/apache/pulsar/functions/windowing/TimestampExtractor;
      30: aload_3
      31: invokeinterface #139,  1          // InterfaceMethod org/apache/pulsar/functions/api/Record.getValue:()Ljava/lang/Object;
      36: invokeinterface #140,  2          // InterfaceMethod org/apache/pulsar/functions/windowing/TimestampExtractor.extractTimestamp:(Ljava/lang/Object;)J
      41: lstore        4
      43: aload_0
      44: getfield      #55                 // Field waterMarkEventGenerator:Lorg/apache/pulsar/functions/windowing/WaterMarkEventGenerator;
      47: aload_3
      48: invokeinterface #141,  1          // InterfaceMethod org/apache/pulsar/functions/api/Record.getTopicName:()Ljava/util/Optional;
      53: invokevirtual #36                 // Method java/util/Optional.get:()Ljava/lang/Object;
      56: checkcast     #142                // class java/lang/String
      59: lload         4
      61: invokevirtual #143                // Method org/apache/pulsar/functions/windowing/WaterMarkEventGenerator.track:(Ljava/lang/String;J)Z
      64: ifeq          81
      67: aload_0
      68: getfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
      71: aload_3
      72: lload         4
      74: aload_3
      75: invokevirtual #144                // Method org/apache/pulsar/functions/windowing/WindowManager.add:(Ljava/lang/Object;JLorg/apache/pulsar/functions/api/Record;)V
      78: goto          155
      81: aload_0
      82: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      85: invokevirtual #56                 // Method org/apache/pulsar/common/functions/WindowConfig.getLateDataTopic:()Ljava/lang/String;
      88: ifnull        120
      91: aload_2
      92: aload_0
      93: getfield      #4                  // Field windowConfig:Lorg/apache/pulsar/common/functions/WindowConfig;
      96: invokevirtual #56                 // Method org/apache/pulsar/common/functions/WindowConfig.getLateDataTopic:()Ljava/lang/String;
      99: aconst_null
     100: invokeinterface #145,  3          // InterfaceMethod org/apache/pulsar/functions/api/Context.newOutputMessage:(Ljava/lang/String;Lorg/apache/pulsar/client/api/Schema;)Lorg/apache/pulsar/client/api/TypedMessageBuilder;
     105: aload_1
     106: invokeinterface #146,  2          // InterfaceMethod org/apache/pulsar/client/api/TypedMessageBuilder.value:(Ljava/lang/Object;)Lorg/apache/pulsar/client/api/TypedMessageBuilder;
     111: invokeinterface #147,  1          // InterfaceMethod org/apache/pulsar/client/api/TypedMessageBuilder.sendAsync:()Ljava/util/concurrent/CompletableFuture;
     116: pop
     117: goto          149
     120: getstatic     #6                  // Field log:Lorg/slf4j/Logger;
     123: ldc           #148                // String Received a late tuple %s with ts %d. This will not be processed.
     125: iconst_2
     126: anewarray     #67                 // class java/lang/Object
     129: dup
     130: iconst_0
     131: aload_1
     132: aastore
     133: dup
     134: iconst_1
     135: lload         4
     137: invokestatic  #128                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     140: aastore
     141: invokestatic  #68                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     144: invokeinterface #149,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     149: aload_3
     150: invokeinterface #150,  1          // InterfaceMethod org/apache/pulsar/functions/api/Record.ack:()V
     155: goto          170
     158: aload_0
     159: getfield      #10                 // Field windowManager:Lorg/apache/pulsar/functions/windowing/WindowManager;
     162: aload_3
     163: invokestatic  #151                // Method java/lang/System.currentTimeMillis:()J
     166: aload_3
     167: invokevirtual #144                // Method org/apache/pulsar/functions/windowing/WindowManager.add:(Ljava/lang/Object;JLorg/apache/pulsar/functions/api/Record;)V
     170: aconst_null
     171: areturn

  public O process(org.apache.pulsar.functions.windowing.Window<org.apache.pulsar.functions.api.Record<I>>, org.apache.pulsar.functions.api.WindowContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #22                 // Field bareWindowFunction:Ljava/util/function/Function;
       4: ifnull        51
       7: aload_1
       8: invokeinterface #152,  1          // InterfaceMethod org/apache/pulsar/functions/windowing/Window.get:()Ljava/util/List;
      13: invokeinterface #153,  1          // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      18: invokedynamic #154,  0            // InvokeDynamic #0:apply:()Ljava/util/function/Function;
      23: invokeinterface #155,  2          // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      28: invokestatic  #156                // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
      31: invokeinterface #157,  2          // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      36: checkcast     #20                 // class java/util/Collection
      39: astore_3
      40: aload_0
      41: getfield      #22                 // Field bareWindowFunction:Ljava/util/function/Function;
      44: aload_3
      45: invokeinterface #158,  2          // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      50: areturn
      51: aload_0
      52: getfield      #27                 // Field windowFunction:Lorg/apache/pulsar/functions/api/WindowFunction;
      55: aload_1
      56: invokeinterface #152,  1          // InterfaceMethod org/apache/pulsar/functions/windowing/Window.get:()Ljava/util/List;
      61: aload_2
      62: invokeinterface #159,  3          // InterfaceMethod org/apache/pulsar/functions/api/WindowFunction.process:(Ljava/util/Collection;Lorg/apache/pulsar/functions/api/WindowContext;)Ljava/lang/Object;
      67: areturn

  static void access$000(org.apache.pulsar.functions.windowing.WindowFunctionExecutor, org.apache.pulsar.functions.api.Context, java.util.List, java.util.List, java.util.List, java.lang.Long);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: aload         5
       8: invokespecial #1                  // Method processWindow:(Lorg/apache/pulsar/functions/api/Context;Ljava/util/List;Ljava/util/List;Ljava/util/List;Ljava/lang/Long;)V
      11: return

  static {};
    Code:
       0: ldc           #160                // class org/apache/pulsar/functions/windowing/WindowFunctionExecutor
       2: invokestatic  #161                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #6                  // Field log:Lorg/slf4j/Logger;
       8: return
}

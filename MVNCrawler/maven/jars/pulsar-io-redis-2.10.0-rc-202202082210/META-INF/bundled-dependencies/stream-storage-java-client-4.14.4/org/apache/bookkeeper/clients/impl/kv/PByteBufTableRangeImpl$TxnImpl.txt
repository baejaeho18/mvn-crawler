Compiled from "PByteBufTableRangeImpl.java"
class org.apache.bookkeeper.clients.impl.kv.PByteBufTableRangeImpl$TxnImpl implements org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> {
  private final io.netty.buffer.ByteBuf pKey;

  private final org.apache.bookkeeper.stream.proto.kv.rpc.TxnRequest$Builder txnBuilder;

  private final java.util.List<java.lang.AutoCloseable> resourcesToRelease;

  final org.apache.bookkeeper.clients.impl.kv.PByteBufTableRangeImpl this$0;

  org.apache.bookkeeper.clients.impl.kv.PByteBufTableRangeImpl$TxnImpl(org.apache.bookkeeper.clients.impl.kv.PByteBufTableRangeImpl, io.netty.buffer.ByteBuf);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: invokevirtual #3                  // Method io/netty/buffer/ByteBuf.retain:()Lio/netty/buffer/ByteBuf;
      14: putfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
      17: aload_0
      18: invokestatic  #5                  // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest.newBuilder:()Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      21: putfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload_0
      25: invokestatic  #7                  // Method com/google/common/collect/Lists.newArrayList:()Ljava/util/ArrayList;
      28: putfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      31: return

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> If(org.apache.bookkeeper.api.kv.op.CompareOp...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #9                  // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoCompare:(Lorg/apache/bookkeeper/api/kv/op/CompareOp;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/Compare$Builder;
      29: invokevirtual #10                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addCompare:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/Compare$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> Then(org.apache.bookkeeper.api.kv.op.Op...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #12                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoRequest:(Lorg/apache/bookkeeper/api/kv/op/Op;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;
      29: invokevirtual #13                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addSuccess:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> Else(org.apache.bookkeeper.api.kv.op.Op...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #12                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoRequest:(Lorg/apache/bookkeeper/api/kv/op/Op;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;
      29: invokevirtual #14                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addFailure:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public java.util.concurrent.CompletableFuture<org.apache.bookkeeper.api.kv.result.TxnResult<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf>> commit();
    Code:
       0: aload_0
       1: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
       4: aload_0
       5: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
       8: aload_0
       9: getfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
      12: invokestatic  #15                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$000:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;Lio/netty/buffer/ByteBuf;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RoutingHeader$Builder;
      15: invokevirtual #16                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.setHeader:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RoutingHeader$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      18: invokevirtual #17                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.build:()Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest;
      21: aload_0
      22: invokedynamic #18,  0             // InvokeDynamic #0:apply:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl$TxnImpl;)Ljava/util/function/Function;
      27: aload_0
      28: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
      31: invokestatic  #19                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$100:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;)Lorg/apache/bookkeeper/clients/impl/container/StorageContainerChannel;
      34: aload_0
      35: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
      38: invokestatic  #20                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$200:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;)Ljava/util/concurrent/ScheduledExecutorService;
      41: aload_0
      42: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
      45: invokestatic  #21                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$300:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;)Lorg/apache/bookkeeper/common/util/Backoff$Policy;
      48: invokestatic  #22                 // Method org/apache/bookkeeper/clients/impl/kv/TxnRequestProcessor.of:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest;Ljava/util/function/Function;Lorg/apache/bookkeeper/clients/impl/container/StorageContainerChannel;Ljava/util/concurrent/ScheduledExecutorService;Lorg/apache/bookkeeper/common/util/Backoff$Policy;)Lorg/apache/bookkeeper/clients/impl/kv/TxnRequestProcessor;
      51: invokevirtual #23                 // Method org/apache/bookkeeper/clients/impl/kv/TxnRequestProcessor.process:()Ljava/util/concurrent/CompletableFuture;
      54: aload_0
      55: invokedynamic #24,  0             // InvokeDynamic #1:accept:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl$TxnImpl;)Ljava/util/function/BiConsumer;
      60: invokevirtual #25                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      63: areturn

  private void closeResource(java.lang.AutoCloseable);
    Code:
       0: aload_1
       1: invokeinterface #26,  1           // InterfaceMethod java/lang/AutoCloseable.close:()V
       6: goto          22
       9: astore_2
      10: invokestatic  #28                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$400:()Lorg/slf4j/Logger;
      13: ldc           #29                 // String Fail to close resource {}
      15: aload_1
      16: aload_2
      17: invokeinterface #30,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      22: return
    Exception table:
       from    to  target type
           0     6     9   Class java/lang/Exception

  private void lambda$commit$1(org.apache.bookkeeper.api.kv.result.TxnResult, java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
       4: invokevirtual #31                 // Method io/netty/buffer/ByteBuf.release:()Z
       7: pop
       8: aload_0
       9: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      12: invokeinterface #32,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      17: astore_3
      18: aload_3
      19: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      24: ifeq          47
      27: aload_3
      28: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #35                 // class java/lang/AutoCloseable
      36: astore        4
      38: aload_0
      39: aload         4
      41: invokespecial #36                 // Method closeResource:(Ljava/lang/AutoCloseable;)V
      44: goto          18
      47: return

  private org.apache.bookkeeper.api.kv.result.TxnResult lambda$commit$0(org.apache.bookkeeper.stream.proto.kv.rpc.TxnResponse);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
       5: invokestatic  #37                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$500:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;)Lorg/apache/bookkeeper/api/kv/impl/result/ResultFactory;
       8: aload_0
       9: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;
      12: invokestatic  #38                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl.access$600:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufTableRangeImpl;)Lorg/apache/bookkeeper/api/kv/impl/result/KeyValueFactory;
      15: invokestatic  #39                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.newKvTxnResult:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnResponse;Lorg/apache/bookkeeper/api/kv/impl/result/ResultFactory;Lorg/apache/bookkeeper/api/kv/impl/result/KeyValueFactory;)Lorg/apache/bookkeeper/api/kv/result/TxnResult;
      18: areturn
}

Compiled from "PByteBufSimpleTableImpl.java"
class org.apache.bookkeeper.clients.impl.kv.PByteBufSimpleTableImpl$TxnImpl implements org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> {
  private final io.netty.buffer.ByteBuf pKey;

  private final org.apache.bookkeeper.stream.proto.kv.rpc.TxnRequest$Builder txnBuilder;

  private final java.util.List<java.lang.AutoCloseable> resourcesToRelease;

  final org.apache.bookkeeper.clients.impl.kv.PByteBufSimpleTableImpl this$0;

  org.apache.bookkeeper.clients.impl.kv.PByteBufSimpleTableImpl$TxnImpl(org.apache.bookkeeper.clients.impl.kv.PByteBufSimpleTableImpl, io.netty.buffer.ByteBuf);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: invokevirtual #3                  // Method io/netty/buffer/ByteBuf.retain:()Lio/netty/buffer/ByteBuf;
      14: putfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
      17: aload_0
      18: invokestatic  #5                  // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest.newBuilder:()Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      21: putfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload_0
      25: invokestatic  #7                  // Method com/google/common/collect/Lists.newArrayList:()Ljava/util/ArrayList;
      28: putfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      31: return

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> If(org.apache.bookkeeper.api.kv.op.CompareOp...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #9                  // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoCompare:(Lorg/apache/bookkeeper/api/kv/op/CompareOp;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/Compare$Builder;
      29: invokevirtual #10                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addCompare:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/Compare$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> Then(org.apache.bookkeeper.api.kv.op.Op...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #12                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoRequest:(Lorg/apache/bookkeeper/api/kv/op/Op;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;
      29: invokevirtual #13                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addSuccess:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public org.apache.bookkeeper.api.kv.Txn<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf> Else(org.apache.bookkeeper.api.kv.op.Op...);
    Code:
       0: aload_1
       1: astore_2
       2: aload_2
       3: arraylength
       4: istore_3
       5: iconst_0
       6: istore        4
       8: iload         4
      10: iload_3
      11: if_icmpge     51
      14: aload_2
      15: iload         4
      17: aaload
      18: astore        5
      20: aload_0
      21: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      24: aload         5
      26: invokestatic  #12                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.toProtoRequest:(Lorg/apache/bookkeeper/api/kv/op/Op;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;
      29: invokevirtual #14                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.addFailure:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RequestOp$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      32: pop
      33: aload_0
      34: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      37: aload         5
      39: invokeinterface #11,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      44: pop
      45: iinc          4, 1
      48: goto          8
      51: aload_0
      52: areturn

  public java.util.concurrent.CompletableFuture<org.apache.bookkeeper.api.kv.result.TxnResult<io.netty.buffer.ByteBuf, io.netty.buffer.ByteBuf>> commit();
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
       4: invokestatic  #15                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$200:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;)Lorg/apache/bookkeeper/clients/utils/RetryUtils;
       7: aload_0
       8: invokedynamic #16,  0             // InvokeDynamic #0:get:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl$TxnImpl;)Ljava/util/function/Supplier;
      13: invokevirtual #17                 // Method org/apache/bookkeeper/clients/utils/RetryUtils.execute:(Ljava/util/function/Supplier;)Ljava/util/concurrent/CompletableFuture;
      16: aload_0
      17: invokedynamic #18,  0             // InvokeDynamic #1:apply:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl$TxnImpl;)Ljava/util/function/Function;
      22: invokevirtual #19                 // Method java/util/concurrent/CompletableFuture.thenApply:(Ljava/util/function/Function;)Ljava/util/concurrent/CompletableFuture;
      25: aload_0
      26: invokedynamic #20,  0             // InvokeDynamic #2:accept:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl$TxnImpl;)Ljava/util/function/BiConsumer;
      31: invokevirtual #21                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      34: areturn

  private void closeResource(java.lang.AutoCloseable);
    Code:
       0: aload_1
       1: invokeinterface #22,  1           // InterfaceMethod java/lang/AutoCloseable.close:()V
       6: goto          22
       9: astore_2
      10: invokestatic  #24                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$300:()Lorg/slf4j/Logger;
      13: ldc           #25                 // String Fail to close resource {}
      15: aload_1
      16: aload_2
      17: invokeinterface #26,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      22: return
    Exception table:
       from    to  target type
           0     6     9   Class java/lang/Exception

  private void lambda$commit$2(org.apache.bookkeeper.api.kv.result.TxnResult, java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
       4: invokevirtual #27                 // Method io/netty/buffer/ByteBuf.release:()Z
       7: pop
       8: aload_0
       9: getfield      #8                  // Field resourcesToRelease:Ljava/util/List;
      12: invokeinterface #28,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      17: astore_3
      18: aload_3
      19: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      24: ifeq          47
      27: aload_3
      28: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #31                 // class java/lang/AutoCloseable
      36: astore        4
      38: aload_0
      39: aload         4
      41: invokespecial #32                 // Method closeResource:(Ljava/lang/AutoCloseable;)V
      44: goto          18
      47: return

  private org.apache.bookkeeper.api.kv.result.TxnResult lambda$commit$1(org.apache.bookkeeper.stream.proto.kv.rpc.TxnResponse);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
       5: invokestatic  #33                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$400:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;)Lorg/apache/bookkeeper/api/kv/impl/result/ResultFactory;
       8: aload_0
       9: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
      12: invokestatic  #34                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$500:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;)Lorg/apache/bookkeeper/api/kv/impl/result/KeyValueFactory;
      15: invokestatic  #35                 // Method org/apache/bookkeeper/clients/impl/kv/KvUtils.newKvTxnResult:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnResponse;Lorg/apache/bookkeeper/api/kv/impl/result/ResultFactory;Lorg/apache/bookkeeper/api/kv/impl/result/KeyValueFactory;)Lorg/apache/bookkeeper/api/kv/result/TxnResult;
      18: areturn

  private java.util.concurrent.CompletableFuture lambda$commit$0();
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
       4: aload_0
       5: getfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
       8: invokestatic  #36                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$600:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;Lio/netty/buffer/ByteBuf;)Lio/grpc/Channel;
      11: invokestatic  #37                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TableServiceGrpc.getTxnMethod:()Lio/grpc/MethodDescriptor;
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
      18: invokevirtual #38                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.getCallOptions:()Lio/grpc/CallOptions;
      21: invokevirtual #39                 // Method io/grpc/Channel.newCall:(Lio/grpc/MethodDescriptor;Lio/grpc/CallOptions;)Lio/grpc/ClientCall;
      24: aload_0
      25: getfield      #6                  // Field txnBuilder:Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      28: aload_0
      29: getfield      #1                  // Field this$0:Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;
      32: aload_0
      33: getfield      #4                  // Field pKey:Lio/netty/buffer/ByteBuf;
      36: invokestatic  #40                 // Method org/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl.access$700:(Lorg/apache/bookkeeper/clients/impl/kv/PByteBufSimpleTableImpl;Lio/netty/buffer/ByteBuf;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/RoutingHeader$Builder;
      39: invokevirtual #41                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.setHeader:(Lorg/apache/bookkeeper/stream/proto/kv/rpc/RoutingHeader$Builder;)Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder;
      42: invokevirtual #42                 // Method org/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest$Builder.build:()Lorg/apache/bookkeeper/stream/proto/kv/rpc/TxnRequest;
      45: invokestatic  #43                 // Method io/grpc/stub/ClientCalls.futureUnaryCall:(Lio/grpc/ClientCall;Ljava/lang/Object;)Lcom/google/common/util/concurrent/ListenableFuture;
      48: invokestatic  #44                 // Method org/apache/bookkeeper/common/util/ListenableFutures.fromListenableFuture:(Lcom/google/common/util/concurrent/ListenableFuture;)Ljava/util/concurrent/CompletableFuture;
      51: areturn
}

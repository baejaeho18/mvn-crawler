Compiled from "AbstractMetadataDriver.java"
public abstract class org.apache.pulsar.metadata.bookkeeper.AbstractMetadataDriver implements java.io.Closeable {
  protected static final java.lang.String METADATA_STORE_SCHEME;

  public static final java.lang.String METADATA_STORE_INSTANCE;

  protected org.apache.pulsar.metadata.api.extended.MetadataStoreExtended store;

  private boolean storeInstanceIsOwned;

  protected org.apache.bookkeeper.discover.RegistrationClient registrationClient;

  protected org.apache.bookkeeper.discover.RegistrationManager registrationManager;

  protected org.apache.bookkeeper.meta.LedgerManagerFactory ledgerManagerFactory;

  protected org.apache.bookkeeper.meta.LayoutManager layoutManager;

  protected org.apache.bookkeeper.conf.AbstractConfiguration conf;

  protected java.lang.String ledgersRootPath;

  public org.apache.pulsar.metadata.bookkeeper.AbstractMetadataDriver();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  protected void initialize(org.apache.bookkeeper.conf.AbstractConfiguration) throws org.apache.bookkeeper.meta.exceptions.MetadataException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
       5: aload_0
       6: aload_0
       7: invokespecial #3                  // Method resolveLedgersRootPath:()Ljava/lang/String;
      10: putfield      #4                  // Field ledgersRootPath:Ljava/lang/String;
      13: aload_0
      14: invokevirtual #5                  // Method createMetadataStore:()V
      17: aload_0
      18: new           #6                  // class org/apache/pulsar/metadata/bookkeeper/PulsarRegistrationClient
      21: dup
      22: aload_0
      23: getfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      26: aload_0
      27: getfield      #4                  // Field ledgersRootPath:Ljava/lang/String;
      30: invokespecial #8                  // Method org/apache/pulsar/metadata/bookkeeper/PulsarRegistrationClient."<init>":(Lorg/apache/pulsar/metadata/api/MetadataStore;Ljava/lang/String;)V
      33: putfield      #9                  // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
      36: aload_0
      37: new           #10                 // class org/apache/pulsar/metadata/bookkeeper/PulsarRegistrationManager
      40: dup
      41: aload_0
      42: getfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      45: aload_0
      46: getfield      #4                  // Field ledgersRootPath:Ljava/lang/String;
      49: aload_1
      50: invokespecial #11                 // Method org/apache/pulsar/metadata/bookkeeper/PulsarRegistrationManager."<init>":(Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;Ljava/lang/String;Lorg/apache/bookkeeper/conf/AbstractConfiguration;)V
      53: putfield      #12                 // Field registrationManager:Lorg/apache/bookkeeper/discover/RegistrationManager;
      56: aload_0
      57: new           #13                 // class org/apache/pulsar/metadata/bookkeeper/PulsarLayoutManager
      60: dup
      61: aload_0
      62: getfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      65: aload_0
      66: getfield      #4                  // Field ledgersRootPath:Ljava/lang/String;
      69: invokespecial #14                 // Method org/apache/pulsar/metadata/bookkeeper/PulsarLayoutManager."<init>":(Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;Ljava/lang/String;)V
      72: putfield      #15                 // Field layoutManager:Lorg/apache/bookkeeper/meta/LayoutManager;
      75: aload_0
      76: new           #16                 // class org/apache/pulsar/metadata/bookkeeper/PulsarLedgerManagerFactory
      79: dup
      80: invokespecial #17                 // Method org/apache/pulsar/metadata/bookkeeper/PulsarLedgerManagerFactory."<init>":()V
      83: putfield      #18                 // Field ledgerManagerFactory:Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
      86: aload_0
      87: getfield      #18                 // Field ledgerManagerFactory:Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
      90: aload_1
      91: aload_0
      92: getfield      #15                 // Field layoutManager:Lorg/apache/bookkeeper/meta/LayoutManager;
      95: iconst_1
      96: invokeinterface #20,  4           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManagerFactory.initialize:(Lorg/apache/bookkeeper/conf/AbstractConfiguration;Lorg/apache/bookkeeper/meta/LayoutManager;I)Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
     101: pop
     102: goto          118
     105: astore_2
     106: new           #22                 // class org/apache/bookkeeper/meta/exceptions/MetadataException
     109: dup
     110: getstatic     #23                 // Field org/apache/bookkeeper/meta/exceptions/Code.METADATA_SERVICE_ERROR:Lorg/apache/bookkeeper/meta/exceptions/Code;
     113: aload_2
     114: invokespecial #24                 // Method org/apache/bookkeeper/meta/exceptions/MetadataException."<init>":(Lorg/apache/bookkeeper/meta/exceptions/Code;Ljava/lang/Throwable;)V
     117: athrow
     118: return
    Exception table:
       from    to  target type
          86   102   105   Class java/io/IOException

  public void close();
    Code:
       0: aload_0
       1: getfield      #9                  // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
       4: ifnull        16
       7: aload_0
       8: getfield      #9                  // Field registrationClient:Lorg/apache/bookkeeper/discover/RegistrationClient;
      11: invokeinterface #25,  1           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationClient.close:()V
      16: aload_0
      17: getfield      #12                 // Field registrationManager:Lorg/apache/bookkeeper/discover/RegistrationManager;
      20: ifnull        32
      23: aload_0
      24: getfield      #12                 // Field registrationManager:Lorg/apache/bookkeeper/discover/RegistrationManager;
      27: invokeinterface #26,  1           // InterfaceMethod org/apache/bookkeeper/discover/RegistrationManager.close:()V
      32: aload_0
      33: getfield      #18                 // Field ledgerManagerFactory:Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
      36: ifnull        48
      39: aload_0
      40: getfield      #18                 // Field ledgerManagerFactory:Lorg/apache/bookkeeper/meta/LedgerManagerFactory;
      43: invokeinterface #27,  1           // InterfaceMethod org/apache/bookkeeper/meta/LedgerManagerFactory.close:()V
      48: aload_0
      49: getfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      52: ifnull        71
      55: aload_0
      56: getfield      #28                 // Field storeInstanceIsOwned:Z
      59: ifeq          71
      62: aload_0
      63: getfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      66: invokeinterface #29,  1           // InterfaceMethod org/apache/pulsar/metadata/api/extended/MetadataStoreExtended.close:()V
      71: goto          77
      74: astore_1
      75: aload_1
      76: athrow
      77: return
    Exception table:
       from    to  target type
           0    71    74   Class java/lang/Throwable

  void createMetadataStore() throws org.apache.bookkeeper.meta.exceptions.MetadataException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
       4: ldc           #33                 // String metadata-store-instance
       6: invokevirtual #34                 // Method org/apache/bookkeeper/conf/AbstractConfiguration.getProperty:(Ljava/lang/String;)Ljava/lang/Object;
       9: astore_1
      10: aload_1
      11: ifnull        30
      14: aload_0
      15: aload_1
      16: checkcast     #35                 // class org/apache/pulsar/metadata/api/extended/MetadataStoreExtended
      19: putfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      22: aload_0
      23: iconst_0
      24: putfield      #28                 // Field storeInstanceIsOwned:Z
      27: goto          106
      30: aload_0
      31: getfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
      34: invokevirtual #36                 // Method org/apache/bookkeeper/conf/AbstractConfiguration.getMetadataServiceUri:()Ljava/lang/String;
      37: ldc           #37                 // String metadata-store:
      39: ldc           #38                 // String
      41: invokevirtual #39                 // Method java/lang/String.replaceFirst:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      44: astore_2
      45: goto          61
      48: astore_3
      49: new           #22                 // class org/apache/bookkeeper/meta/exceptions/MetadataException
      52: dup
      53: getstatic     #23                 // Field org/apache/bookkeeper/meta/exceptions/Code.METADATA_SERVICE_ERROR:Lorg/apache/bookkeeper/meta/exceptions/Code;
      56: aload_3
      57: invokespecial #24                 // Method org/apache/bookkeeper/meta/exceptions/MetadataException."<init>":(Lorg/apache/bookkeeper/meta/exceptions/Code;Ljava/lang/Throwable;)V
      60: athrow
      61: aload_0
      62: aload_2
      63: invokestatic  #41                 // Method org/apache/pulsar/metadata/api/MetadataStoreConfig.builder:()Lorg/apache/pulsar/metadata/api/MetadataStoreConfig$MetadataStoreConfigBuilder;
      66: aload_0
      67: getfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
      70: invokevirtual #42                 // Method org/apache/bookkeeper/conf/AbstractConfiguration.getZkTimeout:()I
      73: invokevirtual #43                 // Method org/apache/pulsar/metadata/api/MetadataStoreConfig$MetadataStoreConfigBuilder.sessionTimeoutMillis:(I)Lorg/apache/pulsar/metadata/api/MetadataStoreConfig$MetadataStoreConfigBuilder;
      76: invokevirtual #44                 // Method org/apache/pulsar/metadata/api/MetadataStoreConfig$MetadataStoreConfigBuilder.build:()Lorg/apache/pulsar/metadata/api/MetadataStoreConfig;
      79: invokestatic  #45                 // InterfaceMethod org/apache/pulsar/metadata/api/extended/MetadataStoreExtended.create:(Ljava/lang/String;Lorg/apache/pulsar/metadata/api/MetadataStoreConfig;)Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      82: putfield      #7                  // Field store:Lorg/apache/pulsar/metadata/api/extended/MetadataStoreExtended;
      85: aload_0
      86: iconst_1
      87: putfield      #28                 // Field storeInstanceIsOwned:Z
      90: goto          106
      93: astore_3
      94: new           #22                 // class org/apache/bookkeeper/meta/exceptions/MetadataException
      97: dup
      98: getstatic     #23                 // Field org/apache/bookkeeper/meta/exceptions/Code.METADATA_SERVICE_ERROR:Lorg/apache/bookkeeper/meta/exceptions/Code;
     101: aload_3
     102: invokespecial #24                 // Method org/apache/bookkeeper/meta/exceptions/MetadataException."<init>":(Lorg/apache/bookkeeper/meta/exceptions/Code;Ljava/lang/Throwable;)V
     105: athrow
     106: return
    Exception table:
       from    to  target type
          30    45    48   Class java/lang/Exception
          61    90    93   Class org/apache/pulsar/metadata/api/MetadataStoreException

  public java.lang.String getScheme();
    Code:
       0: ldc           #47                 // String metadata-store
       2: areturn

  private java.lang.String resolveLedgersRootPath();
    Code:
       0: aload_0
       1: getfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
       4: invokevirtual #48                 // Method org/apache/bookkeeper/conf/AbstractConfiguration.getMetadataServiceUriUnchecked:()Ljava/lang/String;
       7: astore_1
       8: aload_1
       9: ifnonnull     20
      12: aload_0
      13: getfield      #2                  // Field conf:Lorg/apache/bookkeeper/conf/AbstractConfiguration;
      16: invokevirtual #49                 // Method org/apache/bookkeeper/conf/AbstractConfiguration.getZkLedgersRootPath:()Ljava/lang/String;
      19: areturn
      20: aload_1
      21: invokestatic  #50                 // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
      24: astore_2
      25: aload_2
      26: invokevirtual #51                 // Method java/net/URI.getPath:()Ljava/lang/String;
      29: astore_3
      30: aload_3
      31: ifnonnull     39
      34: ldc           #53                 // String /ledgers
      36: goto          40
      39: aload_3
      40: areturn
}

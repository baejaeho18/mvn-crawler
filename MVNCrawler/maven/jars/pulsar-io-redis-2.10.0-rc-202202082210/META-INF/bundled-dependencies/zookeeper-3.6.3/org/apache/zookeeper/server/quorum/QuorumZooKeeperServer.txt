Compiled from "QuorumZooKeeperServer.java"
public abstract class org.apache.zookeeper.server.quorum.QuorumZooKeeperServer extends org.apache.zookeeper.server.ZooKeeperServer {
  public final org.apache.zookeeper.server.quorum.QuorumPeer self;

  protected org.apache.zookeeper.server.quorum.UpgradeableSessionTracker upgradeableSessionTracker;

  protected org.apache.zookeeper.server.quorum.QuorumZooKeeperServer(org.apache.zookeeper.server.persistence.FileTxnSnapLog, int, int, int, int, org.apache.zookeeper.server.ZKDatabase, org.apache.zookeeper.server.quorum.QuorumPeer);
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: iload_3
       4: iload         4
       6: iload         5
       8: aload         6
      10: aload         7
      12: invokevirtual #1                  // Method org/apache/zookeeper/server/quorum/QuorumPeer.getInitialConfig:()Ljava/lang/String;
      15: aload         7
      17: invokevirtual #2                  // Method org/apache/zookeeper/server/quorum/QuorumPeer.isReconfigEnabled:()Z
      20: invokespecial #3                  // Method org/apache/zookeeper/server/ZooKeeperServer."<init>":(Lorg/apache/zookeeper/server/persistence/FileTxnSnapLog;IIIILorg/apache/zookeeper/server/ZKDatabase;Ljava/lang/String;Z)V
      23: aload_0
      24: aload         7
      26: putfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      29: return

  protected void startSessionTracker();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #5                  // Field sessionTracker:Lorg/apache/zookeeper/server/SessionTracker;
       5: checkcast     #6                  // class org/apache/zookeeper/server/quorum/UpgradeableSessionTracker
       8: putfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      11: aload_0
      12: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      15: invokevirtual #8                  // Method org/apache/zookeeper/server/quorum/UpgradeableSessionTracker.start:()V
      18: return

  public org.apache.zookeeper.server.Request checkUpgradeSession(org.apache.zookeeper.server.Request) throws java.io.IOException, org.apache.zookeeper.KeeperException;
    Code:
       0: aload_1
       1: getfield      #9                  // Field org/apache/zookeeper/server/Request.type:I
       4: iconst_1
       5: if_icmpeq     26
       8: aload_1
       9: getfield      #9                  // Field org/apache/zookeeper/server/Request.type:I
      12: bipush        15
      14: if_icmpeq     26
      17: aload_1
      18: getfield      #9                  // Field org/apache/zookeeper/server/Request.type:I
      21: bipush        14
      23: if_icmpne     40
      26: aload_0
      27: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      30: aload_1
      31: getfield      #11                 // Field org/apache/zookeeper/server/Request.sessionId:J
      34: invokevirtual #12                 // Method org/apache/zookeeper/server/quorum/UpgradeableSessionTracker.isLocalSession:(J)Z
      37: ifne          42
      40: aconst_null
      41: areturn
      42: bipush        14
      44: aload_1
      45: getfield      #9                  // Field org/apache/zookeeper/server/Request.type:I
      48: if_icmpne     177
      51: new           #13                 // class org/apache/zookeeper/MultiOperationRecord
      54: dup
      55: invokespecial #14                 // Method org/apache/zookeeper/MultiOperationRecord."<init>":()V
      58: astore_2
      59: aload_1
      60: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      63: invokevirtual #16                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      66: pop
      67: aload_1
      68: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      71: aload_2
      72: invokestatic  #17                 // Method org/apache/zookeeper/server/ByteBufferInputStream.byteBuffer2Record:(Ljava/nio/ByteBuffer;Lorg/apache/jute/Record;)V
      75: aload_1
      76: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      79: invokevirtual #16                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      82: pop
      83: iconst_0
      84: istore_3
      85: aload_2
      86: invokevirtual #18                 // Method org/apache/zookeeper/MultiOperationRecord.iterator:()Ljava/util/Iterator;
      89: astore        4
      91: aload         4
      93: invokeinterface #19,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      98: ifeq          168
     101: aload         4
     103: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     108: checkcast     #21                 // class org/apache/zookeeper/Op
     111: astore        5
     113: aload         5
     115: invokevirtual #22                 // Method org/apache/zookeeper/Op.getType:()I
     118: iconst_1
     119: if_icmpeq     132
     122: aload         5
     124: invokevirtual #22                 // Method org/apache/zookeeper/Op.getType:()I
     127: bipush        15
     129: if_icmpne     165
     132: aload         5
     134: invokevirtual #23                 // Method org/apache/zookeeper/Op.toRequestRecord:()Lorg/apache/jute/Record;
     137: checkcast     #24                 // class org/apache/zookeeper/proto/CreateRequest
     140: astore        6
     142: aload         6
     144: invokevirtual #25                 // Method org/apache/zookeeper/proto/CreateRequest.getFlags:()I
     147: invokestatic  #26                 // Method org/apache/zookeeper/CreateMode.fromFlag:(I)Lorg/apache/zookeeper/CreateMode;
     150: astore        7
     152: aload         7
     154: invokevirtual #27                 // Method org/apache/zookeeper/CreateMode.isEphemeral:()Z
     157: ifeq          165
     160: iconst_1
     161: istore_3
     162: goto          168
     165: goto          91
     168: iload_3
     169: ifne          174
     172: aconst_null
     173: areturn
     174: goto          226
     177: new           #24                 // class org/apache/zookeeper/proto/CreateRequest
     180: dup
     181: invokespecial #28                 // Method org/apache/zookeeper/proto/CreateRequest."<init>":()V
     184: astore_2
     185: aload_1
     186: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
     189: invokevirtual #16                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
     192: pop
     193: aload_1
     194: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
     197: aload_2
     198: invokestatic  #17                 // Method org/apache/zookeeper/server/ByteBufferInputStream.byteBuffer2Record:(Ljava/nio/ByteBuffer;Lorg/apache/jute/Record;)V
     201: aload_1
     202: getfield      #15                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
     205: invokevirtual #16                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
     208: pop
     209: aload_2
     210: invokevirtual #25                 // Method org/apache/zookeeper/proto/CreateRequest.getFlags:()I
     213: invokestatic  #26                 // Method org/apache/zookeeper/CreateMode.fromFlag:(I)Lorg/apache/zookeeper/CreateMode;
     216: astore_3
     217: aload_3
     218: invokevirtual #27                 // Method org/apache/zookeeper/CreateMode.isEphemeral:()Z
     221: ifne          226
     224: aconst_null
     225: areturn
     226: aload_0
     227: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     230: invokevirtual #29                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.isLocalSessionsUpgradingEnabled:()Z
     233: ifne          244
     236: new           #30                 // class org/apache/zookeeper/KeeperException$EphemeralOnLocalSessionException
     239: dup
     240: invokespecial #31                 // Method org/apache/zookeeper/KeeperException$EphemeralOnLocalSessionException."<init>":()V
     243: athrow
     244: aload_0
     245: aload_1
     246: getfield      #11                 // Field org/apache/zookeeper/server/Request.sessionId:J
     249: invokespecial #32                 // Method makeUpgradeRequest:(J)Lorg/apache/zookeeper/server/Request;
     252: areturn

  private org.apache.zookeeper.server.Request makeUpgradeRequest(long);
    Code:
       0: aload_0
       1: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
       4: dup
       5: astore_3
       6: monitorenter
       7: aload_0
       8: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      11: lload_1
      12: invokevirtual #12                 // Method org/apache/zookeeper/server/quorum/UpgradeableSessionTracker.isLocalSession:(J)Z
      15: ifeq          60
      18: aload_0
      19: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      22: lload_1
      23: invokevirtual #33                 // Method org/apache/zookeeper/server/quorum/UpgradeableSessionTracker.upgradeSession:(J)I
      26: istore        4
      28: iconst_4
      29: invokestatic  #34                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      32: astore        5
      34: aload         5
      36: iload         4
      38: invokevirtual #35                 // Method java/nio/ByteBuffer.putInt:(I)Ljava/nio/ByteBuffer;
      41: pop
      42: new           #36                 // class org/apache/zookeeper/server/Request
      45: dup
      46: aconst_null
      47: lload_1
      48: iconst_0
      49: bipush        -10
      51: aload         5
      53: aconst_null
      54: invokespecial #37                 // Method org/apache/zookeeper/server/Request."<init>":(Lorg/apache/zookeeper/server/ServerCnxn;JIILjava/nio/ByteBuffer;Ljava/util/List;)V
      57: aload_3
      58: monitorexit
      59: areturn
      60: aload_3
      61: monitorexit
      62: goto          72
      65: astore        6
      67: aload_3
      68: monitorexit
      69: aload         6
      71: athrow
      72: aconst_null
      73: areturn
    Exception table:
       from    to  target type
           7    59    65   any
          60    62    65   any
          65    69    65   any

  public void upgrade(long);
    Code:
       0: aload_0
       1: lload_1
       2: invokespecial #32                 // Method makeUpgradeRequest:(J)Lorg/apache/zookeeper/server/Request;
       5: astore_3
       6: aload_3
       7: ifnull        29
      10: getstatic     #38                 // Field LOG:Lorg/slf4j/Logger;
      13: ldc           #39                 // String Upgrading session 0x{}
      15: lload_1
      16: invokestatic  #40                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      19: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      24: aload_0
      25: aload_3
      26: invokevirtual #42                 // Method submitRequest:(Lorg/apache/zookeeper/server/Request;)V
      29: return

  protected void setLocalSessionFlag(org.apache.zookeeper.server.Request);
    Code:
       0: aload_1
       1: getfield      #9                  // Field org/apache/zookeeper/server/Request.type:I
       4: lookupswitch  { // 2
                   -11: 50
                   -10: 32
               default: 96
          }
      32: aload_0
      33: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      36: invokevirtual #43                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.areLocalSessionsEnabled:()Z
      39: ifeq          96
      42: aload_1
      43: iconst_1
      44: invokevirtual #44                 // Method org/apache/zookeeper/server/Request.setLocalSession:(Z)V
      47: goto          96
      50: ldc           #45                 // String global
      52: astore_2
      53: aload_0
      54: getfield      #7                  // Field upgradeableSessionTracker:Lorg/apache/zookeeper/server/quorum/UpgradeableSessionTracker;
      57: aload_1
      58: getfield      #11                 // Field org/apache/zookeeper/server/Request.sessionId:J
      61: invokevirtual #12                 // Method org/apache/zookeeper/server/quorum/UpgradeableSessionTracker.isLocalSession:(J)Z
      64: ifeq          75
      67: aload_1
      68: iconst_1
      69: invokevirtual #44                 // Method org/apache/zookeeper/server/Request.setLocalSession:(Z)V
      72: ldc           #46                 // String local
      74: astore_2
      75: getstatic     #38                 // Field LOG:Lorg/slf4j/Logger;
      78: ldc           #47                 // String Submitting {} closeSession request for session 0x{}
      80: aload_2
      81: aload_1
      82: getfield      #11                 // Field org/apache/zookeeper/server/Request.sessionId:J
      85: invokestatic  #40                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      88: invokeinterface #48,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      93: goto          96
      96: return

  public void dumpConf(java.io.PrintWriter);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #49                 // Method org/apache/zookeeper/server/ZooKeeperServer.dumpConf:(Ljava/io/PrintWriter;)V
       5: aload_1
       6: ldc           #50                 // String initLimit=
       8: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
      11: aload_1
      12: aload_0
      13: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      16: invokevirtual #52                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getInitLimit:()I
      19: invokevirtual #53                 // Method java/io/PrintWriter.println:(I)V
      22: aload_1
      23: ldc           #54                 // String syncLimit=
      25: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
      28: aload_1
      29: aload_0
      30: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      33: invokevirtual #55                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getSyncLimit:()I
      36: invokevirtual #53                 // Method java/io/PrintWriter.println:(I)V
      39: aload_1
      40: ldc           #56                 // String electionAlg=
      42: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
      45: aload_1
      46: aload_0
      47: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      50: invokevirtual #57                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getElectionType:()I
      53: invokevirtual #53                 // Method java/io/PrintWriter.println:(I)V
      56: aload_1
      57: ldc           #58                 // String electionPort=
      59: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
      62: aload_1
      63: aload_0
      64: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      67: invokevirtual #59                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getElectionAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
      70: invokevirtual #60                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllPorts:()Ljava/util/List;
      73: invokeinterface #61,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      78: invokedynamic #62,  0             // InvokeDynamic #0:apply:()Ljava/util/function/Function;
      83: invokeinterface #63,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      88: ldc           #64                 // String |
      90: invokestatic  #65                 // Method java/util/stream/Collectors.joining:(Ljava/lang/CharSequence;)Ljava/util/stream/Collector;
      93: invokeinterface #66,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      98: checkcast     #67                 // class java/lang/String
     101: invokevirtual #68                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     104: aload_1
     105: ldc           #69                 // String quorumPort=
     107: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
     110: aload_1
     111: aload_0
     112: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     115: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     118: invokevirtual #60                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllPorts:()Ljava/util/List;
     121: invokeinterface #61,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
     126: invokedynamic #62,  0             // InvokeDynamic #0:apply:()Ljava/util/function/Function;
     131: invokeinterface #63,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     136: ldc           #64                 // String |
     138: invokestatic  #65                 // Method java/util/stream/Collectors.joining:(Ljava/lang/CharSequence;)Ljava/util/stream/Collector;
     141: invokeinterface #66,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
     146: checkcast     #67                 // class java/lang/String
     149: invokevirtual #68                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     152: aload_1
     153: ldc           #71                 // String peerType=
     155: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
     158: aload_1
     159: aload_0
     160: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     163: invokevirtual #72                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLearnerType:()Lorg/apache/zookeeper/server/quorum/QuorumPeer$LearnerType;
     166: invokevirtual #73                 // Method org/apache/zookeeper/server/quorum/QuorumPeer$LearnerType.ordinal:()I
     169: invokevirtual #53                 // Method java/io/PrintWriter.println:(I)V
     172: aload_1
     173: ldc           #74                 // String membership:
     175: invokevirtual #68                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     178: aload_1
     179: new           #67                 // class java/lang/String
     182: dup
     183: aload_0
     184: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     187: invokevirtual #75                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     190: invokeinterface #76,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.toString:()Ljava/lang/String;
     195: invokevirtual #77                 // Method java/lang/String.getBytes:()[B
     198: invokespecial #78                 // Method java/lang/String."<init>":([B)V
     201: invokevirtual #51                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
     204: return

  protected void setState(org.apache.zookeeper.server.ZooKeeperServer$State);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #79                 // Field state:Lorg/apache/zookeeper/server/ZooKeeperServer$State;
       5: return

  protected void registerMetrics();
    Code:
       0: aload_0
       1: invokespecial #80                 // Method org/apache/zookeeper/server/ZooKeeperServer.registerMetrics:()V
       4: invokestatic  #81                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
       7: invokevirtual #82                 // Method org/apache/zookeeper/server/ServerMetrics.getMetricsProvider:()Lorg/apache/zookeeper/metrics/MetricsProvider;
      10: invokeinterface #83,  1           // InterfaceMethod org/apache/zookeeper/metrics/MetricsProvider.getRootContext:()Lorg/apache/zookeeper/metrics/MetricsContext;
      15: astore_1
      16: aload_1
      17: ldc           #84                 // String quorum_size
      19: aload_0
      20: invokedynamic #85,  0             // InvokeDynamic #1:get:(Lorg/apache/zookeeper/server/quorum/QuorumZooKeeperServer;)Lorg/apache/zookeeper/metrics/Gauge;
      25: invokeinterface #86,  3           // InterfaceMethod org/apache/zookeeper/metrics/MetricsContext.registerGauge:(Ljava/lang/String;Lorg/apache/zookeeper/metrics/Gauge;)V
      30: return

  protected void unregisterMetrics();
    Code:
       0: aload_0
       1: invokespecial #87                 // Method org/apache/zookeeper/server/ZooKeeperServer.unregisterMetrics:()V
       4: invokestatic  #81                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
       7: invokevirtual #82                 // Method org/apache/zookeeper/server/ServerMetrics.getMetricsProvider:()Lorg/apache/zookeeper/metrics/MetricsProvider;
      10: invokeinterface #83,  1           // InterfaceMethod org/apache/zookeeper/metrics/MetricsProvider.getRootContext:()Lorg/apache/zookeeper/metrics/MetricsContext;
      15: astore_1
      16: aload_1
      17: ldc           #84                 // String quorum_size
      19: invokeinterface #88,  2           // InterfaceMethod org/apache/zookeeper/metrics/MetricsContext.unregisterGauge:(Ljava/lang/String;)V
      24: return

  public void dumpMonitorValues(java.util.function.BiConsumer<java.lang.String, java.lang.Object>);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #89                 // Method org/apache/zookeeper/server/ZooKeeperServer.dumpMonitorValues:(Ljava/util/function/BiConsumer;)V
       5: aload_1
       6: ldc           #90                 // String peer_state
       8: aload_0
       9: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      12: invokevirtual #91                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getDetailedPeerState:()Ljava/lang/String;
      15: invokeinterface #92,  3           // InterfaceMethod java/util/function/BiConsumer.accept:(Ljava/lang/Object;Ljava/lang/Object;)V
      20: return

  private java.lang.Number lambda$registerMetrics$0();
    Code:
       0: aload_0
       1: getfield      #4                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #93                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumSize:()I
       7: invokestatic  #94                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      10: areturn
}

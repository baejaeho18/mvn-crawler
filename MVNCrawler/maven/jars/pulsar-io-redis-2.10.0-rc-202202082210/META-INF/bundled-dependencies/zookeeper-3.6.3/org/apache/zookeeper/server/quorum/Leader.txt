Compiled from "Leader.java"
public class org.apache.zookeeper.server.quorum.Leader extends org.apache.zookeeper.server.quorum.LearnerMaster {
  private static final org.slf4j.Logger LOG;

  private static final boolean nodelay;

  private static final java.lang.String ACK_LOGGING_FREQUENCY;

  private static int ackLoggingFrequency;

  final org.apache.zookeeper.server.quorum.LeaderZooKeeperServer zk;

  final org.apache.zookeeper.server.quorum.QuorumPeer self;

  protected boolean quorumFormed;

  volatile org.apache.zookeeper.server.quorum.Leader$LearnerCnxAcceptor cnxAcceptor;

  private final java.util.HashSet<org.apache.zookeeper.server.quorum.LearnerHandler> learners;

  private final org.apache.zookeeper.server.quorum.BufferStats proposalStats;

  private final java.util.concurrent.ConcurrentHashMap<org.apache.zookeeper.server.quorum.LearnerHandler, org.apache.zookeeper.server.quorum.LearnerHandlerBean> connectionBeans;

  private final java.util.HashSet<org.apache.zookeeper.server.quorum.LearnerHandler> forwardingFollowers;

  private final java.util.HashSet<org.apache.zookeeper.server.quorum.LearnerHandler> observingLearners;

  private final java.util.Map<java.lang.Long, java.util.List<org.apache.zookeeper.server.quorum.LearnerSyncRequest>> pendingSyncs;

  final java.util.concurrent.atomic.AtomicLong followerCounter;

  private final java.util.List<java.net.ServerSocket> serverSockets;

  static final int DIFF;

  static final int TRUNC;

  static final int SNAP;

  static final int OBSERVERINFO;

  static final int NEWLEADER;

  static final int FOLLOWERINFO;

  static final int UPTODATE;

  public static final int LEADERINFO;

  public static final int ACKEPOCH;

  static final int REQUEST;

  public static final int PROPOSAL;

  static final int ACK;

  static final int COMMIT;

  static final int PING;

  static final int REVALIDATE;

  static final int SYNC;

  static final int INFORM;

  static final int COMMITANDACTIVATE;

  static final int INFORMANDACTIVATE;

  final java.util.concurrent.ConcurrentMap<java.lang.Long, org.apache.zookeeper.server.quorum.Leader$Proposal> outstandingProposals;

  private final java.util.concurrent.ConcurrentLinkedQueue<org.apache.zookeeper.server.quorum.Leader$Proposal> toBeApplied;

  protected final org.apache.zookeeper.server.quorum.Leader$Proposal newLeaderProposal;

  org.apache.zookeeper.server.quorum.StateSummary leaderStateSummary;

  long epoch;

  boolean waitingForNewEpoch;

  boolean allowedToCommit;

  private long leaderStartTime;

  boolean isShutdown;

  long lastCommitted;

  long lastProposed;

  protected final java.util.Set<java.lang.Long> connectingFollowers;

  private volatile boolean quitWaitForEpoch;

  private volatile long timeStartWaitForEpoch;

  private volatile org.apache.zookeeper.server.quorum.SyncedLearnerTracker voteSet;

  public static final java.lang.String MAX_TIME_TO_WAIT_FOR_EPOCH;

  private static int maxTimeToWaitForEpoch;

  protected final java.util.Set<java.lang.Long> electingFollowers;

  protected boolean electionFinished;

  public static void setAckLoggingFrequency(int);
    Code:
       0: iload_0
       1: putstatic     #5                  // Field ackLoggingFrequency:I
       4: return

  public static int getAckLoggingFrequency();
    Code:
       0: getstatic     #5                  // Field ackLoggingFrequency:I
       3: ireturn

  public org.apache.zookeeper.server.quorum.BufferStats getProposalStats();
    Code:
       0: aload_0
       1: getfield      #6                  // Field proposalStats:Lorg/apache/zookeeper/server/quorum/BufferStats;
       4: areturn

  public java.util.List<org.apache.zookeeper.server.quorum.LearnerHandler> getLearners();
    Code:
       0: aload_0
       1: getfield      #7                  // Field learners:Ljava/util/HashSet;
       4: dup
       5: astore_1
       6: monitorenter
       7: new           #8                  // class java/util/ArrayList
      10: dup
      11: aload_0
      12: getfield      #7                  // Field learners:Ljava/util/HashSet;
      15: invokespecial #9                  // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      18: aload_1
      19: monitorexit
      20: areturn
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
    Exception table:
       from    to  target type
           7    20    21   any
          21    24    21   any

  public java.util.List<org.apache.zookeeper.server.quorum.LearnerHandler> getForwardingFollowers();
    Code:
       0: aload_0
       1: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
       4: dup
       5: astore_1
       6: monitorenter
       7: new           #8                  // class java/util/ArrayList
      10: dup
      11: aload_0
      12: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      15: invokespecial #9                  // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      18: aload_1
      19: monitorexit
      20: areturn
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
    Exception table:
       from    to  target type
           7    20    21   any
          21    24    21   any

  public java.util.List<org.apache.zookeeper.server.quorum.LearnerHandler> getNonVotingFollowers();
    Code:
       0: new           #8                  // class java/util/ArrayList
       3: dup
       4: invokespecial #11                 // Method java/util/ArrayList."<init>":()V
       7: astore_1
       8: aload_0
       9: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      12: dup
      13: astore_2
      14: monitorenter
      15: aload_0
      16: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      19: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      22: astore_3
      23: aload_3
      24: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      29: ifeq          67
      32: aload_3
      33: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      38: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      41: astore        4
      43: aload_0
      44: aload         4
      46: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
      49: invokespecial #17                 // Method isParticipant:(J)Z
      52: ifne          64
      55: aload_1
      56: aload         4
      58: invokeinterface #18,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      63: pop
      64: goto          23
      67: aload_2
      68: monitorexit
      69: goto          79
      72: astore        5
      74: aload_2
      75: monitorexit
      76: aload         5
      78: athrow
      79: aload_1
      80: areturn
    Exception table:
       from    to  target type
          15    69    72   any
          72    76    72   any

  void addForwardingFollower(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
      15: pop
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  public java.util.List<org.apache.zookeeper.server.quorum.LearnerHandler> getObservingLearners();
    Code:
       0: aload_0
       1: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
       4: dup
       5: astore_1
       6: monitorenter
       7: new           #8                  // class java/util/ArrayList
      10: dup
      11: aload_0
      12: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      15: invokespecial #9                  // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      18: aload_1
      19: monitorexit
      20: areturn
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
    Exception table:
       from    to  target type
           7    20    21   any
          21    24    21   any

  private void addObserverLearnerHandler(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
      15: pop
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  public java.lang.Iterable<java.util.Map<java.lang.String, java.lang.Object>> getObservingLearnersInfo();
    Code:
       0: new           #21                 // class java/util/HashSet
       3: dup
       4: invokespecial #22                 // Method java/util/HashSet."<init>":()V
       7: astore_1
       8: aload_0
       9: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      12: dup
      13: astore_2
      14: monitorenter
      15: aload_0
      16: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      19: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      22: astore_3
      23: aload_3
      24: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      29: ifeq          58
      32: aload_3
      33: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      38: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      41: astore        4
      43: aload_1
      44: aload         4
      46: invokevirtual #23                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getLearnerHandlerInfo:()Ljava/util/Map;
      49: invokeinterface #24,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      54: pop
      55: goto          23
      58: aload_2
      59: monitorexit
      60: goto          70
      63: astore        5
      65: aload_2
      66: monitorexit
      67: aload         5
      69: athrow
      70: aload_1
      71: areturn
    Exception table:
       from    to  target type
          15    60    63   any
          63    67    63   any

  public void resetObserverConnectionStats();
    Code:
       0: aload_0
       1: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      11: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      14: astore_2
      15: aload_2
      16: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          41
      24: aload_2
      25: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      33: astore_3
      34: aload_3
      35: invokevirtual #25                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.resetObserverConnectionStats:()V
      38: goto          15
      41: aload_1
      42: monitorexit
      43: goto          53
      46: astore        4
      48: aload_1
      49: monitorexit
      50: aload         4
      52: athrow
      53: return
    Exception table:
       from    to  target type
           7    43    46   any
          46    50    46   any

  public synchronized int getNumPendingSyncs();
    Code:
       0: aload_0
       1: getfield      #26                 // Field pendingSyncs:Ljava/util/Map;
       4: invokeinterface #27,  1           // InterfaceMethod java/util/Map.size:()I
       9: ireturn

  public void addLearnerHandler(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #7                  // Field learners:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #7                  // Field learners:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
      15: pop
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  public void removeLearnerHandler(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #28                 // Method java/util/HashSet.remove:(Ljava/lang/Object;)Z
      15: pop
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: aload_0
      27: getfield      #7                  // Field learners:Ljava/util/HashSet;
      30: dup
      31: astore_2
      32: monitorenter
      33: aload_0
      34: getfield      #7                  // Field learners:Ljava/util/HashSet;
      37: aload_1
      38: invokevirtual #28                 // Method java/util/HashSet.remove:(Ljava/lang/Object;)Z
      41: pop
      42: aload_2
      43: monitorexit
      44: goto          54
      47: astore        4
      49: aload_2
      50: monitorexit
      51: aload         4
      53: athrow
      54: aload_0
      55: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      58: dup
      59: astore_2
      60: monitorenter
      61: aload_0
      62: getfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      65: aload_1
      66: invokevirtual #28                 // Method java/util/HashSet.remove:(Ljava/lang/Object;)Z
      69: pop
      70: aload_2
      71: monitorexit
      72: goto          82
      75: astore        5
      77: aload_2
      78: monitorexit
      79: aload         5
      81: athrow
      82: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any
          33    44    47   any
          47    51    47   any
          61    72    75   any
          75    79    75   any

  boolean isLearnerSynced(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #29                 // Method java/util/HashSet.contains:(Ljava/lang/Object;)Z
      15: aload_2
      16: monitorexit
      17: ireturn
      18: astore_3
      19: aload_2
      20: monitorexit
      21: aload_3
      22: athrow
    Exception table:
       from    to  target type
           7    17    18   any
          18    21    18   any

  public boolean isQuorumSynced(org.apache.zookeeper.server.quorum.flexible.QuorumVerifier);
    Code:
       0: new           #21                 // class java/util/HashSet
       3: dup
       4: invokespecial #22                 // Method java/util/HashSet."<init>":()V
       7: astore_2
       8: aload_1
       9: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
      14: aload_0
      15: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      18: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      21: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      24: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      29: ifeq          47
      32: aload_2
      33: aload_0
      34: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      37: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      40: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      43: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
      46: pop
      47: aload_0
      48: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      51: dup
      52: astore_3
      53: monitorenter
      54: aload_0
      55: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      58: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      61: astore        4
      63: aload         4
      65: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      70: ifeq          131
      73: aload         4
      75: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      80: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      83: astore        5
      85: aload         5
      87: invokevirtual #35                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.synced:()Z
      90: ifeq          128
      93: aload_1
      94: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
      99: aload         5
     101: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
     104: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     107: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     112: ifeq          128
     115: aload_2
     116: aload         5
     118: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
     121: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     124: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
     127: pop
     128: goto          63
     131: aload_3
     132: monitorexit
     133: goto          143
     136: astore        6
     138: aload_3
     139: monitorexit
     140: aload         6
     142: athrow
     143: aload_1
     144: aload_2
     145: invokeinterface #36,  2           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.containsQuorum:(Ljava/util/Set;)Z
     150: ireturn
    Exception table:
       from    to  target type
          54   133   136   any
         136   140   136   any

  public org.apache.zookeeper.server.quorum.Leader(org.apache.zookeeper.server.quorum.QuorumPeer, org.apache.zookeeper.server.quorum.LeaderZooKeeperServer) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #37                 // Method org/apache/zookeeper/server/quorum/LearnerMaster."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #38                 // Field quorumFormed:Z
       9: aload_0
      10: aconst_null
      11: putfield      #39                 // Field cnxAcceptor:Lorg/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor;
      14: aload_0
      15: new           #21                 // class java/util/HashSet
      18: dup
      19: invokespecial #22                 // Method java/util/HashSet."<init>":()V
      22: putfield      #7                  // Field learners:Ljava/util/HashSet;
      25: aload_0
      26: new           #40                 // class java/util/concurrent/ConcurrentHashMap
      29: dup
      30: invokespecial #41                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      33: putfield      #42                 // Field connectionBeans:Ljava/util/concurrent/ConcurrentHashMap;
      36: aload_0
      37: new           #21                 // class java/util/HashSet
      40: dup
      41: invokespecial #22                 // Method java/util/HashSet."<init>":()V
      44: putfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      47: aload_0
      48: new           #21                 // class java/util/HashSet
      51: dup
      52: invokespecial #22                 // Method java/util/HashSet."<init>":()V
      55: putfield      #20                 // Field observingLearners:Ljava/util/HashSet;
      58: aload_0
      59: new           #43                 // class java/util/HashMap
      62: dup
      63: invokespecial #44                 // Method java/util/HashMap."<init>":()V
      66: putfield      #26                 // Field pendingSyncs:Ljava/util/Map;
      69: aload_0
      70: new           #45                 // class java/util/concurrent/atomic/AtomicLong
      73: dup
      74: ldc2_w        #46                 // long -1l
      77: invokespecial #48                 // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      80: putfield      #49                 // Field followerCounter:Ljava/util/concurrent/atomic/AtomicLong;
      83: aload_0
      84: new           #50                 // class java/util/LinkedList
      87: dup
      88: invokespecial #51                 // Method java/util/LinkedList."<init>":()V
      91: putfield      #4                  // Field serverSockets:Ljava/util/List;
      94: aload_0
      95: new           #40                 // class java/util/concurrent/ConcurrentHashMap
      98: dup
      99: invokespecial #41                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
     102: putfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     105: aload_0
     106: new           #53                 // class java/util/concurrent/ConcurrentLinkedQueue
     109: dup
     110: invokespecial #54                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
     113: putfield      #1                  // Field toBeApplied:Ljava/util/concurrent/ConcurrentLinkedQueue;
     116: aload_0
     117: new           #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     120: dup
     121: invokespecial #56                 // Method org/apache/zookeeper/server/quorum/Leader$Proposal."<init>":()V
     124: putfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     127: aload_0
     128: ldc2_w        #46                 // long -1l
     131: putfield      #58                 // Field epoch:J
     134: aload_0
     135: iconst_1
     136: putfield      #59                 // Field waitingForNewEpoch:Z
     139: aload_0
     140: iconst_1
     141: putfield      #60                 // Field allowedToCommit:Z
     144: aload_0
     145: ldc2_w        #46                 // long -1l
     148: putfield      #61                 // Field lastCommitted:J
     151: aload_0
     152: new           #21                 // class java/util/HashSet
     155: dup
     156: invokespecial #22                 // Method java/util/HashSet."<init>":()V
     159: putfield      #62                 // Field connectingFollowers:Ljava/util/Set;
     162: aload_0
     163: iconst_0
     164: putfield      #63                 // Field quitWaitForEpoch:Z
     167: aload_0
     168: ldc2_w        #46                 // long -1l
     171: putfield      #64                 // Field timeStartWaitForEpoch:J
     174: aload_0
     175: new           #21                 // class java/util/HashSet
     178: dup
     179: invokespecial #22                 // Method java/util/HashSet."<init>":()V
     182: putfield      #65                 // Field electingFollowers:Ljava/util/Set;
     185: aload_0
     186: iconst_0
     187: putfield      #66                 // Field electionFinished:Z
     190: aload_0
     191: aload_1
     192: putfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     195: aload_0
     196: new           #67                 // class org/apache/zookeeper/server/quorum/BufferStats
     199: dup
     200: invokespecial #68                 // Method org/apache/zookeeper/server/quorum/BufferStats."<init>":()V
     203: putfield      #6                  // Field proposalStats:Lorg/apache/zookeeper/server/quorum/BufferStats;
     206: aload_1
     207: invokevirtual #69                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumListenOnAllIPs:()Z
     210: ifeq          224
     213: aload_1
     214: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     217: invokevirtual #71                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getWildcardAddresses:()Ljava/util/Set;
     220: astore_3
     221: goto          232
     224: aload_1
     225: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     228: invokevirtual #72                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllAddresses:()Ljava/util/Set;
     231: astore_3
     232: aload_3
     233: invokeinterface #73,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
     238: aload_0
     239: aload_1
     240: invokedynamic #74,  0             // InvokeDynamic #0:apply:(Lorg/apache/zookeeper/server/quorum/Leader;Lorg/apache/zookeeper/server/quorum/QuorumPeer;)Ljava/util/function/Function;
     245: invokeinterface #75,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     250: invokedynamic #76,  0             // InvokeDynamic #1:test:()Ljava/util/function/Predicate;
     255: invokeinterface #77,  2           // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
     260: invokedynamic #78,  0             // InvokeDynamic #2:apply:()Ljava/util/function/Function;
     265: invokeinterface #75,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     270: aload_0
     271: getfield      #4                  // Field serverSockets:Ljava/util/List;
     274: dup
     275: invokevirtual #79                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     278: pop
     279: invokedynamic #80,  0             // InvokeDynamic #3:accept:(Ljava/util/List;)Ljava/util/function/Consumer;
     284: invokeinterface #81,  2           // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
     289: aload_0
     290: getfield      #4                  // Field serverSockets:Ljava/util/List;
     293: invokeinterface #82,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     298: ifeq          328
     301: new           #83                 // class java/io/IOException
     304: dup
     305: new           #84                 // class java/lang/StringBuilder
     308: dup
     309: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
     312: ldc           #86                 // String Leader failed to initialize any of the following sockets:
     314: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     317: aload_3
     318: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     321: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     324: invokespecial #90                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     327: athrow
     328: aload_0
     329: aload_2
     330: putfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     333: return

  java.util.Optional<java.net.ServerSocket> createServerSocket(java.net.InetSocketAddress, boolean, boolean);
    Code:
       0: iload_2
       1: ifne          8
       4: iload_3
       5: ifeq          28
       8: new           #92                 // class org/apache/zookeeper/server/quorum/UnifiedServerSocket
      11: dup
      12: aload_0
      13: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      16: invokevirtual #93                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getX509Util:()Lorg/apache/zookeeper/common/QuorumX509Util;
      19: iload_2
      20: invokespecial #94                 // Method org/apache/zookeeper/server/quorum/UnifiedServerSocket."<init>":(Lorg/apache/zookeeper/common/X509Util;Z)V
      23: astore        4
      25: goto          37
      28: new           #95                 // class java/net/ServerSocket
      31: dup
      32: invokespecial #96                 // Method java/net/ServerSocket."<init>":()V
      35: astore        4
      37: aload         4
      39: iconst_1
      40: invokevirtual #97                 // Method java/net/ServerSocket.setReuseAddress:(Z)V
      43: aload         4
      45: aload_1
      46: invokevirtual #98                 // Method java/net/ServerSocket.bind:(Ljava/net/SocketAddress;)V
      49: aload         4
      51: invokestatic  #99                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
      54: areturn
      55: astore        5
      57: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      60: ldc           #100                // String Couldn\'t bind to {}
      62: aload_1
      63: invokevirtual #101                // Method java/net/InetSocketAddress.toString:()Ljava/lang/String;
      66: aload         5
      68: invokeinterface #102,  4          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      73: invokestatic  #103                // Method java/util/Optional.empty:()Ljava/util/Optional;
      76: areturn
    Exception table:
       from    to  target type
           0    54    55   Class java/io/IOException

  public long getUptime();
    Code:
       0: aload_0
       1: getfield      #104                // Field leaderStartTime:J
       4: lconst_0
       5: lcmp
       6: ifle          18
       9: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
      12: aload_0
      13: getfield      #104                // Field leaderStartTime:J
      16: lsub
      17: lreturn
      18: lconst_0
      19: lreturn

  void lead() throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
       7: putfield      #106                // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      10: aload_0
      11: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: getfield      #106                // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      17: aload_0
      18: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      21: getfield      #107                // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      24: lsub
      25: lstore_1
      26: aload_0
      27: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      30: lload_1
      31: invokevirtual #108                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setElectionTimeTaken:(J)V
      34: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
      37: getfield      #110                // Field org/apache/zookeeper/server/ServerMetrics.ELECTION_TIME:Lorg/apache/zookeeper/metrics/Summary;
      40: lload_1
      41: invokeinterface #111,  3          // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
      46: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      49: ldc           #112                // String LEADING - LEADER ELECTION TOOK - {} {}
      51: lload_1
      52: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      55: ldc           #114                // String MS
      57: invokeinterface #115,  4          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      62: aload_0
      63: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      66: lconst_0
      67: putfield      #107                // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      70: aload_0
      71: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      74: lconst_0
      75: putfield      #106                // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      78: aload_0
      79: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      82: new           #116                // class org/apache/zookeeper/server/quorum/LeaderBean
      85: dup
      86: aload_0
      87: aload_0
      88: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      91: invokespecial #117                // Method org/apache/zookeeper/server/quorum/LeaderBean."<init>":(Lorg/apache/zookeeper/server/quorum/Leader;Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      94: aload_0
      95: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      98: getfield      #118                // Field org/apache/zookeeper/server/quorum/QuorumPeer.jmxLocalPeerBean:Lorg/apache/zookeeper/server/quorum/LocalPeerBean;
     101: invokevirtual #119                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.registerJMX:(Lorg/apache/zookeeper/server/quorum/LeaderBean;Lorg/apache/zookeeper/server/quorum/LocalPeerBean;)V
     104: aload_0
     105: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     108: getstatic     #120                // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.DISCOVERY:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     111: invokevirtual #121                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     114: aload_0
     115: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     118: getfield      #122                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tick:Ljava/util/concurrent/atomic/AtomicInteger;
     121: iconst_0
     122: invokevirtual #123                // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
     125: aload_0
     126: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     129: invokevirtual #124                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.loadData:()V
     132: aload_0
     133: new           #125                // class org/apache/zookeeper/server/quorum/StateSummary
     136: dup
     137: aload_0
     138: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     141: invokevirtual #126                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getCurrentEpoch:()J
     144: aload_0
     145: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     148: invokevirtual #127                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getLastProcessedZxid:()J
     151: invokespecial #128                // Method org/apache/zookeeper/server/quorum/StateSummary."<init>":(JJ)V
     154: putfield      #129                // Field leaderStateSummary:Lorg/apache/zookeeper/server/quorum/StateSummary;
     157: aload_0
     158: new           #130                // class org/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor
     161: dup
     162: aload_0
     163: invokespecial #131                // Method org/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor."<init>":(Lorg/apache/zookeeper/server/quorum/Leader;)V
     166: putfield      #39                 // Field cnxAcceptor:Lorg/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor;
     169: aload_0
     170: getfield      #39                 // Field cnxAcceptor:Lorg/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor;
     173: invokevirtual #132                // Method org/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor.start:()V
     176: aload_0
     177: aload_0
     178: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     181: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     184: aload_0
     185: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     188: invokevirtual #133                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     191: invokevirtual #134                // Method getEpochToPropose:(JJ)J
     194: lstore_3
     195: aload_0
     196: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     199: lload_3
     200: lconst_0
     201: invokestatic  #135                // Method org/apache/zookeeper/server/util/ZxidUtils.makeZxid:(JJ)J
     204: invokevirtual #136                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.setZxid:(J)V
     207: aload_0
     208: dup
     209: astore        5
     211: monitorenter
     212: aload_0
     213: aload_0
     214: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     217: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     220: putfield      #138                // Field lastProposed:J
     223: aload         5
     225: monitorexit
     226: goto          237
     229: astore        6
     231: aload         5
     233: monitorexit
     234: aload         6
     236: athrow
     237: aload_0
     238: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     241: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
     244: dup
     245: bipush        10
     247: aload_0
     248: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     251: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     254: aconst_null
     255: aconst_null
     256: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
     259: putfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
     262: aload_0
     263: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     266: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
     269: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     272: ldc2_w        #144                // long 4294967295l
     275: land
     276: lconst_0
     277: lcmp
     278: ifeq          304
     281: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     284: ldc           #146                // String NEWLEADER proposal has Zxid of {}
     286: aload_0
     287: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     290: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
     293: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     296: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     299: invokeinterface #148,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     304: aload_0
     305: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     308: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     311: astore        5
     313: aload_0
     314: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     317: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     320: astore        6
     322: aload         6
     324: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     329: lconst_0
     330: lcmp
     331: ifne          434
     334: aload         6
     336: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     341: aload         5
     343: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     348: lcmp
     349: ifne          434
     352: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     355: ldc           #152                // String set lastSeenQuorumVerifier to currentQuorumVerifier (%s)
     357: iconst_1
     358: anewarray     #153                // class java/lang/Object
     361: dup
     362: iconst_0
     363: aload         6
     365: invokeinterface #154,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.toString:()Ljava/lang/String;
     370: aastore
     371: invokestatic  #155                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     374: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     379: aload_0
     380: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     383: aload         6
     385: invokeinterface #154,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.toString:()Ljava/lang/String;
     390: invokevirtual #157                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     393: astore        7
     395: aload         7
     397: aload_0
     398: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     401: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     404: invokeinterface #158,  3          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.setVersion:(J)V
     409: aload_0
     410: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     413: aload         7
     415: iconst_1
     416: invokevirtual #159                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLastSeenQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Z)V
     419: goto          434
     422: astore        7
     424: new           #83                 // class java/io/IOException
     427: dup
     428: aload         7
     430: invokespecial #161                // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     433: athrow
     434: aload_0
     435: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     438: aload_0
     439: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     442: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     445: invokevirtual #162                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     448: aload_0
     449: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     452: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     455: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     460: aload_0
     461: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     464: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     467: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     472: lcmp
     473: ifle          490
     476: aload_0
     477: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     480: aload_0
     481: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     484: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     487: invokevirtual #162                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     490: aload_0
     491: aload_0
     492: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     495: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     498: aload_0
     499: getfield      #129                // Field leaderStateSummary:Lorg/apache/zookeeper/server/quorum/StateSummary;
     502: invokevirtual #163                // Method waitForEpochAck:(JLorg/apache/zookeeper/server/quorum/StateSummary;)V
     505: aload_0
     506: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     509: lload_3
     510: invokevirtual #164                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setCurrentEpoch:(J)V
     513: aload_0
     514: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     517: aload_0
     518: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     521: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     524: aload_0
     525: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     528: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     531: invokevirtual #165                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLeaderAddressAndId:(Lorg/apache/zookeeper/server/quorum/MultipleAddresses;J)V
     534: aload_0
     535: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     538: getstatic     #166                // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.SYNCHRONIZATION:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     541: invokevirtual #121                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     544: aload_0
     545: aload_0
     546: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     549: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     552: aload_0
     553: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     556: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     559: invokevirtual #167                // Method waitForNewLeaderAck:(JJ)V
     562: goto          773
     565: astore        7
     567: aload_0
     568: new           #84                 // class java/lang/StringBuilder
     571: dup
     572: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
     575: ldc           #169                // String Waiting for a quorum of followers, only synced with sids: [
     577: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     580: aload_0
     581: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     584: invokevirtual #170                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.ackSetsToString:()Ljava/lang/String;
     587: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     590: ldc           #171                // String  ]
     592: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     595: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     598: invokevirtual #172                // Method shutdown:(Ljava/lang/String;)V
     601: new           #21                 // class java/util/HashSet
     604: dup
     605: invokespecial #22                 // Method java/util/HashSet."<init>":()V
     608: astore        8
     610: aload_0
     611: invokevirtual #173                // Method getLearners:()Ljava/util/List;
     614: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     619: astore        9
     621: aload         9
     623: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     628: ifeq          688
     631: aload         9
     633: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     638: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
     641: astore        10
     643: aload_0
     644: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     647: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     650: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
     655: aload         10
     657: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
     660: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     663: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     668: ifeq          685
     671: aload         8
     673: aload         10
     675: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
     678: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     681: invokevirtual #19                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
     684: pop
     685: goto          621
     688: iconst_1
     689: istore        9
     691: aload_0
     692: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     695: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     698: invokevirtual #176                // Method java/util/ArrayList.iterator:()Ljava/util/Iterator;
     701: astore        10
     703: aload         10
     705: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     710: ifeq          749
     713: aload         10
     715: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     720: checkcast     #177                // class org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair
     723: astore        11
     725: aload         11
     727: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     730: aload         8
     732: invokeinterface #36,  2           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.containsQuorum:(Ljava/util/Set;)Z
     737: ifne          746
     740: iconst_0
     741: istore        9
     743: goto          749
     746: goto          703
     749: iload         9
     751: ifeq          764
     754: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     757: ldc           #179                // String Enough followers present. Perhaps the initTicks need to be increased.
     759: invokeinterface #180,  2          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     764: aload_0
     765: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     768: aload_0
     769: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Leader;)V
     772: return
     773: aload_0
     774: invokespecial #182                // Method startZkServer:()V
     777: ldc           #183                // String zookeeper.testingonly.initialZxid
     779: invokestatic  #184                // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
     782: astore        7
     784: aload         7
     786: ifnull        817
     789: aload         7
     791: invokestatic  #185                // Method java/lang/Long.parseLong:(Ljava/lang/String;)J
     794: lstore        8
     796: aload_0
     797: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     800: aload_0
     801: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     804: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     807: ldc2_w        #186                // long -4294967296l
     810: land
     811: lload         8
     813: lor
     814: invokevirtual #136                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.setZxid:(J)V
     817: ldc           #188                // String zookeeper.leaderServes
     819: ldc           #189                // String yes
     821: invokestatic  #190                // Method java/lang/System.getProperty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     824: ldc           #191                // String no
     826: invokevirtual #192                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     829: ifne          843
     832: aload_0
     833: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     836: aload_0
     837: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     840: invokevirtual #193                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
     843: aload_0
     844: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     847: getstatic     #194                // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.BROADCAST:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     850: invokevirtual #121                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     853: aload_0
     854: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     857: getfield      #195                // Field org/apache/zookeeper/server/quorum/QuorumPeer.adminServer:Lorg/apache/zookeeper/server/admin/AdminServer;
     860: aload_0
     861: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     864: invokeinterface #196,  2          // InterfaceMethod org/apache/zookeeper/server/admin/AdminServer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
     869: iconst_1
     870: istore        8
     872: aconst_null
     873: astore        9
     875: aload_0
     876: dup
     877: astore        10
     879: monitorenter
     880: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     883: lstore        11
     885: lload         11
     887: lstore        13
     889: lload         11
     891: aload_0
     892: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     895: getfield      #197                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tickTime:I
     898: iconst_2
     899: idiv
     900: i2l
     901: ladd
     902: lstore        15
     904: lload         13
     906: lload         15
     908: lcmp
     909: ifge          929
     912: aload_0
     913: lload         15
     915: lload         13
     917: lsub
     918: invokevirtual #198                // Method java/lang/Object.wait:(J)V
     921: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     924: lstore        13
     926: goto          904
     929: iload         8
     931: ifne          945
     934: aload_0
     935: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     938: getfield      #122                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tick:Ljava/util/concurrent/atomic/AtomicInteger;
     941: invokevirtual #199                // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     944: pop
     945: new           #200                // class org/apache/zookeeper/server/quorum/SyncedLearnerTracker
     948: dup
     949: invokespecial #201                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker."<init>":()V
     952: astore        17
     954: aload         17
     956: aload_0
     957: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     960: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     963: invokevirtual #202                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     966: aload_0
     967: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     970: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     973: ifnull        1016
     976: aload_0
     977: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     980: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     983: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     988: aload_0
     989: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     992: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     995: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
    1000: lcmp
    1001: ifle          1016
    1004: aload         17
    1006: aload_0
    1007: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1010: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
    1013: invokevirtual #202                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
    1016: aload         17
    1018: aload_0
    1019: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1022: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
    1025: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
    1028: invokevirtual #203                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.addAck:(Ljava/lang/Long;)Z
    1031: pop
    1032: aload_0
    1033: invokevirtual #173                // Method getLearners:()Ljava/util/List;
    1036: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
    1041: astore        18
    1043: aload         18
    1045: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1050: ifeq          1090
    1053: aload         18
    1055: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1060: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
    1063: astore        19
    1065: aload         19
    1067: invokevirtual #35                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.synced:()Z
    1070: ifeq          1087
    1073: aload         17
    1075: aload         19
    1077: invokevirtual #16                 // Method org/apache/zookeeper/server/quorum/LearnerHandler.getSid:()J
    1080: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
    1083: invokevirtual #203                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.addAck:(Ljava/lang/Long;)Z
    1086: pop
    1087: goto          1043
    1090: aload_0
    1091: invokespecial #204                // Method isRunning:()Z
    1094: ifne          1107
    1097: ldc           #205                // String Unexpected internal error
    1099: astore        9
    1101: aload         10
    1103: monitorexit
    1104: goto          1226
    1107: iload         8
    1109: ifne          1156
    1112: aload         17
    1114: invokevirtual #206                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.hasAllQuorums:()Z
    1117: ifne          1156
    1120: new           #84                 // class java/lang/StringBuilder
    1123: dup
    1124: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
    1127: ldc           #207                // String Not sufficient followers synced, only synced with sids: [
    1129: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1132: aload         17
    1134: invokevirtual #208                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.ackSetsToString:()Ljava/lang/String;
    1137: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1140: ldc           #171                // String  ]
    1142: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1145: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
    1148: astore        9
    1150: aload         10
    1152: monitorexit
    1153: goto          1226
    1156: iload         8
    1158: ifne          1165
    1161: iconst_1
    1162: goto          1166
    1165: iconst_0
    1166: istore        8
    1168: aload         10
    1170: monitorexit
    1171: goto          1182
    1174: astore        20
    1176: aload         10
    1178: monitorexit
    1179: aload         20
    1181: athrow
    1182: aload_0
    1183: invokevirtual #173                // Method getLearners:()Ljava/util/List;
    1186: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
    1191: astore        10
    1193: aload         10
    1195: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1200: ifeq          1223
    1203: aload         10
    1205: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1210: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
    1213: astore        11
    1215: aload         11
    1217: invokevirtual #209                // Method org/apache/zookeeper/server/quorum/LearnerHandler.ping:()V
    1220: goto          1193
    1223: goto          875
    1226: aload         9
    1228: ifnull        1237
    1231: aload_0
    1232: aload         9
    1234: invokevirtual #172                // Method shutdown:(Ljava/lang/String;)V
    1237: aload_0
    1238: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
    1241: aload_0
    1242: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Leader;)V
    1245: goto          1261
    1248: astore        21
    1250: aload_0
    1251: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
    1254: aload_0
    1255: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Leader;)V
    1258: aload         21
    1260: athrow
    1261: return
    Exception table:
       from    to  target type
         212   226   229   any
         229   234   229   any
         352   419   422   Class java/lang/Exception
         544   562   565   Class java/lang/InterruptedException
         880  1104  1174   any
        1107  1153  1174   any
        1156  1171  1174   any
        1174  1179  1174   any
         104   764  1248   any
         773  1237  1248   any
        1248  1250  1248   any

  void shutdown(java.lang.String);
    Code:
       0: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #210                // String Shutting down
       5: invokeinterface #211,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      10: aload_0
      11: getfield      #212                // Field isShutdown:Z
      14: ifeq          18
      17: return
      18: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      21: ldc           #213                // String Shutdown called. For the reason {}
      23: aload_1
      24: invokeinterface #148,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      29: aload_0
      30: getfield      #39                 // Field cnxAcceptor:Lorg/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor;
      33: ifnull        46
      36: aload_0
      37: getfield      #39                 // Field cnxAcceptor:Lorg/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor;
      40: invokevirtual #214                // Method org/apache/zookeeper/server/quorum/Leader$LearnerCnxAcceptor.halt:()V
      43: goto          50
      46: aload_0
      47: invokevirtual #215                // Method closeSockets:()V
      50: aload_0
      51: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      54: aconst_null
      55: invokevirtual #193                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      58: aload_0
      59: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      62: getfield      #195                // Field org/apache/zookeeper/server/quorum/QuorumPeer.adminServer:Lorg/apache/zookeeper/server/admin/AdminServer;
      65: aconst_null
      66: invokeinterface #196,  2          // InterfaceMethod org/apache/zookeeper/server/admin/AdminServer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      71: aload_0
      72: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      75: invokevirtual #216                // Method org/apache/zookeeper/server/quorum/QuorumPeer.closeAllConnections:()V
      78: aload_0
      79: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      82: ifnull        92
      85: aload_0
      86: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      89: invokevirtual #217                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.shutdown:()V
      92: aload_0
      93: getfield      #7                  // Field learners:Ljava/util/HashSet;
      96: dup
      97: astore_2
      98: monitorenter
      99: aload_0
     100: getfield      #7                  // Field learners:Ljava/util/HashSet;
     103: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
     106: astore_3
     107: aload_3
     108: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     113: ifeq          141
     116: aload_3
     117: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     122: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
     125: astore        4
     127: aload_3
     128: invokeinterface #218,  1          // InterfaceMethod java/util/Iterator.remove:()V
     133: aload         4
     135: invokevirtual #219                // Method org/apache/zookeeper/server/quorum/LearnerHandler.shutdown:()V
     138: goto          107
     141: aload_2
     142: monitorexit
     143: goto          153
     146: astore        5
     148: aload_2
     149: monitorexit
     150: aload         5
     152: athrow
     153: aload_0
     154: iconst_1
     155: putfield      #212                // Field isShutdown:Z
     158: return
    Exception table:
       from    to  target type
          99   143   146   any
         146   150   146   any

  synchronized void closeSockets();
    Code:
       0: aload_0
       1: getfield      #4                  // Field serverSockets:Ljava/util/List;
       4: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          59
      19: aload_1
      20: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #95                 // class java/net/ServerSocket
      28: astore_2
      29: aload_2
      30: invokevirtual #220                // Method java/net/ServerSocket.isClosed:()Z
      33: ifne          56
      36: aload_2
      37: invokevirtual #221                // Method java/net/ServerSocket.close:()V
      40: goto          56
      43: astore_3
      44: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      47: ldc           #222                // String Ignoring unexpected exception during close {}
      49: aload_2
      50: aload_3
      51: invokeinterface #223,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      56: goto          10
      59: return
    Exception table:
       from    to  target type
          36    40    43   Class java/io/IOException

  private long getDesignatedLeader(org.apache.zookeeper.server.quorum.Leader$Proposal, long);
    Code:
       0: aload_1
       1: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
       4: aload_1
       5: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
       8: invokevirtual #224                // Method java/util/ArrayList.size:()I
      11: iconst_1
      12: isub
      13: invokevirtual #225                // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
      16: checkcast     #177                // class org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair
      19: astore        4
      21: aload         4
      23: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      26: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
      31: aload_0
      32: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      35: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      38: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      41: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      46: ifeq          101
      49: aload         4
      51: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      54: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
      59: aload_0
      60: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      63: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      66: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      69: invokeinterface #226,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      74: checkcast     #227                // class org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer
      77: getfield      #228                // Field org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.addr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
      80: aload_0
      81: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      84: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
      87: invokevirtual #229                // Method org/apache/zookeeper/server/quorum/MultipleAddresses.equals:(Ljava/lang/Object;)Z
      90: ifeq          101
      93: aload_0
      94: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      97: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     100: lreturn
     101: new           #21                 // class java/util/HashSet
     104: dup
     105: aload         4
     107: invokevirtual #230                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getAckset:()Ljava/util/HashSet;
     110: invokespecial #231                // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
     113: astore        5
     115: aload         5
     117: aload_0
     118: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     121: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     124: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     127: invokevirtual #28                 // Method java/util/HashSet.remove:(Ljava/lang/Object;)Z
     130: pop
     131: aload         5
     133: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
     136: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     141: checkcast     #232                // class java/lang/Long
     144: invokevirtual #233                // Method java/lang/Long.longValue:()J
     147: lstore        6
     149: lload_2
     150: lconst_1
     151: ladd
     152: lstore        8
     154: aload_0
     155: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     158: lload         8
     160: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     163: invokeinterface #234,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     168: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     171: astore        10
     173: aload         10
     175: ifnull        301
     178: aload         5
     180: invokevirtual #235                // Method java/util/HashSet.isEmpty:()Z
     183: ifne          301
     186: aload         10
     188: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     191: invokevirtual #176                // Method java/util/ArrayList.iterator:()Ljava/util/Iterator;
     194: astore        11
     196: aload         11
     198: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     203: ifeq          273
     206: aload         11
     208: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     213: checkcast     #177                // class org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair
     216: astore        12
     218: aload         5
     220: aload         12
     222: invokevirtual #230                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getAckset:()Ljava/util/HashSet;
     225: invokevirtual #236                // Method java/util/HashSet.retainAll:(Ljava/util/Collection;)Z
     228: pop
     229: aload         5
     231: invokevirtual #235                // Method java/util/HashSet.isEmpty:()Z
     234: ifeq          240
     237: lload         6
     239: lreturn
     240: aload         5
     242: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
     245: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     250: checkcast     #232                // class java/lang/Long
     253: invokevirtual #233                // Method java/lang/Long.longValue:()J
     256: lstore        6
     258: aload         5
     260: invokevirtual #237                // Method java/util/HashSet.size:()I
     263: iconst_1
     264: if_icmpne     270
     267: lload         6
     269: lreturn
     270: goto          196
     273: lload         8
     275: lconst_1
     276: ladd
     277: lstore        8
     279: aload_0
     280: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     283: lload         8
     285: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     288: invokeinterface #234,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     293: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     296: astore        10
     298: goto          173
     301: lload         6
     303: lreturn

  public synchronized boolean tryToCommit(org.apache.zookeeper.server.quorum.Leader$Proposal, long, java.net.SocketAddress);
    Code:
       0: aload_0
       1: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
       4: lload_2
       5: lconst_1
       6: lsub
       7: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      10: invokeinterface #238,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.containsKey:(Ljava/lang/Object;)Z
      15: ifeq          20
      18: iconst_0
      19: ireturn
      20: aload_1
      21: invokevirtual #239                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.hasAllQuorums:()Z
      24: ifne          29
      27: iconst_0
      28: ireturn
      29: lload_2
      30: aload_0
      31: getfield      #61                 // Field lastCommitted:J
      34: lconst_1
      35: ladd
      36: lcmp
      37: ifeq          75
      40: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      43: ldc           #240                // String Commiting zxid 0x{} from {} noy first!
      45: lload_2
      46: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      49: aload         4
      51: invokeinterface #223,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      56: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      59: ldc           #241                // String First is {}
      61: aload_0
      62: getfield      #61                 // Field lastCommitted:J
      65: lconst_1
      66: ladd
      67: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      70: invokeinterface #242,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      75: aload_0
      76: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
      79: lload_2
      80: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      83: invokeinterface #243,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      88: pop
      89: aload_1
      90: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
      93: ifnull        105
      96: aload_0
      97: getfield      #1                  // Field toBeApplied:Ljava/util/concurrent/ConcurrentLinkedQueue;
     100: aload_1
     101: invokevirtual #245                // Method java/util/concurrent/ConcurrentLinkedQueue.add:(Ljava/lang/Object;)Z
     104: pop
     105: aload_1
     106: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     109: ifnonnull     126
     112: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     115: ldc           #246                // String Going to commit null: {}
     117: aload_1
     118: invokeinterface #242,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     123: goto          319
     126: aload_1
     127: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     130: invokevirtual #247                // Method org/apache/zookeeper/server/Request.getHdr:()Lorg/apache/zookeeper/txn/TxnHeader;
     133: invokevirtual #248                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
     136: bipush        16
     138: if_icmpne     296
     141: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     144: ldc           #250                // String Committing a reconfiguration! {}
     146: aload_0
     147: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     150: invokeinterface #251,  1          // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
     155: invokestatic  #252                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     158: invokeinterface #253,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     163: aload_0
     164: aload_1
     165: lload_2
     166: invokespecial #254                // Method getDesignatedLeader:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;J)J
     169: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     172: astore        5
     174: aload_1
     175: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     178: aload_1
     179: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     182: invokevirtual #224                // Method java/util/ArrayList.size:()I
     185: iconst_1
     186: isub
     187: invokevirtual #225                // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     190: checkcast     #177                // class org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair
     193: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker$QuorumVerifierAcksetPair.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     196: astore        6
     198: aload_0
     199: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     202: aload         6
     204: aload         5
     206: aload_0
     207: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     210: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     213: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     216: iconst_1
     217: invokevirtual #255                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
     220: pop
     221: aload         5
     223: invokevirtual #233                // Method java/lang/Long.longValue:()J
     226: aload_0
     227: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     230: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     233: lcmp
     234: ifeq          273
     237: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     240: ldc_w         #256                // String Committing a reconfiguration (reconfigEnabled=%s); this leader is not the designated leader anymore, setting allowedToCommit=false
     243: iconst_1
     244: anewarray     #153                // class java/lang/Object
     247: dup
     248: iconst_0
     249: aload_0
     250: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     253: invokevirtual #257                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isReconfigEnabled:()Z
     256: invokestatic  #258                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     259: aastore
     260: invokestatic  #155                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     263: invokeinterface #211,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     268: aload_0
     269: iconst_0
     270: putfield      #60                 // Field allowedToCommit:Z
     273: aload_0
     274: lload_2
     275: aload         5
     277: invokevirtual #233                // Method java/lang/Long.longValue:()J
     280: invokevirtual #259                // Method commitAndActivate:(JJ)V
     283: aload_0
     284: aload_1
     285: aload         5
     287: invokevirtual #233                // Method java/lang/Long.longValue:()J
     290: invokevirtual #260                // Method informAndActivate:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;J)V
     293: goto          319
     296: aload_1
     297: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     300: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     303: getfield      #261                // Field org/apache/zookeeper/server/ServerMetrics.QUORUM_ACK_LATENCY:Lorg/apache/zookeeper/metrics/Summary;
     306: invokevirtual #262                // Method org/apache/zookeeper/server/Request.logLatency:(Lorg/apache/zookeeper/metrics/Summary;)V
     309: aload_0
     310: lload_2
     311: invokevirtual #263                // Method commit:(J)V
     314: aload_0
     315: aload_1
     316: invokevirtual #264                // Method inform:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;)V
     319: aload_0
     320: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     323: getfield      #265                // Field org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.commitProcessor:Lorg/apache/zookeeper/server/quorum/CommitProcessor;
     326: aload_1
     327: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     330: invokevirtual #266                // Method org/apache/zookeeper/server/quorum/CommitProcessor.commit:(Lorg/apache/zookeeper/server/Request;)V
     333: aload_0
     334: getfield      #26                 // Field pendingSyncs:Ljava/util/Map;
     337: lload_2
     338: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     341: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     346: ifeq          403
     349: aload_0
     350: getfield      #26                 // Field pendingSyncs:Ljava/util/Map;
     353: lload_2
     354: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     357: invokeinterface #267,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     362: checkcast     #268                // class java/util/List
     365: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     370: astore        5
     372: aload         5
     374: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     379: ifeq          403
     382: aload         5
     384: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     389: checkcast     #269                // class org/apache/zookeeper/server/quorum/LearnerSyncRequest
     392: astore        6
     394: aload_0
     395: aload         6
     397: invokevirtual #270                // Method sendSync:(Lorg/apache/zookeeper/server/quorum/LearnerSyncRequest;)V
     400: goto          372
     403: iconst_1
     404: ireturn

  public synchronized void processAck(long, long, java.net.SocketAddress);
    Code:
       0: aload_0
       1: getfield      #60                 // Field allowedToCommit:Z
       4: ifne          8
       7: return
       8: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      11: invokeinterface #271,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      16: ifeq          112
      19: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      22: ldc_w         #272                // String Ack zxid: 0x{}
      25: lload_3
      26: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      29: invokeinterface #273,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      34: aload_0
      35: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
      38: invokeinterface #274,  1          // InterfaceMethod java/util/concurrent/ConcurrentMap.values:()Ljava/util/Collection;
      43: invokeinterface #275,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      48: astore        6
      50: aload         6
      52: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      57: ifeq          101
      60: aload         6
      62: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      67: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
      70: astore        7
      72: aload         7
      74: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      77: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
      80: lstore        8
      82: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      85: ldc_w         #276                // String outstanding proposal: 0x{}
      88: lload         8
      90: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      93: invokeinterface #273,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      98: goto          50
     101: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     104: ldc_w         #277                // String outstanding proposals all
     107: invokeinterface #278,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     112: lload_3
     113: ldc2_w        #144                // long 4294967295l
     116: land
     117: lconst_0
     118: lcmp
     119: ifne          123
     122: return
     123: aload_0
     124: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     127: invokeinterface #251,  1          // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
     132: ifne          147
     135: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     138: ldc_w         #279                // String outstanding is 0
     141: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     146: return
     147: aload_0
     148: getfield      #61                 // Field lastCommitted:J
     151: lload_3
     152: lcmp
     153: iflt          179
     156: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     159: ldc_w         #280                // String proposal has already been committed, pzxid: 0x{} zxid: 0x{}
     162: aload_0
     163: getfield      #61                 // Field lastCommitted:J
     166: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     169: lload_3
     170: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     173: invokeinterface #281,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     178: return
     179: aload_0
     180: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     183: lload_3
     184: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     187: invokeinterface #234,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     192: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     195: astore        6
     197: aload         6
     199: ifnonnull     220
     202: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     205: ldc_w         #282                // String Trying to commit future proposal: zxid 0x{} from {}
     208: lload_3
     209: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     212: aload         5
     214: invokeinterface #223,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     219: return
     220: getstatic     #5                  // Field ackLoggingFrequency:I
     223: ifle          255
     226: lload_3
     227: getstatic     #5                  // Field ackLoggingFrequency:I
     230: i2l
     231: lrem
     232: lconst_0
     233: lcmp
     234: ifne          255
     237: aload         6
     239: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     242: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     245: getfield      #283                // Field org/apache/zookeeper/server/ServerMetrics.ACK_LATENCY:Lorg/apache/zookeeper/metrics/SummarySet;
     248: lload_1
     249: invokestatic  #284                // Method java/lang/Long.toString:(J)Ljava/lang/String;
     252: invokevirtual #285                // Method org/apache/zookeeper/server/Request.logLatency:(Lorg/apache/zookeeper/metrics/SummarySet;Ljava/lang/String;)V
     255: aload         6
     257: lload_1
     258: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     261: invokevirtual #286                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addAck:(Ljava/lang/Long;)Z
     264: pop
     265: aload_0
     266: aload         6
     268: lload_3
     269: aload         5
     271: invokevirtual #287                // Method tryToCommit:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;JLjava/net/SocketAddress;)Z
     274: istore        7
     276: iload         7
     278: ifeq          369
     281: aload         6
     283: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     286: ifnull        369
     289: aload         6
     291: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
     294: invokevirtual #247                // Method org/apache/zookeeper/server/Request.getHdr:()Lorg/apache/zookeeper/txn/TxnHeader;
     297: invokevirtual #248                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
     300: bipush        16
     302: if_icmpne     369
     305: lload_3
     306: lstore        8
     308: aload_0
     309: getfield      #60                 // Field allowedToCommit:Z
     312: ifeq          369
     315: iload         7
     317: ifeq          369
     320: aload         6
     322: ifnull        369
     325: lload         8
     327: lconst_1
     328: ladd
     329: lstore        8
     331: aload_0
     332: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     335: lload         8
     337: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     340: invokeinterface #234,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     345: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     348: astore        6
     350: aload         6
     352: ifnull        308
     355: aload_0
     356: aload         6
     358: lload         8
     360: aconst_null
     361: invokevirtual #287                // Method tryToCommit:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;JLjava/net/SocketAddress;)Z
     364: istore        7
     366: goto          308
     369: return

  void sendPacket(org.apache.zookeeper.server.quorum.QuorumPacket);
    Code:
       0: aload_0
       1: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #10                 // Field forwardingFollowers:Ljava/util/HashSet;
      11: invokevirtual #12                 // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      14: astore_3
      15: aload_3
      16: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          44
      24: aload_3
      25: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      33: astore        4
      35: aload         4
      37: aload_1
      38: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      41: goto          15
      44: aload_2
      45: monitorexit
      46: goto          56
      49: astore        5
      51: aload_2
      52: monitorexit
      53: aload         5
      55: athrow
      56: return
    Exception table:
       from    to  target type
           7    46    49   any
          49    53    49   any

  void sendObserverPacket(org.apache.zookeeper.server.quorum.QuorumPacket);
    Code:
       0: aload_0
       1: invokevirtual #289                // Method getObservingLearners:()Ljava/util/List;
       4: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_2
      10: aload_2
      11: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          37
      19: aload_2
      20: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #15                 // class org/apache/zookeeper/server/quorum/LearnerHandler
      28: astore_3
      29: aload_3
      30: aload_1
      31: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      34: goto          10
      37: return

  public void commit(long);
    Code:
       0: aload_0
       1: dup
       2: astore_3
       3: monitorenter
       4: aload_0
       5: lload_1
       6: putfield      #61                 // Field lastCommitted:J
       9: aload_3
      10: monitorexit
      11: goto          21
      14: astore        4
      16: aload_3
      17: monitorexit
      18: aload         4
      20: athrow
      21: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
      24: dup
      25: iconst_4
      26: lload_1
      27: aconst_null
      28: aconst_null
      29: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      32: astore_3
      33: aload_0
      34: aload_3
      35: invokevirtual #290                // Method sendPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      38: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
      41: getfield      #291                // Field org/apache/zookeeper/server/ServerMetrics.COMMIT_COUNT:Lorg/apache/zookeeper/metrics/Counter;
      44: lconst_1
      45: invokeinterface #292,  3          // InterfaceMethod org/apache/zookeeper/metrics/Counter.add:(J)V
      50: return
    Exception table:
       from    to  target type
           4    11    14   any
          14    18    14   any

  public void commitAndActivate(long, long);
    Code:
       0: aload_0
       1: dup
       2: astore        5
       4: monitorenter
       5: aload_0
       6: lload_1
       7: putfield      #61                 // Field lastCommitted:J
      10: aload         5
      12: monitorexit
      13: goto          24
      16: astore        6
      18: aload         5
      20: monitorexit
      21: aload         6
      23: athrow
      24: bipush        8
      26: newarray       byte
      28: astore        5
      30: aload         5
      32: invokestatic  #293                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      35: astore        6
      37: aload         6
      39: lload_3
      40: invokevirtual #294                // Method java/nio/ByteBuffer.putLong:(J)Ljava/nio/ByteBuffer;
      43: pop
      44: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
      47: dup
      48: bipush        9
      50: lload_1
      51: aload         5
      53: aconst_null
      54: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      57: astore        7
      59: aload_0
      60: aload         7
      62: invokevirtual #290                // Method sendPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      65: return
    Exception table:
       from    to  target type
           5    13    16   any
          16    21    16   any

  public void inform(org.apache.zookeeper.server.quorum.Leader$Proposal);
    Code:
       0: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
       3: dup
       4: bipush        8
       6: aload_1
       7: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
      10: getfield      #295                // Field org/apache/zookeeper/server/Request.zxid:J
      13: aload_1
      14: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      17: invokevirtual #296                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
      20: aconst_null
      21: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      24: astore_2
      25: aload_0
      26: aload_2
      27: invokevirtual #297                // Method sendObserverPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      30: return

  public static org.apache.zookeeper.server.quorum.QuorumPacket buildInformAndActivePacket(long, long, byte[]);
    Code:
       0: aload         4
       2: arraylength
       3: bipush        8
       5: iadd
       6: newarray       byte
       8: astore        5
      10: aload         5
      12: invokestatic  #293                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      15: astore        6
      17: aload         6
      19: lload_2
      20: invokevirtual #294                // Method java/nio/ByteBuffer.putLong:(J)Ljava/nio/ByteBuffer;
      23: pop
      24: aload         6
      26: aload         4
      28: invokevirtual #298                // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
      31: pop
      32: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
      35: dup
      36: bipush        19
      38: lload_0
      39: aload         5
      41: aconst_null
      42: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      45: areturn

  public void informAndActivate(org.apache.zookeeper.server.quorum.Leader$Proposal, long);
    Code:
       0: aload_0
       1: aload_1
       2: getfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
       5: getfield      #295                // Field org/apache/zookeeper/server/Request.zxid:J
       8: lload_2
       9: aload_1
      10: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      13: invokevirtual #296                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
      16: invokestatic  #299                // Method buildInformAndActivePacket:(JJ[B)Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      19: invokevirtual #297                // Method sendObserverPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      22: return

  public synchronized long getLastProposed();
    Code:
       0: aload_0
       1: getfield      #138                // Field lastProposed:J
       4: lreturn

  public long getEpoch();
    Code:
       0: aload_0
       1: getfield      #138                // Field lastProposed:J
       4: invokestatic  #300                // Method org/apache/zookeeper/server/util/ZxidUtils.getEpochFromZxid:(J)J
       7: lreturn

  public org.apache.zookeeper.server.quorum.Leader$Proposal propose(org.apache.zookeeper.server.Request) throws org.apache.zookeeper.server.quorum.Leader$XidRolloverException;
    Code:
       0: aload_1
       1: getfield      #295                // Field org/apache/zookeeper/server/Request.zxid:J
       4: ldc2_w        #144                // long 4294967295l
       7: land
       8: ldc2_w        #144                // long 4294967295l
      11: lcmp
      12: ifne          33
      15: ldc_w         #301                // String zxid lower 32 bits have rolled over, forcing re-election, and therefore new epoch start
      18: astore_2
      19: aload_0
      20: aload_2
      21: invokevirtual #172                // Method shutdown:(Ljava/lang/String;)V
      24: new           #302                // class org/apache/zookeeper/server/quorum/Leader$XidRolloverException
      27: dup
      28: aload_2
      29: invokespecial #303                // Method org/apache/zookeeper/server/quorum/Leader$XidRolloverException."<init>":(Ljava/lang/String;)V
      32: athrow
      33: aload_1
      34: invokestatic  #304                // Method org/apache/zookeeper/server/util/SerializeUtils.serializeRequest:(Lorg/apache/zookeeper/server/Request;)[B
      37: astore_2
      38: aload_0
      39: getfield      #6                  // Field proposalStats:Lorg/apache/zookeeper/server/quorum/BufferStats;
      42: aload_2
      43: arraylength
      44: invokevirtual #305                // Method org/apache/zookeeper/server/quorum/BufferStats.setLastBufferSize:(I)V
      47: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
      50: dup
      51: iconst_2
      52: aload_1
      53: getfield      #295                // Field org/apache/zookeeper/server/Request.zxid:J
      56: aload_2
      57: aconst_null
      58: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      61: astore_3
      62: new           #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
      65: dup
      66: invokespecial #56                 // Method org/apache/zookeeper/server/quorum/Leader$Proposal."<init>":()V
      69: astore        4
      71: aload         4
      73: aload_3
      74: putfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      77: aload         4
      79: aload_1
      80: putfield      #244                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.request:Lorg/apache/zookeeper/server/Request;
      83: aload_0
      84: dup
      85: astore        5
      87: monitorenter
      88: aload         4
      90: aload_0
      91: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      94: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      97: invokevirtual #162                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     100: aload_1
     101: invokevirtual #247                // Method org/apache/zookeeper/server/Request.getHdr:()Lorg/apache/zookeeper/txn/TxnHeader;
     104: invokevirtual #248                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
     107: bipush        16
     109: if_icmpne     124
     112: aload_0
     113: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     116: aload_1
     117: getfield      #306                // Field org/apache/zookeeper/server/Request.qv:Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     120: iconst_1
     121: invokevirtual #159                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLastSeenQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Z)V
     124: aload_0
     125: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     128: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     131: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     136: aload_0
     137: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     140: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     143: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
     148: lcmp
     149: ifge          164
     152: aload         4
     154: aload_0
     155: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     158: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     161: invokevirtual #162                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     164: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     167: ldc_w         #307                // String Proposing:: {}
     170: aload_1
     171: invokeinterface #253,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     176: aload_0
     177: aload         4
     179: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
     182: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     185: putfield      #138                // Field lastProposed:J
     188: aload_0
     189: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     192: aload_0
     193: getfield      #138                // Field lastProposed:J
     196: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     199: aload         4
     201: invokeinterface #308,  3          // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     206: pop
     207: aload_0
     208: aload_3
     209: invokevirtual #290                // Method sendPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     212: aload         5
     214: monitorexit
     215: goto          226
     218: astore        6
     220: aload         5
     222: monitorexit
     223: aload         6
     225: athrow
     226: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     229: getfield      #309                // Field org/apache/zookeeper/server/ServerMetrics.PROPOSAL_COUNT:Lorg/apache/zookeeper/metrics/Counter;
     232: lconst_1
     233: invokeinterface #292,  3          // InterfaceMethod org/apache/zookeeper/metrics/Counter.add:(J)V
     238: aload         4
     240: areturn
    Exception table:
       from    to  target type
          88   215   218   any
         218   223   218   any

  public synchronized void processSync(org.apache.zookeeper.server.quorum.LearnerSyncRequest);
    Code:
       0: aload_0
       1: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
       4: invokeinterface #310,  1          // InterfaceMethod java/util/concurrent/ConcurrentMap.isEmpty:()Z
       9: ifeq          20
      12: aload_0
      13: aload_1
      14: invokevirtual #270                // Method sendSync:(Lorg/apache/zookeeper/server/quorum/LearnerSyncRequest;)V
      17: goto          78
      20: aload_0
      21: getfield      #26                 // Field pendingSyncs:Ljava/util/Map;
      24: aload_0
      25: getfield      #138                // Field lastProposed:J
      28: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      31: invokeinterface #226,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      36: checkcast     #268                // class java/util/List
      39: astore_2
      40: aload_2
      41: ifnonnull     52
      44: new           #8                  // class java/util/ArrayList
      47: dup
      48: invokespecial #11                 // Method java/util/ArrayList."<init>":()V
      51: astore_2
      52: aload_2
      53: aload_1
      54: invokeinterface #18,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      59: pop
      60: aload_0
      61: getfield      #26                 // Field pendingSyncs:Ljava/util/Map;
      64: aload_0
      65: getfield      #138                // Field lastProposed:J
      68: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      71: aload_2
      72: invokeinterface #311,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      77: pop
      78: return

  public void sendSync(org.apache.zookeeper.server.quorum.LearnerSyncRequest);
    Code:
       0: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
       3: dup
       4: bipush        7
       6: lconst_0
       7: aconst_null
       8: aconst_null
       9: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      12: astore_2
      13: aload_1
      14: getfield      #312                // Field org/apache/zookeeper/server/quorum/LearnerSyncRequest.fh:Lorg/apache/zookeeper/server/quorum/LearnerHandler;
      17: aload_2
      18: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      21: return

  public synchronized long startForwarding(org.apache.zookeeper.server.quorum.LearnerHandler, long);
    Code:
       0: aload_0
       1: getfield      #138                // Field lastProposed:J
       4: lload_2
       5: lcmp
       6: ifle          195
       9: aload_0
      10: getfield      #1                  // Field toBeApplied:Ljava/util/concurrent/ConcurrentLinkedQueue;
      13: invokevirtual #313                // Method java/util/concurrent/ConcurrentLinkedQueue.iterator:()Ljava/util/Iterator;
      16: astore        4
      18: aload         4
      20: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      25: ifeq          94
      28: aload         4
      30: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      35: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
      38: astore        5
      40: aload         5
      42: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      45: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
      48: lload_2
      49: lcmp
      50: ifgt          56
      53: goto          18
      56: aload_1
      57: aload         5
      59: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      62: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      65: new           #139                // class org/apache/zookeeper/server/quorum/QuorumPacket
      68: dup
      69: iconst_4
      70: aload         5
      72: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      75: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
      78: aconst_null
      79: aconst_null
      80: invokespecial #141                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      83: astore        6
      85: aload_1
      86: aload         6
      88: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      91: goto          18
      94: aload_1
      95: invokevirtual #314                // Method org/apache/zookeeper/server/quorum/LearnerHandler.getLearnerType:()Lorg/apache/zookeeper/server/quorum/QuorumPeer$LearnerType;
      98: getstatic     #315                // Field org/apache/zookeeper/server/quorum/QuorumPeer$LearnerType.PARTICIPANT:Lorg/apache/zookeeper/server/quorum/QuorumPeer$LearnerType;
     101: if_acmpne     195
     104: new           #8                  // class java/util/ArrayList
     107: dup
     108: aload_0
     109: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     112: invokeinterface #316,  1          // InterfaceMethod java/util/concurrent/ConcurrentMap.keySet:()Ljava/util/Set;
     117: invokespecial #9                  // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
     120: astore        4
     122: aload         4
     124: invokestatic  #317                // Method java/util/Collections.sort:(Ljava/util/List;)V
     127: aload         4
     129: invokeinterface #174,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     134: astore        5
     136: aload         5
     138: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     143: ifeq          195
     146: aload         5
     148: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     153: checkcast     #232                // class java/lang/Long
     156: astore        6
     158: aload         6
     160: invokevirtual #233                // Method java/lang/Long.longValue:()J
     163: lload_2
     164: lcmp
     165: ifgt          171
     168: goto          136
     171: aload_1
     172: aload_0
     173: getfield      #52                 // Field outstandingProposals:Ljava/util/concurrent/ConcurrentMap;
     176: aload         6
     178: invokeinterface #234,  2          // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     183: checkcast     #55                 // class org/apache/zookeeper/server/quorum/Leader$Proposal
     186: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
     189: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     192: goto          136
     195: aload_1
     196: invokevirtual #314                // Method org/apache/zookeeper/server/quorum/LearnerHandler.getLearnerType:()Lorg/apache/zookeeper/server/quorum/QuorumPeer$LearnerType;
     199: getstatic     #315                // Field org/apache/zookeeper/server/quorum/QuorumPeer$LearnerType.PARTICIPANT:Lorg/apache/zookeeper/server/quorum/QuorumPeer$LearnerType;
     202: if_acmpne     213
     205: aload_0
     206: aload_1
     207: invokevirtual #318                // Method addForwardingFollower:(Lorg/apache/zookeeper/server/quorum/LearnerHandler;)V
     210: goto          218
     213: aload_0
     214: aload_1
     215: invokespecial #319                // Method addObserverLearnerHandler:(Lorg/apache/zookeeper/server/quorum/LearnerHandler;)V
     218: aload_0
     219: getfield      #138                // Field lastProposed:J
     222: lreturn

  public void waitForStartup() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      11: invokevirtual #320                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.isRunning:()Z
      14: ifne          39
      17: invokestatic  #321                // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      20: invokevirtual #322                // Method java/lang/Thread.isInterrupted:()Z
      23: ifne          39
      26: aload_0
      27: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      30: ldc2_w        #323                // long 20l
      33: invokevirtual #198                // Method java/lang/Object.wait:(J)V
      36: goto          7
      39: aload_1
      40: monitorexit
      41: goto          49
      44: astore_2
      45: aload_1
      46: monitorexit
      47: aload_2
      48: athrow
      49: return
    Exception table:
       from    to  target type
           7    41    44   any
          44    47    44   any

  public static void setMaxTimeToWaitForEpoch(int);
    Code:
       0: iload_0
       1: putstatic     #325                // Field maxTimeToWaitForEpoch:I
       4: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
       7: ldc_w         #326                // String Set {} to {}ms
      10: ldc_w         #327                // String zookeeper.leader.maxTimeToWaitForEpoch
      13: getstatic     #325                // Field maxTimeToWaitForEpoch:I
      16: invokestatic  #252                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      19: invokeinterface #115,  4          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      24: return

  private void quitLeading();
    Code:
       0: aload_0
       1: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: iconst_1
       9: putfield      #63                 // Field quitWaitForEpoch:Z
      12: aload_0
      13: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
      16: invokevirtual #328                // Method java/lang/Object.notifyAll:()V
      19: aload_1
      20: monitorexit
      21: goto          29
      24: astore_2
      25: aload_1
      26: monitorexit
      27: aload_2
      28: athrow
      29: invokestatic  #109                // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
      32: getfield      #329                // Field org/apache/zookeeper/server/ServerMetrics.QUIT_LEADING_DUE_TO_DISLOYAL_VOTER:Lorg/apache/zookeeper/metrics/Counter;
      35: lconst_1
      36: invokeinterface #292,  3          // InterfaceMethod org/apache/zookeeper/metrics/Counter.add:(J)V
      41: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      44: ldc_w         #330                // String Quit leading due to voter changed mind.
      47: invokeinterface #211,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      52: return
    Exception table:
       from    to  target type
           7    21    24   any
          24    27    24   any

  public void setLeadingVoteSet(org.apache.zookeeper.server.quorum.SyncedLearnerTracker);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #331                // Field voteSet:Lorg/apache/zookeeper/server/quorum/SyncedLearnerTracker;
       5: return

  public void reportLookingSid(long);
    Code:
       0: getstatic     #325                // Field maxTimeToWaitForEpoch:I
       3: iflt          22
       6: aload_0
       7: getfield      #64                 // Field timeStartWaitForEpoch:J
      10: lconst_0
      11: lcmp
      12: iflt          22
      15: aload_0
      16: getfield      #59                 // Field waitingForNewEpoch:Z
      19: ifne          23
      22: return
      23: aload_0
      24: getfield      #331                // Field voteSet:Lorg/apache/zookeeper/server/quorum/SyncedLearnerTracker;
      27: ifnull        41
      30: aload_0
      31: getfield      #331                // Field voteSet:Lorg/apache/zookeeper/server/quorum/SyncedLearnerTracker;
      34: lload_1
      35: invokevirtual #332                // Method org/apache/zookeeper/server/quorum/SyncedLearnerTracker.hasSid:(J)Z
      38: ifne          42
      41: return
      42: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
      45: aload_0
      46: getfield      #64                 // Field timeStartWaitForEpoch:J
      49: lsub
      50: getstatic     #325                // Field maxTimeToWaitForEpoch:I
      53: i2l
      54: lcmp
      55: ifle          62
      58: aload_0
      59: invokespecial #333                // Method quitLeading:()V
      62: return

  public long getEpochToPropose(long, long) throws java.lang.InterruptedException, java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
       4: dup
       5: astore        5
       7: monitorenter
       8: aload_0
       9: getfield      #59                 // Field waitingForNewEpoch:Z
      12: ifne          23
      15: aload_0
      16: getfield      #58                 // Field epoch:J
      19: aload         5
      21: monitorexit
      22: lreturn
      23: lload_3
      24: aload_0
      25: getfield      #58                 // Field epoch:J
      28: lcmp
      29: iflt          39
      32: aload_0
      33: lload_3
      34: lconst_1
      35: ladd
      36: putfield      #58                 // Field epoch:J
      39: aload_0
      40: lload_1
      41: invokespecial #17                 // Method isParticipant:(J)Z
      44: ifeq          61
      47: aload_0
      48: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
      51: lload_1
      52: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      55: invokeinterface #24,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      60: pop
      61: aload_0
      62: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      65: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      68: astore        6
      70: aload_0
      71: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
      74: aload_0
      75: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      78: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      81: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      84: invokeinterface #334,  2          // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
      89: ifeq          132
      92: aload         6
      94: aload_0
      95: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
      98: invokeinterface #36,  2           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.containsQuorum:(Ljava/util/Set;)Z
     103: ifeq          132
     106: aload_0
     107: iconst_0
     108: putfield      #59                 // Field waitingForNewEpoch:Z
     111: aload_0
     112: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     115: aload_0
     116: getfield      #58                 // Field epoch:J
     119: invokevirtual #335                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setAcceptedEpoch:(J)V
     122: aload_0
     123: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
     126: invokevirtual #328                // Method java/lang/Object.notifyAll:()V
     129: goto          240
     132: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     135: lstore        7
     137: lload_1
     138: aload_0
     139: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     142: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     145: lcmp
     146: ifne          155
     149: aload_0
     150: lload         7
     152: putfield      #64                 // Field timeStartWaitForEpoch:J
     155: lload         7
     157: lstore        9
     159: lload         7
     161: aload_0
     162: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     165: invokevirtual #336                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getInitLimit:()I
     168: aload_0
     169: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     172: invokevirtual #337                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getTickTime:()I
     175: imul
     176: i2l
     177: ladd
     178: lstore        11
     180: aload_0
     181: getfield      #59                 // Field waitingForNewEpoch:Z
     184: ifeq          222
     187: lload         9
     189: lload         11
     191: lcmp
     192: ifge          222
     195: aload_0
     196: getfield      #63                 // Field quitWaitForEpoch:Z
     199: ifne          222
     202: aload_0
     203: getfield      #62                 // Field connectingFollowers:Ljava/util/Set;
     206: lload         11
     208: lload         9
     210: lsub
     211: invokevirtual #198                // Method java/lang/Object.wait:(J)V
     214: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     217: lstore        9
     219: goto          180
     222: aload_0
     223: getfield      #59                 // Field waitingForNewEpoch:Z
     226: ifeq          240
     229: new           #168                // class java/lang/InterruptedException
     232: dup
     233: ldc_w         #338                // String Timeout while waiting for epoch from quorum
     236: invokespecial #339                // Method java/lang/InterruptedException."<init>":(Ljava/lang/String;)V
     239: athrow
     240: aload_0
     241: getfield      #58                 // Field epoch:J
     244: aload         5
     246: monitorexit
     247: lreturn
     248: astore        13
     250: aload         5
     252: monitorexit
     253: aload         13
     255: athrow
    Exception table:
       from    to  target type
           8    22   248   any
          23   247   248   any
         248   253   248   any

  public org.apache.zookeeper.server.ZKDatabase getZKDatabase();
    Code:
       0: aload_0
       1: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
       4: invokevirtual #340                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
       7: areturn

  public void waitForEpochAck(long, org.apache.zookeeper.server.quorum.StateSummary) throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
       4: dup
       5: astore        4
       7: monitorenter
       8: aload_0
       9: getfield      #66                 // Field electionFinished:Z
      12: ifeq          19
      15: aload         4
      17: monitorexit
      18: return
      19: aload_3
      20: invokevirtual #341                // Method org/apache/zookeeper/server/quorum/StateSummary.getCurrentEpoch:()J
      23: ldc2_w        #46                 // long -1l
      26: lcmp
      27: ifeq          130
      30: aload_3
      31: aload_0
      32: getfield      #129                // Field leaderStateSummary:Lorg/apache/zookeeper/server/quorum/StateSummary;
      35: invokevirtual #342                // Method org/apache/zookeeper/server/quorum/StateSummary.isMoreRecentThan:(Lorg/apache/zookeeper/server/quorum/StateSummary;)Z
      38: ifeq          97
      41: new           #83                 // class java/io/IOException
      44: dup
      45: new           #84                 // class java/lang/StringBuilder
      48: dup
      49: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
      52: ldc_w         #343                // String Follower is ahead of the leader, leader summary:
      55: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: aload_0
      59: getfield      #129                // Field leaderStateSummary:Lorg/apache/zookeeper/server/quorum/StateSummary;
      62: invokevirtual #341                // Method org/apache/zookeeper/server/quorum/StateSummary.getCurrentEpoch:()J
      65: invokevirtual #344                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      68: ldc_w         #345                // String  (current epoch),
      71: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      74: aload_0
      75: getfield      #129                // Field leaderStateSummary:Lorg/apache/zookeeper/server/quorum/StateSummary;
      78: invokevirtual #346                // Method org/apache/zookeeper/server/quorum/StateSummary.getLastZxid:()J
      81: invokevirtual #344                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      84: ldc_w         #347                // String  (last zxid)
      87: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      90: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      93: invokespecial #90                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      96: athrow
      97: aload_3
      98: invokevirtual #346                // Method org/apache/zookeeper/server/quorum/StateSummary.getLastZxid:()J
     101: ldc2_w        #46                 // long -1l
     104: lcmp
     105: ifeq          130
     108: aload_0
     109: lload_1
     110: invokespecial #17                 // Method isParticipant:(J)Z
     113: ifeq          130
     116: aload_0
     117: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
     120: lload_1
     121: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     124: invokeinterface #24,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     129: pop
     130: aload_0
     131: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     134: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     137: astore        5
     139: aload_0
     140: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
     143: aload_0
     144: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     147: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     150: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     153: invokeinterface #334,  2          // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     158: ifeq          190
     161: aload         5
     163: aload_0
     164: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
     167: invokeinterface #36,  2           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.containsQuorum:(Ljava/util/Set;)Z
     172: ifeq          190
     175: aload_0
     176: iconst_1
     177: putfield      #66                 // Field electionFinished:Z
     180: aload_0
     181: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
     184: invokevirtual #328                // Method java/lang/Object.notifyAll:()V
     187: goto          273
     190: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     193: lstore        6
     195: lload         6
     197: lstore        8
     199: lload         6
     201: aload_0
     202: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     205: invokevirtual #336                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getInitLimit:()I
     208: aload_0
     209: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     212: invokevirtual #337                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getTickTime:()I
     215: imul
     216: i2l
     217: ladd
     218: lstore        10
     220: aload_0
     221: getfield      #66                 // Field electionFinished:Z
     224: ifne          255
     227: lload         8
     229: lload         10
     231: lcmp
     232: ifge          255
     235: aload_0
     236: getfield      #65                 // Field electingFollowers:Ljava/util/Set;
     239: lload         10
     241: lload         8
     243: lsub
     244: invokevirtual #198                // Method java/lang/Object.wait:(J)V
     247: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     250: lstore        8
     252: goto          220
     255: aload_0
     256: getfield      #66                 // Field electionFinished:Z
     259: ifne          273
     262: new           #168                // class java/lang/InterruptedException
     265: dup
     266: ldc_w         #348                // String Timeout while waiting for epoch to be acked by quorum
     269: invokespecial #339                // Method java/lang/InterruptedException."<init>":(Ljava/lang/String;)V
     272: athrow
     273: aload         4
     275: monitorexit
     276: goto          287
     279: astore        12
     281: aload         4
     283: monitorexit
     284: aload         12
     286: athrow
     287: return
    Exception table:
       from    to  target type
           8    18   279   any
          19   276   279   any
         279   284   279   any

  private java.lang.String getSidSetString(java.util.Set<java.lang.Long>);
    Code:
       0: new           #84                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
       7: astore_2
       8: aload_1
       9: invokeinterface #349,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      14: astore_3
      15: aload_3
      16: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          58
      24: aload_2
      25: aload_3
      26: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      31: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      34: pop
      35: aload_3
      36: invokeinterface #13,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      41: ifne          47
      44: goto          58
      47: aload_2
      48: ldc_w         #350                // String ,
      51: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      54: pop
      55: goto          15
      58: aload_2
      59: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      62: areturn

  private synchronized void startZkServer();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
       5: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
       8: putfield      #61                 // Field lastCommitted:J
      11: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      14: ldc_w         #351                // String Have quorum of supporters, sids: [{}]; starting up and setting last processed zxid: 0x{}
      17: aload_0
      18: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
      21: invokevirtual #170                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.ackSetsToString:()Ljava/lang/String;
      24: aload_0
      25: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      28: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
      31: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      34: invokeinterface #115,  4          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      39: aload_0
      40: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      43: invokevirtual #257                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isReconfigEnabled:()Z
      46: ifeq          131
      49: aload_0
      50: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      53: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      56: astore_1
      57: aload_0
      58: aload_0
      59: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
      62: aload_0
      63: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      66: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
      69: invokespecial #254                // Method getDesignatedLeader:(Lorg/apache/zookeeper/server/quorum/Leader$Proposal;J)J
      72: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      75: astore_2
      76: aload_0
      77: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      80: aload_1
      81: aload_2
      82: aload_0
      83: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      86: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
      89: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      92: iconst_1
      93: invokevirtual #255                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
      96: pop
      97: aload_2
      98: invokevirtual #233                // Method java/lang/Long.longValue:()J
     101: aload_0
     102: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     105: invokevirtual #32                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
     108: lcmp
     109: ifeq          128
     112: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     115: ldc_w         #352                // String This leader is not the designated leader, it will be initialized with allowedToCommit = false
     118: invokeinterface #180,  2          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     123: aload_0
     124: iconst_0
     125: putfield      #60                 // Field allowedToCommit:Z
     128: goto          142
     131: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     134: ldc_w         #353                // String Dynamic reconfig feature is disabled, skip designatedLeader calculation and reconfig processing.
     137: invokeinterface #211,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     142: aload_0
     143: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     146: putfield      #104                // Field leaderStartTime:J
     149: aload_0
     150: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     153: invokevirtual #354                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.startup:()V
     156: aload_0
     157: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     160: aload_0
     161: invokevirtual #355                // Method getEpoch:()J
     164: invokevirtual #356                // Method org/apache/zookeeper/server/quorum/QuorumPeer.updateElectionVote:(J)V
     167: aload_0
     168: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     171: invokevirtual #340                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     174: aload_0
     175: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
     178: invokevirtual #137                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.getZxid:()J
     181: invokevirtual #357                // Method org/apache/zookeeper/server/ZKDatabase.setlastProcessedZxid:(J)V
     184: return

  public void waitForNewLeaderAck(long, long) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
       4: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
       7: dup
       8: astore        5
      10: monitorenter
      11: aload_0
      12: getfield      #38                 // Field quorumFormed:Z
      15: ifeq          22
      18: aload         5
      20: monitorexit
      21: return
      22: aload_0
      23: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
      26: getfield      #142                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.packet:Lorg/apache/zookeeper/server/quorum/QuorumPacket;
      29: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
      32: lstore        6
      34: lload_3
      35: lload         6
      37: lcmp
      38: ifeq          82
      41: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      44: ldc_w         #358                // String NEWLEADER ACK from sid: {} is from a different epoch - current 0x{} received 0x{}
      47: iconst_3
      48: anewarray     #153                // class java/lang/Object
      51: dup
      52: iconst_0
      53: lload_1
      54: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      57: aastore
      58: dup
      59: iconst_1
      60: lload         6
      62: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      65: aastore
      66: dup
      67: iconst_2
      68: lload_3
      69: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      72: aastore
      73: invokeinterface #359,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
      78: aload         5
      80: monitorexit
      81: return
      82: aload_0
      83: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
      86: lload_1
      87: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      90: invokevirtual #286                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.addAck:(Ljava/lang/Long;)Z
      93: pop
      94: aload_0
      95: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
      98: invokevirtual #239                // Method org/apache/zookeeper/server/quorum/Leader$Proposal.hasAllQuorums:()Z
     101: ifeq          122
     104: aload_0
     105: iconst_1
     106: putfield      #38                 // Field quorumFormed:Z
     109: aload_0
     110: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     113: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     116: invokevirtual #328                // Method java/lang/Object.notifyAll:()V
     119: goto          208
     122: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     125: lstore        8
     127: lload         8
     129: lstore        10
     131: lload         8
     133: aload_0
     134: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     137: invokevirtual #336                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getInitLimit:()I
     140: aload_0
     141: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     144: invokevirtual #337                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getTickTime:()I
     147: imul
     148: i2l
     149: ladd
     150: lstore        12
     152: aload_0
     153: getfield      #38                 // Field quorumFormed:Z
     156: ifne          190
     159: lload         10
     161: lload         12
     163: lcmp
     164: ifge          190
     167: aload_0
     168: getfield      #57                 // Field newLeaderProposal:Lorg/apache/zookeeper/server/quorum/Leader$Proposal;
     171: getfield      #175                // Field org/apache/zookeeper/server/quorum/Leader$Proposal.qvAcksetPairs:Ljava/util/ArrayList;
     174: lload         12
     176: lload         10
     178: lsub
     179: invokevirtual #198                // Method java/lang/Object.wait:(J)V
     182: invokestatic  #105                // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     185: lstore        10
     187: goto          152
     190: aload_0
     191: getfield      #38                 // Field quorumFormed:Z
     194: ifne          208
     197: new           #168                // class java/lang/InterruptedException
     200: dup
     201: ldc_w         #360                // String Timeout while waiting for NEWLEADER to be acked by quorum
     204: invokespecial #339                // Method java/lang/InterruptedException."<init>":(Ljava/lang/String;)V
     207: athrow
     208: aload         5
     210: monitorexit
     211: goto          222
     214: astore        14
     216: aload         5
     218: monitorexit
     219: aload         14
     221: athrow
     222: return
    Exception table:
       from    to  target type
          11    21   214   any
          22    81   214   any
          82   211   214   any
         214   219   214   any

  public static java.lang.String getPacketType(int);
    Code:
       0: iload_0
       1: tableswitch   { // 1 to 19
                     1: 128
                     2: 132
                     3: 136
                     4: 140
                     5: 148
                     6: 152
                     7: 156
                     8: 160
                     9: 144
                    10: 108
                    11: 112
                    12: 116
                    13: 92
                    14: 96
                    15: 100
                    16: 104
                    17: 120
                    18: 124
                    19: 164
               default: 168
          }
      92: ldc_w         #361                // String DIFF
      95: areturn
      96: ldc_w         #362                // String TRUNC
      99: areturn
     100: ldc_w         #363                // String SNAP
     103: areturn
     104: ldc_w         #364                // String OBSERVERINFO
     107: areturn
     108: ldc_w         #365                // String NEWLEADER
     111: areturn
     112: ldc_w         #366                // String FOLLOWERINFO
     115: areturn
     116: ldc_w         #367                // String UPTODATE
     119: areturn
     120: ldc_w         #368                // String LEADERINFO
     123: areturn
     124: ldc_w         #369                // String ACKEPOCH
     127: areturn
     128: ldc_w         #370                // String REQUEST
     131: areturn
     132: ldc_w         #371                // String PROPOSAL
     135: areturn
     136: ldc_w         #372                // String ACK
     139: areturn
     140: ldc_w         #373                // String COMMIT
     143: areturn
     144: ldc_w         #374                // String COMMITANDACTIVATE
     147: areturn
     148: ldc_w         #375                // String PING
     151: areturn
     152: ldc_w         #376                // String REVALIDATE
     155: areturn
     156: ldc_w         #377                // String SYNC
     159: areturn
     160: ldc_w         #378                // String INFORM
     163: areturn
     164: ldc_w         #379                // String INFORMANDACTIVATE
     167: areturn
     168: ldc_w         #380                // String UNKNOWN
     171: areturn

  private boolean isRunning();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #381                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isRunning:()Z
       7: ifeq          24
      10: aload_0
      11: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      14: invokevirtual #320                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.isRunning:()Z
      17: ifeq          24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ireturn

  private boolean isParticipant(long);
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
       7: invokeinterface #30,  1           // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVotingMembers:()Ljava/util/Map;
      12: lload_1
      13: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      16: invokeinterface #34,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      21: ireturn

  public int getCurrentTick();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: getfield      #122                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tick:Ljava/util/concurrent/atomic/AtomicInteger;
       7: invokevirtual #382                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      10: ireturn

  public int syncTimeout();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: getfield      #197                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tickTime:I
       7: aload_0
       8: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      11: getfield      #383                // Field org/apache/zookeeper/server/quorum/QuorumPeer.syncLimit:I
      14: imul
      15: ireturn

  public int getTickOfNextAckDeadline();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: getfield      #122                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tick:Ljava/util/concurrent/atomic/AtomicInteger;
       7: invokevirtual #382                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      10: aload_0
      11: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: getfield      #383                // Field org/apache/zookeeper/server/quorum/QuorumPeer.syncLimit:I
      17: iadd
      18: ireturn

  public int getTickOfInitialAckDeadline();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: getfield      #122                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tick:Ljava/util/concurrent/atomic/AtomicInteger;
       7: invokevirtual #382                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      10: aload_0
      11: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: getfield      #384                // Field org/apache/zookeeper/server/quorum/QuorumPeer.initLimit:I
      17: iadd
      18: aload_0
      19: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      22: getfield      #383                // Field org/apache/zookeeper/server/quorum/QuorumPeer.syncLimit:I
      25: iadd
      26: ireturn

  public long getAndDecrementFollowerCounter();
    Code:
       0: aload_0
       1: getfield      #49                 // Field followerCounter:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #385                // Method java/util/concurrent/atomic/AtomicLong.getAndDecrement:()J
       7: lreturn

  public void touch(long, int);
    Code:
       0: aload_0
       1: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
       4: lload_1
       5: iload_3
       6: invokevirtual #386                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.touch:(JI)Z
       9: pop
      10: return

  public void submitLearnerRequest(org.apache.zookeeper.server.Request);
    Code:
       0: aload_0
       1: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
       4: aload_1
       5: invokevirtual #387                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.submitLearnerRequest:(Lorg/apache/zookeeper/server/Request;)V
       8: return

  public long getQuorumVerifierVersion();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
       7: invokeinterface #151,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
      12: lreturn

  public java.lang.String getPeerInfo(long);
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #388                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getView:()Ljava/util/Map;
       7: lload_1
       8: invokestatic  #33                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      11: invokeinterface #226,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      16: checkcast     #227                // class org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer
      19: astore_3
      20: aload_3
      21: ifnonnull     30
      24: ldc_w         #389                // String
      27: goto          34
      30: aload_3
      31: invokevirtual #390                // Method org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.toString:()Ljava/lang/String;
      34: areturn

  public byte[] getQuorumVerifierBytes();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #149                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastSeenQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
       7: invokeinterface #154,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.toString:()Ljava/lang/String;
      12: invokevirtual #391                // Method java/lang/String.getBytes:()[B
      15: areturn

  public org.apache.zookeeper.server.quorum.auth.QuorumAuthServer getQuorumAuthServer();
    Code:
       0: aload_0
       1: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: ifnonnull     11
       7: aconst_null
       8: goto          18
      11: aload_0
      12: getfield      #31                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      15: getfield      #392                // Field org/apache/zookeeper/server/quorum/QuorumPeer.authServer:Lorg/apache/zookeeper/server/quorum/auth/QuorumAuthServer;
      18: areturn

  public void revalidateSession(org.apache.zookeeper.server.quorum.QuorumPacket, org.apache.zookeeper.server.quorum.LearnerHandler) throws java.io.IOException;
    Code:
       0: new           #393                // class java/io/ByteArrayInputStream
       3: dup
       4: aload_1
       5: invokevirtual #296                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
       8: invokespecial #394                // Method java/io/ByteArrayInputStream."<init>":([B)V
      11: astore_3
      12: new           #395                // class java/io/DataInputStream
      15: dup
      16: aload_3
      17: invokespecial #396                // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
      20: astore        4
      22: aload         4
      24: invokevirtual #397                // Method java/io/DataInputStream.readLong:()J
      27: lstore        5
      29: aload         4
      31: invokevirtual #398                // Method java/io/DataInputStream.readInt:()I
      34: istore        7
      36: new           #399                // class java/io/ByteArrayOutputStream
      39: dup
      40: invokespecial #400                // Method java/io/ByteArrayOutputStream."<init>":()V
      43: astore        8
      45: new           #401                // class java/io/DataOutputStream
      48: dup
      49: aload         8
      51: invokespecial #402                // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      54: astore        9
      56: aload         9
      58: lload         5
      60: invokevirtual #403                // Method java/io/DataOutputStream.writeLong:(J)V
      63: aload_0
      64: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      67: lload         5
      69: iload         7
      71: invokevirtual #404                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.checkIfValidGlobalSession:(JI)Z
      74: istore        10
      76: iload         10
      78: ifeq          114
      81: aload_0
      82: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      85: lload         5
      87: aload_2
      88: invokevirtual #405                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.setOwner:(JLjava/lang/Object;)V
      91: goto          114
      94: astore        11
      96: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      99: ldc_w         #407                // String Somehow session 0x{} expired right after being renewed! (impossible)
     102: lload         5
     104: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     107: aload         11
     109: invokeinterface #102,  4          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     114: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     117: invokeinterface #271,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
     122: ifeq          169
     125: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
     128: ldc2_w        #409                // long 32l
     131: new           #84                 // class java/lang/StringBuilder
     134: dup
     135: invokespecial #85                 // Method java/lang/StringBuilder."<init>":()V
     138: ldc_w         #411                // String Session 0x
     141: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: lload         5
     146: invokestatic  #147                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     149: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     152: ldc_w         #412                // String  is valid:
     155: invokevirtual #87                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     158: iload         10
     160: invokevirtual #413                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     163: invokevirtual #89                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     166: invokestatic  #414                // Method org/apache/zookeeper/server/ZooTrace.logTraceMessage:(Lorg/slf4j/Logger;JLjava/lang/String;)V
     169: aload         9
     171: iload         10
     173: invokevirtual #415                // Method java/io/DataOutputStream.writeBoolean:(Z)V
     176: aload_1
     177: aload         8
     179: invokevirtual #416                // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     182: invokevirtual #417                // Method org/apache/zookeeper/server/quorum/QuorumPacket.setData:([B)V
     185: aload_2
     186: aload_1
     187: invokevirtual #288                // Method org/apache/zookeeper/server/quorum/LearnerHandler.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     190: return
    Exception table:
       from    to  target type
          81    91    94   Class org/apache/zookeeper/KeeperException$SessionExpiredException

  public void registerLearnerHandlerBean(org.apache.zookeeper.server.quorum.LearnerHandler, java.net.Socket);
    Code:
       0: new           #418                // class org/apache/zookeeper/server/quorum/LearnerHandlerBean
       3: dup
       4: aload_1
       5: aload_2
       6: invokespecial #419                // Method org/apache/zookeeper/server/quorum/LearnerHandlerBean."<init>":(Lorg/apache/zookeeper/server/quorum/LearnerHandler;Ljava/net/Socket;)V
       9: astore_3
      10: aload_0
      11: getfield      #91                 // Field zk:Lorg/apache/zookeeper/server/quorum/LeaderZooKeeperServer;
      14: aload_3
      15: invokevirtual #420                // Method org/apache/zookeeper/server/quorum/LeaderZooKeeperServer.registerJMX:(Lorg/apache/zookeeper/server/quorum/LearnerHandlerBean;)Z
      18: ifeq          31
      21: aload_0
      22: getfield      #42                 // Field connectionBeans:Ljava/util/concurrent/ConcurrentHashMap;
      25: aload_1
      26: aload_3
      27: invokevirtual #421                // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      30: pop
      31: return

  public void unregisterLearnerHandlerBean(org.apache.zookeeper.server.quorum.LearnerHandler);
    Code:
       0: aload_0
       1: getfield      #42                 // Field connectionBeans:Ljava/util/concurrent/ConcurrentHashMap;
       4: aload_1
       5: invokevirtual #422                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
       8: checkcast     #418                // class org/apache/zookeeper/server/quorum/LearnerHandlerBean
      11: astore_2
      12: aload_2
      13: ifnull        23
      16: invokestatic  #423                // Method org/apache/zookeeper/jmx/MBeanRegistry.getInstance:()Lorg/apache/zookeeper/jmx/MBeanRegistry;
      19: aload_2
      20: invokevirtual #424                // Method org/apache/zookeeper/jmx/MBeanRegistry.unregister:(Lorg/apache/zookeeper/jmx/ZKMBeanInfo;)V
      23: return

  private java.util.Optional lambda$new$0(org.apache.zookeeper.server.quorum.QuorumPeer, java.net.InetSocketAddress);
    Code:
       0: aload_0
       1: aload_2
       2: aload_1
       3: invokevirtual #425                // Method org/apache/zookeeper/server/quorum/QuorumPeer.shouldUsePortUnification:()Z
       6: aload_1
       7: invokevirtual #426                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isSslQuorum:()Z
      10: invokevirtual #427                // Method createServerSocket:(Ljava/net/InetSocketAddress;ZZ)Ljava/util/Optional;
      13: areturn

  static java.util.List access$000(org.apache.zookeeper.server.quorum.Leader);
    Code:
       0: aload_0
       1: getfield      #4                  // Field serverSockets:Ljava/util/List;
       4: areturn

  static org.slf4j.Logger access$100();
    Code:
       0: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static boolean access$500();
    Code:
       0: getstatic     #2                  // Field nodelay:Z
       3: ireturn

  static java.util.concurrent.ConcurrentLinkedQueue access$600(org.apache.zookeeper.server.quorum.Leader);
    Code:
       0: aload_0
       1: getfield      #1                  // Field toBeApplied:Ljava/util/concurrent/ConcurrentLinkedQueue;
       4: areturn

  static {};
    Code:
       0: ldc           #140                // class org/apache/zookeeper/server/quorum/Leader
       2: invokestatic  #428                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
       8: ldc_w         #429                // String leader.nodelay
      11: ldc_w         #430                // String true
      14: invokestatic  #190                // Method java/lang/System.getProperty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      17: ldc_w         #430                // String true
      20: invokevirtual #192                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      23: putstatic     #2                  // Field nodelay:Z
      26: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      29: ldc_w         #431                // String TCP NoDelay set to: {}
      32: getstatic     #2                  // Field nodelay:Z
      35: invokestatic  #258                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      38: invokeinterface #148,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      43: ldc_w         #432                // String zookeeper.leader.ackLoggingFrequency
      46: sipush        1000
      49: invokestatic  #433                // Method java/lang/Integer.getInteger:(Ljava/lang/String;I)Ljava/lang/Integer;
      52: invokevirtual #434                // Method java/lang/Integer.intValue:()I
      55: putstatic     #5                  // Field ackLoggingFrequency:I
      58: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      61: ldc_w         #435                // String {} = {}
      64: ldc_w         #432                // String zookeeper.leader.ackLoggingFrequency
      67: getstatic     #5                  // Field ackLoggingFrequency:I
      70: invokestatic  #252                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      73: invokeinterface #115,  4          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      78: ldc_w         #327                // String zookeeper.leader.maxTimeToWaitForEpoch
      81: iconst_m1
      82: invokestatic  #433                // Method java/lang/Integer.getInteger:(Ljava/lang/String;I)Ljava/lang/Integer;
      85: invokevirtual #434                // Method java/lang/Integer.intValue:()I
      88: putstatic     #325                // Field maxTimeToWaitForEpoch:I
      91: getstatic     #3                  // Field LOG:Lorg/slf4j/Logger;
      94: ldc_w         #436                // String {} = {}ms
      97: ldc_w         #327                // String zookeeper.leader.maxTimeToWaitForEpoch
     100: getstatic     #325                // Field maxTimeToWaitForEpoch:I
     103: invokestatic  #252                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     106: invokeinterface #115,  4          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     111: return
}

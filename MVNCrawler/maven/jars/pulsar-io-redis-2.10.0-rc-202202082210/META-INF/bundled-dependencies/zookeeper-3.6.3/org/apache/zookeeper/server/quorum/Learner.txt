Compiled from "Learner.java"
public class org.apache.zookeeper.server.quorum.Learner {
  org.apache.zookeeper.server.quorum.QuorumPeer self;

  org.apache.zookeeper.server.quorum.LearnerZooKeeperServer zk;

  protected java.io.BufferedOutputStream bufferedOutput;

  protected java.net.Socket sock;

  protected org.apache.zookeeper.server.quorum.MultipleAddresses leaderAddr;

  org.apache.zookeeper.server.quorum.LearnerSender sender;

  protected org.apache.jute.InputArchive leaderIs;

  protected org.apache.jute.OutputArchive leaderOs;

  protected int leaderProtocolVersion;

  private static final int BUFFERED_MESSAGE_SIZE;

  protected final org.apache.zookeeper.server.util.MessageTracker messageTracker;

  protected static final org.slf4j.Logger LOG;

  private static final int leaderConnectDelayDuringRetryMs;

  private static final boolean nodelay;

  public static final java.lang.String LEARNER_ASYNC_SENDING;

  private static boolean asyncSending;

  final java.util.concurrent.ConcurrentHashMap<java.lang.Long, org.apache.zookeeper.server.ServerCnxn> pendingRevalidations;

  public org.apache.zookeeper.server.quorum.Learner();
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aconst_null
       6: putfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
       9: aload_0
      10: iconst_1
      11: putfield      #5                  // Field leaderProtocolVersion:I
      14: aload_0
      15: new           #6                  // class org/apache/zookeeper/server/util/MessageTracker
      18: dup
      19: bipush        10
      21: invokespecial #8                  // Method org/apache/zookeeper/server/util/MessageTracker."<init>":(I)V
      24: putfield      #9                  // Field messageTracker:Lorg/apache/zookeeper/server/util/MessageTracker;
      27: aload_0
      28: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      31: dup
      32: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      35: putfield      #12                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
      38: return

  public java.net.Socket getSocket();
    Code:
       0: aload_0
       1: getfield      #13                 // Field sock:Ljava/net/Socket;
       4: areturn

  public int getPendingRevalidationsCount();
    Code:
       0: aload_0
       1: getfield      #12                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
       4: invokevirtual #14                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
       7: ireturn

  protected static void setAsyncSending(boolean);
    Code:
       0: iload_0
       1: putstatic     #15                 // Field asyncSending:Z
       4: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
       7: ldc           #17                 // String {} = {}
       9: ldc           #18                 // String zookeeper.learner.asyncSending
      11: getstatic     #15                 // Field asyncSending:Z
      14: invokestatic  #19                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      17: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      22: return

  protected static boolean getAsyncSending();
    Code:
       0: getstatic     #15                 // Field asyncSending:Z
       3: ireturn

  void validateSession(org.apache.zookeeper.server.ServerCnxn, long, int) throws java.io.IOException;
    Code:
       0: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #21                 // String Revalidating client: 0x{}
       5: lload_2
       6: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
       9: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      14: new           #24                 // class java/io/ByteArrayOutputStream
      17: dup
      18: invokespecial #25                 // Method java/io/ByteArrayOutputStream."<init>":()V
      21: astore        5
      23: new           #26                 // class java/io/DataOutputStream
      26: dup
      27: aload         5
      29: invokespecial #27                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      32: astore        6
      34: aload         6
      36: lload_2
      37: invokevirtual #28                 // Method java/io/DataOutputStream.writeLong:(J)V
      40: aload         6
      42: iload         4
      44: invokevirtual #29                 // Method java/io/DataOutputStream.writeInt:(I)V
      47: aload         6
      49: invokevirtual #30                 // Method java/io/DataOutputStream.close:()V
      52: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
      55: dup
      56: bipush        6
      58: ldc2_w        #33                 // long -1l
      61: aload         5
      63: invokevirtual #35                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      66: aconst_null
      67: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      70: astore        7
      72: aload_0
      73: getfield      #12                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
      76: lload_2
      77: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      80: aload_1
      81: invokevirtual #38                 // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      84: pop
      85: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      88: invokeinterface #39,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      93: ifeq          127
      96: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      99: ldc2_w        #41                 // long 32l
     102: new           #43                 // class java/lang/StringBuilder
     105: dup
     106: invokespecial #44                 // Method java/lang/StringBuilder."<init>":()V
     109: ldc           #45                 // String To validate session 0x
     111: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     114: lload_2
     115: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     118: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     121: invokevirtual #47                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     124: invokestatic  #48                 // Method org/apache/zookeeper/server/ZooTrace.logTraceMessage:(Lorg/slf4j/Logger;JLjava/lang/String;)V
     127: aload_0
     128: aload         7
     130: iconst_1
     131: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
     134: return

  void writePacket(org.apache.zookeeper.server.quorum.QuorumPacket, boolean) throws java.io.IOException;
    Code:
       0: getstatic     #15                 // Field asyncSending:Z
       3: ifeq          17
       6: aload_0
       7: getfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
      10: aload_1
      11: invokevirtual #50                 // Method org/apache/zookeeper/server/quorum/LearnerSender.queuePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      14: goto          23
      17: aload_0
      18: aload_1
      19: iload_2
      20: invokevirtual #51                 // Method writePacketNow:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
      23: return

  void writePacketNow(org.apache.zookeeper.server.quorum.QuorumPacket, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #52                 // Field leaderOs:Lorg/apache/jute/OutputArchive;
       4: dup
       5: astore_3
       6: monitorenter
       7: aload_1
       8: ifnull        34
      11: aload_0
      12: getfield      #9                  // Field messageTracker:Lorg/apache/zookeeper/server/util/MessageTracker;
      15: aload_1
      16: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
      19: invokevirtual #54                 // Method org/apache/zookeeper/server/util/MessageTracker.trackSent:(I)V
      22: aload_0
      23: getfield      #52                 // Field leaderOs:Lorg/apache/jute/OutputArchive;
      26: aload_1
      27: ldc           #55                 // String packet
      29: invokeinterface #56,  3           // InterfaceMethod org/apache/jute/OutputArchive.writeRecord:(Lorg/apache/jute/Record;Ljava/lang/String;)V
      34: iload_2
      35: ifeq          45
      38: aload_0
      39: getfield      #57                 // Field bufferedOutput:Ljava/io/BufferedOutputStream;
      42: invokevirtual #58                 // Method java/io/BufferedOutputStream.flush:()V
      45: aload_3
      46: monitorexit
      47: goto          57
      50: astore        4
      52: aload_3
      53: monitorexit
      54: aload         4
      56: athrow
      57: return
    Exception table:
       from    to  target type
           7    47    50   any
          50    54    50   any

  protected void startSendingThread();
    Code:
       0: aload_0
       1: new           #59                 // class org/apache/zookeeper/server/quorum/LearnerSender
       4: dup
       5: aload_0
       6: invokespecial #60                 // Method org/apache/zookeeper/server/quorum/LearnerSender."<init>":(Lorg/apache/zookeeper/server/quorum/Learner;)V
       9: putfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
      12: aload_0
      13: getfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
      16: invokevirtual #61                 // Method org/apache/zookeeper/server/quorum/LearnerSender.start:()V
      19: return

  void readPacket(org.apache.zookeeper.server.quorum.QuorumPacket) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #62                 // Field leaderIs:Lorg/apache/jute/InputArchive;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #62                 // Field leaderIs:Lorg/apache/jute/InputArchive;
      11: aload_1
      12: ldc           #55                 // String packet
      14: invokeinterface #63,  3           // InterfaceMethod org/apache/jute/InputArchive.readRecord:(Lorg/apache/jute/Record;Ljava/lang/String;)V
      19: aload_0
      20: getfield      #9                  // Field messageTracker:Lorg/apache/zookeeper/server/util/MessageTracker;
      23: aload_1
      24: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
      27: invokevirtual #64                 // Method org/apache/zookeeper/server/util/MessageTracker.trackReceived:(I)V
      30: aload_2
      31: monitorexit
      32: goto          40
      35: astore_3
      36: aload_2
      37: monitorexit
      38: aload_3
      39: athrow
      40: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      43: invokeinterface #39,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      48: ifeq          79
      51: aload_1
      52: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
      55: iconst_5
      56: if_icmpne     65
      59: ldc2_w        #65                 // long 128l
      62: goto          68
      65: ldc2_w        #67                 // long 16l
      68: lstore_2
      69: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      72: lload_2
      73: bipush        105
      75: aload_1
      76: invokestatic  #69                 // Method org/apache/zookeeper/server/ZooTrace.logQuorumPacket:(Lorg/slf4j/Logger;JCLorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      79: return
    Exception table:
       from    to  target type
           7    32    35   any
          35    38    35   any

  void request(org.apache.zookeeper.server.Request) throws java.io.IOException;
    Code:
       0: new           #24                 // class java/io/ByteArrayOutputStream
       3: dup
       4: invokespecial #25                 // Method java/io/ByteArrayOutputStream."<init>":()V
       7: astore_2
       8: new           #26                 // class java/io/DataOutputStream
      11: dup
      12: aload_2
      13: invokespecial #27                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      16: astore_3
      17: aload_3
      18: aload_1
      19: getfield      #70                 // Field org/apache/zookeeper/server/Request.sessionId:J
      22: invokevirtual #28                 // Method java/io/DataOutputStream.writeLong:(J)V
      25: aload_3
      26: aload_1
      27: getfield      #71                 // Field org/apache/zookeeper/server/Request.cxid:I
      30: invokevirtual #29                 // Method java/io/DataOutputStream.writeInt:(I)V
      33: aload_3
      34: aload_1
      35: getfield      #72                 // Field org/apache/zookeeper/server/Request.type:I
      38: invokevirtual #29                 // Method java/io/DataOutputStream.writeInt:(I)V
      41: aload_1
      42: getfield      #73                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      45: ifnull        95
      48: aload_1
      49: getfield      #73                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      52: invokevirtual #74                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      55: pop
      56: aload_1
      57: getfield      #73                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      60: invokevirtual #75                 // Method java/nio/ByteBuffer.remaining:()I
      63: istore        4
      65: iload         4
      67: newarray       byte
      69: astore        5
      71: aload_1
      72: getfield      #73                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      75: aload         5
      77: invokevirtual #76                 // Method java/nio/ByteBuffer.get:([B)Ljava/nio/ByteBuffer;
      80: pop
      81: aload_1
      82: getfield      #73                 // Field org/apache/zookeeper/server/Request.request:Ljava/nio/ByteBuffer;
      85: invokevirtual #74                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      88: pop
      89: aload_3
      90: aload         5
      92: invokevirtual #77                 // Method java/io/DataOutputStream.write:([B)V
      95: aload_3
      96: invokevirtual #30                 // Method java/io/DataOutputStream.close:()V
      99: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
     102: dup
     103: iconst_1
     104: ldc2_w        #33                 // long -1l
     107: aload_2
     108: invokevirtual #35                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     111: aload_1
     112: getfield      #78                 // Field org/apache/zookeeper/server/Request.authInfo:Ljava/util/List;
     115: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
     118: astore        4
     120: aload_0
     121: aload         4
     123: iconst_1
     124: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
     127: return

  protected org.apache.zookeeper.server.quorum.QuorumPeer$QuorumServer findLeader();
    Code:
       0: aconst_null
       1: astore_1
       2: aload_0
       3: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       6: invokevirtual #80                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getCurrentVote:()Lorg/apache/zookeeper/server/quorum/Vote;
       9: astore_2
      10: aload_0
      11: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: invokevirtual #81                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getView:()Ljava/util/Map;
      17: invokeinterface #82,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      22: invokeinterface #83,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      27: astore_3
      28: aload_3
      29: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      34: ifeq          75
      37: aload_3
      38: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      43: checkcast     #86                 // class org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer
      46: astore        4
      48: aload         4
      50: getfield      #87                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.id:J
      53: aload_2
      54: invokevirtual #88                 // Method org/apache/zookeeper/server/quorum/Vote.getId:()J
      57: lcmp
      58: ifne          72
      61: aload         4
      63: invokevirtual #89                 // Method org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.recreateSocketAddresses:()V
      66: aload         4
      68: astore_1
      69: goto          75
      72: goto          28
      75: aload_1
      76: ifnonnull     96
      79: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      82: ldc           #90                 // String Couldn\'t find the leader with id = {}
      84: aload_2
      85: invokevirtual #88                 // Method org/apache/zookeeper/server/quorum/Vote.getId:()J
      88: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      91: invokeinterface #91,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      96: aload_1
      97: areturn

  protected long nanoTime();
    Code:
       0: invokestatic  #92                 // Method java/lang/System.nanoTime:()J
       3: lreturn

  protected void sockConnect(java.net.Socket, java.net.InetSocketAddress, int) throws java.io.IOException;
    Code:
       0: aload_1
       1: aload_2
       2: iload_3
       3: invokevirtual #93                 // Method java/net/Socket.connect:(Ljava/net/SocketAddress;I)V
       6: return

  protected void connectToLeader(org.apache.zookeeper.server.quorum.MultipleAddresses, java.lang.String) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #94                 // Field leaderAddr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
       5: aload_0
       6: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       9: invokevirtual #95                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.isMultiAddressReachabilityCheckEnabled:()Z
      12: ifeq          23
      15: aload_1
      16: invokevirtual #96                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllReachableAddressesOrAll:()Ljava/util/Set;
      19: astore_3
      20: goto          28
      23: aload_1
      24: invokevirtual #97                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllAddresses:()Ljava/util/Set;
      27: astore_3
      28: aload_3
      29: invokeinterface #98,  1           // InterfaceMethod java/util/Set.size:()I
      34: invokestatic  #99                 // Method java/util/concurrent/Executors.newFixedThreadPool:(I)Ljava/util/concurrent/ExecutorService;
      37: astore        4
      39: new           #100                // class java/util/concurrent/CountDownLatch
      42: dup
      43: aload_3
      44: invokeinterface #98,  1           // InterfaceMethod java/util/Set.size:()I
      49: invokespecial #101                // Method java/util/concurrent/CountDownLatch."<init>":(I)V
      52: astore        5
      54: new           #102                // class java/util/concurrent/atomic/AtomicReference
      57: dup
      58: aconst_null
      59: invokespecial #103                // Method java/util/concurrent/atomic/AtomicReference."<init>":(Ljava/lang/Object;)V
      62: astore        6
      64: aload_3
      65: invokeinterface #104,  1          // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
      70: aload_0
      71: aload         6
      73: aload         5
      75: invokedynamic #105,  0            // InvokeDynamic #0:apply:(Lorg/apache/zookeeper/server/quorum/Learner;Ljava/util/concurrent/atomic/AtomicReference;Ljava/util/concurrent/CountDownLatch;)Ljava/util/function/Function;
      80: invokeinterface #106,  2          // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      85: aload         4
      87: dup
      88: invokevirtual #107                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      91: pop
      92: invokedynamic #108,  0            // InvokeDynamic #1:accept:(Ljava/util/concurrent/ExecutorService;)Ljava/util/function/Consumer;
      97: invokeinterface #109,  2          // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
     102: aload         5
     104: invokevirtual #110                // Method java/util/concurrent/CountDownLatch.await:()V
     107: aload         4
     109: invokeinterface #111,  1          // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     114: aload         4
     116: lconst_1
     117: getstatic     #112                // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     120: invokeinterface #113,  4          // InterfaceMethod java/util/concurrent/ExecutorService.awaitTermination:(JLjava/util/concurrent/TimeUnit;)Z
     125: ifne          138
     128: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     131: ldc           #114                // String not all the LeaderConnector terminated properly
     133: invokeinterface #115,  2          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     138: goto          276
     141: astore        7
     143: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     146: ldc           #117                // String Interrupted while terminating LeaderConnector executor.
     148: aload         7
     150: invokeinterface #118,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     155: goto          276
     158: astore        7
     160: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     163: ldc           #119                // String Interrupted while trying to connect to Leader
     165: aload         7
     167: invokeinterface #120,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     172: aload         4
     174: invokeinterface #111,  1          // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     179: aload         4
     181: lconst_1
     182: getstatic     #112                // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     185: invokeinterface #113,  4          // InterfaceMethod java/util/concurrent/ExecutorService.awaitTermination:(JLjava/util/concurrent/TimeUnit;)Z
     190: ifne          203
     193: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     196: ldc           #114                // String not all the LeaderConnector terminated properly
     198: invokeinterface #115,  2          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     203: goto          276
     206: astore        7
     208: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     211: ldc           #117                // String Interrupted while terminating LeaderConnector executor.
     213: aload         7
     215: invokeinterface #118,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     220: goto          276
     223: astore        8
     225: aload         4
     227: invokeinterface #111,  1          // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     232: aload         4
     234: lconst_1
     235: getstatic     #112                // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     238: invokeinterface #113,  4          // InterfaceMethod java/util/concurrent/ExecutorService.awaitTermination:(JLjava/util/concurrent/TimeUnit;)Z
     243: ifne          256
     246: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     249: ldc           #114                // String not all the LeaderConnector terminated properly
     251: invokeinterface #115,  2          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     256: goto          273
     259: astore        9
     261: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     264: ldc           #117                // String Interrupted while terminating LeaderConnector executor.
     266: aload         9
     268: invokeinterface #118,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     273: aload         8
     275: athrow
     276: aload         6
     278: invokevirtual #121                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     281: ifnonnull     311
     284: new           #122                // class java/io/IOException
     287: dup
     288: new           #43                 // class java/lang/StringBuilder
     291: dup
     292: invokespecial #44                 // Method java/lang/StringBuilder."<init>":()V
     295: ldc           #123                // String Failed connect to
     297: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     300: aload_1
     301: invokevirtual #124                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     304: invokevirtual #47                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     307: invokespecial #125                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     310: athrow
     311: aload_0
     312: aload         6
     314: invokevirtual #121                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     317: checkcast     #126                // class java/net/Socket
     320: putfield      #13                 // Field sock:Ljava/net/Socket;
     323: aload_0
     324: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     327: getfield      #127                // Field org/apache/zookeeper/server/quorum/QuorumPeer.authLearner:Lorg/apache/zookeeper/server/quorum/auth/QuorumAuthLearner;
     330: aload_0
     331: getfield      #13                 // Field sock:Ljava/net/Socket;
     334: aload_2
     335: invokeinterface #128,  3          // InterfaceMethod org/apache/zookeeper/server/quorum/auth/QuorumAuthLearner.authenticate:(Ljava/net/Socket;Ljava/lang/String;)V
     340: aload_0
     341: new           #129                // class java/io/BufferedInputStream
     344: dup
     345: aload_0
     346: getfield      #13                 // Field sock:Ljava/net/Socket;
     349: invokevirtual #130                // Method java/net/Socket.getInputStream:()Ljava/io/InputStream;
     352: invokespecial #131                // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
     355: invokestatic  #132                // Method org/apache/jute/BinaryInputArchive.getArchive:(Ljava/io/InputStream;)Lorg/apache/jute/BinaryInputArchive;
     358: putfield      #62                 // Field leaderIs:Lorg/apache/jute/InputArchive;
     361: aload_0
     362: new           #133                // class java/io/BufferedOutputStream
     365: dup
     366: aload_0
     367: getfield      #13                 // Field sock:Ljava/net/Socket;
     370: invokevirtual #134                // Method java/net/Socket.getOutputStream:()Ljava/io/OutputStream;
     373: invokespecial #135                // Method java/io/BufferedOutputStream."<init>":(Ljava/io/OutputStream;)V
     376: putfield      #57                 // Field bufferedOutput:Ljava/io/BufferedOutputStream;
     379: aload_0
     380: aload_0
     381: getfield      #57                 // Field bufferedOutput:Ljava/io/BufferedOutputStream;
     384: invokestatic  #136                // Method org/apache/jute/BinaryOutputArchive.getArchive:(Ljava/io/OutputStream;)Lorg/apache/jute/BinaryOutputArchive;
     387: putfield      #52                 // Field leaderOs:Lorg/apache/jute/OutputArchive;
     390: getstatic     #15                 // Field asyncSending:Z
     393: ifeq          400
     396: aload_0
     397: invokevirtual #137                // Method startSendingThread:()V
     400: return
    Exception table:
       from    to  target type
         114   138   141   Class java/lang/InterruptedException
         102   107   158   Class java/lang/InterruptedException
         179   203   206   Class java/lang/InterruptedException
         102   107   223   any
         158   172   223   any
         232   256   259   Class java/lang/InterruptedException
         223   225   223   any

  protected java.net.Socket createSocket() throws org.apache.zookeeper.common.X509Exception, java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #138                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isSslQuorum:()Z
       7: ifeq          24
      10: aload_0
      11: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: invokevirtual #139                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getX509Util:()Lorg/apache/zookeeper/common/QuorumX509Util;
      17: invokevirtual #140                // Method org/apache/zookeeper/common/QuorumX509Util.createSSLSocket:()Ljavax/net/ssl/SSLSocket;
      20: astore_1
      21: goto          32
      24: new           #126                // class java/net/Socket
      27: dup
      28: invokespecial #141                // Method java/net/Socket."<init>":()V
      31: astore_1
      32: aload_1
      33: aload_0
      34: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      37: getfield      #142                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tickTime:I
      40: aload_0
      41: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      44: getfield      #143                // Field org/apache/zookeeper/server/quorum/QuorumPeer.initLimit:I
      47: imul
      48: invokevirtual #144                // Method java/net/Socket.setSoTimeout:(I)V
      51: aload_1
      52: areturn

  protected long registerWithLeader(int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #145                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getLastLoggedZxid:()J
       7: lstore_2
       8: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
      11: dup
      12: invokespecial #146                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":()V
      15: astore        4
      17: aload         4
      19: iload_1
      20: invokevirtual #147                // Method org/apache/zookeeper/server/quorum/QuorumPacket.setType:(I)V
      23: aload         4
      25: aload_0
      26: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      29: invokevirtual #148                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
      32: lconst_0
      33: invokestatic  #149                // Method org/apache/zookeeper/server/util/ZxidUtils.makeZxid:(JJ)J
      36: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPacket.setZxid:(J)V
      39: new           #151                // class org/apache/zookeeper/server/quorum/LearnerInfo
      42: dup
      43: aload_0
      44: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      47: invokevirtual #152                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      50: ldc           #153                // int 65536
      52: aload_0
      53: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      56: invokevirtual #154                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
      59: invokeinterface #155,  1          // InterfaceMethod org/apache/zookeeper/server/quorum/flexible/QuorumVerifier.getVersion:()J
      64: invokespecial #156                // Method org/apache/zookeeper/server/quorum/LearnerInfo."<init>":(JIJ)V
      67: astore        5
      69: new           #24                 // class java/io/ByteArrayOutputStream
      72: dup
      73: invokespecial #25                 // Method java/io/ByteArrayOutputStream."<init>":()V
      76: astore        6
      78: aload         6
      80: invokestatic  #136                // Method org/apache/jute/BinaryOutputArchive.getArchive:(Ljava/io/OutputStream;)Lorg/apache/jute/BinaryOutputArchive;
      83: astore        7
      85: aload         7
      87: aload         5
      89: ldc           #157                // String LearnerInfo
      91: invokevirtual #158                // Method org/apache/jute/BinaryOutputArchive.writeRecord:(Lorg/apache/jute/Record;Ljava/lang/String;)V
      94: aload         4
      96: aload         6
      98: invokevirtual #35                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     101: invokevirtual #159                // Method org/apache/zookeeper/server/quorum/QuorumPacket.setData:([B)V
     104: aload_0
     105: aload         4
     107: iconst_1
     108: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
     111: aload_0
     112: aload         4
     114: invokevirtual #160                // Method readPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     117: aload         4
     119: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     122: invokestatic  #162                // Method org/apache/zookeeper/server/util/ZxidUtils.getEpochFromZxid:(J)J
     125: lstore        8
     127: aload         4
     129: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     132: bipush        17
     134: if_icmpne     298
     137: aload_0
     138: aload         4
     140: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
     143: invokestatic  #164                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     146: invokevirtual #165                // Method java/nio/ByteBuffer.getInt:()I
     149: putfield      #5                  // Field leaderProtocolVersion:I
     152: iconst_4
     153: newarray       byte
     155: astore        10
     157: aload         10
     159: invokestatic  #164                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     162: astore        11
     164: lload         8
     166: aload_0
     167: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     170: invokevirtual #148                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     173: lcmp
     174: ifle          203
     177: aload         11
     179: aload_0
     180: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     183: invokevirtual #166                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getCurrentEpoch:()J
     186: l2i
     187: invokevirtual #167                // Method java/nio/ByteBuffer.putInt:(I)Ljava/nio/ByteBuffer;
     190: pop
     191: aload_0
     192: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     195: lload         8
     197: invokevirtual #168                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setAcceptedEpoch:(J)V
     200: goto          269
     203: lload         8
     205: aload_0
     206: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     209: invokevirtual #148                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     212: lcmp
     213: ifne          226
     216: aload         11
     218: iconst_m1
     219: invokevirtual #167                // Method java/nio/ByteBuffer.putInt:(I)Ljava/nio/ByteBuffer;
     222: pop
     223: goto          269
     226: new           #122                // class java/io/IOException
     229: dup
     230: new           #43                 // class java/lang/StringBuilder
     233: dup
     234: invokespecial #44                 // Method java/lang/StringBuilder."<init>":()V
     237: ldc           #169                // String Leaders epoch,
     239: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     242: lload         8
     244: invokevirtual #170                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     247: ldc           #171                // String  is less than accepted epoch,
     249: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     252: aload_0
     253: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     256: invokevirtual #148                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     259: invokevirtual #170                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     262: invokevirtual #47                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     265: invokespecial #125                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     268: athrow
     269: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
     272: dup
     273: bipush        18
     275: lload_2
     276: aload         10
     278: aconst_null
     279: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
     282: astore        12
     284: aload_0
     285: aload         12
     287: iconst_1
     288: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
     291: lload         8
     293: lconst_0
     294: invokestatic  #149                // Method org/apache/zookeeper/server/util/ZxidUtils.makeZxid:(JJ)J
     297: lreturn
     298: lload         8
     300: aload_0
     301: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     304: invokevirtual #148                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     307: lcmp
     308: ifle          320
     311: aload_0
     312: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     315: lload         8
     317: invokevirtual #168                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setAcceptedEpoch:(J)V
     320: aload         4
     322: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     325: bipush        10
     327: if_icmpeq     350
     330: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     333: ldc           #172                // String First packet should have been NEWLEADER
     335: invokeinterface #115,  2          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     340: new           #122                // class java/io/IOException
     343: dup
     344: ldc           #172                // String First packet should have been NEWLEADER
     346: invokespecial #125                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     349: athrow
     350: aload         4
     352: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     355: lreturn

  protected void syncWithLeader(long) throws java.lang.Exception;
    Code:
       0: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
       3: dup
       4: iconst_3
       5: lconst_0
       6: aconst_null
       7: aconst_null
       8: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
      11: astore_3
      12: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
      15: dup
      16: invokespecial #146                // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":()V
      19: astore        4
      21: lload_1
      22: invokestatic  #162                // Method org/apache/zookeeper/server/util/ZxidUtils.getEpochFromZxid:(J)J
      25: lstore        5
      27: aconst_null
      28: astore        7
      30: iconst_1
      31: istore        8
      33: iconst_0
      34: istore        9
      36: aload_0
      37: aload         4
      39: invokevirtual #160                // Method readPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      42: new           #173                // class java/util/ArrayDeque
      45: dup
      46: invokespecial #174                // Method java/util/ArrayDeque."<init>":()V
      49: astore        10
      51: new           #173                // class java/util/ArrayDeque
      54: dup
      55: invokespecial #174                // Method java/util/ArrayDeque."<init>":()V
      58: astore        11
      60: aload_0
      61: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      64: dup
      65: astore        12
      67: monitorenter
      68: aload         4
      70: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
      73: bipush        13
      75: if_icmpne     112
      78: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      81: ldc           #176                // String Getting a diff from the leader 0x{}
      83: aload         4
      85: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
      88: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      91: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      96: aload_0
      97: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     100: getstatic     #177                // Field org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.DIFF:Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
     103: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setSyncMode:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;)V
     106: iconst_0
     107: istore        8
     109: goto          396
     112: aload         4
     114: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     117: bipush        15
     119: if_icmpne     267
     122: aload_0
     123: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     126: getstatic     #179                // Field org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.SNAP:Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
     129: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setSyncMode:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;)V
     132: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     135: ldc           #180                // String Getting a snapshot from leader 0x{}
     137: aload         4
     139: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     142: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     145: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     150: aload_0
     151: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     154: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     157: aload_0
     158: getfield      #62                 // Field leaderIs:Lorg/apache/jute/InputArchive;
     161: invokevirtual #182                // Method org/apache/zookeeper/server/ZKDatabase.deserializeSnapshot:(Lorg/apache/jute/InputArchive;)V
     164: aload_0
     165: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     168: invokevirtual #183                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isReconfigEnabled:()Z
     171: ifne          201
     174: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     177: ldc           #184                // String Reset config node content from local config after deserialization of snapshot.
     179: invokeinterface #185,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     184: aload_0
     185: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     188: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     191: aload_0
     192: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     195: invokevirtual #154                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     198: invokevirtual #186                // Method org/apache/zookeeper/server/ZKDatabase.initConfigInZKDatabase:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     201: aload_0
     202: getfield      #62                 // Field leaderIs:Lorg/apache/jute/InputArchive;
     205: ldc           #187                // String signature
     207: invokeinterface #188,  2          // InterfaceMethod org/apache/jute/InputArchive.readString:(Ljava/lang/String;)Ljava/lang/String;
     212: astore        13
     214: aload         13
     216: ldc           #189                // String BenWasHere
     218: invokevirtual #190                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     221: ifne          246
     224: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     227: ldc           #191                // String Missing signature. Got {}
     229: aload         13
     231: invokeinterface #192,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     236: new           #122                // class java/io/IOException
     239: dup
     240: ldc           #193                // String Missing signature
     242: invokespecial #125                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     245: athrow
     246: aload_0
     247: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     250: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     253: aload         4
     255: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     258: invokevirtual #194                // Method org/apache/zookeeper/server/ZKDatabase.setlastProcessedZxid:(J)V
     261: iconst_1
     262: istore        9
     264: goto          396
     267: aload         4
     269: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     272: bipush        14
     274: if_icmpne     372
     277: aload_0
     278: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     281: getstatic     #195                // Field org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.TRUNC:Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
     284: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setSyncMode:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;)V
     287: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     290: ldc           #196                // String Truncating log to get in sync with the leader 0x{}
     292: aload         4
     294: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     297: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     300: invokeinterface #91,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     305: aload_0
     306: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     309: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     312: aload         4
     314: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     317: invokevirtual #197                // Method org/apache/zookeeper/server/ZKDatabase.truncateLog:(J)Z
     320: istore        13
     322: iload         13
     324: ifne          354
     327: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     330: ldc           #198                // String Not able to truncate the log 0x{}
     332: aload         4
     334: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     337: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     340: invokeinterface #192,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     345: getstatic     #199                // Field org/apache/zookeeper/server/ExitCode.QUORUM_PACKET_ERROR:Lorg/apache/zookeeper/server/ExitCode;
     348: invokevirtual #200                // Method org/apache/zookeeper/server/ExitCode.getValue:()I
     351: invokestatic  #201                // Method org/apache/zookeeper/util/ServiceUtils.requestSystemExit:(I)V
     354: aload_0
     355: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     358: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     361: aload         4
     363: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     366: invokevirtual #194                // Method org/apache/zookeeper/server/ZKDatabase.setlastProcessedZxid:(J)V
     369: goto          396
     372: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     375: ldc           #202                // String Got unexpected packet from leader: {}, exiting ...
     377: aload         4
     379: invokestatic  #203                // Method org/apache/zookeeper/server/quorum/LearnerHandler.packetToString:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)Ljava/lang/String;
     382: invokeinterface #192,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     387: getstatic     #199                // Field org/apache/zookeeper/server/ExitCode.QUORUM_PACKET_ERROR:Lorg/apache/zookeeper/server/ExitCode;
     390: invokevirtual #200                // Method org/apache/zookeeper/server/ExitCode.getValue:()I
     393: invokestatic  #201                // Method org/apache/zookeeper/util/ServiceUtils.requestSystemExit:(I)V
     396: aload_0
     397: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     400: invokevirtual #181                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getZKDatabase:()Lorg/apache/zookeeper/server/ZKDatabase;
     403: aload_0
     404: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     407: invokevirtual #154                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumVerifier:()Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     410: invokevirtual #186                // Method org/apache/zookeeper/server/ZKDatabase.initConfigInZKDatabase:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;)V
     413: aload_0
     414: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     417: invokevirtual #204                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.createSessionTracker:()V
     420: lconst_0
     421: lstore        13
     423: iconst_1
     424: istore        15
     426: iload         8
     428: ifne          435
     431: iconst_1
     432: goto          436
     435: iconst_0
     436: istore        16
     438: aload_0
     439: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     442: invokevirtual #205                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isRunning:()Z
     445: ifeq          1577
     448: aload_0
     449: aload         4
     451: invokevirtual #160                // Method readPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     454: aload         4
     456: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     459: tableswitch   { // 2 to 19
                     2: 544
                     3: 1574
                     4: 714
                     5: 1574
                     6: 1574
                     7: 1574
                     8: 931
                     9: 714
                    10: 1337
                    11: 1574
                    12: 1240
                    13: 1574
                    14: 1574
                    15: 1574
                    16: 1574
                    17: 1574
                    18: 1574
                    19: 931
               default: 1574
          }
     544: new           #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
     547: dup
     548: invokespecial #207                // Method org/apache/zookeeper/server/quorum/Learner$PacketInFlight."<init>":()V
     551: astore        18
     553: aload         4
     555: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
     558: invokestatic  #208                // Method org/apache/zookeeper/server/util/SerializeUtils.deserializeTxn:([B)Lorg/apache/zookeeper/server/TxnLogEntry;
     561: astore        17
     563: aload         18
     565: aload         17
     567: invokevirtual #209                // Method org/apache/zookeeper/server/TxnLogEntry.getHeader:()Lorg/apache/zookeeper/txn/TxnHeader;
     570: putfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     573: aload         18
     575: aload         17
     577: invokevirtual #211                // Method org/apache/zookeeper/server/TxnLogEntry.getTxn:()Lorg/apache/jute/Record;
     580: putfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
     583: aload         18
     585: aload         17
     587: invokevirtual #213                // Method org/apache/zookeeper/server/TxnLogEntry.getDigest:()Lorg/apache/zookeeper/txn/TxnDigest;
     590: putfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
     593: aload         18
     595: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     598: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     601: lload         13
     603: lconst_1
     604: ladd
     605: lcmp
     606: ifeq          637
     609: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     612: ldc           #216                // String Got zxid 0x{} expected 0x{}
     614: aload         18
     616: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     619: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     622: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     625: lload         13
     627: lconst_1
     628: ladd
     629: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     632: invokeinterface #217,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     637: aload         18
     639: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     642: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     645: lstore        13
     647: aload         18
     649: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     652: invokevirtual #218                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
     655: bipush        16
     657: if_icmpne     701
     660: aload         18
     662: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
     665: checkcast     #220                // class org/apache/zookeeper/txn/SetDataTxn
     668: astore        19
     670: aload_0
     671: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     674: new           #221                // class java/lang/String
     677: dup
     678: aload         19
     680: invokevirtual #222                // Method org/apache/zookeeper/txn/SetDataTxn.getData:()[B
     683: invokespecial #223                // Method java/lang/String."<init>":([B)V
     686: invokevirtual #224                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     689: astore        20
     691: aload_0
     692: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     695: aload         20
     697: iconst_1
     698: invokevirtual #225                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLastSeenQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Z)V
     701: aload         11
     703: aload         18
     705: invokeinterface #226,  2          // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
     710: pop
     711: goto          1574
     714: aload         11
     716: invokeinterface #227,  1          // InterfaceMethod java/util/Deque.peekFirst:()Ljava/lang/Object;
     721: checkcast     #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
     724: astore        18
     726: aload         18
     728: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     731: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     734: aload         4
     736: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     739: lcmp
     740: ifne          829
     743: aload         4
     745: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     748: bipush        9
     750: if_icmpne     829
     753: aload_0
     754: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     757: new           #221                // class java/lang/String
     760: dup
     761: aload         18
     763: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
     766: checkcast     #220                // class org/apache/zookeeper/txn/SetDataTxn
     769: invokevirtual #222                // Method org/apache/zookeeper/txn/SetDataTxn.getData:()[B
     772: invokespecial #223                // Method java/lang/String."<init>":([B)V
     775: invokevirtual #224                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     778: astore        19
     780: aload_0
     781: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     784: aload         19
     786: aload         4
     788: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
     791: invokestatic  #164                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     794: invokevirtual #228                // Method java/nio/ByteBuffer.getLong:()J
     797: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     800: aload         4
     802: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     805: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     808: iconst_1
     809: invokevirtual #229                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
     812: istore        20
     814: iload         20
     816: ifeq          829
     819: new           #230                // class java/lang/Exception
     822: dup
     823: ldc           #231                // String changes proposed in reconfig
     825: invokespecial #232                // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     828: athrow
     829: iload         16
     831: ifne          912
     834: aload         18
     836: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     839: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     842: aload         4
     844: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     847: lcmp
     848: ifeq          883
     851: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
     854: ldc           #233                // String Committing 0x{}, but next proposal is 0x{}
     856: aload         4
     858: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     861: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     864: aload         18
     866: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     869: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     872: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     875: invokeinterface #217,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     880: goto          1574
     883: aload_0
     884: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     887: aload         18
     889: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
     892: aload         18
     894: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
     897: invokevirtual #234                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.processTxn:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;)Lorg/apache/zookeeper/server/DataTree$ProcessTxnResult;
     900: pop
     901: aload         11
     903: invokeinterface #235,  1          // InterfaceMethod java/util/Deque.remove:()Ljava/lang/Object;
     908: pop
     909: goto          1574
     912: aload         10
     914: aload         4
     916: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     919: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     922: invokeinterface #226,  2          // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
     927: pop
     928: goto          1574
     931: new           #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
     934: dup
     935: invokespecial #207                // Method org/apache/zookeeper/server/quorum/Learner$PacketInFlight."<init>":()V
     938: astore        19
     940: aload         4
     942: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     945: bipush        19
     947: if_icmpne     1091
     950: aload         4
     952: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
     955: invokestatic  #164                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     958: astore        20
     960: aload         20
     962: invokevirtual #228                // Method java/nio/ByteBuffer.getLong:()J
     965: lstore        21
     967: aload         20
     969: invokevirtual #75                 // Method java/nio/ByteBuffer.remaining:()I
     972: newarray       byte
     974: astore        23
     976: aload         20
     978: aload         23
     980: invokevirtual #76                 // Method java/nio/ByteBuffer.get:([B)Ljava/nio/ByteBuffer;
     983: pop
     984: aload         23
     986: invokestatic  #208                // Method org/apache/zookeeper/server/util/SerializeUtils.deserializeTxn:([B)Lorg/apache/zookeeper/server/TxnLogEntry;
     989: astore        17
     991: aload         19
     993: aload         17
     995: invokevirtual #209                // Method org/apache/zookeeper/server/TxnLogEntry.getHeader:()Lorg/apache/zookeeper/txn/TxnHeader;
     998: putfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1001: aload         19
    1003: aload         17
    1005: invokevirtual #211                // Method org/apache/zookeeper/server/TxnLogEntry.getTxn:()Lorg/apache/jute/Record;
    1008: putfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1011: aload         19
    1013: aload         17
    1015: invokevirtual #213                // Method org/apache/zookeeper/server/TxnLogEntry.getDigest:()Lorg/apache/zookeeper/txn/TxnDigest;
    1018: putfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
    1021: aload_0
    1022: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1025: new           #221                // class java/lang/String
    1028: dup
    1029: aload         19
    1031: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1034: checkcast     #220                // class org/apache/zookeeper/txn/SetDataTxn
    1037: invokevirtual #222                // Method org/apache/zookeeper/txn/SetDataTxn.getData:()[B
    1040: invokespecial #223                // Method java/lang/String."<init>":([B)V
    1043: invokevirtual #224                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
    1046: astore        24
    1048: aload_0
    1049: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1052: aload         24
    1054: lload         21
    1056: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
    1059: aload         4
    1061: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
    1064: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
    1067: iconst_1
    1068: invokevirtual #229                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
    1071: istore        25
    1073: iload         25
    1075: ifeq          1088
    1078: new           #230                // class java/lang/Exception
    1081: dup
    1082: ldc           #231                // String changes proposed in reconfig
    1084: invokespecial #232                // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
    1087: athrow
    1088: goto          1185
    1091: aload         4
    1093: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
    1096: invokestatic  #208                // Method org/apache/zookeeper/server/util/SerializeUtils.deserializeTxn:([B)Lorg/apache/zookeeper/server/TxnLogEntry;
    1099: astore        17
    1101: aload         19
    1103: aload         17
    1105: invokevirtual #211                // Method org/apache/zookeeper/server/TxnLogEntry.getTxn:()Lorg/apache/jute/Record;
    1108: putfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1111: aload         19
    1113: aload         17
    1115: invokevirtual #209                // Method org/apache/zookeeper/server/TxnLogEntry.getHeader:()Lorg/apache/zookeeper/txn/TxnHeader;
    1118: putfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1121: aload         19
    1123: aload         17
    1125: invokevirtual #213                // Method org/apache/zookeeper/server/TxnLogEntry.getDigest:()Lorg/apache/zookeeper/txn/TxnDigest;
    1128: putfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
    1131: aload         19
    1133: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1136: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
    1139: lload         13
    1141: lconst_1
    1142: ladd
    1143: lcmp
    1144: ifeq          1175
    1147: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
    1150: ldc           #216                // String Got zxid 0x{} expected 0x{}
    1152: aload         19
    1154: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1157: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
    1160: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
    1163: lload         13
    1165: lconst_1
    1166: ladd
    1167: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
    1170: invokeinterface #217,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
    1175: aload         19
    1177: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1180: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
    1183: lstore        13
    1185: iload         16
    1187: ifne          1211
    1190: aload_0
    1191: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1194: aload         19
    1196: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1199: aload         19
    1201: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1204: invokevirtual #234                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.processTxn:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;)Lorg/apache/zookeeper/server/DataTree$ProcessTxnResult;
    1207: pop
    1208: goto          1574
    1211: aload         11
    1213: aload         19
    1215: invokeinterface #226,  2          // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
    1220: pop
    1221: aload         10
    1223: aload         4
    1225: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
    1228: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
    1231: invokeinterface #226,  2          // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
    1236: pop
    1237: goto          1574
    1240: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
    1243: ldc           #236                // String Learner received UPTODATE message
    1245: invokeinterface #237,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
    1250: aload         7
    1252: ifnull        1284
    1255: aload_0
    1256: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1259: aload         7
    1261: aconst_null
    1262: aconst_null
    1263: iconst_1
    1264: invokevirtual #229                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
    1267: istore        20
    1269: iload         20
    1271: ifeq          1284
    1274: new           #230                // class java/lang/Exception
    1277: dup
    1278: ldc           #231                // String changes proposed in reconfig
    1280: invokespecial #232                // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
    1283: athrow
    1284: iload         15
    1286: ifeq          1307
    1289: aload_0
    1290: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1293: iload         9
    1295: invokevirtual #238                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.takeSnapshot:(Z)V
    1298: aload_0
    1299: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1302: lload         5
    1304: invokevirtual #239                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setCurrentEpoch:(J)V
    1307: aload_0
    1308: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1311: aload_0
    1312: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1315: invokevirtual #240                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
    1318: aload_0
    1319: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1322: getfield      #241                // Field org/apache/zookeeper/server/quorum/QuorumPeer.adminServer:Lorg/apache/zookeeper/server/admin/AdminServer;
    1325: aload_0
    1326: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1329: invokeinterface #242,  2          // InterfaceMethod org/apache/zookeeper/server/admin/AdminServer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
    1334: goto          1577
    1337: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
    1340: ldc           #243                // String Learner received NEWLEADER message
    1342: invokeinterface #237,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
    1347: aload         4
    1349: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
    1352: ifnull        1410
    1355: aload         4
    1357: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
    1360: arraylength
    1361: iconst_1
    1362: if_icmple     1410
    1365: aload_0
    1366: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1369: new           #221                // class java/lang/String
    1372: dup
    1373: aload         4
    1375: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
    1378: invokespecial #223                // Method java/lang/String."<init>":([B)V
    1381: invokevirtual #224                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
    1384: astore        20
    1386: aload_0
    1387: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1390: aload         20
    1392: iconst_1
    1393: invokevirtual #225                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLastSeenQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Z)V
    1396: aload         20
    1398: astore        7
    1400: goto          1410
    1403: astore        20
    1405: aload         20
    1407: invokevirtual #244                // Method java/lang/Exception.printStackTrace:()V
    1410: iload         8
    1412: ifeq          1424
    1415: aload_0
    1416: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1419: iload         9
    1421: invokevirtual #238                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.takeSnapshot:(Z)V
    1424: aload_0
    1425: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1428: lload         5
    1430: invokevirtual #239                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setCurrentEpoch:(J)V
    1433: iconst_1
    1434: istore        16
    1436: iconst_0
    1437: istore        15
    1439: aload_0
    1440: getfield      #13                 // Field sock:Ljava/net/Socket;
    1443: aload_0
    1444: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1447: getfield      #142                // Field org/apache/zookeeper/server/quorum/QuorumPeer.tickTime:I
    1450: aload_0
    1451: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1454: getfield      #245                // Field org/apache/zookeeper/server/quorum/QuorumPeer.syncLimit:I
    1457: imul
    1458: invokevirtual #144                // Method java/net/Socket.setSoTimeout:(I)V
    1461: aload_0
    1462: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1465: getstatic     #246                // Field org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.NONE:Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
    1468: invokevirtual #178                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setSyncMode:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;)V
    1471: aload_0
    1472: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1475: invokevirtual #247                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.startupWithoutServing:()V
    1478: aload_0
    1479: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1482: instanceof    #248                // class org/apache/zookeeper/server/quorum/FollowerZooKeeperServer
    1485: ifeq          1558
    1488: aload_0
    1489: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1492: checkcast     #248                // class org/apache/zookeeper/server/quorum/FollowerZooKeeperServer
    1495: astore        20
    1497: aload         11
    1499: invokeinterface #249,  1          // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
    1504: astore        21
    1506: aload         21
    1508: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1513: ifeq          1551
    1516: aload         21
    1518: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1523: checkcast     #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
    1526: astore        22
    1528: aload         20
    1530: aload         22
    1532: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1535: aload         22
    1537: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1540: aload         22
    1542: getfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
    1545: invokevirtual #250                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.logRequest:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;Lorg/apache/zookeeper/txn/TxnDigest;)V
    1548: goto          1506
    1551: aload         11
    1553: invokeinterface #251,  1          // InterfaceMethod java/util/Deque.clear:()V
    1558: aload_0
    1559: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
    1562: dup
    1563: iconst_3
    1564: lload_1
    1565: aconst_null
    1566: aconst_null
    1567: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
    1570: iconst_1
    1571: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
    1574: goto          438
    1577: aload         12
    1579: monitorexit
    1580: goto          1591
    1583: astore        26
    1585: aload         12
    1587: monitorexit
    1588: aload         26
    1590: athrow
    1591: aload_3
    1592: lload         5
    1594: lconst_0
    1595: invokestatic  #149                // Method org/apache/zookeeper/server/util/ZxidUtils.makeZxid:(JJ)J
    1598: invokevirtual #150                // Method org/apache/zookeeper/server/quorum/QuorumPacket.setZxid:(J)V
    1601: aload_0
    1602: aload_3
    1603: iconst_1
    1604: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
    1607: aload_0
    1608: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1611: invokevirtual #252                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.startServing:()V
    1614: aload_0
    1615: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
    1618: lload         5
    1620: invokevirtual #253                // Method org/apache/zookeeper/server/quorum/QuorumPeer.updateElectionVote:(J)V
    1623: aload_0
    1624: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1627: instanceof    #248                // class org/apache/zookeeper/server/quorum/FollowerZooKeeperServer
    1630: ifeq          1743
    1633: aload_0
    1634: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1637: checkcast     #248                // class org/apache/zookeeper/server/quorum/FollowerZooKeeperServer
    1640: astore        12
    1642: aload         11
    1644: invokeinterface #249,  1          // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
    1649: astore        13
    1651: aload         13
    1653: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1658: ifeq          1696
    1661: aload         13
    1663: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1668: checkcast     #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
    1671: astore        14
    1673: aload         12
    1675: aload         14
    1677: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1680: aload         14
    1682: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1685: aload         14
    1687: getfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
    1690: invokevirtual #250                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.logRequest:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;Lorg/apache/zookeeper/txn/TxnDigest;)V
    1693: goto          1651
    1696: aload         10
    1698: invokeinterface #249,  1          // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
    1703: astore        13
    1705: aload         13
    1707: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1712: ifeq          1740
    1715: aload         13
    1717: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1722: checkcast     #254                // class java/lang/Long
    1725: astore        14
    1727: aload         12
    1729: aload         14
    1731: invokevirtual #255                // Method java/lang/Long.longValue:()J
    1734: invokevirtual #256                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.commit:(J)V
    1737: goto          1705
    1740: goto          1952
    1743: aload_0
    1744: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1747: instanceof    #257                // class org/apache/zookeeper/server/quorum/ObserverZooKeeperServer
    1750: ifeq          1941
    1753: aload_0
    1754: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
    1757: checkcast     #257                // class org/apache/zookeeper/server/quorum/ObserverZooKeeperServer
    1760: astore        12
    1762: aload         11
    1764: invokeinterface #249,  1          // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
    1769: astore        13
    1771: aload         13
    1773: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
    1778: ifeq          1938
    1781: aload         13
    1783: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
    1788: checkcast     #206                // class org/apache/zookeeper/server/quorum/Learner$PacketInFlight
    1791: astore        14
    1793: aload         10
    1795: invokeinterface #227,  1          // InterfaceMethod java/util/Deque.peekFirst:()Ljava/lang/Object;
    1800: checkcast     #254                // class java/lang/Long
    1803: astore        15
    1805: aload         14
    1807: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1810: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
    1813: aload         15
    1815: invokevirtual #255                // Method java/lang/Long.longValue:()J
    1818: lcmp
    1819: ifeq          1854
    1822: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
    1825: ldc           #233                // String Committing 0x{}, but next proposal is 0x{}
    1827: aload         15
    1829: invokevirtual #255                // Method java/lang/Long.longValue:()J
    1832: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
    1835: aload         14
    1837: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1840: invokevirtual #215                // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
    1843: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
    1846: invokeinterface #217,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
    1851: goto          1771
    1854: aload         10
    1856: invokeinterface #235,  1          // InterfaceMethod java/util/Deque.remove:()Ljava/lang/Object;
    1861: pop
    1862: new           #258                // class org/apache/zookeeper/server/Request
    1865: dup
    1866: aconst_null
    1867: aload         14
    1869: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1872: invokevirtual #259                // Method org/apache/zookeeper/txn/TxnHeader.getClientId:()J
    1875: aload         14
    1877: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1880: invokevirtual #260                // Method org/apache/zookeeper/txn/TxnHeader.getCxid:()I
    1883: aload         14
    1885: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1888: invokevirtual #218                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
    1891: aconst_null
    1892: aconst_null
    1893: invokespecial #261                // Method org/apache/zookeeper/server/Request."<init>":(Lorg/apache/zookeeper/server/ServerCnxn;JIILjava/nio/ByteBuffer;Ljava/util/List;)V
    1896: astore        16
    1898: aload         16
    1900: aload         14
    1902: getfield      #212                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.rec:Lorg/apache/jute/Record;
    1905: invokevirtual #262                // Method org/apache/zookeeper/server/Request.setTxn:(Lorg/apache/jute/Record;)V
    1908: aload         16
    1910: aload         14
    1912: getfield      #210                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.hdr:Lorg/apache/zookeeper/txn/TxnHeader;
    1915: invokevirtual #263                // Method org/apache/zookeeper/server/Request.setHdr:(Lorg/apache/zookeeper/txn/TxnHeader;)V
    1918: aload         16
    1920: aload         14
    1922: getfield      #214                // Field org/apache/zookeeper/server/quorum/Learner$PacketInFlight.digest:Lorg/apache/zookeeper/txn/TxnDigest;
    1925: invokevirtual #264                // Method org/apache/zookeeper/server/Request.setTxnDigest:(Lorg/apache/zookeeper/txn/TxnDigest;)V
    1928: aload         12
    1930: aload         16
    1932: invokevirtual #265                // Method org/apache/zookeeper/server/quorum/ObserverZooKeeperServer.commitRequest:(Lorg/apache/zookeeper/server/Request;)V
    1935: goto          1771
    1938: goto          1952
    1941: new           #266                // class java/lang/UnsupportedOperationException
    1944: dup
    1945: ldc_w         #267                // String Unknown server type
    1948: invokespecial #268                // Method java/lang/UnsupportedOperationException."<init>":(Ljava/lang/String;)V
    1951: athrow
    1952: return
    Exception table:
       from    to  target type
        1365  1400  1403   Class java/lang/Exception
          68  1580  1583   any
        1583  1588  1583   any

  protected void revalidate(org.apache.zookeeper.server.quorum.QuorumPacket) throws java.io.IOException;
    Code:
       0: new           #269                // class java/io/ByteArrayInputStream
       3: dup
       4: aload_1
       5: invokevirtual #163                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
       8: invokespecial #270                // Method java/io/ByteArrayInputStream."<init>":([B)V
      11: astore_2
      12: new           #271                // class java/io/DataInputStream
      15: dup
      16: aload_2
      17: invokespecial #272                // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
      20: astore_3
      21: aload_3
      22: invokevirtual #273                // Method java/io/DataInputStream.readLong:()J
      25: lstore        4
      27: aload_3
      28: invokevirtual #274                // Method java/io/DataInputStream.readBoolean:()Z
      31: istore        6
      33: aload_0
      34: getfield      #12                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
      37: lload         4
      39: invokestatic  #37                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      42: invokevirtual #275                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      45: checkcast     #276                // class org/apache/zookeeper/server/ServerCnxn
      48: astore        7
      50: aload         7
      52: ifnonnull     74
      55: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      58: ldc_w         #277                // String Missing session 0x{} for validation
      61: lload         4
      63: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      66: invokeinterface #91,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      71: goto          85
      74: aload_0
      75: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      78: aload         7
      80: iload         6
      82: invokevirtual #278                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.finishSessionInit:(Lorg/apache/zookeeper/server/ServerCnxn;Z)V
      85: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      88: invokeinterface #39,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      93: ifeq          140
      96: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      99: ldc2_w        #41                 // long 32l
     102: new           #43                 // class java/lang/StringBuilder
     105: dup
     106: invokespecial #44                 // Method java/lang/StringBuilder."<init>":()V
     109: ldc_w         #279                // String Session 0x
     112: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     115: lload         4
     117: invokestatic  #22                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     120: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     123: ldc_w         #280                // String  is valid:
     126: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: iload         6
     131: invokevirtual #281                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     134: invokevirtual #47                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     137: invokestatic  #48                 // Method org/apache/zookeeper/server/ZooTrace.logTraceMessage:(Lorg/slf4j/Logger;JLjava/lang/String;)V
     140: return

  protected void ping(org.apache.zookeeper.server.quorum.QuorumPacket) throws java.io.IOException;
    Code:
       0: new           #24                 // class java/io/ByteArrayOutputStream
       3: dup
       4: invokespecial #25                 // Method java/io/ByteArrayOutputStream."<init>":()V
       7: astore_2
       8: new           #26                 // class java/io/DataOutputStream
      11: dup
      12: aload_2
      13: invokespecial #27                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      16: astore_3
      17: aload_0
      18: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      21: invokevirtual #282                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.getTouchSnapshot:()Ljava/util/Map;
      24: astore        4
      26: aload         4
      28: invokeinterface #283,  1          // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      33: invokeinterface #284,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      38: astore        5
      40: aload         5
      42: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      47: ifeq          99
      50: aload         5
      52: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      57: checkcast     #285                // class java/util/Map$Entry
      60: astore        6
      62: aload_3
      63: aload         6
      65: invokeinterface #286,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      70: checkcast     #254                // class java/lang/Long
      73: invokevirtual #255                // Method java/lang/Long.longValue:()J
      76: invokevirtual #28                 // Method java/io/DataOutputStream.writeLong:(J)V
      79: aload_3
      80: aload         6
      82: invokeinterface #287,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      87: checkcast     #288                // class java/lang/Integer
      90: invokevirtual #289                // Method java/lang/Integer.intValue:()I
      93: invokevirtual #29                 // Method java/io/DataOutputStream.writeInt:(I)V
      96: goto          40
      99: new           #31                 // class org/apache/zookeeper/server/quorum/QuorumPacket
     102: dup
     103: aload_1
     104: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
     107: aload_1
     108: invokevirtual #161                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     111: aload_2
     112: invokevirtual #35                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     115: aload_1
     116: invokevirtual #290                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getAuthinfo:()Ljava/util/List;
     119: invokespecial #36                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":(IJ[BLjava/util/List;)V
     122: astore        5
     124: aload_0
     125: aload         5
     127: iconst_1
     128: invokevirtual #49                 // Method writePacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;Z)V
     131: return

  public void shutdown();
    Code:
       0: aload_0
       1: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: aconst_null
       5: invokevirtual #240                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
       8: aload_0
       9: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      12: invokevirtual #291                // Method org/apache/zookeeper/server/quorum/QuorumPeer.closeAllConnections:()V
      15: aload_0
      16: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      19: getfield      #241                // Field org/apache/zookeeper/server/quorum/QuorumPeer.adminServer:Lorg/apache/zookeeper/server/admin/AdminServer;
      22: aconst_null
      23: invokeinterface #242,  2          // InterfaceMethod org/apache/zookeeper/server/admin/AdminServer.setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      28: aload_0
      29: getfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
      32: ifnull        42
      35: aload_0
      36: getfield      #4                  // Field sender:Lorg/apache/zookeeper/server/quorum/LearnerSender;
      39: invokevirtual #292                // Method org/apache/zookeeper/server/quorum/LearnerSender.shutdown:()V
      42: aload_0
      43: invokevirtual #293                // Method closeSocket:()V
      46: aload_0
      47: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      50: ifnull        73
      53: aload_0
      54: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      57: aload_0
      58: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      61: invokevirtual #294                // Method org/apache/zookeeper/server/quorum/QuorumPeer.getSyncMode:()Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
      64: getstatic     #179                // Field org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.SNAP:Lorg/apache/zookeeper/server/quorum/QuorumPeer$SyncMode;
      67: invokevirtual #295                // Method org/apache/zookeeper/server/quorum/QuorumPeer$SyncMode.equals:(Ljava/lang/Object;)Z
      70: invokevirtual #296                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.shutdown:(Z)V
      73: return

  boolean isRunning();
    Code:
       0: aload_0
       1: getfield      #79                 // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokevirtual #205                // Method org/apache/zookeeper/server/quorum/QuorumPeer.isRunning:()Z
       7: ifeq          24
      10: aload_0
      11: getfield      #175                // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      14: invokevirtual #297                // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.isRunning:()Z
      17: ifeq          24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ireturn

  void closeSocket();
    Code:
       0: aload_0
       1: getfield      #13                 // Field sock:Ljava/net/Socket;
       4: ifnull        14
       7: aload_0
       8: getfield      #13                 // Field sock:Ljava/net/Socket;
      11: invokevirtual #298                // Method java/net/Socket.close:()V
      14: goto          30
      17: astore_1
      18: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      21: ldc_w         #299                // String Ignoring error closing connection to leader
      24: aload_1
      25: invokeinterface #120,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      30: return
    Exception table:
       from    to  target type
           0    14    17   Class java/io/IOException

  private org.apache.zookeeper.server.quorum.Learner$LeaderConnector lambda$connectToLeader$0(java.util.concurrent.atomic.AtomicReference, java.util.concurrent.CountDownLatch, java.net.InetSocketAddress);
    Code:
       0: new           #300                // class org/apache/zookeeper/server/quorum/Learner$LeaderConnector
       3: dup
       4: aload_0
       5: aload_3
       6: aload_1
       7: aload_2
       8: invokespecial #301                // Method org/apache/zookeeper/server/quorum/Learner$LeaderConnector."<init>":(Lorg/apache/zookeeper/server/quorum/Learner;Ljava/net/InetSocketAddress;Ljava/util/concurrent/atomic/AtomicReference;Ljava/util/concurrent/CountDownLatch;)V
      11: areturn

  static boolean access$000();
    Code:
       0: getstatic     #2                  // Field nodelay:Z
       3: ireturn

  static int access$100();
    Code:
       0: getstatic     #1                  // Field leaderConnectDelayDuringRetryMs:I
       3: ireturn

  static {};
    Code:
       0: ldc           #7                  // class org/apache/zookeeper/server/quorum/Learner
       2: invokestatic  #302                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
       8: ldc_w         #303                // String zookeeper.leaderConnectDelayDuringRetryMs
      11: bipush        100
      13: invokestatic  #304                // Method java/lang/Integer.getInteger:(Ljava/lang/String;I)Ljava/lang/Integer;
      16: invokevirtual #289                // Method java/lang/Integer.intValue:()I
      19: putstatic     #1                  // Field leaderConnectDelayDuringRetryMs:I
      22: ldc_w         #305                // String follower.nodelay
      25: ldc_w         #306                // String true
      28: invokestatic  #307                // Method java/lang/System.getProperty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      31: ldc_w         #306                // String true
      34: invokevirtual #190                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      37: putstatic     #2                  // Field nodelay:Z
      40: ldc           #18                 // String zookeeper.learner.asyncSending
      42: invokestatic  #308                // Method org/apache/zookeeper/server/util/ConfigUtils.getPropertyBackwardCompatibleWay:(Ljava/lang/String;)Ljava/lang/String;
      45: invokestatic  #309                // Method java/lang/Boolean.parseBoolean:(Ljava/lang/String;)Z
      48: putstatic     #15                 // Field asyncSending:Z
      51: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      54: ldc_w         #310                // String leaderConnectDelayDuringRetryMs: {}
      57: getstatic     #1                  // Field leaderConnectDelayDuringRetryMs:I
      60: invokestatic  #311                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      63: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      68: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      71: ldc_w         #312                // String TCP NoDelay set to: {}
      74: getstatic     #2                  // Field nodelay:Z
      77: invokestatic  #19                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      80: invokeinterface #23,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      85: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      88: ldc           #17                 // String {} = {}
      90: ldc           #18                 // String zookeeper.learner.asyncSending
      92: getstatic     #15                 // Field asyncSending:Z
      95: invokestatic  #19                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      98: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     103: return
}

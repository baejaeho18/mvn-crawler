Compiled from "AtomicFileOutputStream.java"
public class org.apache.zookeeper.common.AtomicFileOutputStream extends java.io.FilterOutputStream {
  public static final java.lang.String TMP_EXTENSION;

  private static final org.slf4j.Logger LOG;

  private final java.io.File origFile;

  private final java.io.File tmpFile;

  public org.apache.zookeeper.common.AtomicFileOutputStream(java.io.File) throws java.io.FileNotFoundException;
    Code:
       0: aload_0
       1: new           #1                  // class java/io/FileOutputStream
       4: dup
       5: new           #2                  // class java/io/File
       8: dup
       9: aload_1
      10: invokevirtual #3                  // Method java/io/File.getParentFile:()Ljava/io/File;
      13: new           #4                  // class java/lang/StringBuilder
      16: dup
      17: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      20: aload_1
      21: invokevirtual #6                  // Method java/io/File.getName:()Ljava/lang/String;
      24: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: ldc           #9                  // String .tmp
      29: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      32: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      35: invokespecial #11                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      38: invokespecial #12                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
      41: invokespecial #13                 // Method java/io/FilterOutputStream."<init>":(Ljava/io/OutputStream;)V
      44: aload_0
      45: aload_1
      46: invokevirtual #14                 // Method java/io/File.getAbsoluteFile:()Ljava/io/File;
      49: putfield      #15                 // Field origFile:Ljava/io/File;
      52: aload_0
      53: new           #2                  // class java/io/File
      56: dup
      57: aload_1
      58: invokevirtual #3                  // Method java/io/File.getParentFile:()Ljava/io/File;
      61: new           #4                  // class java/lang/StringBuilder
      64: dup
      65: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      68: aload_1
      69: invokevirtual #6                  // Method java/io/File.getName:()Ljava/lang/String;
      72: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      75: ldc           #9                  // String .tmp
      77: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      80: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      83: invokespecial #11                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      86: invokevirtual #14                 // Method java/io/File.getAbsoluteFile:()Ljava/io/File;
      89: putfield      #16                 // Field tmpFile:Ljava/io/File;
      92: return

  public void write(byte[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #17                 // Field out:Ljava/io/OutputStream;
       4: aload_1
       5: iload_2
       6: iload_3
       7: invokevirtual #18                 // Method java/io/OutputStream.write:([BII)V
      10: return

  public void close() throws java.io.IOException;
    Code:
       0: iconst_0
       1: istore_1
       2: iconst_0
       3: istore_2
       4: aload_0
       5: invokevirtual #19                 // Method flush:()V
       8: aload_0
       9: getfield      #17                 // Field out:Ljava/io/OutputStream;
      12: checkcast     #1                  // class java/io/FileOutputStream
      15: invokevirtual #20                 // Method java/io/FileOutputStream.getFD:()Ljava/io/FileDescriptor;
      18: invokevirtual #21                 // Method java/io/FileDescriptor.sync:()V
      21: iconst_1
      22: istore_1
      23: aload_0
      24: invokespecial #22                 // Method java/io/FilterOutputStream.close:()V
      27: iconst_1
      28: istore_2
      29: iload_2
      30: ifeq          118
      33: aload_0
      34: getfield      #16                 // Field tmpFile:Ljava/io/File;
      37: aload_0
      38: getfield      #15                 // Field origFile:Ljava/io/File;
      41: invokevirtual #23                 // Method java/io/File.renameTo:(Ljava/io/File;)Z
      44: istore_3
      45: iload_3
      46: ifne          115
      49: aload_0
      50: getfield      #15                 // Field origFile:Ljava/io/File;
      53: invokevirtual #24                 // Method java/io/File.delete:()Z
      56: ifeq          73
      59: aload_0
      60: getfield      #16                 // Field tmpFile:Ljava/io/File;
      63: aload_0
      64: getfield      #15                 // Field origFile:Ljava/io/File;
      67: invokevirtual #23                 // Method java/io/File.renameTo:(Ljava/io/File;)Z
      70: ifne          115
      73: new           #25                 // class java/io/IOException
      76: dup
      77: new           #4                  // class java/lang/StringBuilder
      80: dup
      81: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      84: ldc           #26                 // String Could not rename temporary file
      86: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: aload_0
      90: getfield      #16                 // Field tmpFile:Ljava/io/File;
      93: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      96: ldc           #28                 // String  to
      98: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     101: aload_0
     102: getfield      #15                 // Field origFile:Ljava/io/File;
     105: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     108: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     111: invokespecial #29                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     114: athrow
     115: goto          287
     118: iload_1
     119: ifne          129
     122: aload_0
     123: getfield      #17                 // Field out:Ljava/io/OutputStream;
     126: invokestatic  #30                 // Method org/apache/zookeeper/common/IOUtils.closeStream:(Ljava/io/Closeable;)V
     129: aload_0
     130: getfield      #16                 // Field tmpFile:Ljava/io/File;
     133: invokevirtual #24                 // Method java/io/File.delete:()Z
     136: ifne          287
     139: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     142: ldc           #32                 // String Unable to delete tmp file {}
     144: aload_0
     145: getfield      #16                 // Field tmpFile:Ljava/io/File;
     148: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     153: goto          287
     156: astore        4
     158: iload_2
     159: ifeq          249
     162: aload_0
     163: getfield      #16                 // Field tmpFile:Ljava/io/File;
     166: aload_0
     167: getfield      #15                 // Field origFile:Ljava/io/File;
     170: invokevirtual #23                 // Method java/io/File.renameTo:(Ljava/io/File;)Z
     173: istore        5
     175: iload         5
     177: ifne          246
     180: aload_0
     181: getfield      #15                 // Field origFile:Ljava/io/File;
     184: invokevirtual #24                 // Method java/io/File.delete:()Z
     187: ifeq          204
     190: aload_0
     191: getfield      #16                 // Field tmpFile:Ljava/io/File;
     194: aload_0
     195: getfield      #15                 // Field origFile:Ljava/io/File;
     198: invokevirtual #23                 // Method java/io/File.renameTo:(Ljava/io/File;)Z
     201: ifne          246
     204: new           #25                 // class java/io/IOException
     207: dup
     208: new           #4                  // class java/lang/StringBuilder
     211: dup
     212: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
     215: ldc           #26                 // String Could not rename temporary file
     217: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     220: aload_0
     221: getfield      #16                 // Field tmpFile:Ljava/io/File;
     224: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     227: ldc           #28                 // String  to
     229: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     232: aload_0
     233: getfield      #15                 // Field origFile:Ljava/io/File;
     236: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     239: invokevirtual #10                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     242: invokespecial #29                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     245: athrow
     246: goto          284
     249: iload_1
     250: ifne          260
     253: aload_0
     254: getfield      #17                 // Field out:Ljava/io/OutputStream;
     257: invokestatic  #30                 // Method org/apache/zookeeper/common/IOUtils.closeStream:(Ljava/io/Closeable;)V
     260: aload_0
     261: getfield      #16                 // Field tmpFile:Ljava/io/File;
     264: invokevirtual #24                 // Method java/io/File.delete:()Z
     267: ifne          284
     270: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
     273: ldc           #32                 // String Unable to delete tmp file {}
     275: aload_0
     276: getfield      #16                 // Field tmpFile:Ljava/io/File;
     279: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     284: aload         4
     286: athrow
     287: return
    Exception table:
       from    to  target type
           4    29   156   any
         156   158   156   any

  public void abort();
    Code:
       0: aload_0
       1: invokespecial #22                 // Method java/io/FilterOutputStream.close:()V
       4: goto          23
       7: astore_1
       8: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
      11: ldc           #34                 // String Unable to abort file {}
      13: aload_0
      14: getfield      #16                 // Field tmpFile:Ljava/io/File;
      17: aload_1
      18: invokeinterface #35,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      23: aload_0
      24: getfield      #16                 // Field tmpFile:Ljava/io/File;
      27: invokevirtual #24                 // Method java/io/File.delete:()Z
      30: ifne          47
      33: getstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
      36: ldc           #36                 // String Unable to delete tmp file during abort {}
      38: aload_0
      39: getfield      #16                 // Field tmpFile:Ljava/io/File;
      42: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      47: return
    Exception table:
       from    to  target type
           0     4     7   Class java/io/IOException

  static {};
    Code:
       0: ldc           #8                  // class org/apache/zookeeper/common/AtomicFileOutputStream
       2: invokestatic  #37                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #31                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

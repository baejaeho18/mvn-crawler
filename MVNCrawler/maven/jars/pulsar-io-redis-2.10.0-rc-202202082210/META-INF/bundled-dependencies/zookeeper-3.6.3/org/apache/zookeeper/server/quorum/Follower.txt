Compiled from "Follower.java"
public class org.apache.zookeeper.server.quorum.Follower extends org.apache.zookeeper.server.quorum.Learner {
  private long lastQueued;

  final org.apache.zookeeper.server.quorum.FollowerZooKeeperServer fzk;

  org.apache.zookeeper.server.quorum.ObserverMaster om;

  org.apache.zookeeper.server.quorum.Follower(org.apache.zookeeper.server.quorum.QuorumPeer, org.apache.zookeeper.server.quorum.FollowerZooKeeperServer);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/zookeeper/server/quorum/Learner."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      14: aload_0
      15: aload_2
      16: putfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      19: return

  public java.lang.String toString();
    Code:
       0: new           #5                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
       7: astore_1
       8: aload_1
       9: ldc           #7                  // String Follower
      11: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      14: aload_0
      15: getfield      #9                  // Field sock:Ljava/net/Socket;
      18: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      21: pop
      22: aload_1
      23: ldc           #11                 // String  lastQueuedZxid:
      25: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_0
      29: getfield      #12                 // Field lastQueued:J
      32: invokevirtual #13                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      35: pop
      36: aload_1
      37: ldc           #14                 // String  pendingRevalidationCount:
      39: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_0
      43: getfield      #15                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
      46: invokevirtual #16                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
      49: invokevirtual #17                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      52: pop
      53: aload_1
      54: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      57: areturn

  void followLeader() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
       7: putfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      10: aload_0
      11: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      14: getfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      17: aload_0
      18: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      21: getfield      #21                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      24: lsub
      25: lstore_1
      26: aload_0
      27: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      30: lload_1
      31: invokevirtual #22                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.setElectionTimeTaken:(J)V
      34: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
      37: getfield      #24                 // Field org/apache/zookeeper/server/ServerMetrics.ELECTION_TIME:Lorg/apache/zookeeper/metrics/Summary;
      40: lload_1
      41: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
      46: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      49: ldc           #27                 // String FOLLOWING - LEADER ELECTION TOOK - {} {}
      51: lload_1
      52: invokestatic  #28                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      55: ldc           #30                 // String MS
      57: invokeinterface #31,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      62: aload_0
      63: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      66: lconst_0
      67: putfield      #21                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      70: aload_0
      71: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      74: lconst_0
      75: putfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      78: aload_0
      79: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      82: new           #32                 // class org/apache/zookeeper/server/quorum/FollowerBean
      85: dup
      86: aload_0
      87: aload_0
      88: getfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      91: invokespecial #33                 // Method org/apache/zookeeper/server/quorum/FollowerBean."<init>":(Lorg/apache/zookeeper/server/quorum/Follower;Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      94: aload_0
      95: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      98: getfield      #34                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.jmxLocalPeerBean:Lorg/apache/zookeeper/server/quorum/LocalPeerBean;
     101: invokevirtual #35                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.registerJMX:(Lorg/apache/zookeeper/server/ZooKeeperServerBean;Lorg/apache/zookeeper/server/quorum/LocalPeerBean;)V
     104: lconst_0
     105: lstore_3
     106: iconst_0
     107: istore        5
     109: aload_0
     110: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     113: getstatic     #36                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.DISCOVERY:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     116: invokevirtual #37                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     119: aload_0
     120: invokevirtual #38                 // Method findLeader:()Lorg/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer;
     123: astore        6
     125: aload_0
     126: aload         6
     128: getfield      #39                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.addr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     131: aload         6
     133: getfield      #40                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.hostname:Ljava/lang/String;
     136: invokevirtual #41                 // Method connectToLeader:(Lorg/apache/zookeeper/server/quorum/MultipleAddresses;Ljava/lang/String;)V
     139: invokestatic  #42                 // Method java/lang/System.currentTimeMillis:()J
     142: lstore_3
     143: aload_0
     144: bipush        11
     146: invokevirtual #44                 // Method registerWithLeader:(I)J
     149: lstore        7
     151: aload_0
     152: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     155: invokevirtual #45                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.isReconfigStateChange:()Z
     158: ifeq          171
     161: new           #46                 // class java/lang/Exception
     164: dup
     165: ldc           #47                 // String learned about role change
     167: invokespecial #48                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     170: athrow
     171: lload         7
     173: invokestatic  #49                 // Method org/apache/zookeeper/server/util/ZxidUtils.getEpochFromZxid:(J)J
     176: lstore        9
     178: lload         9
     180: aload_0
     181: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     184: invokevirtual #50                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     187: lcmp
     188: ifge          250
     191: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     194: new           #5                  // class java/lang/StringBuilder
     197: dup
     198: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
     201: ldc           #51                 // String Proposed leader epoch
     203: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     206: lload         7
     208: invokestatic  #52                 // Method org/apache/zookeeper/server/util/ZxidUtils.zxidToString:(J)Ljava/lang/String;
     211: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     214: ldc           #53                 // String  is less than our accepted epoch
     216: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     219: aload_0
     220: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     223: invokevirtual #50                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     226: invokestatic  #52                 // Method org/apache/zookeeper/server/util/ZxidUtils.zxidToString:(J)Ljava/lang/String;
     229: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     232: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     235: invokeinterface #54,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     240: new           #55                 // class java/io/IOException
     243: dup
     244: ldc           #56                 // String Error: Epoch of leader is lower
     246: invokespecial #57                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     249: athrow
     250: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     253: lstore        11
     255: aload_0
     256: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     259: aload         6
     261: getfield      #39                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.addr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     264: aload         6
     266: invokevirtual #58                 // Method org/apache/zookeeper/server/quorum/QuorumPeer$QuorumServer.getId:()J
     269: invokevirtual #59                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLeaderAddressAndId:(Lorg/apache/zookeeper/server/quorum/MultipleAddresses;J)V
     272: aload_0
     273: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     276: getstatic     #60                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.SYNCHRONIZATION:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     279: invokevirtual #37                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     282: aload_0
     283: lload         7
     285: invokevirtual #61                 // Method syncWithLeader:(J)V
     288: aload_0
     289: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     292: getstatic     #62                 // Field org/apache/zookeeper/server/quorum/QuorumPeer$ZabState.BROADCAST:Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;
     295: invokevirtual #37                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.setZabState:(Lorg/apache/zookeeper/server/quorum/QuorumPeer$ZabState;)V
     298: iconst_1
     299: istore        5
     301: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     304: lload         11
     306: lsub
     307: lstore        13
     309: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     312: getfield      #63                 // Field org/apache/zookeeper/server/ServerMetrics.FOLLOWER_SYNC_TIME:Lorg/apache/zookeeper/metrics/Summary;
     315: lload         13
     317: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
     322: goto          351
     325: astore        15
     327: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     330: lload         11
     332: lsub
     333: lstore        16
     335: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     338: getfield      #63                 // Field org/apache/zookeeper/server/ServerMetrics.FOLLOWER_SYNC_TIME:Lorg/apache/zookeeper/metrics/Summary;
     341: lload         16
     343: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
     348: aload         15
     350: athrow
     351: aload_0
     352: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     355: invokevirtual #64                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getObserverMasterPort:()I
     358: ifle          407
     361: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     364: ldc           #65                 // String Starting ObserverMaster
     366: invokeinterface #66,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     371: aload_0
     372: new           #67                 // class org/apache/zookeeper/server/quorum/ObserverMaster
     375: dup
     376: aload_0
     377: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     380: aload_0
     381: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     384: aload_0
     385: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     388: invokevirtual #64                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getObserverMasterPort:()I
     391: invokespecial #68                 // Method org/apache/zookeeper/server/quorum/ObserverMaster."<init>":(Lorg/apache/zookeeper/server/quorum/QuorumPeer;Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;I)V
     394: putfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     397: aload_0
     398: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     401: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/ObserverMaster.start:()V
     404: goto          412
     407: aload_0
     408: aconst_null
     409: putfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     412: new           #71                 // class org/apache/zookeeper/server/quorum/QuorumPacket
     415: dup
     416: invokespecial #72                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":()V
     419: astore        13
     421: aload_0
     422: invokevirtual #73                 // Method isRunning:()Z
     425: ifeq          443
     428: aload_0
     429: aload         13
     431: invokevirtual #74                 // Method readPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     434: aload_0
     435: aload         13
     437: invokevirtual #75                 // Method processPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     440: goto          421
     443: goto          471
     446: astore        7
     448: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     451: ldc           #76                 // String Exception when following the leader
     453: aload         7
     455: invokeinterface #77,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     460: aload_0
     461: invokevirtual #78                 // Method closeSocket:()V
     464: aload_0
     465: getfield      #15                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
     468: invokevirtual #79                 // Method java/util/concurrent/ConcurrentHashMap.clear:()V
     471: aload_0
     472: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     475: ifnull        485
     478: aload_0
     479: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     482: invokevirtual #80                 // Method org/apache/zookeeper/server/quorum/ObserverMaster.stop:()V
     485: aload_0
     486: getfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     489: aload_0
     490: invokevirtual #81                 // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Learner;)V
     493: lload_3
     494: lconst_0
     495: lcmp
     496: ifeq          651
     499: invokestatic  #42                 // Method java/lang/System.currentTimeMillis:()J
     502: lload_3
     503: lsub
     504: lstore        6
     506: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     509: ldc           #82                 // String Disconnected from leader (with address: {}). Was connected for {}ms. Sync state: {}
     511: iconst_3
     512: anewarray     #83                 // class java/lang/Object
     515: dup
     516: iconst_0
     517: aload_0
     518: getfield      #84                 // Field leaderAddr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     521: aastore
     522: dup
     523: iconst_1
     524: lload         6
     526: invokestatic  #28                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     529: aastore
     530: dup
     531: iconst_2
     532: iload         5
     534: invokestatic  #85                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     537: aastore
     538: invokeinterface #86,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     543: aload_0
     544: getfield      #87                 // Field messageTracker:Lorg/apache/zookeeper/server/util/MessageTracker;
     547: aload_0
     548: getfield      #84                 // Field leaderAddr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     551: invokevirtual #88                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.toString:()Ljava/lang/String;
     554: invokevirtual #89                 // Method org/apache/zookeeper/server/util/MessageTracker.dumpToLog:(Ljava/lang/String;)V
     557: goto          651
     560: astore        18
     562: aload_0
     563: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     566: ifnull        576
     569: aload_0
     570: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     573: invokevirtual #80                 // Method org/apache/zookeeper/server/quorum/ObserverMaster.stop:()V
     576: aload_0
     577: getfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     580: aload_0
     581: invokevirtual #81                 // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Learner;)V
     584: lload_3
     585: lconst_0
     586: lcmp
     587: ifeq          648
     590: invokestatic  #42                 // Method java/lang/System.currentTimeMillis:()J
     593: lload_3
     594: lsub
     595: lstore        19
     597: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     600: ldc           #82                 // String Disconnected from leader (with address: {}). Was connected for {}ms. Sync state: {}
     602: iconst_3
     603: anewarray     #83                 // class java/lang/Object
     606: dup
     607: iconst_0
     608: aload_0
     609: getfield      #84                 // Field leaderAddr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     612: aastore
     613: dup
     614: iconst_1
     615: lload         19
     617: invokestatic  #28                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     620: aastore
     621: dup
     622: iconst_2
     623: iload         5
     625: invokestatic  #85                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     628: aastore
     629: invokeinterface #86,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     634: aload_0
     635: getfield      #87                 // Field messageTracker:Lorg/apache/zookeeper/server/util/MessageTracker;
     638: aload_0
     639: getfield      #84                 // Field leaderAddr:Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     642: invokevirtual #88                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.toString:()Ljava/lang/String;
     645: invokevirtual #89                 // Method org/apache/zookeeper/server/util/MessageTracker.dumpToLog:(Ljava/lang/String;)V
     648: aload         18
     650: athrow
     651: return
    Exception table:
       from    to  target type
         255   301   325   any
         325   327   325   any
         125   443   446   Class java/lang/Exception
         109   471   560   any
         560   562   560   any

  protected void processPacket(org.apache.zookeeper.server.quorum.QuorumPacket) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokevirtual #90                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
       4: tableswitch   { // 2 to 12
                     2: 72
                     3: 541
                     4: 294
                     5: 64
                     6: 505
                     7: 531
                     8: 541
                     9: 360
                    10: 541
                    11: 541
                    12: 492
               default: 541
          }
      64: aload_0
      65: aload_1
      66: invokevirtual #91                 // Method ping:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      69: goto          555
      72: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
      75: getfield      #92                 // Field org/apache/zookeeper/server/ServerMetrics.LEARNER_PROPOSAL_RECEIVED_COUNT:Lorg/apache/zookeeper/metrics/Counter;
      78: lconst_1
      79: invokeinterface #93,  3           // InterfaceMethod org/apache/zookeeper/metrics/Counter.add:(J)V
      84: aload_1
      85: invokevirtual #94                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
      88: invokestatic  #95                 // Method org/apache/zookeeper/server/util/SerializeUtils.deserializeTxn:([B)Lorg/apache/zookeeper/server/TxnLogEntry;
      91: astore_2
      92: aload_2
      93: invokevirtual #96                 // Method org/apache/zookeeper/server/TxnLogEntry.getHeader:()Lorg/apache/zookeeper/txn/TxnHeader;
      96: astore_3
      97: aload_2
      98: invokevirtual #97                 // Method org/apache/zookeeper/server/TxnLogEntry.getTxn:()Lorg/apache/jute/Record;
     101: astore        4
     103: aload_2
     104: invokevirtual #98                 // Method org/apache/zookeeper/server/TxnLogEntry.getDigest:()Lorg/apache/zookeeper/txn/TxnDigest;
     107: astore        5
     109: aload_3
     110: invokevirtual #99                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     113: aload_0
     114: getfield      #12                 // Field lastQueued:J
     117: lconst_1
     118: ladd
     119: lcmp
     120: ifeq          149
     123: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     126: ldc           #100                // String Got zxid 0x{} expected 0x{}
     128: aload_3
     129: invokevirtual #99                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     132: invokestatic  #101                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     135: aload_0
     136: getfield      #12                 // Field lastQueued:J
     139: lconst_1
     140: ladd
     141: invokestatic  #101                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     144: invokeinterface #102,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     149: aload_0
     150: aload_3
     151: invokevirtual #99                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     154: putfield      #12                 // Field lastQueued:J
     157: aload_3
     158: invokevirtual #103                // Method org/apache/zookeeper/txn/TxnHeader.getType:()I
     161: bipush        16
     163: if_icmpne     204
     166: aload         4
     168: checkcast     #105                // class org/apache/zookeeper/txn/SetDataTxn
     171: astore        6
     173: aload_0
     174: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     177: new           #106                // class java/lang/String
     180: dup
     181: aload         6
     183: invokevirtual #107                // Method org/apache/zookeeper/txn/SetDataTxn.getData:()[B
     186: invokespecial #108                // Method java/lang/String."<init>":([B)V
     189: invokevirtual #109                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     192: astore        7
     194: aload_0
     195: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     198: aload         7
     200: iconst_1
     201: invokevirtual #110                // Method org/apache/zookeeper/server/quorum/QuorumPeer.setLastSeenQuorumVerifier:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Z)V
     204: aload_0
     205: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     208: aload_3
     209: aload         4
     211: aload         5
     213: invokevirtual #111                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.logRequest:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;Lorg/apache/zookeeper/txn/TxnDigest;)V
     216: aload_3
     217: ifnull        254
     220: invokestatic  #112                // Method org/apache/zookeeper/common/Time.currentWallTime:()J
     223: lstore        6
     225: lload         6
     227: aload_3
     228: invokevirtual #113                // Method org/apache/zookeeper/txn/TxnHeader.getTime:()J
     231: lsub
     232: lstore        8
     234: lload         8
     236: lconst_0
     237: lcmp
     238: iflt          254
     241: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     244: getfield      #114                // Field org/apache/zookeeper/server/ServerMetrics.PROPOSAL_LATENCY:Lorg/apache/zookeeper/metrics/Summary;
     247: lload         8
     249: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
     254: aload_0
     255: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     258: ifnull        555
     261: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     264: lstore        6
     266: aload_0
     267: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     270: aload_1
     271: invokevirtual #115                // Method org/apache/zookeeper/server/quorum/ObserverMaster.proposalReceived:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     274: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     277: getfield      #116                // Field org/apache/zookeeper/server/ServerMetrics.OM_PROPOSAL_PROCESS_TIME:Lorg/apache/zookeeper/metrics/Summary;
     280: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     283: lload         6
     285: lsub
     286: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
     291: goto          555
     294: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     297: getfield      #117                // Field org/apache/zookeeper/server/ServerMetrics.LEARNER_COMMIT_RECEIVED_COUNT:Lorg/apache/zookeeper/metrics/Counter;
     300: lconst_1
     301: invokeinterface #93,  3           // InterfaceMethod org/apache/zookeeper/metrics/Counter.add:(J)V
     306: aload_0
     307: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     310: aload_1
     311: invokevirtual #118                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     314: invokevirtual #119                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.commit:(J)V
     317: aload_0
     318: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     321: ifnull        555
     324: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     327: lstore        6
     329: aload_0
     330: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     333: aload_1
     334: invokevirtual #118                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     337: invokevirtual #120                // Method org/apache/zookeeper/server/quorum/ObserverMaster.proposalCommitted:(J)V
     340: invokestatic  #23                 // Method org/apache/zookeeper/server/ServerMetrics.getMetrics:()Lorg/apache/zookeeper/server/ServerMetrics;
     343: getfield      #121                // Field org/apache/zookeeper/server/ServerMetrics.OM_COMMIT_PROCESS_TIME:Lorg/apache/zookeeper/metrics/Summary;
     346: invokestatic  #19                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
     349: lload         6
     351: lsub
     352: invokeinterface #25,  3           // InterfaceMethod org/apache/zookeeper/metrics/Summary.add:(J)V
     357: goto          555
     360: aload_0
     361: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     364: getfield      #122                // Field org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.pendingTxns:Ljava/util/concurrent/LinkedBlockingQueue;
     367: invokevirtual #123                // Method java/util/concurrent/LinkedBlockingQueue.element:()Ljava/lang/Object;
     370: checkcast     #124                // class org/apache/zookeeper/server/Request
     373: astore        6
     375: aload         6
     377: invokevirtual #125                // Method org/apache/zookeeper/server/Request.getTxn:()Lorg/apache/jute/Record;
     380: checkcast     #105                // class org/apache/zookeeper/txn/SetDataTxn
     383: astore        7
     385: aload_0
     386: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     389: new           #106                // class java/lang/String
     392: dup
     393: aload         7
     395: invokevirtual #107                // Method org/apache/zookeeper/txn/SetDataTxn.getData:()[B
     398: invokespecial #108                // Method java/lang/String."<init>":([B)V
     401: invokevirtual #109                // Method org/apache/zookeeper/server/quorum/QuorumPeer.configFromString:(Ljava/lang/String;)Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;
     404: astore        8
     406: aload_1
     407: invokevirtual #94                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
     410: invokestatic  #126                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     413: astore        9
     415: aload         9
     417: invokevirtual #127                // Method java/nio/ByteBuffer.getLong:()J
     420: lstore        10
     422: aload_1
     423: invokevirtual #118                // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     426: lstore        12
     428: aload_0
     429: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     432: aload         8
     434: lload         10
     436: invokestatic  #28                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     439: lload         12
     441: invokestatic  #28                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     444: iconst_1
     445: invokevirtual #128                // Method org/apache/zookeeper/server/quorum/QuorumPeer.processReconfig:(Lorg/apache/zookeeper/server/quorum/flexible/QuorumVerifier;Ljava/lang/Long;Ljava/lang/Long;Z)Z
     448: istore        14
     450: aload_0
     451: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     454: lload         12
     456: invokevirtual #119                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.commit:(J)V
     459: aload_0
     460: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     463: ifnull        477
     466: aload_0
     467: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     470: lload         12
     472: lload         10
     474: invokevirtual #129                // Method org/apache/zookeeper/server/quorum/ObserverMaster.informAndActivate:(JJ)V
     477: iload         14
     479: ifeq          555
     482: new           #46                 // class java/lang/Exception
     485: dup
     486: ldc           #130                // String changes proposed in reconfig
     488: invokespecial #48                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     491: athrow
     492: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     495: ldc           #131                // String Received an UPTODATE message after Follower started
     497: invokeinterface #54,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     502: goto          555
     505: aload_0
     506: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     509: ifnull        523
     512: aload_0
     513: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
     516: aload_1
     517: invokevirtual #132                // Method org/apache/zookeeper/server/quorum/ObserverMaster.revalidateLearnerSession:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)Z
     520: ifne          555
     523: aload_0
     524: aload_1
     525: invokevirtual #133                // Method revalidate:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     528: goto          555
     531: aload_0
     532: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     535: invokevirtual #134                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.sync:()V
     538: goto          555
     541: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     544: ldc           #135                // String Unknown packet type: {}
     546: aload_1
     547: invokestatic  #136                // Method org/apache/zookeeper/server/quorum/LearnerHandler.packetToString:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)Ljava/lang/String;
     550: invokeinterface #137,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     555: return

  public long getZxid();
    Code:
       0: aload_0
       1: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      11: invokevirtual #138                // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.getZxid:()J
      14: aload_1
      15: monitorexit
      16: lreturn
      17: astore_2
      18: aload_1
      19: monitorexit
      20: aload_2
      21: athrow
      22: astore_1
      23: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      26: ldc           #140                // String error getting zxid
      28: aload_1
      29: invokeinterface #77,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      34: ldc2_w        #141                // long -1l
      37: lreturn
    Exception table:
       from    to  target type
           7    16    17   any
          17    20    17   any
           0    16    22   Class java/lang/NullPointerException
          17    22    22   Class java/lang/NullPointerException

  protected long getLastQueued();
    Code:
       0: aload_0
       1: getfield      #12                 // Field lastQueued:J
       4: lreturn

  public java.lang.Integer getSyncedObserverSize();
    Code:
       0: aload_0
       1: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
       4: ifnonnull     11
       7: aconst_null
       8: goto          21
      11: aload_0
      12: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
      15: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/ObserverMaster.getNumActiveObservers:()I
      18: invokestatic  #144                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      21: areturn

  public java.lang.Iterable<java.util.Map<java.lang.String, java.lang.Object>> getSyncedObserversInfo();
    Code:
       0: aload_0
       1: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
       4: ifnull        25
       7: aload_0
       8: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
      11: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/ObserverMaster.getNumActiveObservers:()I
      14: ifle          25
      17: aload_0
      18: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
      21: invokevirtual #145                // Method org/apache/zookeeper/server/quorum/ObserverMaster.getActiveObservers:()Ljava/lang/Iterable;
      24: areturn
      25: invokestatic  #146                // Method java/util/Collections.emptySet:()Ljava/util/Set;
      28: areturn

  public void resetObserverConnectionStats();
    Code:
       0: aload_0
       1: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
       4: ifnull        24
       7: aload_0
       8: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
      11: invokevirtual #143                // Method org/apache/zookeeper/server/quorum/ObserverMaster.getNumActiveObservers:()I
      14: ifle          24
      17: aload_0
      18: getfield      #69                 // Field om:Lorg/apache/zookeeper/server/quorum/ObserverMaster;
      21: invokevirtual #147                // Method org/apache/zookeeper/server/quorum/ObserverMaster.resetObserverConnectionStats:()V
      24: return

  public void shutdown();
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #148                // String shutdown Follower
       5: invokeinterface #66,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      10: aload_0
      11: invokespecial #149                // Method org/apache/zookeeper/server/quorum/Learner.shutdown:()V
      14: return
}

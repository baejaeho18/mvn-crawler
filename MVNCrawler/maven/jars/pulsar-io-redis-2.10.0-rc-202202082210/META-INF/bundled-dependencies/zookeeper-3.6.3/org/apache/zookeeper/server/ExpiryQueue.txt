Compiled from "ExpiryQueue.java"
public class org.apache.zookeeper.server.ExpiryQueue<E> {
  private final java.util.concurrent.ConcurrentHashMap<E, java.lang.Long> elemMap;

  private final java.util.concurrent.ConcurrentHashMap<java.lang.Long, java.util.Set<E>> expiryMap;

  private final java.util.concurrent.atomic.AtomicLong nextExpirationTime;

  private final int expirationInterval;

  public org.apache.zookeeper.server.ExpiryQueue(int);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #4                  // Field elemMap:Ljava/util/concurrent/ConcurrentHashMap;
      15: aload_0
      16: new           #2                  // class java/util/concurrent/ConcurrentHashMap
      19: dup
      20: invokespecial #3                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      23: putfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      26: aload_0
      27: new           #6                  // class java/util/concurrent/atomic/AtomicLong
      30: dup
      31: invokespecial #7                  // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      34: putfield      #8                  // Field nextExpirationTime:Ljava/util/concurrent/atomic/AtomicLong;
      37: aload_0
      38: iload_1
      39: putfield      #9                  // Field expirationInterval:I
      42: aload_0
      43: getfield      #8                  // Field nextExpirationTime:Ljava/util/concurrent/atomic/AtomicLong;
      46: aload_0
      47: invokestatic  #10                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
      50: invokespecial #11                 // Method roundToNextInterval:(J)J
      53: invokevirtual #12                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
      56: return

  private long roundToNextInterval(long);
    Code:
       0: lload_1
       1: aload_0
       2: getfield      #9                  // Field expirationInterval:I
       5: i2l
       6: ldiv
       7: lconst_1
       8: ladd
       9: aload_0
      10: getfield      #9                  // Field expirationInterval:I
      13: i2l
      14: lmul
      15: lreturn

  public java.lang.Long remove(E);
    Code:
       0: aload_0
       1: getfield      #4                  // Field elemMap:Ljava/util/concurrent/ConcurrentHashMap;
       4: aload_1
       5: invokevirtual #13                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
       8: checkcast     #14                 // class java/lang/Long
      11: astore_2
      12: aload_2
      13: ifnull        40
      16: aload_0
      17: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      20: aload_2
      21: invokevirtual #15                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #16                 // class java/util/Set
      27: astore_3
      28: aload_3
      29: ifnull        40
      32: aload_3
      33: aload_1
      34: invokeinterface #17,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      39: pop
      40: aload_2
      41: areturn

  public java.lang.Long update(E, int);
    Code:
       0: aload_0
       1: getfield      #4                  // Field elemMap:Ljava/util/concurrent/ConcurrentHashMap;
       4: aload_1
       5: invokevirtual #15                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
       8: checkcast     #14                 // class java/lang/Long
      11: astore_3
      12: invokestatic  #10                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
      15: lstore        4
      17: aload_0
      18: lload         4
      20: iload_2
      21: i2l
      22: ladd
      23: invokespecial #11                 // Method roundToNextInterval:(J)J
      26: invokestatic  #18                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      29: astore        6
      31: aload         6
      33: aload_3
      34: invokevirtual #19                 // Method java/lang/Long.equals:(Ljava/lang/Object;)Z
      37: ifeq          42
      40: aconst_null
      41: areturn
      42: aload_0
      43: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      46: aload         6
      48: invokevirtual #15                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      51: checkcast     #16                 // class java/util/Set
      54: astore        7
      56: aload         7
      58: ifnonnull     98
      61: new           #2                  // class java/util/concurrent/ConcurrentHashMap
      64: dup
      65: invokespecial #3                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      68: invokestatic  #20                 // Method java/util/Collections.newSetFromMap:(Ljava/util/Map;)Ljava/util/Set;
      71: astore        7
      73: aload_0
      74: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      77: aload         6
      79: aload         7
      81: invokevirtual #21                 // Method java/util/concurrent/ConcurrentHashMap.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      84: checkcast     #16                 // class java/util/Set
      87: astore        8
      89: aload         8
      91: ifnull        98
      94: aload         8
      96: astore        7
      98: aload         7
     100: aload_1
     101: invokeinterface #22,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     106: pop
     107: aload_0
     108: getfield      #4                  // Field elemMap:Ljava/util/concurrent/ConcurrentHashMap;
     111: aload_1
     112: aload         6
     114: invokevirtual #23                 // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     117: checkcast     #14                 // class java/lang/Long
     120: astore_3
     121: aload_3
     122: ifnull        161
     125: aload         6
     127: aload_3
     128: invokevirtual #19                 // Method java/lang/Long.equals:(Ljava/lang/Object;)Z
     131: ifne          161
     134: aload_0
     135: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
     138: aload_3
     139: invokevirtual #15                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     142: checkcast     #16                 // class java/util/Set
     145: astore        8
     147: aload         8
     149: ifnull        161
     152: aload         8
     154: aload_1
     155: invokeinterface #17,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
     160: pop
     161: aload         6
     163: areturn

  public long getWaitTime();
    Code:
       0: invokestatic  #10                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
       3: lstore_1
       4: aload_0
       5: getfield      #8                  // Field nextExpirationTime:Ljava/util/concurrent/atomic/AtomicLong;
       8: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      11: lstore_3
      12: lload_1
      13: lload_3
      14: lcmp
      15: ifge          24
      18: lload_3
      19: lload_1
      20: lsub
      21: goto          25
      24: lconst_0
      25: lreturn

  public java.util.Set<E> poll();
    Code:
       0: invokestatic  #10                 // Method org/apache/zookeeper/common/Time.currentElapsedTime:()J
       3: lstore_1
       4: aload_0
       5: getfield      #8                  // Field nextExpirationTime:Ljava/util/concurrent/atomic/AtomicLong;
       8: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      11: lstore_3
      12: lload_1
      13: lload_3
      14: lcmp
      15: ifge          22
      18: invokestatic  #25                 // Method java/util/Collections.emptySet:()Ljava/util/Set;
      21: areturn
      22: aconst_null
      23: astore        5
      25: lload_3
      26: aload_0
      27: getfield      #9                  // Field expirationInterval:I
      30: i2l
      31: ladd
      32: lstore        6
      34: aload_0
      35: getfield      #8                  // Field nextExpirationTime:Ljava/util/concurrent/atomic/AtomicLong;
      38: lload_3
      39: lload         6
      41: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicLong.compareAndSet:(JJ)Z
      44: ifeq          63
      47: aload_0
      48: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      51: lload_3
      52: invokestatic  #18                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      55: invokevirtual #13                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      58: checkcast     #16                 // class java/util/Set
      61: astore        5
      63: aload         5
      65: ifnonnull     72
      68: invokestatic  #25                 // Method java/util/Collections.emptySet:()Ljava/util/Set;
      71: areturn
      72: aload         5
      74: areturn

  public void dump(java.io.PrintWriter);
    Code:
       0: aload_1
       1: ldc           #27                 // String Sets (
       3: invokevirtual #28                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
       6: aload_1
       7: aload_0
       8: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      11: invokevirtual #29                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
      14: invokevirtual #30                 // Method java/io/PrintWriter.print:(I)V
      17: aload_1
      18: ldc           #31                 // String )/(
      20: invokevirtual #28                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
      23: aload_1
      24: aload_0
      25: getfield      #4                  // Field elemMap:Ljava/util/concurrent/ConcurrentHashMap;
      28: invokevirtual #29                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
      31: invokevirtual #30                 // Method java/io/PrintWriter.print:(I)V
      34: aload_1
      35: ldc           #32                 // String ):
      37: invokevirtual #33                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
      40: new           #34                 // class java/util/ArrayList
      43: dup
      44: aload_0
      45: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      48: invokevirtual #35                 // Method java/util/concurrent/ConcurrentHashMap.keySet:()Ljava/util/concurrent/ConcurrentHashMap$KeySetView;
      51: invokespecial #36                 // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      54: astore_2
      55: aload_2
      56: invokestatic  #37                 // Method java/util/Collections.sort:(Ljava/util/List;)V
      59: aload_2
      60: invokevirtual #38                 // Method java/util/ArrayList.iterator:()Ljava/util/Iterator;
      63: astore_3
      64: aload_3
      65: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      70: ifeq          190
      73: aload_3
      74: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      79: checkcast     #14                 // class java/lang/Long
      82: invokevirtual #41                 // Method java/lang/Long.longValue:()J
      85: lstore        4
      87: aload_0
      88: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
      91: lload         4
      93: invokestatic  #18                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      96: invokevirtual #15                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      99: checkcast     #16                 // class java/util/Set
     102: astore        6
     104: aload         6
     106: ifnull        187
     109: aload_1
     110: aload         6
     112: invokeinterface #42,  1           // InterfaceMethod java/util/Set.size:()I
     117: invokevirtual #30                 // Method java/io/PrintWriter.print:(I)V
     120: aload_1
     121: ldc           #43                 // String  expire at
     123: invokevirtual #28                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
     126: aload_1
     127: lload         4
     129: invokestatic  #44                 // Method org/apache/zookeeper/common/Time.elapsedTimeToDate:(J)Ljava/util/Date;
     132: invokevirtual #45                 // Method java/io/PrintWriter.print:(Ljava/lang/Object;)V
     135: aload_1
     136: ldc           #46                 // String :
     138: invokevirtual #33                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     141: aload         6
     143: invokeinterface #47,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     148: astore        7
     150: aload         7
     152: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     157: ifeq          187
     160: aload         7
     162: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     167: astore        8
     169: aload_1
     170: ldc           #48                 // String \t
     172: invokevirtual #28                 // Method java/io/PrintWriter.print:(Ljava/lang/String;)V
     175: aload_1
     176: aload         8
     178: invokevirtual #49                 // Method java/lang/Object.toString:()Ljava/lang/String;
     181: invokevirtual #33                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     184: goto          150
     187: goto          64
     190: return

  public java.util.Map<java.lang.Long, java.util.Set<E>> getExpiryMap();
    Code:
       0: aload_0
       1: getfield      #5                  // Field expiryMap:Ljava/util/concurrent/ConcurrentHashMap;
       4: invokestatic  #50                 // Method java/util/Collections.unmodifiableMap:(Ljava/util/Map;)Ljava/util/Map;
       7: areturn
}

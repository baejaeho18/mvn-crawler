Compiled from "NettyServerCnxnFactory.java"
class org.apache.zookeeper.server.NettyServerCnxnFactory$DualModeSslHandler extends io.netty.handler.ssl.OptionalSslHandler {
  final org.apache.zookeeper.server.NettyServerCnxnFactory this$0;

  org.apache.zookeeper.server.NettyServerCnxnFactory$DualModeSslHandler(org.apache.zookeeper.server.NettyServerCnxnFactory, io.netty.handler.ssl.SslContext);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/apache/zookeeper/server/NettyServerCnxnFactory;
       5: aload_0
       6: aload_2
       7: invokespecial #3                  // Method io/netty/handler/ssl/OptionalSslHandler."<init>":(Lio/netty/handler/ssl/SslContext;)V
      10: return

  protected void decode(io.netty.channel.ChannelHandlerContext, io.netty.buffer.ByteBuf, java.util.List<java.lang.Object>) throws java.lang.Exception;
    Code:
       0: aload_2
       1: invokevirtual #4                  // Method io/netty/buffer/ByteBuf.readableBytes:()I
       4: iconst_5
       5: if_icmplt     18
       8: aload_0
       9: aload_1
      10: aload_2
      11: aload_3
      12: invokespecial #5                  // Method io/netty/handler/ssl/OptionalSslHandler.decode:(Lio/netty/channel/ChannelHandlerContext;Lio/netty/buffer/ByteBuf;Ljava/util/List;)V
      15: goto          58
      18: aload_2
      19: invokevirtual #4                  // Method io/netty/buffer/ByteBuf.readableBytes:()I
      22: ifle          58
      25: bipush        22
      27: aload_2
      28: iconst_0
      29: invokevirtual #6                  // Method io/netty/buffer/ByteBuf.getByte:(I)B
      32: if_icmpeq     58
      35: invokestatic  #7                  // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$000:()Lorg/slf4j/Logger;
      38: ldc           #8                  // String first byte {} does not match TLS handshake, failing to plaintext
      40: aload_2
      41: iconst_0
      42: invokevirtual #6                  // Method io/netty/buffer/ByteBuf.getByte:(I)B
      45: invokestatic  #9                  // Method java/lang/Byte.valueOf:(B)Ljava/lang/Byte;
      48: invokeinterface #10,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      53: aload_0
      54: aload_1
      55: invokespecial #11                 // Method handleNonSsl:(Lio/netty/channel/ChannelHandlerContext;)V
      58: return

  private void handleNonSsl(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #12                 // Method newNonSslHandler:(Lio/netty/channel/ChannelHandlerContext;)Lio/netty/channel/ChannelHandler;
       5: astore_2
       6: aload_2
       7: ifnull        31
      10: aload_1
      11: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      16: aload_0
      17: aload_0
      18: invokevirtual #14                 // Method newNonSslHandlerName:()Ljava/lang/String;
      21: aload_2
      22: invokeinterface #15,  4           // InterfaceMethod io/netty/channel/ChannelPipeline.replace:(Lio/netty/channel/ChannelHandler;Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      27: pop
      28: goto          44
      31: aload_1
      32: invokeinterface #13,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.pipeline:()Lio/netty/channel/ChannelPipeline;
      37: aload_0
      38: invokeinterface #16,  2           // InterfaceMethod io/netty/channel/ChannelPipeline.remove:(Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      43: pop
      44: return

  protected io.netty.handler.ssl.SslHandler newSslHandler(io.netty.channel.ChannelHandlerContext, io.netty.handler.ssl.SslContext);
    Code:
       0: aload_1
       1: invokeinterface #17,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
       6: invokestatic  #18                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$100:()Lio/netty/util/AttributeKey;
       9: invokeinterface #19,  2           // InterfaceMethod io/netty/channel/Channel.attr:(Lio/netty/util/AttributeKey;)Lio/netty/util/Attribute;
      14: invokeinterface #20,  1           // InterfaceMethod io/netty/util/Attribute.get:()Ljava/lang/Object;
      19: invokestatic  #21                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      22: checkcast     #22                 // class org/apache/zookeeper/server/NettyServerCnxn
      25: astore_3
      26: invokestatic  #7                  // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$000:()Lorg/slf4j/Logger;
      29: ldc           #23                 // String creating ssl handler for session {}
      31: aload_3
      32: invokevirtual #24                 // Method org/apache/zookeeper/server/NettyServerCnxn.getSessionId:()J
      35: invokestatic  #25                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      38: invokeinterface #10,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      43: aload_0
      44: aload_1
      45: aload_2
      46: invokespecial #26                 // Method io/netty/handler/ssl/OptionalSslHandler.newSslHandler:(Lio/netty/channel/ChannelHandlerContext;Lio/netty/handler/ssl/SslContext;)Lio/netty/handler/ssl/SslHandler;
      49: astore        4
      51: aload         4
      53: invokevirtual #27                 // Method io/netty/handler/ssl/SslHandler.handshakeFuture:()Lio/netty/util/concurrent/Future;
      56: astore        5
      58: aload         5
      60: new           #28                 // class org/apache/zookeeper/server/NettyServerCnxnFactory$CertificateVerifier
      63: dup
      64: aload_0
      65: getfield      #2                  // Field this$0:Lorg/apache/zookeeper/server/NettyServerCnxnFactory;
      68: aload         4
      70: aload_3
      71: invokespecial #29                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory$CertificateVerifier."<init>":(Lorg/apache/zookeeper/server/NettyServerCnxnFactory;Lio/netty/handler/ssl/SslHandler;Lorg/apache/zookeeper/server/NettyServerCnxn;)V
      74: invokeinterface #30,  2           // InterfaceMethod io/netty/util/concurrent/Future.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/util/concurrent/Future;
      79: pop
      80: aload         4
      82: areturn

  protected io.netty.channel.ChannelHandler newNonSslHandler(io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_1
       1: invokeinterface #17,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
       6: invokestatic  #18                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$100:()Lio/netty/util/AttributeKey;
       9: invokeinterface #19,  2           // InterfaceMethod io/netty/channel/Channel.attr:(Lio/netty/util/AttributeKey;)Lio/netty/util/Attribute;
      14: invokeinterface #20,  1           // InterfaceMethod io/netty/util/Attribute.get:()Ljava/lang/Object;
      19: invokestatic  #21                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      22: checkcast     #22                 // class org/apache/zookeeper/server/NettyServerCnxn
      25: astore_2
      26: invokestatic  #7                  // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$000:()Lorg/slf4j/Logger;
      29: ldc           #31                 // String creating plaintext handler for session {}
      31: aload_2
      32: invokevirtual #24                 // Method org/apache/zookeeper/server/NettyServerCnxn.getSessionId:()J
      35: invokestatic  #25                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      38: invokeinterface #10,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      43: aload_0
      44: getfield      #2                  // Field this$0:Lorg/apache/zookeeper/server/NettyServerCnxnFactory;
      47: aload_2
      48: invokestatic  #32                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$200:(Lorg/apache/zookeeper/server/NettyServerCnxnFactory;Lorg/apache/zookeeper/server/NettyServerCnxn;)V
      51: aload_0
      52: getfield      #2                  // Field this$0:Lorg/apache/zookeeper/server/NettyServerCnxnFactory;
      55: invokestatic  #33                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$300:(Lorg/apache/zookeeper/server/NettyServerCnxnFactory;)Lio/netty/channel/group/ChannelGroup;
      58: aload_1
      59: invokeinterface #17,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
      64: invokeinterface #34,  2           // InterfaceMethod io/netty/channel/group/ChannelGroup.add:(Ljava/lang/Object;)Z
      69: pop
      70: aload_0
      71: getfield      #2                  // Field this$0:Lorg/apache/zookeeper/server/NettyServerCnxnFactory;
      74: aload_2
      75: invokestatic  #35                 // Method org/apache/zookeeper/server/NettyServerCnxnFactory.access$400:(Lorg/apache/zookeeper/server/NettyServerCnxnFactory;Lorg/apache/zookeeper/server/NettyServerCnxn;)V
      78: aload_0
      79: aload_1
      80: invokespecial #36                 // Method io/netty/handler/ssl/OptionalSslHandler.newNonSslHandler:(Lio/netty/channel/ChannelHandlerContext;)Lio/netty/channel/ChannelHandler;
      83: areturn
}

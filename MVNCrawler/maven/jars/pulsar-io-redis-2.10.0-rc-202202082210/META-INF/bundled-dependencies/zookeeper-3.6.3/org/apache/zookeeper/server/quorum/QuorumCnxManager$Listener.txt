Compiled from "QuorumCnxManager.java"
public class org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener extends org.apache.zookeeper.server.ZooKeeperThread {
  private static final java.lang.String ELECTION_PORT_BIND_RETRY;

  private static final int DEFAULT_PORT_BIND_MAX_RETRY;

  private final int portBindMaxRetry;

  private java.lang.Runnable socketBindErrorHandler;

  private java.util.List<org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener$ListenerHandler> listenerHandlers;

  private final java.util.concurrent.atomic.AtomicBoolean socketException;

  final org.apache.zookeeper.server.quorum.QuorumCnxManager this$0;

  public org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener(org.apache.zookeeper.server.quorum.QuorumCnxManager);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
       5: aload_0
       6: ldc           #4                  // String ListenerThread
       8: invokespecial #5                  // Method org/apache/zookeeper/server/ZooKeeperThread."<init>":(Ljava/lang/String;)V
      11: aload_0
      12: invokedynamic #6,  0              // InvokeDynamic #0:run:()Ljava/lang/Runnable;
      17: putfield      #7                  // Field socketBindErrorHandler:Ljava/lang/Runnable;
      20: aload_0
      21: new           #8                  // class java/util/concurrent/atomic/AtomicBoolean
      24: dup
      25: iconst_0
      26: invokespecial #9                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      29: putfield      #1                  // Field socketException:Ljava/util/concurrent/atomic/AtomicBoolean;
      32: ldc           #11                 // String zookeeper.electionPortBindRetry
      34: iconst_3
      35: invokestatic  #12                 // Method java/lang/Integer.getInteger:(Ljava/lang/String;I)Ljava/lang/Integer;
      38: astore_2
      39: aload_2
      40: invokevirtual #13                 // Method java/lang/Integer.intValue:()I
      43: iflt          80
      46: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
      49: ldc           #15                 // String Election port bind maximum retries is {}
      51: aload_2
      52: invokevirtual #13                 // Method java/lang/Integer.intValue:()I
      55: ifne          63
      58: ldc           #16                 // String infinite
      60: goto          64
      63: aload_2
      64: invokeinterface #17,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      69: aload_0
      70: aload_2
      71: invokevirtual #13                 // Method java/lang/Integer.intValue:()I
      74: putfield      #2                  // Field portBindMaxRetry:I
      77: goto          115
      80: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
      83: ldc           #18                 // String \'{}\' contains invalid value: {}(must be >= 0). Use default value of {} instead.
      85: iconst_3
      86: anewarray     #19                 // class java/lang/Object
      89: dup
      90: iconst_0
      91: ldc           #11                 // String zookeeper.electionPortBindRetry
      93: aastore
      94: dup
      95: iconst_1
      96: aload_2
      97: aastore
      98: dup
      99: iconst_2
     100: iconst_3
     101: invokestatic  #20                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     104: aastore
     105: invokeinterface #21,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
     110: aload_0
     111: iconst_3
     112: putfield      #2                  // Field portBindMaxRetry:I
     115: return

  void setSocketBindErrorHandler(java.lang.Runnable);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #7                  // Field socketBindErrorHandler:Ljava/lang/Runnable;
       5: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
       4: getfield      #22                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.shutdown:Z
       7: ifne          357
      10: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
      13: ldc           #23                 // String Listener thread started, myId: {}
      15: aload_0
      16: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      19: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      22: invokevirtual #25                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getId:()J
      25: invokestatic  #26                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      28: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      33: aload_0
      34: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      37: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      40: invokevirtual #28                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getQuorumListenOnAllIPs:()Z
      43: ifeq          63
      46: aload_0
      47: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      50: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      53: invokevirtual #29                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getElectionAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
      56: invokevirtual #30                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getWildcardAddresses:()Ljava/util/Set;
      59: astore_1
      60: goto          77
      63: aload_0
      64: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      67: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      70: invokevirtual #29                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getElectionAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
      73: invokevirtual #31                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllAddresses:()Ljava/util/Set;
      76: astore_1
      77: new           #32                 // class java/util/concurrent/CountDownLatch
      80: dup
      81: aload_1
      82: invokeinterface #33,  1           // InterfaceMethod java/util/Set.size:()I
      87: invokespecial #34                 // Method java/util/concurrent/CountDownLatch."<init>":(I)V
      90: astore_2
      91: aload_0
      92: aload_1
      93: invokeinterface #35,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
      98: aload_0
      99: aload_2
     100: invokedynamic #36,  0             // InvokeDynamic #1:apply:(Lorg/apache/zookeeper/server/quorum/QuorumCnxManager$Listener;Ljava/util/concurrent/CountDownLatch;)Ljava/util/function/Function;
     105: invokeinterface #37,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     110: invokestatic  #38                 // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
     113: invokeinterface #39,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
     118: checkcast     #40                 // class java/util/List
     121: putfield      #41                 // Field listenerHandlers:Ljava/util/List;
     124: aload_1
     125: invokeinterface #33,  1           // InterfaceMethod java/util/Set.size:()I
     130: invokestatic  #42                 // Method java/util/concurrent/Executors.newFixedThreadPool:(I)Ljava/util/concurrent/ExecutorService;
     133: astore_3
     134: aload_0
     135: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
     138: aload_3
     139: dup
     140: invokevirtual #43                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     143: pop
     144: invokedynamic #44,  0             // InvokeDynamic #2:accept:(Ljava/util/concurrent/ExecutorService;)Ljava/util/function/Consumer;
     149: invokeinterface #45,  2           // InterfaceMethod java/util/List.forEach:(Ljava/util/function/Consumer;)V
     154: aload_2
     155: invokevirtual #46                 // Method java/util/concurrent/CountDownLatch.await:()V
     158: aload_0
     159: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
     162: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     167: astore        4
     169: aload         4
     171: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     176: ifeq          216
     179: aload         4
     181: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     186: checkcast     #50                 // class org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler
     189: astore        5
     191: aload         5
     193: invokevirtual #51                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler.close:()V
     196: goto          213
     199: astore        6
     201: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     204: ldc           #53                 // String Error closing server socket
     206: aload         6
     208: invokeinterface #54,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     213: goto          169
     216: goto          357
     219: astore        4
     221: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     224: ldc           #56                 // String Interrupted while sleeping. Ignoring exception
     226: aload         4
     228: invokeinterface #57,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     233: aload_0
     234: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
     237: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     242: astore        4
     244: aload         4
     246: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     251: ifeq          291
     254: aload         4
     256: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     261: checkcast     #50                 // class org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler
     264: astore        5
     266: aload         5
     268: invokevirtual #51                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler.close:()V
     271: goto          288
     274: astore        6
     276: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     279: ldc           #53                 // String Error closing server socket
     281: aload         6
     283: invokeinterface #54,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     288: goto          244
     291: goto          357
     294: astore        7
     296: aload_0
     297: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
     300: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     305: astore        8
     307: aload         8
     309: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     314: ifeq          354
     317: aload         8
     319: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     324: checkcast     #50                 // class org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler
     327: astore        9
     329: aload         9
     331: invokevirtual #51                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler.close:()V
     334: goto          351
     337: astore        10
     339: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     342: ldc           #53                 // String Error closing server socket
     344: aload         10
     346: invokeinterface #54,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     351: goto          307
     354: aload         7
     356: athrow
     357: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     360: ldc           #58                 // String Leaving listener
     362: invokeinterface #59,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     367: aload_0
     368: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
     371: getfield      #22                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.shutdown:Z
     374: ifne          444
     377: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
     380: ldc           #60                 // String As I\'m leaving the listener thread, I won\'t be able to participate in leader election any longer: {}
     382: aload_0
     383: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
     386: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     389: invokevirtual #29                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getElectionAddress:()Lorg/apache/zookeeper/server/quorum/MultipleAddresses;
     392: invokevirtual #31                 // Method org/apache/zookeeper/server/quorum/MultipleAddresses.getAllAddresses:()Ljava/util/Set;
     395: invokeinterface #35,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
     400: invokedynamic #61,  0             // InvokeDynamic #3:apply:()Ljava/util/function/Function;
     405: invokeinterface #37,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
     410: ldc           #62                 // String |
     412: invokestatic  #63                 // Method java/util/stream/Collectors.joining:(Ljava/lang/CharSequence;)Ljava/util/stream/Collector;
     415: invokeinterface #39,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
     420: invokeinterface #64,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     425: aload_0
     426: getfield      #1                  // Field socketException:Ljava/util/concurrent/atomic/AtomicBoolean;
     429: invokevirtual #65                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
     432: ifeq          444
     435: aload_0
     436: getfield      #7                  // Field socketBindErrorHandler:Ljava/lang/Runnable;
     439: invokeinterface #66,  1           // InterfaceMethod java/lang/Runnable.run:()V
     444: return
    Exception table:
       from    to  target type
         191   196   199   Class java/io/IOException
         154   158   219   Class java/lang/InterruptedException
         266   271   274   Class java/io/IOException
         154   158   294   any
         219   233   294   any
         329   334   337   Class java/io/IOException
         294   296   294   any

  void halt();
    Code:
       0: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
       3: ldc           #67                 // String Halt called: Trying to close listeners
       5: invokeinterface #68,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      10: aload_0
      11: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
      14: ifnull        88
      17: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
      20: ldc           #69                 // String Closing listener: {}
      22: aload_0
      23: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      26: getfield      #70                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.mySid:J
      29: invokestatic  #26                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      32: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      37: aload_0
      38: getfield      #41                 // Field listenerHandlers:Ljava/util/List;
      41: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      46: astore_1
      47: aload_1
      48: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      53: ifeq          88
      56: aload_1
      57: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      62: checkcast     #50                 // class org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler
      65: astore_2
      66: aload_2
      67: invokevirtual #51                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler.close:()V
      70: goto          85
      73: astore_3
      74: invokestatic  #14                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager.access$100:()Lorg/slf4j/Logger;
      77: ldc           #71                 // String Exception when shutting down listener:
      79: aload_3
      80: invokeinterface #72,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      85: goto          47
      88: return
    Exception table:
       from    to  target type
          66    70    73   Class java/io/IOException

  private org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener$ListenerHandler lambda$run$1(java.util.concurrent.CountDownLatch, java.net.InetSocketAddress);
    Code:
       0: new           #50                 // class org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler
       3: dup
       4: aload_0
       5: aload_2
       6: aload_0
       7: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      10: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      13: invokevirtual #73                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.shouldUsePortUnification:()Z
      16: aload_0
      17: getfield      #3                  // Field this$0:Lorg/apache/zookeeper/server/quorum/QuorumCnxManager;
      20: getfield      #24                 // Field org/apache/zookeeper/server/quorum/QuorumCnxManager.self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      23: invokevirtual #74                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.isSslQuorum:()Z
      26: aload_1
      27: invokespecial #75                 // Method org/apache/zookeeper/server/quorum/QuorumCnxManager$Listener$ListenerHandler."<init>":(Lorg/apache/zookeeper/server/quorum/QuorumCnxManager$Listener;Ljava/net/InetSocketAddress;ZZLjava/util/concurrent/CountDownLatch;)V
      30: areturn

  private static void lambda$new$0();
    Code:
       0: getstatic     #76                 // Field org/apache/zookeeper/server/ExitCode.UNABLE_TO_BIND_QUORUM_PORT:Lorg/apache/zookeeper/server/ExitCode;
       3: invokevirtual #77                 // Method org/apache/zookeeper/server/ExitCode.getValue:()I
       6: invokestatic  #78                 // Method org/apache/zookeeper/util/ServiceUtils.requestSystemExit:(I)V
       9: return

  static int access$200(org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener);
    Code:
       0: aload_0
       1: getfield      #2                  // Field portBindMaxRetry:I
       4: ireturn

  static java.util.concurrent.atomic.AtomicBoolean access$500(org.apache.zookeeper.server.quorum.QuorumCnxManager$Listener);
    Code:
       0: aload_0
       1: getfield      #1                  // Field socketException:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: areturn
}

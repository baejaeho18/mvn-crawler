Compiled from "AltsTsiHandshaker.java"
public final class io.grpc.alts.internal.AltsTsiHandshaker implements io.grpc.alts.internal.TsiHandshaker {
  private final io.grpc.ChannelLogger logger;

  public static final java.lang.String TSI_SERVICE_ACCOUNT_PEER_PROPERTY;

  private final boolean isClient;

  private final io.grpc.alts.internal.AltsHandshakerClient handshaker;

  private java.nio.ByteBuffer outputFrame;

  private io.grpc.alts.internal.AltsTsiHandshaker(boolean, io.grpc.alts.internal.HandshakerServiceGrpc$HandshakerServiceStub, io.grpc.alts.internal.AltsHandshakerOptions, io.grpc.ChannelLogger);
    Code:
       0: aload_0
       1: invokespecial #42                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iload_1
       6: putfield      #44                 // Field isClient:Z
       9: aload_0
      10: aload         4
      12: putfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      15: aload_0
      16: new           #48                 // class io/grpc/alts/internal/AltsHandshakerClient
      19: dup
      20: aload_2
      21: aload_3
      22: aload         4
      24: invokespecial #51                 // Method io/grpc/alts/internal/AltsHandshakerClient."<init>":(Lio/grpc/alts/internal/HandshakerServiceGrpc$HandshakerServiceStub;Lio/grpc/alts/internal/AltsHandshakerOptions;Lio/grpc/ChannelLogger;)V
      27: putfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      30: return

  io.grpc.alts.internal.AltsTsiHandshaker(boolean, io.grpc.alts.internal.AltsHandshakerClient, io.grpc.ChannelLogger);
    Code:
       0: aload_0
       1: invokespecial #42                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iload_1
       6: putfield      #44                 // Field isClient:Z
       9: aload_0
      10: aload_2
      11: putfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      14: aload_0
      15: aload_3
      16: putfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      19: return

  public boolean processBytesFromPeer(java.nio.ByteBuffer) throws java.security.GeneralSecurityException;
    Code:
       0: aload_0
       1: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
       4: ifnonnull     16
       7: aload_0
       8: getfield      #44                 // Field isClient:Z
      11: ifeq          16
      14: iconst_1
      15: ireturn
      16: aload_0
      17: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      20: ifnull        35
      23: aload_0
      24: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      27: invokevirtual #73                 // Method java/nio/ByteBuffer.hasRemaining:()Z
      30: ifeq          35
      33: iconst_1
      34: ireturn
      35: aload_1
      36: invokevirtual #77                 // Method java/nio/ByteBuffer.remaining:()I
      39: istore_2
      40: aload_0
      41: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      44: ifnonnull     79
      47: aload_0
      48: getfield      #44                 // Field isClient:Z
      51: ifne          58
      54: iconst_1
      55: goto          59
      58: iconst_0
      59: ldc           #79                 // String Client handshaker should not process any frame at the beginning.
      61: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      64: aload_0
      65: aload_0
      66: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      69: aload_1
      70: invokevirtual #89                 // Method io/grpc/alts/internal/AltsHandshakerClient.startServerHandshake:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
      73: putfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      76: goto          103
      79: aload_0
      80: getfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      83: getstatic     #93                 // Field io/grpc/ChannelLogger$ChannelLogLevel.DEBUG:Lio/grpc/ChannelLogger$ChannelLogLevel;
      86: ldc           #95                 // String Receive ALTS handshake from downstream
      88: invokevirtual #99                 // Method io/grpc/ChannelLogger.log:(Lio/grpc/ChannelLogger$ChannelLogLevel;Ljava/lang/String;)V
      91: aload_0
      92: aload_0
      93: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      96: aload_1
      97: invokevirtual #102                // Method io/grpc/alts/internal/AltsHandshakerClient.next:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
     100: putfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
     103: aload_0
     104: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
     107: invokevirtual #105                // Method io/grpc/alts/internal/AltsHandshakerClient.isFinished:()Z
     110: ifne          123
     113: aload_0
     114: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
     117: invokevirtual #73                 // Method java/nio/ByteBuffer.hasRemaining:()Z
     120: ifeq          125
     123: iconst_1
     124: ireturn
     125: aload_1
     126: invokevirtual #73                 // Method java/nio/ByteBuffer.hasRemaining:()Z
     129: ifne          134
     132: iconst_0
     133: ireturn
     134: aload_1
     135: invokevirtual #77                 // Method java/nio/ByteBuffer.remaining:()I
     138: iload_2
     139: if_icmpge     146
     142: iconst_1
     143: goto          147
     146: iconst_0
     147: ldc           #107                // String Handshaker did not consume any bytes.
     149: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
     152: aload_0
     153: aload_1
     154: invokevirtual #109                // Method processBytesFromPeer:(Ljava/nio/ByteBuffer;)Z
     157: ireturn

  public io.grpc.alts.internal.TsiPeer extractPeer() throws java.security.GeneralSecurityException;
    Code:
       0: aload_0
       1: invokevirtual #116                // Method isInProgress:()Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #118                // String Handshake is not complete.
      14: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      17: new           #120                // class java/util/ArrayList
      20: dup
      21: invokespecial #121                // Method java/util/ArrayList."<init>":()V
      24: astore_1
      25: aload_1
      26: new           #19                 // class io/grpc/alts/internal/TsiPeer$StringProperty
      29: dup
      30: ldc           #31                 // String service_account
      32: aload_0
      33: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      36: invokevirtual #125                // Method io/grpc/alts/internal/AltsHandshakerClient.getResult:()Lio/grpc/alts/internal/HandshakerResult;
      39: invokevirtual #131                // Method io/grpc/alts/internal/HandshakerResult.getPeerIdentity:()Lio/grpc/alts/internal/Identity;
      42: invokevirtual #137                // Method io/grpc/alts/internal/Identity.getServiceAccount:()Ljava/lang/String;
      45: invokespecial #140                // Method io/grpc/alts/internal/TsiPeer$StringProperty."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      48: invokeinterface #146,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      53: pop
      54: new           #16                 // class io/grpc/alts/internal/TsiPeer
      57: dup
      58: aload_1
      59: invokespecial #149                // Method io/grpc/alts/internal/TsiPeer."<init>":(Ljava/util/List;)V
      62: areturn

  public java.lang.Object extractPeerObject() throws java.security.GeneralSecurityException;
    Code:
       0: aload_0
       1: invokevirtual #116                // Method isInProgress:()Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #118                // String Handshake is not complete.
      14: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      17: new           #156                // class io/grpc/alts/internal/AltsInternalContext
      20: dup
      21: aload_0
      22: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      25: invokevirtual #125                // Method io/grpc/alts/internal/AltsHandshakerClient.getResult:()Lio/grpc/alts/internal/HandshakerResult;
      28: invokespecial #159                // Method io/grpc/alts/internal/AltsInternalContext."<init>":(Lio/grpc/alts/internal/HandshakerResult;)V
      31: areturn

  public static io.grpc.alts.internal.TsiHandshaker newClient(io.grpc.alts.internal.HandshakerServiceGrpc$HandshakerServiceStub, io.grpc.alts.internal.AltsHandshakerOptions, io.grpc.ChannelLogger);
    Code:
       0: new           #2                  // class io/grpc/alts/internal/AltsTsiHandshaker
       3: dup
       4: iconst_1
       5: aload_0
       6: aload_1
       7: aload_2
       8: invokespecial #163                // Method "<init>":(ZLio/grpc/alts/internal/HandshakerServiceGrpc$HandshakerServiceStub;Lio/grpc/alts/internal/AltsHandshakerOptions;Lio/grpc/ChannelLogger;)V
      11: areturn

  public static io.grpc.alts.internal.TsiHandshaker newServer(io.grpc.alts.internal.HandshakerServiceGrpc$HandshakerServiceStub, io.grpc.alts.internal.AltsHandshakerOptions, io.grpc.ChannelLogger);
    Code:
       0: new           #2                  // class io/grpc/alts/internal/AltsTsiHandshaker
       3: dup
       4: iconst_0
       5: aload_0
       6: aload_1
       7: aload_2
       8: invokespecial #163                // Method "<init>":(ZLio/grpc/alts/internal/HandshakerServiceGrpc$HandshakerServiceStub;Lio/grpc/alts/internal/AltsHandshakerOptions;Lio/grpc/ChannelLogger;)V
      11: areturn

  public void getBytesToSendToPeer(java.nio.ByteBuffer) throws java.security.GeneralSecurityException;
    Code:
       0: aload_0
       1: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
       4: ifnonnull     41
       7: aload_0
       8: getfield      #44                 // Field isClient:Z
      11: ifeq          40
      14: aload_0
      15: getfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      18: getstatic     #93                 // Field io/grpc/ChannelLogger$ChannelLogLevel.DEBUG:Lio/grpc/ChannelLogger$ChannelLogLevel;
      21: ldc           #168                // String Initial ALTS handshake to downstream
      23: invokevirtual #99                 // Method io/grpc/ChannelLogger.log:(Lio/grpc/ChannelLogger$ChannelLogLevel;Ljava/lang/String;)V
      26: aload_0
      27: aload_0
      28: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      31: invokevirtual #172                // Method io/grpc/alts/internal/AltsHandshakerClient.startClientHandshake:()Ljava/nio/ByteBuffer;
      34: putfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      37: goto          41
      40: return
      41: aload_0
      42: getfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      45: getstatic     #93                 // Field io/grpc/ChannelLogger$ChannelLogLevel.DEBUG:Lio/grpc/ChannelLogger$ChannelLogLevel;
      48: ldc           #174                // String Send ALTS request to downstream
      50: invokevirtual #99                 // Method io/grpc/ChannelLogger.log:(Lio/grpc/ChannelLogger$ChannelLogLevel;Ljava/lang/String;)V
      53: aload_0
      54: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      57: astore_2
      58: aload_0
      59: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      62: invokevirtual #77                 // Method java/nio/ByteBuffer.remaining:()I
      65: aload_1
      66: invokevirtual #77                 // Method java/nio/ByteBuffer.remaining:()I
      69: if_icmple     94
      72: aload_0
      73: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      76: invokevirtual #177                // Method java/nio/ByteBuffer.duplicate:()Ljava/nio/ByteBuffer;
      79: astore_2
      80: aload_2
      81: aload_2
      82: invokevirtual #180                // Method java/nio/ByteBuffer.position:()I
      85: aload_1
      86: invokevirtual #77                 // Method java/nio/ByteBuffer.remaining:()I
      89: iadd
      90: invokevirtual #186                // Method java/nio/Buffer.limit:(I)Ljava/nio/Buffer;
      93: pop
      94: aload_1
      95: aload_2
      96: invokevirtual #189                // Method java/nio/ByteBuffer.put:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
      99: pop
     100: aload_0
     101: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
     104: aload_2
     105: invokevirtual #180                // Method java/nio/ByteBuffer.position:()I
     108: invokevirtual #191                // Method java/nio/Buffer.position:(I)Ljava/nio/Buffer;
     111: pop
     112: return

  public boolean isInProgress();
    Code:
       0: aload_0
       1: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
       4: invokevirtual #105                // Method io/grpc/alts/internal/AltsHandshakerClient.isFinished:()Z
       7: ifeq          20
      10: aload_0
      11: getfield      #67                 // Field outputFrame:Ljava/nio/ByteBuffer;
      14: invokevirtual #73                 // Method java/nio/ByteBuffer.hasRemaining:()Z
      17: ifeq          24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ireturn

  public io.grpc.alts.internal.TsiFrameProtector createFrameProtector(int, io.grpc.netty.shaded.io.netty.buffer.ByteBufAllocator);
    Code:
       0: aload_0
       1: invokevirtual #116                // Method isInProgress:()Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #118                // String Handshake is not complete.
      14: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      17: aload_0
      18: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      21: invokevirtual #198                // Method io/grpc/alts/internal/AltsHandshakerClient.getKey:()[B
      24: astore_3
      25: aload_3
      26: arraylength
      27: invokestatic  #203                // Method io/grpc/alts/internal/AltsChannelCrypter.getKeyLength:()I
      30: if_icmpne     37
      33: iconst_1
      34: goto          38
      37: iconst_0
      38: ldc           #207                // String Bad key length.
      40: invokestatic  #85                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      43: aload_0
      44: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
      47: invokevirtual #125                // Method io/grpc/alts/internal/AltsHandshakerClient.getResult:()Lio/grpc/alts/internal/HandshakerResult;
      50: invokevirtual #210                // Method io/grpc/alts/internal/HandshakerResult.getMaxFrameSize:()I
      53: istore        4
      55: iload         4
      57: ifeq          77
      60: iload         4
      62: invokestatic  #213                // Method io/grpc/alts/internal/AltsTsiFrameProtector.getMaxFrameSize:()I
      65: invokestatic  #219                // Method java/lang/Math.min:(II)I
      68: istore_1
      69: invokestatic  #222                // Method io/grpc/alts/internal/AltsTsiFrameProtector.getMinFrameSize:()I
      72: iload_1
      73: invokestatic  #225                // Method java/lang/Math.max:(II)I
      76: istore_1
      77: aload_0
      78: getfield      #46                 // Field logger:Lio/grpc/ChannelLogger;
      81: getstatic     #228                // Field io/grpc/ChannelLogger$ChannelLogLevel.INFO:Lio/grpc/ChannelLogger$ChannelLogLevel;
      84: ldc           #230                // String Maximum frame size value is {0}.
      86: iconst_1
      87: anewarray     #4                  // class java/lang/Object
      90: dup
      91: iconst_0
      92: iload_1
      93: invokestatic  #236                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      96: aastore
      97: invokevirtual #239                // Method io/grpc/ChannelLogger.log:(Lio/grpc/ChannelLogger$ChannelLogLevel;Ljava/lang/String;[Ljava/lang/Object;)V
     100: new           #212                // class io/grpc/alts/internal/AltsTsiFrameProtector
     103: dup
     104: iload_1
     105: new           #200                // class io/grpc/alts/internal/AltsChannelCrypter
     108: dup
     109: aload_3
     110: aload_0
     111: getfield      #44                 // Field isClient:Z
     114: invokespecial #242                // Method io/grpc/alts/internal/AltsChannelCrypter."<init>":([BZ)V
     117: aload_2
     118: invokespecial #245                // Method io/grpc/alts/internal/AltsTsiFrameProtector."<init>":(ILio/grpc/alts/internal/ChannelCrypterNetty;Lio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;)V
     121: areturn

  public io.grpc.alts.internal.TsiFrameProtector createFrameProtector(io.grpc.netty.shaded.io.netty.buffer.ByteBufAllocator);
    Code:
       0: aload_0
       1: invokestatic  #222                // Method io/grpc/alts/internal/AltsTsiFrameProtector.getMinFrameSize:()I
       4: aload_1
       5: invokevirtual #253                // Method createFrameProtector:(ILio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;)Lio/grpc/alts/internal/TsiFrameProtector;
       8: areturn

  public void close();
    Code:
       0: aload_0
       1: getfield      #53                 // Field handshaker:Lio/grpc/alts/internal/AltsHandshakerClient;
       4: invokevirtual #256                // Method io/grpc/alts/internal/AltsHandshakerClient.close:()V
       7: return
}

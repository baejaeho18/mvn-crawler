Compiled from "TsiFrameHandler.java"
public final class io.grpc.alts.internal.TsiFrameHandler extends io.grpc.netty.shaded.io.netty.handler.codec.ByteToMessageDecoder implements io.grpc.netty.shaded.io.netty.channel.ChannelOutboundHandler {
  private static final java.util.logging.Logger logger;

  private io.grpc.alts.internal.TsiFrameProtector protector;

  private io.grpc.netty.shaded.io.netty.channel.PendingWriteQueue pendingUnprotectedWrites;

  private boolean closeInitiated;

  static final boolean $assertionsDisabled;

  public io.grpc.alts.internal.TsiFrameHandler(io.grpc.alts.internal.TsiFrameProtector);
    Code:
       0: aload_0
       1: invokespecial #29                 // Method io/grpc/netty/shaded/io/netty/handler/codec/ByteToMessageDecoder."<init>":()V
       4: aload_0
       5: aload_1
       6: ldc           #30                 // String protector
       8: invokestatic  #36                 // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      11: checkcast     #14                 // class io/grpc/alts/internal/TsiFrameProtector
      14: putfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      17: return

  public void handlerAdded(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #46                 // Method io/grpc/netty/shaded/io/netty/handler/codec/ByteToMessageDecoder.handlerAdded:(Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;)V
       5: getstatic     #48                 // Field $assertionsDisabled:Z
       8: ifne          26
      11: aload_0
      12: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      15: ifnull        26
      18: new           #52                 // class java/lang/AssertionError
      21: dup
      22: invokespecial #53                 // Method java/lang/AssertionError."<init>":()V
      25: athrow
      26: aload_0
      27: new           #55                 // class io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue
      30: dup
      31: aload_1
      32: invokestatic  #58                 // Method com/google/common/base/Preconditions.checkNotNull:(Ljava/lang/Object;)Ljava/lang/Object;
      35: checkcast     #60                 // class io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext
      38: invokespecial #62                 // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue."<init>":(Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;)V
      41: putfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      44: return

  protected void decode(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, io.grpc.netty.shaded.io.netty.buffer.ByteBuf, java.util.List<java.lang.Object>) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #69                 // String decode() called after close()
      14: invokestatic  #73                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      17: aload_0
      18: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      21: aload_2
      22: aload_3
      23: aload_1
      24: invokeinterface #77,  1           // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.alloc:()Lio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;
      29: invokeinterface #81,  4           // InterfaceMethod io/grpc/alts/internal/TsiFrameProtector.unprotect:(Lio/grpc/netty/shaded/io/netty/buffer/ByteBuf;Ljava/util/List;Lio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;)V
      34: return

  public void write(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, java.lang.Object, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_0
       1: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
       4: ifnonnull     24
       7: aload_3
       8: new           #90                 // class java/lang/IllegalStateException
      11: dup
      12: ldc           #92                 // String write() called after close()
      14: invokespecial #95                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      17: invokeinterface #101,  2          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelPromise.setFailure:(Ljava/lang/Throwable;)Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;
      22: pop
      23: return
      24: aload_2
      25: checkcast     #103                // class io/grpc/netty/shaded/io/netty/buffer/ByteBuf
      28: astore        4
      30: aload         4
      32: invokevirtual #107                // Method io/grpc/netty/shaded/io/netty/buffer/ByteBuf.isReadable:()Z
      35: ifne          46
      38: aload_3
      39: invokeinterface #111,  1          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelPromise.setSuccess:()Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;
      44: pop
      45: return
      46: aload_0
      47: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      50: aload         4
      52: aload_3
      53: invokevirtual #115                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.add:(Ljava/lang/Object;Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)V
      56: return

  public void handlerRemoved0(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #124                // Method destroyProtectorAndWrites:()V
       4: return

  public void disconnect(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #129                // Method doClose:(Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;)V
       5: aload_1
       6: aload_2
       7: invokeinterface #132,  2          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.disconnect:(Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)Lio/grpc/netty/shaded/io/netty/channel/ChannelFuture;
      12: pop
      13: return

  public void close(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #129                // Method doClose:(Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;)V
       5: aload_1
       6: aload_2
       7: invokeinterface #135,  2          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.close:(Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)Lio/grpc/netty/shaded/io/netty/channel/ChannelFuture;
      12: pop
      13: return

  private void doClose(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_0
       1: getfield      #139                // Field closeInitiated:Z
       4: ifeq          8
       7: return
       8: aload_0
       9: iconst_1
      10: putfield      #139                // Field closeInitiated:Z
      13: aload_0
      14: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      17: invokevirtual #142                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.isEmpty:()Z
      20: ifne          28
      23: aload_0
      24: aload_1
      25: invokevirtual #145                // Method flush:(Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;)V
      28: aload_0
      29: invokespecial #124                // Method destroyProtectorAndWrites:()V
      32: goto          62
      35: astore_2
      36: getstatic     #147                // Field logger:Ljava/util/logging/Logger;
      39: getstatic     #153                // Field java/util/logging/Level.FINE:Ljava/util/logging/Level;
      42: ldc           #155                // String Ignored error on flush before close
      44: aload_2
      45: invokevirtual #161                // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      48: aload_0
      49: invokespecial #124                // Method destroyProtectorAndWrites:()V
      52: goto          62
      55: astore_3
      56: aload_0
      57: invokespecial #124                // Method destroyProtectorAndWrites:()V
      60: aload_3
      61: athrow
      62: return
    Exception table:
       from    to  target type
          13    28    35   Class java/security/GeneralSecurityException
          13    28    55   any
          35    48    55   any

  public void flush(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext) throws java.security.GeneralSecurityException;
    Code:
       0: aload_0
       1: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
       4: ifnull        17
       7: aload_0
       8: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      11: invokevirtual #142                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.isEmpty:()Z
      14: ifeq          18
      17: return
      18: aload_0
      19: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      22: ifnull        29
      25: iconst_1
      26: goto          30
      29: iconst_0
      30: ldc           #167                // String flush() called after close()
      32: invokestatic  #73                 // Method com/google/common/base/Preconditions.checkState:(ZLjava/lang/Object;)V
      35: new           #169                // class io/grpc/alts/internal/ProtectedPromise
      38: dup
      39: aload_1
      40: invokeinterface #173,  1          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.channel:()Lio/grpc/netty/shaded/io/netty/channel/Channel;
      45: aload_1
      46: invokeinterface #177,  1          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.executor:()Lio/grpc/netty/shaded/io/netty/util/concurrent/EventExecutor;
      51: aload_0
      52: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      55: invokevirtual #181                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.size:()I
      58: invokespecial #184                // Method io/grpc/alts/internal/ProtectedPromise."<init>":(Lio/grpc/netty/shaded/io/netty/channel/Channel;Lio/grpc/netty/shaded/io/netty/util/concurrent/EventExecutor;I)V
      61: astore_2
      62: new           #186                // class java/util/ArrayList
      65: dup
      66: aload_0
      67: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      70: invokevirtual #181                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.size:()I
      73: invokespecial #189                // Method java/util/ArrayList."<init>":(I)V
      76: astore_3
      77: aload_0
      78: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      81: invokevirtual #142                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.isEmpty:()Z
      84: ifne          125
      87: aload_0
      88: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      91: invokevirtual #195                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.current:()Ljava/lang/Object;
      94: checkcast     #103                // class io/grpc/netty/shaded/io/netty/buffer/ByteBuf
      97: astore        4
      99: aload_3
     100: aload         4
     102: invokevirtual #199                // Method io/grpc/netty/shaded/io/netty/buffer/ByteBuf.retain:()Lio/grpc/netty/shaded/io/netty/buffer/ByteBuf;
     105: invokeinterface #202,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     110: pop
     111: aload_2
     112: aload_0
     113: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
     116: invokevirtual #205                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.remove:()Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;
     119: invokevirtual #209                // Method io/grpc/alts/internal/ProtectedPromise.addUnprotectedPromise:(Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)V
     122: goto          77
     125: aload_0
     126: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
     129: aload_3
     130: new           #9                  // class io/grpc/alts/internal/TsiFrameHandler$1ProtectedFrameWriteFlusher
     133: dup
     134: aload_0
     135: aload_1
     136: aload_2
     137: invokespecial #212                // Method io/grpc/alts/internal/TsiFrameHandler$1ProtectedFrameWriteFlusher."<init>":(Lio/grpc/alts/internal/TsiFrameHandler;Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;Lio/grpc/alts/internal/ProtectedPromise;)V
     140: aload_1
     141: invokeinterface #77,  1           // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.alloc:()Lio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;
     146: invokeinterface #216,  4          // InterfaceMethod io/grpc/alts/internal/TsiFrameProtector.protectFlush:(Ljava/util/List;Lio/grpc/alts/internal/TsiFrameProtector$Consumer;Lio/grpc/netty/shaded/io/netty/buffer/ByteBufAllocator;)V
     151: aload_2
     152: invokevirtual #219                // Method io/grpc/alts/internal/ProtectedPromise.doneAllocatingPromises:()Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;
     155: pop
     156: return

  public void bind(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, java.net.SocketAddress, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_1
       1: aload_2
       2: aload_3
       3: invokeinterface #228,  3          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.bind:(Ljava/net/SocketAddress;Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)Lio/grpc/netty/shaded/io/netty/channel/ChannelFuture;
       8: pop
       9: return

  public void connect(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, java.net.SocketAddress, java.net.SocketAddress, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_1
       1: aload_2
       2: aload_3
       3: aload         4
       5: invokeinterface #235,  4          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.connect:(Ljava/net/SocketAddress;Ljava/net/SocketAddress;Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)Lio/grpc/netty/shaded/io/netty/channel/ChannelFuture;
      10: pop
      11: return

  public void deregister(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext, io.grpc.netty.shaded.io.netty.channel.ChannelPromise);
    Code:
       0: aload_1
       1: aload_2
       2: invokeinterface #239,  2          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.deregister:(Lio/grpc/netty/shaded/io/netty/channel/ChannelPromise;)Lio/grpc/netty/shaded/io/netty/channel/ChannelFuture;
       7: pop
       8: return

  public void read(io.grpc.netty.shaded.io.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_1
       1: invokeinterface #243,  1          // InterfaceMethod io/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext.read:()Lio/grpc/netty/shaded/io/netty/channel/ChannelHandlerContext;
       6: pop
       7: return

  private void destroyProtectorAndWrites();
    Code:
       0: aload_0
       1: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
       4: ifnull        33
       7: aload_0
       8: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      11: invokevirtual #142                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.isEmpty:()Z
      14: ifne          33
      17: aload_0
      18: getfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      21: new           #245                // class io/grpc/netty/shaded/io/netty/channel/ChannelException
      24: dup
      25: ldc           #247                // String Pending write on teardown of TSI handler
      27: invokespecial #248                // Method io/grpc/netty/shaded/io/netty/channel/ChannelException."<init>":(Ljava/lang/String;)V
      30: invokevirtual #252                // Method io/grpc/netty/shaded/io/netty/channel/PendingWriteQueue.removeAndFailAll:(Ljava/lang/Throwable;)V
      33: aload_0
      34: aconst_null
      35: putfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      38: goto          49
      41: astore_1
      42: aload_0
      43: aconst_null
      44: putfield      #50                 // Field pendingUnprotectedWrites:Lio/grpc/netty/shaded/io/netty/channel/PendingWriteQueue;
      47: aload_1
      48: athrow
      49: aload_0
      50: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      53: ifnull        81
      56: aload_0
      57: getfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      60: invokeinterface #255,  1          // InterfaceMethod io/grpc/alts/internal/TsiFrameProtector.destroy:()V
      65: aload_0
      66: aconst_null
      67: putfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      70: goto          81
      73: astore_2
      74: aload_0
      75: aconst_null
      76: putfield      #38                 // Field protector:Lio/grpc/alts/internal/TsiFrameProtector;
      79: aload_2
      80: athrow
      81: return
    Exception table:
       from    to  target type
           0    33    41   any
          56    65    73   any

  static {};
    Code:
       0: ldc           #2                  // class io/grpc/alts/internal/TsiFrameHandler
       2: invokevirtual #261                // Method java/lang/Class.desiredAssertionStatus:()Z
       5: ifne          12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: putstatic     #48                 // Field $assertionsDisabled:Z
      16: ldc           #2                  // class io/grpc/alts/internal/TsiFrameHandler
      18: invokevirtual #265                // Method java/lang/Class.getName:()Ljava/lang/String;
      21: invokestatic  #269                // Method java/util/logging/Logger.getLogger:(Ljava/lang/String;)Ljava/util/logging/Logger;
      24: putstatic     #147                // Field logger:Ljava/util/logging/Logger;
      27: return
}

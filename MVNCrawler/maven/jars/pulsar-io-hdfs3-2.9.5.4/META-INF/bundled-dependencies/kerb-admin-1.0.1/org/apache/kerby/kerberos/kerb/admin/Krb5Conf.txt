Compiled from "Krb5Conf.java"
public class org.apache.kerby.kerberos.kerb.admin.Krb5Conf {
  public static final java.lang.String KRB5_CONF;

  private static final java.lang.String KRB5_CONF_FILE;

  private java.io.File confDir;

  private org.apache.kerby.kerberos.kerb.server.KdcConfig kdcConfig;

  public org.apache.kerby.kerberos.kerb.admin.Krb5Conf(java.io.File, org.apache.kerby.kerberos.kerb.server.KdcConfig);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field confDir:Ljava/io/File;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
      14: return

  public void initKrb5conf() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #4                  // Method generateConfFile:()Ljava/io/File;
       4: astore_1
       5: ldc           #5                  // String java.security.krb5.conf
       7: aload_1
       8: invokevirtual #6                  // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      11: invokestatic  #7                  // Method java/lang/System.setProperty:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      14: pop
      15: return

  private java.io.File generateConfFile() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
       4: invokevirtual #8                  // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.allowUdp:()Ljava/lang/Boolean;
       7: invokevirtual #9                  // Method java/lang/Boolean.booleanValue:()Z
      10: ifeq          18
      13: ldc           #10                 // String /krb5_udp.conf
      15: goto          20
      18: ldc           #11                 // String /krb5.conf
      20: astore_1
      21: aload_0
      22: invokevirtual #12                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      25: aload_1
      26: invokevirtual #13                 // Method java/lang/Class.getResourceAsStream:(Ljava/lang/String;)Ljava/io/InputStream;
      29: astore_2
      30: aload_2
      31: invokestatic  #14                 // Method org/apache/kerby/util/IOUtil.readInput:(Ljava/io/InputStream;)Ljava/lang/String;
      34: astore_3
      35: aload_3
      36: astore        4
      38: aload         4
      40: ldc           #15                 // String _REALM_
      42: new           #16                 // class java/lang/StringBuilder
      45: dup
      46: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      49: ldc           #18                 // String
      51: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      54: aload_0
      55: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
      58: invokevirtual #20                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.getKdcRealm:()Ljava/lang/String;
      61: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      64: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      67: invokevirtual #22                 // Method java/lang/String.replaceAll:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      70: astore        4
      72: aload_0
      73: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
      76: invokevirtual #8                  // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.allowUdp:()Ljava/lang/Boolean;
      79: invokevirtual #9                  // Method java/lang/Boolean.booleanValue:()Z
      82: ifeq          95
      85: aload_0
      86: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
      89: invokevirtual #23                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.getKdcUdpPort:()I
      92: goto          102
      95: aload_0
      96: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
      99: invokevirtual #24                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.getKdcTcpPort:()I
     102: istore        5
     104: aload         4
     106: ldc           #25                 // String _KDC_PORT_
     108: iload         5
     110: invokestatic  #26                 // Method java/lang/String.valueOf:(I)Ljava/lang/String;
     113: invokevirtual #22                 // Method java/lang/String.replaceAll:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     116: astore        4
     118: aload_0
     119: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
     122: invokevirtual #27                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.allowTcp:()Ljava/lang/Boolean;
     125: invokevirtual #9                  // Method java/lang/Boolean.booleanValue:()Z
     128: ifeq          165
     131: aload         4
     133: ldc           #28                 // String #_KDC_TCP_PORT_
     135: new           #16                 // class java/lang/StringBuilder
     138: dup
     139: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     142: ldc           #29                 // String kdc_tcp_port =
     144: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     147: aload_0
     148: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
     151: invokevirtual #24                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.getKdcTcpPort:()I
     154: invokevirtual #30                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     157: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     160: invokevirtual #22                 // Method java/lang/String.replaceAll:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     163: astore        4
     165: aload_0
     166: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
     169: invokevirtual #8                  // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.allowUdp:()Ljava/lang/Boolean;
     172: invokevirtual #9                  // Method java/lang/Boolean.booleanValue:()Z
     175: ifeq          212
     178: aload         4
     180: ldc           #31                 // String #_KDC_UDP_PORT_
     182: new           #16                 // class java/lang/StringBuilder
     185: dup
     186: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     189: ldc           #32                 // String kdc_udp_port =
     191: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     194: aload_0
     195: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
     198: invokevirtual #23                 // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.getKdcUdpPort:()I
     201: invokevirtual #30                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     204: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     207: invokevirtual #22                 // Method java/lang/String.replaceAll:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     210: astore        4
     212: aload_0
     213: getfield      #3                  // Field kdcConfig:Lorg/apache/kerby/kerberos/kerb/server/KdcConfig;
     216: invokevirtual #8                  // Method org/apache/kerby/kerberos/kerb/server/KdcConfig.allowUdp:()Ljava/lang/Boolean;
     219: invokevirtual #9                  // Method java/lang/Boolean.booleanValue:()Z
     222: ifeq          231
     225: sipush        4096
     228: goto          232
     231: iconst_1
     232: istore        6
     234: aload         4
     236: ldc           #33                 // String _UDP_LIMIT_
     238: iload         6
     240: invokestatic  #26                 // Method java/lang/String.valueOf:(I)Ljava/lang/String;
     243: invokevirtual #22                 // Method java/lang/String.replaceAll:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     246: astore        4
     248: new           #34                 // class java/io/File
     251: dup
     252: aload_0
     253: getfield      #2                  // Field confDir:Ljava/io/File;
     256: ldc           #35                 // String krb5.conf
     258: invokespecial #36                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     261: astore        7
     263: aload         7
     265: invokevirtual #37                 // Method java/io/File.exists:()Z
     268: ifeq          293
     271: aload         7
     273: invokevirtual #38                 // Method java/io/File.delete:()Z
     276: istore        8
     278: iload         8
     280: ifne          293
     283: new           #39                 // class java/lang/RuntimeException
     286: dup
     287: ldc           #40                 // String File delete error!
     289: invokespecial #41                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
     292: athrow
     293: aload         4
     295: aload         7
     297: invokestatic  #42                 // Method org/apache/kerby/util/IOUtil.writeFile:(Ljava/lang/String;Ljava/io/File;)V
     300: aload         7
     302: areturn
}

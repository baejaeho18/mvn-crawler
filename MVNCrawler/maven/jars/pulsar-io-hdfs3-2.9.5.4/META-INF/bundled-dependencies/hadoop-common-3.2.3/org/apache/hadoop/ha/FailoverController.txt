Compiled from "FailoverController.java"
public class org.apache.hadoop.ha.FailoverController {
  private static final org.slf4j.Logger LOG;

  private final int gracefulFenceTimeout;

  private final int rpcTimeoutToNewActive;

  private final org.apache.hadoop.conf.Configuration conf;

  private final org.apache.hadoop.conf.Configuration gracefulFenceConf;

  private final org.apache.hadoop.ha.HAServiceProtocol$RequestSource requestSource;

  public org.apache.hadoop.ha.FailoverController(org.apache.hadoop.conf.Configuration, org.apache.hadoop.ha.HAServiceProtocol$RequestSource);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
       9: aload_0
      10: new           #3                  // class org/apache/hadoop/conf/Configuration
      13: dup
      14: aload_1
      15: invokespecial #4                  // Method org/apache/hadoop/conf/Configuration."<init>":(Lorg/apache/hadoop/conf/Configuration;)V
      18: putfield      #5                  // Field gracefulFenceConf:Lorg/apache/hadoop/conf/Configuration;
      21: aload_0
      22: aload_2
      23: putfield      #6                  // Field requestSource:Lorg/apache/hadoop/ha/HAServiceProtocol$RequestSource;
      26: aload_0
      27: aload_1
      28: invokestatic  #7                  // Method getGracefulFenceTimeout:(Lorg/apache/hadoop/conf/Configuration;)I
      31: putfield      #8                  // Field gracefulFenceTimeout:I
      34: aload_0
      35: aload_1
      36: invokestatic  #9                  // Method getRpcTimeoutToNewActive:(Lorg/apache/hadoop/conf/Configuration;)I
      39: putfield      #10                 // Field rpcTimeoutToNewActive:I
      42: aload_1
      43: ldc           #12                 // String ha.failover-controller.graceful-fence.connection.retries
      45: iconst_1
      46: invokevirtual #13                 // Method org/apache/hadoop/conf/Configuration.getInt:(Ljava/lang/String;I)I
      49: istore_3
      50: aload_0
      51: getfield      #5                  // Field gracefulFenceConf:Lorg/apache/hadoop/conf/Configuration;
      54: ldc           #14                 // String ipc.client.connect.max.retries
      56: iload_3
      57: invokevirtual #15                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      60: aload_0
      61: getfield      #5                  // Field gracefulFenceConf:Lorg/apache/hadoop/conf/Configuration;
      64: ldc           #16                 // String ipc.client.connect.max.retries.on.timeouts
      66: iload_3
      67: invokevirtual #15                 // Method org/apache/hadoop/conf/Configuration.setInt:(Ljava/lang/String;I)V
      70: return

  static int getGracefulFenceTimeout(org.apache.hadoop.conf.Configuration);
    Code:
       0: aload_0
       1: ldc           #17                 // String ha.failover-controller.graceful-fence.rpc-timeout.ms
       3: sipush        5000
       6: invokevirtual #13                 // Method org/apache/hadoop/conf/Configuration.getInt:(Ljava/lang/String;I)I
       9: ireturn

  static int getRpcTimeoutToNewActive(org.apache.hadoop.conf.Configuration);
    Code:
       0: aload_0
       1: ldc           #18                 // String ha.failover-controller.new-active.rpc-timeout.ms
       3: ldc           #19                 // int 60000
       5: invokevirtual #13                 // Method org/apache/hadoop/conf/Configuration.getInt:(Ljava/lang/String;I)I
       8: ireturn

  private void preFailoverChecks(org.apache.hadoop.ha.HAServiceTarget, org.apache.hadoop.ha.HAServiceTarget, boolean) throws org.apache.hadoop.ha.FailoverFailedException;
    Code:
       0: aload_1
       1: invokevirtual #20                 // Method org/apache/hadoop/ha/HAServiceTarget.getAddress:()Ljava/net/InetSocketAddress;
       4: aload_2
       5: invokevirtual #20                 // Method org/apache/hadoop/ha/HAServiceTarget.getAddress:()Ljava/net/InetSocketAddress;
       8: invokevirtual #21                 // Method java/net/InetSocketAddress.equals:(Ljava/lang/Object;)Z
      11: ifeq          24
      14: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
      17: dup
      18: ldc           #23                 // String Can\'t failover a service to itself
      20: invokespecial #24                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_2
      25: aload_0
      26: getfield      #2                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      29: aload_0
      30: getfield      #10                 // Field rpcTimeoutToNewActive:I
      33: invokevirtual #25                 // Method org/apache/hadoop/ha/HAServiceTarget.getProxy:(Lorg/apache/hadoop/conf/Configuration;I)Lorg/apache/hadoop/ha/HAServiceProtocol;
      36: astore        5
      38: aload         5
      40: invokeinterface #26,  1           // InterfaceMethod org/apache/hadoop/ha/HAServiceProtocol.getServiceStatus:()Lorg/apache/hadoop/ha/HAServiceStatus;
      45: astore        4
      47: goto          97
      50: astore        6
      52: new           #28                 // class java/lang/StringBuilder
      55: dup
      56: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
      59: ldc           #30                 // String Unable to get service state for
      61: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      64: aload_2
      65: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      68: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      71: astore        7
      73: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
      76: aload         7
      78: aload         6
      80: invokeinterface #35,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      85: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
      88: dup
      89: aload         7
      91: aload         6
      93: invokespecial #36                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      96: athrow
      97: aload         4
      99: invokevirtual #37                 // Method org/apache/hadoop/ha/HAServiceStatus.getState:()Lorg/apache/hadoop/ha/HAServiceProtocol$HAServiceState;
     102: getstatic     #38                 // Field org/apache/hadoop/ha/HAServiceProtocol$HAServiceState.STANDBY:Lorg/apache/hadoop/ha/HAServiceProtocol$HAServiceState;
     105: invokevirtual #39                 // Method org/apache/hadoop/ha/HAServiceProtocol$HAServiceState.equals:(Ljava/lang/Object;)Z
     108: ifne          147
     111: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
     114: dup
     115: new           #28                 // class java/lang/StringBuilder
     118: dup
     119: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     122: ldc           #40                 // String Can\'t failover to an
     124: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     127: aload         4
     129: invokevirtual #37                 // Method org/apache/hadoop/ha/HAServiceStatus.getState:()Lorg/apache/hadoop/ha/HAServiceProtocol$HAServiceState;
     132: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     135: ldc           #41                 // String  service
     137: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     140: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     143: invokespecial #24                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;)V
     146: athrow
     147: aload         4
     149: invokevirtual #42                 // Method org/apache/hadoop/ha/HAServiceStatus.isReadyToBecomeActive:()Z
     152: ifne          210
     155: aload         4
     157: invokevirtual #43                 // Method org/apache/hadoop/ha/HAServiceStatus.getNotReadyReason:()Ljava/lang/String;
     160: astore        6
     162: iload_3
     163: ifne          198
     166: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
     169: dup
     170: new           #28                 // class java/lang/StringBuilder
     173: dup
     174: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     177: aload_2
     178: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     181: ldc           #44                 // String  is not ready to become active:
     183: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     186: aload         6
     188: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     191: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     194: invokespecial #24                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;)V
     197: athrow
     198: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
     201: ldc           #45                 // String Service is not ready to become active, but forcing: {}
     203: aload         6
     205: invokeinterface #46,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     210: aload         5
     212: aload_0
     213: invokespecial #47                 // Method createReqInfo:()Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;
     216: invokestatic  #48                 // Method org/apache/hadoop/ha/HAServiceProtocolHelper.monitorHealth:(Lorg/apache/hadoop/ha/HAServiceProtocol;Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;)V
     219: goto          250
     222: astore        6
     224: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
     227: dup
     228: ldc           #50                 // String Can\'t failover to an unhealthy service
     230: aload         6
     232: invokespecial #36                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     235: athrow
     236: astore        6
     238: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
     241: dup
     242: ldc           #51                 // String Got an IO exception
     244: aload         6
     246: invokespecial #36                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     249: athrow
     250: return
    Exception table:
       from    to  target type
          24    47    50   Class java/io/IOException
         210   219   222   Class org/apache/hadoop/ha/HealthCheckFailedException
         210   219   236   Class java/io/IOException

  private org.apache.hadoop.ha.HAServiceProtocol$StateChangeRequestInfo createReqInfo();
    Code:
       0: new           #52                 // class org/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo
       3: dup
       4: aload_0
       5: getfield      #6                  // Field requestSource:Lorg/apache/hadoop/ha/HAServiceProtocol$RequestSource;
       8: invokespecial #53                 // Method org/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo."<init>":(Lorg/apache/hadoop/ha/HAServiceProtocol$RequestSource;)V
      11: areturn

  boolean tryGracefulFence(org.apache.hadoop.ha.HAServiceTarget);
    Code:
       0: aconst_null
       1: astore_2
       2: aload_1
       3: aload_0
       4: getfield      #5                  // Field gracefulFenceConf:Lorg/apache/hadoop/conf/Configuration;
       7: aload_0
       8: getfield      #8                  // Field gracefulFenceTimeout:I
      11: invokevirtual #25                 // Method org/apache/hadoop/ha/HAServiceTarget.getProxy:(Lorg/apache/hadoop/conf/Configuration;I)Lorg/apache/hadoop/ha/HAServiceProtocol;
      14: astore_2
      15: aload_2
      16: aload_0
      17: invokespecial #47                 // Method createReqInfo:()Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;
      20: invokeinterface #54,  2           // InterfaceMethod org/apache/hadoop/ha/HAServiceProtocol.transitionToStandby:(Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;)V
      25: iconst_1
      26: istore_3
      27: aload_2
      28: ifnull        35
      31: aload_2
      32: invokestatic  #55                 // Method org/apache/hadoop/ipc/RPC.stopProxy:(Ljava/lang/Object;)V
      35: iload_3
      36: ireturn
      37: astore_3
      38: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
      41: ldc           #57                 // String Unable to gracefully make {} standby ({})
      43: aload_1
      44: aload_3
      45: invokevirtual #58                 // Method org/apache/hadoop/ha/ServiceFailedException.getMessage:()Ljava/lang/String;
      48: invokeinterface #59,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      53: aload_2
      54: ifnull        101
      57: aload_2
      58: invokestatic  #55                 // Method org/apache/hadoop/ipc/RPC.stopProxy:(Ljava/lang/Object;)V
      61: goto          101
      64: astore_3
      65: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
      68: ldc           #60                 // String Unable to gracefully make {} standby (unable to connect)
      70: aload_1
      71: aload_3
      72: invokeinterface #59,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      77: aload_2
      78: ifnull        101
      81: aload_2
      82: invokestatic  #55                 // Method org/apache/hadoop/ipc/RPC.stopProxy:(Ljava/lang/Object;)V
      85: goto          101
      88: astore        4
      90: aload_2
      91: ifnull        98
      94: aload_2
      95: invokestatic  #55                 // Method org/apache/hadoop/ipc/RPC.stopProxy:(Ljava/lang/Object;)V
      98: aload         4
     100: athrow
     101: iconst_0
     102: ireturn
    Exception table:
       from    to  target type
           2    27    37   Class org/apache/hadoop/ha/ServiceFailedException
           2    27    64   Class java/io/IOException
           2    27    88   any
          37    53    88   any
          64    77    88   any
          88    90    88   any

  public void failover(org.apache.hadoop.ha.HAServiceTarget, org.apache.hadoop.ha.HAServiceTarget, boolean, boolean) throws org.apache.hadoop.ha.FailoverFailedException;
    Code:
       0: aload_1
       1: invokevirtual #61                 // Method org/apache/hadoop/ha/HAServiceTarget.getFencer:()Lorg/apache/hadoop/ha/NodeFencer;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #62                 // String failover requires a fencer
      14: invokestatic  #63                 // Method com/google/common/base/Preconditions.checkArgument:(ZLjava/lang/Object;)V
      17: aload_0
      18: aload_1
      19: aload_2
      20: iload         4
      22: invokespecial #64                 // Method preFailoverChecks:(Lorg/apache/hadoop/ha/HAServiceTarget;Lorg/apache/hadoop/ha/HAServiceTarget;Z)V
      25: iconst_1
      26: istore        5
      28: aload_0
      29: aload_1
      30: invokevirtual #65                 // Method tryGracefulFence:(Lorg/apache/hadoop/ha/HAServiceTarget;)Z
      33: ifeq          39
      36: iload_3
      37: istore        5
      39: iload         5
      41: ifeq          88
      44: aload_1
      45: invokevirtual #61                 // Method org/apache/hadoop/ha/HAServiceTarget.getFencer:()Lorg/apache/hadoop/ha/NodeFencer;
      48: aload_1
      49: aload_2
      50: invokevirtual #66                 // Method org/apache/hadoop/ha/NodeFencer.fence:(Lorg/apache/hadoop/ha/HAServiceTarget;Lorg/apache/hadoop/ha/HAServiceTarget;)Z
      53: ifne          88
      56: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
      59: dup
      60: new           #28                 // class java/lang/StringBuilder
      63: dup
      64: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
      67: ldc           #67                 // String Unable to fence
      69: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      72: aload_1
      73: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      76: ldc           #68                 // String . Fencing failed.
      78: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      84: invokespecial #24                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;)V
      87: athrow
      88: iconst_0
      89: istore        6
      91: aconst_null
      92: astore        7
      94: aload_2
      95: aload_0
      96: getfield      #2                  // Field conf:Lorg/apache/hadoop/conf/Configuration;
      99: aload_0
     100: getfield      #10                 // Field rpcTimeoutToNewActive:I
     103: invokevirtual #25                 // Method org/apache/hadoop/ha/HAServiceTarget.getProxy:(Lorg/apache/hadoop/conf/Configuration;I)Lorg/apache/hadoop/ha/HAServiceProtocol;
     106: aload_0
     107: invokespecial #47                 // Method createReqInfo:()Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;
     110: invokestatic  #69                 // Method org/apache/hadoop/ha/HAServiceProtocolHelper.transitionToActive:(Lorg/apache/hadoop/ha/HAServiceProtocol;Lorg/apache/hadoop/ha/HAServiceProtocol$StateChangeRequestInfo;)V
     113: goto          166
     116: astore        8
     118: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
     121: ldc           #70                 // String Unable to make {} active ({}). Failing back.
     123: aload_2
     124: aload         8
     126: invokevirtual #58                 // Method org/apache/hadoop/ha/ServiceFailedException.getMessage:()Ljava/lang/String;
     129: invokeinterface #71,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     134: iconst_1
     135: istore        6
     137: aload         8
     139: astore        7
     141: goto          166
     144: astore        8
     146: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
     149: ldc           #72                 // String Unable to make {} active (unable to connect). Failing back.
     151: aload_2
     152: aload         8
     154: invokeinterface #71,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     159: iconst_1
     160: istore        6
     162: aload         8
     164: astore        7
     166: iload         6
     168: ifeq          276
     171: new           #28                 // class java/lang/StringBuilder
     174: dup
     175: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     178: ldc           #73                 // String Unable to failover to
     180: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     183: aload_2
     184: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     187: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     190: astore        8
     192: iload         5
     194: ifne          264
     197: aload_0
     198: aload_2
     199: aload_1
     200: iconst_1
     201: iconst_1
     202: invokevirtual #74                 // Method failover:(Lorg/apache/hadoop/ha/HAServiceTarget;Lorg/apache/hadoop/ha/HAServiceTarget;ZZ)V
     205: goto          264
     208: astore        9
     210: new           #28                 // class java/lang/StringBuilder
     213: dup
     214: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     217: aload         8
     219: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     222: ldc           #75                 // String . Failback to
     224: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     227: aload_1
     228: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     231: ldc           #76                 // String  failed (
     233: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     236: aload         9
     238: invokevirtual #77                 // Method org/apache/hadoop/ha/FailoverFailedException.getMessage:()Ljava/lang/String;
     241: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     244: ldc           #78                 // String )
     246: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     249: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     252: astore        8
     254: getstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
     257: aload         8
     259: invokeinterface #79,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     264: new           #22                 // class org/apache/hadoop/ha/FailoverFailedException
     267: dup
     268: aload         8
     270: aload         7
     272: invokespecial #36                 // Method org/apache/hadoop/ha/FailoverFailedException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     275: athrow
     276: return
    Exception table:
       from    to  target type
          94   113   116   Class org/apache/hadoop/ha/ServiceFailedException
          94   113   144   Class java/io/IOException
         197   205   208   Class org/apache/hadoop/ha/FailoverFailedException

  static {};
    Code:
       0: ldc           #80                 // class org/apache/hadoop/ha/FailoverController
       2: invokestatic  #81                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #34                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

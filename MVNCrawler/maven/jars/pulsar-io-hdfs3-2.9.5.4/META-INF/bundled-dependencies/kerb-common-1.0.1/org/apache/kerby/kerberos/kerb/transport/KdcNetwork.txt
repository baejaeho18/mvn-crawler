Compiled from "KdcNetwork.java"
public abstract class org.apache.kerby.kerberos.kerb.transport.KdcNetwork {
  private static final org.slf4j.Logger LOG;

  protected static final int MAX_MESSAGE_SIZE;

  private static final int KDC_TCP_TRANSPORT_TIMEOUT;

  private static final int KDC_TCP_SERVER_TIMEOUT;

  private org.apache.kerby.kerberos.kerb.transport.TransportPair tpair;

  private boolean isStopped;

  private java.net.ServerSocket tcpServer;

  private java.nio.channels.DatagramChannel udpServer;

  private java.util.Map<java.net.InetSocketAddress, org.apache.kerby.kerberos.kerb.transport.KdcUdpTransport> transports;

  private java.nio.ByteBuffer recvBuffer;

  public org.apache.kerby.kerberos.kerb.transport.KdcNetwork();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class java/util/HashMap
       8: dup
       9: invokespecial #4                  // Method java/util/HashMap."<init>":()V
      12: putfield      #5                  // Field transports:Ljava/util/Map;
      15: return

  public synchronized void init();
    Code:
       0: aload_0
       1: iconst_0
       2: putfield      #6                  // Field isStopped:Z
       5: return

  public synchronized void listen(org.apache.kerby.kerberos.kerb.transport.TransportPair) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #7                  // Field tpair:Lorg/apache/kerby/kerberos/kerb/transport/TransportPair;
       5: aload_1
       6: getfield      #8                  // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.tcpAddress:Ljava/net/InetSocketAddress;
       9: ifnull        43
      12: aload_0
      13: new           #9                  // class java/net/ServerSocket
      16: dup
      17: invokespecial #10                 // Method java/net/ServerSocket."<init>":()V
      20: putfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
      23: aload_0
      24: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
      27: bipush        100
      29: invokevirtual #12                 // Method java/net/ServerSocket.setSoTimeout:(I)V
      32: aload_0
      33: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
      36: aload_1
      37: getfield      #8                  // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.tcpAddress:Ljava/net/InetSocketAddress;
      40: invokevirtual #13                 // Method java/net/ServerSocket.bind:(Ljava/net/SocketAddress;)V
      43: aload_1
      44: getfield      #14                 // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.udpAddress:Ljava/net/InetSocketAddress;
      47: ifnull        87
      50: aload_0
      51: invokestatic  #15                 // Method java/nio/channels/DatagramChannel.open:()Ljava/nio/channels/DatagramChannel;
      54: putfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      57: aload_0
      58: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      61: iconst_0
      62: invokevirtual #17                 // Method java/nio/channels/DatagramChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
      65: pop
      66: aload_0
      67: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      70: aload_1
      71: getfield      #14                 // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.udpAddress:Ljava/net/InetSocketAddress;
      74: invokevirtual #18                 // Method java/nio/channels/DatagramChannel.bind:(Ljava/net/SocketAddress;)Ljava/nio/channels/DatagramChannel;
      77: pop
      78: aload_0
      79: ldc           #19                 // int 65507
      81: invokestatic  #20                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      84: putfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
      87: return

  public synchronized void start();
    Code:
       0: new           #22                 // class java/lang/Thread
       3: dup
       4: new           #23                 // class org/apache/kerby/kerberos/kerb/transport/KdcNetwork$1
       7: dup
       8: aload_0
       9: invokespecial #24                 // Method org/apache/kerby/kerberos/kerb/transport/KdcNetwork$1."<init>":(Lorg/apache/kerby/kerberos/kerb/transport/KdcNetwork;)V
      12: invokespecial #25                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;)V
      15: invokevirtual #26                 // Method java/lang/Thread.start:()V
      18: return

  private void run();
    Code:
       0: aload_0
       1: dup
       2: astore_1
       3: monitorenter
       4: aload_0
       5: getfield      #6                  // Field isStopped:Z
       8: ifeq          16
      11: aload_1
      12: monitorexit
      13: goto          92
      16: aload_1
      17: monitorexit
      18: goto          26
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
      26: aload_0
      27: getfield      #7                  // Field tpair:Lorg/apache/kerby/kerberos/kerb/transport/TransportPair;
      30: getfield      #8                  // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.tcpAddress:Ljava/net/InetSocketAddress;
      33: ifnull        59
      36: aload_0
      37: invokespecial #27                 // Method checkAndAccept:()V
      40: goto          59
      43: astore_1
      44: goto          59
      47: astore_1
      48: new           #32                 // class java/lang/RuntimeException
      51: dup
      52: ldc           #33                 // String Error occured while checking tcp connections
      54: aload_1
      55: invokespecial #34                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      58: athrow
      59: aload_0
      60: getfield      #7                  // Field tpair:Lorg/apache/kerby/kerberos/kerb/transport/TransportPair;
      63: getfield      #14                 // Field org/apache/kerby/kerberos/kerb/transport/TransportPair.udpAddress:Ljava/net/InetSocketAddress;
      66: ifnull        0
      69: aload_0
      70: invokespecial #35                 // Method checkUdpMessage:()V
      73: goto          0
      76: astore_1
      77: goto          0
      80: astore_1
      81: new           #32                 // class java/lang/RuntimeException
      84: dup
      85: ldc           #36                 // String Error occured while checking udp connections
      87: aload_1
      88: invokespecial #34                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      91: athrow
      92: return
    Exception table:
       from    to  target type
           4    13    21   any
          16    18    21   any
          21    24    21   any
          36    40    43   Class java/net/SocketTimeoutException
          36    40    43   Class java/nio/channels/ClosedChannelException
          36    40    43   Class java/net/SocketException
          36    40    47   Class java/io/IOException
          69    73    76   Class java/net/SocketTimeoutException
          69    73    76   Class java/nio/channels/ClosedChannelException
          69    73    76   Class java/net/SocketException
          69    73    80   Class java/io/IOException

  public synchronized void stop();
    Code:
       0: aload_0
       1: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
       4: ifnull        14
       7: aload_0
       8: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
      11: invokevirtual #37                 // Method java/net/ServerSocket.close:()V
      14: aload_0
      15: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      18: ifnull        28
      21: aload_0
      22: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      25: invokevirtual #38                 // Method java/nio/channels/DatagramChannel.close:()V
      28: goto          59
      31: astore_1
      32: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      35: new           #40                 // class java/lang/StringBuilder
      38: dup
      39: invokespecial #41                 // Method java/lang/StringBuilder."<init>":()V
      42: ldc           #42                 // String KDC network stopping error
      44: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      47: aload_1
      48: invokevirtual #44                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      51: invokevirtual #45                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      54: invokeinterface #46,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
      59: aload_0
      60: iconst_1
      61: putfield      #6                  // Field isStopped:Z
      64: return
    Exception table:
       from    to  target type
           0    28    31   Class java/io/IOException

  private void checkAndAccept() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
       4: invokevirtual #47                 // Method java/net/ServerSocket.isClosed:()Z
       7: ifeq          11
      10: return
      11: aload_0
      12: getfield      #11                 // Field tcpServer:Ljava/net/ServerSocket;
      15: invokevirtual #48                 // Method java/net/ServerSocket.accept:()Ljava/net/Socket;
      18: dup
      19: astore_1
      20: ifnull        44
      23: aload_1
      24: sipush        3000
      27: invokevirtual #49                 // Method java/net/Socket.setSoTimeout:(I)V
      30: new           #50                 // class org/apache/kerby/kerberos/kerb/transport/KrbTcpTransport
      33: dup
      34: aload_1
      35: invokespecial #51                 // Method org/apache/kerby/kerberos/kerb/transport/KrbTcpTransport."<init>":(Ljava/net/Socket;)V
      38: astore_2
      39: aload_0
      40: aload_2
      41: invokevirtual #52                 // Method onNewTransport:(Lorg/apache/kerby/kerberos/kerb/transport/KrbTransport;)V
      44: return

  private void checkUdpMessage() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
       4: invokevirtual #53                 // Method java/nio/channels/DatagramChannel.isOpen:()Z
       7: ifne          11
      10: return
      11: aload_0
      12: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      15: aload_0
      16: getfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
      19: invokevirtual #54                 // Method java/nio/channels/DatagramChannel.receive:(Ljava/nio/ByteBuffer;)Ljava/net/SocketAddress;
      22: checkcast     #55                 // class java/net/InetSocketAddress
      25: astore_1
      26: aload_1
      27: ifnull        102
      30: aload_0
      31: getfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
      34: invokevirtual #56                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      37: pop
      38: aload_0
      39: getfield      #5                  // Field transports:Ljava/util/Map;
      42: aload_1
      43: invokeinterface #57,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      48: checkcast     #58                 // class org/apache/kerby/kerberos/kerb/transport/KdcUdpTransport
      51: astore_2
      52: aload_2
      53: ifnonnull     85
      56: new           #58                 // class org/apache/kerby/kerberos/kerb/transport/KdcUdpTransport
      59: dup
      60: aload_0
      61: getfield      #16                 // Field udpServer:Ljava/nio/channels/DatagramChannel;
      64: aload_1
      65: invokespecial #59                 // Method org/apache/kerby/kerberos/kerb/transport/KdcUdpTransport."<init>":(Ljava/nio/channels/DatagramChannel;Ljava/net/InetSocketAddress;)V
      68: astore_2
      69: aload_2
      70: aload_0
      71: getfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
      74: invokevirtual #60                 // Method org/apache/kerby/kerberos/kerb/transport/KdcUdpTransport.onRecvMessage:(Ljava/nio/ByteBuffer;)V
      77: aload_0
      78: aload_2
      79: invokevirtual #52                 // Method onNewTransport:(Lorg/apache/kerby/kerberos/kerb/transport/KrbTransport;)V
      82: goto          93
      85: aload_2
      86: aload_0
      87: getfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
      90: invokevirtual #60                 // Method org/apache/kerby/kerberos/kerb/transport/KdcUdpTransport.onRecvMessage:(Ljava/nio/ByteBuffer;)V
      93: aload_0
      94: ldc           #19                 // int 65507
      96: invokestatic  #20                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      99: putfield      #21                 // Field recvBuffer:Ljava/nio/ByteBuffer;
     102: return

  protected abstract void onNewTransport(org.apache.kerby.kerberos.kerb.transport.KrbTransport);

  static void access$000(org.apache.kerby.kerberos.kerb.transport.KdcNetwork);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method run:()V
       4: return

  static {};
    Code:
       0: ldc_w         #61                 // class org/apache/kerby/kerberos/kerb/transport/KdcNetwork
       3: invokestatic  #62                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
       9: return
}

Compiled from "DfsClientShmManager.java"
class org.apache.hadoop.hdfs.shortcircuit.DfsClientShmManager$EndpointShmManager {
  private final org.apache.hadoop.hdfs.protocol.DatanodeInfo datanode;

  private final java.util.TreeMap<org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$ShmId, org.apache.hadoop.hdfs.shortcircuit.DfsClientShm> full;

  private final java.util.TreeMap<org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$ShmId, org.apache.hadoop.hdfs.shortcircuit.DfsClientShm> notFull;

  private boolean disabled;

  private boolean loading;

  final org.apache.hadoop.hdfs.shortcircuit.DfsClientShmManager this$0;

  org.apache.hadoop.hdfs.shortcircuit.DfsClientShmManager$EndpointShmManager(org.apache.hadoop.hdfs.shortcircuit.DfsClientShmManager, org.apache.hadoop.hdfs.protocol.DatanodeInfo);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: new           #3                  // class java/util/TreeMap
      13: dup
      14: invokespecial #4                  // Method java/util/TreeMap."<init>":()V
      17: putfield      #5                  // Field full:Ljava/util/TreeMap;
      20: aload_0
      21: new           #3                  // class java/util/TreeMap
      24: dup
      25: invokespecial #4                  // Method java/util/TreeMap."<init>":()V
      28: putfield      #6                  // Field notFull:Ljava/util/TreeMap;
      31: aload_0
      32: iconst_0
      33: putfield      #7                  // Field disabled:Z
      36: aload_0
      37: iconst_0
      38: putfield      #8                  // Field loading:Z
      41: aload_0
      42: aload_2
      43: putfield      #9                  // Field datanode:Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;
      46: return

  private org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$Slot allocSlotFromExistingShm(org.apache.hadoop.hdfs.ExtendedBlockId);
    Code:
       0: aload_0
       1: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
       4: invokevirtual #10                 // Method java/util/TreeMap.isEmpty:()Z
       7: ifeq          12
      10: aconst_null
      11: areturn
      12: aload_0
      13: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
      16: invokevirtual #11                 // Method java/util/TreeMap.firstEntry:()Ljava/util/Map$Entry;
      19: astore_2
      20: aload_2
      21: invokeinterface #12,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      26: checkcast     #13                 // class org/apache/hadoop/hdfs/shortcircuit/DfsClientShm
      29: astore_3
      30: aload_3
      31: invokevirtual #14                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getShmId:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
      34: astore        4
      36: aload_3
      37: aload_1
      38: invokevirtual #15                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.allocAndRegisterSlot:(Lorg/apache/hadoop/hdfs/ExtendedBlockId;)Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot;
      41: astore        5
      43: aload_3
      44: invokevirtual #16                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.isFull:()Z
      47: ifeq          125
      50: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      53: ldc           #18                 // String {}: pulled the last slot {} out of {}
      55: iconst_3
      56: anewarray     #19                 // class java/lang/Object
      59: dup
      60: iconst_0
      61: aload_0
      62: aastore
      63: dup
      64: iconst_1
      65: aload         5
      67: invokevirtual #20                 // Method org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot.getSlotIdx:()I
      70: invokestatic  #21                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      73: aastore
      74: dup
      75: iconst_2
      76: aload_3
      77: aastore
      78: invokeinterface #22,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
      83: aload_0
      84: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
      87: aload         4
      89: invokevirtual #23                 // Method java/util/TreeMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      92: checkcast     #13                 // class org/apache/hadoop/hdfs/shortcircuit/DfsClientShm
      95: astore        6
      97: aload         6
      99: aload_3
     100: if_acmpne     107
     103: iconst_1
     104: goto          108
     107: iconst_0
     108: invokestatic  #24                 // Method com/google/common/base/Preconditions.checkState:(Z)V
     111: aload_0
     112: getfield      #5                  // Field full:Ljava/util/TreeMap;
     115: aload         4
     117: aload_3
     118: invokevirtual #25                 // Method java/util/TreeMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     121: pop
     122: goto          158
     125: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     128: ldc           #26                 // String {}: pulled slot {} out of {}
     130: iconst_3
     131: anewarray     #19                 // class java/lang/Object
     134: dup
     135: iconst_0
     136: aload_0
     137: aastore
     138: dup
     139: iconst_1
     140: aload         5
     142: invokevirtual #20                 // Method org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot.getSlotIdx:()I
     145: invokestatic  #21                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     148: aastore
     149: dup
     150: iconst_2
     151: aload_3
     152: aastore
     153: invokeinterface #22,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
     158: aload         5
     160: areturn

  private org.apache.hadoop.hdfs.shortcircuit.DfsClientShm requestNewShm(java.lang.String, org.apache.hadoop.hdfs.net.DomainPeer) throws java.io.IOException;
    Code:
       0: new           #27                 // class java/io/DataOutputStream
       3: dup
       4: new           #28                 // class java/io/BufferedOutputStream
       7: dup
       8: aload_2
       9: invokevirtual #29                 // Method org/apache/hadoop/hdfs/net/DomainPeer.getOutputStream:()Ljava/io/OutputStream;
      12: invokespecial #30                 // Method java/io/BufferedOutputStream."<init>":(Ljava/io/OutputStream;)V
      15: invokespecial #31                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      18: astore_3
      19: new           #32                 // class org/apache/hadoop/hdfs/protocol/datatransfer/Sender
      22: dup
      23: aload_3
      24: invokespecial #33                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/Sender."<init>":(Ljava/io/DataOutputStream;)V
      27: aload_1
      28: invokevirtual #34                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/Sender.requestShortCircuitShm:(Ljava/lang/String;)V
      31: aload_2
      32: invokevirtual #35                 // Method org/apache/hadoop/hdfs/net/DomainPeer.getInputStream:()Ljava/io/InputStream;
      35: invokestatic  #36                 // Method org/apache/hadoop/hdfs/protocolPB/PBHelperClient.vintPrefixed:(Ljava/io/InputStream;)Ljava/io/InputStream;
      38: invokestatic  #37                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto.parseFrom:(Ljava/io/InputStream;)Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto;
      41: astore        4
      43: aload         4
      45: invokevirtual #38                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto.hasError:()Z
      48: ifeq          59
      51: aload         4
      53: invokevirtual #39                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto.getError:()Ljava/lang/String;
      56: goto          61
      59: ldc           #40                 // String (unknown)
      61: astore        5
      63: getstatic     #41                 // Field org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager$1.$SwitchMap$org$apache$hadoop$hdfs$protocol$proto$DataTransferProtos$Status:[I
      66: aload         4
      68: invokevirtual #42                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto.getStatus:()Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$Status;
      71: invokevirtual #43                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$Status.ordinal:()I
      74: iaload
      75: lookupswitch  { // 2
                     1: 100
                     2: 321
               default: 360
          }
     100: aload_2
     101: invokevirtual #44                 // Method org/apache/hadoop/hdfs/net/DomainPeer.getDomainSocket:()Lorg/apache/hadoop/net/unix/DomainSocket;
     104: astore        6
     106: iconst_1
     107: newarray       byte
     109: astore        7
     111: iconst_1
     112: anewarray     #45                 // class java/io/FileInputStream
     115: astore        8
     117: aload         6
     119: aload         8
     121: aload         7
     123: iconst_0
     124: aload         7
     126: arraylength
     127: invokevirtual #46                 // Method org/apache/hadoop/net/unix/DomainSocket.recvFileInputStreams:([Ljava/io/FileInputStream;[BII)I
     130: ifge          143
     133: new           #47                 // class java/io/EOFException
     136: dup
     137: ldc           #48                 // String got EOF while trying to transfer the file descriptor for the shared memory segment.
     139: invokespecial #49                 // Method java/io/EOFException."<init>":(Ljava/lang/String;)V
     142: athrow
     143: aload         8
     145: iconst_0
     146: aaload
     147: ifnonnull     185
     150: new           #50                 // class java/io/IOException
     153: dup
     154: new           #51                 // class java/lang/StringBuilder
     157: dup
     158: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
     161: ldc           #53                 // String the datanode
     163: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     166: aload_0
     167: getfield      #9                  // Field datanode:Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;
     170: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     173: ldc           #56                 // String  failed to pass a file descriptor for the shared memory segment.
     175: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     178: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     181: invokespecial #58                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     184: athrow
     185: new           #13                 // class org/apache/hadoop/hdfs/shortcircuit/DfsClientShm
     188: dup
     189: aload         4
     191: invokevirtual #59                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmResponseProto.getId:()Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmIdProto;
     194: invokestatic  #60                 // Method org/apache/hadoop/hdfs/protocolPB/PBHelperClient.convert:(Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$ShortCircuitShmIdProto;)Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
     197: aload         8
     199: iconst_0
     200: aaload
     201: aload_0
     202: aload_2
     203: invokespecial #61                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm."<init>":(Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;Ljava/io/FileInputStream;Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager$EndpointShmManager;Lorg/apache/hadoop/hdfs/net/DomainPeer;)V
     206: astore        9
     208: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     211: ldc           #62                 // String {}: createNewShm: created {}
     213: aload_0
     214: aload         9
     216: invokeinterface #63,  4           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     221: aload         9
     223: astore        10
     225: aload         8
     227: iconst_0
     228: aaload
     229: invokevirtual #64                 // Method java/io/FileInputStream.close:()V
     232: goto          269
     235: astore        11
     237: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     240: new           #51                 // class java/lang/StringBuilder
     243: dup
     244: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
     247: ldc           #66                 // String Exception in closing
     249: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     252: aload         8
     254: iconst_0
     255: aaload
     256: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     259: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     262: aload         11
     264: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     269: aload         10
     271: areturn
     272: astore        12
     274: aload         8
     276: iconst_0
     277: aaload
     278: invokevirtual #64                 // Method java/io/FileInputStream.close:()V
     281: goto          318
     284: astore        13
     286: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     289: new           #51                 // class java/lang/StringBuilder
     292: dup
     293: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
     296: ldc           #66                 // String Exception in closing
     298: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     301: aload         8
     303: iconst_0
     304: aaload
     305: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     308: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     311: aload         13
     313: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     318: aload         12
     320: athrow
     321: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     324: new           #51                 // class java/lang/StringBuilder
     327: dup
     328: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
     331: aload_0
     332: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     335: ldc           #68                 // String : datanode does not support short-circuit shared memory access:
     337: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     340: aload         5
     342: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     345: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     348: invokeinterface #69,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     353: aload_0
     354: iconst_1
     355: putfield      #7                  // Field disabled:Z
     358: aconst_null
     359: areturn
     360: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     363: new           #51                 // class java/lang/StringBuilder
     366: dup
     367: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
     370: aload_0
     371: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     374: ldc           #70                 // String : error requesting short-circuit shared memory access:
     376: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     379: aload         5
     381: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     384: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     387: invokeinterface #71,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     392: aconst_null
     393: areturn
    Exception table:
       from    to  target type
         225   232   235   Class java/lang/Throwable
         185   225   272   any
         274   281   284   Class java/lang/Throwable
         272   274   272   any

  org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$Slot allocSlot(org.apache.hadoop.hdfs.net.DomainPeer, org.apache.commons.lang3.mutable.MutableBoolean, java.lang.String, org.apache.hadoop.hdfs.ExtendedBlockId) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
       4: invokestatic  #72                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$100:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Z
       7: ifeq          23
      10: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      13: ldc           #73                 // String {}: the DfsClientShmManager has been closed.
      15: aload_0
      16: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      21: aconst_null
      22: areturn
      23: aload_0
      24: getfield      #7                  // Field disabled:Z
      27: ifeq          43
      30: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      33: ldc           #75                 // String {}: shared memory segment access is disabled.
      35: aload_0
      36: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      41: aconst_null
      42: areturn
      43: aload_0
      44: aload         4
      46: invokespecial #76                 // Method allocSlotFromExistingShm:(Lorg/apache/hadoop/hdfs/ExtendedBlockId;)Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot;
      49: astore        5
      51: aload         5
      53: ifnull        59
      56: aload         5
      58: areturn
      59: aload_0
      60: getfield      #8                  // Field loading:Z
      63: ifeq          92
      66: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      69: ldc           #77                 // String {}: waiting for loading to finish...
      71: aload_0
      72: invokeinterface #74,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      77: aload_0
      78: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
      81: invokestatic  #78                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$200:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/Condition;
      84: invokeinterface #79,  1           // InterfaceMethod java/util/concurrent/locks/Condition.awaitUninterruptibly:()V
      89: goto          270
      92: aload_0
      93: iconst_1
      94: putfield      #8                  // Field loading:Z
      97: aload_0
      98: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     101: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
     104: invokevirtual #81                 // Method java/util/concurrent/locks/ReentrantLock.unlock:()V
     107: aload_0
     108: aload_3
     109: aload_1
     110: invokespecial #82                 // Method requestNewShm:(Ljava/lang/String;Lorg/apache/hadoop/hdfs/net/DomainPeer;)Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShm;
     113: astore        6
     115: aload         6
     117: ifnonnull     150
     120: aload_0
     121: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     124: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
     127: invokevirtual #83                 // Method java/util/concurrent/locks/ReentrantLock.lock:()V
     130: aload_0
     131: iconst_0
     132: putfield      #8                  // Field loading:Z
     135: aload_0
     136: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     139: invokestatic  #78                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$200:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/Condition;
     142: invokeinterface #84,  1           // InterfaceMethod java/util/concurrent/locks/Condition.signalAll:()V
     147: goto          0
     150: aload_0
     151: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     154: invokestatic  #85                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$400:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Lorg/apache/hadoop/net/unix/DomainSocketWatcher;
     157: aload_1
     158: invokevirtual #44                 // Method org/apache/hadoop/hdfs/net/DomainPeer.getDomainSocket:()Lorg/apache/hadoop/net/unix/DomainSocket;
     161: aload         6
     163: invokevirtual #86                 // Method org/apache/hadoop/net/unix/DomainSocketWatcher.add:(Lorg/apache/hadoop/net/unix/DomainSocket;Lorg/apache/hadoop/net/unix/DomainSocketWatcher$Handler;)V
     166: aload_2
     167: iconst_1
     168: invokevirtual #87                 // Method org/apache/commons/lang3/mutable/MutableBoolean.setValue:(Z)V
     171: aload_0
     172: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     175: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
     178: invokevirtual #83                 // Method java/util/concurrent/locks/ReentrantLock.lock:()V
     181: aload_0
     182: iconst_0
     183: putfield      #8                  // Field loading:Z
     186: aload_0
     187: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     190: invokestatic  #78                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$200:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/Condition;
     193: invokeinterface #84,  1           // InterfaceMethod java/util/concurrent/locks/Condition.signalAll:()V
     198: goto          233
     201: astore        7
     203: aload_0
     204: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     207: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
     210: invokevirtual #83                 // Method java/util/concurrent/locks/ReentrantLock.lock:()V
     213: aload_0
     214: iconst_0
     215: putfield      #8                  // Field loading:Z
     218: aload_0
     219: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
     222: invokestatic  #78                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$200:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/Condition;
     225: invokeinterface #84,  1           // InterfaceMethod java/util/concurrent/locks/Condition.signalAll:()V
     230: aload         7
     232: athrow
     233: aload         6
     235: invokevirtual #88                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.isDisconnected:()Z
     238: ifeq          255
     241: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     244: ldc           #89                 // String {}: the UNIX domain socket associated with this short-circuit memory closed before we could make use of the shm.
     246: aload_0
     247: invokeinterface #90,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     252: goto          270
     255: aload_0
     256: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
     259: aload         6
     261: invokevirtual #14                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getShmId:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
     264: aload         6
     266: invokevirtual #25                 // Method java/util/TreeMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     269: pop
     270: goto          0
    Exception table:
       from    to  target type
         107   120   201   any
         150   171   201   any
         201   203   201   any

  void freeSlot(org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$Slot);
    Code:
       0: aload_1
       1: invokevirtual #91                 // Method org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot.getShm:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm;
       4: checkcast     #13                 // class org/apache/hadoop/hdfs/shortcircuit/DfsClientShm
       7: astore_2
       8: aload_2
       9: aload_1
      10: invokevirtual #20                 // Method org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$Slot.getSlotIdx:()I
      13: invokevirtual #92                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.unregisterSlot:(I)V
      16: aload_2
      17: invokevirtual #88                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.isDisconnected:()Z
      20: ifeq          93
      23: aload_0
      24: getfield      #5                  // Field full:Ljava/util/TreeMap;
      27: aload_2
      28: invokevirtual #14                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getShmId:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
      31: invokevirtual #93                 // Method java/util/TreeMap.containsKey:(Ljava/lang/Object;)Z
      34: ifne          41
      37: iconst_1
      38: goto          42
      41: iconst_0
      42: invokestatic  #24                 // Method com/google/common/base/Preconditions.checkState:(Z)V
      45: aload_0
      46: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
      49: aload_2
      50: invokevirtual #14                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getShmId:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
      53: invokevirtual #93                 // Method java/util/TreeMap.containsKey:(Ljava/lang/Object;)Z
      56: ifne          63
      59: iconst_1
      60: goto          64
      63: iconst_0
      64: invokestatic  #24                 // Method com/google/common/base/Preconditions.checkState:(Z)V
      67: aload_2
      68: invokevirtual #94                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.isEmpty:()Z
      71: ifeq          153
      74: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      77: ldc           #95                 // String {}: freeing empty stale {}
      79: aload_0
      80: aload_2
      81: invokeinterface #63,  4           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      86: aload_2
      87: invokevirtual #96                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.free:()V
      90: goto          153
      93: aload_2
      94: invokevirtual #14                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getShmId:()Lorg/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm$ShmId;
      97: astore_3
      98: aload_0
      99: getfield      #5                  // Field full:Ljava/util/TreeMap;
     102: aload_3
     103: invokevirtual #23                 // Method java/util/TreeMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     106: pop
     107: aload_2
     108: invokevirtual #94                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.isEmpty:()Z
     111: ifeq          143
     114: aload_0
     115: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
     118: aload_3
     119: invokevirtual #23                 // Method java/util/TreeMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     122: pop
     123: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
     126: ldc           #97                 // String {}: shutting down UNIX domain socket for empty {}
     128: aload_0
     129: aload_2
     130: invokeinterface #63,  4           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     135: aload_0
     136: aload_2
     137: invokevirtual #98                 // Method shutdown:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShm;)V
     140: goto          153
     143: aload_0
     144: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
     147: aload_3
     148: aload_2
     149: invokevirtual #25                 // Method java/util/TreeMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     152: pop
     153: return

  void unregisterShm(org.apache.hadoop.hdfs.shortcircuit.ShortCircuitShm$ShmId);
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
       4: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
       7: invokevirtual #83                 // Method java/util/concurrent/locks/ReentrantLock.lock:()V
      10: aload_0
      11: getfield      #5                  // Field full:Ljava/util/TreeMap;
      14: aload_1
      15: invokevirtual #23                 // Method java/util/TreeMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      18: pop
      19: aload_0
      20: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
      23: aload_1
      24: invokevirtual #23                 // Method java/util/TreeMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      27: pop
      28: aload_0
      29: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
      32: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
      35: invokevirtual #81                 // Method java/util/concurrent/locks/ReentrantLock.unlock:()V
      38: goto          54
      41: astore_2
      42: aload_0
      43: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
      46: invokestatic  #80                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$300:(Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;)Ljava/util/concurrent/locks/ReentrantLock;
      49: invokevirtual #81                 // Method java/util/concurrent/locks/ReentrantLock.unlock:()V
      52: aload_2
      53: athrow
      54: return
    Exception table:
       from    to  target type
          10    28    41   any

  public java.lang.String toString();
    Code:
       0: ldc           #99                 // String EndpointShmManager(%s, parent=%s)
       2: iconst_2
       3: anewarray     #19                 // class java/lang/Object
       6: dup
       7: iconst_0
       8: aload_0
       9: getfield      #9                  // Field datanode:Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;
      12: aastore
      13: dup
      14: iconst_1
      15: aload_0
      16: getfield      #1                  // Field this$0:Lorg/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager;
      19: aastore
      20: invokestatic  #100                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      23: areturn

  org.apache.hadoop.hdfs.shortcircuit.DfsClientShmManager$PerDatanodeVisitorInfo getVisitorInfo();
    Code:
       0: new           #101                // class org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager$PerDatanodeVisitorInfo
       3: dup
       4: aload_0
       5: getfield      #5                  // Field full:Ljava/util/TreeMap;
       8: aload_0
       9: getfield      #6                  // Field notFull:Ljava/util/TreeMap;
      12: aload_0
      13: getfield      #7                  // Field disabled:Z
      16: invokespecial #102                // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager$PerDatanodeVisitorInfo."<init>":(Ljava/util/TreeMap;Ljava/util/TreeMap;Z)V
      19: areturn

  final void shutdown(org.apache.hadoop.hdfs.shortcircuit.DfsClientShm);
    Code:
       0: aload_1
       1: invokevirtual #103                // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShm.getPeer:()Lorg/apache/hadoop/hdfs/net/DomainPeer;
       4: invokevirtual #44                 // Method org/apache/hadoop/hdfs/net/DomainPeer.getDomainSocket:()Lorg/apache/hadoop/net/unix/DomainSocket;
       7: invokevirtual #104                // Method org/apache/hadoop/net/unix/DomainSocket.shutdown:()V
      10: goto          42
      13: astore_2
      14: invokestatic  #17                 // Method org/apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.access$000:()Lorg/slf4j/Logger;
      17: new           #51                 // class java/lang/StringBuilder
      20: dup
      21: invokespecial #52                 // Method java/lang/StringBuilder."<init>":()V
      24: aload_0
      25: invokevirtual #55                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      28: ldc           #105                // String : error shutting down shm: got IOException calling shutdown(SHUT_RDWR)
      30: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: invokevirtual #57                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: aload_2
      37: invokeinterface #106,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      42: return
    Exception table:
       from    to  target type
           0    10    13   Class java/io/IOException
}

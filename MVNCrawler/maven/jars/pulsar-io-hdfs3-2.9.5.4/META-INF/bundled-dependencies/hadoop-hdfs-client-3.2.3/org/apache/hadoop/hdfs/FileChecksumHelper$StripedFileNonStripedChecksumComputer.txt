Compiled from "FileChecksumHelper.java"
class org.apache.hadoop.hdfs.FileChecksumHelper$StripedFileNonStripedChecksumComputer extends org.apache.hadoop.hdfs.FileChecksumHelper$FileChecksumComputer {
  private final org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy ecPolicy;

  private int bgIdx;

  org.apache.hadoop.hdfs.FileChecksumHelper$StripedFileNonStripedChecksumComputer(java.lang.String, long, org.apache.hadoop.hdfs.protocol.LocatedBlocks, org.apache.hadoop.hdfs.protocol.ClientProtocol, org.apache.hadoop.hdfs.DFSClient, org.apache.hadoop.hdfs.protocol.ErasureCodingPolicy, org.apache.hadoop.fs.Options$ChecksumCombineMode) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: aload         4
       5: aload         5
       7: aload         6
       9: aload         8
      11: invokespecial #1                  // Method org/apache/hadoop/hdfs/FileChecksumHelper$FileChecksumComputer."<init>":(Ljava/lang/String;JLorg/apache/hadoop/hdfs/protocol/LocatedBlocks;Lorg/apache/hadoop/hdfs/protocol/ClientProtocol;Lorg/apache/hadoop/hdfs/DFSClient;Lorg/apache/hadoop/fs/Options$ChecksumCombineMode;)V
      14: aload_0
      15: aload         7
      17: putfield      #2                  // Field ecPolicy:Lorg/apache/hadoop/hdfs/protocol/ErasureCodingPolicy;
      20: return

  void checksumBlocks() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #3                  // Method getClient:()Lorg/apache/hadoop/hdfs/DFSClient;
       4: invokevirtual #4                  // Method org/apache/hadoop/hdfs/DFSClient.getConf:()Lorg/apache/hadoop/hdfs/client/impl/DfsClientConf;
       7: invokevirtual #5                  // Method org/apache/hadoop/hdfs/client/impl/DfsClientConf.getChecksumEcSocketTimeout:()I
      10: iconst_1
      11: imul
      12: aload_0
      13: invokevirtual #3                  // Method getClient:()Lorg/apache/hadoop/hdfs/DFSClient;
      16: invokevirtual #4                  // Method org/apache/hadoop/hdfs/DFSClient.getConf:()Lorg/apache/hadoop/hdfs/client/impl/DfsClientConf;
      19: invokevirtual #6                  // Method org/apache/hadoop/hdfs/client/impl/DfsClientConf.getSocketTimeout:()I
      22: iadd
      23: istore_1
      24: aload_0
      25: iload_1
      26: invokevirtual #7                  // Method setTimeout:(I)V
      29: aload_0
      30: iconst_0
      31: putfield      #8                  // Field bgIdx:I
      34: aload_0
      35: getfield      #8                  // Field bgIdx:I
      38: aload_0
      39: invokevirtual #9                  // Method getLocatedBlocks:()Ljava/util/List;
      42: invokeinterface #10,  1           // InterfaceMethod java/util/List.size:()I
      47: if_icmpge     144
      50: aload_0
      51: invokevirtual #11                 // Method getRemaining:()J
      54: lconst_0
      55: lcmp
      56: iflt          144
      59: aload_0
      60: invokevirtual #12                 // Method isRefetchBlocks:()Z
      63: ifeq          70
      66: aload_0
      67: invokevirtual #13                 // Method refetchBlocks:()V
      70: aload_0
      71: invokevirtual #9                  // Method getLocatedBlocks:()Ljava/util/List;
      74: aload_0
      75: getfield      #8                  // Field bgIdx:I
      78: invokeinterface #14,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      83: checkcast     #15                 // class org/apache/hadoop/hdfs/protocol/LocatedBlock
      86: astore_2
      87: aload_2
      88: checkcast     #16                 // class org/apache/hadoop/hdfs/protocol/LocatedStripedBlock
      91: astore_3
      92: aload_0
      93: aload_3
      94: invokespecial #17                 // Method checksumBlockGroup:(Lorg/apache/hadoop/hdfs/protocol/LocatedStripedBlock;)Z
      97: ifne          131
     100: new           #18                 // class org/apache/hadoop/fs/PathIOException
     103: dup
     104: aload_0
     105: invokevirtual #19                 // Method getSrc:()Ljava/lang/String;
     108: new           #20                 // class java/lang/StringBuilder
     111: dup
     112: invokespecial #21                 // Method java/lang/StringBuilder."<init>":()V
     115: ldc           #22                 // String Fail to get block checksum for
     117: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     120: aload_2
     121: invokevirtual #24                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     124: invokevirtual #25                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     127: invokespecial #26                 // Method org/apache/hadoop/fs/PathIOException."<init>":(Ljava/lang/String;Ljava/lang/String;)V
     130: athrow
     131: aload_0
     132: dup
     133: getfield      #8                  // Field bgIdx:I
     136: iconst_1
     137: iadd
     138: putfield      #8                  // Field bgIdx:I
     141: goto          34
     144: return

  private boolean checksumBlockGroup(org.apache.hadoop.hdfs.protocol.LocatedStripedBlock) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #27                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getBlock:()Lorg/apache/hadoop/hdfs/protocol/ExtendedBlock;
       4: astore_2
       5: aload_2
       6: invokevirtual #28                 // Method org/apache/hadoop/hdfs/protocol/ExtendedBlock.getNumBytes:()J
       9: lstore_3
      10: aload_0
      11: invokevirtual #11                 // Method getRemaining:()J
      14: aload_2
      15: invokevirtual #28                 // Method org/apache/hadoop/hdfs/protocol/ExtendedBlock.getNumBytes:()J
      18: lcmp
      19: ifge          27
      22: aload_0
      23: invokevirtual #11                 // Method getRemaining:()J
      26: lstore_3
      27: aload_0
      28: aload_0
      29: invokevirtual #11                 // Method getRemaining:()J
      32: lload_3
      33: lsub
      34: invokevirtual #29                 // Method setRemaining:(J)V
      37: new           #30                 // class org/apache/hadoop/hdfs/protocol/StripedBlockInfo
      40: dup
      41: aload_2
      42: aload_1
      43: invokevirtual #31                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getLocations:()[Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;
      46: aload_1
      47: invokevirtual #32                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getBlockTokens:()[Lorg/apache/hadoop/security/token/Token;
      50: aload_1
      51: invokevirtual #33                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getBlockIndices:()[B
      54: aload_0
      55: getfield      #2                  // Field ecPolicy:Lorg/apache/hadoop/hdfs/protocol/ErasureCodingPolicy;
      58: invokespecial #34                 // Method org/apache/hadoop/hdfs/protocol/StripedBlockInfo."<init>":(Lorg/apache/hadoop/hdfs/protocol/ExtendedBlock;[Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;[Lorg/apache/hadoop/security/token/Token;[BLorg/apache/hadoop/hdfs/protocol/ErasureCodingPolicy;)V
      61: astore        5
      63: aload_1
      64: invokevirtual #31                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getLocations:()[Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;
      67: astore        6
      69: iconst_0
      70: istore        7
      72: iconst_0
      73: istore        8
      75: iload         7
      77: ifne          232
      80: iload         8
      82: aload         6
      84: arraylength
      85: if_icmpge     232
      88: aload_0
      89: aload_1
      90: aload         5
      92: aload         6
      94: iload         8
      96: aaload
      97: lload_3
      98: invokespecial #35                 // Method tryDatanode:(Lorg/apache/hadoop/hdfs/protocol/LocatedStripedBlock;Lorg/apache/hadoop/hdfs/protocol/StripedBlockInfo;Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;J)V
     101: iconst_1
     102: istore        7
     104: goto          226
     107: astore        9
     109: aload_0
     110: getfield      #8                  // Field bgIdx:I
     113: aload_0
     114: invokevirtual #37                 // Method getLastRetriedIndex:()I
     117: if_icmple     179
     120: getstatic     #38                 // Field org/apache/hadoop/hdfs/FileChecksumHelper.LOG:Lorg/slf4j/Logger;
     123: ldc           #39                 // String Got access token error in response to OP_BLOCK_CHECKSUM for file {} for block {} from datanode {}. Will retry the block once.
     125: iconst_3
     126: anewarray     #40                 // class java/lang/Object
     129: dup
     130: iconst_0
     131: aload_0
     132: invokevirtual #19                 // Method getSrc:()Ljava/lang/String;
     135: aastore
     136: dup
     137: iconst_1
     138: aload_2
     139: aastore
     140: dup
     141: iconst_2
     142: aload         6
     144: iload         8
     146: aaload
     147: aastore
     148: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     153: aload_0
     154: aload_0
     155: getfield      #8                  // Field bgIdx:I
     158: invokevirtual #42                 // Method setLastRetriedIndex:(I)V
     161: iconst_1
     162: istore        7
     164: aload_0
     165: dup
     166: getfield      #8                  // Field bgIdx:I
     169: iconst_1
     170: isub
     171: putfield      #8                  // Field bgIdx:I
     174: aload_0
     175: iconst_1
     176: invokevirtual #43                 // Method setRefetchBlocks:(Z)V
     179: goto          226
     182: astore        9
     184: getstatic     #38                 // Field org/apache/hadoop/hdfs/FileChecksumHelper.LOG:Lorg/slf4j/Logger;
     187: ldc           #45                 // String src={}, datanodes[{}]={}
     189: iconst_4
     190: anewarray     #40                 // class java/lang/Object
     193: dup
     194: iconst_0
     195: aload_0
     196: invokevirtual #19                 // Method getSrc:()Ljava/lang/String;
     199: aastore
     200: dup
     201: iconst_1
     202: iload         8
     204: invokestatic  #46                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     207: aastore
     208: dup
     209: iconst_2
     210: aload         6
     212: iload         8
     214: aaload
     215: aastore
     216: dup
     217: iconst_3
     218: aload         9
     220: aastore
     221: invokeinterface #47,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     226: iinc          8, 1
     229: goto          75
     232: iload         7
     234: ireturn
    Exception table:
       from    to  target type
          88   104   107   Class org/apache/hadoop/hdfs/security/token/block/InvalidBlockTokenException
          88   104   182   Class java/io/IOException

  private void tryDatanode(org.apache.hadoop.hdfs.protocol.LocatedStripedBlock, org.apache.hadoop.hdfs.protocol.StripedBlockInfo, org.apache.hadoop.hdfs.protocol.DatanodeInfo, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #3                  // Method getClient:()Lorg/apache/hadoop/hdfs/DFSClient;
       4: aload_3
       5: aload_0
       6: invokevirtual #48                 // Method getTimeout:()I
       9: aload_1
      10: invokevirtual #49                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getBlockToken:()Lorg/apache/hadoop/security/token/Token;
      13: invokevirtual #50                 // Method org/apache/hadoop/hdfs/DFSClient.connectToDN:(Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;ILorg/apache/hadoop/security/token/Token;)Lorg/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair;
      16: astore        6
      18: aconst_null
      19: astore        7
      21: getstatic     #38                 // Field org/apache/hadoop/hdfs/FileChecksumHelper.LOG:Lorg/slf4j/Logger;
      24: ldc           #51                 // String write to {}: {}, blockGroup={}
      26: iconst_3
      27: anewarray     #40                 // class java/lang/Object
      30: dup
      31: iconst_0
      32: aload_3
      33: aastore
      34: dup
      35: iconst_1
      36: getstatic     #52                 // Field org/apache/hadoop/hdfs/protocol/datatransfer/Op.BLOCK_GROUP_CHECKSUM:Lorg/apache/hadoop/hdfs/protocol/datatransfer/Op;
      39: aastore
      40: dup
      41: iconst_2
      42: aload_1
      43: aastore
      44: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      49: aload_0
      50: aload         6
      52: invokevirtual #53                 // Method createSender:(Lorg/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair;)Lorg/apache/hadoop/hdfs/protocol/datatransfer/Sender;
      55: aload_2
      56: aload_1
      57: invokevirtual #49                 // Method org/apache/hadoop/hdfs/protocol/LocatedStripedBlock.getBlockToken:()Lorg/apache/hadoop/security/token/Token;
      60: lload         4
      62: new           #54                 // class org/apache/hadoop/hdfs/protocol/BlockChecksumOptions
      65: dup
      66: aload_0
      67: invokevirtual #55                 // Method getBlockChecksumType:()Lorg/apache/hadoop/hdfs/protocol/BlockChecksumType;
      70: invokespecial #56                 // Method org/apache/hadoop/hdfs/protocol/BlockChecksumOptions."<init>":(Lorg/apache/hadoop/hdfs/protocol/BlockChecksumType;)V
      73: invokevirtual #57                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/Sender.blockGroupChecksum:(Lorg/apache/hadoop/hdfs/protocol/StripedBlockInfo;Lorg/apache/hadoop/security/token/Token;JLorg/apache/hadoop/hdfs/protocol/BlockChecksumOptions;)V
      76: aload         6
      78: getfield      #58                 // Field org/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair.in:Ljava/io/InputStream;
      81: invokestatic  #59                 // Method org/apache/hadoop/hdfs/protocolPB/PBHelperClient.vintPrefixed:(Ljava/io/InputStream;)Ljava/io/InputStream;
      84: invokestatic  #60                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$BlockOpResponseProto.parseFrom:(Ljava/io/InputStream;)Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$BlockOpResponseProto;
      87: astore        8
      89: new           #20                 // class java/lang/StringBuilder
      92: dup
      93: invokespecial #21                 // Method java/lang/StringBuilder."<init>":()V
      96: ldc           #61                 // String for blockGroup
      98: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     101: aload_1
     102: invokevirtual #24                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     105: ldc           #62                 // String  from datanode
     107: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     110: aload_3
     111: invokevirtual #24                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     114: invokevirtual #25                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     117: astore        9
     119: aload         8
     121: aload         9
     123: invokestatic  #63                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/DataTransferProtoUtil.checkBlockOpStatus:(Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$BlockOpResponseProto;Ljava/lang/String;)V
     126: aload         8
     128: invokevirtual #64                 // Method org/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$BlockOpResponseProto.getChecksumResponse:()Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$OpBlockChecksumResponseProto;
     131: astore        10
     133: aload_0
     134: aload         10
     136: aload_1
     137: aload_3
     138: aload_0
     139: getfield      #8                  // Field bgIdx:I
     142: invokevirtual #65                 // Method extractChecksumProperties:(Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$OpBlockChecksumResponseProto;Lorg/apache/hadoop/hdfs/protocol/LocatedBlock;Lorg/apache/hadoop/hdfs/protocol/DatanodeInfo;I)V
     145: aload_0
     146: aload         10
     148: invokevirtual #66                 // Method populateBlockChecksumBuf:(Lorg/apache/hadoop/hdfs/protocol/proto/DataTransferProtos$OpBlockChecksumResponseProto;)Ljava/lang/String;
     151: astore        11
     153: getstatic     #38                 // Field org/apache/hadoop/hdfs/FileChecksumHelper.LOG:Lorg/slf4j/Logger;
     156: ldc           #67                 // String got reply from {}: blockChecksum={}, blockChecksumType={}
     158: iconst_3
     159: anewarray     #40                 // class java/lang/Object
     162: dup
     163: iconst_0
     164: aload_3
     165: aastore
     166: dup
     167: iconst_1
     168: aload         11
     170: aastore
     171: dup
     172: iconst_2
     173: aload_0
     174: invokevirtual #55                 // Method getBlockChecksumType:()Lorg/apache/hadoop/hdfs/protocol/BlockChecksumType;
     177: aastore
     178: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     183: aload         6
     185: ifnull        270
     188: aload         7
     190: ifnull        213
     193: aload         6
     195: invokevirtual #68                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair.close:()V
     198: goto          270
     201: astore        8
     203: aload         7
     205: aload         8
     207: invokevirtual #70                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     210: goto          270
     213: aload         6
     215: invokevirtual #68                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair.close:()V
     218: goto          270
     221: astore        8
     223: aload         8
     225: astore        7
     227: aload         8
     229: athrow
     230: astore        12
     232: aload         6
     234: ifnull        267
     237: aload         7
     239: ifnull        262
     242: aload         6
     244: invokevirtual #68                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair.close:()V
     247: goto          267
     250: astore        13
     252: aload         7
     254: aload         13
     256: invokevirtual #70                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     259: goto          267
     262: aload         6
     264: invokevirtual #68                 // Method org/apache/hadoop/hdfs/protocol/datatransfer/IOStreamPair.close:()V
     267: aload         12
     269: athrow
     270: return
    Exception table:
       from    to  target type
         193   198   201   Class java/lang/Throwable
          21   183   221   Class java/lang/Throwable
          21   183   230   any
         242   247   250   Class java/lang/Throwable
         221   232   230   any
}

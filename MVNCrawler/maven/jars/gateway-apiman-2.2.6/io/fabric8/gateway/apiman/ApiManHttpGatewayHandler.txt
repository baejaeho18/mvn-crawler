Compiled from "ApiManHttpGatewayHandler.java"
public class io.fabric8.gateway.apiman.ApiManHttpGatewayHandler implements org.vertx.java.core.Handler<org.vertx.java.core.http.HttpServerRequest> {
  private static final transient org.slf4j.Logger LOG;

  private final io.fabric8.gateway.api.handlers.http.HttpGateway httpGateway;

  private final io.fabric8.gateway.api.apimanager.ApiManagerService apiManager;

  public io.fabric8.gateway.apiman.ApiManHttpGatewayHandler(org.vertx.java.core.Vertx, io.fabric8.gateway.api.handlers.http.HttpGateway, io.fabric8.gateway.api.apimanager.ApiManagerService);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_2
       6: putfield      #1                  // Field httpGateway:Lio/fabric8/gateway/api/handlers/http/HttpGateway;
       9: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
      12: ldc           #4                  // String HTTP Requests are routed via APIMan
      14: invokeinterface #5,  2            // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      19: aload_0
      20: aload_3
      21: putfield      #6                  // Field apiManager:Lio/fabric8/gateway/api/apimanager/ApiManagerService;
      24: return

  public void handle(org.vertx.java.core.http.HttpServerRequest);
    Code:
       0: invokestatic  #7                  // Method java/lang/System.nanoTime:()J
       3: lstore_2
       4: aload_1
       5: invokeinterface #8,  1            // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.response:()Lorg/vertx/java/core/http/HttpServerResponse;
      10: astore        4
      12: aload_1
      13: aload_0
      14: getfield      #1                  // Field httpGateway:Lio/fabric8/gateway/api/handlers/http/HttpGateway;
      17: invokestatic  #9                  // Method io/fabric8/gateway/api/handlers/http/HttpMapping.isMappingIndexRequest:(Lorg/vertx/java/core/http/HttpServerRequest;Lio/fabric8/gateway/api/handlers/http/HttpGateway;)Z
      20: ifeq          32
      23: aload_1
      24: aload_0
      25: getfield      #1                  // Field httpGateway:Lio/fabric8/gateway/api/handlers/http/HttpGateway;
      28: invokestatic  #10                 // Method io/fabric8/gateway/api/handlers/http/HttpMapping.respond:(Lorg/vertx/java/core/http/HttpServerRequest;Lio/fabric8/gateway/api/handlers/http/HttpGateway;)V
      31: return
      32: new           #11                 // class io/apiman/gateway/engine/beans/ServiceRequest
      35: dup
      36: invokespecial #12                 // Method io/apiman/gateway/engine/beans/ServiceRequest."<init>":()V
      39: astore        5
      41: aload         5
      43: aload_1
      44: invokevirtual #13                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setRawRequest:(Ljava/lang/Object;)V
      47: aload         5
      49: aload_0
      50: aload_1
      51: invokevirtual #14                 // Method getApiKey:(Lorg/vertx/java/core/http/HttpServerRequest;)Ljava/lang/String;
      54: invokevirtual #15                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setApiKey:(Ljava/lang/String;)V
      57: aload         5
      59: aload_1
      60: invokeinterface #16,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.method:()Ljava/lang/String;
      65: invokevirtual #17                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setType:(Ljava/lang/String;)V
      68: aload         5
      70: aload_1
      71: invokeinterface #18,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.remoteAddress:()Ljava/net/InetSocketAddress;
      76: invokevirtual #19                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
      79: invokevirtual #20                 // Method java/net/InetAddress.getHostAddress:()Ljava/lang/String;
      82: invokevirtual #21                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setRemoteAddr:(Ljava/lang/String;)V
      85: aload         5
      87: aload_1
      88: invokeinterface #22,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.path:()Ljava/lang/String;
      93: invokevirtual #23                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setDestination:(Ljava/lang/String;)V
      96: new           #24                 // class java/util/HashMap
      99: dup
     100: invokespecial #25                 // Method java/util/HashMap."<init>":()V
     103: astore        6
     105: aload_1
     106: invokeinterface #26,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.headers:()Lorg/vertx/java/core/MultiMap;
     111: invokeinterface #27,  1           // InterfaceMethod org/vertx/java/core/MultiMap.names:()Ljava/util/Set;
     116: invokeinterface #28,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     121: astore        7
     123: aload         7
     125: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     130: ifeq          171
     133: aload         7
     135: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     140: checkcast     #31                 // class java/lang/String
     143: astore        8
     145: aload         6
     147: aload         8
     149: aload_1
     150: invokeinterface #26,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.headers:()Lorg/vertx/java/core/MultiMap;
     155: aload         8
     157: invokeinterface #32,  2           // InterfaceMethod org/vertx/java/core/MultiMap.get:(Ljava/lang/String;)Ljava/lang/String;
     162: invokeinterface #33,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     167: pop
     168: goto          123
     171: aload         5
     173: aload         6
     175: invokevirtual #34                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setHeaders:(Ljava/util/Map;)V
     178: aload_1
     179: aload_0
     180: getfield      #1                  // Field httpGateway:Lio/fabric8/gateway/api/handlers/http/HttpGateway;
     183: invokeinterface #35,  1           // InterfaceMethod io/fabric8/gateway/api/handlers/http/HttpGateway.getMappedServices:()Ljava/util/Map;
     188: invokestatic  #36                 // Method io/fabric8/gateway/api/handlers/http/HttpMapping.getMapping:(Lorg/vertx/java/core/http/HttpServerRequest;Ljava/util/Map;)Lio/fabric8/gateway/api/handlers/http/IMappedServices;
     191: astore        7
     193: aload         7
     195: ifnull        302
     198: aload         7
     200: invokeinterface #37,  1           // InterfaceMethod io/fabric8/gateway/api/handlers/http/IMappedServices.getProxyMappingDetails:()Lio/fabric8/gateway/api/handlers/http/ProxyMappingDetails;
     205: astore        8
     207: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     210: new           #38                 // class java/lang/StringBuilder
     213: dup
     214: invokespecial #39                 // Method java/lang/StringBuilder."<init>":()V
     217: ldc           #40                 // String Proxy Mapping Details
     219: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     222: aload         8
     224: invokevirtual #42                 // Method io/fabric8/gateway/api/handlers/http/ProxyMappingDetails.getServicePath:()Ljava/lang/String;
     227: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     230: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     233: invokeinterface #5,  2            // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     238: aload_0
     239: getfield      #6                  // Field apiManager:Lio/fabric8/gateway/api/apimanager/ApiManagerService;
     242: aload         8
     244: invokevirtual #42                 // Method io/fabric8/gateway/api/handlers/http/ProxyMappingDetails.getServicePath:()Ljava/lang/String;
     247: invokeinterface #44,  2           // InterfaceMethod io/fabric8/gateway/api/apimanager/ApiManagerService.getApiManagerServiceMapping:(Ljava/lang/String;)Lio/fabric8/gateway/api/apimanager/ServiceMapping;
     252: astore        9
     254: aload         9
     256: ifnonnull     269
     259: new           #45                 // class java/lang/Exception
     262: dup
     263: ldc           #46                 // String Service Not Found in API Manager.
     265: invokespecial #47                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     268: athrow
     269: aload         5
     271: aload         9
     273: invokevirtual #48                 // Method io/fabric8/gateway/api/apimanager/ServiceMapping.getOrganizationId:()Ljava/lang/String;
     276: invokevirtual #49                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setServiceOrgId:(Ljava/lang/String;)V
     279: aload         5
     281: aload         9
     283: invokevirtual #50                 // Method io/fabric8/gateway/api/apimanager/ServiceMapping.getServiceId:()Ljava/lang/String;
     286: invokevirtual #51                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setServiceId:(Ljava/lang/String;)V
     289: aload         5
     291: aload         9
     293: invokevirtual #52                 // Method io/fabric8/gateway/api/apimanager/ServiceMapping.getVersion:()Ljava/lang/String;
     296: invokevirtual #53                 // Method io/apiman/gateway/engine/beans/ServiceRequest.setServiceVersion:(Ljava/lang/String;)V
     299: goto          312
     302: new           #45                 // class java/lang/Exception
     305: dup
     306: ldc           #46                 // String Service Not Found in API Manager.
     308: invokespecial #47                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
     311: athrow
     312: aload_0
     313: getfield      #6                  // Field apiManager:Lio/fabric8/gateway/api/apimanager/ApiManagerService;
     316: invokeinterface #54,  1           // InterfaceMethod io/fabric8/gateway/api/apimanager/ApiManagerService.getEngine:()Ljava/lang/Object;
     321: checkcast     #55                 // class io/apiman/gateway/engine/IEngine
     324: astore        8
     326: aload         8
     328: aload         5
     330: new           #56                 // class io/fabric8/gateway/apiman/ApiManHttpGatewayHandler$1
     333: dup
     334: aload_0
     335: aload         4
     337: lload_2
     338: invokespecial #57                 // Method io/fabric8/gateway/apiman/ApiManHttpGatewayHandler$1."<init>":(Lio/fabric8/gateway/apiman/ApiManHttpGatewayHandler;Lorg/vertx/java/core/http/HttpServerResponse;J)V
     341: invokeinterface #58,  3           // InterfaceMethod io/apiman/gateway/engine/IEngine.executor:(Lio/apiman/gateway/engine/beans/ServiceRequest;Lio/apiman/gateway/engine/async/IAsyncResultHandler;)Lio/apiman/gateway/engine/IServiceRequestExecutor;
     346: astore        9
     348: aload         9
     350: new           #59                 // class io/fabric8/gateway/apiman/ApiManHttpGatewayHandler$2
     353: dup
     354: aload_0
     355: aload_1
     356: invokespecial #60                 // Method io/fabric8/gateway/apiman/ApiManHttpGatewayHandler$2."<init>":(Lio/fabric8/gateway/apiman/ApiManHttpGatewayHandler;Lorg/vertx/java/core/http/HttpServerRequest;)V
     359: invokeinterface #61,  2           // InterfaceMethod io/apiman/gateway/engine/IServiceRequestExecutor.streamHandler:(Lio/apiman/gateway/engine/async/IAsyncHandler;)V
     364: aload         9
     366: invokeinterface #62,  1           // InterfaceMethod io/apiman/gateway/engine/IServiceRequestExecutor.execute:()V
     371: goto          456
     374: astore        5
     376: aload         4
     378: sipush        404
     381: invokeinterface #63,  2           // InterfaceMethod org/vertx/java/core/http/HttpServerResponse.setStatusCode:(I)Lorg/vertx/java/core/http/HttpServerResponse;
     386: pop
     387: aload         4
     389: new           #38                 // class java/lang/StringBuilder
     392: dup
     393: invokespecial #39                 // Method java/lang/StringBuilder."<init>":()V
     396: ldc           #64                 // String User error
     398: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     401: aload         5
     403: invokevirtual #65                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     406: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     409: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     412: invokeinterface #66,  2           // InterfaceMethod org/vertx/java/core/http/HttpServerResponse.setStatusMessage:(Ljava/lang/String;)Lorg/vertx/java/core/http/HttpServerResponse;
     417: pop
     418: aload         4
     420: invokeinterface #67,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerResponse.end:()V
     425: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
     428: new           #38                 // class java/lang/StringBuilder
     431: dup
     432: invokespecial #39                 // Method java/lang/StringBuilder."<init>":()V
     435: ldc           #64                 // String User error
     437: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     440: aload         5
     442: invokevirtual #65                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     445: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     448: invokevirtual #43                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     451: invokeinterface #68,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     456: return
    Exception table:
       from    to  target type
          12    31   374   Class java/lang/Exception
          32   371   374   Class java/lang/Exception

  protected java.lang.String getApiKey(org.vertx.java.core.http.HttpServerRequest);
    Code:
       0: aload_1
       1: invokeinterface #26,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.headers:()Lorg/vertx/java/core/MultiMap;
       6: ldc           #69                 // String X-API-Key
       8: invokeinterface #32,  2           // InterfaceMethod org/vertx/java/core/MultiMap.get:(Ljava/lang/String;)Ljava/lang/String;
      13: astore_2
      14: aload_2
      15: ifnull        28
      18: aload_2
      19: invokevirtual #70                 // Method java/lang/String.trim:()Ljava/lang/String;
      22: invokevirtual #71                 // Method java/lang/String.length:()I
      25: ifne          34
      28: aload_0
      29: aload_1
      30: invokevirtual #72                 // Method getApiKeyFromQuery:(Lorg/vertx/java/core/http/HttpServerRequest;)Ljava/lang/String;
      33: astore_2
      34: aload_2
      35: areturn

  protected java.lang.String getApiKeyFromQuery(org.vertx.java.core.http.HttpServerRequest);
    Code:
       0: aload_1
       1: invokeinterface #73,  1           // InterfaceMethod org/vertx/java/core/http/HttpServerRequest.query:()Ljava/lang/String;
       6: astore_2
       7: aload_2
       8: ifnonnull     13
      11: aconst_null
      12: areturn
      13: aload_2
      14: ldc           #74                 // String apikey=
      16: invokevirtual #75                 // Method java/lang/String.indexOf:(Ljava/lang/String;)I
      19: istore_3
      20: iload_3
      21: iflt          56
      24: aload_2
      25: bipush        38
      27: iload_3
      28: invokevirtual #76                 // Method java/lang/String.indexOf:(II)I
      31: istore        4
      33: iload         4
      35: iconst_m1
      36: if_icmpne     45
      39: aload_2
      40: invokevirtual #71                 // Method java/lang/String.length:()I
      43: istore        4
      45: aload_2
      46: iload_3
      47: bipush        7
      49: iadd
      50: iload         4
      52: invokevirtual #77                 // Method java/lang/String.substring:(II)Ljava/lang/String;
      55: areturn
      56: aconst_null
      57: areturn

  public void handle(java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #78                 // class org/vertx/java/core/http/HttpServerRequest
       5: invokevirtual #79                 // Method handle:(Lorg/vertx/java/core/http/HttpServerRequest;)V
       8: return

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static io.fabric8.gateway.api.handlers.http.HttpGateway access$100(io.fabric8.gateway.apiman.ApiManHttpGatewayHandler);
    Code:
       0: aload_0
       1: getfield      #1                  // Field httpGateway:Lio/fabric8/gateway/api/handlers/http/HttpGateway;
       4: areturn

  static {};
    Code:
       0: ldc_w         #80                 // class io/fabric8/gateway/apiman/ApiManHttpGatewayHandler
       3: invokestatic  #81                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #2                  // Field LOG:Lorg/slf4j/Logger;
       9: return
}

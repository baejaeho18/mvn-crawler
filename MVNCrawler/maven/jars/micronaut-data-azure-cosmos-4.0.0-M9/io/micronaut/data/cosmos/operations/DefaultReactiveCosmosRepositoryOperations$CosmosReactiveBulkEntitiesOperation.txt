Compiled from "DefaultReactiveCosmosRepositoryOperations.java"
class io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation<T> extends io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$CosmosReactiveEntitiesOperation<T> {
  private final boolean setETagVersion;

  private final io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$BulkOperationType operationType;

  private final java.lang.String versionField;

  final io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations this$0;

  protected io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation(io.micronaut.data.event.EntityEventListener<java.lang.Object>, io.micronaut.core.convert.ConversionService, io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext<T>, io.micronaut.data.model.runtime.RuntimePersistentEntity<T>, java.lang.Iterable<T>, boolean, boolean, io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$BulkOperationType, java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
       5: aload_0
       6: aload_2
       7: aload_3
       8: aload         4
      10: aload         5
      12: aload         6
      14: iload         7
      16: invokespecial #7                  // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveEntitiesOperation."<init>":(Lio/micronaut/data/event/EntityEventListener;Lio/micronaut/core/convert/ConversionService;Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext;Lio/micronaut/data/model/runtime/RuntimePersistentEntity;Ljava/lang/Iterable;Z)V
      19: aload_0
      20: iload         8
      22: putfield      #13                 // Field setETagVersion:Z
      25: aload_0
      26: aload         9
      28: putfield      #17                 // Field operationType:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$BulkOperationType;
      31: aload_0
      32: aload         10
      34: putfield      #21                 // Field versionField:Ljava/lang/String;
      37: return

  protected void execute() throws java.lang.RuntimeException;
    Code:
       0: aload_0
       1: getfield      #25                 // Field ctx:Lio/micronaut/data/runtime/operations/internal/OperationContext;
       4: checkcast     #29                 // class io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext
       7: invokevirtual #31                 // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext.getRootEntity:()Ljava/lang/Class;
      10: invokestatic  #35                 // InterfaceMethod io/micronaut/core/type/Argument.of:(Ljava/lang/Class;)Lio/micronaut/core/type/Argument;
      13: astore_1
      14: aload_0
      15: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
      18: aload_0
      19: getfield      #41                 // Field persistentEntity:Lio/micronaut/data/model/runtime/RuntimePersistentEntity;
      22: invokevirtual #45                 // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.getPartitionKeyDefinition:(Lio/micronaut/data/model/runtime/RuntimePersistentEntity;)Ljava/lang/String;
      25: astore_2
      26: aload_2
      27: ldc           #53                 // String /
      29: invokevirtual #55                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      32: ifeq          41
      35: aload_2
      36: iconst_1
      37: invokevirtual #61                 // Method java/lang/String.substring:(I)Ljava/lang/String;
      40: astore_2
      41: aload_2
      42: astore_3
      43: aload_0
      44: getfield      #65                 // Field hasGeneratedId:Z
      47: ifeq          61
      50: aload_0
      51: getfield      #68                 // Field insert:Z
      54: ifeq          61
      57: iconst_1
      58: goto          62
      61: iconst_0
      62: istore        4
      64: aload_0
      65: getfield      #71                 // Field entities:Lreactor/core/publisher/Mono;
      68: aload_0
      69: iload         4
      71: aload_1
      72: aload_3
      73: invokedynamic #75,  0             // InvokeDynamic #0:apply:(Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation;ZLio/micronaut/core/type/Argument;Ljava/lang/String;)Ljava/util/function/Function;
      78: invokevirtual #79                 // Method reactor/core/publisher/Mono.flatMap:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
      81: aload_0
      82: invokedynamic #85,  0             // InvokeDynamic #1:apply:(Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation;)Ljava/util/function/Function;
      87: invokevirtual #88                 // Method reactor/core/publisher/Mono.onErrorMap:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
      90: invokevirtual #91                 // Method reactor/core/publisher/Mono.cache:()Lreactor/core/publisher/Mono;
      93: astore        5
      95: aload_0
      96: aload         5
      98: invokedynamic #95,  0             // InvokeDynamic #2:apply:()Ljava/util/function/Function;
     103: invokevirtual #79                 // Method reactor/core/publisher/Mono.flatMap:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
     106: putfield      #71                 // Field entities:Lreactor/core/publisher/Mono;
     109: aload_0
     110: aload         5
     112: invokedynamic #98,  0             // InvokeDynamic #3:apply:()Ljava/util/function/Function;
     117: invokevirtual #99                 // Method reactor/core/publisher/Mono.map:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
     120: putfield      #102                // Field rowsUpdated:Lreactor/core/publisher/Mono;
     123: return

  private reactor.core.publisher.Mono<java.lang.Number> executeAndGetRowsUpdated(java.util.List<com.azure.cosmos.implementation.batch.ItemBulkOperation<?, ?>>, java.util.Map<java.lang.String, T>);
    Code:
       0: aload_0
       1: getfield      #25                 // Field ctx:Lio/micronaut/data/runtime/operations/internal/OperationContext;
       4: checkcast     #29                 // class io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext
       7: invokevirtual #105                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveOperationContext.getContainer:()Lcom/azure/cosmos/CosmosAsyncContainer;
      10: aload_1
      11: invokestatic  #109                // Method reactor/core/publisher/Flux.fromIterable:(Ljava/lang/Iterable;)Lreactor/core/publisher/Flux;
      14: invokevirtual #115                // Method com/azure/cosmos/CosmosAsyncContainer.executeBulkOperations:(Lreactor/core/publisher/Flux;)Lreactor/core/publisher/Flux;
      17: iconst_m1
      18: invokestatic  #121                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      21: aload_0
      22: aload_2
      23: invokedynamic #127,  0            // InvokeDynamic #4:apply:(Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation;Ljava/util/Map;)Ljava/util/function/BiFunction;
      28: invokevirtual #130                // Method reactor/core/publisher/Flux.reduce:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Lreactor/core/publisher/Mono;
      31: areturn

  private com.azure.cosmos.implementation.batch.ItemBulkOperation<?, ?> createItemBulkOperation(com.fasterxml.jackson.databind.node.ObjectNode, java.lang.String, com.azure.cosmos.models.CosmosItemOperationType, boolean);
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
       4: aload_1
       5: invokevirtual #134                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.getItemId:(Lcom/fasterxml/jackson/databind/node/ObjectNode;)Ljava/lang/String;
       8: astore        5
      10: aload_0
      11: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
      14: aload_2
      15: aload_1
      16: invokevirtual #138                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.getPartitionKey:(Ljava/lang/String;Lcom/fasterxml/jackson/databind/node/ObjectNode;)Lcom/azure/cosmos/models/PartitionKey;
      19: astore        6
      21: new           #142                // class com/azure/cosmos/implementation/RequestOptions
      24: dup
      25: invokespecial #144                // Method com/azure/cosmos/implementation/RequestOptions."<init>":()V
      28: astore        7
      30: iload         4
      32: ifne          58
      35: aload_1
      36: ldc           #147                // String _etag
      38: invokevirtual #149                // Method com/fasterxml/jackson/databind/node/ObjectNode.get:(Ljava/lang/String;)Lcom/fasterxml/jackson/databind/JsonNode;
      41: astore        8
      43: aload         8
      45: ifnull        58
      48: aload         7
      50: aload         8
      52: invokevirtual #155                // Method com/fasterxml/jackson/databind/JsonNode.textValue:()Ljava/lang/String;
      55: invokevirtual #161                // Method com/azure/cosmos/implementation/RequestOptions.setIfMatchETag:(Ljava/lang/String;)V
      58: new           #165                // class com/azure/cosmos/implementation/batch/ItemBulkOperation
      61: dup
      62: aload_3
      63: aload         5
      65: aload         6
      67: aload         7
      69: aload_1
      70: aconst_null
      71: invokespecial #167                // Method com/azure/cosmos/implementation/batch/ItemBulkOperation."<init>":(Lcom/azure/cosmos/models/CosmosItemOperationType;Ljava/lang/String;Lcom/azure/cosmos/models/PartitionKey;Lcom/azure/cosmos/implementation/RequestOptions;Ljava/lang/Object;Ljava/lang/Object;)V
      74: areturn

  private java.lang.Number lambda$executeAndGetRowsUpdated$6(java.util.Map, java.lang.Number, com.azure.cosmos.models.CosmosBulkOperationResponse);
    Code:
       0: aload_3
       1: invokevirtual #170                // Method com/azure/cosmos/models/CosmosBulkOperationResponse.getResponse:()Lcom/azure/cosmos/models/CosmosBulkItemResponse;
       4: astore        4
       6: aload_2
       7: invokevirtual #176                // Method java/lang/Number.intValue:()I
      10: iconst_m1
      11: if_icmpne     46
      14: iconst_0
      15: invokestatic  #121                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      18: astore_2
      19: aload_0
      20: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
      23: getfield      #182                // Field io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.cosmosDiagnosticsProcessor:Lio/micronaut/data/cosmos/operations/CosmosDiagnosticsProcessor;
      26: ldc           #188                // String ExecuteBulk
      28: aload         4
      30: invokevirtual #190                // Method com/azure/cosmos/models/CosmosBulkItemResponse.getCosmosDiagnostics:()Lcom/azure/cosmos/CosmosDiagnostics;
      33: aload         4
      35: invokevirtual #196                // Method com/azure/cosmos/models/CosmosBulkItemResponse.getActivityId:()Ljava/lang/String;
      38: aload         4
      40: invokevirtual #199                // Method com/azure/cosmos/models/CosmosBulkItemResponse.getRequestCharge:()D
      43: invokestatic  #203                // Method io/micronaut/data/cosmos/common/CosmosUtils.processDiagnostics:(Lio/micronaut/data/cosmos/operations/CosmosDiagnosticsProcessor;Ljava/lang/String;Lcom/azure/cosmos/CosmosDiagnostics;Ljava/lang/String;D)V
      46: aload         4
      48: invokevirtual #209                // Method com/azure/cosmos/models/CosmosBulkItemResponse.getStatusCode:()I
      51: aload_0
      52: getfield      #17                 // Field operationType:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$BulkOperationType;
      55: getfield      #212                // Field io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$BulkOperationType.expectedOperationStatusCode:I
      58: if_icmpne     129
      61: aload_2
      62: checkcast     #122                // class java/lang/Integer
      65: invokevirtual #218                // Method java/lang/Integer.intValue:()I
      68: iconst_1
      69: iadd
      70: invokestatic  #121                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      73: astore_2
      74: aload_0
      75: getfield      #13                 // Field setETagVersion:Z
      78: ifeq          129
      81: aload_3
      82: invokevirtual #219                // Method com/azure/cosmos/models/CosmosBulkOperationResponse.getOperation:()Lcom/azure/cosmos/models/CosmosItemOperation;
      85: invokeinterface #223,  1          // InterfaceMethod com/azure/cosmos/models/CosmosItemOperation.getId:()Ljava/lang/String;
      90: astore        5
      92: aload_1
      93: aload         5
      95: invokeinterface #228,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     100: astore        6
     102: aload         6
     104: ifnull        129
     107: aload_0
     108: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
     111: aload_0
     112: getfield      #41                 // Field persistentEntity:Lio/micronaut/data/model/runtime/RuntimePersistentEntity;
     115: aload         6
     117: aload_0
     118: getfield      #21                 // Field versionField:Ljava/lang/String;
     121: aload         4
     123: invokevirtual #233                // Method com/azure/cosmos/models/CosmosBulkItemResponse.getETag:()Ljava/lang/String;
     126: invokevirtual #236                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.setETagVersion:(Lio/micronaut/data/model/runtime/RuntimePersistentEntity;Ljava/lang/Object;Ljava/lang/String;Ljava/lang/String;)V
     129: aload_2
     130: areturn

  private static reactor.core.publisher.Mono lambda$execute$5(reactor.util.function.Tuple2);
    Code:
       0: aload_0
       1: invokevirtual #239                // Method reactor/util/function/Tuple2.getT1:()Ljava/lang/Object;
       4: checkcast     #245                // class java/util/List
       7: invokestatic  #247                // Method reactor/core/publisher/Mono.just:(Ljava/lang/Object;)Lreactor/core/publisher/Mono;
      10: areturn

  private java.lang.Throwable lambda$execute$4(java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
       4: ldc           #251                // String Failed to execute bulk operation
       6: aload_1
       7: ldc           #188                // String ExecuteBulk
       9: aload_0
      10: getfield      #41                 // Field persistentEntity:Lio/micronaut/data/model/runtime/RuntimePersistentEntity;
      13: invokevirtual #253                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.handleCosmosOperationException:(Ljava/lang/String;Ljava/lang/Throwable;Ljava/lang/String;Lio/micronaut/data/model/runtime/RuntimePersistentEntity;)Ljava/lang/Throwable;
      16: areturn

  private reactor.core.publisher.Mono lambda$execute$3(boolean, io.micronaut.core.type.Argument, java.lang.String, java.util.List);
    Code:
       0: new           #257                // class java/util/HashMap
       3: dup
       4: aload         4
       6: invokeinterface #259,  1          // InterfaceMethod java/util/List.size:()I
      11: invokespecial #262                // Method java/util/HashMap."<init>":(I)V
      14: astore        5
      16: aload         4
      18: invokeinterface #265,  1          // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      23: aload_0
      24: invokedynamic #269,  0            // InvokeDynamic #5:test:(Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation;)Ljava/util/function/Predicate;
      29: invokeinterface #273,  2          // InterfaceMethod java/util/stream/Stream.filter:(Ljava/util/function/Predicate;)Ljava/util/stream/Stream;
      34: aload_0
      35: iload_1
      36: aload_2
      37: aload_3
      38: aload         5
      40: invokedynamic #279,  0            // InvokeDynamic #6:apply:(Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation;ZLio/micronaut/core/type/Argument;Ljava/lang/String;Ljava/util/Map;)Ljava/util/function/Function;
      45: invokeinterface #282,  2          // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      50: invokestatic  #285                // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
      53: invokeinterface #291,  2          // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      58: checkcast     #245                // class java/util/List
      61: astore        6
      63: aload         6
      65: invokeinterface #295,  1          // InterfaceMethod java/util/List.isEmpty:()Z
      70: ifeq          86
      73: aload         4
      75: lconst_0
      76: invokestatic  #299                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      79: invokestatic  #304                // Method reactor/util/function/Tuples.of:(Ljava/lang/Object;Ljava/lang/Object;)Lreactor/util/function/Tuple2;
      82: invokestatic  #247                // Method reactor/core/publisher/Mono.just:(Ljava/lang/Object;)Lreactor/core/publisher/Mono;
      85: areturn
      86: aload_0
      87: aload         6
      89: aload         5
      91: invokevirtual #309                // Method executeAndGetRowsUpdated:(Ljava/util/List;Ljava/util/Map;)Lreactor/core/publisher/Mono;
      94: invokedynamic #313,  0            // InvokeDynamic #7:apply:()Ljava/util/function/Function;
      99: invokevirtual #99                 // Method reactor/core/publisher/Mono.map:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
     102: aload         4
     104: invokedynamic #314,  0            // InvokeDynamic #8:apply:(Ljava/util/List;)Ljava/util/function/Function;
     109: invokevirtual #99                 // Method reactor/core/publisher/Mono.map:(Ljava/util/function/Function;)Lreactor/core/publisher/Mono;
     112: areturn

  private static reactor.util.function.Tuple2 lambda$execute$2(java.util.List, java.lang.Long);
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #304                // Method reactor/util/function/Tuples.of:(Ljava/lang/Object;Ljava/lang/Object;)Lreactor/util/function/Tuple2;
       5: areturn

  private com.azure.cosmos.implementation.batch.ItemBulkOperation lambda$execute$1(boolean, io.micronaut.core.type.Argument, java.lang.String, java.util.Map, io.micronaut.data.runtime.operations.internal.AbstractReactiveEntitiesOperations$Data);
    Code:
       0: iload_1
       1: ifeq          20
       4: aload_0
       5: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
       8: aload_0
       9: getfield      #41                 // Field persistentEntity:Lio/micronaut/data/model/runtime/RuntimePersistentEntity;
      12: aload         5
      14: getfield      #317                // Field io/micronaut/data/runtime/operations/internal/AbstractReactiveEntitiesOperations$Data.entity:Ljava/lang/Object;
      17: invokevirtual #323                // Method io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.generateId:(Lio/micronaut/data/model/runtime/RuntimePersistentEntity;Ljava/lang/Object;)V
      20: aload_0
      21: getfield      #1                  // Field this$0:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations;
      24: getfield      #327                // Field io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations.cosmosSerde:Lio/micronaut/data/cosmos/operations/CosmosSerde;
      27: aload_0
      28: getfield      #41                 // Field persistentEntity:Lio/micronaut/data/model/runtime/RuntimePersistentEntity;
      31: aload         5
      33: getfield      #317                // Field io/micronaut/data/runtime/operations/internal/AbstractReactiveEntitiesOperations$Data.entity:Ljava/lang/Object;
      36: aload_2
      37: invokevirtual #331                // Method io/micronaut/data/cosmos/operations/CosmosSerde.serialize:(Lio/micronaut/data/model/runtime/RuntimePersistentEntity;Ljava/lang/Object;Lio/micronaut/core/type/Argument;)Lcom/fasterxml/jackson/databind/node/ObjectNode;
      40: astore        6
      42: aload_0
      43: aload         6
      45: aload_3
      46: aload_0
      47: getfield      #17                 // Field operationType:Lio/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$BulkOperationType;
      50: getfield      #337                // Field io/micronaut/data/cosmos/operations/DefaultReactiveCosmosRepositoryOperations$BulkOperationType.cosmosItemOperationType:Lcom/azure/cosmos/models/CosmosItemOperationType;
      53: aload_0
      54: getfield      #68                 // Field insert:Z
      57: invokevirtual #341                // Method createItemBulkOperation:(Lcom/fasterxml/jackson/databind/node/ObjectNode;Ljava/lang/String;Lcom/azure/cosmos/models/CosmosItemOperationType;Z)Lcom/azure/cosmos/implementation/batch/ItemBulkOperation;
      60: astore        7
      62: aload         4
      64: aload         7
      66: invokevirtual #345                // Method com/azure/cosmos/implementation/batch/ItemBulkOperation.getId:()Ljava/lang/String;
      69: aload         5
      71: getfield      #317                // Field io/micronaut/data/runtime/operations/internal/AbstractReactiveEntitiesOperations$Data.entity:Ljava/lang/Object;
      74: invokeinterface #346,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      79: pop
      80: aload         7
      82: areturn

  private static boolean lambda$execute$0(io.micronaut.data.cosmos.operations.DefaultReactiveCosmosRepositoryOperations$CosmosReactiveBulkEntitiesOperation, io.micronaut.data.runtime.operations.internal.AbstractReactiveEntitiesOperations$Data);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #350                // Method notVetoed:(Lio/micronaut/data/runtime/operations/internal/AbstractReactiveEntitiesOperations$Data;)Z
       5: ireturn
}

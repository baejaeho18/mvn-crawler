Compiled from "ZipFileHelper.java"
public class org.adorsys.encobject.filesystem.ZipFileHelper {
  private static final org.slf4j.Logger LOGGER;

  protected static final java.lang.String ZIP_STORAGE_METADATA_JSON;

  protected static final java.lang.String ZIP_CONTENT_BINARY;

  protected static final java.lang.String ZIP_SUFFIX;

  public static final java.lang.String CHARSET_NAME;

  private boolean absolutePath;

  protected org.adorsys.encobject.complextypes.BucketDirectory baseDir;

  protected org.adorsys.encobject.filesystem.StorageMetadataFlattenerGSON gsonHelper;

  public org.adorsys.encobject.filesystem.ZipFileHelper(org.adorsys.encobject.complextypes.BucketDirectory, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field absolutePath:Z
       9: aload_0
      10: new           #3                  // class org/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON
      13: dup
      14: invokespecial #4                  // Method org/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON."<init>":()V
      17: putfield      #5                  // Field gsonHelper:Lorg/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON;
      20: aload_0
      21: aload_1
      22: putfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      25: aload_0
      26: iload_2
      27: putfield      #2                  // Field absolutePath:Z
      30: return

  public void writeZip(org.adorsys.encobject.complextypes.BucketPath, org.adorsys.encobject.service.impl.SimplePayloadImpl);
    Code:
       0: aconst_null
       1: astore_3
       2: aload_2
       3: invokevirtual #7                  // Method org/adorsys/encobject/service/impl/SimplePayloadImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
       6: getstatic     #8                  // Field org/adorsys/encobject/domain/StorageType.BLOB:Lorg/adorsys/encobject/domain/StorageType;
       9: invokevirtual #9                  // Method org/adorsys/encobject/service/impl/SimpleStorageMetadataImpl.setType:(Lorg/adorsys/encobject/domain/StorageType;)V
      12: aload_2
      13: invokevirtual #7                  // Method org/adorsys/encobject/service/impl/SimplePayloadImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
      16: aload_1
      17: invokestatic  #10                 // Method org/adorsys/encobject/complextypes/BucketPathUtil.getAsString:(Lorg/adorsys/encobject/complextypes/BucketPath;)Ljava/lang/String;
      20: invokevirtual #11                 // Method org/adorsys/encobject/service/impl/SimpleStorageMetadataImpl.setName:(Ljava/lang/String;)V
      23: aload_2
      24: invokevirtual #12                 // Method org/adorsys/encobject/service/impl/SimplePayloadImpl.getData:()[B
      27: astore        4
      29: aload_0
      30: aload_1
      31: invokespecial #13                 // Method createDirectoryIfNecessary:(Lorg/adorsys/encobject/complextypes/BucketPath;)V
      34: aload_0
      35: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      38: aload_1
      39: ldc           #15                 // String .zip
      41: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
      44: new           #17                 // class java/lang/StringBuilder
      47: dup
      48: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      51: ldc           #19                 // String .
      53: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      56: invokestatic  #21                 // Method java/util/UUID.randomUUID:()Ljava/util/UUID;
      59: invokevirtual #22                 // Method java/util/UUID.toString:()Ljava/lang/String;
      62: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      68: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
      71: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
      74: aload_0
      75: getfield      #2                  // Field absolutePath:Z
      78: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
      81: astore        5
      83: aload         5
      85: invokevirtual #26                 // Method java/io/File.exists:()Z
      88: ifeq          119
      91: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
      94: dup
      95: new           #17                 // class java/lang/StringBuilder
      98: dup
      99: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     102: ldc           #28                 // String Temporary File exists. This must not happen.
     104: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     107: aload         5
     109: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     112: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     115: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
     118: athrow
     119: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     122: new           #17                 // class java/lang/StringBuilder
     125: dup
     126: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     129: ldc           #32                 // String write temporary zip file to
     131: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     134: aload         5
     136: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     139: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     142: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     147: new           #34                 // class java/util/zip/ZipOutputStream
     150: dup
     151: new           #35                 // class java/io/BufferedOutputStream
     154: dup
     155: new           #36                 // class java/io/FileOutputStream
     158: dup
     159: aload         5
     161: invokespecial #37                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
     164: invokespecial #38                 // Method java/io/BufferedOutputStream."<init>":(Ljava/io/OutputStream;)V
     167: invokespecial #39                 // Method java/util/zip/ZipOutputStream."<init>":(Ljava/io/OutputStream;)V
     170: astore_3
     171: aload_3
     172: new           #40                 // class java/util/zip/ZipEntry
     175: dup
     176: ldc           #41                 // String StorageMetadata.json
     178: invokespecial #42                 // Method java/util/zip/ZipEntry."<init>":(Ljava/lang/String;)V
     181: invokevirtual #43                 // Method java/util/zip/ZipOutputStream.putNextEntry:(Ljava/util/zip/ZipEntry;)V
     184: aload_0
     185: getfield      #5                  // Field gsonHelper:Lorg/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON;
     188: aload_2
     189: invokevirtual #7                  // Method org/adorsys/encobject/service/impl/SimplePayloadImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
     192: invokevirtual #44                 // Method org/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON.toJson:(Lorg/adorsys/encobject/domain/StorageMetadata;)Ljava/lang/String;
     195: astore        6
     197: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     200: new           #17                 // class java/lang/StringBuilder
     203: dup
     204: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     207: ldc           #45                 // String WRITE metadata
     209: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     212: aload         6
     214: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     217: ldc           #46                 // String  with charset
     219: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     222: ldc           #47                 // String UTF-8
     224: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     227: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     230: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     235: aload         6
     237: ldc           #47                 // String UTF-8
     239: invokevirtual #48                 // Method java/lang/String.getBytes:(Ljava/lang/String;)[B
     242: astore        7
     244: aload_3
     245: aload         7
     247: iconst_0
     248: aload         7
     250: arraylength
     251: invokevirtual #49                 // Method java/util/zip/ZipOutputStream.write:([BII)V
     254: aload_3
     255: invokevirtual #50                 // Method java/util/zip/ZipOutputStream.closeEntry:()V
     258: aload_3
     259: new           #40                 // class java/util/zip/ZipEntry
     262: dup
     263: ldc           #51                 // String Content.binary
     265: invokespecial #42                 // Method java/util/zip/ZipEntry."<init>":(Ljava/lang/String;)V
     268: invokevirtual #43                 // Method java/util/zip/ZipOutputStream.putNextEntry:(Ljava/util/zip/ZipEntry;)V
     271: aload_3
     272: aload         4
     274: iconst_0
     275: aload         4
     277: arraylength
     278: invokevirtual #49                 // Method java/util/zip/ZipOutputStream.write:([BII)V
     281: aload_3
     282: invokevirtual #50                 // Method java/util/zip/ZipOutputStream.closeEntry:()V
     285: aload_3
     286: invokevirtual #52                 // Method java/util/zip/ZipOutputStream.close:()V
     289: aconst_null
     290: astore_3
     291: aload_0
     292: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
     295: aload_1
     296: ldc           #15                 // String .zip
     298: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
     301: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
     304: aload_0
     305: getfield      #2                  // Field absolutePath:Z
     308: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
     311: astore        8
     313: aload         8
     315: invokevirtual #26                 // Method java/io/File.exists:()Z
     318: ifeq          353
     321: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     324: new           #17                 // class java/lang/StringBuilder
     327: dup
     328: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     331: ldc           #53                 // String ACHTUNG, file existiert bereits, wird nun neu verlinkt
     333: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     336: aload_1
     337: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     340: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     343: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     348: aload         8
     350: invokestatic  #54                 // Method org/apache/commons/io/FileUtils.forceDelete:(Ljava/io/File;)V
     353: aload         5
     355: aload         8
     357: invokestatic  #55                 // Method org/apache/commons/io/FileUtils.moveFile:(Ljava/io/File;Ljava/io/File;)V
     360: aload_3
     361: ifnull        456
     364: aload_3
     365: invokevirtual #52                 // Method java/util/zip/ZipOutputStream.close:()V
     368: goto          456
     371: astore        4
     373: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     376: new           #17                 // class java/lang/StringBuilder
     379: dup
     380: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     383: ldc           #57                 // String error during close of zip output stream for file
     385: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     388: aload_1
     389: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     392: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     395: invokeinterface #58,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     400: goto          456
     403: astore        4
     405: aload         4
     407: invokestatic  #59                 // Method org/adorsys/cryptoutils/exceptions/BaseExceptionHandler.handle:(Ljava/lang/Throwable;)Lorg/adorsys/cryptoutils/exceptions/BaseException;
     410: athrow
     411: astore        9
     413: aload_3
     414: ifnull        453
     417: aload_3
     418: invokevirtual #52                 // Method java/util/zip/ZipOutputStream.close:()V
     421: goto          453
     424: astore        10
     426: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     429: new           #17                 // class java/lang/StringBuilder
     432: dup
     433: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     436: ldc           #57                 // String error during close of zip output stream for file
     438: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     441: aload_1
     442: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     445: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     448: invokeinterface #58,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     453: aload         9
     455: athrow
     456: return
    Exception table:
       from    to  target type
         364   368   371   Class java/lang/Exception
           2   360   403   Class java/lang/Exception
           2   360   411   any
         417   421   424   Class java/lang/Exception
         403   413   411   any

  public void writeZipStream(org.adorsys.encobject.complextypes.BucketPath, org.adorsys.encobject.service.impl.SimplePayloadStreamImpl);
    Code:
       0: aconst_null
       1: astore_3
       2: aconst_null
       3: astore        4
       5: aload_2
       6: invokevirtual #60                 // Method org/adorsys/encobject/service/impl/SimplePayloadStreamImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
       9: getstatic     #8                  // Field org/adorsys/encobject/domain/StorageType.BLOB:Lorg/adorsys/encobject/domain/StorageType;
      12: invokevirtual #9                  // Method org/adorsys/encobject/service/impl/SimpleStorageMetadataImpl.setType:(Lorg/adorsys/encobject/domain/StorageType;)V
      15: aload_2
      16: invokevirtual #60                 // Method org/adorsys/encobject/service/impl/SimplePayloadStreamImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
      19: aload_1
      20: invokestatic  #10                 // Method org/adorsys/encobject/complextypes/BucketPathUtil.getAsString:(Lorg/adorsys/encobject/complextypes/BucketPath;)Ljava/lang/String;
      23: invokevirtual #11                 // Method org/adorsys/encobject/service/impl/SimpleStorageMetadataImpl.setName:(Ljava/lang/String;)V
      26: aload_0
      27: getfield      #5                  // Field gsonHelper:Lorg/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON;
      30: aload_2
      31: invokevirtual #60                 // Method org/adorsys/encobject/service/impl/SimplePayloadStreamImpl.getStorageMetadata:()Lorg/adorsys/encobject/service/impl/SimpleStorageMetadataImpl;
      34: invokevirtual #44                 // Method org/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON.toJson:(Lorg/adorsys/encobject/domain/StorageMetadata;)Ljava/lang/String;
      37: astore        5
      39: aload         5
      41: ldc           #47                 // String UTF-8
      43: invokevirtual #48                 // Method java/lang/String.getBytes:(Ljava/lang/String;)[B
      46: astore        6
      48: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
      51: new           #17                 // class java/lang/StringBuilder
      54: dup
      55: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      58: ldc           #61                 // String WRITE metadata string
      60: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: aload         5
      65: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      68: ldc           #62                 // String with
      70: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      73: ldc           #47                 // String UTF-8
      75: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      78: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      81: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      86: aload_0
      87: aload_1
      88: invokespecial #13                 // Method createDirectoryIfNecessary:(Lorg/adorsys/encobject/complextypes/BucketPath;)V
      91: aload_0
      92: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      95: aload_1
      96: ldc           #15                 // String .zip
      98: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
     101: new           #17                 // class java/lang/StringBuilder
     104: dup
     105: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     108: ldc           #19                 // String .
     110: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     113: invokestatic  #21                 // Method java/util/UUID.randomUUID:()Ljava/util/UUID;
     116: invokevirtual #22                 // Method java/util/UUID.toString:()Ljava/lang/String;
     119: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     122: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     125: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
     128: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
     131: aload_0
     132: getfield      #2                  // Field absolutePath:Z
     135: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
     138: astore        7
     140: aload         7
     142: invokevirtual #26                 // Method java/io/File.exists:()Z
     145: ifeq          176
     148: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
     151: dup
     152: new           #17                 // class java/lang/StringBuilder
     155: dup
     156: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     159: ldc           #28                 // String Temporary File exists. This must not happen.
     161: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     164: aload         7
     166: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     169: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     172: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
     175: athrow
     176: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     179: new           #17                 // class java/lang/StringBuilder
     182: dup
     183: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     186: ldc           #32                 // String write temporary zip file to
     188: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     191: aload         7
     193: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     196: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     199: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     204: new           #34                 // class java/util/zip/ZipOutputStream
     207: dup
     208: new           #35                 // class java/io/BufferedOutputStream
     211: dup
     212: new           #36                 // class java/io/FileOutputStream
     215: dup
     216: aload         7
     218: invokespecial #37                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
     221: invokespecial #38                 // Method java/io/BufferedOutputStream."<init>":(Ljava/io/OutputStream;)V
     224: invokespecial #39                 // Method java/util/zip/ZipOutputStream."<init>":(Ljava/io/OutputStream;)V
     227: astore_3
     228: aload_3
     229: new           #40                 // class java/util/zip/ZipEntry
     232: dup
     233: ldc           #41                 // String StorageMetadata.json
     235: invokespecial #42                 // Method java/util/zip/ZipEntry."<init>":(Ljava/lang/String;)V
     238: invokevirtual #43                 // Method java/util/zip/ZipOutputStream.putNextEntry:(Ljava/util/zip/ZipEntry;)V
     241: aload_3
     242: aload         6
     244: iconst_0
     245: aload         6
     247: arraylength
     248: invokevirtual #49                 // Method java/util/zip/ZipOutputStream.write:([BII)V
     251: aload_3
     252: invokevirtual #50                 // Method java/util/zip/ZipOutputStream.closeEntry:()V
     255: aload_2
     256: invokevirtual #63                 // Method org/adorsys/encobject/service/impl/SimplePayloadStreamImpl.openStream:()Ljava/io/InputStream;
     259: astore        4
     261: aload_3
     262: new           #40                 // class java/util/zip/ZipEntry
     265: dup
     266: ldc           #51                 // String Content.binary
     268: invokespecial #42                 // Method java/util/zip/ZipEntry."<init>":(Ljava/lang/String;)V
     271: invokevirtual #43                 // Method java/util/zip/ZipOutputStream.putNextEntry:(Ljava/util/zip/ZipEntry;)V
     274: aload         4
     276: aload_3
     277: invokestatic  #64                 // Method org/apache/commons/io/IOUtils.copy:(Ljava/io/InputStream;Ljava/io/OutputStream;)I
     280: pop
     281: aload         4
     283: invokestatic  #65                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
     286: aconst_null
     287: astore        4
     289: aload_3
     290: invokestatic  #66                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/OutputStream;)V
     293: aconst_null
     294: astore_3
     295: aload_0
     296: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
     299: aload_1
     300: ldc           #15                 // String .zip
     302: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
     305: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
     308: aload_0
     309: getfield      #2                  // Field absolutePath:Z
     312: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
     315: astore        8
     317: aload         8
     319: invokevirtual #26                 // Method java/io/File.exists:()Z
     322: ifeq          357
     325: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     328: new           #17                 // class java/lang/StringBuilder
     331: dup
     332: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     335: ldc           #53                 // String ACHTUNG, file existiert bereits, wird nun neu verlinkt
     337: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     340: aload_1
     341: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     344: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     347: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     352: aload         8
     354: invokestatic  #54                 // Method org/apache/commons/io/FileUtils.forceDelete:(Ljava/io/File;)V
     357: aload         7
     359: aload         8
     361: invokestatic  #55                 // Method org/apache/commons/io/FileUtils.moveFile:(Ljava/io/File;Ljava/io/File;)V
     364: aload_3
     365: ifnull        372
     368: aload_3
     369: invokestatic  #66                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/OutputStream;)V
     372: aload         4
     374: ifnull        416
     377: aload         4
     379: invokestatic  #65                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
     382: goto          416
     385: astore        5
     387: aload         5
     389: invokestatic  #59                 // Method org/adorsys/cryptoutils/exceptions/BaseExceptionHandler.handle:(Ljava/lang/Throwable;)Lorg/adorsys/cryptoutils/exceptions/BaseException;
     392: athrow
     393: astore        9
     395: aload_3
     396: ifnull        403
     399: aload_3
     400: invokestatic  #66                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/OutputStream;)V
     403: aload         4
     405: ifnull        413
     408: aload         4
     410: invokestatic  #65                 // Method org/apache/commons/io/IOUtils.closeQuietly:(Ljava/io/InputStream;)V
     413: aload         9
     415: athrow
     416: return
    Exception table:
       from    to  target type
           5   364   385   Class java/lang/Exception
           5   364   393   any
         385   395   393   any

  public org.adorsys.encobject.domain.Payload readZip(org.adorsys.encobject.complextypes.BucketPath, org.adorsys.encobject.domain.StorageMetadata);
    Code:
       0: aload_2
       1: ifnonnull     10
       4: aload_0
       5: aload_1
       6: invokevirtual #67                 // Method readZipMetadataOnly:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/domain/StorageMetadata;
       9: astore_2
      10: aload_0
      11: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      14: aload_1
      15: ldc           #15                 // String .zip
      17: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
      20: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
      23: aload_0
      24: getfield      #2                  // Field absolutePath:Z
      27: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
      30: astore_3
      31: new           #68                 // class java/util/zip/ZipInputStream
      34: dup
      35: new           #69                 // class java/io/BufferedInputStream
      38: dup
      39: new           #70                 // class java/io/FileInputStream
      42: dup
      43: aload_3
      44: invokespecial #71                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      47: invokespecial #72                 // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
      50: invokespecial #73                 // Method java/util/zip/ZipInputStream."<init>":(Ljava/io/InputStream;)V
      53: astore        4
      55: aconst_null
      56: astore        6
      58: aload         4
      60: invokevirtual #74                 // Method java/util/zip/ZipInputStream.getNextEntry:()Ljava/util/zip/ZipEntry;
      63: dup
      64: astore        5
      66: ifnull        97
      69: aload         5
      71: invokevirtual #75                 // Method java/util/zip/ZipEntry.getName:()Ljava/lang/String;
      74: ldc           #51                 // String Content.binary
      76: invokevirtual #76                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      79: ifeq          89
      82: aload         4
      84: invokestatic  #77                 // Method org/apache/commons/io/IOUtils.toByteArray:(Ljava/io/InputStream;)[B
      87: astore        6
      89: aload         4
      91: invokevirtual #78                 // Method java/util/zip/ZipInputStream.closeEntry:()V
      94: goto          58
      97: aload         6
      99: ifnonnull     139
     102: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
     105: dup
     106: new           #17                 // class java/lang/StringBuilder
     109: dup
     110: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     113: ldc           #79                 // String Zipfile
     115: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     118: aload_1
     119: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     122: ldc           #80                 // String  does not have entry for
     124: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     127: ldc           #51                 // String Content.binary
     129: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     132: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     135: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
     138: athrow
     139: new           #81                 // class org/adorsys/encobject/service/impl/SimplePayloadImpl
     142: dup
     143: aload_2
     144: aload         6
     146: invokespecial #82                 // Method org/adorsys/encobject/service/impl/SimplePayloadImpl."<init>":(Lorg/adorsys/encobject/domain/StorageMetadata;[B)V
     149: astore        7
     151: aload         7
     153: areturn
     154: astore_3
     155: aload_3
     156: invokestatic  #59                 // Method org/adorsys/cryptoutils/exceptions/BaseExceptionHandler.handle:(Ljava/lang/Throwable;)Lorg/adorsys/cryptoutils/exceptions/BaseException;
     159: athrow
    Exception table:
       from    to  target type
           0   153   154   Class java/lang/Exception

  public org.adorsys.encobject.domain.PayloadStream readZipStream(org.adorsys.encobject.complextypes.BucketPath, org.adorsys.encobject.domain.StorageMetadata);
    Code:
       0: aload_2
       1: ifnonnull     10
       4: aload_0
       5: aload_1
       6: invokevirtual #67                 // Method readZipMetadataOnly:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/domain/StorageMetadata;
       9: astore_2
      10: aload_0
      11: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      14: aload_1
      15: ldc           #15                 // String .zip
      17: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
      20: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
      23: aload_0
      24: getfield      #2                  // Field absolutePath:Z
      27: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
      30: astore_3
      31: new           #68                 // class java/util/zip/ZipInputStream
      34: dup
      35: new           #69                 // class java/io/BufferedInputStream
      38: dup
      39: new           #70                 // class java/io/FileInputStream
      42: dup
      43: aload_3
      44: invokespecial #71                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      47: invokespecial #72                 // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
      50: invokespecial #73                 // Method java/util/zip/ZipInputStream."<init>":(Ljava/io/InputStream;)V
      53: astore        4
      55: aload         4
      57: invokevirtual #74                 // Method java/util/zip/ZipInputStream.getNextEntry:()Ljava/util/zip/ZipEntry;
      60: dup
      61: astore        5
      63: ifnull        98
      66: aload         5
      68: invokevirtual #75                 // Method java/util/zip/ZipEntry.getName:()Ljava/lang/String;
      71: ldc           #51                 // String Content.binary
      73: invokevirtual #76                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      76: ifeq          90
      79: new           #83                 // class org/adorsys/encobject/service/impl/SimplePayloadStreamImpl
      82: dup
      83: aload_2
      84: aload         4
      86: invokespecial #84                 // Method org/adorsys/encobject/service/impl/SimplePayloadStreamImpl."<init>":(Lorg/adorsys/encobject/domain/StorageMetadata;Ljava/io/InputStream;)V
      89: areturn
      90: aload         4
      92: invokevirtual #78                 // Method java/util/zip/ZipInputStream.closeEntry:()V
      95: goto          55
      98: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
     101: dup
     102: new           #17                 // class java/lang/StringBuilder
     105: dup
     106: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     109: ldc           #79                 // String Zipfile
     111: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     114: aload_1
     115: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     118: ldc           #80                 // String  does not have entry for
     120: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     123: ldc           #51                 // String Content.binary
     125: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     131: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
     134: athrow
     135: astore_3
     136: aload_3
     137: invokestatic  #59                 // Method org/adorsys/cryptoutils/exceptions/BaseExceptionHandler.handle:(Ljava/lang/Throwable;)Lorg/adorsys/cryptoutils/exceptions/BaseException;
     140: athrow
    Exception table:
       from    to  target type
           0    89   135   Class java/lang/Exception
          90   135   135   Class java/lang/Exception

  public org.adorsys.encobject.domain.StorageMetadata readZipMetadataOnly(org.adorsys.encobject.complextypes.BucketPath);
    Code:
       0: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
       3: new           #17                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #85                 // String readmetadata
      12: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_1
      16: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      19: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      22: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      27: aload_0
      28: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
      31: aload_1
      32: ldc           #15                 // String .zip
      34: invokevirtual #16                 // Method org/adorsys/encobject/complextypes/BucketPath.add:(Ljava/lang/String;)Lorg/adorsys/encobject/complextypes/BucketPath;
      37: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
      40: aload_0
      41: getfield      #2                  // Field absolutePath:Z
      44: invokestatic  #25                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketPath;Z)Ljava/io/File;
      47: astore_2
      48: aload_2
      49: invokevirtual #26                 // Method java/io/File.exists:()Z
      52: ifne          82
      55: new           #86                 // class java/nio/file/FileSystemException
      58: dup
      59: new           #17                 // class java/lang/StringBuilder
      62: dup
      63: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      66: ldc           #87                 // String File does not exist
      68: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      71: aload_1
      72: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      75: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      78: invokespecial #88                 // Method java/nio/file/FileSystemException."<init>":(Ljava/lang/String;)V
      81: athrow
      82: new           #68                 // class java/util/zip/ZipInputStream
      85: dup
      86: new           #69                 // class java/io/BufferedInputStream
      89: dup
      90: new           #70                 // class java/io/FileInputStream
      93: dup
      94: aload_2
      95: invokespecial #71                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      98: invokespecial #72                 // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
     101: invokespecial #73                 // Method java/util/zip/ZipInputStream."<init>":(Ljava/io/InputStream;)V
     104: astore_3
     105: aconst_null
     106: astore        5
     108: aload_3
     109: invokevirtual #74                 // Method java/util/zip/ZipInputStream.getNextEntry:()Ljava/util/zip/ZipEntry;
     112: dup
     113: astore        4
     115: ifnull        191
     118: aload         4
     120: invokevirtual #75                 // Method java/util/zip/ZipEntry.getName:()Ljava/lang/String;
     123: ldc           #41                 // String StorageMetadata.json
     125: invokevirtual #76                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     128: ifeq          184
     131: new           #89                 // class java/lang/String
     134: dup
     135: aload_3
     136: invokestatic  #77                 // Method org/apache/commons/io/IOUtils.toByteArray:(Ljava/io/InputStream;)[B
     139: ldc           #47                 // String UTF-8
     141: invokespecial #90                 // Method java/lang/String."<init>":([BLjava/lang/String;)V
     144: astore        5
     146: getstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
     149: new           #17                 // class java/lang/StringBuilder
     152: dup
     153: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     156: ldc           #91                 // String READ metadata string
     158: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: aload         5
     163: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     166: ldc           #62                 // String with
     168: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     171: ldc           #47                 // String UTF-8
     173: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     176: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     179: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     184: aload_3
     185: invokevirtual #78                 // Method java/util/zip/ZipInputStream.closeEntry:()V
     188: goto          108
     191: aload         5
     193: ifnonnull     233
     196: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
     199: dup
     200: new           #17                 // class java/lang/StringBuilder
     203: dup
     204: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     207: ldc           #79                 // String Zipfile
     209: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     212: aload_1
     213: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     216: ldc           #80                 // String  does not have entry for
     218: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     221: ldc           #41                 // String StorageMetadata.json
     223: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     226: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     229: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
     232: athrow
     233: aload_0
     234: getfield      #5                  // Field gsonHelper:Lorg/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON;
     237: aload         5
     239: invokevirtual #92                 // Method org/adorsys/encobject/filesystem/StorageMetadataFlattenerGSON.fromJson:(Ljava/lang/String;)Lorg/adorsys/encobject/domain/StorageMetadata;
     242: astore        6
     244: aload         6
     246: areturn
     247: astore_2
     248: new           #93                 // class java/lang/RuntimeException
     251: dup
     252: aload_2
     253: invokespecial #94                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     256: athrow
    Exception table:
       from    to  target type
          27   246   247   Class java/lang/Exception

  private void createDirectoryIfNecessary(org.adorsys.encobject.complextypes.BucketPath);
    Code:
       0: aload_0
       1: getfield      #6                  // Field baseDir:Lorg/adorsys/encobject/complextypes/BucketDirectory;
       4: aload_1
       5: invokevirtual #24                 // Method org/adorsys/encobject/complextypes/BucketDirectory.append:(Lorg/adorsys/encobject/complextypes/BucketPath;)Lorg/adorsys/encobject/complextypes/BucketPath;
       8: invokevirtual #95                 // Method org/adorsys/encobject/complextypes/BucketPath.getBucketDirectory:()Lorg/adorsys/encobject/complextypes/BucketDirectory;
      11: aload_0
      12: getfield      #2                  // Field absolutePath:Z
      15: invokestatic  #96                 // Method org/adorsys/encobject/filesystem/BucketPathFileHelper.getAsFile:(Lorg/adorsys/encobject/complextypes/BucketDirectory;Z)Ljava/io/File;
      18: astore_2
      19: aload_2
      20: invokevirtual #26                 // Method java/io/File.exists:()Z
      23: ifeq          27
      26: return
      27: aload_2
      28: invokevirtual #97                 // Method java/io/File.mkdirs:()Z
      31: istore_3
      32: iload_3
      33: ifne          63
      36: new           #27                 // class org/adorsys/encobject/exceptions/StorageConnectionException
      39: dup
      40: new           #17                 // class java/lang/StringBuilder
      43: dup
      44: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      47: ldc           #98                 // String cant create directory
      49: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: aload_2
      53: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      56: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      59: invokespecial #30                 // Method org/adorsys/encobject/exceptions/StorageConnectionException."<init>":(Ljava/lang/String;)V
      62: athrow
      63: return

  static {};
    Code:
       0: ldc           #14                 // class org/adorsys/encobject/filesystem/ZipFileHelper
       2: invokestatic  #99                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #31                 // Field LOGGER:Lorg/slf4j/Logger;
       8: return
}

Compiled from "Http2UpgradeHandler.java"
class org.apache.coyote.http2.Http2UpgradeHandler$PingManager {
  protected boolean initiateDisabled;

  private final long pingIntervalNano;

  private int sequence;

  private long lastPingNanoTime;

  private java.util.Queue<org.apache.coyote.http2.Http2UpgradeHandler$PingRecord> inflightPings;

  private java.util.Queue<java.lang.Long> roundTripTimes;

  final org.apache.coyote.http2.Http2UpgradeHandler this$0;

  private org.apache.coyote.http2.Http2UpgradeHandler$PingManager(org.apache.coyote.http2.Http2UpgradeHandler);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: iconst_0
      11: putfield      #4                  // Field initiateDisabled:Z
      14: aload_0
      15: ldc2_w        #5                  // long 10000000000l
      18: putfield      #7                  // Field pingIntervalNano:J
      21: aload_0
      22: iconst_0
      23: putfield      #8                  // Field sequence:I
      26: aload_0
      27: ldc2_w        #9                  // long -9223372036854775808l
      30: putfield      #11                 // Field lastPingNanoTime:J
      33: aload_0
      34: new           #12                 // class java/util/concurrent/ConcurrentLinkedQueue
      37: dup
      38: invokespecial #13                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
      41: putfield      #14                 // Field inflightPings:Ljava/util/Queue;
      44: aload_0
      45: new           #12                 // class java/util/concurrent/ConcurrentLinkedQueue
      48: dup
      49: invokespecial #13                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
      52: putfield      #15                 // Field roundTripTimes:Ljava/util/Queue;
      55: return

  public void sendPing(boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field initiateDisabled:Z
       4: ifeq          8
       7: return
       8: invokestatic  #16                 // Method java/lang/System.nanoTime:()J
      11: lstore_2
      12: iload_1
      13: ifne          29
      16: lload_2
      17: aload_0
      18: getfield      #11                 // Field lastPingNanoTime:J
      21: lsub
      22: ldc2_w        #5                  // long 10000000000l
      25: lcmp
      26: ifle          158
      29: aload_0
      30: lload_2
      31: putfield      #11                 // Field lastPingNanoTime:J
      34: bipush        8
      36: newarray       byte
      38: astore        4
      40: aload_0
      41: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
      44: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
      47: dup
      48: astore        5
      50: monitorenter
      51: aload_0
      52: dup
      53: getfield      #8                  // Field sequence:I
      56: iconst_1
      57: iadd
      58: dup_x1
      59: putfield      #8                  // Field sequence:I
      62: istore        6
      64: new           #18                 // class org/apache/coyote/http2/Http2UpgradeHandler$PingRecord
      67: dup
      68: iload         6
      70: lload_2
      71: invokespecial #19                 // Method org/apache/coyote/http2/Http2UpgradeHandler$PingRecord."<init>":(IJ)V
      74: astore        7
      76: aload_0
      77: getfield      #14                 // Field inflightPings:Ljava/util/Queue;
      80: aload         7
      82: invokeinterface #20,  2           // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      87: pop
      88: aload         4
      90: iconst_4
      91: iload         6
      93: invokestatic  #21                 // Method org/apache/coyote/http2/ByteUtil.set31Bits:([BII)V
      96: aload_0
      97: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     100: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     103: iconst_1
     104: invokestatic  #22                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$200:()[B
     107: iconst_0
     108: invokestatic  #22                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$200:()[B
     111: arraylength
     112: invokevirtual #23                 // Method org/apache/tomcat/util/net/SocketWrapperBase.write:(Z[BII)V
     115: aload_0
     116: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     119: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     122: iconst_1
     123: aload         4
     125: iconst_0
     126: aload         4
     128: arraylength
     129: invokevirtual #23                 // Method org/apache/tomcat/util/net/SocketWrapperBase.write:(Z[BII)V
     132: aload_0
     133: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     136: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     139: iconst_1
     140: invokevirtual #24                 // Method org/apache/tomcat/util/net/SocketWrapperBase.flush:(Z)Z
     143: pop
     144: aload         5
     146: monitorexit
     147: goto          158
     150: astore        8
     152: aload         5
     154: monitorexit
     155: aload         8
     157: athrow
     158: return
    Exception table:
       from    to  target type
          51   147   150   any
         150   155   150   any

  public void receivePing(byte[], boolean) throws java.io.IOException;
    Code:
       0: iload_2
       1: ifeq          167
       4: aload_1
       5: iconst_4
       6: invokestatic  #25                 // Method org/apache/coyote/http2/ByteUtil.get31Bits:([BI)I
       9: istore_3
      10: aload_0
      11: getfield      #14                 // Field inflightPings:Ljava/util/Queue;
      14: invokeinterface #26,  1           // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      19: checkcast     #18                 // class org/apache/coyote/http2/Http2UpgradeHandler$PingRecord
      22: astore        4
      24: aload         4
      26: ifnull        55
      29: aload         4
      31: invokevirtual #27                 // Method org/apache/coyote/http2/Http2UpgradeHandler$PingRecord.getSequence:()I
      34: iload_3
      35: if_icmpge     55
      38: aload_0
      39: getfield      #14                 // Field inflightPings:Ljava/util/Queue;
      42: invokeinterface #26,  1           // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      47: checkcast     #18                 // class org/apache/coyote/http2/Http2UpgradeHandler$PingRecord
      50: astore        4
      52: goto          24
      55: aload         4
      57: ifnonnull     63
      60: goto          164
      63: invokestatic  #16                 // Method java/lang/System.nanoTime:()J
      66: aload         4
      68: invokevirtual #28                 // Method org/apache/coyote/http2/Http2UpgradeHandler$PingRecord.getSentNanoTime:()J
      71: lsub
      72: lstore        5
      74: aload_0
      75: getfield      #15                 // Field roundTripTimes:Ljava/util/Queue;
      78: lload         5
      80: invokestatic  #29                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      83: invokeinterface #20,  2           // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      88: pop
      89: aload_0
      90: getfield      #15                 // Field roundTripTimes:Ljava/util/Queue;
      93: invokeinterface #30,  1           // InterfaceMethod java/util/Queue.size:()I
      98: iconst_3
      99: if_icmple     115
     102: aload_0
     103: getfield      #15                 // Field roundTripTimes:Ljava/util/Queue;
     106: invokeinterface #26,  1           // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
     111: pop
     112: goto          89
     115: invokestatic  #31                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$300:()Lorg/apache/juli/logging/Log;
     118: invokeinterface #32,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     123: ifeq          164
     126: invokestatic  #31                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$300:()Lorg/apache/juli/logging/Log;
     129: invokestatic  #33                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$500:()Lorg/apache/tomcat/util/res/StringManager;
     132: ldc           #34                 // String pingManager.roundTripTime
     134: iconst_2
     135: anewarray     #35                 // class java/lang/Object
     138: dup
     139: iconst_0
     140: aload_0
     141: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     144: invokestatic  #36                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$400:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Ljava/lang/String;
     147: aastore
     148: dup
     149: iconst_1
     150: lload         5
     152: invokestatic  #29                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     155: aastore
     156: invokevirtual #37                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     159: invokeinterface #38,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     164: goto          235
     167: aload_0
     168: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     171: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     174: dup
     175: astore_3
     176: monitorenter
     177: aload_0
     178: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     181: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     184: iconst_1
     185: invokestatic  #39                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$600:()[B
     188: iconst_0
     189: invokestatic  #39                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$600:()[B
     192: arraylength
     193: invokevirtual #23                 // Method org/apache/tomcat/util/net/SocketWrapperBase.write:(Z[BII)V
     196: aload_0
     197: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     200: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     203: iconst_1
     204: aload_1
     205: iconst_0
     206: aload_1
     207: arraylength
     208: invokevirtual #23                 // Method org/apache/tomcat/util/net/SocketWrapperBase.write:(Z[BII)V
     211: aload_0
     212: getfield      #2                  // Field this$0:Lorg/apache/coyote/http2/Http2UpgradeHandler;
     215: invokestatic  #17                 // Method org/apache/coyote/http2/Http2UpgradeHandler.access$100:(Lorg/apache/coyote/http2/Http2UpgradeHandler;)Lorg/apache/tomcat/util/net/SocketWrapperBase;
     218: iconst_1
     219: invokevirtual #24                 // Method org/apache/tomcat/util/net/SocketWrapperBase.flush:(Z)Z
     222: pop
     223: aload_3
     224: monitorexit
     225: goto          235
     228: astore        7
     230: aload_3
     231: monitorexit
     232: aload         7
     234: athrow
     235: return
    Exception table:
       from    to  target type
         177   225   228   any
         228   232   228   any

  public long getRoundTripTimeNano();
    Code:
       0: lconst_0
       1: lstore_1
       2: lconst_0
       3: lstore_3
       4: aload_0
       5: getfield      #15                 // Field roundTripTimes:Ljava/util/Queue;
       8: invokeinterface #40,  1           // InterfaceMethod java/util/Queue.iterator:()Ljava/util/Iterator;
      13: astore        5
      15: aload         5
      17: invokeinterface #41,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      22: ifeq          52
      25: aload         5
      27: invokeinterface #42,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #43                 // class java/lang/Long
      35: astore        6
      37: lload_1
      38: aload         6
      40: invokevirtual #44                 // Method java/lang/Long.longValue:()J
      43: ladd
      44: lstore_1
      45: lload_3
      46: lconst_1
      47: ladd
      48: lstore_3
      49: goto          15
      52: lload_3
      53: lconst_0
      54: lcmp
      55: ifle          62
      58: lload_1
      59: lload_3
      60: ldiv
      61: lreturn
      62: lconst_0
      63: lreturn

  org.apache.coyote.http2.Http2UpgradeHandler$PingManager(org.apache.coyote.http2.Http2UpgradeHandler, org.apache.coyote.http2.Http2UpgradeHandler$1);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(Lorg/apache/coyote/http2/Http2UpgradeHandler;)V
       5: return
}

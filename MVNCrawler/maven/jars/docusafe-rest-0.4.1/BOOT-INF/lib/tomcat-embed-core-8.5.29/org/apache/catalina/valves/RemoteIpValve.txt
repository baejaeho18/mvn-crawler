Compiled from "RemoteIpValve.java"
public class org.apache.catalina.valves.RemoteIpValve extends org.apache.catalina.valves.ValveBase {
  private static final java.util.regex.Pattern commaSeparatedValuesPattern;

  private static final org.apache.juli.logging.Log log;

  private int httpServerPort;

  private int httpsServerPort;

  private boolean changeLocalPort;

  private java.util.regex.Pattern internalProxies;

  private java.lang.String protocolHeader;

  private java.lang.String protocolHeaderHttpsValue;

  private java.lang.String portHeader;

  private java.lang.String proxiesHeader;

  private java.lang.String remoteIpHeader;

  private boolean requestAttributesEnabled;

  private java.util.regex.Pattern trustedProxies;

  protected static java.lang.String[] commaDelimitedListToStringArray(java.lang.String);
    Code:
       0: aload_0
       1: ifnull        11
       4: aload_0
       5: invokevirtual #1                  // Method java/lang/String.length:()I
       8: ifne          18
      11: iconst_0
      12: anewarray     #2                  // class java/lang/String
      15: goto          25
      18: getstatic     #3                  // Field commaSeparatedValuesPattern:Ljava/util/regex/Pattern;
      21: aload_0
      22: invokevirtual #4                  // Method java/util/regex/Pattern.split:(Ljava/lang/CharSequence;)[Ljava/lang/String;
      25: areturn

  protected static java.lang.String listToCommaDelimitedString(java.util.List<java.lang.String>);
    Code:
       0: aload_0
       1: ifnonnull     7
       4: ldc           #5                  // String
       6: areturn
       7: new           #6                  // class java/lang/StringBuilder
      10: dup
      11: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      14: astore_1
      15: aload_0
      16: invokeinterface #8,  1            // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      21: astore_2
      22: aload_2
      23: invokeinterface #9,  1            // InterfaceMethod java/util/Iterator.hasNext:()Z
      28: ifeq          67
      31: aload_2
      32: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      37: astore_3
      38: aload_3
      39: ifnull        64
      42: aload_1
      43: aload_3
      44: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      47: pop
      48: aload_2
      49: invokeinterface #9,  1            // InterfaceMethod java/util/Iterator.hasNext:()Z
      54: ifeq          64
      57: aload_1
      58: ldc           #12                 // String ,
      60: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: pop
      64: goto          22
      67: aload_1
      68: invokevirtual #14                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      71: areturn

  public org.apache.catalina.valves.RemoteIpValve();
    Code:
       0: aload_0
       1: iconst_1
       2: invokespecial #15                 // Method org/apache/catalina/valves/ValveBase."<init>":(Z)V
       5: aload_0
       6: bipush        80
       8: putfield      #16                 // Field httpServerPort:I
      11: aload_0
      12: sipush        443
      15: putfield      #17                 // Field httpsServerPort:I
      18: aload_0
      19: iconst_0
      20: putfield      #18                 // Field changeLocalPort:Z
      23: aload_0
      24: ldc           #19                 // String 10\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|192\\.168\\.\\d{1,3}\\.\\d{1,3}|169\\.254\\.\\d{1,3}\\.\\d{1,3}|127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|172\\.1[6-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.2[0-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.3[0-1]{1}\\.\\d{1,3}\\.\\d{1,3}
      26: invokestatic  #20                 // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      29: putfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      32: aload_0
      33: aconst_null
      34: putfield      #22                 // Field protocolHeader:Ljava/lang/String;
      37: aload_0
      38: ldc           #23                 // String https
      40: putfield      #24                 // Field protocolHeaderHttpsValue:Ljava/lang/String;
      43: aload_0
      44: aconst_null
      45: putfield      #25                 // Field portHeader:Ljava/lang/String;
      48: aload_0
      49: ldc           #26                 // String X-Forwarded-By
      51: putfield      #27                 // Field proxiesHeader:Ljava/lang/String;
      54: aload_0
      55: ldc           #28                 // String X-Forwarded-For
      57: putfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
      60: aload_0
      61: iconst_1
      62: putfield      #30                 // Field requestAttributesEnabled:Z
      65: aload_0
      66: aconst_null
      67: putfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
      70: return

  public int getHttpsServerPort();
    Code:
       0: aload_0
       1: getfield      #17                 // Field httpsServerPort:I
       4: ireturn

  public int getHttpServerPort();
    Code:
       0: aload_0
       1: getfield      #16                 // Field httpServerPort:I
       4: ireturn

  public boolean isChangeLocalPort();
    Code:
       0: aload_0
       1: getfield      #18                 // Field changeLocalPort:Z
       4: ireturn

  public void setChangeLocalPort(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #18                 // Field changeLocalPort:Z
       5: return

  public java.lang.String getPortHeader();
    Code:
       0: aload_0
       1: getfield      #25                 // Field portHeader:Ljava/lang/String;
       4: areturn

  public void setPortHeader(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #25                 // Field portHeader:Ljava/lang/String;
       5: return

  public java.lang.String getInternalProxies();
    Code:
       0: aload_0
       1: getfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
       4: ifnonnull     9
       7: aconst_null
       8: areturn
       9: aload_0
      10: getfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      13: invokevirtual #32                 // Method java/util/regex/Pattern.toString:()Ljava/lang/String;
      16: areturn

  public java.lang.String getProtocolHeader();
    Code:
       0: aload_0
       1: getfield      #22                 // Field protocolHeader:Ljava/lang/String;
       4: areturn

  public java.lang.String getProtocolHeaderHttpsValue();
    Code:
       0: aload_0
       1: getfield      #24                 // Field protocolHeaderHttpsValue:Ljava/lang/String;
       4: areturn

  public java.lang.String getProxiesHeader();
    Code:
       0: aload_0
       1: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
       4: areturn

  public java.lang.String getRemoteIpHeader();
    Code:
       0: aload_0
       1: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
       4: areturn

  public boolean getRequestAttributesEnabled();
    Code:
       0: aload_0
       1: getfield      #30                 // Field requestAttributesEnabled:Z
       4: ireturn

  public java.lang.String getTrustedProxies();
    Code:
       0: aload_0
       1: getfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
       4: ifnonnull     9
       7: aconst_null
       8: areturn
       9: aload_0
      10: getfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
      13: invokevirtual #32                 // Method java/util/regex/Pattern.toString:()Ljava/lang/String;
      16: areturn

  public void invoke(org.apache.catalina.connector.Request, org.apache.catalina.connector.Response) throws java.io.IOException, javax.servlet.ServletException;
    Code:
       0: aload_1
       1: invokevirtual #33                 // Method org/apache/catalina/connector/Request.getRemoteAddr:()Ljava/lang/String;
       4: astore_3
       5: aload_1
       6: invokevirtual #34                 // Method org/apache/catalina/connector/Request.getRemoteHost:()Ljava/lang/String;
       9: astore        4
      11: aload_1
      12: invokevirtual #35                 // Method org/apache/catalina/connector/Request.getScheme:()Ljava/lang/String;
      15: astore        5
      17: aload_1
      18: invokevirtual #36                 // Method org/apache/catalina/connector/Request.isSecure:()Z
      21: istore        6
      23: aload_1
      24: invokevirtual #37                 // Method org/apache/catalina/connector/Request.getServerPort:()I
      27: istore        7
      29: aload_1
      30: aload_0
      31: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
      34: invokevirtual #38                 // Method org/apache/catalina/connector/Request.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      37: astore        8
      39: aload_1
      40: aload_0
      41: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
      44: invokevirtual #38                 // Method org/apache/catalina/connector/Request.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      47: astore        9
      49: aload_0
      50: getfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      53: ifnull        622
      56: aload_0
      57: getfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      60: aload_3
      61: invokevirtual #39                 // Method java/util/regex/Pattern.matcher:(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;
      64: invokevirtual #40                 // Method java/util/regex/Matcher.matches:()Z
      67: ifeq          622
      70: aconst_null
      71: astore        10
      73: new           #41                 // class java/util/LinkedList
      76: dup
      77: invokespecial #42                 // Method java/util/LinkedList."<init>":()V
      80: astore        11
      82: new           #6                  // class java/lang/StringBuilder
      85: dup
      86: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
      89: astore        12
      91: aload_1
      92: aload_0
      93: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
      96: invokevirtual #43                 // Method org/apache/catalina/connector/Request.getHeaders:(Ljava/lang/String;)Ljava/util/Enumeration;
      99: astore        13
     101: aload         13
     103: invokeinterface #44,  1           // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
     108: ifeq          146
     111: aload         12
     113: invokevirtual #45                 // Method java/lang/StringBuilder.length:()I
     116: ifle          127
     119: aload         12
     121: ldc           #12                 // String ,
     123: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     126: pop
     127: aload         12
     129: aload         13
     131: invokeinterface #46,  1           // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
     136: checkcast     #2                  // class java/lang/String
     139: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     142: pop
     143: goto          101
     146: aload         12
     148: invokevirtual #14                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     151: invokestatic  #47                 // Method commaDelimitedListToStringArray:(Ljava/lang/String;)[Ljava/lang/String;
     154: astore        13
     156: aload         13
     158: arraylength
     159: iconst_1
     160: isub
     161: istore        14
     163: iload         14
     165: iflt          241
     168: aload         13
     170: iload         14
     172: aaload
     173: astore        15
     175: aload         15
     177: astore        10
     179: aload_0
     180: getfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
     183: aload         15
     185: invokevirtual #39                 // Method java/util/regex/Pattern.matcher:(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;
     188: invokevirtual #40                 // Method java/util/regex/Matcher.matches:()Z
     191: ifeq          197
     194: goto          235
     197: aload_0
     198: getfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
     201: ifnull        229
     204: aload_0
     205: getfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
     208: aload         15
     210: invokevirtual #39                 // Method java/util/regex/Pattern.matcher:(Ljava/lang/CharSequence;)Ljava/util/regex/Matcher;
     213: invokevirtual #40                 // Method java/util/regex/Matcher.matches:()Z
     216: ifeq          229
     219: aload         11
     221: aload         15
     223: invokevirtual #48                 // Method java/util/LinkedList.addFirst:(Ljava/lang/Object;)V
     226: goto          235
     229: iinc          14, -1
     232: goto          241
     235: iinc          14, -1
     238: goto          163
     241: new           #41                 // class java/util/LinkedList
     244: dup
     245: invokespecial #42                 // Method java/util/LinkedList."<init>":()V
     248: astore        15
     250: iload         14
     252: iflt          275
     255: aload         13
     257: iload         14
     259: aaload
     260: astore        16
     262: aload         15
     264: aload         16
     266: invokevirtual #48                 // Method java/util/LinkedList.addFirst:(Ljava/lang/Object;)V
     269: iinc          14, -1
     272: goto          250
     275: aload         10
     277: ifnull        394
     280: aload_1
     281: aload         10
     283: invokevirtual #49                 // Method org/apache/catalina/connector/Request.setRemoteAddr:(Ljava/lang/String;)V
     286: aload_1
     287: aload         10
     289: invokevirtual #50                 // Method org/apache/catalina/connector/Request.setRemoteHost:(Ljava/lang/String;)V
     292: aload         11
     294: invokevirtual #51                 // Method java/util/LinkedList.size:()I
     297: ifne          317
     300: aload_1
     301: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     304: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     307: aload_0
     308: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     311: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     314: goto          343
     317: aload         11
     319: invokestatic  #55                 // Method listToCommaDelimitedString:(Ljava/util/List;)Ljava/lang/String;
     322: astore        16
     324: aload_1
     325: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     328: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     331: aload_0
     332: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     335: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     338: aload         16
     340: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     343: aload         15
     345: invokevirtual #51                 // Method java/util/LinkedList.size:()I
     348: ifne          368
     351: aload_1
     352: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     355: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     358: aload_0
     359: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     362: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     365: goto          394
     368: aload         15
     370: invokestatic  #55                 // Method listToCommaDelimitedString:(Ljava/util/List;)Ljava/lang/String;
     373: astore        16
     375: aload_1
     376: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     379: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     382: aload_0
     383: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     386: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     389: aload         16
     391: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     394: aload_0
     395: getfield      #22                 // Field protocolHeader:Ljava/lang/String;
     398: ifnull        486
     401: aload_1
     402: aload_0
     403: getfield      #22                 // Field protocolHeader:Ljava/lang/String;
     406: invokevirtual #38                 // Method org/apache/catalina/connector/Request.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     409: astore        16
     411: aload         16
     413: ifnonnull     419
     416: goto          486
     419: aload_0
     420: getfield      #24                 // Field protocolHeaderHttpsValue:Ljava/lang/String;
     423: aload         16
     425: invokevirtual #58                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     428: ifeq          460
     431: aload_1
     432: iconst_1
     433: invokevirtual #59                 // Method org/apache/catalina/connector/Request.setSecure:(Z)V
     436: aload_1
     437: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     440: invokevirtual #60                 // Method org/apache/coyote/Request.scheme:()Lorg/apache/tomcat/util/buf/MessageBytes;
     443: ldc           #23                 // String https
     445: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     448: aload_0
     449: aload_1
     450: aload_0
     451: getfield      #17                 // Field httpsServerPort:I
     454: invokespecial #61                 // Method setPorts:(Lorg/apache/catalina/connector/Request;I)V
     457: goto          486
     460: aload_1
     461: iconst_0
     462: invokevirtual #59                 // Method org/apache/catalina/connector/Request.setSecure:(Z)V
     465: aload_1
     466: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     469: invokevirtual #60                 // Method org/apache/coyote/Request.scheme:()Lorg/apache/tomcat/util/buf/MessageBytes;
     472: ldc           #62                 // String http
     474: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     477: aload_0
     478: aload_1
     479: aload_0
     480: getfield      #16                 // Field httpServerPort:I
     483: invokespecial #61                 // Method setPorts:(Lorg/apache/catalina/connector/Request;I)V
     486: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
     489: invokeinterface #64,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     494: ifeq          619
     497: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
     500: new           #6                  // class java/lang/StringBuilder
     503: dup
     504: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
     507: ldc           #65                 // String Incoming request
     509: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     512: aload_1
     513: invokevirtual #66                 // Method org/apache/catalina/connector/Request.getRequestURI:()Ljava/lang/String;
     516: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     519: ldc           #67                 // String  with originalRemoteAddr \'
     521: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     524: aload_3
     525: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     528: ldc           #68                 // String \', originalRemoteHost=\'
     530: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     533: aload         4
     535: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     538: ldc           #69                 // String \', originalSecure=\'
     540: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     543: iload         6
     545: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     548: ldc           #71                 // String \', originalScheme=\'
     550: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     553: aload         5
     555: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     558: ldc           #72                 // String \' will be seen as newRemoteAddr=\'
     560: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     563: aload_1
     564: invokevirtual #33                 // Method org/apache/catalina/connector/Request.getRemoteAddr:()Ljava/lang/String;
     567: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     570: ldc           #73                 // String \', newRemoteHost=\'
     572: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     575: aload_1
     576: invokevirtual #34                 // Method org/apache/catalina/connector/Request.getRemoteHost:()Ljava/lang/String;
     579: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     582: ldc           #74                 // String \', newScheme=\'
     584: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     587: aload_1
     588: invokevirtual #35                 // Method org/apache/catalina/connector/Request.getScheme:()Ljava/lang/String;
     591: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     594: ldc           #75                 // String \', newSecure=\'
     596: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     599: aload_1
     600: invokevirtual #36                 // Method org/apache/catalina/connector/Request.isSecure:()Z
     603: invokevirtual #70                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     606: ldc           #76                 // String \'
     608: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     611: invokevirtual #14                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     614: invokeinterface #77,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     619: goto          680
     622: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
     625: invokeinterface #64,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     630: ifeq          680
     633: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
     636: new           #6                  // class java/lang/StringBuilder
     639: dup
     640: invokespecial #7                  // Method java/lang/StringBuilder."<init>":()V
     643: ldc           #78                 // String Skip RemoteIpValve for request
     645: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     648: aload_1
     649: invokevirtual #66                 // Method org/apache/catalina/connector/Request.getRequestURI:()Ljava/lang/String;
     652: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     655: ldc           #67                 // String  with originalRemoteAddr \'
     657: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     660: aload_1
     661: invokevirtual #33                 // Method org/apache/catalina/connector/Request.getRemoteAddr:()Ljava/lang/String;
     664: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     667: ldc           #76                 // String \'
     669: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     672: invokevirtual #14                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     675: invokeinterface #77,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     680: aload_0
     681: getfield      #30                 // Field requestAttributesEnabled:Z
     684: ifeq          740
     687: aload_1
     688: ldc           #79                 // String org.apache.catalina.AccessLog.RemoteAddr
     690: aload_1
     691: invokevirtual #33                 // Method org/apache/catalina/connector/Request.getRemoteAddr:()Ljava/lang/String;
     694: invokevirtual #80                 // Method org/apache/catalina/connector/Request.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     697: aload_1
     698: ldc           #81                 // String org.apache.tomcat.remoteAddr
     700: aload_1
     701: invokevirtual #33                 // Method org/apache/catalina/connector/Request.getRemoteAddr:()Ljava/lang/String;
     704: invokevirtual #80                 // Method org/apache/catalina/connector/Request.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     707: aload_1
     708: ldc           #82                 // String org.apache.catalina.AccessLog.RemoteHost
     710: aload_1
     711: invokevirtual #34                 // Method org/apache/catalina/connector/Request.getRemoteHost:()Ljava/lang/String;
     714: invokevirtual #80                 // Method org/apache/catalina/connector/Request.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     717: aload_1
     718: ldc           #83                 // String org.apache.catalina.AccessLog.Protocol
     720: aload_1
     721: invokevirtual #84                 // Method org/apache/catalina/connector/Request.getProtocol:()Ljava/lang/String;
     724: invokevirtual #80                 // Method org/apache/catalina/connector/Request.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     727: aload_1
     728: ldc           #85                 // String org.apache.catalina.AccessLog.ServerPort
     730: aload_1
     731: invokevirtual #37                 // Method org/apache/catalina/connector/Request.getServerPort:()I
     734: invokestatic  #86                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     737: invokevirtual #80                 // Method org/apache/catalina/connector/Request.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     740: aload_0
     741: invokevirtual #87                 // Method getNext:()Lorg/apache/catalina/Valve;
     744: aload_1
     745: aload_2
     746: invokeinterface #88,  3           // InterfaceMethod org/apache/catalina/Valve.invoke:(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V
     751: aload_1
     752: aload_3
     753: invokevirtual #49                 // Method org/apache/catalina/connector/Request.setRemoteAddr:(Ljava/lang/String;)V
     756: aload_1
     757: aload         4
     759: invokevirtual #50                 // Method org/apache/catalina/connector/Request.setRemoteHost:(Ljava/lang/String;)V
     762: aload_1
     763: iload         6
     765: invokevirtual #59                 // Method org/apache/catalina/connector/Request.setSecure:(Z)V
     768: aload_1
     769: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     772: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     775: astore        10
     777: aload_1
     778: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     781: invokevirtual #60                 // Method org/apache/coyote/Request.scheme:()Lorg/apache/tomcat/util/buf/MessageBytes;
     784: aload         5
     786: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     789: aload_1
     790: iload         7
     792: invokevirtual #89                 // Method org/apache/catalina/connector/Request.setServerPort:(I)V
     795: aload         8
     797: ifnull        808
     800: aload         8
     802: invokevirtual #1                  // Method java/lang/String.length:()I
     805: ifne          820
     808: aload         10
     810: aload_0
     811: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     814: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     817: goto          834
     820: aload         10
     822: aload_0
     823: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     826: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     829: aload         8
     831: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     834: aload         9
     836: ifnull        847
     839: aload         9
     841: invokevirtual #1                  // Method java/lang/String.length:()I
     844: ifne          859
     847: aload         10
     849: aload_0
     850: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     853: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     856: goto          873
     859: aload         10
     861: aload_0
     862: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     865: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     868: aload         9
     870: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     873: goto          1003
     876: astore        17
     878: aload_1
     879: aload_3
     880: invokevirtual #49                 // Method org/apache/catalina/connector/Request.setRemoteAddr:(Ljava/lang/String;)V
     883: aload_1
     884: aload         4
     886: invokevirtual #50                 // Method org/apache/catalina/connector/Request.setRemoteHost:(Ljava/lang/String;)V
     889: aload_1
     890: iload         6
     892: invokevirtual #59                 // Method org/apache/catalina/connector/Request.setSecure:(Z)V
     895: aload_1
     896: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     899: invokevirtual #53                 // Method org/apache/coyote/Request.getMimeHeaders:()Lorg/apache/tomcat/util/http/MimeHeaders;
     902: astore        18
     904: aload_1
     905: invokevirtual #52                 // Method org/apache/catalina/connector/Request.getCoyoteRequest:()Lorg/apache/coyote/Request;
     908: invokevirtual #60                 // Method org/apache/coyote/Request.scheme:()Lorg/apache/tomcat/util/buf/MessageBytes;
     911: aload         5
     913: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     916: aload_1
     917: iload         7
     919: invokevirtual #89                 // Method org/apache/catalina/connector/Request.setServerPort:(I)V
     922: aload         8
     924: ifnull        935
     927: aload         8
     929: invokevirtual #1                  // Method java/lang/String.length:()I
     932: ifne          947
     935: aload         18
     937: aload_0
     938: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     941: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     944: goto          961
     947: aload         18
     949: aload_0
     950: getfield      #27                 // Field proxiesHeader:Ljava/lang/String;
     953: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     956: aload         8
     958: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
     961: aload         9
     963: ifnull        974
     966: aload         9
     968: invokevirtual #1                  // Method java/lang/String.length:()I
     971: ifne          986
     974: aload         18
     976: aload_0
     977: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     980: invokevirtual #54                 // Method org/apache/tomcat/util/http/MimeHeaders.removeHeader:(Ljava/lang/String;)V
     983: goto          1000
     986: aload         18
     988: aload_0
     989: getfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
     992: invokevirtual #56                 // Method org/apache/tomcat/util/http/MimeHeaders.setValue:(Ljava/lang/String;)Lorg/apache/tomcat/util/buf/MessageBytes;
     995: aload         9
     997: invokevirtual #57                 // Method org/apache/tomcat/util/buf/MessageBytes.setString:(Ljava/lang/String;)V
    1000: aload         17
    1002: athrow
    1003: return
    Exception table:
       from    to  target type
         740   751   876   any
         876   878   876   any

  private void setPorts(org.apache.catalina.connector.Request, int);
    Code:
       0: iload_2
       1: istore_3
       2: aload_0
       3: getfield      #25                 // Field portHeader:Ljava/lang/String;
       6: ifnull        80
       9: aload_1
      10: aload_0
      11: getfield      #25                 // Field portHeader:Ljava/lang/String;
      14: invokevirtual #38                 // Method org/apache/catalina/connector/Request.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      17: astore        4
      19: aload         4
      21: ifnull        80
      24: aload         4
      26: invokestatic  #90                 // Method java/lang/Integer.parseInt:(Ljava/lang/String;)I
      29: istore_3
      30: goto          80
      33: astore        5
      35: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
      38: invokeinterface #64,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
      43: ifeq          80
      46: getstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
      49: getstatic     #92                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      52: ldc           #93                 // String remoteIpValve.invalidPortHeader
      54: iconst_2
      55: anewarray     #94                 // class java/lang/Object
      58: dup
      59: iconst_0
      60: aload         4
      62: aastore
      63: dup
      64: iconst_1
      65: aload_0
      66: getfield      #25                 // Field portHeader:Ljava/lang/String;
      69: aastore
      70: invokevirtual #95                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      73: aload         5
      75: invokeinterface #96,  3           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      80: aload_1
      81: iload_3
      82: invokevirtual #89                 // Method org/apache/catalina/connector/Request.setServerPort:(I)V
      85: aload_0
      86: getfield      #18                 // Field changeLocalPort:Z
      89: ifeq          97
      92: aload_1
      93: iload_3
      94: invokevirtual #97                 // Method org/apache/catalina/connector/Request.setLocalPort:(I)V
      97: return
    Exception table:
       from    to  target type
          24    30    33   Class java/lang/NumberFormatException

  public void setHttpServerPort(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #16                 // Field httpServerPort:I
       5: return

  public void setHttpsServerPort(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #17                 // Field httpsServerPort:I
       5: return

  public void setInternalProxies(java.lang.String);
    Code:
       0: aload_1
       1: ifnull        11
       4: aload_1
       5: invokevirtual #1                  // Method java/lang/String.length:()I
       8: ifne          19
      11: aload_0
      12: aconst_null
      13: putfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      16: goto          27
      19: aload_0
      20: aload_1
      21: invokestatic  #20                 // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      24: putfield      #21                 // Field internalProxies:Ljava/util/regex/Pattern;
      27: return

  public void setProtocolHeader(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #22                 // Field protocolHeader:Ljava/lang/String;
       5: return

  public void setProtocolHeaderHttpsValue(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #24                 // Field protocolHeaderHttpsValue:Ljava/lang/String;
       5: return

  public void setProxiesHeader(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #27                 // Field proxiesHeader:Ljava/lang/String;
       5: return

  public void setRemoteIpHeader(java.lang.String);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #29                 // Field remoteIpHeader:Ljava/lang/String;
       5: return

  public void setRequestAttributesEnabled(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #30                 // Field requestAttributesEnabled:Z
       5: return

  public void setTrustedProxies(java.lang.String);
    Code:
       0: aload_1
       1: ifnull        11
       4: aload_1
       5: invokevirtual #1                  // Method java/lang/String.length:()I
       8: ifne          19
      11: aload_0
      12: aconst_null
      13: putfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
      16: goto          27
      19: aload_0
      20: aload_1
      21: invokestatic  #20                 // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
      24: putfield      #31                 // Field trustedProxies:Ljava/util/regex/Pattern;
      27: return

  static {};
    Code:
       0: ldc           #98                 // String \\s*,\\s*
       2: invokestatic  #20                 // Method java/util/regex/Pattern.compile:(Ljava/lang/String;)Ljava/util/regex/Pattern;
       5: putstatic     #3                  // Field commaSeparatedValuesPattern:Ljava/util/regex/Pattern;
       8: ldc_w         #99                 // class org/apache/catalina/valves/RemoteIpValve
      11: invokestatic  #100                // Method org/apache/juli/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/juli/logging/Log;
      14: putstatic     #63                 // Field log:Lorg/apache/juli/logging/Log;
      17: return
}

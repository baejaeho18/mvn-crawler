Compiled from "AprEndpoint.java"
public class org.apache.tomcat.util.net.AprEndpoint$Sendfile implements java.lang.Runnable {
  protected long sendfilePollset;

  protected long pool;

  protected long[] desc;

  protected java.util.HashMap<java.lang.Long, org.apache.tomcat.util.net.AprEndpoint$SendfileData> sendfileData;

  protected int sendfileCount;

  protected java.util.ArrayList<org.apache.tomcat.util.net.AprEndpoint$SendfileData> addS;

  private volatile boolean sendfileRunning;

  final org.apache.tomcat.util.net.AprEndpoint this$0;

  public org.apache.tomcat.util.net.AprEndpoint$Sendfile(org.apache.tomcat.util.net.AprEndpoint);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: lconst_0
      11: putfield      #3                  // Field sendfilePollset:J
      14: aload_0
      15: lconst_0
      16: putfield      #4                  // Field pool:J
      19: aload_0
      20: iconst_1
      21: putfield      #5                  // Field sendfileRunning:Z
      24: return

  public int getSendfileCount();
    Code:
       0: aload_0
       1: getfield      #6                  // Field sendfileCount:I
       4: ireturn

  protected void init();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
       5: getfield      #7                  // Field org/apache/tomcat/util/net/AprEndpoint.serverSockPool:J
       8: invokestatic  #8                  // Method org/apache/tomcat/jni/Pool.create:(J)J
      11: putfield      #4                  // Field pool:J
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      18: getfield      #9                  // Field org/apache/tomcat/util/net/AprEndpoint.sendfileSize:I
      21: istore_1
      22: iload_1
      23: ifgt          48
      26: getstatic     #10                 // Field org/apache/tomcat/jni/OS.IS_WIN32:Z
      29: ifne          38
      32: getstatic     #11                 // Field org/apache/tomcat/jni/OS.IS_WIN64:Z
      35: ifeq          44
      38: sipush        1024
      41: goto          47
      44: sipush        16384
      47: istore_1
      48: aload_0
      49: aload_0
      50: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      53: iload_1
      54: aload_0
      55: getfield      #4                  // Field pool:J
      58: aload_0
      59: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      62: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
      65: invokevirtual #13                 // Method org/apache/tomcat/util/net/AprEndpoint.allocatePoller:(IJI)J
      68: putfield      #3                  // Field sendfilePollset:J
      71: aload_0
      72: getfield      #3                  // Field sendfilePollset:J
      75: lconst_0
      76: lcmp
      77: ifne          114
      80: iload_1
      81: sipush        1024
      84: if_icmple     114
      87: sipush        1024
      90: istore_1
      91: aload_0
      92: aload_0
      93: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      96: iload_1
      97: aload_0
      98: getfield      #4                  // Field pool:J
     101: aload_0
     102: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     105: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     108: invokevirtual #13                 // Method org/apache/tomcat/util/net/AprEndpoint.allocatePoller:(IJI)J
     111: putfield      #3                  // Field sendfilePollset:J
     114: aload_0
     115: getfield      #3                  // Field sendfilePollset:J
     118: lconst_0
     119: lcmp
     120: ifne          149
     123: bipush        62
     125: istore_1
     126: aload_0
     127: aload_0
     128: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     131: iload_1
     132: aload_0
     133: getfield      #4                  // Field pool:J
     136: aload_0
     137: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     140: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     143: invokevirtual #13                 // Method org/apache/tomcat/util/net/AprEndpoint.allocatePoller:(IJI)J
     146: putfield      #3                  // Field sendfilePollset:J
     149: aload_0
     150: iload_1
     151: iconst_2
     152: imul
     153: newarray       long
     155: putfield      #14                 // Field desc:[J
     158: aload_0
     159: new           #15                 // class java/util/HashMap
     162: dup
     163: iload_1
     164: invokespecial #16                 // Method java/util/HashMap."<init>":(I)V
     167: putfield      #17                 // Field sendfileData:Ljava/util/HashMap;
     170: aload_0
     171: new           #18                 // class java/util/ArrayList
     174: dup
     175: invokespecial #19                 // Method java/util/ArrayList."<init>":()V
     178: putfield      #20                 // Field addS:Ljava/util/ArrayList;
     181: return

  protected void destroy();
    Code:
       0: aload_0
       1: iconst_0
       2: putfield      #5                  // Field sendfileRunning:Z
       5: aload_0
       6: dup
       7: astore_1
       8: monitorenter
       9: aload_0
      10: invokevirtual #21                 // Method java/lang/Object.notify:()V
      13: aload_0
      14: aload_0
      15: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      18: getfield      #22                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
      21: sipush        1000
      24: idiv
      25: i2l
      26: invokevirtual #23                 // Method java/lang/Object.wait:(J)V
      29: aload_1
      30: monitorexit
      31: goto          39
      34: astore_2
      35: aload_1
      36: monitorexit
      37: aload_2
      38: athrow
      39: goto          43
      42: astore_1
      43: aload_0
      44: getfield      #20                 // Field addS:Ljava/util/ArrayList;
      47: invokevirtual #25                 // Method java/util/ArrayList.size:()I
      50: iconst_1
      51: isub
      52: istore_1
      53: iload_1
      54: iflt          86
      57: aload_0
      58: getfield      #20                 // Field addS:Ljava/util/ArrayList;
      61: iload_1
      62: invokevirtual #26                 // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
      65: checkcast     #27                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
      68: astore_2
      69: aload_0
      70: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      73: aload_2
      74: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      77: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
      80: iinc          1, -1
      83: goto          53
      86: aload_0
      87: getfield      #3                  // Field sendfilePollset:J
      90: aload_0
      91: getfield      #14                 // Field desc:[J
      94: invokestatic  #30                 // Method org/apache/tomcat/jni/Poll.pollset:(J[J)I
      97: istore_1
      98: iload_1
      99: ifle          132
     102: iconst_0
     103: istore_2
     104: iload_2
     105: iload_1
     106: if_icmpge     132
     109: aload_0
     110: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     113: aload_0
     114: getfield      #14                 // Field desc:[J
     117: iload_2
     118: iconst_2
     119: imul
     120: iconst_1
     121: iadd
     122: laload
     123: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     126: iinc          2, 1
     129: goto          104
     132: aload_0
     133: getfield      #4                  // Field pool:J
     136: invokestatic  #31                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     139: aload_0
     140: getfield      #17                 // Field sendfileData:Ljava/util/HashMap;
     143: invokevirtual #32                 // Method java/util/HashMap.clear:()V
     146: return
    Exception table:
       from    to  target type
           9    31    34   any
          34    37    34   any
           5    39    42   Class java/lang/InterruptedException

  public org.apache.tomcat.util.net.SendfileState add(org.apache.tomcat.util.net.AprEndpoint$SendfileData);
    Code:
       0: aload_1
       1: aload_1
       2: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
       5: invokestatic  #33                 // Method org/apache/tomcat/jni/Socket.pool:(J)J
       8: putfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      11: aload_1
      12: aload_1
      13: getfield      #35                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fileName:Ljava/lang/String;
      16: sipush        4129
      19: iconst_0
      20: aload_1
      21: getfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      24: invokestatic  #36                 // Method org/apache/tomcat/jni/File.open:(Ljava/lang/String;IIJ)J
      27: putfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
      30: aload_1
      31: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      34: lconst_0
      35: invokestatic  #38                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
      38: pop
      39: aload_0
      40: getfield      #5                  // Field sendfileRunning:Z
      43: ifeq          161
      46: aload_1
      47: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      50: aload_1
      51: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
      54: aload_1
      55: getfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
      58: aload_1
      59: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
      62: iconst_0
      63: invokestatic  #41                 // Method org/apache/tomcat/jni/Socket.sendfilen:(JJJJI)J
      66: lstore_2
      67: lload_2
      68: lconst_0
      69: lcmp
      70: ifge          98
      73: lload_2
      74: lneg
      75: ldc2_w        #42                 // long 120002l
      78: lcmp
      79: ifeq          161
      82: aload_1
      83: getfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
      86: invokestatic  #31                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
      89: aload_1
      90: lconst_0
      91: putfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      94: getstatic     #44                 // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
      97: areturn
      98: aload_1
      99: dup
     100: getfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     103: lload_2
     104: ladd
     105: putfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     108: aload_1
     109: dup
     110: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     113: lload_2
     114: lsub
     115: putfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     118: aload_1
     119: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     122: lconst_0
     123: lcmp
     124: ifne          158
     127: aload_1
     128: getfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     131: invokestatic  #31                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     134: aload_1
     135: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     138: aload_0
     139: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     142: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     145: sipush        1000
     148: imul
     149: i2l
     150: invokestatic  #38                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     153: pop
     154: getstatic     #45                 // Field org/apache/tomcat/util/net/SendfileState.DONE:Lorg/apache/tomcat/util/net/SendfileState;
     157: areturn
     158: goto          39
     161: goto          186
     164: astore_2
     165: invokestatic  #47                 // Method org/apache/tomcat/util/net/AprEndpoint.access$200:()Lorg/apache/juli/logging/Log;
     168: getstatic     #48                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     171: ldc           #49                 // String endpoint.sendfile.error
     173: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     176: aload_2
     177: invokeinterface #51,  3           // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     182: getstatic     #44                 // Field org/apache/tomcat/util/net/SendfileState.ERROR:Lorg/apache/tomcat/util/net/SendfileState;
     185: areturn
     186: aload_0
     187: dup
     188: astore_2
     189: monitorenter
     190: aload_0
     191: getfield      #20                 // Field addS:Ljava/util/ArrayList;
     194: aload_1
     195: invokevirtual #52                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     198: pop
     199: aload_0
     200: invokevirtual #21                 // Method java/lang/Object.notify:()V
     203: aload_2
     204: monitorexit
     205: goto          215
     208: astore        4
     210: aload_2
     211: monitorexit
     212: aload         4
     214: athrow
     215: getstatic     #53                 // Field org/apache/tomcat/util/net/SendfileState.PENDING:Lorg/apache/tomcat/util/net/SendfileState;
     218: areturn
    Exception table:
       from    to  target type
           0    97   164   Class java/lang/Exception
          98   157   164   Class java/lang/Exception
         158   161   164   Class java/lang/Exception
         190   205   208   any
         208   212   208   any

  protected void remove(org.apache.tomcat.util.net.AprEndpoint$SendfileData);
    Code:
       0: aload_0
       1: getfield      #3                  // Field sendfilePollset:J
       4: aload_1
       5: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
       8: invokestatic  #54                 // Method org/apache/tomcat/jni/Poll.remove:(JJ)I
      11: istore_2
      12: iload_2
      13: ifne          26
      16: aload_0
      17: dup
      18: getfield      #6                  // Field sendfileCount:I
      21: iconst_1
      22: isub
      23: putfield      #6                  // Field sendfileCount:I
      26: aload_0
      27: getfield      #17                 // Field sendfileData:Ljava/util/HashMap;
      30: aload_1
      31: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
      34: invokestatic  #55                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      37: invokevirtual #56                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      40: pop
      41: return

  public void run();
    Code:
       0: lconst_0
       1: lstore_1
       2: aload_0
       3: getfield      #5                  // Field sendfileRunning:Z
       6: ifeq          916
       9: aload_0
      10: getfield      #5                  // Field sendfileRunning:Z
      13: ifeq          39
      16: aload_0
      17: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
      20: getfield      #57                 // Field org/apache/tomcat/util/net/AprEndpoint.paused:Z
      23: ifeq          39
      26: ldc2_w        #58                 // long 1000l
      29: invokestatic  #60                 // Method java/lang/Thread.sleep:(J)V
      32: goto          9
      35: astore_3
      36: goto          9
      39: aload_0
      40: getfield      #5                  // Field sendfileRunning:Z
      43: ifeq          94
      46: aload_0
      47: getfield      #6                  // Field sendfileCount:I
      50: iconst_1
      51: if_icmpge     94
      54: aload_0
      55: getfield      #20                 // Field addS:Ljava/util/ArrayList;
      58: invokevirtual #25                 // Method java/util/ArrayList.size:()I
      61: iconst_1
      62: if_icmpge     94
      65: lconst_0
      66: lstore_1
      67: aload_0
      68: dup
      69: astore_3
      70: monitorenter
      71: aload_0
      72: invokevirtual #61                 // Method java/lang/Object.wait:()V
      75: aload_3
      76: monitorexit
      77: goto          87
      80: astore        4
      82: aload_3
      83: monitorexit
      84: aload         4
      86: athrow
      87: goto          39
      90: astore_3
      91: goto          39
      94: aload_0
      95: getfield      #5                  // Field sendfileRunning:Z
      98: ifne          104
     101: goto          916
     104: aload_0
     105: getfield      #20                 // Field addS:Ljava/util/ArrayList;
     108: invokevirtual #25                 // Method java/util/ArrayList.size:()I
     111: ifle          276
     114: aload_0
     115: dup
     116: astore_3
     117: monitorenter
     118: aload_0
     119: getfield      #20                 // Field addS:Ljava/util/ArrayList;
     122: invokevirtual #25                 // Method java/util/ArrayList.size:()I
     125: iconst_1
     126: isub
     127: istore        4
     129: iload         4
     131: iflt          257
     134: aload_0
     135: getfield      #20                 // Field addS:Ljava/util/ArrayList;
     138: iload         4
     140: invokevirtual #26                 // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
     143: checkcast     #27                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     146: astore        5
     148: aload_0
     149: getfield      #3                  // Field sendfilePollset:J
     152: aload         5
     154: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     157: iconst_4
     158: invokestatic  #62                 // Method org/apache/tomcat/jni/Poll.add:(JJI)I
     161: istore        6
     163: iload         6
     165: ifne          199
     168: aload_0
     169: getfield      #17                 // Field sendfileData:Ljava/util/HashMap;
     172: aload         5
     174: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     177: invokestatic  #55                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     180: aload         5
     182: invokevirtual #63                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     185: pop
     186: aload_0
     187: dup
     188: getfield      #6                  // Field sendfileCount:I
     191: iconst_1
     192: iadd
     193: putfield      #6                  // Field sendfileCount:I
     196: goto          251
     199: aload_0
     200: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     203: invokevirtual #64                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     206: getstatic     #48                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     209: ldc           #65                 // String endpoint.sendfile.addfail
     211: iconst_2
     212: anewarray     #66                 // class java/lang/Object
     215: dup
     216: iconst_0
     217: iload         6
     219: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     222: aastore
     223: dup
     224: iconst_1
     225: iload         6
     227: invokestatic  #68                 // Method org/apache/tomcat/jni/Error.strerror:(I)Ljava/lang/String;
     230: aastore
     231: invokevirtual #69                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     234: invokeinterface #70,  2           // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;)V
     239: aload_0
     240: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     243: aload         5
     245: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     248: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     251: iinc          4, -1
     254: goto          129
     257: aload_0
     258: getfield      #20                 // Field addS:Ljava/util/ArrayList;
     261: invokevirtual #71                 // Method java/util/ArrayList.clear:()V
     264: aload_3
     265: monitorexit
     266: goto          276
     269: astore        7
     271: aload_3
     272: monitorexit
     273: aload         7
     275: athrow
     276: lload_1
     277: aload_0
     278: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     281: getfield      #22                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
     284: i2l
     285: ladd
     286: lstore_1
     287: aload_0
     288: getfield      #3                  // Field sendfilePollset:J
     291: aload_0
     292: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     295: getfield      #22                 // Field org/apache/tomcat/util/net/AprEndpoint.pollTime:I
     298: i2l
     299: aload_0
     300: getfield      #14                 // Field desc:[J
     303: iconst_0
     304: invokestatic  #72                 // Method org/apache/tomcat/jni/Poll.poll:(JJ[JZ)I
     307: istore_3
     308: iload_3
     309: ifle          679
     312: iconst_0
     313: istore        4
     315: iload         4
     317: iload_3
     318: if_icmpge     676
     321: aload_0
     322: getfield      #17                 // Field sendfileData:Ljava/util/HashMap;
     325: aload_0
     326: getfield      #14                 // Field desc:[J
     329: iload         4
     331: iconst_2
     332: imul
     333: iconst_1
     334: iadd
     335: laload
     336: invokestatic  #55                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     339: invokevirtual #73                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     342: checkcast     #27                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     345: astore        5
     347: aload_0
     348: getfield      #14                 // Field desc:[J
     351: iload         4
     353: iconst_2
     354: imul
     355: laload
     356: ldc2_w        #74                 // long 32l
     359: land
     360: ldc2_w        #74                 // long 32l
     363: lcmp
     364: ifeq          387
     367: aload_0
     368: getfield      #14                 // Field desc:[J
     371: iload         4
     373: iconst_2
     374: imul
     375: laload
     376: ldc2_w        #76                 // long 16l
     379: land
     380: ldc2_w        #76                 // long 16l
     383: lcmp
     384: ifne          408
     387: aload_0
     388: aload         5
     390: invokevirtual #78                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     393: aload_0
     394: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     397: aload         5
     399: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     402: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     405: goto          670
     408: aload         5
     410: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     413: aload         5
     415: getfield      #37                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fd:J
     418: aload         5
     420: getfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     423: aload         5
     425: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     428: iconst_0
     429: invokestatic  #41                 // Method org/apache/tomcat/jni/Socket.sendfilen:(JJJJI)J
     432: lstore        6
     434: lload         6
     436: lconst_0
     437: lcmp
     438: ifge          462
     441: aload_0
     442: aload         5
     444: invokevirtual #78                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     447: aload_0
     448: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     451: aload         5
     453: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     456: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     459: goto          670
     462: aload         5
     464: dup
     465: getfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     468: lload         6
     470: ladd
     471: putfield      #39                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.pos:J
     474: aload         5
     476: dup
     477: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     480: lload         6
     482: lsub
     483: putfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     486: aload         5
     488: getfield      #40                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.length:J
     491: lconst_0
     492: lcmp
     493: ifne          670
     496: aload_0
     497: aload         5
     499: invokevirtual #78                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     502: getstatic     #79                 // Field org/apache/tomcat/util/net/AprEndpoint$1.$SwitchMap$org$apache$tomcat$util$net$SendfileKeepAliveState:[I
     505: aload         5
     507: getfield      #80                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.keepAliveState:Lorg/apache/tomcat/util/net/SendfileKeepAliveState;
     510: invokevirtual #81                 // Method org/apache/tomcat/util/net/SendfileKeepAliveState.ordinal:()I
     513: iaload
     514: tableswitch   { // 1 to 3
                     1: 540
                     2: 555
                     3: 617
               default: 670
          }
     540: aload_0
     541: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     544: aload         5
     546: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     549: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     552: goto          670
     555: aload         5
     557: getfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     560: invokestatic  #31                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     563: aload         5
     565: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     568: aload_0
     569: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     572: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     575: sipush        1000
     578: imul
     579: i2l
     580: invokestatic  #38                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     583: pop
     584: aload_0
     585: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     588: aload         5
     590: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     593: getstatic     #82                 // Field org/apache/tomcat/util/net/SocketEvent.OPEN_READ:Lorg/apache/tomcat/util/net/SocketEvent;
     596: invokevirtual #83                 // Method org/apache/tomcat/util/net/AprEndpoint.processSocket:(JLorg/apache/tomcat/util/net/SocketEvent;)Z
     599: ifne          670
     602: aload_0
     603: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     606: aload         5
     608: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     611: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     614: goto          670
     617: aload         5
     619: getfield      #34                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.fdpool:J
     622: invokestatic  #31                 // Method org/apache/tomcat/jni/Pool.destroy:(J)V
     625: aload         5
     627: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     630: aload_0
     631: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     634: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     637: sipush        1000
     640: imul
     641: i2l
     642: invokestatic  #38                 // Method org/apache/tomcat/jni/Socket.timeoutSet:(JJ)I
     645: pop
     646: aload_0
     647: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     650: invokevirtual #84                 // Method org/apache/tomcat/util/net/AprEndpoint.getPoller:()Lorg/apache/tomcat/util/net/AprEndpoint$Poller;
     653: aload         5
     655: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     658: aload_0
     659: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     662: invokevirtual #85                 // Method org/apache/tomcat/util/net/AprEndpoint.getKeepAliveTimeout:()I
     665: i2l
     666: iconst_1
     667: invokestatic  #86                 // Method org/apache/tomcat/util/net/AprEndpoint$Poller.access$500:(Lorg/apache/tomcat/util/net/AprEndpoint$Poller;JJI)V
     670: iinc          4, 1
     673: goto          315
     676: goto          785
     679: iload_3
     680: ifge          785
     683: iload_3
     684: ineg
     685: istore        4
     687: iload         4
     689: ldc           #87                 // int 120001
     691: if_icmpeq     785
     694: iload         4
     696: ldc           #88                 // int 120003
     698: if_icmpeq     785
     701: iload         4
     703: ldc           #89                 // int 120000
     705: if_icmple     715
     708: iload         4
     710: ldc           #89                 // int 120000
     712: isub
     713: istore        4
     715: aload_0
     716: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     719: invokevirtual #64                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     722: getstatic     #48                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     725: ldc           #90                 // String endpoint.apr.pollError
     727: iconst_2
     728: anewarray     #66                 // class java/lang/Object
     731: dup
     732: iconst_0
     733: iload         4
     735: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     738: aastore
     739: dup
     740: iconst_1
     741: iload         4
     743: invokestatic  #68                 // Method org/apache/tomcat/jni/Error.strerror:(I)Ljava/lang/String;
     746: aastore
     747: invokevirtual #69                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     750: invokeinterface #91,  2           // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;)V
     755: aload_0
     756: dup
     757: astore        5
     759: monitorenter
     760: aload_0
     761: invokevirtual #92                 // Method destroy:()V
     764: aload_0
     765: invokevirtual #93                 // Method init:()V
     768: aload         5
     770: monitorexit
     771: goto          782
     774: astore        8
     776: aload         5
     778: monitorexit
     779: aload         8
     781: athrow
     782: goto          2
     785: aload_0
     786: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     789: invokevirtual #12                 // Method org/apache/tomcat/util/net/AprEndpoint.getConnectionTimeout:()I
     792: ifle          884
     795: lload_1
     796: ldc2_w        #94                 // long 1000000l
     799: lcmp
     800: ifle          884
     803: aload_0
     804: getfield      #5                  // Field sendfileRunning:Z
     807: ifeq          884
     810: aload_0
     811: getfield      #3                  // Field sendfilePollset:J
     814: aload_0
     815: getfield      #14                 // Field desc:[J
     818: iconst_0
     819: invokestatic  #96                 // Method org/apache/tomcat/jni/Poll.maintain:(J[JZ)I
     822: istore_3
     823: lconst_0
     824: lstore_1
     825: iload_3
     826: ifle          884
     829: iconst_0
     830: istore        4
     832: iload         4
     834: iload_3
     835: if_icmpge     884
     838: aload_0
     839: getfield      #17                 // Field sendfileData:Ljava/util/HashMap;
     842: aload_0
     843: getfield      #14                 // Field desc:[J
     846: iload         4
     848: laload
     849: invokestatic  #55                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     852: invokevirtual #73                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     855: checkcast     #27                 // class org/apache/tomcat/util/net/AprEndpoint$SendfileData
     858: astore        5
     860: aload_0
     861: aload         5
     863: invokevirtual #78                 // Method remove:(Lorg/apache/tomcat/util/net/AprEndpoint$SendfileData;)V
     866: aload_0
     867: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     870: aload         5
     872: getfield      #28                 // Field org/apache/tomcat/util/net/AprEndpoint$SendfileData.socket:J
     875: invokestatic  #29                 // Method org/apache/tomcat/util/net/AprEndpoint.access$000:(Lorg/apache/tomcat/util/net/AprEndpoint;J)V
     878: iinc          4, 1
     881: goto          832
     884: goto          2
     887: astore_3
     888: aload_3
     889: invokestatic  #98                 // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     892: aload_0
     893: getfield      #1                  // Field this$0:Lorg/apache/tomcat/util/net/AprEndpoint;
     896: invokevirtual #64                 // Method org/apache/tomcat/util/net/AprEndpoint.getLog:()Lorg/apache/juli/logging/Log;
     899: getstatic     #48                 // Field org/apache/tomcat/util/net/AbstractEndpoint.sm:Lorg/apache/tomcat/util/res/StringManager;
     902: ldc           #99                 // String endpoint.poll.error
     904: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     907: aload_3
     908: invokeinterface #100,  3          // InterfaceMethod org/apache/juli/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     913: goto          2
     916: aload_0
     917: dup
     918: astore_3
     919: monitorenter
     920: aload_0
     921: invokevirtual #101                // Method java/lang/Object.notifyAll:()V
     924: aload_3
     925: monitorexit
     926: goto          936
     929: astore        9
     931: aload_3
     932: monitorexit
     933: aload         9
     935: athrow
     936: return
    Exception table:
       from    to  target type
          26    32    35   Class java/lang/InterruptedException
          71    77    80   any
          80    84    80   any
          67    87    90   Class java/lang/InterruptedException
         118   266   269   any
         269   273   269   any
         760   771   774   any
         774   779   774   any
         104   782   887   Class java/lang/Throwable
         785   884   887   Class java/lang/Throwable
         920   926   929   any
         929   933   929   any
}

Compiled from "EventProcessingManager.java"
public class org.piangles.gateway.events.EventProcessingManager implements org.piangles.gateway.events.EventDispatcher {
  private static final java.lang.String COMPONENT_ID;

  private org.piangles.backbone.services.logging.LoggingService logger;

  private org.piangles.gateway.client.ClientDetails clientDetails;

  private java.util.Map<org.piangles.backbone.services.msg.Topic, java.util.UUID> topicTraceIdMap;

  private boolean restartEventListener;

  private org.piangles.core.resources.KafkaMessagingSystem kms;

  private org.apache.kafka.clients.consumer.KafkaConsumer<java.lang.String, java.lang.String> consumer;

  private org.piangles.gateway.events.EventListener eventListener;

  public org.piangles.gateway.events.EventProcessingManager(org.piangles.gateway.client.ClientDetails) throws org.piangles.core.resources.ResourceException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method org/piangles/backbone/services/Locator.getInstance:()Lorg/piangles/backbone/services/Locator;
       8: invokevirtual #3                  // Method org/piangles/backbone/services/Locator.getLoggingService:()Lorg/piangles/backbone/services/logging/LoggingService;
      11: putfield      #4                  // Field logger:Lorg/piangles/backbone/services/logging/LoggingService;
      14: aload_0
      15: aconst_null
      16: putfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
      19: aload_0
      20: aconst_null
      21: putfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
      24: aload_0
      25: iconst_1
      26: putfield      #7                  // Field restartEventListener:Z
      29: aload_0
      30: aconst_null
      31: putfield      #8                  // Field kms:Lorg/piangles/core/resources/KafkaMessagingSystem;
      34: aload_0
      35: aconst_null
      36: putfield      #9                  // Field consumer:Lorg/apache/kafka/clients/consumer/KafkaConsumer;
      39: aload_0
      40: aconst_null
      41: putfield      #10                 // Field eventListener:Lorg/piangles/gateway/events/EventListener;
      44: aload_0
      45: aload_1
      46: putfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
      49: aload_0
      50: new           #11                 // class java/util/HashMap
      53: dup
      54: invokespecial #12                 // Method java/util/HashMap."<init>":()V
      57: putfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
      60: aload_0
      61: invokestatic  #13                 // Method org/piangles/core/resources/ResourceManager.getInstance:()Lorg/piangles/core/resources/ResourceManager;
      64: new           #14                 // class org/piangles/backbone/services/config/DefaultConfigProvider
      67: dup
      68: ldc           #16                 // String GatewayService
      70: ldc           #18                 // String 1a465968-c647-4fac-9d25-fbd70fa86fee
      72: invokespecial #19                 // Method org/piangles/backbone/services/config/DefaultConfigProvider."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      75: invokevirtual #20                 // Method org/piangles/core/resources/ResourceManager.getKafkaMessagingSystem:(Lorg/piangles/core/util/abstractions/ConfigProvider;)Lorg/piangles/core/resources/KafkaMessagingSystem;
      78: putfield      #8                  // Field kms:Lorg/piangles/core/resources/KafkaMessagingSystem;
      81: return

  public synchronized void restart();
    Code:
       0: aload_0
       1: invokevirtual #21                 // Method stop:()V
       4: aload_0
       5: invokespecial #22                 // Method start:()V
       8: return

  public synchronized void stop();
    Code:
       0: invokestatic  #23                 // Method org/piangles/gateway/events/KafkaConsumerManager.getInstance:()Lorg/piangles/gateway/events/KafkaConsumerManager;
       3: aload_0
       4: getfield      #9                  // Field consumer:Lorg/apache/kafka/clients/consumer/KafkaConsumer;
       7: invokevirtual #24                 // Method org/piangles/gateway/events/KafkaConsumerManager.closeOrMarkForClose:(Lorg/apache/kafka/clients/consumer/KafkaConsumer;)V
      10: aload_0
      11: getfield      #10                 // Field eventListener:Lorg/piangles/gateway/events/EventListener;
      14: ifnull        24
      17: aload_0
      18: getfield      #10                 // Field eventListener:Lorg/piangles/gateway/events/EventListener;
      21: invokevirtual #25                 // Method org/piangles/gateway/events/EventListener.markForStopping:()V
      24: return

  public synchronized void subscribeToTopics(java.util.Map<org.piangles.backbone.services.msg.Topic, java.util.UUID>);
    Code:
       0: aload_0
       1: getfield      #4                  // Field logger:Lorg/piangles/backbone/services/logging/LoggingService;
       4: new           #26                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #27                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #28                 // String Subscribing to
      13: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_1
      17: invokeinterface #30,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      22: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      25: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      28: invokeinterface #33,  2           // InterfaceMethod org/piangles/backbone/services/logging/LoggingService.info:(Ljava/lang/Object;)V
      33: aload_0
      34: getfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
      37: aload_1
      38: invokeinterface #34,  2           // InterfaceMethod java/util/Map.putAll:(Ljava/util/Map;)V
      43: aload_0
      44: iconst_1
      45: putfield      #7                  // Field restartEventListener:Z
      48: return

  public synchronized void unsubscribeTopics(java.util.List<org.piangles.backbone.services.msg.Topic>);
    Code:
       0: aload_0
       1: getfield      #4                  // Field logger:Lorg/piangles/backbone/services/logging/LoggingService;
       4: new           #26                 // class java/lang/StringBuilder
       7: dup
       8: invokespecial #27                 // Method java/lang/StringBuilder."<init>":()V
      11: ldc           #35                 // String Unsubscribing to
      13: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: aload_1
      17: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      20: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      23: invokeinterface #33,  2           // InterfaceMethod org/piangles/backbone/services/logging/LoggingService.info:(Ljava/lang/Object;)V
      28: aload_1
      29: invokeinterface #36,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
      34: aload_0
      35: aload_1
      36: invokedynamic #37,  0             // InvokeDynamic #0:accept:(Lorg/piangles/gateway/events/EventProcessingManager;Ljava/util/List;)Ljava/util/function/Consumer;
      41: invokeinterface #38,  2           // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
      46: aload_0
      47: iconst_1
      48: putfield      #7                  // Field restartEventListener:Z
      51: return

  public synchronized void dispatchAllEvents(java.util.Map<org.piangles.backbone.services.msg.Event, org.piangles.backbone.services.msg.Topic>) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #39,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
       6: invokeinterface #40,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      11: astore_2
      12: aload_2
      13: invokeinterface #41,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      18: ifeq          132
      21: aload_2
      22: invokeinterface #42,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      27: checkcast     #43                 // class java/util/Map$Entry
      30: astore_3
      31: aload_3
      32: invokeinterface #44,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      37: checkcast     #45                 // class org/piangles/backbone/services/msg/Event
      40: astore        4
      42: invokestatic  #46                 // Method org/piangles/gateway/events/EventRouter.getInstance:()Lorg/piangles/gateway/events/EventRouter;
      45: aload         4
      47: invokevirtual #47                 // Method org/piangles/gateway/events/EventRouter.getProcessor:(Lorg/piangles/backbone/services/msg/Event;)Lorg/piangles/gateway/events/EventProcessor;
      50: astore        5
      52: aload         5
      54: ifnull        93
      57: aload         4
      59: aload_0
      60: getfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
      63: aload_3
      64: invokeinterface #48,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      69: invokeinterface #49,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      74: checkcast     #50                 // class java/util/UUID
      77: invokevirtual #51                 // Method org/piangles/backbone/services/msg/Event.setTraceId:(Ljava/util/UUID;)V
      80: aload         5
      82: aload_0
      83: getfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
      86: aload         4
      88: invokeinterface #52,  3           // InterfaceMethod org/piangles/gateway/events/EventProcessor.process:(Lorg/piangles/gateway/client/ClientDetails;Lorg/piangles/backbone/services/msg/Event;)V
      93: goto          129
      96: astore        5
      98: aload_0
      99: getfield      #4                  // Field logger:Lorg/piangles/backbone/services/logging/LoggingService;
     102: new           #26                 // class java/lang/StringBuilder
     105: dup
     106: invokespecial #27                 // Method java/lang/StringBuilder."<init>":()V
     109: ldc           #54                 // String Unexpected Eror while processing Event :
     111: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     114: aload         4
     116: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     119: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     122: aload         5
     124: invokeinterface #55,  3           // InterfaceMethod org/piangles/backbone/services/logging/LoggingService.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     129: goto          12
     132: aload_0
     133: getfield      #7                  // Field restartEventListener:Z
     136: ifeq          143
     139: aload_0
     140: invokevirtual #56                 // Method restart:()V
     143: return
    Exception table:
       from    to  target type
          42    93    96   Class java/lang/Exception

  private void start();
    Code:
       0: aload_0
       1: iconst_0
       2: putfield      #7                  // Field restartEventListener:Z
       5: aload_0
       6: getfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
       9: invokeinterface #57,  1           // InterfaceMethod java/util/Map.size:()I
      14: ifeq          138
      17: new           #58                 // class org/piangles/core/resources/ConsumerProperties
      20: dup
      21: aload_0
      22: getfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
      25: invokevirtual #59                 // Method org/piangles/gateway/client/ClientDetails.getSessionDetails:()Lorg/piangles/core/services/remoting/SessionDetails;
      28: invokevirtual #60                 // Method org/piangles/core/services/remoting/SessionDetails.getUserId:()Ljava/lang/String;
      31: invokespecial #61                 // Method org/piangles/core/resources/ConsumerProperties."<init>":(Ljava/lang/String;)V
      34: astore_1
      35: aload_0
      36: getfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
      39: invokeinterface #30,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      44: invokeinterface #62,  1           // InterfaceMethod java/util/Set.stream:()Ljava/util/stream/Stream;
      49: aload_1
      50: invokedynamic #63,  0             // InvokeDynamic #1:apply:(Lorg/piangles/core/resources/ConsumerProperties;)Ljava/util/function/Function;
      55: invokeinterface #64,  2           // InterfaceMethod java/util/stream/Stream.map:(Ljava/util/function/Function;)Ljava/util/stream/Stream;
      60: invokestatic  #65                 // Method java/util/stream/Collectors.toList:()Ljava/util/stream/Collector;
      63: invokeinterface #66,  2           // InterfaceMethod java/util/stream/Stream.collect:(Ljava/util/stream/Collector;)Ljava/lang/Object;
      68: checkcast     #67                 // class java/util/List
      71: astore_2
      72: aload_1
      73: aload_2
      74: invokevirtual #68                 // Method org/piangles/core/resources/ConsumerProperties.setTopics:(Ljava/util/List;)V
      77: aload_0
      78: aload_0
      79: getfield      #8                  // Field kms:Lorg/piangles/core/resources/KafkaMessagingSystem;
      82: aload_1
      83: invokevirtual #69                 // Method org/piangles/core/resources/KafkaMessagingSystem.createConsumer:(Lorg/piangles/core/resources/ConsumerProperties;)Lorg/apache/kafka/clients/consumer/KafkaConsumer;
      86: putfield      #9                  // Field consumer:Lorg/apache/kafka/clients/consumer/KafkaConsumer;
      89: invokestatic  #23                 // Method org/piangles/gateway/events/KafkaConsumerManager.getInstance:()Lorg/piangles/gateway/events/KafkaConsumerManager;
      92: aload_0
      93: getfield      #9                  // Field consumer:Lorg/apache/kafka/clients/consumer/KafkaConsumer;
      96: invokevirtual #70                 // Method org/piangles/gateway/events/KafkaConsumerManager.addNewConsumer:(Lorg/apache/kafka/clients/consumer/KafkaConsumer;)V
      99: aload_0
     100: new           #71                 // class org/piangles/gateway/events/EventListener
     103: dup
     104: aload_0
     105: getfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
     108: aload_0
     109: getfield      #9                  // Field consumer:Lorg/apache/kafka/clients/consumer/KafkaConsumer;
     112: aload_0
     113: invokespecial #72                 // Method org/piangles/gateway/events/EventListener."<init>":(Lorg/piangles/gateway/client/ClientDetails;Lorg/apache/kafka/clients/consumer/KafkaConsumer;Lorg/piangles/gateway/events/EventDispatcher;)V
     116: putfield      #10                 // Field eventListener:Lorg/piangles/gateway/events/EventListener;
     119: new           #73                 // class java/lang/Thread
     122: dup
     123: aload_0
     124: getfield      #10                 // Field eventListener:Lorg/piangles/gateway/events/EventListener;
     127: invokespecial #74                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;)V
     130: astore_3
     131: aload_3
     132: invokevirtual #75                 // Method java/lang/Thread.start:()V
     135: goto          169
     138: aload_0
     139: getfield      #4                  // Field logger:Lorg/piangles/backbone/services/logging/LoggingService;
     142: new           #26                 // class java/lang/StringBuilder
     145: dup
     146: invokespecial #27                 // Method java/lang/StringBuilder."<init>":()V
     149: ldc           #76                 // String No topics to listen for:
     151: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     154: aload_0
     155: getfield      #5                  // Field clientDetails:Lorg/piangles/gateway/client/ClientDetails;
     158: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     161: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     164: invokeinterface #33,  2           // InterfaceMethod org/piangles/backbone/services/logging/LoggingService.info:(Ljava/lang/Object;)V
     169: return

  private static org.piangles.core.resources.ConsumerProperties$Topic lambda$start$1(org.piangles.core.resources.ConsumerProperties, org.piangles.backbone.services.msg.Topic);
    Code:
       0: new           #77                 // class org/piangles/core/resources/ConsumerProperties$Topic
       3: dup
       4: aload_0
       5: dup
       6: invokevirtual #78                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       9: pop
      10: aload_1
      11: invokevirtual #79                 // Method org/piangles/backbone/services/msg/Topic.getTopicName:()Ljava/lang/String;
      14: aload_1
      15: invokevirtual #80                 // Method org/piangles/backbone/services/msg/Topic.getPartition:()I
      18: aload_1
      19: invokevirtual #81                 // Method org/piangles/backbone/services/msg/Topic.shouldReadEarliest:()Z
      22: invokespecial #82                 // Method org/piangles/core/resources/ConsumerProperties$Topic."<init>":(Lorg/piangles/core/resources/ConsumerProperties;Ljava/lang/String;IZ)V
      25: areturn

  private void lambda$unsubscribeTopics$0(java.util.List, org.piangles.backbone.services.msg.Topic);
    Code:
       0: aload_0
       1: getfield      #6                  // Field topicTraceIdMap:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #83,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #50                 // class java/util/UUID
      13: pop
      14: return
}

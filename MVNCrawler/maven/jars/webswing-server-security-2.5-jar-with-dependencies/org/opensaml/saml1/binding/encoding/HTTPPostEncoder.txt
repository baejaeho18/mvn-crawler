Compiled from "HTTPPostEncoder.java"
public class org.opensaml.saml1.binding.encoding.HTTPPostEncoder extends org.opensaml.saml1.binding.encoding.BaseSAML1MessageEncoder {
  private final org.slf4j.Logger log;

  private org.apache.velocity.app.VelocityEngine velocityEngine;

  private java.lang.String velocityTemplateId;

  public org.opensaml.saml1.binding.encoding.HTTPPostEncoder(org.apache.velocity.app.VelocityEngine, java.lang.String);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/opensaml/saml1/binding/encoding/BaseSAML1MessageEncoder."<init>":()V
       4: aload_0
       5: ldc_w         #2                  // class org/opensaml/saml1/binding/encoding/HTTPPostEncoder
       8: invokestatic  #3                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #4                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: aload_1
      16: putfield      #5                  // Field velocityEngine:Lorg/apache/velocity/app/VelocityEngine;
      19: aload_0
      20: aload_2
      21: putfield      #6                  // Field velocityTemplateId:Ljava/lang/String;
      24: return

  public java.lang.String getBindingURI();
    Code:
       0: ldc           #7                  // String urn:oasis:names:tc:SAML:1.0:profiles:browser-post
       2: areturn

  public boolean providesMessageConfidentiality(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: iconst_0
       1: ireturn

  public boolean providesMessageIntegrity(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: iconst_0
       1: ireturn

  protected void doEncode(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_1
       1: instanceof    #8                  // class org/opensaml/common/binding/SAMLMessageContext
       4: ifne          28
       7: aload_0
       8: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      11: ldc           #9                  // String Invalid message context type, this encoder only support SAMLMessageContext
      13: invokeinterface #10,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      18: new           #11                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      21: dup
      22: ldc           #9                  // String Invalid message context type, this encoder only support SAMLMessageContext
      24: invokespecial #12                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      27: athrow
      28: aload_1
      29: invokeinterface #13,  1           // InterfaceMethod org/opensaml/ws/message/MessageContext.getOutboundMessageTransport:()Lorg/opensaml/ws/transport/OutTransport;
      34: instanceof    #14                 // class org/opensaml/ws/transport/http/HTTPOutTransport
      37: ifne          61
      40: aload_0
      41: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      44: ldc           #15                 // String Invalid outbound message transport type, this encoder only support HTTPOutTransport
      46: invokeinterface #10,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      51: new           #11                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      54: dup
      55: ldc           #15                 // String Invalid outbound message transport type, this encoder only support HTTPOutTransport
      57: invokespecial #12                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      60: athrow
      61: aload_1
      62: checkcast     #8                  // class org/opensaml/common/binding/SAMLMessageContext
      65: astore_2
      66: aload_2
      67: invokeinterface #16,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundSAMLMessage:()Lorg/opensaml/common/SAMLObject;
      72: astore_3
      73: aload_3
      74: ifnonnull     87
      77: new           #11                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      80: dup
      81: ldc           #17                 // String No outbound SAML message contained in message context
      83: invokespecial #12                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      86: athrow
      87: aload_0
      88: aload_2
      89: invokevirtual #18                 // Method getEndpointURL:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/util/URLBuilder;
      92: invokevirtual #19                 // Method org/opensaml/util/URLBuilder.buildURL:()Ljava/lang/String;
      95: astore        4
      97: aload_2
      98: invokeinterface #16,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundSAMLMessage:()Lorg/opensaml/common/SAMLObject;
     103: instanceof    #20                 // class org/opensaml/saml1/core/ResponseAbstractType
     106: ifeq          125
     109: aload_2
     110: invokeinterface #16,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundSAMLMessage:()Lorg/opensaml/common/SAMLObject;
     115: checkcast     #20                 // class org/opensaml/saml1/core/ResponseAbstractType
     118: aload         4
     120: invokeinterface #21,  2           // InterfaceMethod org/opensaml/saml1/core/ResponseAbstractType.setRecipient:(Ljava/lang/String;)V
     125: aload_0
     126: aload_2
     127: invokevirtual #22                 // Method signMessage:(Lorg/opensaml/common/binding/SAMLMessageContext;)V
     130: aload_2
     131: aload_3
     132: invokeinterface #23,  2           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.setOutboundMessage:(Lorg/opensaml/xml/XMLObject;)V
     137: aload_0
     138: aload_2
     139: aload         4
     141: invokevirtual #24                 // Method postEncode:(Lorg/opensaml/common/binding/SAMLMessageContext;Ljava/lang/String;)V
     144: return

  protected void postEncode(org.opensaml.common.binding.SAMLMessageContext, java.lang.String) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #25                 // String Invoking velocity template to create POST body
       6: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: new           #27                 // class org/apache/velocity/VelocityContext
      14: dup
      15: invokespecial #28                 // Method org/apache/velocity/VelocityContext."<init>":()V
      18: astore_3
      19: invokestatic  #29                 // Method org/owasp/esapi/ESAPI.encoder:()Lorg/owasp/esapi/Encoder;
      22: astore        4
      24: aload         4
      26: aload_2
      27: invokeinterface #30,  2           // InterfaceMethod org/owasp/esapi/Encoder.encodeForHTMLAttribute:(Ljava/lang/String;)Ljava/lang/String;
      32: astore        5
      34: aload_0
      35: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      38: ldc           #31                 // String Encoding action url of \'{}\' with encoded value \'{}\'
      40: aload_2
      41: aload         5
      43: invokeinterface #32,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      48: aload_3
      49: ldc           #33                 // String action
      51: aload         5
      53: invokevirtual #34                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
      56: pop
      57: aload_3
      58: ldc           #35                 // String binding
      60: aload_0
      61: invokevirtual #36                 // Method getBindingURI:()Ljava/lang/String;
      64: invokevirtual #34                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
      67: pop
      68: aload_0
      69: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      72: ldc           #37                 // String Marshalling and Base64 encoding SAML message
      74: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      79: aload_0
      80: aload_1
      81: invokeinterface #16,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundSAMLMessage:()Lorg/opensaml/common/SAMLObject;
      86: invokevirtual #38                 // Method marshallMessage:(Lorg/opensaml/xml/XMLObject;)Lorg/w3c/dom/Element;
      89: invokestatic  #39                 // Method org/opensaml/xml/util/XMLHelper.nodeToString:(Lorg/w3c/dom/Node;)Ljava/lang/String;
      92: astore        6
      94: aload         6
      96: ldc           #40                 // String UTF-8
      98: invokevirtual #41                 // Method java/lang/String.getBytes:(Ljava/lang/String;)[B
     101: bipush        8
     103: invokestatic  #42                 // Method org/opensaml/xml/util/Base64.encodeBytes:([BI)Ljava/lang/String;
     106: astore        7
     108: aload_3
     109: ldc           #43                 // String SAMLResponse
     111: aload         7
     113: invokevirtual #34                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
     116: pop
     117: aload_1
     118: invokeinterface #44,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     123: ifnull        169
     126: aload         4
     128: aload_1
     129: invokeinterface #44,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     134: invokeinterface #30,  2           // InterfaceMethod org/owasp/esapi/Encoder.encodeForHTMLAttribute:(Ljava/lang/String;)Ljava/lang/String;
     139: astore        8
     141: aload_0
     142: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     145: ldc           #45                 // String Setting TARGET parameter to: \'{}\', encoded as \'{}\'
     147: aload_1
     148: invokeinterface #44,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     153: aload         8
     155: invokeinterface #32,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     160: aload_3
     161: ldc           #46                 // String TARGET
     163: aload         8
     165: invokevirtual #34                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
     168: pop
     169: aload_1
     170: invokeinterface #47,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundMessageTransport:()Lorg/opensaml/ws/transport/OutTransport;
     175: checkcast     #14                 // class org/opensaml/ws/transport/http/HTTPOutTransport
     178: astore        8
     180: aload         8
     182: invokestatic  #48                 // Method org/opensaml/ws/transport/http/HTTPTransportUtils.addNoCacheHeaders:(Lorg/opensaml/ws/transport/http/HTTPOutTransport;)V
     185: aload         8
     187: invokestatic  #49                 // Method org/opensaml/ws/transport/http/HTTPTransportUtils.setUTF8Encoding:(Lorg/opensaml/ws/transport/http/HTTPOutTransport;)V
     190: aload         8
     192: ldc           #50                 // String text/html
     194: invokestatic  #51                 // Method org/opensaml/ws/transport/http/HTTPTransportUtils.setContentType:(Lorg/opensaml/ws/transport/http/HTTPOutTransport;Ljava/lang/String;)V
     197: aload         8
     199: invokeinterface #52,  1           // InterfaceMethod org/opensaml/ws/transport/http/HTTPOutTransport.getOutgoingStream:()Ljava/io/OutputStream;
     204: astore        9
     206: new           #53                 // class java/io/OutputStreamWriter
     209: dup
     210: aload         9
     212: ldc           #40                 // String UTF-8
     214: invokespecial #54                 // Method java/io/OutputStreamWriter."<init>":(Ljava/io/OutputStream;Ljava/lang/String;)V
     217: astore        10
     219: aload_0
     220: getfield      #5                  // Field velocityEngine:Lorg/apache/velocity/app/VelocityEngine;
     223: aload_0
     224: getfield      #6                  // Field velocityTemplateId:Ljava/lang/String;
     227: ldc           #40                 // String UTF-8
     229: aload_3
     230: aload         10
     232: invokevirtual #55                 // Method org/apache/velocity/app/VelocityEngine.mergeTemplate:(Ljava/lang/String;Ljava/lang/String;Lorg/apache/velocity/context/Context;Ljava/io/Writer;)Z
     235: pop
     236: aload         10
     238: invokevirtual #56                 // Method java/io/Writer.flush:()V
     241: goto          290
     244: astore_3
     245: aload_0
     246: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     249: ldc           #58                 // String UTF-8 encoding is not supported, this VM is not Java compliant.
     251: invokeinterface #10,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     256: new           #11                 // class org/opensaml/ws/message/encoder/MessageEncodingException
     259: dup
     260: ldc           #59                 // String Unable to encode message, UTF-8 encoding is not supported
     262: invokespecial #12                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
     265: athrow
     266: astore_3
     267: aload_0
     268: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     271: ldc           #61                 // String Error invoking velocity template
     273: aload_3
     274: invokeinterface #62,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     279: new           #11                 // class org/opensaml/ws/message/encoder/MessageEncodingException
     282: dup
     283: ldc           #63                 // String Error creating output document
     285: aload_3
     286: invokespecial #64                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     289: athrow
     290: return
    Exception table:
       from    to  target type
          11   241   244   Class java/io/UnsupportedEncodingException
          11   241   266   Class java/lang/Exception
}

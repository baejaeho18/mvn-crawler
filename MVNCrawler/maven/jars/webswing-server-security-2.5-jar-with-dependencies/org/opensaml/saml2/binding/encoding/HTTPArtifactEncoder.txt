Compiled from "HTTPArtifactEncoder.java"
public class org.opensaml.saml2.binding.encoding.HTTPArtifactEncoder extends org.opensaml.saml2.binding.encoding.BaseSAML2MessageEncoder {
  private final org.slf4j.Logger log;

  private boolean postEncoding;

  private org.apache.velocity.app.VelocityEngine velocityEngine;

  private java.lang.String velocityTemplateId;

  private org.opensaml.common.binding.artifact.SAMLArtifactMap artifactMap;

  private byte[] defaultArtifactType;

  public org.opensaml.saml2.binding.encoding.HTTPArtifactEncoder(org.apache.velocity.app.VelocityEngine, java.lang.String, org.opensaml.common.binding.artifact.SAMLArtifactMap);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/opensaml/saml2/binding/encoding/BaseSAML2MessageEncoder."<init>":()V
       4: aload_0
       5: ldc_w         #2                  // class org/opensaml/saml2/binding/encoding/HTTPArtifactEncoder
       8: invokestatic  #3                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #4                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: iconst_0
      16: putfield      #5                  // Field postEncoding:Z
      19: aload_0
      20: aload_1
      21: putfield      #6                  // Field velocityEngine:Lorg/apache/velocity/app/VelocityEngine;
      24: aload_0
      25: aload_2
      26: putfield      #7                  // Field velocityTemplateId:Ljava/lang/String;
      29: aload_0
      30: aload_3
      31: putfield      #8                  // Field artifactMap:Lorg/opensaml/common/binding/artifact/SAMLArtifactMap;
      34: aload_0
      35: getstatic     #9                  // Field org/opensaml/saml2/binding/artifact/SAML2ArtifactType0004.TYPE_CODE:[B
      38: putfield      #10                 // Field defaultArtifactType:[B
      41: return

  public java.lang.String getBindingURI();
    Code:
       0: ldc           #11                 // String urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact
       2: areturn

  public boolean isPostEncoding();
    Code:
       0: aload_0
       1: getfield      #5                  // Field postEncoding:Z
       4: ireturn

  public void setPostEncoding(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #5                  // Field postEncoding:Z
       5: return

  public boolean providesMessageConfidentiality(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: iconst_0
       1: ireturn

  public boolean providesMessageIntegrity(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: iconst_0
       1: ireturn

  protected void doEncode(org.opensaml.ws.message.MessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_1
       1: instanceof    #12                 // class org/opensaml/common/binding/SAMLMessageContext
       4: ifne          28
       7: aload_0
       8: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      11: ldc           #13                 // String Invalid message context type, this encoder only support SAMLMessageContext
      13: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      18: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      21: dup
      22: ldc           #13                 // String Invalid message context type, this encoder only support SAMLMessageContext
      24: invokespecial #16                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      27: athrow
      28: aload_1
      29: invokeinterface #17,  1           // InterfaceMethod org/opensaml/ws/message/MessageContext.getOutboundMessageTransport:()Lorg/opensaml/ws/transport/OutTransport;
      34: instanceof    #18                 // class org/opensaml/ws/transport/http/HTTPOutTransport
      37: ifne          61
      40: aload_0
      41: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      44: ldc           #19                 // String Invalid outbound message transport type, this encoder only support HTTPOutTransport
      46: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      51: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      54: dup
      55: ldc           #19                 // String Invalid outbound message transport type, this encoder only support HTTPOutTransport
      57: invokespecial #16                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      60: athrow
      61: aload_1
      62: checkcast     #12                 // class org/opensaml/common/binding/SAMLMessageContext
      65: astore_2
      66: aload_2
      67: invokeinterface #20,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundMessageTransport:()Lorg/opensaml/ws/transport/OutTransport;
      72: checkcast     #18                 // class org/opensaml/ws/transport/http/HTTPOutTransport
      75: astore_3
      76: aload_3
      77: ldc           #21                 // String UTF-8
      79: invokeinterface #22,  2           // InterfaceMethod org/opensaml/ws/transport/http/HTTPOutTransport.setCharacterEncoding:(Ljava/lang/String;)V
      84: aload_0
      85: getfield      #5                  // Field postEncoding:Z
      88: ifeq          100
      91: aload_0
      92: aload_2
      93: aload_3
      94: invokevirtual #23                 // Method postEncode:(Lorg/opensaml/common/binding/SAMLMessageContext;Lorg/opensaml/ws/transport/http/HTTPOutTransport;)V
      97: goto          106
     100: aload_0
     101: aload_2
     102: aload_3
     103: invokevirtual #24                 // Method getEncode:(Lorg/opensaml/common/binding/SAMLMessageContext;Lorg/opensaml/ws/transport/http/HTTPOutTransport;)V
     106: return

  protected void postEncode(org.opensaml.common.binding.SAMLMessageContext, org.opensaml.ws.transport.http.HTTPOutTransport) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #25                 // String Performing HTTP POST SAML 2 artifact encoding
       6: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: aload_0
      12: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      15: ldc           #27                 // String Creating velocity context
      17: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      22: new           #28                 // class org/apache/velocity/VelocityContext
      25: dup
      26: invokespecial #29                 // Method org/apache/velocity/VelocityContext."<init>":()V
      29: astore_3
      30: invokestatic  #30                 // Method org/owasp/esapi/ESAPI.encoder:()Lorg/owasp/esapi/Encoder;
      33: astore        4
      35: aload_0
      36: aload_1
      37: invokevirtual #31                 // Method getEndpointURL:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/util/URLBuilder;
      40: invokevirtual #32                 // Method java/lang/Object.toString:()Ljava/lang/String;
      43: astore        5
      45: aload         4
      47: aload         5
      49: invokeinterface #33,  2           // InterfaceMethod org/owasp/esapi/Encoder.encodeForHTMLAttribute:(Ljava/lang/String;)Ljava/lang/String;
      54: astore        6
      56: aload_0
      57: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      60: ldc           #34                 // String Setting action parameter to: \'{}\', encoded as \'{}\'
      62: aload         5
      64: aload         6
      66: invokeinterface #35,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      71: aload_3
      72: ldc           #36                 // String action
      74: aload         6
      76: invokevirtual #37                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
      79: pop
      80: aload_3
      81: ldc           #38                 // String SAMLArt
      83: aload_0
      84: aload_1
      85: invokevirtual #39                 // Method buildArtifact:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/saml2/binding/artifact/AbstractSAML2Artifact;
      88: invokevirtual #40                 // Method org/opensaml/saml2/binding/artifact/AbstractSAML2Artifact.base64Encode:()Ljava/lang/String;
      91: invokevirtual #37                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
      94: pop
      95: aload_3
      96: ldc           #41                 // String binding
      98: aload_0
      99: invokevirtual #42                 // Method getBindingURI:()Ljava/lang/String;
     102: invokevirtual #37                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
     105: pop
     106: aload_0
     107: aload_1
     108: invokeinterface #43,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     113: invokevirtual #44                 // Method checkRelayState:(Ljava/lang/String;)Z
     116: ifeq          162
     119: aload         4
     121: aload_1
     122: invokeinterface #43,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     127: invokeinterface #33,  2           // InterfaceMethod org/owasp/esapi/Encoder.encodeForHTMLAttribute:(Ljava/lang/String;)Ljava/lang/String;
     132: astore        7
     134: aload_0
     135: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     138: ldc           #45                 // String Setting RelayState parameter to: \'{}\', encoded as \'{}\'
     140: aload_1
     141: invokeinterface #43,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     146: aload         7
     148: invokeinterface #35,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     153: aload_3
     154: ldc           #46                 // String RelayState
     156: aload         7
     158: invokevirtual #37                 // Method org/apache/velocity/VelocityContext.put:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
     161: pop
     162: aload_0
     163: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     166: ldc           #47                 // String Invoking velocity template
     168: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     173: new           #48                 // class java/io/OutputStreamWriter
     176: dup
     177: aload_2
     178: invokeinterface #49,  1           // InterfaceMethod org/opensaml/ws/transport/http/HTTPOutTransport.getOutgoingStream:()Ljava/io/OutputStream;
     183: invokespecial #50                 // Method java/io/OutputStreamWriter."<init>":(Ljava/io/OutputStream;)V
     186: astore        7
     188: aload_0
     189: getfield      #6                  // Field velocityEngine:Lorg/apache/velocity/app/VelocityEngine;
     192: aload_0
     193: getfield      #7                  // Field velocityTemplateId:Ljava/lang/String;
     196: ldc           #21                 // String UTF-8
     198: aload_3
     199: aload         7
     201: invokevirtual #51                 // Method org/apache/velocity/app/VelocityEngine.mergeTemplate:(Ljava/lang/String;Ljava/lang/String;Lorg/apache/velocity/context/Context;Ljava/io/Writer;)Z
     204: pop
     205: goto          235
     208: astore        7
     210: aload_0
     211: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     214: ldc           #53                 // String Error invoking velocity template to create POST form
     216: aload         7
     218: invokeinterface #54,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     223: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
     226: dup
     227: ldc           #55                 // String Error creating output document
     229: aload         7
     231: invokespecial #56                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     234: athrow
     235: return
    Exception table:
       from    to  target type
         162   205   208   Class java/lang/Exception

  protected void getEncode(org.opensaml.common.binding.SAMLMessageContext, org.opensaml.ws.transport.http.HTTPOutTransport) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #57                 // String Performing HTTP GET SAML 2 artifact encoding
       6: invokeinterface #26,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: aload_0
      12: aload_1
      13: invokevirtual #31                 // Method getEndpointURL:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/util/URLBuilder;
      16: astore_3
      17: aload_3
      18: invokevirtual #58                 // Method org/opensaml/util/URLBuilder.getQueryParams:()Ljava/util/List;
      21: astore        4
      23: aload_0
      24: aload_1
      25: invokevirtual #39                 // Method buildArtifact:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/saml2/binding/artifact/AbstractSAML2Artifact;
      28: astore        5
      30: aload         5
      32: ifnonnull     56
      35: aload_0
      36: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      39: ldc           #59                 // String Unable to build artifact for message to relying party
      41: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      46: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      49: dup
      50: ldc           #60                 // String Unable to builder artifact for message to relying party
      52: invokespecial #16                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      55: athrow
      56: aload         4
      58: new           #61                 // class org/opensaml/xml/util/Pair
      61: dup
      62: ldc           #62                 // String SAMLart
      64: aload         5
      66: invokevirtual #63                 // Method org/opensaml/common/binding/artifact/AbstractSAMLArtifact.base64Encode:()Ljava/lang/String;
      69: invokespecial #64                 // Method org/opensaml/xml/util/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
      72: invokeinterface #65,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      77: pop
      78: aload_0
      79: aload_1
      80: invokeinterface #43,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
      85: invokevirtual #44                 // Method checkRelayState:(Ljava/lang/String;)Z
      88: ifeq          114
      91: aload         4
      93: new           #61                 // class org/opensaml/xml/util/Pair
      96: dup
      97: ldc           #46                 // String RelayState
      99: aload_1
     100: invokeinterface #43,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getRelayState:()Ljava/lang/String;
     105: invokespecial #64                 // Method org/opensaml/xml/util/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     108: invokeinterface #65,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     113: pop
     114: aload_2
     115: aload_3
     116: invokevirtual #66                 // Method org/opensaml/util/URLBuilder.buildURL:()Ljava/lang/String;
     119: invokeinterface #67,  2           // InterfaceMethod org/opensaml/ws/transport/http/HTTPOutTransport.sendRedirect:(Ljava/lang/String;)V
     124: return

  protected org.opensaml.saml2.binding.artifact.AbstractSAML2Artifact buildArtifact(org.opensaml.common.binding.SAMLMessageContext) throws org.opensaml.ws.message.encoder.MessageEncodingException;
    Code:
       0: aload_1
       1: invokeinterface #68,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundMessageArtifactType:()[B
       6: ifnull        25
       9: invokestatic  #69                 // Method org/opensaml/Configuration.getSAML2ArtifactBuilderFactory:()Lorg/opensaml/saml2/binding/artifact/SAML2ArtifactBuilderFactory;
      12: aload_1
      13: invokeinterface #68,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundMessageArtifactType:()[B
      18: invokevirtual #70                 // Method org/opensaml/saml2/binding/artifact/SAML2ArtifactBuilderFactory.getArtifactBuilder:([B)Lorg/opensaml/saml2/binding/artifact/SAML2ArtifactBuilder;
      21: astore_2
      22: goto          46
      25: invokestatic  #69                 // Method org/opensaml/Configuration.getSAML2ArtifactBuilderFactory:()Lorg/opensaml/saml2/binding/artifact/SAML2ArtifactBuilderFactory;
      28: aload_0
      29: getfield      #10                 // Field defaultArtifactType:[B
      32: invokevirtual #70                 // Method org/opensaml/saml2/binding/artifact/SAML2ArtifactBuilderFactory.getArtifactBuilder:([B)Lorg/opensaml/saml2/binding/artifact/SAML2ArtifactBuilder;
      35: astore_2
      36: aload_1
      37: aload_0
      38: getfield      #10                 // Field defaultArtifactType:[B
      41: invokeinterface #71,  2           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.setOutboundMessageArtifactType:([B)V
      46: aload_2
      47: aload_1
      48: invokeinterface #72,  2           // InterfaceMethod org/opensaml/saml2/binding/artifact/SAML2ArtifactBuilder.buildArtifact:(Lorg/opensaml/common/binding/SAMLMessageContext;)Lorg/opensaml/saml2/binding/artifact/AbstractSAML2Artifact;
      53: astore_3
      54: aload_3
      55: ifnonnull     79
      58: aload_0
      59: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      62: ldc           #59                 // String Unable to build artifact for message to relying party
      64: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      69: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
      72: dup
      73: ldc           #60                 // String Unable to builder artifact for message to relying party
      75: invokespecial #16                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      78: athrow
      79: aload_3
      80: invokevirtual #40                 // Method org/opensaml/saml2/binding/artifact/AbstractSAML2Artifact.base64Encode:()Ljava/lang/String;
      83: astore        4
      85: aload_0
      86: getfield      #8                  // Field artifactMap:Lorg/opensaml/common/binding/artifact/SAMLArtifactMap;
      89: aload         4
      91: aload_1
      92: invokeinterface #73,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getInboundMessageIssuer:()Ljava/lang/String;
      97: aload_1
      98: invokeinterface #74,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundMessageIssuer:()Ljava/lang/String;
     103: aload_1
     104: invokeinterface #75,  1           // InterfaceMethod org/opensaml/common/binding/SAMLMessageContext.getOutboundSAMLMessage:()Lorg/opensaml/common/SAMLObject;
     109: invokeinterface #76,  5           // InterfaceMethod org/opensaml/common/binding/artifact/SAMLArtifactMap.put:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Lorg/opensaml/common/SAMLObject;)V
     114: goto          144
     117: astore        5
     119: aload_0
     120: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     123: ldc           #78                 // String Unable to marshall assertion to be represented as an artifact
     125: aload         5
     127: invokeinterface #54,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     132: new           #15                 // class org/opensaml/ws/message/encoder/MessageEncodingException
     135: dup
     136: ldc           #78                 // String Unable to marshall assertion to be represented as an artifact
     138: aload         5
     140: invokespecial #56                 // Method org/opensaml/ws/message/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     143: athrow
     144: aload_3
     145: areturn
    Exception table:
       from    to  target type
          85   114   117   Class org/opensaml/xml/io/MarshallingException
}

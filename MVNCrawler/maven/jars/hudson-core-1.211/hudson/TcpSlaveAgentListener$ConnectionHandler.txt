Compiled from "TcpSlaveAgentListener.java"
final class hudson.TcpSlaveAgentListener$ConnectionHandler extends java.lang.Thread {
  private final java.net.Socket s;

  private final int id;

  final hudson.TcpSlaveAgentListener this$0;

  public hudson.TcpSlaveAgentListener$ConnectionHandler(hudson.TcpSlaveAgentListener, java.net.Socket);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field this$0:Lhudson/TcpSlaveAgentListener;
       5: aload_0
       6: invokespecial #4                  // Method java/lang/Thread."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #1                  // Field s:Ljava/net/Socket;
      14: aload_0
      15: invokevirtual #5                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      18: dup
      19: astore_3
      20: monitorenter
      21: aload_0
      22: invokestatic  #6                  // Method hudson/TcpSlaveAgentListener.access$008:()I
      25: putfield      #2                  // Field id:I
      28: aload_3
      29: monitorexit
      30: goto          40
      33: astore        4
      35: aload_3
      36: monitorexit
      37: aload         4
      39: athrow
      40: return
    Exception table:
       from    to  target type
          21    30    33   any
          33    37    33   any

  public void run();
    Code:
       0: invokestatic  #7                  // Method hudson/TcpSlaveAgentListener.access$100:()Ljava/util/logging/Logger;
       3: new           #8                  // class java/lang/StringBuilder
       6: dup
       7: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #10                 // String Accepted connection #
      12: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_0
      16: getfield      #2                  // Field id:I
      19: invokevirtual #12                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      22: ldc           #13                 // String  from
      24: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: aload_0
      28: getfield      #1                  // Field s:Ljava/net/Socket;
      31: invokevirtual #14                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
      34: invokevirtual #15                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      37: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      40: invokevirtual #17                 // Method java/util/logging/Logger.info:(Ljava/lang/String;)V
      43: new           #18                 // class java/io/DataInputStream
      46: dup
      47: aload_0
      48: getfield      #1                  // Field s:Ljava/net/Socket;
      51: invokevirtual #19                 // Method java/net/Socket.getInputStream:()Ljava/io/InputStream;
      54: invokespecial #20                 // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
      57: astore_1
      58: new           #21                 // class java/io/PrintWriter
      61: dup
      62: aload_0
      63: getfield      #1                  // Field s:Ljava/net/Socket;
      66: invokevirtual #22                 // Method java/net/Socket.getOutputStream:()Ljava/io/OutputStream;
      69: iconst_1
      70: invokespecial #23                 // Method java/io/PrintWriter."<init>":(Ljava/io/OutputStream;Z)V
      73: astore_2
      74: aload_1
      75: invokevirtual #24                 // Method java/io/DataInputStream.readUTF:()Ljava/lang/String;
      78: astore_3
      79: aload_3
      80: ldc           #25                 // String Protocol:
      82: invokevirtual #26                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      85: ifeq          142
      88: aload_3
      89: bipush        9
      91: invokevirtual #27                 // Method java/lang/String.substring:(I)Ljava/lang/String;
      94: astore        4
      96: aload         4
      98: ldc           #28                 // String JNLP-connect
     100: invokevirtual #29                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     103: ifeq          115
     106: aload_0
     107: aload_1
     108: aload_2
     109: invokespecial #30                 // Method runJnlpConnect:(Ljava/io/DataInputStream;Ljava/io/PrintWriter;)V
     112: goto          139
     115: aload_0
     116: aload_2
     117: new           #8                  // class java/lang/StringBuilder
     120: dup
     121: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     124: ldc           #31                 // String Unknown protocol:
     126: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: aload_3
     130: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     136: invokespecial #32                 // Method error:(Ljava/io/PrintWriter;Ljava/lang/String;)V
     139: goto          166
     142: aload_0
     143: aload_2
     144: new           #8                  // class java/lang/StringBuilder
     147: dup
     148: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     151: ldc           #33                 // String Unrecognized protocol:
     153: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: aload_3
     157: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     160: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     163: invokespecial #32                 // Method error:(Ljava/io/PrintWriter;Ljava/lang/String;)V
     166: goto          270
     169: astore_1
     170: invokestatic  #7                  // Method hudson/TcpSlaveAgentListener.access$100:()Ljava/util/logging/Logger;
     173: getstatic     #35                 // Field java/util/logging/Level.WARNING:Ljava/util/logging/Level;
     176: new           #8                  // class java/lang/StringBuilder
     179: dup
     180: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     183: ldc           #36                 // String Connection #
     185: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     188: aload_0
     189: getfield      #2                  // Field id:I
     192: invokevirtual #12                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     195: ldc           #37                 // String  aborted
     197: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     200: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     203: aload_1
     204: invokevirtual #38                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
     207: aload_0
     208: getfield      #1                  // Field s:Ljava/net/Socket;
     211: invokevirtual #39                 // Method java/net/Socket.close:()V
     214: goto          218
     217: astore_2
     218: goto          270
     221: astore_1
     222: invokestatic  #7                  // Method hudson/TcpSlaveAgentListener.access$100:()Ljava/util/logging/Logger;
     225: getstatic     #35                 // Field java/util/logging/Level.WARNING:Ljava/util/logging/Level;
     228: new           #8                  // class java/lang/StringBuilder
     231: dup
     232: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     235: ldc           #36                 // String Connection #
     237: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     240: aload_0
     241: getfield      #2                  // Field id:I
     244: invokevirtual #12                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     247: ldc           #41                 // String  failed
     249: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     252: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     255: aload_1
     256: invokevirtual #38                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
     259: aload_0
     260: getfield      #1                  // Field s:Ljava/net/Socket;
     263: invokevirtual #39                 // Method java/net/Socket.close:()V
     266: goto          270
     269: astore_2
     270: return
    Exception table:
       from    to  target type
           0   166   169   Class java/lang/InterruptedException
         207   214   217   Class java/io/IOException
           0   166   221   Class java/io/IOException
         259   266   269   Class java/io/IOException

  private void runJnlpConnect(java.io.DataInputStream, java.io.PrintWriter) throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field this$0:Lhudson/TcpSlaveAgentListener;
       4: invokestatic  #42                 // Method hudson/TcpSlaveAgentListener.access$200:(Lhudson/TcpSlaveAgentListener;)Ljava/lang/String;
       7: aload_1
       8: invokevirtual #24                 // Method java/io/DataInputStream.readUTF:()Ljava/lang/String;
      11: invokevirtual #29                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      14: ifne          25
      17: aload_0
      18: aload_2
      19: ldc           #43                 // String Unauthorized access
      21: invokespecial #32                 // Method error:(Ljava/io/PrintWriter;Ljava/lang/String;)V
      24: return
      25: aload_1
      26: invokevirtual #24                 // Method java/io/DataInputStream.readUTF:()Ljava/lang/String;
      29: astore_3
      30: invokestatic  #44                 // Method hudson/model/Hudson.getInstance:()Lhudson/model/Hudson;
      33: aload_3
      34: invokevirtual #45                 // Method hudson/model/Hudson.getComputer:(Ljava/lang/String;)Lhudson/model/Computer;
      37: checkcast     #46                 // class hudson/model/Slave$ComputerImpl
      40: astore        4
      42: aload         4
      44: ifnonnull     72
      47: aload_0
      48: aload_2
      49: new           #8                  // class java/lang/StringBuilder
      52: dup
      53: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      56: ldc           #47                 // String No such slave:
      58: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: aload_3
      62: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      68: invokespecial #32                 // Method error:(Ljava/io/PrintWriter;Ljava/lang/String;)V
      71: return
      72: aload         4
      74: invokevirtual #48                 // Method hudson/model/Slave$ComputerImpl.getChannel:()Lhudson/remoting/VirtualChannel;
      77: ifnull        88
      80: aload_0
      81: aload_2
      82: ldc           #49                 // String Already connected
      84: invokespecial #32                 // Method error:(Ljava/io/PrintWriter;Ljava/lang/String;)V
      87: return
      88: aload_2
      89: ldc           #50                 // String Welcome
      91: invokevirtual #51                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
      94: aload         4
      96: invokevirtual #52                 // Method hudson/model/Slave$ComputerImpl.openLogFile:()Ljava/io/OutputStream;
      99: astore        5
     101: new           #21                 // class java/io/PrintWriter
     104: dup
     105: aload         5
     107: invokespecial #53                 // Method java/io/PrintWriter."<init>":(Ljava/io/OutputStream;)V
     110: new           #8                  // class java/lang/StringBuilder
     113: dup
     114: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     117: ldc           #54                 // String JNLP agent connected from
     119: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     122: aload_0
     123: getfield      #1                  // Field s:Ljava/net/Socket;
     126: invokevirtual #55                 // Method java/net/Socket.getInetAddress:()Ljava/net/InetAddress;
     129: invokevirtual #15                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     132: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     135: invokevirtual #51                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     138: aload         4
     140: aload_0
     141: getfield      #1                  // Field s:Ljava/net/Socket;
     144: invokevirtual #19                 // Method java/net/Socket.getInputStream:()Ljava/io/InputStream;
     147: aload_0
     148: getfield      #1                  // Field s:Ljava/net/Socket;
     151: invokevirtual #22                 // Method java/net/Socket.getOutputStream:()Ljava/io/OutputStream;
     154: aload         5
     156: new           #56                 // class hudson/TcpSlaveAgentListener$ConnectionHandler$1
     159: dup
     160: aload_0
     161: invokespecial #57                 // Method hudson/TcpSlaveAgentListener$ConnectionHandler$1."<init>":(Lhudson/TcpSlaveAgentListener$ConnectionHandler;)V
     164: invokevirtual #58                 // Method hudson/model/Slave$ComputerImpl.setChannel:(Ljava/io/InputStream;Ljava/io/OutputStream;Ljava/io/OutputStream;Lhudson/remoting/Channel$Listener;)V
     167: return

  private void error(java.io.PrintWriter, java.lang.String) throws java.io.IOException;
    Code:
       0: aload_1
       1: aload_2
       2: invokevirtual #51                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
       5: invokestatic  #7                  // Method hudson/TcpSlaveAgentListener.access$100:()Ljava/util/logging/Logger;
       8: getstatic     #35                 // Field java/util/logging/Level.WARNING:Ljava/util/logging/Level;
      11: new           #8                  // class java/lang/StringBuilder
      14: dup
      15: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      18: ldc           #36                 // String Connection #
      20: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: aload_0
      24: getfield      #2                  // Field id:I
      27: invokevirtual #12                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      30: ldc           #59                 // String  is aborted:
      32: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: aload_2
      36: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: invokevirtual #60                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;)V
      45: aload_0
      46: getfield      #1                  // Field s:Ljava/net/Socket;
      49: invokevirtual #39                 // Method java/net/Socket.close:()V
      52: return

  static int access$300(hudson.TcpSlaveAgentListener$ConnectionHandler);
    Code:
       0: aload_0
       1: getfield      #2                  // Field id:I
       4: ireturn

  static java.net.Socket access$400(hudson.TcpSlaveAgentListener$ConnectionHandler);
    Code:
       0: aload_0
       1: getfield      #1                  // Field s:Ljava/net/Socket;
       4: areturn
}

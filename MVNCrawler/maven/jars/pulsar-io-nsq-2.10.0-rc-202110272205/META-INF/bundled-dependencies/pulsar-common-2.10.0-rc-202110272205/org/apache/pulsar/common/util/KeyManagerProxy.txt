Compiled from "KeyManagerProxy.java"
public class org.apache.pulsar.common.util.KeyManagerProxy extends javax.net.ssl.X509ExtendedKeyManager {
  private static final org.slf4j.Logger log;

  private static final char[] KEYSTORE_PASSWORD;

  private volatile javax.net.ssl.X509ExtendedKeyManager keyManager;

  private org.apache.pulsar.common.util.FileModifiedTimeUpdater certFile;

  private org.apache.pulsar.common.util.FileModifiedTimeUpdater keyFile;

  public org.apache.pulsar.common.util.KeyManagerProxy(java.lang.String, java.lang.String, int, java.util.concurrent.ScheduledExecutorService);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method javax/net/ssl/X509ExtendedKeyManager."<init>":()V
       4: aload_0
       5: new           #2                  // class org/apache/pulsar/common/util/FileModifiedTimeUpdater
       8: dup
       9: aload_1
      10: invokespecial #3                  // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater."<init>":(Ljava/lang/String;)V
      13: putfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      16: aload_0
      17: new           #2                  // class org/apache/pulsar/common/util/FileModifiedTimeUpdater
      20: dup
      21: aload_2
      22: invokespecial #3                  // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater."<init>":(Ljava/lang/String;)V
      25: putfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      28: aload_0
      29: invokevirtual #6                  // Method updateKeyManager:()V
      32: goto          115
      35: astore        5
      37: getstatic     #8                  // Field log:Lorg/slf4j/Logger;
      40: ldc           #9                  // String Failed to load cert {}
      42: aload_0
      43: getfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      46: aload         5
      48: invokeinterface #10,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      53: new           #11                 // class java/lang/IllegalArgumentException
      56: dup
      57: aload         5
      59: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/Throwable;)V
      62: athrow
      63: astore        5
      65: getstatic     #8                  // Field log:Lorg/slf4j/Logger;
      68: ldc           #14                 // String Failed to load key {}
      70: aload_0
      71: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      74: aload         5
      76: invokeinterface #10,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      81: new           #11                 // class java/lang/IllegalArgumentException
      84: dup
      85: aload         5
      87: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/Throwable;)V
      90: athrow
      91: astore        5
      93: getstatic     #8                  // Field log:Lorg/slf4j/Logger;
      96: ldc           #17                 // String Failed to update key Manager
      98: aload         5
     100: invokeinterface #18,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     105: new           #11                 // class java/lang/IllegalArgumentException
     108: dup
     109: aload         5
     111: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/Throwable;)V
     114: athrow
     115: aload         4
     117: aload_0
     118: invokedynamic #19,  0             // InvokeDynamic #0:run:(Lorg/apache/pulsar/common/util/KeyManagerProxy;)Ljava/lang/Runnable;
     123: iload_3
     124: i2l
     125: iload_3
     126: i2l
     127: getstatic     #20                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     130: invokeinterface #21,  7           // InterfaceMethod java/util/concurrent/ScheduledExecutorService.scheduleWithFixedDelay:(Ljava/lang/Runnable;JJLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;
     135: pop
     136: return
    Exception table:
       from    to  target type
          28    32    35   Class java/security/cert/CertificateException
          28    32    63   Class java/security/KeyStoreException
          28    32    91   Class java/security/NoSuchAlgorithmException
          28    32    91   Class java/security/UnrecoverableKeyException

  public void updateKeyManagerSafely();
    Code:
       0: aload_0
       1: invokevirtual #6                  // Method updateKeyManager:()V
       4: goto          46
       7: astore_1
       8: getstatic     #8                  // Field log:Lorg/slf4j/Logger;
      11: ldc           #23                 // String Failed to update key Manager for {}, {}
      13: iconst_3
      14: anewarray     #24                 // class java/lang/Object
      17: dup
      18: iconst_0
      19: aload_0
      20: getfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      23: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      26: aastore
      27: dup
      28: iconst_1
      29: aload_0
      30: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      33: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      36: aastore
      37: dup
      38: iconst_2
      39: aload_1
      40: aastore
      41: invokeinterface #26,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      46: return
    Exception table:
       from    to  target type
           0     4     7   Class java/lang/Exception

  public void updateKeyManager() throws java.security.cert.CertificateException, java.security.KeyStoreException, java.security.NoSuchAlgorithmException, java.security.UnrecoverableKeyException;
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: ifnull        28
       7: aload_0
       8: getfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      11: invokevirtual #28                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.checkAndRefresh:()Z
      14: ifne          28
      17: aload_0
      18: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      21: invokevirtual #28                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.checkAndRefresh:()Z
      24: ifne          28
      27: return
      28: getstatic     #8                  // Field log:Lorg/slf4j/Logger;
      31: ldc           #29                 // String refreshing key manager for {} {}
      33: aload_0
      34: getfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      37: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      40: aload_0
      41: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      44: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      47: invokeinterface #30,  4           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      52: aconst_null
      53: astore_2
      54: new           #31                 // class java/io/FileInputStream
      57: dup
      58: aload_0
      59: getfield      #4                  // Field certFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      62: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      65: invokespecial #32                 // Method java/io/FileInputStream."<init>":(Ljava/lang/String;)V
      68: astore        4
      70: aconst_null
      71: astore        5
      73: new           #31                 // class java/io/FileInputStream
      76: dup
      77: aload_0
      78: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
      81: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
      84: invokespecial #32                 // Method java/io/FileInputStream."<init>":(Ljava/lang/String;)V
      87: astore        6
      89: aconst_null
      90: astore        7
      92: ldc           #33                 // String X.509
      94: invokestatic  #34                 // Method java/security/cert/CertificateFactory.getInstance:(Ljava/lang/String;)Ljava/security/cert/CertificateFactory;
      97: astore        8
      99: aload         8
     101: aload         4
     103: invokevirtual #35                 // Method java/security/cert/CertificateFactory.generateCertificate:(Ljava/io/InputStream;)Ljava/security/cert/Certificate;
     106: checkcast     #36                 // class java/security/cert/X509Certificate
     109: astore_1
     110: ldc           #37                 // String JKS
     112: invokestatic  #38                 // Method java/security/KeyStore.getInstance:(Ljava/lang/String;)Ljava/security/KeyStore;
     115: astore_3
     116: aload_1
     117: invokevirtual #39                 // Method java/security/cert/X509Certificate.getSubjectX500Principal:()Ljavax/security/auth/x500/X500Principal;
     120: invokevirtual #40                 // Method javax/security/auth/x500/X500Principal.getName:()Ljava/lang/String;
     123: astore        9
     125: aload_0
     126: getfield      #5                  // Field keyFile:Lorg/apache/pulsar/common/util/FileModifiedTimeUpdater;
     129: invokevirtual #25                 // Method org/apache/pulsar/common/util/FileModifiedTimeUpdater.getFileName:()Ljava/lang/String;
     132: invokestatic  #41                 // Method org/apache/pulsar/common/util/SecurityUtility.loadPrivateKeyFromPemFile:(Ljava/lang/String;)Ljava/security/PrivateKey;
     135: astore_2
     136: aload_3
     137: aconst_null
     138: invokevirtual #42                 // Method java/security/KeyStore.load:(Ljava/security/KeyStore$LoadStoreParameter;)V
     141: aload_3
     142: aload         9
     144: aload_2
     145: getstatic     #43                 // Field KEYSTORE_PASSWORD:[C
     148: iconst_1
     149: anewarray     #36                 // class java/security/cert/X509Certificate
     152: dup
     153: iconst_0
     154: aload_1
     155: aastore
     156: invokevirtual #44                 // Method java/security/KeyStore.setKeyEntry:(Ljava/lang/String;Ljava/security/Key;[C[Ljava/security/cert/Certificate;)V
     159: aload         6
     161: ifnull        246
     164: aload         7
     166: ifnull        189
     169: aload         6
     171: invokevirtual #45                 // Method java/io/InputStream.close:()V
     174: goto          246
     177: astore        8
     179: aload         7
     181: aload         8
     183: invokevirtual #47                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     186: goto          246
     189: aload         6
     191: invokevirtual #45                 // Method java/io/InputStream.close:()V
     194: goto          246
     197: astore        8
     199: aload         8
     201: astore        7
     203: aload         8
     205: athrow
     206: astore        10
     208: aload         6
     210: ifnull        243
     213: aload         7
     215: ifnull        238
     218: aload         6
     220: invokevirtual #45                 // Method java/io/InputStream.close:()V
     223: goto          243
     226: astore        11
     228: aload         7
     230: aload         11
     232: invokevirtual #47                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     235: goto          243
     238: aload         6
     240: invokevirtual #45                 // Method java/io/InputStream.close:()V
     243: aload         10
     245: athrow
     246: aload         4
     248: ifnull        333
     251: aload         5
     253: ifnull        276
     256: aload         4
     258: invokevirtual #45                 // Method java/io/InputStream.close:()V
     261: goto          333
     264: astore        6
     266: aload         5
     268: aload         6
     270: invokevirtual #47                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     273: goto          333
     276: aload         4
     278: invokevirtual #45                 // Method java/io/InputStream.close:()V
     281: goto          333
     284: astore        6
     286: aload         6
     288: astore        5
     290: aload         6
     292: athrow
     293: astore        12
     295: aload         4
     297: ifnull        330
     300: aload         5
     302: ifnull        325
     305: aload         4
     307: invokevirtual #45                 // Method java/io/InputStream.close:()V
     310: goto          330
     313: astore        13
     315: aload         5
     317: aload         13
     319: invokevirtual #47                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     322: goto          330
     325: aload         4
     327: invokevirtual #45                 // Method java/io/InputStream.close:()V
     330: aload         12
     332: athrow
     333: goto          348
     336: astore        4
     338: new           #11                 // class java/lang/IllegalArgumentException
     341: dup
     342: aload         4
     344: invokespecial #12                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/Throwable;)V
     347: athrow
     348: invokestatic  #50                 // Method javax/net/ssl/KeyManagerFactory.getDefaultAlgorithm:()Ljava/lang/String;
     351: invokestatic  #51                 // Method javax/net/ssl/KeyManagerFactory.getInstance:(Ljava/lang/String;)Ljavax/net/ssl/KeyManagerFactory;
     354: astore        4
     356: aload         4
     358: aload_3
     359: getstatic     #43                 // Field KEYSTORE_PASSWORD:[C
     362: invokevirtual #52                 // Method javax/net/ssl/KeyManagerFactory.init:(Ljava/security/KeyStore;[C)V
     365: aload_0
     366: aload         4
     368: invokevirtual #53                 // Method javax/net/ssl/KeyManagerFactory.getKeyManagers:()[Ljavax/net/ssl/KeyManager;
     371: iconst_0
     372: aaload
     373: checkcast     #54                 // class javax/net/ssl/X509ExtendedKeyManager
     376: putfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
     379: return
    Exception table:
       from    to  target type
         169   174   177   Class java/lang/Throwable
          92   159   197   Class java/lang/Throwable
          92   159   206   any
         218   223   226   Class java/lang/Throwable
         197   208   206   any
         256   261   264   Class java/lang/Throwable
          73   246   284   Class java/lang/Throwable
          73   246   293   any
         305   310   313   Class java/lang/Throwable
         284   295   293   any
          54   333   336   Class java/io/IOException
          54   333   336   Class java/security/KeyManagementException

  public java.lang.String[] getClientAliases(java.lang.String, java.security.Principal[]);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: invokevirtual #55                 // Method javax/net/ssl/X509ExtendedKeyManager.getClientAliases:(Ljava/lang/String;[Ljava/security/Principal;)[Ljava/lang/String;
       9: areturn

  public java.lang.String chooseClientAlias(java.lang.String[], java.security.Principal[], java.net.Socket);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: aload_3
       7: invokevirtual #56                 // Method javax/net/ssl/X509ExtendedKeyManager.chooseClientAlias:([Ljava/lang/String;[Ljava/security/Principal;Ljava/net/Socket;)Ljava/lang/String;
      10: areturn

  public java.lang.String[] getServerAliases(java.lang.String, java.security.Principal[]);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: invokevirtual #57                 // Method javax/net/ssl/X509ExtendedKeyManager.getServerAliases:(Ljava/lang/String;[Ljava/security/Principal;)[Ljava/lang/String;
       9: areturn

  public java.lang.String chooseServerAlias(java.lang.String, java.security.Principal[], java.net.Socket);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: aload_3
       7: invokevirtual #58                 // Method javax/net/ssl/X509ExtendedKeyManager.chooseServerAlias:(Ljava/lang/String;[Ljava/security/Principal;Ljava/net/Socket;)Ljava/lang/String;
      10: areturn

  public java.security.cert.X509Certificate[] getCertificateChain(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: invokevirtual #59                 // Method javax/net/ssl/X509ExtendedKeyManager.getCertificateChain:(Ljava/lang/String;)[Ljava/security/cert/X509Certificate;
       8: areturn

  public java.security.PrivateKey getPrivateKey(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: invokevirtual #60                 // Method javax/net/ssl/X509ExtendedKeyManager.getPrivateKey:(Ljava/lang/String;)Ljava/security/PrivateKey;
       8: areturn

  public java.lang.String chooseEngineClientAlias(java.lang.String[], java.security.Principal[], javax.net.ssl.SSLEngine);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: aload_3
       7: invokevirtual #61                 // Method javax/net/ssl/X509ExtendedKeyManager.chooseEngineClientAlias:([Ljava/lang/String;[Ljava/security/Principal;Ljavax/net/ssl/SSLEngine;)Ljava/lang/String;
      10: areturn

  public java.lang.String chooseEngineServerAlias(java.lang.String, java.security.Principal[], javax.net.ssl.SSLEngine);
    Code:
       0: aload_0
       1: getfield      #27                 // Field keyManager:Ljavax/net/ssl/X509ExtendedKeyManager;
       4: aload_1
       5: aload_2
       6: aload_3
       7: invokevirtual #62                 // Method javax/net/ssl/X509ExtendedKeyManager.chooseEngineServerAlias:(Ljava/lang/String;[Ljava/security/Principal;Ljavax/net/ssl/SSLEngine;)Ljava/lang/String;
      10: areturn

  private void lambda$new$0();
    Code:
       0: aload_0
       1: invokevirtual #63                 // Method updateKeyManagerSafely:()V
       4: return

  static {};
    Code:
       0: ldc           #64                 // class org/apache/pulsar/common/util/KeyManagerProxy
       2: invokestatic  #65                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #8                  // Field log:Lorg/slf4j/Logger;
       8: ldc           #66                 // String secret
      10: invokevirtual #67                 // Method java/lang/String.toCharArray:()[C
      13: putstatic     #43                 // Field KEYSTORE_PASSWORD:[C
      16: return
}

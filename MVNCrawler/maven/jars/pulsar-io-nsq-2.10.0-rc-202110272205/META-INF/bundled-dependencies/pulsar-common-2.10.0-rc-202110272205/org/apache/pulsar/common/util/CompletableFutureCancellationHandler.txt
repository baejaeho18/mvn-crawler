Compiled from "CompletableFutureCancellationHandler.java"
public class org.apache.pulsar.common.util.CompletableFutureCancellationHandler {
  private volatile org.apache.pulsar.common.util.CompletableFutureCancellationHandler$CompletionStatus completionStatus;

  private volatile java.lang.Runnable cancelAction;

  private final java.util.concurrent.atomic.AtomicBoolean cancelHandled;

  private boolean attached;

  public org.apache.pulsar.common.util.CompletableFutureCancellationHandler();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: getstatic     #2                  // Field org/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus.PENDING:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
       8: putfield      #3                  // Field completionStatus:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      11: aload_0
      12: new           #4                  // class java/util/concurrent/atomic/AtomicBoolean
      15: dup
      16: invokespecial #5                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
      19: putfield      #6                  // Field cancelHandled:Ljava/util/concurrent/atomic/AtomicBoolean;
      22: return

  public <T> java.util.concurrent.CompletableFuture<T> createFuture();
    Code:
       0: new           #7                  // class java/util/concurrent/CompletableFuture
       3: dup
       4: invokespecial #8                  // Method java/util/concurrent/CompletableFuture."<init>":()V
       7: astore_1
       8: aload_0
       9: aload_1
      10: invokevirtual #9                  // Method attachToFuture:(Ljava/util/concurrent/CompletableFuture;)V
      13: aload_1
      14: areturn

  public synchronized void attachToFuture(java.util.concurrent.CompletableFuture<?>);
    Code:
       0: aload_0
       1: getfield      #10                 // Field attached:Z
       4: ifeq          17
       7: new           #11                 // class java/lang/IllegalStateException
      10: dup
      11: ldc           #12                 // String A future has already been attached to this instance.
      13: invokespecial #13                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: iconst_1
      19: putfield      #10                 // Field attached:Z
      22: aload_1
      23: aload_0
      24: invokespecial #14                 // Method whenCompleteFunction:()Ljava/util/function/BiConsumer;
      27: invokevirtual #15                 // Method java/util/concurrent/CompletableFuture.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletableFuture;
      30: pop
      31: return

  public void setCancelAction(java.lang.Runnable);
    Code:
       0: aload_0
       1: getfield      #16                 // Field cancelAction:Ljava/lang/Runnable;
       4: ifnonnull     17
       7: aload_0
       8: getfield      #6                  // Field cancelHandled:Ljava/util/concurrent/atomic/AtomicBoolean;
      11: invokevirtual #17                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      14: ifeq          27
      17: new           #11                 // class java/lang/IllegalStateException
      20: dup
      21: ldc           #18                 // String cancelAction can only be set once.
      23: invokespecial #13                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      26: athrow
      27: aload_0
      28: aload_1
      29: invokestatic  #19                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      32: checkcast     #20                 // class java/lang/Runnable
      35: putfield      #16                 // Field cancelAction:Ljava/lang/Runnable;
      38: aload_0
      39: invokespecial #21                 // Method runCancelActionOnceIfCancelled:()V
      42: return

  private java.util.function.BiConsumer<java.lang.Object, ? super java.lang.Throwable> whenCompleteFunction();
    Code:
       0: aload_0
       1: invokedynamic #22,  0             // InvokeDynamic #0:accept:(Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler;)Ljava/util/function/BiConsumer;
       6: areturn

  private void runCancelActionOnceIfCancelled();
    Code:
       0: aload_0
       1: getfield      #3                  // Field completionStatus:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
       4: getstatic     #2                  // Field org/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus.PENDING:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
       7: if_acmpeq     53
      10: aload_0
      11: getfield      #16                 // Field cancelAction:Ljava/lang/Runnable;
      14: ifnull        53
      17: aload_0
      18: getfield      #6                  // Field cancelHandled:Ljava/util/concurrent/atomic/AtomicBoolean;
      21: iconst_0
      22: iconst_1
      23: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
      26: ifeq          53
      29: aload_0
      30: getfield      #3                  // Field completionStatus:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      33: getstatic     #24                 // Field org/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus.CANCELLED:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      36: if_acmpne     48
      39: aload_0
      40: getfield      #16                 // Field cancelAction:Ljava/lang/Runnable;
      43: invokeinterface #25,  1           // InterfaceMethod java/lang/Runnable.run:()V
      48: aload_0
      49: aconst_null
      50: putfield      #16                 // Field cancelAction:Ljava/lang/Runnable;
      53: return

  private void lambda$whenCompleteFunction$0(java.lang.Object, java.lang.Throwable);
    Code:
       0: aload_2
       1: instanceof    #26                 // class java/util/concurrent/CancellationException
       4: ifne          14
       7: aload_2
       8: instanceof    #27                 // class java/util/concurrent/TimeoutException
      11: ifeq          24
      14: aload_0
      15: getstatic     #24                 // Field org/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus.CANCELLED:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      18: putfield      #3                  // Field completionStatus:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      21: goto          31
      24: aload_0
      25: getstatic     #28                 // Field org/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus.DONE:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      28: putfield      #3                  // Field completionStatus:Lorg/apache/pulsar/common/util/CompletableFutureCancellationHandler$CompletionStatus;
      31: aload_0
      32: invokespecial #21                 // Method runCancelActionOnceIfCancelled:()V
      35: return
}

Compiled from "BundleContextSelector.java"
public class org.apache.logging.log4j.core.osgi.BundleContextSelector extends org.apache.logging.log4j.core.selector.ClassLoaderContextSelector {
  public org.apache.logging.log4j.core.osgi.BundleContextSelector();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/logging/log4j/core/selector/ClassLoaderContextSelector."<init>":()V
       4: return

  public void shutdown(java.lang.String, java.lang.ClassLoader, boolean, boolean);
    Code:
       0: aconst_null
       1: astore        5
       3: aconst_null
       4: astore        6
       6: iload_3
       7: ifeq          27
      10: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      13: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      16: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      19: astore        5
      21: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      24: invokevirtual #5                  // Method java/lang/ThreadLocal.remove:()V
      27: aload         5
      29: ifnonnull     64
      32: aload_2
      33: instanceof    #6                  // class org/osgi/framework/BundleReference
      36: ifeq          64
      39: aload_2
      40: checkcast     #6                  // class org/osgi/framework/BundleReference
      43: invokeinterface #7,  1            // InterfaceMethod org/osgi/framework/BundleReference.getBundle:()Lorg/osgi/framework/Bundle;
      48: astore        6
      50: aload_0
      51: aload         6
      53: invokespecial #8                  // Method getLoggerContext:(Lorg/osgi/framework/Bundle;)Lorg/apache/logging/log4j/core/LoggerContext;
      56: astore        5
      58: aload_0
      59: aload         5
      61: invokespecial #9                  // Method removeLoggerContext:(Lorg/apache/logging/log4j/core/LoggerContext;)V
      64: aload         5
      66: ifnonnull     104
      69: aload_1
      70: invokestatic  #10                 // Method org/apache/logging/log4j/util/StackLocatorUtil.getCallerClass:(Ljava/lang/String;)Ljava/lang/Class;
      73: astore        7
      75: aload         7
      77: ifnull        104
      80: aload         7
      82: invokestatic  #11                 // Method org/osgi/framework/FrameworkUtil.getBundle:(Ljava/lang/Class;)Lorg/osgi/framework/Bundle;
      85: astore        6
      87: aload_0
      88: aload         7
      90: invokestatic  #11                 // Method org/osgi/framework/FrameworkUtil.getBundle:(Ljava/lang/Class;)Lorg/osgi/framework/Bundle;
      93: invokespecial #8                  // Method getLoggerContext:(Lorg/osgi/framework/Bundle;)Lorg/apache/logging/log4j/core/LoggerContext;
      96: astore        5
      98: aload_0
      99: aload         5
     101: invokespecial #9                  // Method removeLoggerContext:(Lorg/apache/logging/log4j/core/LoggerContext;)V
     104: aload         5
     106: ifnonnull     126
     109: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
     112: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
     115: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
     118: astore        5
     120: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
     123: invokevirtual #5                  // Method java/lang/ThreadLocal.remove:()V
     126: aload         5
     128: ifnull        143
     131: aload         5
     133: ldc2_w        #13                 // long 50l
     136: getstatic     #15                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     139: invokevirtual #16                 // Method org/apache/logging/log4j/core/LoggerContext.stop:(JLjava/util/concurrent/TimeUnit;)Z
     142: pop
     143: aload         6
     145: ifnull        224
     148: iload         4
     150: ifeq          224
     153: aload         6
     155: invokeinterface #17,  1           // InterfaceMethod org/osgi/framework/Bundle.getBundleContext:()Lorg/osgi/framework/BundleContext;
     160: invokeinterface #18,  1           // InterfaceMethod org/osgi/framework/BundleContext.getBundles:()[Lorg/osgi/framework/Bundle;
     165: astore        7
     167: aload         7
     169: astore        8
     171: aload         8
     173: arraylength
     174: istore        9
     176: iconst_0
     177: istore        10
     179: iload         10
     181: iload         9
     183: if_icmpge     224
     186: aload         8
     188: iload         10
     190: aaload
     191: astore        11
     193: aload_0
     194: aload         11
     196: invokespecial #8                  // Method getLoggerContext:(Lorg/osgi/framework/Bundle;)Lorg/apache/logging/log4j/core/LoggerContext;
     199: astore        5
     201: aload         5
     203: ifnull        218
     206: aload         5
     208: ldc2_w        #13                 // long 50l
     211: getstatic     #15                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     214: invokevirtual #16                 // Method org/apache/logging/log4j/core/LoggerContext.stop:(JLjava/util/concurrent/TimeUnit;)Z
     217: pop
     218: iinc          10, 1
     221: goto          179
     224: return

  private org.apache.logging.log4j.core.LoggerContext getLoggerContext(org.osgi.framework.Bundle);
    Code:
       0: aload_1
       1: ldc           #19                 // String No Bundle provided
       3: invokestatic  #20                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: checkcast     #21                 // class org/osgi/framework/Bundle
       9: invokeinterface #22,  1           // InterfaceMethod org/osgi/framework/Bundle.getSymbolicName:()Ljava/lang/String;
      14: astore_2
      15: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
      18: aload_2
      19: invokeinterface #24,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #25                 // class java/util/concurrent/atomic/AtomicReference
      27: astore_3
      28: aload_3
      29: ifnull        53
      32: aload_3
      33: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      36: ifnull        53
      39: aload_3
      40: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      43: checkcast     #27                 // class java/lang/ref/WeakReference
      46: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
      49: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      52: areturn
      53: aconst_null
      54: areturn

  private void removeLoggerContext(org.apache.logging.log4j.core.LoggerContext);
    Code:
       0: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
       3: aload_1
       4: invokevirtual #29                 // Method org/apache/logging/log4j/core/LoggerContext.getName:()Ljava/lang/String;
       7: invokeinterface #30,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      12: pop
      13: return

  public boolean hasContext(java.lang.String, java.lang.ClassLoader, boolean);
    Code:
       0: iload_3
       1: ifeq          26
       4: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
       7: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      10: ifnull        26
      13: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      16: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      19: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      22: invokevirtual #31                 // Method org/apache/logging/log4j/core/LoggerContext.isStarted:()Z
      25: ireturn
      26: aload_2
      27: instanceof    #6                  // class org/osgi/framework/BundleReference
      30: ifeq          46
      33: aload_2
      34: checkcast     #6                  // class org/osgi/framework/BundleReference
      37: invokeinterface #7,  1            // InterfaceMethod org/osgi/framework/BundleReference.getBundle:()Lorg/osgi/framework/Bundle;
      42: invokestatic  #32                 // Method hasContext:(Lorg/osgi/framework/Bundle;)Z
      45: ireturn
      46: aload_1
      47: invokestatic  #10                 // Method org/apache/logging/log4j/util/StackLocatorUtil.getCallerClass:(Ljava/lang/String;)Ljava/lang/Class;
      50: astore        4
      52: aload         4
      54: ifnull        66
      57: aload         4
      59: invokestatic  #11                 // Method org/osgi/framework/FrameworkUtil.getBundle:(Ljava/lang/Class;)Lorg/osgi/framework/Bundle;
      62: invokestatic  #32                 // Method hasContext:(Lorg/osgi/framework/Bundle;)Z
      65: ireturn
      66: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      69: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      72: ifnull        94
      75: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      78: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      81: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      84: invokevirtual #31                 // Method org/apache/logging/log4j/core/LoggerContext.isStarted:()Z
      87: ifeq          94
      90: iconst_1
      91: goto          95
      94: iconst_0
      95: ireturn

  public org.apache.logging.log4j.core.LoggerContext getContext(java.lang.String, java.lang.ClassLoader, boolean, java.net.URI);
    Code:
       0: iload_3
       1: ifeq          28
       4: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
       7: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      10: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      13: astore        5
      15: aload         5
      17: ifnull        23
      20: aload         5
      22: areturn
      23: aload_0
      24: invokevirtual #33                 // Method getDefault:()Lorg/apache/logging/log4j/core/LoggerContext;
      27: areturn
      28: aload_2
      29: instanceof    #6                  // class org/osgi/framework/BundleReference
      32: ifeq          50
      35: aload_2
      36: checkcast     #6                  // class org/osgi/framework/BundleReference
      39: invokeinterface #7,  1            // InterfaceMethod org/osgi/framework/BundleReference.getBundle:()Lorg/osgi/framework/Bundle;
      44: aload         4
      46: invokestatic  #34                 // Method locateContext:(Lorg/osgi/framework/Bundle;Ljava/net/URI;)Lorg/apache/logging/log4j/core/LoggerContext;
      49: areturn
      50: aload_1
      51: invokestatic  #10                 // Method org/apache/logging/log4j/util/StackLocatorUtil.getCallerClass:(Ljava/lang/String;)Ljava/lang/Class;
      54: astore        5
      56: aload         5
      58: ifnull        72
      61: aload         5
      63: invokestatic  #11                 // Method org/osgi/framework/FrameworkUtil.getBundle:(Ljava/lang/Class;)Lorg/osgi/framework/Bundle;
      66: aload         4
      68: invokestatic  #34                 // Method locateContext:(Lorg/osgi/framework/Bundle;Ljava/net/URI;)Lorg/apache/logging/log4j/core/LoggerContext;
      71: areturn
      72: getstatic     #2                  // Field org/apache/logging/log4j/core/impl/ContextAnchor.THREAD_CONTEXT:Ljava/lang/ThreadLocal;
      75: invokevirtual #3                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      78: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      81: astore        6
      83: aload         6
      85: ifnonnull     95
      88: aload_0
      89: invokevirtual #33                 // Method getDefault:()Lorg/apache/logging/log4j/core/LoggerContext;
      92: goto          97
      95: aload         6
      97: areturn

  private static boolean hasContext(org.osgi.framework.Bundle);
    Code:
       0: aload_0
       1: ldc           #19                 // String No Bundle provided
       3: invokestatic  #20                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: checkcast     #21                 // class org/osgi/framework/Bundle
       9: invokeinterface #22,  1           // InterfaceMethod org/osgi/framework/Bundle.getSymbolicName:()Ljava/lang/String;
      14: astore_1
      15: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
      18: aload_1
      19: invokeinterface #24,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #25                 // class java/util/concurrent/atomic/AtomicReference
      27: astore_2
      28: aload_2
      29: ifnull        75
      32: aload_2
      33: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      36: ifnull        75
      39: aload_2
      40: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      43: checkcast     #27                 // class java/lang/ref/WeakReference
      46: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
      49: ifnull        75
      52: aload_2
      53: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      56: checkcast     #27                 // class java/lang/ref/WeakReference
      59: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
      62: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      65: invokevirtual #31                 // Method org/apache/logging/log4j/core/LoggerContext.isStarted:()Z
      68: ifeq          75
      71: iconst_1
      72: goto          76
      75: iconst_0
      76: ireturn

  private static org.apache.logging.log4j.core.LoggerContext locateContext(org.osgi.framework.Bundle, java.net.URI);
    Code:
       0: aload_0
       1: ldc           #19                 // String No Bundle provided
       3: invokestatic  #20                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: checkcast     #21                 // class org/osgi/framework/Bundle
       9: invokeinterface #22,  1           // InterfaceMethod org/osgi/framework/Bundle.getSymbolicName:()Ljava/lang/String;
      14: astore_2
      15: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
      18: aload_2
      19: invokeinterface #24,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #25                 // class java/util/concurrent/atomic/AtomicReference
      27: astore_3
      28: aload_3
      29: ifnonnull     95
      32: new           #4                  // class org/apache/logging/log4j/core/LoggerContext
      35: dup
      36: aload_2
      37: aload_0
      38: aload_1
      39: invokespecial #35                 // Method org/apache/logging/log4j/core/LoggerContext."<init>":(Ljava/lang/String;Ljava/lang/Object;Ljava/net/URI;)V
      42: astore        4
      44: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
      47: aload_2
      48: new           #25                 // class java/util/concurrent/atomic/AtomicReference
      51: dup
      52: new           #27                 // class java/lang/ref/WeakReference
      55: dup
      56: aload         4
      58: invokespecial #36                 // Method java/lang/ref/WeakReference."<init>":(Ljava/lang/Object;)V
      61: invokespecial #37                 // Method java/util/concurrent/atomic/AtomicReference."<init>":(Ljava/lang/Object;)V
      64: invokeinterface #38,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      69: pop
      70: getstatic     #23                 // Field CONTEXT_MAP:Ljava/util/concurrent/ConcurrentMap;
      73: aload_2
      74: invokeinterface #24,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      79: checkcast     #25                 // class java/util/concurrent/atomic/AtomicReference
      82: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      85: checkcast     #27                 // class java/lang/ref/WeakReference
      88: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
      91: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
      94: areturn
      95: aload_3
      96: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      99: checkcast     #27                 // class java/lang/ref/WeakReference
     102: astore        4
     104: aload         4
     106: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
     109: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
     112: astore        5
     114: aload         5
     116: ifnonnull     161
     119: new           #4                  // class org/apache/logging/log4j/core/LoggerContext
     122: dup
     123: aload_2
     124: aload_0
     125: aload_1
     126: invokespecial #35                 // Method org/apache/logging/log4j/core/LoggerContext."<init>":(Ljava/lang/String;Ljava/lang/Object;Ljava/net/URI;)V
     129: astore        6
     131: aload_3
     132: aload         4
     134: new           #27                 // class java/lang/ref/WeakReference
     137: dup
     138: aload         6
     140: invokespecial #36                 // Method java/lang/ref/WeakReference."<init>":(Ljava/lang/Object;)V
     143: invokevirtual #39                 // Method java/util/concurrent/atomic/AtomicReference.compareAndSet:(Ljava/lang/Object;Ljava/lang/Object;)Z
     146: pop
     147: aload_3
     148: invokevirtual #26                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     151: checkcast     #27                 // class java/lang/ref/WeakReference
     154: invokevirtual #28                 // Method java/lang/ref/WeakReference.get:()Ljava/lang/Object;
     157: checkcast     #4                  // class org/apache/logging/log4j/core/LoggerContext
     160: areturn
     161: aload         5
     163: invokevirtual #40                 // Method org/apache/logging/log4j/core/LoggerContext.getConfigLocation:()Ljava/net/URI;
     166: astore        6
     168: aload         6
     170: ifnonnull     196
     173: aload_1
     174: ifnull        196
     177: getstatic     #41                 // Field LOGGER:Lorg/apache/logging/log4j/status/StatusLogger;
     180: ldc           #42                 // String Setting bundle ({}) configuration to {}
     182: aload_2
     183: aload_1
     184: invokevirtual #43                 // Method org/apache/logging/log4j/status/StatusLogger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     187: aload         5
     189: aload_1
     190: invokevirtual #44                 // Method org/apache/logging/log4j/core/LoggerContext.setConfigLocation:(Ljava/net/URI;)V
     193: goto          225
     196: aload         6
     198: ifnull        225
     201: aload_1
     202: ifnull        225
     205: aload_1
     206: aload         6
     208: invokevirtual #45                 // Method java/net/URI.equals:(Ljava/lang/Object;)Z
     211: ifne          225
     214: getstatic     #41                 // Field LOGGER:Lorg/apache/logging/log4j/status/StatusLogger;
     217: ldc           #46                 // String locateContext called with URI [{}], but existing LoggerContext has URI [{}]
     219: aload_1
     220: aload         6
     222: invokevirtual #47                 // Method org/apache/logging/log4j/status/StatusLogger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     225: aload         5
     227: areturn
}

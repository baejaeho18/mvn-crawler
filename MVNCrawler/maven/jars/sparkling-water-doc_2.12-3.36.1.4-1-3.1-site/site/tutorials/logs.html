

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Sparkling Water Logging &mdash; H2O Sparkling Water 3.36.1.4-1-3.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enabling SSL" href="ssl.html" />
    <link rel="prev" title="Hive Support in Sparkling Water" href="hive_support.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.36.1.4-1-3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About Sparkling Water</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typical_use_case.html">Typical Use Case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Sparkling Water Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install_and_start.html">Installing and Starting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ml/ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/metrics.html">Metric Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_details/model_details.html">Model Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters/parameters.html">Algorithm Parameters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">How to…</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="run_sparkling_water.html">Running Sparkling Water</a></li>
<li class="toctree-l2"><a class="reference internal" href="change_default_port.html">Changing the Default Port</a></li>
<li class="toctree-l2"><a class="reference internal" href="hive_support.html">Hive Support in Sparkling Water</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Sparkling Water Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#changing-log-directory">Changing Log Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logging-directory-selection">Logging Directory Selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-logs-for-sparkling-water-on-yarn">Obtaining Logs for Sparkling Water on YARN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtaining-logs-for-standalone-sparkling-water">Obtaining Logs for Standalone Sparkling Water</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-sparkling-water-logging-level">Change Sparkling Water Logging Level</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ssl.html">Enabling SSL</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap.html">Enabling LDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberos_auth.html">Enabling Kerberos Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="kerberized_cluster.html">Running Sparkling Water on Kerberized Hadoop Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="secured_flow.html">Using SSL to secure H2O Flow UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="spark_h2o_conversions.html">Spark Frame &lt;–&gt; H2O Frame Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="h2oframe_as_data_source.html">H2O Frame as Spark’s Data Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="import_export_s3.html">Import &amp; Export H2O Frames from/to S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="use_as_spark_package.html">Use Sparkling Water via Spark Packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devel/devel.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysparkling.html">PySparkling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rsparkling.html">RSparkling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">H2O Sparkling Water</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="tutorials.html">How to…</a> &raquo;</li>
        
      <li>Sparkling Water Logging</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/tutorials/logs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sparkling-water-logging">
<h1>Sparkling Water Logging<a class="headerlink" href="#sparkling-water-logging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="changing-log-directory">
<h2>Changing Log Directory<a class="headerlink" href="#changing-log-directory" title="Permalink to this headline">¶</a></h2>
<p>Sparkling Water log directory can be specified using the Spark option <code class="docutils literal notranslate"><span class="pre">spark.ext.h2o.log.dir</span></code> or at run-time
using our setters as:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-Scala">
<p class="tab-title">Scala</p>
<div class="highlight-Scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">ai.h2o.sparkling._</span>
<span class="k">val</span> <span class="n">conf</span> <span class="k">=</span> <span class="k">new</span> <span class="n">H2OConf</span><span class="o">().</span><span class="n">setLogDir</span><span class="o">(</span><span class="s">&quot;dir&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">hc</span> <span class="k">=</span> <span class="n">H2OContext</span><span class="o">.</span><span class="n">getOrCreate</span><span class="o">(</span><span class="n">conf</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="tab-content docutils container" id="tab-Python">
<p class="tab-title">Python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysparkling</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">conf</span> <span class="o">=</span> <span class="n">H2OConf</span><span class="p">()</span><span class="o">.</span><span class="n">setLogDir</span><span class="p">(</span><span class="s2">&quot;dir&quot;</span><span class="p">)</span>
<span class="n">hc</span> <span class="o">=</span> <span class="n">H2OContext</span><span class="o">.</span><span class="n">getOrCreate</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="tab-content docutils container" id="tab-R">
<p class="tab-title">R</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">rsparkling</span><span class="p">)</span>
<span class="n">sc</span> <span class="o">&lt;-</span> <span class="nf">spark_connect</span><span class="p">(</span><span class="n">master</span> <span class="o">=</span> <span class="s">&quot;local&quot;</span><span class="p">)</span>
<span class="n">conf</span> <span class="o">=</span> <span class="nf">H2OConf</span><span class="p">()</span><span class="o">$</span><span class="nf">setLogDir</span><span class="p">(</span><span class="s">&quot;dir&quot;</span><span class="p">)</span>
<span class="n">hc</span> <span class="o">=</span> <span class="nf">H2OContext.getOrCreate</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="logging-directory-selection">
<h2>Logging Directory Selection<a class="headerlink" href="#logging-directory-selection" title="Permalink to this headline">¶</a></h2>
<p>Sparkling Water uses the following steps to determine the final logging directory:</p>
<ul class="simple">
<li><p>First, we check if the <code class="docutils literal notranslate"><span class="pre">spark.yarn.app.container.log.dir</span></code> environmental property is defined. If
it is available, we use it as a logging directory.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">spark.yarn.app.container.log.dir</span></code> is missing, we check whether <code class="docutils literal notranslate"><span class="pre">spark.ext.h2o.log.dir</span></code> is defined and use it
if it is not empty.</p></li>
<li><p>At last, if both options are missing, we store the logs into the default directory <code class="docutils literal notranslate"><span class="pre">${user.dir}/h2ologs/${sparkAppId}</span></code></p></li>
</ul>
<p>We can see that <code class="docutils literal notranslate"><span class="pre">spark.yarn.app.container.log.dir</span></code> has precedence over our logging option. This is to ensure that
when running on YARN, the logs are collected by YARN tooling.</p>
</div>
<div class="section" id="obtaining-logs-for-sparkling-water-on-yarn">
<h2>Obtaining Logs for Sparkling Water on YARN<a class="headerlink" href="#obtaining-logs-for-sparkling-water-on-yarn" title="Permalink to this headline">¶</a></h2>
<p>When launching Sparkling Water on YARN, you can find the application ID for the YARN job on the resource
manager (where you can also find the application master, which is also the Spark master). The following
command prints the YARN logs to the console:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>yarn logs -applicationId &lt;application id&gt;
</pre></div>
</div>
</div>
<div class="section" id="obtaining-logs-for-standalone-sparkling-water">
<h2>Obtaining Logs for Standalone Sparkling Water<a class="headerlink" href="#obtaining-logs-for-standalone-sparkling-water" title="Permalink to this headline">¶</a></h2>
<p>By default, the Spark property <code class="docutils literal notranslate"><span class="pre">SPARK_LOG_DIR</span></code> is set to <code class="docutils literal notranslate"><span class="pre">$SPARK_HOME/work/</span></code>. To also log the configuration with which
the Spark was started, start Sparkling Water with the following configuration:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>bin/sparkling-shell.sh --conf spark.logConf<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>The logs for the particular application are located at <code class="docutils literal notranslate"><span class="pre">$SPARK_HOME/work/&lt;application</span> <span class="pre">id&gt;</span></code>. The directory contains
also stdout and stderr for each node in the cluster.</p>
</div>
<div class="section" id="change-sparkling-water-logging-level">
<h2>Change Sparkling Water Logging Level<a class="headerlink" href="#change-sparkling-water-logging-level" title="Permalink to this headline">¶</a></h2>
<p>To change the log level for H2O running inside the Sparkling Water,
you can use the option <code class="docutils literal notranslate"><span class="pre">spark.ext.h2o.log.level</span></code> or set it as:</p>
<div class="content-tabs docutils container">
<div class="tab-content docutils container" id="tab-Scala">
<p class="tab-title">Scala</p>
<div class="highlight-Scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">ai.h2o.sparkling._</span>
<span class="k">val</span> <span class="n">conf</span> <span class="k">=</span> <span class="k">new</span> <span class="n">H2OConf</span><span class="o">().</span><span class="n">setLogLevel</span><span class="o">(</span><span class="s">&quot;DEBUG&quot;</span><span class="o">)</span>
<span class="k">val</span> <span class="n">hc</span> <span class="k">=</span> <span class="n">H2OContext</span><span class="o">.</span><span class="n">getOrCreate</span><span class="o">(</span><span class="n">conf</span><span class="o">)</span>
</pre></div>
</div>
</div>
<div class="tab-content docutils container" id="tab-Python">
<p class="tab-title">Python</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pysparkling</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">conf</span> <span class="o">=</span> <span class="n">H2OConf</span><span class="p">()</span><span class="o">.</span><span class="n">setLogLevel</span><span class="p">(</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">)</span>
<span class="n">hc</span> <span class="o">=</span> <span class="n">H2OContext</span><span class="o">.</span><span class="n">getOrCreate</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="tab-content docutils container" id="tab-R">
<p class="tab-title">R</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">rsparkling</span><span class="p">)</span>
<span class="n">sc</span> <span class="o">&lt;-</span> <span class="nf">spark_connect</span><span class="p">(</span><span class="n">master</span> <span class="o">=</span> <span class="s">&quot;local&quot;</span><span class="p">)</span>
<span class="n">conf</span> <span class="o">=</span> <span class="nf">H2OConf</span><span class="p">()</span><span class="o">$</span><span class="nf">setLogLevel</span><span class="p">(</span><span class="s">&quot;DEBUG&quot;</span><span class="p">)</span>
<span class="n">hc</span> <span class="o">=</span> <span class="nf">H2OContext.getOrCreate</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We can also change the logging level used by Spark by modifying the log4j.properties file passed to Spark as:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$SPARK_HOME</span>/conf
cp log4j.properties.template log4j.properties
</pre></div>
</div>
<p>Then either in a text editor or vim, change the contents of the log4j.properties file from:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#Set everything to be logged to the console</span>
log4j.rootCategory<span class="o">=</span>INFO, console
...
</pre></div>
</div>
<p>to:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1">#Set everything to be logged to the console</span>
log4j.rootCategory<span class="o">=</span>WARN, console
...
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ssl.html" class="btn btn-neutral float-right" title="Enabling SSL" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hive_support.html" class="btn btn-neutral float-left" title="Hive Support in Sparkling Water" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020 H2O.ai
      <span class="lastupdated">
        Last updated on Aug 04, 2022.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
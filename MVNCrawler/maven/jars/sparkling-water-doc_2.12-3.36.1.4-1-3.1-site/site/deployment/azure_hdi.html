

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using Sparkling Water with Microsoft Azure HDInsight - Beta &mdash; H2O Sparkling Water 3.36.1.4-1-3.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Use Sparkling Water in Windows Environments" href="run_on_windows.html" />
    <link rel="prev" title="Running Sparkling Water on Google Cloud Dataproc" href="sw_google_cloud_dataproc.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                3.36.1.4-1-3.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About Sparkling Water</a></li>
<li class="toctree-l1"><a class="reference internal" href="../typical_use_case.html">Typical Use Case</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Sparkling Water Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/install_and_start.html">Installing and Starting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/configuration.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="deployment.html">Deployment</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="backends.html">Sparkling Water Backends</a></li>
<li class="toctree-l2"><a class="reference internal" href="load_mojo.html">Importing H2O MOJOs from H2O-3</a></li>
<li class="toctree-l2"><a class="reference internal" href="load_mojo_pipeline.html">Importing MOJO Pipelines from Driverless AI</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysparkling_pipeline.html">Deploying PySparkling Pipeline Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="aws_emr.html">Use Sparkling Water with Amazon EMR</a></li>
<li class="toctree-l2"><a class="reference internal" href="aws_emr_edge_node.html">Use Sparkling Water with Amazon EMR from the Edge Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="terraform_emr.html">Start Sparkling Water on Amazon EMR using our Terraform Template</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes.html">Running Sparkling Water in Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="sw_azure_dbc.html">Running Sparkling Water on Databricks Azure Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="rsparkling_azure_dbc.html">Running RSparkling on Databricks Azure Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysparkling_azure_dbc.html">Running PySparkling on Databricks Azure Cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="databricks_logs.html">Download H2O Logs from Databricks Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="sw_google_cloud_dataproc.html">Running Sparkling Water on Google Cloud Dataproc</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Sparkling Water with Microsoft Azure HDInsight - Beta</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#h2o-artificial-intelligence-for-azure-hdinsight">H2O Artificial Intelligence for Azure HDInsight</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-the-h2o-ai-for-azure-hdinsight">Create the H2O AI for Azure HDInsight</a></li>
<li class="toctree-l4"><a class="reference internal" href="#troubleshooting-tips">Troubleshooting Tips</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="run_on_windows.html">Use Sparkling Water in Windows Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="rsparkling_on_windows.html">Use RSparkling in Windows Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="use_on_zeppelin.html">Sparkling Water and Zeppelin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ml/ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metrics/metrics.html">Metric Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model_details/model_details.html">Model Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parameters/parameters.html">Algorithm Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">How to…</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/devel.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pysparkling.html">PySparkling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rsparkling.html">RSparkling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migration_guide.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CHANGELOG.html">Change Log</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">H2O Sparkling Water</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="deployment.html">Deployment</a> &raquo;</li>
        
      <li>Using Sparkling Water with Microsoft Azure HDInsight - Beta</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/deployment/azure_hdi.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-sparkling-water-with-microsoft-azure-hdinsight-beta">
<h1>Using Sparkling Water with Microsoft Azure HDInsight - Beta<a class="headerlink" href="#using-sparkling-water-with-microsoft-azure-hdinsight-beta" title="Permalink to this headline">¶</a></h1>
<p>Microsoft Azure provides an important collection of cloud services, such as serverless computing, virtual machines, storage options, networking, and much more. Azure provides the tools for a user to create a Data Science environment with Sparkling Water.</p>
<p>This section describes the H2O Application for HDInsight on Microsoft Azure.</p>
<p><strong>Note</strong>: This feature is currently in Beta and should be used for testing purposes only.</p>
<div class="section" id="h2o-artificial-intelligence-for-azure-hdinsight">
<h2>H2O Artificial Intelligence for Azure HDInsight<a class="headerlink" href="#h2o-artificial-intelligence-for-azure-hdinsight" title="Permalink to this headline">¶</a></h2>
<p>The H2O Artificial Intelligence for Azure HDInsight is an application you can install during the creation of a new HDInsight cluster on Azure. This solution will install Sparkling Water on your Spark cluster, allowing you to exploit all the benefits from both Spark and H2O. The cluster can access data from Azure Blob storage and/or Azure Data Lake Store in addition to all the standard data sources that H2O supports. It also provides Jupyter Notebooks with pre-baked H2O examples for an easy jumpstart.</p>
<div class="section" id="create-the-h2o-ai-for-azure-hdinsight">
<h3>Create the H2O AI for Azure HDInsight<a class="headerlink" href="#create-the-h2o-ai-for-azure-hdinsight" title="Permalink to this headline">¶</a></h3>
<p><strong>Requirement</strong>: Python 2.7 or 3.</p>
<p>Follow the steps below to create a new H2O Artificial Intelligence for Azure HDInsight.</p>
<ol class="arabic">
<li><p>In your Azure portal at <a class="reference external" href="https://portal.azure.com">https://portal.azure.com</a>, search for H2O, and select <strong>H2O Artificial Intelligence for HDInsight</strong>.</p></li>
<li><p>Click the <strong>Create</strong> button, and follow the UI instructions.</p>
<div class="figure align-default">
<img alt="Select H2O Artificial Intelligence for HDInsight" src="../_images/azure_select_h2o_hdinsight.png" />
</div>
</li>
<li><p>In the next screen, under <strong>Basics</strong>:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Change Cluster Type to Spark 3.1.3. (Note that Sparkling Water is currently configured to work only on Spark 3.1 and above.)</p></li>
<li><p>Change Cluster Login username and password. These are used to connect to your cluster.</p></li>
<li><p>Change SSH Username and password. These are used to connect directly to the VM present in the cluster.</p></li>
<li><p>Create or specify your Resource Group</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>On the <strong>Storage</strong> tab, you can configure either an Azure Storage Account or an Azure Data Lake Store Gen2 Account. This is where your HDFS system will be located.</p></li>
</ol>
<blockquote>
<div><p><strong>Note</strong>: Refer to the following links for more information about the Azure Storage and the Azure Data Lake Store Gen2:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-use-blob-storage">Azure Storage</a></p></li>
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-use-data-lake-storage-gen2">Azure Data Lake Storage Gen2</a></p></li>
</ul>
</div></blockquote>
<ol class="arabic" start="5">
<li><p>On the <strong>H2O SparklingWater for HDInsight</strong> tab, select and accept the Terms of Use for H2O.</p>
<div class="figure align-default">
<img alt="Terms of Use for H2O" src="../_images/azure_terms_of_use.png" />
</div>
</li>
<li><p>On the <strong>Summary</strong> tab, you can edit the number of workers nodes you want on your HDI Cluster. Note that you can resize your cluster any time after creation.
If you want to change the machine profile that HDI Cluster will run on (Worker Node Size), you should choose only among the recommended ones.</p>
<div class="figure align-default">
<img alt="Worker Node Size Dialog" src="../_images/azure_recommended_machines.png" />
</div>
</li>
<li><p>On the <strong>Summary</strong> tab, click <strong>Create</strong> to begin the cluster creation. Note that the cluster creation process can take up to 30 minutes.</p></li>
<li><p>Watch the <strong>Notifications</strong> tab for the progress of the deployment. If the deployment fails, delete created resources and repeat the points above.</p>
<div class="figure align-default">
<img alt="Azure Failed Deployment" src="../_images/azure_failed_deployment.png" />
</div>
</li>
<li><p>Connect to your Jupyter Notebooks through
<strong>https://&lt;ClusterName&gt;.azurehdinsight.net/jupyter</strong>, and log in using the Cluster Login username and password that you previously created.</p></li>
<li><p>In Jupyter, you will see 3 folders: H2O-PySparkling-Examples, PySpark Examples, and Scala Examples. Select H2O-PySparkling-Examples.</p></li>
<li><p>The first step when creating a new notebook is to configure the Spark environment. This information is included in all H2O examples on Jupyter.</p></li>
</ol>
<blockquote>
<div><div class="figure align-default">
<img alt="Configure a Spark environment" src="../_images/azure_configure_spark_env.png" />
</div>
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Start the H2O Cluster.</p></li>
</ol>
<blockquote>
<div><div class="figure align-default">
<img alt="Start the H2O Cluster" src="../_images/azure_start_h2o.png" />
</div>
</div></blockquote>
<p>You are now ready to start building your H2O Models.</p>
<p><strong>Note</strong>: To connect to H2O Flow, go to <strong>https://&lt;ClusterName&gt;-h2o.apps.azurehdinsight.net:443</strong>.</p>
</div>
<div class="section" id="troubleshooting-tips">
<h3>Troubleshooting Tips<a class="headerlink" href="#troubleshooting-tips" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>If the H2O Flow link does not work and only shows the H2O documentation after the H2O cluster creation, clean your browser cache and try again.</p></li>
<li><p>Make sure that the cluster has enough resources to allocate to your Spark application. Do not allocate more than 75% of the worker’s RAM to the spark application, otherwise, it can fail.</p></li>
<li><p>For more information about the cluster available resources, go to <strong>http://&lt;ClusterName&gt;.azurehdinsight.net</strong>.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="run_on_windows.html" class="btn btn-neutral float-right" title="Use Sparkling Water in Windows Environments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="sw_google_cloud_dataproc.html" class="btn btn-neutral float-left" title="Running Sparkling Water on Google Cloud Dataproc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2020 H2O.ai
      <span class="lastupdated">
        Last updated on Aug 04, 2022.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
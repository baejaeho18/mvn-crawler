Compiled from "DefaultAggregateRepository.java"
public class io.fluxcapacitor.javaclient.persisting.repository.DefaultAggregateRepository$AnnotatedAggregateRepository<T> {
  private final java.lang.Class<T> type;

  private final io.fluxcapacitor.javaclient.persisting.caching.Cache aggregateCache;

  private final io.fluxcapacitor.javaclient.persisting.caching.Cache relationshipsCache;

  private final boolean eventSourced;

  private final boolean commitInBatch;

  private final io.fluxcapacitor.javaclient.modeling.EventPublication eventPublication;

  private final io.fluxcapacitor.javaclient.persisting.eventsourcing.SnapshotTrigger snapshotTrigger;

  private final io.fluxcapacitor.javaclient.persisting.eventsourcing.SnapshotStore snapshotStore;

  private final boolean searchable;

  private final java.lang.String collection;

  private final java.util.function.Function<io.fluxcapacitor.javaclient.modeling.Entity<?>, java.time.Instant> timestampFunction;

  private final java.lang.String idProperty;

  private final boolean ignoreUnknownEvents;

  final io.fluxcapacitor.javaclient.persisting.repository.DefaultAggregateRepository this$0;

  public io.fluxcapacitor.javaclient.persisting.repository.DefaultAggregateRepository$AnnotatedAggregateRepository(java.lang.Class<T>);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
       5: aload_0
       6: invokespecial #7                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #13                 // Field type:Ljava/lang/Class;
      14: aload_2
      15: invokestatic  #17                 // Method io/fluxcapacitor/javaclient/modeling/DefaultEntityHelper.getRootAnnotation:(Ljava/lang/Class;)Lio/fluxcapacitor/javaclient/modeling/Aggregate;
      18: astore_3
      19: aload_0
      20: aload_3
      21: invokeinterface #23,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.cached:()Z
      26: ifeq          36
      29: aload_1
      30: getfield      #29                 // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.aggregateCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
      33: goto          39
      36: getstatic     #35                 // Field io/fluxcapacitor/javaclient/persisting/caching/NoOpCache.INSTANCE:Lio/fluxcapacitor/javaclient/persisting/caching/NoOpCache;
      39: putfield      #41                 // Field aggregateCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
      42: aload_0
      43: aload_3
      44: invokeinterface #23,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.cached:()Z
      49: ifeq          59
      52: aload_1
      53: getfield      #42                 // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.relationshipsCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
      56: goto          62
      59: getstatic     #35                 // Field io/fluxcapacitor/javaclient/persisting/caching/NoOpCache.INSTANCE:Lio/fluxcapacitor/javaclient/persisting/caching/NoOpCache;
      62: putfield      #45                 // Field relationshipsCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
      65: aload_0
      66: aload_3
      67: invokeinterface #46,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.eventSourced:()Z
      72: putfield      #49                 // Field eventSourced:Z
      75: aload_0
      76: aload_3
      77: invokeinterface #52,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.commitInBatch:()Z
      82: putfield      #55                 // Field commitInBatch:Z
      85: aload_0
      86: aload_3
      87: invokeinterface #57,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.eventPublication:()Lio/fluxcapacitor/javaclient/modeling/EventPublication;
      92: putfield      #61                 // Field eventPublication:Lio/fluxcapacitor/javaclient/modeling/EventPublication;
      95: aload_3
      96: invokeinterface #46,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.eventSourced:()Z
     101: ifne          113
     104: aload_3
     105: invokeinterface #64,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.searchable:()Z
     110: ifeq          122
     113: aload_3
     114: invokeinterface #67,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.snapshotPeriod:()I
     119: goto          123
     122: iconst_1
     123: istore        4
     125: aload_0
     126: iload         4
     128: ifle          143
     131: new           #71                 // class io/fluxcapacitor/javaclient/persisting/eventsourcing/PeriodicSnapshotTrigger
     134: dup
     135: iload         4
     137: invokespecial #73                 // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/PeriodicSnapshotTrigger."<init>":(I)V
     140: goto          146
     143: getstatic     #76                 // Field io/fluxcapacitor/javaclient/persisting/eventsourcing/NoSnapshotTrigger.INSTANCE:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/NoSnapshotTrigger;
     146: putfield      #81                 // Field snapshotTrigger:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotTrigger;
     149: aload_0
     150: iload         4
     152: ifle          162
     155: aload_1
     156: getfield      #85                 // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.snapshotStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore;
     159: goto          165
     162: getstatic     #89                 // Field io/fluxcapacitor/javaclient/persisting/eventsourcing/NoOpSnapshotStore.INSTANCE:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/NoOpSnapshotStore;
     165: putfield      #94                 // Field snapshotStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore;
     168: aload_0
     169: aload_3
     170: invokeinterface #64,  1           // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.searchable:()Z
     175: putfield      #95                 // Field searchable:Z
     178: aload_0
     179: aload_3
     180: invokestatic  #97                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
     183: invokedynamic #103,  0            // InvokeDynamic #0:apply:()Ljava/util/function/Function;
     188: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     191: invokedynamic #111,  0            // InvokeDynamic #1:test:()Ljava/util/function/Predicate;
     196: invokevirtual #115                // Method java/util/Optional.filter:(Ljava/util/function/Predicate;)Ljava/util/Optional;
     199: aload_2
     200: invokevirtual #119                // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
     203: invokevirtual #125                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
     206: checkcast     #129                // class java/lang/String
     209: putfield      #131                // Field collection:Ljava/lang/String;
     212: aload_0
     213: aload_2
     214: ldc           #135                // class io/fluxcapacitor/javaclient/modeling/EntityId
     216: invokestatic  #137                // Method io/fluxcapacitor/common/reflection/ReflectionUtils.getAnnotatedProperty:(Ljava/lang/Class;Ljava/lang/Class;)Ljava/util/Optional;
     219: invokedynamic #143,  0            // InvokeDynamic #2:apply:()Ljava/util/function/Function;
     224: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     227: aconst_null
     228: invokevirtual #125                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
     231: checkcast     #129                // class java/lang/String
     234: putfield      #144                // Field idProperty:Ljava/lang/String;
     237: new           #147                // class java/util/concurrent/atomic/AtomicBoolean
     240: dup
     241: invokespecial #149                // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
     244: astore        5
     246: aload_0
     247: aload_3
     248: invokestatic  #97                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
     251: invokedynamic #150,  0            // InvokeDynamic #3:apply:()Ljava/util/function/Function;
     256: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     259: invokedynamic #151,  0            // InvokeDynamic #4:test:()Ljava/util/function/Predicate;
     264: invokevirtual #115                // Method java/util/Optional.filter:(Ljava/util/function/Predicate;)Ljava/util/Optional;
     267: aload         5
     269: invokedynamic #152,  0            // InvokeDynamic #5:apply:(Ljava/util/concurrent/atomic/AtomicBoolean;)Ljava/util/function/Function;
     274: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     277: invokedynamic #155,  0            // InvokeDynamic #6:apply:()Ljava/util/function/Function;
     282: invokevirtual #125                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
     285: checkcast     #156                // class java/util/function/Function
     288: putfield      #158                // Field timestampFunction:Ljava/util/function/Function;
     291: aload_0
     292: aload_3
     293: invokeinterface #162,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Aggregate.ignoreUnknownEvents:()Z
     298: putfield      #165                // Field ignoreUnknownEvents:Z
     301: return

  public io.fluxcapacitor.javaclient.modeling.ModifiableAggregateRoot<T> load(java.lang.Object);
    Code:
       0: aload_1
       1: aload_0
       2: aload_1
       3: invokedynamic #167,  0            // InvokeDynamic #7:get:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;Ljava/lang/Object;)Ljava/util/function/Supplier;
       8: aload_0
       9: getfield      #55                 // Field commitInBatch:Z
      12: aload_0
      13: getfield      #61                 // Field eventPublication:Lio/fluxcapacitor/javaclient/modeling/EventPublication;
      16: aload_0
      17: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      20: getfield      #171                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      23: aload_0
      24: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      27: getfield      #175                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.dispatchInterceptor:Lio/fluxcapacitor/javaclient/publishing/DispatchInterceptor;
      30: aload_0
      31: invokedynamic #179,  0            // InvokeDynamic #8:handle:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;)Lio/fluxcapacitor/javaclient/modeling/ModifiableAggregateRoot$CommitHandler;
      36: invokestatic  #183                // Method io/fluxcapacitor/javaclient/modeling/ModifiableAggregateRoot.load:(Ljava/lang/Object;Ljava/util/function/Supplier;ZLio/fluxcapacitor/javaclient/modeling/EventPublication;Lio/fluxcapacitor/javaclient/common/serialization/Serializer;Lio/fluxcapacitor/javaclient/publishing/DispatchInterceptor;Lio/fluxcapacitor/javaclient/modeling/ModifiableAggregateRoot$CommitHandler;)Lio/fluxcapacitor/javaclient/modeling/ModifiableAggregateRoot;
      39: areturn

  protected io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot<T> loadSnapshot(java.lang.Object);
    Code:
       0: invokestatic  #189                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.builder:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;
       3: aload_1
       4: invokevirtual #195                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.id:(Ljava/lang/Object;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
       7: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
      10: aload_0
      11: getfield      #13                 // Field type:Ljava/lang/Class;
      14: invokevirtual #201                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.type:(Ljava/lang/Class;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
      17: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
      20: aload_0
      21: getfield      #144                // Field idProperty:Ljava/lang/String;
      24: invokevirtual #204                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.idProperty:(Ljava/lang/String;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
      27: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
      30: aload_0
      31: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      34: getfield      #207                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.entityHelper:Lio/fluxcapacitor/javaclient/modeling/EntityHelper;
      37: invokevirtual #211                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.entityHelper:(Lio/fluxcapacitor/javaclient/modeling/EntityHelper;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
      40: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
      43: aload_0
      44: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      47: getfield      #171                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      50: invokevirtual #214                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.serializer:(Lio/fluxcapacitor/javaclient/common/serialization/Serializer;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
      53: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
      56: astore_2
      57: aload_0
      58: getfield      #95                 // Field searchable:Z
      61: ifeq          100
      64: aload_0
      65: getfield      #49                 // Field eventSourced:Z
      68: ifne          100
      71: aload_0
      72: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      75: getfield      #217                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.documentStore:Lio/fluxcapacitor/javaclient/persisting/search/DocumentStore;
      78: aload_1
      79: aload_0
      80: getfield      #131                // Field collection:Ljava/lang/String;
      83: invokeinterface #221,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/search/DocumentStore.fetchDocument:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/Optional;
      88: aload_2
      89: invokedynamic #227,  0            // InvokeDynamic #9:apply:(Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;)Ljava/util/function/Function;
      94: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      97: goto          119
     100: aload_0
     101: getfield      #94                 // Field snapshotStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore;
     104: aload_1
     105: invokeinterface #230,  2          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore.getSnapshot:(Ljava/lang/Object;)Ljava/util/Optional;
     110: aload_0
     111: invokedynamic #235,  0            // InvokeDynamic #10:apply:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;)Ljava/util/function/Function;
     116: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     119: aload_0
     120: aload_1
     121: invokedynamic #238,  0            // InvokeDynamic #11:test:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;Ljava/lang/Object;)Ljava/util/function/Predicate;
     126: invokevirtual #115                // Method java/util/Optional.filter:(Ljava/util/function/Predicate;)Ljava/util/Optional;
     129: invokedynamic #241,  0            // InvokeDynamic #12:apply:()Ljava/util/function/Function;
     134: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     137: aload_2
     138: dup
     139: invokestatic  #242                // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
     142: pop
     143: invokedynamic #247,  0            // InvokeDynamic #13:get:(Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;)Ljava/util/function/Supplier;
     148: invokevirtual #250                // Method java/util/Optional.orElseGet:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     151: checkcast     #190                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot
     154: areturn

  protected io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot<T> eventSourceModel(io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot<T>);
    Code:
       0: aload_0
       1: getfield      #49                 // Field eventSourced:Z
       4: ifeq          245
       7: aload_0
       8: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      11: getfield      #254                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.eventStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/EventStore;
      14: aload_1
      15: invokevirtual #258                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.id:()Ljava/lang/Object;
      18: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
      21: aload_1
      22: invokevirtual #264                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.sequenceNumber:()J
      25: aload_0
      26: getfield      #165                // Field ignoreUnknownEvents:Z
      29: invokeinterface #268,  5          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/EventStore.getEvents:(Ljava/lang/Object;JZ)Lio/fluxcapacitor/javaclient/persisting/eventsourcing/AggregateEventStream;
      34: astore_2
      35: aload_2
      36: invokevirtual #274                // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/AggregateEventStream.iterator:()Ljava/util/Iterator;
      39: astore_3
      40: invokestatic  #280                // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.isLoading:()Z
      43: istore        4
      45: getstatic     #285                // Field io/fluxcapacitor/javaclient/modeling/Entity.loading:Ljava/lang/ThreadLocal;
      48: iconst_1
      49: invokestatic  #289                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      52: invokevirtual #295                // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      55: aload_3
      56: invokeinterface #301,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      61: ifeq          184
      64: aload_3
      65: invokeinterface #306,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      70: checkcast     #309                // class io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage
      73: astore        5
      75: aload_1
      76: invokevirtual #311                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.isEmpty:()Z
      79: ifeq          134
      82: aload         5
      84: invokestatic  #314                // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.getAggregateType:(Lio/fluxcapacitor/common/api/HasMetadata;)Ljava/lang/Class;
      87: astore        6
      89: aload         6
      91: ifnull        134
      94: aload         6
      96: aload_0
      97: getfield      #13                 // Field type:Ljava/lang/Class;
     100: invokevirtual #318                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     103: ifne          134
     106: aload_0
     107: getfield      #13                 // Field type:Ljava/lang/Class;
     110: aload         6
     112: invokevirtual #322                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
     115: ifeq          134
     118: aload_1
     119: invokevirtual #326                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.toBuilder:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;
     122: aload         6
     124: invokevirtual #201                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.type:(Ljava/lang/Class;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
     127: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
     130: invokevirtual #329                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.build:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
     133: astore_1
     134: aload_1
     135: aload         5
     137: invokevirtual #333                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.apply:(Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
     140: astore_1
     141: goto          181
     144: astore        6
     146: new           #338                // class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
     149: dup
     150: ldc_w         #340                // String Failed to apply event %s to aggregate %s.
     153: iconst_2
     154: anewarray     #8                  // class java/lang/Object
     157: dup
     158: iconst_0
     159: aload         5
     161: invokevirtual #342                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getIndex:()Ljava/lang/Long;
     164: aastore
     165: dup
     166: iconst_1
     167: aload_1
     168: invokevirtual #258                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.id:()Ljava/lang/Object;
     171: aastore
     172: invokestatic  #346                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     175: aload         6
     177: invokespecial #350                // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     180: athrow
     181: goto          55
     184: getstatic     #285                // Field io/fluxcapacitor/javaclient/modeling/Entity.loading:Ljava/lang/ThreadLocal;
     187: iload         4
     189: invokestatic  #289                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     192: invokevirtual #295                // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
     195: goto          214
     198: astore        7
     200: getstatic     #285                // Field io/fluxcapacitor/javaclient/modeling/Entity.loading:Ljava/lang/ThreadLocal;
     203: iload         4
     205: invokestatic  #289                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     208: invokevirtual #295                // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
     211: aload         7
     213: athrow
     214: aload_1
     215: invokevirtual #326                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.toBuilder:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;
     218: aload_2
     219: invokevirtual #353                // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/AggregateEventStream.getLastSequenceNumber:()Ljava/util/Optional;
     222: aload_1
     223: invokevirtual #264                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.sequenceNumber:()J
     226: invokestatic  #357                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     229: invokevirtual #125                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
     232: checkcast     #358                // class java/lang/Long
     235: invokevirtual #362                // Method java/lang/Long.longValue:()J
     238: invokevirtual #365                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.sequenceNumber:(J)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder;
     241: invokevirtual #329                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.build:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
     244: astore_1
     245: aload_1
     246: areturn
     247: astore_2
     248: aload_2
     249: athrow
     250: astore_2
     251: new           #338                // class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
     254: dup
     255: aload_1
     256: invokevirtual #258                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.id:()Ljava/lang/Object;
     259: invokedynamic #368,  0            // InvokeDynamic #14:makeConcatWithConstants:(Ljava/lang/Object;)Ljava/lang/String;
     264: aload_2
     265: invokespecial #350                // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     268: athrow
    Exception table:
       from    to  target type
         134   141   144   Class java/lang/Throwable
          45   184   198   any
         198   200   198   any
           0   246   247   Class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
           0   246   250   Class java/lang/Throwable

  public void commit(io.fluxcapacitor.javaclient.modeling.Entity<?>, java.util.List<io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage>, io.fluxcapacitor.javaclient.modeling.Entity<?>);
    Code:
       0: aload_0
       1: getfield      #41                 // Field aggregateCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
       4: aload_1
       5: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
      10: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
      13: aload_3
      14: aload_2
      15: aload_1
      16: invokedynamic #373,  0            // InvokeDynamic #15:apply:(Lio/fluxcapacitor/javaclient/modeling/Entity;Ljava/util/List;Lio/fluxcapacitor/javaclient/modeling/Entity;)Ljava/util/function/BiFunction;
      21: invokeinterface #376,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/caching/Cache.compute:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      26: pop
      27: aload_1
      28: aload_3
      29: invokeinterface #382,  2          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.associations:(Lio/fluxcapacitor/javaclient/modeling/Entity;)Ljava/util/Set;
      34: astore        4
      36: aload_1
      37: aload_3
      38: invokeinterface #386,  2          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.dissociations:(Lio/fluxcapacitor/javaclient/modeling/Entity;)Ljava/util/Set;
      43: astore        5
      45: aload         5
      47: aload_0
      48: invokedynamic #389,  0            // InvokeDynamic #16:accept:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;)Ljava/util/function/Consumer;
      53: invokeinterface #393,  2          // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      58: aload         4
      60: aload_0
      61: aload_1
      62: invokedynamic #399,  0            // InvokeDynamic #17:accept:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;Lio/fluxcapacitor/javaclient/modeling/Entity;)Ljava/util/function/Consumer;
      67: invokeinterface #393,  2          // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      72: aload         4
      74: invokeinterface #402,  1          // InterfaceMethod java/util/Set.isEmpty:()Z
      79: ifeq          92
      82: aload         5
      84: invokeinterface #402,  1          // InterfaceMethod java/util/Set.isEmpty:()Z
      89: ifne          122
      92: aload_0
      93: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      96: getfield      #403                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.eventStoreClient:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/client/EventStoreClient;
      99: new           #407                // class io/fluxcapacitor/common/api/modeling/UpdateRelationships
     102: dup
     103: aload         4
     105: aload         5
     107: getstatic     #409                // Field io/fluxcapacitor/common/Guarantee.STORED:Lio/fluxcapacitor/common/Guarantee;
     110: invokespecial #415                // Method io/fluxcapacitor/common/api/modeling/UpdateRelationships."<init>":(Ljava/util/Set;Ljava/util/Set;Lio/fluxcapacitor/common/Guarantee;)V
     113: invokeinterface #418,  2          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/client/EventStoreClient.updateRelationships:(Lio/fluxcapacitor/common/api/modeling/UpdateRelationships;)Ljava/util/concurrent/CompletableFuture;
     118: invokevirtual #424                // Method java/util/concurrent/CompletableFuture.get:()Ljava/lang/Object;
     121: pop
     122: aload_2
     123: invokeinterface #428,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     128: ifne          200
     131: invokestatic  #431                // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.getOptionally:()Ljava/util/Optional;
     134: aload_2
     135: invokedynamic #436,  0            // InvokeDynamic #18:accept:(Ljava/util/List;)Ljava/util/function/Consumer;
     140: invokevirtual #439                // Method java/util/Optional.ifPresent:(Ljava/util/function/Consumer;)V
     143: aload_0
     144: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
     147: getfield      #254                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.eventStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/EventStore;
     150: aload_1
     151: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
     156: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
     159: new           #442                // class java/util/ArrayList
     162: dup
     163: aload_2
     164: invokespecial #444                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
     167: invokeinterface #447,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/EventStore.storeEvents:(Ljava/lang/Object;Ljava/util/List;)Ljava/util/concurrent/CompletableFuture;
     172: invokevirtual #424                // Method java/util/concurrent/CompletableFuture.get:()Ljava/lang/Object;
     175: pop
     176: aload_0
     177: getfield      #81                 // Field snapshotTrigger:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotTrigger;
     180: aload_1
     181: aload_2
     182: invokeinterface #451,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotTrigger.shouldCreateSnapshot:(Lio/fluxcapacitor/javaclient/modeling/Entity;Ljava/util/List;)Z
     187: ifeq          200
     190: aload_0
     191: getfield      #94                 // Field snapshotStore:Lio/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore;
     194: aload_1
     195: invokeinterface #457,  2          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/eventsourcing/SnapshotStore.storeSnapshot:(Lio/fluxcapacitor/javaclient/modeling/Entity;)V
     200: aload_0
     201: getfield      #95                 // Field searchable:Z
     204: ifeq          293
     207: aload_1
     208: invokeinterface #461,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.get:()Ljava/lang/Object;
     213: astore        6
     215: aload         6
     217: ifnonnull     249
     220: aload_0
     221: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
     224: getfield      #217                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.documentStore:Lio/fluxcapacitor/javaclient/persisting/search/DocumentStore;
     227: aload_1
     228: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
     233: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
     236: aload_0
     237: getfield      #131                // Field collection:Ljava/lang/String;
     240: invokeinterface #462,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/search/DocumentStore.deleteDocument:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
     245: pop
     246: goto          293
     249: aload_0
     250: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
     253: getfield      #217                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.documentStore:Lio/fluxcapacitor/javaclient/persisting/search/DocumentStore;
     256: aload         6
     258: aload_1
     259: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
     264: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
     267: aload_0
     268: getfield      #131                // Field collection:Ljava/lang/String;
     271: aload_0
     272: getfield      #158                // Field timestampFunction:Ljava/util/function/Function;
     275: aload_1
     276: invokeinterface #466,  2          // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
     281: checkcast     #468                // class java/time/Instant
     284: invokeinterface #470,  5          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/search/DocumentStore.index:(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;Ljava/time/Instant;)Ljava/util/concurrent/CompletableFuture;
     289: invokevirtual #424                // Method java/util/concurrent/CompletableFuture.get:()Ljava/lang/Object;
     292: pop
     293: goto          336
     296: astore        4
     298: getstatic     #476                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.log:Lorg/slf4j/Logger;
     301: ldc_w         #480                // String Failed to commit aggregate {}
     304: aload_1
     305: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
     310: aload         4
     312: invokeinterface #482,  4          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     317: aload_0
     318: getfield      #41                 // Field aggregateCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
     321: aload_1
     322: invokeinterface #372,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
     327: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
     330: invokeinterface #488,  2          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/caching/Cache.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     335: pop
     336: return
    Exception table:
       from    to  target type
           0   293   296   Class java/lang/Exception

  private static void lambda$commit$18(java.util.List, io.fluxcapacitor.javaclient.FluxCapacitor);
    Code:
       0: aload_0
       1: aload_1
       2: invokedynamic #491,  0            // InvokeDynamic #19:accept:(Lio/fluxcapacitor/javaclient/FluxCapacitor;)Ljava/util/function/Consumer;
       7: invokeinterface #494,  2          // InterfaceMethod java/util/List.forEach:(Ljava/util/function/Consumer;)V
      12: return

  private static void lambda$commit$17(io.fluxcapacitor.javaclient.FluxCapacitor, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage);
    Code:
       0: aload_1
       1: invokevirtual #495                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getSerializedObject:()Lio/fluxcapacitor/common/api/SerializedMessage;
       4: aload_0
       5: invokeinterface #499,  1          // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.client:()Lio/fluxcapacitor/javaclient/configuration/client/Client;
      10: invokeinterface #503,  1          // InterfaceMethod io/fluxcapacitor/javaclient/configuration/client/Client.id:()Ljava/lang/String;
      15: invokevirtual #507                // Method io/fluxcapacitor/common/api/SerializedMessage.setSource:(Ljava/lang/String;)V
      18: return

  private void lambda$commit$16(io.fluxcapacitor.javaclient.modeling.Entity, io.fluxcapacitor.common.api.modeling.Relationship);
    Code:
       0: aload_0
       1: getfield      #45                 // Field relationshipsCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
       4: aload_2
       5: invokevirtual #513                // Method io/fluxcapacitor/common/api/modeling/Relationship.getEntityId:()Ljava/lang/String;
       8: aload_2
       9: aload_1
      10: invokedynamic #518,  0            // InvokeDynamic #20:apply:(Lio/fluxcapacitor/common/api/modeling/Relationship;Lio/fluxcapacitor/javaclient/modeling/Entity;)Ljava/util/function/BiFunction;
      15: invokeinterface #521,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/caching/Cache.computeIfPresent:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      20: pop
      21: return

  private static java.util.Map lambda$commit$15(io.fluxcapacitor.common.api.modeling.Relationship, io.fluxcapacitor.javaclient.modeling.Entity, java.lang.Object, java.util.Map);
    Code:
       0: aload_3
       1: aload_0
       2: invokevirtual #524                // Method io/fluxcapacitor/common/api/modeling/Relationship.getAggregateId:()Ljava/lang/String;
       5: aload_1
       6: invokeinterface #527,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.type:()Ljava/lang/Class;
      11: invokeinterface #530,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      16: pop
      17: aload_3
      18: areturn

  private void lambda$commit$14(io.fluxcapacitor.common.api.modeling.Relationship);
    Code:
       0: aload_0
       1: getfield      #45                 // Field relationshipsCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
       4: aload_1
       5: invokevirtual #513                // Method io/fluxcapacitor/common/api/modeling/Relationship.getEntityId:()Ljava/lang/String;
       8: aload_1
       9: invokedynamic #536,  0            // InvokeDynamic #21:apply:(Lio/fluxcapacitor/common/api/modeling/Relationship;)Ljava/util/function/BiFunction;
      14: invokeinterface #521,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/caching/Cache.computeIfPresent:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      19: pop
      20: return

  private static java.util.Map lambda$commit$13(io.fluxcapacitor.common.api.modeling.Relationship, java.lang.Object, java.util.Map);
    Code:
       0: aload_2
       1: aload_0
       2: invokevirtual #524                // Method io/fluxcapacitor/common/api/modeling/Relationship.getAggregateId:()Ljava/lang/String;
       5: invokeinterface #539,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: pop
      11: aload_2
      12: areturn

  private static io.fluxcapacitor.javaclient.modeling.Entity lambda$commit$12(io.fluxcapacitor.javaclient.modeling.Entity, java.util.List, io.fluxcapacitor.javaclient.modeling.Entity, java.lang.Object, io.fluxcapacitor.javaclient.modeling.Entity);
    Code:
       0: aload         4
       2: ifnull        33
       5: aload_0
       6: invokeinterface #540,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.lastEventId:()Ljava/lang/String;
      11: aload         4
      13: invokeinterface #540,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.lastEventId:()Ljava/lang/String;
      18: invokestatic  #543                // Method java/util/Objects.equals:(Ljava/lang/Object;Ljava/lang/Object;)Z
      21: ifne          33
      24: aload_1
      25: invokeinterface #428,  1          // InterfaceMethod java/util/List.isEmpty:()Z
      30: ifeq          37
      33: aload_2
      34: goto          45
      37: aload         4
      39: aload_1
      40: invokeinterface #546,  2          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.apply:(Ljava/util/Collection;)Lio/fluxcapacitor/javaclient/modeling/Entity;
      45: areturn

  private static io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot lambda$loadSnapshot$11(io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot);
    Code:
       0: aload_0
       1: areturn

  private boolean lambda$loadSnapshot$10(java.lang.Object, io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot);
    Code:
       0: aload_2
       1: invokevirtual #549                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.get:()Ljava/lang/Object;
       4: ifnull        24
       7: aload_0
       8: getfield      #13                 // Field type:Ljava/lang/Class;
      11: aload_2
      12: invokevirtual #549                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.get:()Ljava/lang/Object;
      15: invokevirtual #550                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      18: invokevirtual #322                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      21: ifeq          28
      24: iconst_1
      25: goto          29
      28: iconst_0
      29: istore_3
      30: iload_3
      31: ifne          67
      34: getstatic     #476                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.log:Lorg/slf4j/Logger;
      37: ldc_w         #553                // String Stored aggregate snapshot with id {} of type {} is not assignable to the requested type {}. Ignoring the snapshot.
      40: iconst_3
      41: anewarray     #8                  // class java/lang/Object
      44: dup
      45: iconst_0
      46: aload_1
      47: aastore
      48: dup
      49: iconst_1
      50: aload_2
      51: invokevirtual #555                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.type:()Ljava/lang/Class;
      54: aastore
      55: dup
      56: iconst_2
      57: aload_0
      58: getfield      #13                 // Field type:Ljava/lang/Class;
      61: aastore
      62: invokeinterface #556,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      67: iload_3
      68: ireturn

  private io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot lambda$loadSnapshot$9(io.fluxcapacitor.javaclient.modeling.Entity);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
       5: getfield      #207                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.entityHelper:Lio/fluxcapacitor/javaclient/modeling/EntityHelper;
       8: aload_0
       9: getfield      #1                  // Field this$0:Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository;
      12: getfield      #171                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      15: invokestatic  #560                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.from:(Lio/fluxcapacitor/javaclient/modeling/Entity;Lio/fluxcapacitor/javaclient/modeling/EntityHelper;Lio/fluxcapacitor/javaclient/common/serialization/Serializer;)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
      18: areturn

  private static io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot lambda$loadSnapshot$8(io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot$ImmutableAggregateRootBuilder, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #564                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.value:(Ljava/lang/Object;)Lio/fluxcapacitor/javaclient/modeling/ImmutableEntity$ImmutableEntityBuilder;
       5: checkcast     #196                // class io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder
       8: invokevirtual #329                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot$ImmutableAggregateRootBuilder.build:()Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
      11: areturn

  private io.fluxcapacitor.javaclient.modeling.ImmutableEntity lambda$load$7(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #41                 // Field aggregateCache:Lio/fluxcapacitor/javaclient/persisting/caching/Cache;
       4: aload_1
       5: invokevirtual #261                // Method java/lang/Object.toString:()Ljava/lang/String;
       8: aload_0
       9: aload_1
      10: invokedynamic #567,  0            // InvokeDynamic #22:apply:(Lio/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository$AnnotatedAggregateRepository;Ljava/lang/Object;)Ljava/util/function/BiFunction;
      15: invokeinterface #376,  3          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/caching/Cache.compute:(Ljava/lang/Object;Ljava/util/function/BiFunction;)Ljava/lang/Object;
      20: checkcast     #570                // class io/fluxcapacitor/javaclient/modeling/ImmutableEntity
      23: areturn

  private io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot lambda$load$6(java.lang.Object, java.lang.Object, io.fluxcapacitor.javaclient.modeling.ImmutableAggregateRoot);
    Code:
       0: aload_3
       1: ifnull        60
       4: aload_0
       5: getfield      #13                 // Field type:Ljava/lang/Class;
       8: aload_3
       9: invokevirtual #555                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.type:()Ljava/lang/Class;
      12: invokevirtual #322                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      15: ifeq          20
      18: aload_3
      19: areturn
      20: aload_3
      21: invokevirtual #572                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.isPresent:()Z
      24: ifeq          60
      27: getstatic     #476                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.log:Lorg/slf4j/Logger;
      30: ldc_w         #575                // String Cache already contains a non-empty aggregate with id {} of type {} that is not assignable to requested type {}. This is likely to cause issues. Loading the aggregate again..
      33: iconst_3
      34: anewarray     #8                  // class java/lang/Object
      37: dup
      38: iconst_0
      39: aload_1
      40: aastore
      41: dup
      42: iconst_1
      43: aload_3
      44: invokevirtual #555                // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.type:()Ljava/lang/Class;
      47: aastore
      48: dup
      49: iconst_2
      50: aload_0
      51: getfield      #13                 // Field type:Ljava/lang/Class;
      54: aastore
      55: invokeinterface #556,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      60: aload_0
      61: aload_0
      62: aload_1
      63: invokevirtual #577                // Method loadSnapshot:(Ljava/lang/Object;)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
      66: invokevirtual #581                // Method eventSourceModel:(Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
      69: areturn

  private static java.util.function.Function lambda$new$5(java.util.concurrent.atomic.AtomicBoolean, java.lang.String);
    Code:
       0: aload_1
       1: aload_0
       2: invokedynamic #585,  0            // InvokeDynamic #23:apply:(Ljava/lang/String;Ljava/util/concurrent/atomic/AtomicBoolean;)Ljava/util/function/Function;
       7: areturn

  private static java.time.Instant lambda$new$4(java.lang.String, java.util.concurrent.atomic.AtomicBoolean, io.fluxcapacitor.javaclient.modeling.Entity);
    Code:
       0: aload_0
       1: aload_2
       2: invokeinterface #461,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.get:()Ljava/lang/Object;
       7: invokestatic  #588                // Method io/fluxcapacitor/common/reflection/ReflectionUtils.readProperty:(Ljava/lang/String;Ljava/lang/Object;)Ljava/util/Optional;
      10: invokedynamic #592,  0            // InvokeDynamic #24:apply:()Ljava/util/function/Function;
      15: invokevirtual #107                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      18: aload_1
      19: aload_2
      20: aload_0
      21: invokedynamic #593,  0            // InvokeDynamic #25:get:(Ljava/util/concurrent/atomic/AtomicBoolean;Lio/fluxcapacitor/javaclient/modeling/Entity;Ljava/lang/String;)Ljava/util/function/Supplier;
      26: invokevirtual #250                // Method java/util/Optional.orElseGet:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      29: checkcast     #468                // class java/time/Instant
      32: areturn

  private static java.time.Instant lambda$new$3(java.util.concurrent.atomic.AtomicBoolean, io.fluxcapacitor.javaclient.modeling.Entity, java.lang.String);
    Code:
       0: aload_0
       1: iconst_0
       2: iconst_1
       3: invokevirtual #596                // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
       6: ifeq          33
       9: getstatic     #476                // Field io/fluxcapacitor/javaclient/persisting/repository/DefaultAggregateRepository.log:Lorg/slf4j/Logger;
      12: ldc_w         #600                // String Aggregate type {} does not declare a timestamp property at \'{}\'
      15: aload_1
      16: invokeinterface #461,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.get:()Ljava/lang/Object;
      21: invokevirtual #550                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      24: invokevirtual #119                // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      27: aload_2
      28: invokeinterface #602,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      33: aload_1
      34: invokeinterface #604,  1          // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.timestamp:()Ljava/time/Instant;
      39: areturn

  private static java.time.Instant lambda$new$2(java.lang.Object);
    Code:
       0: aload_0
       1: checkcast     #608                // class java/time/temporal/TemporalAccessor
       4: invokestatic  #610                // Method java/time/Instant.from:(Ljava/time/temporal/TemporalAccessor;)Ljava/time/Instant;
       7: areturn

  private static boolean lambda$new$1(java.lang.String);
    Code:
       0: aload_0
       1: invokevirtual #613                // Method java/lang/String.isBlank:()Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  private static boolean lambda$new$0(java.lang.String);
    Code:
       0: aload_0
       1: invokevirtual #616                // Method java/lang/String.isEmpty:()Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn
}

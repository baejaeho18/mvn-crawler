Compiled from "DefaultSnapshotStore.java"
public class io.fluxcapacitor.javaclient.persisting.eventsourcing.DefaultSnapshotStore implements io.fluxcapacitor.javaclient.persisting.eventsourcing.SnapshotStore {
  private static final org.slf4j.Logger log;

  private final io.fluxcapacitor.javaclient.persisting.keyvalue.client.KeyValueClient keyValueClient;

  private final io.fluxcapacitor.javaclient.common.serialization.Serializer serializer;

  public <T> void storeSnapshot(io.fluxcapacitor.javaclient.modeling.Entity<T>);
    Code:
       0: aload_0
       1: getfield      #1                  // Field keyValueClient:Lio/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient;
       4: aload_0
       5: aload_1
       6: invokeinterface #7,  1            // InterfaceMethod io/fluxcapacitor/javaclient/modeling/Entity.id:()Ljava/lang/Object;
      11: invokevirtual #13                 // Method snapshotKey:(Ljava/lang/Object;)Ljava/lang/String;
      14: aload_0
      15: getfield      #17                 // Field serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      18: aload_1
      19: aconst_null
      20: aconst_null
      21: invokestatic  #21                 // Method io/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot.from:(Lio/fluxcapacitor/javaclient/modeling/Entity;Lio/fluxcapacitor/javaclient/modeling/EntityHelper;Lio/fluxcapacitor/javaclient/common/serialization/Serializer;)Lio/fluxcapacitor/javaclient/modeling/ImmutableAggregateRoot;
      24: invokeinterface #27,  2           // InterfaceMethod io/fluxcapacitor/javaclient/common/serialization/Serializer.serialize:(Ljava/lang/Object;)Lio/fluxcapacitor/common/api/Data;
      29: getstatic     #33                 // Field io/fluxcapacitor/common/Guarantee.SENT:Lio/fluxcapacitor/common/Guarantee;
      32: invokeinterface #39,  4           // InterfaceMethod io/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient.putValue:(Ljava/lang/String;Lio/fluxcapacitor/common/api/Data;Lio/fluxcapacitor/common/Guarantee;)Ljava/util/concurrent/CompletableFuture;
      37: pop
      38: goto          64
      41: astore_2
      42: new           #47                 // class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
      45: dup
      46: ldc           #49                 // String Failed to store a snapshot: %s
      48: iconst_1
      49: anewarray     #51                 // class java/lang/Object
      52: dup
      53: iconst_0
      54: aload_1
      55: aastore
      56: invokestatic  #53                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      59: aload_2
      60: invokespecial #59                 // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      63: athrow
      64: return
    Exception table:
       from    to  target type
           0    38    41   Class java/lang/Exception

  public <T> java.util.Optional<io.fluxcapacitor.javaclient.modeling.Entity<T>> getSnapshot(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #1                  // Field keyValueClient:Lio/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient;
       4: aload_0
       5: aload_1
       6: invokevirtual #13                 // Method snapshotKey:(Ljava/lang/Object;)Ljava/lang/String;
       9: invokeinterface #63,  2           // InterfaceMethod io/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient.getValue:(Ljava/lang/String;)Lio/fluxcapacitor/common/api/Data;
      14: invokestatic  #67                 // Method java/util/Optional.ofNullable:(Ljava/lang/Object;)Ljava/util/Optional;
      17: aload_0
      18: getfield      #17                 // Field serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      21: dup
      22: invokestatic  #73                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
      25: pop
      26: invokedynamic #79,  0             // InvokeDynamic #0:apply:(Lio/fluxcapacitor/javaclient/common/serialization/Serializer;)Ljava/util/function/Function;
      31: invokevirtual #83                 // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      34: areturn
      35: astore_2
      36: getstatic     #89                 // Field log:Lorg/slf4j/Logger;
      39: ldc           #93                 // String Failed to deserialize snapshot for {}. Deleting snapshot.
      41: aload_1
      42: aload_2
      43: invokeinterface #95,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      48: aload_0
      49: aload_1
      50: invokevirtual #101                // Method deleteSnapshot:(Ljava/lang/Object;)V
      53: invokestatic  #105                // Method java/util/Optional.empty:()Ljava/util/Optional;
      56: areturn
      57: astore_2
      58: new           #47                 // class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
      61: dup
      62: ldc           #109                // String Failed to obtain snapshot for aggregate %s
      64: iconst_1
      65: anewarray     #51                 // class java/lang/Object
      68: dup
      69: iconst_0
      70: aload_1
      71: aastore
      72: invokestatic  #53                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      75: aload_2
      76: invokespecial #59                 // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      79: athrow
    Exception table:
       from    to  target type
           0    34    35   Class io/fluxcapacitor/javaclient/common/serialization/DeserializationException
           0    34    57   Class java/lang/Exception

  public void deleteSnapshot(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #1                  // Field keyValueClient:Lio/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient;
       4: aload_0
       5: aload_1
       6: invokevirtual #13                 // Method snapshotKey:(Ljava/lang/Object;)Ljava/lang/String;
       9: invokeinterface #111,  2          // InterfaceMethod io/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient.deleteValue:(Ljava/lang/String;)Ljava/util/concurrent/CompletableFuture;
      14: pop
      15: goto          41
      18: astore_2
      19: new           #47                 // class io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException
      22: dup
      23: ldc           #115                // String Failed to delete snapshot for aggregate %s
      25: iconst_1
      26: anewarray     #51                 // class java/lang/Object
      29: dup
      30: iconst_0
      31: aload_1
      32: aastore
      33: invokestatic  #53                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      36: aload_2
      37: invokespecial #59                 // Method io/fluxcapacitor/javaclient/persisting/eventsourcing/EventSourcingException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      40: athrow
      41: return
    Exception table:
       from    to  target type
           0    15    18   Class java/lang/Exception

  protected java.lang.String snapshotKey(java.lang.Object);
    Code:
       0: aload_1
       1: invokedynamic #117,  0            // InvokeDynamic #1:makeConcatWithConstants:(Ljava/lang/Object;)Ljava/lang/String;
       6: areturn

  public io.fluxcapacitor.javaclient.persisting.eventsourcing.DefaultSnapshotStore(io.fluxcapacitor.javaclient.persisting.keyvalue.client.KeyValueClient, io.fluxcapacitor.javaclient.common.serialization.Serializer);
    Code:
       0: aload_0
       1: invokespecial #120                // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #1                  // Field keyValueClient:Lio/fluxcapacitor/javaclient/persisting/keyvalue/client/KeyValueClient;
       9: aload_0
      10: aload_2
      11: putfield      #17                 // Field serializer:Lio/fluxcapacitor/javaclient/common/serialization/Serializer;
      14: return

  static {};
    Code:
       0: ldc           #2                  // class io/fluxcapacitor/javaclient/persisting/eventsourcing/DefaultSnapshotStore
       2: invokestatic  #123                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #89                 // Field log:Lorg/slf4j/Logger;
       8: return
}

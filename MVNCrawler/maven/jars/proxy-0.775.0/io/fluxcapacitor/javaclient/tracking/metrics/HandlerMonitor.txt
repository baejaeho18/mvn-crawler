Compiled from "HandlerMonitor.java"
public class io.fluxcapacitor.javaclient.tracking.metrics.HandlerMonitor implements io.fluxcapacitor.javaclient.tracking.handling.HandlerInterceptor {
  private static final org.slf4j.Logger log;

  public io.fluxcapacitor.javaclient.tracking.metrics.HandlerMonitor();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public java.util.function.Function<io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, java.lang.Object> interceptHandling(java.util.function.Function<io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, java.lang.Object>, io.fluxcapacitor.common.handling.HandlerInvoker);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokedynamic #7,  0              // InvokeDynamic #0:apply:(Lio/fluxcapacitor/javaclient/tracking/metrics/HandlerMonitor;Ljava/util/function/Function;Lio/fluxcapacitor/common/handling/HandlerInvoker;)Ljava/util/function/Function;
       8: areturn

  protected void publishMetrics(io.fluxcapacitor.common.handling.HandlerInvoker, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, boolean, java.time.Instant, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #11                 // Method logMetrics:(Lio/fluxcapacitor/common/handling/HandlerInvoker;)Z
       5: ifeq          113
       8: invokestatic  #17                 // Method io/fluxcapacitor/javaclient/tracking/Tracker.current:()Ljava/util/Optional;
      11: invokedynamic #23,  0             // InvokeDynamic #1:apply:()Ljava/util/function/Function;
      16: invokevirtual #26                 // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      19: aload_2
      20: invokedynamic #32,  0             // InvokeDynamic #2:get:(Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;)Ljava/util/function/Supplier;
      25: invokevirtual #36                 // Method java/util/Optional.orElseGet:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      28: checkcast     #40                 // class java/lang/String
      31: astore        6
      33: aload         5
      35: instanceof    #42                 // class java/util/concurrent/CompletableFuture
      38: ifeq          52
      41: aload         5
      43: checkcast     #42                 // class java/util/concurrent/CompletableFuture
      46: invokevirtual #44                 // Method java/util/concurrent/CompletableFuture.isDone:()Z
      49: ifeq          56
      52: iconst_1
      53: goto          57
      56: iconst_0
      57: istore        7
      59: invokestatic  #48                 // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.getOptionally:()Ljava/util/Optional;
      62: aload         6
      64: aload_1
      65: aload_2
      66: iload_3
      67: aload         4
      69: iload         7
      71: invokedynamic #53,  0             // InvokeDynamic #3:accept:(Ljava/lang/String;Lio/fluxcapacitor/common/handling/HandlerInvoker;Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;ZLjava/time/Instant;Z)Ljava/util/function/Consumer;
      76: invokevirtual #57                 // Method java/util/Optional.ifPresent:(Ljava/util/function/Consumer;)V
      79: iload         7
      81: ifne          113
      84: invokestatic  #61                 // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.currentCorrelationData:()Ljava/util/Map;
      87: astore        8
      89: aload         5
      91: checkcast     #65                 // class java/util/concurrent/CompletionStage
      94: aload_2
      95: aload         6
      97: aload_1
      98: aload         4
     100: aload         8
     102: invokedynamic #67,  0             // InvokeDynamic #4:accept:(Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;Ljava/lang/String;Lio/fluxcapacitor/common/handling/HandlerInvoker;Ljava/time/Instant;Ljava/util/Map;)Ljava/util/function/BiConsumer;
     107: invokeinterface #70,  2           // InterfaceMethod java/util/concurrent/CompletionStage.whenComplete:(Ljava/util/function/BiConsumer;)Ljava/util/concurrent/CompletionStage;
     112: pop
     113: goto          130
     116: astore        6
     118: getstatic     #76                 // Field log:Lorg/slf4j/Logger;
     121: ldc           #80                 // String Failed to publish handler metrics
     123: aload         6
     125: invokeinterface #82,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     130: return
    Exception table:
       from    to  target type
           0   113   116   Class java/lang/Exception

  protected boolean logMetrics(io.fluxcapacitor.common.handling.HandlerInvoker);
    Code:
       0: aload_1
       1: invokeinterface #88,  1           // InterfaceMethod io/fluxcapacitor/common/handling/HandlerInvoker.getMethodAnnotation:()Ljava/lang/annotation/Annotation;
       6: astore_3
       7: aload_3
       8: instanceof    #94                 // class io/fluxcapacitor/javaclient/tracking/handling/HandleSelf
      11: ifeq          28
      14: aload_3
      15: checkcast     #94                 // class io/fluxcapacitor/javaclient/tracking/handling/HandleSelf
      18: astore_2
      19: aload_2
      20: invokeinterface #96,  1           // InterfaceMethod io/fluxcapacitor/javaclient/tracking/handling/HandleSelf.logMetrics:()Z
      25: goto          67
      28: aload_1
      29: invokeinterface #98,  1           // InterfaceMethod io/fluxcapacitor/common/handling/HandlerInvoker.getTarget:()Ljava/lang/Object;
      34: invokevirtual #102                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      37: aload_1
      38: invokeinterface #106,  1          // InterfaceMethod io/fluxcapacitor/common/handling/HandlerInvoker.getMethod:()Ljava/lang/reflect/Executable;
      43: invokestatic  #110                // Method io/fluxcapacitor/javaclient/common/ClientUtils.getLocalHandlerAnnotation:(Ljava/lang/Class;Ljava/lang/reflect/Executable;)Ljava/util/Optional;
      46: invokedynamic #116,  0            // InvokeDynamic #5:apply:()Ljava/util/function/Function;
      51: invokevirtual #26                 // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      54: iconst_1
      55: invokestatic  #117                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      58: invokevirtual #123                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
      61: checkcast     #118                // class java/lang/Boolean
      64: invokevirtual #127                // Method java/lang/Boolean.booleanValue:()Z
      67: ireturn

  private static void lambda$publishMetrics$5(io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, java.lang.String, io.fluxcapacitor.common.handling.HandlerInvoker, java.time.Instant, java.util.Map, java.lang.Object, java.lang.Throwable);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload         6
       5: aload_3
       6: aload         4
       8: invokedynamic #130,  0            // InvokeDynamic #6:accept:(Ljava/lang/String;Lio/fluxcapacitor/common/handling/HandlerInvoker;Ljava/lang/Throwable;Ljava/time/Instant;Ljava/util/Map;)Ljava/util/function/Consumer;
      13: invokevirtual #133                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.run:(Ljava/util/function/Consumer;)V
      16: return

  private static void lambda$publishMetrics$4(java.lang.String, io.fluxcapacitor.common.handling.HandlerInvoker, java.lang.Throwable, java.time.Instant, java.util.Map, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage);
    Code:
       0: invokestatic  #48                 // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.getOptionally:()Ljava/util/Optional;
       3: aload_0
       4: aload_1
       5: aload         5
       7: aload_2
       8: aload_3
       9: aload         4
      11: invokedynamic #138,  0            // InvokeDynamic #7:accept:(Ljava/lang/String;Lio/fluxcapacitor/common/handling/HandlerInvoker;Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;Ljava/lang/Throwable;Ljava/time/Instant;Ljava/util/Map;)Ljava/util/function/Consumer;
      16: invokevirtual #57                 // Method java/util/Optional.ifPresent:(Ljava/util/function/Consumer;)V
      19: return

  private static void lambda$publishMetrics$3(java.lang.String, io.fluxcapacitor.common.handling.HandlerInvoker, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, java.lang.Throwable, java.time.Instant, java.util.Map, io.fluxcapacitor.javaclient.FluxCapacitor);
    Code:
       0: aload         6
       2: invokeinterface #141,  1          // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.metricsGateway:()Lio/fluxcapacitor/javaclient/publishing/MetricsGateway;
       7: new           #145                // class io/fluxcapacitor/javaclient/tracking/metrics/CompleteMessageEvent
      10: dup
      11: aload_0
      12: aload_1
      13: invokeinterface #98,  1           // InterfaceMethod io/fluxcapacitor/common/handling/HandlerInvoker.getTarget:()Ljava/lang/Object;
      18: invokevirtual #102                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      21: invokevirtual #147                // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      24: aload_2
      25: invokevirtual #153                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getIndex:()Ljava/lang/Long;
      28: aload_2
      29: invokevirtual #157                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getType:()Ljava/lang/String;
      32: aload_3
      33: ifnull        40
      36: iconst_1
      37: goto          41
      40: iconst_0
      41: aload         4
      43: invokestatic  #160                // Method java/time/Instant.now:()Ljava/time/Instant;
      46: getstatic     #166                // Field java/time/temporal/ChronoUnit.NANOS:Ljava/time/temporal/ChronoUnit;
      49: invokevirtual #172                // Method java/time/Instant.until:(Ljava/time/temporal/Temporal;Ljava/time/temporal/TemporalUnit;)J
      52: invokespecial #176                // Method io/fluxcapacitor/javaclient/tracking/metrics/CompleteMessageEvent."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Long;Ljava/lang/String;ZJ)V
      55: aload         5
      57: invokestatic  #179                // Method io/fluxcapacitor/common/api/Metadata.of:(Ljava/util/Map;)Lio/fluxcapacitor/common/api/Metadata;
      60: invokeinterface #185,  3          // InterfaceMethod io/fluxcapacitor/javaclient/publishing/MetricsGateway.publish:(Ljava/lang/Object;Lio/fluxcapacitor/common/api/Metadata;)V
      65: return

  private static void lambda$publishMetrics$2(java.lang.String, io.fluxcapacitor.common.handling.HandlerInvoker, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage, boolean, java.time.Instant, boolean, io.fluxcapacitor.javaclient.FluxCapacitor);
    Code:
       0: aload         6
       2: invokeinterface #141,  1          // InterfaceMethod io/fluxcapacitor/javaclient/FluxCapacitor.metricsGateway:()Lio/fluxcapacitor/javaclient/publishing/MetricsGateway;
       7: new           #191                // class io/fluxcapacitor/javaclient/tracking/metrics/HandleMessageEvent
      10: dup
      11: aload_0
      12: aload_1
      13: invokeinterface #98,  1           // InterfaceMethod io/fluxcapacitor/common/handling/HandlerInvoker.getTarget:()Ljava/lang/Object;
      18: invokevirtual #102                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      21: invokevirtual #147                // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      24: aload_2
      25: invokevirtual #153                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getIndex:()Ljava/lang/Long;
      28: aload_2
      29: invokevirtual #157                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getType:()Ljava/lang/String;
      32: iload_3
      33: aload         4
      35: invokestatic  #160                // Method java/time/Instant.now:()Ljava/time/Instant;
      38: getstatic     #166                // Field java/time/temporal/ChronoUnit.NANOS:Ljava/time/temporal/ChronoUnit;
      41: invokevirtual #172                // Method java/time/Instant.until:(Ljava/time/temporal/Temporal;Ljava/time/temporal/TemporalUnit;)J
      44: iload         5
      46: invokespecial #193                // Method io/fluxcapacitor/javaclient/tracking/metrics/HandleMessageEvent."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Long;Ljava/lang/String;ZJZ)V
      49: invokeinterface #196,  2          // InterfaceMethod io/fluxcapacitor/javaclient/publishing/MetricsGateway.publish:(Ljava/lang/Object;)V
      54: return

  private static java.lang.String lambda$publishMetrics$1(io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage);
    Code:
       0: aload_0
       1: invokevirtual #199                // Method io/fluxcapacitor/javaclient/common/serialization/DeserializingMessage.getMessageType:()Lio/fluxcapacitor/common/MessageType;
       4: invokedynamic #203,  0            // InvokeDynamic #8:makeConcatWithConstants:(Lio/fluxcapacitor/common/MessageType;)Ljava/lang/String;
       9: areturn

  private java.lang.Object lambda$interceptHandling$0(java.util.function.Function, io.fluxcapacitor.common.handling.HandlerInvoker, io.fluxcapacitor.javaclient.common.serialization.DeserializingMessage);
    Code:
       0: invokestatic  #160                // Method java/time/Instant.now:()Ljava/time/Instant;
       3: astore        4
       5: aload_1
       6: aload_3
       7: invokeinterface #207,  2          // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      12: astore        5
      14: aload_0
      15: aload_2
      16: aload_3
      17: iconst_0
      18: aload         4
      20: aload         5
      22: invokevirtual #211                // Method publishMetrics:(Lio/fluxcapacitor/common/handling/HandlerInvoker;Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;ZLjava/time/Instant;Ljava/lang/Object;)V
      25: aload         5
      27: areturn
      28: astore        5
      30: aload_0
      31: aload_2
      32: aload_3
      33: iconst_1
      34: aload         4
      36: aload         5
      38: invokevirtual #211                // Method publishMetrics:(Lio/fluxcapacitor/common/handling/HandlerInvoker;Lio/fluxcapacitor/javaclient/common/serialization/DeserializingMessage;ZLjava/time/Instant;Ljava/lang/Object;)V
      41: aload         5
      43: athrow
    Exception table:
       from    to  target type
           5    27    28   Class java/lang/Throwable

  static {};
    Code:
       0: ldc           #12                 // class io/fluxcapacitor/javaclient/tracking/metrics/HandlerMonitor
       2: invokestatic  #217                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #76                 // Field log:Lorg/slf4j/Logger;
       8: return
}

Compiled from "EndpointSessionHandler.java"
public final class io.undertow.websockets.jsr.EndpointSessionHandler implements io.undertow.websockets.WebSocketConnectionCallback {
  private final io.undertow.websockets.jsr.ServerWebSocketContainer container;

  public io.undertow.websockets.jsr.EndpointSessionHandler(io.undertow.websockets.jsr.ServerWebSocketContainer);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       9: return

  io.undertow.websockets.jsr.ServerWebSocketContainer getContainer();
    Code:
       0: aload_0
       1: getfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       4: areturn

  public void onConnect(io.undertow.websockets.spi.WebSocketHttpExchange, io.undertow.websockets.core.WebSocketChannel);
    Code:
       0: aload_2
       1: invokestatic  #3                  // Method io/undertow/websockets/jsr/handshake/HandshakeUtil.getConfig:(Lio/undertow/websockets/core/WebSocketChannel;)Lio/undertow/websockets/jsr/ConfiguredServerEndpoint;
       4: astore_3
       5: aload_0
       6: getfield      #2                  // Field container:Lio/undertow/websockets/jsr/ServerWebSocketContainer;
       9: invokevirtual #4                  // Method io/undertow/websockets/jsr/ServerWebSocketContainer.isClosed:()Z
      12: ifeq          24
      15: aload_2
      16: invokevirtual #5                  // Method io/undertow/websockets/core/WebSocketChannel.sendClose:()V
      19: aload_2
      20: invokevirtual #6                  // Method io/undertow/websockets/core/WebSocketChannel.resumeReceives:()V
      23: return
      24: aload_3
      25: invokevirtual #7                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointFactory:()Lio/undertow/servlet/api/InstanceFactory;
      28: astore        4
      30: aload_3
      31: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljakarta/websocket/server/ServerEndpointConfig;
      34: invokeinterface #9,  1            // InterfaceMethod jakarta/websocket/server/ServerEndpointConfig.getConfigurator:()Ljakarta/websocket/server/ServerEndpointConfig$Configurator;
      39: astore        5
      41: aload         4
      43: invokestatic  #10                 // Method io/undertow/websockets/jsr/DefaultContainerConfigurator.setCurrentInstanceFactory:(Lio/undertow/servlet/api/InstanceFactory;)V
      46: aload         5
      48: aload_3
      49: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljakarta/websocket/server/ServerEndpointConfig;
      52: invokeinterface #11,  1           // InterfaceMethod jakarta/websocket/server/ServerEndpointConfig.getEndpointClass:()Ljava/lang/Class;
      57: invokevirtual #12                 // Method jakarta/websocket/server/ServerEndpointConfig$Configurator.getEndpointInstance:(Ljava/lang/Class;)Ljava/lang/Object;
      60: astore        7
      62: invokestatic  #13                 // Method io/undertow/websockets/jsr/DefaultContainerConfigurator.clearCurrentInstanceFactory:()Lio/undertow/servlet/api/InstanceHandle;
      65: astore        8
      67: aload         8
      69: ifnonnull     86
      72: new           #14                 // class io/undertow/servlet/util/ImmediateInstanceHandle
      75: dup
      76: aload         7
      78: invokespecial #15                 // Method io/undertow/servlet/util/ImmediateInstanceHandle."<init>":(Ljava/lang/Object;)V
      81: astore        6
      83: goto          119
      86: aload         8
      88: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
      93: aload         7
      95: if_acmpne     105
      98: aload         8
     100: astore        6
     102: goto          119
     105: new           #17                 // class io/undertow/websockets/jsr/EndpointSessionHandler$1
     108: dup
     109: aload_0
     110: aload         7
     112: aload         8
     114: invokespecial #18                 // Method io/undertow/websockets/jsr/EndpointSessionHandler$1."<init>":(Lio/undertow/websockets/jsr/EndpointSessionHandler;Ljava/lang/Object;Lio/undertow/servlet/api/InstanceHandle;)V
     117: astore        6
     119: aload_1
     120: getstatic     #19                 // Field io/undertow/servlet/handlers/ServletRequestContext.ATTACHMENT_KEY:Lio/undertow/util/AttachmentKey;
     123: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     128: checkcast     #21                 // class io/undertow/servlet/handlers/ServletRequestContext
     131: astore        9
     133: aload_1
     134: getstatic     #22                 // Field io/undertow/websockets/jsr/handshake/HandshakeUtil.PRINCIPAL:Lio/undertow/util/AttachmentKey;
     137: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     142: checkcast     #23                 // class java/security/Principal
     145: astore        10
     147: aload         10
     149: ifnonnull     191
     152: aload         9
     154: invokevirtual #24                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletRequest:()Ljakarta/servlet/ServletRequest;
     157: instanceof    #25                 // class jakarta/servlet/http/HttpServletRequest
     160: ifeq          181
     163: aload         9
     165: invokevirtual #24                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletRequest:()Ljakarta/servlet/ServletRequest;
     168: checkcast     #25                 // class jakarta/servlet/http/HttpServletRequest
     171: invokeinterface #26,  1           // InterfaceMethod jakarta/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
     176: astore        10
     178: goto          191
     181: aload         9
     183: invokevirtual #27                 // Method io/undertow/servlet/handlers/ServletRequestContext.getOriginalRequest:()Lio/undertow/servlet/spec/HttpServletRequestImpl;
     186: invokevirtual #28                 // Method io/undertow/servlet/spec/HttpServletRequestImpl.getUserPrincipal:()Ljava/security/Principal;
     189: astore        10
     191: aload_3
     192: invokevirtual #29                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getAnnotatedEndpointFactory:()Lio/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory;
     195: ifnull        226
     198: aload_3
     199: invokevirtual #29                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getAnnotatedEndpointFactory:()Lio/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory;
     202: aload         6
     204: invokevirtual #30                 // Method io/undertow/websockets/jsr/annotated/AnnotatedEndpointFactory.createInstance:(Lio/undertow/servlet/api/InstanceHandle;)Lio/undertow/websockets/jsr/annotated/AnnotatedEndpoint;
     207: astore        12
     209: new           #31                 // class io/undertow/websockets/jsr/EndpointSessionHandler$2
     212: dup
     213: aload_0
     214: aload         12
     216: aload         6
     218: invokespecial #32                 // Method io/undertow/websockets/jsr/EndpointSessionHandler$2."<init>":(Lio/undertow/websockets/jsr/EndpointSessionHandler;Lio/undertow/websockets/jsr/annotated/AnnotatedEndpoint;Lio/undertow/servlet/api/InstanceHandle;)V
     221: astore        11
     223: goto          230
     226: aload         6
     228: astore        11
     230: aload_2
     231: invokevirtual #33                 // Method io/undertow/websockets/core/WebSocketChannel.getRequestScheme:()Ljava/lang/String;
     234: invokedynamic #34,  0             // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;
     239: astore        12
     241: aload_1
     242: ldc           #36                 // String Host
     244: invokeinterface #37,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getRequestHeader:(Ljava/lang/String;)Ljava/lang/String;
     249: astore        13
     251: aload_1
     252: invokeinterface #38,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getRequestURI:()Ljava/lang/String;
     257: astore        14
     259: new           #39                 // class io/undertow/websockets/jsr/UndertowSession
     262: dup
     263: aload_2
     264: aload         12
     266: aload         13
     268: aload         14
     270: invokedynamic #40,  0             // InvokeDynamic #1:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     275: invokestatic  #41                 // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
     278: aload_1
     279: getstatic     #42                 // Field io/undertow/websockets/jsr/handshake/HandshakeUtil.PATH_PARAMS:Lio/undertow/util/AttachmentKey;
     282: invokeinterface #20,  2           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     287: checkcast     #43                 // class java/util/Map
     290: aload_1
     291: invokeinterface #44,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getRequestParameters:()Ljava/util/Map;
     296: aload_0
     297: aload         10
     299: aload         11
     301: aload_3
     302: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljakarta/websocket/server/ServerEndpointConfig;
     305: aload_1
     306: invokeinterface #45,  1           // InterfaceMethod io/undertow/websockets/spi/WebSocketHttpExchange.getQueryString:()Ljava/lang/String;
     311: aload_3
     312: invokevirtual #46                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEncodingFactory:()Lio/undertow/websockets/jsr/EncodingFactory;
     315: aload_3
     316: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljakarta/websocket/server/ServerEndpointConfig;
     319: invokevirtual #47                 // Method io/undertow/websockets/jsr/EncodingFactory.createEncoding:(Ljakarta/websocket/EndpointConfig;)Lio/undertow/websockets/jsr/Encoding;
     322: aload_3
     323: aload_2
     324: invokevirtual #48                 // Method io/undertow/websockets/core/WebSocketChannel.getSubProtocol:()Ljava/lang/String;
     327: invokestatic  #49                 // Method java/util/Collections.emptyList:()Ljava/util/List;
     330: aconst_null
     331: invokespecial #50                 // Method io/undertow/websockets/jsr/UndertowSession."<init>":(Lio/undertow/websockets/core/WebSocketChannel;Ljava/net/URI;Ljava/util/Map;Ljava/util/Map;Lio/undertow/websockets/jsr/EndpointSessionHandler;Ljava/security/Principal;Lio/undertow/servlet/api/InstanceHandle;Ljakarta/websocket/EndpointConfig;Ljava/lang/String;Lio/undertow/websockets/jsr/Encoding;Lio/undertow/websockets/jsr/SessionContainer;Ljava/lang/String;Ljava/util/List;Lio/undertow/websockets/client/WebSocketClient$ConnectionBuilder;)V
     334: astore        15
     336: aload_3
     337: aload         15
     339: invokevirtual #51                 // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.addOpenSession:(Ljakarta/websocket/Session;)V
     342: aload         15
     344: aload_0
     345: invokevirtual #52                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     348: invokevirtual #53                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxBinaryMessageBufferSize:()I
     351: invokevirtual #54                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxBinaryMessageBufferSize:(I)V
     354: aload         15
     356: aload_0
     357: invokevirtual #52                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     360: invokevirtual #55                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxTextMessageBufferSize:()I
     363: invokevirtual #56                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxTextMessageBufferSize:(I)V
     366: aload         15
     368: aload_0
     369: invokevirtual #52                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     372: invokevirtual #57                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultMaxSessionIdleTimeout:()J
     375: invokevirtual #58                 // Method io/undertow/websockets/jsr/UndertowSession.setMaxIdleTimeout:(J)V
     378: aload         15
     380: invokevirtual #59                 // Method io/undertow/websockets/jsr/UndertowSession.getAsyncRemote:()Ljakarta/websocket/RemoteEndpoint$Async;
     383: aload_0
     384: invokevirtual #52                 // Method getContainer:()Lio/undertow/websockets/jsr/ServerWebSocketContainer;
     387: invokevirtual #60                 // Method io/undertow/websockets/jsr/ServerWebSocketContainer.getDefaultAsyncSendTimeout:()J
     390: invokeinterface #61,  3           // InterfaceMethod jakarta/websocket/RemoteEndpoint$Async.setSendTimeout:(J)V
     395: aload         11
     397: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
     402: checkcast     #62                 // class jakarta/websocket/Endpoint
     405: aload         15
     407: aload_3
     408: invokevirtual #8                  // Method io/undertow/websockets/jsr/ConfiguredServerEndpoint.getEndpointConfiguration:()Ljakarta/websocket/server/ServerEndpointConfig;
     411: invokevirtual #63                 // Method jakarta/websocket/Endpoint.onOpen:(Ljakarta/websocket/Session;Ljakarta/websocket/EndpointConfig;)V
     414: goto          441
     417: astore        16
     419: aload         11
     421: invokeinterface #16,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
     426: checkcast     #62                 // class jakarta/websocket/Endpoint
     429: aload         15
     431: aload         16
     433: invokevirtual #65                 // Method jakarta/websocket/Endpoint.onError:(Ljakarta/websocket/Session;Ljava/lang/Throwable;)V
     436: aload         15
     438: invokestatic  #66                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     441: aload_2
     442: invokevirtual #6                  // Method io/undertow/websockets/core/WebSocketChannel.resumeReceives:()V
     445: goto          464
     448: astore        4
     450: getstatic     #67                 // Field io/undertow/websockets/jsr/JsrWebSocketLogger.REQUEST_LOGGER:Lio/undertow/websockets/jsr/JsrWebSocketLogger;
     453: aload         4
     455: invokeinterface #68,  2           // InterfaceMethod io/undertow/websockets/jsr/JsrWebSocketLogger.endpointCreationFailed:(Ljava/lang/Exception;)V
     460: aload_2
     461: invokestatic  #66                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     464: return
    Exception table:
       from    to  target type
         395   414   417   Class java/lang/Exception
           5    23   448   Class java/lang/Exception
          24   445   448   Class java/lang/Exception
}

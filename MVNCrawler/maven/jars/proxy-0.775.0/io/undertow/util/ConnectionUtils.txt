Compiled from "ConnectionUtils.java"
public class io.undertow.util.ConnectionUtils {
  private static final long MAX_DRAIN_TIME;

  private io.undertow.util.ConnectionUtils();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void cleanClose(org.xnio.StreamConnection, java.io.Closeable...);
    Code:
       0: aload_0
       1: invokevirtual #2                  // Method org/xnio/StreamConnection.getSinkChannel:()Lorg/xnio/conduits/ConduitStreamSinkChannel;
       4: invokevirtual #3                  // Method org/xnio/conduits/ConduitStreamSinkChannel.shutdownWrites:()V
       7: aload_0
       8: invokevirtual #2                  // Method org/xnio/StreamConnection.getSinkChannel:()Lorg/xnio/conduits/ConduitStreamSinkChannel;
      11: invokevirtual #4                  // Method org/xnio/conduits/ConduitStreamSinkChannel.flush:()Z
      14: ifne          55
      17: aload_0
      18: invokevirtual #2                  // Method org/xnio/StreamConnection.getSinkChannel:()Lorg/xnio/conduits/ConduitStreamSinkChannel;
      21: new           #5                  // class io/undertow/util/ConnectionUtils$1
      24: dup
      25: aload_0
      26: aload_1
      27: invokespecial #6                  // Method io/undertow/util/ConnectionUtils$1."<init>":(Lorg/xnio/StreamConnection;[Ljava/io/Closeable;)V
      30: new           #7                  // class io/undertow/util/ConnectionUtils$2
      33: dup
      34: aload_0
      35: aload_1
      36: invokespecial #8                  // Method io/undertow/util/ConnectionUtils$2."<init>":(Lorg/xnio/StreamConnection;[Ljava/io/Closeable;)V
      39: invokestatic  #9                  // Method org/xnio/ChannelListeners.flushingChannelListener:(Lorg/xnio/ChannelListener;Lorg/xnio/ChannelExceptionHandler;)Lorg/xnio/ChannelListener;
      42: invokevirtual #10                 // Method org/xnio/conduits/ConduitStreamSinkChannel.setWriteListener:(Lorg/xnio/ChannelListener;)V
      45: aload_0
      46: invokevirtual #2                  // Method org/xnio/StreamConnection.getSinkChannel:()Lorg/xnio/conduits/ConduitStreamSinkChannel;
      49: invokevirtual #11                 // Method org/xnio/conduits/ConduitStreamSinkChannel.resumeWrites:()V
      52: goto          60
      55: aload_0
      56: aload_1
      57: invokestatic  #12                 // Method doDrain:(Lorg/xnio/StreamConnection;[Ljava/io/Closeable;)V
      60: goto          110
      63: astore_2
      64: aload_2
      65: instanceof    #14                 // class java/io/IOException
      68: ifeq          86
      71: getstatic     #15                 // Field io/undertow/UndertowLogger.REQUEST_IO_LOGGER:Lio/undertow/UndertowLogger;
      74: aload_2
      75: checkcast     #14                 // class java/io/IOException
      78: invokeinterface #16,  2           // InterfaceMethod io/undertow/UndertowLogger.ioException:(Ljava/io/IOException;)V
      83: goto          102
      86: getstatic     #15                 // Field io/undertow/UndertowLogger.REQUEST_IO_LOGGER:Lio/undertow/UndertowLogger;
      89: new           #14                 // class java/io/IOException
      92: dup
      93: aload_2
      94: invokespecial #17                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
      97: invokeinterface #16,  2           // InterfaceMethod io/undertow/UndertowLogger.ioException:(Ljava/io/IOException;)V
     102: aload_0
     103: invokestatic  #18                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     106: aload_1
     107: invokestatic  #19                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
     110: return
    Exception table:
       from    to  target type
           0    60    63   Class java/lang/Throwable

  private static void doDrain(org.xnio.StreamConnection, java.io.Closeable...);
    Code:
       0: aload_0
       1: invokevirtual #20                 // Method org/xnio/StreamConnection.getSourceChannel:()Lorg/xnio/conduits/ConduitStreamSourceChannel;
       4: invokevirtual #21                 // Method org/xnio/conduits/ConduitStreamSourceChannel.isOpen:()Z
       7: ifne          19
      10: aload_0
      11: invokestatic  #18                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      14: aload_1
      15: invokestatic  #19                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
      18: return
      19: iconst_1
      20: invokestatic  #22                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      23: astore_2
      24: aload_0
      25: invokevirtual #20                 // Method org/xnio/StreamConnection.getSourceChannel:()Lorg/xnio/conduits/ConduitStreamSourceChannel;
      28: aload_2
      29: invokevirtual #23                 // Method org/xnio/conduits/ConduitStreamSourceChannel.read:(Ljava/nio/ByteBuffer;)I
      32: istore_3
      33: aload_2
      34: invokevirtual #24                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/ByteBuffer;
      37: pop
      38: iload_3
      39: ifne          95
      42: aload_0
      43: invokevirtual #25                 // Method org/xnio/StreamConnection.getIoThread:()Lorg/xnio/XnioIoThread;
      46: new           #26                 // class io/undertow/util/ConnectionUtils$3
      49: dup
      50: aload_0
      51: aload_1
      52: invokespecial #27                 // Method io/undertow/util/ConnectionUtils$3."<init>":(Lorg/xnio/StreamConnection;[Ljava/io/Closeable;)V
      55: getstatic     #28                 // Field MAX_DRAIN_TIME:J
      58: getstatic     #29                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      61: invokestatic  #30                 // Method io/undertow/util/WorkerUtils.executeAfter:(Lorg/xnio/XnioIoThread;Ljava/lang/Runnable;JLjava/util/concurrent/TimeUnit;)Lorg/xnio/XnioExecutor$Key;
      64: astore        4
      66: aload_0
      67: invokevirtual #20                 // Method org/xnio/StreamConnection.getSourceChannel:()Lorg/xnio/conduits/ConduitStreamSourceChannel;
      70: new           #31                 // class io/undertow/util/ConnectionUtils$4
      73: dup
      74: aload_2
      75: aload_0
      76: aload_1
      77: aload         4
      79: invokespecial #32                 // Method io/undertow/util/ConnectionUtils$4."<init>":(Ljava/nio/ByteBuffer;Lorg/xnio/StreamConnection;[Ljava/io/Closeable;Lorg/xnio/XnioExecutor$Key;)V
      82: invokevirtual #33                 // Method org/xnio/conduits/ConduitStreamSourceChannel.setReadListener:(Lorg/xnio/ChannelListener;)V
      85: aload_0
      86: invokevirtual #20                 // Method org/xnio/StreamConnection.getSourceChannel:()Lorg/xnio/conduits/ConduitStreamSourceChannel;
      89: invokevirtual #34                 // Method org/xnio/conduits/ConduitStreamSourceChannel.resumeReads:()V
      92: goto          103
      95: aload_0
      96: invokestatic  #18                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      99: aload_1
     100: invokestatic  #19                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
     103: goto          153
     106: astore_3
     107: aload_3
     108: instanceof    #14                 // class java/io/IOException
     111: ifeq          129
     114: getstatic     #15                 // Field io/undertow/UndertowLogger.REQUEST_IO_LOGGER:Lio/undertow/UndertowLogger;
     117: aload_3
     118: checkcast     #14                 // class java/io/IOException
     121: invokeinterface #16,  2           // InterfaceMethod io/undertow/UndertowLogger.ioException:(Ljava/io/IOException;)V
     126: goto          145
     129: getstatic     #15                 // Field io/undertow/UndertowLogger.REQUEST_IO_LOGGER:Lio/undertow/UndertowLogger;
     132: new           #14                 // class java/io/IOException
     135: dup
     136: aload_3
     137: invokespecial #17                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     140: invokeinterface #16,  2           // InterfaceMethod io/undertow/UndertowLogger.ioException:(Ljava/io/IOException;)V
     145: aload_0
     146: invokestatic  #18                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     149: aload_1
     150: invokestatic  #19                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
     153: return
    Exception table:
       from    to  target type
          24   103   106   Class java/lang/Throwable

  static {};
    Code:
       0: ldc           #35                 // String io.undertow.max-drain-time
       2: ldc2_w        #36                 // long 10000l
       5: invokestatic  #38                 // Method java/lang/Long.getLong:(Ljava/lang/String;J)Ljava/lang/Long;
       8: invokevirtual #39                 // Method java/lang/Long.longValue:()J
      11: putstatic     #28                 // Field MAX_DRAIN_TIME:J
      14: return
}

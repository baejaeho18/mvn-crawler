Compiled from "AbstractFramedStreamSinkConduit.java"
public class io.undertow.conduits.AbstractFramedStreamSinkConduit extends org.xnio.conduits.AbstractStreamSinkConduit<org.xnio.conduits.StreamSinkConduit> {
  private final java.util.Deque<io.undertow.conduits.AbstractFramedStreamSinkConduit$Frame> frameQueue;

  private long queuedData;

  private int bufferCount;

  private int state;

  private static final int FLAG_WRITES_TERMINATED;

  private static final int FLAG_DELEGATE_SHUTDOWN;

  protected io.undertow.conduits.AbstractFramedStreamSinkConduit(org.xnio.conduits.StreamSinkConduit);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method org/xnio/conduits/AbstractStreamSinkConduit."<init>":(Lorg/xnio/conduits/StreamSinkConduit;)V
       5: aload_0
       6: new           #2                  // class java/util/ArrayDeque
       9: dup
      10: invokespecial #3                  // Method java/util/ArrayDeque."<init>":()V
      13: putfield      #4                  // Field frameQueue:Ljava/util/Deque;
      16: aload_0
      17: lconst_0
      18: putfield      #5                  // Field queuedData:J
      21: aload_0
      22: iconst_0
      23: putfield      #6                  // Field bufferCount:I
      26: return

  protected void queueFrame(io.undertow.conduits.AbstractFramedStreamSinkConduit$FrameCallBack, java.nio.ByteBuffer...);
    Code:
       0: aload_0
       1: dup
       2: getfield      #5                  // Field queuedData:J
       5: aload_2
       6: invokestatic  #7                  // Method org/xnio/Buffers.remaining:([Ljava/nio/Buffer;)J
       9: ladd
      10: putfield      #5                  // Field queuedData:J
      13: aload_0
      14: dup
      15: getfield      #6                  // Field bufferCount:I
      18: aload_2
      19: arraylength
      20: iadd
      21: putfield      #6                  // Field bufferCount:I
      24: aload_0
      25: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
      28: new           #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
      31: dup
      32: aload_1
      33: aload_2
      34: iconst_0
      35: aload_2
      36: arraylength
      37: invokespecial #9                  // Method io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame."<init>":(Lio/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack;[Ljava/nio/ByteBuffer;II)V
      40: invokeinterface #10,  2           // InterfaceMethod java/util/Deque.add:(Ljava/lang/Object;)Z
      45: pop
      46: return

  public long transferFrom(java.nio.channels.FileChannel, long, long) throws java.io.IOException;
    Code:
       0: aload_1
       1: lload_2
       2: lload         4
       4: new           #11                 // class org/xnio/conduits/ConduitWritableByteChannel
       7: dup
       8: aload_0
       9: invokespecial #12                 // Method org/xnio/conduits/ConduitWritableByteChannel."<init>":(Lorg/xnio/conduits/StreamSinkConduit;)V
      12: invokevirtual #13                 // Method java/nio/channels/FileChannel.transferTo:(JJLjava/nio/channels/WritableByteChannel;)J
      15: lreturn

  public long transferFrom(org.xnio.channels.StreamSourceChannel, long, java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_1
       1: lload_2
       2: aload         4
       4: new           #11                 // class org/xnio/conduits/ConduitWritableByteChannel
       7: dup
       8: aload_0
       9: invokespecial #12                 // Method org/xnio/conduits/ConduitWritableByteChannel."<init>":(Lorg/xnio/conduits/StreamSinkConduit;)V
      12: invokestatic  #14                 // Method org/xnio/IoUtils.transfer:(Ljava/nio/channels/ReadableByteChannel;JLjava/nio/ByteBuffer;Ljava/nio/channels/WritableByteChannel;)J
      15: lreturn

  public int write(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #15                 // Field state:I
       4: iconst_1
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ifeq          20
      11: getstatic     #18                 // Field io/undertow/UndertowMessages.MESSAGES:Lio/undertow/UndertowMessages;
      14: invokeinterface #19,  1           // InterfaceMethod io/undertow/UndertowMessages.channelIsClosed:()Ljava/nio/channels/ClosedChannelException;
      19: athrow
      20: aload_0
      21: iconst_1
      22: anewarray     #20                 // class java/nio/ByteBuffer
      25: dup
      26: iconst_0
      27: aload_1
      28: aastore
      29: iconst_0
      30: iconst_1
      31: invokevirtual #21                 // Method doWrite:([Ljava/nio/ByteBuffer;II)J
      34: l2i
      35: ireturn

  public long write(java.nio.ByteBuffer[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #15                 // Field state:I
       4: iconst_1
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ifeq          20
      11: getstatic     #18                 // Field io/undertow/UndertowMessages.MESSAGES:Lio/undertow/UndertowMessages;
      14: invokeinterface #19,  1           // InterfaceMethod io/undertow/UndertowMessages.channelIsClosed:()Ljava/nio/channels/ClosedChannelException;
      19: athrow
      20: aload_0
      21: aload_1
      22: iload_2
      23: iload_3
      24: invokevirtual #21                 // Method doWrite:([Ljava/nio/ByteBuffer;II)J
      27: lreturn

  public int writeFinal(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #22                 // Method org/xnio/conduits/Conduits.writeFinalBasic:(Lorg/xnio/conduits/StreamSinkConduit;Ljava/nio/ByteBuffer;)I
       5: ireturn

  public long writeFinal(java.nio.ByteBuffer[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: iload_3
       4: invokestatic  #23                 // Method org/xnio/conduits/Conduits.writeFinalBasic:(Lorg/xnio/conduits/StreamSinkConduit;[Ljava/nio/ByteBuffer;II)J
       7: lreturn

  private long doWrite(java.nio.ByteBuffer[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field bufferCount:I
       4: aload_1
       5: ifnonnull     12
       8: iconst_0
       9: goto          13
      12: iload_3
      13: iadd
      14: anewarray     #20                 // class java/nio/ByteBuffer
      17: astore        4
      19: iconst_0
      20: istore        5
      22: aload_0
      23: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
      26: invokeinterface #24,  1           // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
      31: astore        6
      33: aload         6
      35: invokeinterface #25,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      40: ifeq          103
      43: aload         6
      45: invokeinterface #26,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      50: checkcast     #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
      53: astore        7
      55: aload         7
      57: getfield      #27                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.offs:I
      60: istore        8
      62: iload         8
      64: aload         7
      66: getfield      #27                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.offs:I
      69: aload         7
      71: getfield      #28                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.len:I
      74: iadd
      75: if_icmpge     100
      78: aload         4
      80: iload         5
      82: iinc          5, 1
      85: aload         7
      87: getfield      #29                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.data:[Ljava/nio/ByteBuffer;
      90: iload         8
      92: aaload
      93: aastore
      94: iinc          8, 1
      97: goto          62
     100: goto          33
     103: aload_1
     104: ifnull        136
     107: iload_2
     108: istore        6
     110: iload         6
     112: iload_2
     113: iload_3
     114: iadd
     115: if_icmpge     136
     118: aload         4
     120: iload         5
     122: iinc          5, 1
     125: aload_1
     126: iload         6
     128: aaload
     129: aastore
     130: iinc          6, 1
     133: goto          110
     136: aload_0
     137: getfield      #30                 // Field next:Lorg/xnio/conduits/Conduit;
     140: checkcast     #31                 // class org/xnio/conduits/StreamSinkConduit
     143: aload         4
     145: iconst_0
     146: aload         4
     148: arraylength
     149: invokeinterface #32,  4           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.write:([Ljava/nio/ByteBuffer;II)J
     154: lstore        6
     156: lload         6
     158: aload_0
     159: getfield      #5                  // Field queuedData:J
     162: lcmp
     163: ifle          174
     166: aload_0
     167: lconst_0
     168: putfield      #5                  // Field queuedData:J
     171: goto          185
     174: aload_0
     175: dup
     176: getfield      #5                  // Field queuedData:J
     179: lload         6
     181: lsub
     182: putfield      #5                  // Field queuedData:J
     185: lload         6
     187: lstore        8
     189: aload_0
     190: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
     193: invokeinterface #33,  1           // InterfaceMethod java/util/Deque.peek:()Ljava/lang/Object;
     198: checkcast     #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
     201: astore        10
     203: aload         10
     205: ifnull        303
     208: aload         10
     210: getfield      #34                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.remaining:J
     213: lload         8
     215: lcmp
     216: ifle          233
     219: aload         10
     221: dup
     222: getfield      #34                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.remaining:J
     225: lload         8
     227: lsub
     228: putfield      #34                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.remaining:J
     231: lconst_0
     232: lreturn
     233: aload_0
     234: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
     237: invokeinterface #35,  1           // InterfaceMethod java/util/Deque.poll:()Ljava/lang/Object;
     242: pop
     243: aload         10
     245: getfield      #36                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.callback:Lio/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack;
     248: astore        11
     250: aload         11
     252: ifnull        262
     255: aload         11
     257: invokeinterface #37,  1           // InterfaceMethod io/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack.done:()V
     262: aload_0
     263: dup
     264: getfield      #6                  // Field bufferCount:I
     267: aload         10
     269: getfield      #28                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.len:I
     272: isub
     273: putfield      #6                  // Field bufferCount:I
     276: lload         8
     278: aload         10
     280: getfield      #34                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.remaining:J
     283: lsub
     284: lstore        8
     286: aload_0
     287: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
     290: invokeinterface #33,  1           // InterfaceMethod java/util/Deque.peek:()Ljava/lang/Object;
     295: checkcast     #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
     298: astore        10
     300: goto          203
     303: lload         8
     305: lreturn
     306: astore        6
     308: aload         6
     310: instanceof    #38                 // class java/io/IOException
     313: ifeq          324
     316: aload         6
     318: checkcast     #38                 // class java/io/IOException
     321: goto          333
     324: new           #38                 // class java/io/IOException
     327: dup
     328: aload         6
     330: invokespecial #41                 // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     333: astore        7
     335: aload_0
     336: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
     339: invokeinterface #24,  1           // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
     344: astore        8
     346: aload         8
     348: invokeinterface #25,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     353: ifeq          392
     356: aload         8
     358: invokeinterface #26,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     363: checkcast     #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
     366: astore        9
     368: aload         9
     370: getfield      #36                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.callback:Lio/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack;
     373: astore        10
     375: aload         10
     377: ifnull        389
     380: aload         10
     382: aload         7
     384: invokeinterface #42,  2           // InterfaceMethod io/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack.failed:(Ljava/io/IOException;)V
     389: goto          346
     392: aload_0
     393: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
     396: invokeinterface #43,  1           // InterfaceMethod java/util/Deque.clear:()V
     401: aload_0
     402: iconst_0
     403: putfield      #6                  // Field bufferCount:I
     406: aload_0
     407: lconst_0
     408: putfield      #5                  // Field queuedData:J
     411: aload         6
     413: athrow
     414: astore        12
     416: aload         6
     418: athrow
    Exception table:
       from    to  target type
         136   232   306   Class java/io/IOException
         136   232   306   Class java/lang/RuntimeException
         136   232   306   Class java/lang/Error
         233   305   306   Class java/io/IOException
         233   305   306   Class java/lang/RuntimeException
         233   305   306   Class java/lang/Error
         335   411   414   any
         414   416   414   any

  protected long queuedDataLength();
    Code:
       0: aload_0
       1: getfield      #5                  // Field queuedData:J
       4: lreturn

  public void terminateWrites() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #15                 // Field state:I
       4: iconst_1
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ifeq          12
      11: return
      12: aload_0
      13: invokevirtual #44                 // Method queueCloseFrames:()V
      16: aload_0
      17: dup
      18: getfield      #15                 // Field state:I
      21: iconst_1
      22: ior
      23: putfield      #15                 // Field state:I
      26: aload_0
      27: getfield      #5                  // Field queuedData:J
      30: lconst_0
      31: lcmp
      32: ifne          53
      35: aload_0
      36: dup
      37: getfield      #15                 // Field state:I
      40: iconst_2
      41: ior
      42: putfield      #15                 // Field state:I
      45: aload_0
      46: invokevirtual #45                 // Method doTerminateWrites:()V
      49: aload_0
      50: invokevirtual #46                 // Method finished:()V
      53: return

  protected void doTerminateWrites() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #30                 // Field next:Lorg/xnio/conduits/Conduit;
       4: checkcast     #31                 // class org/xnio/conduits/StreamSinkConduit
       7: invokeinterface #47,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.terminateWrites:()V
      12: return

  protected boolean flushQueuedData() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field queuedData:J
       4: lconst_0
       5: lcmp
       6: ifle          17
       9: aload_0
      10: aconst_null
      11: iconst_0
      12: iconst_0
      13: invokevirtual #21                 // Method doWrite:([Ljava/nio/ByteBuffer;II)J
      16: pop2
      17: aload_0
      18: getfield      #5                  // Field queuedData:J
      21: lconst_0
      22: lcmp
      23: ifle          28
      26: iconst_0
      27: ireturn
      28: aload_0
      29: getfield      #15                 // Field state:I
      32: iconst_1
      33: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      36: ifeq          68
      39: aload_0
      40: getfield      #15                 // Field state:I
      43: iconst_2
      44: invokestatic  #48                 // Method org/xnio/Bits.allAreClear:(II)Z
      47: ifeq          68
      50: aload_0
      51: invokevirtual #45                 // Method doTerminateWrites:()V
      54: aload_0
      55: dup
      56: getfield      #15                 // Field state:I
      59: iconst_2
      60: ior
      61: putfield      #15                 // Field state:I
      64: aload_0
      65: invokevirtual #46                 // Method finished:()V
      68: aload_0
      69: getfield      #30                 // Field next:Lorg/xnio/conduits/Conduit;
      72: checkcast     #31                 // class org/xnio/conduits/StreamSinkConduit
      75: invokeinterface #49,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.flush:()Z
      80: ireturn

  public void truncateWrites() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field frameQueue:Ljava/util/Deque;
       4: invokeinterface #24,  1           // InterfaceMethod java/util/Deque.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #25,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          55
      19: aload_1
      20: invokeinterface #26,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #8                  // class io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame
      28: astore_2
      29: aload_2
      30: getfield      #36                 // Field io/undertow/conduits/AbstractFramedStreamSinkConduit$Frame.callback:Lio/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack;
      33: astore_3
      34: aload_3
      35: ifnull        52
      38: aload_3
      39: getstatic     #18                 // Field io/undertow/UndertowMessages.MESSAGES:Lio/undertow/UndertowMessages;
      42: invokeinterface #19,  1           // InterfaceMethod io/undertow/UndertowMessages.channelIsClosed:()Ljava/nio/channels/ClosedChannelException;
      47: invokeinterface #42,  2           // InterfaceMethod io/undertow/conduits/AbstractFramedStreamSinkConduit$FrameCallBack.failed:(Ljava/io/IOException;)V
      52: goto          10
      55: return

  protected boolean isWritesTerminated();
    Code:
       0: aload_0
       1: getfield      #15                 // Field state:I
       4: iconst_1
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ireturn

  protected void queueCloseFrames();
    Code:
       0: return

  protected void finished();
    Code:
       0: return
}

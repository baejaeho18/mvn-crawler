Compiled from "LearningPushHandler.java"
public class io.undertow.server.handlers.LearningPushHandler implements io.undertow.server.HttpHandler {
  private static final java.lang.String SESSION_ATTRIBUTE;

  private static final int DEFAULT_MAX_CACHE_ENTRIES;

  private static final int DEFAULT_MAX_CACHE_AGE;

  private final io.undertow.server.handlers.cache.LRUCache<java.lang.String, java.util.Map<java.lang.String, io.undertow.server.handlers.LearningPushHandler$PushedRequest>> cache;

  private final io.undertow.server.HttpHandler next;

  public io.undertow.server.handlers.LearningPushHandler(io.undertow.server.HttpHandler);
    Code:
       0: aload_0
       1: sipush        1000
       4: iconst_m1
       5: aload_1
       6: invokespecial #2                  // Method "<init>":(IILio/undertow/server/HttpHandler;)V
       9: return

  public io.undertow.server.handlers.LearningPushHandler(int, int, io.undertow.server.HttpHandler);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_3
       6: putfield      #4                  // Field next:Lio/undertow/server/HttpHandler;
       9: aload_0
      10: new           #5                  // class io/undertow/server/handlers/cache/LRUCache
      13: dup
      14: iload_1
      15: iload_2
      16: invokespecial #6                  // Method io/undertow/server/handlers/cache/LRUCache."<init>":(II)V
      19: putfield      #7                  // Field cache:Lio/undertow/server/handlers/cache/LRUCache;
      22: return

  public void handleRequest(io.undertow.server.HttpServerExchange) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokevirtual #8                  // Method io/undertow/server/HttpServerExchange.getQueryString:()Ljava/lang/String;
       4: invokevirtual #9                  // Method java/lang/String.isEmpty:()Z
       7: ifeq          23
      10: aload_1
      11: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getRequestURL:()Ljava/lang/String;
      14: astore_2
      15: aload_1
      16: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.getRequestPath:()Ljava/lang/String;
      19: astore_3
      20: goto          51
      23: aload_1
      24: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getRequestURL:()Ljava/lang/String;
      27: aload_1
      28: invokevirtual #8                  // Method io/undertow/server/HttpServerExchange.getQueryString:()Ljava/lang/String;
      31: invokedynamic #12,  0             // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      36: astore_2
      37: aload_1
      38: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.getRequestPath:()Ljava/lang/String;
      41: aload_1
      42: invokevirtual #8                  // Method io/undertow/server/HttpServerExchange.getQueryString:()Ljava/lang/String;
      45: invokedynamic #12,  0             // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      50: astore_3
      51: aload_0
      52: aload_1
      53: aload_2
      54: invokevirtual #13                 // Method doPush:(Lio/undertow/server/HttpServerExchange;Ljava/lang/String;)V
      57: aload_1
      58: invokevirtual #14                 // Method io/undertow/server/HttpServerExchange.getRequestHeaders:()Lio/undertow/util/HeaderMap;
      61: getstatic     #15                 // Field io/undertow/util/Headers.REFERER:Lio/undertow/util/HttpString;
      64: invokevirtual #16                 // Method io/undertow/util/HeaderMap.getFirst:(Lio/undertow/util/HttpString;)Ljava/lang/String;
      67: astore        4
      69: aload         4
      71: ifnull        118
      74: aload_1
      75: invokevirtual #14                 // Method io/undertow/server/HttpServerExchange.getRequestHeaders:()Lio/undertow/util/HeaderMap;
      78: getstatic     #17                 // Field io/undertow/util/Headers.ACCEPT:Lio/undertow/util/HttpString;
      81: invokevirtual #16                 // Method io/undertow/util/HeaderMap.getFirst:(Lio/undertow/util/HttpString;)Ljava/lang/String;
      84: astore        5
      86: aload         5
      88: ifnull        101
      91: aload         5
      93: ldc           #18                 // String text/html
      95: invokevirtual #19                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
      98: ifne          118
     101: aload_1
     102: new           #20                 // class io/undertow/server/handlers/LearningPushHandler$PushCompletionListener
     105: dup
     106: aload_0
     107: aload_2
     108: aload_3
     109: aload         4
     111: invokespecial #21                 // Method io/undertow/server/handlers/LearningPushHandler$PushCompletionListener."<init>":(Lio/undertow/server/handlers/LearningPushHandler;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     114: invokevirtual #22                 // Method io/undertow/server/HttpServerExchange.addExchangeCompleteListener:(Lio/undertow/server/ExchangeCompletionListener;)Lio/undertow/server/HttpServerExchange;
     117: pop
     118: aload_0
     119: getfield      #4                  // Field next:Lio/undertow/server/HttpHandler;
     122: aload_1
     123: invokeinterface #23,  2           // InterfaceMethod io/undertow/server/HttpHandler.handleRequest:(Lio/undertow/server/HttpServerExchange;)V
     128: return

  private void doPush(io.undertow.server.HttpServerExchange, java.lang.String);
    Code:
       0: aload_1
       1: invokevirtual #24                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
       4: invokevirtual #25                 // Method io/undertow/server/ServerConnection.isPushSupported:()Z
       7: ifeq          294
      10: aload_0
      11: getfield      #7                  // Field cache:Lio/undertow/server/handlers/cache/LRUCache;
      14: aload_2
      15: invokevirtual #26                 // Method io/undertow/server/handlers/cache/LRUCache.get:(Ljava/lang/Object;)Ljava/lang/Object;
      18: checkcast     #27                 // class java/util/Map
      21: astore_3
      22: aload_3
      23: ifnull        294
      26: aload_0
      27: aload_1
      28: invokevirtual #28                 // Method getSession:(Lio/undertow/server/HttpServerExchange;)Lio/undertow/server/session/Session;
      31: astore        4
      33: aload         4
      35: ifnonnull     39
      38: return
      39: aload         4
      41: ldc           #29                 // String io.undertow.PUSHED_RESOURCES
      43: invokeinterface #30,  2           // InterfaceMethod io/undertow/server/session/Session.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      48: checkcast     #27                 // class java/util/Map
      51: astore        5
      53: aload         5
      55: ifnonnull     70
      58: new           #31                 // class java/util/HashMap
      61: dup
      62: invokespecial #32                 // Method java/util/HashMap."<init>":()V
      65: invokestatic  #33                 // Method java/util/Collections.synchronizedMap:(Ljava/util/Map;)Ljava/util/Map;
      68: astore        5
      70: aload_3
      71: invokeinterface #34,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      76: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      81: astore        6
      83: aload         6
      85: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      90: ifeq          282
      93: aload         6
      95: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     100: checkcast     #38                 // class java/util/Map$Entry
     103: astore        7
     105: aload         7
     107: invokeinterface #39,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     112: checkcast     #40                 // class io/undertow/server/handlers/LearningPushHandler$PushedRequest
     115: astore        8
     117: aload         5
     119: aload         8
     121: invokevirtual #41                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getPath:()Ljava/lang/String;
     124: invokeinterface #42,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     129: astore        9
     131: aload         9
     133: ifnonnull     140
     136: iconst_1
     137: goto          141
     140: iconst_0
     141: istore        10
     143: iload         10
     145: ifne          203
     148: aload         9
     150: instanceof    #43                 // class java/lang/String
     153: ifeq          175
     156: aload         9
     158: aload         8
     160: invokevirtual #44                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getEtag:()Ljava/lang/String;
     163: invokevirtual #45                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     166: ifne          175
     169: iconst_1
     170: istore        10
     172: goto          203
     175: aload         9
     177: instanceof    #46                 // class java/lang/Long
     180: ifeq          203
     183: aload         9
     185: checkcast     #46                 // class java/lang/Long
     188: invokevirtual #47                 // Method java/lang/Long.longValue:()J
     191: aload         8
     193: invokevirtual #48                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getLastModified:()J
     196: lcmp
     197: ifeq          203
     200: iconst_1
     201: istore        10
     203: iload         10
     205: ifeq          279
     208: aload_1
     209: invokevirtual #24                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
     212: aload         8
     214: invokevirtual #41                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getPath:()Ljava/lang/String;
     217: getstatic     #49                 // Field io/undertow/util/Methods.GET:Lio/undertow/util/HttpString;
     220: aload         8
     222: invokevirtual #50                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getRequestHeaders:()Lio/undertow/util/HeaderMap;
     225: invokevirtual #51                 // Method io/undertow/server/ServerConnection.pushResource:(Ljava/lang/String;Lio/undertow/util/HttpString;Lio/undertow/util/HeaderMap;)Z
     228: pop
     229: aload         8
     231: invokevirtual #44                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getEtag:()Ljava/lang/String;
     234: ifnull        258
     237: aload         5
     239: aload         8
     241: invokevirtual #41                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getPath:()Ljava/lang/String;
     244: aload         8
     246: invokevirtual #44                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getEtag:()Ljava/lang/String;
     249: invokeinterface #52,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     254: pop
     255: goto          279
     258: aload         5
     260: aload         8
     262: invokevirtual #41                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getPath:()Ljava/lang/String;
     265: aload         8
     267: invokevirtual #48                 // Method io/undertow/server/handlers/LearningPushHandler$PushedRequest.getLastModified:()J
     270: invokestatic  #53                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     273: invokeinterface #52,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     278: pop
     279: goto          83
     282: aload         4
     284: ldc           #29                 // String io.undertow.PUSHED_RESOURCES
     286: aload         5
     288: invokeinterface #54,  3           // InterfaceMethod io/undertow/server/session/Session.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)Ljava/lang/Object;
     293: pop
     294: return

  protected io.undertow.server.session.Session getSession(io.undertow.server.HttpServerExchange);
    Code:
       0: aload_1
       1: getstatic     #55                 // Field io/undertow/server/session/SessionConfig.ATTACHMENT_KEY:Lio/undertow/util/AttachmentKey;
       4: invokevirtual #56                 // Method io/undertow/server/HttpServerExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
       7: checkcast     #57                 // class io/undertow/server/session/SessionConfig
      10: astore_2
      11: aload_1
      12: getstatic     #58                 // Field io/undertow/server/session/SessionManager.ATTACHMENT_KEY:Lio/undertow/util/AttachmentKey;
      15: invokevirtual #56                 // Method io/undertow/server/HttpServerExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
      18: checkcast     #59                 // class io/undertow/server/session/SessionManager
      21: astore_3
      22: aload_2
      23: ifnull        30
      26: aload_3
      27: ifnonnull     32
      30: aconst_null
      31: areturn
      32: aload_3
      33: aload_1
      34: aload_2
      35: invokeinterface #60,  3           // InterfaceMethod io/undertow/server/session/SessionManager.getSession:(Lio/undertow/server/HttpServerExchange;Lio/undertow/server/session/SessionConfig;)Lio/undertow/server/session/Session;
      40: astore        4
      42: aload         4
      44: ifnonnull     56
      47: aload_3
      48: aload_1
      49: aload_2
      50: invokeinterface #61,  3           // InterfaceMethod io/undertow/server/session/SessionManager.createSession:(Lio/undertow/server/HttpServerExchange;Lio/undertow/server/session/SessionConfig;)Lio/undertow/server/session/Session;
      55: areturn
      56: aload         4
      58: areturn
}

Compiled from "ProxyHandler.java"
final class io.undertow.server.handlers.proxy.ProxyHandler$ProxyClientHandler implements io.undertow.server.handlers.proxy.ProxyCallback<io.undertow.server.handlers.proxy.ProxyConnection>, java.lang.Runnable {
  private int tries;

  private final long timeout;

  private final int maxRetryAttempts;

  private final io.undertow.server.HttpServerExchange exchange;

  private final io.undertow.predicate.Predicate idempotentPredicate;

  private io.undertow.server.handlers.proxy.ProxyClient$ProxyTarget target;

  final io.undertow.server.handlers.proxy.ProxyHandler this$0;

  io.undertow.server.handlers.proxy.ProxyHandler$ProxyClientHandler(io.undertow.server.handlers.proxy.ProxyHandler, io.undertow.server.HttpServerExchange, io.undertow.server.handlers.proxy.ProxyClient$ProxyTarget, long, int, io.undertow.predicate.Predicate);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field exchange:Lio/undertow/server/HttpServerExchange;
      14: aload_0
      15: lload         4
      17: putfield      #4                  // Field timeout:J
      20: aload_0
      21: iload         6
      23: putfield      #5                  // Field maxRetryAttempts:I
      26: aload_0
      27: aload_3
      28: putfield      #6                  // Field target:Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
      31: aload_0
      32: aload         7
      34: putfield      #7                  // Field idempotentPredicate:Lio/undertow/predicate/Predicate;
      37: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
       4: getfield      #8                  // Field io/undertow/server/handlers/proxy/ProxyHandler.proxyClient:Lio/undertow/server/handlers/proxy/ProxyClient;
       7: aload_0
       8: getfield      #6                  // Field target:Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
      11: aload_0
      12: getfield      #3                  // Field exchange:Lio/undertow/server/HttpServerExchange;
      15: aload_0
      16: ldc2_w        #9                  // long -1l
      19: getstatic     #11                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      22: invokeinterface #12,  7           // InterfaceMethod io/undertow/server/handlers/proxy/ProxyClient.getConnection:(Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;Lio/undertow/server/HttpServerExchange;Lio/undertow/server/handlers/proxy/ProxyCallback;JLjava/util/concurrent/TimeUnit;)V
      27: return

  public void completed(io.undertow.server.HttpServerExchange, io.undertow.server.handlers.proxy.ProxyConnection);
    Code:
       0: aload_1
       1: getstatic     #13                 // Field io/undertow/server/handlers/proxy/ProxyHandler.CONNECTION:Lio/undertow/util/AttachmentKey;
       4: aload_2
       5: invokevirtual #14                 // Method io/undertow/server/HttpServerExchange.putAttachment:(Lio/undertow/util/AttachmentKey;Ljava/lang/Object;)Ljava/lang/Object;
       8: pop
       9: aload_1
      10: getstatic     #15                 // Field io/undertow/util/SameThreadExecutor.INSTANCE:Ljava/util/concurrent/Executor;
      13: new           #16                 // class io/undertow/server/handlers/proxy/ProxyHandler$ProxyAction
      16: dup
      17: aload_2
      18: aload_1
      19: aload_0
      20: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
      23: getfield      #17                 // Field io/undertow/server/handlers/proxy/ProxyHandler.requestHeaders:Ljava/util/Map;
      26: aload_0
      27: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
      30: getfield      #18                 // Field io/undertow/server/handlers/proxy/ProxyHandler.rewriteHostHeader:Z
      33: aload_0
      34: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
      37: getfield      #19                 // Field io/undertow/server/handlers/proxy/ProxyHandler.reuseXForwarded:Z
      40: aload_1
      41: invokevirtual #20                 // Method io/undertow/server/HttpServerExchange.isRequestComplete:()Z
      44: ifeq          51
      47: aload_0
      48: goto          52
      51: aconst_null
      52: aload_0
      53: getfield      #7                  // Field idempotentPredicate:Lio/undertow/predicate/Predicate;
      56: invokespecial #21                 // Method io/undertow/server/handlers/proxy/ProxyHandler$ProxyAction."<init>":(Lio/undertow/server/handlers/proxy/ProxyConnection;Lio/undertow/server/HttpServerExchange;Ljava/util/Map;ZZLio/undertow/server/handlers/proxy/ProxyHandler$ProxyClientHandler;Lio/undertow/predicate/Predicate;)V
      59: invokevirtual #22                 // Method io/undertow/server/HttpServerExchange.dispatch:(Ljava/util/concurrent/Executor;Ljava/lang/Runnable;)Lio/undertow/server/HttpServerExchange;
      62: pop
      63: return

  public void failed(io.undertow.server.HttpServerExchange);
    Code:
       0: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
       3: lstore_2
       4: aload_0
       5: dup
       6: getfield      #24                 // Field tries:I
       9: dup_x1
      10: iconst_1
      11: iadd
      12: putfield      #24                 // Field tries:I
      15: aload_0
      16: getfield      #5                  // Field maxRetryAttempts:I
      19: if_icmpge     129
      22: aload_0
      23: getfield      #4                  // Field timeout:J
      26: lconst_0
      27: lcmp
      28: ifle          48
      31: lload_2
      32: aload_0
      33: getfield      #4                  // Field timeout:J
      36: lcmp
      37: ifle          48
      40: aload_0
      41: aload_1
      42: invokevirtual #25                 // Method cancel:(Lio/undertow/server/HttpServerExchange;)V
      45: goto          134
      48: aload_0
      49: aload_0
      50: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
      53: getfield      #8                  // Field io/undertow/server/handlers/proxy/ProxyHandler.proxyClient:Lio/undertow/server/handlers/proxy/ProxyClient;
      56: aload_1
      57: invokeinterface #26,  2           // InterfaceMethod io/undertow/server/handlers/proxy/ProxyClient.findTarget:(Lio/undertow/server/HttpServerExchange;)Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
      62: putfield      #6                  // Field target:Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
      65: aload_0
      66: getfield      #6                  // Field target:Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
      69: ifnull        121
      72: aload_0
      73: getfield      #4                  // Field timeout:J
      76: lconst_0
      77: lcmp
      78: ifle          90
      81: aload_0
      82: getfield      #4                  // Field timeout:J
      85: lload_2
      86: lsub
      87: goto          93
      90: ldc2_w        #9                  // long -1l
      93: lstore        4
      95: aload_0
      96: getfield      #1                  // Field this$0:Lio/undertow/server/handlers/proxy/ProxyHandler;
      99: getfield      #8                  // Field io/undertow/server/handlers/proxy/ProxyHandler.proxyClient:Lio/undertow/server/handlers/proxy/ProxyClient;
     102: aload_0
     103: getfield      #6                  // Field target:Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;
     106: aload_1
     107: aload_0
     108: lload         4
     110: getstatic     #11                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     113: invokeinterface #12,  7           // InterfaceMethod io/undertow/server/handlers/proxy/ProxyClient.getConnection:(Lio/undertow/server/handlers/proxy/ProxyClient$ProxyTarget;Lio/undertow/server/HttpServerExchange;Lio/undertow/server/handlers/proxy/ProxyCallback;JLjava/util/concurrent/TimeUnit;)V
     118: goto          134
     121: aload_0
     122: aload_1
     123: invokevirtual #27                 // Method couldNotResolveBackend:(Lio/undertow/server/HttpServerExchange;)V
     126: goto          134
     129: aload_0
     130: aload_1
     131: invokevirtual #27                 // Method couldNotResolveBackend:(Lio/undertow/server/HttpServerExchange;)V
     134: return

  public void queuedRequestFailed(io.undertow.server.HttpServerExchange);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #28                 // Method failed:(Lio/undertow/server/HttpServerExchange;)V
       5: return

  public void couldNotResolveBackend(io.undertow.server.HttpServerExchange);
    Code:
       0: aload_1
       1: invokevirtual #29                 // Method io/undertow/server/HttpServerExchange.isResponseStarted:()Z
       4: ifeq          17
       7: aload_1
       8: invokevirtual #30                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
      11: invokestatic  #31                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      14: goto          30
      17: aload_1
      18: sipush        503
      21: invokevirtual #33                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
      24: pop
      25: aload_1
      26: invokevirtual #34                 // Method io/undertow/server/HttpServerExchange.endExchange:()Lio/undertow/server/HttpServerExchange;
      29: pop
      30: return

  void cancel(io.undertow.server.HttpServerExchange);
    Code:
       0: aload_1
       1: getstatic     #13                 // Field io/undertow/server/handlers/proxy/ProxyHandler.CONNECTION:Lio/undertow/util/AttachmentKey;
       4: invokevirtual #35                 // Method io/undertow/server/HttpServerExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
       7: checkcast     #36                 // class io/undertow/server/handlers/proxy/ProxyConnection
      10: astore_2
      11: aload_2
      12: ifnull        50
      15: aload_2
      16: invokevirtual #37                 // Method io/undertow/server/handlers/proxy/ProxyConnection.getConnection:()Lio/undertow/client/ClientConnection;
      19: astore_3
      20: getstatic     #38                 // Field io/undertow/UndertowLogger.PROXY_REQUEST_LOGGER:Lio/undertow/UndertowLogger;
      23: aload_3
      24: invokeinterface #39,  1           // InterfaceMethod io/undertow/client/ClientConnection.getPeerAddress:()Ljava/net/SocketAddress;
      29: aload_1
      30: invokevirtual #40                 // Method io/undertow/server/HttpServerExchange.getRequestURI:()Ljava/lang/String;
      33: invokedynamic #41,  0             // InvokeDynamic #0:makeConcatWithConstants:(Ljava/net/SocketAddress;Ljava/lang/String;)Ljava/lang/String;
      38: invokeinterface #42,  2           // InterfaceMethod io/undertow/UndertowLogger.timingOutRequest:(Ljava/lang/String;)V
      43: aload_3
      44: invokestatic  #31                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      47: goto          62
      50: getstatic     #38                 // Field io/undertow/UndertowLogger.PROXY_REQUEST_LOGGER:Lio/undertow/UndertowLogger;
      53: aload_1
      54: invokevirtual #40                 // Method io/undertow/server/HttpServerExchange.getRequestURI:()Ljava/lang/String;
      57: invokeinterface #42,  2           // InterfaceMethod io/undertow/UndertowLogger.timingOutRequest:(Ljava/lang/String;)V
      62: aload_1
      63: invokevirtual #29                 // Method io/undertow/server/HttpServerExchange.isResponseStarted:()Z
      66: ifeq          79
      69: aload_1
      70: invokevirtual #30                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
      73: invokestatic  #31                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      76: goto          92
      79: aload_1
      80: sipush        504
      83: invokevirtual #33                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
      86: pop
      87: aload_1
      88: invokevirtual #34                 // Method io/undertow/server/HttpServerExchange.endExchange:()Lio/undertow/server/HttpServerExchange;
      91: pop
      92: return

  public void completed(io.undertow.server.HttpServerExchange, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: checkcast     #36                 // class io/undertow/server/handlers/proxy/ProxyConnection
       6: invokevirtual #43                 // Method completed:(Lio/undertow/server/HttpServerExchange;Lio/undertow/server/handlers/proxy/ProxyConnection;)V
       9: return
}

Compiled from "LRUCache.java"
public class io.undertow.server.handlers.cache.LRUCache<K, V> {
  private static final int SAMPLE_INTERVAL;

  private final int maxEntries;

  private final java.util.concurrent.ConcurrentMap<K, io.undertow.server.handlers.cache.LRUCache$CacheEntry<K, V>> cache;

  private final io.undertow.util.ConcurrentDirectDeque<io.undertow.server.handlers.cache.LRUCache$CacheEntry<K, V>> accessQueue;

  private final int maxAge;

  private final boolean fifo;

  public io.undertow.server.handlers.cache.LRUCache(int, int);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iload_2
       6: putfield      #2                  // Field maxAge:I
       9: aload_0
      10: new           #3                  // class java/util/concurrent/ConcurrentHashMap
      13: dup
      14: bipush        16
      16: invokespecial #4                  // Method java/util/concurrent/ConcurrentHashMap."<init>":(I)V
      19: putfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      22: aload_0
      23: invokestatic  #6                  // Method io/undertow/util/ConcurrentDirectDeque.newInstance:()Lio/undertow/util/ConcurrentDirectDeque;
      26: putfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      29: aload_0
      30: iload_1
      31: putfield      #8                  // Field maxEntries:I
      34: aload_0
      35: iconst_0
      36: putfield      #9                  // Field fifo:Z
      39: return

  public io.undertow.server.handlers.cache.LRUCache(int, int, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iload_2
       6: putfield      #2                  // Field maxAge:I
       9: aload_0
      10: new           #3                  // class java/util/concurrent/ConcurrentHashMap
      13: dup
      14: bipush        16
      16: invokespecial #4                  // Method java/util/concurrent/ConcurrentHashMap."<init>":(I)V
      19: putfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      22: aload_0
      23: invokestatic  #6                  // Method io/undertow/util/ConcurrentDirectDeque.newInstance:()Lio/undertow/util/ConcurrentDirectDeque;
      26: putfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      29: aload_0
      30: iload_1
      31: putfield      #8                  // Field maxEntries:I
      34: aload_0
      35: iload_3
      36: putfield      #9                  // Field fifo:Z
      39: return

  public void add(K, V);
    Code:
       0: aload_0
       1: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
      13: astore_3
      14: aload_3
      15: ifnonnull     135
      18: aload_0
      19: getfield      #2                  // Field maxAge:I
      22: iconst_m1
      23: if_icmpne     34
      26: ldc2_w        #12                 // long -1l
      29: lstore        4
      31: goto          45
      34: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
      37: aload_0
      38: getfield      #2                  // Field maxAge:I
      41: i2l
      42: ladd
      43: lstore        4
      45: new           #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
      48: dup
      49: aload_1
      50: aload_2
      51: lload         4
      53: invokespecial #15                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry."<init>":(Ljava/lang/Object;Ljava/lang/Object;J)V
      56: astore_3
      57: aload_0
      58: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      61: aload_1
      62: aload_3
      63: invokeinterface #16,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      68: checkcast     #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
      71: astore        6
      73: aload         6
      75: ifnull        86
      78: aload         6
      80: astore_3
      81: aload_3
      82: aload_2
      83: invokevirtual #17                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.setValue:(Ljava/lang/Object;)V
      86: aload_0
      87: aload_3
      88: invokevirtual #18                 // Method bumpAccess:(Lio/undertow/server/handlers/cache/LRUCache$CacheEntry;)V
      91: aload_0
      92: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      95: invokeinterface #19,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
     100: aload_0
     101: getfield      #8                  // Field maxEntries:I
     104: if_icmple     135
     107: aload_0
     108: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
     111: invokevirtual #20                 // Method io/undertow/util/ConcurrentDirectDeque.poll:()Ljava/lang/Object;
     114: checkcast     #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
     117: astore        7
     119: aload         7
     121: aload_3
     122: if_acmpeq     135
     125: aload_0
     126: aload         7
     128: invokevirtual #21                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.key:()Ljava/lang/Object;
     131: invokevirtual #22                 // Method remove:(Ljava/lang/Object;)Ljava/lang/Object;
     134: pop
     135: return

  public V get(K);
    Code:
       0: aload_0
       1: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
      13: astore_2
      14: aload_2
      15: ifnonnull     20
      18: aconst_null
      19: areturn
      20: aload_2
      21: invokevirtual #23                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.getExpires:()J
      24: lstore_3
      25: lload_3
      26: ldc2_w        #12                 // long -1l
      29: lcmp
      30: ifeq          49
      33: invokestatic  #14                 // Method java/lang/System.currentTimeMillis:()J
      36: lload_3
      37: lcmp
      38: ifle          49
      41: aload_0
      42: aload_1
      43: invokevirtual #22                 // Method remove:(Ljava/lang/Object;)Ljava/lang/Object;
      46: pop
      47: aconst_null
      48: areturn
      49: aload_0
      50: getfield      #9                  // Field fifo:Z
      53: ifne          70
      56: aload_2
      57: invokevirtual #24                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.hit:()I
      60: iconst_5
      61: irem
      62: ifne          70
      65: aload_0
      66: aload_2
      67: invokevirtual #18                 // Method bumpAccess:(Lio/undertow/server/handlers/cache/LRUCache$CacheEntry;)V
      70: aload_2
      71: invokevirtual #26                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.getValue:()Ljava/lang/Object;
      74: areturn

  private void bumpAccess(io.undertow.server.handlers.cache.LRUCache$CacheEntry<K, V>);
    Code:
       0: aload_1
       1: invokevirtual #27                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.claimToken:()Ljava/lang/Object;
       4: astore_2
       5: getstatic     #28                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
       8: aload_2
       9: invokevirtual #29                 // Method java/lang/Boolean.equals:(Ljava/lang/Object;)Z
      12: ifne          63
      15: aload_2
      16: ifnull        27
      19: aload_0
      20: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      23: aload_2
      24: invokevirtual #30                 // Method io/undertow/util/ConcurrentDirectDeque.removeToken:(Ljava/lang/Object;)V
      27: aconst_null
      28: astore_3
      29: aload_0
      30: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      33: aload_1
      34: invokevirtual #31                 // Method io/undertow/util/ConcurrentDirectDeque.offerLastAndReturnToken:(Ljava/lang/Object;)Ljava/lang/Object;
      37: astore_3
      38: goto          43
      41: astore        4
      43: aload_1
      44: aload_3
      45: invokevirtual #33                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.setToken:(Ljava/lang/Object;)Z
      48: ifne          63
      51: aload_3
      52: ifnull        63
      55: aload_0
      56: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      59: aload_3
      60: invokevirtual #30                 // Method io/undertow/util/ConcurrentDirectDeque.removeToken:(Ljava/lang/Object;)V
      63: return
    Exception table:
       from    to  target type
          29    38    41   Class java/lang/Throwable

  public V remove(K);
    Code:
       0: aload_0
       1: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #34,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class io/undertow/server/handlers/cache/LRUCache$CacheEntry
      13: astore_2
      14: aload_2
      15: ifnull        40
      18: aload_2
      19: invokevirtual #35                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.clearToken:()Ljava/lang/Object;
      22: astore_3
      23: aload_3
      24: ifnull        35
      27: aload_0
      28: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      31: aload_3
      32: invokevirtual #30                 // Method io/undertow/util/ConcurrentDirectDeque.removeToken:(Ljava/lang/Object;)V
      35: aload_2
      36: invokevirtual #26                 // Method io/undertow/server/handlers/cache/LRUCache$CacheEntry.getValue:()Ljava/lang/Object;
      39: areturn
      40: aconst_null
      41: areturn

  public void clear();
    Code:
       0: aload_0
       1: getfield      #5                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: invokeinterface #36,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.clear:()V
       9: aload_0
      10: getfield      #7                  // Field accessQueue:Lio/undertow/util/ConcurrentDirectDeque;
      13: invokevirtual #37                 // Method io/undertow/util/ConcurrentDirectDeque.clear:()V
      16: return
}

Compiled from "ServletOutputStreamImpl.java"
class io.undertow.servlet.spec.ServletOutputStreamImpl$WriteChannelListener implements org.xnio.ChannelListener<org.xnio.channels.StreamSinkChannel> {
  final io.undertow.servlet.spec.ServletOutputStreamImpl this$0;

  private io.undertow.servlet.spec.ServletOutputStreamImpl$WriteChannelListener(io.undertow.servlet.spec.ServletOutputStreamImpl);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: return

  public void handleEvent(org.xnio.channels.StreamSinkChannel);
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
       4: getfield      #4                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.state:I
       7: bipush        8
       9: invokestatic  #5                  // Method org/xnio/Bits.anyAreSet:(II)Z
      12: ifeq          36
      15: aload_0
      16: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      19: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
      22: invokeinterface #7,  1            // InterfaceMethod org/xnio/channels/StreamSinkChannel.flush:()Z
      27: pop
      28: return
      29: astore_2
      30: aload_0
      31: aload_2
      32: invokevirtual #9                  // Method handleError:(Ljava/lang/Throwable;)V
      35: return
      36: aload_0
      37: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      40: getfield      #10                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffersToWrite:[Ljava/nio/ByteBuffer;
      43: ifnull        140
      46: aload_0
      47: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      50: getfield      #10                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffersToWrite:[Ljava/nio/ByteBuffer;
      53: invokestatic  #11                 // Method org/xnio/Buffers.remaining:([Ljava/nio/Buffer;)J
      56: lstore_2
      57: lconst_0
      58: lstore        4
      60: lload_2
      61: lconst_0
      62: lcmp
      63: ifle          121
      66: aload_0
      67: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      70: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
      73: aload_0
      74: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      77: getfield      #10                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffersToWrite:[Ljava/nio/ByteBuffer;
      80: invokeinterface #12,  2           // InterfaceMethod org/xnio/channels/StreamSinkChannel.write:([Ljava/nio/ByteBuffer;)J
      85: lstore        6
      87: lload         4
      89: lload         6
      91: ladd
      92: lstore        4
      94: lload         6
      96: lconst_0
      97: lcmp
      98: ifne          102
     101: return
     102: goto          114
     105: astore        8
     107: aload_0
     108: aload         8
     110: invokevirtual #9                  // Method handleError:(Ljava/lang/Throwable;)V
     113: return
     114: lload         4
     116: lload_2
     117: lcmp
     118: iflt          66
     121: aload_0
     122: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     125: aconst_null
     126: putfield      #10                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffersToWrite:[Ljava/nio/ByteBuffer;
     129: aload_0
     130: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     133: getfield      #13                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffer:Ljava/nio/ByteBuffer;
     136: invokevirtual #14                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/ByteBuffer;
     139: pop
     140: aload_0
     141: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     144: getfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     147: ifnull        258
     150: aload_0
     151: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     154: getfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     157: invokevirtual #16                 // Method java/nio/channels/FileChannel.size:()J
     160: lstore_2
     161: aload_0
     162: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     165: getfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     168: invokevirtual #17                 // Method java/nio/channels/FileChannel.position:()J
     171: lstore        4
     173: lload_2
     174: lload         4
     176: lsub
     177: lconst_0
     178: lcmp
     179: ifle          240
     182: aload_0
     183: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     186: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     189: aload_0
     190: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     193: getfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     196: lload         4
     198: lload_2
     199: lload         4
     201: lsub
     202: invokeinterface #18,  6           // InterfaceMethod org/xnio/channels/StreamSinkChannel.transferFrom:(Ljava/nio/channels/FileChannel;JJ)J
     207: lstore        6
     209: lload         6
     211: lconst_0
     212: lcmp
     213: ifgt          230
     216: aload_0
     217: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     220: getfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     223: lload         4
     225: invokevirtual #19                 // Method java/nio/channels/FileChannel.position:(J)Ljava/nio/channels/FileChannel;
     228: pop
     229: return
     230: lload         4
     232: lload         6
     234: ladd
     235: lstore        4
     237: goto          173
     240: aload_0
     241: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     244: aconst_null
     245: putfield      #15                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pendingFile:Ljava/nio/channels/FileChannel;
     248: goto          258
     251: astore_2
     252: aload_0
     253: aload_2
     254: invokevirtual #9                  // Method handleError:(Ljava/lang/Throwable;)V
     257: return
     258: aload_0
     259: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     262: getfield      #4                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.state:I
     265: iconst_1
     266: invokestatic  #5                  // Method org/xnio/Bits.anyAreSet:(II)Z
     269: ifeq          357
     272: aload_0
     273: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     276: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
     279: ifnull        305
     282: aload_0
     283: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     286: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
     289: invokeinterface #21,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.close:()V
     294: aload_0
     295: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     298: aconst_null
     299: putfield      #13                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffer:Ljava/nio/ByteBuffer;
     302: goto          313
     305: aload_0
     306: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     309: aconst_null
     310: putfield      #13                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffer:Ljava/nio/ByteBuffer;
     313: aload_0
     314: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     317: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     320: invokeinterface #22,  1           // InterfaceMethod org/xnio/channels/StreamSinkChannel.shutdownWrites:()V
     325: aload_0
     326: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     329: bipush        8
     331: invokevirtual #23                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.setFlags:(I)V
     334: aload_0
     335: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     338: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     341: invokeinterface #7,  1            // InterfaceMethod org/xnio/channels/StreamSinkChannel.flush:()Z
     346: pop
     347: goto          501
     350: astore_2
     351: aload_0
     352: aload_2
     353: invokevirtual #9                  // Method handleError:(Ljava/lang/Throwable;)V
     356: return
     357: aload_0
     358: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     361: getfield      #24                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.asyncContext:Lio/undertow/servlet/spec/AsyncContextImpl;
     364: invokevirtual #25                 // Method io/undertow/servlet/spec/AsyncContextImpl.isDispatched:()Z
     367: ifeq          383
     370: aload_0
     371: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     374: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     377: invokeinterface #26,  1           // InterfaceMethod org/xnio/channels/StreamSinkChannel.suspendWrites:()V
     382: return
     383: aload_0
     384: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     387: iconst_4
     388: invokevirtual #23                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.setFlags:(I)V
     391: aload_0
     392: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     395: bipush        16
     397: invokevirtual #23                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.setFlags:(I)V
     400: aload_0
     401: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     404: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     407: ifnull        422
     410: aload_0
     411: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     414: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     417: invokeinterface #26,  1           // InterfaceMethod org/xnio/channels/StreamSinkChannel.suspendWrites:()V
     422: aload_0
     423: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     426: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
     429: invokevirtual #28                 // Method io/undertow/servlet/handlers/ServletRequestContext.getCurrentServletContext:()Lio/undertow/servlet/spec/ServletContextImpl;
     432: aload_0
     433: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     436: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
     439: invokevirtual #29                 // Method io/undertow/servlet/handlers/ServletRequestContext.getExchange:()Lio/undertow/server/HttpServerExchange;
     442: aload_0
     443: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     446: getfield      #30                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.listener:Ljakarta/servlet/WriteListener;
     449: invokevirtual #31                 // Method io/undertow/servlet/spec/ServletContextImpl.invokeOnWritePossible:(Lio/undertow/server/HttpServerExchange;Ljakarta/servlet/WriteListener;)V
     452: aload_0
     453: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     456: bipush        16
     458: invokevirtual #32                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.clearFlags:(I)V
     461: goto          501
     464: astore_2
     465: aload_0
     466: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     469: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     472: invokestatic  #33                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     475: aload_0
     476: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     479: bipush        16
     481: invokevirtual #32                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.clearFlags:(I)V
     484: goto          501
     487: astore        9
     489: aload_0
     490: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     493: bipush        16
     495: invokevirtual #32                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl.clearFlags:(I)V
     498: aload         9
     500: athrow
     501: return
    Exception table:
       from    to  target type
          15    28    29   Class java/lang/Throwable
          66   101   105   Class java/lang/Throwable
         150   229   251   Class java/lang/Throwable
         230   248   251   Class java/lang/Throwable
         272   347   350   Class java/lang/Throwable
         391   452   464   Class java/lang/Throwable
         391   452   487   any
         464   475   487   any
         487   489   487   any

  private void handleError(java.lang.Throwable);
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
       4: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
       7: invokevirtual #28                 // Method io/undertow/servlet/handlers/ServletRequestContext.getCurrentServletContext:()Lio/undertow/servlet/spec/ServletContextImpl;
      10: aload_0
      11: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      14: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
      17: invokevirtual #29                 // Method io/undertow/servlet/handlers/ServletRequestContext.getExchange:()Lio/undertow/server/HttpServerExchange;
      20: new           #34                 // class io/undertow/servlet/spec/ServletOutputStreamImpl$WriteChannelListener$1
      23: dup
      24: aload_0
      25: aload_1
      26: invokespecial #35                 // Method io/undertow/servlet/spec/ServletOutputStreamImpl$WriteChannelListener$1."<init>":(Lio/undertow/servlet/spec/ServletOutputStreamImpl$WriteChannelListener;Ljava/lang/Throwable;)V
      29: invokevirtual #36                 // Method io/undertow/servlet/spec/ServletContextImpl.invokeRunnable:(Lio/undertow/server/HttpServerExchange;Ljava/lang/Runnable;)V
      32: iconst_2
      33: anewarray     #37                 // class java/io/Closeable
      36: dup
      37: iconst_0
      38: aload_0
      39: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      42: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
      45: aastore
      46: dup
      47: iconst_1
      48: aload_0
      49: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      52: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
      55: invokevirtual #29                 // Method io/undertow/servlet/handlers/ServletRequestContext.getExchange:()Lio/undertow/server/HttpServerExchange;
      58: invokevirtual #38                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
      61: aastore
      62: invokestatic  #39                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
      65: aload_0
      66: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      69: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
      72: ifnull        180
      75: aload_0
      76: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      79: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
      82: invokeinterface #21,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.close:()V
      87: aload_0
      88: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      91: aconst_null
      92: putfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
      95: aload_0
      96: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
      99: aconst_null
     100: putfield      #13                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffer:Ljava/nio/ByteBuffer;
     103: goto          180
     106: astore_2
     107: iconst_2
     108: anewarray     #37                 // class java/io/Closeable
     111: dup
     112: iconst_0
     113: aload_0
     114: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     117: getfield      #6                  // Field io/undertow/servlet/spec/ServletOutputStreamImpl.channel:Lorg/xnio/channels/StreamSinkChannel;
     120: aastore
     121: dup
     122: iconst_1
     123: aload_0
     124: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     127: getfield      #27                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.servletRequestContext:Lio/undertow/servlet/handlers/ServletRequestContext;
     130: invokevirtual #29                 // Method io/undertow/servlet/handlers/ServletRequestContext.getExchange:()Lio/undertow/server/HttpServerExchange;
     133: invokevirtual #38                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
     136: aastore
     137: invokestatic  #39                 // Method org/xnio/IoUtils.safeClose:([Ljava/io/Closeable;)V
     140: aload_0
     141: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     144: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
     147: ifnull        178
     150: aload_0
     151: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     154: getfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
     157: invokeinterface #21,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.close:()V
     162: aload_0
     163: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     166: aconst_null
     167: putfield      #20                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.pooledBuffer:Lio/undertow/connector/PooledByteBuffer;
     170: aload_0
     171: getfield      #2                  // Field this$0:Lio/undertow/servlet/spec/ServletOutputStreamImpl;
     174: aconst_null
     175: putfield      #13                 // Field io/undertow/servlet/spec/ServletOutputStreamImpl.buffer:Ljava/nio/ByteBuffer;
     178: aload_2
     179: athrow
     180: return
    Exception table:
       from    to  target type
           0    32   106   any

  public void handleEvent(java.nio.channels.Channel);
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #40                 // class org/xnio/channels/StreamSinkChannel
       5: invokevirtual #41                 // Method handleEvent:(Lorg/xnio/channels/StreamSinkChannel;)V
       8: return
}

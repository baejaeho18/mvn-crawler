Compiled from "DefaultP2MetadataGenerator.java"
public class org.sonatype.nexus.plugins.p2.repository.internal.DefaultP2MetadataGenerator implements org.sonatype.nexus.plugins.p2.repository.P2MetadataGenerator {
  private org.slf4j.Logger logger;

  private final java.util.Map<java.lang.String, org.sonatype.nexus.plugins.p2.repository.P2MetadataGeneratorConfiguration> configurations;

  private final org.sonatype.nexus.proxy.registry.RepositoryRegistry repositories;

  private final org.sonatype.p2.bridge.ArtifactRepository artifactRepository;

  private final org.sonatype.p2.bridge.MetadataRepository metadataRepository;

  private final org.sonatype.p2.bridge.Publisher publisher;

  private final org.sonatype.nexus.mime.MimeSupport mimeSupport;

  public org.sonatype.nexus.plugins.p2.repository.internal.DefaultP2MetadataGenerator(org.sonatype.nexus.proxy.registry.RepositoryRegistry, org.sonatype.nexus.mime.MimeSupport, org.sonatype.p2.bridge.ArtifactRepository, org.sonatype.p2.bridge.MetadataRepository, org.sonatype.p2.bridge.Publisher);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #3                  // Field repositories:Lorg/sonatype/nexus/proxy/registry/RepositoryRegistry;
       9: aload_0
      10: aload_2
      11: putfield      #4                  // Field mimeSupport:Lorg/sonatype/nexus/mime/MimeSupport;
      14: aload_0
      15: aload_3
      16: putfield      #5                  // Field artifactRepository:Lorg/sonatype/p2/bridge/ArtifactRepository;
      19: aload_0
      20: aload         4
      22: putfield      #6                  // Field metadataRepository:Lorg/sonatype/p2/bridge/MetadataRepository;
      25: aload_0
      26: aload         5
      28: putfield      #7                  // Field publisher:Lorg/sonatype/p2/bridge/Publisher;
      31: aload_0
      32: new           #8                  // class java/util/HashMap
      35: dup
      36: invokespecial #9                  // Method java/util/HashMap."<init>":()V
      39: putfield      #10                 // Field configurations:Ljava/util/Map;
      42: return

  public org.sonatype.nexus.plugins.p2.repository.P2MetadataGeneratorConfiguration getConfiguration(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field configurations:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #11,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #12                 // class org/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration
      13: areturn

  public void addConfiguration(org.sonatype.nexus.plugins.p2.repository.P2MetadataGeneratorConfiguration);
    Code:
       0: aload_0
       1: getfield      #10                 // Field configurations:Ljava/util/Map;
       4: aload_1
       5: invokevirtual #13                 // Method org/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration.repositoryId:()Ljava/lang/String;
       8: aload_1
       9: invokeinterface #14,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      14: pop
      15: return

  public void removeConfiguration(org.sonatype.nexus.plugins.p2.repository.P2MetadataGeneratorConfiguration);
    Code:
       0: aload_0
       1: getfield      #10                 // Field configurations:Ljava/util/Map;
       4: aload_1
       5: invokevirtual #13                 // Method org/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration.repositoryId:()Ljava/lang/String;
       8: invokeinterface #15,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      13: pop
      14: return

  public void generateP2Metadata(org.sonatype.nexus.proxy.item.StorageItem);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
       7: invokevirtual #17                 // Method getConfiguration:(Ljava/lang/String;)Lorg/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration;
      10: astore_2
      11: aload_2
      12: ifnonnull     16
      15: return
      16: aload_0
      17: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
      20: ldc           #18                 // String Generate P2 metadata for [{}:{}]
      22: aload_1
      23: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
      28: aload_1
      29: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
      34: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      39: aload_0
      40: getfield      #3                  // Field repositories:Lorg/sonatype/nexus/proxy/registry/RepositoryRegistry;
      43: aload_1
      44: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
      49: invokeinterface #21,  2           // InterfaceMethod org/sonatype/nexus/proxy/registry/RepositoryRegistry.getRepository:(Ljava/lang/String;)Lorg/sonatype/nexus/proxy/repository/Repository;
      54: astore_3
      55: aload_3
      56: aload_1
      57: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
      62: invokestatic  #22                 // Method org/sonatype/nexus/plugins/p2/repository/internal/NexusUtils.retrieveFile:(Lorg/sonatype/nexus/proxy/repository/Repository;Ljava/lang/String;)Ljava/io/File;
      65: astore        4
      67: aload         4
      69: invokestatic  #23                 // Method org/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactAnalyzer.parseP2Artifact:(Ljava/io/File;)Lorg/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact;
      72: astore        5
      74: aload         5
      76: ifnonnull     103
      79: aload_0
      80: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
      83: ldc           #24                 // String [{}:{}] is neither an OSGi bundle nor an feature. Bailing out.
      85: aload_1
      86: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
      91: aload_1
      92: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
      97: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     102: return
     103: new           #25                 // class org/sonatype/p2/bridge/model/InstallableArtifact
     106: dup
     107: invokespecial #26                 // Method org/sonatype/p2/bridge/model/InstallableArtifact."<init>":()V
     110: astore        6
     112: aload         6
     114: aload         5
     116: invokevirtual #27                 // Method org/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact.getId:()Ljava/lang/String;
     119: invokevirtual #28                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.setId:(Ljava/lang/String;)V
     122: aload         6
     124: aload         5
     126: invokevirtual #29                 // Method org/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact.getType:()Lorg/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType;
     129: invokevirtual #30                 // Method org/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType.getClassifier:()Ljava/lang/String;
     132: invokevirtual #31                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.setClassifier:(Ljava/lang/String;)V
     135: aload         6
     137: aload         5
     139: invokevirtual #32                 // Method org/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact.getVersion:()Ljava/lang/String;
     142: invokevirtual #33                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.setVersion:(Ljava/lang/String;)V
     145: aload         6
     147: aload         4
     149: invokevirtual #34                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
     152: invokevirtual #35                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.setPath:(Ljava/lang/String;)V
     155: aload         6
     157: aload_1
     158: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
     163: invokevirtual #36                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.setRepositoryPath:(Ljava/lang/String;)V
     166: getstatic     #37                 // Field org/sonatype/nexus/plugins/p2/repository/internal/DefaultP2MetadataGenerator$2.$SwitchMap$org$sonatype$nexus$plugins$p2$repository$internal$P2ArtifactType:[I
     169: aload         5
     171: invokevirtual #29                 // Method org/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact.getType:()Lorg/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType;
     174: invokevirtual #38                 // Method org/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType.ordinal:()I
     177: iaload
     178: lookupswitch  { // 2
                     1: 204
                     2: 234
               default: 325
          }
     204: aload_0
     205: getfield      #7                  // Field publisher:Lorg/sonatype/p2/bridge/Publisher;
     208: iconst_1
     209: iconst_1
     210: iconst_1
     211: iconst_1
     212: anewarray     #39                 // class java/io/File
     215: dup
     216: iconst_0
     217: aload         4
     219: aastore
     220: invokeinterface #40,  5           // InterfaceMethod org/sonatype/p2/bridge/Publisher.generateIUs:(ZZZ[Ljava/io/File;)Ljava/util/Collection;
     225: astore        7
     227: aload         7
     229: astore        8
     231: goto          359
     234: aload_0
     235: getfield      #7                  // Field publisher:Lorg/sonatype/p2/bridge/Publisher;
     238: iconst_1
     239: iconst_1
     240: iconst_1
     241: anewarray     #39                 // class java/io/File
     244: dup
     245: iconst_0
     246: aload         4
     248: aastore
     249: invokeinterface #41,  4           // InterfaceMethod org/sonatype/p2/bridge/Publisher.generateFeatureIUs:(ZZ[Ljava/io/File;)Ljava/util/Collection;
     254: astore        7
     256: new           #42                 // class java/util/ArrayList
     259: dup
     260: invokespecial #43                 // Method java/util/ArrayList."<init>":()V
     263: astore        8
     265: aload         7
     267: invokeinterface #44,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     272: astore        9
     274: aload         9
     276: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     281: ifeq          322
     284: aload         9
     286: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     291: checkcast     #47                 // class org/sonatype/p2/bridge/model/InstallableUnit
     294: astore        10
     296: aload         10
     298: invokevirtual #48                 // Method org/sonatype/p2/bridge/model/InstallableUnit.getId:()Ljava/lang/String;
     301: ldc           #49                 // String .feature.group
     303: invokevirtual #50                 // Method java/lang/String.endsWith:(Ljava/lang/String;)Z
     306: ifne          319
     309: aload         8
     311: aload         10
     313: invokeinterface #51,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     318: pop
     319: goto          274
     322: goto          359
     325: new           #52                 // class java/lang/IllegalStateException
     328: dup
     329: new           #53                 // class java/lang/StringBuilder
     332: dup
     333: invokespecial #54                 // Method java/lang/StringBuilder."<init>":()V
     336: ldc           #55                 // String Unsupported artifact type
     338: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     341: aload         5
     343: invokevirtual #29                 // Method org/sonatype/nexus/plugins/p2/repository/internal/GenericP2Artifact.getType:()Lorg/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType;
     346: invokevirtual #57                 // Method org/sonatype/nexus/plugins/p2/repository/internal/P2ArtifactType.name:()Ljava/lang/String;
     349: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     352: invokevirtual #58                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     355: invokespecial #59                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     358: athrow
     359: aload_0
     360: aload         6
     362: aload         8
     364: invokespecial #60                 // Method attachArtifact:(Lorg/sonatype/p2/bridge/model/InstallableArtifact;Ljava/util/Collection;)V
     367: aload_0
     368: aload         6
     370: aload         7
     372: aload_3
     373: invokespecial #61                 // Method storeP2Data:(Lorg/sonatype/p2/bridge/model/InstallableArtifact;Ljava/util/Collection;Lorg/sonatype/nexus/proxy/repository/Repository;)V
     376: goto          425
     379: astore_3
     380: aload_0
     381: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
     384: ldc           #63                 // String Could not generate p2 metadata of [%s:%s] due to %s. Bailing out.
     386: iconst_3
     387: anewarray     #64                 // class java/lang/Object
     390: dup
     391: iconst_0
     392: aload_1
     393: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
     398: aastore
     399: dup
     400: iconst_1
     401: aload_1
     402: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
     407: aastore
     408: dup
     409: iconst_2
     410: aload_3
     411: invokevirtual #65                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     414: aastore
     415: invokestatic  #66                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     418: aload_3
     419: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     424: return
     425: return
    Exception table:
       from    to  target type
          39   102   379   Class java/lang/Exception
         103   376   379   Class java/lang/Exception

  private void attachArtifact(org.sonatype.p2.bridge.model.InstallableArtifact, java.util.Collection<org.sonatype.p2.bridge.model.InstallableUnit>);
    Code:
       0: aload_2
       1: invokeinterface #44,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
       6: astore_3
       7: aload_3
       8: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      13: ifeq          103
      16: aload_3
      17: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      22: checkcast     #47                 // class org/sonatype/p2/bridge/model/InstallableUnit
      25: astore        4
      27: new           #68                 // class org/sonatype/p2/bridge/model/InstallableUnitArtifact
      30: dup
      31: invokespecial #69                 // Method org/sonatype/p2/bridge/model/InstallableUnitArtifact."<init>":()V
      34: astore        5
      36: aload         5
      38: aload_1
      39: invokevirtual #70                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getId:()Ljava/lang/String;
      42: invokevirtual #71                 // Method org/sonatype/p2/bridge/model/InstallableUnitArtifact.setId:(Ljava/lang/String;)V
      45: aload         5
      47: aload_1
      48: invokevirtual #72                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getClassifier:()Ljava/lang/String;
      51: invokevirtual #73                 // Method org/sonatype/p2/bridge/model/InstallableUnitArtifact.setClassifier:(Ljava/lang/String;)V
      54: aload         5
      56: aload_1
      57: invokevirtual #74                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getVersion:()Ljava/lang/String;
      60: invokevirtual #75                 // Method org/sonatype/p2/bridge/model/InstallableUnitArtifact.setVersion:(Ljava/lang/String;)V
      63: aload         4
      65: aload         5
      67: invokevirtual #76                 // Method org/sonatype/p2/bridge/model/InstallableUnit.addArtifact:(Lorg/sonatype/p2/bridge/model/InstallableUnitArtifact;)V
      70: new           #77                 // class org/sonatype/p2/bridge/model/TouchpointType
      73: dup
      74: invokespecial #78                 // Method org/sonatype/p2/bridge/model/TouchpointType."<init>":()V
      77: astore        6
      79: aload         6
      81: ldc           #79                 // String org.eclipse.equinox.p2.osgi
      83: invokevirtual #80                 // Method org/sonatype/p2/bridge/model/TouchpointType.setId:(Ljava/lang/String;)V
      86: aload         6
      88: ldc           #81                 // String 1.0.0
      90: invokevirtual #82                 // Method org/sonatype/p2/bridge/model/TouchpointType.setVersion:(Ljava/lang/String;)V
      93: aload         4
      95: aload         6
      97: invokevirtual #83                 // Method org/sonatype/p2/bridge/model/InstallableUnit.setTouchpointType:(Lorg/sonatype/p2/bridge/model/TouchpointType;)V
     100: goto          7
     103: return

  private void storeP2Data(org.sonatype.p2.bridge.model.InstallableArtifact, java.util.Collection<org.sonatype.p2.bridge.model.InstallableUnit>, org.sonatype.nexus.proxy.repository.Repository) throws java.lang.Exception;
    Code:
       0: aconst_null
       1: astore        4
       3: aload_1
       4: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
       7: invokestatic  #85                 // Method org/apache/commons/io/FilenameUtils.getExtension:(Ljava/lang/String;)Ljava/lang/String;
      10: astore        5
      12: invokestatic  #86                 // Method org/sonatype/nexus/plugins/p2/repository/internal/NexusUtils.createTemporaryP2Repository:()Ljava/io/File;
      15: astore        4
      17: aload_0
      18: getfield      #5                  // Field artifactRepository:Lorg/sonatype/p2/bridge/ArtifactRepository;
      21: aload         4
      23: invokevirtual #87                 // Method java/io/File.toURI:()Ljava/net/URI;
      26: aload_1
      27: invokestatic  #88                 // Method java/util/Collections.singleton:(Ljava/lang/Object;)Ljava/util/Set;
      30: aload_1
      31: invokevirtual #70                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getId:()Ljava/lang/String;
      34: aconst_null
      35: iconst_1
      36: anewarray     #89                 // class "[Ljava/lang/String;"
      39: dup
      40: iconst_0
      41: iconst_2
      42: anewarray     #90                 // class java/lang/String
      45: dup
      46: iconst_0
      47: new           #53                 // class java/lang/StringBuilder
      50: dup
      51: invokespecial #54                 // Method java/lang/StringBuilder."<init>":()V
      54: ldc           #91                 // String (classifier=
      56: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      59: aload_1
      60: invokevirtual #72                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getClassifier:()Ljava/lang/String;
      63: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      66: ldc           #92                 // String )
      68: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      71: invokevirtual #58                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      74: aastore
      75: dup
      76: iconst_1
      77: new           #53                 // class java/lang/StringBuilder
      80: dup
      81: invokespecial #54                 // Method java/lang/StringBuilder."<init>":()V
      84: ldc           #93                 // String ${repoUrl}
      86: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: aload_1
      90: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
      93: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      96: invokevirtual #58                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      99: aastore
     100: aastore
     101: invokeinterface #94,  6           // InterfaceMethod org/sonatype/p2/bridge/ArtifactRepository.write:(Ljava/net/URI;Ljava/util/Collection;Ljava/lang/String;Ljava/util/Map;[[Ljava/lang/String;)V
     106: new           #53                 // class java/lang/StringBuilder
     109: dup
     110: invokespecial #54                 // Method java/lang/StringBuilder."<init>":()V
     113: aload_1
     114: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
     117: iconst_0
     118: aload_1
     119: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
     122: invokevirtual #95                 // Method java/lang/String.length:()I
     125: aload         5
     127: invokevirtual #95                 // Method java/lang/String.length:()I
     130: isub
     131: iconst_1
     132: isub
     133: invokevirtual #96                 // Method java/lang/String.substring:(II)Ljava/lang/String;
     136: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     139: ldc           #97                 // String -p2Artifacts.xml
     141: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: invokevirtual #58                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     147: astore        6
     149: aload         6
     151: new           #39                 // class java/io/File
     154: dup
     155: aload         4
     157: ldc           #98                 // String artifacts.xml
     159: invokespecial #99                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     162: aload_3
     163: aload_0
     164: getfield      #4                  // Field mimeSupport:Lorg/sonatype/nexus/mime/MimeSupport;
     167: aload         6
     169: invokeinterface #100,  2          // InterfaceMethod org/sonatype/nexus/mime/MimeSupport.guessMimeTypeFromPath:(Ljava/lang/String;)Ljava/lang/String;
     174: invokestatic  #101                // Method org/sonatype/nexus/plugins/p2/repository/internal/NexusUtils.storeItemFromFile:(Ljava/lang/String;Ljava/io/File;Lorg/sonatype/nexus/proxy/repository/Repository;Ljava/lang/String;)V
     177: aload_0
     178: getfield      #6                  // Field metadataRepository:Lorg/sonatype/p2/bridge/MetadataRepository;
     181: aload         4
     183: invokevirtual #87                 // Method java/io/File.toURI:()Ljava/net/URI;
     186: aload_2
     187: aload_1
     188: invokevirtual #70                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getId:()Ljava/lang/String;
     191: aconst_null
     192: invokeinterface #102,  5          // InterfaceMethod org/sonatype/p2/bridge/MetadataRepository.write:(Ljava/net/URI;Ljava/util/Collection;Ljava/lang/String;Ljava/util/Map;)V
     197: new           #53                 // class java/lang/StringBuilder
     200: dup
     201: invokespecial #54                 // Method java/lang/StringBuilder."<init>":()V
     204: aload_1
     205: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
     208: iconst_0
     209: aload_1
     210: invokevirtual #84                 // Method org/sonatype/p2/bridge/model/InstallableArtifact.getRepositoryPath:()Ljava/lang/String;
     213: invokevirtual #95                 // Method java/lang/String.length:()I
     216: aload         5
     218: invokevirtual #95                 // Method java/lang/String.length:()I
     221: isub
     222: iconst_1
     223: isub
     224: invokevirtual #96                 // Method java/lang/String.substring:(II)Ljava/lang/String;
     227: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     230: ldc           #103                // String -p2Content.xml
     232: invokevirtual #56                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     235: invokevirtual #58                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     238: astore        7
     240: aload         7
     242: new           #39                 // class java/io/File
     245: dup
     246: aload         4
     248: ldc           #104                // String content.xml
     250: invokespecial #99                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     253: aload_3
     254: aload_0
     255: getfield      #4                  // Field mimeSupport:Lorg/sonatype/nexus/mime/MimeSupport;
     258: aload         7
     260: invokeinterface #100,  2          // InterfaceMethod org/sonatype/nexus/mime/MimeSupport.guessMimeTypeFromPath:(Ljava/lang/String;)Ljava/lang/String;
     265: invokestatic  #101                // Method org/sonatype/nexus/plugins/p2/repository/internal/NexusUtils.storeItemFromFile:(Ljava/lang/String;Ljava/io/File;Lorg/sonatype/nexus/proxy/repository/Repository;Ljava/lang/String;)V
     268: aload         4
     270: invokestatic  #105                // Method org/apache/commons/io/FileUtils.deleteDirectory:(Ljava/io/File;)V
     273: goto          286
     276: astore        8
     278: aload         4
     280: invokestatic  #105                // Method org/apache/commons/io/FileUtils.deleteDirectory:(Ljava/io/File;)V
     283: aload         8
     285: athrow
     286: return
    Exception table:
       from    to  target type
           3   268   276   any
         276   278   276   any

  public void removeP2Metadata(org.sonatype.nexus.proxy.item.StorageItem);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
       7: invokevirtual #17                 // Method getConfiguration:(Ljava/lang/String;)Lorg/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration;
      10: astore_2
      11: aload_2
      12: ifnonnull     16
      15: return
      16: aload_0
      17: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
      20: ldc           #106                // String Removing P2 metadata for [{}:{}]
      22: aload_1
      23: invokeinterface #16,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getRepositoryId:()Ljava/lang/String;
      28: aload_1
      29: invokeinterface #19,  1           // InterfaceMethod org/sonatype/nexus/proxy/item/StorageItem.getPath:()Ljava/lang/String;
      34: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      39: return

  public void scanAndRebuild(java.lang.String, java.lang.String);
    Code:
       0: aload_0
       1: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
       4: ldc           #107                // String Rebuilding P2 metadata for repository [{}], path [{}]
       6: aload_1
       7: aload_2
       8: invokeinterface #20,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      13: aload_0
      14: aload_1
      15: invokevirtual #17                 // Method getConfiguration:(Ljava/lang/String;)Lorg/sonatype/nexus/plugins/p2/repository/P2MetadataGeneratorConfiguration;
      18: astore_3
      19: aload_3
      20: ifnonnull     36
      23: aload_0
      24: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
      27: ldc           #108                // String Rebuilding P2 metadata for [{}] not executed as P2 Metadata Generator capability is not enabled for this repository
      29: aload_1
      30: invokeinterface #109,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      35: return
      36: aload_0
      37: getfield      #3                  // Field repositories:Lorg/sonatype/nexus/proxy/registry/RepositoryRegistry;
      40: aload_1
      41: invokeinterface #21,  2           // InterfaceMethod org/sonatype/nexus/proxy/registry/RepositoryRegistry.getRepository:(Ljava/lang/String;)Lorg/sonatype/nexus/proxy/repository/Repository;
      46: astore        4
      48: aload         4
      50: invokestatic  #110                // Method org/sonatype/nexus/plugins/p2/repository/internal/NexusUtils.localStorageOfRepositoryAsFile:(Lorg/sonatype/nexus/proxy/repository/Repository;)Ljava/io/File;
      53: astore        5
      55: aload         5
      57: astore        6
      59: aload_2
      60: ifnull        75
      63: new           #39                 // class java/io/File
      66: dup
      67: aload         6
      69: aload_2
      70: invokespecial #99                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      73: astore        6
      75: new           #111                // class org/sonatype/sisu/resource/scanner/scanners/SerialScanner
      78: dup
      79: invokespecial #112                // Method org/sonatype/sisu/resource/scanner/scanners/SerialScanner."<init>":()V
      82: aload         6
      84: new           #113                // class org/sonatype/nexus/plugins/p2/repository/internal/DefaultP2MetadataGenerator$1
      87: dup
      88: aload_0
      89: aload         5
      91: aload         4
      93: invokespecial #114                // Method org/sonatype/nexus/plugins/p2/repository/internal/DefaultP2MetadataGenerator$1."<init>":(Lorg/sonatype/nexus/plugins/p2/repository/internal/DefaultP2MetadataGenerator;Ljava/io/File;Lorg/sonatype/nexus/proxy/repository/Repository;)V
      96: invokevirtual #115                // Method org/sonatype/sisu/resource/scanner/scanners/SerialScanner.scan:(Ljava/io/File;Lorg/sonatype/sisu/resource/scanner/Listener;)V
      99: goto          136
     102: astore        4
     104: aload_0
     105: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
     108: ldc           #116                // String Rebuilding P2 metadata not executed as repository [%s] could not be scanned due to [%s]
     110: iconst_2
     111: anewarray     #64                 // class java/lang/Object
     114: dup
     115: iconst_0
     116: aload_1
     117: aastore
     118: dup
     119: iconst_1
     120: aload         4
     122: invokevirtual #65                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     125: aastore
     126: invokestatic  #66                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     129: aload         4
     131: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     136: return
    Exception table:
       from    to  target type
          36    99   102   Class java/lang/Exception

  public void scanAndRebuild(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #3                  // Field repositories:Lorg/sonatype/nexus/proxy/registry/RepositoryRegistry;
       4: invokeinterface #117,  1          // InterfaceMethod org/sonatype/nexus/proxy/registry/RepositoryRegistry.getRepositories:()Ljava/util/List;
       9: invokeinterface #118,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      14: astore_2
      15: aload_2
      16: invokeinterface #45,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          48
      24: aload_2
      25: invokeinterface #46,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #119                // class org/sonatype/nexus/proxy/repository/Repository
      33: astore_3
      34: aload_0
      35: aload_3
      36: invokeinterface #120,  1          // InterfaceMethod org/sonatype/nexus/proxy/repository/Repository.getId:()Ljava/lang/String;
      41: aload_1
      42: invokevirtual #121                // Method scanAndRebuild:(Ljava/lang/String;Ljava/lang/String;)V
      45: goto          15
      48: return

  static org.slf4j.Logger access$000(org.sonatype.nexus.plugins.p2.repository.internal.DefaultP2MetadataGenerator);
    Code:
       0: aload_0
       1: getfield      #1                  // Field logger:Lorg/slf4j/Logger;
       4: areturn
}

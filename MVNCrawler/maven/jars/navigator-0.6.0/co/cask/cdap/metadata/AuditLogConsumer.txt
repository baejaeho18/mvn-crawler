Compiled from "AuditLogConsumer.java"
public final class co.cask.cdap.metadata.AuditLogConsumer extends co.cask.cdap.api.flow.flowlet.AbstractFlowlet {
  private static final org.slf4j.Logger LOG;

  private static final java.lang.String OFFSET;

  private co.cask.cdap.api.dataset.lib.KeyValueTable offsetStore;

  private co.cask.cdap.api.flow.flowlet.OutputEmitter<java.lang.String> emitter;

  private final java.lang.String offsetDatasetName;

  private final java.lang.String namespace;

  private final java.lang.String topic;

  private final int limit;

  private com.google.common.base.Stopwatch stopwatch;

  private co.cask.cdap.api.messaging.MessageFetcher messageFetcher;

  private long timeout;

  private boolean emptyIterator;

  public co.cask.cdap.metadata.AuditLogConsumer(co.cask.cdap.metadata.config.AuditLogConfig);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method co/cask/cdap/api/flow/flowlet/AbstractFlowlet."<init>":()V
       4: aload_0
       5: aload_1
       6: invokevirtual #2                  // Method co/cask/cdap/metadata/config/AuditLogConfig.getOffsetDataset:()Ljava/lang/String;
       9: putfield      #3                  // Field offsetDatasetName:Ljava/lang/String;
      12: aload_0
      13: aload_1
      14: invokevirtual #4                  // Method co/cask/cdap/metadata/config/AuditLogConfig.getNamespace:()Ljava/lang/String;
      17: putfield      #5                  // Field namespace:Ljava/lang/String;
      20: aload_0
      21: aload_1
      22: invokevirtual #6                  // Method co/cask/cdap/metadata/config/AuditLogConfig.getTopic:()Ljava/lang/String;
      25: putfield      #7                  // Field topic:Ljava/lang/String;
      28: aload_0
      29: aload_1
      30: invokevirtual #8                  // Method co/cask/cdap/metadata/config/AuditLogConfig.getLimit:()I
      33: putfield      #9                  // Field limit:I
      36: return

  protected void configure();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #3                  // Field offsetDatasetName:Ljava/lang/String;
       5: ldc_w         #10                 // class co/cask/cdap/api/dataset/lib/KeyValueTable
       8: invokevirtual #11                 // Method createDataset:(Ljava/lang/String;Ljava/lang/Class;)V
      11: return

  public void initialize(co.cask.cdap.api.flow.flowlet.FlowletContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #12                 // Method co/cask/cdap/api/flow/flowlet/AbstractFlowlet.initialize:(Lco/cask/cdap/api/flow/flowlet/FlowletContext;)V
       5: aload_0
       6: aload_1
       7: aload_0
       8: getfield      #3                  // Field offsetDatasetName:Ljava/lang/String;
      11: invokeinterface #13,  2           // InterfaceMethod co/cask/cdap/api/flow/flowlet/FlowletContext.getDataset:(Ljava/lang/String;)Lco/cask/cdap/api/dataset/Dataset;
      16: checkcast     #10                 // class co/cask/cdap/api/dataset/lib/KeyValueTable
      19: putfield      #14                 // Field offsetStore:Lco/cask/cdap/api/dataset/lib/KeyValueTable;
      22: aload_1
      23: invokeinterface #15,  1           // InterfaceMethod co/cask/cdap/api/flow/flowlet/FlowletContext.getRuntimeArguments:()Ljava/util/Map;
      28: ldc           #16                 // String data.tx.timeout
      30: invokeinterface #17,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      35: checkcast     #18                 // class java/lang/String
      38: astore_2
      39: aload_2
      40: ifnonnull     46
      43: ldc           #19                 // String 30
      45: astore_2
      46: aload_0
      47: aload_2
      48: invokestatic  #20                 // Method java/lang/Long.parseLong:(Ljava/lang/String;)J
      51: ldc2_w        #21                 // long 10l
      54: lsub
      55: putfield      #23                 // Field timeout:J
      58: aload_0
      59: new           #24                 // class com/google/common/base/Stopwatch
      62: dup
      63: invokespecial #25                 // Method com/google/common/base/Stopwatch."<init>":()V
      66: putfield      #26                 // Field stopwatch:Lcom/google/common/base/Stopwatch;
      69: aload_0
      70: iconst_0
      71: putfield      #27                 // Field emptyIterator:Z
      74: aload_0
      75: aload_0
      76: invokevirtual #28                 // Method getContext:()Lco/cask/cdap/api/flow/flowlet/FlowletContext;
      79: invokeinterface #29,  1           // InterfaceMethod co/cask/cdap/api/flow/flowlet/FlowletContext.getMessageFetcher:()Lco/cask/cdap/api/messaging/MessageFetcher;
      84: putfield      #30                 // Field messageFetcher:Lco/cask/cdap/api/messaging/MessageFetcher;
      87: return

  protected void pollAuditTopic() throws java.lang.Exception;
    Code:
       0: aconst_null
       1: astore_1
       2: aload_0
       3: getfield      #14                 // Field offsetStore:Lco/cask/cdap/api/dataset/lib/KeyValueTable;
       6: ldc           #31                 // String navigator.audit.offset
       8: invokevirtual #32                 // Method co/cask/cdap/api/dataset/lib/KeyValueTable.read:(Ljava/lang/String;)[B
      11: astore_2
      12: aconst_null
      13: astore_3
      14: aload_2
      15: ifnull        23
      18: aload_2
      19: invokestatic  #33                 // Method co/cask/cdap/api/common/Bytes.toString:([B)Ljava/lang/String;
      22: astore_3
      23: aload_0
      24: getfield      #26                 // Field stopwatch:Lcom/google/common/base/Stopwatch;
      27: invokevirtual #34                 // Method com/google/common/base/Stopwatch.reset:()Lcom/google/common/base/Stopwatch;
      30: pop
      31: aload_0
      32: getfield      #26                 // Field stopwatch:Lcom/google/common/base/Stopwatch;
      35: invokevirtual #35                 // Method com/google/common/base/Stopwatch.start:()Lcom/google/common/base/Stopwatch;
      38: pop
      39: aload_0
      40: iconst_1
      41: putfield      #27                 // Field emptyIterator:Z
      44: aload_0
      45: getfield      #30                 // Field messageFetcher:Lco/cask/cdap/api/messaging/MessageFetcher;
      48: aload_0
      49: getfield      #5                  // Field namespace:Ljava/lang/String;
      52: aload_0
      53: getfield      #7                  // Field topic:Ljava/lang/String;
      56: aload_0
      57: getfield      #9                  // Field limit:I
      60: aload_3
      61: invokeinterface #36,  5           // InterfaceMethod co/cask/cdap/api/messaging/MessageFetcher.fetch:(Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;)Lco/cask/cdap/api/dataset/lib/CloseableIterator;
      66: astore        4
      68: aconst_null
      69: astore        5
      71: aload         4
      73: invokeinterface #37,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.hasNext:()Z
      78: ifeq          125
      81: aload         4
      83: invokeinterface #38,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.next:()Ljava/lang/Object;
      88: checkcast     #39                 // class co/cask/cdap/api/messaging/Message
      91: astore        6
      93: aload         6
      95: invokeinterface #40,  1           // InterfaceMethod co/cask/cdap/api/messaging/Message.getId:()Ljava/lang/String;
     100: astore_1
     101: aload_0
     102: getfield      #41                 // Field emitter:Lco/cask/cdap/api/flow/flowlet/OutputEmitter;
     105: aload         6
     107: invokeinterface #42,  1           // InterfaceMethod co/cask/cdap/api/messaging/Message.getPayloadAsString:()Ljava/lang/String;
     112: invokeinterface #43,  2           // InterfaceMethod co/cask/cdap/api/flow/flowlet/OutputEmitter.emit:(Ljava/lang/Object;)V
     117: aload_0
     118: iconst_0
     119: putfield      #27                 // Field emptyIterator:Z
     122: goto          71
     125: aload         4
     127: ifnull        220
     130: aload         5
     132: ifnull        157
     135: aload         4
     137: invokeinterface #44,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.close:()V
     142: goto          220
     145: astore        6
     147: aload         5
     149: aload         6
     151: invokevirtual #46                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     154: goto          220
     157: aload         4
     159: invokeinterface #44,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.close:()V
     164: goto          220
     167: astore        6
     169: aload         6
     171: astore        5
     173: aload         6
     175: athrow
     176: astore        7
     178: aload         4
     180: ifnull        217
     183: aload         5
     185: ifnull        210
     188: aload         4
     190: invokeinterface #44,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.close:()V
     195: goto          217
     198: astore        8
     200: aload         5
     202: aload         8
     204: invokevirtual #46                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     207: goto          217
     210: aload         4
     212: invokeinterface #44,  1           // InterfaceMethod co/cask/cdap/api/dataset/lib/CloseableIterator.close:()V
     217: aload         7
     219: athrow
     220: aload_0
     221: getfield      #27                 // Field emptyIterator:Z
     224: ifne          306
     227: aload_0
     228: getfield      #14                 // Field offsetStore:Lco/cask/cdap/api/dataset/lib/KeyValueTable;
     231: ldc           #31                 // String navigator.audit.offset
     233: aload_1
     234: invokevirtual #47                 // Method co/cask/cdap/api/dataset/lib/KeyValueTable.write:(Ljava/lang/String;Ljava/lang/String;)V
     237: aload_1
     238: astore_3
     239: goto          306
     242: astore        4
     244: getstatic     #49                 // Field LOG:Lorg/slf4j/Logger;
     247: ldc           #50                 // String Audit Topic {} was not found.
     249: aload_0
     250: getfield      #7                  // Field topic:Ljava/lang/String;
     253: aload         4
     255: invokeinterface #51,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     260: aload_0
     261: getfield      #27                 // Field emptyIterator:Z
     264: ifne          306
     267: aload_0
     268: getfield      #14                 // Field offsetStore:Lco/cask/cdap/api/dataset/lib/KeyValueTable;
     271: ldc           #31                 // String navigator.audit.offset
     273: aload_1
     274: invokevirtual #47                 // Method co/cask/cdap/api/dataset/lib/KeyValueTable.write:(Ljava/lang/String;Ljava/lang/String;)V
     277: aload_1
     278: astore_3
     279: goto          306
     282: astore        9
     284: aload_0
     285: getfield      #27                 // Field emptyIterator:Z
     288: ifne          303
     291: aload_0
     292: getfield      #14                 // Field offsetStore:Lco/cask/cdap/api/dataset/lib/KeyValueTable;
     295: ldc           #31                 // String navigator.audit.offset
     297: aload_1
     298: invokevirtual #47                 // Method co/cask/cdap/api/dataset/lib/KeyValueTable.write:(Ljava/lang/String;Ljava/lang/String;)V
     301: aload_1
     302: astore_3
     303: aload         9
     305: athrow
     306: aload_0
     307: getfield      #27                 // Field emptyIterator:Z
     310: ifeq          316
     313: goto          334
     316: aload_0
     317: getfield      #26                 // Field stopwatch:Lcom/google/common/base/Stopwatch;
     320: getstatic     #52                 // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
     323: invokevirtual #53                 // Method com/google/common/base/Stopwatch.elapsedTime:(Ljava/util/concurrent/TimeUnit;)J
     326: aload_0
     327: getfield      #23                 // Field timeout:J
     330: lcmp
     331: iflt          39
     334: aload_0
     335: getfield      #26                 // Field stopwatch:Lcom/google/common/base/Stopwatch;
     338: invokevirtual #54                 // Method com/google/common/base/Stopwatch.stop:()Lcom/google/common/base/Stopwatch;
     341: pop
     342: return
    Exception table:
       from    to  target type
         135   142   145   Class java/lang/Throwable
          71   125   167   Class java/lang/Throwable
          71   125   176   any
         188   195   198   Class java/lang/Throwable
         167   178   176   any
          44   220   242   Class co/cask/cdap/api/messaging/TopicNotFoundException
          44   220   282   any
         242   260   282   any
         282   284   282   any

  public void initialize(co.cask.cdap.api.RuntimeContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #55                 // class co/cask/cdap/api/flow/flowlet/FlowletContext
       5: invokevirtual #56                 // Method initialize:(Lco/cask/cdap/api/flow/flowlet/FlowletContext;)V
       8: return

  static {};
    Code:
       0: ldc_w         #57                 // class co/cask/cdap/metadata/AuditLogConsumer
       3: invokestatic  #58                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #49                 // Field LOG:Lorg/slf4j/Logger;
       9: return
}

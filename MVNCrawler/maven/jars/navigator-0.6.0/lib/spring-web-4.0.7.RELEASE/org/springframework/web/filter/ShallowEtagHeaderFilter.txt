Compiled from "ShallowEtagHeaderFilter.java"
public class org.springframework.web.filter.ShallowEtagHeaderFilter extends org.springframework.web.filter.OncePerRequestFilter {
  private static final java.lang.String HEADER_ETAG;

  private static final java.lang.String HEADER_IF_NONE_MATCH;

  private static final java.lang.String HEADER_CACHE_CONTROL;

  private static final java.lang.String DIRECTIVE_NO_STORE;

  public org.springframework.web.filter.ShallowEtagHeaderFilter();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/web/filter/OncePerRequestFilter."<init>":()V
       4: return

  protected boolean shouldNotFilterAsyncDispatch();
    Code:
       0: iconst_0
       1: ireturn

  protected void doFilterInternal(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, javax.servlet.FilterChain) throws javax.servlet.ServletException, java.io.IOException;
    Code:
       0: aload_2
       1: astore        4
       3: aload_0
       4: aload_1
       5: invokevirtual #2                  // Method isAsyncDispatch:(Ljavax/servlet/http/HttpServletRequest;)Z
       8: ifne          21
      11: new           #3                  // class org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper
      14: dup
      15: aload_2
      16: invokespecial #4                  // Method org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper."<init>":(Ljavax/servlet/http/HttpServletResponse;)V
      19: astore        4
      21: aload_3
      22: aload_1
      23: aload         4
      25: invokeinterface #5,  3            // InterfaceMethod javax/servlet/FilterChain.doFilter:(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V
      30: aload_0
      31: aload_1
      32: invokevirtual #6                  // Method isAsyncStarted:(Ljavax/servlet/http/HttpServletRequest;)Z
      35: ifne          45
      38: aload_0
      39: aload_1
      40: aload         4
      42: invokespecial #7                  // Method updateResponse:(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)V
      45: return

  private void updateResponse(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse) throws java.io.IOException;
    Code:
       0: aload_2
       1: ldc           #3                  // class org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper
       3: invokestatic  #8                  // Method org/springframework/web/util/WebUtils.getNativeResponse:(Ljavax/servlet/ServletResponse;Ljava/lang/Class;)Ljava/lang/Object;
       6: checkcast     #3                  // class org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper
       9: astore_3
      10: aload_3
      11: ldc           #9                  // String ShallowEtagResponseWrapper not found
      13: invokestatic  #10                 // Method org/springframework/util/Assert.notNull:(Ljava/lang/Object;Ljava/lang/String;)V
      16: aload_3
      17: invokevirtual #11                 // Method org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper.getResponse:()Ljavax/servlet/ServletResponse;
      20: checkcast     #12                 // class javax/servlet/http/HttpServletResponse
      23: astore        4
      25: aload_3
      26: invokevirtual #13                 // Method org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper.getStatusCode:()I
      29: istore        5
      31: aload_3
      32: invokevirtual #14                 // Method org/springframework/web/filter/ShallowEtagHeaderFilter$ShallowEtagResponseWrapper.toByteArray:()[B
      35: astore        6
      37: aload         4
      39: invokeinterface #15,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.isCommitted:()Z
      44: ifeq          68
      47: aload         6
      49: arraylength
      50: ifle          340
      53: aload         6
      55: aload         4
      57: invokeinterface #16,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
      62: invokestatic  #17                 // Method org/springframework/util/StreamUtils.copy:([BLjava/io/OutputStream;)V
      65: goto          340
      68: aload_0
      69: aload_1
      70: aload_3
      71: iload         5
      73: aload         6
      75: invokevirtual #18                 // Method isEligibleForEtag:(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;I[B)Z
      78: ifeq          266
      81: aload_0
      82: aload         6
      84: invokevirtual #19                 // Method generateETagHeaderValue:([B)Ljava/lang/String;
      87: astore        7
      89: aload         4
      91: ldc           #21                 // String ETag
      93: aload         7
      95: invokeinterface #22,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.setHeader:(Ljava/lang/String;Ljava/lang/String;)V
     100: aload_1
     101: ldc           #23                 // String If-None-Match
     103: invokeinterface #24,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     108: astore        8
     110: aload         7
     112: aload         8
     114: invokevirtual #25                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     117: ifeq          179
     120: aload_0
     121: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     124: invokeinterface #27,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
     129: ifeq          166
     132: aload_0
     133: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     136: new           #28                 // class java/lang/StringBuilder
     139: dup
     140: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     143: ldc           #30                 // String ETag [
     145: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     148: aload         7
     150: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     153: ldc           #32                 // String ] equal to If-None-Match, sending 304
     155: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     158: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     161: invokeinterface #34,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     166: aload         4
     168: sipush        304
     171: invokeinterface #35,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setStatus:(I)V
     176: goto          263
     179: aload_0
     180: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     183: invokeinterface #27,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
     188: ifeq          235
     191: aload_0
     192: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     195: new           #28                 // class java/lang/StringBuilder
     198: dup
     199: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     202: ldc           #30                 // String ETag [
     204: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     207: aload         7
     209: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     212: ldc           #36                 // String ] not equal to If-None-Match [
     214: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     217: aload         8
     219: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     222: ldc           #37                 // String ], sending normal response
     224: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     227: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     230: invokeinterface #34,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     235: aload         6
     237: arraylength
     238: ifle          263
     241: aload         4
     243: aload         6
     245: arraylength
     246: invokeinterface #38,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setContentLength:(I)V
     251: aload         6
     253: aload         4
     255: invokeinterface #16,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
     260: invokestatic  #17                 // Method org/springframework/util/StreamUtils.copy:([BLjava/io/OutputStream;)V
     263: goto          340
     266: aload_0
     267: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     270: invokeinterface #27,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
     275: ifeq          312
     278: aload_0
     279: getfield      #26                 // Field logger:Lorg/apache/commons/logging/Log;
     282: new           #28                 // class java/lang/StringBuilder
     285: dup
     286: invokespecial #29                 // Method java/lang/StringBuilder."<init>":()V
     289: ldc           #39                 // String Response with status code [
     291: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     294: iload         5
     296: invokevirtual #40                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     299: ldc           #41                 // String ] not eligible for ETag
     301: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     304: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     307: invokeinterface #34,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     312: aload         6
     314: arraylength
     315: ifle          340
     318: aload         4
     320: aload         6
     322: arraylength
     323: invokeinterface #38,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setContentLength:(I)V
     328: aload         6
     330: aload         4
     332: invokeinterface #16,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
     337: invokestatic  #17                 // Method org/springframework/util/StreamUtils.copy:([BLjava/io/OutputStream;)V
     340: return

  protected boolean isEligibleForEtag(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, int, byte[]);
    Code:
       0: iload_3
       1: sipush        200
       4: if_icmplt     59
       7: iload_3
       8: sipush        300
      11: if_icmpge     59
      14: getstatic     #42                 // Field org/springframework/http/HttpMethod.GET:Lorg/springframework/http/HttpMethod;
      17: invokevirtual #43                 // Method org/springframework/http/HttpMethod.name:()Ljava/lang/String;
      20: aload_1
      21: invokeinterface #44,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
      26: invokevirtual #25                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      29: ifeq          59
      32: aload_2
      33: ldc           #45                 // String Cache-Control
      35: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      40: astore        5
      42: aload         5
      44: ifnull        57
      47: aload         5
      49: ldc           #47                 // String no-store
      51: invokevirtual #48                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
      54: ifne          59
      57: iconst_1
      58: ireturn
      59: iconst_0
      60: ireturn

  protected java.lang.String generateETagHeaderValue(byte[]);
    Code:
       0: new           #28                 // class java/lang/StringBuilder
       3: dup
       4: ldc           #49                 // String \"0
       6: invokespecial #50                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
       9: astore_2
      10: aload_1
      11: aload_2
      12: invokestatic  #51                 // Method org/springframework/util/DigestUtils.appendMd5DigestAsHex:([BLjava/lang/StringBuilder;)Ljava/lang/StringBuilder;
      15: pop
      16: aload_2
      17: bipush        34
      19: invokevirtual #52                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      22: pop
      23: aload_2
      24: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      27: areturn
}

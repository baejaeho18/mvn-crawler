Compiled from "JavaTemplateNumberFormatFactory.java"
class freemarker.core.JavaTemplateNumberFormatFactory extends freemarker.core.TemplateNumberFormatFactory {
  static final freemarker.core.JavaTemplateNumberFormatFactory INSTANCE;

  private static final freemarker.log.Logger LOG;

  private static final java.util.concurrent.ConcurrentHashMap<freemarker.core.JavaTemplateNumberFormatFactory$CacheKey, java.text.NumberFormat> GLOBAL_FORMAT_CACHE;

  private static final int LEAK_ALERT_NUMBER_FORMAT_CACHE_SIZE;

  private freemarker.core.JavaTemplateNumberFormatFactory();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method freemarker/core/TemplateNumberFormatFactory."<init>":()V
       4: return

  public freemarker.core.TemplateNumberFormat get(java.lang.String, java.util.Locale, freemarker.core.Environment) throws freemarker.core.InvalidFormatParametersException;
    Code:
       0: new           #2                  // class freemarker/core/JavaTemplateNumberFormatFactory$CacheKey
       3: dup
       4: aload_1
       5: aload_2
       6: invokespecial #3                  // Method freemarker/core/JavaTemplateNumberFormatFactory$CacheKey."<init>":(Ljava/lang/String;Ljava/util/Locale;)V
       9: astore        4
      11: getstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
      14: aload         4
      16: invokevirtual #5                  // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      19: checkcast     #6                  // class java/text/NumberFormat
      22: astore        5
      24: aload         5
      26: ifnonnull     235
      29: ldc           #7                  // String number
      31: aload_1
      32: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      35: ifeq          47
      38: aload_2
      39: invokestatic  #9                  // Method java/text/NumberFormat.getNumberInstance:(Ljava/util/Locale;)Ljava/text/NumberFormat;
      42: astore        5
      44: goto          142
      47: ldc           #10                 // String currency
      49: aload_1
      50: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      53: ifeq          65
      56: aload_2
      57: invokestatic  #11                 // Method java/text/NumberFormat.getCurrencyInstance:(Ljava/util/Locale;)Ljava/text/NumberFormat;
      60: astore        5
      62: goto          142
      65: ldc           #12                 // String percent
      67: aload_1
      68: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      71: ifeq          83
      74: aload_2
      75: invokestatic  #13                 // Method java/text/NumberFormat.getPercentInstance:(Ljava/util/Locale;)Ljava/text/NumberFormat;
      78: astore        5
      80: goto          142
      83: ldc           #14                 // String computer
      85: aload_1
      86: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      89: ifeq          101
      92: aload_3
      93: invokevirtual #15                 // Method freemarker/core/Environment.getCNumberFormat:()Ljava/text/NumberFormat;
      96: astore        5
      98: goto          142
     101: aload_1
     102: aload_2
     103: invokestatic  #16                 // Method freemarker/core/ExtendedDecimalFormatParser.parse:(Ljava/lang/String;Ljava/util/Locale;)Ljava/text/DecimalFormat;
     106: astore        5
     108: goto          142
     111: astore        6
     113: aload         6
     115: invokevirtual #18                 // Method java/text/ParseException.getMessage:()Ljava/lang/String;
     118: astore        7
     120: new           #19                 // class freemarker/core/InvalidFormatParametersException
     123: dup
     124: aload         7
     126: ifnull        134
     129: aload         7
     131: goto          136
     134: ldc           #20                 // String Invalid DecimalFormat pattern
     136: aload         6
     138: invokespecial #21                 // Method freemarker/core/InvalidFormatParametersException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     141: athrow
     142: getstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
     145: invokevirtual #22                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
     148: sipush        1024
     151: if_icmplt     211
     154: iconst_0
     155: istore        6
     157: ldc           #23                 // class freemarker/core/JavaTemplateNumberFormatFactory
     159: dup
     160: astore        7
     162: monitorenter
     163: getstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
     166: invokevirtual #22                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
     169: sipush        1024
     172: if_icmplt     184
     175: iconst_1
     176: istore        6
     178: getstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
     181: invokevirtual #24                 // Method java/util/concurrent/ConcurrentHashMap.clear:()V
     184: aload         7
     186: monitorexit
     187: goto          198
     190: astore        8
     192: aload         7
     194: monitorexit
     195: aload         8
     197: athrow
     198: iload         6
     200: ifeq          211
     203: getstatic     #25                 // Field LOG:Lfreemarker/log/Logger;
     206: ldc           #26                 // String Global Java NumberFormat cache has exceeded 1024 entries => cache flushed. Typical cause: Some template generates high variety of format pattern strings.
     208: invokevirtual #27                 // Method freemarker/log/Logger.warn:(Ljava/lang/String;)V
     211: getstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
     214: aload         4
     216: aload         5
     218: invokevirtual #28                 // Method java/util/concurrent/ConcurrentHashMap.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     221: checkcast     #6                  // class java/text/NumberFormat
     224: astore        6
     226: aload         6
     228: ifnull        235
     231: aload         6
     233: astore        5
     235: aload         5
     237: invokevirtual #29                 // Method java/text/NumberFormat.clone:()Ljava/lang/Object;
     240: checkcast     #6                  // class java/text/NumberFormat
     243: astore        5
     245: new           #30                 // class freemarker/core/JavaTemplateNumberFormat
     248: dup
     249: aload         5
     251: aload_1
     252: invokespecial #31                 // Method freemarker/core/JavaTemplateNumberFormat."<init>":(Ljava/text/NumberFormat;Ljava/lang/String;)V
     255: areturn
    Exception table:
       from    to  target type
         101   108   111   Class java/text/ParseException
         163   187   190   any
         190   195   190   any

  static {};
    Code:
       0: new           #23                 // class freemarker/core/JavaTemplateNumberFormatFactory
       3: dup
       4: invokespecial #32                 // Method "<init>":()V
       7: putstatic     #33                 // Field INSTANCE:Lfreemarker/core/JavaTemplateNumberFormatFactory;
      10: ldc           #34                 // String freemarker.runtime
      12: invokestatic  #35                 // Method freemarker/log/Logger.getLogger:(Ljava/lang/String;)Lfreemarker/log/Logger;
      15: putstatic     #25                 // Field LOG:Lfreemarker/log/Logger;
      18: new           #36                 // class java/util/concurrent/ConcurrentHashMap
      21: dup
      22: invokespecial #37                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      25: putstatic     #4                  // Field GLOBAL_FORMAT_CACHE:Ljava/util/concurrent/ConcurrentHashMap;
      28: return
}

Compiled from "CompositeValve.java"
public class org.wso2.carbon.tomcat.ext.valves.CompositeValve extends org.apache.catalina.valves.ValveBase {
  private static org.apache.commons.logging.Log log;

  private static final java.lang.String ENABLE_SAAS;

  public org.wso2.carbon.tomcat.ext.valves.CompositeValve();
    Code:
       0: aload_0
       1: iconst_1
       2: invokespecial #1                  // Method org/apache/catalina/valves/ValveBase."<init>":(Z)V
       5: return

  public void invoke(org.apache.catalina.connector.Request, org.apache.catalina.connector.Response) throws java.io.IOException, javax.servlet.ServletException;
    Code:
       0: aload_1
       1: invokevirtual #2                  // Method org/apache/catalina/connector/Request.getContext:()Lorg/apache/catalina/Context;
       4: ifnonnull     61
       7: aload_1
       8: invokevirtual #3                  // Method org/apache/catalina/connector/Request.getRequestURI:()Ljava/lang/String;
      11: invokestatic  #4                  // Method org/apache/commons/lang/StringUtils.isEmpty:(Ljava/lang/String;)Z
      14: ifeq          39
      17: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
      20: invokeinterface #6,  1            // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      25: ifeq          38
      28: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
      31: ldc           #7                  // String Could not handle the request. The request URI is invalid.
      33: invokeinterface #8,  2            // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      38: return
      39: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
      42: invokeinterface #6,  1            // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      47: ifeq          60
      50: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
      53: ldc           #9                  // String Could not handle the request, could be due to the maxHttpHeaderSize limitation.
      55: invokeinterface #8,  2            // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      60: return
      61: aload_1
      62: invokevirtual #2                  // Method org/apache/catalina/connector/Request.getContext:()Lorg/apache/catalina/Context;
      65: ldc           #11                 // String carbon.enable.saas
      67: invokeinterface #12,  2           // InterfaceMethod org/apache/catalina/Context.findParameter:(Ljava/lang/String;)Ljava/lang/String;
      72: astore_3
      73: aload_1
      74: invokevirtual #2                  // Method org/apache/catalina/connector/Request.getContext:()Lorg/apache/catalina/Context;
      77: invokeinterface #13,  1           // InterfaceMethod org/apache/catalina/Context.getRealm:()Lorg/apache/catalina/Realm;
      82: astore        4
      84: aload         4
      86: instanceof    #14                 // class org/wso2/carbon/tomcat/ext/realms/CarbonTomcatRealm
      89: ifeq          151
      92: aload_3
      93: ifnull        151
      96: aload         4
      98: checkcast     #14                 // class org/wso2/carbon/tomcat/ext/realms/CarbonTomcatRealm
     101: invokevirtual #15                 // Method org/wso2/carbon/tomcat/ext/realms/CarbonTomcatRealm.getSaasRules:()Ljava/util/Map;
     104: ifnonnull     151
     107: aload_1
     108: invokevirtual #2                  // Method org/apache/catalina/connector/Request.getContext:()Lorg/apache/catalina/Context;
     111: invokeinterface #16,  1           // InterfaceMethod org/apache/catalina/Context.getName:()Ljava/lang/String;
     116: astore        5
     118: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
     121: new           #17                 // class java/lang/StringBuilder
     124: dup
     125: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     128: ldc           #19                 // String To enable SaaS mode for the webapp,
     130: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: aload         5
     135: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     138: ldc           #21                 // String , configure the CarbonTomcatRealm in META-INF/context.xml.
     140: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     143: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     146: invokeinterface #23,  2           // InterfaceMethod org/apache/commons/logging/Log.warn:(Ljava/lang/Object;)V
     151: aload_1
     152: aload_2
     153: aload_0
     154: invokestatic  #24                 // Method org/wso2/carbon/tomcat/ext/valves/TomcatValveContainer.invokeValves:(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;Lorg/wso2/carbon/tomcat/ext/valves/CompositeValve;)V
     157: goto          207
     160: astore_3
     161: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
     164: ldc           #26                 // String Could not handle the request, could be due to the maxHttpHeaderSize limitation.
     166: aload_3
     167: invokeinterface #27,  3           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     172: goto          207
     175: astore_3
     176: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
     179: new           #17                 // class java/lang/StringBuilder
     182: dup
     183: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     186: ldc           #29                 // String Could not handle the request:
     188: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     191: aload_1
     192: invokevirtual #3                  // Method org/apache/catalina/connector/Request.getRequestURI:()Ljava/lang/String;
     195: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     198: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     201: aload_3
     202: invokeinterface #27,  3           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     207: return
    Exception table:
       from    to  target type
           0    38   160   Class java/lang/NullPointerException
          39    60   160   Class java/lang/NullPointerException
          61   157   160   Class java/lang/NullPointerException
           0    38   175   Class java/lang/Exception
          39    60   175   Class java/lang/Exception
          61   157   175   Class java/lang/Exception

  public void continueInvocation(org.apache.catalina.connector.Request, org.apache.catalina.connector.Response);
    Code:
       0: aload_1
       1: invokevirtual #30                 // Method org/apache/catalina/connector/Request.getHost:()Lorg/apache/catalina/Host;
       4: invokeinterface #31,  1           // InterfaceMethod org/apache/catalina/Host.getName:()Ljava/lang/String;
       9: astore_3
      10: invokestatic  #32                 // Method org/wso2/carbon/tomcat/ext/utils/URLMappingHolder.getInstance:()Lorg/wso2/carbon/tomcat/ext/utils/URLMappingHolder;
      13: invokevirtual #33                 // Method org/wso2/carbon/tomcat/ext/utils/URLMappingHolder.getDefaultHost:()Ljava/lang/String;
      16: astore        4
      18: aload_3
      19: aload         4
      21: invokevirtual #34                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      24: ifne          162
      27: aload_1
      28: invokestatic  #35                 // Method org/wso2/carbon/tomcat/ext/internal/Utils.getTenantDomainFromURLMapping:(Lorg/apache/catalina/connector/Request;)Ljava/lang/String;
      31: astore        5
      33: invokestatic  #36                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.getThreadLocalCarbonContext:()Lorg/wso2/carbon/context/PrivilegedCarbonContext;
      36: astore        6
      38: aload         5
      40: aload         6
      42: invokevirtual #37                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.getTenantDomain:()Ljava/lang/String;
      45: invokevirtual #34                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      48: ifne          58
      51: aload         6
      53: aload         5
      55: invokevirtual #38                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setTenantDomain:(Ljava/lang/String;)V
      58: aload         6
      60: aload_1
      61: invokestatic  #39                 // Method org/wso2/carbon/tomcat/ext/internal/Utils.getAppNameForURLMapping:(Lorg/apache/catalina/connector/Request;)Ljava/lang/String;
      64: invokevirtual #40                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setApplicationName:(Ljava/lang/String;)V
      67: invokestatic  #41                 // Method org/wso2/carbon/tomcat/ext/internal/CarbonRealmServiceHolder.getRealmService:()Lorg/wso2/carbon/user/core/service/RealmService;
      70: astore        7
      72: aload         7
      74: invokeinterface #42,  1           // InterfaceMethod org/wso2/carbon/user/api/UserRealmService.getTenantManager:()Lorg/wso2/carbon/user/api/TenantManager;
      79: astore        8
      81: aload         8
      83: aload         5
      85: invokeinterface #43,  2           // InterfaceMethod org/wso2/carbon/user/api/TenantManager.getTenantId:(Ljava/lang/String;)I
      90: istore        9
      92: aload         6
      94: iload         9
      96: invokevirtual #44                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setTenantId:(I)V
      99: aload         6
     101: aload         7
     103: iload         9
     105: invokeinterface #45,  2           // InterfaceMethod org/wso2/carbon/user/api/UserRealmService.getTenantUserRealm:(I)Lorg/wso2/carbon/user/api/UserRealm;
     110: invokevirtual #46                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setUserRealm:(Lorg/wso2/carbon/user/api/UserRealm;)V
     113: invokestatic  #47                 // Method org/wso2/carbon/tomcat/ext/internal/CarbonRealmServiceHolder.getRegistryService:()Lorg/wso2/carbon/registry/core/service/RegistryService;
     116: astore        10
     118: aload         6
     120: getstatic     #48                 // Field org/wso2/carbon/context/RegistryType.SYSTEM_CONFIGURATION:Lorg/wso2/carbon/context/RegistryType;
     123: new           #49                 // class org/wso2/carbon/registry/core/ghostregistry/GhostRegistry
     126: dup
     127: aload         10
     129: iload         9
     131: getstatic     #48                 // Field org/wso2/carbon/context/RegistryType.SYSTEM_CONFIGURATION:Lorg/wso2/carbon/context/RegistryType;
     134: invokespecial #50                 // Method org/wso2/carbon/registry/core/ghostregistry/GhostRegistry."<init>":(Lorg/wso2/carbon/registry/api/RegistryService;ILorg/wso2/carbon/context/RegistryType;)V
     137: invokevirtual #51                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setRegistry:(Lorg/wso2/carbon/context/RegistryType;Lorg/wso2/carbon/registry/api/Registry;)V
     140: aload         6
     142: getstatic     #52                 // Field org/wso2/carbon/context/RegistryType.SYSTEM_GOVERNANCE:Lorg/wso2/carbon/context/RegistryType;
     145: new           #49                 // class org/wso2/carbon/registry/core/ghostregistry/GhostRegistry
     148: dup
     149: aload         10
     151: iload         9
     153: getstatic     #52                 // Field org/wso2/carbon/context/RegistryType.SYSTEM_GOVERNANCE:Lorg/wso2/carbon/context/RegistryType;
     156: invokespecial #50                 // Method org/wso2/carbon/registry/core/ghostregistry/GhostRegistry."<init>":(Lorg/wso2/carbon/registry/api/RegistryService;ILorg/wso2/carbon/context/RegistryType;)V
     159: invokevirtual #51                 // Method org/wso2/carbon/context/PrivilegedCarbonContext.setRegistry:(Lorg/wso2/carbon/context/RegistryType;Lorg/wso2/carbon/registry/api/Registry;)V
     162: aload_2
     163: invokevirtual #53                 // Method org/apache/catalina/connector/Response.getStatus:()I
     166: istore        5
     168: iload         5
     170: sipush        302
     173: if_icmpeq     195
     176: iload         5
     178: sipush        403
     181: if_icmpeq     195
     184: aload_0
     185: invokevirtual #55                 // Method getNext:()Lorg/apache/catalina/Valve;
     188: aload_1
     189: aload_2
     190: invokeinterface #56,  3           // InterfaceMethod org/apache/catalina/Valve.invoke:(Lorg/apache/catalina/connector/Request;Lorg/apache/catalina/connector/Response;)V
     195: goto          230
     198: astore_3
     199: getstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
     202: new           #17                 // class java/lang/StringBuilder
     205: dup
     206: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
     209: ldc           #57                 // String Could not handle request:
     211: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     214: aload_1
     215: invokevirtual #3                  // Method org/apache/catalina/connector/Request.getRequestURI:()Ljava/lang/String;
     218: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     221: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     224: aload_3
     225: invokeinterface #27,  3           // InterfaceMethod org/apache/commons/logging/Log.error:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     230: return
    Exception table:
       from    to  target type
           0   195   198   Class java/lang/Exception

  static {};
    Code:
       0: ldc           #10                 // class org/wso2/carbon/tomcat/ext/valves/CompositeValve
       2: invokestatic  #58                 // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
       5: putstatic     #5                  // Field log:Lorg/apache/commons/logging/Log;
       8: return
}

Compiled from "WorkerThread.java"
public final class ai.djl.serving.wlm.WorkerThread implements java.lang.Runnable {
  private static final org.slf4j.Logger logger;

  private java.lang.String workerName;

  private ai.djl.inference.Predictor<ai.djl.modality.Input, ai.djl.modality.Output> predictor;

  private java.util.concurrent.atomic.AtomicBoolean running;

  private ai.djl.serving.wlm.BatchAggregator aggregator;

  private int gpuId;

  private java.util.concurrent.atomic.AtomicReference<java.lang.Thread> currentThread;

  private ai.djl.serving.wlm.WorkerState state;

  private int workerId;

  private long startTime;

  private boolean fixPoolThread;

  private ai.djl.serving.wlm.WorkerThread(ai.djl.serving.wlm.WorkerThread$Builder);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class java/util/concurrent/atomic/AtomicBoolean
       8: dup
       9: iconst_1
      10: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      13: putfield      #5                  // Field running:Ljava/util/concurrent/atomic/AtomicBoolean;
      16: aload_0
      17: new           #6                  // class java/util/concurrent/atomic/AtomicReference
      20: dup
      21: invokespecial #7                  // Method java/util/concurrent/atomic/AtomicReference."<init>":()V
      24: putfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
      27: aload_0
      28: aload_0
      29: aload_1
      30: invokestatic  #9                  // Method ai/djl/serving/wlm/WorkerThread$Builder.access$000:(Lai/djl/serving/wlm/WorkerThread$Builder;)Lai/djl/serving/wlm/ModelInfo;
      33: invokespecial #10                 // Method buildWorkerName:(Lai/djl/serving/wlm/ModelInfo;)Ljava/lang/String;
      36: putfield      #11                 // Field workerName:Ljava/lang/String;
      39: aload_0
      40: aload_1
      41: invokestatic  #12                 // Method ai/djl/serving/wlm/WorkerThread$Builder.access$100:(Lai/djl/serving/wlm/WorkerThread$Builder;)Lai/djl/serving/wlm/BatchAggregator;
      44: putfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
      47: aload_0
      48: new           #14                 // class ai/djl/serving/wlm/WorkerIdGenerator
      51: dup
      52: invokespecial #15                 // Method ai/djl/serving/wlm/WorkerIdGenerator."<init>":()V
      55: invokevirtual #16                 // Method ai/djl/serving/wlm/WorkerIdGenerator.generate:()I
      58: putfield      #17                 // Field workerId:I
      61: aload_0
      62: invokestatic  #18                 // Method java/lang/System.currentTimeMillis:()J
      65: putfield      #19                 // Field startTime:J
      68: aload_0
      69: aload_1
      70: invokestatic  #20                 // Method ai/djl/serving/wlm/WorkerThread$Builder.access$200:(Lai/djl/serving/wlm/WorkerThread$Builder;)Z
      73: putfield      #21                 // Field fixPoolThread:Z
      76: aload_1
      77: invokestatic  #9                  // Method ai/djl/serving/wlm/WorkerThread$Builder.access$000:(Lai/djl/serving/wlm/WorkerThread$Builder;)Lai/djl/serving/wlm/ModelInfo;
      80: invokevirtual #22                 // Method ai/djl/serving/wlm/ModelInfo.getModel:()Lai/djl/repository/zoo/ZooModel;
      83: astore_2
      84: aload_0
      85: aload_2
      86: invokevirtual #23                 // Method ai/djl/repository/zoo/ZooModel.newPredictor:()Lai/djl/inference/Predictor;
      89: putfield      #24                 // Field predictor:Lai/djl/inference/Predictor;
      92: aload_0
      93: aload_2
      94: invokevirtual #25                 // Method ai/djl/repository/zoo/ZooModel.getNDManager:()Lai/djl/ndarray/NDManager;
      97: invokeinterface #26,  1           // InterfaceMethod ai/djl/ndarray/NDManager.getDevice:()Lai/djl/Device;
     102: invokevirtual #27                 // Method ai/djl/Device.getDeviceId:()I
     105: putfield      #28                 // Field gpuId:I
     108: return

  public void run();
    Code:
       0: invokestatic  #29                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       3: astore_1
       4: aload_1
       5: aload_0
       6: getfield      #11                 // Field workerName:Ljava/lang/String;
       9: invokevirtual #30                 // Method java/lang/Thread.setName:(Ljava/lang/String;)V
      12: aload_0
      13: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
      16: aload_1
      17: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      20: aload_0
      21: getstatic     #32                 // Field ai/djl/serving/wlm/WorkerState.WORKER_STARTED:Lai/djl/serving/wlm/WorkerState;
      24: putfield      #33                 // Field state:Lai/djl/serving/wlm/WorkerState;
      27: aconst_null
      28: astore_2
      29: ldc           #34                 // String Worker shutting down
      31: astore_3
      32: aload_0
      33: invokevirtual #35                 // Method isRunning:()Z
      36: ifeq          120
      39: aload_0
      40: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
      43: invokevirtual #36                 // Method ai/djl/serving/wlm/BatchAggregator.isFinished:()Z
      46: ifne          120
      49: aload_0
      50: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
      53: invokevirtual #37                 // Method ai/djl/serving/wlm/BatchAggregator.getRequest:()Ljava/util/List;
      56: astore_2
      57: aload_2
      58: ifnull        115
      61: aload_2
      62: invokeinterface #38,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      67: ifne          115
      70: aload_0
      71: getfield      #24                 // Field predictor:Lai/djl/inference/Predictor;
      74: aload_2
      75: invokevirtual #39                 // Method ai/djl/inference/Predictor.batchPredict:(Ljava/util/List;)Ljava/util/List;
      78: astore        4
      80: aload_0
      81: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
      84: aload         4
      86: invokevirtual #40                 // Method ai/djl/serving/wlm/BatchAggregator.sendResponse:(Ljava/util/List;)V
      89: goto          115
      92: astore        4
      94: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
      97: ldc           #43                 // String Failed to predict
      99: aload         4
     101: invokeinterface #44,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     106: aload_0
     107: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
     110: aload         4
     112: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
     115: aconst_null
     116: astore_2
     117: goto          32
     120: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     123: ldc           #46                 // String Shutting down worker thread .. {}
     125: aload_0
     126: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     129: invokevirtual #47                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     132: checkcast     #48                 // class java/lang/Thread
     135: invokevirtual #49                 // Method java/lang/Thread.getName:()Ljava/lang/String;
     138: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     143: aload_0
     144: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     147: aconst_null
     148: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
     151: aload_0
     152: getstatic     #51                 // Field ai/djl/serving/wlm/WorkerState.WORKER_STOPPED:Lai/djl/serving/wlm/WorkerState;
     155: invokevirtual #52                 // Method shutdown:(Lai/djl/serving/wlm/WorkerState;)V
     158: aload_2
     159: ifnull        410
     162: new           #53                 // class ai/djl/serving/wlm/util/WlmException
     165: dup
     166: aload_3
     167: invokespecial #54                 // Method ai/djl/serving/wlm/util/WlmException."<init>":(Ljava/lang/String;)V
     170: astore        4
     172: aload_0
     173: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
     176: aload         4
     178: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
     181: goto          410
     184: astore        4
     186: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     189: ldc           #56                 // String Shutting down the thread .. Scaling down.
     191: invokeinterface #57,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     196: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     199: ldc           #46                 // String Shutting down worker thread .. {}
     201: aload_0
     202: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     205: invokevirtual #47                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     208: checkcast     #48                 // class java/lang/Thread
     211: invokevirtual #49                 // Method java/lang/Thread.getName:()Ljava/lang/String;
     214: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     219: aload_0
     220: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     223: aconst_null
     224: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
     227: aload_0
     228: getstatic     #51                 // Field ai/djl/serving/wlm/WorkerState.WORKER_STOPPED:Lai/djl/serving/wlm/WorkerState;
     231: invokevirtual #52                 // Method shutdown:(Lai/djl/serving/wlm/WorkerState;)V
     234: aload_2
     235: ifnull        410
     238: new           #53                 // class ai/djl/serving/wlm/util/WlmException
     241: dup
     242: aload_3
     243: invokespecial #54                 // Method ai/djl/serving/wlm/util/WlmException."<init>":(Ljava/lang/String;)V
     246: astore        4
     248: aload_0
     249: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
     252: aload         4
     254: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
     257: goto          410
     260: astore        4
     262: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     265: ldc           #59                 // String Server error
     267: aload         4
     269: invokeinterface #60,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     274: aload         4
     276: invokevirtual #61                 // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     279: astore_3
     280: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     283: ldc           #46                 // String Shutting down worker thread .. {}
     285: aload_0
     286: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     289: invokevirtual #47                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     292: checkcast     #48                 // class java/lang/Thread
     295: invokevirtual #49                 // Method java/lang/Thread.getName:()Ljava/lang/String;
     298: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     303: aload_0
     304: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     307: aconst_null
     308: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
     311: aload_0
     312: getstatic     #51                 // Field ai/djl/serving/wlm/WorkerState.WORKER_STOPPED:Lai/djl/serving/wlm/WorkerState;
     315: invokevirtual #52                 // Method shutdown:(Lai/djl/serving/wlm/WorkerState;)V
     318: aload_2
     319: ifnull        410
     322: new           #53                 // class ai/djl/serving/wlm/util/WlmException
     325: dup
     326: aload_3
     327: invokespecial #54                 // Method ai/djl/serving/wlm/util/WlmException."<init>":(Ljava/lang/String;)V
     330: astore        4
     332: aload_0
     333: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
     336: aload         4
     338: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
     341: goto          410
     344: astore        5
     346: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
     349: ldc           #46                 // String Shutting down worker thread .. {}
     351: aload_0
     352: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     355: invokevirtual #47                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     358: checkcast     #48                 // class java/lang/Thread
     361: invokevirtual #49                 // Method java/lang/Thread.getName:()Ljava/lang/String;
     364: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     369: aload_0
     370: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
     373: aconst_null
     374: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
     377: aload_0
     378: getstatic     #51                 // Field ai/djl/serving/wlm/WorkerState.WORKER_STOPPED:Lai/djl/serving/wlm/WorkerState;
     381: invokevirtual #52                 // Method shutdown:(Lai/djl/serving/wlm/WorkerState;)V
     384: aload_2
     385: ifnull        407
     388: new           #53                 // class ai/djl/serving/wlm/util/WlmException
     391: dup
     392: aload_3
     393: invokespecial #54                 // Method ai/djl/serving/wlm/util/WlmException."<init>":(Ljava/lang/String;)V
     396: astore        6
     398: aload_0
     399: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
     402: aload         6
     404: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
     407: aload         5
     409: athrow
     410: return
    Exception table:
       from    to  target type
          70    89    92   Class java/lang/Exception
          32   120   184   Class java/lang/InterruptedException
          32   120   260   Class java/lang/Throwable
          32   120   344   any
         184   196   344   any
         260   280   344   any
         344   346   344   any

  public int getWorkerId();
    Code:
       0: aload_0
       1: getfield      #17                 // Field workerId:I
       4: ireturn

  public boolean isRunning();
    Code:
       0: aload_0
       1: getfield      #5                  // Field running:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #62                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ireturn

  public int getGpuId();
    Code:
       0: aload_0
       1: getfield      #28                 // Field gpuId:I
       4: ireturn

  public long getStartTime();
    Code:
       0: aload_0
       1: getfield      #19                 // Field startTime:J
       4: lreturn

  public ai.djl.serving.wlm.WorkerState getState();
    Code:
       0: aload_0
       1: getfield      #33                 // Field state:Lai/djl/serving/wlm/WorkerState;
       4: areturn

  public void shutdown(ai.djl.serving.wlm.WorkerState);
    Code:
       0: aload_0
       1: getfield      #5                  // Field running:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iconst_0
       5: invokevirtual #63                 // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
       8: aload_0
       9: aload_1
      10: invokevirtual #64                 // Method setState:(Lai/djl/serving/wlm/WorkerState;)V
      13: aload_0
      14: getfield      #8                  // Field currentThread:Ljava/util/concurrent/atomic/AtomicReference;
      17: aconst_null
      18: invokevirtual #65                 // Method java/util/concurrent/atomic/AtomicReference.getAndSet:(Ljava/lang/Object;)Ljava/lang/Object;
      21: checkcast     #48                 // class java/lang/Thread
      24: astore_2
      25: aload_2
      26: ifnull        51
      29: aload_2
      30: invokevirtual #66                 // Method java/lang/Thread.interrupt:()V
      33: new           #53                 // class ai/djl/serving/wlm/util/WlmException
      36: dup
      37: ldc           #34                 // String Worker shutting down
      39: invokespecial #54                 // Method ai/djl/serving/wlm/util/WlmException."<init>":(Ljava/lang/String;)V
      42: astore_3
      43: aload_0
      44: getfield      #13                 // Field aggregator:Lai/djl/serving/wlm/BatchAggregator;
      47: aload_3
      48: invokevirtual #45                 // Method ai/djl/serving/wlm/BatchAggregator.sendError:(Ljava/lang/Throwable;)V
      51: aload_0
      52: getfield      #24                 // Field predictor:Lai/djl/inference/Predictor;
      55: invokevirtual #67                 // Method ai/djl/inference/Predictor.close:()V
      58: return

  private java.lang.String buildWorkerName(ai.djl.serving.wlm.ModelInfo);
    Code:
       0: aload_1
       1: invokevirtual #68                 // Method ai/djl/serving/wlm/ModelInfo.getModelName:()Ljava/lang/String;
       4: astore_2
       5: aload_2
       6: invokevirtual #69                 // Method java/lang/String.length:()I
       9: bipush        25
      11: if_icmple     22
      14: aload_2
      15: iconst_0
      16: bipush        25
      18: invokevirtual #70                 // Method java/lang/String.substring:(II)Ljava/lang/String;
      21: astore_2
      22: new           #71                 // class java/lang/StringBuilder
      25: dup
      26: invokespecial #72                 // Method java/lang/StringBuilder."<init>":()V
      29: ldc           #73                 // String W-
      31: invokevirtual #74                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: aload_2
      35: invokevirtual #74                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: bipush        45
      40: invokevirtual #75                 // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      43: aload_0
      44: getfield      #17                 // Field workerId:I
      47: invokevirtual #76                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      50: invokevirtual #77                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      53: areturn

  void setState(ai.djl.serving.wlm.WorkerState);
    Code:
       0: getstatic     #42                 // Field logger:Lorg/slf4j/Logger;
       3: ldc           #78                 // String {} State change {} -> {}
       5: iconst_3
       6: anewarray     #79                 // class java/lang/Object
       9: dup
      10: iconst_0
      11: aload_0
      12: getfield      #11                 // Field workerName:Ljava/lang/String;
      15: aastore
      16: dup
      17: iconst_1
      18: aload_0
      19: getfield      #33                 // Field state:Lai/djl/serving/wlm/WorkerState;
      22: aastore
      23: dup
      24: iconst_2
      25: aload_1
      26: aastore
      27: invokeinterface #80,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      32: aload_0
      33: getfield      #33                 // Field state:Lai/djl/serving/wlm/WorkerState;
      36: getstatic     #81                 // Field ai/djl/serving/wlm/WorkerState.WORKER_SCALED_DOWN:Lai/djl/serving/wlm/WorkerState;
      39: if_acmpeq     47
      42: aload_0
      43: aload_1
      44: putfield      #33                 // Field state:Lai/djl/serving/wlm/WorkerState;
      47: return

  public boolean isFixPoolThread();
    Code:
       0: aload_0
       1: getfield      #21                 // Field fixPoolThread:Z
       4: ireturn

  public static ai.djl.serving.wlm.WorkerThread$Builder builder();
    Code:
       0: new           #82                 // class ai/djl/serving/wlm/WorkerThread$Builder
       3: dup
       4: invokespecial #83                 // Method ai/djl/serving/wlm/WorkerThread$Builder."<init>":()V
       7: areturn

  ai.djl.serving.wlm.WorkerThread(ai.djl.serving.wlm.WorkerThread$Builder, ai.djl.serving.wlm.WorkerThread$1);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(Lai/djl/serving/wlm/WorkerThread$Builder;)V
       5: return

  static {};
    Code:
       0: ldc           #84                 // class ai/djl/serving/wlm/WorkerThread
       2: invokestatic  #85                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #42                 // Field logger:Lorg/slf4j/Logger;
       8: return
}

Compiled from "MapKVSSubscription.java"
public class net.openhft.chronicle.engine.map.MapKVSSubscription<K, V> implements net.openhft.chronicle.engine.map.ObjectSubscription<K, V>, net.openhft.chronicle.engine.map.RawKVSSubscription<K, V> {
  private static final org.slf4j.Logger LOG;

  private final java.util.Set<net.openhft.chronicle.engine.api.pubsub.TopicSubscriber<K, V>> topicSubscribers;

  private final java.util.Set<net.openhft.chronicle.engine.api.pubsub.Subscriber<net.openhft.chronicle.engine.api.map.MapEvent<K, V>>> subscribers;

  private final java.util.Set<net.openhft.chronicle.engine.api.pubsub.Subscriber<K>> keySubscribers;

  private final java.util.Set<net.openhft.chronicle.engine.map.EventConsumer<K, V>> downstream;

  private final net.openhft.chronicle.network.api.session.SessionProvider sessionProvider;

  private final net.openhft.chronicle.engine.api.tree.Asset asset;

  private final java.util.Map<net.openhft.chronicle.engine.api.pubsub.Subscriber, net.openhft.chronicle.engine.api.pubsub.Subscriber> subscriptionDelegate;

  private net.openhft.chronicle.engine.api.map.KeyValueStore<K, V> kvStore;

  private java.util.Map<java.lang.String, net.openhft.chronicle.engine.cfg.SubscriptionStat> subscriptionMonitoringMap;

  public net.openhft.chronicle.engine.map.MapKVSSubscription(net.openhft.chronicle.engine.api.tree.RequestContext, net.openhft.chronicle.engine.api.tree.Asset);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #1                  // Method net/openhft/chronicle/engine/api/tree/RequestContext.viewType:()Ljava/lang/Class;
       5: aload_2
       6: invokespecial #2                  // Method "<init>":(Ljava/lang/Class;Lnet/openhft/chronicle/engine/api/tree/Asset;)V
       9: return

  public net.openhft.chronicle.engine.map.MapKVSSubscription(java.lang.Class, net.openhft.chronicle.engine.api.tree.Asset);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #4                  // class java/util/concurrent/CopyOnWriteArraySet
       8: dup
       9: invokespecial #5                  // Method java/util/concurrent/CopyOnWriteArraySet."<init>":()V
      12: putfield      #6                  // Field topicSubscribers:Ljava/util/Set;
      15: aload_0
      16: new           #4                  // class java/util/concurrent/CopyOnWriteArraySet
      19: dup
      20: invokespecial #5                  // Method java/util/concurrent/CopyOnWriteArraySet."<init>":()V
      23: putfield      #7                  // Field subscribers:Ljava/util/Set;
      26: aload_0
      27: new           #4                  // class java/util/concurrent/CopyOnWriteArraySet
      30: dup
      31: invokespecial #5                  // Method java/util/concurrent/CopyOnWriteArraySet."<init>":()V
      34: putfield      #8                  // Field keySubscribers:Ljava/util/Set;
      37: aload_0
      38: new           #4                  // class java/util/concurrent/CopyOnWriteArraySet
      41: dup
      42: invokespecial #5                  // Method java/util/concurrent/CopyOnWriteArraySet."<init>":()V
      45: putfield      #9                  // Field downstream:Ljava/util/Set;
      48: aload_0
      49: new           #10                 // class java/util/IdentityHashMap
      52: dup
      53: invokespecial #11                 // Method java/util/IdentityHashMap."<init>":()V
      56: putfield      #12                 // Field subscriptionDelegate:Ljava/util/Map;
      59: aload_0
      60: aconst_null
      61: putfield      #13                 // Field subscriptionMonitoringMap:Ljava/util/Map;
      64: aload_0
      65: aload_2
      66: putfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      69: aload_1
      70: ifnull        86
      73: aload_2
      74: ifnull        86
      77: aload_2
      78: aload_1
      79: aload_0
      80: invokeinterface #15,  3           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.addView:(Ljava/lang/Class;Ljava/lang/Object;)Ljava/lang/Object;
      85: pop
      86: aload_0
      87: aload_2
      88: ifnonnull     95
      91: aconst_null
      92: goto          106
      95: aload_2
      96: ldc           #16                 // class net/openhft/chronicle/network/api/session/SessionProvider
      98: invokeinterface #17,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.findView:(Ljava/lang/Class;)Ljava/lang/Object;
     103: checkcast     #16                 // class net/openhft/chronicle/network/api/session/SessionProvider
     106: putfield      #18                 // Field sessionProvider:Lnet/openhft/chronicle/network/api/session/SessionProvider;
     109: return

  public void close();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
       5: invokespecial #19                 // Method notifyEndOfSubscription:(Ljava/util/Set;)V
       8: aload_0
       9: aload_0
      10: getfield      #7                  // Field subscribers:Ljava/util/Set;
      13: invokespecial #19                 // Method notifyEndOfSubscription:(Ljava/util/Set;)V
      16: aload_0
      17: aload_0
      18: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
      21: invokespecial #19                 // Method notifyEndOfSubscription:(Ljava/util/Set;)V
      24: aload_0
      25: aload_0
      26: getfield      #9                  // Field downstream:Ljava/util/Set;
      29: invokespecial #19                 // Method notifyEndOfSubscription:(Ljava/util/Set;)V
      32: return

  public void onEndOfSubscription();
    Code:
       0: new           #20                 // class java/lang/UnsupportedOperationException
       3: dup
       4: ldc           #21                 // String todo
       6: invokespecial #22                 // Method java/lang/UnsupportedOperationException."<init>":(Ljava/lang/String;)V
       9: athrow

  private void notifyEndOfSubscription(java.util.Set<? extends net.openhft.chronicle.engine.api.pubsub.ISubscriber>);
    Code:
       0: aload_1
       1: aload_0
       2: invokedynamic #23,  0             // InvokeDynamic #0:accept:(Lnet/openhft/chronicle/engine/map/MapKVSSubscription;)Ljava/util/function/Consumer;
       7: invokeinterface #24,  2           // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      12: aload_1
      13: invokeinterface #25,  1           // InterfaceMethod java/util/Set.clear:()V
      18: return

  private void notifyEndOfSubscription(net.openhft.chronicle.engine.api.pubsub.ISubscriber);
    Code:
       0: aload_1
       1: invokeinterface #26,  1           // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/ISubscriber.onEndOfSubscription:()V
       6: goto          25
       9: astore_2
      10: invokestatic  #28                 // Method net/openhft/chronicle/core/Jvm.warn:()Lnet/openhft/chronicle/core/onoes/ExceptionHandler;
      13: aload_0
      14: invokevirtual #29                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      17: ldc           #30                 // String Failed to send endOfSubscription
      19: aload_2
      20: invokeinterface #31,  4           // InterfaceMethod net/openhft/chronicle/core/onoes/ExceptionHandler.on:(Ljava/lang/Class;Ljava/lang/String;Ljava/lang/Throwable;)V
      25: return
    Exception table:
       from    to  target type
           0     6     9   Class java/lang/Exception

  public boolean keyedView();
    Code:
       0: aload_0
       1: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  public void setKvStore(net.openhft.chronicle.engine.api.map.KeyValueStore<K, V>);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
       5: return

  public void notifyEvent(net.openhft.chronicle.engine.api.map.MapEvent<K, V>);
    Code:
       0: aload_0
       1: invokevirtual #33                 // Method hasSubscribers:()Z
       4: ifeq          12
       7: aload_0
       8: aload_1
       9: invokespecial #34                 // Method notifyEvent0:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)V
      12: return

  public int keySubscriberCount();
    Code:
       0: aload_0
       1: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
       4: invokeinterface #35,  1           // InterfaceMethod java/util/Set.size:()I
       9: ireturn

  public int entrySubscriberCount();
    Code:
       0: aload_0
       1: getfield      #7                  // Field subscribers:Ljava/util/Set;
       4: invokeinterface #35,  1           // InterfaceMethod java/util/Set.size:()I
       9: ireturn

  public int topicSubscriberCount();
    Code:
       0: aload_0
       1: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
       4: invokeinterface #35,  1           // InterfaceMethod java/util/Set.size:()I
       9: ireturn

  public boolean hasSubscribers();
    Code:
       0: aload_0
       1: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
       4: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
       9: ifeq          19
      12: aload_0
      13: invokevirtual #37                 // Method hasValueSubscribers:()Z
      16: ifeq          23
      19: iconst_1
      20: goto          24
      23: iconst_0
      24: ireturn

  public boolean hasValueSubscribers();
    Code:
       0: aload_0
       1: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
       4: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
       9: ifeq          48
      12: aload_0
      13: getfield      #7                  // Field subscribers:Ljava/util/Set;
      16: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      21: ifeq          48
      24: aload_0
      25: getfield      #9                  // Field downstream:Ljava/util/Set;
      28: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      33: ifeq          48
      36: aload_0
      37: getfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      40: invokeinterface #38,  1           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.hasChildren:()Z
      45: ifeq          52
      48: iconst_1
      49: goto          53
      52: iconst_0
      53: ireturn

  private void notifyEvent0(net.openhft.chronicle.engine.api.map.MapEvent<K, V>);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #39                 // Method notifyEvent1:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)V
       5: aload_0
       6: aload_1
       7: invokespecial #40                 // Method notifyEventToChild:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)V
      10: return

  private void notifyEvent1(net.openhft.chronicle.engine.api.map.MapEvent<K, V>);
    Code:
       0: aload_1
       1: invokeinterface #41,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getKey:()Ljava/lang/Object;
       6: astore_2
       7: aload_0
       8: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
      11: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      16: ifne          40
      19: aload_1
      20: invokeinterface #42,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getValue:()Ljava/lang/Object;
      25: astore_3
      26: aload_0
      27: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
      30: aload_2
      31: aload_3
      32: invokedynamic #43,  0             // InvokeDynamic #1:accept:(Ljava/lang/Object;Ljava/lang/Object;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      37: invokestatic  #44                 // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer.notifyEachSubscriber:(Ljava/util/Set;Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      40: aload_0
      41: getfield      #7                  // Field subscribers:Ljava/util/Set;
      44: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      49: ifne          65
      52: aload_0
      53: getfield      #7                  // Field subscribers:Ljava/util/Set;
      56: aload_1
      57: invokedynamic #45,  0             // InvokeDynamic #2:accept:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      62: invokestatic  #44                 // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer.notifyEachSubscriber:(Ljava/util/Set;Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      65: aload_0
      66: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
      69: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      74: ifne          90
      77: aload_0
      78: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
      81: aload_2
      82: invokedynamic #46,  0             // InvokeDynamic #3:accept:(Ljava/lang/Object;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      87: invokestatic  #44                 // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer.notifyEachSubscriber:(Ljava/util/Set;Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      90: aload_0
      91: getfield      #9                  // Field downstream:Ljava/util/Set;
      94: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      99: ifne          115
     102: aload_0
     103: getfield      #9                  // Field downstream:Ljava/util/Set;
     106: aload_1
     107: invokedynamic #47,  0             // InvokeDynamic #4:accept:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
     112: invokestatic  #44                 // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer.notifyEachSubscriber:(Ljava/util/Set;Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
     115: return

  private void notifyEventToChild(net.openhft.chronicle.engine.api.map.MapEvent<K, V>);
    Code:
       0: aload_1
       1: invokeinterface #41,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getKey:()Ljava/lang/Object;
       6: astore_2
       7: aload_0
       8: getfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      11: ifnull        26
      14: aload_0
      15: getfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      18: invokeinterface #38,  1           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.hasChildren:()Z
      23: ifne          27
      26: return
      27: aload_2
      28: invokevirtual #48                 // Method java/lang/Object.toString:()Ljava/lang/String;
      31: astore_3
      32: aload_0
      33: getfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      36: aload_3
      37: invokeinterface #49,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.getChild:(Ljava/lang/String;)Lnet/openhft/chronicle/engine/api/tree/Asset;
      42: astore        4
      44: aload         4
      46: ifnonnull     50
      49: return
      50: aload         4
      52: iconst_0
      53: invokeinterface #50,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.subscription:(Z)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionCollection;
      58: astore        5
      60: aload         5
      62: instanceof    #51                 // class net/openhft/chronicle/engine/pubsub/MapSimpleSubscription
      65: ifeq          84
      68: aload         5
      70: checkcast     #52                 // class net/openhft/chronicle/engine/pubsub/SimpleSubscription
      73: aload_1
      74: invokeinterface #42,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getValue:()Ljava/lang/Object;
      79: invokeinterface #53,  2           // InterfaceMethod net/openhft/chronicle/engine/pubsub/SimpleSubscription.notifyMessage:(Ljava/lang/Object;)V
      84: return

  public boolean needsPrevious();
    Code:
       0: aload_0
       1: getfield      #7                  // Field subscribers:Ljava/util/Set;
       4: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
       9: ifeq          24
      12: aload_0
      13: getfield      #9                  // Field downstream:Ljava/util/Set;
      16: invokeinterface #36,  1           // InterfaceMethod java/util/Set.isEmpty:()Z
      21: ifne          28
      24: iconst_1
      25: goto          29
      28: iconst_0
      29: ireturn

  public void registerSubscriber(net.openhft.chronicle.engine.api.tree.RequestContext, net.openhft.chronicle.engine.api.pubsub.Subscriber, net.openhft.chronicle.engine.query.Filter);
    Code:
       0: aload_1
       1: invokevirtual #54                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.elementType:()Ljava/lang/Class;
       4: astore        4
       6: aload         4
       8: ldc           #55                 // class net/openhft/chronicle/engine/api/map/KeyValueStore$Entry
      10: if_acmpeq     20
      13: aload         4
      15: ldc           #56                 // class net/openhft/chronicle/engine/api/map/MapEvent
      17: if_acmpne     30
      20: aload_0
      21: aload_1
      22: aload_2
      23: aload_3
      24: invokespecial #57                 // Method registerSubscriber0:(Lnet/openhft/chronicle/engine/api/tree/RequestContext;Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;Lnet/openhft/chronicle/engine/query/Filter;)V
      27: goto          37
      30: aload_0
      31: aload_1
      32: aload_2
      33: aload_3
      34: invokevirtual #58                 // Method registerKeySubscriber:(Lnet/openhft/chronicle/engine/api/tree/RequestContext;Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;Lnet/openhft/chronicle/engine/query/Filter;)V
      37: return

  private <T> net.openhft.chronicle.engine.api.pubsub.Subscriber<T> subscriber(net.openhft.chronicle.engine.api.pubsub.Subscriber<T>, net.openhft.chronicle.engine.query.Filter<T>);
    Code:
       0: aload_2
       1: invokevirtual #59                 // Method net/openhft/chronicle/engine/query/Filter.isEmpty:()Z
       4: ifeq          12
       7: aload_1
       8: astore_3
       9: goto          34
      12: new           #60                 // class net/openhft/chronicle/engine/query/Filter$FilteredSubscriber
      15: dup
      16: aload_2
      17: aload_1
      18: invokespecial #61                 // Method net/openhft/chronicle/engine/query/Filter$FilteredSubscriber."<init>":(Lnet/openhft/chronicle/engine/query/Filter;Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;)V
      21: astore_3
      22: aload_0
      23: getfield      #12                 // Field subscriptionDelegate:Ljava/util/Map;
      26: aload_1
      27: aload_3
      28: invokeinterface #62,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      33: pop
      34: aload_3
      35: areturn

  private void registerSubscriber0(net.openhft.chronicle.engine.api.tree.RequestContext, net.openhft.chronicle.engine.api.pubsub.Subscriber<net.openhft.chronicle.engine.api.map.MapEvent<K, V>>, net.openhft.chronicle.engine.query.Filter<net.openhft.chronicle.engine.api.map.MapEvent<K, V>>);
    Code:
       0: aload_0
       1: ldc           #63                 // String subscription
       3: invokespecial #64                 // Method addToStats:(Ljava/lang/String;)V
       6: aload_0
       7: aload_2
       8: aload_3
       9: invokespecial #65                 // Method subscriber:(Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;Lnet/openhft/chronicle/engine/query/Filter;)Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;
      12: astore        4
      14: aload_0
      15: getfield      #7                  // Field subscribers:Ljava/util/Set;
      18: aload         4
      20: invokeinterface #66,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      25: pop
      26: aload_1
      27: invokevirtual #67                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.bootstrap:()Ljava/lang/Boolean;
      30: astore        5
      32: aload         5
      34: getstatic     #68                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
      37: if_acmpeq     152
      40: aload_0
      41: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      44: ifnull        152
      47: iconst_0
      48: istore        6
      50: iload         6
      52: aload_0
      53: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      56: invokeinterface #69,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.segments:()I
      61: if_icmpge     93
      64: aload_0
      65: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      68: iload         6
      70: aload         4
      72: dup
      73: invokevirtual #29                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      76: pop
      77: invokedynamic #70,  0             // InvokeDynamic #5:accept:(Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      82: invokeinterface #71,  3           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.entriesFor:(ILnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      87: iinc          6, 1
      90: goto          50
      93: getstatic     #72                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      96: aload_1
      97: invokevirtual #73                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.endSubscriptionAfterBootstrap:()Ljava/lang/Boolean;
     100: invokevirtual #74                 // Method java/lang/Boolean.equals:(Ljava/lang/Object;)Z
     103: ifeq          135
     106: aload         4
     108: invokeinterface #75,  1           // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/Subscriber.onEndOfSubscription:()V
     113: getstatic     #76                 // Field LOG:Lorg/slf4j/Logger;
     116: ldc           #77                 // String onEndOfSubscription
     118: invokeinterface #78,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     123: aload_0
     124: getfield      #7                  // Field subscribers:Ljava/util/Set;
     127: aload         4
     129: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
     134: pop
     135: goto          152
     138: astore        6
     140: aload_0
     141: getfield      #7                  // Field subscribers:Ljava/util/Set;
     144: aload         4
     146: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
     151: pop
     152: return
    Exception table:
       from    to  target type
          47   135   138   Class net/openhft/chronicle/engine/api/pubsub/InvalidSubscriberException

  public void registerKeySubscriber(net.openhft.chronicle.engine.api.tree.RequestContext, net.openhft.chronicle.engine.api.pubsub.Subscriber<K>, net.openhft.chronicle.engine.query.Filter<K>);
    Code:
       0: aload_0
       1: ldc           #81                 // String keySubscription
       3: invokespecial #64                 // Method addToStats:(Ljava/lang/String;)V
       6: aload_1
       7: invokevirtual #67                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.bootstrap:()Ljava/lang/Boolean;
      10: astore        4
      12: aload_0
      13: aload_2
      14: aload_3
      15: invokespecial #65                 // Method subscriber:(Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;Lnet/openhft/chronicle/engine/query/Filter;)Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;
      18: astore        5
      20: aload_0
      21: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
      24: aload         5
      26: invokeinterface #66,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      31: pop
      32: aload         4
      34: getstatic     #68                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
      37: if_acmpeq     142
      40: aload_0
      41: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      44: ifnull        142
      47: iconst_0
      48: istore        6
      50: iload         6
      52: aload_0
      53: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      56: invokeinterface #69,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.segments:()I
      61: if_icmpge     93
      64: aload_0
      65: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      68: iload         6
      70: aload         5
      72: dup
      73: invokevirtual #29                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      76: pop
      77: invokedynamic #82,  0             // InvokeDynamic #6:accept:(Lnet/openhft/chronicle/engine/api/pubsub/Subscriber;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      82: invokeinterface #83,  3           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.keysFor:(ILnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      87: iinc          6, 1
      90: goto          50
      93: getstatic     #72                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      96: aload_1
      97: invokevirtual #73                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.endSubscriptionAfterBootstrap:()Ljava/lang/Boolean;
     100: invokevirtual #74                 // Method java/lang/Boolean.equals:(Ljava/lang/Object;)Z
     103: ifeq          125
     106: aload         5
     108: invokeinterface #75,  1           // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/Subscriber.onEndOfSubscription:()V
     113: aload_0
     114: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
     117: aload         5
     119: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
     124: pop
     125: goto          142
     128: astore        6
     130: aload_0
     131: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
     134: aload         5
     136: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
     141: pop
     142: return
    Exception table:
       from    to  target type
          47   125   128   Class net/openhft/chronicle/engine/api/pubsub/InvalidSubscriberException

  public void registerTopicSubscriber(net.openhft.chronicle.engine.api.tree.RequestContext, net.openhft.chronicle.engine.api.pubsub.TopicSubscriber);
    Code:
       0: aload_0
       1: ldc           #84                 // String topicSubscription
       3: invokespecial #64                 // Method addToStats:(Ljava/lang/String;)V
       6: aload_1
       7: invokevirtual #67                 // Method net/openhft/chronicle/engine/api/tree/RequestContext.bootstrap:()Ljava/lang/Boolean;
      10: astore_3
      11: aload_0
      12: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
      15: aload_2
      16: invokeinterface #66,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      21: pop
      22: aload_3
      23: getstatic     #68                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
      26: if_acmpeq     92
      29: aload_0
      30: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      33: ifnull        92
      36: iconst_0
      37: istore        4
      39: iload         4
      41: aload_0
      42: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      45: invokeinterface #69,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.segments:()I
      50: if_icmpge     76
      53: aload_0
      54: getfield      #32                 // Field kvStore:Lnet/openhft/chronicle/engine/api/map/KeyValueStore;
      57: iload         4
      59: aload_2
      60: invokedynamic #85,  0             // InvokeDynamic #7:accept:(Lnet/openhft/chronicle/engine/api/pubsub/TopicSubscriber;)Lnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;
      65: invokeinterface #71,  3           // InterfaceMethod net/openhft/chronicle/engine/api/map/KeyValueStore.entriesFor:(ILnet/openhft/chronicle/engine/api/pubsub/SubscriptionConsumer;)V
      70: iinc          4, 1
      73: goto          39
      76: goto          92
      79: astore        4
      81: aload_0
      82: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
      85: aload_2
      86: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      91: pop
      92: return
    Exception table:
       from    to  target type
          36    76    79   Class net/openhft/chronicle/engine/api/pubsub/InvalidSubscriberException

  public void registerDownstream(net.openhft.chronicle.engine.map.EventConsumer<K, V>);
    Code:
       0: aload_0
       1: getfield      #9                  // Field downstream:Ljava/util/Set;
       4: aload_1
       5: invokeinterface #66,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      10: pop
      11: return

  public void unregisterDownstream(net.openhft.chronicle.engine.map.EventConsumer<K, V>);
    Code:
       0: aload_0
       1: getfield      #9                  // Field downstream:Ljava/util/Set;
       4: aload_1
       5: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      10: pop
      11: return

  public void unregisterSubscriber(net.openhft.chronicle.engine.api.pubsub.Subscriber);
    Code:
       0: aload_0
       1: getfield      #12                 // Field subscriptionDelegate:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #86,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #87                 // class net/openhft/chronicle/engine/api/pubsub/Subscriber
      13: astore_2
      14: aload_2
      15: ifnull        22
      18: aload_2
      19: goto          23
      22: aload_1
      23: astore_3
      24: aload_0
      25: getfield      #7                  // Field subscribers:Ljava/util/Set;
      28: aload_3
      29: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      34: istore        4
      36: aload_0
      37: getfield      #8                  // Field keySubscribers:Ljava/util/Set;
      40: aload_3
      41: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      46: istore        5
      48: iload         4
      50: ifeq          59
      53: aload_0
      54: ldc           #63                 // String subscription
      56: invokespecial #88                 // Method removeFromStats:(Ljava/lang/String;)V
      59: iload         5
      61: ifeq          70
      64: aload_0
      65: ldc           #81                 // String keySubscription
      67: invokespecial #88                 // Method removeFromStats:(Ljava/lang/String;)V
      70: aload_3
      71: ifnull        80
      74: aload_3
      75: invokeinterface #75,  1           // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/Subscriber.onEndOfSubscription:()V
      80: return

  public void unregisterTopicSubscriber(net.openhft.chronicle.engine.api.pubsub.TopicSubscriber);
    Code:
       0: aload_0
       1: getfield      #6                  // Field topicSubscribers:Ljava/util/Set;
       4: aload_1
       5: invokeinterface #79,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      10: pop
      11: aload_0
      12: ldc           #84                 // String topicSubscription
      14: invokespecial #88                 // Method removeFromStats:(Ljava/lang/String;)V
      17: aload_1
      18: invokeinterface #89,  1           // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/TopicSubscriber.onEndOfSubscription:()V
      23: return

  private java.util.Map getSubscriptionMap();
    Code:
       0: aload_0
       1: getfield      #13                 // Field subscriptionMonitoringMap:Ljava/util/Map;
       4: ifnull        12
       7: aload_0
       8: getfield      #13                 // Field subscriptionMonitoringMap:Ljava/util/Map;
      11: areturn
      12: aload_0
      13: getfield      #14                 // Field asset:Lnet/openhft/chronicle/engine/api/tree/Asset;
      16: invokeinterface #90,  1           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.root:()Lnet/openhft/chronicle/engine/api/tree/Asset;
      21: ldc           #91                 // String proc/subscriptions
      23: invokeinterface #92,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.getAsset:(Ljava/lang/String;)Lnet/openhft/chronicle/engine/api/tree/Asset;
      28: astore_1
      29: aload_1
      30: ifnull        59
      33: aload_1
      34: ldc           #93                 // class net/openhft/chronicle/engine/api/map/MapView
      36: invokeinterface #94,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.getView:(Ljava/lang/Class;)Ljava/lang/Object;
      41: ifnull        59
      44: aload_0
      45: aload_1
      46: ldc           #93                 // class net/openhft/chronicle/engine/api/map/MapView
      48: invokeinterface #94,  2           // InterfaceMethod net/openhft/chronicle/engine/api/tree/Asset.getView:(Ljava/lang/Class;)Ljava/lang/Object;
      53: checkcast     #95                 // class java/util/Map
      56: putfield      #13                 // Field subscriptionMonitoringMap:Ljava/util/Map;
      59: aload_0
      60: getfield      #13                 // Field subscriptionMonitoringMap:Ljava/util/Map;
      63: areturn

  private void addToStats(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #18                 // Field sessionProvider:Lnet/openhft/chronicle/network/api/session/SessionProvider;
       4: ifnonnull     8
       7: return
       8: aload_0
       9: getfield      #18                 // Field sessionProvider:Lnet/openhft/chronicle/network/api/session/SessionProvider;
      12: invokeinterface #96,  1           // InterfaceMethod net/openhft/chronicle/network/api/session/SessionProvider.get:()Lnet/openhft/chronicle/network/api/session/SessionDetails;
      17: astore_2
      18: aload_2
      19: ifnull        162
      22: aload_2
      23: invokeinterface #97,  1           // InterfaceMethod net/openhft/chronicle/network/api/session/SessionDetails.userId:()Ljava/lang/String;
      28: astore_3
      29: aload_0
      30: invokespecial #98                 // Method getSubscriptionMap:()Ljava/util/Map;
      33: astore        4
      35: aload         4
      37: ifnull        162
      40: aload         4
      42: new           #99                 // class java/lang/StringBuilder
      45: dup
      46: invokespecial #100                // Method java/lang/StringBuilder."<init>":()V
      49: aload_3
      50: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      53: ldc           #102                // String ~
      55: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: aload_1
      59: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: invokevirtual #103                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      65: invokeinterface #104,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      70: checkcast     #105                // class net/openhft/chronicle/engine/cfg/SubscriptionStat
      73: astore        5
      75: aload         5
      77: ifnonnull     97
      80: new           #105                // class net/openhft/chronicle/engine/cfg/SubscriptionStat
      83: dup
      84: invokespecial #106                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat."<init>":()V
      87: astore        5
      89: aload         5
      91: invokestatic  #107                // Method java/time/LocalTime.now:()Ljava/time/LocalTime;
      94: invokevirtual #108                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setFirstSubscribed:(Ljava/time/LocalTime;)V
      97: aload         5
      99: aload         5
     101: invokevirtual #109                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.getTotalSubscriptions:()I
     104: iconst_1
     105: iadd
     106: invokevirtual #110                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setTotalSubscriptions:(I)V
     109: aload         5
     111: aload         5
     113: invokevirtual #111                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.getActiveSubscriptions:()I
     116: iconst_1
     117: iadd
     118: invokevirtual #112                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setActiveSubscriptions:(I)V
     121: aload         5
     123: invokestatic  #107                // Method java/time/LocalTime.now:()Ljava/time/LocalTime;
     126: invokevirtual #113                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setRecentlySubscribed:(Ljava/time/LocalTime;)V
     129: aload         4
     131: new           #99                 // class java/lang/StringBuilder
     134: dup
     135: invokespecial #100                // Method java/lang/StringBuilder."<init>":()V
     138: aload_3
     139: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     142: ldc           #102                // String ~
     144: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     147: aload_1
     148: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     151: invokevirtual #103                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     154: aload         5
     156: invokeinterface #62,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     161: pop
     162: return

  private void removeFromStats(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #18                 // Field sessionProvider:Lnet/openhft/chronicle/network/api/session/SessionProvider;
       4: ifnonnull     8
       7: return
       8: aload_0
       9: getfield      #18                 // Field sessionProvider:Lnet/openhft/chronicle/network/api/session/SessionProvider;
      12: invokeinterface #96,  1           // InterfaceMethod net/openhft/chronicle/network/api/session/SessionProvider.get:()Lnet/openhft/chronicle/network/api/session/SessionDetails;
      17: astore_2
      18: aload_2
      19: ifnull        143
      22: aload_2
      23: invokeinterface #97,  1           // InterfaceMethod net/openhft/chronicle/network/api/session/SessionDetails.userId:()Ljava/lang/String;
      28: astore_3
      29: aload_0
      30: invokespecial #98                 // Method getSubscriptionMap:()Ljava/util/Map;
      33: astore        4
      35: aload         4
      37: ifnull        143
      40: aload         4
      42: new           #99                 // class java/lang/StringBuilder
      45: dup
      46: invokespecial #100                // Method java/lang/StringBuilder."<init>":()V
      49: aload_3
      50: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      53: ldc           #102                // String ~
      55: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: aload_1
      59: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: invokevirtual #103                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      65: invokeinterface #104,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      70: checkcast     #105                // class net/openhft/chronicle/engine/cfg/SubscriptionStat
      73: astore        5
      75: aload         5
      77: ifnonnull     90
      80: new           #114                // class java/lang/AssertionError
      83: dup
      84: ldc           #115                // String There should be an active subscription
      86: invokespecial #116                // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
      89: athrow
      90: aload         5
      92: aload         5
      94: invokevirtual #111                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.getActiveSubscriptions:()I
      97: iconst_1
      98: isub
      99: invokevirtual #112                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setActiveSubscriptions:(I)V
     102: aload         5
     104: invokestatic  #107                // Method java/time/LocalTime.now:()Ljava/time/LocalTime;
     107: invokevirtual #113                // Method net/openhft/chronicle/engine/cfg/SubscriptionStat.setRecentlySubscribed:(Ljava/time/LocalTime;)V
     110: aload         4
     112: new           #99                 // class java/lang/StringBuilder
     115: dup
     116: invokespecial #100                // Method java/lang/StringBuilder."<init>":()V
     119: aload_3
     120: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     123: ldc           #102                // String ~
     125: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: aload_1
     129: invokevirtual #101                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     132: invokevirtual #103                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     135: aload         5
     137: invokeinterface #62,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     142: pop
     143: return

  private static void lambda$registerTopicSubscriber$4(net.openhft.chronicle.engine.api.pubsub.TopicSubscriber, net.openhft.chronicle.engine.api.map.MapEvent) throws net.openhft.chronicle.engine.api.pubsub.InvalidSubscriberException;
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #41,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getKey:()Ljava/lang/Object;
       7: aload_1
       8: invokeinterface #42,  1           // InterfaceMethod net/openhft/chronicle/engine/api/map/MapEvent.getValue:()Ljava/lang/Object;
      13: invokeinterface #117,  3          // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/TopicSubscriber.onMessage:(Ljava/lang/Object;Ljava/lang/Object;)V
      18: return

  private static void lambda$notifyEvent1$3(net.openhft.chronicle.engine.api.map.MapEvent, net.openhft.chronicle.engine.map.EventConsumer) throws net.openhft.chronicle.engine.api.pubsub.InvalidSubscriberException;
    Code:
       0: aload_1
       1: aload_0
       2: invokeinterface #118,  2          // InterfaceMethod net/openhft/chronicle/engine/map/EventConsumer.notifyEvent:(Lnet/openhft/chronicle/engine/api/map/MapEvent;)V
       7: return

  private static void lambda$notifyEvent1$2(java.lang.Object, net.openhft.chronicle.engine.api.pubsub.Subscriber) throws net.openhft.chronicle.engine.api.pubsub.InvalidSubscriberException;
    Code:
       0: aload_1
       1: aload_0
       2: invokeinterface #119,  2          // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/Subscriber.onMessage:(Ljava/lang/Object;)V
       7: return

  private static void lambda$notifyEvent1$1(net.openhft.chronicle.engine.api.map.MapEvent, net.openhft.chronicle.engine.api.pubsub.Subscriber) throws net.openhft.chronicle.engine.api.pubsub.InvalidSubscriberException;
    Code:
       0: aload_1
       1: aload_0
       2: invokeinterface #119,  2          // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/Subscriber.onMessage:(Ljava/lang/Object;)V
       7: return

  private static void lambda$notifyEvent1$0(java.lang.Object, java.lang.Object, net.openhft.chronicle.engine.api.pubsub.TopicSubscriber) throws net.openhft.chronicle.engine.api.pubsub.InvalidSubscriberException;
    Code:
       0: aload_2
       1: aload_0
       2: aload_1
       3: invokeinterface #117,  3          // InterfaceMethod net/openhft/chronicle/engine/api/pubsub/TopicSubscriber.onMessage:(Ljava/lang/Object;Ljava/lang/Object;)V
       8: return

  static {};
    Code:
       0: ldc           #120                // class net/openhft/chronicle/engine/map/MapKVSSubscription
       2: invokestatic  #121                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #76                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

Compiled from "TAsyncMethodCall.java"
public abstract class org.apache.thrift.async.TAsyncMethodCall<T> {
  private static final int INITIAL_MEMORY_BUFFER_SIZE;

  private static java.util.concurrent.atomic.AtomicLong sequenceIdCounter;

  private org.apache.thrift.async.TAsyncMethodCall$State state;

  protected final org.apache.thrift.transport.TNonblockingTransport transport;

  private final org.apache.thrift.protocol.TProtocolFactory protocolFactory;

  protected final org.apache.thrift.async.TAsyncClient client;

  private final org.apache.thrift.async.AsyncMethodCallback<T> callback;

  private final boolean isOneway;

  private long sequenceId;

  private final long timeout;

  private java.nio.ByteBuffer sizeBuffer;

  private final byte[] sizeBufferArray;

  private java.nio.ByteBuffer frameBuffer;

  private long startTime;

  protected org.apache.thrift.async.TAsyncMethodCall(org.apache.thrift.async.TAsyncClient, org.apache.thrift.protocol.TProtocolFactory, org.apache.thrift.transport.TNonblockingTransport, org.apache.thrift.async.AsyncMethodCallback<T>, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aconst_null
       6: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       9: aload_0
      10: iconst_4
      11: newarray       byte
      13: putfield      #3                  // Field sizeBufferArray:[B
      16: aload_0
      17: invokestatic  #4                  // Method java/lang/System.currentTimeMillis:()J
      20: putfield      #5                  // Field startTime:J
      23: aload_0
      24: aload_3
      25: putfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
      28: aload_0
      29: aload         4
      31: putfield      #7                  // Field callback:Lorg/apache/thrift/async/AsyncMethodCallback;
      34: aload_0
      35: aload_2
      36: putfield      #8                  // Field protocolFactory:Lorg/apache/thrift/protocol/TProtocolFactory;
      39: aload_0
      40: aload_1
      41: putfield      #9                  // Field client:Lorg/apache/thrift/async/TAsyncClient;
      44: aload_0
      45: iload         5
      47: putfield      #10                 // Field isOneway:Z
      50: aload_0
      51: getstatic     #11                 // Field sequenceIdCounter:Ljava/util/concurrent/atomic/AtomicLong;
      54: invokevirtual #12                 // Method java/util/concurrent/atomic/AtomicLong.getAndIncrement:()J
      57: putfield      #13                 // Field sequenceId:J
      60: aload_0
      61: aload_1
      62: invokevirtual #14                 // Method org/apache/thrift/async/TAsyncClient.getTimeout:()J
      65: putfield      #15                 // Field timeout:J
      68: return

  protected org.apache.thrift.async.TAsyncMethodCall$State getState();
    Code:
       0: aload_0
       1: getfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       4: areturn

  protected boolean isFinished();
    Code:
       0: aload_0
       1: getfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       4: getstatic     #16                 // Field org/apache/thrift/async/TAsyncMethodCall$State.RESPONSE_READ:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: ireturn

  protected long getStartTime();
    Code:
       0: aload_0
       1: getfield      #5                  // Field startTime:J
       4: lreturn

  protected long getSequenceId();
    Code:
       0: aload_0
       1: getfield      #13                 // Field sequenceId:J
       4: lreturn

  public org.apache.thrift.async.TAsyncClient getClient();
    Code:
       0: aload_0
       1: getfield      #9                  // Field client:Lorg/apache/thrift/async/TAsyncClient;
       4: areturn

  public boolean hasTimeout();
    Code:
       0: aload_0
       1: getfield      #15                 // Field timeout:J
       4: lconst_0
       5: lcmp
       6: ifle          13
       9: iconst_1
      10: goto          14
      13: iconst_0
      14: ireturn

  public long getTimeoutTimestamp();
    Code:
       0: aload_0
       1: getfield      #15                 // Field timeout:J
       4: aload_0
       5: getfield      #5                  // Field startTime:J
       8: ladd
       9: lreturn

  protected abstract void write_args(org.apache.thrift.protocol.TProtocol) throws org.apache.thrift.TException;

  protected void prepareMethodCall() throws org.apache.thrift.TException;
    Code:
       0: new           #17                 // class org/apache/thrift/transport/TMemoryBuffer
       3: dup
       4: sipush        128
       7: invokespecial #18                 // Method org/apache/thrift/transport/TMemoryBuffer."<init>":(I)V
      10: astore_1
      11: aload_0
      12: getfield      #8                  // Field protocolFactory:Lorg/apache/thrift/protocol/TProtocolFactory;
      15: aload_1
      16: invokeinterface #19,  2           // InterfaceMethod org/apache/thrift/protocol/TProtocolFactory.getProtocol:(Lorg/apache/thrift/transport/TTransport;)Lorg/apache/thrift/protocol/TProtocol;
      21: astore_2
      22: aload_0
      23: aload_2
      24: invokevirtual #20                 // Method write_args:(Lorg/apache/thrift/protocol/TProtocol;)V
      27: aload_1
      28: invokevirtual #21                 // Method org/apache/thrift/transport/TMemoryBuffer.length:()I
      31: istore_3
      32: aload_0
      33: aload_1
      34: invokevirtual #22                 // Method org/apache/thrift/transport/TMemoryBuffer.getArray:()[B
      37: iconst_0
      38: iload_3
      39: invokestatic  #23                 // Method java/nio/ByteBuffer.wrap:([BII)Ljava/nio/ByteBuffer;
      42: putfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
      45: iload_3
      46: aload_0
      47: getfield      #3                  // Field sizeBufferArray:[B
      50: invokestatic  #25                 // Method org/apache/thrift/transport/TFramedTransport.encodeFrameSize:(I[B)V
      53: aload_0
      54: aload_0
      55: getfield      #3                  // Field sizeBufferArray:[B
      58: invokestatic  #26                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      61: putfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
      64: return

  void start(java.nio.channels.Selector) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
       4: invokevirtual #28                 // Method org/apache/thrift/transport/TNonblockingTransport.isOpen:()Z
       7: ifeq          30
      10: aload_0
      11: getstatic     #29                 // Field org/apache/thrift/async/TAsyncMethodCall$State.WRITING_REQUEST_SIZE:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      14: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      17: aload_0
      18: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
      21: aload_1
      22: iconst_4
      23: invokevirtual #30                 // Method org/apache/thrift/transport/TNonblockingTransport.registerSelector:(Ljava/nio/channels/Selector;I)Ljava/nio/channels/SelectionKey;
      26: astore_2
      27: goto          63
      30: aload_0
      31: getstatic     #31                 // Field org/apache/thrift/async/TAsyncMethodCall$State.CONNECTING:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      34: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      37: aload_0
      38: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
      41: aload_1
      42: bipush        8
      44: invokevirtual #30                 // Method org/apache/thrift/transport/TNonblockingTransport.registerSelector:(Ljava/nio/channels/Selector;I)Ljava/nio/channels/SelectionKey;
      47: astore_2
      48: aload_0
      49: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
      52: invokevirtual #32                 // Method org/apache/thrift/transport/TNonblockingTransport.startConnect:()Z
      55: ifeq          63
      58: aload_0
      59: aload_2
      60: invokevirtual #33                 // Method registerForFirstWrite:(Ljava/nio/channels/SelectionKey;)V
      63: aload_2
      64: aload_0
      65: invokevirtual #34                 // Method java/nio/channels/SelectionKey.attach:(Ljava/lang/Object;)Ljava/lang/Object;
      68: pop
      69: return

  void registerForFirstWrite(java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: aload_0
       1: getstatic     #29                 // Field org/apache/thrift/async/TAsyncMethodCall$State.WRITING_REQUEST_SIZE:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       4: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       7: aload_1
       8: iconst_4
       9: invokevirtual #35                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
      12: pop
      13: return

  protected java.nio.ByteBuffer getFrameBuffer();
    Code:
       0: aload_0
       1: getfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
       4: areturn

  protected void transition(java.nio.channels.SelectionKey);
    Code:
       0: aload_1
       1: invokevirtual #36                 // Method java/nio/channels/SelectionKey.isValid:()Z
       4: ifne          27
       7: aload_1
       8: invokevirtual #37                 // Method java/nio/channels/SelectionKey.cancel:()V
      11: new           #38                 // class org/apache/thrift/transport/TTransportException
      14: dup
      15: ldc           #39                 // String Selection key not valid!
      17: invokespecial #40                 // Method org/apache/thrift/transport/TTransportException."<init>":(Ljava/lang/String;)V
      20: astore_2
      21: aload_0
      22: aload_2
      23: invokevirtual #41                 // Method onError:(Ljava/lang/Exception;)V
      26: return
      27: getstatic     #42                 // Field org/apache/thrift/async/TAsyncMethodCall$1.$SwitchMap$org$apache$thrift$async$TAsyncMethodCall$State:[I
      30: aload_0
      31: getfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      34: invokevirtual #43                 // Method org/apache/thrift/async/TAsyncMethodCall$State.ordinal:()I
      37: iaload
      38: tableswitch   { // 1 to 5
                     1: 72
                     2: 80
                     3: 87
                     4: 95
                     5: 102
               default: 110
          }
      72: aload_0
      73: aload_1
      74: invokespecial #44                 // Method doConnecting:(Ljava/nio/channels/SelectionKey;)V
      77: goto          145
      80: aload_0
      81: invokespecial #45                 // Method doWritingRequestSize:()V
      84: goto          145
      87: aload_0
      88: aload_1
      89: invokespecial #46                 // Method doWritingRequestBody:(Ljava/nio/channels/SelectionKey;)V
      92: goto          145
      95: aload_0
      96: invokespecial #47                 // Method doReadingResponseSize:()V
      99: goto          145
     102: aload_0
     103: aload_1
     104: invokespecial #48                 // Method doReadingResponseBody:(Ljava/nio/channels/SelectionKey;)V
     107: goto          145
     110: new           #49                 // class java/lang/IllegalStateException
     113: dup
     114: new           #50                 // class java/lang/StringBuilder
     117: dup
     118: invokespecial #51                 // Method java/lang/StringBuilder."<init>":()V
     121: ldc           #52                 // String Method call in state
     123: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     126: aload_0
     127: getfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
     130: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     133: ldc           #55                 // String  but selector called transition method. Seems like a bug...
     135: invokevirtual #53                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     138: invokevirtual #56                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     141: invokespecial #57                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     144: athrow
     145: goto          164
     148: astore_2
     149: aload_1
     150: invokevirtual #37                 // Method java/nio/channels/SelectionKey.cancel:()V
     153: aload_1
     154: aconst_null
     155: invokevirtual #34                 // Method java/nio/channels/SelectionKey.attach:(Ljava/lang/Object;)Ljava/lang/Object;
     158: pop
     159: aload_0
     160: aload_2
     161: invokevirtual #41                 // Method onError:(Ljava/lang/Exception;)V
     164: return
    Exception table:
       from    to  target type
          27   145   148   Class java/lang/Exception

  protected void onError(java.lang.Exception);
    Code:
       0: aload_0
       1: getfield      #9                  // Field client:Lorg/apache/thrift/async/TAsyncClient;
       4: aload_1
       5: invokevirtual #59                 // Method org/apache/thrift/async/TAsyncClient.onError:(Ljava/lang/Exception;)V
       8: aload_0
       9: getfield      #7                  // Field callback:Lorg/apache/thrift/async/AsyncMethodCallback;
      12: aload_1
      13: invokeinterface #60,  2           // InterfaceMethod org/apache/thrift/async/AsyncMethodCallback.onError:(Ljava/lang/Exception;)V
      18: aload_0
      19: getstatic     #61                 // Field org/apache/thrift/async/TAsyncMethodCall$State.ERROR:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      22: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      25: return

  private void doReadingResponseBody(java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
       4: aload_0
       5: getfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
       8: invokevirtual #62                 // Method org/apache/thrift/transport/TNonblockingTransport.read:(Ljava/nio/ByteBuffer;)I
      11: ifge          24
      14: new           #63                 // class java/io/IOException
      17: dup
      18: ldc           #64                 // String Read call frame failed
      20: invokespecial #65                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_0
      25: getfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
      28: invokevirtual #66                 // Method java/nio/ByteBuffer.remaining:()I
      31: ifne          39
      34: aload_0
      35: aload_1
      36: invokespecial #67                 // Method cleanUpAndFireCallback:(Ljava/nio/channels/SelectionKey;)V
      39: return

  private void cleanUpAndFireCallback(java.nio.channels.SelectionKey);
    Code:
       0: aload_0
       1: getstatic     #16                 // Field org/apache/thrift/async/TAsyncMethodCall$State.RESPONSE_READ:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       4: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
       7: aload_1
       8: iconst_0
       9: invokevirtual #35                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
      12: pop
      13: aload_1
      14: aconst_null
      15: invokevirtual #34                 // Method java/nio/channels/SelectionKey.attach:(Ljava/lang/Object;)Ljava/lang/Object;
      18: pop
      19: aload_0
      20: getfield      #9                  // Field client:Lorg/apache/thrift/async/TAsyncClient;
      23: invokevirtual #68                 // Method org/apache/thrift/async/TAsyncClient.onComplete:()V
      26: aload_0
      27: getfield      #7                  // Field callback:Lorg/apache/thrift/async/AsyncMethodCallback;
      30: aload_0
      31: invokeinterface #69,  2           // InterfaceMethod org/apache/thrift/async/AsyncMethodCallback.onComplete:(Ljava/lang/Object;)V
      36: return

  private void doReadingResponseSize() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
       4: aload_0
       5: getfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
       8: invokevirtual #62                 // Method org/apache/thrift/transport/TNonblockingTransport.read:(Ljava/nio/ByteBuffer;)I
      11: ifge          24
      14: new           #63                 // class java/io/IOException
      17: dup
      18: ldc           #70                 // String Read call frame size failed
      20: invokespecial #65                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_0
      25: getfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
      28: invokevirtual #66                 // Method java/nio/ByteBuffer.remaining:()I
      31: ifne          55
      34: aload_0
      35: getstatic     #71                 // Field org/apache/thrift/async/TAsyncMethodCall$State.READING_RESPONSE_BODY:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      38: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      41: aload_0
      42: aload_0
      43: getfield      #3                  // Field sizeBufferArray:[B
      46: invokestatic  #72                 // Method org/apache/thrift/transport/TFramedTransport.decodeFrameSize:([B)I
      49: invokestatic  #73                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      52: putfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
      55: return

  private void doWritingRequestBody(java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
       4: aload_0
       5: getfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
       8: invokevirtual #74                 // Method org/apache/thrift/transport/TNonblockingTransport.write:(Ljava/nio/ByteBuffer;)I
      11: ifge          24
      14: new           #63                 // class java/io/IOException
      17: dup
      18: ldc           #75                 // String Write call frame failed
      20: invokespecial #65                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_0
      25: getfield      #24                 // Field frameBuffer:Ljava/nio/ByteBuffer;
      28: invokevirtual #66                 // Method java/nio/ByteBuffer.remaining:()I
      31: ifne          70
      34: aload_0
      35: getfield      #10                 // Field isOneway:Z
      38: ifeq          49
      41: aload_0
      42: aload_1
      43: invokespecial #67                 // Method cleanUpAndFireCallback:(Ljava/nio/channels/SelectionKey;)V
      46: goto          70
      49: aload_0
      50: getstatic     #76                 // Field org/apache/thrift/async/TAsyncMethodCall$State.READING_RESPONSE_SIZE:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      53: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      56: aload_0
      57: getfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
      60: invokevirtual #77                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      63: pop
      64: aload_1
      65: iconst_1
      66: invokevirtual #35                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
      69: pop
      70: return

  private void doWritingRequestSize() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
       4: aload_0
       5: getfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
       8: invokevirtual #74                 // Method org/apache/thrift/transport/TNonblockingTransport.write:(Ljava/nio/ByteBuffer;)I
      11: ifge          24
      14: new           #63                 // class java/io/IOException
      17: dup
      18: ldc           #78                 // String Write call frame size failed
      20: invokespecial #65                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_0
      25: getfield      #27                 // Field sizeBuffer:Ljava/nio/ByteBuffer;
      28: invokevirtual #66                 // Method java/nio/ByteBuffer.remaining:()I
      31: ifne          41
      34: aload_0
      35: getstatic     #79                 // Field org/apache/thrift/async/TAsyncMethodCall$State.WRITING_REQUEST_BODY:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      38: putfield      #2                  // Field state:Lorg/apache/thrift/async/TAsyncMethodCall$State;
      41: return

  private void doConnecting(java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #80                 // Method java/nio/channels/SelectionKey.isConnectable:()Z
       4: ifeq          17
       7: aload_0
       8: getfield      #6                  // Field transport:Lorg/apache/thrift/transport/TNonblockingTransport;
      11: invokevirtual #81                 // Method org/apache/thrift/transport/TNonblockingTransport.finishConnect:()Z
      14: ifne          27
      17: new           #63                 // class java/io/IOException
      20: dup
      21: ldc           #82                 // String not connectable or finishConnect returned false after we got an OP_CONNECT
      23: invokespecial #65                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      26: athrow
      27: aload_0
      28: aload_1
      29: invokevirtual #33                 // Method registerForFirstWrite:(Ljava/nio/channels/SelectionKey;)V
      32: return

  static {};
    Code:
       0: new           #83                 // class java/util/concurrent/atomic/AtomicLong
       3: dup
       4: lconst_0
       5: invokespecial #84                 // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
       8: putstatic     #11                 // Field sequenceIdCounter:Ljava/util/concurrent/atomic/AtomicLong;
      11: return
}

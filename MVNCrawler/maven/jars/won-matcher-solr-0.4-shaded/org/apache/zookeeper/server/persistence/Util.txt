Compiled from "Util.java"
public class org.apache.zookeeper.server.persistence.Util {
  private static final org.slf4j.Logger LOG;

  private static final java.lang.String SNAP_DIR;

  private static final java.lang.String LOG_DIR;

  private static final java.lang.String DB_FORMAT_CONV;

  private static final java.nio.ByteBuffer fill;

  public org.apache.zookeeper.server.persistence.Util();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static java.lang.String makeURIString(java.lang.String, java.lang.String, java.lang.String);
    Code:
       0: new           #2                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #4                  // String file:snapDir=
       9: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_0
      13: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: ldc           #6                  // String ;
      18: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: ldc           #7                  // String logDir
      23: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: ldc           #8                  // String =
      28: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      31: aload_1
      32: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      38: astore_3
      39: aload_2
      40: ifnull        67
      43: new           #2                  // class java/lang/StringBuilder
      46: dup
      47: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
      50: aload_3
      51: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      54: ldc           #10                 // String ;dbFormatConversion=
      56: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      59: aload_2
      60: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      66: astore_3
      67: aload_3
      68: bipush        92
      70: bipush        47
      72: invokevirtual #11                 // Method java/lang/String.replace:(CC)Ljava/lang/String;
      75: areturn

  public static java.net.URI makeFileLoggerURL(java.io.File, java.io.File);
    Code:
       0: aload_0
       1: invokevirtual #12                 // Method java/io/File.getPath:()Ljava/lang/String;
       4: aload_1
       5: invokevirtual #12                 // Method java/io/File.getPath:()Ljava/lang/String;
       8: aconst_null
       9: invokestatic  #13                 // Method makeURIString:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      12: invokestatic  #14                 // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
      15: areturn

  public static java.net.URI makeFileLoggerURL(java.io.File, java.io.File, java.lang.String);
    Code:
       0: aload_0
       1: invokevirtual #12                 // Method java/io/File.getPath:()Ljava/lang/String;
       4: aload_1
       5: invokevirtual #12                 // Method java/io/File.getPath:()Ljava/lang/String;
       8: aload_2
       9: invokestatic  #13                 // Method makeURIString:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      12: invokestatic  #14                 // Method java/net/URI.create:(Ljava/lang/String;)Ljava/net/URI;
      15: areturn

  public static java.lang.String makeLogName(long);
    Code:
       0: new           #2                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #15                 // String log.
       9: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: lload_0
      13: invokestatic  #16                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      16: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      19: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      22: areturn

  public static java.lang.String makeSnapshotName(long);
    Code:
       0: new           #2                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #17                 // String snapshot.
       9: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: lload_0
      13: invokestatic  #16                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      16: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      19: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      22: areturn

  public static java.io.File getSnapDir(java.util.Properties);
    Code:
       0: new           #18                 // class java/io/File
       3: dup
       4: aload_0
       5: ldc           #19                 // String snapDir
       7: invokevirtual #20                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      10: invokespecial #21                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      13: areturn

  public static java.io.File getLogDir(java.util.Properties);
    Code:
       0: new           #18                 // class java/io/File
       3: dup
       4: aload_0
       5: ldc           #7                  // String logDir
       7: invokevirtual #20                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      10: invokespecial #21                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      13: areturn

  public static java.lang.String getFormatConversionPolicy(java.util.Properties);
    Code:
       0: aload_0
       1: ldc           #22                 // String dbFormatConversion
       3: invokevirtual #20                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
       6: areturn

  public static long getZxidFromName(java.lang.String, java.lang.String);
    Code:
       0: ldc2_w        #23                 // long -1l
       3: lstore_2
       4: aload_0
       5: ldc           #25                 // String \\.
       7: invokevirtual #26                 // Method java/lang/String.split:(Ljava/lang/String;)[Ljava/lang/String;
      10: astore        4
      12: aload         4
      14: arraylength
      15: iconst_2
      16: if_icmpne     45
      19: aload         4
      21: iconst_0
      22: aaload
      23: aload_1
      24: invokevirtual #27                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      27: ifeq          45
      30: aload         4
      32: iconst_1
      33: aaload
      34: bipush        16
      36: invokestatic  #28                 // Method java/lang/Long.parseLong:(Ljava/lang/String;I)J
      39: lstore_2
      40: goto          45
      43: astore        5
      45: lload_2
      46: lreturn
    Exception table:
       from    to  target type
          30    40    43   Class java/lang/NumberFormatException

  public static boolean isValidSnapshot(java.io.File) throws java.io.IOException;
    Code:
       0: aload_0
       1: ifnull        20
       4: aload_0
       5: invokevirtual #30                 // Method java/io/File.getName:()Ljava/lang/String;
       8: ldc           #31                 // String snapshot
      10: invokestatic  #32                 // Method getZxidFromName:(Ljava/lang/String;Ljava/lang/String;)J
      13: ldc2_w        #23                 // long -1l
      16: lcmp
      17: ifne          22
      20: iconst_0
      21: ireturn
      22: new           #33                 // class java/io/RandomAccessFile
      25: dup
      26: aload_0
      27: ldc           #34                 // String r
      29: invokespecial #35                 // Method java/io/RandomAccessFile."<init>":(Ljava/io/File;Ljava/lang/String;)V
      32: astore_1
      33: aload_1
      34: invokevirtual #36                 // Method java/io/RandomAccessFile.length:()J
      37: ldc2_w        #37                 // long 10l
      40: lcmp
      41: ifge          51
      44: iconst_0
      45: istore_2
      46: jsr           256
      49: iload_2
      50: ireturn
      51: aload_1
      52: aload_1
      53: invokevirtual #36                 // Method java/io/RandomAccessFile.length:()J
      56: ldc2_w        #39                 // long 5l
      59: lsub
      60: invokevirtual #41                 // Method java/io/RandomAccessFile.seek:(J)V
      63: iconst_5
      64: newarray       byte
      66: astore_2
      67: iconst_0
      68: istore_3
      69: iload_3
      70: iconst_5
      71: if_icmpge     98
      74: aload_1
      75: aload_2
      76: iload_3
      77: aload_2
      78: arraylength
      79: iload_3
      80: isub
      81: invokevirtual #42                 // Method java/io/RandomAccessFile.read:([BII)I
      84: dup
      85: istore        4
      87: iflt          98
      90: iload_3
      91: iload         4
      93: iadd
      94: istore_3
      95: goto          69
      98: iload_3
      99: aload_2
     100: arraylength
     101: if_icmpeq     149
     104: getstatic     #43                 // Field LOG:Lorg/slf4j/Logger;
     107: new           #2                  // class java/lang/StringBuilder
     110: dup
     111: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
     114: ldc           #44                 // String Invalid snapshot
     116: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     119: aload_0
     120: invokevirtual #45                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     123: ldc           #46                 // String  too short, len =
     125: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: iload_3
     129: invokevirtual #47                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     132: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     135: invokeinterface #48,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     140: iconst_0
     141: istore        5
     143: jsr           256
     146: iload         5
     148: ireturn
     149: aload_2
     150: invokestatic  #49                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     153: astore        5
     155: aload         5
     157: invokevirtual #50                 // Method java/nio/ByteBuffer.getInt:()I
     160: istore        6
     162: aload         5
     164: invokevirtual #51                 // Method java/nio/ByteBuffer.get:()B
     167: istore        7
     169: iload         6
     171: iconst_1
     172: if_icmpne     182
     175: iload         7
     177: bipush        47
     179: if_icmpeq     242
     182: getstatic     #43                 // Field LOG:Lorg/slf4j/Logger;
     185: new           #2                  // class java/lang/StringBuilder
     188: dup
     189: invokespecial #3                  // Method java/lang/StringBuilder."<init>":()V
     192: ldc           #44                 // String Invalid snapshot
     194: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     197: aload_0
     198: invokevirtual #45                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     201: ldc           #52                 // String  len =
     203: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     206: iload         6
     208: invokevirtual #47                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     211: ldc           #53                 // String  byte =
     213: invokevirtual #5                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     216: iload         7
     218: sipush        255
     221: iand
     222: invokevirtual #47                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     225: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     228: invokeinterface #48,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     233: iconst_0
     234: istore        8
     236: jsr           256
     239: iload         8
     241: ireturn
     242: jsr           256
     245: goto          264
     248: astore        9
     250: jsr           256
     253: aload         9
     255: athrow
     256: astore        10
     258: aload_1
     259: invokevirtual #54                 // Method java/io/RandomAccessFile.close:()V
     262: ret           10
     264: iconst_1
     265: ireturn
    Exception table:
       from    to  target type
          33    49   248   any
          51   146   248   any
         149   239   248   any
         242   245   248   any
         248   253   248   any

  public static long padLogFile(java.io.FileOutputStream, long, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #55                 // Method java/io/FileOutputStream.getChannel:()Ljava/nio/channels/FileChannel;
       4: invokevirtual #56                 // Method java/nio/channels/FileChannel.position:()J
       7: lstore        5
       9: lload         5
      11: ldc2_w        #57                 // long 4096l
      14: ladd
      15: lload_1
      16: lcmp
      17: iflt          52
      20: lload_1
      21: lload_3
      22: ladd
      23: lstore_1
      24: getstatic     #59                 // Field fill:Ljava/nio/ByteBuffer;
      27: iconst_0
      28: invokevirtual #60                 // Method java/nio/ByteBuffer.position:(I)Ljava/nio/Buffer;
      31: pop
      32: aload_0
      33: invokevirtual #55                 // Method java/io/FileOutputStream.getChannel:()Ljava/nio/channels/FileChannel;
      36: getstatic     #59                 // Field fill:Ljava/nio/ByteBuffer;
      39: lload_1
      40: getstatic     #59                 // Field fill:Ljava/nio/ByteBuffer;
      43: invokevirtual #61                 // Method java/nio/ByteBuffer.remaining:()I
      46: i2l
      47: lsub
      48: invokevirtual #62                 // Method java/nio/channels/FileChannel.write:(Ljava/nio/ByteBuffer;J)I
      51: pop
      52: lload_1
      53: lreturn

  public static byte[] readTxnBytes(org.apache.jute.InputArchive) throws java.io.IOException;
    Code:
       0: aload_0
       1: ldc           #63                 // String txtEntry
       3: invokeinterface #64,  2           // InterfaceMethod org/apache/jute/InputArchive.readBuffer:(Ljava/lang/String;)[B
       8: astore_1
       9: aload_1
      10: arraylength
      11: ifne          16
      14: aload_1
      15: areturn
      16: aload_0
      17: ldc           #65                 // String EOF
      19: invokeinterface #66,  2           // InterfaceMethod org/apache/jute/InputArchive.readByte:(Ljava/lang/String;)B
      24: bipush        66
      26: if_icmpeq     41
      29: getstatic     #43                 // Field LOG:Lorg/slf4j/Logger;
      32: ldc           #67                 // String Last transaction was partial.
      34: invokeinterface #68,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      39: aconst_null
      40: areturn
      41: aload_1
      42: areturn
      43: astore_1
      44: aconst_null
      45: areturn
    Exception table:
       from    to  target type
           0    15    43   Class java/io/EOFException
          16    40    43   Class java/io/EOFException
          41    42    43   Class java/io/EOFException

  public static byte[] marshallTxnEntry(org.apache.zookeeper.txn.TxnHeader, org.apache.jute.Record) throws java.io.IOException;
    Code:
       0: new           #70                 // class java/io/ByteArrayOutputStream
       3: dup
       4: invokespecial #71                 // Method java/io/ByteArrayOutputStream."<init>":()V
       7: astore_2
       8: aload_2
       9: invokestatic  #72                 // Method org/apache/jute/BinaryOutputArchive.getArchive:(Ljava/io/OutputStream;)Lorg/apache/jute/BinaryOutputArchive;
      12: astore_3
      13: aload_0
      14: aload_3
      15: ldc           #73                 // String hdr
      17: invokevirtual #74                 // Method org/apache/zookeeper/txn/TxnHeader.serialize:(Lorg/apache/jute/OutputArchive;Ljava/lang/String;)V
      20: aload_1
      21: ifnull        33
      24: aload_1
      25: aload_3
      26: ldc           #75                 // String txn
      28: invokeinterface #76,  3           // InterfaceMethod org/apache/jute/Record.serialize:(Lorg/apache/jute/OutputArchive;Ljava/lang/String;)V
      33: aload_2
      34: invokevirtual #77                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      37: areturn

  public static void writeTxnBytes(org.apache.jute.OutputArchive, byte[]) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: ldc           #78                 // String txnEntry
       4: invokeinterface #79,  3           // InterfaceMethod org/apache/jute/OutputArchive.writeBuffer:([BLjava/lang/String;)V
       9: aload_0
      10: bipush        66
      12: ldc           #80                 // String EOR
      14: invokeinterface #81,  3           // InterfaceMethod org/apache/jute/OutputArchive.writeByte:(BLjava/lang/String;)V
      19: return

  public static java.util.List<java.io.File> sortDataDir(java.io.File[], java.lang.String, boolean);
    Code:
       0: aload_0
       1: ifnonnull     13
       4: new           #82                 // class java/util/ArrayList
       7: dup
       8: iconst_0
       9: invokespecial #83                 // Method java/util/ArrayList."<init>":(I)V
      12: areturn
      13: aload_0
      14: invokestatic  #84                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      17: astore_3
      18: aload_3
      19: new           #85                 // class org/apache/zookeeper/server/persistence/Util$DataDirFileComparator
      22: dup
      23: aload_1
      24: iload_2
      25: invokespecial #86                 // Method org/apache/zookeeper/server/persistence/Util$DataDirFileComparator."<init>":(Ljava/lang/String;Z)V
      28: invokestatic  #87                 // Method java/util/Collections.sort:(Ljava/util/List;Ljava/util/Comparator;)V
      31: aload_3
      32: areturn

  static {};
    Code:
       0: ldc_w         #88                 // class org/apache/zookeeper/server/persistence/Util
       3: invokestatic  #89                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #43                 // Field LOG:Lorg/slf4j/Logger;
       9: iconst_1
      10: invokestatic  #90                 // Method java/nio/ByteBuffer.allocateDirect:(I)Ljava/nio/ByteBuffer;
      13: putstatic     #59                 // Field fill:Ljava/nio/ByteBuffer;
      16: return
}

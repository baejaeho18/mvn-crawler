Compiled from "NIOServerCnxnFactory.java"
public class org.apache.zookeeper.server.NIOServerCnxnFactory extends org.apache.zookeeper.server.ServerCnxnFactory implements java.lang.Runnable {
  private static final org.slf4j.Logger LOG;

  java.nio.channels.ServerSocketChannel ss;

  final java.nio.channels.Selector selector;

  final java.nio.ByteBuffer directBuffer;

  final java.util.HashMap<java.net.InetAddress, java.util.Set<org.apache.zookeeper.server.NIOServerCnxn>> ipMap;

  int maxClientCnxns;

  java.lang.Thread thread;

  public org.apache.zookeeper.server.NIOServerCnxnFactory() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #2                  // Method org/apache/zookeeper/server/ServerCnxnFactory."<init>":()V
       4: aload_0
       5: invokestatic  #3                  // Method java/nio/channels/Selector.open:()Ljava/nio/channels/Selector;
       8: putfield      #4                  // Field selector:Ljava/nio/channels/Selector;
      11: aload_0
      12: ldc           #5                  // int 65536
      14: invokestatic  #6                  // Method java/nio/ByteBuffer.allocateDirect:(I)Ljava/nio/ByteBuffer;
      17: putfield      #7                  // Field directBuffer:Ljava/nio/ByteBuffer;
      20: aload_0
      21: new           #8                  // class java/util/HashMap
      24: dup
      25: invokespecial #9                  // Method java/util/HashMap."<init>":()V
      28: putfield      #10                 // Field ipMap:Ljava/util/HashMap;
      31: aload_0
      32: bipush        60
      34: putfield      #11                 // Field maxClientCnxns:I
      37: return

  public void configure(java.net.InetSocketAddress, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #12                 // Method configureSaslLogin:()V
       4: aload_0
       5: new           #13                 // class java/lang/Thread
       8: dup
       9: aload_0
      10: new           #14                 // class java/lang/StringBuilder
      13: dup
      14: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      17: ldc           #16                 // String NIOServerCxn.Factory:
      19: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: aload_1
      23: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      26: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      29: invokespecial #20                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;Ljava/lang/String;)V
      32: putfield      #21                 // Field thread:Ljava/lang/Thread;
      35: aload_0
      36: getfield      #21                 // Field thread:Ljava/lang/Thread;
      39: iconst_1
      40: invokevirtual #22                 // Method java/lang/Thread.setDaemon:(Z)V
      43: aload_0
      44: iload_2
      45: putfield      #11                 // Field maxClientCnxns:I
      48: aload_0
      49: invokestatic  #23                 // Method java/nio/channels/ServerSocketChannel.open:()Ljava/nio/channels/ServerSocketChannel;
      52: putfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
      55: aload_0
      56: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
      59: invokevirtual #25                 // Method java/nio/channels/ServerSocketChannel.socket:()Ljava/net/ServerSocket;
      62: iconst_1
      63: invokevirtual #26                 // Method java/net/ServerSocket.setReuseAddress:(Z)V
      66: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      69: new           #14                 // class java/lang/StringBuilder
      72: dup
      73: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      76: ldc           #27                 // String binding to port
      78: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: aload_1
      82: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      85: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      88: invokeinterface #28,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      93: aload_0
      94: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
      97: invokevirtual #25                 // Method java/nio/channels/ServerSocketChannel.socket:()Ljava/net/ServerSocket;
     100: aload_1
     101: invokevirtual #29                 // Method java/net/ServerSocket.bind:(Ljava/net/SocketAddress;)V
     104: aload_0
     105: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
     108: iconst_0
     109: invokevirtual #30                 // Method java/nio/channels/ServerSocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
     112: pop
     113: aload_0
     114: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
     117: aload_0
     118: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
     121: bipush        16
     123: invokevirtual #31                 // Method java/nio/channels/ServerSocketChannel.register:(Ljava/nio/channels/Selector;I)Ljava/nio/channels/SelectionKey;
     126: pop
     127: return

  public int getMaxClientCnxnsPerHost();
    Code:
       0: aload_0
       1: getfield      #11                 // Field maxClientCnxns:I
       4: ireturn

  public void setMaxClientCnxnsPerHost(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #11                 // Field maxClientCnxns:I
       5: return

  public void start();
    Code:
       0: aload_0
       1: getfield      #21                 // Field thread:Ljava/lang/Thread;
       4: invokevirtual #32                 // Method java/lang/Thread.getState:()Ljava/lang/Thread$State;
       7: getstatic     #33                 // Field java/lang/Thread$State.NEW:Ljava/lang/Thread$State;
      10: if_acmpne     20
      13: aload_0
      14: getfield      #21                 // Field thread:Ljava/lang/Thread;
      17: invokevirtual #34                 // Method java/lang/Thread.start:()V
      20: return

  public void startup(org.apache.zookeeper.server.ZooKeeperServer) throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: invokevirtual #35                 // Method start:()V
       4: aload_1
       5: invokevirtual #36                 // Method org/apache/zookeeper/server/ZooKeeperServer.startdata:()V
       8: aload_1
       9: invokevirtual #37                 // Method org/apache/zookeeper/server/ZooKeeperServer.startup:()V
      12: aload_0
      13: aload_1
      14: invokevirtual #38                 // Method setZooKeeperServer:(Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      17: return

  public java.net.InetSocketAddress getLocalAddress();
    Code:
       0: aload_0
       1: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
       4: invokevirtual #25                 // Method java/nio/channels/ServerSocketChannel.socket:()Ljava/net/ServerSocket;
       7: invokevirtual #39                 // Method java/net/ServerSocket.getLocalSocketAddress:()Ljava/net/SocketAddress;
      10: checkcast     #40                 // class java/net/InetSocketAddress
      13: areturn

  public int getLocalPort();
    Code:
       0: aload_0
       1: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
       4: invokevirtual #25                 // Method java/nio/channels/ServerSocketChannel.socket:()Ljava/net/ServerSocket;
       7: invokevirtual #41                 // Method java/net/ServerSocket.getLocalPort:()I
      10: ireturn

  private void addCnxn(org.apache.zookeeper.server.NIOServerCnxn);
    Code:
       0: aload_0
       1: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
      11: aload_1
      12: invokevirtual #43                 // Method java/util/HashSet.add:(Ljava/lang/Object;)Z
      15: pop
      16: aload_0
      17: getfield      #10                 // Field ipMap:Ljava/util/HashMap;
      20: dup
      21: astore_3
      22: monitorenter
      23: aload_1
      24: getfield      #44                 // Field org/apache/zookeeper/server/NIOServerCnxn.sock:Ljava/nio/channels/SocketChannel;
      27: invokevirtual #45                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      30: invokevirtual #46                 // Method java/net/Socket.getInetAddress:()Ljava/net/InetAddress;
      33: astore        4
      35: aload_0
      36: getfield      #10                 // Field ipMap:Ljava/util/HashMap;
      39: aload         4
      41: invokevirtual #47                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      44: checkcast     #48                 // class java/util/Set
      47: astore        5
      49: aload         5
      51: ifnonnull     88
      54: new           #49                 // class java/util/HashSet
      57: dup
      58: iconst_2
      59: invokespecial #50                 // Method java/util/HashSet."<init>":(I)V
      62: astore        5
      64: aload         5
      66: aload_1
      67: invokeinterface #51,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      72: pop
      73: aload_0
      74: getfield      #10                 // Field ipMap:Ljava/util/HashMap;
      77: aload         4
      79: aload         5
      81: invokevirtual #52                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      84: pop
      85: goto          97
      88: aload         5
      90: aload_1
      91: invokeinterface #51,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      96: pop
      97: aload_3
      98: monitorexit
      99: goto          109
     102: astore        6
     104: aload_3
     105: monitorexit
     106: aload         6
     108: athrow
     109: aload_2
     110: monitorexit
     111: goto          121
     114: astore        7
     116: aload_2
     117: monitorexit
     118: aload         7
     120: athrow
     121: return
    Exception table:
       from    to  target type
          23    99   102   any
         102   106   102   any
           7   111   114   any
         114   118   114   any

  protected org.apache.zookeeper.server.NIOServerCnxn createConnection(java.nio.channels.SocketChannel, java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: new           #53                 // class org/apache/zookeeper/server/NIOServerCnxn
       3: dup
       4: aload_0
       5: getfield      #54                 // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
       8: aload_1
       9: aload_2
      10: aload_0
      11: invokespecial #55                 // Method org/apache/zookeeper/server/NIOServerCnxn."<init>":(Lorg/apache/zookeeper/server/ZooKeeperServer;Ljava/nio/channels/SocketChannel;Ljava/nio/channels/SelectionKey;Lorg/apache/zookeeper/server/NIOServerCnxnFactory;)V
      14: areturn

  private int getClientCnxnCount(java.net.InetAddress);
    Code:
       0: aload_0
       1: getfield      #10                 // Field ipMap:Ljava/util/HashMap;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #10                 // Field ipMap:Ljava/util/HashMap;
      11: aload_1
      12: invokevirtual #47                 // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #48                 // class java/util/Set
      18: astore_3
      19: aload_3
      20: ifnonnull     27
      23: iconst_0
      24: aload_2
      25: monitorexit
      26: ireturn
      27: aload_3
      28: invokeinterface #56,  1           // InterfaceMethod java/util/Set.size:()I
      33: aload_2
      34: monitorexit
      35: ireturn
      36: astore        4
      38: aload_2
      39: monitorexit
      40: aload         4
      42: athrow
    Exception table:
       from    to  target type
           7    26    36   any
          27    35    36   any
          36    40    36   any

  public void run();
    Code:
       0: aload_0
       1: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
       4: invokevirtual #25                 // Method java/nio/channels/ServerSocketChannel.socket:()Ljava/net/ServerSocket;
       7: invokevirtual #57                 // Method java/net/ServerSocket.isClosed:()Z
      10: ifne          384
      13: aload_0
      14: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
      17: ldc2_w        #58                 // long 1000l
      20: invokevirtual #60                 // Method java/nio/channels/Selector.select:(J)I
      23: pop
      24: aload_0
      25: dup
      26: astore_2
      27: monitorenter
      28: aload_0
      29: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
      32: invokevirtual #61                 // Method java/nio/channels/Selector.selectedKeys:()Ljava/util/Set;
      35: astore_1
      36: aload_2
      37: monitorexit
      38: goto          46
      41: astore_3
      42: aload_2
      43: monitorexit
      44: aload_3
      45: athrow
      46: new           #62                 // class java/util/ArrayList
      49: dup
      50: aload_1
      51: invokespecial #63                 // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      54: astore_2
      55: aload_2
      56: invokestatic  #64                 // Method java/util/Collections.shuffle:(Ljava/util/List;)V
      59: aload_2
      60: invokevirtual #65                 // Method java/util/ArrayList.iterator:()Ljava/util/Iterator;
      63: astore_3
      64: aload_3
      65: invokeinterface #66,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      70: ifeq          345
      73: aload_3
      74: invokeinterface #67,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      79: checkcast     #68                 // class java/nio/channels/SelectionKey
      82: astore        4
      84: aload         4
      86: invokevirtual #69                 // Method java/nio/channels/SelectionKey.readyOps:()I
      89: bipush        16
      91: iand
      92: ifeq          270
      95: aload         4
      97: invokevirtual #70                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     100: checkcast     #71                 // class java/nio/channels/ServerSocketChannel
     103: invokevirtual #72                 // Method java/nio/channels/ServerSocketChannel.accept:()Ljava/nio/channels/SocketChannel;
     106: astore        5
     108: aload         5
     110: invokevirtual #45                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     113: invokevirtual #46                 // Method java/net/Socket.getInetAddress:()Ljava/net/InetAddress;
     116: astore        6
     118: aload_0
     119: aload         6
     121: invokespecial #73                 // Method getClientCnxnCount:(Ljava/net/InetAddress;)I
     124: istore        7
     126: aload_0
     127: getfield      #11                 // Field maxClientCnxns:I
     130: ifle          190
     133: iload         7
     135: aload_0
     136: getfield      #11                 // Field maxClientCnxns:I
     139: if_icmplt     190
     142: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     145: new           #14                 // class java/lang/StringBuilder
     148: dup
     149: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     152: ldc           #74                 // String Too many connections from
     154: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     157: aload         6
     159: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     162: ldc           #75                 // String  - max is
     164: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     167: aload_0
     168: getfield      #11                 // Field maxClientCnxns:I
     171: invokevirtual #76                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     174: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     177: invokeinterface #77,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     182: aload         5
     184: invokevirtual #78                 // Method java/nio/channels/SocketChannel.close:()V
     187: goto          267
     190: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     193: new           #14                 // class java/lang/StringBuilder
     196: dup
     197: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     200: ldc           #79                 // String Accepted socket connection from
     202: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     205: aload         5
     207: invokevirtual #45                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     210: invokevirtual #80                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
     213: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     216: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     219: invokeinterface #28,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     224: aload         5
     226: iconst_0
     227: invokevirtual #81                 // Method java/nio/channels/SocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
     230: pop
     231: aload         5
     233: aload_0
     234: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
     237: iconst_1
     238: invokevirtual #82                 // Method java/nio/channels/SocketChannel.register:(Ljava/nio/channels/Selector;I)Ljava/nio/channels/SelectionKey;
     241: astore        8
     243: aload_0
     244: aload         5
     246: aload         8
     248: invokevirtual #83                 // Method createConnection:(Ljava/nio/channels/SocketChannel;Ljava/nio/channels/SelectionKey;)Lorg/apache/zookeeper/server/NIOServerCnxn;
     251: astore        9
     253: aload         8
     255: aload         9
     257: invokevirtual #84                 // Method java/nio/channels/SelectionKey.attach:(Ljava/lang/Object;)Ljava/lang/Object;
     260: pop
     261: aload_0
     262: aload         9
     264: invokespecial #85                 // Method addCnxn:(Lorg/apache/zookeeper/server/NIOServerCnxn;)V
     267: goto          342
     270: aload         4
     272: invokevirtual #69                 // Method java/nio/channels/SelectionKey.readyOps:()I
     275: iconst_5
     276: iand
     277: ifeq          300
     280: aload         4
     282: invokevirtual #86                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     285: checkcast     #53                 // class org/apache/zookeeper/server/NIOServerCnxn
     288: astore        5
     290: aload         5
     292: aload         4
     294: invokevirtual #87                 // Method org/apache/zookeeper/server/NIOServerCnxn.doIO:(Ljava/nio/channels/SelectionKey;)V
     297: goto          342
     300: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     303: invokeinterface #88,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     308: ifeq          342
     311: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     314: new           #14                 // class java/lang/StringBuilder
     317: dup
     318: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
     321: ldc           #89                 // String Unexpected ops in select
     323: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     326: aload         4
     328: invokevirtual #69                 // Method java/nio/channels/SelectionKey.readyOps:()I
     331: invokevirtual #76                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     334: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     337: invokeinterface #90,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     342: goto          64
     345: aload_1
     346: invokeinterface #91,  1           // InterfaceMethod java/util/Set.clear:()V
     351: goto          0
     354: astore_1
     355: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     358: ldc           #93                 // String Ignoring unexpected runtime exception
     360: aload_1
     361: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     366: goto          0
     369: astore_1
     370: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     373: ldc           #96                 // String Ignoring exception
     375: aload_1
     376: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     381: goto          0
     384: aload_0
     385: invokevirtual #97                 // Method closeAll:()V
     388: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     391: ldc           #98                 // String NIOServerCnxn factory exited run method
     393: invokeinterface #28,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     398: return
    Exception table:
       from    to  target type
          28    38    41   any
          41    44    41   any
          13   351   354   Class java/lang/RuntimeException
          13   351   369   Class java/lang/Exception

  public synchronized void closeAll();
    Code:
       0: aload_0
       1: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
       4: invokevirtual #99                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
       7: pop
       8: aload_0
       9: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
      12: dup
      13: astore_2
      14: monitorenter
      15: aload_0
      16: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
      19: invokevirtual #100                // Method java/util/HashSet.clone:()Ljava/lang/Object;
      22: checkcast     #49                 // class java/util/HashSet
      25: astore_1
      26: aload_2
      27: monitorexit
      28: goto          36
      31: astore_3
      32: aload_2
      33: monitorexit
      34: aload_3
      35: athrow
      36: aload_1
      37: invokevirtual #101                // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      40: astore_2
      41: aload_2
      42: invokeinterface #66,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      47: ifeq          107
      50: aload_2
      51: invokeinterface #67,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      56: checkcast     #53                 // class org/apache/zookeeper/server/NIOServerCnxn
      59: astore_3
      60: aload_3
      61: invokevirtual #102                // Method org/apache/zookeeper/server/NIOServerCnxn.close:()V
      64: goto          104
      67: astore        4
      69: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      72: new           #14                 // class java/lang/StringBuilder
      75: dup
      76: invokespecial #15                 // Method java/lang/StringBuilder."<init>":()V
      79: ldc           #103                // String Ignoring exception closing cnxn sessionid 0x
      81: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      84: aload_3
      85: getfield      #104                // Field org/apache/zookeeper/server/NIOServerCnxn.sessionId:J
      88: invokestatic  #105                // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      91: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      94: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      97: aload         4
      99: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     104: goto          41
     107: return
    Exception table:
       from    to  target type
          15    28    31   any
          31    34    31   any
          60    64    67   Class java/lang/Exception

  public void shutdown();
    Code:
       0: aload_0
       1: getfield      #24                 // Field ss:Ljava/nio/channels/ServerSocketChannel;
       4: invokevirtual #106                // Method java/nio/channels/ServerSocketChannel.close:()V
       7: aload_0
       8: invokevirtual #97                 // Method closeAll:()V
      11: aload_0
      12: getfield      #21                 // Field thread:Ljava/lang/Thread;
      15: invokevirtual #107                // Method java/lang/Thread.interrupt:()V
      18: aload_0
      19: getfield      #21                 // Field thread:Ljava/lang/Thread;
      22: invokevirtual #108                // Method java/lang/Thread.join:()V
      25: aload_0
      26: getfield      #109                // Field login:Lorg/apache/zookeeper/Login;
      29: ifnull        39
      32: aload_0
      33: getfield      #109                // Field login:Lorg/apache/zookeeper/Login;
      36: invokevirtual #110                // Method org/apache/zookeeper/Login.shutdown:()V
      39: goto          69
      42: astore_1
      43: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      46: ldc           #112                // String Ignoring interrupted exception during shutdown
      48: aload_1
      49: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      54: goto          69
      57: astore_1
      58: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      61: ldc           #113                // String Ignoring unexpected exception during shutdown
      63: aload_1
      64: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      69: aload_0
      70: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
      73: invokevirtual #114                // Method java/nio/channels/Selector.close:()V
      76: goto          91
      79: astore_1
      80: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      83: ldc           #116                // String Selector closing
      85: aload_1
      86: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      91: aload_0
      92: getfield      #54                 // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      95: ifnull        105
      98: aload_0
      99: getfield      #54                 // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
     102: invokevirtual #117                // Method org/apache/zookeeper/server/ZooKeeperServer.shutdown:()V
     105: return
    Exception table:
       from    to  target type
           0    39    42   Class java/lang/InterruptedException
           0    39    57   Class java/lang/Exception
          69    76    79   Class java/io/IOException

  public synchronized void closeSession(long);
    Code:
       0: aload_0
       1: getfield      #4                  // Field selector:Ljava/nio/channels/Selector;
       4: invokevirtual #99                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
       7: pop
       8: aload_0
       9: lload_1
      10: invokespecial #118                // Method closeSessionWithoutWakeup:(J)V
      13: return

  private void closeSessionWithoutWakeup(long);
    Code:
       0: aload_0
       1: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
       4: dup
       5: astore        4
       7: monitorenter
       8: aload_0
       9: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
      12: invokevirtual #100                // Method java/util/HashSet.clone:()Ljava/lang/Object;
      15: checkcast     #49                 // class java/util/HashSet
      18: astore_3
      19: aload         4
      21: monitorexit
      22: goto          33
      25: astore        5
      27: aload         4
      29: monitorexit
      30: aload         5
      32: athrow
      33: aload_3
      34: invokevirtual #101                // Method java/util/HashSet.iterator:()Ljava/util/Iterator;
      37: astore        4
      39: aload         4
      41: invokeinterface #66,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      46: ifeq          99
      49: aload         4
      51: invokeinterface #67,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      56: checkcast     #53                 // class org/apache/zookeeper/server/NIOServerCnxn
      59: astore        5
      61: aload         5
      63: invokevirtual #119                // Method org/apache/zookeeper/server/NIOServerCnxn.getSessionId:()J
      66: lload_1
      67: lcmp
      68: ifne          96
      71: aload         5
      73: invokevirtual #102                // Method org/apache/zookeeper/server/NIOServerCnxn.close:()V
      76: goto          99
      79: astore        6
      81: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      84: ldc           #120                // String exception during session close
      86: aload         6
      88: invokeinterface #94,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      93: goto          99
      96: goto          39
      99: return
    Exception table:
       from    to  target type
           8    22    25   any
          25    30    25   any
          71    76    79   Class java/lang/Exception

  public void join() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #21                 // Field thread:Ljava/lang/Thread;
       4: invokevirtual #108                // Method java/lang/Thread.join:()V
       7: return

  public java.lang.Iterable<org.apache.zookeeper.server.ServerCnxn> getConnections();
    Code:
       0: aload_0
       1: getfield      #42                 // Field cnxns:Ljava/util/HashSet;
       4: areturn

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static {};
    Code:
       0: ldc_w         #121                // class org/apache/zookeeper/server/NIOServerCnxnFactory
       3: invokestatic  #122                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       9: new           #123                // class org/apache/zookeeper/server/NIOServerCnxnFactory$1
      12: dup
      13: invokespecial #124                // Method org/apache/zookeeper/server/NIOServerCnxnFactory$1."<init>":()V
      16: invokestatic  #125                // Method java/lang/Thread.setDefaultUncaughtExceptionHandler:(Ljava/lang/Thread$UncaughtExceptionHandler;)V
      19: invokestatic  #3                  // Method java/nio/channels/Selector.open:()Ljava/nio/channels/Selector;
      22: invokevirtual #114                // Method java/nio/channels/Selector.close:()V
      25: goto          40
      28: astore_0
      29: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      32: ldc           #126                // String Selector failed to open
      34: aload_0
      35: invokeinterface #127,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      40: return
    Exception table:
       from    to  target type
          19    25    28   Class java/io/IOException
}

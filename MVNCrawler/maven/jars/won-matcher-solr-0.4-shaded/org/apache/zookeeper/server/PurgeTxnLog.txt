Compiled from "PurgeTxnLog.java"
public class org.apache.zookeeper.server.PurgeTxnLog {
  private static final org.slf4j.Logger LOG;

  public org.apache.zookeeper.server.PurgeTxnLog();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  static void printUsage();
    Code:
       0: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
       3: ldc           #3                  // String PurgeTxnLog dataLogDir [snapDir] -n count
       5: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       8: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      11: ldc           #5                  // String \tdataLogDir -- path to the txn log directory
      13: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      16: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      19: ldc           #6                  // String \tsnapDir -- path to the snapshot directory
      21: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      24: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
      27: ldc           #7                  // String \tcount -- the number of old snaps/logs you want to keep
      29: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      32: iconst_1
      33: invokestatic  #8                  // Method java/lang/System.exit:(I)V
      36: return

  public static void purge(java.io.File, java.io.File, int) throws java.io.IOException;
    Code:
       0: iload_2
       1: iconst_3
       2: if_icmpge     15
       5: new           #9                  // class java/lang/IllegalArgumentException
       8: dup
       9: ldc           #10                 // String count should be greater than 3
      11: invokespecial #11                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      14: athrow
      15: new           #12                 // class org/apache/zookeeper/server/persistence/FileTxnSnapLog
      18: dup
      19: aload_0
      20: aload_1
      21: invokespecial #13                 // Method org/apache/zookeeper/server/persistence/FileTxnSnapLog."<init>":(Ljava/io/File;Ljava/io/File;)V
      24: astore_3
      25: new           #14                 // class java/util/HashSet
      28: dup
      29: invokespecial #15                 // Method java/util/HashSet."<init>":()V
      32: astore        4
      34: aload_3
      35: iload_2
      36: invokevirtual #16                 // Method org/apache/zookeeper/server/persistence/FileTxnSnapLog.findNRecentSnapshots:(I)Ljava/util/List;
      39: astore        5
      41: aload         5
      43: invokeinterface #17,  1           // InterfaceMethod java/util/List.size:()I
      48: ifne          52
      51: return
      52: aload         5
      54: aload         5
      56: invokeinterface #17,  1           // InterfaceMethod java/util/List.size:()I
      61: iconst_1
      62: isub
      63: invokeinterface #18,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      68: checkcast     #19                 // class java/io/File
      71: astore        6
      73: aload         5
      75: invokeinterface #20,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      80: astore        7
      82: aload         7
      84: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      89: ifeq          117
      92: aload         7
      94: invokeinterface #22,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      99: checkcast     #19                 // class java/io/File
     102: astore        8
     104: aload         4
     106: aload         8
     108: invokeinterface #23,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     113: pop
     114: goto          82
     117: aload         6
     119: invokevirtual #24                 // Method java/io/File.getName:()Ljava/lang/String;
     122: ldc           #25                 // String snapshot
     124: invokestatic  #26                 // Method org/apache/zookeeper/server/persistence/Util.getZxidFromName:(Ljava/lang/String;Ljava/lang/String;)J
     127: lstore        7
     129: aload         4
     131: aload_3
     132: lload         7
     134: invokevirtual #27                 // Method org/apache/zookeeper/server/persistence/FileTxnSnapLog.getSnapshotLogs:(J)[Ljava/io/File;
     137: invokestatic  #28                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     140: invokeinterface #29,  2           // InterfaceMethod java/util/Set.addAll:(Ljava/util/Collection;)Z
     145: pop
     146: aload         4
     148: astore        9
     150: new           #30                 // class java/util/ArrayList
     153: dup
     154: aload_3
     155: invokevirtual #31                 // Method org/apache/zookeeper/server/persistence/FileTxnSnapLog.getDataDir:()Ljava/io/File;
     158: new           #32                 // class org/apache/zookeeper/server/PurgeTxnLog$1MyFileFilter
     161: dup
     162: ldc           #33                 // String log.
     164: aload         9
     166: invokespecial #34                 // Method org/apache/zookeeper/server/PurgeTxnLog$1MyFileFilter."<init>":(Ljava/lang/String;Ljava/util/Set;)V
     169: invokevirtual #35                 // Method java/io/File.listFiles:(Ljava/io/FileFilter;)[Ljava/io/File;
     172: invokestatic  #28                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     175: invokespecial #36                 // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
     178: astore        10
     180: aload         10
     182: aload_3
     183: invokevirtual #37                 // Method org/apache/zookeeper/server/persistence/FileTxnSnapLog.getSnapDir:()Ljava/io/File;
     186: new           #32                 // class org/apache/zookeeper/server/PurgeTxnLog$1MyFileFilter
     189: dup
     190: ldc           #38                 // String snapshot.
     192: aload         9
     194: invokespecial #34                 // Method org/apache/zookeeper/server/PurgeTxnLog$1MyFileFilter."<init>":(Ljava/lang/String;Ljava/util/Set;)V
     197: invokevirtual #35                 // Method java/io/File.listFiles:(Ljava/io/FileFilter;)[Ljava/io/File;
     200: invokestatic  #28                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     203: invokeinterface #39,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     208: pop
     209: aload         10
     211: invokeinterface #20,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     216: astore        11
     218: aload         11
     220: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     225: ifeq          331
     228: aload         11
     230: invokeinterface #22,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     235: checkcast     #19                 // class java/io/File
     238: astore        12
     240: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;
     243: new           #40                 // class java/lang/StringBuilder
     246: dup
     247: invokespecial #41                 // Method java/lang/StringBuilder."<init>":()V
     250: ldc           #42                 // String Removing file:
     252: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     255: invokestatic  #44                 // Method java/text/DateFormat.getDateTimeInstance:()Ljava/text/DateFormat;
     258: aload         12
     260: invokevirtual #45                 // Method java/io/File.lastModified:()J
     263: invokestatic  #46                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     266: invokevirtual #47                 // Method java/text/DateFormat.format:(Ljava/lang/Object;)Ljava/lang/String;
     269: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     272: ldc           #48                 // String \t
     274: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     277: aload         12
     279: invokevirtual #49                 // Method java/io/File.getPath:()Ljava/lang/String;
     282: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     285: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     288: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     291: aload         12
     293: invokevirtual #51                 // Method java/io/File.delete:()Z
     296: ifne          328
     299: getstatic     #52                 // Field java/lang/System.err:Ljava/io/PrintStream;
     302: new           #40                 // class java/lang/StringBuilder
     305: dup
     306: invokespecial #41                 // Method java/lang/StringBuilder."<init>":()V
     309: ldc           #53                 // String Failed to remove
     311: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     314: aload         12
     316: invokevirtual #49                 // Method java/io/File.getPath:()Ljava/lang/String;
     319: invokevirtual #43                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     322: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     325: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     328: goto          218
     331: return

  public static void main(java.lang.String[]) throws java.io.IOException;
    Code:
       0: aload_0
       1: arraylength
       2: iconst_3
       3: if_icmplt     12
       6: aload_0
       7: arraylength
       8: iconst_4
       9: if_icmple     15
      12: invokestatic  #54                 // Method printUsage:()V
      15: iconst_0
      16: istore_1
      17: new           #19                 // class java/io/File
      20: dup
      21: aload_0
      22: iconst_0
      23: aaload
      24: invokespecial #55                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      27: astore_2
      28: aload_2
      29: astore_3
      30: aload_0
      31: arraylength
      32: iconst_4
      33: if_icmpne     50
      36: iinc          1, 1
      39: new           #19                 // class java/io/File
      42: dup
      43: aload_0
      44: iload_1
      45: aaload
      46: invokespecial #55                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      49: astore_3
      50: iinc          1, 1
      53: iinc          1, 1
      56: aload_0
      57: iload_1
      58: aaload
      59: invokestatic  #56                 // Method java/lang/Integer.parseInt:(Ljava/lang/String;)I
      62: istore        4
      64: aload_2
      65: aload_3
      66: iload         4
      68: invokestatic  #57                 // Method purge:(Ljava/io/File;Ljava/io/File;I)V
      71: return

  static {};
    Code:
       0: ldc_w         #58                 // class org/apache/zookeeper/server/PurgeTxnLog
       3: invokestatic  #59                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #60                 // Field LOG:Lorg/slf4j/Logger;
       9: return
}

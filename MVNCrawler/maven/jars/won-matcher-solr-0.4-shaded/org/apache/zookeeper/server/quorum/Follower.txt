Compiled from "Follower.java"
public class org.apache.zookeeper.server.quorum.Follower extends org.apache.zookeeper.server.quorum.Learner {
  private long lastQueued;

  final org.apache.zookeeper.server.quorum.FollowerZooKeeperServer fzk;

  org.apache.zookeeper.server.quorum.Follower(org.apache.zookeeper.server.quorum.QuorumPeer, org.apache.zookeeper.server.quorum.FollowerZooKeeperServer);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/zookeeper/server/quorum/Learner."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      14: aload_0
      15: aload_2
      16: putfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      19: return

  public java.lang.String toString();
    Code:
       0: new           #5                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
       7: astore_1
       8: aload_1
       9: ldc           #7                  // String Follower
      11: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      14: aload_0
      15: getfield      #9                  // Field sock:Ljava/net/Socket;
      18: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      21: pop
      22: aload_1
      23: ldc           #11                 // String  lastQueuedZxid:
      25: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_0
      29: getfield      #12                 // Field lastQueued:J
      32: invokevirtual #13                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      35: pop
      36: aload_1
      37: ldc           #14                 // String  pendingRevalidationCount:
      39: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_0
      43: getfield      #15                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
      46: invokevirtual #16                 // Method java/util/concurrent/ConcurrentHashMap.size:()I
      49: invokevirtual #17                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      52: pop
      53: aload_1
      54: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      57: areturn

  void followLeader() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
       4: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
       7: putfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      10: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      13: new           #5                  // class java/lang/StringBuilder
      16: dup
      17: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
      20: ldc           #22                 // String FOLLOWING - LEADER ELECTION TOOK -
      22: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: aload_0
      26: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      29: getfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      32: aload_0
      33: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      36: getfield      #23                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      39: lsub
      40: invokevirtual #13                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      43: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      46: invokeinterface #24,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      51: aload_0
      52: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      55: lconst_0
      56: putfield      #23                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.start_fle:J
      59: aload_0
      60: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      63: lconst_0
      64: putfield      #20                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.end_fle:J
      67: aload_0
      68: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      71: new           #25                 // class org/apache/zookeeper/server/quorum/FollowerBean
      74: dup
      75: aload_0
      76: aload_0
      77: getfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
      80: invokespecial #26                 // Method org/apache/zookeeper/server/quorum/FollowerBean."<init>":(Lorg/apache/zookeeper/server/quorum/Follower;Lorg/apache/zookeeper/server/ZooKeeperServer;)V
      83: aload_0
      84: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
      87: getfield      #27                 // Field org/apache/zookeeper/server/quorum/QuorumPeer.jmxLocalPeerBean:Lorg/apache/zookeeper/server/quorum/LocalPeerBean;
      90: invokevirtual #28                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.registerJMX:(Lorg/apache/zookeeper/server/ZooKeeperServerBean;Lorg/apache/zookeeper/server/quorum/LocalPeerBean;)V
      93: aload_0
      94: invokevirtual #29                 // Method findLeader:()Ljava/net/InetSocketAddress;
      97: astore_1
      98: aload_0
      99: aload_1
     100: invokevirtual #30                 // Method connectToLeader:(Ljava/net/InetSocketAddress;)V
     103: aload_0
     104: bipush        11
     106: invokevirtual #31                 // Method registerWithLeader:(I)J
     109: lstore_2
     110: lload_2
     111: invokestatic  #32                 // Method org/apache/zookeeper/server/util/ZxidUtils.getEpochFromZxid:(J)J
     114: lstore        4
     116: lload         4
     118: aload_0
     119: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     122: invokevirtual #33                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     125: lcmp
     126: ifge          187
     129: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
     132: new           #5                  // class java/lang/StringBuilder
     135: dup
     136: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
     139: ldc           #34                 // String Proposed leader epoch
     141: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: lload_2
     145: invokestatic  #35                 // Method org/apache/zookeeper/server/util/ZxidUtils.zxidToString:(J)Ljava/lang/String;
     148: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     151: ldc           #36                 // String  is less than our accepted epoch
     153: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: aload_0
     157: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     160: invokevirtual #33                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.getAcceptedEpoch:()J
     163: invokestatic  #35                 // Method org/apache/zookeeper/server/util/ZxidUtils.zxidToString:(J)Ljava/lang/String;
     166: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     169: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     172: invokeinterface #37,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     177: new           #38                 // class java/io/IOException
     180: dup
     181: ldc           #39                 // String Error: Epoch of leader is lower
     183: invokespecial #40                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     186: athrow
     187: aload_0
     188: lload_2
     189: invokevirtual #41                 // Method syncWithLeader:(J)V
     192: new           #42                 // class org/apache/zookeeper/server/quorum/QuorumPacket
     195: dup
     196: invokespecial #43                 // Method org/apache/zookeeper/server/quorum/QuorumPacket."<init>":()V
     199: astore        6
     201: aload_0
     202: getfield      #2                  // Field self:Lorg/apache/zookeeper/server/quorum/QuorumPeer;
     205: invokevirtual #44                 // Method org/apache/zookeeper/server/quorum/QuorumPeer.isRunning:()Z
     208: ifeq          226
     211: aload_0
     212: aload         6
     214: invokevirtual #45                 // Method readPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     217: aload_0
     218: aload         6
     220: invokevirtual #46                 // Method processPacket:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     223: goto          201
     226: goto          263
     229: astore_2
     230: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
     233: ldc           #47                 // String Exception when following the leader
     235: aload_2
     236: invokeinterface #48,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     241: aload_0
     242: getfield      #9                  // Field sock:Ljava/net/Socket;
     245: invokevirtual #49                 // Method java/net/Socket.close:()V
     248: goto          256
     251: astore_3
     252: aload_3
     253: invokevirtual #50                 // Method java/io/IOException.printStackTrace:()V
     256: aload_0
     257: getfield      #15                 // Field pendingRevalidations:Ljava/util/concurrent/ConcurrentHashMap;
     260: invokevirtual #51                 // Method java/util/concurrent/ConcurrentHashMap.clear:()V
     263: jsr           277
     266: goto          289
     269: astore        7
     271: jsr           277
     274: aload         7
     276: athrow
     277: astore        8
     279: aload_0
     280: getfield      #3                  // Field zk:Lorg/apache/zookeeper/server/quorum/LearnerZooKeeperServer;
     283: aload_0
     284: invokevirtual #52                 // Method org/apache/zookeeper/server/quorum/LearnerZooKeeperServer.unregisterJMX:(Lorg/apache/zookeeper/server/quorum/Learner;)V
     287: ret           8
     289: return
    Exception table:
       from    to  target type
          98   226   229   Class java/io/IOException
         241   248   251   Class java/io/IOException
          93   266   269   any
         269   274   269   any

  protected void processPacket(org.apache.zookeeper.server.quorum.QuorumPacket) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #53                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getType:()I
       4: tableswitch   { // 2 to 12
                     2: 72
                     3: 215
                     4: 173
                     5: 64
                     6: 200
                     7: 208
                     8: 215
                     9: 215
                    10: 215
                    11: 215
                    12: 187
               default: 215
          }
      64: aload_0
      65: aload_1
      66: invokevirtual #54                 // Method ping:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
      69: goto          215
      72: new           #55                 // class org/apache/zookeeper/txn/TxnHeader
      75: dup
      76: invokespecial #56                 // Method org/apache/zookeeper/txn/TxnHeader."<init>":()V
      79: astore_2
      80: aload_1
      81: invokevirtual #57                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getData:()[B
      84: aload_2
      85: invokestatic  #58                 // Method org/apache/zookeeper/server/util/SerializeUtils.deserializeTxn:([BLorg/apache/zookeeper/txn/TxnHeader;)Lorg/apache/jute/Record;
      88: astore_3
      89: aload_2
      90: invokevirtual #59                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
      93: aload_0
      94: getfield      #12                 // Field lastQueued:J
      97: lconst_1
      98: ladd
      99: lcmp
     100: ifeq          153
     103: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
     106: new           #5                  // class java/lang/StringBuilder
     109: dup
     110: invokespecial #6                  // Method java/lang/StringBuilder."<init>":()V
     113: ldc           #60                 // String Got zxid 0x
     115: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     118: aload_2
     119: invokevirtual #59                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     122: invokestatic  #61                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     125: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: ldc           #62                 // String  expected 0x
     130: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: aload_0
     134: getfield      #12                 // Field lastQueued:J
     137: lconst_1
     138: ladd
     139: invokestatic  #61                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     142: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     145: invokevirtual #18                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     148: invokeinterface #63,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     153: aload_0
     154: aload_2
     155: invokevirtual #59                 // Method org/apache/zookeeper/txn/TxnHeader.getZxid:()J
     158: putfield      #12                 // Field lastQueued:J
     161: aload_0
     162: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     165: aload_2
     166: aload_3
     167: invokevirtual #64                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.logRequest:(Lorg/apache/zookeeper/txn/TxnHeader;Lorg/apache/jute/Record;)V
     170: goto          215
     173: aload_0
     174: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     177: aload_1
     178: invokevirtual #65                 // Method org/apache/zookeeper/server/quorum/QuorumPacket.getZxid:()J
     181: invokevirtual #66                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.commit:(J)V
     184: goto          215
     187: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
     190: ldc           #67                 // String Received an UPTODATE message after Follower started
     192: invokeinterface #37,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     197: goto          215
     200: aload_0
     201: aload_1
     202: invokevirtual #68                 // Method revalidate:(Lorg/apache/zookeeper/server/quorum/QuorumPacket;)V
     205: goto          215
     208: aload_0
     209: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
     212: invokevirtual #69                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.sync:()V
     215: return

  public long getZxid();
    Code:
       0: aload_0
       1: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #4                  // Field fzk:Lorg/apache/zookeeper/server/quorum/FollowerZooKeeperServer;
      11: invokevirtual #70                 // Method org/apache/zookeeper/server/quorum/FollowerZooKeeperServer.getZxid:()J
      14: aload_1
      15: monitorexit
      16: lreturn
      17: astore_2
      18: aload_1
      19: monitorexit
      20: aload_2
      21: athrow
      22: astore_1
      23: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
      26: ldc           #72                 // String error getting zxid
      28: aload_1
      29: invokeinterface #48,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      34: ldc2_w        #73                 // long -1l
      37: lreturn
    Exception table:
       from    to  target type
           7    16    17   any
          17    20    17   any
           0    16    22   Class java/lang/NullPointerException
          17    22    22   Class java/lang/NullPointerException

  protected long getLastQueued();
    Code:
       0: aload_0
       1: getfield      #12                 // Field lastQueued:J
       4: lreturn

  public void shutdown();
    Code:
       0: getstatic     #21                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #75                 // String shutdown called
       5: new           #76                 // class java/lang/Exception
       8: dup
       9: ldc           #77                 // String shutdown Follower
      11: invokespecial #78                 // Method java/lang/Exception."<init>":(Ljava/lang/String;)V
      14: invokeinterface #79,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Throwable;)V
      19: aload_0
      20: invokespecial #80                 // Method org/apache/zookeeper/server/quorum/Learner.shutdown:()V
      23: return
}

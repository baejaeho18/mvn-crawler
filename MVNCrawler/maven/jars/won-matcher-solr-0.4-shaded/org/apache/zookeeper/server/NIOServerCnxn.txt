Compiled from "NIOServerCnxn.java"
public class org.apache.zookeeper.server.NIOServerCnxn extends org.apache.zookeeper.server.ServerCnxn {
  static final org.slf4j.Logger LOG;

  org.apache.zookeeper.server.NIOServerCnxnFactory factory;

  final java.nio.channels.SocketChannel sock;

  private final java.nio.channels.SelectionKey sk;

  boolean initialized;

  java.nio.ByteBuffer lenBuffer;

  java.nio.ByteBuffer incomingBuffer;

  java.util.concurrent.LinkedBlockingQueue<java.nio.ByteBuffer> outgoingBuffers;

  int sessionTimeout;

  private final org.apache.zookeeper.server.ZooKeeperServer zkServer;

  int outstandingRequests;

  long sessionId;

  static long nextSessionId;

  int outstandingLimit;

  private static final java.lang.String ZK_NOT_SERVING;

  private static final byte[] fourBytes;

  public org.apache.zookeeper.server.NIOServerCnxn(org.apache.zookeeper.server.ZooKeeperServer, java.nio.channels.SocketChannel, java.nio.channels.SelectionKey, org.apache.zookeeper.server.NIOServerCnxnFactory) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #3                  // Method org/apache/zookeeper/server/ServerCnxn."<init>":()V
       4: aload_0
       5: iconst_4
       6: invokestatic  #4                  // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
       9: putfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
      12: aload_0
      13: aload_0
      14: getfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
      17: putfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      20: aload_0
      21: new           #7                  // class java/util/concurrent/LinkedBlockingQueue
      24: dup
      25: invokespecial #8                  // Method java/util/concurrent/LinkedBlockingQueue."<init>":()V
      28: putfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
      31: aload_0
      32: iconst_1
      33: putfield      #10                 // Field outstandingLimit:I
      36: aload_0
      37: aload_1
      38: putfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      41: aload_0
      42: aload_2
      43: putfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      46: aload_0
      47: aload_3
      48: putfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      51: aload_0
      52: aload         4
      54: putfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      57: aload_0
      58: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      61: getfield      #14                 // Field org/apache/zookeeper/server/NIOServerCnxnFactory.login:Lorg/apache/zookeeper/Login;
      64: ifnull        83
      67: aload_0
      68: new           #15                 // class org/apache/zookeeper/server/ZooKeeperSaslServer
      71: dup
      72: aload         4
      74: getfield      #14                 // Field org/apache/zookeeper/server/NIOServerCnxnFactory.login:Lorg/apache/zookeeper/Login;
      77: invokespecial #16                 // Method org/apache/zookeeper/server/ZooKeeperSaslServer."<init>":(Lorg/apache/zookeeper/Login;)V
      80: putfield      #17                 // Field zooKeeperSaslServer:Lorg/apache/zookeeper/server/ZooKeeperSaslServer;
      83: aload_1
      84: ifnull        95
      87: aload_0
      88: aload_1
      89: invokevirtual #18                 // Method org/apache/zookeeper/server/ZooKeeperServer.getGlobalOutstandingLimit:()I
      92: putfield      #10                 // Field outstandingLimit:I
      95: aload_2
      96: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      99: iconst_1
     100: invokevirtual #20                 // Method java/net/Socket.setTcpNoDelay:(Z)V
     103: aload_2
     104: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     107: iconst_0
     108: iconst_m1
     109: invokevirtual #21                 // Method java/net/Socket.setSoLinger:(ZI)V
     112: aload_2
     113: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     116: invokevirtual #22                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
     119: checkcast     #23                 // class java/net/InetSocketAddress
     122: invokevirtual #24                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
     125: astore        5
     127: aload_0
     128: getfield      #25                 // Field authInfo:Ljava/util/ArrayList;
     131: new           #26                 // class org/apache/zookeeper/data/Id
     134: dup
     135: ldc           #27                 // String ip
     137: aload         5
     139: invokevirtual #28                 // Method java/net/InetAddress.getHostAddress:()Ljava/lang/String;
     142: invokespecial #29                 // Method org/apache/zookeeper/data/Id."<init>":(Ljava/lang/String;Ljava/lang/String;)V
     145: invokevirtual #30                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
     148: pop
     149: aload_3
     150: iconst_1
     151: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     154: pop
     155: return

  public void sendCloseSession();
    Code:
       0: aload_0
       1: getstatic     #32                 // Field org/apache/zookeeper/server/ServerCnxnFactory.closeConn:Ljava/nio/ByteBuffer;
       4: invokevirtual #33                 // Method sendBuffer:(Ljava/nio/ByteBuffer;)V
       7: return

  void sendBufferSync(java.nio.ByteBuffer);
    Code:
       0: aload_0
       1: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
       4: iconst_1
       5: invokevirtual #34                 // Method java/nio/channels/SocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
       8: pop
       9: aload_1
      10: getstatic     #32                 // Field org/apache/zookeeper/server/ServerCnxnFactory.closeConn:Ljava/nio/ByteBuffer;
      13: if_acmpeq     39
      16: aload_0
      17: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      20: invokevirtual #35                 // Method java/nio/channels/SocketChannel.isOpen:()Z
      23: ifeq          35
      26: aload_0
      27: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      30: aload_1
      31: invokevirtual #36                 // Method java/nio/channels/SocketChannel.write:(Ljava/nio/ByteBuffer;)I
      34: pop
      35: aload_0
      36: invokevirtual #37                 // Method packetSent:()V
      39: goto          54
      42: astore_2
      43: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      46: ldc           #40                 // String Error sending data synchronously
      48: aload_2
      49: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      54: return
    Exception table:
       from    to  target type
           0    39    42   Class java/io/IOException

  public void sendBuffer(java.nio.ByteBuffer);
    Code:
       0: aload_1
       1: getstatic     #32                 // Field org/apache/zookeeper/server/ServerCnxnFactory.closeConn:Ljava/nio/ByteBuffer;
       4: if_acmpeq     44
       7: aload_0
       8: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      11: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
      14: iconst_4
      15: iand
      16: ifne          32
      19: aload_0
      20: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      23: aload_1
      24: invokevirtual #36                 // Method java/nio/channels/SocketChannel.write:(Ljava/nio/ByteBuffer;)I
      27: pop
      28: goto          32
      31: astore_2
      32: aload_1
      33: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
      36: ifne          44
      39: aload_0
      40: invokevirtual #37                 // Method packetSent:()V
      43: return
      44: aload_0
      45: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      48: dup
      49: astore_2
      50: monitorenter
      51: aload_0
      52: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      55: invokevirtual #44                 // Method java/nio/channels/SelectionKey.selector:()Ljava/nio/channels/Selector;
      58: invokevirtual #45                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
      61: pop
      62: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      65: invokeinterface #46,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      70: ifeq          118
      73: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      76: new           #47                 // class java/lang/StringBuilder
      79: dup
      80: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      83: ldc           #49                 // String Add a buffer to outgoingBuffers, sk
      85: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      88: aload_0
      89: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      92: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      95: ldc           #52                 // String  is valid:
      97: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     100: aload_0
     101: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     104: invokevirtual #53                 // Method java/nio/channels/SelectionKey.isValid:()Z
     107: invokevirtual #54                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     110: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     113: invokeinterface #56,  2           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     118: aload_0
     119: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     122: aload_1
     123: invokevirtual #57                 // Method java/util/concurrent/LinkedBlockingQueue.add:(Ljava/lang/Object;)Z
     126: pop
     127: aload_0
     128: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     131: invokevirtual #53                 // Method java/nio/channels/SelectionKey.isValid:()Z
     134: ifeq          154
     137: aload_0
     138: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     141: aload_0
     142: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     145: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
     148: iconst_4
     149: ior
     150: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     153: pop
     154: aload_2
     155: monitorexit
     156: goto          164
     159: astore_3
     160: aload_2
     161: monitorexit
     162: aload_3
     163: athrow
     164: goto          179
     167: astore_2
     168: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     171: ldc           #59                 // String Unexpected Exception:
     173: aload_2
     174: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     179: return
    Exception table:
       from    to  target type
          19    28    31   Class java/io/IOException
          51   156   159   any
         159   162   159   any
           0    43   167   Class java/lang/Exception
          44   164   167   Class java/lang/Exception

  private void readPayload() throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
       4: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
       7: ifeq          64
      10: aload_0
      11: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      14: aload_0
      15: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      18: invokevirtual #60                 // Method java/nio/channels/SocketChannel.read:(Ljava/nio/ByteBuffer;)I
      21: istore_1
      22: iload_1
      23: ifge          64
      26: new           #61                 // class org/apache/zookeeper/server/ServerCnxn$EndOfStreamException
      29: dup
      30: new           #47                 // class java/lang/StringBuilder
      33: dup
      34: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      37: ldc           #62                 // String Unable to read additional data from client sessionid 0x
      39: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_0
      43: getfield      #63                 // Field sessionId:J
      46: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      49: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: ldc           #65                 // String , likely client has closed socket
      54: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      57: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      60: invokespecial #66                 // Method org/apache/zookeeper/server/ServerCnxn$EndOfStreamException."<init>":(Ljava/lang/String;)V
      63: athrow
      64: aload_0
      65: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      68: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
      71: ifne          120
      74: aload_0
      75: invokevirtual #67                 // Method packetReceived:()V
      78: aload_0
      79: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      82: invokevirtual #68                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      85: pop
      86: aload_0
      87: getfield      #69                 // Field initialized:Z
      90: ifne          100
      93: aload_0
      94: invokespecial #70                 // Method readConnectRequest:()V
      97: goto          104
     100: aload_0
     101: invokespecial #71                 // Method readRequest:()V
     104: aload_0
     105: getfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
     108: invokevirtual #72                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     111: pop
     112: aload_0
     113: aload_0
     114: getfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
     117: putfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     120: return

  protected boolean isSocketOpen();
    Code:
       0: aload_0
       1: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
       4: invokevirtual #35                 // Method java/nio/channels/SocketChannel.isOpen:()Z
       7: ireturn

  void doIO(java.nio.channels.SelectionKey) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: invokevirtual #73                 // Method isSocketOpen:()Z
       4: ifne          41
       7: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      10: new           #47                 // class java/lang/StringBuilder
      13: dup
      14: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      17: ldc           #74                 // String trying to do i/o on a null socket for session:0x
      19: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: aload_0
      23: getfield      #63                 // Field sessionId:J
      26: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      29: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      32: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      35: invokeinterface #75,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
      40: return
      41: aload_1
      42: invokevirtual #76                 // Method java/nio/channels/SelectionKey.isReadable:()Z
      45: ifeq          162
      48: aload_0
      49: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      52: aload_0
      53: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      56: invokevirtual #60                 // Method java/nio/channels/SocketChannel.read:(Ljava/nio/ByteBuffer;)I
      59: istore_2
      60: iload_2
      61: ifge          102
      64: new           #61                 // class org/apache/zookeeper/server/ServerCnxn$EndOfStreamException
      67: dup
      68: new           #47                 // class java/lang/StringBuilder
      71: dup
      72: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      75: ldc           #62                 // String Unable to read additional data from client sessionid 0x
      77: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      80: aload_0
      81: getfield      #63                 // Field sessionId:J
      84: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      87: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      90: ldc           #65                 // String , likely client has closed socket
      92: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      95: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      98: invokespecial #66                 // Method org/apache/zookeeper/server/ServerCnxn$EndOfStreamException."<init>":(Ljava/lang/String;)V
     101: athrow
     102: aload_0
     103: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     106: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     109: ifne          162
     112: aload_0
     113: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     116: aload_0
     117: getfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
     120: if_acmpne     148
     123: aload_0
     124: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     127: invokevirtual #68                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     130: pop
     131: aload_0
     132: aload_1
     133: invokespecial #77                 // Method readLength:(Ljava/nio/channels/SelectionKey;)Z
     136: istore_3
     137: aload_0
     138: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     141: invokevirtual #72                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     144: pop
     145: goto          150
     148: iconst_1
     149: istore_3
     150: iload_3
     151: ifeq          161
     154: aload_0
     155: invokespecial #78                 // Method readPayload:()V
     158: goto          162
     161: return
     162: aload_1
     163: invokevirtual #79                 // Method java/nio/channels/SelectionKey.isWritable:()Z
     166: ifeq          487
     169: aload_0
     170: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     173: invokevirtual #80                 // Method java/util/concurrent/LinkedBlockingQueue.size:()I
     176: ifle          391
     179: aload_0
     180: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
     183: getfield      #81                 // Field org/apache/zookeeper/server/NIOServerCnxnFactory.directBuffer:Ljava/nio/ByteBuffer;
     186: astore_2
     187: aload_2
     188: invokevirtual #72                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     191: pop
     192: aload_0
     193: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     196: invokevirtual #82                 // Method java/util/concurrent/LinkedBlockingQueue.iterator:()Ljava/util/Iterator;
     199: astore_3
     200: aload_3
     201: invokeinterface #83,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     206: ifeq          284
     209: aload_3
     210: invokeinterface #84,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     215: checkcast     #85                 // class java/nio/ByteBuffer
     218: astore        4
     220: aload_2
     221: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     224: aload         4
     226: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     229: if_icmpge     249
     232: aload         4
     234: invokevirtual #86                 // Method java/nio/ByteBuffer.slice:()Ljava/nio/ByteBuffer;
     237: aload_2
     238: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     241: invokevirtual #87                 // Method java/nio/ByteBuffer.limit:(I)Ljava/nio/Buffer;
     244: checkcast     #85                 // class java/nio/ByteBuffer
     247: astore        4
     249: aload         4
     251: invokevirtual #88                 // Method java/nio/ByteBuffer.position:()I
     254: istore        5
     256: aload_2
     257: aload         4
     259: invokevirtual #89                 // Method java/nio/ByteBuffer.put:(Ljava/nio/ByteBuffer;)Ljava/nio/ByteBuffer;
     262: pop
     263: aload         4
     265: iload         5
     267: invokevirtual #90                 // Method java/nio/ByteBuffer.position:(I)Ljava/nio/Buffer;
     270: pop
     271: aload_2
     272: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     275: ifne          281
     278: goto          284
     281: goto          200
     284: aload_2
     285: invokevirtual #68                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     288: pop
     289: aload_0
     290: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
     293: aload_2
     294: invokevirtual #36                 // Method java/nio/channels/SocketChannel.write:(Ljava/nio/ByteBuffer;)I
     297: istore_3
     298: aload_0
     299: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     302: invokevirtual #80                 // Method java/util/concurrent/LinkedBlockingQueue.size:()I
     305: ifle          391
     308: aload_0
     309: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     312: invokevirtual #91                 // Method java/util/concurrent/LinkedBlockingQueue.peek:()Ljava/lang/Object;
     315: checkcast     #85                 // class java/nio/ByteBuffer
     318: astore        4
     320: aload         4
     322: getstatic     #32                 // Field org/apache/zookeeper/server/ServerCnxnFactory.closeConn:Ljava/nio/ByteBuffer;
     325: if_acmpne     338
     328: new           #92                 // class org/apache/zookeeper/server/ServerCnxn$CloseRequestException
     331: dup
     332: ldc           #93                 // String close requested
     334: invokespecial #94                 // Method org/apache/zookeeper/server/ServerCnxn$CloseRequestException."<init>":(Ljava/lang/String;)V
     337: athrow
     338: aload         4
     340: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     343: iload_3
     344: isub
     345: istore        5
     347: iload         5
     349: ifle          368
     352: aload         4
     354: aload         4
     356: invokevirtual #88                 // Method java/nio/ByteBuffer.position:()I
     359: iload_3
     360: iadd
     361: invokevirtual #90                 // Method java/nio/ByteBuffer.position:(I)Ljava/nio/Buffer;
     364: pop
     365: goto          391
     368: aload_0
     369: invokevirtual #37                 // Method packetSent:()V
     372: iload_3
     373: aload         4
     375: invokevirtual #43                 // Method java/nio/ByteBuffer.remaining:()I
     378: isub
     379: istore_3
     380: aload_0
     381: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     384: invokevirtual #95                 // Method java/util/concurrent/LinkedBlockingQueue.remove:()Ljava/lang/Object;
     387: pop
     388: goto          298
     391: aload_0
     392: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
     395: dup
     396: astore_2
     397: monitorenter
     398: aload_0
     399: getfield      #9                  // Field outgoingBuffers:Ljava/util/concurrent/LinkedBlockingQueue;
     402: invokevirtual #80                 // Method java/util/concurrent/LinkedBlockingQueue.size:()I
     405: ifne          458
     408: aload_0
     409: getfield      #69                 // Field initialized:Z
     412: ifne          437
     415: aload_0
     416: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     419: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
     422: iconst_1
     423: iand
     424: ifne          437
     427: new           #92                 // class org/apache/zookeeper/server/ServerCnxn$CloseRequestException
     430: dup
     431: ldc           #96                 // String responded to info probe
     433: invokespecial #94                 // Method org/apache/zookeeper/server/ServerCnxn$CloseRequestException."<init>":(Ljava/lang/String;)V
     436: athrow
     437: aload_0
     438: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     441: aload_0
     442: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     445: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
     448: bipush        -5
     450: iand
     451: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     454: pop
     455: goto          475
     458: aload_0
     459: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     462: aload_0
     463: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     466: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
     469: iconst_4
     470: ior
     471: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
     474: pop
     475: aload_2
     476: monitorexit
     477: goto          487
     480: astore        6
     482: aload_2
     483: monitorexit
     484: aload         6
     486: athrow
     487: goto          658
     490: astore_2
     491: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     494: new           #47                 // class java/lang/StringBuilder
     497: dup
     498: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
     501: ldc           #98                 // String Exception causing close of session 0x
     503: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     506: aload_0
     507: getfield      #63                 // Field sessionId:J
     510: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     513: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     516: ldc           #99                 // String  due to
     518: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     521: aload_2
     522: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     525: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     528: invokeinterface #75,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     533: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     536: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     541: ifeq          555
     544: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     547: ldc           #101                // String CancelledKeyException stack trace
     549: aload_2
     550: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     555: aload_0
     556: invokevirtual #103                // Method close:()V
     559: goto          658
     562: astore_2
     563: aload_0
     564: invokevirtual #103                // Method close:()V
     567: goto          658
     570: astore_2
     571: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     574: ldc           #104                // String caught end of stream exception
     576: aload_2
     577: invokeinterface #105,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     582: aload_0
     583: invokevirtual #103                // Method close:()V
     586: goto          658
     589: astore_2
     590: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     593: new           #47                 // class java/lang/StringBuilder
     596: dup
     597: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
     600: ldc           #98                 // String Exception causing close of session 0x
     602: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     605: aload_0
     606: getfield      #63                 // Field sessionId:J
     609: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     612: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     615: ldc           #99                 // String  due to
     617: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     620: aload_2
     621: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     624: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     627: invokeinterface #75,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     632: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     635: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     640: ifeq          654
     643: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     646: ldc           #106                // String IOException stack trace
     648: aload_2
     649: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     654: aload_0
     655: invokevirtual #103                // Method close:()V
     658: return
    Exception table:
       from    to  target type
         398   477   480   any
         480   484   480   any
           0    40   490   Class java/nio/channels/CancelledKeyException
          41   161   490   Class java/nio/channels/CancelledKeyException
         162   487   490   Class java/nio/channels/CancelledKeyException
           0    40   562   Class org/apache/zookeeper/server/ServerCnxn$CloseRequestException
          41   161   562   Class org/apache/zookeeper/server/ServerCnxn$CloseRequestException
         162   487   562   Class org/apache/zookeeper/server/ServerCnxn$CloseRequestException
           0    40   570   Class org/apache/zookeeper/server/ServerCnxn$EndOfStreamException
          41   161   570   Class org/apache/zookeeper/server/ServerCnxn$EndOfStreamException
         162   487   570   Class org/apache/zookeeper/server/ServerCnxn$EndOfStreamException
           0    40   589   Class java/io/IOException
          41   161   589   Class java/io/IOException
         162   487   589   Class java/io/IOException

  private void readRequest() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
       4: aload_0
       5: aload_0
       6: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
       9: invokevirtual #107                // Method org/apache/zookeeper/server/ZooKeeperServer.processPacket:(Lorg/apache/zookeeper/server/ServerCnxn;Ljava/nio/ByteBuffer;)V
      12: return

  protected void incrOutstandingRequests(org.apache.zookeeper.proto.RequestHeader);
    Code:
       0: aload_1
       1: invokevirtual #108                // Method org/apache/zookeeper/proto/RequestHeader.getXid:()I
       4: iflt          112
       7: aload_0
       8: dup
       9: astore_2
      10: monitorenter
      11: aload_0
      12: dup
      13: getfield      #109                // Field outstandingRequests:I
      16: iconst_1
      17: iadd
      18: putfield      #109                // Field outstandingRequests:I
      21: aload_2
      22: monitorexit
      23: goto          31
      26: astore_3
      27: aload_2
      28: monitorexit
      29: aload_3
      30: athrow
      31: aload_0
      32: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      35: dup
      36: astore_2
      37: monitorenter
      38: aload_0
      39: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      42: invokevirtual #110                // Method org/apache/zookeeper/server/ZooKeeperServer.getInProcess:()I
      45: aload_0
      46: getfield      #10                 // Field outstandingLimit:I
      49: if_icmple     100
      52: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      55: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      60: ifeq          96
      63: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      66: new           #47                 // class java/lang/StringBuilder
      69: dup
      70: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      73: ldc           #111                // String Throttling recv
      75: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      78: aload_0
      79: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      82: invokevirtual #110                // Method org/apache/zookeeper/server/ZooKeeperServer.getInProcess:()I
      85: invokevirtual #112                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      88: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      91: invokeinterface #113,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      96: aload_0
      97: invokevirtual #114                // Method disableRecv:()V
     100: aload_2
     101: monitorexit
     102: goto          112
     105: astore        4
     107: aload_2
     108: monitorexit
     109: aload         4
     111: athrow
     112: return
    Exception table:
       from    to  target type
          11    23    26   any
          26    29    26   any
          38   102   105   any
         105   109   105   any

  public void disableRecv();
    Code:
       0: aload_0
       1: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
       4: aload_0
       5: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
       8: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
      11: bipush        -2
      13: iand
      14: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
      17: pop
      18: return

  public void enableRecv();
    Code:
       0: aload_0
       1: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      11: invokevirtual #44                 // Method java/nio/channels/SelectionKey.selector:()Ljava/nio/channels/Selector;
      14: invokevirtual #45                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
      17: pop
      18: aload_0
      19: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      22: invokevirtual #53                 // Method java/nio/channels/SelectionKey.isValid:()Z
      25: ifeq          53
      28: aload_0
      29: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      32: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
      35: istore_2
      36: iload_2
      37: iconst_1
      38: iand
      39: ifne          53
      42: aload_0
      43: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      46: iload_2
      47: iconst_1
      48: ior
      49: invokevirtual #31                 // Method java/nio/channels/SelectionKey.interestOps:(I)Ljava/nio/channels/SelectionKey;
      52: pop
      53: aload_1
      54: monitorexit
      55: goto          63
      58: astore_3
      59: aload_1
      60: monitorexit
      61: aload_3
      62: athrow
      63: return
    Exception table:
       from    to  target type
           7    55    58   any
          58    61    58   any

  private void readConnectRequest() throws java.io.IOException, java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
       4: ifnonnull     17
       7: new           #38                 // class java/io/IOException
      10: dup
      11: ldc           #115                // String ZooKeeperServer not running
      13: invokespecial #116                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      21: aload_0
      22: aload_0
      23: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      26: invokevirtual #117                // Method org/apache/zookeeper/server/ZooKeeperServer.processConnectRequest:(Lorg/apache/zookeeper/server/ServerCnxn;Ljava/nio/ByteBuffer;)V
      29: aload_0
      30: iconst_1
      31: putfield      #69                 // Field initialized:Z
      34: return

  private void cleanupWriterSocket(java.io.PrintWriter);
    Code:
       0: aload_1
       1: ifnull        12
       4: aload_1
       5: invokevirtual #118                // Method java/io/PrintWriter.flush:()V
       8: aload_1
       9: invokevirtual #119                // Method java/io/PrintWriter.close:()V
      12: jsr           42
      15: goto          67
      18: astore_2
      19: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      22: ldc           #120                // String Error closing PrintWriter
      24: aload_2
      25: invokeinterface #121,  3          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Throwable;)V
      30: jsr           42
      33: goto          67
      36: astore_3
      37: jsr           42
      40: aload_3
      41: athrow
      42: astore        4
      44: aload_0
      45: invokevirtual #103                // Method close:()V
      48: goto          65
      51: astore        5
      53: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      56: ldc           #122                // String Error closing a command socket
      58: aload         5
      60: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      65: ret           4
      67: return
    Exception table:
       from    to  target type
           0    12    18   Class java/lang/Exception
           0    15    36   any
          18    33    36   any
          36    40    36   any
          44    48    51   Class java/lang/Exception

  private boolean checkFourLetterWord(java.nio.channels.SelectionKey, int) throws java.io.IOException;
    Code:
       0: getstatic     #123                // Field cmd2String:Ljava/util/HashMap;
       3: iload_2
       4: invokestatic  #124                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       7: invokevirtual #125                // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #126                // class java/lang/String
      13: astore_3
      14: aload_3
      15: ifnonnull     20
      18: iconst_0
      19: ireturn
      20: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      23: new           #47                 // class java/lang/StringBuilder
      26: dup
      27: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      30: ldc           #127                // String Processing
      32: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: aload_3
      36: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: ldc           #128                // String  command from
      41: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      44: aload_0
      45: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      48: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      51: invokevirtual #22                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
      54: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      57: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      60: invokeinterface #129,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      65: aload_0
      66: invokevirtual #67                 // Method packetReceived:()V
      69: aload_1
      70: ifnull        94
      73: aload_1
      74: invokevirtual #130                // Method java/nio/channels/SelectionKey.cancel:()V
      77: goto          94
      80: astore        4
      82: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      85: ldc           #131                // String Error cancelling command selection key
      87: aload         4
      89: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      94: new           #132                // class java/io/PrintWriter
      97: dup
      98: new           #133                // class java/io/BufferedWriter
     101: dup
     102: new           #134                // class org/apache/zookeeper/server/NIOServerCnxn$SendBufferWriter
     105: dup
     106: aload_0
     107: aconst_null
     108: invokespecial #135                // Method org/apache/zookeeper/server/NIOServerCnxn$SendBufferWriter."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Lorg/apache/zookeeper/server/NIOServerCnxn$1;)V
     111: invokespecial #136                // Method java/io/BufferedWriter."<init>":(Ljava/io/Writer;)V
     114: invokespecial #137                // Method java/io/PrintWriter."<init>":(Ljava/io/Writer;)V
     117: astore        4
     119: iload_2
     120: getstatic     #138                // Field ruokCmd:I
     123: if_icmpne     145
     126: new           #139                // class org/apache/zookeeper/server/NIOServerCnxn$RuokCommand
     129: dup
     130: aload_0
     131: aload         4
     133: invokespecial #140                // Method org/apache/zookeeper/server/NIOServerCnxn$RuokCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     136: astore        5
     138: aload         5
     140: invokevirtual #141                // Method org/apache/zookeeper/server/NIOServerCnxn$RuokCommand.start:()V
     143: iconst_1
     144: ireturn
     145: iload_2
     146: getstatic     #142                // Field getTraceMaskCmd:I
     149: if_icmpne     171
     152: new           #143                // class org/apache/zookeeper/server/NIOServerCnxn$TraceMaskCommand
     155: dup
     156: aload_0
     157: aload         4
     159: invokespecial #144                // Method org/apache/zookeeper/server/NIOServerCnxn$TraceMaskCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     162: astore        5
     164: aload         5
     166: invokevirtual #145                // Method org/apache/zookeeper/server/NIOServerCnxn$TraceMaskCommand.start:()V
     169: iconst_1
     170: ireturn
     171: iload_2
     172: getstatic     #146                // Field setTraceMaskCmd:I
     175: if_icmpne     249
     178: aload_0
     179: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
     182: aload_0
     183: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     186: invokevirtual #60                 // Method java/nio/channels/SocketChannel.read:(Ljava/nio/ByteBuffer;)I
     189: istore        5
     191: iload         5
     193: ifge          206
     196: new           #38                 // class java/io/IOException
     199: dup
     200: ldc           #147                // String Read error
     202: invokespecial #116                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     205: athrow
     206: aload_0
     207: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     210: invokevirtual #68                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     213: pop
     214: aload_0
     215: getfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
     218: invokevirtual #148                // Method java/nio/ByteBuffer.getLong:()J
     221: lstore        6
     223: lload         6
     225: invokestatic  #149                // Method org/apache/zookeeper/server/ZooTrace.setTextTraceLevel:(J)V
     228: new           #150                // class org/apache/zookeeper/server/NIOServerCnxn$SetTraceMaskCommand
     231: dup
     232: aload_0
     233: aload         4
     235: lload         6
     237: invokespecial #151                // Method org/apache/zookeeper/server/NIOServerCnxn$SetTraceMaskCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;J)V
     240: astore        8
     242: aload         8
     244: invokevirtual #152                // Method org/apache/zookeeper/server/NIOServerCnxn$SetTraceMaskCommand.start:()V
     247: iconst_1
     248: ireturn
     249: iload_2
     250: getstatic     #153                // Field enviCmd:I
     253: if_icmpne     275
     256: new           #154                // class org/apache/zookeeper/server/NIOServerCnxn$EnvCommand
     259: dup
     260: aload_0
     261: aload         4
     263: invokespecial #155                // Method org/apache/zookeeper/server/NIOServerCnxn$EnvCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     266: astore        5
     268: aload         5
     270: invokevirtual #156                // Method org/apache/zookeeper/server/NIOServerCnxn$EnvCommand.start:()V
     273: iconst_1
     274: ireturn
     275: iload_2
     276: getstatic     #157                // Field confCmd:I
     279: if_icmpne     301
     282: new           #158                // class org/apache/zookeeper/server/NIOServerCnxn$ConfCommand
     285: dup
     286: aload_0
     287: aload         4
     289: invokespecial #159                // Method org/apache/zookeeper/server/NIOServerCnxn$ConfCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     292: astore        5
     294: aload         5
     296: invokevirtual #160                // Method org/apache/zookeeper/server/NIOServerCnxn$ConfCommand.start:()V
     299: iconst_1
     300: ireturn
     301: iload_2
     302: getstatic     #161                // Field srstCmd:I
     305: if_icmpne     327
     308: new           #162                // class org/apache/zookeeper/server/NIOServerCnxn$StatResetCommand
     311: dup
     312: aload_0
     313: aload         4
     315: invokespecial #163                // Method org/apache/zookeeper/server/NIOServerCnxn$StatResetCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     318: astore        5
     320: aload         5
     322: invokevirtual #164                // Method org/apache/zookeeper/server/NIOServerCnxn$StatResetCommand.start:()V
     325: iconst_1
     326: ireturn
     327: iload_2
     328: getstatic     #165                // Field crstCmd:I
     331: if_icmpne     353
     334: new           #166                // class org/apache/zookeeper/server/NIOServerCnxn$CnxnStatResetCommand
     337: dup
     338: aload_0
     339: aload         4
     341: invokespecial #167                // Method org/apache/zookeeper/server/NIOServerCnxn$CnxnStatResetCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     344: astore        5
     346: aload         5
     348: invokevirtual #168                // Method org/apache/zookeeper/server/NIOServerCnxn$CnxnStatResetCommand.start:()V
     351: iconst_1
     352: ireturn
     353: iload_2
     354: getstatic     #169                // Field dumpCmd:I
     357: if_icmpne     379
     360: new           #170                // class org/apache/zookeeper/server/NIOServerCnxn$DumpCommand
     363: dup
     364: aload_0
     365: aload         4
     367: invokespecial #171                // Method org/apache/zookeeper/server/NIOServerCnxn$DumpCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     370: astore        5
     372: aload         5
     374: invokevirtual #172                // Method org/apache/zookeeper/server/NIOServerCnxn$DumpCommand.start:()V
     377: iconst_1
     378: ireturn
     379: iload_2
     380: getstatic     #173                // Field statCmd:I
     383: if_icmpeq     393
     386: iload_2
     387: getstatic     #174                // Field srvrCmd:I
     390: if_icmpne     413
     393: new           #175                // class org/apache/zookeeper/server/NIOServerCnxn$StatCommand
     396: dup
     397: aload_0
     398: aload         4
     400: iload_2
     401: invokespecial #176                // Method org/apache/zookeeper/server/NIOServerCnxn$StatCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;I)V
     404: astore        5
     406: aload         5
     408: invokevirtual #177                // Method org/apache/zookeeper/server/NIOServerCnxn$StatCommand.start:()V
     411: iconst_1
     412: ireturn
     413: iload_2
     414: getstatic     #178                // Field consCmd:I
     417: if_icmpne     439
     420: new           #179                // class org/apache/zookeeper/server/NIOServerCnxn$ConsCommand
     423: dup
     424: aload_0
     425: aload         4
     427: invokespecial #180                // Method org/apache/zookeeper/server/NIOServerCnxn$ConsCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     430: astore        5
     432: aload         5
     434: invokevirtual #181                // Method org/apache/zookeeper/server/NIOServerCnxn$ConsCommand.start:()V
     437: iconst_1
     438: ireturn
     439: iload_2
     440: getstatic     #182                // Field wchpCmd:I
     443: if_icmpeq     460
     446: iload_2
     447: getstatic     #183                // Field wchcCmd:I
     450: if_icmpeq     460
     453: iload_2
     454: getstatic     #184                // Field wchsCmd:I
     457: if_icmpne     480
     460: new           #185                // class org/apache/zookeeper/server/NIOServerCnxn$WatchCommand
     463: dup
     464: aload_0
     465: aload         4
     467: iload_2
     468: invokespecial #186                // Method org/apache/zookeeper/server/NIOServerCnxn$WatchCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;I)V
     471: astore        5
     473: aload         5
     475: invokevirtual #187                // Method org/apache/zookeeper/server/NIOServerCnxn$WatchCommand.start:()V
     478: iconst_1
     479: ireturn
     480: iload_2
     481: getstatic     #188                // Field mntrCmd:I
     484: if_icmpne     506
     487: new           #189                // class org/apache/zookeeper/server/NIOServerCnxn$MonitorCommand
     490: dup
     491: aload_0
     492: aload         4
     494: invokespecial #190                // Method org/apache/zookeeper/server/NIOServerCnxn$MonitorCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     497: astore        5
     499: aload         5
     501: invokevirtual #191                // Method org/apache/zookeeper/server/NIOServerCnxn$MonitorCommand.start:()V
     504: iconst_1
     505: ireturn
     506: iload_2
     507: getstatic     #192                // Field isroCmd:I
     510: if_icmpne     532
     513: new           #193                // class org/apache/zookeeper/server/NIOServerCnxn$IsroCommand
     516: dup
     517: aload_0
     518: aload         4
     520: invokespecial #194                // Method org/apache/zookeeper/server/NIOServerCnxn$IsroCommand."<init>":(Lorg/apache/zookeeper/server/NIOServerCnxn;Ljava/io/PrintWriter;)V
     523: astore        5
     525: aload         5
     527: invokevirtual #195                // Method org/apache/zookeeper/server/NIOServerCnxn$IsroCommand.start:()V
     530: iconst_1
     531: ireturn
     532: iconst_0
     533: ireturn
    Exception table:
       from    to  target type
          73    77    80   Class java/lang/Exception

  private boolean readLength(java.nio.channels.SelectionKey) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field lenBuffer:Ljava/nio/ByteBuffer;
       4: invokevirtual #196                // Method java/nio/ByteBuffer.getInt:()I
       7: istore_2
       8: aload_0
       9: getfield      #69                 // Field initialized:Z
      12: ifne          29
      15: aload_0
      16: aload_0
      17: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      20: iload_2
      21: invokespecial #197                // Method checkFourLetterWord:(Ljava/nio/channels/SelectionKey;I)Z
      24: ifeq          29
      27: iconst_0
      28: ireturn
      29: iload_2
      30: iflt          40
      33: iload_2
      34: getstatic     #198                // Field org/apache/jute/BinaryInputArchive.maxBuffer:I
      37: if_icmple     67
      40: new           #38                 // class java/io/IOException
      43: dup
      44: new           #47                 // class java/lang/StringBuilder
      47: dup
      48: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      51: ldc           #199                // String Len error
      53: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      56: iload_2
      57: invokevirtual #112                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      60: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      63: invokespecial #116                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      66: athrow
      67: aload_0
      68: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      71: ifnonnull     84
      74: new           #38                 // class java/io/IOException
      77: dup
      78: ldc           #115                // String ZooKeeperServer not running
      80: invokespecial #116                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      83: athrow
      84: aload_0
      85: iload_2
      86: invokestatic  #4                  // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      89: putfield      #6                  // Field incomingBuffer:Ljava/nio/ByteBuffer;
      92: iconst_1
      93: ireturn

  public long getOutstandingRequests();
    Code:
       0: aload_0
       1: dup
       2: astore_1
       3: monitorenter
       4: aload_0
       5: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
       8: dup
       9: astore_2
      10: monitorenter
      11: aload_0
      12: getfield      #109                // Field outstandingRequests:I
      15: i2l
      16: aload_2
      17: monitorexit
      18: aload_1
      19: monitorexit
      20: lreturn
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: astore        4
      28: aload_1
      29: monitorexit
      30: aload         4
      32: athrow
    Exception table:
       from    to  target type
          11    18    21   any
          21    24    21   any
           4    20    26   any
          21    30    26   any

  public int getSessionTimeout();
    Code:
       0: aload_0
       1: getfield      #200                // Field sessionTimeout:I
       4: ireturn

  public java.lang.String toString();
    Code:
       0: new           #47                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #201                // String NIOServerCnxn object with sock =
       9: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_0
      13: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      16: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      19: ldc           #202                // String  and sk =
      21: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      28: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: areturn

  public void close();
    Code:
       0: aload_0
       1: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
       4: getfield      #203                // Field org/apache/zookeeper/server/NIOServerCnxnFactory.cnxns:Ljava/util/HashSet;
       7: dup
       8: astore_1
       9: monitorenter
      10: aload_0
      11: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      14: getfield      #203                // Field org/apache/zookeeper/server/NIOServerCnxnFactory.cnxns:Ljava/util/HashSet;
      17: aload_0
      18: invokevirtual #204                // Method java/util/HashSet.remove:(Ljava/lang/Object;)Z
      21: ifne          27
      24: aload_1
      25: monitorexit
      26: return
      27: aload_0
      28: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      31: getfield      #205                // Field org/apache/zookeeper/server/NIOServerCnxnFactory.ipMap:Ljava/util/HashMap;
      34: dup
      35: astore_2
      36: monitorenter
      37: aload_0
      38: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      41: getfield      #205                // Field org/apache/zookeeper/server/NIOServerCnxnFactory.ipMap:Ljava/util/HashMap;
      44: aload_0
      45: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      48: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      51: invokevirtual #206                // Method java/net/Socket.getInetAddress:()Ljava/net/InetAddress;
      54: invokevirtual #125                // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      57: checkcast     #207                // class java/util/Set
      60: astore_3
      61: aload_3
      62: aload_0
      63: invokeinterface #208,  2          // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      68: pop
      69: aload_2
      70: monitorexit
      71: goto          81
      74: astore        4
      76: aload_2
      77: monitorexit
      78: aload         4
      80: athrow
      81: aload_0
      82: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
      85: aload_0
      86: invokevirtual #209                // Method org/apache/zookeeper/server/NIOServerCnxnFactory.unregisterConnection:(Lorg/apache/zookeeper/server/ServerCnxn;)V
      89: aload_0
      90: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      93: ifnull        104
      96: aload_0
      97: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
     100: aload_0
     101: invokevirtual #210                // Method org/apache/zookeeper/server/ZooKeeperServer.removeCnxn:(Lorg/apache/zookeeper/server/ServerCnxn;)V
     104: aload_0
     105: invokespecial #211                // Method closeSock:()V
     108: aload_0
     109: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     112: ifnull        148
     115: aload_0
     116: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     119: invokevirtual #130                // Method java/nio/channels/SelectionKey.cancel:()V
     122: goto          148
     125: astore_2
     126: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     129: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     134: ifeq          148
     137: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     140: ldc           #212                // String ignoring exception during selectionkey cancel
     142: aload_2
     143: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     148: aload_1
     149: monitorexit
     150: goto          160
     153: astore        5
     155: aload_1
     156: monitorexit
     157: aload         5
     159: athrow
     160: return
    Exception table:
       from    to  target type
          37    71    74   any
          74    78    74   any
         115   122   125   Class java/lang/Exception
          10    26   153   any
          27   150   153   any
         153   157   153   any

  private void closeSock();
    Code:
       0: aload_0
       1: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
       4: invokevirtual #35                 // Method java/nio/channels/SocketChannel.isOpen:()Z
       7: ifne          11
      10: return
      11: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #47                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #213                // String Closed socket connection for client
      23: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      30: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      33: invokevirtual #22                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
      36: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      39: aload_0
      40: getfield      #63                 // Field sessionId:J
      43: lconst_0
      44: lcmp
      45: ifeq          76
      48: new           #47                 // class java/lang/StringBuilder
      51: dup
      52: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      55: ldc           #214                // String  which had sessionid 0x
      57: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      60: aload_0
      61: getfield      #63                 // Field sessionId:J
      64: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      67: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      70: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      73: goto          78
      76: ldc           #215                // String  (no session established for client)
      78: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      84: invokeinterface #129,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      89: aload_0
      90: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      93: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      96: invokevirtual #216                // Method java/net/Socket.shutdownOutput:()V
      99: goto          125
     102: astore_1
     103: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     106: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     111: ifeq          125
     114: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     117: ldc           #217                // String ignoring exception during output shutdown
     119: aload_1
     120: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     125: aload_0
     126: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
     129: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     132: invokevirtual #218                // Method java/net/Socket.shutdownInput:()V
     135: goto          161
     138: astore_1
     139: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     142: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     147: ifeq          161
     150: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     153: ldc           #219                // String ignoring exception during input shutdown
     155: aload_1
     156: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     161: aload_0
     162: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
     165: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
     168: invokevirtual #220                // Method java/net/Socket.close:()V
     171: goto          197
     174: astore_1
     175: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     178: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     183: ifeq          197
     186: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     189: ldc           #221                // String ignoring exception during socket close
     191: aload_1
     192: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     197: aload_0
     198: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
     201: invokevirtual #222                // Method java/nio/channels/SocketChannel.close:()V
     204: goto          230
     207: astore_1
     208: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     211: invokeinterface #100,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     216: ifeq          230
     219: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     222: ldc           #223                // String ignoring exception during socketchannel close
     224: aload_1
     225: invokeinterface #102,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     230: return
    Exception table:
       from    to  target type
          89    99   102   Class java/io/IOException
         125   135   138   Class java/io/IOException
         161   171   174   Class java/io/IOException
         197   204   207   Class java/io/IOException

  public synchronized void sendResponse(org.apache.zookeeper.proto.ReplyHeader, org.apache.jute.Record, java.lang.String);
    Code:
       0: new           #224                // class java/io/ByteArrayOutputStream
       3: dup
       4: invokespecial #225                // Method java/io/ByteArrayOutputStream."<init>":()V
       7: astore        4
       9: aload         4
      11: invokestatic  #226                // Method org/apache/jute/BinaryOutputArchive.getArchive:(Ljava/io/OutputStream;)Lorg/apache/jute/BinaryOutputArchive;
      14: astore        5
      16: aload         4
      18: getstatic     #227                // Field fourBytes:[B
      21: invokevirtual #228                // Method java/io/ByteArrayOutputStream.write:([B)V
      24: aload         5
      26: aload_1
      27: ldc           #229                // String header
      29: invokevirtual #230                // Method org/apache/jute/BinaryOutputArchive.writeRecord:(Lorg/apache/jute/Record;Ljava/lang/String;)V
      32: aload_2
      33: ifnull        43
      36: aload         5
      38: aload_2
      39: aload_3
      40: invokevirtual #230                // Method org/apache/jute/BinaryOutputArchive.writeRecord:(Lorg/apache/jute/Record;Ljava/lang/String;)V
      43: aload         4
      45: invokevirtual #231                // Method java/io/ByteArrayOutputStream.close:()V
      48: goto          63
      51: astore        6
      53: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      56: ldc           #232                // String Error serializing response
      58: invokeinterface #233,  2          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      63: aload         4
      65: invokevirtual #234                // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      68: astore        6
      70: aload         6
      72: invokestatic  #235                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      75: astore        7
      77: aload         7
      79: aload         6
      81: arraylength
      82: iconst_4
      83: isub
      84: invokevirtual #236                // Method java/nio/ByteBuffer.putInt:(I)Ljava/nio/ByteBuffer;
      87: invokevirtual #237                // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      90: pop
      91: aload_0
      92: aload         7
      94: invokevirtual #33                 // Method sendBuffer:(Ljava/nio/ByteBuffer;)V
      97: aload_1
      98: invokevirtual #238                // Method org/apache/zookeeper/proto/ReplyHeader.getXid:()I
     101: ifle          192
     104: aload_0
     105: dup
     106: astore        8
     108: monitorenter
     109: aload_0
     110: dup
     111: getfield      #109                // Field outstandingRequests:I
     114: iconst_1
     115: isub
     116: putfield      #109                // Field outstandingRequests:I
     119: aload         8
     121: monitorexit
     122: goto          133
     125: astore        9
     127: aload         8
     129: monitorexit
     130: aload         9
     132: athrow
     133: aload_0
     134: getfield      #13                 // Field factory:Lorg/apache/zookeeper/server/NIOServerCnxnFactory;
     137: dup
     138: astore        8
     140: monitorenter
     141: aload_0
     142: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
     145: invokevirtual #110                // Method org/apache/zookeeper/server/ZooKeeperServer.getInProcess:()I
     148: aload_0
     149: getfield      #10                 // Field outstandingLimit:I
     152: if_icmplt     163
     155: aload_0
     156: getfield      #109                // Field outstandingRequests:I
     159: iconst_1
     160: if_icmpge     178
     163: aload_0
     164: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
     167: invokevirtual #44                 // Method java/nio/channels/SelectionKey.selector:()Ljava/nio/channels/Selector;
     170: invokevirtual #45                 // Method java/nio/channels/Selector.wakeup:()Ljava/nio/channels/Selector;
     173: pop
     174: aload_0
     175: invokevirtual #239                // Method enableRecv:()V
     178: aload         8
     180: monitorexit
     181: goto          192
     184: astore        10
     186: aload         8
     188: monitorexit
     189: aload         10
     191: athrow
     192: goto          209
     195: astore        4
     197: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
     200: ldc           #240                // String Unexpected exception. Destruction averted.
     202: aload         4
     204: invokeinterface #105,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     209: return
    Exception table:
       from    to  target type
          16    48    51   Class java/io/IOException
         109   122   125   any
         125   130   125   any
         141   181   184   any
         184   189   184   any
           0   192   195   Class java/lang/Exception

  public synchronized void process(org.apache.zookeeper.WatchedEvent);
    Code:
       0: new           #241                // class org/apache/zookeeper/proto/ReplyHeader
       3: dup
       4: iconst_m1
       5: ldc2_w        #242                // long -1l
       8: iconst_0
       9: invokespecial #244                // Method org/apache/zookeeper/proto/ReplyHeader."<init>":(IJI)V
      12: astore_2
      13: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      16: invokeinterface #46,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      21: ifeq          76
      24: getstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
      27: ldc2_w        #245                // long 64l
      30: new           #47                 // class java/lang/StringBuilder
      33: dup
      34: invokespecial #48                 // Method java/lang/StringBuilder."<init>":()V
      37: ldc           #247                // String Deliver event
      39: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_1
      43: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      46: ldc           #248                // String  to 0x
      48: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      51: aload_0
      52: getfield      #63                 // Field sessionId:J
      55: invokestatic  #64                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
      58: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: ldc           #249                // String  through
      63: invokevirtual #50                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      66: aload_0
      67: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      70: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      73: invokestatic  #250                // Method org/apache/zookeeper/server/ZooTrace.logTraceMessage:(Lorg/slf4j/Logger;JLjava/lang/String;)V
      76: aload_1
      77: invokevirtual #251                // Method org/apache/zookeeper/WatchedEvent.getWrapper:()Lorg/apache/zookeeper/proto/WatcherEvent;
      80: astore_3
      81: aload_0
      82: aload_2
      83: aload_3
      84: ldc           #252                // String notification
      86: invokevirtual #253                // Method sendResponse:(Lorg/apache/zookeeper/proto/ReplyHeader;Lorg/apache/jute/Record;Ljava/lang/String;)V
      89: return

  public long getSessionId();
    Code:
       0: aload_0
       1: getfield      #63                 // Field sessionId:J
       4: lreturn

  public void setSessionId(long);
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #63                 // Field sessionId:J
       5: return

  public void setSessionTimeout(int);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #200                // Field sessionTimeout:I
       5: return

  public int getInterestOps();
    Code:
       0: aload_0
       1: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
       4: invokevirtual #53                 // Method java/nio/channels/SelectionKey.isValid:()Z
       7: ifeq          20
      10: aload_0
      11: getfield      #12                 // Field sk:Ljava/nio/channels/SelectionKey;
      14: invokevirtual #42                 // Method java/nio/channels/SelectionKey.interestOps:()I
      17: goto          21
      20: iconst_0
      21: ireturn

  public java.net.InetSocketAddress getRemoteSocketAddress();
    Code:
       0: aload_0
       1: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
       4: invokevirtual #35                 // Method java/nio/channels/SocketChannel.isOpen:()Z
       7: ifne          12
      10: aconst_null
      11: areturn
      12: aload_0
      13: getfield      #11                 // Field sock:Ljava/nio/channels/SocketChannel;
      16: invokevirtual #19                 // Method java/nio/channels/SocketChannel.socket:()Ljava/net/Socket;
      19: invokevirtual #22                 // Method java/net/Socket.getRemoteSocketAddress:()Ljava/net/SocketAddress;
      22: checkcast     #23                 // class java/net/InetSocketAddress
      25: areturn

  protected org.apache.zookeeper.server.ServerStats serverStats();
    Code:
       0: aload_0
       1: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
       4: ifnonnull     9
       7: aconst_null
       8: areturn
       9: aload_0
      10: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
      13: invokevirtual #254                // Method org/apache/zookeeper/server/ZooKeeperServer.serverStats:()Lorg/apache/zookeeper/server/ServerStats;
      16: areturn

  static void access$000(org.apache.zookeeper.server.NIOServerCnxn, java.io.PrintWriter);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #2                  // Method cleanupWriterSocket:(Ljava/io/PrintWriter;)V
       5: return

  static org.apache.zookeeper.server.ZooKeeperServer access$100(org.apache.zookeeper.server.NIOServerCnxn);
    Code:
       0: aload_0
       1: getfield      #1                  // Field zkServer:Lorg/apache/zookeeper/server/ZooKeeperServer;
       4: areturn

  static {};
    Code:
       0: ldc_w         #255                // class org/apache/zookeeper/server/NIOServerCnxn
       3: invokestatic  #256                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #39                 // Field LOG:Lorg/slf4j/Logger;
       9: lconst_1
      10: putstatic     #257                // Field nextSessionId:J
      13: iconst_4
      14: newarray       byte
      16: putstatic     #227                // Field fourBytes:[B
      19: return
}

Compiled from "XaConnectionPool.java"
public class org.apache.activemq.jms.pool.XaConnectionPool extends org.apache.activemq.jms.pool.ConnectionPool {
  private final javax.transaction.TransactionManager transactionManager;

  public org.apache.activemq.jms.pool.XaConnectionPool(javax.jms.Connection, javax.transaction.TransactionManager);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method org/apache/activemq/jms/pool/ConnectionPool."<init>":(Ljavax/jms/Connection;)V
       5: aload_0
       6: aload_2
       7: putfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
      10: return

  protected javax.jms.Session makeSession(org.apache.activemq.jms.pool.SessionKey) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Ljavax/jms/Connection;
       4: checkcast     #4                  // class javax/jms/XAConnection
       7: invokeinterface #5,  1            // InterfaceMethod javax/jms/XAConnection.createXASession:()Ljavax/jms/XASession;
      12: areturn

  public javax.jms.Session createSession(boolean, int) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
       4: ifnull        25
       7: aload_0
       8: getfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
      11: invokeinterface #6,  1            // InterfaceMethod javax/transaction/TransactionManager.getStatus:()I
      16: bipush        6
      18: if_icmpeq     25
      21: iconst_1
      22: goto          26
      25: iconst_0
      26: istore_3
      27: iload_3
      28: ifeq          38
      31: iconst_0
      32: istore_1
      33: iconst_2
      34: istore_2
      35: goto          53
      38: aload_0
      39: getfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
      42: ifnull        53
      45: iconst_0
      46: istore_1
      47: iload_2
      48: ifne          53
      51: iconst_1
      52: istore_2
      53: aload_0
      54: iload_1
      55: iload_2
      56: invokespecial #7                  // Method org/apache/activemq/jms/pool/ConnectionPool.createSession:(ZI)Ljavax/jms/Session;
      59: checkcast     #8                  // class org/apache/activemq/jms/pool/PooledSession
      62: astore        4
      64: iload_3
      65: ifeq          133
      68: aload         4
      70: iconst_1
      71: invokevirtual #9                  // Method org/apache/activemq/jms/pool/PooledSession.setIgnoreClose:(Z)V
      74: aload         4
      76: iconst_1
      77: invokevirtual #10                 // Method org/apache/activemq/jms/pool/PooledSession.setIsXa:(Z)V
      80: aload_0
      81: getfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
      84: invokeinterface #11,  1           // InterfaceMethod javax/transaction/TransactionManager.getTransaction:()Ljavax/transaction/Transaction;
      89: new           #12                 // class org/apache/activemq/jms/pool/XaConnectionPool$Synchronization
      92: dup
      93: aload_0
      94: aload         4
      96: aconst_null
      97: invokespecial #13                 // Method org/apache/activemq/jms/pool/XaConnectionPool$Synchronization."<init>":(Lorg/apache/activemq/jms/pool/XaConnectionPool;Lorg/apache/activemq/jms/pool/PooledSession;Lorg/apache/activemq/jms/pool/XaConnectionPool$1;)V
     100: invokeinterface #14,  2           // InterfaceMethod javax/transaction/Transaction.registerSynchronization:(Ljavax/transaction/Synchronization;)V
     105: aload_0
     106: invokevirtual #15                 // Method incrementReferenceCount:()V
     109: aload_0
     110: getfield      #2                  // Field transactionManager:Ljavax/transaction/TransactionManager;
     113: invokeinterface #11,  1           // InterfaceMethod javax/transaction/TransactionManager.getTransaction:()Ljavax/transaction/Transaction;
     118: aload_0
     119: aload         4
     121: invokevirtual #16                 // Method createXaResource:(Lorg/apache/activemq/jms/pool/PooledSession;)Ljavax/transaction/xa/XAResource;
     124: invokeinterface #17,  2           // InterfaceMethod javax/transaction/Transaction.enlistResource:(Ljavax/transaction/xa/XAResource;)Z
     129: pop
     130: goto          139
     133: aload         4
     135: iconst_0
     136: invokevirtual #9                  // Method org/apache/activemq/jms/pool/PooledSession.setIgnoreClose:(Z)V
     139: aload         4
     141: areturn
     142: astore_3
     143: new           #19                 // class javax/jms/JMSException
     146: dup
     147: ldc           #20                 // String Rollback Exception
     149: invokespecial #21                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     152: astore        4
     154: aload         4
     156: aload_3
     157: invokevirtual #22                 // Method javax/jms/JMSException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     160: pop
     161: aload         4
     163: athrow
     164: astore_3
     165: new           #19                 // class javax/jms/JMSException
     168: dup
     169: ldc           #24                 // String System Exception
     171: invokespecial #21                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     174: astore        4
     176: aload         4
     178: aload_3
     179: invokevirtual #22                 // Method javax/jms/JMSException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     182: pop
     183: aload         4
     185: athrow
    Exception table:
       from    to  target type
           0   141   142   Class javax/transaction/RollbackException
           0   141   164   Class javax/transaction/SystemException

  protected javax.transaction.xa.XAResource createXaResource(org.apache.activemq.jms.pool.PooledSession) throws javax.jms.JMSException;
    Code:
       0: aload_1
       1: invokevirtual #25                 // Method org/apache/activemq/jms/pool/PooledSession.getXAResource:()Ljavax/transaction/xa/XAResource;
       4: areturn
}

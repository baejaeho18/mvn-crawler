Compiled from "DefaultBlobUploadStrategy.java"
public class org.apache.activemq.blob.DefaultBlobUploadStrategy extends org.apache.activemq.blob.DefaultStrategy implements org.apache.activemq.blob.BlobUploadStrategy {
  public org.apache.activemq.blob.DefaultBlobUploadStrategy(org.apache.activemq.blob.BlobTransferPolicy);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method org/apache/activemq/blob/DefaultStrategy."<init>":(Lorg/apache/activemq/blob/BlobTransferPolicy;)V
       5: return

  public java.net.URL uploadFile(org.apache.activemq.command.ActiveMQBlobMessage, java.io.File) throws javax.jms.JMSException, java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: new           #2                  // class java/io/FileInputStream
       5: dup
       6: aload_2
       7: invokespecial #3                  // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      10: invokevirtual #4                  // Method uploadStream:(Lorg/apache/activemq/command/ActiveMQBlobMessage;Ljava/io/InputStream;)Ljava/net/URL;
      13: areturn

  public java.net.URL uploadStream(org.apache.activemq.command.ActiveMQBlobMessage, java.io.InputStream) throws javax.jms.JMSException, java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #5                  // Method createMessageURL:(Lorg/apache/activemq/command/ActiveMQBlobMessage;)Ljava/net/URL;
       5: astore_3
       6: aload_3
       7: invokevirtual #6                  // Method java/net/URL.openConnection:()Ljava/net/URLConnection;
      10: checkcast     #7                  // class java/net/HttpURLConnection
      13: astore        4
      15: aload         4
      17: ldc           #8                  // String PUT
      19: invokevirtual #9                  // Method java/net/HttpURLConnection.setRequestMethod:(Ljava/lang/String;)V
      22: aload         4
      24: iconst_1
      25: invokevirtual #10                 // Method java/net/HttpURLConnection.setDoOutput:(Z)V
      28: aload         4
      30: aload_0
      31: getfield      #11                 // Field transferPolicy:Lorg/apache/activemq/blob/BlobTransferPolicy;
      34: invokevirtual #12                 // Method org/apache/activemq/blob/BlobTransferPolicy.getBufferSize:()I
      37: invokevirtual #13                 // Method java/net/HttpURLConnection.setChunkedStreamingMode:(I)V
      40: aload         4
      42: invokevirtual #14                 // Method java/net/HttpURLConnection.getOutputStream:()Ljava/io/OutputStream;
      45: astore        5
      47: aload_0
      48: getfield      #11                 // Field transferPolicy:Lorg/apache/activemq/blob/BlobTransferPolicy;
      51: invokevirtual #12                 // Method org/apache/activemq/blob/BlobTransferPolicy.getBufferSize:()I
      54: newarray       byte
      56: astore        6
      58: aload_2
      59: aload         6
      61: invokevirtual #15                 // Method java/io/InputStream.read:([B)I
      64: istore        7
      66: iload         7
      68: iconst_m1
      69: if_icmpeq     98
      72: aload         5
      74: aload         6
      76: iconst_0
      77: iload         7
      79: invokevirtual #16                 // Method java/io/OutputStream.write:([BII)V
      82: aload         5
      84: invokevirtual #17                 // Method java/io/OutputStream.flush:()V
      87: aload_2
      88: aload         6
      90: invokevirtual #15                 // Method java/io/InputStream.read:([B)I
      93: istore        7
      95: goto          66
      98: aload         5
     100: invokevirtual #18                 // Method java/io/OutputStream.close:()V
     103: aload_2
     104: invokevirtual #19                 // Method java/io/InputStream.close:()V
     107: aload_0
     108: aload         4
     110: invokevirtual #20                 // Method java/net/HttpURLConnection.getResponseCode:()I
     113: invokevirtual #21                 // Method isSuccessfulCode:(I)Z
     116: ifne          163
     119: new           #22                 // class java/io/IOException
     122: dup
     123: new           #23                 // class java/lang/StringBuilder
     126: dup
     127: invokespecial #24                 // Method java/lang/StringBuilder."<init>":()V
     130: ldc           #25                 // String PUT was not successful:
     132: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     135: aload         4
     137: invokevirtual #20                 // Method java/net/HttpURLConnection.getResponseCode:()I
     140: invokevirtual #27                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     143: ldc           #28                 // String
     145: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     148: aload         4
     150: invokevirtual #29                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     153: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: invokevirtual #30                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     159: invokespecial #31                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     162: athrow
     163: aload_3
     164: areturn
}

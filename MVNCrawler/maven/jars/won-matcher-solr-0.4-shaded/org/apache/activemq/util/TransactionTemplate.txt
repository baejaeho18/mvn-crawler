Compiled from "TransactionTemplate.java"
public class org.apache.activemq.util.TransactionTemplate {
  private static final org.slf4j.Logger LOG;

  private org.apache.activemq.store.PersistenceAdapter persistenceAdapter;

  private org.apache.activemq.broker.ConnectionContext context;

  public org.apache.activemq.util.TransactionTemplate(org.apache.activemq.store.PersistenceAdapter, org.apache.activemq.broker.ConnectionContext);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
      14: return

  public void run(org.apache.activemq.util.Callback) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
       4: aload_0
       5: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
       8: invokeinterface #4,  2            // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.beginTransaction:(Lorg/apache/activemq/broker/ConnectionContext;)V
      13: aconst_null
      14: astore_2
      15: aload_1
      16: invokeinterface #5,  1            // InterfaceMethod org/apache/activemq/util/Callback.execute:()V
      21: aload_2
      22: ifnonnull     41
      25: aload_0
      26: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
      29: aload_0
      30: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
      33: invokeinterface #6,  2            // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.commitTransaction:(Lorg/apache/activemq/broker/ConnectionContext;)V
      38: goto          186
      41: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
      44: new           #8                  // class java/lang/StringBuilder
      47: dup
      48: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      51: ldc           #10                 // String Having to Rollback - caught an exception:
      53: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      56: aload_2
      57: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      60: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      63: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      68: aload_0
      69: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
      72: aload_0
      73: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
      76: invokeinterface #15,  2           // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.rollbackTransaction:(Lorg/apache/activemq/broker/ConnectionContext;)V
      81: goto          186
      84: astore_3
      85: aload_3
      86: astore_2
      87: aload_3
      88: athrow
      89: astore_3
      90: aload_3
      91: astore_2
      92: aload_3
      93: athrow
      94: astore_3
      95: aload_3
      96: astore_2
      97: new           #8                  // class java/lang/StringBuilder
     100: dup
     101: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     104: ldc           #19                 // String Persistence task failed:
     106: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     109: aload_3
     110: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     113: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     116: aload_3
     117: invokestatic  #20                 // Method org/apache/activemq/util/IOExceptionSupport.create:(Ljava/lang/String;Ljava/lang/Throwable;)Ljava/io/IOException;
     120: athrow
     121: astore        4
     123: aload_2
     124: ifnonnull     143
     127: aload_0
     128: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
     131: aload_0
     132: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
     135: invokeinterface #6,  2            // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.commitTransaction:(Lorg/apache/activemq/broker/ConnectionContext;)V
     140: goto          183
     143: getstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
     146: new           #8                  // class java/lang/StringBuilder
     149: dup
     150: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     153: ldc           #10                 // String Having to Rollback - caught an exception:
     155: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     158: aload_2
     159: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     162: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     165: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     170: aload_0
     171: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
     174: aload_0
     175: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
     178: invokeinterface #15,  2           // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.rollbackTransaction:(Lorg/apache/activemq/broker/ConnectionContext;)V
     183: aload         4
     185: athrow
     186: return
    Exception table:
       from    to  target type
          15    21    84   Class java/io/IOException
          15    21    89   Class java/lang/RuntimeException
          15    21    94   Class java/lang/Throwable
          15    21   121   any
          84   123   121   any

  public org.apache.activemq.broker.ConnectionContext getContext();
    Code:
       0: aload_0
       1: getfield      #3                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
       4: areturn

  public org.apache.activemq.store.PersistenceAdapter getPersistenceAdapter();
    Code:
       0: aload_0
       1: getfield      #2                  // Field persistenceAdapter:Lorg/apache/activemq/store/PersistenceAdapter;
       4: areturn

  static {};
    Code:
       0: ldc_w         #21                 // class org/apache/activemq/util/TransactionTemplate
       3: invokestatic  #22                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #7                  // Field LOG:Lorg/slf4j/Logger;
       9: return
}

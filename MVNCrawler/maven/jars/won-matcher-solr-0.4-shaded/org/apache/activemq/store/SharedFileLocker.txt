Compiled from "SharedFileLocker.java"
public class org.apache.activemq.store.SharedFileLocker extends org.apache.activemq.broker.AbstractLocker {
  public static final java.io.File DEFAULT_DIRECTORY;

  private static final org.slf4j.Logger LOG;

  private org.apache.activemq.util.LockFile lockFile;

  protected java.io.File directory;

  public org.apache.activemq.store.SharedFileLocker();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/activemq/broker/AbstractLocker."<init>":()V
       4: aload_0
       5: getstatic     #2                  // Field DEFAULT_DIRECTORY:Ljava/io/File;
       8: putfield      #3                  // Field directory:Ljava/io/File;
      11: return

  public void doStart() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
       4: ifnonnull     164
       7: new           #5                  // class java/io/File
      10: dup
      11: aload_0
      12: getfield      #3                  // Field directory:Ljava/io/File;
      15: ldc           #6                  // String lock
      17: invokespecial #7                  // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      20: astore_1
      21: aload_0
      22: new           #8                  // class org/apache/activemq/util/LockFile
      25: dup
      26: aload_1
      27: iconst_1
      28: invokespecial #9                  // Method org/apache/activemq/util/LockFile."<init>":(Ljava/io/File;Z)V
      31: putfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
      34: aload_0
      35: getfield      #10                 // Field failIfLocked:Z
      38: ifeq          51
      41: aload_0
      42: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
      45: invokevirtual #11                 // Method org/apache/activemq/util/LockFile.lock:()V
      48: goto          164
      51: iconst_0
      52: istore_2
      53: aload_0
      54: invokevirtual #12                 // Method isStopped:()Z
      57: ifne          150
      60: aload_0
      61: invokevirtual #13                 // Method isStopping:()Z
      64: ifne          150
      67: aload_0
      68: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
      71: invokevirtual #11                 // Method org/apache/activemq/util/LockFile.lock:()V
      74: aload_0
      75: invokevirtual #14                 // Method keepAlive:()Z
      78: istore_2
      79: goto          150
      82: astore_3
      83: getstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      86: new           #17                 // class java/lang/StringBuilder
      89: dup
      90: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      93: ldc           #19                 // String Database
      95: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      98: aload_1
      99: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     102: ldc           #22                 // String  is locked... waiting
     104: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     107: aload_0
     108: getfield      #23                 // Field lockAcquireSleepInterval:J
     111: ldc2_w        #24                 // long 1000l
     114: ldiv
     115: invokevirtual #26                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     118: ldc           #27                 // String  seconds for the database to be unlocked. Reason:
     120: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     123: aload_3
     124: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     127: invokevirtual #28                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     130: invokeinterface #29,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     135: aload_0
     136: getfield      #23                 // Field lockAcquireSleepInterval:J
     139: invokestatic  #30                 // Method java/lang/Thread.sleep:(J)V
     142: goto          147
     145: astore        4
     147: goto          53
     150: iload_2
     151: ifne          164
     154: new           #15                 // class java/io/IOException
     157: dup
     158: ldc           #32                 // String attempt to obtain lock aborted due to shutdown
     160: invokespecial #33                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     163: athrow
     164: return
    Exception table:
       from    to  target type
          67    79    82   Class java/io/IOException
         135   142   145   Class java/lang/InterruptedException

  public boolean keepAlive();
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
       4: ifnull        21
       7: aload_0
       8: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
      11: invokevirtual #34                 // Method org/apache/activemq/util/LockFile.keepAlive:()Z
      14: ifeq          21
      17: iconst_1
      18: goto          22
      21: iconst_0
      22: ireturn

  public void doStop(org.apache.activemq.util.ServiceStopper) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
       4: invokevirtual #35                 // Method org/apache/activemq/util/LockFile.unlock:()V
       7: aload_0
       8: aconst_null
       9: putfield      #4                  // Field lockFile:Lorg/apache/activemq/util/LockFile;
      12: return

  public java.io.File getDirectory();
    Code:
       0: aload_0
       1: getfield      #3                  // Field directory:Ljava/io/File;
       4: areturn

  public void setDirectory(java.io.File);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field directory:Ljava/io/File;
       5: return

  public void configure(org.apache.activemq.store.PersistenceAdapter) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #36,  1           // InterfaceMethod org/apache/activemq/store/PersistenceAdapter.getDirectory:()Ljava/io/File;
       7: invokevirtual #37                 // Method setDirectory:(Ljava/io/File;)V
      10: return

  static {};
    Code:
       0: new           #5                  // class java/io/File
       3: dup
       4: ldc           #38                 // String KahaDB
       6: invokespecial #39                 // Method java/io/File."<init>":(Ljava/lang/String;)V
       9: putstatic     #2                  // Field DEFAULT_DIRECTORY:Ljava/io/File;
      12: ldc_w         #40                 // class org/apache/activemq/store/SharedFileLocker
      15: invokestatic  #41                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      18: putstatic     #16                 // Field LOG:Lorg/slf4j/Logger;
      21: return
}

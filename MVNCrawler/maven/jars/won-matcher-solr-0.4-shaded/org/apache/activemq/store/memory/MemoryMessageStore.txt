Compiled from "MemoryMessageStore.java"
public class org.apache.activemq.store.memory.MemoryMessageStore extends org.apache.activemq.store.AbstractMessageStore {
  protected final java.util.Map<org.apache.activemq.command.MessageId, org.apache.activemq.command.Message> messageTable;

  protected org.apache.activemq.command.MessageId lastBatchId;

  public org.apache.activemq.store.memory.MemoryMessageStore(org.apache.activemq.command.ActiveMQDestination);
    Code:
       0: aload_0
       1: aload_1
       2: new           #1                  // class java/util/LinkedHashMap
       5: dup
       6: invokespecial #2                  // Method java/util/LinkedHashMap."<init>":()V
       9: invokespecial #3                  // Method "<init>":(Lorg/apache/activemq/command/ActiveMQDestination;Ljava/util/Map;)V
      12: return

  public org.apache.activemq.store.memory.MemoryMessageStore(org.apache.activemq.command.ActiveMQDestination, java.util.Map<org.apache.activemq.command.MessageId, org.apache.activemq.command.Message>);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #4                  // Method org/apache/activemq/store/AbstractMessageStore."<init>":(Lorg/apache/activemq/command/ActiveMQDestination;)V
       5: aload_0
       6: aload_2
       7: invokestatic  #5                  // Method java/util/Collections.synchronizedMap:(Ljava/util/Map;)Ljava/util/Map;
      10: putfield      #6                  // Field messageTable:Ljava/util/Map;
      13: return

  public synchronized void addMessage(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.Message) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_3
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: aload_2
      12: invokevirtual #7                  // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      15: aload_2
      16: invokeinterface #8,  3            // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      21: pop
      22: aload_3
      23: monitorexit
      24: goto          34
      27: astore        4
      29: aload_3
      30: monitorexit
      31: aload         4
      33: athrow
      34: aload_2
      35: invokevirtual #9                  // Method org/apache/activemq/command/Message.incrementReferenceCount:()I
      38: pop
      39: return
    Exception table:
       from    to  target type
           7    24    27   any
          27    31    27   any

  public org.apache.activemq.command.Message getMessage(org.apache.activemq.command.MessageId) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class org/apache/activemq/command/Message
      13: areturn

  public void removeMessage(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.MessageAck) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_2
       2: invokevirtual #12                 // Method org/apache/activemq/command/MessageAck.getLastMessageId:()Lorg/apache/activemq/command/MessageId;
       5: invokevirtual #13                 // Method removeMessage:(Lorg/apache/activemq/command/MessageId;)V
       8: return

  public void removeMessage(org.apache.activemq.command.MessageId) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: aload_1
      12: invokeinterface #14,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      17: checkcast     #11                 // class org/apache/activemq/command/Message
      20: astore_3
      21: aload_3
      22: ifnull        30
      25: aload_3
      26: invokevirtual #15                 // Method org/apache/activemq/command/Message.decrementReferenceCount:()I
      29: pop
      30: aload_0
      31: getfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
      34: ifnull        48
      37: aload_0
      38: getfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
      41: aload_1
      42: invokevirtual #17                 // Method org/apache/activemq/command/MessageId.equals:(Ljava/lang/Object;)Z
      45: ifne          60
      48: aload_0
      49: getfield      #6                  // Field messageTable:Ljava/util/Map;
      52: invokeinterface #18,  1           // InterfaceMethod java/util/Map.isEmpty:()Z
      57: ifeq          65
      60: aload_0
      61: aconst_null
      62: putfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
      65: aload_2
      66: monitorexit
      67: goto          77
      70: astore        4
      72: aload_2
      73: monitorexit
      74: aload         4
      76: athrow
      77: return
    Exception table:
       from    to  target type
           7    67    70   any
          70    74    70   any

  public void recover(org.apache.activemq.store.MessageRecoveryListener) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: invokeinterface #19,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      16: invokeinterface #20,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      21: astore_3
      22: aload_3
      23: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      28: ifeq          80
      31: aload_3
      32: invokeinterface #22,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      37: astore        4
      39: aload         4
      41: invokevirtual #23                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      44: ldc_w         #24                 // class org/apache/activemq/command/MessageId
      47: if_acmpne     65
      50: aload_1
      51: aload         4
      53: checkcast     #24                 // class org/apache/activemq/command/MessageId
      56: invokeinterface #25,  2           // InterfaceMethod org/apache/activemq/store/MessageRecoveryListener.recoverMessageReference:(Lorg/apache/activemq/command/MessageId;)Z
      61: pop
      62: goto          77
      65: aload_1
      66: aload         4
      68: checkcast     #11                 // class org/apache/activemq/command/Message
      71: invokeinterface #26,  2           // InterfaceMethod org/apache/activemq/store/MessageRecoveryListener.recoverMessage:(Lorg/apache/activemq/command/Message;)Z
      76: pop
      77: goto          22
      80: aload_2
      81: monitorexit
      82: goto          92
      85: astore        5
      87: aload_2
      88: monitorexit
      89: aload         5
      91: athrow
      92: return
    Exception table:
       from    to  target type
           7    82    85   any
          85    89    85   any

  public void removeAllMessages(org.apache.activemq.broker.ConnectionContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: invokeinterface #27,  1           // InterfaceMethod java/util/Map.clear:()V
      16: aload_2
      17: monitorexit
      18: goto          26
      21: astore_3
      22: aload_2
      23: monitorexit
      24: aload_3
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  public void delete();
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: invokeinterface #27,  1           // InterfaceMethod java/util/Map.clear:()V
      16: aload_1
      17: monitorexit
      18: goto          26
      21: astore_2
      22: aload_1
      23: monitorexit
      24: aload_2
      25: athrow
      26: return
    Exception table:
       from    to  target type
           7    18    21   any
          21    24    21   any

  public int getMessageCount();
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: invokeinterface #28,  1           // InterfaceMethod java/util/Map.size:()I
       9: ireturn

  public void recoverNextMessages(int, org.apache.activemq.store.MessageRecoveryListener) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_3
       6: monitorenter
       7: aload_0
       8: getfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
      11: ifnonnull     18
      14: iconst_1
      15: goto          19
      18: iconst_0
      19: istore        4
      21: iconst_0
      22: istore        5
      24: aload_0
      25: getfield      #6                  // Field messageTable:Ljava/util/Map;
      28: invokeinterface #29,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      33: invokeinterface #30,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      38: astore        6
      40: aload         6
      42: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      47: ifeq          153
      50: aload         6
      52: invokeinterface #22,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      57: checkcast     #31                 // class java/util/Map$Entry
      60: astore        7
      62: iload         4
      64: ifeq          134
      67: iinc          5, 1
      70: aload         7
      72: invokeinterface #32,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      77: astore        8
      79: aload_0
      80: aload         7
      82: invokeinterface #33,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      87: checkcast     #24                 // class org/apache/activemq/command/MessageId
      90: putfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
      93: aload         8
      95: invokevirtual #23                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      98: ldc_w         #24                 // class org/apache/activemq/command/MessageId
     101: if_acmpne     119
     104: aload_2
     105: aload         8
     107: checkcast     #24                 // class org/apache/activemq/command/MessageId
     110: invokeinterface #25,  2           // InterfaceMethod org/apache/activemq/store/MessageRecoveryListener.recoverMessageReference:(Lorg/apache/activemq/command/MessageId;)Z
     115: pop
     116: goto          131
     119: aload_2
     120: aload         8
     122: checkcast     #11                 // class org/apache/activemq/command/Message
     125: invokeinterface #26,  2           // InterfaceMethod org/apache/activemq/store/MessageRecoveryListener.recoverMessage:(Lorg/apache/activemq/command/Message;)Z
     130: pop
     131: goto          150
     134: aload         7
     136: invokeinterface #33,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     141: aload_0
     142: getfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
     145: invokevirtual #34                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     148: istore        4
     150: goto          40
     153: aload_3
     154: monitorexit
     155: goto          165
     158: astore        9
     160: aload_3
     161: monitorexit
     162: aload         9
     164: athrow
     165: return
    Exception table:
       from    to  target type
           7   155   158   any
         158   162   158   any

  public void resetBatching();
    Code:
       0: aload_0
       1: aconst_null
       2: putfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
       5: return

  public void setBatch(org.apache.activemq.command.MessageId);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #16                 // Field lastBatchId:Lorg/apache/activemq/command/MessageId;
       5: return

  public void updateMessage(org.apache.activemq.command.Message);
    Code:
       0: aload_0
       1: getfield      #6                  // Field messageTable:Ljava/util/Map;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field messageTable:Ljava/util/Map;
      11: aload_1
      12: invokevirtual #7                  // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      15: aload_1
      16: invokeinterface #8,  3            // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      21: pop
      22: aload_2
      23: monitorexit
      24: goto          32
      27: astore_3
      28: aload_2
      29: monitorexit
      30: aload_3
      31: athrow
      32: return
    Exception table:
       from    to  target type
           7    24    27   any
          27    30    27   any
}

Compiled from "LocalTransaction.java"
public class org.apache.activemq.transaction.LocalTransaction extends org.apache.activemq.transaction.Transaction {
  private static final org.slf4j.Logger LOG;

  private final org.apache.activemq.store.TransactionStore transactionStore;

  private final org.apache.activemq.command.LocalTransactionId xid;

  private final org.apache.activemq.broker.ConnectionContext context;

  public org.apache.activemq.transaction.LocalTransaction(org.apache.activemq.store.TransactionStore, org.apache.activemq.command.LocalTransactionId, org.apache.activemq.broker.ConnectionContext);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/activemq/transaction/Transaction."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
      19: return

  public void commit(boolean) throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #6,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          53
      11: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
      14: new           #7                  // class java/lang/StringBuilder
      17: dup
      18: invokespecial #8                  // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #9                  // String commit:
      23: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
      30: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: ldc           #12                 // String  syncCount:
      35: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: aload_0
      39: invokevirtual #13                 // Method size:()I
      42: invokevirtual #14                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      45: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      48: invokeinterface #16,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      53: aload_0
      54: invokevirtual #17                 // Method prePrepare:()V
      57: goto          103
      60: astore_2
      61: aload_2
      62: athrow
      63: astore_2
      64: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
      67: ldc           #20                 // String COMMIT FAILED:
      69: aload_2
      70: invokeinterface #21,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      75: aload_0
      76: invokevirtual #22                 // Method rollback:()V
      79: new           #18                 // class javax/transaction/xa/XAException
      82: dup
      83: ldc           #23                 // String COMMIT FAILED: Transaction rolled back
      85: invokespecial #24                 // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
      88: astore_3
      89: aload_3
      90: bipush        104
      92: putfield      #25                 // Field javax/transaction/xa/XAException.errorCode:I
      95: aload_3
      96: aload_2
      97: invokevirtual #26                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     100: pop
     101: aload_3
     102: athrow
     103: aload_0
     104: iconst_3
     105: invokevirtual #27                 // Method setState:(B)V
     108: aload_0
     109: getfield      #4                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
     112: invokevirtual #28                 // Method org/apache/activemq/broker/ConnectionContext.getTransactions:()Ljava/util/concurrent/ConcurrentHashMap;
     115: aload_0
     116: getfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
     119: invokevirtual #29                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     122: pop
     123: aload_0
     124: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
     127: aload_0
     128: invokevirtual #30                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     131: iconst_0
     132: aload_0
     133: getfield      #31                 // Field preCommitTask:Ljava/util/concurrent/FutureTask;
     136: aload_0
     137: getfield      #32                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
     140: invokeinterface #33,  5           // InterfaceMethod org/apache/activemq/store/TransactionStore.commit:(Lorg/apache/activemq/command/TransactionId;ZLjava/lang/Runnable;Ljava/lang/Runnable;)V
     145: aload_0
     146: aload_0
     147: getfield      #32                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
     150: invokevirtual #34                 // Method waitPostCommitDone:(Ljava/util/concurrent/FutureTask;)V
     153: goto          196
     156: astore_2
     157: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
     160: ldc           #35                 // String Store COMMIT FAILED:
     162: aload_2
     163: invokeinterface #21,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     168: aload_0
     169: invokevirtual #22                 // Method rollback:()V
     172: new           #18                 // class javax/transaction/xa/XAException
     175: dup
     176: ldc           #36                 // String STORE COMMIT FAILED: Transaction rolled back
     178: invokespecial #24                 // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
     181: astore_3
     182: aload_3
     183: bipush        104
     185: putfield      #25                 // Field javax/transaction/xa/XAException.errorCode:I
     188: aload_3
     189: aload_2
     190: invokevirtual #26                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     193: pop
     194: aload_3
     195: athrow
     196: return
    Exception table:
       from    to  target type
          53    57    60   Class javax/transaction/xa/XAException
          53    57    63   Class java/lang/Throwable
         123   153   156   Class java/lang/Throwable

  public void rollback() throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #6,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          53
      11: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
      14: new           #7                  // class java/lang/StringBuilder
      17: dup
      18: invokespecial #8                  // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #37                 // String rollback:
      23: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
      30: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: ldc           #12                 // String  syncCount:
      35: invokevirtual #10                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: aload_0
      39: invokevirtual #13                 // Method size:()I
      42: invokevirtual #14                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      45: invokevirtual #15                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      48: invokeinterface #16,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      53: aload_0
      54: iconst_3
      55: invokevirtual #27                 // Method setState:(B)V
      58: aload_0
      59: getfield      #4                  // Field context:Lorg/apache/activemq/broker/ConnectionContext;
      62: invokevirtual #28                 // Method org/apache/activemq/broker/ConnectionContext.getTransactions:()Ljava/util/concurrent/ConcurrentHashMap;
      65: aload_0
      66: getfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
      69: invokevirtual #29                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      72: pop
      73: aload_0
      74: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
      77: dup
      78: astore_1
      79: monitorenter
      80: aload_0
      81: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
      84: aload_0
      85: invokevirtual #30                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      88: invokeinterface #38,  2           // InterfaceMethod org/apache/activemq/store/TransactionStore.rollback:(Lorg/apache/activemq/command/TransactionId;)V
      93: aload_0
      94: invokevirtual #39                 // Method fireAfterRollback:()V
      97: goto          136
     100: astore_2
     101: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
     104: ldc           #40                 // String POST ROLLBACK FAILED:
     106: aload_2
     107: invokeinterface #21,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     112: new           #18                 // class javax/transaction/xa/XAException
     115: dup
     116: ldc           #41                 // String POST ROLLBACK FAILED
     118: invokespecial #24                 // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
     121: astore_3
     122: aload_3
     123: bipush        -3
     125: putfield      #25                 // Field javax/transaction/xa/XAException.errorCode:I
     128: aload_3
     129: aload_2
     130: invokevirtual #26                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     133: pop
     134: aload_3
     135: athrow
     136: aload_1
     137: monitorexit
     138: goto          148
     141: astore        4
     143: aload_1
     144: monitorexit
     145: aload         4
     147: athrow
     148: return
    Exception table:
       from    to  target type
          93    97   100   Class java/lang/Throwable
          80   138   141   any
         141   145   141   any

  public int prepare() throws javax.transaction.xa.XAException;
    Code:
       0: new           #18                 // class javax/transaction/xa/XAException
       3: dup
       4: ldc           #42                 // String Prepare not implemented on Local Transactions
       6: invokespecial #24                 // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
       9: astore_1
      10: aload_1
      11: bipush        -3
      13: putfield      #25                 // Field javax/transaction/xa/XAException.errorCode:I
      16: aload_1
      17: athrow

  public org.apache.activemq.command.TransactionId getTransactionId();
    Code:
       0: aload_0
       1: getfield      #3                  // Field xid:Lorg/apache/activemq/command/LocalTransactionId;
       4: areturn

  public org.slf4j.Logger getLog();
    Code:
       0: getstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static {};
    Code:
       0: ldc_w         #43                 // class org/apache/activemq/transaction/LocalTransaction
       3: invokestatic  #44                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #5                  // Field LOG:Lorg/slf4j/Logger;
       9: return
}

Compiled from "XATransaction.java"
public class org.apache.activemq.transaction.XATransaction extends org.apache.activemq.transaction.Transaction {
  private static final org.slf4j.Logger LOG;

  private final org.apache.activemq.store.TransactionStore transactionStore;

  private final org.apache.activemq.command.XATransactionId xid;

  private final org.apache.activemq.broker.TransactionBroker broker;

  private final org.apache.activemq.command.ConnectionId connectionId;

  public org.apache.activemq.transaction.XATransaction(org.apache.activemq.store.TransactionStore, org.apache.activemq.command.XATransactionId, org.apache.activemq.broker.TransactionBroker, org.apache.activemq.command.ConnectionId);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/activemq/transaction/Transaction."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field broker:Lorg/apache/activemq/broker/TransactionBroker;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field connectionId:Lorg/apache/activemq/command/ConnectionId;
      25: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      28: invokeinterface #7,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      33: ifeq          63
      36: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      39: new           #8                  // class java/lang/StringBuilder
      42: dup
      43: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      46: ldc           #10                 // String XA Transaction new/begin :
      48: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      51: aload_2
      52: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      55: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      58: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      63: return

  public void commit(boolean) throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #7,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          50
      11: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      14: new           #8                  // class java/lang/StringBuilder
      17: dup
      18: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #15                 // String XA Transaction commit onePhase:
      23: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: iload_1
      27: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
      30: ldc           #17                 // String , xid:
      32: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: aload_0
      36: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
      39: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      42: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      45: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      50: aload_0
      51: invokevirtual #18                 // Method getState:()B
      54: tableswitch   { // 0 to 2
                     0: 80
                     1: 92
                     2: 125
               default: 149
          }
      80: aload_0
      81: iload_1
      82: invokespecial #19                 // Method checkForPreparedState:(Z)V
      85: aload_0
      86: invokespecial #20                 // Method setStateFinished:()V
      89: goto          155
      92: aload_0
      93: iload_1
      94: invokespecial #19                 // Method checkForPreparedState:(Z)V
      97: aload_0
      98: invokespecial #21                 // Method doPrePrepare:()V
     101: aload_0
     102: invokespecial #20                 // Method setStateFinished:()V
     105: aload_0
     106: aload_0
     107: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     110: iconst_0
     111: aload_0
     112: getfield      #23                 // Field preCommitTask:Ljava/util/concurrent/FutureTask;
     115: aload_0
     116: getfield      #24                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
     119: invokespecial #25                 // Method storeCommit:(Lorg/apache/activemq/command/TransactionId;ZLjava/lang/Runnable;Ljava/lang/Runnable;)V
     122: goto          155
     125: aload_0
     126: invokespecial #20                 // Method setStateFinished:()V
     129: aload_0
     130: aload_0
     131: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     134: iconst_1
     135: aload_0
     136: getfield      #23                 // Field preCommitTask:Ljava/util/concurrent/FutureTask;
     139: aload_0
     140: getfield      #24                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
     143: invokespecial #25                 // Method storeCommit:(Lorg/apache/activemq/command/TransactionId;ZLjava/lang/Runnable;Ljava/lang/Runnable;)V
     146: goto          155
     149: aload_0
     150: ldc           #26                 // String commit
     152: invokespecial #27                 // Method illegalStateTransition:(Ljava/lang/String;)V
     155: return

  private void storeCommit(org.apache.activemq.command.TransactionId, boolean, java.lang.Runnable, java.lang.Runnable) throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
       4: aload_0
       5: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
       8: iload_2
       9: aload_0
      10: getfield      #23                 // Field preCommitTask:Ljava/util/concurrent/FutureTask;
      13: aload_0
      14: getfield      #24                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
      17: invokeinterface #28,  5           // InterfaceMethod org/apache/activemq/store/TransactionStore.commit:(Lorg/apache/activemq/command/TransactionId;ZLjava/lang/Runnable;Ljava/lang/Runnable;)V
      22: aload_0
      23: aload_0
      24: getfield      #24                 // Field postCommitTask:Ljava/util/concurrent/FutureTask;
      27: invokevirtual #29                 // Method waitPostCommitDone:(Ljava/util/concurrent/FutureTask;)V
      30: goto          76
      33: astore        5
      35: aload         5
      37: athrow
      38: astore        5
      40: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      43: ldc           #32                 // String Store COMMIT FAILED:
      45: aload         5
      47: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      52: aload_0
      53: invokevirtual #34                 // Method rollback:()V
      56: ldc           #35                 // String STORE COMMIT FAILED: Transaction rolled back
      58: bipush        104
      60: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
      63: astore        6
      65: aload         6
      67: aload         5
      69: invokevirtual #37                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      72: pop
      73: aload         6
      75: athrow
      76: return
    Exception table:
       from    to  target type
           0    30    33   Class javax/transaction/xa/XAException
           0    30    38   Class java/lang/Throwable

  private void illegalStateTransition(java.lang.String) throws javax.transaction.xa.XAException;
    Code:
       0: new           #8                  // class java/lang/StringBuilder
       3: dup
       4: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #38                 // String Cannot call
       9: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_1
      13: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: ldc           #39                 // String  now.
      18: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      24: bipush        -6
      26: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
      29: astore_2
      30: aload_2
      31: athrow

  private void checkForPreparedState(boolean) throws javax.transaction.xa.XAException;
    Code:
       0: iload_1
       1: ifne          14
       4: ldc           #40                 // String Cannot do 2 phase commit if the transaction has not been prepared
       6: bipush        -6
       8: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
      11: astore_2
      12: aload_2
      13: athrow
      14: return

  private void doPrePrepare() throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #41                 // Method prePrepare:()V
       4: goto          42
       7: astore_1
       8: aload_1
       9: athrow
      10: astore_1
      11: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      14: ldc           #42                 // String PRE-PREPARE FAILED:
      16: aload_1
      17: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      22: aload_0
      23: invokevirtual #34                 // Method rollback:()V
      26: ldc           #43                 // String PRE-PREPARE FAILED: Transaction rolled back
      28: bipush        104
      30: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
      33: astore_2
      34: aload_2
      35: aload_1
      36: invokevirtual #37                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      39: pop
      40: aload_2
      41: athrow
      42: return
    Exception table:
       from    to  target type
           0     4     7   Class javax/transaction/xa/XAException
           0     4    10   Class java/lang/Throwable

  public void rollback() throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #7,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          41
      11: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      14: new           #8                  // class java/lang/StringBuilder
      17: dup
      18: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #44                 // String XA Transaction rollback:
      23: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
      30: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      41: aload_0
      42: invokevirtual #18                 // Method getState:()B
      45: tableswitch   { // 0 to 3
                     0: 76
                     1: 83
                     2: 107
                     3: 131
               default: 151
          }
      76: aload_0
      77: invokespecial #20                 // Method setStateFinished:()V
      80: goto          179
      83: aload_0
      84: invokespecial #20                 // Method setStateFinished:()V
      87: aload_0
      88: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
      91: aload_0
      92: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      95: invokeinterface #45,  2           // InterfaceMethod org/apache/activemq/store/TransactionStore.rollback:(Lorg/apache/activemq/command/TransactionId;)V
     100: aload_0
     101: invokespecial #46                 // Method doPostRollback:()V
     104: goto          179
     107: aload_0
     108: invokespecial #20                 // Method setStateFinished:()V
     111: aload_0
     112: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
     115: aload_0
     116: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     119: invokeinterface #45,  2           // InterfaceMethod org/apache/activemq/store/TransactionStore.rollback:(Lorg/apache/activemq/command/TransactionId;)V
     124: aload_0
     125: invokespecial #46                 // Method doPostRollback:()V
     128: goto          179
     131: aload_0
     132: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
     135: aload_0
     136: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     139: invokeinterface #45,  2           // InterfaceMethod org/apache/activemq/store/TransactionStore.rollback:(Lorg/apache/activemq/command/TransactionId;)V
     144: aload_0
     145: invokespecial #46                 // Method doPostRollback:()V
     148: goto          179
     151: new           #8                  // class java/lang/StringBuilder
     154: dup
     155: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
     158: ldc           #47                 // String Invalid state:
     160: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     163: aload_0
     164: invokevirtual #18                 // Method getState:()B
     167: invokevirtual #48                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     170: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     173: bipush        105
     175: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
     178: athrow
     179: return

  private void doPostRollback() throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: invokevirtual #49                 // Method fireAfterRollback:()V
       4: goto          35
       7: astore_1
       8: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      11: ldc           #50                 // String POST ROLLBACK FAILED:
      13: aload_1
      14: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      19: ldc           #51                 // String POST ROLLBACK FAILED
      21: bipush        -3
      23: invokestatic  #36                 // Method newXAException:(Ljava/lang/String;I)Ljavax/transaction/xa/XAException;
      26: astore_2
      27: aload_2
      28: aload_1
      29: invokevirtual #37                 // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      32: pop
      33: aload_2
      34: athrow
      35: return
    Exception table:
       from    to  target type
           0     4     7   Class java/lang/Throwable

  public static javax.transaction.xa.XAException newXAException(java.lang.String, int);
    Code:
       0: new           #30                 // class javax/transaction/xa/XAException
       3: dup
       4: new           #8                  // class java/lang/StringBuilder
       7: dup
       8: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      11: aload_0
      12: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: ldc           #52                 // String
      17: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      20: ldc           #53                 // String xaErrorCode:
      22: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: iload_1
      26: invokevirtual #48                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      29: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      32: invokespecial #54                 // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
      35: astore_2
      36: aload_2
      37: iload_1
      38: putfield      #55                 // Field javax/transaction/xa/XAException.errorCode:I
      41: aload_2
      42: areturn

  public int prepare() throws javax.transaction.xa.XAException, java.io.IOException;
    Code:
       0: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #7,  1            // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          41
      11: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
      14: new           #8                  // class java/lang/StringBuilder
      17: dup
      18: invokespecial #9                  // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #56                 // String XA Transaction prepare:
      23: invokevirtual #11                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
      30: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: invokeinterface #14,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      41: aload_0
      42: invokevirtual #18                 // Method getState:()B
      45: lookupswitch  { // 2
                     0: 72
                     1: 78
               default: 102
          }
      72: aload_0
      73: invokespecial #20                 // Method setStateFinished:()V
      76: iconst_3
      77: ireturn
      78: aload_0
      79: invokespecial #21                 // Method doPrePrepare:()V
      82: aload_0
      83: iconst_2
      84: invokevirtual #57                 // Method setState:(B)V
      87: aload_0
      88: getfield      #2                  // Field transactionStore:Lorg/apache/activemq/store/TransactionStore;
      91: aload_0
      92: invokevirtual #22                 // Method getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      95: invokeinterface #58,  2           // InterfaceMethod org/apache/activemq/store/TransactionStore.prepare:(Lorg/apache/activemq/command/TransactionId;)V
     100: iconst_0
     101: ireturn
     102: aload_0
     103: ldc           #59                 // String prepare
     105: invokespecial #27                 // Method illegalStateTransition:(Ljava/lang/String;)V
     108: iconst_3
     109: ireturn

  private void setStateFinished();
    Code:
       0: aload_0
       1: iconst_3
       2: invokevirtual #57                 // Method setState:(B)V
       5: aload_0
       6: getfield      #4                  // Field broker:Lorg/apache/activemq/broker/TransactionBroker;
       9: aload_0
      10: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
      13: invokevirtual #60                 // Method org/apache/activemq/broker/TransactionBroker.removeTransaction:(Lorg/apache/activemq/command/XATransactionId;)V
      16: return

  public org.apache.activemq.command.ConnectionId getConnectionId();
    Code:
       0: aload_0
       1: getfield      #5                  // Field connectionId:Lorg/apache/activemq/command/ConnectionId;
       4: areturn

  public org.apache.activemq.command.TransactionId getTransactionId();
    Code:
       0: aload_0
       1: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
       4: areturn

  public org.slf4j.Logger getLog();
    Code:
       0: getstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  public org.apache.activemq.command.XATransactionId getXid();
    Code:
       0: aload_0
       1: getfield      #3                  // Field xid:Lorg/apache/activemq/command/XATransactionId;
       4: areturn

  static {};
    Code:
       0: ldc_w         #61                 // class org/apache/activemq/transaction/XATransaction
       3: invokestatic  #62                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #6                  // Field LOG:Lorg/slf4j/Logger;
       9: return
}

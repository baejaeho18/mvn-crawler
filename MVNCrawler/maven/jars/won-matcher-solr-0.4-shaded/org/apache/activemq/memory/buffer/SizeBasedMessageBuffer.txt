Compiled from "SizeBasedMessageBuffer.java"
public class org.apache.activemq.memory.buffer.SizeBasedMessageBuffer implements org.apache.activemq.memory.buffer.MessageBuffer {
  private int limit;

  private java.util.List<org.apache.activemq.memory.buffer.MessageQueue> bubbleList;

  private int size;

  private java.lang.Object lock;

  public org.apache.activemq.memory.buffer.SizeBasedMessageBuffer();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc           #2                  // int 6553600
       7: putfield      #3                  // Field limit:I
      10: aload_0
      11: new           #4                  // class java/util/ArrayList
      14: dup
      15: invokespecial #5                  // Method java/util/ArrayList."<init>":()V
      18: putfield      #6                  // Field bubbleList:Ljava/util/List;
      21: aload_0
      22: new           #7                  // class java/lang/Object
      25: dup
      26: invokespecial #1                  // Method java/lang/Object."<init>":()V
      29: putfield      #8                  // Field lock:Ljava/lang/Object;
      32: return

  public org.apache.activemq.memory.buffer.SizeBasedMessageBuffer(int);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc           #2                  // int 6553600
       7: putfield      #3                  // Field limit:I
      10: aload_0
      11: new           #4                  // class java/util/ArrayList
      14: dup
      15: invokespecial #5                  // Method java/util/ArrayList."<init>":()V
      18: putfield      #6                  // Field bubbleList:Ljava/util/List;
      21: aload_0
      22: new           #7                  // class java/lang/Object
      25: dup
      26: invokespecial #1                  // Method java/lang/Object."<init>":()V
      29: putfield      #8                  // Field lock:Ljava/lang/Object;
      32: aload_0
      33: iload_1
      34: putfield      #3                  // Field limit:I
      37: return

  public int getSize();
    Code:
       0: aload_0
       1: getfield      #8                  // Field lock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #9                  // Field size:I
      11: aload_1
      12: monitorexit
      13: ireturn
      14: astore_2
      15: aload_1
      16: monitorexit
      17: aload_2
      18: athrow
    Exception table:
       from    to  target type
           7    13    14   any
          14    17    14   any

  public org.apache.activemq.memory.buffer.MessageQueue createMessageQueue();
    Code:
       0: new           #10                 // class org/apache/activemq/memory/buffer/MessageQueue
       3: dup
       4: aload_0
       5: invokespecial #11                 // Method org/apache/activemq/memory/buffer/MessageQueue."<init>":(Lorg/apache/activemq/memory/buffer/MessageBuffer;)V
       8: astore_1
       9: aload_0
      10: getfield      #8                  // Field lock:Ljava/lang/Object;
      13: dup
      14: astore_2
      15: monitorenter
      16: aload_1
      17: aload_0
      18: getfield      #6                  // Field bubbleList:Ljava/util/List;
      21: invokeinterface #12,  1           // InterfaceMethod java/util/List.size:()I
      26: invokevirtual #13                 // Method org/apache/activemq/memory/buffer/MessageQueue.setPosition:(I)V
      29: aload_0
      30: getfield      #6                  // Field bubbleList:Ljava/util/List;
      33: aload_1
      34: invokeinterface #14,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      39: pop
      40: aload_2
      41: monitorexit
      42: goto          50
      45: astore_3
      46: aload_2
      47: monitorexit
      48: aload_3
      49: athrow
      50: aload_1
      51: areturn
    Exception table:
       from    to  target type
          16    42    45   any
          45    48    45   any

  public void onSizeChanged(org.apache.activemq.memory.buffer.MessageQueue, int, int);
    Code:
       0: aload_0
       1: getfield      #8                  // Field lock:Ljava/lang/Object;
       4: dup
       5: astore        4
       7: monitorenter
       8: aload_0
       9: aload_1
      10: iload_3
      11: invokevirtual #15                 // Method bubbleUp:(Lorg/apache/activemq/memory/buffer/MessageQueue;I)V
      14: aload_0
      15: dup
      16: getfield      #9                  // Field size:I
      19: iload_2
      20: iadd
      21: putfield      #9                  // Field size:I
      24: aload_0
      25: getfield      #9                  // Field size:I
      28: aload_0
      29: getfield      #3                  // Field limit:I
      32: if_icmple     74
      35: aload_0
      36: getfield      #6                  // Field bubbleList:Ljava/util/List;
      39: iconst_0
      40: invokeinterface #16,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      45: checkcast     #10                 // class org/apache/activemq/memory/buffer/MessageQueue
      48: astore        5
      50: aload_0
      51: dup
      52: getfield      #9                  // Field size:I
      55: aload         5
      57: invokevirtual #17                 // Method org/apache/activemq/memory/buffer/MessageQueue.evictMessage:()I
      60: isub
      61: putfield      #9                  // Field size:I
      64: aload_0
      65: aload         5
      67: iconst_0
      68: invokevirtual #18                 // Method bubbleDown:(Lorg/apache/activemq/memory/buffer/MessageQueue;I)V
      71: goto          24
      74: aload         4
      76: monitorexit
      77: goto          88
      80: astore        6
      82: aload         4
      84: monitorexit
      85: aload         6
      87: athrow
      88: return
    Exception table:
       from    to  target type
           8    77    80   any
          80    85    80   any

  public void clear();
    Code:
       0: aload_0
       1: getfield      #8                  // Field lock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #6                  // Field bubbleList:Ljava/util/List;
      11: invokeinterface #19,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      16: astore_2
      17: aload_2
      18: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          43
      26: aload_2
      27: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #10                 // class org/apache/activemq/memory/buffer/MessageQueue
      35: astore_3
      36: aload_3
      37: invokevirtual #22                 // Method org/apache/activemq/memory/buffer/MessageQueue.clear:()V
      40: goto          17
      43: aload_0
      44: iconst_0
      45: putfield      #9                  // Field size:I
      48: aload_1
      49: monitorexit
      50: goto          60
      53: astore        4
      55: aload_1
      56: monitorexit
      57: aload         4
      59: athrow
      60: return
    Exception table:
       from    to  target type
           7    50    53   any
          53    57    53   any

  protected void bubbleUp(org.apache.activemq.memory.buffer.MessageQueue, int);
    Code:
       0: aload_1
       1: invokevirtual #23                 // Method org/apache/activemq/memory/buffer/MessageQueue.getPosition:()I
       4: istore_3
       5: iinc          3, -1
       8: iload_3
       9: iflt          50
      12: aload_0
      13: getfield      #6                  // Field bubbleList:Ljava/util/List;
      16: iload_3
      17: invokeinterface #16,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      22: checkcast     #10                 // class org/apache/activemq/memory/buffer/MessageQueue
      25: astore        4
      27: aload         4
      29: invokevirtual #24                 // Method org/apache/activemq/memory/buffer/MessageQueue.getSize:()I
      32: iload_2
      33: if_icmpge     50
      36: aload_0
      37: iload_3
      38: aload         4
      40: iload_3
      41: iconst_1
      42: iadd
      43: aload_1
      44: invokevirtual #25                 // Method swap:(ILorg/apache/activemq/memory/buffer/MessageQueue;ILorg/apache/activemq/memory/buffer/MessageQueue;)V
      47: goto          5
      50: return

  protected void bubbleDown(org.apache.activemq.memory.buffer.MessageQueue, int);
    Code:
       0: aload_1
       1: invokevirtual #24                 // Method org/apache/activemq/memory/buffer/MessageQueue.getSize:()I
       4: istore_3
       5: aload_0
       6: getfield      #6                  // Field bubbleList:Ljava/util/List;
       9: invokeinterface #12,  1           // InterfaceMethod java/util/List.size:()I
      14: istore        4
      16: iload_2
      17: iconst_1
      18: iadd
      19: istore        5
      21: iload         5
      23: iload         4
      25: if_icmpge     72
      28: aload_0
      29: getfield      #6                  // Field bubbleList:Ljava/util/List;
      32: iload         5
      34: invokeinterface #16,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      39: checkcast     #10                 // class org/apache/activemq/memory/buffer/MessageQueue
      42: astore        6
      44: aload         6
      46: invokevirtual #24                 // Method org/apache/activemq/memory/buffer/MessageQueue.getSize:()I
      49: iload_3
      50: if_icmple     72
      53: aload_0
      54: iload_2
      55: aload_1
      56: iload         5
      58: aload         6
      60: invokevirtual #25                 // Method swap:(ILorg/apache/activemq/memory/buffer/MessageQueue;ILorg/apache/activemq/memory/buffer/MessageQueue;)V
      63: iload         5
      65: istore_2
      66: iinc          5, 1
      69: goto          21
      72: return

  protected void swap(int, org.apache.activemq.memory.buffer.MessageQueue, int, org.apache.activemq.memory.buffer.MessageQueue);
    Code:
       0: aload_0
       1: getfield      #6                  // Field bubbleList:Ljava/util/List;
       4: iload_1
       5: aload         4
       7: invokeinterface #26,  3           // InterfaceMethod java/util/List.set:(ILjava/lang/Object;)Ljava/lang/Object;
      12: pop
      13: aload_0
      14: getfield      #6                  // Field bubbleList:Ljava/util/List;
      17: iload_3
      18: aload_2
      19: invokeinterface #26,  3           // InterfaceMethod java/util/List.set:(ILjava/lang/Object;)Ljava/lang/Object;
      24: pop
      25: aload_2
      26: iload_3
      27: invokevirtual #13                 // Method org/apache/activemq/memory/buffer/MessageQueue.setPosition:(I)V
      30: aload         4
      32: iload_1
      33: invokevirtual #13                 // Method org/apache/activemq/memory/buffer/MessageQueue.setPosition:(I)V
      36: return
}

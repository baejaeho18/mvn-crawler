Compiled from "ActiveMQMessageConsumer.java"
public class org.apache.activemq.ActiveMQMessageConsumer implements org.apache.activemq.MessageAvailableConsumer,org.apache.activemq.management.StatsCapable,org.apache.activemq.ActiveMQDispatcher {
  private static final org.slf4j.Logger LOG;

  protected final org.apache.activemq.ActiveMQSession session;

  protected final org.apache.activemq.command.ConsumerInfo info;

  protected final org.apache.activemq.MessageDispatchChannel unconsumedMessages;

  protected final java.util.LinkedList<org.apache.activemq.command.MessageDispatch> deliveredMessages;

  private org.apache.activemq.ActiveMQMessageConsumer$PreviouslyDeliveredMap<org.apache.activemq.command.MessageId, java.lang.Boolean> previouslyDeliveredMessages;

  private int deliveredCounter;

  private int additionalWindowSize;

  private long redeliveryDelay;

  private int ackCounter;

  private int dispatchedCount;

  private final java.util.concurrent.atomic.AtomicReference<javax.jms.MessageListener> messageListener;

  private final org.apache.activemq.management.JMSConsumerStatsImpl stats;

  private final java.lang.String selector;

  private boolean synchronizationRegistered;

  private final java.util.concurrent.atomic.AtomicBoolean started;

  private org.apache.activemq.MessageAvailableListener availableListener;

  private org.apache.activemq.RedeliveryPolicy redeliveryPolicy;

  private boolean optimizeAcknowledge;

  private final java.util.concurrent.atomic.AtomicBoolean deliveryingAcknowledgements;

  private java.util.concurrent.ExecutorService executorService;

  private org.apache.activemq.MessageTransformer transformer;

  private boolean clearDeliveredList;

  java.util.concurrent.atomic.AtomicInteger inProgressClearRequiredFlag;

  private org.apache.activemq.command.MessageAck pendingAck;

  private long lastDeliveredSequenceId;

  private java.io.IOException failureError;

  private long optimizeAckTimestamp;

  private long optimizeAcknowledgeTimeOut;

  private long optimizedAckScheduledAckInterval;

  private java.lang.Runnable optimizedAckTask;

  private long failoverRedeliveryWaitPeriod;

  private boolean transactedIndividualAck;

  private boolean nonBlockingRedelivery;

  public org.apache.activemq.ActiveMQMessageConsumer(org.apache.activemq.ActiveMQSession, org.apache.activemq.command.ConsumerId, org.apache.activemq.command.ActiveMQDestination, java.lang.String, java.lang.String, int, int, boolean, boolean, boolean, javax.jms.MessageListener) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #10                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #11                 // class java/util/LinkedList
       8: dup
       9: invokespecial #12                 // Method java/util/LinkedList."<init>":()V
      12: putfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      15: aload_0
      16: new           #14                 // class java/util/concurrent/atomic/AtomicReference
      19: dup
      20: invokespecial #15                 // Method java/util/concurrent/atomic/AtomicReference."<init>":()V
      23: putfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
      26: aload_0
      27: new           #17                 // class java/util/concurrent/atomic/AtomicBoolean
      30: dup
      31: iconst_0
      32: invokespecial #18                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      35: putfield      #2                  // Field started:Ljava/util/concurrent/atomic/AtomicBoolean;
      38: aload_0
      39: new           #17                 // class java/util/concurrent/atomic/AtomicBoolean
      42: dup
      43: invokespecial #19                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
      46: putfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
      49: aload_0
      50: new           #20                 // class java/util/concurrent/atomic/AtomicInteger
      53: dup
      54: iconst_0
      55: invokespecial #21                 // Method java/util/concurrent/atomic/AtomicInteger."<init>":(I)V
      58: putfield      #22                 // Field inProgressClearRequiredFlag:Ljava/util/concurrent/atomic/AtomicInteger;
      61: aload_0
      62: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
      65: putfield      #24                 // Field optimizeAckTimestamp:J
      68: aload_0
      69: lconst_0
      70: putfield      #25                 // Field optimizeAcknowledgeTimeOut:J
      73: aload_0
      74: lconst_0
      75: putfield      #26                 // Field optimizedAckScheduledAckInterval:J
      78: aload_0
      79: lconst_0
      80: putfield      #27                 // Field failoverRedeliveryWaitPeriod:J
      83: aload_0
      84: iconst_0
      85: putfield      #7                  // Field transactedIndividualAck:Z
      88: aload_0
      89: iconst_0
      90: putfield      #28                 // Field nonBlockingRedelivery:Z
      93: aload_3
      94: ifnonnull     107
      97: new           #29                 // class javax/jms/InvalidDestinationException
     100: dup
     101: ldc           #30                 // String Don\'t understand null destinations
     103: invokespecial #31                 // Method javax/jms/InvalidDestinationException."<init>":(Ljava/lang/String;)V
     106: athrow
     107: aload_3
     108: invokevirtual #32                 // Method org/apache/activemq/command/ActiveMQDestination.getPhysicalName:()Ljava/lang/String;
     111: ifnonnull     124
     114: new           #29                 // class javax/jms/InvalidDestinationException
     117: dup
     118: ldc           #33                 // String The destination object was not given a physical name.
     120: invokespecial #31                 // Method javax/jms/InvalidDestinationException."<init>":(Ljava/lang/String;)V
     123: athrow
     124: aload_3
     125: invokevirtual #34                 // Method org/apache/activemq/command/ActiveMQDestination.isTemporary:()Z
     128: ifeq          240
     131: aload_3
     132: invokevirtual #32                 // Method org/apache/activemq/command/ActiveMQDestination.getPhysicalName:()Ljava/lang/String;
     135: astore        12
     137: aload         12
     139: ifnonnull     169
     142: new           #35                 // class java/lang/IllegalArgumentException
     145: dup
     146: new           #36                 // class java/lang/StringBuilder
     149: dup
     150: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     153: ldc           #38                 // String Physical name of Destination should be valid:
     155: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     158: aload_3
     159: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     162: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     165: invokespecial #42                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     168: athrow
     169: aload_1
     170: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     173: invokevirtual #44                 // Method org/apache/activemq/ActiveMQConnection.getConnectionInfo:()Lorg/apache/activemq/command/ConnectionInfo;
     176: invokevirtual #45                 // Method org/apache/activemq/command/ConnectionInfo.getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     179: invokevirtual #46                 // Method org/apache/activemq/command/ConnectionId.getValue:()Ljava/lang/String;
     182: astore        13
     184: aload         12
     186: aload         13
     188: invokevirtual #47                 // Method java/lang/String.indexOf:(Ljava/lang/String;)I
     191: ifge          204
     194: new           #29                 // class javax/jms/InvalidDestinationException
     197: dup
     198: ldc           #48                 // String Cannot use a Temporary destination from another Connection
     200: invokespecial #31                 // Method javax/jms/InvalidDestinationException."<init>":(Ljava/lang/String;)V
     203: athrow
     204: aload_1
     205: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     208: aload_3
     209: invokevirtual #49                 // Method org/apache/activemq/ActiveMQConnection.isDeleted:(Lorg/apache/activemq/command/ActiveMQDestination;)Z
     212: ifeq          225
     215: new           #29                 // class javax/jms/InvalidDestinationException
     218: dup
     219: ldc           #50                 // String Cannot use a Temporary destination that has been deleted
     221: invokespecial #31                 // Method javax/jms/InvalidDestinationException."<init>":(Ljava/lang/String;)V
     224: athrow
     225: iload         6
     227: ifge          240
     230: new           #51                 // class javax/jms/JMSException
     233: dup
     234: ldc           #52                 // String Cannot have a prefetch size less than zero
     236: invokespecial #53                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     239: athrow
     240: aload_1
     241: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     244: invokevirtual #54                 // Method org/apache/activemq/ActiveMQConnection.isMessagePrioritySupported:()Z
     247: ifeq          264
     250: aload_0
     251: new           #55                 // class org/apache/activemq/SimplePriorityMessageDispatchChannel
     254: dup
     255: invokespecial #56                 // Method org/apache/activemq/SimplePriorityMessageDispatchChannel."<init>":()V
     258: putfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     261: goto          275
     264: aload_0
     265: new           #58                 // class org/apache/activemq/FifoMessageDispatchChannel
     268: dup
     269: invokespecial #59                 // Method org/apache/activemq/FifoMessageDispatchChannel."<init>":()V
     272: putfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     275: aload_0
     276: aload_1
     277: putfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     280: aload_0
     281: aload_1
     282: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     285: invokevirtual #61                 // Method org/apache/activemq/ActiveMQConnection.getRedeliveryPolicyMap:()Lorg/apache/activemq/broker/region/policy/RedeliveryPolicyMap;
     288: aload_3
     289: invokevirtual #62                 // Method org/apache/activemq/broker/region/policy/RedeliveryPolicyMap.getEntryFor:(Lorg/apache/activemq/command/ActiveMQDestination;)Lorg/apache/activemq/RedeliveryPolicy;
     292: putfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     295: aload_0
     296: aload_1
     297: invokevirtual #64                 // Method org/apache/activemq/ActiveMQSession.getTransformer:()Lorg/apache/activemq/MessageTransformer;
     300: invokevirtual #65                 // Method setTransformer:(Lorg/apache/activemq/MessageTransformer;)V
     303: aload_0
     304: new           #66                 // class org/apache/activemq/command/ConsumerInfo
     307: dup
     308: aload_2
     309: invokespecial #67                 // Method org/apache/activemq/command/ConsumerInfo."<init>":(Lorg/apache/activemq/command/ConsumerId;)V
     312: putfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     315: aload_0
     316: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     319: aload_0
     320: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     323: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     326: invokevirtual #69                 // Method org/apache/activemq/ActiveMQConnection.isExclusiveConsumer:()Z
     329: invokevirtual #70                 // Method org/apache/activemq/command/ConsumerInfo.setExclusive:(Z)V
     332: aload_0
     333: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     336: aload_0
     337: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     340: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     343: invokevirtual #71                 // Method org/apache/activemq/ActiveMQConnection.getClientID:()Ljava/lang/String;
     346: invokevirtual #72                 // Method org/apache/activemq/command/ConsumerInfo.setClientId:(Ljava/lang/String;)V
     349: aload_0
     350: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     353: aload         4
     355: invokevirtual #73                 // Method org/apache/activemq/command/ConsumerInfo.setSubscriptionName:(Ljava/lang/String;)V
     358: aload_0
     359: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     362: iload         6
     364: invokevirtual #74                 // Method org/apache/activemq/command/ConsumerInfo.setPrefetchSize:(I)V
     367: aload_0
     368: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     371: iload         6
     373: invokevirtual #75                 // Method org/apache/activemq/command/ConsumerInfo.setCurrentPrefetchSize:(I)V
     376: aload_0
     377: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     380: iload         7
     382: invokevirtual #76                 // Method org/apache/activemq/command/ConsumerInfo.setMaximumPendingMessageLimit:(I)V
     385: aload_0
     386: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     389: iload         8
     391: invokevirtual #77                 // Method org/apache/activemq/command/ConsumerInfo.setNoLocal:(Z)V
     394: aload_0
     395: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     398: iload         10
     400: invokevirtual #78                 // Method org/apache/activemq/command/ConsumerInfo.setDispatchAsync:(Z)V
     403: aload_0
     404: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     407: aload_0
     408: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     411: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     414: invokevirtual #79                 // Method org/apache/activemq/ActiveMQConnection.isUseRetroactiveConsumer:()Z
     417: invokevirtual #80                 // Method org/apache/activemq/command/ConsumerInfo.setRetroactive:(Z)V
     420: aload_0
     421: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     424: aconst_null
     425: invokevirtual #81                 // Method org/apache/activemq/command/ConsumerInfo.setSelector:(Ljava/lang/String;)V
     428: aload_3
     429: invokevirtual #82                 // Method org/apache/activemq/command/ActiveMQDestination.getOptions:()Ljava/util/Map;
     432: ifnull        550
     435: new           #83                 // class java/util/HashMap
     438: dup
     439: aload_3
     440: invokevirtual #82                 // Method org/apache/activemq/command/ActiveMQDestination.getOptions:()Ljava/util/Map;
     443: invokespecial #84                 // Method java/util/HashMap."<init>":(Ljava/util/Map;)V
     446: ldc           #85                 // String consumer.
     448: invokestatic  #86                 // Method org/apache/activemq/util/IntrospectionSupport.extractProperties:(Ljava/util/Map;Ljava/lang/String;)Ljava/util/Map;
     451: astore        12
     453: aload_0
     454: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     457: aload         12
     459: invokestatic  #87                 // Method org/apache/activemq/util/IntrospectionSupport.setProperties:(Ljava/lang/Object;Ljava/util/Map;)Z
     462: pop
     463: aload         12
     465: invokeinterface #88,  1           // InterfaceMethod java/util/Map.size:()I
     470: ifle          550
     473: new           #36                 // class java/lang/StringBuilder
     476: dup
     477: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     480: ldc           #89                 // String There are
     482: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     485: aload         12
     487: invokeinterface #88,  1           // InterfaceMethod java/util/Map.size:()I
     492: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     495: ldc           #91                 // String  consumer options that couldn\'t be set on the consumer.
     497: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     500: ldc           #92                 // String  Check the options are spelled correctly.
     502: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     505: ldc           #93                 // String  Unknown parameters=[
     507: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     510: aload         12
     512: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     515: ldc           #94                 // String ].
     517: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     520: ldc           #95                 // String  This consumer cannot be started.
     522: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     525: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     528: astore        13
     530: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     533: aload         13
     535: invokeinterface #96,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     540: new           #97                 // class org/apache/activemq/ConfigurationException
     543: dup
     544: aload         13
     546: invokespecial #98                 // Method org/apache/activemq/ConfigurationException."<init>":(Ljava/lang/String;)V
     549: athrow
     550: aload_0
     551: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     554: aload_3
     555: invokevirtual #99                 // Method org/apache/activemq/command/ConsumerInfo.setDestination:(Lorg/apache/activemq/command/ActiveMQDestination;)V
     558: aload_0
     559: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     562: iload         9
     564: invokevirtual #100                // Method org/apache/activemq/command/ConsumerInfo.setBrowser:(Z)V
     567: aload         5
     569: ifnull        607
     572: aload         5
     574: invokevirtual #101                // Method java/lang/String.trim:()Ljava/lang/String;
     577: invokevirtual #102                // Method java/lang/String.length:()I
     580: ifeq          607
     583: aload         5
     585: invokestatic  #103                // Method org/apache/activemq/selector/SelectorParser.parse:(Ljava/lang/String;)Lorg/apache/activemq/filter/BooleanExpression;
     588: pop
     589: aload_0
     590: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     593: aload         5
     595: invokevirtual #81                 // Method org/apache/activemq/command/ConsumerInfo.setSelector:(Ljava/lang/String;)V
     598: aload_0
     599: aload         5
     601: putfield      #104                // Field selector:Ljava/lang/String;
     604: goto          647
     607: aload_0
     608: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     611: invokevirtual #105                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
     614: ifnull        642
     617: aload_0
     618: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     621: invokevirtual #105                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
     624: invokestatic  #103                // Method org/apache/activemq/selector/SelectorParser.parse:(Ljava/lang/String;)Lorg/apache/activemq/filter/BooleanExpression;
     627: pop
     628: aload_0
     629: aload_0
     630: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     633: invokevirtual #105                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
     636: putfield      #104                // Field selector:Ljava/lang/String;
     639: goto          647
     642: aload_0
     643: aconst_null
     644: putfield      #104                // Field selector:Ljava/lang/String;
     647: aload_0
     648: new           #106                // class org/apache/activemq/management/JMSConsumerStatsImpl
     651: dup
     652: aload_1
     653: invokevirtual #107                // Method org/apache/activemq/ActiveMQSession.getSessionStats:()Lorg/apache/activemq/management/JMSSessionStatsImpl;
     656: aload_3
     657: invokespecial #108                // Method org/apache/activemq/management/JMSConsumerStatsImpl."<init>":(Lorg/apache/activemq/management/JMSSessionStatsImpl;Ljavax/jms/Destination;)V
     660: putfield      #109                // Field stats:Lorg/apache/activemq/management/JMSConsumerStatsImpl;
     663: aload_0
     664: aload_1
     665: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     668: invokevirtual #110                // Method org/apache/activemq/ActiveMQConnection.isOptimizeAcknowledge:()Z
     671: ifeq          695
     674: aload_1
     675: invokevirtual #111                // Method org/apache/activemq/ActiveMQSession.isAutoAcknowledge:()Z
     678: ifeq          695
     681: aload_0
     682: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     685: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
     688: ifne          695
     691: iconst_1
     692: goto          696
     695: iconst_0
     696: putfield      #1                  // Field optimizeAcknowledge:Z
     699: aload_0
     700: getfield      #1                  // Field optimizeAcknowledge:Z
     703: ifeq          728
     706: aload_0
     707: aload_1
     708: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     711: invokevirtual #113                // Method org/apache/activemq/ActiveMQConnection.getOptimizeAcknowledgeTimeOut:()J
     714: putfield      #25                 // Field optimizeAcknowledgeTimeOut:J
     717: aload_0
     718: aload_1
     719: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     722: invokevirtual #114                // Method org/apache/activemq/ActiveMQConnection.getOptimizedAckScheduledAckInterval:()J
     725: invokevirtual #115                // Method setOptimizedAckScheduledAckInterval:(J)V
     728: aload_0
     729: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     732: aload_0
     733: getfield      #1                  // Field optimizeAcknowledge:Z
     736: invokevirtual #116                // Method org/apache/activemq/command/ConsumerInfo.setOptimizedAcknowledge:(Z)V
     739: aload_0
     740: aload_1
     741: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     744: invokevirtual #117                // Method org/apache/activemq/ActiveMQConnection.getConsumerFailoverRedeliveryWaitPeriod:()J
     747: putfield      #27                 // Field failoverRedeliveryWaitPeriod:J
     750: aload_0
     751: aload_1
     752: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     755: invokevirtual #118                // Method org/apache/activemq/ActiveMQConnection.isNonBlockingRedelivery:()Z
     758: putfield      #28                 // Field nonBlockingRedelivery:Z
     761: aload_0
     762: aload_1
     763: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     766: invokevirtual #119                // Method org/apache/activemq/ActiveMQConnection.isTransactedIndividualAck:()Z
     769: ifne          779
     772: aload_0
     773: getfield      #28                 // Field nonBlockingRedelivery:Z
     776: ifeq          783
     779: iconst_1
     780: goto          784
     783: iconst_0
     784: putfield      #7                  // Field transactedIndividualAck:Z
     787: aload         11
     789: ifnull        798
     792: aload_0
     793: aload         11
     795: invokevirtual #120                // Method setMessageListener:(Ljavax/jms/MessageListener;)V
     798: aload_0
     799: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     802: aload_0
     803: invokevirtual #121                // Method org/apache/activemq/ActiveMQSession.addConsumer:(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
     806: aload_0
     807: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     810: aload_0
     811: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     814: invokevirtual #122                // Method org/apache/activemq/ActiveMQSession.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     817: pop
     818: goto          834
     821: astore        12
     823: aload_0
     824: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     827: aload_0
     828: invokevirtual #123                // Method org/apache/activemq/ActiveMQSession.removeConsumer:(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
     831: aload         12
     833: athrow
     834: aload_1
     835: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     838: invokevirtual #124                // Method org/apache/activemq/ActiveMQConnection.isStarted:()Z
     841: ifeq          848
     844: aload_0
     845: invokevirtual #125                // Method start:()V
     848: return
    Exception table:
       from    to  target type
         798   818   821   Class javax/jms/JMSException

  private boolean isAutoAcknowledgeEach();
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #111                // Method org/apache/activemq/ActiveMQSession.isAutoAcknowledge:()Z
       7: ifne          30
      10: aload_0
      11: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      14: invokevirtual #126                // Method org/apache/activemq/ActiveMQSession.isDupsOkAcknowledge:()Z
      17: ifeq          34
      20: aload_0
      21: invokevirtual #127                // Method getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      24: invokevirtual #128                // Method org/apache/activemq/command/ActiveMQDestination.isQueue:()Z
      27: ifeq          34
      30: iconst_1
      31: goto          35
      34: iconst_0
      35: ireturn

  private boolean isAutoAcknowledgeBatch();
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #126                // Method org/apache/activemq/ActiveMQSession.isDupsOkAcknowledge:()Z
       7: ifeq          24
      10: aload_0
      11: invokevirtual #127                // Method getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      14: invokevirtual #128                // Method org/apache/activemq/command/ActiveMQDestination.isQueue:()Z
      17: ifne          24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ireturn

  public org.apache.activemq.management.StatsImpl getStats();
    Code:
       0: aload_0
       1: getfield      #109                // Field stats:Lorg/apache/activemq/management/JMSConsumerStatsImpl;
       4: areturn

  public org.apache.activemq.management.JMSConsumerStatsImpl getConsumerStats();
    Code:
       0: aload_0
       1: getfield      #109                // Field stats:Lorg/apache/activemq/management/JMSConsumerStatsImpl;
       4: areturn

  public org.apache.activemq.RedeliveryPolicy getRedeliveryPolicy();
    Code:
       0: aload_0
       1: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
       4: areturn

  public void setRedeliveryPolicy(org.apache.activemq.RedeliveryPolicy);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
       5: return

  public org.apache.activemq.MessageTransformer getTransformer();
    Code:
       0: aload_0
       1: getfield      #129                // Field transformer:Lorg/apache/activemq/MessageTransformer;
       4: areturn

  public void setTransformer(org.apache.activemq.MessageTransformer);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #129                // Field transformer:Lorg/apache/activemq/MessageTransformer;
       5: return

  public org.apache.activemq.command.ConsumerId getConsumerId();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #130                // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
       7: areturn

  public java.lang.String getConsumerName();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #131                // Method org/apache/activemq/command/ConsumerInfo.getSubscriptionName:()Ljava/lang/String;
       7: areturn

  protected boolean isNoLocal();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #132                // Method org/apache/activemq/command/ConsumerInfo.isNoLocal:()Z
       7: ireturn

  protected boolean isBrowser();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
       7: ireturn

  protected org.apache.activemq.command.ActiveMQDestination getDestination();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #133                // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
       7: areturn

  public int getPrefetchNumber();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
       7: ireturn

  public boolean isDurableSubscriber();
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #131                // Method org/apache/activemq/command/ConsumerInfo.getSubscriptionName:()Ljava/lang/String;
       7: ifnull        27
      10: aload_0
      11: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      14: invokevirtual #133                // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      17: invokevirtual #135                // Method org/apache/activemq/command/ActiveMQDestination.isTopic:()Z
      20: ifeq          27
      23: iconst_1
      24: goto          28
      27: iconst_0
      28: ireturn

  public java.lang.String getMessageSelector() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: getfield      #104                // Field selector:Ljava/lang/String;
       8: areturn

  public javax.jms.MessageListener getMessageListener() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
       8: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      11: checkcast     #138                // class javax/jms/MessageListener
      14: areturn

  public void setMessageListener(javax.jms.MessageListener) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       8: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
      11: ifne          24
      14: new           #51                 // class javax/jms/JMSException
      17: dup
      18: ldc           #139                // String Illegal prefetch size of zero. This setting is not supported for asynchronous consumers please set a value of at least 1
      20: invokespecial #53                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
      23: athrow
      24: aload_1
      25: ifnull        81
      28: aload_0
      29: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      32: invokevirtual #140                // Method org/apache/activemq/ActiveMQSession.isRunning:()Z
      35: istore_2
      36: iload_2
      37: ifeq          47
      40: aload_0
      41: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      44: invokevirtual #141                // Method org/apache/activemq/ActiveMQSession.stop:()V
      47: aload_0
      48: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
      51: aload_1
      52: invokevirtual #142                // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      55: aload_0
      56: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      59: aload_0
      60: aload_0
      61: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      64: invokevirtual #143                // Method org/apache/activemq/ActiveMQSession.redispatch:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/MessageDispatchChannel;)V
      67: iload_2
      68: ifeq          78
      71: aload_0
      72: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      75: invokevirtual #144                // Method org/apache/activemq/ActiveMQSession.start:()V
      78: goto          89
      81: aload_0
      82: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
      85: aconst_null
      86: invokevirtual #142                // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      89: return

  public org.apache.activemq.MessageAvailableListener getAvailableListener();
    Code:
       0: aload_0
       1: getfield      #145                // Field availableListener:Lorg/apache/activemq/MessageAvailableListener;
       4: areturn

  public void setAvailableListener(org.apache.activemq.MessageAvailableListener);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #145                // Field availableListener:Lorg/apache/activemq/MessageAvailableListener;
       5: return

  private org.apache.activemq.command.MessageDispatch dequeue(long) throws javax.jms.JMSException;
    Code:
       0: lconst_0
       1: lstore_3
       2: lload_1
       3: lconst_0
       4: lcmp
       5: ifle          14
       8: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
      11: lload_1
      12: ladd
      13: lstore_3
      14: aload_0
      15: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      18: lload_1
      19: invokeinterface #146,  3          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      24: astore        5
      26: aload         5
      28: ifnonnull     79
      31: lload_1
      32: lconst_0
      33: lcmp
      34: ifle          62
      37: aload_0
      38: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      41: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
      46: ifne          62
      49: lload_3
      50: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
      53: lsub
      54: lconst_0
      55: invokestatic  #148                // Method java/lang/Math.max:(JJ)J
      58: lstore_1
      59: goto          325
      62: aload_0
      63: getfield      #149                // Field failureError:Ljava/io/IOException;
      66: ifnull        77
      69: aload_0
      70: getfield      #149                // Field failureError:Ljava/io/IOException;
      73: invokestatic  #150                // Method org/apache/activemq/util/JMSExceptionSupport.create:(Ljava/lang/Exception;)Ljavax/jms/JMSException;
      76: athrow
      77: aconst_null
      78: areturn
      79: aload         5
      81: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      84: ifnonnull     89
      87: aconst_null
      88: areturn
      89: aload         5
      91: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      94: invokevirtual #152                // Method org/apache/activemq/command/Message.isExpired:()Z
      97: ifeq          178
     100: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     103: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     108: ifeq          146
     111: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     114: new           #36                 // class java/lang/StringBuilder
     117: dup
     118: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     121: aload_0
     122: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     125: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     128: ldc           #155                // String  received expired message:
     130: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: aload         5
     135: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     138: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     141: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     146: aload_0
     147: aload         5
     149: invokespecial #157                // Method beforeMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;)V
     152: aload_0
     153: aload         5
     155: iconst_1
     156: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
     159: lload_1
     160: lconst_0
     161: lcmp
     162: ifle          325
     165: lload_3
     166: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
     169: lsub
     170: lconst_0
     171: invokestatic  #148                // Method java/lang/Math.max:(JJ)J
     174: lstore_1
     175: goto          325
     178: aload_0
     179: aload         5
     181: invokespecial #159                // Method redeliveryExceeded:(Lorg/apache/activemq/command/MessageDispatch;)Z
     184: ifeq          276
     187: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     190: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     195: ifeq          233
     198: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     201: new           #36                 // class java/lang/StringBuilder
     204: dup
     205: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     208: aload_0
     209: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     212: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     215: ldc           #160                // String  received with excessive redelivered:
     217: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     220: aload         5
     222: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     225: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     228: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     233: aload_0
     234: aload         5
     236: new           #36                 // class java/lang/StringBuilder
     239: dup
     240: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     243: ldc           #161                // String dispatch to
     245: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     248: aload_0
     249: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     252: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     255: ldc           #162                // String  exceeds redelivery policy limit:
     257: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     260: aload_0
     261: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     264: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     267: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     270: invokespecial #163                // Method posionAck:(Lorg/apache/activemq/command/MessageDispatch;Ljava/lang/String;)V
     273: goto          325
     276: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     279: invokeinterface #164,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
     284: ifeq          322
     287: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     290: new           #36                 // class java/lang/StringBuilder
     293: dup
     294: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     297: aload_0
     298: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     301: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     304: ldc           #165                // String  received message:
     306: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     309: aload         5
     311: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     314: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     317: invokeinterface #166,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     322: aload         5
     324: areturn
     325: goto          14
     328: astore_3
     329: invokestatic  #168                // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     332: invokevirtual #169                // Method java/lang/Thread.interrupt:()V
     335: aload_3
     336: invokestatic  #150                // Method org/apache/activemq/util/JMSExceptionSupport.create:(Ljava/lang/Exception;)Ljavax/jms/JMSException;
     339: athrow
    Exception table:
       from    to  target type
           0    78   328   Class java/lang/InterruptedException
          79    88   328   Class java/lang/InterruptedException
          89   324   328   Class java/lang/InterruptedException
         325   328   328   Class java/lang/InterruptedException

  private void posionAck(org.apache.activemq.command.MessageDispatch, java.lang.String) throws javax.jms.JMSException;
    Code:
       0: new           #170                // class org/apache/activemq/command/MessageAck
       3: dup
       4: aload_1
       5: iconst_1
       6: iconst_1
       7: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
      10: astore_3
      11: aload_3
      12: aload_1
      13: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      16: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      19: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
      22: aload_3
      23: new           #174                // class java/lang/Throwable
      26: dup
      27: aload_2
      28: invokespecial #175                // Method java/lang/Throwable."<init>":(Ljava/lang/String;)V
      31: invokevirtual #176                // Method org/apache/activemq/command/MessageAck.setPoisonCause:(Ljava/lang/Throwable;)V
      34: aload_0
      35: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      38: aload_3
      39: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
      42: return

  private boolean redeliveryExceeded(org.apache.activemq.command.MessageDispatch);
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
       7: ifeq          58
      10: aload_0
      11: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
      14: ifnull        58
      17: aload_0
      18: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
      21: invokevirtual #179                // Method org/apache/activemq/RedeliveryPolicy.getMaximumRedeliveries:()I
      24: iconst_m1
      25: if_icmpeq     58
      28: aload_1
      29: invokevirtual #180                // Method org/apache/activemq/command/MessageDispatch.getRedeliveryCounter:()I
      32: aload_0
      33: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
      36: invokevirtual #179                // Method org/apache/activemq/RedeliveryPolicy.getMaximumRedeliveries:()I
      39: if_icmple     58
      42: aload_1
      43: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      46: ldc           #181                // String redeliveryDelay
      48: invokevirtual #182                // Method org/apache/activemq/command/Message.getProperty:(Ljava/lang/String;)Ljava/lang/Object;
      51: ifnonnull     58
      54: iconst_1
      55: goto          59
      58: iconst_0
      59: ireturn
      60: astore_2
      61: iconst_0
      62: ireturn
    Exception table:
       from    to  target type
           0    59    60   Class java/lang/Exception

  public javax.jms.Message receive() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: invokevirtual #184                // Method checkMessageListener:()V
       8: aload_0
       9: lconst_0
      10: invokevirtual #185                // Method sendPullCommand:(J)V
      13: aload_0
      14: ldc2_w        #186                // long -1l
      17: invokespecial #188                // Method dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      20: astore_1
      21: aload_1
      22: ifnonnull     27
      25: aconst_null
      26: areturn
      27: aload_0
      28: aload_1
      29: invokespecial #157                // Method beforeMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;)V
      32: aload_0
      33: aload_1
      34: iconst_0
      35: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
      38: aload_0
      39: aload_1
      40: invokespecial #189                // Method createActiveMQMessage:(Lorg/apache/activemq/command/MessageDispatch;)Lorg/apache/activemq/command/ActiveMQMessage;
      43: areturn

  private org.apache.activemq.command.ActiveMQMessage createActiveMQMessage(org.apache.activemq.command.MessageDispatch) throws javax.jms.JMSException;
    Code:
       0: aload_1
       1: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
       4: invokevirtual #190                // Method org/apache/activemq/command/Message.copy:()Lorg/apache/activemq/command/Message;
       7: checkcast     #191                // class org/apache/activemq/command/ActiveMQMessage
      10: astore_2
      11: aload_2
      12: invokevirtual #192                // Method org/apache/activemq/command/ActiveMQMessage.getDataStructureType:()B
      15: bipush        29
      17: if_icmpne     41
      20: aload_2
      21: checkcast     #193                // class org/apache/activemq/command/ActiveMQBlobMessage
      24: new           #194                // class org/apache/activemq/blob/BlobDownloader
      27: dup
      28: aload_0
      29: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      32: invokevirtual #195                // Method org/apache/activemq/ActiveMQSession.getBlobTransferPolicy:()Lorg/apache/activemq/blob/BlobTransferPolicy;
      35: invokespecial #196                // Method org/apache/activemq/blob/BlobDownloader."<init>":(Lorg/apache/activemq/blob/BlobTransferPolicy;)V
      38: invokevirtual #197                // Method org/apache/activemq/command/ActiveMQBlobMessage.setBlobDownloader:(Lorg/apache/activemq/blob/BlobDownloader;)V
      41: aload_0
      42: getfield      #129                // Field transformer:Lorg/apache/activemq/MessageTransformer;
      45: ifnull        80
      48: aload_0
      49: getfield      #129                // Field transformer:Lorg/apache/activemq/MessageTransformer;
      52: aload_0
      53: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      56: aload_0
      57: aload_2
      58: invokeinterface #198,  4          // InterfaceMethod org/apache/activemq/MessageTransformer.consumerTransform:(Ljavax/jms/Session;Ljavax/jms/MessageConsumer;Ljavax/jms/Message;)Ljavax/jms/Message;
      63: astore_3
      64: aload_3
      65: ifnull        80
      68: aload_3
      69: aload_0
      70: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      73: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      76: invokestatic  #199                // Method org/apache/activemq/ActiveMQMessageTransformation.transformMessage:(Ljavax/jms/Message;Lorg/apache/activemq/ActiveMQConnection;)Lorg/apache/activemq/command/ActiveMQMessage;
      79: astore_2
      80: aload_0
      81: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      84: invokevirtual #200                // Method org/apache/activemq/ActiveMQSession.isClientAcknowledge:()Z
      87: ifeq          105
      90: aload_2
      91: new           #201                // class org/apache/activemq/ActiveMQMessageConsumer$1
      94: dup
      95: aload_0
      96: invokespecial #202                // Method org/apache/activemq/ActiveMQMessageConsumer$1."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
      99: invokevirtual #203                // Method org/apache/activemq/command/ActiveMQMessage.setAcknowledgeCallback:(Lorg/apache/activemq/util/Callback;)V
     102: goto          128
     105: aload_0
     106: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     109: invokevirtual #204                // Method org/apache/activemq/ActiveMQSession.isIndividualAcknowledge:()Z
     112: ifeq          128
     115: aload_2
     116: new           #205                // class org/apache/activemq/ActiveMQMessageConsumer$2
     119: dup
     120: aload_0
     121: aload_1
     122: invokespecial #206                // Method org/apache/activemq/ActiveMQMessageConsumer$2."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;Lorg/apache/activemq/command/MessageDispatch;)V
     125: invokevirtual #203                // Method org/apache/activemq/command/ActiveMQMessage.setAcknowledgeCallback:(Lorg/apache/activemq/util/Callback;)V
     128: aload_2
     129: areturn

  public javax.jms.Message receive(long) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: invokevirtual #184                // Method checkMessageListener:()V
       8: lload_1
       9: lconst_0
      10: lcmp
      11: ifne          19
      14: aload_0
      15: invokevirtual #207                // Method receive:()Ljavax/jms/Message;
      18: areturn
      19: aload_0
      20: lload_1
      21: invokevirtual #185                // Method sendPullCommand:(J)V
      24: lload_1
      25: lconst_0
      26: lcmp
      27: ifle          80
      30: aload_0
      31: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      34: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
      37: ifne          51
      40: aload_0
      41: ldc2_w        #186                // long -1l
      44: invokespecial #188                // Method dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      47: astore_3
      48: goto          57
      51: aload_0
      52: lload_1
      53: invokespecial #188                // Method dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      56: astore_3
      57: aload_3
      58: ifnonnull     63
      61: aconst_null
      62: areturn
      63: aload_0
      64: aload_3
      65: invokespecial #157                // Method beforeMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;)V
      68: aload_0
      69: aload_3
      70: iconst_0
      71: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
      74: aload_0
      75: aload_3
      76: invokespecial #189                // Method createActiveMQMessage:(Lorg/apache/activemq/command/MessageDispatch;)Lorg/apache/activemq/command/ActiveMQMessage;
      79: areturn
      80: aconst_null
      81: areturn

  public javax.jms.Message receiveNoWait() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #136                // Method checkClosed:()V
       4: aload_0
       5: invokevirtual #184                // Method checkMessageListener:()V
       8: aload_0
       9: ldc2_w        #186                // long -1l
      12: invokevirtual #185                // Method sendPullCommand:(J)V
      15: aload_0
      16: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      19: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
      22: ifne          36
      25: aload_0
      26: ldc2_w        #186                // long -1l
      29: invokespecial #188                // Method dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      32: astore_1
      33: goto          42
      36: aload_0
      37: lconst_0
      38: invokespecial #188                // Method dequeue:(J)Lorg/apache/activemq/command/MessageDispatch;
      41: astore_1
      42: aload_1
      43: ifnonnull     48
      46: aconst_null
      47: areturn
      48: aload_0
      49: aload_1
      50: invokespecial #157                // Method beforeMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;)V
      53: aload_0
      54: aload_1
      55: iconst_0
      56: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
      59: aload_0
      60: aload_1
      61: invokespecial #189                // Method createActiveMQMessage:(Lorg/apache/activemq/command/MessageDispatch;)Lorg/apache/activemq/command/ActiveMQMessage;
      64: areturn

  public void close() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
       9: ifne          60
      12: aload_0
      13: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      16: invokevirtual #208                // Method java/util/LinkedList.isEmpty:()Z
      19: ifne          56
      22: aload_0
      23: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      26: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      29: invokevirtual #210                // Method org/apache/activemq/TransactionContext.isInTransaction:()Z
      32: ifeq          56
      35: aload_0
      36: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      39: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      42: new           #211                // class org/apache/activemq/ActiveMQMessageConsumer$3
      45: dup
      46: aload_0
      47: invokespecial #212                // Method org/apache/activemq/ActiveMQMessageConsumer$3."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
      50: invokevirtual #213                // Method org/apache/activemq/TransactionContext.addSynchronization:(Lorg/apache/activemq/transaction/Synchronization;)V
      53: goto          60
      56: aload_0
      57: invokevirtual #214                // Method doClose:()V
      60: return

  void doClose() throws javax.jms.JMSException;
    Code:
       0: invokestatic  #215                // Method java/lang/Thread.interrupted:()Z
       3: istore_1
       4: aload_0
       5: invokevirtual #216                // Method dispose:()V
       8: aload_0
       9: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      12: invokevirtual #217                // Method org/apache/activemq/command/ConsumerInfo.createRemoveCommand:()Lorg/apache/activemq/command/RemoveInfo;
      15: astore_2
      16: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      19: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      24: ifeq          69
      27: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      30: new           #36                 // class java/lang/StringBuilder
      33: dup
      34: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      37: ldc           #218                // String remove:
      39: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_0
      43: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
      46: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      49: ldc           #219                // String , lastDeliveredSequenceId:
      51: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      54: aload_0
      55: getfield      #220                // Field lastDeliveredSequenceId:J
      58: invokevirtual #221                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      61: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      64: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      69: aload_2
      70: aload_0
      71: getfield      #220                // Field lastDeliveredSequenceId:J
      74: invokevirtual #222                // Method org/apache/activemq/command/RemoveInfo.setLastDeliveredSequenceId:(J)V
      77: aload_0
      78: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      81: aload_2
      82: invokevirtual #223                // Method org/apache/activemq/ActiveMQSession.asyncSendPacket:(Lorg/apache/activemq/command/Command;)V
      85: iload_1
      86: ifeq          95
      89: invokestatic  #168                // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      92: invokevirtual #169                // Method java/lang/Thread.interrupt:()V
      95: return

  void inProgressClearRequired();
    Code:
       0: aload_0
       1: getfield      #22                 // Field inProgressClearRequiredFlag:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #224                // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
       7: pop
       8: aload_0
       9: iconst_1
      10: putfield      #225                // Field clearDeliveredList:Z
      13: return

  void clearMessagesInProgress();
    Code:
       0: aload_0
       1: getfield      #22                 // Field inProgressClearRequiredFlag:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #226                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
       7: ifle          198
      10: aload_0
      11: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      14: invokeinterface #227,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.getMutex:()Ljava/lang/Object;
      19: dup
      20: astore_1
      21: monitorenter
      22: aload_0
      23: getfield      #22                 // Field inProgressClearRequiredFlag:Ljava/util/concurrent/atomic/AtomicInteger;
      26: invokevirtual #226                // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      29: ifle          186
      32: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      35: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      40: ifeq          90
      43: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      46: new           #36                 // class java/lang/StringBuilder
      49: dup
      50: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      53: aload_0
      54: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
      57: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      60: ldc           #228                // String  clearing unconsumed list (
      62: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      65: aload_0
      66: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      69: invokeinterface #229,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.size:()I
      74: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      77: ldc           #230                // String ) on transport interrupt
      79: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      82: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      85: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      90: aload_0
      91: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      94: invokeinterface #231,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.removeAll:()Ljava/util/List;
      99: astore_2
     100: aload_0
     101: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     104: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
     107: ifne          156
     110: aload_2
     111: invokeinterface #232,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     116: astore_3
     117: aload_3
     118: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     123: ifeq          156
     126: aload_3
     127: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     132: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     135: astore        4
     137: aload_0
     138: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     141: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     144: aload_0
     145: aload         4
     147: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     150: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     153: goto          117
     156: aload_0
     157: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     160: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     163: invokevirtual #237                // Method org/apache/activemq/ActiveMQConnection.transportInterruptionProcessingComplete:()V
     166: aload_0
     167: getfield      #22                 // Field inProgressClearRequiredFlag:Ljava/util/concurrent/atomic/AtomicInteger;
     170: invokevirtual #238                // Method java/util/concurrent/atomic/AtomicInteger.decrementAndGet:()I
     173: pop
     174: aload_0
     175: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     178: invokeinterface #227,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.getMutex:()Ljava/lang/Object;
     183: invokevirtual #239                // Method java/lang/Object.notifyAll:()V
     186: aload_1
     187: monitorexit
     188: goto          198
     191: astore        5
     193: aload_1
     194: monitorexit
     195: aload         5
     197: athrow
     198: aload_0
     199: invokespecial #6                  // Method clearDeliveredList:()V
     202: return
    Exception table:
       from    to  target type
          22   188   191   any
         191   195   191   any

  void deliverAcks();
    Code:
       0: aconst_null
       1: astore_1
       2: aload_0
       3: getfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
       6: iconst_0
       7: iconst_1
       8: invokevirtual #240                // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
      11: ifeq          153
      14: aload_0
      15: invokespecial #241                // Method isAutoAcknowledgeEach:()Z
      18: ifeq          76
      21: aload_0
      22: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      25: dup
      26: astore_2
      27: monitorenter
      28: aload_0
      29: iconst_2
      30: invokespecial #242                // Method makeAckForAllDeliveredMessages:(B)Lorg/apache/activemq/command/MessageAck;
      33: astore_1
      34: aload_1
      35: ifnull        53
      38: aload_0
      39: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      42: invokevirtual #243                // Method java/util/LinkedList.clear:()V
      45: aload_0
      46: iconst_0
      47: putfield      #244                // Field ackCounter:I
      50: goto          63
      53: aload_0
      54: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      57: astore_1
      58: aload_0
      59: aconst_null
      60: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      63: aload_2
      64: monitorexit
      65: goto          73
      68: astore_3
      69: aload_2
      70: monitorexit
      71: aload_3
      72: athrow
      73: goto          103
      76: aload_0
      77: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      80: ifnull        103
      83: aload_0
      84: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      87: invokevirtual #246                // Method org/apache/activemq/command/MessageAck.isStandardAck:()Z
      90: ifeq          103
      93: aload_0
      94: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      97: astore_1
      98: aload_0
      99: aconst_null
     100: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     103: aload_1
     104: ifnull        145
     107: aload_1
     108: astore_2
     109: aload_0
     110: getfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
     113: ifnonnull     123
     116: aload_0
     117: invokestatic  #248                // Method java/util/concurrent/Executors.newSingleThreadExecutor:()Ljava/util/concurrent/ExecutorService;
     120: putfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
     123: aload_0
     124: getfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
     127: new           #249                // class org/apache/activemq/ActiveMQMessageConsumer$4
     130: dup
     131: aload_0
     132: aload_2
     133: invokespecial #250                // Method org/apache/activemq/ActiveMQMessageConsumer$4."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;Lorg/apache/activemq/command/MessageAck;)V
     136: invokeinterface #251,  2          // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/lang/Runnable;)Ljava/util/concurrent/Future;
     141: pop
     142: goto          153
     145: aload_0
     146: getfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
     149: iconst_0
     150: invokevirtual #252                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
     153: return
    Exception table:
       from    to  target type
          28    65    68   any
          68    71    68   any

  public void dispose() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
       9: ifne          351
      12: aload_0
      13: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      16: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
      19: ifne          37
      22: aload_0
      23: invokevirtual #253                // Method deliverAcks:()V
      26: aload_0
      27: invokespecial #254                // Method isAutoAcknowledgeBatch:()Z
      30: ifeq          37
      33: aload_0
      34: invokevirtual #255                // Method acknowledge:()V
      37: aload_0
      38: getfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
      41: ifnull        59
      44: aload_0
      45: getfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
      48: ldc2_w        #256                // long 60000l
      51: invokestatic  #258                // Method org/apache/activemq/util/ThreadPoolUtils.shutdownGraceful:(Ljava/util/concurrent/ExecutorService;J)V
      54: aload_0
      55: aconst_null
      56: putfield      #247                // Field executorService:Ljava/util/concurrent/ExecutorService;
      59: aload_0
      60: getfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      63: ifnull        88
      66: aload_0
      67: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      70: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      73: invokevirtual #260                // Method org/apache/activemq/ActiveMQConnection.getScheduler:()Lorg/apache/activemq/thread/Scheduler;
      76: aload_0
      77: getfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      80: invokevirtual #261                // Method org/apache/activemq/thread/Scheduler.cancel:(Ljava/lang/Runnable;)V
      83: aload_0
      84: aconst_null
      85: putfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      88: aload_0
      89: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      92: invokevirtual #200                // Method org/apache/activemq/ActiveMQSession.isClientAcknowledge:()Z
      95: ifeq          189
      98: aload_0
      99: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     102: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
     105: ifne          189
     108: aconst_null
     109: astore_1
     110: aload_0
     111: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     114: dup
     115: astore_2
     116: monitorenter
     117: new           #262                // class java/util/ArrayList
     120: dup
     121: aload_0
     122: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     125: invokespecial #263                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
     128: astore_1
     129: aload_2
     130: monitorexit
     131: goto          139
     134: astore_3
     135: aload_2
     136: monitorexit
     137: aload_3
     138: athrow
     139: aload_1
     140: invokeinterface #232,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     145: astore_2
     146: aload_2
     147: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     152: ifeq          183
     155: aload_2
     156: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     161: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     164: astore_3
     165: aload_0
     166: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     169: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     172: aload_0
     173: aload_3
     174: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     177: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     180: goto          146
     183: aload_1
     184: invokeinterface #264,  1          // InterfaceMethod java/util/List.clear:()V
     189: aload_0
     190: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     193: invokevirtual #265                // Method org/apache/activemq/ActiveMQSession.isTransacted:()Z
     196: ifne          225
     199: aload_0
     200: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     203: dup
     204: astore_1
     205: monitorenter
     206: aload_0
     207: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     210: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     213: aload_1
     214: monitorexit
     215: goto          225
     218: astore        4
     220: aload_1
     221: monitorexit
     222: aload         4
     224: athrow
     225: aload_0
     226: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     229: invokeinterface #266,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.close:()V
     234: aload_0
     235: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     238: aload_0
     239: invokevirtual #123                // Method org/apache/activemq/ActiveMQSession.removeConsumer:(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
     242: aload_0
     243: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     246: invokeinterface #231,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.removeAll:()Ljava/util/List;
     251: astore_1
     252: aload_0
     253: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     256: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
     259: ifne          351
     262: aload_1
     263: invokeinterface #232,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     268: astore_2
     269: aload_2
     270: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     275: ifeq          351
     278: aload_2
     279: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     284: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     287: astore_3
     288: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     291: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     296: ifeq          333
     299: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     302: new           #36                 // class java/lang/StringBuilder
     305: dup
     306: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     309: ldc_w         #267                // String on close, rollback duplicate:
     312: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     315: aload_3
     316: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     319: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
     322: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     325: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     328: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     333: aload_0
     334: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     337: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     340: aload_0
     341: aload_3
     342: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     345: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     348: goto          269
     351: return
    Exception table:
       from    to  target type
         117   131   134   any
         134   137   134   any
         206   215   218   any
         218   222   218   any

  protected void checkClosed() throws javax.jms.IllegalStateException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
       9: ifeq          23
      12: new           #268                // class javax/jms/IllegalStateException
      15: dup
      16: ldc_w         #269                // String The Consumer is closed
      19: invokespecial #270                // Method javax/jms/IllegalStateException."<init>":(Ljava/lang/String;)V
      22: athrow
      23: return

  protected void sendPullCommand(long) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #6                  // Method clearDeliveredList:()V
       4: aload_0
       5: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       8: invokevirtual #271                // Method org/apache/activemq/command/ConsumerInfo.getCurrentPrefetchSize:()I
      11: ifne          55
      14: aload_0
      15: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      18: invokeinterface #272,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isEmpty:()Z
      23: ifeq          55
      26: new           #273                // class org/apache/activemq/command/MessagePull
      29: dup
      30: invokespecial #274                // Method org/apache/activemq/command/MessagePull."<init>":()V
      33: astore_3
      34: aload_3
      35: aload_0
      36: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      39: invokevirtual #275                // Method org/apache/activemq/command/MessagePull.configure:(Lorg/apache/activemq/command/ConsumerInfo;)V
      42: aload_3
      43: lload_1
      44: invokevirtual #276                // Method org/apache/activemq/command/MessagePull.setTimeout:(J)V
      47: aload_0
      48: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      51: aload_3
      52: invokevirtual #223                // Method org/apache/activemq/ActiveMQSession.asyncSendPacket:(Lorg/apache/activemq/command/Command;)V
      55: return

  protected void checkMessageListener() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #277                // Method org/apache/activemq/ActiveMQSession.checkMessageListener:()V
       7: return

  protected void setOptimizeAcknowledge(boolean);
    Code:
       0: aload_0
       1: getfield      #1                  // Field optimizeAcknowledge:Z
       4: ifeq          15
       7: iload_1
       8: ifne          15
      11: aload_0
      12: invokevirtual #253                // Method deliverAcks:()V
      15: aload_0
      16: iload_1
      17: putfield      #1                  // Field optimizeAcknowledge:Z
      20: return

  protected void setPrefetchSize(int);
    Code:
       0: aload_0
       1: invokevirtual #253                // Method deliverAcks:()V
       4: aload_0
       5: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       8: iload_1
       9: invokevirtual #75                 // Method org/apache/activemq/command/ConsumerInfo.setCurrentPrefetchSize:(I)V
      12: return

  private void beforeMessageIsConsumed(org.apache.activemq.command.MessageDispatch) throws javax.jms.JMSException;
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       5: invokevirtual #278                // Method org/apache/activemq/ActiveMQSession.getNextDeliveryId:()J
       8: invokevirtual #279                // Method org/apache/activemq/command/MessageDispatch.setDeliverySequenceId:(J)V
      11: aload_0
      12: aload_1
      13: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      16: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      19: invokevirtual #280                // Method org/apache/activemq/command/MessageId.getBrokerSequenceId:()J
      22: putfield      #220                // Field lastDeliveredSequenceId:J
      25: aload_0
      26: invokespecial #254                // Method isAutoAcknowledgeBatch:()Z
      29: ifne          88
      32: aload_0
      33: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      36: dup
      37: astore_2
      38: monitorenter
      39: aload_0
      40: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      43: aload_1
      44: invokevirtual #281                // Method java/util/LinkedList.addFirst:(Ljava/lang/Object;)V
      47: aload_2
      48: monitorexit
      49: goto          57
      52: astore_3
      53: aload_2
      54: monitorexit
      55: aload_3
      56: athrow
      57: aload_0
      58: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      61: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
      64: ifeq          88
      67: aload_0
      68: getfield      #7                  // Field transactedIndividualAck:Z
      71: ifeq          82
      74: aload_0
      75: aload_1
      76: invokespecial #282                // Method immediateIndividualTransactedAck:(Lorg/apache/activemq/command/MessageDispatch;)V
      79: goto          88
      82: aload_0
      83: aload_1
      84: iconst_0
      85: invokespecial #283                // Method ackLater:(Lorg/apache/activemq/command/MessageDispatch;B)V
      88: return
    Exception table:
       from    to  target type
          39    49    52   any
          52    55    52   any

  private void immediateIndividualTransactedAck(org.apache.activemq.command.MessageDispatch) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #284                // Method registerSync:()V
       4: new           #170                // class org/apache/activemq/command/MessageAck
       7: dup
       8: aload_1
       9: iconst_4
      10: iconst_1
      11: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
      14: astore_2
      15: aload_2
      16: aload_0
      17: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      20: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      23: invokevirtual #285                // Method org/apache/activemq/TransactionContext.getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      26: invokevirtual #286                // Method org/apache/activemq/command/MessageAck.setTransactionId:(Lorg/apache/activemq/command/TransactionId;)V
      29: aload_0
      30: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      33: aload_2
      34: invokevirtual #122                // Method org/apache/activemq/ActiveMQSession.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
      37: pop
      38: return

  private void afterMessageIsConsumed(org.apache.activemq.command.MessageDispatch, boolean) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
       9: ifeq          13
      12: return
      13: iload_2
      14: ifeq          37
      17: aload_0
      18: aload_1
      19: bipush        6
      21: invokevirtual #287                // Method acknowledge:(Lorg/apache/activemq/command/MessageDispatch;B)V
      24: aload_0
      25: getfield      #109                // Field stats:Lorg/apache/activemq/management/JMSConsumerStatsImpl;
      28: invokevirtual #288                // Method org/apache/activemq/management/JMSConsumerStatsImpl.getExpiredMessageCount:()Lorg/apache/activemq/management/CountStatisticImpl;
      31: invokevirtual #289                // Method org/apache/activemq/management/CountStatisticImpl.increment:()V
      34: goto          383
      37: aload_0
      38: getfield      #109                // Field stats:Lorg/apache/activemq/management/JMSConsumerStatsImpl;
      41: invokevirtual #290                // Method org/apache/activemq/management/JMSConsumerStatsImpl.onMessage:()V
      44: aload_0
      45: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      48: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
      51: ifeq          57
      54: goto          383
      57: aload_0
      58: invokespecial #241                // Method isAutoAcknowledgeEach:()Z
      61: ifeq          290
      64: aload_0
      65: getfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
      68: iconst_0
      69: iconst_1
      70: invokevirtual #240                // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
      73: ifeq          383
      76: aload_0
      77: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      80: dup
      81: astore_3
      82: monitorenter
      83: aload_0
      84: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      87: invokevirtual #208                // Method java/util/LinkedList.isEmpty:()Z
      90: ifne          267
      93: aload_0
      94: getfield      #1                  // Field optimizeAcknowledge:Z
      97: ifeq          239
     100: aload_0
     101: dup
     102: getfield      #244                // Field ackCounter:I
     105: iconst_1
     106: iadd
     107: putfield      #244                // Field ackCounter:I
     110: aload_0
     111: getfield      #244                // Field ackCounter:I
     114: aload_0
     115: getfield      #291                // Field deliveredCounter:I
     118: iadd
     119: i2d
     120: aload_0
     121: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     124: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
     127: i2d
     128: ldc2_w        #292                // double 0.65d
     131: dmul
     132: dcmpl
     133: ifge          161
     136: aload_0
     137: getfield      #25                 // Field optimizeAcknowledgeTimeOut:J
     140: lconst_0
     141: lcmp
     142: ifle          267
     145: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
     148: aload_0
     149: getfield      #24                 // Field optimizeAckTimestamp:J
     152: aload_0
     153: getfield      #25                 // Field optimizeAcknowledgeTimeOut:J
     156: ladd
     157: lcmp
     158: iflt          267
     161: aload_0
     162: iconst_2
     163: invokespecial #242                // Method makeAckForAllDeliveredMessages:(B)Lorg/apache/activemq/command/MessageAck;
     166: astore        4
     168: aload         4
     170: ifnull        201
     173: aload_0
     174: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     177: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     180: aload_0
     181: iconst_0
     182: putfield      #244                // Field ackCounter:I
     185: aload_0
     186: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     189: aload         4
     191: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     194: aload_0
     195: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
     198: putfield      #24                 // Field optimizeAckTimestamp:J
     201: aload_0
     202: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     205: ifnull        236
     208: aload_0
     209: getfield      #291                // Field deliveredCounter:I
     212: ifle          236
     215: aload_0
     216: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     219: aload_0
     220: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     223: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     226: aload_0
     227: aconst_null
     228: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     231: aload_0
     232: iconst_0
     233: putfield      #291                // Field deliveredCounter:I
     236: goto          267
     239: aload_0
     240: iconst_2
     241: invokespecial #242                // Method makeAckForAllDeliveredMessages:(B)Lorg/apache/activemq/command/MessageAck;
     244: astore        4
     246: aload         4
     248: ifnull        267
     251: aload_0
     252: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     255: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     258: aload_0
     259: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     262: aload         4
     264: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     267: aload_3
     268: monitorexit
     269: goto          279
     272: astore        5
     274: aload_3
     275: monitorexit
     276: aload         5
     278: athrow
     279: aload_0
     280: getfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
     283: iconst_0
     284: invokevirtual #252                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
     287: goto          383
     290: aload_0
     291: invokespecial #254                // Method isAutoAcknowledgeBatch:()Z
     294: ifeq          306
     297: aload_0
     298: aload_1
     299: iconst_2
     300: invokespecial #283                // Method ackLater:(Lorg/apache/activemq/command/MessageDispatch;B)V
     303: goto          383
     306: aload_0
     307: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     310: invokevirtual #200                // Method org/apache/activemq/ActiveMQSession.isClientAcknowledge:()Z
     313: ifne          326
     316: aload_0
     317: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     320: invokevirtual #204                // Method org/apache/activemq/ActiveMQSession.isIndividualAcknowledge:()Z
     323: ifeq          372
     326: iconst_0
     327: istore_3
     328: aload_0
     329: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     332: dup
     333: astore        4
     335: monitorenter
     336: aload_0
     337: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     340: aload_1
     341: invokevirtual #294                // Method java/util/LinkedList.contains:(Ljava/lang/Object;)Z
     344: istore_3
     345: aload         4
     347: monitorexit
     348: goto          359
     351: astore        6
     353: aload         4
     355: monitorexit
     356: aload         6
     358: athrow
     359: iload_3
     360: ifeq          369
     363: aload_0
     364: aload_1
     365: iconst_0
     366: invokespecial #283                // Method ackLater:(Lorg/apache/activemq/command/MessageDispatch;B)V
     369: goto          383
     372: new           #268                // class javax/jms/IllegalStateException
     375: dup
     376: ldc_w         #295                // String Invalid session state.
     379: invokespecial #270                // Method javax/jms/IllegalStateException."<init>":(Ljava/lang/String;)V
     382: athrow
     383: return
    Exception table:
       from    to  target type
          83   269   272   any
         272   276   272   any
         336   348   351   any
         351   356   351   any

  private org.apache.activemq.command.MessageAck makeAckForAllDeliveredMessages(byte);
    Code:
       0: aload_0
       1: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      11: invokevirtual #208                // Method java/util/LinkedList.isEmpty:()Z
      14: ifeq          21
      17: aconst_null
      18: aload_2
      19: monitorexit
      20: areturn
      21: aload_0
      22: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      25: invokevirtual #296                // Method java/util/LinkedList.getFirst:()Ljava/lang/Object;
      28: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
      31: astore_3
      32: new           #170                // class org/apache/activemq/command/MessageAck
      35: dup
      36: aload_3
      37: iload_1
      38: aload_0
      39: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      42: invokevirtual #297                // Method java/util/LinkedList.size:()I
      45: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
      48: astore        4
      50: aload         4
      52: aload_0
      53: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      56: invokevirtual #298                // Method java/util/LinkedList.getLast:()Ljava/lang/Object;
      59: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
      62: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      65: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      68: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
      71: aload         4
      73: aload_2
      74: monitorexit
      75: areturn
      76: astore        5
      78: aload_2
      79: monitorexit
      80: aload         5
      82: athrow
    Exception table:
       from    to  target type
           7    20    76   any
          21    75    76   any
          76    80    76   any

  private void ackLater(org.apache.activemq.command.MessageDispatch, byte) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
       7: ifeq          14
      10: aload_0
      11: invokespecial #284                // Method registerSync:()V
      14: aload_0
      15: dup
      16: getfield      #291                // Field deliveredCounter:I
      19: iconst_1
      20: iadd
      21: putfield      #291                // Field deliveredCounter:I
      24: aload_0
      25: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      28: astore_3
      29: aload_0
      30: new           #170                // class org/apache/activemq/command/MessageAck
      33: dup
      34: aload_1
      35: iload_2
      36: aload_0
      37: getfield      #291                // Field deliveredCounter:I
      40: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
      43: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      46: aload_0
      47: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      50: aload_0
      51: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      54: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      57: invokevirtual #285                // Method org/apache/activemq/TransactionContext.getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      60: invokevirtual #286                // Method org/apache/activemq/command/MessageAck.setTransactionId:(Lorg/apache/activemq/command/TransactionId;)V
      63: aload_3
      64: ifnonnull     84
      67: aload_0
      68: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      71: aload_0
      72: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      75: invokevirtual #299                // Method org/apache/activemq/command/MessageAck.getLastMessageId:()Lorg/apache/activemq/command/MessageId;
      78: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
      81: goto          234
      84: aload_3
      85: invokevirtual #300                // Method org/apache/activemq/command/MessageAck.getAckType:()B
      88: aload_0
      89: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      92: invokevirtual #300                // Method org/apache/activemq/command/MessageAck.getAckType:()B
      95: if_icmpne     112
      98: aload_0
      99: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     102: aload_3
     103: invokevirtual #301                // Method org/apache/activemq/command/MessageAck.getFirstMessageId:()Lorg/apache/activemq/command/MessageId;
     106: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
     109: goto          234
     112: aload_3
     113: invokevirtual #302                // Method org/apache/activemq/command/MessageAck.isDeliveredAck:()Z
     116: ifne          182
     119: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     122: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     127: ifeq          171
     130: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     133: new           #36                 // class java/lang/StringBuilder
     136: dup
     137: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     140: ldc_w         #303                // String Sending old pending ack
     143: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     146: aload_3
     147: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     150: ldc_w         #304                // String , new pending:
     153: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: aload_0
     157: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     160: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     163: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     166: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     171: aload_0
     172: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     175: aload_3
     176: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     179: goto          234
     182: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     185: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     190: ifeq          234
     193: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     196: new           #36                 // class java/lang/StringBuilder
     199: dup
     200: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     203: ldc_w         #305                // String dropping old pending ack
     206: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     209: aload_3
     210: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     213: ldc_w         #304                // String , new pending:
     216: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     219: aload_0
     220: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     223: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     226: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     229: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     234: ldc2_w        #306                // double 0.5d
     237: aload_0
     238: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     241: invokevirtual #134                // Method org/apache/activemq/command/ConsumerInfo.getPrefetchSize:()I
     244: i2d
     245: dmul
     246: aload_0
     247: getfield      #291                // Field deliveredCounter:I
     250: aload_0
     251: getfield      #244                // Field ackCounter:I
     254: iadd
     255: aload_0
     256: getfield      #308                // Field additionalWindowSize:I
     259: isub
     260: i2d
     261: dcmpg
     262: ifgt          333
     265: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     268: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     273: ifeq          307
     276: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     279: new           #36                 // class java/lang/StringBuilder
     282: dup
     283: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     286: ldc_w         #309                // String ackLater: sending:
     289: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     292: aload_0
     293: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     296: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     299: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     302: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     307: aload_0
     308: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     311: aload_0
     312: getfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     315: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     318: aload_0
     319: aconst_null
     320: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     323: aload_0
     324: iconst_0
     325: putfield      #291                // Field deliveredCounter:I
     328: aload_0
     329: iconst_0
     330: putfield      #308                // Field additionalWindowSize:I
     333: return

  private void registerSync() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #310                // Method org/apache/activemq/ActiveMQSession.doStartTransaction:()V
       7: aload_0
       8: getfield      #3                  // Field synchronizationRegistered:Z
      11: ifne          37
      14: aload_0
      15: iconst_1
      16: putfield      #3                  // Field synchronizationRegistered:Z
      19: aload_0
      20: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      23: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      26: new           #311                // class org/apache/activemq/ActiveMQMessageConsumer$5
      29: dup
      30: aload_0
      31: invokespecial #312                // Method org/apache/activemq/ActiveMQMessageConsumer$5."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
      34: invokevirtual #213                // Method org/apache/activemq/TransactionContext.addSynchronization:(Lorg/apache/activemq/transaction/Synchronization;)V
      37: return

  public void acknowledge() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #6                  // Method clearDeliveredList:()V
       4: aload_0
       5: invokespecial #5                  // Method waitForRedeliveries:()V
       8: aload_0
       9: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      12: dup
      13: astore_1
      14: monitorenter
      15: aload_0
      16: iconst_2
      17: invokespecial #242                // Method makeAckForAllDeliveredMessages:(B)Lorg/apache/activemq/command/MessageAck;
      20: astore_2
      21: aload_2
      22: ifnonnull     28
      25: aload_1
      26: monitorexit
      27: return
      28: aload_0
      29: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      32: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
      35: ifeq          63
      38: aload_0
      39: invokespecial #4                  // Method rollbackOnFailedRecoveryRedelivery:()V
      42: aload_0
      43: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      46: invokevirtual #310                // Method org/apache/activemq/ActiveMQSession.doStartTransaction:()V
      49: aload_2
      50: aload_0
      51: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      54: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      57: invokevirtual #285                // Method org/apache/activemq/TransactionContext.getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      60: invokevirtual #286                // Method org/apache/activemq/command/MessageAck.setTransactionId:(Lorg/apache/activemq/command/TransactionId;)V
      63: aload_0
      64: aconst_null
      65: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
      68: aload_0
      69: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      72: aload_2
      73: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
      76: aload_0
      77: iconst_0
      78: aload_0
      79: getfield      #291                // Field deliveredCounter:I
      82: aload_0
      83: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      86: invokevirtual #297                // Method java/util/LinkedList.size:()I
      89: isub
      90: invokestatic  #313                // Method java/lang/Math.max:(II)I
      93: putfield      #291                // Field deliveredCounter:I
      96: aload_0
      97: iconst_0
      98: aload_0
      99: getfield      #308                // Field additionalWindowSize:I
     102: aload_0
     103: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     106: invokevirtual #297                // Method java/util/LinkedList.size:()I
     109: isub
     110: invokestatic  #313                // Method java/lang/Math.max:(II)I
     113: putfield      #308                // Field additionalWindowSize:I
     116: aload_0
     117: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     120: invokevirtual #178                // Method org/apache/activemq/ActiveMQSession.getTransacted:()Z
     123: ifne          133
     126: aload_0
     127: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     130: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     133: aload_1
     134: monitorexit
     135: goto          143
     138: astore_3
     139: aload_1
     140: monitorexit
     141: aload_3
     142: athrow
     143: return
    Exception table:
       from    to  target type
          15    27   138   any
          28   135   138   any
         138   141   138   any

  private void waitForRedeliveries();
    Code:
       0: aload_0
       1: getfield      #27                 // Field failoverRedeliveryWaitPeriod:J
       4: lconst_0
       5: lcmp
       6: ifle          212
       9: aload_0
      10: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      13: ifnull        212
      16: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
      19: aload_0
      20: getfield      #27                 // Field failoverRedeliveryWaitPeriod:J
      23: ladd
      24: lstore_1
      25: iconst_0
      26: istore_3
      27: aload_0
      28: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      31: dup
      32: astore        4
      34: monitorenter
      35: aload_0
      36: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      39: ifnull        100
      42: aload_0
      43: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      46: invokevirtual #315                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.entrySet:()Ljava/util/Set;
      49: invokeinterface #316,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      54: astore        5
      56: aload         5
      58: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      63: ifeq          100
      66: aload         5
      68: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      73: checkcast     #317                // class java/util/Map$Entry
      76: astore        6
      78: aload         6
      80: invokeinterface #318,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      85: checkcast     #319                // class java/lang/Boolean
      88: invokevirtual #320                // Method java/lang/Boolean.booleanValue:()Z
      91: ifne          97
      94: iinc          3, 1
      97: goto          56
     100: aload         4
     102: monitorexit
     103: goto          114
     106: astore        7
     108: aload         4
     110: monitorexit
     111: aload         7
     113: athrow
     114: iload_3
     115: ifle          200
     118: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     121: new           #36                 // class java/lang/StringBuilder
     124: dup
     125: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     128: ldc_w         #321                // String waiting for redelivery of
     131: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     134: iload_3
     135: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     138: ldc_w         #322                // String  in transaction:
     141: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: aload_0
     145: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
     148: getfield      #323                // Field org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.transactionId:Lorg/apache/activemq/command/TransactionId;
     151: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     154: ldc_w         #324                // String , to consumer :
     157: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     160: aload_0
     161: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     164: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     167: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     170: invokeinterface #325,  2          // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     175: ldc2_w        #326                // long 500l
     178: aload_0
     179: getfield      #27                 // Field failoverRedeliveryWaitPeriod:J
     182: ldc2_w        #328                // long 4l
     185: ldiv
     186: invokestatic  #148                // Method java/lang/Math.max:(JJ)J
     189: invokestatic  #330                // Method java/lang/Thread.sleep:(J)V
     192: goto          200
     195: astore        4
     197: goto          212
     200: iload_3
     201: ifle          212
     204: lload_1
     205: invokestatic  #23                 // Method java/lang/System.currentTimeMillis:()J
     208: lcmp
     209: iflt          25
     212: return
    Exception table:
       from    to  target type
          35   103   106   any
         106   111   106   any
         175   192   195   Class java/lang/InterruptedException

  private void rollbackOnFailedRecoveryRedelivery() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
       4: ifnull        194
       7: iconst_0
       8: istore_1
       9: aload_0
      10: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      13: invokevirtual #315                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.entrySet:()Ljava/util/Set;
      16: invokeinterface #316,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      21: astore_2
      22: aload_2
      23: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      28: ifeq          122
      31: aload_2
      32: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      37: checkcast     #317                // class java/util/Map$Entry
      40: astore_3
      41: aload_3
      42: invokeinterface #318,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      47: checkcast     #319                // class java/lang/Boolean
      50: invokevirtual #320                // Method java/lang/Boolean.booleanValue:()Z
      53: ifne          119
      56: iinc          1, 1
      59: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      62: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      67: ifeq          119
      70: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      73: new           #36                 // class java/lang/StringBuilder
      76: dup
      77: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      80: ldc_w         #331                // String previously delivered message has not been replayed in transaction:
      83: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      86: aload_0
      87: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      90: getfield      #323                // Field org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.transactionId:Lorg/apache/activemq/command/TransactionId;
      93: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      96: ldc_w         #332                // String  , messageId:
      99: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     102: aload_3
     103: invokeinterface #333,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     108: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     111: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     114: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     119: goto          22
     122: iload_1
     123: ifle          194
     126: new           #36                 // class java/lang/StringBuilder
     129: dup
     130: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     133: ldc_w         #334                // String rolling back transaction (
     136: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     139: aload_0
     140: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
     143: getfield      #323                // Field org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.transactionId:Lorg/apache/activemq/command/TransactionId;
     146: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     149: ldc_w         #335                // String ) post failover recovery.
     152: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     155: iload_1
     156: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     159: ldc_w         #336                // String  previously delivered message(s) not replayed to consumer:
     162: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     165: aload_0
     166: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     169: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     172: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     175: astore_2
     176: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     179: aload_2
     180: invokeinterface #96,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     185: new           #337                // class javax/jms/TransactionRolledBackException
     188: dup
     189: aload_2
     190: invokespecial #338                // Method javax/jms/TransactionRolledBackException."<init>":(Ljava/lang/String;)V
     193: athrow
     194: return

  void acknowledge(org.apache.activemq.command.MessageDispatch) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_4
       3: invokevirtual #287                // Method acknowledge:(Lorg/apache/activemq/command/MessageDispatch;B)V
       6: return

  void acknowledge(org.apache.activemq.command.MessageDispatch, byte) throws javax.jms.JMSException;
    Code:
       0: new           #170                // class org/apache/activemq/command/MessageAck
       3: dup
       4: aload_1
       5: iload_2
       6: iconst_1
       7: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
      10: astore_3
      11: aload_0
      12: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      15: aload_3
      16: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
      19: aload_0
      20: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      23: dup
      24: astore        4
      26: monitorenter
      27: aload_0
      28: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      31: aload_1
      32: invokevirtual #339                // Method java/util/LinkedList.remove:(Ljava/lang/Object;)Z
      35: pop
      36: aload         4
      38: monitorexit
      39: goto          50
      42: astore        5
      44: aload         4
      46: monitorexit
      47: aload         5
      49: athrow
      50: return
    Exception table:
       from    to  target type
          27    39    42   any
          42    47    42   any

  public void commit() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      11: invokevirtual #243                // Method java/util/LinkedList.clear:()V
      14: aload_0
      15: invokespecial #340                // Method clearPreviouslyDelivered:()V
      18: aload_1
      19: monitorexit
      20: goto          28
      23: astore_2
      24: aload_1
      25: monitorexit
      26: aload_2
      27: athrow
      28: aload_0
      29: lconst_0
      30: putfield      #341                // Field redeliveryDelay:J
      33: return
    Exception table:
       from    to  target type
           7    20    23   any
          23    26    23   any

  public void rollback() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #6                  // Method clearDeliveredList:()V
       4: aload_0
       5: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       8: invokeinterface #227,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.getMutex:()Ljava/lang/Object;
      13: dup
      14: astore_1
      15: monitorenter
      16: aload_0
      17: getfield      #1                  // Field optimizeAcknowledge:Z
      20: ifeq          107
      23: aload_0
      24: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      27: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
      30: ifne          107
      33: aload_0
      34: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      37: dup
      38: astore_2
      39: monitorenter
      40: iconst_0
      41: istore_3
      42: iload_3
      43: aload_0
      44: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      47: invokevirtual #297                // Method java/util/LinkedList.size:()I
      50: if_icmpge     95
      53: iload_3
      54: aload_0
      55: getfield      #244                // Field ackCounter:I
      58: if_icmpge     95
      61: aload_0
      62: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      65: invokevirtual #342                // Method java/util/LinkedList.removeLast:()Ljava/lang/Object;
      68: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
      71: astore        4
      73: aload_0
      74: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      77: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      80: aload_0
      81: aload         4
      83: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      86: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
      89: iinc          3, 1
      92: goto          42
      95: aload_2
      96: monitorexit
      97: goto          107
     100: astore        5
     102: aload_2
     103: monitorexit
     104: aload         5
     106: athrow
     107: aload_0
     108: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     111: dup
     112: astore_2
     113: monitorenter
     114: aload_0
     115: invokespecial #343                // Method rollbackPreviouslyDeliveredAndNotRedelivered:()V
     118: aload_0
     119: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     122: invokevirtual #208                // Method java/util/LinkedList.isEmpty:()Z
     125: ifeq          133
     128: aload_2
     129: monitorexit
     130: aload_1
     131: monitorexit
     132: return
     133: aload_0
     134: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     137: invokevirtual #296                // Method java/util/LinkedList.getFirst:()Ljava/lang/Object;
     140: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     143: astore_3
     144: aload_3
     145: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     148: invokevirtual #344                // Method org/apache/activemq/command/Message.getRedeliveryCounter:()I
     151: istore        4
     153: iload         4
     155: ifle          176
     158: aload_0
     159: aload_0
     160: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     163: aload_0
     164: getfield      #341                // Field redeliveryDelay:J
     167: invokevirtual #345                // Method org/apache/activemq/RedeliveryPolicy.getNextRedeliveryDelay:(J)J
     170: putfield      #341                // Field redeliveryDelay:J
     173: goto          187
     176: aload_0
     177: aload_0
     178: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     181: invokevirtual #346                // Method org/apache/activemq/RedeliveryPolicy.getInitialRedeliveryDelay:()J
     184: putfield      #341                // Field redeliveryDelay:J
     187: aload_0
     188: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     191: invokevirtual #298                // Method java/util/LinkedList.getLast:()Ljava/lang/Object;
     194: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     197: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     200: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
     203: astore        5
     205: aload_0
     206: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     209: invokevirtual #347                // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
     212: astore        6
     214: aload         6
     216: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     221: ifeq          263
     224: aload         6
     226: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     231: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     234: astore        7
     236: aload         7
     238: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     241: invokevirtual #348                // Method org/apache/activemq/command/Message.onMessageRolledBack:()V
     244: aload_0
     245: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     248: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     251: aload_0
     252: aload         7
     254: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     257: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     260: goto          214
     263: aload_0
     264: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     267: invokevirtual #179                // Method org/apache/activemq/RedeliveryPolicy.getMaximumRedeliveries:()I
     270: iconst_m1
     271: if_icmpeq     429
     274: aload_3
     275: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     278: invokevirtual #344                // Method org/apache/activemq/command/Message.getRedeliveryCounter:()I
     281: aload_0
     282: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     285: invokevirtual #179                // Method org/apache/activemq/RedeliveryPolicy.getMaximumRedeliveries:()I
     288: if_icmple     429
     291: new           #170                // class org/apache/activemq/command/MessageAck
     294: dup
     295: aload_3
     296: iconst_1
     297: aload_0
     298: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     301: invokevirtual #297                // Method java/util/LinkedList.size:()I
     304: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
     307: astore        6
     309: aload         6
     311: aload         5
     313: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
     316: aload         6
     318: new           #174                // class java/lang/Throwable
     321: dup
     322: new           #36                 // class java/lang/StringBuilder
     325: dup
     326: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     329: ldc_w         #349                // String Exceeded redelivery policy limit:
     332: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     335: aload_0
     336: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     339: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     342: ldc_w         #350                // String , cause:
     345: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     348: aload_3
     349: invokevirtual #351                // Method org/apache/activemq/command/MessageDispatch.getRollbackCause:()Ljava/lang/Throwable;
     352: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     355: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     358: aload_3
     359: invokevirtual #351                // Method org/apache/activemq/command/MessageDispatch.getRollbackCause:()Ljava/lang/Throwable;
     362: invokespecial #352                // Method java/lang/Throwable."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     365: invokevirtual #176                // Method org/apache/activemq/command/MessageAck.setPoisonCause:(Ljava/lang/Throwable;)V
     368: aload_0
     369: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     372: aload         6
     374: iconst_1
     375: invokevirtual #353                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;Z)V
     378: aload_0
     379: iconst_0
     380: aload_0
     381: getfield      #308                // Field additionalWindowSize:I
     384: aload_0
     385: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     388: invokevirtual #297                // Method java/util/LinkedList.size:()I
     391: isub
     392: invokestatic  #313                // Method java/lang/Math.max:(II)I
     395: putfield      #308                // Field additionalWindowSize:I
     398: aload_0
     399: lconst_0
     400: putfield      #341                // Field redeliveryDelay:J
     403: aload_0
     404: dup
     405: getfield      #291                // Field deliveredCounter:I
     408: aload_0
     409: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     412: invokevirtual #297                // Method java/util/LinkedList.size:()I
     415: isub
     416: putfield      #291                // Field deliveredCounter:I
     419: aload_0
     420: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     423: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     426: goto          683
     429: iload         4
     431: ifle          469
     434: new           #170                // class org/apache/activemq/command/MessageAck
     437: dup
     438: aload_3
     439: iconst_3
     440: aload_0
     441: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     444: invokevirtual #297                // Method java/util/LinkedList.size:()I
     447: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
     450: astore        6
     452: aload         6
     454: aload         5
     456: invokevirtual #173                // Method org/apache/activemq/command/MessageAck.setFirstMessageId:(Lorg/apache/activemq/command/MessageId;)V
     459: aload_0
     460: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     463: aload         6
     465: iconst_1
     466: invokevirtual #353                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;Z)V
     469: aload_0
     470: getfield      #28                 // Field nonBlockingRedelivery:Z
     473: ifeq          556
     476: aload_0
     477: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     480: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
     485: ifne          683
     488: new           #11                 // class java/util/LinkedList
     491: dup
     492: aload_0
     493: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     496: invokespecial #354                // Method java/util/LinkedList."<init>":(Ljava/util/Collection;)V
     499: astore        6
     501: aload         6
     503: invokestatic  #355                // Method java/util/Collections.reverse:(Ljava/util/List;)V
     506: aload_0
     507: dup
     508: getfield      #291                // Field deliveredCounter:I
     511: aload_0
     512: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     515: invokevirtual #297                // Method java/util/LinkedList.size:()I
     518: isub
     519: putfield      #291                // Field deliveredCounter:I
     522: aload_0
     523: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     526: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     529: aload_0
     530: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     533: invokevirtual #356                // Method org/apache/activemq/ActiveMQSession.getScheduler:()Lorg/apache/activemq/thread/Scheduler;
     536: new           #357                // class org/apache/activemq/ActiveMQMessageConsumer$6
     539: dup
     540: aload_0
     541: aload         6
     543: invokespecial #358                // Method org/apache/activemq/ActiveMQMessageConsumer$6."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;Ljava/util/LinkedList;)V
     546: aload_0
     547: getfield      #341                // Field redeliveryDelay:J
     550: invokevirtual #359                // Method org/apache/activemq/thread/Scheduler.executeAfterDelay:(Ljava/lang/Runnable;J)V
     553: goto          683
     556: aload_0
     557: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     560: invokeinterface #360,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.stop:()V
     565: aload_0
     566: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     569: invokevirtual #361                // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
     572: astore        6
     574: aload         6
     576: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     581: ifeq          610
     584: aload         6
     586: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     591: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     594: astore        7
     596: aload_0
     597: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     600: aload         7
     602: invokeinterface #362,  2          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.enqueueFirst:(Lorg/apache/activemq/command/MessageDispatch;)V
     607: goto          574
     610: aload_0
     611: dup
     612: getfield      #291                // Field deliveredCounter:I
     615: aload_0
     616: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     619: invokevirtual #297                // Method java/util/LinkedList.size:()I
     622: isub
     623: putfield      #291                // Field deliveredCounter:I
     626: aload_0
     627: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     630: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     633: aload_0
     634: getfield      #341                // Field redeliveryDelay:J
     637: lconst_0
     638: lcmp
     639: ifle          679
     642: aload_0
     643: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     646: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
     651: ifne          679
     654: aload_0
     655: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     658: invokevirtual #356                // Method org/apache/activemq/ActiveMQSession.getScheduler:()Lorg/apache/activemq/thread/Scheduler;
     661: new           #363                // class org/apache/activemq/ActiveMQMessageConsumer$7
     664: dup
     665: aload_0
     666: invokespecial #364                // Method org/apache/activemq/ActiveMQMessageConsumer$7."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
     669: aload_0
     670: getfield      #341                // Field redeliveryDelay:J
     673: invokevirtual #359                // Method org/apache/activemq/thread/Scheduler.executeAfterDelay:(Ljava/lang/Runnable;J)V
     676: goto          683
     679: aload_0
     680: invokevirtual #125                // Method start:()V
     683: aload_2
     684: monitorexit
     685: goto          695
     688: astore        8
     690: aload_2
     691: monitorexit
     692: aload         8
     694: athrow
     695: aload_1
     696: monitorexit
     697: goto          707
     700: astore        9
     702: aload_1
     703: monitorexit
     704: aload         9
     706: athrow
     707: aload_0
     708: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
     711: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
     714: ifnull        729
     717: aload_0
     718: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     721: aload_0
     722: aload_0
     723: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     726: invokevirtual #143                // Method org/apache/activemq/ActiveMQSession.redispatch:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/MessageDispatchChannel;)V
     729: return
    Exception table:
       from    to  target type
          40    97   100   any
         100   104   100   any
         114   130   688   any
         133   685   688   any
         688   692   688   any
          16   132   700   any
         133   697   700   any
         700   704   700   any

  private void rollbackPreviouslyDeliveredAndNotRedelivered();
    Code:
       0: aload_0
       1: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
       4: ifnull        118
       7: aload_0
       8: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      11: invokevirtual #315                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.entrySet:()Ljava/util/Set;
      14: invokeinterface #316,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      19: astore_1
      20: aload_1
      21: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      26: ifeq          114
      29: aload_1
      30: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      35: checkcast     #317                // class java/util/Map$Entry
      38: astore_2
      39: aload_2
      40: invokeinterface #318,  1          // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      45: checkcast     #319                // class java/lang/Boolean
      48: invokevirtual #320                // Method java/lang/Boolean.booleanValue:()Z
      51: ifne          111
      54: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      57: invokeinterface #164,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      62: ifeq          98
      65: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      68: new           #36                 // class java/lang/StringBuilder
      71: dup
      72: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      75: ldc_w         #365                // String rollback non redelivered:
      78: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: aload_2
      82: invokeinterface #333,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      87: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      90: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      93: invokeinterface #166,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
      98: aload_0
      99: aload_2
     100: invokeinterface #333,  1          // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     105: checkcast     #366                // class org/apache/activemq/command/MessageId
     108: invokespecial #367                // Method removeFromDeliveredMessages:(Lorg/apache/activemq/command/MessageId;)V
     111: goto          20
     114: aload_0
     115: invokespecial #340                // Method clearPreviouslyDelivered:()V
     118: return

  private void removeFromDeliveredMessages(org.apache.activemq.command.MessageId);
    Code:
       0: aload_0
       1: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
       4: invokevirtual #347                // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
       7: astore_2
       8: aload_2
       9: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      14: ifeq          68
      17: aload_2
      18: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      23: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
      26: astore_3
      27: aload_1
      28: aload_3
      29: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      32: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      35: invokevirtual #368                // Method org/apache/activemq/command/MessageId.equals:(Ljava/lang/Object;)Z
      38: ifeq          65
      41: aload_0
      42: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      45: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      48: aload_0
      49: aload_3
      50: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      53: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
      56: aload_2
      57: invokeinterface #369,  1          // InterfaceMethod java/util/Iterator.remove:()V
      62: goto          68
      65: goto          8
      68: return

  private void clearPreviouslyDelivered();
    Code:
       0: aload_0
       1: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
       4: ifnull        19
       7: aload_0
       8: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      11: invokevirtual #370                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.clear:()V
      14: aload_0
      15: aconst_null
      16: putfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      19: return

  public void dispatch(org.apache.activemq.command.MessageDispatch);
    Code:
       0: aload_0
       1: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
       4: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
       7: checkcast     #138                // class javax/jms/MessageListener
      10: astore_2
      11: aload_0
      12: invokevirtual #371                // Method clearMessagesInProgress:()V
      15: aload_0
      16: invokespecial #6                  // Method clearDeliveredList:()V
      19: aload_0
      20: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      23: invokeinterface #227,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.getMutex:()Ljava/lang/Object;
      28: dup
      29: astore_3
      30: monitorenter
      31: aload_0
      32: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      35: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
      40: ifne          513
      43: aload_0
      44: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      47: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
      50: ifne          71
      53: aload_0
      54: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      57: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      60: aload_0
      61: aload_1
      62: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      65: invokevirtual #372                // Method org/apache/activemq/ActiveMQConnection.isDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)Z
      68: ifne          327
      71: aload_2
      72: ifnull        270
      75: aload_0
      76: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      79: invokeinterface #373,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isRunning:()Z
      84: ifeq          270
      87: aload_0
      88: aload_1
      89: invokespecial #159                // Method redeliveryExceeded:(Lorg/apache/activemq/command/MessageDispatch;)Z
      92: ifeq          137
      95: aload_0
      96: aload_1
      97: new           #36                 // class java/lang/StringBuilder
     100: dup
     101: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     104: ldc           #161                // String dispatch to
     106: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     109: aload_0
     110: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     113: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     116: ldc           #162                // String  exceeds redelivery policy limit:
     118: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     121: aload_0
     122: getfield      #63                 // Field redeliveryPolicy:Lorg/apache/activemq/RedeliveryPolicy;
     125: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     128: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     131: invokespecial #163                // Method posionAck:(Lorg/apache/activemq/command/MessageDispatch;Ljava/lang/String;)V
     134: aload_3
     135: monitorexit
     136: return
     137: aload_0
     138: aload_1
     139: invokespecial #189                // Method createActiveMQMessage:(Lorg/apache/activemq/command/MessageDispatch;)Lorg/apache/activemq/command/ActiveMQMessage;
     142: astore        4
     144: aload_0
     145: aload_1
     146: invokespecial #157                // Method beforeMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;)V
     149: aload         4
     151: invokevirtual #374                // Method org/apache/activemq/command/ActiveMQMessage.isExpired:()Z
     154: istore        5
     156: iload         5
     158: ifne          169
     161: aload_2
     162: aload         4
     164: invokeinterface #375,  2          // InterfaceMethod javax/jms/MessageListener.onMessage:(Ljavax/jms/Message;)V
     169: aload_0
     170: aload_1
     171: iload         5
     173: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
     176: goto          267
     179: astore        5
     181: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     184: new           #36                 // class java/lang/StringBuilder
     187: dup
     188: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     191: aload_0
     192: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     195: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     198: ldc_w         #377                // String  Exception while processing message:
     201: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     204: aload_1
     205: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     208: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
     211: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     214: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     217: aload         5
     219: invokeinterface #378,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     224: aload_0
     225: invokespecial #254                // Method isAutoAcknowledgeBatch:()Z
     228: ifne          248
     231: aload_0
     232: invokespecial #241                // Method isAutoAcknowledgeEach:()Z
     235: ifne          248
     238: aload_0
     239: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     242: invokevirtual #204                // Method org/apache/activemq/ActiveMQSession.isIndividualAcknowledge:()Z
     245: ifeq          261
     248: aload_1
     249: aload         5
     251: invokevirtual #379                // Method org/apache/activemq/command/MessageDispatch.setRollbackCause:(Ljava/lang/Throwable;)V
     254: aload_0
     255: invokevirtual #380                // Method rollback:()V
     258: goto          267
     261: aload_0
     262: aload_1
     263: iconst_0
     264: invokespecial #158                // Method afterMessageIsConsumed:(Lorg/apache/activemq/command/MessageDispatch;Z)V
     267: goto          513
     270: aload_0
     271: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     274: invokeinterface #373,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isRunning:()Z
     279: ifne          297
     282: aload_0
     283: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     286: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     289: aload_0
     290: aload_1
     291: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     294: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     297: aload_0
     298: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
     301: aload_1
     302: invokeinterface #381,  2          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.enqueue:(Lorg/apache/activemq/command/MessageDispatch;)V
     307: aload_0
     308: getfield      #145                // Field availableListener:Lorg/apache/activemq/MessageAvailableListener;
     311: ifnull        513
     314: aload_0
     315: getfield      #145                // Field availableListener:Lorg/apache/activemq/MessageAvailableListener;
     318: aload_0
     319: invokeinterface #382,  2          // InterfaceMethod org/apache/activemq/MessageAvailableListener.onMessageAvailable:(Ljavax/jms/MessageConsumer;)V
     324: goto          513
     327: aload_0
     328: aload_1
     329: iconst_1
     330: invokespecial #383                // Method redeliveryExpectedInCurrentTransaction:(Lorg/apache/activemq/command/MessageDispatch;Z)Z
     333: ifeq          401
     336: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     339: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     344: ifeq          366
     347: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     350: ldc_w         #384                // String {} tracking transacted redelivery {}
     353: aload_0
     354: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     357: aload_1
     358: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     361: invokeinterface #385,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     366: aload_0
     367: getfield      #7                  // Field transactedIndividualAck:Z
     370: ifeq          381
     373: aload_0
     374: aload_1
     375: invokespecial #282                // Method immediateIndividualTransactedAck:(Lorg/apache/activemq/command/MessageDispatch;)V
     378: goto          513
     381: aload_0
     382: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     385: new           #170                // class org/apache/activemq/command/MessageAck
     388: dup
     389: aload_1
     390: iconst_0
     391: iconst_1
     392: invokespecial #171                // Method org/apache/activemq/command/MessageAck."<init>":(Lorg/apache/activemq/command/MessageDispatch;BI)V
     395: invokevirtual #177                // Method org/apache/activemq/ActiveMQSession.sendAck:(Lorg/apache/activemq/command/MessageAck;)V
     398: goto          513
     401: aload_0
     402: aload_1
     403: invokespecial #386                // Method redeliveryPendingInCompetingTransaction:(Lorg/apache/activemq/command/MessageDispatch;)Lorg/apache/activemq/command/ConsumerId;
     406: dup
     407: astore        4
     409: ifnull        469
     412: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     415: ldc_w         #387                // String {} delivering duplicate {}, pending transaction completion on {} will rollback
     418: iconst_3
     419: anewarray     #388                // class java/lang/Object
     422: dup
     423: iconst_0
     424: aload_0
     425: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     428: aastore
     429: dup
     430: iconst_1
     431: aload_1
     432: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     435: aastore
     436: dup
     437: iconst_2
     438: aload         4
     440: aastore
     441: invokeinterface #389,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     446: aload_0
     447: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     450: invokevirtual #390                // Method org/apache/activemq/ActiveMQSession.getConnection:()Lorg/apache/activemq/ActiveMQConnection;
     453: aload_0
     454: aload_1
     455: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     458: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     461: aload_0
     462: aload_1
     463: invokevirtual #391                // Method dispatch:(Lorg/apache/activemq/command/MessageDispatch;)V
     466: goto          513
     469: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     472: ldc_w         #392                // String {} suppressing duplicate delivery on connection, poison acking: {}
     475: aload_0
     476: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     479: aload_1
     480: invokeinterface #393,  4          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     485: aload_0
     486: aload_1
     487: new           #36                 // class java/lang/StringBuilder
     490: dup
     491: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     494: ldc_w         #394                // String Suppressing duplicate delivery on connection, consumer
     497: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     500: aload_0
     501: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     504: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     507: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     510: invokespecial #163                // Method posionAck:(Lorg/apache/activemq/command/MessageDispatch;Ljava/lang/String;)V
     513: aload_3
     514: monitorexit
     515: goto          525
     518: astore        6
     520: aload_3
     521: monitorexit
     522: aload         6
     524: athrow
     525: aload_0
     526: dup
     527: getfield      #395                // Field dispatchedCount:I
     530: iconst_1
     531: iadd
     532: dup_x1
     533: putfield      #395                // Field dispatchedCount:I
     536: sipush        1000
     539: irem
     540: ifne          551
     543: aload_0
     544: iconst_0
     545: putfield      #395                // Field dispatchedCount:I
     548: invokestatic  #396                // Method java/lang/Thread.yield:()V
     551: goto          566
     554: astore_3
     555: aload_0
     556: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     559: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     562: aload_3
     563: invokevirtual #397                // Method org/apache/activemq/ActiveMQConnection.onClientInternalException:(Ljava/lang/Throwable;)V
     566: return
    Exception table:
       from    to  target type
         149   176   179   Class java/lang/RuntimeException
          31   136   518   any
         137   515   518   any
         518   522   518   any
          11   136   554   Class java/lang/Exception
         137   551   554   Class java/lang/Exception

  private boolean redeliveryExpectedInCurrentTransaction(org.apache.activemq.command.MessageDispatch, boolean);
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: invokevirtual #265                // Method org/apache/activemq/ActiveMQSession.isTransacted:()Z
       7: ifeq          80
      10: aload_0
      11: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      14: dup
      15: astore_3
      16: monitorenter
      17: aload_0
      18: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      21: ifnull        68
      24: aload_0
      25: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      28: aload_1
      29: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      32: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      35: invokevirtual #398                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.containsKey:(Ljava/lang/Object;)Z
      38: ifeq          68
      41: iload_2
      42: ifeq          64
      45: aload_0
      46: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      49: aload_1
      50: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
      53: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
      56: iconst_1
      57: invokestatic  #399                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      60: invokevirtual #400                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      63: pop
      64: iconst_1
      65: aload_3
      66: monitorexit
      67: ireturn
      68: aload_3
      69: monitorexit
      70: goto          80
      73: astore        4
      75: aload_3
      76: monitorexit
      77: aload         4
      79: athrow
      80: iconst_0
      81: ireturn
    Exception table:
       from    to  target type
          17    67    73   any
          68    70    73   any
          73    77    73   any

  private org.apache.activemq.command.ConsumerId redeliveryPendingInCompetingTransaction(org.apache.activemq.command.MessageDispatch);
    Code:
       0: aload_0
       1: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
       4: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
       7: invokevirtual #401                // Method org/apache/activemq/ActiveMQConnection.getSessions:()Ljava/util/concurrent/CopyOnWriteArrayList;
      10: invokevirtual #402                // Method java/util/concurrent/CopyOnWriteArrayList.iterator:()Ljava/util/Iterator;
      13: astore_2
      14: aload_2
      15: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      20: ifeq          86
      23: aload_2
      24: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      29: checkcast     #403                // class org/apache/activemq/ActiveMQSession
      32: astore_3
      33: aload_3
      34: getfield      #404                // Field org/apache/activemq/ActiveMQSession.consumers:Ljava/util/concurrent/CopyOnWriteArrayList;
      37: invokevirtual #402                // Method java/util/concurrent/CopyOnWriteArrayList.iterator:()Ljava/util/Iterator;
      40: astore        4
      42: aload         4
      44: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      49: ifeq          83
      52: aload         4
      54: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      59: checkcast     #405                // class org/apache/activemq/ActiveMQMessageConsumer
      62: astore        5
      64: aload         5
      66: aload_1
      67: iconst_0
      68: invokespecial #383                // Method redeliveryExpectedInCurrentTransaction:(Lorg/apache/activemq/command/MessageDispatch;Z)Z
      71: ifeq          80
      74: aload         5
      76: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
      79: areturn
      80: goto          42
      83: goto          14
      86: aconst_null
      87: areturn

  private void clearDeliveredList();
    Code:
       0: aload_0
       1: getfield      #225                // Field clearDeliveredList:Z
       4: ifeq          403
       7: aload_0
       8: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      11: dup
      12: astore_1
      13: monitorenter
      14: aload_0
      15: getfield      #225                // Field clearDeliveredList:Z
      18: ifeq          391
      21: aload_0
      22: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      25: invokevirtual #208                // Method java/util/LinkedList.isEmpty:()Z
      28: ifne          386
      31: aload_0
      32: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      35: invokevirtual #265                // Method org/apache/activemq/ActiveMQSession.isTransacted:()Z
      38: ifeq          195
      41: aload_0
      42: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      45: ifnonnull     70
      48: aload_0
      49: new           #406                // class org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap
      52: dup
      53: aload_0
      54: aload_0
      55: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      58: invokevirtual #209                // Method org/apache/activemq/ActiveMQSession.getTransactionContext:()Lorg/apache/activemq/TransactionContext;
      61: invokevirtual #285                // Method org/apache/activemq/TransactionContext.getTransactionId:()Lorg/apache/activemq/command/TransactionId;
      64: invokespecial #407                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;Lorg/apache/activemq/command/TransactionId;)V
      67: putfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
      70: aload_0
      71: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
      74: invokevirtual #361                // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
      77: astore_2
      78: aload_2
      79: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      84: ifeq          119
      87: aload_2
      88: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      93: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
      96: astore_3
      97: aload_0
      98: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
     101: aload_3
     102: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     105: invokevirtual #172                // Method org/apache/activemq/command/Message.getMessageId:()Lorg/apache/activemq/command/MessageId;
     108: iconst_0
     109: invokestatic  #399                // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     112: invokevirtual #400                // Method org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     115: pop
     116: goto          78
     119: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     122: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     127: ifeq          386
     130: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     133: new           #36                 // class java/lang/StringBuilder
     136: dup
     137: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     140: aload_0
     141: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     144: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     147: ldc_w         #408                // String  tracking existing transacted
     150: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     153: aload_0
     154: getfield      #314                // Field previouslyDeliveredMessages:Lorg/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap;
     157: getfield      #323                // Field org/apache/activemq/ActiveMQMessageConsumer$PreviouslyDeliveredMap.transactionId:Lorg/apache/activemq/command/TransactionId;
     160: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     163: ldc_w         #409                // String  delivered list (
     166: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     169: aload_0
     170: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     173: invokevirtual #297                // Method java/util/LinkedList.size:()I
     176: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     179: ldc           #230                // String ) on transport interrupt
     181: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     184: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     187: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     192: goto          386
     195: aload_0
     196: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     199: invokevirtual #200                // Method org/apache/activemq/ActiveMQSession.isClientAcknowledge:()Z
     202: ifeq          317
     205: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     208: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     213: ifeq          262
     216: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     219: new           #36                 // class java/lang/StringBuilder
     222: dup
     223: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     226: aload_0
     227: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     230: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     233: ldc_w         #410                // String  rolling back delivered list (
     236: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     239: aload_0
     240: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     243: invokevirtual #297                // Method java/util/LinkedList.size:()I
     246: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     249: ldc           #230                // String ) on transport interrupt
     251: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     254: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     257: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     262: aload_0
     263: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
     266: invokevirtual #112                // Method org/apache/activemq/command/ConsumerInfo.isBrowser:()Z
     269: ifne          317
     272: aload_0
     273: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     276: invokevirtual #361                // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
     279: astore_2
     280: aload_2
     281: invokeinterface #233,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     286: ifeq          317
     289: aload_2
     290: invokeinterface #234,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     295: checkcast     #235                // class org/apache/activemq/command/MessageDispatch
     298: astore_3
     299: aload_0
     300: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
     303: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
     306: aload_0
     307: aload_3
     308: invokevirtual #151                // Method org/apache/activemq/command/MessageDispatch.getMessage:()Lorg/apache/activemq/command/Message;
     311: invokevirtual #236                // Method org/apache/activemq/ActiveMQConnection.rollbackDuplicate:(Lorg/apache/activemq/ActiveMQDispatcher;Lorg/apache/activemq/command/Message;)V
     314: goto          280
     317: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     320: invokeinterface #153,  1          // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     325: ifeq          374
     328: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     331: new           #36                 // class java/lang/StringBuilder
     334: dup
     335: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     338: aload_0
     339: invokevirtual #154                // Method getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     342: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     345: ldc_w         #411                // String  clearing delivered list (
     348: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     351: aload_0
     352: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     355: invokevirtual #297                // Method java/util/LinkedList.size:()I
     358: invokevirtual #90                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     361: ldc           #230                // String ) on transport interrupt
     363: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     366: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     369: invokeinterface #156,  2          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     374: aload_0
     375: getfield      #13                 // Field deliveredMessages:Ljava/util/LinkedList;
     378: invokevirtual #243                // Method java/util/LinkedList.clear:()V
     381: aload_0
     382: aconst_null
     383: putfield      #245                // Field pendingAck:Lorg/apache/activemq/command/MessageAck;
     386: aload_0
     387: iconst_0
     388: putfield      #225                // Field clearDeliveredList:Z
     391: aload_1
     392: monitorexit
     393: goto          403
     396: astore        4
     398: aload_1
     399: monitorexit
     400: aload         4
     402: athrow
     403: return
    Exception table:
       from    to  target type
          14   393   396   any
         396   400   396   any

  public int getMessageSize();
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #229,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.size:()I
       9: ireturn

  public void start() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
       4: invokeinterface #147,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.isClosed:()Z
       9: ifeq          13
      12: return
      13: aload_0
      14: getfield      #2                  // Field started:Ljava/util/concurrent/atomic/AtomicBoolean;
      17: iconst_1
      18: invokevirtual #252                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
      21: aload_0
      22: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      25: invokeinterface #412,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.start:()V
      30: aload_0
      31: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      34: getfield      #413                // Field org/apache/activemq/ActiveMQSession.executor:Lorg/apache/activemq/ActiveMQSessionExecutor;
      37: invokevirtual #414                // Method org/apache/activemq/ActiveMQSessionExecutor.wakeup:()V
      40: return

  public void stop();
    Code:
       0: aload_0
       1: getfield      #2                  // Field started:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iconst_0
       5: invokevirtual #252                // Method java/util/concurrent/atomic/AtomicBoolean.set:(Z)V
       8: aload_0
       9: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      12: invokeinterface #360,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.stop:()V
      17: return

  public java.lang.String toString();
    Code:
       0: new           #36                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
       7: ldc_w         #415                // String ActiveMQMessageConsumer { value=
      10: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      13: aload_0
      14: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
      17: invokevirtual #130                // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
      20: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      23: ldc_w         #416                // String , started=
      26: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      29: aload_0
      30: getfield      #2                  // Field started:Ljava/util/concurrent/atomic/AtomicBoolean;
      33: invokevirtual #417                // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
      36: invokevirtual #418                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
      39: ldc_w         #419                // String  }
      42: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      45: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      48: areturn

  public boolean iterate();
    Code:
       0: aload_0
       1: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
       4: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
       7: checkcast     #138                // class javax/jms/MessageListener
      10: astore_1
      11: aload_1
      12: ifnull        36
      15: aload_0
      16: getfield      #57                 // Field unconsumedMessages:Lorg/apache/activemq/MessageDispatchChannel;
      19: invokeinterface #420,  1          // InterfaceMethod org/apache/activemq/MessageDispatchChannel.dequeueNoWait:()Lorg/apache/activemq/command/MessageDispatch;
      24: astore_2
      25: aload_2
      26: ifnull        36
      29: aload_0
      30: aload_2
      31: invokevirtual #391                // Method dispatch:(Lorg/apache/activemq/command/MessageDispatch;)V
      34: iconst_1
      35: ireturn
      36: iconst_0
      37: ireturn

  public boolean isInUse(org.apache.activemq.command.ActiveMQTempDestination);
    Code:
       0: aload_0
       1: getfield      #68                 // Field info:Lorg/apache/activemq/command/ConsumerInfo;
       4: invokevirtual #133                // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
       7: aload_1
       8: invokevirtual #421                // Method org/apache/activemq/command/ActiveMQDestination.equals:(Ljava/lang/Object;)Z
      11: ireturn

  public long getLastDeliveredSequenceId();
    Code:
       0: aload_0
       1: getfield      #220                // Field lastDeliveredSequenceId:J
       4: lreturn

  public java.io.IOException getFailureError();
    Code:
       0: aload_0
       1: getfield      #149                // Field failureError:Ljava/io/IOException;
       4: areturn

  public void setFailureError(java.io.IOException);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #149                // Field failureError:Ljava/io/IOException;
       5: return

  public long getOptimizedAckScheduledAckInterval();
    Code:
       0: aload_0
       1: getfield      #26                 // Field optimizedAckScheduledAckInterval:J
       4: lreturn

  public void setOptimizedAckScheduledAckInterval(long) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #26                 // Field optimizedAckScheduledAckInterval:J
       5: aload_0
       6: getfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
       9: ifnull        52
      12: aload_0
      13: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      16: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      19: invokevirtual #260                // Method org/apache/activemq/ActiveMQConnection.getScheduler:()Lorg/apache/activemq/thread/Scheduler;
      22: aload_0
      23: getfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      26: invokevirtual #261                // Method org/apache/activemq/thread/Scheduler.cancel:(Ljava/lang/Runnable;)V
      29: goto          47
      32: astore_3
      33: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
      36: ldc_w         #422                // String Caught exception while cancelling old optimized ack task
      39: aload_3
      40: invokeinterface #423,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      45: aload_3
      46: athrow
      47: aload_0
      48: aconst_null
      49: putfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      52: aload_0
      53: getfield      #1                  // Field optimizeAcknowledge:Z
      56: ifeq          116
      59: aload_0
      60: getfield      #26                 // Field optimizedAckScheduledAckInterval:J
      63: lconst_0
      64: lcmp
      65: ifle          116
      68: aload_0
      69: new           #424                // class org/apache/activemq/ActiveMQMessageConsumer$8
      72: dup
      73: aload_0
      74: invokespecial #425                // Method org/apache/activemq/ActiveMQMessageConsumer$8."<init>":(Lorg/apache/activemq/ActiveMQMessageConsumer;)V
      77: putfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      80: aload_0
      81: getfield      #60                 // Field session:Lorg/apache/activemq/ActiveMQSession;
      84: getfield      #43                 // Field org/apache/activemq/ActiveMQSession.connection:Lorg/apache/activemq/ActiveMQConnection;
      87: invokevirtual #260                // Method org/apache/activemq/ActiveMQConnection.getScheduler:()Lorg/apache/activemq/thread/Scheduler;
      90: aload_0
      91: getfield      #259                // Field optimizedAckTask:Ljava/lang/Runnable;
      94: lload_1
      95: invokevirtual #426                // Method org/apache/activemq/thread/Scheduler.executePeriodically:(Ljava/lang/Runnable;J)V
      98: goto          116
     101: astore_3
     102: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
     105: ldc_w         #427                // String Caught exception while scheduling new optimized ack task
     108: aload_3
     109: invokeinterface #423,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     114: aload_3
     115: athrow
     116: return
    Exception table:
       from    to  target type
          12    29    32   Class javax/jms/JMSException
          80    98   101   Class javax/jms/JMSException

  public boolean hasMessageListener();
    Code:
       0: aload_0
       1: getfield      #16                 // Field messageListener:Ljava/util/concurrent/atomic/AtomicReference;
       4: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
       7: ifnull        14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: ireturn

  static org.slf4j.Logger access$000();
    Code:
       0: getstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static java.util.concurrent.atomic.AtomicBoolean access$100(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: getfield      #8                  // Field deliveryingAcknowledgements:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: areturn

  static boolean access$200(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: getfield      #7                  // Field transactedIndividualAck:Z
       4: ireturn

  static void access$300(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: invokespecial #6                  // Method clearDeliveredList:()V
       4: return

  static void access$400(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: invokespecial #5                  // Method waitForRedeliveries:()V
       4: return

  static void access$500(org.apache.activemq.ActiveMQMessageConsumer) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokespecial #4                  // Method rollbackOnFailedRecoveryRedelivery:()V
       4: return

  static boolean access$602(org.apache.activemq.ActiveMQMessageConsumer, boolean);
    Code:
       0: aload_0
       1: iload_1
       2: dup_x1
       3: putfield      #3                  // Field synchronizationRegistered:Z
       6: ireturn

  static java.util.concurrent.atomic.AtomicBoolean access$700(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: getfield      #2                  // Field started:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: areturn

  static boolean access$800(org.apache.activemq.ActiveMQMessageConsumer);
    Code:
       0: aload_0
       1: getfield      #1                  // Field optimizeAcknowledge:Z
       4: ireturn

  static {};
    Code:
       0: ldc_w         #405                // class org/apache/activemq/ActiveMQMessageConsumer
       3: invokestatic  #428                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #9                  // Field LOG:Lorg/slf4j/Logger;
       9: return
}

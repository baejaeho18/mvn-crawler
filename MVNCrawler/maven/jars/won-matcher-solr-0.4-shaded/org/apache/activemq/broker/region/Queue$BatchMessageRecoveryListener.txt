Compiled from "Queue.java"
class org.apache.activemq.broker.region.Queue$BatchMessageRecoveryListener implements org.apache.activemq.store.MessageRecoveryListener {
  final java.util.LinkedList<org.apache.activemq.command.Message> toExpire;

  final double totalMessageCount;

  int recoveredAccumulator;

  int currentBatchCount;

  final org.apache.activemq.broker.region.Queue this$0;

  org.apache.activemq.broker.region.Queue$BatchMessageRecoveryListener(org.apache.activemq.broker.region.Queue, int);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
       5: aload_0
       6: invokespecial #2                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field toExpire:Ljava/util/LinkedList;
      20: aload_0
      21: iconst_0
      22: putfield      #6                  // Field recoveredAccumulator:I
      25: aload_0
      26: iload_2
      27: i2d
      28: putfield      #7                  // Field totalMessageCount:D
      31: aload_0
      32: aload_0
      33: getfield      #6                  // Field recoveredAccumulator:I
      36: putfield      #8                  // Field currentBatchCount:I
      39: return

  public boolean recoverMessage(org.apache.activemq.command.Message);
    Code:
       0: aload_0
       1: dup
       2: getfield      #6                  // Field recoveredAccumulator:I
       5: iconst_1
       6: iadd
       7: putfield      #6                  // Field recoveredAccumulator:I
      10: aload_0
      11: getfield      #6                  // Field recoveredAccumulator:I
      14: sipush        10000
      17: irem
      18: ifne          82
      21: getstatic     #9                  // Field org/apache/activemq/broker/region/Queue.LOG:Lorg/slf4j/Logger;
      24: ldc           #10                 // String cursor for {} has recovered {} messages. {}% complete
      26: iconst_3
      27: anewarray     #11                 // class java/lang/Object
      30: dup
      31: iconst_0
      32: aload_0
      33: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      36: invokevirtual #12                 // Method org/apache/activemq/broker/region/Queue.getActiveMQDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      39: invokevirtual #13                 // Method org/apache/activemq/command/ActiveMQDestination.getQualifiedName:()Ljava/lang/String;
      42: aastore
      43: dup
      44: iconst_1
      45: aload_0
      46: getfield      #6                  // Field recoveredAccumulator:I
      49: invokestatic  #14                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      52: aastore
      53: dup
      54: iconst_2
      55: new           #15                 // class java/lang/Integer
      58: dup
      59: aload_0
      60: getfield      #6                  // Field recoveredAccumulator:I
      63: bipush        100
      65: imul
      66: i2d
      67: aload_0
      68: getfield      #7                  // Field totalMessageCount:D
      71: ddiv
      72: d2i
      73: invokespecial #16                 // Method java/lang/Integer."<init>":(I)V
      76: aastore
      77: invokeinterface #17,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
      82: aload_1
      83: invokevirtual #18                 // Method org/apache/activemq/command/Message.isExpired:()Z
      86: ifeq          116
      89: aload_0
      90: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      93: getfield      #19                 // Field org/apache/activemq/broker/region/Queue.broker:Lorg/apache/activemq/broker/Broker;
      96: aload_1
      97: invokeinterface #20,  2           // InterfaceMethod org/apache/activemq/broker/Broker.isExpired:(Lorg/apache/activemq/broker/region/MessageReference;)Z
     102: ifeq          116
     105: aload_0
     106: getfield      #5                  // Field toExpire:Ljava/util/LinkedList;
     109: aload_1
     110: invokevirtual #21                 // Method java/util/LinkedList.add:(Ljava/lang/Object;)Z
     113: pop
     114: iconst_1
     115: ireturn
     116: aload_0
     117: invokevirtual #22                 // Method hasSpace:()Z
     120: ifeq          219
     123: aload_1
     124: aload_0
     125: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     128: invokevirtual #23                 // Method org/apache/activemq/command/Message.setRegionDestination:(Lorg/apache/activemq/command/Message$MessageDestination;)V
     131: aload_0
     132: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     135: invokestatic  #24                 // Method org/apache/activemq/broker/region/Queue.access$400:(Lorg/apache/activemq/broker/region/Queue;)Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     138: invokevirtual #25                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.writeLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$WriteLock;
     141: invokevirtual #26                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$WriteLock.lock:()V
     144: aload_0
     145: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     148: getfield      #27                 // Field org/apache/activemq/broker/region/Queue.messages:Lorg/apache/activemq/broker/region/cursors/PendingMessageCursor;
     151: aload_1
     152: invokeinterface #28,  2           // InterfaceMethod org/apache/activemq/broker/region/cursors/PendingMessageCursor.addMessageLast:(Lorg/apache/activemq/broker/region/MessageReference;)V
     157: goto          172
     160: astore_2
     161: getstatic     #9                  // Field org/apache/activemq/broker/region/Queue.LOG:Lorg/slf4j/Logger;
     164: ldc           #30                 // String Failed to add message to cursor
     166: aload_2
     167: invokeinterface #31,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     172: aload_0
     173: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     176: invokestatic  #24                 // Method org/apache/activemq/broker/region/Queue.access$400:(Lorg/apache/activemq/broker/region/Queue;)Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     179: invokevirtual #25                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.writeLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$WriteLock;
     182: invokevirtual #32                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$WriteLock.unlock:()V
     185: goto          204
     188: astore_3
     189: aload_0
     190: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     193: invokestatic  #24                 // Method org/apache/activemq/broker/region/Queue.access$400:(Lorg/apache/activemq/broker/region/Queue;)Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     196: invokevirtual #25                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.writeLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$WriteLock;
     199: invokevirtual #32                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$WriteLock.unlock:()V
     202: aload_3
     203: athrow
     204: aload_0
     205: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
     208: getfield      #33                 // Field org/apache/activemq/broker/region/Queue.destinationStatistics:Lorg/apache/activemq/broker/region/DestinationStatistics;
     211: invokevirtual #34                 // Method org/apache/activemq/broker/region/DestinationStatistics.getMessages:()Lorg/apache/activemq/management/CountStatisticImpl;
     214: invokevirtual #35                 // Method org/apache/activemq/management/CountStatisticImpl.increment:()V
     217: iconst_1
     218: ireturn
     219: iconst_0
     220: ireturn
    Exception table:
       from    to  target type
         144   157   160   Class java/lang/Exception
         144   172   188   any
         188   189   188   any

  public boolean recoverMessageReference(org.apache.activemq.command.MessageId) throws java.lang.Exception;
    Code:
       0: new           #36                 // class java/lang/RuntimeException
       3: dup
       4: ldc           #37                 // String Should not be called.
       6: invokespecial #38                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
       9: athrow

  public boolean hasSpace();
    Code:
       0: iconst_1
       1: ireturn

  public boolean isDuplicate(org.apache.activemq.command.MessageId);
    Code:
       0: iconst_0
       1: ireturn

  public void reset();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #6                  // Field recoveredAccumulator:I
       5: putfield      #8                  // Field currentBatchCount:I
       8: return

  public void processExpired();
    Code:
       0: aload_0
       1: getfield      #5                  // Field toExpire:Ljava/util/LinkedList;
       4: invokevirtual #39                 // Method java/util/LinkedList.iterator:()Ljava/util/Iterator;
       7: astore_1
       8: aload_1
       9: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      14: ifeq          65
      17: aload_1
      18: invokeinterface #41,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      23: checkcast     #42                 // class org/apache/activemq/command/Message
      26: astore_2
      27: aload_0
      28: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      31: aload_0
      32: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      35: invokevirtual #43                 // Method org/apache/activemq/broker/region/Queue.createConnectionContext:()Lorg/apache/activemq/broker/ConnectionContext;
      38: aload_0
      39: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      42: aload_2
      43: invokestatic  #44                 // Method org/apache/activemq/broker/region/Queue.access$500:(Lorg/apache/activemq/broker/region/Queue;Lorg/apache/activemq/command/Message;)Lorg/apache/activemq/broker/region/QueueMessageReference;
      46: invokevirtual #45                 // Method org/apache/activemq/broker/region/Queue.messageExpired:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/broker/region/MessageReference;)V
      49: aload_0
      50: getfield      #1                  // Field this$0:Lorg/apache/activemq/broker/region/Queue;
      53: getfield      #33                 // Field org/apache/activemq/broker/region/Queue.destinationStatistics:Lorg/apache/activemq/broker/region/DestinationStatistics;
      56: invokevirtual #34                 // Method org/apache/activemq/broker/region/DestinationStatistics.getMessages:()Lorg/apache/activemq/management/CountStatisticImpl;
      59: invokevirtual #35                 // Method org/apache/activemq/management/CountStatisticImpl.increment:()V
      62: goto          8
      65: aload_0
      66: getfield      #5                  // Field toExpire:Ljava/util/LinkedList;
      69: invokevirtual #46                 // Method java/util/LinkedList.clear:()V
      72: return

  public boolean done();
    Code:
       0: aload_0
       1: getfield      #8                  // Field currentBatchCount:I
       4: aload_0
       5: getfield      #6                  // Field recoveredAccumulator:I
       8: if_icmpne     15
      11: iconst_1
      12: goto          16
      15: iconst_0
      16: ireturn
}

Compiled from "TopicRegion.java"
public class org.apache.activemq.broker.region.TopicRegion extends org.apache.activemq.broker.region.AbstractRegion {
  private static final org.slf4j.Logger LOG;

  protected final java.util.concurrent.ConcurrentHashMap<org.apache.activemq.util.SubscriptionKey, org.apache.activemq.broker.region.DurableTopicSubscription> durableSubscriptions;

  private final org.apache.activemq.util.LongSequenceGenerator recoveredDurableSubIdGenerator;

  private final org.apache.activemq.command.SessionId recoveredDurableSubSessionId;

  private boolean keepDurableSubsActive;

  private java.util.Timer cleanupTimer;

  private java.util.TimerTask cleanupTask;

  public org.apache.activemq.broker.region.TopicRegion(org.apache.activemq.broker.region.RegionBroker, org.apache.activemq.broker.region.DestinationStatistics, org.apache.activemq.usage.SystemUsage, org.apache.activemq.thread.TaskRunnerFactory, org.apache.activemq.broker.region.DestinationFactory);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: aload         4
       6: aload         5
       8: invokespecial #1                  // Method org/apache/activemq/broker/region/AbstractRegion."<init>":(Lorg/apache/activemq/broker/region/RegionBroker;Lorg/apache/activemq/broker/region/DestinationStatistics;Lorg/apache/activemq/usage/SystemUsage;Lorg/apache/activemq/thread/TaskRunnerFactory;Lorg/apache/activemq/broker/region/DestinationFactory;)V
      11: aload_0
      12: new           #2                  // class java/util/concurrent/ConcurrentHashMap
      15: dup
      16: invokespecial #3                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      19: putfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      22: aload_0
      23: new           #5                  // class org/apache/activemq/util/LongSequenceGenerator
      26: dup
      27: invokespecial #6                  // Method org/apache/activemq/util/LongSequenceGenerator."<init>":()V
      30: putfield      #7                  // Field recoveredDurableSubIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
      33: aload_0
      34: new           #8                  // class org/apache/activemq/command/SessionId
      37: dup
      38: new           #9                  // class org/apache/activemq/command/ConnectionId
      41: dup
      42: ldc           #10                 // String OFFLINE
      44: invokespecial #11                 // Method org/apache/activemq/command/ConnectionId."<init>":(Ljava/lang/String;)V
      47: aload_0
      48: getfield      #7                  // Field recoveredDurableSubIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
      51: invokevirtual #12                 // Method org/apache/activemq/util/LongSequenceGenerator.getNextSequenceId:()J
      54: invokespecial #13                 // Method org/apache/activemq/command/SessionId."<init>":(Lorg/apache/activemq/command/ConnectionId;J)V
      57: putfield      #14                 // Field recoveredDurableSubSessionId:Lorg/apache/activemq/command/SessionId;
      60: aload_1
      61: invokevirtual #15                 // Method org/apache/activemq/broker/region/RegionBroker.getBrokerService:()Lorg/apache/activemq/broker/BrokerService;
      64: invokevirtual #16                 // Method org/apache/activemq/broker/BrokerService.getOfflineDurableSubscriberTaskSchedule:()J
      67: ldc2_w        #17                 // long -1l
      70: lcmp
      71: ifeq          139
      74: aload_1
      75: invokevirtual #15                 // Method org/apache/activemq/broker/region/RegionBroker.getBrokerService:()Lorg/apache/activemq/broker/BrokerService;
      78: invokevirtual #19                 // Method org/apache/activemq/broker/BrokerService.getOfflineDurableSubscriberTimeout:()J
      81: ldc2_w        #17                 // long -1l
      84: lcmp
      85: ifeq          139
      88: aload_0
      89: new           #20                 // class java/util/Timer
      92: dup
      93: ldc           #21                 // String ActiveMQ Durable Subscriber Cleanup Timer
      95: iconst_1
      96: invokespecial #22                 // Method java/util/Timer."<init>":(Ljava/lang/String;Z)V
      99: putfield      #23                 // Field cleanupTimer:Ljava/util/Timer;
     102: aload_0
     103: new           #24                 // class org/apache/activemq/broker/region/TopicRegion$1
     106: dup
     107: aload_0
     108: invokespecial #25                 // Method org/apache/activemq/broker/region/TopicRegion$1."<init>":(Lorg/apache/activemq/broker/region/TopicRegion;)V
     111: putfield      #26                 // Field cleanupTask:Ljava/util/TimerTask;
     114: aload_0
     115: getfield      #23                 // Field cleanupTimer:Ljava/util/Timer;
     118: aload_0
     119: getfield      #26                 // Field cleanupTask:Ljava/util/TimerTask;
     122: aload_1
     123: invokevirtual #15                 // Method org/apache/activemq/broker/region/RegionBroker.getBrokerService:()Lorg/apache/activemq/broker/BrokerService;
     126: invokevirtual #16                 // Method org/apache/activemq/broker/BrokerService.getOfflineDurableSubscriberTaskSchedule:()J
     129: aload_1
     130: invokevirtual #15                 // Method org/apache/activemq/broker/region/RegionBroker.getBrokerService:()Lorg/apache/activemq/broker/BrokerService;
     133: invokevirtual #16                 // Method org/apache/activemq/broker/BrokerService.getOfflineDurableSubscriberTaskSchedule:()J
     136: invokevirtual #27                 // Method java/util/Timer.schedule:(Ljava/util/TimerTask;JJ)V
     139: return

  public void stop() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #28                 // Method org/apache/activemq/broker/region/AbstractRegion.stop:()V
       4: aload_0
       5: getfield      #23                 // Field cleanupTimer:Ljava/util/Timer;
       8: ifnull        18
      11: aload_0
      12: getfield      #23                 // Field cleanupTimer:Ljava/util/Timer;
      15: invokevirtual #29                 // Method java/util/Timer.cancel:()V
      18: return

  public void doCleanup();
    Code:
       0: invokestatic  #30                 // Method java/lang/System.currentTimeMillis:()J
       3: lstore_1
       4: aload_0
       5: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
       8: invokevirtual #31                 // Method java/util/concurrent/ConcurrentHashMap.entrySet:()Ljava/util/Set;
      11: invokeinterface #32,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      16: astore_3
      17: aload_3
      18: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          212
      26: aload_3
      27: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #35                 // class java/util/Map$Entry
      35: astore        4
      37: aload         4
      39: invokeinterface #36,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      44: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      47: astore        5
      49: aload         5
      51: invokevirtual #38                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.isActive:()Z
      54: ifne          209
      57: aload         5
      59: invokevirtual #39                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getOfflineTimestamp:()J
      62: lstore        6
      64: lload         6
      66: ldc2_w        #17                 // long -1l
      69: lcmp
      70: ifeq          209
      73: lload_1
      74: lload         6
      76: lsub
      77: aload_0
      78: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
      81: invokevirtual #15                 // Method org/apache/activemq/broker/region/RegionBroker.getBrokerService:()Lorg/apache/activemq/broker/BrokerService;
      84: invokevirtual #19                 // Method org/apache/activemq/broker/BrokerService.getOfflineDurableSubscriberTimeout:()J
      87: lcmp
      88: iflt          209
      91: getstatic     #41                 // Field LOG:Lorg/slf4j/Logger;
      94: ldc           #42                 // String Destroying durable subscriber due to inactivity: {}
      96: aload         5
      98: invokeinterface #43,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     103: new           #44                 // class org/apache/activemq/command/RemoveSubscriptionInfo
     106: dup
     107: invokespecial #45                 // Method org/apache/activemq/command/RemoveSubscriptionInfo."<init>":()V
     110: astore        8
     112: aload         8
     114: aload         4
     116: invokeinterface #46,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     121: checkcast     #47                 // class org/apache/activemq/util/SubscriptionKey
     124: invokevirtual #48                 // Method org/apache/activemq/util/SubscriptionKey.getClientId:()Ljava/lang/String;
     127: invokevirtual #49                 // Method org/apache/activemq/command/RemoveSubscriptionInfo.setClientId:(Ljava/lang/String;)V
     130: aload         8
     132: aload         4
     134: invokeinterface #46,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     139: checkcast     #47                 // class org/apache/activemq/util/SubscriptionKey
     142: invokevirtual #50                 // Method org/apache/activemq/util/SubscriptionKey.getSubscriptionName:()Ljava/lang/String;
     145: invokevirtual #51                 // Method org/apache/activemq/command/RemoveSubscriptionInfo.setSubscriptionName:(Ljava/lang/String;)V
     148: new           #52                 // class org/apache/activemq/broker/ConnectionContext
     151: dup
     152: invokespecial #53                 // Method org/apache/activemq/broker/ConnectionContext."<init>":()V
     155: astore        9
     157: aload         9
     159: aload_0
     160: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     163: invokevirtual #54                 // Method org/apache/activemq/broker/ConnectionContext.setBroker:(Lorg/apache/activemq/broker/Broker;)V
     166: aload         9
     168: aload         4
     170: invokeinterface #46,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     175: checkcast     #47                 // class org/apache/activemq/util/SubscriptionKey
     178: invokevirtual #48                 // Method org/apache/activemq/util/SubscriptionKey.getClientId:()Ljava/lang/String;
     181: invokevirtual #55                 // Method org/apache/activemq/broker/ConnectionContext.setClientId:(Ljava/lang/String;)V
     184: aload_0
     185: aload         9
     187: aload         8
     189: invokevirtual #56                 // Method removeSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/RemoveSubscriptionInfo;)V
     192: goto          209
     195: astore        8
     197: getstatic     #41                 // Field LOG:Lorg/slf4j/Logger;
     200: ldc           #58                 // String Failed to remove inactive durable subscriber
     202: aload         8
     204: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     209: goto          17
     212: return
    Exception table:
       from    to  target type
         103   192   195   Class java/lang/Exception

  public org.apache.activemq.broker.region.Subscription addConsumer(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.ConsumerInfo) throws java.lang.Exception;
    Code:
       0: aload_2
       1: invokevirtual #60                 // Method org/apache/activemq/command/ConsumerInfo.isDurable:()Z
       4: ifeq          424
       7: aload_2
       8: invokevirtual #61                 // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      11: astore_3
      12: aload_3
      13: invokevirtual #62                 // Method org/apache/activemq/command/ActiveMQDestination.isPattern:()Z
      16: ifne          27
      19: aload_0
      20: aload_1
      21: aload_3
      22: iconst_1
      23: invokevirtual #63                 // Method lookup:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ActiveMQDestination;Z)Lorg/apache/activemq/broker/region/Destination;
      26: pop
      27: aload_1
      28: invokevirtual #64                 // Method org/apache/activemq/broker/ConnectionContext.getClientId:()Ljava/lang/String;
      31: astore        4
      33: aload_2
      34: invokevirtual #65                 // Method org/apache/activemq/command/ConsumerInfo.getSubscriptionName:()Ljava/lang/String;
      37: astore        5
      39: new           #47                 // class org/apache/activemq/util/SubscriptionKey
      42: dup
      43: aload         4
      45: aload         5
      47: invokespecial #66                 // Method org/apache/activemq/util/SubscriptionKey."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      50: astore        6
      52: aload_0
      53: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      56: aload         6
      58: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      61: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      64: astore        7
      66: aload         7
      68: ifnull        324
      71: aload         7
      73: invokevirtual #38                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.isActive:()Z
      76: ifeq          117
      79: new           #68                 // class javax/jms/JMSException
      82: dup
      83: new           #69                 // class java/lang/StringBuilder
      86: dup
      87: invokespecial #70                 // Method java/lang/StringBuilder."<init>":()V
      90: ldc           #71                 // String Durable consumer is in use for client:
      92: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      95: aload         4
      97: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     100: ldc           #73                 // String  and subscriptionName:
     102: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     105: aload         5
     107: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     110: invokevirtual #74                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     113: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     116: athrow
     117: aload_0
     118: aload_2
     119: aload         7
     121: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     124: invokespecial #77                 // Method hasDurableSubChanged:(Lorg/apache/activemq/command/ConsumerInfo;Lorg/apache/activemq/command/ConsumerInfo;)Z
     127: ifeq          276
     130: aload_0
     131: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     134: aload         6
     136: invokevirtual #78                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     139: pop
     140: aload_0
     141: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     144: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
     147: invokevirtual #81                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.lock:()V
     150: aload_0
     151: getfield      #82                 // Field destinations:Ljava/util/Map;
     154: invokeinterface #83,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
     159: invokeinterface #84,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     164: astore        8
     166: aload         8
     168: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     173: ifeq          214
     176: aload         8
     178: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     183: checkcast     #85                 // class org/apache/activemq/broker/region/Destination
     186: astore        9
     188: aload         9
     190: instanceof    #86                 // class org/apache/activemq/broker/region/Topic
     193: ifeq          211
     196: aload         9
     198: checkcast     #86                 // class org/apache/activemq/broker/region/Topic
     201: astore        10
     203: aload         10
     205: aload_1
     206: aload         6
     208: invokevirtual #87                 // Method org/apache/activemq/broker/region/Topic.deleteSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/util/SubscriptionKey;)V
     211: goto          166
     214: aload_0
     215: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     218: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
     221: invokevirtual #88                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.unlock:()V
     224: goto          242
     227: astore        11
     229: aload_0
     230: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     233: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
     236: invokevirtual #88                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.unlock:()V
     239: aload         11
     241: athrow
     242: aload_0
     243: aload_1
     244: aload         7
     246: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     249: invokespecial #89                 // Method org/apache/activemq/broker/region/AbstractRegion.removeConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)V
     252: aload_0
     253: aload_1
     254: aload_2
     255: invokespecial #90                 // Method org/apache/activemq/broker/region/AbstractRegion.addConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)Lorg/apache/activemq/broker/region/Subscription;
     258: pop
     259: aload_0
     260: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     263: aload         6
     265: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     268: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
     271: astore        7
     273: goto          406
     276: aload         7
     278: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     281: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     284: ifnull        305
     287: aload_0
     288: getfield      #92                 // Field subscriptions:Ljava/util/Map;
     291: aload         7
     293: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     296: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     299: invokeinterface #93,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     304: pop
     305: aload_0
     306: getfield      #92                 // Field subscriptions:Ljava/util/Map;
     309: aload_2
     310: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     313: aload         7
     315: invokeinterface #94,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     320: pop
     321: goto          406
     324: aload_0
     325: aload_1
     326: aload_2
     327: invokespecial #90                 // Method org/apache/activemq/broker/region/AbstractRegion.addConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)Lorg/apache/activemq/broker/region/Subscription;
     330: pop
     331: aload_0
     332: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     335: aload         6
     337: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     340: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
     343: astore        7
     345: aload         7
     347: ifnonnull     406
     350: new           #68                 // class javax/jms/JMSException
     353: dup
     354: new           #69                 // class java/lang/StringBuilder
     357: dup
     358: invokespecial #70                 // Method java/lang/StringBuilder."<init>":()V
     361: ldc           #95                 // String Cannot use the same consumerId:
     363: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     366: aload_2
     367: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     370: invokevirtual #96                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     373: ldc           #97                 // String  for two different durable subscriptions clientID:
     375: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     378: aload         6
     380: invokevirtual #48                 // Method org/apache/activemq/util/SubscriptionKey.getClientId:()Ljava/lang/String;
     383: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     386: ldc           #98                 // String  subscriberName:
     388: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     391: aload         6
     393: invokevirtual #50                 // Method org/apache/activemq/util/SubscriptionKey.getSubscriptionName:()Ljava/lang/String;
     396: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     399: invokevirtual #74                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     402: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     405: athrow
     406: aload         7
     408: aload_0
     409: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
     412: aload_1
     413: aload_2
     414: aload_0
     415: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     418: invokevirtual #100                // Method org/apache/activemq/broker/region/DurableTopicSubscription.activate:(Lorg/apache/activemq/usage/SystemUsage;Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;Lorg/apache/activemq/broker/region/RegionBroker;)V
     421: aload         7
     423: areturn
     424: aload_0
     425: aload_1
     426: aload_2
     427: invokespecial #90                 // Method org/apache/activemq/broker/region/AbstractRegion.addConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)Lorg/apache/activemq/broker/region/Subscription;
     430: areturn
    Exception table:
       from    to  target type
         150   214   227   any
         227   229   227   any

  public void removeConsumer(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.ConsumerInfo) throws java.lang.Exception;
    Code:
       0: aload_2
       1: invokevirtual #60                 // Method org/apache/activemq/command/ConsumerInfo.isDurable:()Z
       4: ifeq          53
       7: new           #47                 // class org/apache/activemq/util/SubscriptionKey
      10: dup
      11: aload_1
      12: invokevirtual #64                 // Method org/apache/activemq/broker/ConnectionContext.getClientId:()Ljava/lang/String;
      15: aload_2
      16: invokevirtual #65                 // Method org/apache/activemq/command/ConsumerInfo.getSubscriptionName:()Ljava/lang/String;
      19: invokespecial #66                 // Method org/apache/activemq/util/SubscriptionKey."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      22: astore_3
      23: aload_0
      24: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      27: aload_3
      28: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      31: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      34: astore        4
      36: aload         4
      38: ifnull        50
      41: aload         4
      43: aload_0
      44: getfield      #101                // Field keepDurableSubsActive:Z
      47: invokevirtual #102                // Method org/apache/activemq/broker/region/DurableTopicSubscription.deactivate:(Z)V
      50: goto          59
      53: aload_0
      54: aload_1
      55: aload_2
      56: invokespecial #89                 // Method org/apache/activemq/broker/region/AbstractRegion.removeConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)V
      59: return

  public void removeSubscription(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.RemoveSubscriptionInfo) throws java.lang.Exception;
    Code:
       0: new           #47                 // class org/apache/activemq/util/SubscriptionKey
       3: dup
       4: aload_2
       5: invokevirtual #103                // Method org/apache/activemq/command/RemoveSubscriptionInfo.getClientId:()Ljava/lang/String;
       8: aload_2
       9: invokevirtual #104                // Method org/apache/activemq/command/RemoveSubscriptionInfo.getSubscriptionName:()Ljava/lang/String;
      12: invokespecial #66                 // Method org/apache/activemq/util/SubscriptionKey."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      15: astore_3
      16: aload_0
      17: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      20: aload_3
      21: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      27: astore        4
      29: aload         4
      31: ifnonnull     64
      34: new           #105                // class javax/jms/InvalidDestinationException
      37: dup
      38: new           #69                 // class java/lang/StringBuilder
      41: dup
      42: invokespecial #70                 // Method java/lang/StringBuilder."<init>":()V
      45: ldc           #106                // String No durable subscription exists for:
      47: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      50: aload_2
      51: invokevirtual #104                // Method org/apache/activemq/command/RemoveSubscriptionInfo.getSubscriptionName:()Ljava/lang/String;
      54: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      57: invokevirtual #74                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      60: invokespecial #107                // Method javax/jms/InvalidDestinationException."<init>":(Ljava/lang/String;)V
      63: athrow
      64: aload         4
      66: invokevirtual #38                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.isActive:()Z
      69: ifeq          82
      72: new           #68                 // class javax/jms/JMSException
      75: dup
      76: ldc           #108                // String Durable consumer is in use
      78: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
      81: athrow
      82: aload_0
      83: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      86: aload_3
      87: invokevirtual #78                 // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      90: pop
      91: aload_0
      92: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
      95: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
      98: invokevirtual #81                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.lock:()V
     101: aload_0
     102: getfield      #82                 // Field destinations:Ljava/util/Map;
     105: invokeinterface #83,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
     110: invokeinterface #84,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     115: astore        5
     117: aload         5
     119: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     124: ifeq          189
     127: aload         5
     129: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     134: checkcast     #85                 // class org/apache/activemq/broker/region/Destination
     137: astore        6
     139: aload         6
     141: instanceof    #86                 // class org/apache/activemq/broker/region/Topic
     144: ifeq          164
     147: aload         6
     149: checkcast     #86                 // class org/apache/activemq/broker/region/Topic
     152: astore        7
     154: aload         7
     156: aload_1
     157: aload_3
     158: invokevirtual #87                 // Method org/apache/activemq/broker/region/Topic.deleteSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/util/SubscriptionKey;)V
     161: goto          186
     164: aload         6
     166: instanceof    #109                // class org/apache/activemq/broker/region/DestinationFilter
     169: ifeq          186
     172: aload         6
     174: checkcast     #109                // class org/apache/activemq/broker/region/DestinationFilter
     177: astore        7
     179: aload         7
     181: aload_1
     182: aload_3
     183: invokevirtual #110                // Method org/apache/activemq/broker/region/DestinationFilter.deleteSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/util/SubscriptionKey;)V
     186: goto          117
     189: aload_0
     190: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     193: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
     196: invokevirtual #88                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.unlock:()V
     199: goto          217
     202: astore        8
     204: aload_0
     205: getfield      #79                 // Field destinationsLock:Ljava/util/concurrent/locks/ReentrantReadWriteLock;
     208: invokevirtual #80                 // Method java/util/concurrent/locks/ReentrantReadWriteLock.readLock:()Ljava/util/concurrent/locks/ReentrantReadWriteLock$ReadLock;
     211: invokevirtual #88                 // Method java/util/concurrent/locks/ReentrantReadWriteLock$ReadLock.unlock:()V
     214: aload         8
     216: athrow
     217: aload_0
     218: getfield      #92                 // Field subscriptions:Ljava/util/Map;
     221: aload         4
     223: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     226: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     229: invokeinterface #111,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     234: ifnull        250
     237: aload_0
     238: aload_1
     239: aload         4
     241: invokevirtual #76                 // Method org/apache/activemq/broker/region/DurableTopicSubscription.getConsumerInfo:()Lorg/apache/activemq/command/ConsumerInfo;
     244: invokespecial #89                 // Method org/apache/activemq/broker/region/AbstractRegion.removeConsumer:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)V
     247: goto          256
     250: aload_0
     251: aload         4
     253: invokevirtual #112                // Method destroySubscription:(Lorg/apache/activemq/broker/region/Subscription;)V
     256: return
    Exception table:
       from    to  target type
         101   189   202   any
         202   204   202   any

  public java.lang.String toString();
    Code:
       0: new           #69                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #70                 // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #113                // String TopicRegion: destinations=
       9: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_0
      13: getfield      #82                 // Field destinations:Ljava/util/Map;
      16: invokeinterface #114,  1          // InterfaceMethod java/util/Map.size:()I
      21: invokevirtual #115                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      24: ldc           #116                // String , subscriptions=
      26: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      29: aload_0
      30: getfield      #92                 // Field subscriptions:Ljava/util/Map;
      33: invokeinterface #114,  1          // InterfaceMethod java/util/Map.size:()I
      38: invokevirtual #115                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      41: ldc           #117                // String , memory=
      43: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: aload_0
      47: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
      50: invokevirtual #118                // Method org/apache/activemq/usage/SystemUsage.getMemoryUsage:()Lorg/apache/activemq/usage/MemoryUsage;
      53: invokevirtual #119                // Method org/apache/activemq/usage/MemoryUsage.getPercentUsage:()I
      56: invokevirtual #115                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      59: ldc           #120                // String %
      61: invokevirtual #72                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      64: invokevirtual #74                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      67: areturn

  protected java.util.List<org.apache.activemq.broker.region.Subscription> addSubscriptionsForDestination(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.broker.region.Destination) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #121                // Method org/apache/activemq/broker/region/AbstractRegion.addSubscriptionsForDestination:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/broker/region/Destination;)Ljava/util/List;
       6: astore_3
       7: new           #122                // class java/util/HashSet
      10: dup
      11: aload_3
      12: invokespecial #123                // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      15: astore        4
      17: aload_2
      18: invokeinterface #124,  1          // InterfaceMethod org/apache/activemq/broker/region/Destination.getMessageStore:()Lorg/apache/activemq/store/MessageStore;
      23: checkcast     #125                // class org/apache/activemq/store/TopicMessageStore
      26: astore        5
      28: aload         5
      30: ifnull        318
      33: aload         5
      35: invokeinterface #126,  1          // InterfaceMethod org/apache/activemq/store/TopicMessageStore.getAllSubscriptions:()[Lorg/apache/activemq/command/SubscriptionInfo;
      40: astore        6
      42: iconst_0
      43: istore        7
      45: iload         7
      47: aload         6
      49: arraylength
      50: if_icmpge     224
      53: aload         6
      55: iload         7
      57: aaload
      58: astore        8
      60: getstatic     #41                 // Field LOG:Lorg/slf4j/Logger;
      63: ldc           #127                // String Restoring durable subscription: {}
      65: aload         8
      67: invokeinterface #128,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      72: new           #47                 // class org/apache/activemq/util/SubscriptionKey
      75: dup
      76: aload         8
      78: invokespecial #129                // Method org/apache/activemq/util/SubscriptionKey."<init>":(Lorg/apache/activemq/command/SubscriptionInfo;)V
      81: astore        9
      83: aload_0
      84: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      87: aload         9
      89: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      92: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      95: astore        10
      97: aload_0
      98: aload         8
     100: invokevirtual #130                // Method createInactiveConsumerInfo:(Lorg/apache/activemq/command/SubscriptionInfo;)Lorg/apache/activemq/command/ConsumerInfo;
     103: astore        11
     105: aload         10
     107: ifnonnull     175
     110: new           #52                 // class org/apache/activemq/broker/ConnectionContext
     113: dup
     114: invokespecial #53                 // Method org/apache/activemq/broker/ConnectionContext."<init>":()V
     117: astore        12
     119: aload         12
     121: aload_1
     122: invokevirtual #131                // Method org/apache/activemq/broker/ConnectionContext.getBroker:()Lorg/apache/activemq/broker/Broker;
     125: invokevirtual #54                 // Method org/apache/activemq/broker/ConnectionContext.setBroker:(Lorg/apache/activemq/broker/Broker;)V
     128: aload         12
     130: aload         9
     132: invokevirtual #48                 // Method org/apache/activemq/util/SubscriptionKey.getClientId:()Ljava/lang/String;
     135: invokevirtual #55                 // Method org/apache/activemq/broker/ConnectionContext.setClientId:(Ljava/lang/String;)V
     138: aload         12
     140: aload         11
     142: invokevirtual #91                 // Method org/apache/activemq/command/ConsumerInfo.getConsumerId:()Lorg/apache/activemq/command/ConsumerId;
     145: invokevirtual #132                // Method org/apache/activemq/command/ConsumerId.getParentId:()Lorg/apache/activemq/command/SessionId;
     148: invokevirtual #133                // Method org/apache/activemq/command/SessionId.getParentId:()Lorg/apache/activemq/command/ConnectionId;
     151: invokevirtual #134                // Method org/apache/activemq/broker/ConnectionContext.setConnectionId:(Lorg/apache/activemq/command/ConnectionId;)V
     154: aload_0
     155: aload         12
     157: aload         11
     159: invokevirtual #135                // Method createSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;)Lorg/apache/activemq/broker/region/Subscription;
     162: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
     165: astore        10
     167: aload         10
     169: invokestatic  #30                 // Method java/lang/System.currentTimeMillis:()J
     172: invokevirtual #136                // Method org/apache/activemq/broker/region/DurableTopicSubscription.setOfflineTimestamp:(J)V
     175: aload         4
     177: aload         10
     179: invokeinterface #137,  2          // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     184: ifeq          190
     187: goto          218
     190: aload         4
     192: aload         10
     194: invokeinterface #138,  2          // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     199: pop
     200: aload_3
     201: aload         10
     203: invokeinterface #139,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     208: pop
     209: aload_2
     210: aload_1
     211: aload         10
     213: invokeinterface #140,  3          // InterfaceMethod org/apache/activemq/broker/region/Destination.addSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/broker/region/Subscription;)V
     218: iinc          7, 1
     221: goto          45
     224: aload_0
     225: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     228: invokevirtual #141                // Method java/util/concurrent/ConcurrentHashMap.values:()Ljava/util/Collection;
     231: pop
     232: aload_0
     233: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     236: invokevirtual #141                // Method java/util/concurrent/ConcurrentHashMap.values:()Ljava/util/Collection;
     239: invokeinterface #84,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     244: astore        7
     246: aload         7
     248: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     253: ifeq          318
     256: aload         7
     258: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     263: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
     266: astore        8
     268: aload         4
     270: aload         8
     272: invokeinterface #137,  2          // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     277: ifeq          283
     280: goto          246
     283: aload         8
     285: aload_2
     286: invokeinterface #142,  1          // InterfaceMethod org/apache/activemq/broker/region/Destination.getActiveMQDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
     291: invokevirtual #143                // Method org/apache/activemq/broker/region/DurableTopicSubscription.matches:(Lorg/apache/activemq/command/ActiveMQDestination;)Z
     294: ifeq          315
     297: aload_3
     298: aload         8
     300: invokeinterface #139,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     305: pop
     306: aload_2
     307: aload_1
     308: aload         8
     310: invokeinterface #140,  3          // InterfaceMethod org/apache/activemq/broker/region/Destination.addSubscription:(Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/broker/region/Subscription;)V
     315: goto          246
     318: aload_3
     319: areturn

  public org.apache.activemq.command.ConsumerInfo createInactiveConsumerInfo(org.apache.activemq.command.SubscriptionInfo);
    Code:
       0: new           #144                // class org/apache/activemq/command/ConsumerInfo
       3: dup
       4: invokespecial #145                // Method org/apache/activemq/command/ConsumerInfo."<init>":()V
       7: astore_2
       8: aload_2
       9: aload_1
      10: invokevirtual #146                // Method org/apache/activemq/command/SubscriptionInfo.getSelector:()Ljava/lang/String;
      13: invokevirtual #147                // Method org/apache/activemq/command/ConsumerInfo.setSelector:(Ljava/lang/String;)V
      16: aload_2
      17: aload_1
      18: invokevirtual #148                // Method org/apache/activemq/command/SubscriptionInfo.getSubscriptionName:()Ljava/lang/String;
      21: invokevirtual #149                // Method org/apache/activemq/command/ConsumerInfo.setSubscriptionName:(Ljava/lang/String;)V
      24: aload_2
      25: aload_1
      26: invokevirtual #150                // Method org/apache/activemq/command/SubscriptionInfo.getSubscribedDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      29: invokevirtual #151                // Method org/apache/activemq/command/ConsumerInfo.setDestination:(Lorg/apache/activemq/command/ActiveMQDestination;)V
      32: aload_2
      33: aload_0
      34: invokespecial #152                // Method createConsumerId:()Lorg/apache/activemq/command/ConsumerId;
      37: invokevirtual #153                // Method org/apache/activemq/command/ConsumerInfo.setConsumerId:(Lorg/apache/activemq/command/ConsumerId;)V
      40: aload_2
      41: areturn

  private org.apache.activemq.command.ConsumerId createConsumerId();
    Code:
       0: new           #154                // class org/apache/activemq/command/ConsumerId
       3: dup
       4: aload_0
       5: getfield      #14                 // Field recoveredDurableSubSessionId:Lorg/apache/activemq/command/SessionId;
       8: aload_0
       9: getfield      #7                  // Field recoveredDurableSubIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
      12: invokevirtual #12                 // Method org/apache/activemq/util/LongSequenceGenerator.getNextSequenceId:()J
      15: invokespecial #155                // Method org/apache/activemq/command/ConsumerId."<init>":(Lorg/apache/activemq/command/SessionId;J)V
      18: areturn

  protected void configureTopic(org.apache.activemq.broker.region.Topic, org.apache.activemq.command.ActiveMQDestination);
    Code:
       0: aload_0
       1: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
       4: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
       7: ifnull        35
      10: aload_0
      11: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
      14: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
      17: aload_2
      18: invokevirtual #157                // Method org/apache/activemq/broker/region/policy/PolicyMap.getEntryFor:(Lorg/apache/activemq/command/ActiveMQDestination;)Lorg/apache/activemq/broker/region/policy/PolicyEntry;
      21: astore_3
      22: aload_3
      23: ifnull        35
      26: aload_3
      27: aload_0
      28: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
      31: aload_1
      32: invokevirtual #158                // Method org/apache/activemq/broker/region/policy/PolicyEntry.configure:(Lorg/apache/activemq/broker/Broker;Lorg/apache/activemq/broker/region/Topic;)V
      35: return

  protected org.apache.activemq.broker.region.Subscription createSubscription(org.apache.activemq.broker.ConnectionContext, org.apache.activemq.command.ConsumerInfo) throws javax.jms.JMSException;
    Code:
       0: aload_2
       1: invokevirtual #61                 // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
       4: astore_3
       5: aload_2
       6: invokevirtual #60                 // Method org/apache/activemq/command/ConsumerInfo.isDurable:()Z
       9: ifeq          166
      12: aload_2
      13: invokevirtual #61                 // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      16: invokestatic  #159                // Method org/apache/activemq/advisory/AdvisorySupport.isAdvisoryTopic:(Lorg/apache/activemq/command/ActiveMQDestination;)Z
      19: ifeq          32
      22: new           #68                 // class javax/jms/JMSException
      25: dup
      26: ldc           #160                // String Cannot create a durable subscription for an advisory Topic
      28: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
      31: athrow
      32: new           #47                 // class org/apache/activemq/util/SubscriptionKey
      35: dup
      36: aload_1
      37: invokevirtual #64                 // Method org/apache/activemq/broker/ConnectionContext.getClientId:()Ljava/lang/String;
      40: aload_2
      41: invokevirtual #65                 // Method org/apache/activemq/command/ConsumerInfo.getSubscriptionName:()Ljava/lang/String;
      44: invokespecial #66                 // Method org/apache/activemq/util/SubscriptionKey."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      47: astore        4
      49: aload_0
      50: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
      53: aload         4
      55: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      58: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      61: astore        5
      63: aload         5
      65: ifnonnull     153
      68: new           #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      71: dup
      72: aload_0
      73: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
      76: aload_0
      77: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
      80: aload_1
      81: aload_2
      82: aload_0
      83: getfield      #101                // Field keepDurableSubsActive:Z
      86: invokespecial #161                // Method org/apache/activemq/broker/region/DurableTopicSubscription."<init>":(Lorg/apache/activemq/broker/Broker;Lorg/apache/activemq/usage/SystemUsage;Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;Z)V
      89: astore        5
      91: aload_3
      92: ifnull        138
      95: aload_0
      96: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
      99: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
     102: ifnull        138
     105: aload_0
     106: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     109: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
     112: aload_3
     113: invokevirtual #157                // Method org/apache/activemq/broker/region/policy/PolicyMap.getEntryFor:(Lorg/apache/activemq/command/ActiveMQDestination;)Lorg/apache/activemq/broker/region/policy/PolicyEntry;
     116: astore        6
     118: aload         6
     120: ifnull        138
     123: aload         6
     125: aload_0
     126: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     129: aload_0
     130: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
     133: aload         5
     135: invokevirtual #162                // Method org/apache/activemq/broker/region/policy/PolicyEntry.configure:(Lorg/apache/activemq/broker/Broker;Lorg/apache/activemq/usage/SystemUsage;Lorg/apache/activemq/broker/region/DurableTopicSubscription;)V
     138: aload_0
     139: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
     142: aload         4
     144: aload         5
     146: invokevirtual #163                // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     149: pop
     150: goto          163
     153: new           #68                 // class javax/jms/JMSException
     156: dup
     157: ldc           #164                // String That durable subscription is already active.
     159: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     162: athrow
     163: aload         5
     165: areturn
     166: new           #165                // class org/apache/activemq/broker/region/TopicSubscription
     169: dup
     170: aload_0
     171: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     174: aload_1
     175: aload_2
     176: aload_0
     177: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
     180: invokespecial #166                // Method org/apache/activemq/broker/region/TopicSubscription."<init>":(Lorg/apache/activemq/broker/Broker;Lorg/apache/activemq/broker/ConnectionContext;Lorg/apache/activemq/command/ConsumerInfo;Lorg/apache/activemq/usage/SystemUsage;)V
     183: astore        4
     185: aload_3
     186: ifnull        232
     189: aload_0
     190: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     193: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
     196: ifnull        232
     199: aload_0
     200: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     203: invokevirtual #156                // Method org/apache/activemq/broker/region/RegionBroker.getDestinationPolicy:()Lorg/apache/activemq/broker/region/policy/PolicyMap;
     206: aload_3
     207: invokevirtual #157                // Method org/apache/activemq/broker/region/policy/PolicyMap.getEntryFor:(Lorg/apache/activemq/command/ActiveMQDestination;)Lorg/apache/activemq/broker/region/policy/PolicyEntry;
     210: astore        5
     212: aload         5
     214: ifnull        232
     217: aload         5
     219: aload_0
     220: getfield      #40                 // Field broker:Lorg/apache/activemq/broker/region/RegionBroker;
     223: aload_0
     224: getfield      #99                 // Field usageManager:Lorg/apache/activemq/usage/SystemUsage;
     227: aload         4
     229: invokevirtual #167                // Method org/apache/activemq/broker/region/policy/PolicyEntry.configure:(Lorg/apache/activemq/broker/Broker;Lorg/apache/activemq/usage/SystemUsage;Lorg/apache/activemq/broker/region/TopicSubscription;)V
     232: aload         4
     234: invokevirtual #168                // Method org/apache/activemq/broker/region/TopicSubscription.init:()V
     237: aload         4
     239: areturn
     240: astore        4
     242: getstatic     #41                 // Field LOG:Lorg/slf4j/Logger;
     245: ldc           #169                // String Failed to create TopicSubscription
     247: aload         4
     249: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     254: new           #68                 // class javax/jms/JMSException
     257: dup
     258: ldc           #170                // String Couldn\'t create TopicSubscription
     260: invokespecial #75                 // Method javax/jms/JMSException."<init>":(Ljava/lang/String;)V
     263: astore        5
     265: aload         5
     267: aload         4
     269: invokevirtual #171                // Method javax/jms/JMSException.setLinkedException:(Ljava/lang/Exception;)V
     272: aload         5
     274: athrow
    Exception table:
       from    to  target type
         166   239   240   Class java/lang/Exception

  private boolean hasDurableSubChanged(org.apache.activemq.command.ConsumerInfo, org.apache.activemq.command.ConsumerInfo);
    Code:
       0: aload_1
       1: invokevirtual #172                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: aload_2
      13: invokevirtual #172                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
      16: ifnull        23
      19: iconst_1
      20: goto          24
      23: iconst_0
      24: ixor
      25: ifeq          30
      28: iconst_1
      29: ireturn
      30: aload_1
      31: invokevirtual #172                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
      34: ifnull        53
      37: aload_1
      38: invokevirtual #172                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
      41: aload_2
      42: invokevirtual #172                // Method org/apache/activemq/command/ConsumerInfo.getSelector:()Ljava/lang/String;
      45: invokevirtual #173                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      48: ifne          53
      51: iconst_1
      52: ireturn
      53: aload_1
      54: invokevirtual #61                 // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      57: aload_2
      58: invokevirtual #61                 // Method org/apache/activemq/command/ConsumerInfo.getDestination:()Lorg/apache/activemq/command/ActiveMQDestination;
      61: invokevirtual #174                // Method org/apache/activemq/command/ActiveMQDestination.equals:(Ljava/lang/Object;)Z
      64: ifne          71
      67: iconst_1
      68: goto          72
      71: iconst_0
      72: ireturn

  protected java.util.Set<org.apache.activemq.command.ActiveMQDestination> getInactiveDestinations();
    Code:
       0: aload_0
       1: invokespecial #175                // Method org/apache/activemq/broker/region/AbstractRegion.getInactiveDestinations:()Ljava/util/Set;
       4: astore_1
       5: aload_1
       6: invokeinterface #176,  1          // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      11: astore_2
      12: aload_2
      13: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      18: ifeq          47
      21: aload_2
      22: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      27: checkcast     #177                // class org/apache/activemq/command/ActiveMQDestination
      30: astore_3
      31: aload_3
      32: invokevirtual #178                // Method org/apache/activemq/command/ActiveMQDestination.isTopic:()Z
      35: ifne          44
      38: aload_2
      39: invokeinterface #179,  1          // InterfaceMethod java/util/Iterator.remove:()V
      44: goto          12
      47: aload_1
      48: areturn

  public boolean isKeepDurableSubsActive();
    Code:
       0: aload_0
       1: getfield      #101                // Field keepDurableSubsActive:Z
       4: ireturn

  public void setKeepDurableSubsActive(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #101                // Field keepDurableSubsActive:Z
       5: return

  public boolean durableSubscriptionExists(org.apache.activemq.util.SubscriptionKey);
    Code:
       0: aload_0
       1: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
       4: aload_1
       5: invokevirtual #180                // Method java/util/concurrent/ConcurrentHashMap.containsKey:(Ljava/lang/Object;)Z
       8: ireturn

  public org.apache.activemq.broker.region.DurableTopicSubscription getDurableSubscription(org.apache.activemq.util.SubscriptionKey);
    Code:
       0: aload_0
       1: getfield      #4                  // Field durableSubscriptions:Ljava/util/concurrent/ConcurrentHashMap;
       4: aload_1
       5: invokevirtual #67                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
       8: checkcast     #37                 // class org/apache/activemq/broker/region/DurableTopicSubscription
      11: areturn

  static {};
    Code:
       0: ldc_w         #181                // class org/apache/activemq/broker/region/TopicRegion
       3: invokestatic  #182                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #41                 // Field LOG:Lorg/slf4j/Logger;
       9: return
}

Compiled from "TransactionContext.java"
public class org.apache.activemq.TransactionContext implements javax.transaction.xa.XAResource {
  public static final java.lang.String xaErrorCodeMarker;

  private static final org.slf4j.Logger LOG;

  private static final java.util.HashMap<org.apache.activemq.command.TransactionId, java.util.List<org.apache.activemq.TransactionContext>> ENDED_XA_TRANSACTION_CONTEXTS;

  private org.apache.activemq.ActiveMQConnection connection;

  private final org.apache.activemq.util.LongSequenceGenerator localTransactionIdGenerator;

  private java.util.List<org.apache.activemq.transaction.Synchronization> synchronizations;

  private javax.transaction.xa.Xid associatedXid;

  private org.apache.activemq.command.TransactionId transactionId;

  private org.apache.activemq.LocalTransactionEventListener localTransactionEventListener;

  private int beforeEndIndex;

  public org.apache.activemq.TransactionContext();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aconst_null
       6: putfield      #2                  // Field localTransactionIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
       9: return

  public org.apache.activemq.TransactionContext(org.apache.activemq.ActiveMQConnection);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       9: aload_0
      10: aload_1
      11: invokevirtual #4                  // Method org/apache/activemq/ActiveMQConnection.getLocalTransactionIdGenerator:()Lorg/apache/activemq/util/LongSequenceGenerator;
      14: putfield      #2                  // Field localTransactionIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
      17: return

  public boolean isInXATransaction();
    Code:
       0: aload_0
       1: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
       4: ifnull        19
       7: aload_0
       8: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      11: invokevirtual #6                  // Method org/apache/activemq/command/TransactionId.isXATransaction:()Z
      14: ifeq          19
      17: iconst_1
      18: ireturn
      19: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
      22: invokevirtual #8                  // Method java/util/HashMap.isEmpty:()Z
      25: ifne          94
      28: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
      31: dup
      32: astore_1
      33: monitorenter
      34: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
      37: invokevirtual #9                  // Method java/util/HashMap.values:()Ljava/util/Collection;
      40: invokeinterface #10,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      45: astore_2
      46: aload_2
      47: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      52: ifeq          82
      55: aload_2
      56: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      61: checkcast     #13                 // class java/util/List
      64: astore_3
      65: aload_3
      66: aload_0
      67: invokeinterface #14,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      72: ifeq          79
      75: iconst_1
      76: aload_1
      77: monitorexit
      78: ireturn
      79: goto          46
      82: aload_1
      83: monitorexit
      84: goto          94
      87: astore        4
      89: aload_1
      90: monitorexit
      91: aload         4
      93: athrow
      94: iconst_0
      95: ireturn
    Exception table:
       from    to  target type
          34    78    87   any
          79    84    87   any
          87    91    87   any

  public boolean isInLocalTransaction();
    Code:
       0: aload_0
       1: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
       4: ifnull        21
       7: aload_0
       8: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      11: invokevirtual #15                 // Method org/apache/activemq/command/TransactionId.isLocalTransaction:()Z
      14: ifeq          21
      17: iconst_1
      18: goto          22
      21: iconst_0
      22: ireturn

  public boolean isInTransaction();
    Code:
       0: aload_0
       1: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  public org.apache.activemq.LocalTransactionEventListener getLocalTransactionEventListener();
    Code:
       0: aload_0
       1: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
       4: areturn

  public void setLocalTransactionEventListener(org.apache.activemq.LocalTransactionEventListener);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
       5: return

  public void addSynchronization(org.apache.activemq.transaction.Synchronization);
    Code:
       0: aload_0
       1: getfield      #17                 // Field synchronizations:Ljava/util/List;
       4: ifnonnull     20
       7: aload_0
       8: new           #18                 // class java/util/ArrayList
      11: dup
      12: bipush        10
      14: invokespecial #19                 // Method java/util/ArrayList."<init>":(I)V
      17: putfield      #17                 // Field synchronizations:Ljava/util/List;
      20: aload_0
      21: getfield      #17                 // Field synchronizations:Ljava/util/List;
      24: aload_1
      25: invokeinterface #20,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      30: pop
      31: return

  private void afterRollback() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #17                 // Field synchronizations:Ljava/util/List;
       4: ifnonnull     8
       7: return
       8: aconst_null
       9: astore_1
      10: aload_0
      11: getfield      #17                 // Field synchronizations:Ljava/util/List;
      14: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      19: istore_2
      20: iconst_0
      21: istore_3
      22: iload_3
      23: iload_2
      24: if_icmpge     99
      27: aload_0
      28: getfield      #17                 // Field synchronizations:Ljava/util/List;
      31: iload_3
      32: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      37: checkcast     #23                 // class org/apache/activemq/transaction/Synchronization
      40: invokevirtual #24                 // Method org/apache/activemq/transaction/Synchronization.afterRollback:()V
      43: goto          93
      46: astore        4
      48: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      51: new           #27                 // class java/lang/StringBuilder
      54: dup
      55: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      58: ldc           #29                 // String Exception from afterRollback on
      60: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: aload_0
      64: getfield      #17                 // Field synchronizations:Ljava/util/List;
      67: iload_3
      68: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      73: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      76: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      79: aload         4
      81: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      86: aload_1
      87: ifnonnull     93
      90: aload         4
      92: astore_1
      93: iinc          3, 1
      96: goto          22
      99: aload_0
     100: aconst_null
     101: putfield      #17                 // Field synchronizations:Ljava/util/List;
     104: aload_1
     105: ifnull        113
     108: aload_1
     109: invokestatic  #34                 // Method org/apache/activemq/util/JMSExceptionSupport.create:(Ljava/lang/Throwable;)Ljavax/jms/JMSException;
     112: athrow
     113: return
    Exception table:
       from    to  target type
          27    43    46   Class java/lang/Throwable

  private void afterCommit() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #17                 // Field synchronizations:Ljava/util/List;
       4: ifnonnull     8
       7: return
       8: aconst_null
       9: astore_1
      10: aload_0
      11: getfield      #17                 // Field synchronizations:Ljava/util/List;
      14: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      19: istore_2
      20: iconst_0
      21: istore_3
      22: iload_3
      23: iload_2
      24: if_icmpge     99
      27: aload_0
      28: getfield      #17                 // Field synchronizations:Ljava/util/List;
      31: iload_3
      32: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      37: checkcast     #23                 // class org/apache/activemq/transaction/Synchronization
      40: invokevirtual #35                 // Method org/apache/activemq/transaction/Synchronization.afterCommit:()V
      43: goto          93
      46: astore        4
      48: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      51: new           #27                 // class java/lang/StringBuilder
      54: dup
      55: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      58: ldc           #36                 // String Exception from afterCommit on
      60: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: aload_0
      64: getfield      #17                 // Field synchronizations:Ljava/util/List;
      67: iload_3
      68: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      73: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      76: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      79: aload         4
      81: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
      86: aload_1
      87: ifnonnull     93
      90: aload         4
      92: astore_1
      93: iinc          3, 1
      96: goto          22
      99: aload_0
     100: aconst_null
     101: putfield      #17                 // Field synchronizations:Ljava/util/List;
     104: aload_1
     105: ifnull        113
     108: aload_1
     109: invokestatic  #34                 // Method org/apache/activemq/util/JMSExceptionSupport.create:(Ljava/lang/Throwable;)Ljavax/jms/JMSException;
     112: athrow
     113: return
    Exception table:
       from    to  target type
          27    43    46   Class java/lang/Throwable

  private void beforeEnd() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #17                 // Field synchronizations:Ljava/util/List;
       4: ifnonnull     8
       7: return
       8: aload_0
       9: getfield      #17                 // Field synchronizations:Ljava/util/List;
      12: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      17: istore_1
      18: aload_0
      19: getfield      #37                 // Field beforeEndIndex:I
      22: iload_1
      23: if_icmpge     55
      26: aload_0
      27: getfield      #17                 // Field synchronizations:Ljava/util/List;
      30: aload_0
      31: dup
      32: getfield      #37                 // Field beforeEndIndex:I
      35: dup_x1
      36: iconst_1
      37: iadd
      38: putfield      #37                 // Field beforeEndIndex:I
      41: invokeinterface #22,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      46: checkcast     #23                 // class org/apache/activemq/transaction/Synchronization
      49: invokevirtual #38                 // Method org/apache/activemq/transaction/Synchronization.beforeEnd:()V
      52: goto          18
      55: goto          67
      58: astore_2
      59: aload_2
      60: athrow
      61: astore_2
      62: aload_2
      63: invokestatic  #34                 // Method org/apache/activemq/util/JMSExceptionSupport.create:(Ljava/lang/Throwable;)Ljavax/jms/JMSException;
      66: athrow
      67: return
    Exception table:
       from    to  target type
          18    55    58   Class javax/jms/JMSException
          18    55    61   Class java/lang/Throwable

  public org.apache.activemq.command.TransactionId getTransactionId();
    Code:
       0: aload_0
       1: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
       4: areturn

  public void begin() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #40                 // Method isInXATransaction:()Z
       4: ifeq          17
       7: new           #41                 // class javax/jms/TransactionInProgressException
      10: dup
      11: ldc           #42                 // String Cannot start local transaction.  XA transaction is already in progress.
      13: invokespecial #43                 // Method javax/jms/TransactionInProgressException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      21: ifnonnull     145
      24: aload_0
      25: aconst_null
      26: putfield      #17                 // Field synchronizations:Ljava/util/List;
      29: aload_0
      30: iconst_0
      31: putfield      #37                 // Field beforeEndIndex:I
      34: aload_0
      35: new           #44                 // class org/apache/activemq/command/LocalTransactionId
      38: dup
      39: aload_0
      40: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      43: aload_0
      44: getfield      #2                  // Field localTransactionIdGenerator:Lorg/apache/activemq/util/LongSequenceGenerator;
      47: invokevirtual #46                 // Method org/apache/activemq/util/LongSequenceGenerator.getNextSequenceId:()J
      50: invokespecial #47                 // Method org/apache/activemq/command/LocalTransactionId."<init>":(Lorg/apache/activemq/command/ConnectionId;J)V
      53: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      56: new           #48                 // class org/apache/activemq/command/TransactionInfo
      59: dup
      60: aload_0
      61: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      64: aload_0
      65: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      68: iconst_0
      69: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
      72: astore_1
      73: aload_0
      74: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      77: invokevirtual #50                 // Method org/apache/activemq/ActiveMQConnection.ensureConnectionInfoSent:()V
      80: aload_0
      81: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      84: aload_1
      85: invokevirtual #51                 // Method org/apache/activemq/ActiveMQConnection.asyncSendPacket:(Lorg/apache/activemq/command/Command;)V
      88: aload_0
      89: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
      92: ifnull        104
      95: aload_0
      96: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
      99: invokeinterface #52,  1           // InterfaceMethod org/apache/activemq/LocalTransactionEventListener.beginEvent:()V
     104: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     107: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     112: ifeq          145
     115: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     118: new           #27                 // class java/lang/StringBuilder
     121: dup
     122: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     125: ldc           #54                 // String Begin:
     127: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     130: aload_0
     131: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     134: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     137: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     140: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     145: return

  public void rollback() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #40                 // Method isInXATransaction:()Z
       4: ifeq          17
       7: new           #41                 // class javax/jms/TransactionInProgressException
      10: dup
      11: ldc           #56                 // String Cannot rollback() if an XA transaction is already in progress
      13: invokespecial #43                 // Method javax/jms/TransactionInProgressException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: invokespecial #57                 // Method beforeEnd:()V
      21: goto          36
      24: astore_1
      25: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      28: ldc           #59                 // String rollback processing error
      30: aload_1
      31: invokeinterface #60,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
      36: aload_0
      37: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      40: ifnull        159
      43: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      46: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      51: ifeq          112
      54: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      57: new           #27                 // class java/lang/StringBuilder
      60: dup
      61: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      64: ldc           #61                 // String Rollback:
      66: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      69: aload_0
      70: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      73: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      76: ldc           #62                 // String  syncCount:
      78: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: aload_0
      82: getfield      #17                 // Field synchronizations:Ljava/util/List;
      85: ifnull        100
      88: aload_0
      89: getfield      #17                 // Field synchronizations:Ljava/util/List;
      92: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      97: goto          101
     100: iconst_0
     101: invokevirtual #63                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     104: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     107: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     112: new           #48                 // class org/apache/activemq/command/TransactionInfo
     115: dup
     116: aload_0
     117: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     120: aload_0
     121: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     124: iconst_4
     125: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
     128: astore_1
     129: aload_0
     130: aconst_null
     131: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     134: aload_0
     135: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
     138: aload_1
     139: invokevirtual #64                 // Method org/apache/activemq/ActiveMQConnection.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     142: pop
     143: aload_0
     144: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     147: ifnull        159
     150: aload_0
     151: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     154: invokeinterface #65,  1           // InterfaceMethod org/apache/activemq/LocalTransactionEventListener.rollbackEvent:()V
     159: aload_0
     160: invokespecial #66                 // Method afterRollback:()V
     163: return
    Exception table:
       from    to  target type
          17    21    24   Class javax/jms/TransactionRolledBackException

  public void commit() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: invokevirtual #40                 // Method isInXATransaction:()Z
       4: ifeq          17
       7: new           #41                 // class javax/jms/TransactionInProgressException
      10: dup
      11: ldc           #67                 // String Cannot commit() if an XA transaction is already in progress
      13: invokespecial #43                 // Method javax/jms/TransactionInProgressException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: invokespecial #57                 // Method beforeEnd:()V
      21: goto          31
      24: astore_1
      25: aload_0
      26: invokevirtual #68                 // Method rollback:()V
      29: aload_1
      30: athrow
      31: aload_0
      32: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      35: ifnull        212
      38: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      41: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      46: ifeq          107
      49: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      52: new           #27                 // class java/lang/StringBuilder
      55: dup
      56: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      59: ldc           #69                 // String Commit:
      61: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      64: aload_0
      65: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      68: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      71: ldc           #62                 // String  syncCount:
      73: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      76: aload_0
      77: getfield      #17                 // Field synchronizations:Ljava/util/List;
      80: ifnull        95
      83: aload_0
      84: getfield      #17                 // Field synchronizations:Ljava/util/List;
      87: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      92: goto          96
      95: iconst_0
      96: invokevirtual #63                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      99: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     102: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     107: new           #48                 // class org/apache/activemq/command/TransactionInfo
     110: dup
     111: aload_0
     112: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     115: aload_0
     116: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     119: iconst_2
     120: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
     123: astore_1
     124: aload_0
     125: aconst_null
     126: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     129: aload_0
     130: aload_1
     131: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     134: pop
     135: aload_0
     136: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     139: ifnull        151
     142: aload_0
     143: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     146: invokeinterface #71,  1           // InterfaceMethod org/apache/activemq/LocalTransactionEventListener.commitEvent:()V
     151: aload_0
     152: invokespecial #72                 // Method afterCommit:()V
     155: goto          212
     158: astore_2
     159: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     162: new           #27                 // class java/lang/StringBuilder
     165: dup
     166: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     169: ldc           #73                 // String commit failed for transaction
     171: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     174: aload_1
     175: invokevirtual #74                 // Method org/apache/activemq/command/TransactionInfo.getTransactionId:()Lorg/apache/activemq/command/TransactionId;
     178: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     181: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     184: aload_2
     185: invokeinterface #75,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Throwable;)V
     190: aload_0
     191: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     194: ifnull        206
     197: aload_0
     198: getfield      #16                 // Field localTransactionEventListener:Lorg/apache/activemq/LocalTransactionEventListener;
     201: invokeinterface #65,  1           // InterfaceMethod org/apache/activemq/LocalTransactionEventListener.rollbackEvent:()V
     206: aload_0
     207: invokespecial #66                 // Method afterRollback:()V
     210: aload_2
     211: athrow
     212: return
    Exception table:
       from    to  target type
          17    21    24   Class javax/jms/JMSException
         129   155   158   Class javax/jms/JMSException

  public void start(javax.transaction.xa.Xid, int) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          47
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #76                 // String Start:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: ldc           #77                 // String , flags:
      32: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: iload_2
      36: invokevirtual #63                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      39: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      47: aload_0
      48: invokevirtual #78                 // Method isInLocalTransaction:()Z
      51: ifeq          64
      54: new           #79                 // class javax/transaction/xa/XAException
      57: dup
      58: bipush        -6
      60: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      63: athrow
      64: aload_0
      65: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      68: ifnull        81
      71: new           #79                 // class javax/transaction/xa/XAException
      74: dup
      75: bipush        -6
      77: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      80: athrow
      81: aload_0
      82: aconst_null
      83: putfield      #17                 // Field synchronizations:Ljava/util/List;
      86: aload_0
      87: iconst_0
      88: putfield      #37                 // Field beforeEndIndex:I
      91: aload_0
      92: aload_1
      93: invokespecial #82                 // Method setXid:(Ljavax/transaction/xa/Xid;)V
      96: return

  private org.apache.activemq.command.ConnectionId getConnectionId();
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: invokevirtual #83                 // Method org/apache/activemq/ActiveMQConnection.getConnectionInfo:()Lorg/apache/activemq/command/ConnectionInfo;
       7: invokevirtual #84                 // Method org/apache/activemq/command/ConnectionInfo.getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      10: areturn

  public void end(javax.transaction.xa.Xid, int) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          47
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #85                 // String End:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: ldc           #77                 // String , flags:
      32: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: iload_2
      36: invokevirtual #63                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      39: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      47: aload_0
      48: invokevirtual #78                 // Method isInLocalTransaction:()Z
      51: ifeq          64
      54: new           #79                 // class javax/transaction/xa/XAException
      57: dup
      58: bipush        -6
      60: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      63: athrow
      64: iload_2
      65: ldc           #86                 // int 570425344
      67: iand
      68: ifeq          125
      71: aload_0
      72: aload_0
      73: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      76: aload_1
      77: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
      80: ifne          93
      83: new           #79                 // class javax/transaction/xa/XAException
      86: dup
      87: bipush        -6
      89: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      92: athrow
      93: aload_0
      94: invokespecial #57                 // Method beforeEnd:()V
      97: aload_0
      98: aconst_null
      99: invokespecial #82                 // Method setXid:(Ljavax/transaction/xa/Xid;)V
     102: goto          122
     105: astore_3
     106: aload_0
     107: aload_3
     108: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     111: athrow
     112: astore        4
     114: aload_0
     115: aconst_null
     116: invokespecial #82                 // Method setXid:(Ljavax/transaction/xa/Xid;)V
     119: aload         4
     121: athrow
     122: goto          188
     125: iload_2
     126: ldc           #89                 // int 67108864
     128: iand
     129: ldc           #89                 // int 67108864
     131: if_icmpne     178
     134: aload_0
     135: aload_0
     136: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
     139: aload_1
     140: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
     143: ifeq          188
     146: aload_0
     147: invokespecial #57                 // Method beforeEnd:()V
     150: aload_0
     151: aconst_null
     152: invokespecial #82                 // Method setXid:(Ljavax/transaction/xa/Xid;)V
     155: goto          175
     158: astore_3
     159: aload_0
     160: aload_3
     161: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     164: athrow
     165: astore        5
     167: aload_0
     168: aconst_null
     169: invokespecial #82                 // Method setXid:(Ljavax/transaction/xa/Xid;)V
     172: aload         5
     174: athrow
     175: goto          188
     178: new           #79                 // class javax/transaction/xa/XAException
     181: dup
     182: bipush        -5
     184: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
     187: athrow
     188: return
    Exception table:
       from    to  target type
          93    97   105   Class javax/jms/JMSException
          93    97   112   any
         105   114   112   any
         146   150   158   Class javax/jms/JMSException
         146   150   165   any
         158   167   165   any

  private boolean equals(javax.transaction.xa.Xid, javax.transaction.xa.Xid);
    Code:
       0: aload_1
       1: aload_2
       2: if_acmpne     7
       5: iconst_1
       6: ireturn
       7: aload_1
       8: ifnonnull     15
      11: iconst_1
      12: goto          16
      15: iconst_0
      16: aload_2
      17: ifnonnull     24
      20: iconst_1
      21: goto          25
      24: iconst_0
      25: ixor
      26: ifeq          31
      29: iconst_0
      30: ireturn
      31: aload_1
      32: invokeinterface #90,  1           // InterfaceMethod javax/transaction/xa/Xid.getFormatId:()I
      37: aload_2
      38: invokeinterface #90,  1           // InterfaceMethod javax/transaction/xa/Xid.getFormatId:()I
      43: if_icmpne     86
      46: aload_1
      47: invokeinterface #91,  1           // InterfaceMethod javax/transaction/xa/Xid.getBranchQualifier:()[B
      52: aload_2
      53: invokeinterface #91,  1           // InterfaceMethod javax/transaction/xa/Xid.getBranchQualifier:()[B
      58: invokestatic  #92                 // Method java/util/Arrays.equals:([B[B)Z
      61: ifeq          86
      64: aload_1
      65: invokeinterface #93,  1           // InterfaceMethod javax/transaction/xa/Xid.getGlobalTransactionId:()[B
      70: aload_2
      71: invokeinterface #93,  1           // InterfaceMethod javax/transaction/xa/Xid.getGlobalTransactionId:()[B
      76: invokestatic  #92                 // Method java/util/Arrays.equals:([B[B)Z
      79: ifeq          86
      82: iconst_1
      83: goto          87
      86: iconst_0
      87: ireturn

  public int prepare(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          38
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #94                 // String Prepare:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      38: aload_1
      39: ifnull        54
      42: aload_0
      43: aload_0
      44: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      47: aload_1
      48: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
      51: ifeq          64
      54: new           #79                 // class javax/transaction/xa/XAException
      57: dup
      58: bipush        -6
      60: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      63: athrow
      64: new           #95                 // class org/apache/activemq/command/XATransactionId
      67: dup
      68: aload_1
      69: invokespecial #96                 // Method org/apache/activemq/command/XATransactionId."<init>":(Ljavax/transaction/xa/Xid;)V
      72: astore_2
      73: new           #48                 // class org/apache/activemq/command/TransactionInfo
      76: dup
      77: aload_0
      78: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      81: aload_2
      82: iconst_1
      83: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
      86: astore_3
      87: aload_0
      88: aload_3
      89: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
      92: checkcast     #97                 // class org/apache/activemq/command/IntegerResponse
      95: astore        4
      97: iconst_3
      98: aload         4
     100: invokevirtual #98                 // Method org/apache/activemq/command/IntegerResponse.getResult:()I
     103: if_icmpne     231
     106: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     109: dup
     110: astore        5
     112: monitorenter
     113: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     116: aload_2
     117: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     120: checkcast     #13                 // class java/util/List
     123: astore        6
     125: aload         6
     127: ifnull        217
     130: aload         6
     132: invokeinterface #100,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     137: ifne          217
     140: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     143: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     148: ifeq          178
     151: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     154: new           #27                 // class java/lang/StringBuilder
     157: dup
     158: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     161: ldc           #101                // String firing afterCommit callbacks on XA_RDONLY from prepare:
     163: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     166: aload_1
     167: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     170: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     173: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     178: aload         6
     180: invokeinterface #102,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     185: astore        7
     187: aload         7
     189: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     194: ifeq          217
     197: aload         7
     199: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     204: checkcast     #103                // class org/apache/activemq/TransactionContext
     207: astore        8
     209: aload         8
     211: invokespecial #72                 // Method afterCommit:()V
     214: goto          187
     217: aload         5
     219: monitorexit
     220: goto          231
     223: astore        9
     225: aload         5
     227: monitorexit
     228: aload         9
     230: athrow
     231: aload         4
     233: invokevirtual #98                 // Method org/apache/activemq/command/IntegerResponse.getResult:()I
     236: ireturn
     237: astore_3
     238: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     241: new           #27                 // class java/lang/StringBuilder
     244: dup
     245: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     248: ldc           #104                // String prepare of:
     250: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     253: aload_2
     254: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     257: ldc           #105                // String  failed with:
     259: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     262: aload_3
     263: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     266: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     269: aload_3
     270: invokeinterface #60,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     275: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     278: dup
     279: astore        4
     281: monitorenter
     282: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     285: aload_2
     286: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     289: checkcast     #13                 // class java/util/List
     292: astore        5
     294: aload         5
     296: ifnull        403
     299: aload         5
     301: invokeinterface #100,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     306: ifne          403
     309: aload         5
     311: invokeinterface #102,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     316: astore        6
     318: aload         6
     320: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     325: ifeq          403
     328: aload         6
     330: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     335: checkcast     #103                // class org/apache/activemq/TransactionContext
     338: astore        7
     340: aload         7
     342: invokespecial #66                 // Method afterRollback:()V
     345: goto          400
     348: astore        8
     350: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     353: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     358: ifeq          400
     361: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     364: new           #27                 // class java/lang/StringBuilder
     367: dup
     368: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     371: ldc           #106                // String failed to firing afterRollback callbacks on prepare failure, txid:
     373: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     376: aload_2
     377: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     380: ldc           #107                // String , context:
     382: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     385: aload         7
     387: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     390: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     393: aload         8
     395: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     400: goto          318
     403: aload         4
     405: monitorexit
     406: goto          417
     409: astore        10
     411: aload         4
     413: monitorexit
     414: aload         10
     416: athrow
     417: aload_0
     418: aload_3
     419: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     422: athrow
    Exception table:
       from    to  target type
         113   220   223   any
         223   228   223   any
          73   236   237   Class javax/jms/JMSException
         340   345   348   Class java/lang/Throwable
         282   406   409   any
         409   414   409   any

  public void rollback(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          38
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #61                 // String Rollback:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      38: aload_1
      39: ifnonnull     52
      42: new           #79                 // class javax/transaction/xa/XAException
      45: dup
      46: bipush        -6
      48: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      51: athrow
      52: aload_0
      53: aload_0
      54: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      57: aload_1
      58: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
      61: ifeq          75
      64: aload_0
      65: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      68: checkcast     #95                 // class org/apache/activemq/command/XATransactionId
      71: astore_2
      72: goto          84
      75: new           #95                 // class org/apache/activemq/command/XATransactionId
      78: dup
      79: aload_1
      80: invokespecial #96                 // Method org/apache/activemq/command/XATransactionId."<init>":(Ljavax/transaction/xa/Xid;)V
      83: astore_2
      84: aload_0
      85: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      88: invokevirtual #108                // Method org/apache/activemq/ActiveMQConnection.checkClosedOrFailed:()V
      91: aload_0
      92: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      95: invokevirtual #50                 // Method org/apache/activemq/ActiveMQConnection.ensureConnectionInfoSent:()V
      98: new           #48                 // class org/apache/activemq/command/TransactionInfo
     101: dup
     102: aload_0
     103: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     106: aload_2
     107: iconst_4
     108: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
     111: astore_3
     112: aload_0
     113: aload_3
     114: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     117: pop
     118: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     121: dup
     122: astore        4
     124: monitorenter
     125: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     128: aload_2
     129: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     132: checkcast     #13                 // class java/util/List
     135: astore        5
     137: aload         5
     139: ifnull        191
     142: aload         5
     144: invokeinterface #100,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     149: ifne          191
     152: aload         5
     154: invokeinterface #102,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     159: astore        6
     161: aload         6
     163: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     168: ifeq          191
     171: aload         6
     173: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     178: checkcast     #103                // class org/apache/activemq/TransactionContext
     181: astore        7
     183: aload         7
     185: invokespecial #66                 // Method afterRollback:()V
     188: goto          161
     191: aload         4
     193: monitorexit
     194: goto          205
     197: astore        8
     199: aload         4
     201: monitorexit
     202: aload         8
     204: athrow
     205: goto          215
     208: astore_3
     209: aload_0
     210: aload_3
     211: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     214: athrow
     215: return
    Exception table:
       from    to  target type
         125   194   197   any
         197   202   197   any
          84   205   208   Class javax/jms/JMSException

  public void commit(javax.transaction.xa.Xid, boolean) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          47
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #69                 // String Commit:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: ldc           #109                // String , onePhase=
      32: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: iload_2
      36: invokevirtual #110                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
      39: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      47: aload_1
      48: ifnull        63
      51: aload_0
      52: aload_0
      53: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      56: aload_1
      57: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
      60: ifeq          73
      63: new           #79                 // class javax/transaction/xa/XAException
      66: dup
      67: bipush        -6
      69: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      72: athrow
      73: new           #95                 // class org/apache/activemq/command/XATransactionId
      76: dup
      77: aload_1
      78: invokespecial #96                 // Method org/apache/activemq/command/XATransactionId."<init>":(Ljavax/transaction/xa/Xid;)V
      81: astore_3
      82: aload_0
      83: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      86: invokevirtual #108                // Method org/apache/activemq/ActiveMQConnection.checkClosedOrFailed:()V
      89: aload_0
      90: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      93: invokevirtual #50                 // Method org/apache/activemq/ActiveMQConnection.ensureConnectionInfoSent:()V
      96: new           #48                 // class org/apache/activemq/command/TransactionInfo
      99: dup
     100: aload_0
     101: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     104: aload_3
     105: iload_2
     106: ifeq          113
     109: iconst_2
     110: goto          114
     113: iconst_3
     114: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
     117: astore        4
     119: aload_0
     120: aload         4
     122: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     125: pop
     126: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     129: dup
     130: astore        5
     132: monitorenter
     133: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     136: aload_3
     137: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     140: checkcast     #13                 // class java/util/List
     143: astore        6
     145: aload         6
     147: ifnull        234
     150: aload         6
     152: invokeinterface #100,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     157: ifne          234
     160: aload         6
     162: invokeinterface #102,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     167: astore        7
     169: aload         7
     171: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     176: ifeq          234
     179: aload         7
     181: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     186: checkcast     #103                // class org/apache/activemq/TransactionContext
     189: astore        8
     191: aload         8
     193: invokespecial #72                 // Method afterCommit:()V
     196: goto          231
     199: astore        9
     201: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     204: new           #27                 // class java/lang/StringBuilder
     207: dup
     208: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     211: ldc           #112                // String ignoring exception from after completion on ended transaction:
     213: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     216: aload         9
     218: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     221: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     224: aload         9
     226: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     231: goto          169
     234: aload         5
     236: monitorexit
     237: goto          248
     240: astore        10
     242: aload         5
     244: monitorexit
     245: aload         10
     247: athrow
     248: goto          445
     251: astore        4
     253: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     256: new           #27                 // class java/lang/StringBuilder
     259: dup
     260: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     263: ldc           #113                // String commit of:
     265: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     268: aload_3
     269: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     272: ldc           #105                // String  failed with:
     274: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     277: aload         4
     279: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     282: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     285: aload         4
     287: invokeinterface #60,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Throwable;)V
     292: iload_2
     293: ifeq          438
     296: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     299: dup
     300: astore        5
     302: monitorenter
     303: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     306: aload_3
     307: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     310: checkcast     #13                 // class java/util/List
     313: astore        6
     315: aload         6
     317: ifnull        424
     320: aload         6
     322: invokeinterface #100,  1          // InterfaceMethod java/util/List.isEmpty:()Z
     327: ifne          424
     330: aload         6
     332: invokeinterface #102,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     337: astore        7
     339: aload         7
     341: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     346: ifeq          424
     349: aload         7
     351: invokeinterface #12,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     356: checkcast     #103                // class org/apache/activemq/TransactionContext
     359: astore        8
     361: aload         8
     363: invokespecial #66                 // Method afterRollback:()V
     366: goto          421
     369: astore        9
     371: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     374: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     379: ifeq          421
     382: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     385: new           #27                 // class java/lang/StringBuilder
     388: dup
     389: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     392: ldc           #114                // String failed to firing afterRollback callbacks commit failure, txid:
     394: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     397: aload_3
     398: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     401: ldc           #107                // String , context:
     403: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     406: aload         8
     408: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     411: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     414: aload         9
     416: invokeinterface #33,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     421: goto          339
     424: aload         5
     426: monitorexit
     427: goto          438
     430: astore        11
     432: aload         5
     434: monitorexit
     435: aload         11
     437: athrow
     438: aload_0
     439: aload         4
     441: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     444: athrow
     445: return
    Exception table:
       from    to  target type
         191   196   199   Class java/lang/Exception
         133   237   240   any
         240   245   240   any
          82   248   251   Class javax/jms/JMSException
         361   366   369   Class java/lang/Throwable
         303   427   430   any
         430   435   430   any

  public void forget(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
       8: ifeq          38
      11: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      14: new           #27                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #115                // String Forget:
      23: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_1
      27: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      30: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      38: aload_1
      39: ifnonnull     52
      42: new           #79                 // class javax/transaction/xa/XAException
      45: dup
      46: bipush        -6
      48: invokespecial #80                 // Method javax/transaction/xa/XAException."<init>":(I)V
      51: athrow
      52: aload_0
      53: aload_0
      54: getfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      57: aload_1
      58: invokespecial #87                 // Method equals:(Ljavax/transaction/xa/Xid;Ljavax/transaction/xa/Xid;)Z
      61: ifeq          75
      64: aload_0
      65: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      68: checkcast     #95                 // class org/apache/activemq/command/XATransactionId
      71: astore_2
      72: goto          84
      75: new           #95                 // class org/apache/activemq/command/XATransactionId
      78: dup
      79: aload_1
      80: invokespecial #96                 // Method org/apache/activemq/command/XATransactionId."<init>":(Ljavax/transaction/xa/Xid;)V
      83: astore_2
      84: new           #48                 // class org/apache/activemq/command/TransactionInfo
      87: dup
      88: aload_0
      89: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      92: aload_2
      93: bipush        6
      95: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
      98: astore_3
      99: aload_0
     100: aload_3
     101: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     104: pop
     105: goto          117
     108: astore        4
     110: aload_0
     111: aload         4
     113: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     116: athrow
     117: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     120: dup
     121: astore        4
     123: monitorenter
     124: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     127: aload_2
     128: invokevirtual #99                 // Method java/util/HashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     131: pop
     132: aload         4
     134: monitorexit
     135: goto          146
     138: astore        5
     140: aload         4
     142: monitorexit
     143: aload         5
     145: athrow
     146: return
    Exception table:
       from    to  target type
          99   105   108   Class javax/jms/JMSException
         124   135   138   any
         138   143   138   any

  public boolean isSameRM(javax.transaction.xa.XAResource) throws javax.transaction.xa.XAException;
    Code:
       0: aload_1
       1: ifnonnull     6
       4: iconst_0
       5: ireturn
       6: aload_1
       7: instanceof    #103                // class org/apache/activemq/TransactionContext
      10: ifne          15
      13: iconst_0
      14: ireturn
      15: aload_1
      16: checkcast     #103                // class org/apache/activemq/TransactionContext
      19: astore_2
      20: aload_0
      21: invokevirtual #116                // Method getResourceManagerId:()Ljava/lang/String;
      24: aload_2
      25: invokevirtual #116                // Method getResourceManagerId:()Ljava/lang/String;
      28: invokevirtual #117                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      31: ireturn
      32: astore_3
      33: new           #79                 // class javax/transaction/xa/XAException
      36: dup
      37: ldc           #118                // String Could not get resource manager id.
      39: invokespecial #119                // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
      42: aload_3
      43: invokevirtual #120                // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      46: checkcast     #79                 // class javax/transaction/xa/XAException
      49: athrow
    Exception table:
       from    to  target type
          20    31    32   Class java/lang/Throwable

  public javax.transaction.xa.Xid[] recover(int) throws javax.transaction.xa.XAException;
    Code:
       0: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #121                // String recover({})
       5: iload_1
       6: invokestatic  #122                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       9: invokeinterface #123,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      14: new           #48                 // class org/apache/activemq/command/TransactionInfo
      17: dup
      18: aload_0
      19: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      22: aconst_null
      23: iconst_5
      24: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
      27: astore_2
      28: aload_0
      29: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      32: invokevirtual #108                // Method org/apache/activemq/ActiveMQConnection.checkClosedOrFailed:()V
      35: aload_0
      36: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      39: invokevirtual #50                 // Method org/apache/activemq/ActiveMQConnection.ensureConnectionInfoSent:()V
      42: aload_0
      43: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      46: aload_2
      47: invokevirtual #64                 // Method org/apache/activemq/ActiveMQConnection.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
      50: checkcast     #124                // class org/apache/activemq/command/DataArrayResponse
      53: astore_3
      54: aload_3
      55: invokevirtual #125                // Method org/apache/activemq/command/DataArrayResponse.getData:()[Lorg/apache/activemq/command/DataStructure;
      58: astore        4
      60: aload         4
      62: instanceof    #126                // class "[Lorg/apache/activemq/command/XATransactionId;"
      65: ifeq          81
      68: aload         4
      70: checkcast     #126                // class "[Lorg/apache/activemq/command/XATransactionId;"
      73: checkcast     #126                // class "[Lorg/apache/activemq/command/XATransactionId;"
      76: astore        5
      78: goto          101
      81: aload         4
      83: arraylength
      84: anewarray     #95                 // class org/apache/activemq/command/XATransactionId
      87: astore        5
      89: aload         4
      91: iconst_0
      92: aload         5
      94: iconst_0
      95: aload         4
      97: arraylength
      98: invokestatic  #127                // Method java/lang/System.arraycopy:(Ljava/lang/Object;ILjava/lang/Object;II)V
     101: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     104: ldc           #128                // String recover({})={}
     106: iload_1
     107: invokestatic  #122                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     110: aload         5
     112: invokeinterface #129,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     117: aload         5
     119: areturn
     120: astore_3
     121: aload_0
     122: aload_3
     123: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     126: athrow
    Exception table:
       from    to  target type
          28   119   120   Class javax/jms/JMSException

  public int getTransactionTimeout() throws javax.transaction.xa.XAException;
    Code:
       0: iconst_0
       1: ireturn

  public boolean setTransactionTimeout(int) throws javax.transaction.xa.XAException;
    Code:
       0: iconst_0
       1: ireturn

  protected java.lang.String getResourceManagerId() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: invokevirtual #130                // Method org/apache/activemq/ActiveMQConnection.getResourceManagerId:()Ljava/lang/String;
       7: areturn

  private void setXid(javax.transaction.xa.Xid) throws javax.transaction.xa.XAException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: invokevirtual #108                // Method org/apache/activemq/ActiveMQConnection.checkClosedOrFailed:()V
       7: aload_0
       8: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      11: invokevirtual #50                 // Method org/apache/activemq/ActiveMQConnection.ensureConnectionInfoSent:()V
      14: goto          28
      17: astore_2
      18: aload_0
      19: invokespecial #131                // Method disassociate:()V
      22: aload_0
      23: aload_2
      24: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
      27: athrow
      28: aload_1
      29: ifnull        117
      32: aload_0
      33: aload_1
      34: putfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
      37: aload_0
      38: new           #95                 // class org/apache/activemq/command/XATransactionId
      41: dup
      42: aload_1
      43: invokespecial #96                 // Method org/apache/activemq/command/XATransactionId."<init>":(Ljavax/transaction/xa/Xid;)V
      46: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      49: new           #48                 // class org/apache/activemq/command/TransactionInfo
      52: dup
      53: aload_0
      54: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
      57: aload_0
      58: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      61: iconst_0
      62: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
      65: astore_2
      66: aload_0
      67: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      70: aload_2
      71: invokevirtual #51                 // Method org/apache/activemq/ActiveMQConnection.asyncSendPacket:(Lorg/apache/activemq/command/Command;)V
      74: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      77: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      82: ifeq          100
      85: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
      88: ldc           #132                // String {} started XA transaction {}
      90: aload_0
      91: aload_0
      92: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      95: invokeinterface #129,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     100: goto          114
     103: astore_3
     104: aload_0
     105: invokespecial #131                // Method disassociate:()V
     108: aload_0
     109: aload_3
     110: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     113: athrow
     114: goto          285
     117: aload_0
     118: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     121: ifnull        281
     124: new           #48                 // class org/apache/activemq/command/TransactionInfo
     127: dup
     128: aload_0
     129: invokespecial #45                 // Method getConnectionId:()Lorg/apache/activemq/command/ConnectionId;
     132: aload_0
     133: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     136: bipush        7
     138: invokespecial #49                 // Method org/apache/activemq/command/TransactionInfo."<init>":(Lorg/apache/activemq/command/ConnectionId;Lorg/apache/activemq/command/TransactionId;B)V
     141: astore_2
     142: aload_0
     143: aload_2
     144: invokespecial #70                 // Method syncSendPacketWithInterruptionHandling:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
     147: pop
     148: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     151: invokeinterface #53,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     156: ifeq          174
     159: getstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
     162: ldc           #133                // String {} ended XA transaction {}
     164: aload_0
     165: aload_0
     166: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     169: invokeinterface #129,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     174: goto          188
     177: astore_3
     178: aload_0
     179: invokespecial #131                // Method disassociate:()V
     182: aload_0
     183: aload_3
     184: invokespecial #88                 // Method toXAException:(Ljavax/jms/JMSException;)Ljavax/transaction/xa/XAException;
     187: athrow
     188: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     191: dup
     192: astore_3
     193: monitorenter
     194: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     197: aload_0
     198: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     201: invokevirtual #134                // Method java/util/HashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     204: checkcast     #13                 // class java/util/List
     207: astore        4
     209: aload         4
     211: ifnonnull     249
     214: new           #18                 // class java/util/ArrayList
     217: dup
     218: iconst_3
     219: invokespecial #19                 // Method java/util/ArrayList."<init>":(I)V
     222: astore        4
     224: getstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
     227: aload_0
     228: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
     231: aload         4
     233: invokevirtual #135                // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     236: pop
     237: aload         4
     239: aload_0
     240: invokeinterface #20,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     245: pop
     246: goto          269
     249: aload         4
     251: aload_0
     252: invokeinterface #14,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
     257: ifne          269
     260: aload         4
     262: aload_0
     263: invokeinterface #20,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     268: pop
     269: aload_3
     270: monitorexit
     271: goto          281
     274: astore        5
     276: aload_3
     277: monitorexit
     278: aload         5
     280: athrow
     281: aload_0
     282: invokespecial #131                // Method disassociate:()V
     285: return
    Exception table:
       from    to  target type
           0    14    17   Class javax/jms/JMSException
          66   100   103   Class javax/jms/JMSException
         142   174   177   Class javax/jms/JMSException
         194   271   274   any
         274   278   274   any

  private void disassociate();
    Code:
       0: aload_0
       1: aconst_null
       2: putfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
       5: aload_0
       6: aconst_null
       7: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      10: return

  private org.apache.activemq.command.Response syncSendPacketWithInterruptionHandling(org.apache.activemq.command.Command) throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: aload_1
       5: invokevirtual #64                 // Method org/apache/activemq/ActiveMQConnection.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
       8: areturn
       9: astore_2
      10: aload_2
      11: invokevirtual #136                // Method javax/jms/JMSException.getLinkedException:()Ljava/lang/Exception;
      14: instanceof    #137                // class java/io/InterruptedIOException
      17: ifeq          52
      20: invokestatic  #138                // Method java/lang/Thread.interrupted:()Z
      23: pop
      24: aload_0
      25: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      28: aload_1
      29: invokevirtual #64                 // Method org/apache/activemq/ActiveMQConnection.syncSendPacket:(Lorg/apache/activemq/command/Command;)Lorg/apache/activemq/command/Response;
      32: astore_3
      33: invokestatic  #139                // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      36: invokevirtual #140                // Method java/lang/Thread.interrupt:()V
      39: aload_3
      40: areturn
      41: astore        4
      43: invokestatic  #139                // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      46: invokevirtual #140                // Method java/lang/Thread.interrupt:()V
      49: aload         4
      51: athrow
      52: aload_2
      53: athrow
    Exception table:
       from    to  target type
           0     8     9   Class javax/jms/JMSException
          20    33    41   any
          41    43    41   any

  private javax.transaction.xa.XAException toXAException(javax.jms.JMSException);
    Code:
       0: aload_1
       1: invokevirtual #141                // Method javax/jms/JMSException.getCause:()Ljava/lang/Throwable;
       4: ifnull        74
       7: aload_1
       8: invokevirtual #141                // Method javax/jms/JMSException.getCause:()Ljava/lang/Throwable;
      11: instanceof    #79                 // class javax/transaction/xa/XAException
      14: ifeq          74
      17: aload_1
      18: invokevirtual #141                // Method javax/jms/JMSException.getCause:()Ljava/lang/Throwable;
      21: checkcast     #79                 // class javax/transaction/xa/XAException
      24: astore_2
      25: new           #79                 // class javax/transaction/xa/XAException
      28: dup
      29: aload_2
      30: invokevirtual #142                // Method javax/transaction/xa/XAException.getMessage:()Ljava/lang/String;
      33: invokespecial #119                // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
      36: astore_3
      37: aload_3
      38: aload_2
      39: getfield      #143                // Field javax/transaction/xa/XAException.errorCode:I
      42: putfield      #143                // Field javax/transaction/xa/XAException.errorCode:I
      45: aload_3
      46: getfield      #143                // Field javax/transaction/xa/XAException.errorCode:I
      49: ifne          66
      52: aload_3
      53: aload_0
      54: aload_2
      55: invokevirtual #142                // Method javax/transaction/xa/XAException.getMessage:()Ljava/lang/String;
      58: bipush        -3
      60: invokespecial #144                // Method parseFromMessageOr:(Ljava/lang/String;I)I
      63: putfield      #143                // Field javax/transaction/xa/XAException.errorCode:I
      66: aload_3
      67: aload_2
      68: invokevirtual #120                // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      71: pop
      72: aload_3
      73: areturn
      74: new           #79                 // class javax/transaction/xa/XAException
      77: dup
      78: aload_1
      79: invokevirtual #145                // Method javax/jms/JMSException.getMessage:()Ljava/lang/String;
      82: invokespecial #119                // Method javax/transaction/xa/XAException."<init>":(Ljava/lang/String;)V
      85: astore_2
      86: aload_2
      87: bipush        -7
      89: putfield      #143                // Field javax/transaction/xa/XAException.errorCode:I
      92: aload_2
      93: aload_1
      94: invokevirtual #120                // Method javax/transaction/xa/XAException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
      97: pop
      98: aload_2
      99: areturn

  private int parseFromMessageOr(java.lang.String, int);
    Code:
       0: ldc           #146                // String xaErrorCode:
       2: astore_3
       3: aload_1
       4: ldc           #146                // String xaErrorCode:
       6: invokevirtual #147                // Method java/lang/String.lastIndexOf:(Ljava/lang/String;)I
       9: istore        4
      11: iload         4
      13: iconst_m1
      14: if_icmple     35
      17: aload_1
      18: iload         4
      20: ldc           #146                // String xaErrorCode:
      22: invokevirtual #148                // Method java/lang/String.length:()I
      25: iadd
      26: invokevirtual #149                // Method java/lang/String.substring:(I)Ljava/lang/String;
      29: invokestatic  #150                // Method java/lang/Integer.parseInt:(Ljava/lang/String;)I
      32: ireturn
      33: astore        5
      35: iload_2
      36: ireturn
    Exception table:
       from    to  target type
          17    32    33   Class java/lang/Exception

  public org.apache.activemq.ActiveMQConnection getConnection();
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: areturn

  public org.apache.activemq.ActiveMQConnection setConnection(org.apache.activemq.ActiveMQConnection);
    Code:
       0: aload_0
       1: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
       4: astore_2
       5: aload_0
       6: aload_1
       7: putfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      10: aload_2
      11: areturn

  public void cleanup();
    Code:
       0: aload_0
       1: aconst_null
       2: putfield      #81                 // Field associatedXid:Ljavax/transaction/xa/Xid;
       5: aload_0
       6: aconst_null
       7: putfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      10: return

  public java.lang.String toString();
    Code:
       0: new           #27                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #151                // String TransactionContext{transactionId=
       9: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_0
      13: getfield      #5                  // Field transactionId:Lorg/apache/activemq/command/TransactionId;
      16: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      19: ldc           #152                // String ,connection=
      21: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #3                  // Field connection:Lorg/apache/activemq/ActiveMQConnection;
      28: invokevirtual #31                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: bipush        125
      33: invokevirtual #153                // Method java/lang/StringBuilder.append:(C)Ljava/lang/StringBuilder;
      36: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      39: areturn

  static {};
    Code:
       0: ldc_w         #103                // class org/apache/activemq/TransactionContext
       3: invokestatic  #154                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       6: putstatic     #26                 // Field LOG:Lorg/slf4j/Logger;
       9: new           #155                // class java/util/HashMap
      12: dup
      13: invokespecial #156                // Method java/util/HashMap."<init>":()V
      16: putstatic     #7                  // Field ENDED_XA_TRANSACTION_CONTEXTS:Ljava/util/HashMap;
      19: return
}

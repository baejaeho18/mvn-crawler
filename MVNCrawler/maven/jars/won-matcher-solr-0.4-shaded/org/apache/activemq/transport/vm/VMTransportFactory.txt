Compiled from "VMTransportFactory.java"
public class org.apache.activemq.transport.vm.VMTransportFactory extends org.apache.activemq.transport.TransportFactory {
  public static final java.util.concurrent.ConcurrentHashMap<java.lang.String, org.apache.activemq.broker.BrokerService> BROKERS;

  public static final java.util.concurrent.ConcurrentHashMap<java.lang.String, org.apache.activemq.broker.TransportConnector> CONNECTORS;

  public static final java.util.concurrent.ConcurrentHashMap<java.lang.String, org.apache.activemq.transport.vm.VMTransportServer> SERVERS;

  private static final org.slf4j.Logger LOG;

  org.apache.activemq.broker.BrokerFactoryHandler brokerFactoryHandler;

  public org.apache.activemq.transport.vm.VMTransportFactory();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/apache/activemq/transport/TransportFactory."<init>":()V
       4: return

  public org.apache.activemq.transport.Transport doConnect(java.net.URI) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #2                  // Method doCompositeConnect:(Ljava/net/URI;)Lorg/apache/activemq/transport/Transport;
       5: invokestatic  #3                  // Method org/apache/activemq/transport/vm/VMTransportServer.configure:(Lorg/apache/activemq/transport/Transport;)Lorg/apache/activemq/transport/Transport;
       8: areturn

  public org.apache.activemq.transport.Transport doCompositeConnect(java.net.URI) throws java.lang.Exception;
    Code:
       0: iconst_1
       1: istore        5
       3: iconst_m1
       4: istore        6
       6: aload_1
       7: invokestatic  #4                  // Method org/apache/activemq/util/URISupport.parseComposite:(Ljava/net/URI;)Lorg/apache/activemq/util/URISupport$CompositeData;
      10: astore        7
      12: aload         7
      14: invokevirtual #5                  // Method org/apache/activemq/util/URISupport$CompositeData.getComponents:()[Ljava/net/URI;
      17: arraylength
      18: iconst_1
      19: if_icmpne     128
      22: ldc           #6                  // String broker
      24: aload         7
      26: invokevirtual #5                  // Method org/apache/activemq/util/URISupport$CompositeData.getComponents:()[Ljava/net/URI;
      29: iconst_0
      30: aaload
      31: invokevirtual #7                  // Method java/net/URI.getScheme:()Ljava/lang/String;
      34: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      37: ifeq          128
      40: aload         7
      42: invokevirtual #5                  // Method org/apache/activemq/util/URISupport$CompositeData.getComponents:()[Ljava/net/URI;
      45: iconst_0
      46: aaload
      47: astore_2
      48: aload_2
      49: invokestatic  #4                  // Method org/apache/activemq/util/URISupport.parseComposite:(Ljava/net/URI;)Lorg/apache/activemq/util/URISupport$CompositeData;
      52: astore        8
      54: aload         8
      56: invokevirtual #9                  // Method org/apache/activemq/util/URISupport$CompositeData.getParameters:()Ljava/util/Map;
      59: ldc           #10                 // String brokerName
      61: invokeinterface #11,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      66: checkcast     #12                 // class java/lang/String
      69: astore_3
      70: aload_3
      71: ifnonnull     77
      74: ldc           #13                 // String localhost
      76: astore_3
      77: aload         8
      79: invokevirtual #14                 // Method org/apache/activemq/util/URISupport$CompositeData.getPath:()Ljava/lang/String;
      82: ifnull        91
      85: aload         8
      87: invokevirtual #14                 // Method org/apache/activemq/util/URISupport$CompositeData.getPath:()Ljava/lang/String;
      90: astore_3
      91: aload         7
      93: invokevirtual #9                  // Method org/apache/activemq/util/URISupport$CompositeData.getParameters:()Ljava/util/Map;
      96: astore        4
      98: new           #15                 // class java/net/URI
     101: dup
     102: new           #16                 // class java/lang/StringBuilder
     105: dup
     106: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     109: ldc           #18                 // String vm://
     111: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     114: aload_3
     115: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     118: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     121: invokespecial #21                 // Method java/net/URI."<init>":(Ljava/lang/String;)V
     124: astore_1
     125: goto          304
     128: aload_1
     129: invokestatic  #22                 // Method extractHost:(Ljava/net/URI;)Ljava/lang/String;
     132: astore_3
     133: aload_1
     134: invokestatic  #23                 // Method org/apache/activemq/util/URISupport.parseParameters:(Ljava/net/URI;)Ljava/util/Map;
     137: astore        4
     139: aload         4
     141: ldc           #24                 // String brokerConfig
     143: invokeinterface #25,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     148: checkcast     #12                 // class java/lang/String
     151: astore        8
     153: aload         8
     155: ifnull        171
     158: new           #15                 // class java/net/URI
     161: dup
     162: aload         8
     164: invokespecial #21                 // Method java/net/URI."<init>":(Ljava/lang/String;)V
     167: astore_2
     168: goto          220
     171: aload         4
     173: ldc           #26                 // String broker.
     175: invokestatic  #27                 // Method org/apache/activemq/util/IntrospectionSupport.extractProperties:(Ljava/util/Map;Ljava/lang/String;)Ljava/util/Map;
     178: astore        9
     180: new           #15                 // class java/net/URI
     183: dup
     184: new           #16                 // class java/lang/StringBuilder
     187: dup
     188: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     191: ldc           #28                 // String broker://()/
     193: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     196: aload_3
     197: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     200: ldc           #29                 // String ?
     202: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     205: aload         9
     207: invokestatic  #30                 // Method org/apache/activemq/util/URISupport.createQueryString:(Ljava/util/Map;)Ljava/lang/String;
     210: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     213: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     216: invokespecial #21                 // Method java/net/URI."<init>":(Ljava/lang/String;)V
     219: astore_2
     220: ldc           #31                 // String false
     222: aload         4
     224: ldc           #32                 // String create
     226: invokeinterface #25,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     231: invokevirtual #8                  // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     234: ifeq          240
     237: iconst_0
     238: istore        5
     240: aload         4
     242: ldc           #33                 // String waitForStart
     244: invokeinterface #25,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
     249: checkcast     #12                 // class java/lang/String
     252: astore        9
     254: aload         9
     256: ifnull        266
     259: aload         9
     261: invokestatic  #34                 // Method java/lang/Integer.parseInt:(Ljava/lang/String;)I
     264: istore        6
     266: goto          277
     269: astore        8
     271: aload         8
     273: invokestatic  #36                 // Method org/apache/activemq/util/IOExceptionSupport.create:(Ljava/lang/Exception;)Ljava/io/IOException;
     276: athrow
     277: new           #15                 // class java/net/URI
     280: dup
     281: new           #16                 // class java/lang/StringBuilder
     284: dup
     285: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     288: ldc           #18                 // String vm://
     290: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     293: aload_3
     294: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     297: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     300: invokespecial #21                 // Method java/net/URI."<init>":(Ljava/lang/String;)V
     303: astore_1
     304: aload_3
     305: ifnonnull     311
     308: ldc           #13                 // String localhost
     310: astore_3
     311: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
     314: aload_3
     315: invokevirtual #38                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     318: checkcast     #39                 // class org/apache/activemq/transport/vm/VMTransportServer
     321: astore        8
     323: aload_0
     324: aload_3
     325: invokespecial #40                 // Method validateBroker:(Ljava/lang/String;)Z
     328: ifeq          336
     331: aload         8
     333: ifnonnull     567
     336: aconst_null
     337: astore        9
     339: invokestatic  #41                 // Method org/apache/activemq/broker/BrokerRegistry.getInstance:()Lorg/apache/activemq/broker/BrokerRegistry;
     342: invokevirtual #42                 // Method org/apache/activemq/broker/BrokerRegistry.getRegistryMutext:()Ljava/lang/Object;
     345: dup
     346: astore        10
     348: monitorenter
     349: aload_0
     350: invokestatic  #41                 // Method org/apache/activemq/broker/BrokerRegistry.getInstance:()Lorg/apache/activemq/broker/BrokerRegistry;
     353: aload_3
     354: iload         6
     356: invokespecial #43                 // Method lookupBroker:(Lorg/apache/activemq/broker/BrokerRegistry;Ljava/lang/String;I)Lorg/apache/activemq/broker/BrokerService;
     359: astore        9
     361: aload         9
     363: ifnonnull     476
     366: iload         5
     368: ifne          403
     371: new           #44                 // class java/io/IOException
     374: dup
     375: new           #16                 // class java/lang/StringBuilder
     378: dup
     379: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     382: ldc           #45                 // String Broker named \'
     384: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     387: aload_3
     388: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     391: ldc           #46                 // String \' does not exist.
     393: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     396: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     399: invokespecial #47                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     402: athrow
     403: aload_0
     404: getfield      #48                 // Field brokerFactoryHandler:Lorg/apache/activemq/broker/BrokerFactoryHandler;
     407: ifnull        425
     410: aload_0
     411: getfield      #48                 // Field brokerFactoryHandler:Lorg/apache/activemq/broker/BrokerFactoryHandler;
     414: aload_2
     415: invokeinterface #49,  2           // InterfaceMethod org/apache/activemq/broker/BrokerFactoryHandler.createBroker:(Ljava/net/URI;)Lorg/apache/activemq/broker/BrokerService;
     420: astore        9
     422: goto          431
     425: aload_2
     426: invokestatic  #50                 // Method org/apache/activemq/broker/BrokerFactory.createBroker:(Ljava/net/URI;)Lorg/apache/activemq/broker/BrokerService;
     429: astore        9
     431: aload         9
     433: invokevirtual #51                 // Method org/apache/activemq/broker/BrokerService.start:()V
     436: ldc           #52                 // String activemq.broker
     438: aload         9
     440: invokevirtual #53                 // Method org/apache/activemq/broker/BrokerService.getBrokerName:()Ljava/lang/String;
     443: invokestatic  #54                 // Method org/slf4j/MDC.put:(Ljava/lang/String;Ljava/lang/String;)V
     446: goto          457
     449: astore        11
     451: aload         11
     453: invokestatic  #36                 // Method org/apache/activemq/util/IOExceptionSupport.create:(Ljava/lang/Exception;)Ljava/io/IOException;
     456: athrow
     457: getstatic     #55                 // Field BROKERS:Ljava/util/concurrent/ConcurrentHashMap;
     460: aload_3
     461: aload         9
     463: invokevirtual #56                 // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     466: pop
     467: invokestatic  #41                 // Method org/apache/activemq/broker/BrokerRegistry.getInstance:()Lorg/apache/activemq/broker/BrokerRegistry;
     470: invokevirtual #42                 // Method org/apache/activemq/broker/BrokerRegistry.getRegistryMutext:()Ljava/lang/Object;
     473: invokevirtual #57                 // Method java/lang/Object.notifyAll:()V
     476: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
     479: aload_3
     480: invokevirtual #38                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     483: checkcast     #39                 // class org/apache/activemq/transport/vm/VMTransportServer
     486: astore        8
     488: aload         8
     490: ifnonnull     553
     493: aload_0
     494: aload_1
     495: iconst_1
     496: invokespecial #58                 // Method bind:(Ljava/net/URI;Z)Lorg/apache/activemq/transport/TransportServer;
     499: checkcast     #39                 // class org/apache/activemq/transport/vm/VMTransportServer
     502: astore        8
     504: new           #59                 // class org/apache/activemq/broker/TransportConnector
     507: dup
     508: aload         8
     510: invokespecial #60                 // Method org/apache/activemq/broker/TransportConnector."<init>":(Lorg/apache/activemq/transport/TransportServer;)V
     513: astore        11
     515: aload         11
     517: aload         9
     519: invokevirtual #61                 // Method org/apache/activemq/broker/TransportConnector.setBrokerService:(Lorg/apache/activemq/broker/BrokerService;)V
     522: aload         11
     524: aload_1
     525: invokevirtual #62                 // Method org/apache/activemq/broker/TransportConnector.setUri:(Ljava/net/URI;)V
     528: aload         11
     530: aload         9
     532: invokevirtual #63                 // Method org/apache/activemq/broker/BrokerService.getTaskRunnerFactory:()Lorg/apache/activemq/thread/TaskRunnerFactory;
     535: invokevirtual #64                 // Method org/apache/activemq/broker/TransportConnector.setTaskRunnerFactory:(Lorg/apache/activemq/thread/TaskRunnerFactory;)V
     538: aload         11
     540: invokevirtual #65                 // Method org/apache/activemq/broker/TransportConnector.start:()V
     543: getstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
     546: aload_3
     547: aload         11
     549: invokevirtual #56                 // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     552: pop
     553: aload         10
     555: monitorexit
     556: goto          567
     559: astore        12
     561: aload         10
     563: monitorexit
     564: aload         12
     566: athrow
     567: aload         8
     569: invokevirtual #67                 // Method org/apache/activemq/transport/vm/VMTransportServer.connect:()Lorg/apache/activemq/transport/vm/VMTransport;
     572: astore        9
     574: aload         9
     576: getfield      #68                 // Field org/apache/activemq/transport/vm/VMTransport.peer:Lorg/apache/activemq/transport/vm/VMTransport;
     579: new           #69                 // class java/util/HashMap
     582: dup
     583: aload         4
     585: invokespecial #70                 // Method java/util/HashMap."<init>":(Ljava/util/Map;)V
     588: invokestatic  #71                 // Method org/apache/activemq/util/IntrospectionSupport.setProperties:(Ljava/lang/Object;Ljava/util/Map;)Z
     591: pop
     592: aload         9
     594: aload         4
     596: invokestatic  #71                 // Method org/apache/activemq/util/IntrospectionSupport.setProperties:(Ljava/lang/Object;Ljava/util/Map;)Z
     599: pop
     600: aload         9
     602: astore        10
     604: aload         9
     606: invokevirtual #72                 // Method org/apache/activemq/transport/vm/VMTransport.isMarshal:()Z
     609: ifeq          646
     612: new           #69                 // class java/util/HashMap
     615: dup
     616: aload         4
     618: invokespecial #70                 // Method java/util/HashMap."<init>":(Ljava/util/Map;)V
     621: astore        11
     623: new           #73                 // class org/apache/activemq/transport/MarshallingTransportFilter
     626: dup
     627: aload         10
     629: aload_0
     630: aload         4
     632: invokevirtual #74                 // Method createWireFormat:(Ljava/util/Map;)Lorg/apache/activemq/wireformat/WireFormat;
     635: aload_0
     636: aload         11
     638: invokevirtual #74                 // Method createWireFormat:(Ljava/util/Map;)Lorg/apache/activemq/wireformat/WireFormat;
     641: invokespecial #75                 // Method org/apache/activemq/transport/MarshallingTransportFilter."<init>":(Lorg/apache/activemq/transport/Transport;Lorg/apache/activemq/wireformat/WireFormat;Lorg/apache/activemq/wireformat/WireFormat;)V
     644: astore        10
     646: aload         4
     648: invokeinterface #76,  1           // InterfaceMethod java/util/Map.isEmpty:()Z
     653: ifne          684
     656: new           #77                 // class java/lang/IllegalArgumentException
     659: dup
     660: new           #16                 // class java/lang/StringBuilder
     663: dup
     664: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     667: ldc           #78                 // String Invalid connect parameters:
     669: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     672: aload         4
     674: invokevirtual #79                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     677: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     680: invokespecial #80                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     683: athrow
     684: aload         10
     686: areturn
    Exception table:
       from    to  target type
         128   266   269   Class java/net/URISyntaxException
         403   446   449   Class java/net/URISyntaxException
         349   556   559   any
         559   564   559   any

  private static java.lang.String extractHost(java.net.URI);
    Code:
       0: aload_0
       1: invokevirtual #81                 // Method java/net/URI.getHost:()Ljava/lang/String;
       4: astore_1
       5: aload_1
       6: ifnull        16
       9: aload_1
      10: invokevirtual #82                 // Method java/lang/String.length:()I
      13: ifne          35
      16: aload_0
      17: invokevirtual #83                 // Method java/net/URI.getAuthority:()Ljava/lang/String;
      20: astore_1
      21: aload_1
      22: ifnull        32
      25: aload_1
      26: invokevirtual #82                 // Method java/lang/String.length:()I
      29: ifne          35
      32: ldc           #13                 // String localhost
      34: astore_1
      35: aload_1
      36: areturn

  private org.apache.activemq.broker.BrokerService lookupBroker(org.apache.activemq.broker.BrokerRegistry, java.lang.String, int);
    Code:
       0: aconst_null
       1: astore        4
       3: aload_1
       4: invokevirtual #42                 // Method org/apache/activemq/broker/BrokerRegistry.getRegistryMutext:()Ljava/lang/Object;
       7: dup
       8: astore        5
      10: monitorenter
      11: aload_1
      12: aload_2
      13: invokevirtual #84                 // Method org/apache/activemq/broker/BrokerRegistry.lookup:(Ljava/lang/String;)Lorg/apache/activemq/broker/BrokerService;
      16: astore        4
      18: aload         4
      20: ifnonnull     203
      23: iload_3
      24: ifle          203
      27: invokestatic  #85                 // Method java/lang/System.currentTimeMillis:()J
      30: iload_3
      31: i2l
      32: ladd
      33: lstore        6
      35: aload         4
      37: ifnull        48
      40: aload         4
      42: invokevirtual #86                 // Method org/apache/activemq/broker/BrokerService.isStarted:()Z
      45: ifne          203
      48: lload         6
      50: invokestatic  #85                 // Method java/lang/System.currentTimeMillis:()J
      53: lcmp
      54: ifle          203
      57: lconst_0
      58: lload         6
      60: invokestatic  #85                 // Method java/lang/System.currentTimeMillis:()J
      63: lsub
      64: invokestatic  #87                 // Method java/lang/Math.max:(JJ)J
      67: lstore        8
      69: aload         4
      71: ifnonnull     127
      74: getstatic     #88                 // Field LOG:Lorg/slf4j/Logger;
      77: new           #16                 // class java/lang/StringBuilder
      80: dup
      81: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      84: ldc           #89                 // String waiting for broker named:
      86: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: aload_2
      90: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      93: ldc           #90                 // String  to enter registry
      95: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      98: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     101: invokeinterface #91,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     106: aload_1
     107: invokevirtual #42                 // Method org/apache/activemq/broker/BrokerRegistry.getRegistryMutext:()Ljava/lang/Object;
     110: lload         8
     112: invokevirtual #92                 // Method java/lang/Object.wait:(J)V
     115: aload_1
     116: aload_2
     117: invokevirtual #84                 // Method org/apache/activemq/broker/BrokerRegistry.lookup:(Ljava/lang/String;)Lorg/apache/activemq/broker/BrokerService;
     120: astore        4
     122: goto          127
     125: astore        10
     127: aload         4
     129: ifnull        200
     132: aload         4
     134: invokevirtual #86                 // Method org/apache/activemq/broker/BrokerService.isStarted:()Z
     137: ifne          200
     140: getstatic     #88                 // Field LOG:Lorg/slf4j/Logger;
     143: new           #16                 // class java/lang/StringBuilder
     146: dup
     147: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
     150: ldc           #89                 // String waiting for broker named:
     152: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     155: aload_2
     156: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     159: ldc           #94                 // String  to start
     161: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     164: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     167: invokeinterface #91,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     172: lconst_0
     173: lload         6
     175: invokestatic  #85                 // Method java/lang/System.currentTimeMillis:()J
     178: lsub
     179: invokestatic  #87                 // Method java/lang/Math.max:(JJ)J
     182: lstore        8
     184: aload         4
     186: lload         8
     188: invokevirtual #95                 // Method org/apache/activemq/broker/BrokerService.waitUntilStarted:(J)Z
     191: ifne          200
     194: aconst_null
     195: astore        4
     197: goto          203
     200: goto          35
     203: aload         5
     205: monitorexit
     206: goto          217
     209: astore        11
     211: aload         5
     213: monitorexit
     214: aload         11
     216: athrow
     217: aload         4
     219: areturn
    Exception table:
       from    to  target type
          74   122   125   Class java/lang/InterruptedException
          11   206   209   any
         209   214   209   any

  public org.apache.activemq.transport.TransportServer doBind(java.net.URI) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: invokespecial #58                 // Method bind:(Ljava/net/URI;Z)Lorg/apache/activemq/transport/TransportServer;
       6: areturn

  private org.apache.activemq.transport.TransportServer bind(java.net.URI, boolean) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokestatic  #22                 // Method extractHost:(Ljava/net/URI;)Ljava/lang/String;
       4: astore_3
       5: getstatic     #88                 // Field LOG:Lorg/slf4j/Logger;
       8: new           #16                 // class java/lang/StringBuilder
      11: dup
      12: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      15: ldc           #96                 // String binding to broker:
      17: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      20: aload_3
      21: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      27: invokeinterface #91,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      32: new           #39                 // class org/apache/activemq/transport/vm/VMTransportServer
      35: dup
      36: aload_1
      37: iload_2
      38: invokespecial #97                 // Method org/apache/activemq/transport/vm/VMTransportServer."<init>":(Ljava/net/URI;Z)V
      41: astore        4
      43: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
      46: aload_3
      47: invokevirtual #38                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      50: astore        5
      52: aload         5
      54: ifnull        84
      57: new           #44                 // class java/io/IOException
      60: dup
      61: new           #16                 // class java/lang/StringBuilder
      64: dup
      65: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      68: ldc           #98                 // String VMTransportServer already bound at:
      70: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      73: aload_1
      74: invokevirtual #79                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      77: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      80: invokespecial #47                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      83: athrow
      84: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
      87: aload_3
      88: aload         4
      90: invokevirtual #56                 // Method java/util/concurrent/ConcurrentHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      93: pop
      94: aload         4
      96: areturn

  public static void stopped(org.apache.activemq.transport.vm.VMTransportServer);
    Code:
       0: aload_0
       1: invokevirtual #99                 // Method org/apache/activemq/transport/vm/VMTransportServer.getBindURI:()Ljava/net/URI;
       4: invokestatic  #22                 // Method extractHost:(Ljava/net/URI;)Ljava/lang/String;
       7: astore_1
       8: aload_1
       9: invokestatic  #100                // Method stopped:(Ljava/lang/String;)V
      12: return

  public static void stopped(java.lang.String);
    Code:
       0: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
       3: aload_0
       4: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
       7: pop
       8: getstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
      11: aload_0
      12: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #59                 // class org/apache/activemq/broker/TransportConnector
      18: astore_1
      19: aload_1
      20: ifnull        78
      23: getstatic     #88                 // Field LOG:Lorg/slf4j/Logger;
      26: new           #16                 // class java/lang/StringBuilder
      29: dup
      30: invokespecial #17                 // Method java/lang/StringBuilder."<init>":()V
      33: ldc           #102                // String Shutting down VM connectors for broker:
      35: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: aload_0
      39: invokevirtual #19                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: invokevirtual #20                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      45: invokeinterface #91,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      50: aload_1
      51: invokestatic  #103                // Method org/apache/activemq/util/ServiceSupport.dispose:(Lorg/apache/activemq/Service;)V
      54: getstatic     #55                 // Field BROKERS:Ljava/util/concurrent/ConcurrentHashMap;
      57: aload_0
      58: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      61: checkcast     #104                // class org/apache/activemq/broker/BrokerService
      64: astore_2
      65: aload_2
      66: ifnull        73
      69: aload_2
      70: invokestatic  #103                // Method org/apache/activemq/util/ServiceSupport.dispose:(Lorg/apache/activemq/Service;)V
      73: ldc           #52                 // String activemq.broker
      75: invokestatic  #105                // Method org/slf4j/MDC.remove:(Ljava/lang/String;)V
      78: return

  public org.apache.activemq.broker.BrokerFactoryHandler getBrokerFactoryHandler();
    Code:
       0: aload_0
       1: getfield      #48                 // Field brokerFactoryHandler:Lorg/apache/activemq/broker/BrokerFactoryHandler;
       4: areturn

  public void setBrokerFactoryHandler(org.apache.activemq.broker.BrokerFactoryHandler);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #48                 // Field brokerFactoryHandler:Lorg/apache/activemq/broker/BrokerFactoryHandler;
       5: return

  private boolean validateBroker(java.lang.String);
    Code:
       0: iconst_1
       1: istore_2
       2: getstatic     #55                 // Field BROKERS:Ljava/util/concurrent/ConcurrentHashMap;
       5: aload_1
       6: invokevirtual #106                // Method java/util/concurrent/ConcurrentHashMap.containsKey:(Ljava/lang/Object;)Z
       9: ifne          32
      12: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
      15: aload_1
      16: invokevirtual #106                // Method java/util/concurrent/ConcurrentHashMap.containsKey:(Ljava/lang/Object;)Z
      19: ifne          32
      22: getstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
      25: aload_1
      26: invokevirtual #106                // Method java/util/concurrent/ConcurrentHashMap.containsKey:(Ljava/lang/Object;)Z
      29: ifeq          107
      32: getstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
      35: aload_1
      36: invokevirtual #38                 // Method java/util/concurrent/ConcurrentHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      39: checkcast     #59                 // class org/apache/activemq/broker/TransportConnector
      42: astore_3
      43: invokestatic  #41                 // Method org/apache/activemq/broker/BrokerRegistry.getInstance:()Lorg/apache/activemq/broker/BrokerRegistry;
      46: aload_1
      47: invokevirtual #84                 // Method org/apache/activemq/broker/BrokerRegistry.lookup:(Ljava/lang/String;)Lorg/apache/activemq/broker/BrokerService;
      50: ifnull        69
      53: aload_3
      54: ifnull        107
      57: aload_3
      58: invokevirtual #107                // Method org/apache/activemq/broker/TransportConnector.getBroker:()Lorg/apache/activemq/broker/Broker;
      61: invokeinterface #108,  1          // InterfaceMethod org/apache/activemq/broker/Broker.isStopped:()Z
      66: ifeq          107
      69: iconst_0
      70: istore_2
      71: getstatic     #55                 // Field BROKERS:Ljava/util/concurrent/ConcurrentHashMap;
      74: aload_1
      75: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      78: pop
      79: getstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
      82: aload_1
      83: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      86: pop
      87: aload_3
      88: ifnull        107
      91: getstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
      94: aload_1
      95: invokevirtual #101                // Method java/util/concurrent/ConcurrentHashMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      98: pop
      99: aload_3
     100: ifnull        107
     103: aload_3
     104: invokestatic  #103                // Method org/apache/activemq/util/ServiceSupport.dispose:(Lorg/apache/activemq/Service;)V
     107: iload_2
     108: ireturn

  static {};
    Code:
       0: new           #109                // class java/util/concurrent/ConcurrentHashMap
       3: dup
       4: invokespecial #110                // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
       7: putstatic     #55                 // Field BROKERS:Ljava/util/concurrent/ConcurrentHashMap;
      10: new           #109                // class java/util/concurrent/ConcurrentHashMap
      13: dup
      14: invokespecial #110                // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      17: putstatic     #66                 // Field CONNECTORS:Ljava/util/concurrent/ConcurrentHashMap;
      20: new           #109                // class java/util/concurrent/ConcurrentHashMap
      23: dup
      24: invokespecial #110                // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      27: putstatic     #37                 // Field SERVERS:Ljava/util/concurrent/ConcurrentHashMap;
      30: ldc_w         #111                // class org/apache/activemq/transport/vm/VMTransportFactory
      33: invokestatic  #112                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      36: putstatic     #88                 // Field LOG:Lorg/slf4j/Logger;
      39: return
}

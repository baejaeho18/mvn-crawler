Compiled from "ManagedHttpCacheStorage.java"
public class org.apache.http.impl.client.cache.ManagedHttpCacheStorage implements org.apache.http.client.cache.HttpCacheStorage,java.io.Closeable {
  private final org.apache.http.impl.client.cache.CacheMap entries;

  private final java.lang.ref.ReferenceQueue<org.apache.http.client.cache.HttpCacheEntry> morque;

  private final java.util.Set<org.apache.http.impl.client.cache.ResourceReference> resources;

  private final java.util.concurrent.atomic.AtomicBoolean active;

  public org.apache.http.impl.client.cache.ManagedHttpCacheStorage(org.apache.http.impl.client.cache.CacheConfig);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class org/apache/http/impl/client/cache/CacheMap
       8: dup
       9: aload_1
      10: invokevirtual #3                  // Method org/apache/http/impl/client/cache/CacheConfig.getMaxCacheEntries:()I
      13: invokespecial #4                  // Method org/apache/http/impl/client/cache/CacheMap."<init>":(I)V
      16: putfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      19: aload_0
      20: new           #6                  // class java/lang/ref/ReferenceQueue
      23: dup
      24: invokespecial #7                  // Method java/lang/ref/ReferenceQueue."<init>":()V
      27: putfield      #8                  // Field morque:Ljava/lang/ref/ReferenceQueue;
      30: aload_0
      31: new           #9                  // class java/util/HashSet
      34: dup
      35: invokespecial #10                 // Method java/util/HashSet."<init>":()V
      38: putfield      #11                 // Field resources:Ljava/util/Set;
      41: aload_0
      42: new           #12                 // class java/util/concurrent/atomic/AtomicBoolean
      45: dup
      46: iconst_1
      47: invokespecial #13                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      50: putfield      #14                 // Field active:Ljava/util/concurrent/atomic/AtomicBoolean;
      53: return

  private void ensureValidState() throws java.lang.IllegalStateException;
    Code:
       0: aload_0
       1: getfield      #14                 // Field active:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #15                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ifne          20
      10: new           #16                 // class java/lang/IllegalStateException
      13: dup
      14: ldc           #17                 // String Cache has been shut down
      16: invokespecial #18                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: return

  private void keepResourceReference(org.apache.http.client.cache.HttpCacheEntry);
    Code:
       0: aload_1
       1: invokevirtual #19                 // Method org/apache/http/client/cache/HttpCacheEntry.getResource:()Lorg/apache/http/client/cache/Resource;
       4: astore_2
       5: aload_2
       6: ifnull        33
       9: new           #20                 // class org/apache/http/impl/client/cache/ResourceReference
      12: dup
      13: aload_1
      14: aload_0
      15: getfield      #8                  // Field morque:Ljava/lang/ref/ReferenceQueue;
      18: invokespecial #21                 // Method org/apache/http/impl/client/cache/ResourceReference."<init>":(Lorg/apache/http/client/cache/HttpCacheEntry;Ljava/lang/ref/ReferenceQueue;)V
      21: astore_3
      22: aload_0
      23: getfield      #11                 // Field resources:Ljava/util/Set;
      26: aload_3
      27: invokeinterface #22,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      32: pop
      33: return

  public void putEntry(java.lang.String, org.apache.http.client.cache.HttpCacheEntry) throws java.io.IOException;
    Code:
       0: aload_1
       1: ldc           #23                 // String URL
       3: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_2
       8: ldc           #25                 // String Cache entry
      10: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      13: pop
      14: aload_0
      15: invokespecial #26                 // Method ensureValidState:()V
      18: aload_0
      19: dup
      20: astore_3
      21: monitorenter
      22: aload_0
      23: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      26: aload_1
      27: aload_2
      28: invokevirtual #27                 // Method org/apache/http/impl/client/cache/CacheMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      31: pop
      32: aload_0
      33: aload_2
      34: invokespecial #28                 // Method keepResourceReference:(Lorg/apache/http/client/cache/HttpCacheEntry;)V
      37: aload_3
      38: monitorexit
      39: goto          49
      42: astore        4
      44: aload_3
      45: monitorexit
      46: aload         4
      48: athrow
      49: return
    Exception table:
       from    to  target type
          22    39    42   any
          42    46    42   any

  public org.apache.http.client.cache.HttpCacheEntry getEntry(java.lang.String) throws java.io.IOException;
    Code:
       0: aload_1
       1: ldc           #23                 // String URL
       3: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_0
       8: invokespecial #26                 // Method ensureValidState:()V
      11: aload_0
      12: dup
      13: astore_2
      14: monitorenter
      15: aload_0
      16: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      19: aload_1
      20: invokevirtual #29                 // Method org/apache/http/impl/client/cache/CacheMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      23: checkcast     #30                 // class org/apache/http/client/cache/HttpCacheEntry
      26: aload_2
      27: monitorexit
      28: areturn
      29: astore_3
      30: aload_2
      31: monitorexit
      32: aload_3
      33: athrow
    Exception table:
       from    to  target type
          15    28    29   any
          29    32    29   any

  public void removeEntry(java.lang.String) throws java.io.IOException;
    Code:
       0: aload_1
       1: ldc           #23                 // String URL
       3: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_0
       8: invokespecial #26                 // Method ensureValidState:()V
      11: aload_0
      12: dup
      13: astore_2
      14: monitorenter
      15: aload_0
      16: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      19: aload_1
      20: invokevirtual #31                 // Method org/apache/http/impl/client/cache/CacheMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      23: pop
      24: aload_2
      25: monitorexit
      26: goto          34
      29: astore_3
      30: aload_2
      31: monitorexit
      32: aload_3
      33: athrow
      34: return
    Exception table:
       from    to  target type
          15    26    29   any
          29    32    29   any

  public void updateEntry(java.lang.String, org.apache.http.client.cache.HttpCacheUpdateCallback) throws java.io.IOException;
    Code:
       0: aload_1
       1: ldc           #23                 // String URL
       3: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_2
       8: ldc           #32                 // String Callback
      10: invokestatic  #24                 // Method org/apache/http/util/Args.notNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      13: pop
      14: aload_0
      15: invokespecial #26                 // Method ensureValidState:()V
      18: aload_0
      19: dup
      20: astore_3
      21: monitorenter
      22: aload_0
      23: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      26: aload_1
      27: invokevirtual #29                 // Method org/apache/http/impl/client/cache/CacheMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      30: checkcast     #30                 // class org/apache/http/client/cache/HttpCacheEntry
      33: astore        4
      35: aload_2
      36: aload         4
      38: invokeinterface #33,  2           // InterfaceMethod org/apache/http/client/cache/HttpCacheUpdateCallback.update:(Lorg/apache/http/client/cache/HttpCacheEntry;)Lorg/apache/http/client/cache/HttpCacheEntry;
      43: astore        5
      45: aload_0
      46: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      49: aload_1
      50: aload         5
      52: invokevirtual #27                 // Method org/apache/http/impl/client/cache/CacheMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      55: pop
      56: aload         4
      58: aload         5
      60: if_acmpeq     69
      63: aload_0
      64: aload         5
      66: invokespecial #28                 // Method keepResourceReference:(Lorg/apache/http/client/cache/HttpCacheEntry;)V
      69: aload_3
      70: monitorexit
      71: goto          81
      74: astore        6
      76: aload_3
      77: monitorexit
      78: aload         6
      80: athrow
      81: return
    Exception table:
       from    to  target type
          22    71    74   any
          74    78    74   any

  public void cleanResources();
    Code:
       0: aload_0
       1: getfield      #14                 // Field active:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #15                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ifeq          62
      10: aload_0
      11: getfield      #8                  // Field morque:Ljava/lang/ref/ReferenceQueue;
      14: invokevirtual #34                 // Method java/lang/ref/ReferenceQueue.poll:()Ljava/lang/ref/Reference;
      17: checkcast     #20                 // class org/apache/http/impl/client/cache/ResourceReference
      20: dup
      21: astore_1
      22: ifnull        62
      25: aload_0
      26: dup
      27: astore_2
      28: monitorenter
      29: aload_0
      30: getfield      #11                 // Field resources:Ljava/util/Set;
      33: aload_1
      34: invokeinterface #35,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      39: pop
      40: aload_2
      41: monitorexit
      42: goto          50
      45: astore_3
      46: aload_2
      47: monitorexit
      48: aload_3
      49: athrow
      50: aload_1
      51: invokevirtual #36                 // Method org/apache/http/impl/client/cache/ResourceReference.getResource:()Lorg/apache/http/client/cache/Resource;
      54: invokeinterface #37,  1           // InterfaceMethod org/apache/http/client/cache/Resource.dispose:()V
      59: goto          10
      62: return
    Exception table:
       from    to  target type
          29    42    45   any
          45    48    45   any

  public void shutdown();
    Code:
       0: aload_0
       1: getfield      #14                 // Field active:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iconst_1
       5: iconst_0
       6: invokevirtual #38                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
       9: ifeq          98
      12: aload_0
      13: dup
      14: astore_1
      15: monitorenter
      16: aload_0
      17: getfield      #5                  // Field entries:Lorg/apache/http/impl/client/cache/CacheMap;
      20: invokevirtual #39                 // Method org/apache/http/impl/client/cache/CacheMap.clear:()V
      23: aload_0
      24: getfield      #11                 // Field resources:Ljava/util/Set;
      27: invokeinterface #40,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      32: astore_2
      33: aload_2
      34: invokeinterface #41,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      39: ifeq          64
      42: aload_2
      43: invokeinterface #42,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      48: checkcast     #20                 // class org/apache/http/impl/client/cache/ResourceReference
      51: astore_3
      52: aload_3
      53: invokevirtual #36                 // Method org/apache/http/impl/client/cache/ResourceReference.getResource:()Lorg/apache/http/client/cache/Resource;
      56: invokeinterface #37,  1           // InterfaceMethod org/apache/http/client/cache/Resource.dispose:()V
      61: goto          33
      64: aload_0
      65: getfield      #11                 // Field resources:Ljava/util/Set;
      68: invokeinterface #43,  1           // InterfaceMethod java/util/Set.clear:()V
      73: aload_0
      74: getfield      #8                  // Field morque:Ljava/lang/ref/ReferenceQueue;
      77: invokevirtual #34                 // Method java/lang/ref/ReferenceQueue.poll:()Ljava/lang/ref/Reference;
      80: ifnull        86
      83: goto          73
      86: aload_1
      87: monitorexit
      88: goto          98
      91: astore        4
      93: aload_1
      94: monitorexit
      95: aload         4
      97: athrow
      98: return
    Exception table:
       from    to  target type
          16    88    91   any
          91    95    91   any

  public void close();
    Code:
       0: aload_0
       1: getfield      #14                 // Field active:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iconst_1
       5: iconst_0
       6: invokevirtual #38                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
       9: ifeq          64
      12: aload_0
      13: dup
      14: astore_1
      15: monitorenter
      16: aload_0
      17: getfield      #8                  // Field morque:Ljava/lang/ref/ReferenceQueue;
      20: invokevirtual #34                 // Method java/lang/ref/ReferenceQueue.poll:()Ljava/lang/ref/Reference;
      23: checkcast     #20                 // class org/apache/http/impl/client/cache/ResourceReference
      26: dup
      27: astore_2
      28: ifnull        54
      31: aload_0
      32: getfield      #11                 // Field resources:Ljava/util/Set;
      35: aload_2
      36: invokeinterface #35,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      41: pop
      42: aload_2
      43: invokevirtual #36                 // Method org/apache/http/impl/client/cache/ResourceReference.getResource:()Lorg/apache/http/client/cache/Resource;
      46: invokeinterface #37,  1           // InterfaceMethod org/apache/http/client/cache/Resource.dispose:()V
      51: goto          16
      54: aload_1
      55: monitorexit
      56: goto          64
      59: astore_3
      60: aload_1
      61: monitorexit
      62: aload_3
      63: athrow
      64: return
    Exception table:
       from    to  target type
          16    56    59   any
          59    62    59   any
}

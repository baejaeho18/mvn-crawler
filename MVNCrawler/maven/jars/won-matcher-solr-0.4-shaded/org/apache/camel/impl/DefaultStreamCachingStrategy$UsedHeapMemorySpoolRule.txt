Compiled from "DefaultStreamCachingStrategy.java"
final class org.apache.camel.impl.DefaultStreamCachingStrategy$UsedHeapMemorySpoolRule implements org.apache.camel.spi.StreamCachingStrategy$SpoolRule {
  private final java.lang.management.MemoryMXBean heapUsage;

  private final org.apache.camel.spi.StreamCachingStrategy$SpoolUsedHeapMemoryLimit limit;

  final org.apache.camel.impl.DefaultStreamCachingStrategy this$0;

  private org.apache.camel.impl.DefaultStreamCachingStrategy$UsedHeapMemorySpoolRule(org.apache.camel.impl.DefaultStreamCachingStrategy, org.apache.camel.spi.StreamCachingStrategy$SpoolUsedHeapMemoryLimit);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #28                 // Field this$0:Lorg/apache/camel/impl/DefaultStreamCachingStrategy;
       5: aload_0
       6: invokespecial #31                 // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #33                 // Field limit:Lorg/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit;
      14: aload_0
      15: invokestatic  #39                 // Method java/lang/management/ManagementFactory.getMemoryMXBean:()Ljava/lang/management/MemoryMXBean;
      18: putfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
      21: return

  public boolean shouldSpoolCache(long);
    Code:
       0: aload_0
       1: getfield      #28                 // Field this$0:Lorg/apache/camel/impl/DefaultStreamCachingStrategy;
       4: invokestatic  #49                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$500:(Lorg/apache/camel/impl/DefaultStreamCachingStrategy;)I
       7: ifle          227
      10: aload_0
      11: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
      14: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
      19: invokevirtual #61                 // Method java/lang/management/MemoryUsage.getUsed:()J
      22: l2d
      23: dstore_3
      24: aload_0
      25: getfield      #33                 // Field limit:Lorg/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit;
      28: getstatic     #64                 // Field org/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit.Committed:Lorg/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit;
      31: if_acmpne     50
      34: aload_0
      35: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
      38: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
      43: invokevirtual #67                 // Method java/lang/management/MemoryUsage.getCommitted:()J
      46: l2d
      47: goto          63
      50: aload_0
      51: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
      54: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
      59: invokevirtual #70                 // Method java/lang/management/MemoryUsage.getMax:()J
      62: l2d
      63: dstore        5
      65: dload_3
      66: dload         5
      68: ddiv
      69: ldc2_w        #71                 // double 100.0d
      72: dmul
      73: dstore        7
      75: dload         7
      77: d2i
      78: istore        9
      80: invokestatic  #76                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$400:()Lorg/slf4j/Logger;
      83: invokeinterface #82,  1           // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      88: ifeq          188
      91: aload_0
      92: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
      95: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
     100: invokevirtual #61                 // Method java/lang/management/MemoryUsage.getUsed:()J
     103: lstore        10
     105: aload_0
     106: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
     109: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
     114: invokevirtual #67                 // Method java/lang/management/MemoryUsage.getCommitted:()J
     117: lstore        12
     119: aload_0
     120: getfield      #41                 // Field heapUsage:Ljava/lang/management/MemoryMXBean;
     123: invokeinterface #55,  1           // InterfaceMethod java/lang/management/MemoryMXBean.getHeapMemoryUsage:()Ljava/lang/management/MemoryUsage;
     128: invokevirtual #70                 // Method java/lang/management/MemoryUsage.getMax:()J
     131: lstore        14
     133: invokestatic  #76                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$400:()Lorg/slf4j/Logger;
     136: ldc           #84                 // String Heap memory: [used={}M ({}%), committed={}M, max={}M]
     138: iconst_4
     139: anewarray     #4                  // class java/lang/Object
     142: dup
     143: iconst_0
     144: lload         10
     146: bipush        20
     148: lshr
     149: invokestatic  #90                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     152: aastore
     153: dup
     154: iconst_1
     155: iload         9
     157: invokestatic  #95                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     160: aastore
     161: dup
     162: iconst_2
     163: lload         12
     165: bipush        20
     167: lshr
     168: invokestatic  #90                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     171: aastore
     172: dup
     173: iconst_3
     174: lload         14
     176: bipush        20
     178: lshr
     179: invokestatic  #90                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     182: aastore
     183: invokeinterface #99,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
     188: iload         9
     190: aload_0
     191: getfield      #28                 // Field this$0:Lorg/apache/camel/impl/DefaultStreamCachingStrategy;
     194: invokestatic  #49                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$500:(Lorg/apache/camel/impl/DefaultStreamCachingStrategy;)I
     197: if_icmple     227
     200: invokestatic  #76                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$400:()Lorg/slf4j/Logger;
     203: ldc           #101                // String Should spool cache heap memory threshold {} > {} -> true
     205: iload         9
     207: invokestatic  #95                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     210: aload_0
     211: getfield      #28                 // Field this$0:Lorg/apache/camel/impl/DefaultStreamCachingStrategy;
     214: invokestatic  #49                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$500:(Lorg/apache/camel/impl/DefaultStreamCachingStrategy;)I
     217: invokestatic  #95                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     220: invokeinterface #104,  4          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     225: iconst_1
     226: ireturn
     227: iconst_0
     228: ireturn

  public java.lang.String toString();
    Code:
       0: new           #119                // class java/lang/StringBuilder
       3: dup
       4: invokespecial #120                // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #122                // String Spool >
       9: invokevirtual #126                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_0
      13: getfield      #28                 // Field this$0:Lorg/apache/camel/impl/DefaultStreamCachingStrategy;
      16: invokestatic  #49                 // Method org/apache/camel/impl/DefaultStreamCachingStrategy.access$500:(Lorg/apache/camel/impl/DefaultStreamCachingStrategy;)I
      19: invokevirtual #129                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      22: ldc           #131                // String % used of
      24: invokevirtual #126                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: aload_0
      28: getfield      #33                 // Field limit:Lorg/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit;
      31: invokevirtual #134                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      34: ldc           #136                // String  heap memory
      36: invokevirtual #126                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: invokevirtual #138                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: areturn

  org.apache.camel.impl.DefaultStreamCachingStrategy$UsedHeapMemorySpoolRule(org.apache.camel.impl.DefaultStreamCachingStrategy, org.apache.camel.spi.StreamCachingStrategy$SpoolUsedHeapMemoryLimit, org.apache.camel.impl.DefaultStreamCachingStrategy$1);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #141                // Method "<init>":(Lorg/apache/camel/impl/DefaultStreamCachingStrategy;Lorg/apache/camel/spi/StreamCachingStrategy$SpoolUsedHeapMemoryLimit;)V
       6: return
}

Compiled from "BatchProcessor.java"
class org.apache.camel.processor.BatchProcessor$BatchSender extends java.lang.Thread {
  private java.util.Queue<org.apache.camel.Exchange> queue;

  private java.util.concurrent.locks.Lock queueLock;

  private boolean exchangeEnqueued;

  private final java.util.Queue<java.lang.String> completionPredicateMatched;

  private java.util.concurrent.locks.Condition exchangeEnqueuedCondition;

  final org.apache.camel.processor.BatchProcessor this$0;

  public org.apache.camel.processor.BatchProcessor$BatchSender(org.apache.camel.processor.BatchProcessor);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
       5: aload_0
       6: aload_1
       7: invokestatic  #29                 // Method org/apache/camel/processor/BatchProcessor.access$000:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/CamelContext;
      10: invokeinterface #35,  1           // InterfaceMethod org/apache/camel/CamelContext.getExecutorServiceManager:()Lorg/apache/camel/spi/ExecutorServiceManager;
      15: ldc           #37                 // String Batch Sender
      17: invokeinterface #43,  2           // InterfaceMethod org/apache/camel/spi/ExecutorServiceManager.resolveThreadName:(Ljava/lang/String;)Ljava/lang/String;
      22: invokespecial #46                 // Method java/lang/Thread."<init>":(Ljava/lang/String;)V
      25: aload_0
      26: new           #48                 // class java/util/concurrent/locks/ReentrantLock
      29: dup
      30: invokespecial #51                 // Method java/util/concurrent/locks/ReentrantLock."<init>":()V
      33: putfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      36: aload_0
      37: new           #55                 // class java/util/concurrent/ConcurrentLinkedQueue
      40: dup
      41: invokespecial #56                 // Method java/util/concurrent/ConcurrentLinkedQueue."<init>":()V
      44: putfield      #58                 // Field completionPredicateMatched:Ljava/util/Queue;
      47: aload_0
      48: aload_0
      49: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      52: invokeinterface #64,  1           // InterfaceMethod java/util/concurrent/locks/Lock.newCondition:()Ljava/util/concurrent/locks/Condition;
      57: putfield      #66                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      60: aload_0
      61: new           #68                 // class java/util/LinkedList
      64: dup
      65: invokespecial #69                 // Method java/util/LinkedList."<init>":()V
      68: putfield      #71                 // Field queue:Ljava/util/Queue;
      71: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
       4: invokeinterface #81,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
       9: aload_0
      10: getfield      #83                 // Field exchangeEnqueued:Z
      13: ifne          56
      16: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      19: ldc           #89                 // String Waiting for new exchange to arrive or batchTimeout to occur after {} ms.
      21: aload_0
      22: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      25: invokestatic  #93                 // Method org/apache/camel/processor/BatchProcessor.access$100:(Lorg/apache/camel/processor/BatchProcessor;)J
      28: invokestatic  #99                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      31: invokeinterface #105,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      36: aload_0
      37: getfield      #66                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      40: aload_0
      41: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      44: invokestatic  #93                 // Method org/apache/camel/processor/BatchProcessor.access$100:(Lorg/apache/camel/processor/BatchProcessor;)J
      47: getstatic     #111                // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      50: invokeinterface #117,  4          // InterfaceMethod java/util/concurrent/locks/Condition.await:(JLjava/util/concurrent/TimeUnit;)Z
      55: pop
      56: aconst_null
      57: astore_1
      58: aload_0
      59: getfield      #58                 // Field completionPredicateMatched:Ljava/util/Queue;
      62: invokeinterface #123,  1          // InterfaceMethod java/util/Queue.isEmpty:()Z
      67: ifne          83
      70: aload_0
      71: getfield      #58                 // Field completionPredicateMatched:Ljava/util/Queue;
      74: invokeinterface #127,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      79: checkcast     #129                // class java/lang/String
      82: astore_1
      83: aload_1
      84: ifnonnull     94
      87: aload_0
      88: getfield      #83                 // Field exchangeEnqueued:Z
      91: ifne          143
      94: aload_1
      95: ifnull        111
      98: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     101: ldc           #131                // String Collecting exchanges to be aggregated triggered by completion predicate
     103: invokeinterface #133,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     108: goto          121
     111: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     114: ldc           #135                // String Collecting exchanges to be aggregated triggered by batch timeout
     116: invokeinterface #133,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     121: aload_0
     122: aload_0
     123: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     126: invokestatic  #139                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
     129: aload_0
     130: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     133: invokestatic  #143                // Method org/apache/camel/processor/BatchProcessor.access$400:(Lorg/apache/camel/processor/BatchProcessor;)I
     136: aload_1
     137: invokespecial #147                // Method drainQueueTo:(Ljava/util/Collection;ILjava/lang/String;)V
     140: goto          220
     143: aload_0
     144: iconst_0
     145: putfield      #83                 // Field exchangeEnqueued:Z
     148: iconst_0
     149: istore_2
     150: aload_0
     151: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     154: aload_0
     155: getfield      #71                 // Field queue:Ljava/util/Queue;
     158: invokeinterface #151,  1          // InterfaceMethod java/util/Queue.size:()I
     163: invokestatic  #155                // Method org/apache/camel/processor/BatchProcessor.access$500:(Lorg/apache/camel/processor/BatchProcessor;I)Z
     166: ifeq          193
     169: iconst_1
     170: istore_2
     171: aload_0
     172: aload_0
     173: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     176: invokestatic  #139                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
     179: aload_0
     180: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     183: invokestatic  #143                // Method org/apache/camel/processor/BatchProcessor.access$400:(Lorg/apache/camel/processor/BatchProcessor;)I
     186: aload_1
     187: invokespecial #147                // Method drainQueueTo:(Ljava/util/Collection;ILjava/lang/String;)V
     190: goto          150
     193: iload_2
     194: ifeq          207
     197: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
     200: ldc           #157                // String Collecting exchanges to be aggregated triggered by new exchanges received
     202: invokeinterface #133,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     207: aload_0
     208: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     211: invokestatic  #161                // Method org/apache/camel/processor/BatchProcessor.access$600:(Lorg/apache/camel/processor/BatchProcessor;)Z
     214: ifne          220
     217: goto          281
     220: aload_0
     221: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     224: invokeinterface #164,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     229: aload_0
     230: invokespecial #167                // Method sendExchanges:()V
     233: goto          250
     236: astore_2
     237: aload_0
     238: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     241: invokevirtual #171                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
     244: aload_2
     245: invokeinterface #177,  2          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/Throwable;)V
     250: aload_0
     251: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     254: invokeinterface #81,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
     259: goto          274
     262: astore_3
     263: aload_0
     264: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     267: invokeinterface #81,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
     272: aload_3
     273: athrow
     274: goto          281
     277: astore_1
     278: goto          291
     281: aload_0
     282: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
     285: invokevirtual #180                // Method org/apache/camel/processor/BatchProcessor.isRunAllowed:()Z
     288: ifne          9
     291: aload_0
     292: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     295: invokeinterface #164,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     300: goto          317
     303: astore        4
     305: aload_0
     306: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     309: invokeinterface #164,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     314: aload         4
     316: athrow
     317: return
    Exception table:
       from    to  target type
         229   233   236   Class java/lang/Throwable
         229   250   262   any
         262   263   262   any
           9   217   277   Class java/lang/InterruptedException
         220   274   277   Class java/lang/InterruptedException
           9   291   303   any
         303   305   303   any

  private void drainQueueTo(java.util.Collection<org.apache.camel.Exchange>, int, java.lang.String);
    Code:
       0: iconst_0
       1: istore        4
       3: iload         4
       5: iload_2
       6: if_icmpge     97
       9: aload_0
      10: getfield      #71                 // Field queue:Ljava/util/Queue;
      13: invokeinterface #127,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      18: checkcast     #191                // class org/apache/camel/Exchange
      21: astore        5
      23: aload         5
      25: ifnull        97
      28: aload_1
      29: aload         5
      31: invokeinterface #197,  2          // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      36: pop
      37: goto          70
      40: astore        6
      42: aload         5
      44: aload         6
      46: invokeinterface #200,  2          // InterfaceMethod org/apache/camel/Exchange.setException:(Ljava/lang/Throwable;)V
      51: goto          70
      54: astore        6
      56: aload_0
      57: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      60: invokevirtual #171                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
      63: aload         6
      65: invokeinterface #177,  2          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/Throwable;)V
      70: aload_3
      71: ifnull        91
      74: aload_3
      75: aload         5
      77: invokeinterface #204,  1          // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      82: invokevirtual #207                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      85: ifeq          91
      88: goto          97
      91: iinc          4, 1
      94: goto          3
      97: return
    Exception table:
       from    to  target type
          28    37    40   Class java/lang/Exception
          28    37    54   Class java/lang/Throwable

  public void cancel();
    Code:
       0: aload_0
       1: invokevirtual #220                // Method interrupt:()V
       4: return

  public void enqueueExchange(org.apache.camel.Exchange);
    Code:
       0: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
       3: ldc           #224                // String Received exchange to be batched: {}
       5: aload_1
       6: invokeinterface #227,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      11: aload_0
      12: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
      15: invokeinterface #81,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      20: aload_0
      21: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      24: invokestatic  #231                // Method org/apache/camel/processor/BatchProcessor.access$700:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/Predicate;
      27: ifnull        75
      30: aload_0
      31: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      34: invokestatic  #231                // Method org/apache/camel/processor/BatchProcessor.access$700:(Lorg/apache/camel/processor/BatchProcessor;)Lorg/apache/camel/Predicate;
      37: aload_1
      38: invokeinterface #237,  2          // InterfaceMethod org/apache/camel/Predicate.matches:(Lorg/apache/camel/Exchange;)Z
      43: istore_2
      44: iload_2
      45: ifeq          75
      48: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      51: ldc           #239                // String Exchange matched completion predicate: {}
      53: aload_1
      54: invokeinterface #105,  3          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      59: aload_0
      60: getfield      #58                 // Field completionPredicateMatched:Ljava/util/Queue;
      63: aload_1
      64: invokeinterface #204,  1          // InterfaceMethod org/apache/camel/Exchange.getExchangeId:()Ljava/lang/String;
      69: invokeinterface #240,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      74: pop
      75: aload_0
      76: getfield      #71                 // Field queue:Ljava/util/Queue;
      79: aload_1
      80: invokeinterface #240,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
      85: pop
      86: aload_0
      87: iconst_1
      88: putfield      #83                 // Field exchangeEnqueued:Z
      91: aload_0
      92: getfield      #66                 // Field exchangeEnqueuedCondition:Ljava/util/concurrent/locks/Condition;
      95: invokeinterface #243,  1          // InterfaceMethod java/util/concurrent/locks/Condition.signal:()V
     100: aload_0
     101: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     104: invokeinterface #164,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     109: goto          124
     112: astore_3
     113: aload_0
     114: getfield      #53                 // Field queueLock:Ljava/util/concurrent/locks/Lock;
     117: invokeinterface #164,  1          // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     122: aload_3
     123: athrow
     124: return
    Exception table:
       from    to  target type
          20   100   112   any
         112   113   112   any

  private void sendExchanges() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
       4: invokestatic  #139                // Method org/apache/camel/processor/BatchProcessor.access$300:(Lorg/apache/camel/processor/BatchProcessor;)Ljava/util/Collection;
       7: invokeinterface #248,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      12: astore_1
      13: aload_1
      14: invokeinterface #253,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      19: ifeq          98
      22: aload_1
      23: invokeinterface #256,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      28: checkcast     #191                // class org/apache/camel/Exchange
      31: astore_2
      32: aload_1
      33: invokeinterface #259,  1          // InterfaceMethod java/util/Iterator.remove:()V
      38: invokestatic  #87                 // Method org/apache/camel/processor/BatchProcessor.access$200:()Lorg/slf4j/Logger;
      41: ldc_w         #261                // String Sending aggregated exchange: {}
      44: aload_2
      45: invokeinterface #227,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      50: aload_0
      51: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      54: aload_2
      55: invokevirtual #264                // Method org/apache/camel/processor/BatchProcessor.processExchange:(Lorg/apache/camel/Exchange;)V
      58: goto          95
      61: astore_3
      62: aload_0
      63: getfield      #25                 // Field this$0:Lorg/apache/camel/processor/BatchProcessor;
      66: invokevirtual #171                // Method org/apache/camel/processor/BatchProcessor.getExceptionHandler:()Lorg/apache/camel/spi/ExceptionHandler;
      69: new           #266                // class java/lang/StringBuilder
      72: dup
      73: invokespecial #267                // Method java/lang/StringBuilder."<init>":()V
      76: ldc_w         #269                // String Error processing aggregated exchange:
      79: invokevirtual #273                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      82: aload_2
      83: invokevirtual #276                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      86: invokevirtual #279                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      89: aload_3
      90: invokeinterface #282,  3          // InterfaceMethod org/apache/camel/spi/ExceptionHandler.handleException:(Ljava/lang/String;Ljava/lang/Throwable;)V
      95: goto          13
      98: return
    Exception table:
       from    to  target type
          38    58    61   Class java/lang/Throwable
}

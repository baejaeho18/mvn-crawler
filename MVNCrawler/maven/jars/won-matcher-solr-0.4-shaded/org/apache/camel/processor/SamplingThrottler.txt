Compiled from "SamplingThrottler.java"
public class org.apache.camel.processor.SamplingThrottler extends org.apache.camel.processor.DelegateAsyncProcessor {
  protected final org.slf4j.Logger log;

  private long messageFrequency;

  private long currentMessageCount;

  private long samplePeriod;

  private long periodInMillis;

  private java.util.concurrent.TimeUnit units;

  private long timeOfLastExchange;

  private org.apache.camel.processor.StopProcessor stopper;

  private final java.lang.Object calculationLock;

  private org.apache.camel.processor.SamplingThrottler$SampleStats sampled;

  public org.apache.camel.processor.SamplingThrottler(org.apache.camel.Processor, long);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #31                 // Method org/apache/camel/processor/DelegateAsyncProcessor."<init>":(Lorg/apache/camel/Processor;)V
       5: aload_0
       6: aload_0
       7: invokevirtual #37                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      10: invokestatic  #43                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      13: putfield      #45                 // Field log:Lorg/slf4j/Logger;
      16: aload_0
      17: new           #47                 // class org/apache/camel/processor/StopProcessor
      20: dup
      21: invokespecial #50                 // Method org/apache/camel/processor/StopProcessor."<init>":()V
      24: putfield      #52                 // Field stopper:Lorg/apache/camel/processor/StopProcessor;
      27: aload_0
      28: new           #33                 // class java/lang/Object
      31: dup
      32: invokespecial #53                 // Method java/lang/Object."<init>":()V
      35: putfield      #55                 // Field calculationLock:Ljava/lang/Object;
      38: aload_0
      39: new           #9                  // class org/apache/camel/processor/SamplingThrottler$SampleStats
      42: dup
      43: aconst_null
      44: invokespecial #58                 // Method org/apache/camel/processor/SamplingThrottler$SampleStats."<init>":(Lorg/apache/camel/processor/SamplingThrottler$1;)V
      47: putfield      #60                 // Field sampled:Lorg/apache/camel/processor/SamplingThrottler$SampleStats;
      50: lload_2
      51: lconst_0
      52: lcmp
      53: ifgt          66
      56: new           #62                 // class java/lang/IllegalArgumentException
      59: dup
      60: ldc           #64                 // String A positive value is required for the sampling message frequency
      62: invokespecial #67                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      65: athrow
      66: aload_0
      67: lload_2
      68: putfield      #71                 // Field messageFrequency:J
      71: return

  public org.apache.camel.processor.SamplingThrottler(org.apache.camel.Processor, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #31                 // Method org/apache/camel/processor/DelegateAsyncProcessor."<init>":(Lorg/apache/camel/Processor;)V
       5: aload_0
       6: aload_0
       7: invokevirtual #37                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      10: invokestatic  #43                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      13: putfield      #45                 // Field log:Lorg/slf4j/Logger;
      16: aload_0
      17: new           #47                 // class org/apache/camel/processor/StopProcessor
      20: dup
      21: invokespecial #50                 // Method org/apache/camel/processor/StopProcessor."<init>":()V
      24: putfield      #52                 // Field stopper:Lorg/apache/camel/processor/StopProcessor;
      27: aload_0
      28: new           #33                 // class java/lang/Object
      31: dup
      32: invokespecial #53                 // Method java/lang/Object."<init>":()V
      35: putfield      #55                 // Field calculationLock:Ljava/lang/Object;
      38: aload_0
      39: new           #9                  // class org/apache/camel/processor/SamplingThrottler$SampleStats
      42: dup
      43: aconst_null
      44: invokespecial #58                 // Method org/apache/camel/processor/SamplingThrottler$SampleStats."<init>":(Lorg/apache/camel/processor/SamplingThrottler$1;)V
      47: putfield      #60                 // Field sampled:Lorg/apache/camel/processor/SamplingThrottler$SampleStats;
      50: lload_2
      51: lconst_0
      52: lcmp
      53: ifgt          66
      56: new           #62                 // class java/lang/IllegalArgumentException
      59: dup
      60: ldc           #78                 // String A positive value is required for the sampling period
      62: invokespecial #67                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      65: athrow
      66: aload         4
      68: ifnonnull     81
      71: new           #62                 // class java/lang/IllegalArgumentException
      74: dup
      75: ldc           #82                 // String A invalid null value was supplied for the units of the sampling period
      77: invokespecial #67                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      80: athrow
      81: aload_0
      82: lload_2
      83: putfield      #84                 // Field samplePeriod:J
      86: aload_0
      87: aload         4
      89: putfield      #86                 // Field units:Ljava/util/concurrent/TimeUnit;
      92: aload_0
      93: aload         4
      95: lload_2
      96: invokevirtual #90                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      99: putfield      #92                 // Field periodInMillis:J
     102: return

  public java.lang.String toString();
    Code:
       0: aload_0
       1: getfield      #71                 // Field messageFrequency:J
       4: lconst_0
       5: lcmp
       6: ifle          49
       9: new           #96                 // class java/lang/StringBuilder
      12: dup
      13: invokespecial #97                 // Method java/lang/StringBuilder."<init>":()V
      16: ldc           #99                 // String SamplingThrottler[1 exchange per:
      18: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: aload_0
      22: getfield      #71                 // Field messageFrequency:J
      25: invokevirtual #106                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      28: ldc           #108                // String  messages received ->
      30: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: aload_0
      34: invokevirtual #112                // Method getProcessor:()Lorg/apache/camel/AsyncProcessor;
      37: invokevirtual #115                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      40: ldc           #117                // String ]
      42: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      45: invokevirtual #119                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      48: areturn
      49: new           #96                 // class java/lang/StringBuilder
      52: dup
      53: invokespecial #97                 // Method java/lang/StringBuilder."<init>":()V
      56: ldc           #99                 // String SamplingThrottler[1 exchange per:
      58: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: aload_0
      62: getfield      #84                 // Field samplePeriod:J
      65: invokevirtual #106                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      68: ldc           #121                // String
      70: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      73: aload_0
      74: getfield      #86                 // Field units:Ljava/util/concurrent/TimeUnit;
      77: invokevirtual #122                // Method java/util/concurrent/TimeUnit.toString:()Ljava/lang/String;
      80: getstatic     #128                // Field java/util/Locale.ENGLISH:Ljava/util/Locale;
      83: invokevirtual #134                // Method java/lang/String.toLowerCase:(Ljava/util/Locale;)Ljava/lang/String;
      86: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: ldc           #136                // String  ->
      91: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      94: aload_0
      95: invokevirtual #112                // Method getProcessor:()Lorg/apache/camel/AsyncProcessor;
      98: invokevirtual #115                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     101: ldc           #117                // String ]
     103: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     106: invokevirtual #119                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     109: areturn

  public java.lang.String getTraceLabel();
    Code:
       0: aload_0
       1: getfield      #71                 // Field messageFrequency:J
       4: lconst_0
       5: lcmp
       6: ifle          37
       9: new           #96                 // class java/lang/StringBuilder
      12: dup
      13: invokespecial #97                 // Method java/lang/StringBuilder."<init>":()V
      16: ldc           #139                // String samplingThrottler[1 exchange per:
      18: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: aload_0
      22: getfield      #71                 // Field messageFrequency:J
      25: invokevirtual #106                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      28: ldc           #141                // String  messages received]
      30: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: invokevirtual #119                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: areturn
      37: new           #96                 // class java/lang/StringBuilder
      40: dup
      41: invokespecial #97                 // Method java/lang/StringBuilder."<init>":()V
      44: ldc           #139                // String samplingThrottler[1 exchange per:
      46: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      49: aload_0
      50: getfield      #84                 // Field samplePeriod:J
      53: invokevirtual #106                // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      56: ldc           #121                // String
      58: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: aload_0
      62: getfield      #86                 // Field units:Ljava/util/concurrent/TimeUnit;
      65: invokevirtual #122                // Method java/util/concurrent/TimeUnit.toString:()Ljava/lang/String;
      68: getstatic     #128                // Field java/util/Locale.ENGLISH:Ljava/util/Locale;
      71: invokevirtual #134                // Method java/lang/String.toLowerCase:(Ljava/util/Locale;)Ljava/lang/String;
      74: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      77: ldc           #117                // String ]
      79: invokevirtual #103                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      82: invokevirtual #119                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      85: areturn

  public boolean process(org.apache.camel.Exchange, org.apache.camel.AsyncCallback);
    Code:
       0: iconst_0
       1: istore_3
       2: aload_0
       3: getfield      #55                 // Field calculationLock:Ljava/lang/Object;
       6: dup
       7: astore        4
       9: monitorenter
      10: aload_0
      11: getfield      #71                 // Field messageFrequency:J
      14: lconst_0
      15: lcmp
      16: ifle          48
      19: aload_0
      20: dup
      21: getfield      #147                // Field currentMessageCount:J
      24: lconst_1
      25: ladd
      26: putfield      #147                // Field currentMessageCount:J
      29: aload_0
      30: getfield      #147                // Field currentMessageCount:J
      33: aload_0
      34: getfield      #71                 // Field messageFrequency:J
      37: lrem
      38: lconst_0
      39: lcmp
      40: ifne          135
      43: iconst_1
      44: istore_3
      45: goto          135
      48: invokestatic  #153                // Method java/lang/System.currentTimeMillis:()J
      51: lstore        5
      53: lload         5
      55: aload_0
      56: getfield      #155                // Field timeOfLastExchange:J
      59: aload_0
      60: getfield      #92                 // Field periodInMillis:J
      63: ladd
      64: lcmp
      65: iflt          107
      68: iconst_1
      69: istore_3
      70: aload_0
      71: getfield      #45                 // Field log:Lorg/slf4j/Logger;
      74: invokeinterface #161,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
      79: ifeq          98
      82: aload_0
      83: getfield      #45                 // Field log:Lorg/slf4j/Logger;
      86: aload_0
      87: getfield      #60                 // Field sampled:Lorg/apache/camel/processor/SamplingThrottler$SampleStats;
      90: invokevirtual #164                // Method org/apache/camel/processor/SamplingThrottler$SampleStats.sample:()Ljava/lang/String;
      93: invokeinterface #167,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
      98: aload_0
      99: lload         5
     101: putfield      #155                // Field timeOfLastExchange:J
     104: goto          135
     107: aload_0
     108: getfield      #45                 // Field log:Lorg/slf4j/Logger;
     111: invokeinterface #161,  1          // InterfaceMethod org/slf4j/Logger.isTraceEnabled:()Z
     116: ifeq          135
     119: aload_0
     120: getfield      #45                 // Field log:Lorg/slf4j/Logger;
     123: aload_0
     124: getfield      #60                 // Field sampled:Lorg/apache/camel/processor/SamplingThrottler$SampleStats;
     127: invokevirtual #170                // Method org/apache/camel/processor/SamplingThrottler$SampleStats.drop:()Ljava/lang/String;
     130: invokeinterface #167,  2          // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;)V
     135: aload         4
     137: monitorexit
     138: goto          149
     141: astore        7
     143: aload         4
     145: monitorexit
     146: aload         7
     148: athrow
     149: iload_3
     150: ifeq          165
     153: aload_0
     154: getfield      #175                // Field processor:Lorg/apache/camel/AsyncProcessor;
     157: aload_1
     158: aload_2
     159: invokeinterface #179,  3          // InterfaceMethod org/apache/camel/AsyncProcessor.process:(Lorg/apache/camel/Exchange;Lorg/apache/camel/AsyncCallback;)Z
     164: ireturn
     165: aload_0
     166: getfield      #52                 // Field stopper:Lorg/apache/camel/processor/StopProcessor;
     169: aload_1
     170: invokevirtual #182                // Method org/apache/camel/processor/StopProcessor.process:(Lorg/apache/camel/Exchange;)V
     173: goto          186
     176: astore        4
     178: aload_1
     179: aload         4
     181: invokeinterface #188,  2          // InterfaceMethod org/apache/camel/Exchange.setException:(Ljava/lang/Throwable;)V
     186: aload_2
     187: iconst_1
     188: invokeinterface #194,  2          // InterfaceMethod org/apache/camel/AsyncCallback.done:(Z)V
     193: iconst_1
     194: ireturn
    Exception table:
       from    to  target type
          10   138   141   any
         141   146   141   any
         165   173   176   Class java/lang/Exception
}

Compiled from "GlobalTrafficShapingHandler.java"
public class org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler extends org.jboss.netty.handler.traffic.AbstractTrafficShapingHandler {
  private final java.util.concurrent.ConcurrentMap<java.lang.Integer, org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler$PerChannel> channelQueues;

  private final java.util.concurrent.atomic.AtomicLong queuesSize;

  long maxGlobalWriteSize;

  void createGlobalTrafficCounter();
    Code:
       0: aload_0
       1: getfield      #2                  // Field timer:Lorg/jboss/netty/util/Timer;
       4: ifnull        35
       7: new           #3                  // class org/jboss/netty/handler/traffic/TrafficCounter
      10: dup
      11: aload_0
      12: aload_0
      13: getfield      #2                  // Field timer:Lorg/jboss/netty/util/Timer;
      16: ldc           #4                  // String GlobalTC
      18: aload_0
      19: getfield      #5                  // Field checkInterval:J
      22: invokespecial #6                  // Method org/jboss/netty/handler/traffic/TrafficCounter."<init>":(Lorg/jboss/netty/handler/traffic/AbstractTrafficShapingHandler;Lorg/jboss/netty/util/Timer;Ljava/lang/String;J)V
      25: astore_1
      26: aload_0
      27: aload_1
      28: invokevirtual #7                  // Method setTrafficCounter:(Lorg/jboss/netty/handler/traffic/TrafficCounter;)V
      31: aload_1
      32: invokevirtual #8                  // Method org/jboss/netty/handler/traffic/TrafficCounter.start:()V
      35: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.Timer, long, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: lload         4
       5: lload         6
       7: invokespecial #9                  // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/Timer;JJJ)V
      10: aload_0
      11: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      14: dup
      15: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      18: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      21: aload_0
      22: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      25: dup
      26: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      29: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      32: aload_0
      33: ldc2_w        #16                 // long 419430400l
      36: putfield      #18                 // Field maxGlobalWriteSize:J
      39: aload_0
      40: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      43: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.Timer, long, long, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: lload         4
       5: lload         6
       7: lload         8
       9: invokespecial #20                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/Timer;JJJJ)V
      12: aload_0
      13: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      16: dup
      17: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      20: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      23: aload_0
      24: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      27: dup
      28: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      31: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      34: aload_0
      35: ldc2_w        #16                 // long 419430400l
      38: putfield      #18                 // Field maxGlobalWriteSize:J
      41: aload_0
      42: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      45: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.Timer, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: lload         4
       5: invokespecial #21                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/Timer;JJ)V
       8: aload_0
       9: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      12: dup
      13: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      16: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      19: aload_0
      20: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      23: dup
      24: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      27: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      30: aload_0
      31: ldc2_w        #16                 // long 419430400l
      34: putfield      #18                 // Field maxGlobalWriteSize:J
      37: aload_0
      38: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      41: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.Timer, long);
    Code:
       0: aload_0
       1: aload_1
       2: lload_2
       3: invokespecial #22                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/Timer;J)V
       6: aload_0
       7: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      10: dup
      11: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      14: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      17: aload_0
      18: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      21: dup
      22: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      25: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      28: aload_0
      29: ldc2_w        #16                 // long 419430400l
      32: putfield      #18                 // Field maxGlobalWriteSize:J
      35: aload_0
      36: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      39: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.Timer);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #23                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/Timer;)V
       5: aload_0
       6: new           #10                 // class java/util/concurrent/ConcurrentHashMap
       9: dup
      10: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      13: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      16: aload_0
      17: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      20: dup
      21: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      24: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      27: aload_0
      28: ldc2_w        #16                 // long 419430400l
      31: putfield      #18                 // Field maxGlobalWriteSize:J
      34: aload_0
      35: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      38: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.ObjectSizeEstimator, org.jboss.netty.util.Timer, long, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: lload         5
       6: lload         7
       8: invokespecial #24                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/ObjectSizeEstimator;Lorg/jboss/netty/util/Timer;JJJ)V
      11: aload_0
      12: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      15: dup
      16: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      19: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      22: aload_0
      23: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      26: dup
      27: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      30: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      33: aload_0
      34: ldc2_w        #16                 // long 419430400l
      37: putfield      #18                 // Field maxGlobalWriteSize:J
      40: aload_0
      41: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      44: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.ObjectSizeEstimator, org.jboss.netty.util.Timer, long, long, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: lload         5
       6: lload         7
       8: lload         9
      10: invokespecial #25                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/ObjectSizeEstimator;Lorg/jboss/netty/util/Timer;JJJJ)V
      13: aload_0
      14: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      17: dup
      18: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      21: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      24: aload_0
      25: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      28: dup
      29: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      32: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      35: aload_0
      36: ldc2_w        #16                 // long 419430400l
      39: putfield      #18                 // Field maxGlobalWriteSize:J
      42: aload_0
      43: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      46: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.ObjectSizeEstimator, org.jboss.netty.util.Timer, long, long);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: lload         5
       6: invokespecial #26                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/ObjectSizeEstimator;Lorg/jboss/netty/util/Timer;JJ)V
       9: aload_0
      10: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      13: dup
      14: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      17: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      20: aload_0
      21: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      24: dup
      25: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      28: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      31: aload_0
      32: ldc2_w        #16                 // long 419430400l
      35: putfield      #18                 // Field maxGlobalWriteSize:J
      38: aload_0
      39: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      42: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.ObjectSizeEstimator, org.jboss.netty.util.Timer, long);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: invokespecial #27                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/ObjectSizeEstimator;Lorg/jboss/netty/util/Timer;J)V
       7: aload_0
       8: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      11: dup
      12: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      15: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      18: aload_0
      19: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      22: dup
      23: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      26: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      29: aload_0
      30: ldc2_w        #16                 // long 419430400l
      33: putfield      #18                 // Field maxGlobalWriteSize:J
      36: aload_0
      37: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      40: return

  public org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler(org.jboss.netty.util.ObjectSizeEstimator, org.jboss.netty.util.Timer);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #28                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler."<init>":(Lorg/jboss/netty/util/ObjectSizeEstimator;Lorg/jboss/netty/util/Timer;)V
       6: aload_0
       7: new           #10                 // class java/util/concurrent/ConcurrentHashMap
      10: dup
      11: invokespecial #11                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      14: putfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      17: aload_0
      18: new           #13                 // class java/util/concurrent/atomic/AtomicLong
      21: dup
      22: invokespecial #14                 // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      25: putfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      28: aload_0
      29: ldc2_w        #16                 // long 419430400l
      32: putfield      #18                 // Field maxGlobalWriteSize:J
      35: aload_0
      36: invokevirtual #19                 // Method createGlobalTrafficCounter:()V
      39: return

  public long getMaxGlobalWriteSize();
    Code:
       0: aload_0
       1: getfield      #18                 // Field maxGlobalWriteSize:J
       4: lreturn

  public void setMaxGlobalWriteSize(long);
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #18                 // Field maxGlobalWriteSize:J
       5: return

  public long queuesSize();
    Code:
       0: aload_0
       1: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #29                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
       7: lreturn

  private synchronized org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler$PerChannel getOrSetPerChannel(org.jboss.netty.channel.ChannelHandlerContext);
    Code:
       0: aload_1
       1: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
       6: invokevirtual #31                 // Method java/lang/Object.hashCode:()I
       9: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: astore_2
      13: aload_0
      14: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      17: aload_2
      18: invokeinterface #33,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      23: checkcast     #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      26: astore_3
      27: aload_3
      28: ifnonnull     88
      31: new           #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      34: dup
      35: aconst_null
      36: invokespecial #35                 // Method org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel."<init>":(Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$1;)V
      39: astore_3
      40: aload_3
      41: new           #36                 // class java/util/LinkedList
      44: dup
      45: invokespecial #37                 // Method java/util/LinkedList."<init>":()V
      48: putfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      51: aload_3
      52: aload_1
      53: putfield      #39                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.ctx:Lorg/jboss/netty/channel/ChannelHandlerContext;
      56: aload_3
      57: lconst_0
      58: putfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
      61: aload_3
      62: invokestatic  #41                 // Method org/jboss/netty/handler/traffic/TrafficCounter.milliSecondFromNano:()J
      65: putfield      #42                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastReadTimestamp:J
      68: aload_3
      69: aload_3
      70: getfield      #42                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastReadTimestamp:J
      73: putfield      #43                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastWriteTimestamp:J
      76: aload_0
      77: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      80: aload_2
      81: aload_3
      82: invokeinterface #44,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      87: pop
      88: aload_3
      89: areturn

  long checkWaitReadTime(org.jboss.netty.channel.ChannelHandlerContext, long, long);
    Code:
       0: aload_1
       1: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
       6: invokevirtual #31                 // Method java/lang/Object.hashCode:()I
       9: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: astore        6
      14: aload_0
      15: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      18: aload         6
      20: invokeinterface #33,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      25: checkcast     #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      28: astore        7
      30: aload         7
      32: ifnull        67
      35: lload_2
      36: aload_0
      37: getfield      #45                 // Field maxTime:J
      40: lcmp
      41: ifle          67
      44: lload         4
      46: lload_2
      47: ladd
      48: aload         7
      50: getfield      #42                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastReadTimestamp:J
      53: lsub
      54: aload_0
      55: getfield      #45                 // Field maxTime:J
      58: lcmp
      59: ifle          67
      62: aload_0
      63: getfield      #45                 // Field maxTime:J
      66: lstore_2
      67: lload_2
      68: lreturn

  void informReadOperation(org.jboss.netty.channel.ChannelHandlerContext, long);
    Code:
       0: aload_1
       1: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
       6: invokevirtual #31                 // Method java/lang/Object.hashCode:()I
       9: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: astore        4
      14: aload_0
      15: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      18: aload         4
      20: invokeinterface #33,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      25: checkcast     #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      28: astore        5
      30: aload         5
      32: ifnull        41
      35: aload         5
      37: lload_2
      38: putfield      #42                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastReadTimestamp:J
      41: return

  void submitWrite(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.MessageEvent, long, long, long) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #46                 // Method getOrSetPerChannel:(Lorg/jboss/netty/channel/ChannelHandlerContext;)Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel;
       5: astore        9
       7: iconst_0
       8: istore        13
      10: aload_1
      11: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
      16: astore        14
      18: aload         9
      20: dup
      21: astore        15
      23: monitorenter
      24: lload         5
      26: lconst_0
      27: lcmp
      28: ifne          91
      31: aload         9
      33: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      36: invokeinterface #47,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      41: ifeq          91
      44: aload         14
      46: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
      51: ifne          58
      54: aload         15
      56: monitorexit
      57: return
      58: aload_0
      59: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
      62: ifnull        73
      65: aload_0
      66: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
      69: lload_3
      70: invokevirtual #50                 // Method org/jboss/netty/handler/traffic/TrafficCounter.bytesRealWriteFlowControl:(J)V
      73: aload_1
      74: aload_2
      75: invokeinterface #51,  2           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.sendDownstream:(Lorg/jboss/netty/channel/ChannelEvent;)V
      80: aload         9
      82: lload         7
      84: putfield      #43                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastWriteTimestamp:J
      87: aload         15
      89: monitorexit
      90: return
      91: lload         5
      93: lstore        10
      95: lload         10
      97: aload_0
      98: getfield      #45                 // Field maxTime:J
     101: lcmp
     102: ifle          130
     105: lload         7
     107: lload         10
     109: ladd
     110: aload         9
     112: getfield      #43                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastWriteTimestamp:J
     115: lsub
     116: aload_0
     117: getfield      #45                 // Field maxTime:J
     120: lcmp
     121: ifle          130
     124: aload_0
     125: getfield      #45                 // Field maxTime:J
     128: lstore        10
     130: aload_0
     131: getfield      #2                  // Field timer:Lorg/jboss/netty/util/Timer;
     134: ifnonnull     193
     137: lload         10
     139: invokestatic  #52                 // Method java/lang/Thread.sleep:(J)V
     142: aload_1
     143: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
     148: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
     153: ifne          160
     156: aload         15
     158: monitorexit
     159: return
     160: aload_0
     161: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
     164: ifnull        175
     167: aload_0
     168: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
     171: lload_3
     172: invokevirtual #50                 // Method org/jboss/netty/handler/traffic/TrafficCounter.bytesRealWriteFlowControl:(J)V
     175: aload_1
     176: aload_2
     177: invokeinterface #51,  2           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.sendDownstream:(Lorg/jboss/netty/channel/ChannelEvent;)V
     182: aload         9
     184: lload         7
     186: putfield      #43                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastWriteTimestamp:J
     189: aload         15
     191: monitorexit
     192: return
     193: aload_1
     194: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
     199: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
     204: ifne          211
     207: aload         15
     209: monitorexit
     210: return
     211: new           #53                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend
     214: dup
     215: lload         10
     217: lload         7
     219: ladd
     220: aload_2
     221: lload_3
     222: aconst_null
     223: invokespecial #54                 // Method org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend."<init>":(JLorg/jboss/netty/channel/MessageEvent;JLorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$1;)V
     226: astore        12
     228: aload         9
     230: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
     233: aload         12
     235: invokeinterface #55,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     240: pop
     241: aload         9
     243: dup
     244: getfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
     247: lload_3
     248: ladd
     249: putfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
     252: aload_0
     253: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
     256: lload_3
     257: invokevirtual #56                 // Method java/util/concurrent/atomic/AtomicLong.addAndGet:(J)J
     260: pop2
     261: aload_0
     262: aload_1
     263: lload         10
     265: aload         9
     267: getfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
     270: invokevirtual #57                 // Method checkWriteSuspend:(Lorg/jboss/netty/channel/ChannelHandlerContext;JJ)V
     273: aload_0
     274: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
     277: invokevirtual #29                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
     280: aload_0
     281: getfield      #18                 // Field maxGlobalWriteSize:J
     284: lcmp
     285: ifle          291
     288: iconst_1
     289: istore        13
     291: aload         15
     293: monitorexit
     294: goto          305
     297: astore        16
     299: aload         15
     301: monitorexit
     302: aload         16
     304: athrow
     305: iload         13
     307: ifeq          316
     310: aload_0
     311: aload_1
     312: iconst_0
     313: invokevirtual #58                 // Method setWritable:(Lorg/jboss/netty/channel/ChannelHandlerContext;Z)V
     316: aload         12
     318: getfield      #59                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend.relativeTimeAction:J
     321: lstore        15
     323: aload         9
     325: astore        17
     327: aload_0
     328: getfield      #2                  // Field timer:Lorg/jboss/netty/util/Timer;
     331: new           #60                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$1
     334: dup
     335: aload_0
     336: aload_1
     337: aload         17
     339: lload         15
     341: invokespecial #61                 // Method org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$1."<init>":(Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler;Lorg/jboss/netty/channel/ChannelHandlerContext;Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel;J)V
     344: lload         10
     346: getstatic     #62                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     349: invokeinterface #63,  5           // InterfaceMethod org/jboss/netty/util/Timer.newTimeout:(Lorg/jboss/netty/util/TimerTask;JLjava/util/concurrent/TimeUnit;)Lorg/jboss/netty/util/Timeout;
     354: pop
     355: return
    Exception table:
       from    to  target type
          24    57   297   any
          58    90   297   any
          91   159   297   any
         160   192   297   any
         193   210   297   any
         211   294   297   any
         297   302   297   any

  private void sendAllValid(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler$PerChannel, long) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
       6: astore        5
       8: aload         5
      10: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
      15: ifne          19
      18: return
      19: aload_2
      20: dup
      21: astore        6
      23: monitorenter
      24: aload_2
      25: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      28: invokeinterface #47,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      33: ifne          156
      36: aload_2
      37: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      40: iconst_0
      41: invokeinterface #64,  2           // InterfaceMethod java/util/List.remove:(I)Ljava/lang/Object;
      46: checkcast     #53                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend
      49: astore        7
      51: aload         7
      53: getfield      #59                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend.relativeTimeAction:J
      56: lload_3
      57: lcmp
      58: ifgt          138
      61: aload         5
      63: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
      68: ifne          74
      71: goto          156
      74: aload         7
      76: getfield      #65                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend.size:J
      79: lstore        8
      81: aload_0
      82: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
      85: ifnull        97
      88: aload_0
      89: getfield      #49                 // Field trafficCounter:Lorg/jboss/netty/handler/traffic/TrafficCounter;
      92: lload         8
      94: invokevirtual #50                 // Method org/jboss/netty/handler/traffic/TrafficCounter.bytesRealWriteFlowControl:(J)V
      97: aload_2
      98: dup
      99: getfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
     102: lload         8
     104: lsub
     105: putfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
     108: aload_0
     109: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
     112: lload         8
     114: lneg
     115: invokevirtual #56                 // Method java/util/concurrent/atomic/AtomicLong.addAndGet:(J)J
     118: pop2
     119: aload_1
     120: aload         7
     122: getfield      #66                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend.toSend:Lorg/jboss/netty/channel/MessageEvent;
     125: invokeinterface #51,  2           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.sendDownstream:(Lorg/jboss/netty/channel/ChannelEvent;)V
     130: aload_2
     131: lload_3
     132: putfield      #43                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.lastWriteTimestamp:J
     135: goto          153
     138: aload_2
     139: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
     142: iconst_0
     143: aload         7
     145: invokeinterface #67,  3           // InterfaceMethod java/util/List.add:(ILjava/lang/Object;)V
     150: goto          156
     153: goto          24
     156: aload_2
     157: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
     160: invokeinterface #47,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     165: ifeq          173
     168: aload_0
     169: aload_1
     170: invokevirtual #68                 // Method releaseWriteSuspended:(Lorg/jboss/netty/channel/ChannelHandlerContext;)V
     173: aload         6
     175: monitorexit
     176: goto          187
     179: astore        10
     181: aload         6
     183: monitorexit
     184: aload         10
     186: athrow
     187: return
    Exception table:
       from    to  target type
          24   176   179   any
         179   184   179   any

  public void channelConnected(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelStateEvent) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #46                 // Method getOrSetPerChannel:(Lorg/jboss/netty/channel/ChannelHandlerContext;)Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel;
       5: pop
       6: aload_0
       7: aload_1
       8: aload_2
       9: invokespecial #69                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler.channelConnected:(Lorg/jboss/netty/channel/ChannelHandlerContext;Lorg/jboss/netty/channel/ChannelStateEvent;)V
      12: return

  public void channelClosed(org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.channel.ChannelStateEvent) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
       6: invokevirtual #31                 // Method java/lang/Object.hashCode:()I
       9: invokestatic  #32                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: astore_3
      13: aload_0
      14: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
      17: aload_3
      18: invokeinterface #70,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      23: checkcast     #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      26: astore        4
      28: aload         4
      30: ifnull        77
      33: aload         4
      35: dup
      36: astore        5
      38: monitorenter
      39: aload_0
      40: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
      43: aload         4
      45: getfield      #40                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.queueSize:J
      48: lneg
      49: invokevirtual #56                 // Method java/util/concurrent/atomic/AtomicLong.addAndGet:(J)J
      52: pop2
      53: aload         4
      55: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      58: invokeinterface #71,  1           // InterfaceMethod java/util/List.clear:()V
      63: aload         5
      65: monitorexit
      66: goto          77
      69: astore        6
      71: aload         5
      73: monitorexit
      74: aload         6
      76: athrow
      77: aload_0
      78: aload_1
      79: aload_2
      80: invokespecial #72                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler.channelClosed:(Lorg/jboss/netty/channel/ChannelHandlerContext;Lorg/jboss/netty/channel/ChannelStateEvent;)V
      83: return
    Exception table:
       from    to  target type
          39    66    69   any
          69    74    69   any

  public void releaseExternalResources();
    Code:
       0: aload_0
       1: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
       4: invokeinterface #73,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.values:()Ljava/util/Collection;
       9: invokeinterface #74,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      14: astore_1
      15: aload_1
      16: invokeinterface #75,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          165
      24: aload_1
      25: invokeinterface #76,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #34                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel
      33: astore_2
      34: aload_2
      35: ifnull        162
      38: aload_2
      39: getfield      #39                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.ctx:Lorg/jboss/netty/channel/ChannelHandlerContext;
      42: ifnull        162
      45: aload_2
      46: getfield      #39                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.ctx:Lorg/jboss/netty/channel/ChannelHandlerContext;
      49: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
      54: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
      59: ifeq          162
      62: aload_2
      63: getfield      #39                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.ctx:Lorg/jboss/netty/channel/ChannelHandlerContext;
      66: invokeinterface #30,  1           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.getChannel:()Lorg/jboss/netty/channel/Channel;
      71: astore_3
      72: aload_2
      73: dup
      74: astore        4
      76: monitorenter
      77: aload_2
      78: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
      81: invokeinterface #77,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      86: astore        5
      88: aload         5
      90: invokeinterface #75,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      95: ifeq          139
      98: aload         5
     100: invokeinterface #76,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     105: checkcast     #53                 // class org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend
     108: astore        6
     110: aload_3
     111: invokeinterface #48,  1           // InterfaceMethod org/jboss/netty/channel/Channel.isConnected:()Z
     116: ifne          122
     119: goto          139
     122: aload_2
     123: getfield      #39                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.ctx:Lorg/jboss/netty/channel/ChannelHandlerContext;
     126: aload         6
     128: getfield      #66                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$ToSend.toSend:Lorg/jboss/netty/channel/MessageEvent;
     131: invokeinterface #51,  2           // InterfaceMethod org/jboss/netty/channel/ChannelHandlerContext.sendDownstream:(Lorg/jboss/netty/channel/ChannelEvent;)V
     136: goto          88
     139: aload_2
     140: getfield      #38                 // Field org/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel.messagesQueue:Ljava/util/List;
     143: invokeinterface #71,  1           // InterfaceMethod java/util/List.clear:()V
     148: aload         4
     150: monitorexit
     151: goto          162
     154: astore        7
     156: aload         4
     158: monitorexit
     159: aload         7
     161: athrow
     162: goto          15
     165: aload_0
     166: getfield      #12                 // Field channelQueues:Ljava/util/concurrent/ConcurrentMap;
     169: invokeinterface #78,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.clear:()V
     174: aload_0
     175: getfield      #15                 // Field queuesSize:Ljava/util/concurrent/atomic/AtomicLong;
     178: lconst_0
     179: invokevirtual #79                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     182: aload_0
     183: invokespecial #80                 // Method org/jboss/netty/handler/traffic/AbstractTrafficShapingHandler.releaseExternalResources:()V
     186: return
    Exception table:
       from    to  target type
          77   151   154   any
         154   159   154   any

  static void access$200(org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler, org.jboss.netty.channel.ChannelHandlerContext, org.jboss.netty.handler.traffic.GlobalTrafficShapingHandler$PerChannel, long) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: invokespecial #1                  // Method sendAllValid:(Lorg/jboss/netty/channel/ChannelHandlerContext;Lorg/jboss/netty/handler/traffic/GlobalTrafficShapingHandler$PerChannel;J)V
       7: return
}

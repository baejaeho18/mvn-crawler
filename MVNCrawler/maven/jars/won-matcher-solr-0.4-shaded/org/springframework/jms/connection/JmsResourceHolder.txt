Compiled from "JmsResourceHolder.java"
public class org.springframework.jms.connection.JmsResourceHolder extends org.springframework.transaction.support.ResourceHolderSupport {
  private static final org.apache.commons.logging.Log logger;

  private javax.jms.ConnectionFactory connectionFactory;

  private boolean frozen;

  private final java.util.List<javax.jms.Connection> connections;

  private final java.util.List<javax.jms.Session> sessions;

  private final java.util.Map<javax.jms.Connection, java.util.List<javax.jms.Session>> sessionsPerConnection;

  public org.springframework.jms.connection.JmsResourceHolder();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/transaction/support/ResourceHolderSupport."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field frozen:Z
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field connections:Ljava/util/List;
      20: aload_0
      21: new           #3                  // class java/util/LinkedList
      24: dup
      25: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      28: putfield      #6                  // Field sessions:Ljava/util/List;
      31: aload_0
      32: new           #7                  // class java/util/HashMap
      35: dup
      36: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      39: putfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      42: return

  public org.springframework.jms.connection.JmsResourceHolder(javax.jms.ConnectionFactory);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/transaction/support/ResourceHolderSupport."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field frozen:Z
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field connections:Ljava/util/List;
      20: aload_0
      21: new           #3                  // class java/util/LinkedList
      24: dup
      25: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      28: putfield      #6                  // Field sessions:Ljava/util/List;
      31: aload_0
      32: new           #7                  // class java/util/HashMap
      35: dup
      36: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      39: putfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      42: aload_0
      43: aload_1
      44: putfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      47: return

  public org.springframework.jms.connection.JmsResourceHolder(javax.jms.Session);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/transaction/support/ResourceHolderSupport."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field frozen:Z
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field connections:Ljava/util/List;
      20: aload_0
      21: new           #3                  // class java/util/LinkedList
      24: dup
      25: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      28: putfield      #6                  // Field sessions:Ljava/util/List;
      31: aload_0
      32: new           #7                  // class java/util/HashMap
      35: dup
      36: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      39: putfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      42: aload_0
      43: aload_1
      44: invokevirtual #11                 // Method addSession:(Ljavax/jms/Session;)V
      47: aload_0
      48: iconst_1
      49: putfield      #2                  // Field frozen:Z
      52: return

  public org.springframework.jms.connection.JmsResourceHolder(javax.jms.Connection, javax.jms.Session);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/transaction/support/ResourceHolderSupport."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field frozen:Z
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field connections:Ljava/util/List;
      20: aload_0
      21: new           #3                  // class java/util/LinkedList
      24: dup
      25: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      28: putfield      #6                  // Field sessions:Ljava/util/List;
      31: aload_0
      32: new           #7                  // class java/util/HashMap
      35: dup
      36: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      39: putfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      42: aload_0
      43: aload_1
      44: invokevirtual #12                 // Method addConnection:(Ljavax/jms/Connection;)V
      47: aload_0
      48: aload_2
      49: aload_1
      50: invokevirtual #13                 // Method addSession:(Ljavax/jms/Session;Ljavax/jms/Connection;)V
      53: aload_0
      54: iconst_1
      55: putfield      #2                  // Field frozen:Z
      58: return

  public org.springframework.jms.connection.JmsResourceHolder(javax.jms.ConnectionFactory, javax.jms.Connection, javax.jms.Session);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/springframework/transaction/support/ResourceHolderSupport."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field frozen:Z
       9: aload_0
      10: new           #3                  // class java/util/LinkedList
      13: dup
      14: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      17: putfield      #5                  // Field connections:Ljava/util/List;
      20: aload_0
      21: new           #3                  // class java/util/LinkedList
      24: dup
      25: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      28: putfield      #6                  // Field sessions:Ljava/util/List;
      31: aload_0
      32: new           #7                  // class java/util/HashMap
      35: dup
      36: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      39: putfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      42: aload_0
      43: aload_1
      44: putfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      47: aload_0
      48: aload_2
      49: invokevirtual #12                 // Method addConnection:(Ljavax/jms/Connection;)V
      52: aload_0
      53: aload_3
      54: aload_2
      55: invokevirtual #13                 // Method addSession:(Ljavax/jms/Session;Ljavax/jms/Connection;)V
      58: aload_0
      59: iconst_1
      60: putfield      #2                  // Field frozen:Z
      63: return

  public final boolean isFrozen();
    Code:
       0: aload_0
       1: getfield      #2                  // Field frozen:Z
       4: ireturn

  public final void addConnection(javax.jms.Connection);
    Code:
       0: aload_0
       1: getfield      #2                  // Field frozen:Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #14                 // String Cannot add Connection because JmsResourceHolder is frozen
      14: invokestatic  #15                 // Method org/springframework/util/Assert.isTrue:(ZLjava/lang/String;)V
      17: aload_1
      18: ldc           #16                 // String Connection must not be null
      20: invokestatic  #17                 // Method org/springframework/util/Assert.notNull:(Ljava/lang/Object;Ljava/lang/String;)V
      23: aload_0
      24: getfield      #5                  // Field connections:Ljava/util/List;
      27: aload_1
      28: invokeinterface #18,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      33: ifne          47
      36: aload_0
      37: getfield      #5                  // Field connections:Ljava/util/List;
      40: aload_1
      41: invokeinterface #19,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      46: pop
      47: return

  public final void addSession(javax.jms.Session);
    Code:
       0: aload_0
       1: aload_1
       2: aconst_null
       3: invokevirtual #13                 // Method addSession:(Ljavax/jms/Session;Ljavax/jms/Connection;)V
       6: return

  public final void addSession(javax.jms.Session, javax.jms.Connection);
    Code:
       0: aload_0
       1: getfield      #2                  // Field frozen:Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ldc           #20                 // String Cannot add Session because JmsResourceHolder is frozen
      14: invokestatic  #15                 // Method org/springframework/util/Assert.isTrue:(ZLjava/lang/String;)V
      17: aload_1
      18: ldc           #21                 // String Session must not be null
      20: invokestatic  #17                 // Method org/springframework/util/Assert.notNull:(Ljava/lang/Object;Ljava/lang/String;)V
      23: aload_0
      24: getfield      #6                  // Field sessions:Ljava/util/List;
      27: aload_1
      28: invokeinterface #18,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      33: ifne          97
      36: aload_0
      37: getfield      #6                  // Field sessions:Ljava/util/List;
      40: aload_1
      41: invokeinterface #19,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      46: pop
      47: aload_2
      48: ifnull        97
      51: aload_0
      52: getfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      55: aload_2
      56: invokeinterface #22,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      61: checkcast     #23                 // class java/util/List
      64: astore_3
      65: aload_3
      66: ifnonnull     89
      69: new           #3                  // class java/util/LinkedList
      72: dup
      73: invokespecial #4                  // Method java/util/LinkedList."<init>":()V
      76: astore_3
      77: aload_0
      78: getfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
      81: aload_2
      82: aload_3
      83: invokeinterface #24,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      88: pop
      89: aload_3
      90: aload_1
      91: invokeinterface #19,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      96: pop
      97: return

  public boolean containsSession(javax.jms.Session);
    Code:
       0: aload_0
       1: getfield      #6                  // Field sessions:Ljava/util/List;
       4: aload_1
       5: invokeinterface #18,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      10: ireturn

  public javax.jms.Connection getConnection();
    Code:
       0: aload_0
       1: getfield      #5                  // Field connections:Ljava/util/List;
       4: invokeinterface #25,  1           // InterfaceMethod java/util/List.isEmpty:()Z
       9: ifne          28
      12: aload_0
      13: getfield      #5                  // Field connections:Ljava/util/List;
      16: iconst_0
      17: invokeinterface #26,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      22: checkcast     #27                 // class javax/jms/Connection
      25: goto          29
      28: aconst_null
      29: areturn

  public javax.jms.Connection getConnection(java.lang.Class<? extends javax.jms.Connection>);
    Code:
       0: aload_0
       1: getfield      #5                  // Field connections:Ljava/util/List;
       4: aload_1
       5: invokestatic  #28                 // Method org/springframework/util/CollectionUtils.findValueOfType:(Ljava/util/Collection;Ljava/lang/Class;)Ljava/lang/Object;
       8: checkcast     #27                 // class javax/jms/Connection
      11: areturn

  public javax.jms.Session getSession();
    Code:
       0: aload_0
       1: getfield      #6                  // Field sessions:Ljava/util/List;
       4: invokeinterface #25,  1           // InterfaceMethod java/util/List.isEmpty:()Z
       9: ifne          28
      12: aload_0
      13: getfield      #6                  // Field sessions:Ljava/util/List;
      16: iconst_0
      17: invokeinterface #26,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      22: checkcast     #29                 // class javax/jms/Session
      25: goto          29
      28: aconst_null
      29: areturn

  public javax.jms.Session getSession(java.lang.Class<? extends javax.jms.Session>);
    Code:
       0: aload_0
       1: aload_1
       2: aconst_null
       3: invokevirtual #30                 // Method getSession:(Ljava/lang/Class;Ljavax/jms/Connection;)Ljavax/jms/Session;
       6: areturn

  public javax.jms.Session getSession(java.lang.Class<? extends javax.jms.Session>, javax.jms.Connection);
    Code:
       0: aload_2
       1: ifnull        20
       4: aload_0
       5: getfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
       8: aload_2
       9: invokeinterface #22,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: checkcast     #23                 // class java/util/List
      17: goto          24
      20: aload_0
      21: getfield      #6                  // Field sessions:Ljava/util/List;
      24: astore_3
      25: aload_3
      26: aload_1
      27: invokestatic  #28                 // Method org/springframework/util/CollectionUtils.findValueOfType:(Ljava/util/Collection;Ljava/lang/Class;)Ljava/lang/Object;
      30: checkcast     #29                 // class javax/jms/Session
      33: areturn

  public void commitAll() throws javax.jms.JMSException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field sessions:Ljava/util/List;
       4: invokeinterface #31,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          178
      19: aload_1
      20: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #29                 // class javax/jms/Session
      28: astore_2
      29: aload_2
      30: invokeinterface #34,  1           // InterfaceMethod javax/jms/Session.commit:()V
      35: goto          175
      38: astore_3
      39: goto          175
      42: astore_3
      43: aload_0
      44: getfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      47: ifnull        173
      50: aload_0
      51: getfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      54: invokevirtual #37                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      57: ldc           #38                 // String getDataSource
      59: iconst_0
      60: anewarray     #39                 // class java/lang/Class
      63: invokevirtual #40                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
      66: astore        4
      68: aload         4
      70: aload_0
      71: getfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      74: invokestatic  #41                 // Method org/springframework/util/ReflectionUtils.invokeMethod:(Ljava/lang/reflect/Method;Ljava/lang/Object;)Ljava/lang/Object;
      77: astore        5
      79: aload         5
      81: ifnull        129
      84: aload         5
      86: invokestatic  #42                 // Method org/springframework/transaction/support/TransactionSynchronizationManager.hasResource:(Ljava/lang/Object;)Z
      89: ifeq          93
      92: return
      93: aload         5
      95: invokevirtual #37                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      98: ldc           #43                 // String getTargetDataSource
     100: iconst_0
     101: anewarray     #39                 // class java/lang/Class
     104: invokevirtual #40                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
     107: astore        6
     109: aload         6
     111: aload         5
     113: invokestatic  #41                 // Method org/springframework/util/ReflectionUtils.invokeMethod:(Ljava/lang/reflect/Method;Ljava/lang/Object;)Ljava/lang/Object;
     116: astore        5
     118: goto          79
     121: astore        6
     123: aconst_null
     124: astore        5
     126: goto          79
     129: goto          173
     132: astore        4
     134: getstatic     #46                 // Field logger:Lorg/apache/commons/logging/Log;
     137: invokeinterface #47,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     142: ifeq          173
     145: getstatic     #46                 // Field logger:Lorg/apache/commons/logging/Log;
     148: new           #48                 // class java/lang/StringBuilder
     151: dup
     152: invokespecial #49                 // Method java/lang/StringBuilder."<init>":()V
     155: ldc           #50                 // String No working getDataSource method found on ConnectionFactory:
     157: invokevirtual #51                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     160: aload         4
     162: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     165: invokevirtual #53                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     168: invokeinterface #54,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     173: aload_3
     174: athrow
     175: goto          10
     178: return
    Exception table:
       from    to  target type
          29    35    38   Class javax/jms/TransactionInProgressException
          29    35    42   Class javax/jms/IllegalStateException
          93   118   121   Class java/lang/NoSuchMethodException
          50    92   132   Class java/lang/Throwable
          93   129   132   Class java/lang/Throwable

  public void closeAll();
    Code:
       0: aload_0
       1: getfield      #6                  // Field sessions:Ljava/util/List;
       4: invokeinterface #31,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          53
      19: aload_1
      20: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #29                 // class javax/jms/Session
      28: astore_2
      29: aload_2
      30: invokeinterface #55,  1           // InterfaceMethod javax/jms/Session.close:()V
      35: goto          50
      38: astore_3
      39: getstatic     #46                 // Field logger:Lorg/apache/commons/logging/Log;
      42: ldc           #56                 // String Could not close synchronized JMS Session after transaction
      44: aload_3
      45: invokeinterface #57,  3           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      50: goto          10
      53: aload_0
      54: getfield      #5                  // Field connections:Ljava/util/List;
      57: invokeinterface #31,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      62: astore_1
      63: aload_1
      64: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      69: ifeq          94
      72: aload_1
      73: invokeinterface #33,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      78: checkcast     #27                 // class javax/jms/Connection
      81: astore_2
      82: aload_2
      83: aload_0
      84: getfield      #10                 // Field connectionFactory:Ljavax/jms/ConnectionFactory;
      87: iconst_1
      88: invokestatic  #58                 // Method org/springframework/jms/connection/ConnectionFactoryUtils.releaseConnection:(Ljavax/jms/Connection;Ljavax/jms/ConnectionFactory;Z)V
      91: goto          63
      94: aload_0
      95: getfield      #5                  // Field connections:Ljava/util/List;
      98: invokeinterface #59,  1           // InterfaceMethod java/util/List.clear:()V
     103: aload_0
     104: getfield      #6                  // Field sessions:Ljava/util/List;
     107: invokeinterface #59,  1           // InterfaceMethod java/util/List.clear:()V
     112: aload_0
     113: getfield      #9                  // Field sessionsPerConnection:Ljava/util/Map;
     116: invokeinterface #60,  1           // InterfaceMethod java/util/Map.clear:()V
     121: return
    Exception table:
       from    to  target type
          29    35    38   Class java/lang/Throwable

  static {};
    Code:
       0: ldc           #61                 // class org/springframework/jms/connection/JmsResourceHolder
       2: invokestatic  #62                 // Method org/apache/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/commons/logging/Log;
       5: putstatic     #46                 // Field logger:Lorg/apache/commons/logging/Log;
       8: return
}

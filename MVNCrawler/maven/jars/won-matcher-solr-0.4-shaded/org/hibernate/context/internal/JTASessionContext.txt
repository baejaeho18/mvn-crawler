Compiled from "JTASessionContext.java"
public class org.hibernate.context.internal.JTASessionContext extends org.hibernate.context.spi.AbstractCurrentSessionContext {
  private static final org.hibernate.internal.CoreMessageLogger LOG;

  private transient java.util.Map<java.lang.Object, org.hibernate.Session> currentSessionMap;

  public org.hibernate.context.internal.JTASessionContext(org.hibernate.engine.spi.SessionFactoryImplementor);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #2                  // Method org/hibernate/context/spi/AbstractCurrentSessionContext."<init>":(Lorg/hibernate/engine/spi/SessionFactoryImplementor;)V
       5: aload_0
       6: new           #3                  // class java/util/concurrent/ConcurrentHashMap
       9: dup
      10: invokespecial #4                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      13: putfield      #1                  // Field currentSessionMap:Ljava/util/Map;
      16: return

  public org.hibernate.Session currentSession() throws org.hibernate.HibernateException;
    Code:
       0: aload_0
       1: invokevirtual #5                  // Method factory:()Lorg/hibernate/engine/spi/SessionFactoryImplementor;
       4: invokeinterface #6,  1            // InterfaceMethod org/hibernate/engine/spi/SessionFactoryImplementor.getServiceRegistry:()Lorg/hibernate/service/spi/ServiceRegistryImplementor;
       9: ldc           #7                  // class org/hibernate/engine/transaction/jta/platform/spi/JtaPlatform
      11: invokeinterface #8,  2            // InterfaceMethod org/hibernate/service/spi/ServiceRegistryImplementor.getService:(Ljava/lang/Class;)Lorg/hibernate/service/Service;
      16: checkcast     #7                  // class org/hibernate/engine/transaction/jta/platform/spi/JtaPlatform
      19: astore_1
      20: aload_1
      21: invokeinterface #9,  1            // InterfaceMethod org/hibernate/engine/transaction/jta/platform/spi/JtaPlatform.retrieveTransactionManager:()Ljavax/transaction/TransactionManager;
      26: astore_2
      27: aload_2
      28: ifnonnull     41
      31: new           #10                 // class org/hibernate/HibernateException
      34: dup
      35: ldc           #11                 // String No TransactionManagerLookup specified
      37: invokespecial #12                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;)V
      40: athrow
      41: aload_2
      42: invokeinterface #13,  1           // InterfaceMethod javax/transaction/TransactionManager.getTransaction:()Ljavax/transaction/Transaction;
      47: astore_3
      48: aload_3
      49: ifnonnull     62
      52: new           #10                 // class org/hibernate/HibernateException
      55: dup
      56: ldc           #14                 // String Unable to locate current JTA transaction
      58: invokespecial #12                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;)V
      61: athrow
      62: aload_3
      63: invokeinterface #15,  1           // InterfaceMethod javax/transaction/Transaction.getStatus:()I
      68: invokestatic  #16                 // Method org/hibernate/engine/transaction/internal/jta/JtaStatusHelper.isActive:(I)Z
      71: ifne          84
      74: new           #10                 // class org/hibernate/HibernateException
      77: dup
      78: ldc           #17                 // String Current transaction is not in progress
      80: invokespecial #12                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;)V
      83: athrow
      84: goto          106
      87: astore        4
      89: aload         4
      91: athrow
      92: astore        4
      94: new           #10                 // class org/hibernate/HibernateException
      97: dup
      98: ldc           #19                 // String Problem locating/validating JTA transaction
     100: aload         4
     102: invokespecial #20                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     105: athrow
     106: aload_1
     107: aload_3
     108: invokeinterface #21,  2           // InterfaceMethod org/hibernate/engine/transaction/jta/platform/spi/JtaPlatform.getTransactionIdentifier:(Ljavax/transaction/Transaction;)Ljava/lang/Object;
     113: astore        4
     115: aload_0
     116: getfield      #1                  // Field currentSessionMap:Ljava/util/Map;
     119: aload         4
     121: invokeinterface #22,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     126: checkcast     #23                 // class org/hibernate/Session
     129: astore        5
     131: aload         5
     133: ifnonnull     210
     136: aload_0
     137: invokevirtual #24                 // Method buildOrObtainSession:()Lorg/hibernate/Session;
     140: astore        5
     142: aload_3
     143: aload_0
     144: aload         4
     146: invokespecial #25                 // Method buildCleanupSynch:(Ljava/lang/Object;)Lorg/hibernate/context/internal/JTASessionContext$CleanupSync;
     149: invokeinterface #26,  2           // InterfaceMethod javax/transaction/Transaction.registerSynchronization:(Ljavax/transaction/Synchronization;)V
     154: goto          193
     157: astore        6
     159: aload         5
     161: invokeinterface #27,  1           // InterfaceMethod org/hibernate/Session.close:()V
     166: goto          183
     169: astore        7
     171: getstatic     #28                 // Field LOG:Lorg/hibernate/internal/CoreMessageLogger;
     174: ldc           #29                 // String Unable to release generated current-session on failed synch registration
     176: aload         7
     178: invokeinterface #30,  3           // InterfaceMethod org/hibernate/internal/CoreMessageLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     183: new           #10                 // class org/hibernate/HibernateException
     186: dup
     187: ldc           #31                 // String Unable to register cleanup Synchronization with TransactionManager
     189: invokespecial #12                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;)V
     192: athrow
     193: aload_0
     194: getfield      #1                  // Field currentSessionMap:Ljava/util/Map;
     197: aload         4
     199: aload         5
     201: invokeinterface #32,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     206: pop
     207: goto          216
     210: aload_0
     211: aload         5
     213: invokevirtual #33                 // Method validateExistingSession:(Lorg/hibernate/Session;)V
     216: aload         5
     218: areturn
    Exception table:
       from    to  target type
          41    84    87   Class org/hibernate/HibernateException
          41    84    92   Class java/lang/Throwable
         142   154   157   Class java/lang/Throwable
         159   166   169   Class java/lang/Throwable

  private org.hibernate.context.internal.JTASessionContext$CleanupSync buildCleanupSynch(java.lang.Object);
    Code:
       0: new           #34                 // class org/hibernate/context/internal/JTASessionContext$CleanupSync
       3: dup
       4: aload_1
       5: aload_0
       6: invokespecial #35                 // Method org/hibernate/context/internal/JTASessionContext$CleanupSync."<init>":(Ljava/lang/Object;Lorg/hibernate/context/internal/JTASessionContext;)V
       9: areturn

  protected org.hibernate.Session buildOrObtainSession();
    Code:
       0: aload_0
       1: invokevirtual #36                 // Method baseSessionBuilder:()Lorg/hibernate/SessionBuilder;
       4: aload_0
       5: invokevirtual #37                 // Method isAutoCloseEnabled:()Z
       8: invokeinterface #38,  2           // InterfaceMethod org/hibernate/SessionBuilder.autoClose:(Z)Lorg/hibernate/SessionBuilder;
      13: aload_0
      14: invokevirtual #39                 // Method getConnectionReleaseMode:()Lorg/hibernate/ConnectionReleaseMode;
      17: invokeinterface #40,  2           // InterfaceMethod org/hibernate/SessionBuilder.connectionReleaseMode:(Lorg/hibernate/ConnectionReleaseMode;)Lorg/hibernate/SessionBuilder;
      22: aload_0
      23: invokevirtual #41                 // Method isAutoFlushEnabled:()Z
      26: invokeinterface #42,  2           // InterfaceMethod org/hibernate/SessionBuilder.flushBeforeCompletion:(Z)Lorg/hibernate/SessionBuilder;
      31: invokeinterface #43,  1           // InterfaceMethod org/hibernate/SessionBuilder.openSession:()Lorg/hibernate/Session;
      36: areturn

  protected boolean isAutoCloseEnabled();
    Code:
       0: iconst_1
       1: ireturn

  protected boolean isAutoFlushEnabled();
    Code:
       0: iconst_1
       1: ireturn

  protected org.hibernate.ConnectionReleaseMode getConnectionReleaseMode();
    Code:
       0: getstatic     #44                 // Field org/hibernate/ConnectionReleaseMode.AFTER_STATEMENT:Lorg/hibernate/ConnectionReleaseMode;
       3: areturn

  static java.util.Map access$000(org.hibernate.context.internal.JTASessionContext);
    Code:
       0: aload_0
       1: getfield      #1                  // Field currentSessionMap:Ljava/util/Map;
       4: areturn

  static {};
    Code:
       0: ldc           #45                 // class org/hibernate/internal/CoreMessageLogger
       2: ldc           #46                 // class org/hibernate/context/internal/JTASessionContext
       4: invokevirtual #47                 // Method java/lang/Class.getName:()Ljava/lang/String;
       7: invokestatic  #48                 // Method org/jboss/logging/Logger.getMessageLogger:(Ljava/lang/Class;Ljava/lang/String;)Ljava/lang/Object;
      10: checkcast     #45                 // class org/hibernate/internal/CoreMessageLogger
      13: putstatic     #28                 // Field LOG:Lorg/hibernate/internal/CoreMessageLogger;
      16: return
}

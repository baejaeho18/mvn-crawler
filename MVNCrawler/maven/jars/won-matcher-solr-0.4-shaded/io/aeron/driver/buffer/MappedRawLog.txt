Compiled from "MappedRawLog.java"
class io.aeron.driver.buffer.MappedRawLog implements io.aeron.driver.buffer.RawLog {
  private static final int ONE_GIG;

  private static final int PAGE_LENGTH;

  private final int termLength;

  private final org.agrona.concurrent.UnsafeBuffer[] termBuffers;

  private final java.io.File logFile;

  private final java.nio.MappedByteBuffer[] mappedBuffers;

  private final org.agrona.concurrent.UnsafeBuffer logMetaDataBuffer;

  private final org.agrona.concurrent.errors.DistinctErrorLog errorLog;

  io.aeron.driver.buffer.MappedRawLog(java.io.File, boolean, int, org.agrona.concurrent.errors.DistinctErrorLog);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_3
       6: anewarray     #3                  // class org/agrona/concurrent/UnsafeBuffer
       9: putfield      #4                  // Field termBuffers:[Lorg/agrona/concurrent/UnsafeBuffer;
      12: aload_0
      13: iload_3
      14: putfield      #5                  // Field termLength:I
      17: aload_0
      18: aload         4
      20: putfield      #6                  // Field errorLog:Lorg/agrona/concurrent/errors/DistinctErrorLog;
      23: aload_0
      24: aload_1
      25: putfield      #7                  // Field logFile:Ljava/io/File;
      28: new           #8                  // class java/io/RandomAccessFile
      31: dup
      32: aload_0
      33: getfield      #7                  // Field logFile:Ljava/io/File;
      36: ldc           #9                  // String rw
      38: invokespecial #10                 // Method java/io/RandomAccessFile."<init>":(Ljava/io/File;Ljava/lang/String;)V
      41: astore        5
      43: aconst_null
      44: astore        6
      46: aload         5
      48: invokevirtual #11                 // Method java/io/RandomAccessFile.getChannel:()Ljava/nio/channels/FileChannel;
      51: astore        7
      53: aconst_null
      54: astore        8
      56: iload_3
      57: invokestatic  #12                 // Method io/aeron/logbuffer/LogBufferDescriptor.computeLogLength:(I)J
      60: lstore        9
      62: aload         5
      64: lload         9
      66: invokevirtual #13                 // Method java/io/RandomAccessFile.setLength:(J)V
      69: lload         9
      71: ldc2_w        #15                 // long 2147483647l
      74: lcmp
      75: ifgt          179
      78: aload         7
      80: getstatic     #17                 // Field java/nio/channels/FileChannel$MapMode.READ_WRITE:Ljava/nio/channels/FileChannel$MapMode;
      83: lconst_0
      84: lload         9
      86: invokevirtual #18                 // Method java/nio/channels/FileChannel.map:(Ljava/nio/channels/FileChannel$MapMode;JJ)Ljava/nio/MappedByteBuffer;
      89: astore        11
      91: iload_2
      92: ifne          103
      95: aload         11
      97: lload         9
      99: l2i
     100: invokestatic  #19                 // Method allocatePages:(Ljava/nio/MappedByteBuffer;I)V
     103: aload_0
     104: iconst_1
     105: anewarray     #20                 // class java/nio/MappedByteBuffer
     108: dup
     109: iconst_0
     110: aload         11
     112: aastore
     113: putfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     116: iconst_0
     117: istore        12
     119: iload         12
     121: iconst_3
     122: if_icmpge     152
     125: aload_0
     126: getfield      #4                  // Field termBuffers:[Lorg/agrona/concurrent/UnsafeBuffer;
     129: iload         12
     131: new           #3                  // class org/agrona/concurrent/UnsafeBuffer
     134: dup
     135: aload         11
     137: iload         12
     139: iload_3
     140: imul
     141: iload_3
     142: invokespecial #22                 // Method org/agrona/concurrent/UnsafeBuffer."<init>":(Ljava/nio/ByteBuffer;II)V
     145: aastore
     146: iinc          12, 1
     149: goto          119
     152: aload_0
     153: new           #3                  // class org/agrona/concurrent/UnsafeBuffer
     156: dup
     157: aload         11
     159: lload         9
     161: getstatic     #23                 // Field io/aeron/logbuffer/LogBufferDescriptor.LOG_META_DATA_LENGTH:I
     164: i2l
     165: lsub
     166: l2i
     167: getstatic     #23                 // Field io/aeron/logbuffer/LogBufferDescriptor.LOG_META_DATA_LENGTH:I
     170: invokespecial #22                 // Method org/agrona/concurrent/UnsafeBuffer."<init>":(Ljava/nio/ByteBuffer;II)V
     173: putfield      #24                 // Field logMetaDataBuffer:Lorg/agrona/concurrent/UnsafeBuffer;
     176: goto          306
     179: aload_0
     180: iconst_4
     181: anewarray     #20                 // class java/nio/MappedByteBuffer
     184: putfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     187: iconst_0
     188: istore        11
     190: iload         11
     192: iconst_3
     193: if_icmpge     261
     196: aload_0
     197: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     200: iload         11
     202: aload         7
     204: getstatic     #17                 // Field java/nio/channels/FileChannel$MapMode.READ_WRITE:Ljava/nio/channels/FileChannel$MapMode;
     207: iload_3
     208: i2l
     209: iload         11
     211: i2l
     212: lmul
     213: iload_3
     214: i2l
     215: invokevirtual #18                 // Method java/nio/channels/FileChannel.map:(Ljava/nio/channels/FileChannel$MapMode;JJ)Ljava/nio/MappedByteBuffer;
     218: aastore
     219: iload_2
     220: ifne          234
     223: aload_0
     224: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     227: iload         11
     229: aaload
     230: iload_3
     231: invokestatic  #19                 // Method allocatePages:(Ljava/nio/MappedByteBuffer;I)V
     234: aload_0
     235: getfield      #4                  // Field termBuffers:[Lorg/agrona/concurrent/UnsafeBuffer;
     238: iload         11
     240: new           #3                  // class org/agrona/concurrent/UnsafeBuffer
     243: dup
     244: aload_0
     245: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     248: iload         11
     250: aaload
     251: invokespecial #25                 // Method org/agrona/concurrent/UnsafeBuffer."<init>":(Ljava/nio/ByteBuffer;)V
     254: aastore
     255: iinc          11, 1
     258: goto          190
     261: iload_3
     262: i2l
     263: ldc2_w        #26                 // long 3l
     266: lmul
     267: lstore        11
     269: aload         7
     271: getstatic     #17                 // Field java/nio/channels/FileChannel$MapMode.READ_WRITE:Ljava/nio/channels/FileChannel$MapMode;
     274: lload         11
     276: getstatic     #23                 // Field io/aeron/logbuffer/LogBufferDescriptor.LOG_META_DATA_LENGTH:I
     279: i2l
     280: invokevirtual #18                 // Method java/nio/channels/FileChannel.map:(Ljava/nio/channels/FileChannel$MapMode;JJ)Ljava/nio/MappedByteBuffer;
     283: astore        13
     285: aload_0
     286: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
     289: iconst_3
     290: aload         13
     292: aastore
     293: aload_0
     294: new           #3                  // class org/agrona/concurrent/UnsafeBuffer
     297: dup
     298: aload         13
     300: invokespecial #25                 // Method org/agrona/concurrent/UnsafeBuffer."<init>":(Ljava/nio/ByteBuffer;)V
     303: putfield      #24                 // Field logMetaDataBuffer:Lorg/agrona/concurrent/UnsafeBuffer;
     306: aload         7
     308: ifnull        393
     311: aload         8
     313: ifnull        336
     316: aload         7
     318: invokevirtual #28                 // Method java/nio/channels/FileChannel.close:()V
     321: goto          393
     324: astore        9
     326: aload         8
     328: aload         9
     330: invokevirtual #30                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     333: goto          393
     336: aload         7
     338: invokevirtual #28                 // Method java/nio/channels/FileChannel.close:()V
     341: goto          393
     344: astore        9
     346: aload         9
     348: astore        8
     350: aload         9
     352: athrow
     353: astore        14
     355: aload         7
     357: ifnull        390
     360: aload         8
     362: ifnull        385
     365: aload         7
     367: invokevirtual #28                 // Method java/nio/channels/FileChannel.close:()V
     370: goto          390
     373: astore        15
     375: aload         8
     377: aload         15
     379: invokevirtual #30                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     382: goto          390
     385: aload         7
     387: invokevirtual #28                 // Method java/nio/channels/FileChannel.close:()V
     390: aload         14
     392: athrow
     393: aload         5
     395: ifnull        480
     398: aload         6
     400: ifnull        423
     403: aload         5
     405: invokevirtual #31                 // Method java/io/RandomAccessFile.close:()V
     408: goto          480
     411: astore        7
     413: aload         6
     415: aload         7
     417: invokevirtual #30                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     420: goto          480
     423: aload         5
     425: invokevirtual #31                 // Method java/io/RandomAccessFile.close:()V
     428: goto          480
     431: astore        7
     433: aload         7
     435: astore        6
     437: aload         7
     439: athrow
     440: astore        16
     442: aload         5
     444: ifnull        477
     447: aload         6
     449: ifnull        472
     452: aload         5
     454: invokevirtual #31                 // Method java/io/RandomAccessFile.close:()V
     457: goto          477
     460: astore        17
     462: aload         6
     464: aload         17
     466: invokevirtual #30                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     469: goto          477
     472: aload         5
     474: invokevirtual #31                 // Method java/io/RandomAccessFile.close:()V
     477: aload         16
     479: athrow
     480: goto          495
     483: astore        5
     485: new           #33                 // class java/lang/IllegalStateException
     488: dup
     489: aload         5
     491: invokespecial #34                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/Throwable;)V
     494: athrow
     495: return
    Exception table:
       from    to  target type
         316   321   324   Class java/lang/Throwable
          56   306   344   Class java/lang/Throwable
          56   306   353   any
         365   370   373   Class java/lang/Throwable
         344   355   353   any
         403   408   411   Class java/lang/Throwable
          46   393   431   Class java/lang/Throwable
          46   393   440   any
         452   457   460   Class java/lang/Throwable
         431   442   440   any
          28   480   483   Class java/io/IOException

  public int termLength();
    Code:
       0: aload_0
       1: getfield      #5                  // Field termLength:I
       4: ireturn

  public void close();
    Code:
       0: aload_0
       1: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
       4: astore_1
       5: aload_1
       6: arraylength
       7: istore_2
       8: iconst_0
       9: istore_3
      10: iload_3
      11: iload_2
      12: if_icmpge     31
      15: aload_1
      16: iload_3
      17: aaload
      18: astore        4
      20: aload         4
      22: invokestatic  #35                 // Method org/agrona/IoUtil.unmap:(Ljava/nio/MappedByteBuffer;)V
      25: iinc          3, 1
      28: goto          10
      31: aload_0
      32: getfield      #7                  // Field logFile:Ljava/io/File;
      35: invokevirtual #36                 // Method java/io/File.delete:()Z
      38: ifne          72
      41: aload_0
      42: getfield      #6                  // Field errorLog:Lorg/agrona/concurrent/errors/DistinctErrorLog;
      45: new           #33                 // class java/lang/IllegalStateException
      48: dup
      49: ldc           #37                 // String could not delete file %s
      51: iconst_1
      52: anewarray     #38                 // class java/lang/Object
      55: dup
      56: iconst_0
      57: aload_0
      58: getfield      #7                  // Field logFile:Ljava/io/File;
      61: aastore
      62: invokestatic  #39                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      65: invokespecial #40                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      68: invokevirtual #41                 // Method org/agrona/concurrent/errors/DistinctErrorLog.record:(Ljava/lang/Throwable;)Z
      71: pop
      72: return

  public org.agrona.concurrent.UnsafeBuffer[] termBuffers();
    Code:
       0: aload_0
       1: getfield      #4                  // Field termBuffers:[Lorg/agrona/concurrent/UnsafeBuffer;
       4: areturn

  public org.agrona.concurrent.UnsafeBuffer logMetaData();
    Code:
       0: aload_0
       1: getfield      #24                 // Field logMetaDataBuffer:Lorg/agrona/concurrent/UnsafeBuffer;
       4: areturn

  public java.nio.ByteBuffer[] sliceTerms();
    Code:
       0: iconst_3
       1: anewarray     #42                 // class java/nio/ByteBuffer
       4: astore_1
       5: aload_0
       6: getfield      #5                  // Field termLength:I
       9: ldc           #44                 // int 1073741824
      11: if_icmpge     69
      14: aload_0
      15: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
      18: iconst_0
      19: aaload
      20: astore_2
      21: iconst_0
      22: istore_3
      23: iload_3
      24: iconst_3
      25: if_icmpge     66
      28: aload_2
      29: aload_0
      30: getfield      #5                  // Field termLength:I
      33: iload_3
      34: imul
      35: aload_0
      36: getfield      #5                  // Field termLength:I
      39: iadd
      40: invokevirtual #45                 // Method java/nio/MappedByteBuffer.limit:(I)Ljava/nio/Buffer;
      43: aload_0
      44: getfield      #5                  // Field termLength:I
      47: iload_3
      48: imul
      49: invokevirtual #46                 // Method java/nio/Buffer.position:(I)Ljava/nio/Buffer;
      52: pop
      53: aload_1
      54: iload_3
      55: aload_2
      56: invokevirtual #47                 // Method java/nio/MappedByteBuffer.slice:()Ljava/nio/ByteBuffer;
      59: aastore
      60: iinc          3, 1
      63: goto          23
      66: goto          94
      69: iconst_0
      70: istore_2
      71: iload_2
      72: iconst_3
      73: if_icmpge     94
      76: aload_1
      77: iload_2
      78: aload_0
      79: getfield      #21                 // Field mappedBuffers:[Ljava/nio/MappedByteBuffer;
      82: iload_2
      83: aaload
      84: invokevirtual #48                 // Method java/nio/MappedByteBuffer.duplicate:()Ljava/nio/ByteBuffer;
      87: aastore
      88: iinc          2, 1
      91: goto          71
      94: aload_1
      95: areturn

  public java.lang.String logFileName();
    Code:
       0: aload_0
       1: getfield      #7                  // Field logFile:Ljava/io/File;
       4: invokevirtual #49                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
       7: areturn

  private static void allocatePages(java.nio.MappedByteBuffer, int);
    Code:
       0: iconst_0
       1: istore_2
       2: iload_2
       3: iload_1
       4: if_icmpge     23
       7: aload_0
       8: iload_2
       9: iconst_0
      10: invokevirtual #50                 // Method java/nio/MappedByteBuffer.put:(IB)Ljava/nio/ByteBuffer;
      13: pop
      14: iinc_w        2, 4096
      20: goto          2
      23: return
}

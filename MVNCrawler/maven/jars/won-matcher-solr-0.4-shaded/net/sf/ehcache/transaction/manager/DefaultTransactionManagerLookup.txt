Compiled from "DefaultTransactionManagerLookup.java"
public class net.sf.ehcache.transaction.manager.DefaultTransactionManagerLookup implements net.sf.ehcache.transaction.manager.TransactionManagerLookup {
  private static final org.slf4j.Logger LOG;

  private final java.util.concurrent.locks.Lock lock;

  private final java.util.List<net.sf.ehcache.transaction.xa.EhcacheXAResource> uninitializedEhcacheXAResources;

  private volatile boolean initialized;

  private volatile net.sf.ehcache.transaction.manager.selector.Selector selector;

  private final net.sf.ehcache.transaction.manager.selector.JndiSelector defaultJndiSelector;

  private final net.sf.ehcache.transaction.manager.selector.Selector[] transactionManagerSelectors;

  public net.sf.ehcache.transaction.manager.DefaultTransactionManagerLookup();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/locks/ReentrantLock
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/locks/ReentrantLock."<init>":()V
      12: putfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      15: aload_0
      16: new           #5                  // class java/util/ArrayList
      19: dup
      20: invokespecial #6                  // Method java/util/ArrayList."<init>":()V
      23: putfield      #7                  // Field uninitializedEhcacheXAResources:Ljava/util/List;
      26: aload_0
      27: iconst_0
      28: putfield      #8                  // Field initialized:Z
      31: aload_0
      32: new           #9                  // class net/sf/ehcache/transaction/manager/selector/GenericJndiSelector
      35: dup
      36: invokespecial #10                 // Method net/sf/ehcache/transaction/manager/selector/GenericJndiSelector."<init>":()V
      39: putfield      #11                 // Field defaultJndiSelector:Lnet/sf/ehcache/transaction/manager/selector/JndiSelector;
      42: aload_0
      43: iconst_5
      44: anewarray     #12                 // class net/sf/ehcache/transaction/manager/selector/Selector
      47: dup
      48: iconst_0
      49: aload_0
      50: getfield      #11                 // Field defaultJndiSelector:Lnet/sf/ehcache/transaction/manager/selector/JndiSelector;
      53: aastore
      54: dup
      55: iconst_1
      56: new           #13                 // class net/sf/ehcache/transaction/manager/selector/GlassfishSelector
      59: dup
      60: invokespecial #14                 // Method net/sf/ehcache/transaction/manager/selector/GlassfishSelector."<init>":()V
      63: aastore
      64: dup
      65: iconst_2
      66: new           #15                 // class net/sf/ehcache/transaction/manager/selector/WeblogicSelector
      69: dup
      70: invokespecial #16                 // Method net/sf/ehcache/transaction/manager/selector/WeblogicSelector."<init>":()V
      73: aastore
      74: dup
      75: iconst_3
      76: new           #17                 // class net/sf/ehcache/transaction/manager/selector/BitronixSelector
      79: dup
      80: invokespecial #18                 // Method net/sf/ehcache/transaction/manager/selector/BitronixSelector."<init>":()V
      83: aastore
      84: dup
      85: iconst_4
      86: new           #19                 // class net/sf/ehcache/transaction/manager/selector/AtomikosSelector
      89: dup
      90: invokespecial #20                 // Method net/sf/ehcache/transaction/manager/selector/AtomikosSelector."<init>":()V
      93: aastore
      94: putfield      #21                 // Field transactionManagerSelectors:[Lnet/sf/ehcache/transaction/manager/selector/Selector;
      97: return

  public void init();
    Code:
       0: aload_0
       1: getfield      #8                  // Field initialized:Z
       4: ifne          129
       7: aload_0
       8: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      11: invokeinterface #22,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      16: aload_0
      17: getfield      #7                  // Field uninitializedEhcacheXAResources:Ljava/util/List;
      20: invokeinterface #23,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      25: astore_1
      26: aload_1
      27: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      32: ifeq          100
      35: aload_0
      36: invokevirtual #25                 // Method getTransactionManager:()Ljavax/transaction/TransactionManager;
      39: ifnonnull     72
      42: new           #26                 // class net/sf/ehcache/CacheException
      45: dup
      46: new           #27                 // class java/lang/StringBuilder
      49: dup
      50: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      53: ldc           #29                 // String No Transaction Manager could be located, cannot initialize DefaultTransactionManagerLookup. Caches which registered an XAResource:
      55: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: aload_0
      59: invokespecial #31                 // Method getUninitializedXAResourceCacheNames:()Ljava/util/Set;
      62: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      65: invokevirtual #33                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      68: invokespecial #34                 // Method net/sf/ehcache/CacheException."<init>":(Ljava/lang/String;)V
      71: athrow
      72: aload_1
      73: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      78: checkcast     #36                 // class net/sf/ehcache/transaction/xa/EhcacheXAResource
      81: astore_2
      82: aload_0
      83: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      86: aload_2
      87: iconst_1
      88: invokevirtual #38                 // Method net/sf/ehcache/transaction/manager/selector/Selector.registerResource:(Lnet/sf/ehcache/transaction/xa/EhcacheXAResource;Z)V
      91: aload_1
      92: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.remove:()V
      97: goto          26
     100: aload_0
     101: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
     104: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     109: goto          124
     112: astore_3
     113: aload_0
     114: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
     117: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     122: aload_3
     123: athrow
     124: aload_0
     125: iconst_1
     126: putfield      #8                  // Field initialized:Z
     129: return
    Exception table:
       from    to  target type
          16   100   112   any
         112   113   112   any

  private java.util.Set<java.lang.String> getUninitializedXAResourceCacheNames();
    Code:
       0: new           #41                 // class java/util/HashSet
       3: dup
       4: invokespecial #42                 // Method java/util/HashSet."<init>":()V
       7: astore_1
       8: aload_0
       9: getfield      #7                  // Field uninitializedEhcacheXAResources:Ljava/util/List;
      12: invokeinterface #43,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      17: astore_2
      18: aload_2
      19: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      24: ifeq          53
      27: aload_2
      28: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #36                 // class net/sf/ehcache/transaction/xa/EhcacheXAResource
      36: astore_3
      37: aload_1
      38: aload_3
      39: invokeinterface #44,  1           // InterfaceMethod net/sf/ehcache/transaction/xa/EhcacheXAResource.getCacheName:()Ljava/lang/String;
      44: invokeinterface #45,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      49: pop
      50: goto          18
      53: aload_1
      54: areturn

  public javax.transaction.TransactionManager getTransactionManager();
    Code:
       0: aload_0
       1: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
       4: ifnonnull     51
       7: aload_0
       8: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      11: invokeinterface #22,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      16: aload_0
      17: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      20: ifnonnull     27
      23: aload_0
      24: invokespecial #46                 // Method lookupTransactionManager:()V
      27: aload_0
      28: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      31: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      36: goto          51
      39: astore_1
      40: aload_0
      41: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      44: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      49: aload_1
      50: athrow
      51: aload_0
      52: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      55: invokevirtual #47                 // Method net/sf/ehcache/transaction/manager/selector/Selector.getTransactionManager:()Ljavax/transaction/TransactionManager;
      58: areturn
    Exception table:
       from    to  target type
          16    27    39   any
          39    40    39   any

  private void lookupTransactionManager();
    Code:
       0: aload_0
       1: getfield      #21                 // Field transactionManagerSelectors:[Lnet/sf/ehcache/transaction/manager/selector/Selector;
       4: astore_1
       5: aload_1
       6: arraylength
       7: istore_2
       8: iconst_0
       9: istore_3
      10: iload_3
      11: iload_2
      12: if_icmpge     60
      15: aload_1
      16: iload_3
      17: aaload
      18: astore        4
      20: aload         4
      22: invokevirtual #47                 // Method net/sf/ehcache/transaction/manager/selector/Selector.getTransactionManager:()Ljavax/transaction/TransactionManager;
      25: astore        5
      27: aload         5
      29: ifnull        54
      32: aload_0
      33: aload         4
      35: putfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      38: getstatic     #48                 // Field LOG:Lorg/slf4j/Logger;
      41: ldc           #49                 // String Found TransactionManager for {}
      43: aload         4
      45: invokevirtual #50                 // Method net/sf/ehcache/transaction/manager/selector/Selector.getVendor:()Ljava/lang/String;
      48: invokeinterface #51,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      53: return
      54: iinc          3, 1
      57: goto          10
      60: aload_0
      61: new           #52                 // class net/sf/ehcache/transaction/manager/selector/NullSelector
      64: dup
      65: invokespecial #53                 // Method net/sf/ehcache/transaction/manager/selector/NullSelector."<init>":()V
      68: putfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      71: getstatic     #48                 // Field LOG:Lorg/slf4j/Logger;
      74: ldc           #54                 // String Found no TransactionManager
      76: invokeinterface #55,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      81: return

  public void register(net.sf.ehcache.transaction.xa.EhcacheXAResource, boolean);
    Code:
       0: aload_0
       1: getfield      #8                  // Field initialized:Z
       4: ifeq          19
       7: aload_0
       8: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      11: aload_1
      12: iload_2
      13: invokevirtual #38                 // Method net/sf/ehcache/transaction/manager/selector/Selector.registerResource:(Lnet/sf/ehcache/transaction/xa/EhcacheXAResource;Z)V
      16: goto          63
      19: aload_0
      20: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      23: invokeinterface #22,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      28: aload_0
      29: getfield      #7                  // Field uninitializedEhcacheXAResources:Ljava/util/List;
      32: aload_1
      33: invokeinterface #56,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      38: pop
      39: aload_0
      40: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      43: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      48: goto          63
      51: astore_3
      52: aload_0
      53: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      56: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      61: aload_3
      62: athrow
      63: return
    Exception table:
       from    to  target type
          28    39    51   any
          51    52    51   any

  public void unregister(net.sf.ehcache.transaction.xa.EhcacheXAResource, boolean);
    Code:
       0: aload_0
       1: getfield      #8                  // Field initialized:Z
       4: ifeq          19
       7: aload_0
       8: getfield      #37                 // Field selector:Lnet/sf/ehcache/transaction/manager/selector/Selector;
      11: aload_1
      12: iload_2
      13: invokevirtual #57                 // Method net/sf/ehcache/transaction/manager/selector/Selector.unregisterResource:(Lnet/sf/ehcache/transaction/xa/EhcacheXAResource;Z)V
      16: goto          102
      19: aload_0
      20: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      23: invokeinterface #22,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      28: aload_0
      29: getfield      #7                  // Field uninitializedEhcacheXAResources:Ljava/util/List;
      32: invokeinterface #23,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      37: astore_3
      38: aload_3
      39: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      44: ifeq          76
      47: aload_3
      48: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      53: checkcast     #36                 // class net/sf/ehcache/transaction/xa/EhcacheXAResource
      56: astore        4
      58: aload         4
      60: aload_1
      61: if_acmpne     73
      64: aload_3
      65: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.remove:()V
      70: goto          76
      73: goto          38
      76: aload_0
      77: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      80: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      85: goto          102
      88: astore        5
      90: aload_0
      91: getfield      #4                  // Field lock:Ljava/util/concurrent/locks/Lock;
      94: invokeinterface #40,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
      99: aload         5
     101: athrow
     102: return
    Exception table:
       from    to  target type
          28    76    88   any
          88    90    88   any

  public void setProperties(java.util.Properties);
    Code:
       0: aload_1
       1: ifnull        23
       4: aload_1
       5: ldc           #58                 // String jndiName
       7: invokevirtual #59                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      10: astore_2
      11: aload_2
      12: ifnull        23
      15: aload_0
      16: getfield      #11                 // Field defaultJndiSelector:Lnet/sf/ehcache/transaction/manager/selector/JndiSelector;
      19: aload_2
      20: invokevirtual #60                 // Method net/sf/ehcache/transaction/manager/selector/JndiSelector.setJndiName:(Ljava/lang/String;)V
      23: return

  static {};
    Code:
       0: ldc_w         #61                 // class net/sf/ehcache/transaction/manager/DefaultTransactionManagerLookup
       3: invokevirtual #62                 // Method java/lang/Class.getName:()Ljava/lang/String;
       6: invokestatic  #63                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/String;)Lorg/slf4j/Logger;
       9: putstatic     #48                 // Field LOG:Lorg/slf4j/Logger;
      12: return
}

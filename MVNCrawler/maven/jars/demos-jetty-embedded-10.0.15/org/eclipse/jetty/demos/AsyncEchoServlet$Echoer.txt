Compiled from "AsyncEchoServlet.java"
class org.eclipse.jetty.demos.AsyncEchoServlet$Echoer implements javax.servlet.ReadListener,javax.servlet.WriteListener {
  private final byte[] buffer;

  private final javax.servlet.AsyncContext asyncContext;

  private final javax.servlet.ServletInputStream input;

  private final javax.servlet.ServletOutputStream output;

  private final java.util.concurrent.atomic.AtomicBoolean complete;

  final org.eclipse.jetty.demos.AsyncEchoServlet this$0;

  private org.eclipse.jetty.demos.AsyncEchoServlet$Echoer(org.eclipse.jetty.demos.AsyncEchoServlet, javax.servlet.AsyncContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/eclipse/jetty/demos/AsyncEchoServlet;
       5: aload_0
       6: invokespecial #7                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: sipush        4096
      13: newarray       byte
      15: putfield      #13                 // Field buffer:[B
      18: aload_0
      19: new           #17                 // class java/util/concurrent/atomic/AtomicBoolean
      22: dup
      23: iconst_0
      24: invokespecial #19                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
      27: putfield      #22                 // Field complete:Ljava/util/concurrent/atomic/AtomicBoolean;
      30: aload_0
      31: aload_2
      32: putfield      #26                 // Field asyncContext:Ljavax/servlet/AsyncContext;
      35: aload_0
      36: aload_2
      37: invokeinterface #30,  1           // InterfaceMethod javax/servlet/AsyncContext.getRequest:()Ljavax/servlet/ServletRequest;
      42: invokeinterface #36,  1           // InterfaceMethod javax/servlet/ServletRequest.getInputStream:()Ljavax/servlet/ServletInputStream;
      47: putfield      #42                 // Field input:Ljavax/servlet/ServletInputStream;
      50: aload_0
      51: aload_2
      52: invokeinterface #46,  1           // InterfaceMethod javax/servlet/AsyncContext.getResponse:()Ljavax/servlet/ServletResponse;
      57: invokeinterface #50,  1           // InterfaceMethod javax/servlet/ServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
      62: putfield      #56                 // Field output:Ljavax/servlet/ServletOutputStream;
      65: return

  public void onDataAvailable() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #60                 // Method handleAsyncIO:()V
       4: return

  public void onAllDataRead() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #60                 // Method handleAsyncIO:()V
       4: return

  public void onWritePossible() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #60                 // Method handleAsyncIO:()V
       4: return

  private void handleAsyncIO() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #56                 // Field output:Ljavax/servlet/ServletOutputStream;
       4: invokevirtual #63                 // Method javax/servlet/ServletOutputStream.isReady:()Z
       7: ifne          13
      10: goto          86
      13: aload_0
      14: getfield      #42                 // Field input:Ljavax/servlet/ServletInputStream;
      17: invokevirtual #69                 // Method javax/servlet/ServletInputStream.isReady:()Z
      20: ifne          26
      23: goto          86
      26: aload_0
      27: getfield      #42                 // Field input:Ljavax/servlet/ServletInputStream;
      30: aload_0
      31: getfield      #13                 // Field buffer:[B
      34: invokevirtual #72                 // Method javax/servlet/ServletInputStream.read:([B)I
      37: istore_1
      38: iload_1
      39: ifge          66
      42: aload_0
      43: getfield      #22                 // Field complete:Ljava/util/concurrent/atomic/AtomicBoolean;
      46: iconst_0
      47: iconst_1
      48: invokevirtual #76                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
      51: ifeq          86
      54: aload_0
      55: getfield      #26                 // Field asyncContext:Ljavax/servlet/AsyncContext;
      58: invokeinterface #80,  1           // InterfaceMethod javax/servlet/AsyncContext.complete:()V
      63: goto          86
      66: iload_1
      67: ifle          83
      70: aload_0
      71: getfield      #56                 // Field output:Ljavax/servlet/ServletOutputStream;
      74: aload_0
      75: getfield      #13                 // Field buffer:[B
      78: iconst_0
      79: iload_1
      80: invokevirtual #82                 // Method javax/servlet/ServletOutputStream.write:([BII)V
      83: goto          0
      86: return

  public void onError(java.lang.Throwable);
    Code:
       0: new           #86                 // class java/lang/Throwable
       3: dup
       4: ldc           #88                 // String onError
       6: aload_1
       7: invokespecial #90                 // Method java/lang/Throwable."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      10: invokevirtual #93                 // Method java/lang/Throwable.printStackTrace:()V
      13: aload_0
      14: getfield      #26                 // Field asyncContext:Ljavax/servlet/AsyncContext;
      17: invokeinterface #80,  1           // InterfaceMethod javax/servlet/AsyncContext.complete:()V
      22: return
}

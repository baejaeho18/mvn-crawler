Compiled from "FastFileServer.java"
class org.eclipse.jetty.demos.FastFileServer$FastFileHandler extends org.eclipse.jetty.server.handler.AbstractHandler {
  private final org.eclipse.jetty.http.MimeTypes mimeTypes;

  private final java.io.File dir;

  private org.eclipse.jetty.demos.FastFileServer$FastFileHandler(java.io.File);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/eclipse/jetty/server/handler/AbstractHandler."<init>":()V
       4: aload_0
       5: new           #7                  // class org/eclipse/jetty/http/MimeTypes
       8: dup
       9: invokespecial #9                  // Method org/eclipse/jetty/http/MimeTypes."<init>":()V
      12: putfield      #10                 // Field mimeTypes:Lorg/eclipse/jetty/http/MimeTypes;
      15: aload_0
      16: aload_1
      17: putfield      #16                 // Field dir:Ljava/io/File;
      20: return

  public void handle(java.lang.String, org.eclipse.jetty.server.Request, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse) throws java.io.IOException, javax.servlet.ServletException;
    Code:
       0: aload         4
       2: invokeinterface #20,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.getBufferSize:()I
       7: istore        5
       9: bipush        8
      11: iload         5
      13: imul
      14: istore        6
      16: new           #26                 // class java/io/File
      19: dup
      20: aload_0
      21: getfield      #16                 // Field dir:Ljava/io/File;
      24: aload_3
      25: invokeinterface #28,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getPathInfo:()Ljava/lang/String;
      30: invokespecial #34                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      33: astore        7
      35: aload         7
      37: invokevirtual #37                 // Method java/io/File.exists:()Z
      40: ifne          44
      43: return
      44: aload_2
      45: iconst_1
      46: invokevirtual #41                 // Method org/eclipse/jetty/server/Request.setHandled:(Z)V
      49: aload         7
      51: invokevirtual #47                 // Method java/io/File.isDirectory:()Z
      54: ifeq          160
      57: aload_3
      58: invokeinterface #28,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getPathInfo:()Ljava/lang/String;
      63: ldc           #52                 // String /
      65: invokevirtual #54                 // Method java/lang/String.endsWith:(Ljava/lang/String;)Z
      68: ifne          97
      71: aload         4
      73: aload         4
      75: aload_3
      76: invokeinterface #60,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getRequestURI:()Ljava/lang/String;
      81: invokedynamic #63,  0             // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;
      86: invokeinterface #67,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.encodeRedirectURL:(Ljava/lang/String;)Ljava/lang/String;
      91: invokeinterface #70,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendRedirect:(Ljava/lang/String;)V
      96: return
      97: aload         7
      99: invokestatic  #74                 // Method org/eclipse/jetty/util/resource/Resource.newResource:(Ljava/io/File;)Lorg/eclipse/jetty/util/resource/Resource;
     102: aload_3
     103: invokeinterface #60,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getRequestURI:()Ljava/lang/String;
     108: aload_3
     109: invokeinterface #28,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getPathInfo:()Ljava/lang/String;
     114: ldc           #52                 // String /
     116: invokevirtual #80                 // Method java/lang/String.lastIndexOf:(Ljava/lang/String;)I
     119: ifle          126
     122: iconst_1
     123: goto          127
     126: iconst_0
     127: aload_3
     128: invokeinterface #84,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getQueryString:()Ljava/lang/String;
     133: invokevirtual #87                 // Method org/eclipse/jetty/util/resource/Resource.getListHTML:(Ljava/lang/String;ZLjava/lang/String;)Ljava/lang/String;
     136: astore        8
     138: aload         4
     140: ldc           #91                 // String text/html; charset=utf-8
     142: invokeinterface #93,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setContentType:(Ljava/lang/String;)V
     147: aload         4
     149: invokeinterface #96,  1           // InterfaceMethod javax/servlet/http/HttpServletResponse.getWriter:()Ljava/io/PrintWriter;
     154: aload         8
     156: invokevirtual #100                // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
     159: return
     160: aload         4
     162: ldc           #105                // String Last-Modified
     164: aload         7
     166: invokevirtual #107                // Method java/io/File.lastModified:()J
     169: invokeinterface #111,  4          // InterfaceMethod javax/servlet/http/HttpServletResponse.setDateHeader:(Ljava/lang/String;J)V
     174: aload         4
     176: aload         7
     178: invokevirtual #115                // Method java/io/File.length:()J
     181: invokeinterface #118,  3          // InterfaceMethod javax/servlet/http/HttpServletResponse.setContentLengthLong:(J)V
     186: aload         4
     188: aload_0
     189: getfield      #10                 // Field mimeTypes:Lorg/eclipse/jetty/http/MimeTypes;
     192: aload         7
     194: invokevirtual #122                // Method java/io/File.getName:()Ljava/lang/String;
     197: invokevirtual #125                // Method org/eclipse/jetty/http/MimeTypes.getMimeByExtension:(Ljava/lang/String;)Ljava/lang/String;
     200: invokeinterface #93,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.setContentType:(Ljava/lang/String;)V
     205: aload         7
     207: invokevirtual #115                // Method java/io/File.length:()J
     210: iload         5
     212: i2l
     213: lcmp
     214: ifge          249
     217: aload         4
     219: invokeinterface #128,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
     224: checkcast     #132                // class org/eclipse/jetty/server/HttpOutput
     227: aload         7
     229: invokevirtual #134                // Method java/io/File.toPath:()Ljava/nio/file/Path;
     232: iconst_1
     233: anewarray     #138                // class java/nio/file/OpenOption
     236: dup
     237: iconst_0
     238: getstatic     #140                // Field java/nio/file/StandardOpenOption.READ:Ljava/nio/file/StandardOpenOption;
     241: aastore
     242: invokestatic  #146                // Method java/nio/channels/FileChannel.open:(Ljava/nio/file/Path;[Ljava/nio/file/OpenOption;)Ljava/nio/channels/FileChannel;
     245: invokevirtual #152                // Method org/eclipse/jetty/server/HttpOutput.sendContent:(Ljava/nio/channels/ReadableByteChannel;)V
     248: return
     249: aload_3
     250: invokeinterface #156,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.startAsync:()Ljavax/servlet/AsyncContext;
     255: astore        8
     257: new           #160                // class org/eclipse/jetty/demos/FastFileServer$FastFileHandler$1
     260: dup
     261: aload_0
     262: aload         8
     264: invokespecial #162                // Method org/eclipse/jetty/demos/FastFileServer$FastFileHandler$1."<init>":(Lorg/eclipse/jetty/demos/FastFileServer$FastFileHandler;Ljavax/servlet/AsyncContext;)V
     267: astore        9
     269: aload         7
     271: invokevirtual #115                // Method java/io/File.length:()J
     274: iload         6
     276: i2l
     277: lcmp
     278: ifge          315
     281: aload         4
     283: invokeinterface #128,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
     288: checkcast     #132                // class org/eclipse/jetty/server/HttpOutput
     291: aload         7
     293: invokevirtual #134                // Method java/io/File.toPath:()Ljava/nio/file/Path;
     296: iconst_1
     297: anewarray     #138                // class java/nio/file/OpenOption
     300: dup
     301: iconst_0
     302: getstatic     #140                // Field java/nio/file/StandardOpenOption.READ:Ljava/nio/file/StandardOpenOption;
     305: aastore
     306: invokestatic  #146                // Method java/nio/channels/FileChannel.open:(Ljava/nio/file/Path;[Ljava/nio/file/OpenOption;)Ljava/nio/channels/FileChannel;
     309: aload         9
     311: invokevirtual #165                // Method org/eclipse/jetty/server/HttpOutput.sendContent:(Ljava/nio/channels/ReadableByteChannel;Lorg/eclipse/jetty/util/Callback;)V
     314: return
     315: new           #168                // class java/io/RandomAccessFile
     318: dup
     319: aload         7
     321: ldc           #170                // String r
     323: invokespecial #172                // Method java/io/RandomAccessFile."<init>":(Ljava/io/File;Ljava/lang/String;)V
     326: astore        11
     328: aload         11
     330: invokevirtual #173                // Method java/io/RandomAccessFile.getChannel:()Ljava/nio/channels/FileChannel;
     333: getstatic     #177                // Field java/nio/channels/FileChannel$MapMode.READ_ONLY:Ljava/nio/channels/FileChannel$MapMode;
     336: lconst_0
     337: aload         11
     339: invokevirtual #183                // Method java/io/RandomAccessFile.length:()J
     342: invokevirtual #184                // Method java/nio/channels/FileChannel.map:(Ljava/nio/channels/FileChannel$MapMode;JJ)Ljava/nio/MappedByteBuffer;
     345: astore        10
     347: aload         11
     349: invokevirtual #188                // Method java/io/RandomAccessFile.close:()V
     352: goto          377
     355: astore        12
     357: aload         11
     359: invokevirtual #188                // Method java/io/RandomAccessFile.close:()V
     362: goto          374
     365: astore        13
     367: aload         12
     369: aload         13
     371: invokevirtual #193                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     374: aload         12
     376: athrow
     377: aload         10
     379: invokevirtual #197                // Method java/nio/ByteBuffer.asReadOnlyBuffer:()Ljava/nio/ByteBuffer;
     382: astore        10
     384: aload         4
     386: invokeinterface #128,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.getOutputStream:()Ljavax/servlet/ServletOutputStream;
     391: checkcast     #132                // class org/eclipse/jetty/server/HttpOutput
     394: aload         10
     396: aload         9
     398: invokevirtual #203                // Method org/eclipse/jetty/server/HttpOutput.sendContent:(Ljava/nio/ByteBuffer;Lorg/eclipse/jetty/util/Callback;)V
     401: return
    Exception table:
       from    to  target type
         328   347   355   Class java/lang/Throwable
         357   362   365   Class java/lang/Throwable
}

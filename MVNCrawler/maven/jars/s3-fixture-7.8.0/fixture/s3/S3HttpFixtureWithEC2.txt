Compiled from "S3HttpFixtureWithEC2.java"
public class fixture.s3.S3HttpFixtureWithEC2 extends fixture.s3.S3HttpFixtureWithSessionToken {
  private static final java.lang.String EC2_PATH;

  private static final java.lang.String EC2_PROFILE;

  fixture.s3.S3HttpFixtureWithEC2(java.lang.String[]) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method fixture/s3/S3HttpFixtureWithSessionToken."<init>":([Ljava/lang/String;)V
       5: return

  protected com.sun.net.httpserver.HttpHandler createHandler(java.lang.String[]);
    Code:
       0: aload_1
       1: iconst_4
       2: aaload
       3: invokestatic  #7                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;)Ljava/lang/Object;
       6: checkcast     #13                 // class java/lang/String
       9: astore_2
      10: aload_1
      11: iconst_5
      12: aaload
      13: ldc           #15                 // String session token is missing
      15: invokestatic  #17                 // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      18: checkcast     #13                 // class java/lang/String
      21: astore_3
      22: aload_0
      23: aload_1
      24: invokespecial #20                 // Method fixture/s3/S3HttpFixtureWithSessionToken.createHandler:([Ljava/lang/String;)Lcom/sun/net/httpserver/HttpHandler;
      27: astore        4
      29: aload_0
      30: aload_2
      31: aload_3
      32: aload         4
      34: invokedynamic #24,  0             // InvokeDynamic #0:handle:(Lfixture/s3/S3HttpFixtureWithEC2;Ljava/lang/String;Ljava/lang/String;Lcom/sun/net/httpserver/HttpHandler;)Lcom/sun/net/httpserver/HttpHandler;
      39: areturn

  protected java.lang.String buildCredentialResponse(java.lang.String, java.lang.String);
    Code:
       0: new           #28                 // class java/lang/StringBuilder
       3: dup
       4: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
       7: ldc           #33                 // String {\"AccessKeyId\": \"
       9: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      12: aload_1
      13: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      16: ldc           #39                 // String \",\"Expiration\": \"
      18: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      21: invokestatic  #41                 // Method java/time/ZonedDateTime.now:()Ljava/time/ZonedDateTime;
      24: lconst_1
      25: invokevirtual #47                 // Method java/time/ZonedDateTime.plusDays:(J)Ljava/time/ZonedDateTime;
      28: getstatic     #51                 // Field java/time/format/DateTimeFormatter.ISO_DATE_TIME:Ljava/time/format/DateTimeFormatter;
      31: invokevirtual #57                 // Method java/time/ZonedDateTime.format:(Ljava/time/format/DateTimeFormatter;)Ljava/lang/String;
      34: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: ldc           #61                 // String \",\"RoleArn\": \"arn\",\"SecretAccessKey\": \"secret\",\"Token\": \"
      39: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: aload_2
      43: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: ldc           #63                 // String \"}
      48: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      51: invokevirtual #65                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      54: areturn

  public static void main(java.lang.String[]) throws java.lang.Exception;
    Code:
       0: aload_0
       1: ifnull        11
       4: aload_0
       5: arraylength
       6: bipush        6
       8: if_icmpge     21
      11: new           #69                 // class java/lang/IllegalArgumentException
      14: dup
      15: ldc           #71                 // String S3HttpFixtureWithEC2 expects 6 arguments [address, port, bucket, base path, ec2 access id, ec2 session token]
      17: invokespecial #73                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      20: athrow
      21: new           #76                 // class fixture/s3/S3HttpFixtureWithEC2
      24: dup
      25: aload_0
      26: invokespecial #78                 // Method "<init>":([Ljava/lang/String;)V
      29: astore_1
      30: aload_1
      31: invokevirtual #79                 // Method start:()V
      34: return

  private void lambda$createHandler$0(java.lang.String, java.lang.String, com.sun.net.httpserver.HttpHandler, com.sun.net.httpserver.HttpExchange) throws java.io.IOException;
    Code:
       0: aload         4
       2: invokevirtual #82                 // Method com/sun/net/httpserver/HttpExchange.getRequestURI:()Ljava/net/URI;
       5: invokevirtual #88                 // Method java/net/URI.getPath:()Ljava/lang/String;
       8: astore        5
      10: ldc           #93                 // String GET
      12: aload         4
      14: invokevirtual #95                 // Method com/sun/net/httpserver/HttpExchange.getRequestMethod:()Ljava/lang/String;
      17: invokevirtual #98                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      20: ifeq          216
      23: aload         5
      25: ldc           #102                // String /latest/meta-data/iam/security-credentials/
      27: invokevirtual #104                // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      30: ifeq          216
      33: aload         5
      35: ldc           #102                // String /latest/meta-data/iam/security-credentials/
      37: invokevirtual #98                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      40: ifeq          96
      43: ldc           #108                // String ec2Profile
      45: getstatic     #110                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
      48: invokevirtual #116                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      51: astore        6
      53: aload         4
      55: invokevirtual #120                // Method com/sun/net/httpserver/HttpExchange.getResponseHeaders:()Lcom/sun/net/httpserver/Headers;
      58: ldc           #124                // String Content-Type
      60: ldc           #126                // String text/plain
      62: invokevirtual #128                // Method com/sun/net/httpserver/Headers.add:(Ljava/lang/String;Ljava/lang/String;)V
      65: aload         4
      67: getstatic     #134                // Field org/elasticsearch/rest/RestStatus.OK:Lorg/elasticsearch/rest/RestStatus;
      70: invokevirtual #140                // Method org/elasticsearch/rest/RestStatus.getStatus:()I
      73: aload         6
      75: arraylength
      76: i2l
      77: invokevirtual #144                // Method com/sun/net/httpserver/HttpExchange.sendResponseHeaders:(IJ)V
      80: aload         4
      82: invokevirtual #148                // Method com/sun/net/httpserver/HttpExchange.getResponseBody:()Ljava/io/OutputStream;
      85: aload         6
      87: invokevirtual #152                // Method java/io/OutputStream.write:([B)V
      90: aload         4
      92: invokevirtual #158                // Method com/sun/net/httpserver/HttpExchange.close:()V
      95: return
      96: aload         5
      98: ldc           #161                // String /latest/meta-data/iam/security-credentials/ec2Profile
     100: invokevirtual #98                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     103: ifeq          163
     106: aload_0
     107: aload_1
     108: aload_2
     109: invokevirtual #163                // Method buildCredentialResponse:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     112: getstatic     #110                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
     115: invokevirtual #116                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
     118: astore        6
     120: aload         4
     122: invokevirtual #120                // Method com/sun/net/httpserver/HttpExchange.getResponseHeaders:()Lcom/sun/net/httpserver/Headers;
     125: ldc           #124                // String Content-Type
     127: ldc           #167                // String application/json
     129: invokevirtual #128                // Method com/sun/net/httpserver/Headers.add:(Ljava/lang/String;Ljava/lang/String;)V
     132: aload         4
     134: getstatic     #134                // Field org/elasticsearch/rest/RestStatus.OK:Lorg/elasticsearch/rest/RestStatus;
     137: invokevirtual #140                // Method org/elasticsearch/rest/RestStatus.getStatus:()I
     140: aload         6
     142: arraylength
     143: i2l
     144: invokevirtual #144                // Method com/sun/net/httpserver/HttpExchange.sendResponseHeaders:(IJ)V
     147: aload         4
     149: invokevirtual #148                // Method com/sun/net/httpserver/HttpExchange.getResponseBody:()Ljava/io/OutputStream;
     152: aload         6
     154: invokevirtual #152                // Method java/io/OutputStream.write:([B)V
     157: aload         4
     159: invokevirtual #158                // Method com/sun/net/httpserver/HttpExchange.close:()V
     162: return
     163: ldc           #169                // String unknown profile
     165: getstatic     #110                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
     168: invokevirtual #116                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
     171: astore        6
     173: aload         4
     175: invokevirtual #120                // Method com/sun/net/httpserver/HttpExchange.getResponseHeaders:()Lcom/sun/net/httpserver/Headers;
     178: ldc           #124                // String Content-Type
     180: ldc           #126                // String text/plain
     182: invokevirtual #128                // Method com/sun/net/httpserver/Headers.add:(Ljava/lang/String;Ljava/lang/String;)V
     185: aload         4
     187: getstatic     #171                // Field org/elasticsearch/rest/RestStatus.NOT_FOUND:Lorg/elasticsearch/rest/RestStatus;
     190: invokevirtual #140                // Method org/elasticsearch/rest/RestStatus.getStatus:()I
     193: aload         6
     195: arraylength
     196: i2l
     197: invokevirtual #144                // Method com/sun/net/httpserver/HttpExchange.sendResponseHeaders:(IJ)V
     200: aload         4
     202: invokevirtual #148                // Method com/sun/net/httpserver/HttpExchange.getResponseBody:()Ljava/io/OutputStream;
     205: aload         6
     207: invokevirtual #152                // Method java/io/OutputStream.write:([B)V
     210: aload         4
     212: invokevirtual #158                // Method com/sun/net/httpserver/HttpExchange.close:()V
     215: return
     216: aload_3
     217: aload         4
     219: invokeinterface #174,  2          // InterfaceMethod com/sun/net/httpserver/HttpHandler.handle:(Lcom/sun/net/httpserver/HttpExchange;)V
     224: return
}

Compiled from "AuthzHttpFilter.java"
public class cn.omisheep.authz.core.auth.ipf.AuthzHttpFilter extends org.springframework.web.filter.OncePerRequestFilter {
  private static final org.slf4j.Logger log;

  private final cn.omisheep.authz.core.auth.ipf.Httpd httpd;

  private final boolean isDashboard;

  private final java.lang.String mappings;

  private static final java.lang.String UNKNOWN;

  private static final java.lang.String X_FORWARDED_FOR;

  private static final java.lang.String PROXY_CLIENT_IP;

  private static final java.lang.String WL_PROXY_CLIENT_IP;

  private static final java.lang.String HTTP_CLIENT_IP;

  private static final java.lang.String HTTP_X_FORWARDED_FOR;

  private static final java.lang.String X_REAL_IP;

  public cn.omisheep.authz.core.auth.ipf.AuthzHttpFilter(cn.omisheep.authz.core.auth.ipf.Httpd, boolean, java.lang.String);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method org/springframework/web/filter/OncePerRequestFilter."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #3                  // Field httpd:Lcn/omisheep/authz/core/auth/ipf/Httpd;
       9: aload_0
      10: iload_2
      11: putfield      #4                  // Field isDashboard:Z
      14: aload_3
      15: iconst_0
      16: aload_3
      17: ldc           #5                  // String /*
      19: invokevirtual #6                  // Method java/lang/String.indexOf:(Ljava/lang/String;)I
      22: invokevirtual #7                  // Method java/lang/String.substring:(II)Ljava/lang/String;
      25: astore        4
      27: aload_3
      28: ldc           #8                  // String /
      30: invokevirtual #9                  // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
      33: ifne          63
      36: aload_0
      37: new           #10                 // class java/lang/StringBuilder
      40: dup
      41: invokespecial #11                 // Method java/lang/StringBuilder."<init>":()V
      44: ldc           #8                  // String /
      46: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      49: aload         4
      51: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      54: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      57: putfield      #14                 // Field mappings:Ljava/lang/String;
      60: goto          69
      63: aload_0
      64: aload         4
      66: putfield      #14                 // Field mappings:Ljava/lang/String;
      69: return

  public void doFilterInternal(javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse, javax.servlet.FilterChain) throws javax.servlet.ServletException, java.io.IOException;
    Code:
       0: aload_1
       1: invokeinterface #15,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getContentType:()Ljava/lang/String;
       6: ldc           #16                 // String multipart/
       8: invokestatic  #17                 // Method org/apache/commons/lang/StringUtils.startsWithIgnoreCase:(Ljava/lang/String;Ljava/lang/String;)Z
      11: ifeq          20
      14: aload_1
      15: astore        4
      17: goto          30
      20: new           #18                 // class cn/omisheep/web/utils/BufferedServletRequestWrapper
      23: dup
      24: aload_1
      25: invokespecial #19                 // Method cn/omisheep/web/utils/BufferedServletRequestWrapper."<init>":(Ljavax/servlet/http/HttpServletRequest;)V
      28: astore        4
      30: aload_0
      31: aload         4
      33: invokespecial #20                 // Method getIp:(Ljavax/servlet/http/HttpServletRequest;)Ljava/lang/String;
      36: astore        5
      38: aload         4
      40: invokeinterface #21,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getRequestURI:()Ljava/lang/String;
      45: astore        6
      47: aload         4
      49: invokeinterface #22,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
      54: astore        7
      56: new           #23                 // class java/util/Date
      59: dup
      60: invokespecial #24                 // Method java/util/Date."<init>":()V
      63: invokevirtual #25                 // Method java/util/Date.getTime:()J
      66: lstore        8
      68: aload         4
      70: invokeinterface #26,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getServletPath:()Ljava/lang/String;
      75: astore        10
      77: getstatic     #27                 // Field cn/omisheep/web/utils/HttpUtils.request:Ljava/lang/ThreadLocal;
      80: aload         4
      82: invokevirtual #28                 // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      85: aload         6
      87: aload_0
      88: getfield      #3                  // Field httpd:Lcn/omisheep/authz/core/auth/ipf/Httpd;
      91: invokevirtual #29                 // Method cn/omisheep/authz/core/auth/ipf/Httpd.getIgnoreSuffix:()[Ljava/lang/String;
      94: invokestatic  #30                 // Method cn/omisheep/authz/core/util/Utils.isIgnoreSuffix:(Ljava/lang/String;[Ljava/lang/String;)Z
      97: ifne          119
     100: aload_0
     101: getfield      #4                  // Field isDashboard:Z
     104: ifeq          179
     107: aload         6
     109: aload_0
     110: getfield      #14                 // Field mappings:Ljava/lang/String;
     113: invokevirtual #9                  // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     116: ifeq          179
     119: new           #31                 // class cn/omisheep/authz/core/auth/ipf/HttpMeta
     122: dup
     123: aload         4
     125: aload         5
     127: aload         6
     129: aload         10
     131: aload         7
     133: new           #23                 // class java/util/Date
     136: dup
     137: invokespecial #24                 // Method java/util/Date."<init>":()V
     140: invokespecial #32                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta."<init>":(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Date;)V
     143: astore        11
     145: aload         11
     147: iconst_1
     148: invokevirtual #33                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta.setIgnore:(Z)V
     151: aload         4
     153: ldc           #34                 // String AU_HTTP_META
     155: aload         11
     157: invokeinterface #35,  3           // InterfaceMethod javax/servlet/http/HttpServletRequest.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     162: aload         11
     164: aload         10
     166: invokevirtual #36                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta.setServletPath:(Ljava/lang/String;)V
     169: aload_3
     170: aload         4
     172: aload_2
     173: invokeinterface #37,  3           // InterfaceMethod javax/servlet/FilterChain.doFilter:(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V
     178: return
     179: aload_0
     180: getfield      #3                  // Field httpd:Lcn/omisheep/authz/core/auth/ipf/Httpd;
     183: aload         7
     185: aload         10
     187: invokevirtual #38                 // Method cn/omisheep/authz/core/auth/ipf/Httpd.getPattern:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     190: astore        11
     192: new           #31                 // class cn/omisheep/authz/core/auth/ipf/HttpMeta
     195: dup
     196: aload         4
     198: aload         5
     200: aload         6
     202: aload         11
     204: ifnonnull     212
     207: aload         10
     209: goto          214
     212: aload         11
     214: aload         7
     216: new           #23                 // class java/util/Date
     219: dup
     220: invokespecial #24                 // Method java/util/Date."<init>":()V
     223: invokespecial #32                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta."<init>":(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Date;)V
     226: astore        12
     228: aload         11
     230: ifnonnull     268
     233: aload         12
     235: ldc           #39                 // String 「普通访问(uri不存在)」 \tmethod: [{}] , ip : [{}] , servletPath: [{}]
     237: iconst_3
     238: anewarray     #40                 // class java/lang/Object
     241: dup
     242: iconst_0
     243: aload         7
     245: aastore
     246: dup
     247: iconst_1
     248: aload         5
     250: aastore
     251: dup
     252: iconst_2
     253: aload         10
     255: aastore
     256: invokevirtual #41                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta.log:(Ljava/lang/String;[Ljava/lang/Object;)V
     259: aload         12
     261: getstatic     #42                 // Field cn/omisheep/authz/core/ExceptionStatus.MISMATCHED_URL:Lcn/omisheep/authz/core/ExceptionStatus;
     264: invokevirtual #43                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta.error:(Lcn/omisheep/authz/core/ExceptionStatus;)Lcn/omisheep/authz/core/auth/ipf/HttpMeta;
     267: pop
     268: aload         12
     270: aload         10
     272: invokevirtual #36                 // Method cn/omisheep/authz/core/auth/ipf/HttpMeta.setServletPath:(Ljava/lang/String;)V
     275: aload         4
     277: ldc           #34                 // String AU_HTTP_META
     279: aload         12
     281: invokeinterface #35,  3           // InterfaceMethod javax/servlet/http/HttpServletRequest.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     286: aload_3
     287: aload         4
     289: aload_2
     290: invokeinterface #37,  3           // InterfaceMethod javax/servlet/FilterChain.doFilter:(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V
     295: return

  private java.lang.String getIp(javax.servlet.http.HttpServletRequest);
    Code:
       0: aload_1
       1: ldc           #45                 // String x-forwarded-for
       3: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
       8: astore_2
       9: aload_2
      10: ifnull        29
      13: aload_2
      14: invokevirtual #47                 // Method java/lang/String.length:()I
      17: ifeq          29
      20: ldc           #48                 // String unknown
      22: aload_2
      23: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      26: ifeq          204
      29: aload_2
      30: ifnull        49
      33: aload_2
      34: invokevirtual #47                 // Method java/lang/String.length:()I
      37: ifeq          49
      40: ldc           #48                 // String unknown
      42: aload_2
      43: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      46: ifeq          58
      49: aload_1
      50: ldc           #50                 // String Proxy-Client-IP
      52: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      57: astore_2
      58: aload_2
      59: ifnull        78
      62: aload_2
      63: invokevirtual #47                 // Method java/lang/String.length:()I
      66: ifeq          78
      69: ldc           #48                 // String unknown
      71: aload_2
      72: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      75: ifeq          87
      78: aload_1
      79: ldc           #51                 // String WL-Proxy-Client-IP
      81: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
      86: astore_2
      87: aload_2
      88: ifnull        107
      91: aload_2
      92: invokevirtual #47                 // Method java/lang/String.length:()I
      95: ifeq          107
      98: ldc           #48                 // String unknown
     100: aload_2
     101: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     104: ifeq          116
     107: aload_1
     108: ldc           #52                 // String HTTP_CLIENT_IP
     110: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     115: astore_2
     116: aload_2
     117: ifnull        136
     120: aload_2
     121: invokevirtual #47                 // Method java/lang/String.length:()I
     124: ifeq          136
     127: ldc           #48                 // String unknown
     129: aload_2
     130: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     133: ifeq          145
     136: aload_1
     137: ldc           #53                 // String HTTP_X_FORWARDED_FOR
     139: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     144: astore_2
     145: aload_2
     146: ifnull        165
     149: aload_2
     150: invokevirtual #47                 // Method java/lang/String.length:()I
     153: ifeq          165
     156: ldc           #48                 // String unknown
     158: aload_2
     159: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     162: ifeq          174
     165: aload_1
     166: ldc           #54                 // String X-Real-IP
     168: invokeinterface #46,  2           // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     173: astore_2
     174: aload_2
     175: ifnull        194
     178: aload_2
     179: invokevirtual #47                 // Method java/lang/String.length:()I
     182: ifeq          194
     185: ldc           #48                 // String unknown
     187: aload_2
     188: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     191: ifeq          267
     194: aload_1
     195: invokeinterface #55,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getRemoteAddr:()Ljava/lang/String;
     200: astore_2
     201: goto          267
     204: aload_2
     205: invokevirtual #47                 // Method java/lang/String.length:()I
     208: bipush        15
     210: if_icmple     267
     213: aload_2
     214: ldc           #56                 // String ,
     216: invokevirtual #57                 // Method java/lang/String.split:(Ljava/lang/String;)[Ljava/lang/String;
     219: astore_3
     220: aload_3
     221: astore        4
     223: aload         4
     225: arraylength
     226: istore        5
     228: iconst_0
     229: istore        6
     231: iload         6
     233: iload         5
     235: if_icmpge     267
     238: aload         4
     240: iload         6
     242: aaload
     243: astore        7
     245: ldc           #48                 // String unknown
     247: aload         7
     249: invokevirtual #49                 // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
     252: ifne          261
     255: aload         7
     257: astore_2
     258: goto          267
     261: iinc          6, 1
     264: goto          231
     267: aload_2
     268: ldc           #58                 // String 0:0:0:0:0:0:0:1
     270: invokevirtual #59                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     273: ifeq          281
     276: ldc           #60                 // String 127.0.0.1
     278: goto          282
     281: aload_2
     282: areturn

  static {};
    Code:
       0: ldc           #44                 // class cn/omisheep/authz/core/auth/ipf/AuthzHttpFilter
       2: invokestatic  #61                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #62                 // Field log:Lorg/slf4j/Logger;
       8: return
}

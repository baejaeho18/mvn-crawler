Compiled from "ProxyServer.java"
public class org.apache.pulsar.websocket.service.ProxyServer {
  private final org.eclipse.jetty.server.Server server;

  private final java.util.List<org.eclipse.jetty.server.Handler> handlers;

  private final org.apache.pulsar.websocket.service.WebSocketProxyConfiguration conf;

  private final org.apache.pulsar.broker.web.WebExecutorThreadPool executorService;

  private org.eclipse.jetty.server.ServerConnector connector;

  private org.eclipse.jetty.server.ServerConnector connectorTls;

  private static final org.slf4j.Logger log;

  public org.apache.pulsar.websocket.service.ProxyServer(org.apache.pulsar.websocket.service.WebSocketProxyConfiguration) throws org.apache.pulsar.client.api.PulsarClientException, java.net.MalformedURLException, org.apache.pulsar.broker.PulsarServerException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method com/google/common/collect/Lists.newArrayList:()Ljava/util/ArrayList;
       8: putfield      #3                  // Field handlers:Ljava/util/List;
      11: aload_0
      12: aload_1
      13: putfield      #4                  // Field conf:Lorg/apache/pulsar/websocket/service/WebSocketProxyConfiguration;
      16: aload_0
      17: new           #5                  // class org/apache/pulsar/broker/web/WebExecutorThreadPool
      20: dup
      21: aload_1
      22: invokevirtual #6                  // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getNumHttpServerThreads:()I
      25: ldc           #7                  // String pulsar-websocket-web
      27: invokespecial #8                  // Method org/apache/pulsar/broker/web/WebExecutorThreadPool."<init>":(ILjava/lang/String;)V
      30: putfield      #9                  // Field executorService:Lorg/apache/pulsar/broker/web/WebExecutorThreadPool;
      33: aload_0
      34: new           #10                 // class org/eclipse/jetty/server/Server
      37: dup
      38: aload_0
      39: getfield      #9                  // Field executorService:Lorg/apache/pulsar/broker/web/WebExecutorThreadPool;
      42: invokespecial #11                 // Method org/eclipse/jetty/server/Server."<init>":(Lorg/eclipse/jetty/util/thread/ThreadPool;)V
      45: putfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
      48: new           #13                 // class java/util/ArrayList
      51: dup
      52: invokespecial #14                 // Method java/util/ArrayList."<init>":()V
      55: astore_2
      56: aload_1
      57: invokevirtual #15                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getWebServicePort:()Ljava/util/Optional;
      60: invokevirtual #16                 // Method java/util/Optional.isPresent:()Z
      63: ifeq          112
      66: aload_0
      67: new           #17                 // class org/eclipse/jetty/server/ServerConnector
      70: dup
      71: aload_0
      72: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
      75: invokespecial #18                 // Method org/eclipse/jetty/server/ServerConnector."<init>":(Lorg/eclipse/jetty/server/Server;)V
      78: putfield      #19                 // Field connector:Lorg/eclipse/jetty/server/ServerConnector;
      81: aload_0
      82: getfield      #19                 // Field connector:Lorg/eclipse/jetty/server/ServerConnector;
      85: aload_1
      86: invokevirtual #15                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getWebServicePort:()Ljava/util/Optional;
      89: invokevirtual #20                 // Method java/util/Optional.get:()Ljava/lang/Object;
      92: checkcast     #21                 // class java/lang/Integer
      95: invokevirtual #22                 // Method java/lang/Integer.intValue:()I
      98: invokevirtual #23                 // Method org/eclipse/jetty/server/ServerConnector.setPort:(I)V
     101: aload_2
     102: aload_0
     103: getfield      #19                 // Field connector:Lorg/eclipse/jetty/server/ServerConnector;
     106: invokeinterface #24,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     111: pop
     112: aload_1
     113: invokevirtual #25                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getWebServicePortTls:()Ljava/util/Optional;
     116: invokevirtual #16                 // Method java/util/Optional.isPresent:()Z
     119: ifeq          213
     122: aload_1
     123: invokevirtual #26                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.isTlsAllowInsecureConnection:()Z
     126: aload_1
     127: invokevirtual #27                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getTlsTrustCertsFilePath:()Ljava/lang/String;
     130: aload_1
     131: invokevirtual #28                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getTlsCertificateFilePath:()Ljava/lang/String;
     134: aload_1
     135: invokevirtual #29                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getTlsKeyFilePath:()Ljava/lang/String;
     138: aload_1
     139: invokevirtual #30                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.isTlsRequireTrustedClientCertOnConnect:()Z
     142: iconst_1
     143: aload_1
     144: invokevirtual #31                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getTlsCertRefreshCheckDurationSec:()J
     147: invokestatic  #32                 // Method org/apache/pulsar/common/util/SecurityUtility.createSslContextFactory:(ZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;ZZJ)Lorg/eclipse/jetty/util/ssl/SslContextFactory;
     150: astore_3
     151: aload_0
     152: new           #17                 // class org/eclipse/jetty/server/ServerConnector
     155: dup
     156: aload_0
     157: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
     160: iconst_m1
     161: iconst_m1
     162: aload_3
     163: invokespecial #33                 // Method org/eclipse/jetty/server/ServerConnector."<init>":(Lorg/eclipse/jetty/server/Server;IILorg/eclipse/jetty/util/ssl/SslContextFactory;)V
     166: putfield      #34                 // Field connectorTls:Lorg/eclipse/jetty/server/ServerConnector;
     169: aload_0
     170: getfield      #34                 // Field connectorTls:Lorg/eclipse/jetty/server/ServerConnector;
     173: aload_1
     174: invokevirtual #25                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getWebServicePortTls:()Ljava/util/Optional;
     177: invokevirtual #20                 // Method java/util/Optional.get:()Ljava/lang/Object;
     180: checkcast     #21                 // class java/lang/Integer
     183: invokevirtual #22                 // Method java/lang/Integer.intValue:()I
     186: invokevirtual #23                 // Method org/eclipse/jetty/server/ServerConnector.setPort:(I)V
     189: aload_2
     190: aload_0
     191: getfield      #34                 // Field connectorTls:Lorg/eclipse/jetty/server/ServerConnector;
     194: invokeinterface #24,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     199: pop
     200: goto          213
     203: astore_3
     204: new           #36                 // class org/apache/pulsar/broker/PulsarServerException
     207: dup
     208: aload_3
     209: invokespecial #37                 // Method org/apache/pulsar/broker/PulsarServerException."<init>":(Ljava/lang/Throwable;)V
     212: athrow
     213: aload_2
     214: invokeinterface #38,  1           // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
     219: aload_2
     220: invokedynamic #39,  0             // InvokeDynamic #0:accept:(Ljava/util/List;)Ljava/util/function/Consumer;
     225: invokeinterface #40,  2           // InterfaceMethod java/util/stream/Stream.forEach:(Ljava/util/function/Consumer;)V
     230: aload_0
     231: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
     234: aload_2
     235: aload_2
     236: invokeinterface #41,  1           // InterfaceMethod java/util/List.size:()I
     241: anewarray     #17                 // class org/eclipse/jetty/server/ServerConnector
     244: invokeinterface #42,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     249: checkcast     #43                 // class "[Lorg/eclipse/jetty/server/Connector;"
     252: invokevirtual #44                 // Method org/eclipse/jetty/server/Server.setConnectors:([Lorg/eclipse/jetty/server/Connector;)V
     255: return
    Exception table:
       from    to  target type
         122   200   203   Class java/lang/Exception

  public void addWebSocketServlet(java.lang.String, javax.servlet.Servlet) throws javax.servlet.ServletException, javax.websocket.DeploymentException;
    Code:
       0: new           #45                 // class org/eclipse/jetty/servlet/ServletHolder
       3: dup
       4: ldc           #46                 // String ws-events
       6: aload_2
       7: invokespecial #47                 // Method org/eclipse/jetty/servlet/ServletHolder."<init>":(Ljava/lang/String;Ljavax/servlet/Servlet;)V
      10: astore_3
      11: new           #48                 // class org/eclipse/jetty/servlet/ServletContextHandler
      14: dup
      15: iconst_1
      16: invokespecial #49                 // Method org/eclipse/jetty/servlet/ServletContextHandler."<init>":(I)V
      19: astore        4
      21: aload         4
      23: aload_1
      24: invokevirtual #50                 // Method org/eclipse/jetty/servlet/ServletContextHandler.setContextPath:(Ljava/lang/String;)V
      27: aload         4
      29: aload_3
      30: ldc           #51                 // String /*
      32: invokevirtual #52                 // Method org/eclipse/jetty/servlet/ServletContextHandler.addServlet:(Lorg/eclipse/jetty/servlet/ServletHolder;Ljava/lang/String;)V
      35: aload_0
      36: getfield      #3                  // Field handlers:Ljava/util/List;
      39: aload         4
      41: invokeinterface #24,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      46: pop
      47: return

  public void addRestResources(java.lang.String, java.lang.String, java.lang.String, java.lang.Object);
    Code:
       0: new           #53                 // class org/glassfish/jersey/server/ResourceConfig
       3: dup
       4: invokespecial #54                 // Method org/glassfish/jersey/server/ResourceConfig."<init>":()V
       7: astore        5
       9: aload         5
      11: iconst_2
      12: anewarray     #55                 // class java/lang/String
      15: dup
      16: iconst_0
      17: ldc           #56                 // String jersey.config.server.provider.packages
      19: aastore
      20: dup
      21: iconst_1
      22: aload_2
      23: aastore
      24: invokevirtual #57                 // Method org/glassfish/jersey/server/ResourceConfig.packages:([Ljava/lang/String;)Lorg/glassfish/jersey/server/ResourceConfig;
      27: pop
      28: aload         5
      30: ldc           #58                 // class org/apache/pulsar/broker/web/JsonMapperProvider
      32: invokevirtual #59                 // Method org/glassfish/jersey/server/ResourceConfig.register:(Ljava/lang/Class;)Lorg/glassfish/jersey/server/ResourceConfig;
      35: pop
      36: new           #45                 // class org/eclipse/jetty/servlet/ServletHolder
      39: dup
      40: new           #60                 // class org/glassfish/jersey/servlet/ServletContainer
      43: dup
      44: aload         5
      46: invokespecial #61                 // Method org/glassfish/jersey/servlet/ServletContainer."<init>":(Lorg/glassfish/jersey/server/ResourceConfig;)V
      49: invokespecial #62                 // Method org/eclipse/jetty/servlet/ServletHolder."<init>":(Ljavax/servlet/Servlet;)V
      52: astore        6
      54: aload         6
      56: iconst_1
      57: invokevirtual #63                 // Method org/eclipse/jetty/servlet/ServletHolder.setAsyncSupported:(Z)V
      60: new           #48                 // class org/eclipse/jetty/servlet/ServletContextHandler
      63: dup
      64: iconst_1
      65: invokespecial #49                 // Method org/eclipse/jetty/servlet/ServletContextHandler."<init>":(I)V
      68: astore        7
      70: aload         7
      72: aload_1
      73: invokevirtual #50                 // Method org/eclipse/jetty/servlet/ServletContextHandler.setContextPath:(Ljava/lang/String;)V
      76: aload         7
      78: aload         6
      80: ldc           #51                 // String /*
      82: invokevirtual #52                 // Method org/eclipse/jetty/servlet/ServletContextHandler.addServlet:(Lorg/eclipse/jetty/servlet/ServletHolder;Ljava/lang/String;)V
      85: aload         7
      87: aload_3
      88: aload         4
      90: invokevirtual #64                 // Method org/eclipse/jetty/servlet/ServletContextHandler.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
      93: aload_0
      94: getfield      #3                  // Field handlers:Ljava/util/List;
      97: aload         7
      99: invokeinterface #24,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     104: pop
     105: return

  public void start() throws org.apache.pulsar.broker.PulsarServerException;
    Code:
       0: getstatic     #65                 // Field log:Lorg/slf4j/Logger;
       3: ldc           #66                 // String Starting web socket proxy at port {}
       5: aload_0
       6: getfield      #4                  // Field conf:Lorg/apache/pulsar/websocket/service/WebSocketProxyConfiguration;
       9: invokevirtual #15                 // Method org/apache/pulsar/websocket/service/WebSocketProxyConfiguration.getWebServicePort:()Ljava/util/Optional;
      12: invokevirtual #20                 // Method java/util/Optional.get:()Ljava/lang/Object;
      15: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      20: new           #68                 // class org/eclipse/jetty/server/handler/RequestLogHandler
      23: dup
      24: invokespecial #69                 // Method org/eclipse/jetty/server/handler/RequestLogHandler."<init>":()V
      27: astore_1
      28: new           #70                 // class org/eclipse/jetty/server/Slf4jRequestLog
      31: dup
      32: invokespecial #71                 // Method org/eclipse/jetty/server/Slf4jRequestLog."<init>":()V
      35: astore_2
      36: aload_2
      37: iconst_1
      38: invokevirtual #72                 // Method org/eclipse/jetty/server/Slf4jRequestLog.setExtended:(Z)V
      41: aload_2
      42: invokestatic  #73                 // Method java/util/TimeZone.getDefault:()Ljava/util/TimeZone;
      45: invokevirtual #74                 // Method java/util/TimeZone.getID:()Ljava/lang/String;
      48: invokevirtual #75                 // Method org/eclipse/jetty/server/Slf4jRequestLog.setLogTimeZone:(Ljava/lang/String;)V
      51: aload_2
      52: iconst_1
      53: invokevirtual #76                 // Method org/eclipse/jetty/server/Slf4jRequestLog.setLogLatency:(Z)V
      56: aload_1
      57: aload_2
      58: invokevirtual #77                 // Method org/eclipse/jetty/server/handler/RequestLogHandler.setRequestLog:(Lorg/eclipse/jetty/server/RequestLog;)V
      61: aload_0
      62: getfield      #3                  // Field handlers:Ljava/util/List;
      65: iconst_0
      66: new           #78                 // class org/eclipse/jetty/server/handler/ContextHandlerCollection
      69: dup
      70: invokespecial #79                 // Method org/eclipse/jetty/server/handler/ContextHandlerCollection."<init>":()V
      73: invokeinterface #80,  3           // InterfaceMethod java/util/List.add:(ILjava/lang/Object;)V
      78: aload_0
      79: getfield      #3                  // Field handlers:Ljava/util/List;
      82: aload_1
      83: invokeinterface #24,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      88: pop
      89: new           #78                 // class org/eclipse/jetty/server/handler/ContextHandlerCollection
      92: dup
      93: invokespecial #79                 // Method org/eclipse/jetty/server/handler/ContextHandlerCollection."<init>":()V
      96: astore_3
      97: aload_3
      98: aload_0
      99: getfield      #3                  // Field handlers:Ljava/util/List;
     102: aload_0
     103: getfield      #3                  // Field handlers:Ljava/util/List;
     106: invokeinterface #41,  1           // InterfaceMethod java/util/List.size:()I
     111: anewarray     #81                 // class org/eclipse/jetty/server/Handler
     114: invokeinterface #42,  2           // InterfaceMethod java/util/List.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     119: checkcast     #82                 // class "[Lorg/eclipse/jetty/server/Handler;"
     122: invokevirtual #83                 // Method org/eclipse/jetty/server/handler/ContextHandlerCollection.setHandlers:([Lorg/eclipse/jetty/server/Handler;)V
     125: new           #84                 // class org/eclipse/jetty/server/handler/HandlerCollection
     128: dup
     129: invokespecial #85                 // Method org/eclipse/jetty/server/handler/HandlerCollection."<init>":()V
     132: astore        4
     134: aload         4
     136: iconst_3
     137: anewarray     #81                 // class org/eclipse/jetty/server/Handler
     140: dup
     141: iconst_0
     142: aload_3
     143: aastore
     144: dup
     145: iconst_1
     146: new           #86                 // class org/eclipse/jetty/server/handler/DefaultHandler
     149: dup
     150: invokespecial #87                 // Method org/eclipse/jetty/server/handler/DefaultHandler."<init>":()V
     153: aastore
     154: dup
     155: iconst_2
     156: aload_1
     157: aastore
     158: invokevirtual #88                 // Method org/eclipse/jetty/server/handler/HandlerCollection.setHandlers:([Lorg/eclipse/jetty/server/Handler;)V
     161: aload_0
     162: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
     165: aload         4
     167: invokevirtual #89                 // Method org/eclipse/jetty/server/Server.setHandler:(Lorg/eclipse/jetty/server/Handler;)V
     170: aload_0
     171: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
     174: invokevirtual #90                 // Method org/eclipse/jetty/server/Server.start:()V
     177: goto          192
     180: astore        5
     182: new           #36                 // class org/apache/pulsar/broker/PulsarServerException
     185: dup
     186: aload         5
     188: invokespecial #37                 // Method org/apache/pulsar/broker/PulsarServerException."<init>":(Ljava/lang/Throwable;)V
     191: athrow
     192: return
    Exception table:
       from    to  target type
         170   177   180   Class java/lang/Exception

  public void stop() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #12                 // Field server:Lorg/eclipse/jetty/server/Server;
       4: invokevirtual #91                 // Method org/eclipse/jetty/server/Server.stop:()V
       7: aload_0
       8: getfield      #9                  // Field executorService:Lorg/apache/pulsar/broker/web/WebExecutorThreadPool;
      11: invokevirtual #92                 // Method org/apache/pulsar/broker/web/WebExecutorThreadPool.stop:()V
      14: return

  public java.util.Optional<java.lang.Integer> getListenPortHTTP();
    Code:
       0: aload_0
       1: getfield      #19                 // Field connector:Lorg/eclipse/jetty/server/ServerConnector;
       4: ifnull        21
       7: aload_0
       8: getfield      #19                 // Field connector:Lorg/eclipse/jetty/server/ServerConnector;
      11: invokevirtual #93                 // Method org/eclipse/jetty/server/ServerConnector.getLocalPort:()I
      14: invokestatic  #94                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      17: invokestatic  #95                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
      20: areturn
      21: invokestatic  #96                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      24: areturn

  public java.util.Optional<java.lang.Integer> getListenPortHTTPS();
    Code:
       0: aload_0
       1: getfield      #34                 // Field connectorTls:Lorg/eclipse/jetty/server/ServerConnector;
       4: ifnull        21
       7: aload_0
       8: getfield      #34                 // Field connectorTls:Lorg/eclipse/jetty/server/ServerConnector;
      11: invokevirtual #93                 // Method org/eclipse/jetty/server/ServerConnector.getLocalPort:()I
      14: invokestatic  #94                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      17: invokestatic  #95                 // Method java/util/Optional.of:(Ljava/lang/Object;)Ljava/util/Optional;
      20: areturn
      21: invokestatic  #96                 // Method java/util/Optional.empty:()Ljava/util/Optional;
      24: areturn

  private static void lambda$new$0(java.util.List, org.eclipse.jetty.server.ServerConnector);
    Code:
       0: aload_1
       1: sipush        1024
       4: aload_0
       5: invokeinterface #41,  1           // InterfaceMethod java/util/List.size:()I
      10: idiv
      11: invokevirtual #97                 // Method org/eclipse/jetty/server/ServerConnector.setAcceptQueueSize:(I)V
      14: return

  static {};
    Code:
       0: ldc           #98                 // class org/apache/pulsar/websocket/service/ProxyServer
       2: invokestatic  #99                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #65                 // Field log:Lorg/slf4j/Logger;
       8: return
}

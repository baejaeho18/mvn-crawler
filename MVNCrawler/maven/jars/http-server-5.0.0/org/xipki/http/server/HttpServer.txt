Compiled from "HttpServer.java"
public final class org.xipki.http.server.HttpServer implements java.io.Closeable {
  private static final org.slf4j.Logger LOG;

  private static java.lang.Boolean epollAvailable;

  private static java.lang.Boolean kqueueAvailable;

  private final int port;

  private final io.netty.handler.ssl.SslContext sslContext;

  private final int numThreads;

  private int maxRequestBodySize;

  private int maxUriPathSize;

  private org.xipki.http.server.ServletListener servletListener;

  private io.netty.channel.EventLoopGroup bossGroup;

  private io.netty.channel.EventLoopGroup workerGroup;

  private org.xipki.http.servlet.SslReverseProxyMode sslReverseProxyMode;

  public void setSslReverseProxyMode(org.xipki.http.servlet.SslReverseProxyMode);
    Code:
       0: aload_0
       1: aload_1
       2: ifnonnull     11
       5: getstatic     #7                  // Field org/xipki/http/servlet/SslReverseProxyMode.NONE:Lorg/xipki/http/servlet/SslReverseProxyMode;
       8: goto          12
      11: aload_1
      12: putfield      #2                  // Field sslReverseProxyMode:Lorg/xipki/http/servlet/SslReverseProxyMode;
      15: return

  public org.xipki.http.server.HttpServer(io.netty.handler.ssl.SslContext, int, int);
    Code:
       0: aload_0
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc           #10                 // int 2147483647
       7: putfield      #5                  // Field maxRequestBodySize:I
      10: aload_0
      11: ldc           #10                 // int 2147483647
      13: putfield      #4                  // Field maxUriPathSize:I
      16: aload_0
      17: getstatic     #7                  // Field org/xipki/http/servlet/SslReverseProxyMode.NONE:Lorg/xipki/http/servlet/SslReverseProxyMode;
      20: putfield      #2                  // Field sslReverseProxyMode:Lorg/xipki/http/servlet/SslReverseProxyMode;
      23: aload_0
      24: aload_1
      25: putfield      #6                  // Field sslContext:Lio/netty/handler/ssl/SslContext;
      28: aload_0
      29: iload_2
      30: putfield      #11                 // Field port:I
      33: aload_0
      34: iload_3
      35: ifle          42
      38: iload_3
      39: goto          48
      42: invokestatic  #12                 // Method java/lang/Runtime.getRuntime:()Ljava/lang/Runtime;
      45: invokevirtual #13                 // Method java/lang/Runtime.availableProcessors:()I
      48: putfield      #14                 // Field numThreads:I
      51: return

  public void setMaxUriPathSize(int);
    Code:
       0: aload_0
       1: iload_1
       2: ldc           #15                 // String maxUriPathSize
       4: iconst_0
       5: invokestatic  #16                 // Method org/xipki/util/Args.min:(ILjava/lang/String;I)I
       8: putfield      #4                  // Field maxUriPathSize:I
      11: return

  public void setMaxRequestBodySize(int);
    Code:
       0: aload_0
       1: iload_1
       2: ldc           #17                 // String maxRequestBodySize
       4: iconst_0
       5: invokestatic  #16                 // Method org/xipki/util/Args.min:(ILjava/lang/String;I)I
       8: putfield      #5                  // Field maxRequestBodySize:I
      11: return

  public void setServletListener(org.xipki.http.server.ServletListener);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field servletListener:Lorg/xipki/http/server/ServletListener;
       5: return

  public void start();
    Code:
       0: invokestatic  #12                 // Method java/lang/Runtime.getRuntime:()Ljava/lang/Runtime;
       3: invokevirtual #13                 // Method java/lang/Runtime.availableProcessors:()I
       6: istore_1
       7: aconst_null
       8: astore_2
       9: iload_1
      10: iconst_1
      11: if_icmpne     18
      14: iconst_1
      15: goto          23
      18: iload_1
      19: iconst_1
      20: iadd
      21: iconst_2
      22: idiv
      23: istore_3
      24: aload_0
      25: invokevirtual #18                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      28: invokevirtual #19                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      31: astore        4
      33: getstatic     #20                 // Field epollAvailable:Ljava/lang/Boolean;
      36: ifnull        194
      39: getstatic     #20                 // Field epollAvailable:Ljava/lang/Boolean;
      42: invokevirtual #21                 // Method java/lang/Boolean.booleanValue:()Z
      45: ifeq          194
      48: ldc           #22                 // String io.netty.channel.epoll.EpollServerSocketChannel
      50: iconst_0
      51: aload         4
      53: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
      56: astore_2
      57: ldc           #24                 // String io.netty.channel.epoll.EpollEventLoopGroup
      59: iconst_1
      60: aload         4
      62: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
      65: astore        5
      67: aload         5
      69: iconst_1
      70: anewarray     #25                 // class java/lang/Class
      73: dup
      74: iconst_0
      75: getstatic     #26                 // Field java/lang/Integer.TYPE:Ljava/lang/Class;
      78: aastore
      79: invokevirtual #27                 // Method java/lang/Class.getConstructor:([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
      82: astore        6
      84: aload_0
      85: aload         6
      87: iconst_1
      88: anewarray     #28                 // class java/lang/Object
      91: dup
      92: iconst_0
      93: iload_3
      94: invokestatic  #29                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      97: aastore
      98: invokevirtual #30                 // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
     101: checkcast     #31                 // class io/netty/channel/EventLoopGroup
     104: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     107: aload_0
     108: aload         6
     110: iconst_1
     111: anewarray     #28                 // class java/lang/Object
     114: dup
     115: iconst_0
     116: aload_0
     117: getfield      #14                 // Field numThreads:I
     120: invokestatic  #29                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     123: aastore
     124: invokevirtual #30                 // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
     127: checkcast     #31                 // class io/netty/channel/EventLoopGroup
     130: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     133: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     136: ldc           #34                 // String use Epoll Transport
     138: invokeinterface #35,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     143: goto          348
     146: astore        5
     148: aload         5
     150: instanceof    #37                 // class java/lang/ClassNotFoundException
     153: ifeq          169
     156: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     159: ldc           #38                 // String epoll linux is not in classpath
     161: invokeinterface #35,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     166: goto          179
     169: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     172: aload         5
     174: ldc           #39                 // String could not use Epoll transport
     176: invokestatic  #40                 // Method org/xipki/util/LogUtil.warn:(Lorg/slf4j/Logger;Ljava/lang/Throwable;Ljava/lang/String;)V
     179: aconst_null
     180: astore_2
     181: aload_0
     182: aconst_null
     183: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     186: aload_0
     187: aconst_null
     188: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     191: goto          348
     194: getstatic     #41                 // Field kqueueAvailable:Ljava/lang/Boolean;
     197: ifnull        348
     200: getstatic     #41                 // Field kqueueAvailable:Ljava/lang/Boolean;
     203: invokevirtual #21                 // Method java/lang/Boolean.booleanValue:()Z
     206: ifeq          348
     209: ldc           #42                 // String io.netty.channel.kqueue.KQueueServerSocketChannel
     211: iconst_0
     212: aload         4
     214: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
     217: astore_2
     218: ldc           #43                 // String io.netty.channel.kqueue.KQueueEventLoopGroup
     220: iconst_1
     221: aload         4
     223: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
     226: astore        5
     228: aload         5
     230: iconst_1
     231: anewarray     #25                 // class java/lang/Class
     234: dup
     235: iconst_0
     236: getstatic     #26                 // Field java/lang/Integer.TYPE:Ljava/lang/Class;
     239: aastore
     240: invokevirtual #27                 // Method java/lang/Class.getConstructor:([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
     243: astore        6
     245: aload_0
     246: aload         6
     248: iconst_1
     249: anewarray     #28                 // class java/lang/Object
     252: dup
     253: iconst_0
     254: iload_3
     255: invokestatic  #29                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     258: aastore
     259: invokevirtual #30                 // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
     262: checkcast     #31                 // class io/netty/channel/EventLoopGroup
     265: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     268: aload_0
     269: aload         6
     271: iconst_1
     272: anewarray     #28                 // class java/lang/Object
     275: dup
     276: iconst_0
     277: aload_0
     278: getfield      #14                 // Field numThreads:I
     281: invokestatic  #29                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     284: aastore
     285: invokevirtual #30                 // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
     288: checkcast     #31                 // class io/netty/channel/EventLoopGroup
     291: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     294: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     297: ldc           #44                 // String Use KQueue Transport
     299: invokeinterface #35,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     304: goto          348
     307: astore        5
     309: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     312: ldc           #46                 // String could not use KQueue transport: {}
     314: aload         5
     316: invokevirtual #47                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     319: invokeinterface #48,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     324: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     327: ldc           #49                 // String could not use KQueue transport
     329: aload         5
     331: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     336: aconst_null
     337: astore_2
     338: aload_0
     339: aconst_null
     340: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     343: aload_0
     344: aconst_null
     345: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     348: aload_0
     349: getfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     352: ifnonnull     385
     355: ldc           #51                 // class io/netty/channel/socket/nio/NioServerSocketChannel
     357: astore_2
     358: aload_0
     359: new           #52                 // class io/netty/channel/nio/NioEventLoopGroup
     362: dup
     363: iload_3
     364: invokespecial #53                 // Method io/netty/channel/nio/NioEventLoopGroup."<init>":(I)V
     367: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     370: aload_0
     371: new           #52                 // class io/netty/channel/nio/NioEventLoopGroup
     374: dup
     375: aload_0
     376: getfield      #14                 // Field numThreads:I
     379: invokespecial #53                 // Method io/netty/channel/nio/NioEventLoopGroup."<init>":(I)V
     382: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     385: new           #54                 // class io/netty/bootstrap/ServerBootstrap
     388: dup
     389: invokespecial #55                 // Method io/netty/bootstrap/ServerBootstrap."<init>":()V
     392: astore        5
     394: aload         5
     396: aload_0
     397: getfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
     400: aload_0
     401: getfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
     404: invokevirtual #56                 // Method io/netty/bootstrap/ServerBootstrap.group:(Lio/netty/channel/EventLoopGroup;Lio/netty/channel/EventLoopGroup;)Lio/netty/bootstrap/ServerBootstrap;
     407: aload_2
     408: invokevirtual #57                 // Method io/netty/bootstrap/ServerBootstrap.channel:(Ljava/lang/Class;)Lio/netty/bootstrap/AbstractBootstrap;
     411: checkcast     #54                 // class io/netty/bootstrap/ServerBootstrap
     414: new           #58                 // class io/netty/handler/logging/LoggingHandler
     417: dup
     418: invokespecial #59                 // Method io/netty/handler/logging/LoggingHandler."<init>":()V
     421: invokevirtual #60                 // Method io/netty/bootstrap/ServerBootstrap.handler:(Lio/netty/channel/ChannelHandler;)Lio/netty/bootstrap/AbstractBootstrap;
     424: checkcast     #54                 // class io/netty/bootstrap/ServerBootstrap
     427: new           #61                 // class org/xipki/http/server/HttpServer$NettyHttpServerInitializer
     430: dup
     431: aload_0
     432: invokespecial #62                 // Method org/xipki/http/server/HttpServer$NettyHttpServerInitializer."<init>":(Lorg/xipki/http/server/HttpServer;)V
     435: invokevirtual #63                 // Method io/netty/bootstrap/ServerBootstrap.childHandler:(Lio/netty/channel/ChannelHandler;)Lio/netty/bootstrap/ServerBootstrap;
     438: pop
     439: aload         5
     441: aload_0
     442: getfield      #11                 // Field port:I
     445: invokevirtual #64                 // Method io/netty/bootstrap/ServerBootstrap.bind:(I)Lio/netty/channel/ChannelFuture;
     448: invokeinterface #65,  1           // InterfaceMethod io/netty/channel/ChannelFuture.syncUninterruptibly:()Lio/netty/channel/ChannelFuture;
     453: pop
     454: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     457: ldc           #66                 // String HTTP server is listening on port {}
     459: aload_0
     460: getfield      #11                 // Field port:I
     463: invokestatic  #29                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     466: invokeinterface #67,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     471: return
    Exception table:
       from    to  target type
          48   143   146   Class java/lang/Throwable
         209   304   307   Class java/lang/Exception

  public void shutdown();
    Code:
       0: aload_0
       1: invokevirtual #68                 // Method close:()V
       4: return

  public void close();
    Code:
       0: aload_0
       1: getfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
       4: invokeinterface #69,  1           // InterfaceMethod io/netty/channel/EventLoopGroup.shutdownGracefully:()Lio/netty/util/concurrent/Future;
       9: pop
      10: aload_0
      11: aconst_null
      12: putfield      #32                 // Field bossGroup:Lio/netty/channel/EventLoopGroup;
      15: aload_0
      16: getfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
      19: invokeinterface #69,  1           // InterfaceMethod io/netty/channel/EventLoopGroup.shutdownGracefully:()Lio/netty/util/concurrent/Future;
      24: pop
      25: aload_0
      26: aconst_null
      27: putfield      #33                 // Field workerGroup:Lio/netty/channel/EventLoopGroup;
      30: return

  private static java.lang.Class<?> clazz(java.lang.String, boolean, java.lang.ClassLoader) throws java.lang.ClassNotFoundException;
    Code:
       0: aload_0
       1: iload_1
       2: aload_2
       3: invokestatic  #70                 // Method java/lang/Class.forName:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
       6: areturn

  static io.netty.handler.ssl.SslContext access$000(org.xipki.http.server.HttpServer);
    Code:
       0: aload_0
       1: getfield      #6                  // Field sslContext:Lio/netty/handler/ssl/SslContext;
       4: areturn

  static int access$100(org.xipki.http.server.HttpServer);
    Code:
       0: aload_0
       1: getfield      #5                  // Field maxRequestBodySize:I
       4: ireturn

  static int access$300(org.xipki.http.server.HttpServer);
    Code:
       0: aload_0
       1: getfield      #4                  // Field maxUriPathSize:I
       4: ireturn

  static org.xipki.http.server.ServletListener access$400(org.xipki.http.server.HttpServer);
    Code:
       0: aload_0
       1: getfield      #3                  // Field servletListener:Lorg/xipki/http/server/ServletListener;
       4: areturn

  static org.xipki.http.servlet.SslReverseProxyMode access$500(org.xipki.http.server.HttpServer);
    Code:
       0: aload_0
       1: getfield      #2                  // Field sslReverseProxyMode:Lorg/xipki/http/servlet/SslReverseProxyMode;
       4: areturn

  static org.slf4j.Logger access$600();
    Code:
       0: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #71                 // class org/xipki/http/server/HttpServer
       2: invokestatic  #72                 // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
       8: ldc           #73                 // String os.name
      10: invokestatic  #74                 // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      13: invokevirtual #75                 // Method java/lang/String.toLowerCase:()Ljava/lang/String;
      16: astore_0
      17: ldc           #71                 // class org/xipki/http/server/HttpServer
      19: invokevirtual #19                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      22: astore_1
      23: aload_0
      24: ldc           #76                 // String linux
      26: invokevirtual #77                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
      29: ifeq          130
      32: ldc           #78                 // String io.netty.channel.epoll.Epoll
      34: iconst_0
      35: aload_1
      36: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
      39: astore_2
      40: aload_2
      41: ldc           #79                 // String isAvailable
      43: iconst_0
      44: anewarray     #25                 // class java/lang/Class
      47: invokevirtual #80                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
      50: astore_3
      51: aload_3
      52: aconst_null
      53: iconst_0
      54: anewarray     #28                 // class java/lang/Object
      57: invokevirtual #81                 // Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
      60: astore        4
      62: aload         4
      64: instanceof    #82                 // class java/lang/Boolean
      67: ifeq          78
      70: aload         4
      72: checkcast     #82                 // class java/lang/Boolean
      75: putstatic     #20                 // Field epollAvailable:Ljava/lang/Boolean;
      78: goto          223
      81: astore_2
      82: aload_2
      83: instanceof    #37                 // class java/lang/ClassNotFoundException
      86: ifeq          102
      89: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
      92: ldc           #38                 // String epoll linux is not in classpath
      94: invokeinterface #35,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
      99: goto          127
     102: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     105: ldc           #83                 // String could not use Epoll transport: {}
     107: aload_2
     108: invokevirtual #84                 // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     111: invokeinterface #48,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     116: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     119: ldc           #39                 // String could not use Epoll transport
     121: aload_2
     122: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     127: goto          223
     130: aload_0
     131: ldc           #85                 // String mac os
     133: invokevirtual #77                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     136: ifne          148
     139: aload_0
     140: ldc           #86                 // String os x
     142: invokevirtual #77                 // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     145: ifeq          223
     148: ldc           #87                 // String io.netty.channel.epoll.kqueue.KQueue
     150: iconst_0
     151: aload_1
     152: invokestatic  #23                 // Method clazz:(Ljava/lang/String;ZLjava/lang/ClassLoader;)Ljava/lang/Class;
     155: astore_2
     156: aload_2
     157: ldc           #79                 // String isAvailable
     159: iconst_0
     160: anewarray     #25                 // class java/lang/Class
     163: invokevirtual #80                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
     166: astore_3
     167: aload_3
     168: aconst_null
     169: iconst_0
     170: anewarray     #28                 // class java/lang/Object
     173: invokevirtual #81                 // Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
     176: astore        4
     178: aload         4
     180: instanceof    #82                 // class java/lang/Boolean
     183: ifeq          194
     186: aload         4
     188: checkcast     #82                 // class java/lang/Boolean
     191: putstatic     #41                 // Field kqueueAvailable:Ljava/lang/Boolean;
     194: goto          223
     197: astore_2
     198: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     201: ldc           #46                 // String could not use KQueue transport: {}
     203: aload_2
     204: invokevirtual #47                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     207: invokeinterface #48,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     212: getstatic     #1                  // Field LOG:Lorg/slf4j/Logger;
     215: ldc           #49                 // String could not use KQueue transport
     217: aload_2
     218: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Throwable;)V
     223: return
    Exception table:
       from    to  target type
          32    78    81   Class java/lang/Throwable
         148   194   197   Class java/lang/Exception
}

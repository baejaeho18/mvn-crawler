Compiled from "ApmServerHealthChecker.java"
class co.elastic.apm.agent.report.ApmServerHealthChecker implements java.lang.Runnable {
  private static final co.elastic.apm.agent.shaded.slf4j.Logger logger;

  private final co.elastic.apm.agent.report.ReporterConfiguration reporterConfiguration;

  co.elastic.apm.agent.report.ApmServerHealthChecker(co.elastic.apm.agent.report.ReporterConfiguration);
    Code:
       0: aload_0
       1: invokespecial #16                 // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
       9: return

  public void run();
    Code:
       0: aconst_null
       1: astore_3
       2: new           #25                 // class java/net/URL
       5: dup
       6: new           #27                 // class java/lang/StringBuilder
       9: dup
      10: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      13: aload_0
      14: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
      17: invokevirtual #34                 // Method co/elastic/apm/agent/report/ReporterConfiguration.getServerUrls:()Ljava/util/List;
      20: iconst_0
      21: invokeinterface #40,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      26: checkcast     #25                 // class java/net/URL
      29: invokevirtual #44                 // Method java/net/URL.toString:()Ljava/lang/String;
      32: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      35: ldc           #50                 // String /
      37: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: invokevirtual #51                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      43: invokespecial #54                 // Method java/net/URL."<init>":(Ljava/lang/String;)V
      46: astore        4
      48: getstatic     #56                 // Field logger:Lco/elastic/apm/agent/shaded/slf4j/Logger;
      51: invokeinterface #62,  1           // InterfaceMethod co/elastic/apm/agent/shaded/slf4j/Logger.isDebugEnabled:()Z
      56: ifeq          71
      59: getstatic     #56                 // Field logger:Lco/elastic/apm/agent/shaded/slf4j/Logger;
      62: ldc           #64                 // String Starting healthcheck to {}
      64: aload         4
      66: invokeinterface #68,  3           // InterfaceMethod co/elastic/apm/agent/shaded/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
      71: aload         4
      73: invokevirtual #74                 // Method java/net/URL.openConnection:()Ljava/net/URLConnection;
      76: checkcast     #70                 // class java/net/HttpURLConnection
      79: astore_3
      80: aload_0
      81: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
      84: invokevirtual #77                 // Method co/elastic/apm/agent/report/ReporterConfiguration.isVerifyServerCert:()Z
      87: ifne          105
      90: aload_3
      91: instanceof    #79                 // class javax/net/ssl/HttpsURLConnection
      94: ifeq          105
      97: aload_0
      98: aload_3
      99: checkcast     #79                 // class javax/net/ssl/HttpsURLConnection
     102: invokespecial #83                 // Method trustAll:(Ljavax/net/ssl/HttpsURLConnection;)V
     105: aload_0
     106: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
     109: invokevirtual #86                 // Method co/elastic/apm/agent/report/ReporterConfiguration.getSecretToken:()Ljava/lang/String;
     112: ifnull        146
     115: aload_3
     116: ldc           #88                 // String Authorization
     118: new           #27                 // class java/lang/StringBuilder
     121: dup
     122: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     125: ldc           #90                 // String Bearer
     127: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     130: aload_0
     131: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
     134: invokevirtual #86                 // Method co/elastic/apm/agent/report/ReporterConfiguration.getSecretToken:()Ljava/lang/String;
     137: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     140: invokevirtual #51                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     143: invokevirtual #94                 // Method java/net/HttpURLConnection.setRequestProperty:(Ljava/lang/String;Ljava/lang/String;)V
     146: aload_3
     147: ldc           #96                 // String User-Agent
     149: new           #27                 // class java/lang/StringBuilder
     152: dup
     153: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
     156: ldc           #98                 // String java-agent/
     158: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: invokestatic  #103                // Method co/elastic/apm/agent/util/VersionUtils.getAgentVersion:()Ljava/lang/String;
     164: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     167: invokevirtual #51                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     170: invokevirtual #94                 // Method java/net/HttpURLConnection.setRequestProperty:(Ljava/lang/String;Ljava/lang/String;)V
     173: aload_3
     174: aload_0
     175: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
     178: invokevirtual #107                // Method co/elastic/apm/agent/report/ReporterConfiguration.getServerTimeout:()Lco/elastic/apm/agent/configuration/converter/TimeDuration;
     181: invokevirtual #113                // Method co/elastic/apm/agent/configuration/converter/TimeDuration.getMillis:()J
     184: l2i
     185: invokevirtual #117                // Method java/net/HttpURLConnection.setConnectTimeout:(I)V
     188: aload_3
     189: aload_0
     190: getfield      #18                 // Field reporterConfiguration:Lco/elastic/apm/agent/report/ReporterConfiguration;
     193: invokevirtual #107                // Method co/elastic/apm/agent/report/ReporterConfiguration.getServerTimeout:()Lco/elastic/apm/agent/configuration/converter/TimeDuration;
     196: invokevirtual #113                // Method co/elastic/apm/agent/configuration/converter/TimeDuration.getMillis:()J
     199: l2i
     200: invokevirtual #120                // Method java/net/HttpURLConnection.setReadTimeout:(I)V
     203: aload_3
     204: invokevirtual #123                // Method java/net/HttpURLConnection.connect:()V
     207: aload_3
     208: invokevirtual #127                // Method java/net/HttpURLConnection.getResponseCode:()I
     211: istore        5
     213: iload         5
     215: sipush        300
     218: if_icmpge     225
     221: iconst_1
     222: goto          226
     225: iconst_0
     226: istore_1
     227: iload_1
     228: ifne          254
     231: iload         5
     233: sipush        404
     236: if_icmpne     245
     239: ldc           #129                // String It seems like you are using a version of the APM Server which is not compatible with this agent. Please use APM Server 6.5.0 or newer.
     241: astore_2
     242: goto          259
     245: iload         5
     247: invokestatic  #134                // Method java/lang/Integer.toString:(I)Ljava/lang/String;
     250: astore_2
     251: goto          259
     254: aload_3
     255: invokestatic  #140                // Method co/elastic/apm/agent/report/HttpUtils.getBody:(Ljava/net/HttpURLConnection;)Ljava/lang/String;
     258: astore_2
     259: aload_3
     260: ifnull        304
     263: aload_3
     264: invokevirtual #145                // Method java/net/HttpURLConnection.disconnect:()V
     267: goto          304
     270: astore        4
     272: aload         4
     274: invokevirtual #148                // Method java/io/IOException.getMessage:()Ljava/lang/String;
     277: astore_2
     278: iconst_0
     279: istore_1
     280: aload_3
     281: ifnull        304
     284: aload_3
     285: invokevirtual #145                // Method java/net/HttpURLConnection.disconnect:()V
     288: goto          304
     291: astore        6
     293: aload_3
     294: ifnull        301
     297: aload_3
     298: invokevirtual #145                // Method java/net/HttpURLConnection.disconnect:()V
     301: aload         6
     303: athrow
     304: iload_1
     305: ifeq          322
     308: getstatic     #56                 // Field logger:Lco/elastic/apm/agent/shaded/slf4j/Logger;
     311: ldc           #152                // String Elastic APM server is available: {}
     313: aload_2
     314: invokeinterface #155,  3          // InterfaceMethod co/elastic/apm/agent/shaded/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     319: goto          333
     322: getstatic     #56                 // Field logger:Lco/elastic/apm/agent/shaded/slf4j/Logger;
     325: ldc           #157                // String Elastic APM server is not available ({})
     327: aload_2
     328: invokeinterface #160,  3          // InterfaceMethod co/elastic/apm/agent/shaded/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     333: return
    Exception table:
       from    to  target type
           2   259   270   Class java/io/IOException
           2   259   291   any
         270   280   291   any
         291   293   291   any

  private void trustAll(javax.net.ssl.HttpsURLConnection);
    Code:
       0: invokestatic  #178                // Method co/elastic/apm/agent/report/SslUtils.getTrustAllSocketFactory:()Ljavax/net/ssl/SSLSocketFactory;
       3: astore_2
       4: aload_2
       5: ifnull        20
       8: aload_1
       9: invokestatic  #182                // Method co/elastic/apm/agent/report/SslUtils.getTrustAllHostnameVerifyer:()Ljavax/net/ssl/HostnameVerifier;
      12: invokevirtual #186                // Method javax/net/ssl/HttpsURLConnection.setHostnameVerifier:(Ljavax/net/ssl/HostnameVerifier;)V
      15: aload_1
      16: aload_2
      17: invokevirtual #190                // Method javax/net/ssl/HttpsURLConnection.setSSLSocketFactory:(Ljavax/net/ssl/SSLSocketFactory;)V
      20: return

  static {};
    Code:
       0: ldc           #2                  // class co/elastic/apm/agent/report/ApmServerHealthChecker
       2: invokestatic  #202                // Method co/elastic/apm/agent/shaded/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lco/elastic/apm/agent/shaded/slf4j/Logger;
       5: putstatic     #56                 // Field logger:Lco/elastic/apm/agent/shaded/slf4j/Logger;
       8: return
}

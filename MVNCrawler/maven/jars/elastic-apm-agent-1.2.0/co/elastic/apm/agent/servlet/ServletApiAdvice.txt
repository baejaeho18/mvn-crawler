Compiled from "ServletApiAdvice.java"
public class co.elastic.apm.agent.servlet.ServletApiAdvice {
  public static co.elastic.apm.agent.servlet.ServletTransactionHelper servletTransactionHelper;

  public static co.elastic.apm.agent.impl.ElasticApmTracer tracer;

  public static java.lang.ThreadLocal<java.lang.Boolean> excluded;

  public co.elastic.apm.agent.servlet.ServletApiAdvice();
    Code:
       0: aload_0
       1: invokespecial #39                 // Method java/lang/Object."<init>":()V
       4: return

  static void init(co.elastic.apm.agent.impl.ElasticApmTracer);
    Code:
       0: aload_0
       1: putstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
       4: new           #47                 // class co/elastic/apm/agent/servlet/ServletTransactionHelper
       7: dup
       8: aload_0
       9: invokespecial #49                 // Method co/elastic/apm/agent/servlet/ServletTransactionHelper."<init>":(Lco/elastic/apm/agent/impl/ElasticApmTracer;)V
      12: putstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
      15: return

  public static void onEnterServletService(javax.servlet.ServletRequest, co.elastic.apm.agent.impl.transaction.Transaction, co.elastic.apm.agent.impl.Scope);
    Code:
       0: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
       3: ifnonnull     7
       6: return
       7: aload_0
       8: getstatic     #66                 // Field co/elastic/apm/agent/servlet/ServletTransactionHelper.TRANSACTION_ATTRIBUTE:Ljava/lang/String;
      11: invokeinterface #72,  2           // InterfaceMethod javax/servlet/ServletRequest.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      16: checkcast     #74                 // class co/elastic/apm/agent/impl/transaction/Transaction
      19: astore_3
      20: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
      23: invokevirtual #80                 // Method co/elastic/apm/agent/impl/ElasticApmTracer.currentTransaction:()Lco/elastic/apm/agent/impl/transaction/Transaction;
      26: ifnonnull     38
      29: aload_3
      30: ifnull        38
      33: aload_3
      34: invokevirtual #84                 // Method co/elastic/apm/agent/impl/transaction/Transaction.activateInScope:()Lco/elastic/apm/agent/impl/Scope;
      37: astore_2
      38: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
      41: ifnull        366
      44: aload_0
      45: instanceof    #86                 // class javax/servlet/http/HttpServletRequest
      48: ifeq          366
      51: aload_0
      52: invokeinterface #90,  1           // InterfaceMethod javax/servlet/ServletRequest.getDispatcherType:()Ljavax/servlet/DispatcherType;
      57: getstatic     #96                 // Field javax/servlet/DispatcherType.REQUEST:Ljavax/servlet/DispatcherType;
      60: if_acmpne     366
      63: getstatic     #102                // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      66: getstatic     #104                // Field excluded:Ljava/lang/ThreadLocal;
      69: invokevirtual #110                // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
      72: invokevirtual #114                // Method java/lang/Boolean.equals:(Ljava/lang/Object;)Z
      75: ifne          366
      78: aload_0
      79: checkcast     #86                 // class javax/servlet/http/HttpServletRequest
      82: astore        4
      84: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
      87: aload         4
      89: invokeinterface #118,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getServletPath:()Ljava/lang/String;
      94: aload         4
      96: invokeinterface #121,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getPathInfo:()Ljava/lang/String;
     101: aload         4
     103: invokeinterface #124,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getRequestURI:()Ljava/lang/String;
     108: aload         4
     110: ldc           #126                // String User-Agent
     112: invokeinterface #130,  2          // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     117: aload         4
     119: ldc           #132                // String elastic-apm-traceparent
     121: invokeinterface #130,  2          // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     126: invokevirtual #136                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.onBefore:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lco/elastic/apm/agent/impl/transaction/Transaction;
     129: astore_1
     130: aload_1
     131: ifnonnull     144
     134: getstatic     #104                // Field excluded:Ljava/lang/ThreadLocal;
     137: getstatic     #102                // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
     140: invokevirtual #140                // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
     143: return
     144: aload_1
     145: invokevirtual #144                // Method co/elastic/apm/agent/impl/transaction/Transaction.getContext:()Lco/elastic/apm/agent/impl/context/TransactionContext;
     148: invokevirtual #150                // Method co/elastic/apm/agent/impl/context/TransactionContext.getRequest:()Lco/elastic/apm/agent/impl/context/Request;
     151: astore        5
     153: aload_1
     154: invokevirtual #154                // Method co/elastic/apm/agent/impl/transaction/Transaction.isSampled:()Z
     157: ifeq          296
     160: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
     163: ldc           #156                // class co/elastic/apm/agent/web/WebConfiguration
     165: invokevirtual #160                // Method co/elastic/apm/agent/impl/ElasticApmTracer.getConfig:(Ljava/lang/Class;)Lco/elastic/apm/agent/shaded/stagemonitor/configuration/ConfigurationOptionProvider;
     168: checkcast     #156                // class co/elastic/apm/agent/web/WebConfiguration
     171: invokevirtual #163                // Method co/elastic/apm/agent/web/WebConfiguration.isCaptureHeaders:()Z
     174: ifeq          296
     177: aload         4
     179: invokeinterface #167,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getCookies:()[Ljavax/servlet/http/Cookie;
     184: ifnull        240
     187: aload         4
     189: invokeinterface #167,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getCookies:()[Ljavax/servlet/http/Cookie;
     194: astore        6
     196: aload         6
     198: arraylength
     199: istore        7
     201: iconst_0
     202: istore        8
     204: iload         8
     206: iload         7
     208: if_icmpge     240
     211: aload         6
     213: iload         8
     215: aaload
     216: astore        9
     218: aload         5
     220: aload         9
     222: invokevirtual #178                // Method javax/servlet/http/Cookie.getName:()Ljava/lang/String;
     225: aload         9
     227: invokevirtual #181                // Method javax/servlet/http/Cookie.getValue:()Ljava/lang/String;
     230: invokevirtual #185                // Method co/elastic/apm/agent/impl/context/Request.addCookie:(Ljava/lang/String;Ljava/lang/String;)Lco/elastic/apm/agent/impl/context/Request;
     233: pop
     234: iinc          8, 1
     237: goto          204
     240: aload         4
     242: invokeinterface #189,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeaderNames:()Ljava/util/Enumeration;
     247: astore        6
     249: aload         6
     251: ifnull        296
     254: aload         6
     256: invokeinterface #194,  1          // InterfaceMethod java/util/Enumeration.hasMoreElements:()Z
     261: ifeq          296
     264: aload         6
     266: invokeinterface #197,  1          // InterfaceMethod java/util/Enumeration.nextElement:()Ljava/lang/Object;
     271: checkcast     #199                // class java/lang/String
     274: astore        7
     276: aload         5
     278: aload         7
     280: aload         4
     282: aload         7
     284: invokeinterface #203,  2          // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeaders:(Ljava/lang/String;)Ljava/util/Enumeration;
     289: invokevirtual #207                // Method co/elastic/apm/agent/impl/context/Request.addHeader:(Ljava/lang/String;Ljava/util/Enumeration;)Lco/elastic/apm/agent/impl/context/Request;
     292: pop
     293: goto          254
     296: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
     299: aload_1
     300: aload         4
     302: invokeinterface #210,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getProtocol:()Ljava/lang/String;
     307: aload         4
     309: invokeinterface #213,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
     314: aload         4
     316: invokeinterface #216,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.isSecure:()Z
     321: aload         4
     323: invokeinterface #219,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getScheme:()Ljava/lang/String;
     328: aload         4
     330: invokeinterface #222,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getServerName:()Ljava/lang/String;
     335: aload         4
     337: invokeinterface #226,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getServerPort:()I
     342: aload         4
     344: invokeinterface #124,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getRequestURI:()Ljava/lang/String;
     349: aload         4
     351: invokeinterface #229,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getQueryString:()Ljava/lang/String;
     356: aload         4
     358: invokeinterface #232,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getRemoteAddr:()Ljava/lang/String;
     363: invokevirtual #236                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.fillRequestContext:(Lco/elastic/apm/agent/impl/transaction/Transaction;Ljava/lang/String;Ljava/lang/String;ZLjava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     366: return

  public static void onExitServletService(javax.servlet.ServletRequest, javax.servlet.ServletResponse, co.elastic.apm.agent.impl.transaction.Transaction, co.elastic.apm.agent.impl.Scope, java.lang.Throwable, java.lang.Object);
    Code:
       0: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
       3: ifnonnull     7
       6: return
       7: getstatic     #104                // Field excluded:Ljava/lang/ThreadLocal;
      10: getstatic     #260                // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
      13: invokevirtual #140                // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      16: aload_3
      17: ifnull        26
      20: aload_3
      21: invokeinterface #263,  1          // InterfaceMethod co/elastic/apm/agent/impl/Scope.close:()V
      26: aload         5
      28: instanceof    #265                // class javax/servlet/http/HttpServlet
      31: ifeq          113
      34: aload_0
      35: instanceof    #86                 // class javax/servlet/http/HttpServletRequest
      38: ifeq          113
      41: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
      44: invokevirtual #80                 // Method co/elastic/apm/agent/impl/ElasticApmTracer.currentTransaction:()Lco/elastic/apm/agent/impl/transaction/Transaction;
      47: astore        6
      49: aload         6
      51: ifnull        113
      54: aload_0
      55: checkcast     #86                 // class javax/servlet/http/HttpServletRequest
      58: astore        7
      60: aload         7
      62: invokeinterface #213,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
      67: aload         5
      69: invokevirtual #269                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      72: aload         6
      74: invokevirtual #272                // Method co/elastic/apm/agent/impl/transaction/Transaction.getName:()Ljava/lang/StringBuilder;
      77: invokestatic  #276                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.setTransactionNameByServletClass:(Ljava/lang/String;Ljava/lang/Class;Ljava/lang/StringBuilder;)V
      80: aload         7
      82: invokeinterface #280,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
      87: astore        8
      89: aload         8
      91: ifnull        104
      94: aload         8
      96: invokeinterface #283,  1          // InterfaceMethod java/security/Principal.getName:()Ljava/lang/String;
     101: goto          105
     104: aconst_null
     105: aload         6
     107: invokevirtual #144                // Method co/elastic/apm/agent/impl/transaction/Transaction.getContext:()Lco/elastic/apm/agent/impl/context/TransactionContext;
     110: invokestatic  #287                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.setUsernameIfUnset:(Ljava/lang/String;Lco/elastic/apm/agent/impl/context/TransactionContext;)V
     113: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
     116: ifnull        359
     119: aload_2
     120: ifnull        359
     123: aload_0
     124: instanceof    #86                 // class javax/servlet/http/HttpServletRequest
     127: ifeq          359
     130: aload_1
     131: instanceof    #289                // class javax/servlet/http/HttpServletResponse
     134: ifeq          359
     137: aload_0
     138: checkcast     #86                 // class javax/servlet/http/HttpServletRequest
     141: astore        6
     143: aload         6
     145: getstatic     #292                // Field co/elastic/apm/agent/servlet/ServletTransactionHelper.ASYNC_ATTRIBUTE:Ljava/lang/String;
     148: invokeinterface #293,  2          // InterfaceMethod javax/servlet/http/HttpServletRequest.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
     153: ifnull        164
     156: aload_2
     157: invokevirtual #297                // Method co/elastic/apm/agent/impl/transaction/Transaction.deactivate:()Lco/elastic/apm/agent/impl/transaction/AbstractSpan;
     160: pop
     161: goto          359
     164: aload_1
     165: checkcast     #289                // class javax/servlet/http/HttpServletResponse
     168: astore        7
     170: aload_2
     171: invokevirtual #154                // Method co/elastic/apm/agent/impl/transaction/Transaction.isSampled:()Z
     174: ifeq          259
     177: getstatic     #45                 // Field tracer:Lco/elastic/apm/agent/impl/ElasticApmTracer;
     180: ldc           #156                // class co/elastic/apm/agent/web/WebConfiguration
     182: invokevirtual #160                // Method co/elastic/apm/agent/impl/ElasticApmTracer.getConfig:(Ljava/lang/Class;)Lco/elastic/apm/agent/shaded/stagemonitor/configuration/ConfigurationOptionProvider;
     185: checkcast     #156                // class co/elastic/apm/agent/web/WebConfiguration
     188: invokevirtual #163                // Method co/elastic/apm/agent/web/WebConfiguration.isCaptureHeaders:()Z
     191: ifeq          259
     194: aload_2
     195: invokevirtual #144                // Method co/elastic/apm/agent/impl/transaction/Transaction.getContext:()Lco/elastic/apm/agent/impl/context/TransactionContext;
     198: invokevirtual #301                // Method co/elastic/apm/agent/impl/context/TransactionContext.getResponse:()Lco/elastic/apm/agent/impl/context/Response;
     201: astore        8
     203: aload         7
     205: invokeinterface #304,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.getHeaderNames:()Ljava/util/Collection;
     210: invokeinterface #310,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     215: astore        9
     217: aload         9
     219: invokeinterface #317,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     224: ifeq          259
     227: aload         9
     229: invokeinterface #320,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     234: checkcast     #199                // class java/lang/String
     237: astore        10
     239: aload         8
     241: aload         10
     243: aload         7
     245: aload         10
     247: invokeinterface #323,  2          // InterfaceMethod javax/servlet/http/HttpServletResponse.getHeaders:(Ljava/lang/String;)Ljava/util/Collection;
     252: invokevirtual #326                // Method co/elastic/apm/agent/impl/context/Response.addHeader:(Ljava/lang/String;Ljava/util/Collection;)Lco/elastic/apm/agent/impl/context/Response;
     255: pop
     256: goto          217
     259: aload         6
     261: ldc_w         #328                // String Content-Type
     264: invokeinterface #130,  2          // InterfaceMethod javax/servlet/http/HttpServletRequest.getHeader:(Ljava/lang/String;)Ljava/lang/String;
     269: astore        8
     271: aload_2
     272: invokevirtual #154                // Method co/elastic/apm/agent/impl/transaction/Transaction.isSampled:()Z
     275: ifeq          308
     278: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
     281: aload         6
     283: invokeinterface #213,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
     288: aload         8
     290: invokevirtual #332                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.captureParameters:(Ljava/lang/String;Ljava/lang/String;)Z
     293: ifeq          308
     296: aload         6
     298: invokeinterface #336,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getParameterMap:()Ljava/util/Map;
     303: astore        9
     305: goto          311
     308: aconst_null
     309: astore        9
     311: getstatic     #51                 // Field servletTransactionHelper:Lco/elastic/apm/agent/servlet/ServletTransactionHelper;
     314: aload_2
     315: aload         4
     317: aload         7
     319: invokeinterface #341,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.isCommitted:()Z
     324: aload         7
     326: invokeinterface #344,  1          // InterfaceMethod javax/servlet/http/HttpServletResponse.getStatus:()I
     331: aload         6
     333: invokeinterface #213,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getMethod:()Ljava/lang/String;
     338: aload         9
     340: aload         6
     342: invokeinterface #118,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getServletPath:()Ljava/lang/String;
     347: aload         6
     349: invokeinterface #121,  1          // InterfaceMethod javax/servlet/http/HttpServletRequest.getPathInfo:()Ljava/lang/String;
     354: aload         8
     356: invokevirtual #348                // Method co/elastic/apm/agent/servlet/ServletTransactionHelper.onAfter:(Lco/elastic/apm/agent/impl/transaction/Transaction;Ljava/lang/Throwable;ZILjava/lang/String;Ljava/util/Map;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     359: return

  static {};
    Code:
       0: new           #7                  // class co/elastic/apm/agent/servlet/ServletApiAdvice$1
       3: dup
       4: invokespecial #370                // Method co/elastic/apm/agent/servlet/ServletApiAdvice$1."<init>":()V
       7: putstatic     #104                // Field excluded:Ljava/lang/ThreadLocal;
      10: return
}

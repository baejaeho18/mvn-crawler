Compiled from "CoreBuildFilterJdbcRepository.kt"
public class net.nemerosa.ontrack.repository.CoreBuildFilterJdbcRepository extends net.nemerosa.ontrack.repository.support.AbstractJdbcRepository implements net.nemerosa.ontrack.repository.CoreBuildFilterRepository {
  private final net.nemerosa.ontrack.repository.StructureRepository structureRepository;

  private final net.nemerosa.ontrack.model.support.OntrackConfigProperties ontrackConfigProperties;

  public net.nemerosa.ontrack.repository.CoreBuildFilterJdbcRepository(javax.sql.DataSource, net.nemerosa.ontrack.repository.StructureRepository, net.nemerosa.ontrack.model.support.OntrackConfigProperties);
    Code:
       0: aload_1
       1: ldc           #11                 // String dataSource
       3: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       6: aload_2
       7: ldc           #19                 // String structureRepository
       9: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      12: aload_3
      13: ldc           #21                 // String ontrackConfigProperties
      15: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      18: aload_0
      19: aload_1
      20: invokespecial #24                 // Method net/nemerosa/ontrack/repository/support/AbstractJdbcRepository."<init>":(Ljavax/sql/DataSource;)V
      23: aload_0
      24: aload_2
      25: putfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
      28: aload_0
      29: aload_3
      30: putfield      #30                 // Field ontrackConfigProperties:Lnet/nemerosa/ontrack/model/support/OntrackConfigProperties;
      33: return

  public java.util.List<net.nemerosa.ontrack.model.structure.Build> projectSearch(net.nemerosa.ontrack.model.structure.Project, net.nemerosa.ontrack.model.structure.BuildSearchForm, kotlin.jvm.functions.Function1<? super java.lang.String, ? extends net.nemerosa.ontrack.model.structure.PropertyType<?>>);
    Code:
       0: aload_1
       1: ldc           #40                 // String project
       3: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       6: aload_2
       7: ldc           #42                 // String form
       9: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      12: aload_3
      13: ldc           #44                 // String propertyTypeAccessor
      15: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      18: new           #46                 // class java/lang/StringBuilder
      21: dup
      22: ldc           #48                 // String \n            SELECT DISTINCT(B.ID) FROM BUILDS B\n            INNER JOIN BRANCHES BB ON BB.ID = B.BRANCHID\n
      24: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      27: astore        4
      29: new           #46                 // class java/lang/StringBuilder
      32: dup
      33: ldc           #53                 // String  WHERE BB.PROJECTID = :project
      35: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      38: astore        5
      40: new           #55                 // class org/springframework/jdbc/core/namedparam/MapSqlParameterSource
      43: dup
      44: ldc           #40                 // String project
      46: aload_1
      47: invokevirtual #61                 // Method net/nemerosa/ontrack/model/structure/Project.id:()I
      50: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      53: invokespecial #70                 // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
      56: astore        6
      58: aload_2
      59: invokevirtual #76                 // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getBranchName:()Ljava/lang/String;
      62: astore        7
      64: aload         7
      66: checkcast     #78                 // class java/lang/CharSequence
      69: astore        8
      71: aload         8
      73: ifnull        84
      76: aload         8
      78: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
      81: ifeq          88
      84: iconst_1
      85: goto          89
      88: iconst_0
      89: ifne          130
      92: nop
      93: new           #86                 // class kotlin/text/Regex
      96: dup
      97: aload         7
      99: invokespecial #87                 // Method kotlin/text/Regex."<init>":(Ljava/lang/String;)V
     102: pop
     103: goto          112
     106: astore        8
     108: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
     111: areturn
     112: aload         5
     114: ldc           #95                 // String  AND BB.NAME ~ :branchName
     116: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     119: pop
     120: aload         6
     122: ldc           #101                // String branchName
     124: aload         7
     126: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     129: pop
     130: aload_2
     131: invokevirtual #108                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getBuildName:()Ljava/lang/String;
     134: astore        8
     136: aload         8
     138: checkcast     #78                 // class java/lang/CharSequence
     141: astore        9
     143: aload         9
     145: ifnull        156
     148: aload         9
     150: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     153: ifeq          160
     156: iconst_1
     157: goto          161
     160: iconst_0
     161: ifne          220
     164: aload_2
     165: invokevirtual #112                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getBuildExactMatch:()Z
     168: ifeq          182
     171: aload         5
     173: ldc           #114                // String  AND B.NAME = :buildName
     175: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     178: pop
     179: goto          210
     182: nop
     183: new           #86                 // class kotlin/text/Regex
     186: dup
     187: aload         8
     189: invokespecial #87                 // Method kotlin/text/Regex."<init>":(Ljava/lang/String;)V
     192: pop
     193: goto          202
     196: astore        9
     198: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
     201: areturn
     202: aload         5
     204: ldc           #116                // String  AND B.NAME ~ :buildName
     206: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     209: pop
     210: aload         6
     212: ldc           #118                // String buildName
     214: aload         8
     216: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     219: pop
     220: aload_2
     221: invokevirtual #121                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getPromotionName:()Ljava/lang/String;
     224: checkcast     #78                 // class java/lang/CharSequence
     227: astore        9
     229: aload         9
     231: ifnull        242
     234: aload         9
     236: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     239: ifeq          246
     242: iconst_1
     243: goto          247
     246: iconst_0
     247: ifne          278
     250: aload         4
     252: ldc           #123                // String  \n                INNER JOIN PROMOTION_RUNS PR ON PR.BUILDID = B.ID\n                INNER JOIN PROMOTION_LEVELS PL ON PL.ID = PR.PROMOTIONLEVELID\n
     254: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     257: pop
     258: aload         5
     260: ldc           #125                // String  AND PL.NAME = :promotionName
     262: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     265: pop
     266: aload         6
     268: ldc           #127                // String promotionName
     270: aload_2
     271: invokevirtual #121                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getPromotionName:()Ljava/lang/String;
     274: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     277: pop
     278: aload_2
     279: invokevirtual #130                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getValidationStampName:()Ljava/lang/String;
     282: checkcast     #78                 // class java/lang/CharSequence
     285: astore        9
     287: aload         9
     289: ifnull        300
     292: aload         9
     294: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     297: ifeq          304
     300: iconst_1
     301: goto          305
     304: iconst_0
     305: ifne          336
     308: aload         4
     310: ldc           #132                // String  \n                INNER JOIN VALIDATION_RUNS VR ON VR.BUILDID = B.ID\n                INNER JOIN VALIDATION_STAMPS VS ON VS.ID = VR.VALIDATIONSTAMPID\n
     312: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     315: pop
     316: aload         5
     318: ldc           #134                // String  AND VS.NAME = :validationStampName
     320: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     323: pop
     324: aload         6
     326: ldc           #136                // String validationStampName
     328: aload_2
     329: invokevirtual #130                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getValidationStampName:()Ljava/lang/String;
     332: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     335: pop
     336: aload_2
     337: invokevirtual #139                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getProperty:()Ljava/lang/String;
     340: astore        9
     342: aload         9
     344: checkcast     #78                 // class java/lang/CharSequence
     347: astore        10
     349: aload         10
     351: ifnull        362
     354: aload         10
     356: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     359: ifeq          366
     362: iconst_1
     363: goto          367
     366: iconst_0
     367: ifne          486
     370: aload         4
     372: ldc           #141                // String \n                INNER JOIN PROPERTIES PP ON PP.BUILD = B.ID \n
     374: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     377: pop
     378: aload         5
     380: ldc           #143                // String  AND PP.TYPE = :property
     382: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     385: pop
     386: aload         6
     388: ldc           #145                // String property
     390: aload         9
     392: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     395: pop
     396: aload_2
     397: invokevirtual #148                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getPropertyValue:()Ljava/lang/String;
     400: checkcast     #78                 // class java/lang/CharSequence
     403: astore        10
     405: aload         10
     407: ifnull        418
     410: aload         10
     412: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     415: ifeq          422
     418: iconst_1
     419: goto          423
     422: iconst_0
     423: ifne          486
     426: aload_3
     427: aload         9
     429: invokeinterface #154,  2          // InterfaceMethod kotlin/jvm/functions/Function1.invoke:(Ljava/lang/Object;)Ljava/lang/Object;
     434: checkcast     #156                // class net/nemerosa/ontrack/model/structure/PropertyType
     437: astore        10
     439: aload         10
     441: aload_2
     442: invokevirtual #148                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getPropertyValue:()Ljava/lang/String;
     445: invokeinterface #160,  2          // InterfaceMethod net/nemerosa/ontrack/model/structure/PropertyType.getSearchArguments:(Ljava/lang/String;)Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;
     450: astore        11
     452: aload         11
     454: ifnull        482
     457: aload         11
     459: invokevirtual #165                // Method net/nemerosa/ontrack/model/structure/PropertySearchArguments.isDefined:()Z
     462: ifeq          482
     465: getstatic     #171                // Field net/nemerosa/ontrack/repository/PropertyJdbcRepository.Companion:Lnet/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion;
     468: aload         11
     470: aload         4
     472: aload         5
     474: aload         6
     476: invokevirtual #177                // Method net/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion.prepareQueryForPropertyValue:(Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;Ljava/lang/StringBuilder;Ljava/lang/StringBuilder;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)V
     479: goto          486
     482: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
     485: areturn
     486: aload_2
     487: invokevirtual #180                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getLinkedFrom:()Ljava/lang/String;
     490: astore        10
     492: aload         10
     494: checkcast     #78                 // class java/lang/CharSequence
     497: astore        11
     499: aload         11
     501: ifnull        512
     504: aload         11
     506: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     509: ifeq          516
     512: iconst_1
     513: goto          517
     516: iconst_0
     517: ifne          656
     520: aload         4
     522: ldc           #182                // String  LEFT JOIN BUILD_LINKS BLFROM ON BLFROM.TARGETBUILDID = B.ID LEFT JOIN BUILDS BDFROM ON BDFROM.ID = BLFROM.BUILDID LEFT JOIN BRANCHES BRFROM ON BRFROM.ID = BDFROM.BRANCHID LEFT JOIN PROJECTS PJFROM ON PJFROM.ID = BRFROM.PROJECTID
     524: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     527: pop
     528: aload         10
     530: ldc           #184                // String :
     532: aconst_null
     533: iconst_2
     534: aconst_null
     535: invokestatic  #188                // Method kotlin/text/StringsKt.substringBefore$default:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/Object;)Ljava/lang/String;
     538: astore        11
     540: aload         5
     542: ldc           #190                // String  AND PJFROM.NAME = :fromProject
     544: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     547: pop
     548: aload         6
     550: ldc           #192                // String fromProject
     552: aload         11
     554: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     557: pop
     558: aload         10
     560: ldc           #184                // String :
     562: ldc           #194                // String
     564: invokestatic  #198                // Method kotlin/text/StringsKt.substringAfter:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     567: astore        12
     569: aload         12
     571: checkcast     #78                 // class java/lang/CharSequence
     574: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     577: ifne          584
     580: iconst_1
     581: goto          585
     584: iconst_0
     585: ifeq          656
     588: aload         12
     590: checkcast     #78                 // class java/lang/CharSequence
     593: ldc           #200                // String *
     595: checkcast     #78                 // class java/lang/CharSequence
     598: iconst_0
     599: iconst_2
     600: aconst_null
     601: invokestatic  #204                // Method kotlin/text/StringsKt.contains$default:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;ZILjava/lang/Object;)Z
     604: ifeq          638
     607: aload         5
     609: ldc           #206                // String  AND BDFROM.NAME LIKE :buildFrom
     611: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     614: pop
     615: aload         6
     617: ldc           #208                // String buildFrom
     619: aload         12
     621: ldc           #200                // String *
     623: ldc           #210                // String %
     625: iconst_0
     626: iconst_4
     627: aconst_null
     628: invokestatic  #214                // Method kotlin/text/StringsKt.replace$default:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ZILjava/lang/Object;)Ljava/lang/String;
     631: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     634: pop
     635: goto          656
     638: aload         5
     640: ldc           #216                // String  AND BDFROM.NAME = :buildFrom
     642: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     645: pop
     646: aload         6
     648: ldc           #208                // String buildFrom
     650: aload         12
     652: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     655: pop
     656: aload_2
     657: invokevirtual #219                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getLinkedTo:()Ljava/lang/String;
     660: astore        11
     662: aload         11
     664: checkcast     #78                 // class java/lang/CharSequence
     667: astore        12
     669: aload         12
     671: ifnull        682
     674: aload         12
     676: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     679: ifeq          686
     682: iconst_1
     683: goto          687
     686: iconst_0
     687: ifne          826
     690: aload         4
     692: ldc           #221                // String  LEFT JOIN BUILD_LINKS BLTO ON BLTO.BUILDID = B.ID LEFT JOIN BUILDS BDTO ON BDTO.ID = BLTO.TARGETBUILDID LEFT JOIN BRANCHES BRTO ON BRTO.ID = BDTO.BRANCHID LEFT JOIN PROJECTS PJTO ON PJTO.ID = BRTO.PROJECTID
     694: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     697: pop
     698: aload         11
     700: ldc           #184                // String :
     702: aconst_null
     703: iconst_2
     704: aconst_null
     705: invokestatic  #188                // Method kotlin/text/StringsKt.substringBefore$default:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/Object;)Ljava/lang/String;
     708: astore        12
     710: aload         5
     712: ldc           #223                // String  AND PJTO.NAME = :toProject
     714: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     717: pop
     718: aload         6
     720: ldc           #225                // String toProject
     722: aload         12
     724: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     727: pop
     728: aload         11
     730: ldc           #184                // String :
     732: ldc           #194                // String
     734: invokestatic  #198                // Method kotlin/text/StringsKt.substringAfter:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     737: astore        13
     739: aload         13
     741: checkcast     #78                 // class java/lang/CharSequence
     744: invokestatic  #84                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     747: ifne          754
     750: iconst_1
     751: goto          755
     754: iconst_0
     755: ifeq          826
     758: aload         13
     760: checkcast     #78                 // class java/lang/CharSequence
     763: ldc           #200                // String *
     765: checkcast     #78                 // class java/lang/CharSequence
     768: iconst_0
     769: iconst_2
     770: aconst_null
     771: invokestatic  #204                // Method kotlin/text/StringsKt.contains$default:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;ZILjava/lang/Object;)Z
     774: ifeq          808
     777: aload         5
     779: ldc           #227                // String  AND BDTO.NAME LIKE :buildTo
     781: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     784: pop
     785: aload         6
     787: ldc           #229                // String buildTo
     789: aload         13
     791: ldc           #200                // String *
     793: ldc           #210                // String %
     795: iconst_0
     796: iconst_4
     797: aconst_null
     798: invokestatic  #214                // Method kotlin/text/StringsKt.replace$default:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ZILjava/lang/Object;)Ljava/lang/String;
     801: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     804: pop
     805: goto          826
     808: aload         5
     810: ldc           #231                // String  AND BDTO.NAME = :buildTo
     812: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     815: pop
     816: aload         6
     818: ldc           #229                // String buildTo
     820: aload         13
     822: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     825: pop
     826: aload_2
     827: invokevirtual #234                // Method net/nemerosa/ontrack/model/structure/BuildSearchForm.getMaximumCount:()I
     830: aload_0
     831: getfield      #30                 // Field ontrackConfigProperties:Lnet/nemerosa/ontrack/model/support/OntrackConfigProperties;
     834: invokevirtual #239                // Method net/nemerosa/ontrack/model/support/OntrackConfigProperties.getBuildFilterCountMax:()I
     837: invokestatic  #245                // Method java/lang/Math.min:(II)I
     840: istore        12
     842: aload         4
     844: aload         5
     846: iload         12
     848: invokedynamic #257,  0            // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/StringBuilder;Ljava/lang/StringBuilder;I)Ljava/lang/String;
     853: astore        13
     855: aload_0
     856: aload         13
     858: aload         6
     860: invokespecial #261                // Method loadBuilds:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)Ljava/util/List;
     863: areturn
    Exception table:
       from    to  target type
          92   103   106   Class java/lang/Exception
         182   193   196   Class java/lang/Exception

  public java.util.List<net.nemerosa.ontrack.model.structure.Build> standardFilter(net.nemerosa.ontrack.model.structure.Branch, net.nemerosa.ontrack.model.structure.StandardBuildFilterData, kotlin.jvm.functions.Function1<? super java.lang.String, ? extends net.nemerosa.ontrack.model.structure.PropertyType<?>>);
    Code:
       0: aload_1
       1: ldc_w         #293                // String branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: aload_2
       8: ldc_w         #295                // String data
      11: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      14: aload_3
      15: ldc           #44                 // String propertyTypeAccessor
      17: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      20: new           #46                 // class java/lang/StringBuilder
      23: dup
      24: ldc_w         #297                // String SELECT DISTINCT(B.ID) FROM BUILDS B
      27: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      30: astore        4
      32: new           #46                 // class java/lang/StringBuilder
      35: dup
      36: ldc_w         #299                // String  WHERE B.BRANCHID = :branch
      39: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      42: astore        5
      44: new           #55                 // class org/springframework/jdbc/core/namedparam/MapSqlParameterSource
      47: dup
      48: ldc_w         #293                // String branch
      51: aload_1
      52: invokevirtual #302                // Method net/nemerosa/ontrack/model/structure/Branch.id:()I
      55: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      58: invokespecial #70                 // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
      61: astore        6
      63: aconst_null
      64: astore        7
      66: aload_2
      67: invokevirtual #307                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getSincePromotionLevel:()Ljava/lang/String;
      70: astore        8
      72: aload         8
      74: checkcast     #78                 // class java/lang/CharSequence
      77: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      80: ifeq          143
      83: aload_0
      84: getfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
      87: aload_1
      88: aload         8
      90: invokeinterface #318,  3          // InterfaceMethod net/nemerosa/ontrack/repository/StructureRepository.getPromotionLevelByName:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/util/Optional;
      95: invokedynamic #336,  0            // InvokeDynamic #1:apply:()Ljava/util/function/Function;
     100: invokevirtual #342                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     103: iconst_m1
     104: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     107: invokevirtual #345                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
     110: checkcast     #63                 // class java/lang/Integer
     113: astore        9
     115: aload_0
     116: aload         9
     118: ldc_w         #347                // String promotionLevelId
     121: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     124: aload         9
     126: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     129: invokespecial #356                // Method findLastBuildWithPromotionLevel:(I)Ljava/lang/Integer;
     132: astore        10
     134: aload         10
     136: ifnull        143
     139: aload         10
     141: astore        7
     143: aload_2
     144: invokevirtual #359                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getWithPromotionLevel:()Ljava/lang/String;
     147: astore        9
     149: aload         9
     151: checkcast     #78                 // class java/lang/CharSequence
     154: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     157: ifeq          189
     160: aload         4
     162: ldc_w         #361                // String  LEFT JOIN PROMOTION_RUNS PR ON PR.BUILDID = B.ID LEFT JOIN PROMOTION_LEVELS PL ON PL.ID = PR.PROMOTIONLEVELID
     165: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     168: pop
     169: aload         5
     171: ldc_w         #363                // String  AND PL.NAME = :withPromotionLevel
     174: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     177: pop
     178: aload         6
     180: ldc_w         #365                // String withPromotionLevel
     183: aload         9
     185: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     188: pop
     189: aload_2
     190: invokevirtual #369                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getAfterDate:()Ljava/time/LocalDate;
     193: astore        10
     195: aload         10
     197: ifnull        228
     200: aload         5
     202: ldc_w         #371                // String  AND B.CREATION >= :afterDate
     205: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     208: pop
     209: aload         6
     211: ldc_w         #373                // String afterDate
     214: aload         10
     216: iconst_0
     217: iconst_0
     218: invokevirtual #379                // Method java/time/LocalDate.atTime:(II)Ljava/time/LocalDateTime;
     221: invokestatic  #383                // Method net/nemerosa/ontrack/repository/support/AbstractJdbcRepository.dateTimeForDB:(Ljava/time/LocalDateTime;)Ljava/lang/String;
     224: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     227: pop
     228: aload_2
     229: invokevirtual #386                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getBeforeDate:()Ljava/time/LocalDate;
     232: astore        11
     234: aload         11
     236: ifnull        271
     239: aload         5
     241: ldc_w         #388                // String  AND B.CREATION <= :beforeDate
     244: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     247: pop
     248: aload         6
     250: ldc_w         #390                // String beforeDate
     253: aload         11
     255: bipush        23
     257: bipush        59
     259: bipush        59
     261: invokevirtual #393                // Method java/time/LocalDate.atTime:(III)Ljava/time/LocalDateTime;
     264: invokestatic  #383                // Method net/nemerosa/ontrack/repository/support/AbstractJdbcRepository.dateTimeForDB:(Ljava/time/LocalDateTime;)Ljava/lang/String;
     267: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     270: pop
     271: aload_2
     272: invokevirtual #396                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getSinceValidationStamp:()Ljava/lang/String;
     275: astore        12
     277: aload         12
     279: checkcast     #78                 // class java/lang/CharSequence
     282: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     285: ifeq          365
     288: aload_0
     289: aload_1
     290: aload         12
     292: ldc_w         #398                // String sinceValidationStamp
     295: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     298: aload         12
     300: invokespecial #402                // Method getValidationStampId:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/lang/Integer;
     303: dup
     304: invokestatic  #406                // Method kotlin/jvm/internal/Intrinsics.checkNotNull:(Ljava/lang/Object;)V
     307: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     310: istore        13
     312: aload_0
     313: iload         13
     315: aload_2
     316: invokevirtual #409                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getSinceValidationStampStatus:()Ljava/lang/String;
     319: invokespecial #413                // Method findLastBuildWithValidationStamp:(ILjava/lang/String;)Ljava/lang/Integer;
     322: astore        14
     324: aload         14
     326: ifnull        365
     329: aload         7
     331: dup
     332: ifnonnull     341
     335: pop
     336: aload         14
     338: goto          363
     341: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     344: istore        15
     346: aload         14
     348: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     351: istore        16
     353: iload         15
     355: iload         16
     357: invokestatic  #416                // Method java/lang/Math.max:(II)I
     360: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     363: astore        7
     365: aload_2
     366: invokevirtual #419                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getWithValidationStamp:()Ljava/lang/String;
     369: astore        13
     371: aload         13
     373: checkcast     #78                 // class java/lang/CharSequence
     376: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     379: ifeq          484
     382: aload         4
     384: ldc_w         #421                // String   LEFT JOIN ( SELECT R.BUILDID,  R.VALIDATIONSTAMPID, VRS.VALIDATIONRUNSTATUSID  FROM VALIDATION_RUNS R INNER JOIN VALIDATION_RUN_STATUSES VRS ON VRS.ID = (SELECT ID FROM VALIDATION_RUN_STATUSES WHERE VALIDATIONRUNID = R.ID ORDER BY ID DESC LIMIT 1) AND R.ID = (SELECT MAX(ID) FROM VALIDATION_RUNS WHERE BUILDID = R.BUILDID AND VALIDATIONSTAMPID = R.VALIDATIONSTAMPID) ) S ON S.BUILDID = B.ID
     387: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     390: pop
     391: aload_0
     392: aload_1
     393: aload         13
     395: ldc_w         #423                // String withValidationStamp
     398: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     401: aload         13
     403: invokespecial #402                // Method getValidationStampId:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/lang/Integer;
     406: dup
     407: invokestatic  #406                // Method kotlin/jvm/internal/Intrinsics.checkNotNull:(Ljava/lang/Object;)V
     410: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     413: istore        14
     415: aload         5
     417: ldc_w         #425                // String  AND (S.VALIDATIONSTAMPID = :validationStampId
     420: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     423: pop
     424: aload         6
     426: ldc_w         #427                // String validationStampId
     429: iload         14
     431: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     434: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     437: pop
     438: aload_2
     439: invokevirtual #430                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getWithValidationStampStatus:()Ljava/lang/String;
     442: astore        15
     444: aload         15
     446: checkcast     #78                 // class java/lang/CharSequence
     449: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     452: ifeq          475
     455: aload         5
     457: ldc_w         #432                // String  AND S.VALIDATIONRUNSTATUSID = :withValidationStampStatus
     460: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     463: pop
     464: aload         6
     466: ldc_w         #434                // String withValidationStampStatus
     469: aload         15
     471: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     474: pop
     475: aload         5
     477: ldc_w         #436                // String )
     480: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     483: pop
     484: aload_2
     485: invokevirtual #439                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getWithProperty:()Ljava/lang/String;
     488: astore        14
     490: aload         14
     492: checkcast     #78                 // class java/lang/CharSequence
     495: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     498: ifeq          613
     501: aload         4
     503: ldc_w         #441                // String  LEFT JOIN PROPERTIES PP ON PP.BUILD = B.ID
     506: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     509: pop
     510: aload         5
     512: ldc_w         #443                // String  AND PP.TYPE = :withProperty
     515: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     518: pop
     519: aload         6
     521: ldc_w         #445                // String withProperty
     524: aload         14
     526: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     529: pop
     530: aload_2
     531: invokevirtual #448                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getWithPropertyValue:()Ljava/lang/String;
     534: astore        15
     536: aload         15
     538: checkcast     #78                 // class java/lang/CharSequence
     541: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     544: ifeq          613
     547: aload_3
     548: aload         14
     550: ldc_w         #445                // String withProperty
     553: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     556: aload         14
     558: invokeinterface #154,  2          // InterfaceMethod kotlin/jvm/functions/Function1.invoke:(Ljava/lang/Object;)Ljava/lang/Object;
     563: checkcast     #156                // class net/nemerosa/ontrack/model/structure/PropertyType
     566: astore        16
     568: aload         16
     570: aload         15
     572: invokeinterface #160,  2          // InterfaceMethod net/nemerosa/ontrack/model/structure/PropertyType.getSearchArguments:(Ljava/lang/String;)Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;
     577: astore        17
     579: aload         17
     581: ifnull        609
     584: aload         17
     586: invokevirtual #165                // Method net/nemerosa/ontrack/model/structure/PropertySearchArguments.isDefined:()Z
     589: ifeq          609
     592: getstatic     #171                // Field net/nemerosa/ontrack/repository/PropertyJdbcRepository.Companion:Lnet/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion;
     595: aload         17
     597: aload         4
     599: aload         5
     601: aload         6
     603: invokevirtual #177                // Method net/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion.prepareQueryForPropertyValue:(Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;Ljava/lang/StringBuilder;Ljava/lang/StringBuilder;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)V
     606: goto          613
     609: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
     612: areturn
     613: aload_2
     614: invokevirtual #451                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getSinceProperty:()Ljava/lang/String;
     617: astore        15
     619: aload         15
     621: checkcast     #78                 // class java/lang/CharSequence
     624: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     627: ifeq          697
     630: aload_2
     631: invokevirtual #454                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getSincePropertyValue:()Ljava/lang/String;
     634: astore        16
     636: aload_0
     637: aload_1
     638: aload         15
     640: ldc_w         #456                // String sinceProperty
     643: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     646: aload         15
     648: aload         16
     650: aload_3
     651: invokespecial #460                // Method findLastBuildWithPropertyValue:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;Ljava/lang/String;Lkotlin/jvm/functions/Function1;)Ljava/lang/Integer;
     654: astore        17
     656: aload         17
     658: ifnull        697
     661: aload         7
     663: dup
     664: ifnonnull     673
     667: pop
     668: aload         17
     670: goto          695
     673: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     676: istore        18
     678: aload         17
     680: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     683: istore        19
     685: iload         18
     687: iload         19
     689: invokestatic  #416                // Method java/lang/Math.max:(II)I
     692: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     695: astore        7
     697: aload_2
     698: invokevirtual #461                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getLinkedFrom:()Ljava/lang/String;
     701: astore        16
     703: aload         16
     705: checkcast     #78                 // class java/lang/CharSequence
     708: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     711: ifeq          877
     714: aload         4
     716: ldc           #182                // String  LEFT JOIN BUILD_LINKS BLFROM ON BLFROM.TARGETBUILDID = B.ID LEFT JOIN BUILDS BDFROM ON BDFROM.ID = BLFROM.BUILDID LEFT JOIN BRANCHES BRFROM ON BRFROM.ID = BDFROM.BRANCHID LEFT JOIN PROJECTS PJFROM ON PJFROM.ID = BRFROM.PROJECTID
     718: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     721: pop
     722: aload         16
     724: ldc           #184                // String :
     726: invokestatic  #465                // Method org/apache/commons/lang3/StringUtils.substringBefore:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     729: astore        17
     731: aload         5
     733: ldc           #190                // String  AND PJFROM.NAME = :fromProject
     735: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     738: pop
     739: aload         6
     741: ldc           #192                // String fromProject
     743: aload         17
     745: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     748: pop
     749: aload         16
     751: ldc           #184                // String :
     753: invokestatic  #467                // Method org/apache/commons/lang3/StringUtils.substringAfter:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     756: astore        18
     758: aload         18
     760: checkcast     #78                 // class java/lang/CharSequence
     763: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     766: ifeq          831
     769: aload         18
     771: checkcast     #78                 // class java/lang/CharSequence
     774: ldc           #200                // String *
     776: checkcast     #78                 // class java/lang/CharSequence
     779: invokestatic  #471                // Method org/apache/commons/lang3/StringUtils.contains:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
     782: ifeq          813
     785: aload         5
     787: ldc           #206                // String  AND BDFROM.NAME LIKE :buildFrom
     789: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     792: pop
     793: aload         6
     795: ldc           #208                // String buildFrom
     797: aload         18
     799: ldc           #200                // String *
     801: ldc           #210                // String %
     803: invokestatic  #474                // Method org/apache/commons/lang3/StringUtils.replace:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     806: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     809: pop
     810: goto          831
     813: aload         5
     815: ldc           #216                // String  AND BDFROM.NAME = :buildFrom
     817: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     820: pop
     821: aload         6
     823: ldc           #208                // String buildFrom
     825: aload         18
     827: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     830: pop
     831: aload_2
     832: invokevirtual #477                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getLinkedFromPromotion:()Ljava/lang/String;
     835: astore        19
     837: aload         19
     839: checkcast     #78                 // class java/lang/CharSequence
     842: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     845: ifeq          877
     848: aload         4
     850: ldc_w         #479                // String  LEFT JOIN PROMOTION_RUNS PRFROM ON PRFROM.BUILDID = BDFROM.ID LEFT JOIN PROMOTION_LEVELS PLFROM ON PLFROM.ID = PRFROM.PROMOTIONLEVELID
     853: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     856: pop
     857: aload         5
     859: ldc_w         #481                // String  AND PLFROM.NAME = :linkedFromPromotion
     862: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     865: pop
     866: aload         6
     868: ldc_w         #483                // String linkedFromPromotion
     871: aload         19
     873: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     876: pop
     877: aload_2
     878: invokevirtual #484                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getLinkedTo:()Ljava/lang/String;
     881: astore        17
     883: aload         17
     885: checkcast     #78                 // class java/lang/CharSequence
     888: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     891: ifeq          1057
     894: aload         4
     896: ldc           #221                // String  LEFT JOIN BUILD_LINKS BLTO ON BLTO.BUILDID = B.ID LEFT JOIN BUILDS BDTO ON BDTO.ID = BLTO.TARGETBUILDID LEFT JOIN BRANCHES BRTO ON BRTO.ID = BDTO.BRANCHID LEFT JOIN PROJECTS PJTO ON PJTO.ID = BRTO.PROJECTID
     898: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     901: pop
     902: aload         17
     904: ldc           #184                // String :
     906: invokestatic  #465                // Method org/apache/commons/lang3/StringUtils.substringBefore:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     909: astore        18
     911: aload         5
     913: ldc           #223                // String  AND PJTO.NAME = :toProject
     915: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     918: pop
     919: aload         6
     921: ldc           #225                // String toProject
     923: aload         18
     925: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     928: pop
     929: aload         17
     931: ldc           #184                // String :
     933: invokestatic  #467                // Method org/apache/commons/lang3/StringUtils.substringAfter:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     936: astore        19
     938: aload         19
     940: checkcast     #78                 // class java/lang/CharSequence
     943: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     946: ifeq          1011
     949: aload         19
     951: checkcast     #78                 // class java/lang/CharSequence
     954: ldc           #200                // String *
     956: checkcast     #78                 // class java/lang/CharSequence
     959: invokestatic  #471                // Method org/apache/commons/lang3/StringUtils.contains:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
     962: ifeq          993
     965: aload         5
     967: ldc           #227                // String  AND BDTO.NAME LIKE :buildTo
     969: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     972: pop
     973: aload         6
     975: ldc           #229                // String buildTo
     977: aload         19
     979: ldc           #200                // String *
     981: ldc           #210                // String %
     983: invokestatic  #474                // Method org/apache/commons/lang3/StringUtils.replace:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
     986: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     989: pop
     990: goto          1011
     993: aload         5
     995: ldc           #231                // String  AND BDTO.NAME = :buildTo
     997: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1000: pop
    1001: aload         6
    1003: ldc           #229                // String buildTo
    1005: aload         19
    1007: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
    1010: pop
    1011: aload_2
    1012: invokevirtual #487                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getLinkedToPromotion:()Ljava/lang/String;
    1015: astore        20
    1017: aload         20
    1019: checkcast     #78                 // class java/lang/CharSequence
    1022: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
    1025: ifeq          1057
    1028: aload         4
    1030: ldc_w         #489                // String  LEFT JOIN PROMOTION_RUNS PRTO ON PRTO.BUILDID = BDTO.ID LEFT JOIN PROMOTION_LEVELS PLTO ON PLTO.ID = PRTO.PROMOTIONLEVELID
    1033: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1036: pop
    1037: aload         5
    1039: ldc_w         #491                // String  AND PLTO.NAME = :linkedToPromotion
    1042: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1045: pop
    1046: aload         6
    1048: ldc_w         #493                // String linkedToPromotion
    1051: aload         20
    1053: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
    1056: pop
    1057: aload         7
    1059: ifnull        1082
    1062: aload         5
    1064: ldc_w         #495                // String  AND B.ID >= :sinceBuildId
    1067: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
    1070: pop
    1071: aload         6
    1073: ldc_w         #497                // String sinceBuildId
    1076: aload         7
    1078: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
    1081: pop
    1082: ldc_w         #499                // String %s %s ORDER BY B.ID DESC LIMIT :count
    1085: iconst_2
    1086: anewarray     #288                // class java/lang/Object
    1089: astore        19
    1091: aload         19
    1093: iconst_0
    1094: aload         4
    1096: aastore
    1097: aload         19
    1099: iconst_1
    1100: aload         5
    1102: aastore
    1103: aload         19
    1105: invokestatic  #503                // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
    1108: astore        18
    1110: aload         6
    1112: ldc_w         #504                // String count
    1115: aload_2
    1116: invokevirtual #507                // Method net/nemerosa/ontrack/model/structure/StandardBuildFilterData.getCount:()I
    1119: aload_0
    1120: getfield      #30                 // Field ontrackConfigProperties:Lnet/nemerosa/ontrack/model/support/OntrackConfigProperties;
    1123: invokevirtual #239                // Method net/nemerosa/ontrack/model/support/OntrackConfigProperties.getBuildFilterCountMax:()I
    1126: invokestatic  #245                // Method java/lang/Math.min:(II)I
    1129: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
    1132: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
    1135: pop
    1136: aload_0
    1137: aload         18
    1139: ldc_w         #508                // String sql
    1142: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
    1145: aload         18
    1147: aload         6
    1149: invokespecial #261                // Method loadBuilds:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)Ljava/util/List;
    1152: areturn

  private java.util.List<net.nemerosa.ontrack.model.structure.Build> loadBuilds(java.lang.String, org.springframework.jdbc.core.namedparam.MapSqlParameterSource);
    Code:
       0: aload_0
       1: invokevirtual #520                // Method getNamedParameterJdbcTemplate:()Lorg/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate;
       4: dup
       5: invokestatic  #406                // Method kotlin/jvm/internal/Intrinsics.checkNotNull:(Ljava/lang/Object;)V
       8: aload_1
       9: aload_2
      10: checkcast     #522                // class org/springframework/jdbc/core/namedparam/SqlParameterSource
      13: getstatic     #526                // Field java/lang/Integer.TYPE:Ljava/lang/Class;
      16: invokevirtual #532                // Method org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.queryForList:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/SqlParameterSource;Ljava/lang/Class;)Ljava/util/List;
      19: dup
      20: ldc_w         #534                // String namedParameterJdbcTempla:class.java\n            )
      23: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
      26: checkcast     #536                // class java/lang/Iterable
      29: astore_3
      30: nop
      31: iconst_0
      32: istore        4
      34: aload_3
      35: astore        5
      37: new           #538                // class java/util/ArrayList
      40: dup
      41: aload_3
      42: bipush        10
      44: invokestatic  #542                // Method kotlin/collections/CollectionsKt.collectionSizeOrDefault:(Ljava/lang/Iterable;I)I
      47: invokespecial #545                // Method java/util/ArrayList."<init>":(I)V
      50: checkcast     #547                // class java/util/Collection
      53: astore        6
      55: iconst_0
      56: istore        7
      58: aload         5
      60: invokeinterface #551,  1          // InterfaceMethod java/lang/Iterable.iterator:()Ljava/util/Iterator;
      65: astore        8
      67: aload         8
      69: invokeinterface #556,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      74: ifeq          140
      77: aload         8
      79: invokeinterface #560,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      84: astore        9
      86: aload         6
      88: aload         9
      90: checkcast     #63                 // class java/lang/Integer
      93: astore        10
      95: astore        12
      97: iconst_0
      98: istore        11
     100: aload_0
     101: getfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
     104: getstatic     #565                // Field net/nemerosa/ontrack/model/structure/ID.Companion:Lnet/nemerosa/ontrack/model/structure/ID$Companion;
     107: aload         10
     109: ldc_w         #566                // String id
     112: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     115: aload         10
     117: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     120: invokevirtual #572                // Method net/nemerosa/ontrack/model/structure/ID$Companion.of:(I)Lnet/nemerosa/ontrack/model/structure/ID;
     123: invokeinterface #576,  2          // InterfaceMethod net/nemerosa/ontrack/repository/StructureRepository.getBuild:(Lnet/nemerosa/ontrack/model/structure/ID;)Lnet/nemerosa/ontrack/model/structure/Build;
     128: aload         12
     130: swap
     131: invokeinterface #580,  2          // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     136: pop
     137: goto          67
     140: aload         6
     142: checkcast     #582                // class java/util/List
     145: nop
     146: areturn

  public java.util.List<net.nemerosa.ontrack.model.structure.Build> nameFilter(net.nemerosa.ontrack.model.structure.Branch, java.lang.String, java.lang.String, java.lang.String, int);
    Code:
       0: aload_1
       1: ldc_w         #293                // String branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: new           #46                 // class java/lang/StringBuilder
      10: dup
      11: ldc_w         #598                // String SELECT DISTINCT(B.ID) FROM BUILDS B                LEFT JOIN PROMOTION_RUNS PR ON PR.BUILDID = B.ID                LEFT JOIN PROMOTION_LEVELS PL ON PL.ID = PR.PROMOTIONLEVELID                WHERE B.BRANCHID = :branch
      14: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      17: astore        6
      19: new           #55                 // class org/springframework/jdbc/core/namedparam/MapSqlParameterSource
      22: dup
      23: ldc_w         #293                // String branch
      26: aload_1
      27: invokevirtual #302                // Method net/nemerosa/ontrack/model/structure/Branch.id:()I
      30: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      33: invokespecial #70                 // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
      36: astore        7
      38: aload_0
      39: aload_1
      40: aload_2
      41: aconst_null
      42: invokevirtual #602                // Method lastBuild:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;Ljava/lang/String;)Ljava/util/Optional;
      45: invokedynamic #609,  0            // InvokeDynamic #2:apply:()Ljava/util/function/Function;
      50: invokevirtual #342                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      53: astore        8
      55: aload         8
      57: invokevirtual #612                // Method java/util/Optional.isPresent:()Z
      60: ifne          67
      63: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
      66: areturn
      67: aload         6
      69: ldc_w         #614                // String  AND B.ID >= :fromBuildId
      72: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      75: pop
      76: aload         7
      78: ldc_w         #616                // String fromBuildId
      81: aload         8
      83: invokevirtual #619                // Method java/util/Optional.get:()Ljava/lang/Object;
      86: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      89: pop
      90: aload_3
      91: checkcast     #78                 // class java/lang/CharSequence
      94: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      97: ifeq          148
     100: aload_0
     101: aload_1
     102: aload_3
     103: aconst_null
     104: invokevirtual #602                // Method lastBuild:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;Ljava/lang/String;)Ljava/util/Optional;
     107: invokedynamic #624,  0            // InvokeDynamic #3:apply:()Ljava/util/function/Function;
     112: invokevirtual #342                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
     115: astore        9
     117: aload         9
     119: invokevirtual #612                // Method java/util/Optional.isPresent:()Z
     122: ifeq          148
     125: aload         6
     127: ldc_w         #626                // String  AND B.ID <= :toBuildId
     130: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: pop
     134: aload         7
     136: ldc_w         #628                // String toBuildId
     139: aload         9
     141: invokevirtual #619                // Method java/util/Optional.get:()Ljava/lang/Object;
     144: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     147: pop
     148: aload         4
     150: checkcast     #78                 // class java/lang/CharSequence
     153: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     156: ifeq          179
     159: aload         6
     161: ldc_w         #363                // String  AND PL.NAME = :withPromotionLevel
     164: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     167: pop
     168: aload         7
     170: ldc_w         #365                // String withPromotionLevel
     173: aload         4
     175: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     178: pop
     179: aload         6
     181: ldc_w         #630                // String  ORDER BY B.ID DESC
     184: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     187: pop
     188: aload         6
     190: ldc_w         #632                // String  LIMIT :count
     193: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     196: pop
     197: aload         7
     199: ldc_w         #504                // String count
     202: iload         5
     204: aload_0
     205: getfield      #30                 // Field ontrackConfigProperties:Lnet/nemerosa/ontrack/model/support/OntrackConfigProperties;
     208: invokevirtual #239                // Method net/nemerosa/ontrack/model/support/OntrackConfigProperties.getBuildFilterCountMax:()I
     211: invokestatic  #245                // Method java/lang/Math.min:(II)I
     214: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     217: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     220: pop
     221: aload_0
     222: aload         6
     224: invokevirtual #635                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     227: dup
     228: ldc_w         #637                // String sql.toString()
     231: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     234: aload         7
     236: invokespecial #261                // Method loadBuilds:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)Ljava/util/List;
     239: areturn

  public java.util.Optional<net.nemerosa.ontrack.model.structure.Build> lastBuild(net.nemerosa.ontrack.model.structure.Branch, java.lang.String, java.lang.String);
    Code:
       0: aload_1
       1: ldc_w         #293                // String branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: new           #46                 // class java/lang/StringBuilder
      10: dup
      11: ldc_w         #598                // String SELECT DISTINCT(B.ID) FROM BUILDS B                LEFT JOIN PROMOTION_RUNS PR ON PR.BUILDID = B.ID                LEFT JOIN PROMOTION_LEVELS PL ON PL.ID = PR.PROMOTIONLEVELID                WHERE B.BRANCHID = :branch
      14: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      17: astore        4
      19: new           #55                 // class org/springframework/jdbc/core/namedparam/MapSqlParameterSource
      22: dup
      23: ldc_w         #293                // String branch
      26: aload_1
      27: invokevirtual #302                // Method net/nemerosa/ontrack/model/structure/Branch.id:()I
      30: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      33: invokespecial #70                 // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
      36: astore        5
      38: aload_2
      39: checkcast     #78                 // class java/lang/CharSequence
      42: ldc           #200                // String *
      44: checkcast     #78                 // class java/lang/CharSequence
      47: invokestatic  #471                // Method org/apache/commons/lang3/StringUtils.contains:(Ljava/lang/CharSequence;Ljava/lang/CharSequence;)Z
      50: ifeq          81
      53: aload         4
      55: ldc_w         #643                // String  AND B.NAME LIKE :buildName
      58: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      61: pop
      62: aload         5
      64: ldc           #118                // String buildName
      66: aload_2
      67: ldc           #200                // String *
      69: ldc           #210                // String %
      71: invokestatic  #474                // Method org/apache/commons/lang3/StringUtils.replace:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      74: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      77: pop
      78: goto          98
      81: aload         4
      83: ldc           #114                // String  AND B.NAME = :buildName
      85: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      88: pop
      89: aload         5
      91: ldc           #118                // String buildName
      93: aload_2
      94: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      97: pop
      98: aload_3
      99: checkcast     #78                 // class java/lang/CharSequence
     102: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
     105: ifeq          127
     108: aload         4
     110: ldc_w         #363                // String  AND PL.NAME = :withPromotionLevel
     113: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     116: pop
     117: aload         5
     119: ldc_w         #365                // String withPromotionLevel
     122: aload_3
     123: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     126: pop
     127: aload         4
     129: ldc_w         #630                // String  ORDER BY B.ID DESC
     132: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     135: pop
     136: aload         4
     138: ldc_w         #645                // String  LIMIT 1
     141: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: pop
     145: aload_0
     146: aload         4
     148: invokevirtual #635                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     151: dup
     152: ldc_w         #637                // String sql.toString()
     155: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     158: aload         5
     160: invokespecial #261                // Method loadBuilds:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)Ljava/util/List;
     163: invokeinterface #649,  1          // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
     168: invokeinterface #655,  1          // InterfaceMethod java/util/stream/Stream.findFirst:()Ljava/util/Optional;
     173: astore        6
     175: aload         6
     177: ldc_w         #657                // String loadBuilds(sql.toString(\n            .findFirst()
     180: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     183: aload         6
     185: areturn

  public java.util.List<net.nemerosa.ontrack.model.structure.Build> between(net.nemerosa.ontrack.model.structure.Branch, java.lang.String, java.lang.String);
    Code:
       0: aload_1
       1: ldc_w         #293                // String branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: new           #46                 // class java/lang/StringBuilder
      10: dup
      11: ldc_w         #665                // String SELECT ID FROM BUILDS WHERE BRANCHID = :branchId
      14: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      17: astore        4
      19: aload_0
      20: ldc_w         #667                // String branchId
      23: aload_1
      24: invokevirtual #302                // Method net/nemerosa/ontrack/model/structure/Branch.id:()I
      27: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      30: invokevirtual #669                // Method params:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      33: astore        5
      35: aconst_null
      36: astore        6
      38: aconst_null
      39: astore        7
      41: nop
      42: aload_0
      43: getfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
      46: aload_1
      47: invokevirtual #673                // Method net/nemerosa/ontrack/model/structure/Branch.getProject:()Lnet/nemerosa/ontrack/model/structure/Project;
      50: invokevirtual #676                // Method net/nemerosa/ontrack/model/structure/Project.getName:()Ljava/lang/String;
      53: aload_1
      54: invokevirtual #677                // Method net/nemerosa/ontrack/model/structure/Branch.getName:()Ljava/lang/String;
      57: aload_2
      58: invokeinterface #681,  4          // InterfaceMethod net/nemerosa/ontrack/repository/StructureRepository.getBuildByName:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/util/Optional;
      63: aload_1
      64: aload_2
      65: invokedynamic #692,  0            // InvokeDynamic #4:get:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/util/function/Supplier;
      70: invokevirtual #696                // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
      73: checkcast     #698                // class net/nemerosa/ontrack/model/structure/Build
      76: invokevirtual #699                // Method net/nemerosa/ontrack/model/structure/Build.id:()I
      79: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      82: astore        6
      84: aload_3
      85: checkcast     #78                 // class java/lang/CharSequence
      88: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      91: ifeq          145
      94: aload_0
      95: getfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
      98: aload_1
      99: invokevirtual #673                // Method net/nemerosa/ontrack/model/structure/Branch.getProject:()Lnet/nemerosa/ontrack/model/structure/Project;
     102: invokevirtual #676                // Method net/nemerosa/ontrack/model/structure/Project.getName:()Ljava/lang/String;
     105: aload_1
     106: invokevirtual #677                // Method net/nemerosa/ontrack/model/structure/Branch.getName:()Ljava/lang/String;
     109: aload_3
     110: invokeinterface #681,  4          // InterfaceMethod net/nemerosa/ontrack/repository/StructureRepository.getBuildByName:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/util/Optional;
     115: aload_1
     116: aload_3
     117: invokedynamic #704,  0            // InvokeDynamic #5:get:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/util/function/Supplier;
     122: invokevirtual #696                // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     125: checkcast     #698                // class net/nemerosa/ontrack/model/structure/Build
     128: invokevirtual #699                // Method net/nemerosa/ontrack/model/structure/Build.id:()I
     131: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     134: astore        7
     136: goto          145
     139: astore        8
     141: invokestatic  #93                 // Method kotlin/collections/CollectionsKt.emptyList:()Ljava/util/List;
     144: areturn
     145: aload         7
     147: ifnull        175
     150: aload         7
     152: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     155: aload         6
     157: invokevirtual #353                // Method java/lang/Integer.intValue:()I
     160: if_icmpge     175
     163: aload         7
     165: astore        8
     167: aload         6
     169: astore        7
     171: aload         8
     173: astore        6
     175: aload         4
     177: ldc_w         #706                // String  AND ID >= :fromId
     180: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     183: pop
     184: aload         5
     186: ldc_w         #708                // String fromId
     189: aload         6
     191: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     194: pop
     195: aload         7
     197: ifnull        220
     200: aload         4
     202: ldc_w         #710                // String  AND ID <= :toId
     205: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     208: pop
     209: aload         5
     211: ldc_w         #712                // String toId
     214: aload         7
     216: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
     219: pop
     220: aload         4
     222: ldc_w         #714                // String  ORDER BY ID DESC
     225: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     228: pop
     229: aload_0
     230: aload         4
     232: invokevirtual #635                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     235: dup
     236: ldc_w         #637                // String sql.toString()
     239: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     242: aload         5
     244: ldc_w         #715                // String params
     247: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     250: aload         5
     252: invokespecial #261                // Method loadBuilds:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)Ljava/util/List;
     255: areturn
    Exception table:
       from    to  target type
          41   136   139   Class net/nemerosa/ontrack/model/exceptions/BuildNotFoundException

  private java.lang.Integer findLastBuildWithPropertyValue(net.nemerosa.ontrack.model.structure.Branch, java.lang.String, java.lang.String, kotlin.jvm.functions.Function1<? super java.lang.String, ? extends net.nemerosa.ontrack.model.structure.PropertyType<?>>);
    Code:
       0: new           #46                 // class java/lang/StringBuilder
       3: dup
       4: ldc_w         #723                // String SELECT B.ID FROM BUILDS B LEFT JOIN PROPERTIES PP ON PP.BUILD = B.ID
       7: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      10: astore        5
      12: new           #46                 // class java/lang/StringBuilder
      15: dup
      16: ldc_w         #725                // String WHERE B.BRANCHID = :branchId AND PP.TYPE = :propertyType
      19: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      22: astore        6
      24: aload_0
      25: ldc_w         #667                // String branchId
      28: aload_1
      29: invokevirtual #302                // Method net/nemerosa/ontrack/model/structure/Branch.id:()I
      32: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      35: invokevirtual #669                // Method params:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      38: ldc_w         #726                // String propertyType
      41: aload_2
      42: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      45: dup
      46: ldc_w         #728                // String params(\"branchId\", brancyType\", propertyTypeName)
      49: invokestatic  #350                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
      52: astore        7
      54: aload_3
      55: checkcast     #78                 // class java/lang/CharSequence
      58: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      61: ifeq          119
      64: aload         4
      66: aload_2
      67: invokeinterface #154,  2          // InterfaceMethod kotlin/jvm/functions/Function1.invoke:(Ljava/lang/Object;)Ljava/lang/Object;
      72: checkcast     #156                // class net/nemerosa/ontrack/model/structure/PropertyType
      75: astore        8
      77: aload         8
      79: aload_3
      80: invokeinterface #160,  2          // InterfaceMethod net/nemerosa/ontrack/model/structure/PropertyType.getSearchArguments:(Ljava/lang/String;)Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;
      85: astore        9
      87: aload         9
      89: ifnull        117
      92: aload         9
      94: invokevirtual #165                // Method net/nemerosa/ontrack/model/structure/PropertySearchArguments.isDefined:()Z
      97: ifeq          117
     100: getstatic     #171                // Field net/nemerosa/ontrack/repository/PropertyJdbcRepository.Companion:Lnet/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion;
     103: aload         9
     105: aload         5
     107: aload         6
     109: aload         7
     111: invokevirtual #177                // Method net/nemerosa/ontrack/repository/PropertyJdbcRepository$Companion.prepareQueryForPropertyValue:(Lnet/nemerosa/ontrack/model/structure/PropertySearchArguments;Ljava/lang/StringBuilder;Ljava/lang/StringBuilder;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;)V
     114: goto          119
     117: aconst_null
     118: areturn
     119: aload         5
     121: invokevirtual #635                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     124: aload         6
     126: invokedynamic #733,  0            // InvokeDynamic #6:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/StringBuilder;)Ljava/lang/String;
     131: astore        8
     133: aload_0
     134: aload         8
     136: aload         7
     138: getstatic     #526                // Field java/lang/Integer.TYPE:Ljava/lang/Class;
     141: invokevirtual #737                // Method getFirstItem:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;Ljava/lang/Class;)Ljava/lang/Object;
     144: checkcast     #63                 // class java/lang/Integer
     147: areturn

  private java.lang.Integer getValidationStampId(net.nemerosa.ontrack.model.structure.Branch, java.lang.String);
    Code:
       0: aload_0
       1: getfield      #27                 // Field structureRepository:Lnet/nemerosa/ontrack/repository/StructureRepository;
       4: aload_1
       5: aload_2
       6: invokeinterface #742,  3          // InterfaceMethod net/nemerosa/ontrack/repository/StructureRepository.getValidationStampByName:(Lnet/nemerosa/ontrack/model/structure/Branch;Ljava/lang/String;)Ljava/util/Optional;
      11: invokedynamic #749,  0            // InvokeDynamic #7:apply:()Ljava/util/function/Function;
      16: invokevirtual #342                // Method java/util/Optional.map:(Ljava/util/function/Function;)Ljava/util/Optional;
      19: iconst_m1
      20: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      23: invokevirtual #345                // Method java/util/Optional.orElse:(Ljava/lang/Object;)Ljava/lang/Object;
      26: checkcast     #63                 // class java/lang/Integer
      29: areturn

  private java.lang.Integer findLastBuildWithValidationStamp(int, java.lang.String);
    Code:
       0: new           #46                 // class java/lang/StringBuilder
       3: dup
       4: ldc_w         #751                // String SELECT VR.BUILDID FROM VALIDATION_RUN_STATUSES VRS\nINNER JOIN VALIDATION_RUNS VR ON VR.ID = VRS.VALIDATIONRUNID\nWHERE VR.VALIDATIONSTAMPID = :validationStampId\n
       7: invokespecial #51                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      10: astore_3
      11: aload_0
      12: ldc_w         #427                // String validationStampId
      15: iload_1
      16: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      19: invokevirtual #669                // Method params:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      22: astore        4
      24: aload_2
      25: checkcast     #78                 // class java/lang/CharSequence
      28: invokestatic  #312                // Method org/apache/commons/lang3/StringUtils.isNotBlank:(Ljava/lang/CharSequence;)Z
      31: ifeq          52
      34: aload_3
      35: ldc_w         #753                // String AND VRS.VALIDATIONRUNSTATUSID = :status\n
      38: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      41: pop
      42: aload         4
      44: ldc_w         #755                // String status
      47: aload_2
      48: invokevirtual #105                // Method org/springframework/jdbc/core/namedparam/MapSqlParameterSource.addValue:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      51: pop
      52: aload_3
      53: ldc_w         #757                // String ORDER BY VR.BUILDID DESC LIMIT 1\n
      56: invokevirtual #99                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      59: pop
      60: aload_0
      61: aload_3
      62: invokevirtual #635                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      65: aload         4
      67: getstatic     #526                // Field java/lang/Integer.TYPE:Ljava/lang/Class;
      70: invokevirtual #737                // Method getFirstItem:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;Ljava/lang/Class;)Ljava/lang/Object;
      73: checkcast     #63                 // class java/lang/Integer
      76: areturn

  private java.lang.Integer findLastBuildWithPromotionLevel(int);
    Code:
       0: aload_0
       1: ldc_w         #759                // String SELECT BUILDID FROM PROMOTION_RUNS WHERE PROMOTIONLEVELID = :promotionLevelId ORDER BY BUILDID DESC LIMIT 1
       4: aload_0
       5: ldc_w         #347                // String promotionLevelId
       8: iload_1
       9: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      12: invokevirtual #669                // Method params:(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;
      15: getstatic     #526                // Field java/lang/Integer.TYPE:Ljava/lang/Class;
      18: invokevirtual #737                // Method getFirstItem:(Ljava/lang/String;Lorg/springframework/jdbc/core/namedparam/MapSqlParameterSource;Ljava/lang/Class;)Ljava/lang/Object;
      21: checkcast     #63                 // class java/lang/Integer
      24: areturn

  private static final java.lang.Integer standardFilter$lambda-0(net.nemerosa.ontrack.model.structure.PromotionLevel);
    Code:
       0: aload_0
       1: invokevirtual #762                // Method net/nemerosa/ontrack/model/structure/PromotionLevel.id:()I
       4: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       7: areturn

  private static final java.lang.Integer nameFilter$lambda-2(net.nemerosa.ontrack.model.structure.Build);
    Code:
       0: aload_0
       1: invokevirtual #699                // Method net/nemerosa/ontrack/model/structure/Build.id:()I
       4: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       7: areturn

  private static final java.lang.Integer nameFilter$lambda-3(net.nemerosa.ontrack.model.structure.Build);
    Code:
       0: aload_0
       1: invokevirtual #699                // Method net/nemerosa/ontrack/model/structure/Build.id:()I
       4: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       7: areturn

  private static final net.nemerosa.ontrack.model.exceptions.BuildNotFoundException between$lambda-4(net.nemerosa.ontrack.model.structure.Branch, java.lang.String);
    Code:
       0: aload_0
       1: ldc_w         #767                // String $branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: new           #663                // class net/nemerosa/ontrack/model/exceptions/BuildNotFoundException
      10: dup
      11: aload_0
      12: invokevirtual #673                // Method net/nemerosa/ontrack/model/structure/Branch.getProject:()Lnet/nemerosa/ontrack/model/structure/Project;
      15: invokevirtual #676                // Method net/nemerosa/ontrack/model/structure/Project.getName:()Ljava/lang/String;
      18: aload_0
      19: invokevirtual #677                // Method net/nemerosa/ontrack/model/structure/Branch.getName:()Ljava/lang/String;
      22: aload_1
      23: invokespecial #770                // Method net/nemerosa/ontrack/model/exceptions/BuildNotFoundException."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      26: areturn

  private static final net.nemerosa.ontrack.model.exceptions.BuildNotFoundException between$lambda-5(net.nemerosa.ontrack.model.structure.Branch, java.lang.String);
    Code:
       0: aload_0
       1: ldc_w         #767                // String $branch
       4: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       7: new           #663                // class net/nemerosa/ontrack/model/exceptions/BuildNotFoundException
      10: dup
      11: aload_0
      12: invokevirtual #673                // Method net/nemerosa/ontrack/model/structure/Branch.getProject:()Lnet/nemerosa/ontrack/model/structure/Project;
      15: invokevirtual #676                // Method net/nemerosa/ontrack/model/structure/Project.getName:()Ljava/lang/String;
      18: aload_0
      19: invokevirtual #677                // Method net/nemerosa/ontrack/model/structure/Branch.getName:()Ljava/lang/String;
      22: aload_1
      23: invokespecial #770                // Method net/nemerosa/ontrack/model/exceptions/BuildNotFoundException."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
      26: areturn

  private static final java.lang.Integer getValidationStampId$lambda-6(net.nemerosa.ontrack.model.structure.ValidationStamp);
    Code:
       0: aload_0
       1: invokevirtual #775                // Method net/nemerosa/ontrack/model/structure/ValidationStamp.id:()I
       4: invokestatic  #67                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       7: areturn
}

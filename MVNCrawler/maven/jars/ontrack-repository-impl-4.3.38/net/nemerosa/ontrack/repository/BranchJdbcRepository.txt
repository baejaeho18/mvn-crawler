Compiled from "BranchJdbcRepository.kt"
public class net.nemerosa.ontrack.repository.BranchJdbcRepository extends net.nemerosa.ontrack.repository.support.AbstractJdbcRepository implements net.nemerosa.ontrack.repository.BranchRepository {
  public net.nemerosa.ontrack.repository.BranchJdbcRepository(javax.sql.DataSource);
    Code:
       0: aload_1
       1: ldc           #11                 // String dataSource
       3: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       6: aload_0
       7: aload_1
       8: invokespecial #19                 // Method net/nemerosa/ontrack/repository/support/AbstractJdbcRepository."<init>":(Ljavax/sql/DataSource;)V
      11: return

  public java.util.List<net.nemerosa.ontrack.model.structure.Branch> filterBranchesForProject(net.nemerosa.ontrack.model.structure.Project, net.nemerosa.ontrack.model.structure.ID, net.nemerosa.ontrack.model.structure.BranchFilter);
    Code:
       0: aload_1
       1: ldc           #28                 // String project
       3: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       6: aload_3
       7: ldc           #30                 // String filter
       9: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      12: ldc           #32                 // String \n            SELECT B.* \n            FROM BRANCHES B\n
      14: astore        4
      16: iconst_1
      17: anewarray     #34                 // class java/lang/String
      20: astore        6
      22: aload         6
      24: iconst_0
      25: ldc           #36                 // String B.PROJECTID = :project
      27: aastore
      28: aload         6
      30: invokestatic  #42                 // Method kotlin/collections/CollectionsKt.mutableListOf:([Ljava/lang/Object;)Ljava/util/List;
      33: astore        5
      35: iconst_1
      36: anewarray     #44                 // class kotlin/Pair
      39: astore        7
      41: aload         7
      43: iconst_0
      44: ldc           #28                 // String project
      46: aload_1
      47: invokevirtual #50                 // Method net/nemerosa/ontrack/model/structure/Project.id:()I
      50: invokestatic  #56                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      53: invokestatic  #62                 // Method kotlin/TuplesKt.to:(Ljava/lang/Object;Ljava/lang/Object;)Lkotlin/Pair;
      56: aastore
      57: aload         7
      59: invokestatic  #68                 // Method kotlin/collections/MapsKt.mutableMapOf:([Lkotlin/Pair;)Ljava/util/Map;
      62: astore        6
      64: new           #70                 // class java/util/ArrayList
      67: dup
      68: invokespecial #73                 // Method java/util/ArrayList."<init>":()V
      71: checkcast     #75                 // class java/util/List
      74: astore        7
      76: ldc           #77                 // String ORDER BY B.ID DESC
      78: astore        8
      80: new           #70                 // class java/util/ArrayList
      83: dup
      84: invokespecial #73                 // Method java/util/ArrayList."<init>":()V
      87: checkcast     #75                 // class java/util/List
      90: astore        9
      92: aload_3
      93: invokevirtual #83                 // Method net/nemerosa/ontrack/model/structure/BranchFilter.getName:()Ljava/lang/String;
      96: astore        10
      98: aload         10
     100: checkcast     #85                 // class java/lang/CharSequence
     103: astore        11
     105: aload         11
     107: ifnull        118
     110: aload         11
     112: invokestatic  #91                 // Method kotlin/text/StringsKt.isBlank:(Ljava/lang/CharSequence;)Z
     115: ifeq          122
     118: iconst_1
     119: goto          123
     122: iconst_0
     123: ifne          151
     126: aload         5
     128: checkcast     #93                 // class java/util/Collection
     131: ldc           #95                 // String B.NAME ~ :name
     133: invokeinterface #99,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     138: pop
     139: aload         6
     141: ldc           #101                // String name
     143: aload         10
     145: invokeinterface #107,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     150: pop
     151: aload_3
     152: invokevirtual #111                // Method net/nemerosa/ontrack/model/structure/BranchFilter.getFavorite:()Ljava/lang/Boolean;
     155: astore        11
     157: aload         11
     159: ifnull        217
     162: aload         11
     164: invokevirtual #117                // Method java/lang/Boolean.booleanValue:()Z
     167: ifeq          217
     170: aload_2
     171: ifnull        217
     174: aload         7
     176: checkcast     #93                 // class java/util/Collection
     179: ldc           #119                // String INNER JOIN BRANCH_FAVOURITES BF ON BF.BRANCHID = B.ID
     181: invokeinterface #99,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     186: pop
     187: aload         5
     189: checkcast     #93                 // class java/util/Collection
     192: ldc           #121                // String BF.ACCOUNTID = :accountId
     194: invokeinterface #99,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     199: pop
     200: aload         6
     202: ldc           #123                // String accountId
     204: aload_2
     205: invokevirtual #128                // Method net/nemerosa/ontrack/model/structure/ID.get:()I
     208: invokestatic  #56                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     211: invokeinterface #107,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     216: pop
     217: aload_3
     218: invokevirtual #131                // Method net/nemerosa/ontrack/model/structure/BranchFilter.getOrder:()Z
     221: ifeq          242
     224: nop
     225: aload         7
     227: checkcast     #93                 // class java/util/Collection
     230: ldc           #133                // String LEFT JOIN (\n\tSELECT DISTINCT ON (BRANCHID) BRANCHID, CREATION\n\tFROM BUILDS\n\tORDER BY BRANCHID, CREATION DESC\n) LAST_BUILD ON LAST_BUILD.BRANCHID = B.ID
     232: invokeinterface #99,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     237: pop
     238: ldc           #135                // String ORDER BY COALESCE(LAST_BUILD.CREATION, B.CREATION) DESC
     240: astore        8
     242: aload_3
     243: invokevirtual #139                // Method net/nemerosa/ontrack/model/structure/BranchFilter.getCount:()Ljava/lang/Integer;
     246: astore        12
     248: aload         12
     250: ifnull        278
     253: aload         9
     255: checkcast     #93                 // class java/util/Collection
     258: ldc           #141                // String LIMIT :count
     260: invokeinterface #99,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
     265: pop
     266: aload         6
     268: ldc           #143                // String count
     270: aload         12
     272: invokeinterface #107,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     277: pop
     278: aload         4
     280: invokestatic  #147                // Method kotlin/collections/CollectionsKt.listOf:(Ljava/lang/Object;)Ljava/util/List;
     283: checkcast     #93                 // class java/util/Collection
     286: aload         7
     288: checkcast     #149                // class java/lang/Iterable
     291: invokestatic  #153                // Method kotlin/collections/CollectionsKt.plus:(Ljava/util/Collection;Ljava/lang/Iterable;)Ljava/util/List;
     294: checkcast     #93                 // class java/util/Collection
     297: ldc           #155                // String WHERE
     299: invokestatic  #147                // Method kotlin/collections/CollectionsKt.listOf:(Ljava/lang/Object;)Ljava/util/List;
     302: checkcast     #149                // class java/lang/Iterable
     305: invokestatic  #153                // Method kotlin/collections/CollectionsKt.plus:(Ljava/util/Collection;Ljava/lang/Iterable;)Ljava/util/List;
     308: checkcast     #93                 // class java/util/Collection
     311: aload         5
     313: checkcast     #149                // class java/lang/Iterable
     316: ldc           #157                // String \nAND
     318: checkcast     #85                 // class java/lang/CharSequence
     321: aconst_null
     322: aconst_null
     323: iconst_0
     324: aconst_null
     325: getstatic     #163                // Field net/nemerosa/ontrack/repository/BranchJdbcRepository$filterBranchesForProject$sqlFragments$1.INSTANCE:Lnet/nemerosa/ontrack/repository/BranchJdbcRepository$filterBranchesForProject$sqlFragments$1;
     328: checkcast     #165                // class kotlin/jvm/functions/Function1
     331: bipush        30
     333: aconst_null
     334: invokestatic  #169                // Method kotlin/collections/CollectionsKt.joinToString$default:(Ljava/lang/Iterable;Ljava/lang/CharSequence;Ljava/lang/CharSequence;Ljava/lang/CharSequence;ILjava/lang/CharSequence;Lkotlin/jvm/functions/Function1;ILjava/lang/Object;)Ljava/lang/String;
     337: invokestatic  #147                // Method kotlin/collections/CollectionsKt.listOf:(Ljava/lang/Object;)Ljava/util/List;
     340: checkcast     #149                // class java/lang/Iterable
     343: invokestatic  #153                // Method kotlin/collections/CollectionsKt.plus:(Ljava/util/Collection;Ljava/lang/Iterable;)Ljava/util/List;
     346: checkcast     #93                 // class java/util/Collection
     349: aload         8
     351: invokestatic  #147                // Method kotlin/collections/CollectionsKt.listOf:(Ljava/lang/Object;)Ljava/util/List;
     354: checkcast     #149                // class java/lang/Iterable
     357: invokestatic  #153                // Method kotlin/collections/CollectionsKt.plus:(Ljava/util/Collection;Ljava/lang/Iterable;)Ljava/util/List;
     360: checkcast     #93                 // class java/util/Collection
     363: aload         9
     365: checkcast     #149                // class java/lang/Iterable
     368: invokestatic  #153                // Method kotlin/collections/CollectionsKt.plus:(Ljava/util/Collection;Ljava/lang/Iterable;)Ljava/util/List;
     371: astore        13
     373: aload         13
     375: checkcast     #149                // class java/lang/Iterable
     378: ldc           #171                // String \n
     380: checkcast     #85                 // class java/lang/CharSequence
     383: aconst_null
     384: aconst_null
     385: iconst_0
     386: aconst_null
     387: aconst_null
     388: bipush        62
     390: aconst_null
     391: invokestatic  #169                // Method kotlin/collections/CollectionsKt.joinToString$default:(Ljava/lang/Iterable;Ljava/lang/CharSequence;Ljava/lang/CharSequence;Ljava/lang/CharSequence;ILjava/lang/CharSequence;Lkotlin/jvm/functions/Function1;ILjava/lang/Object;)Ljava/lang/String;
     394: astore        14
     396: aload_0
     397: invokevirtual #175                // Method getNamedParameterJdbcTemplate:()Lorg/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate;
     400: dup
     401: invokestatic  #179                // Method kotlin/jvm/internal/Intrinsics.checkNotNull:(Ljava/lang/Object;)V
     404: aload         14
     406: aload         6
     408: aload_0
     409: aload_1
     410: invokedynamic #199,  0            // InvokeDynamic #0:mapRow:(Lnet/nemerosa/ontrack/repository/BranchJdbcRepository;Lnet/nemerosa/ontrack/model/structure/Project;)Lorg/springframework/jdbc/core/RowMapper;
     415: invokevirtual #205                // Method org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.query:(Ljava/lang/String;Ljava/util/Map;Lorg/springframework/jdbc/core/RowMapper;)Ljava/util/List;
     418: dup
     419: ldc           #207                // String namedParameterJdbcTempla…)\n            )\n        }
     421: invokestatic  #210                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
     424: areturn

  private static final net.nemerosa.ontrack.model.structure.Branch filterBranchesForProject$lambda-0(net.nemerosa.ontrack.repository.BranchJdbcRepository, net.nemerosa.ontrack.model.structure.Project, java.sql.ResultSet, int);
    Code:
       0: aload_0
       1: ldc           #230                // String this$0
       3: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
       6: aload_1
       7: ldc           #232                // String $project
       9: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      12: aload_2
      13: ldc           #234                // String rs
      15: invokestatic  #17                 // Method kotlin/jvm/internal/Intrinsics.checkNotNullParameter:(Ljava/lang/Object;Ljava/lang/String;)V
      18: new           #236                // class net/nemerosa/ontrack/model/structure/Branch
      21: dup
      22: aload_0
      23: aload_2
      24: invokevirtual #239                // Method id:(Ljava/sql/ResultSet;)Lnet/nemerosa/ontrack/model/structure/ID;
      27: dup
      28: ldc           #241                // String id(rs)
      30: invokestatic  #210                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
      33: aload_2
      34: ldc           #101                // String name
      36: invokeinterface #247,  2          // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
      41: dup
      42: ldc           #249                // String rs.getString(\"name\")
      44: invokestatic  #210                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
      47: aload_2
      48: ldc           #251                // String description
      50: invokeinterface #247,  2          // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
      55: aload_2
      56: ldc           #253                // String disabled
      58: invokeinterface #257,  2          // InterfaceMethod java/sql/ResultSet.getBoolean:(Ljava/lang/String;)Z
      63: aload_1
      64: aload_0
      65: aload_2
      66: invokevirtual #261                // Method readSignature:(Ljava/sql/ResultSet;)Lnet/nemerosa/ontrack/model/structure/Signature;
      69: dup
      70: ldc_w         #263                // String readSignature(rs)
      73: invokestatic  #210                // Method kotlin/jvm/internal/Intrinsics.checkNotNullExpressionValue:(Ljava/lang/Object;Ljava/lang/String;)V
      76: invokespecial #266                // Method net/nemerosa/ontrack/model/structure/Branch."<init>":(Lnet/nemerosa/ontrack/model/structure/ID;Ljava/lang/String;Ljava/lang/String;ZLnet/nemerosa/ontrack/model/structure/Project;Lnet/nemerosa/ontrack/model/structure/Signature;)V
      79: areturn
}

Compiled from "S3TogglzRepository.java"
public class de.otto.edison.togglz.s3.S3TogglzRepository implements org.togglz.core.repository.StateRepository {
  private static final org.slf4j.Logger LOG;

  private static final int SCHEDULE_RATE_IN_MILLISECONDS;

  private final java.util.Map<java.lang.String, de.otto.edison.togglz.s3.S3TogglzRepository$CacheEntry> cache;

  private final de.otto.edison.togglz.s3.FeatureStateConverter featureStateConverter;

  public de.otto.edison.togglz.s3.S3TogglzRepository(de.otto.edison.togglz.s3.FeatureStateConverter);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #7                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #9                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #10                 // Field cache:Ljava/util/Map;
      15: aload_0
      16: aload_1
      17: putfield      #16                 // Field featureStateConverter:Lde/otto/edison/togglz/s3/FeatureStateConverter;
      20: return

  public org.togglz.core.repository.FeatureState getFeatureState(org.togglz.core.Feature);
    Code:
       0: aload_0
       1: getfield      #10                 // Field cache:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #20,  1           // InterfaceMethod org/togglz/core/Feature.name:()Ljava/lang/String;
      10: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #32                 // class de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry
      18: astore_2
      19: aload_2
      20: ifnull        28
      23: aload_2
      24: invokevirtual #34                 // Method de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry.getState:()Lorg/togglz/core/repository/FeatureState;
      27: areturn
      28: aload_0
      29: getfield      #16                 // Field featureStateConverter:Lde/otto/edison/togglz/s3/FeatureStateConverter;
      32: aload_1
      33: invokevirtual #38                 // Method de/otto/edison/togglz/s3/FeatureStateConverter.retrieveFeatureStateFromS3:(Lorg/togglz/core/Feature;)Lorg/togglz/core/repository/FeatureState;
      36: astore_3
      37: aload_0
      38: getfield      #10                 // Field cache:Ljava/util/Map;
      41: aload_1
      42: invokeinterface #20,  1           // InterfaceMethod org/togglz/core/Feature.name:()Ljava/lang/String;
      47: new           #32                 // class de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry
      50: dup
      51: aload_3
      52: invokespecial #44                 // Method de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry."<init>":(Lorg/togglz/core/repository/FeatureState;)V
      55: invokeinterface #47,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      60: pop
      61: aload_3
      62: areturn

  public void setFeatureState(org.togglz.core.repository.FeatureState);
    Code:
       0: aload_0
       1: getfield      #16                 // Field featureStateConverter:Lde/otto/edison/togglz/s3/FeatureStateConverter;
       4: aload_1
       5: invokevirtual #51                 // Method de/otto/edison/togglz/s3/FeatureStateConverter.persistFeatureStateToS3:(Lorg/togglz/core/repository/FeatureState;)V
       8: aload_0
       9: getfield      #10                 // Field cache:Ljava/util/Map;
      12: aload_1
      13: invokevirtual #54                 // Method org/togglz/core/repository/FeatureState.getFeature:()Lorg/togglz/core/Feature;
      16: invokeinterface #20,  1           // InterfaceMethod org/togglz/core/Feature.name:()Ljava/lang/String;
      21: new           #32                 // class de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry
      24: dup
      25: aload_1
      26: invokespecial #44                 // Method de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry."<init>":(Lorg/togglz/core/repository/FeatureState;)V
      29: invokeinterface #47,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      34: pop
      35: return

  protected void prefetchFeatureStates();
    Code:
       0: aload_0
       1: getfield      #10                 // Field cache:Ljava/util/Map;
       4: invokeinterface #60,  1           // InterfaceMethod java/util/Map.size:()I
       9: ifne          29
      12: getstatic     #64                 // Field LOG:Lorg/slf4j/Logger;
      15: ldc           #68                 // String Initialize state for features
      17: invokeinterface #70,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      22: aload_0
      23: invokevirtual #76                 // Method initializeFeatureStates:()V
      26: goto          54
      29: getstatic     #64                 // Field LOG:Lorg/slf4j/Logger;
      32: ldc           #79                 // String Refreshing state for features
      34: invokeinterface #70,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      39: aload_0
      40: getfield      #10                 // Field cache:Ljava/util/Map;
      43: aload_0
      44: invokedynamic #81,  0             // InvokeDynamic #0:apply:(Lde/otto/edison/togglz/s3/S3TogglzRepository;)Ljava/util/function/BiFunction;
      49: invokeinterface #85,  2           // InterfaceMethod java/util/Map.replaceAll:(Ljava/util/function/BiFunction;)V
      54: return

  private void initializeFeatureStates();
    Code:
       0: invokestatic  #89                 // Method org/togglz/core/context/FeatureContext.getFeatureManager:()Lorg/togglz/core/manager/FeatureManager;
       3: invokeinterface #95,  1           // InterfaceMethod org/togglz/core/manager/FeatureManager.getFeatures:()Ljava/util/Set;
       8: aload_0
       9: invokedynamic #101,  0            // InvokeDynamic #1:accept:(Lde/otto/edison/togglz/s3/S3TogglzRepository;)Ljava/util/function/Consumer;
      14: invokeinterface #105,  2          // InterfaceMethod java/util/Set.forEach:(Ljava/util/function/Consumer;)V
      19: goto          34
      22: astore_1
      23: getstatic     #64                 // Field LOG:Lorg/slf4j/Logger;
      26: ldc           #113                // String Unable to Initialize feature states
      28: aload_1
      29: invokeinterface #115,  3          // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
      34: return
    Exception table:
       from    to  target type
           0    19    22   Class java/lang/Exception

  private de.otto.edison.togglz.s3.S3TogglzRepository$CacheEntry lambda$prefetchFeatureStates$0(java.lang.String, de.otto.edison.togglz.s3.S3TogglzRepository$CacheEntry);
    Code:
       0: aload_1
       1: invokestatic  #119                // Method de/otto/edison/togglz/util/FeatureManagerSupport.getFeatureFromName:(Ljava/lang/String;)Ljava/util/Optional;
       4: astore_3
       5: aload_3
       6: invokevirtual #125                // Method java/util/Optional.isPresent:()Z
       9: ifeq          34
      12: new           #32                 // class de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry
      15: dup
      16: aload_0
      17: getfield      #16                 // Field featureStateConverter:Lde/otto/edison/togglz/s3/FeatureStateConverter;
      20: aload_3
      21: invokevirtual #131                // Method java/util/Optional.get:()Ljava/lang/Object;
      24: checkcast     #21                 // class org/togglz/core/Feature
      27: invokevirtual #38                 // Method de/otto/edison/togglz/s3/FeatureStateConverter.retrieveFeatureStateFromS3:(Lorg/togglz/core/Feature;)Lorg/togglz/core/repository/FeatureState;
      30: invokespecial #44                 // Method de/otto/edison/togglz/s3/S3TogglzRepository$CacheEntry."<init>":(Lorg/togglz/core/repository/FeatureState;)V
      33: areturn
      34: new           #134                // class java/lang/IllegalArgumentException
      37: dup
      38: ldc           #136                // String Can not find feature name
      40: invokespecial #138                // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      43: athrow

  static {};
    Code:
       0: ldc           #11                 // class de/otto/edison/togglz/s3/S3TogglzRepository
       2: invokestatic  #140                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
       5: putstatic     #64                 // Field LOG:Lorg/slf4j/Logger;
       8: return
}

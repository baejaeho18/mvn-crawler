Compiled from "FeatureStateConverter.java"
public class de.otto.edison.togglz.s3.FeatureStateConverter {
  private static final java.lang.String ERR_NO_SUCH_KEY;

  private final software.amazon.awssdk.services.s3.S3Client s3Client;

  private final de.otto.edison.togglz.configuration.TogglzProperties togglzProperties;

  private static final com.fasterxml.jackson.databind.ObjectMapper objectMapper;

  public de.otto.edison.togglz.s3.FeatureStateConverter(software.amazon.awssdk.services.s3.S3Client, de.otto.edison.togglz.configuration.TogglzProperties);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #7                  // Field s3Client:Lsoftware/amazon/awssdk/services/s3/S3Client;
       9: aload_0
      10: aload_2
      11: putfield      #13                 // Field togglzProperties:Lde/otto/edison/togglz/configuration/TogglzProperties;
      14: return

  public org.togglz.core.repository.FeatureState retrieveFeatureStateFromS3(org.togglz.core.Feature);
    Code:
       0: invokestatic  #17                 // Method software/amazon/awssdk/services/s3/model/GetObjectRequest.builder:()Lsoftware/amazon/awssdk/services/s3/model/GetObjectRequest$Builder;
       3: aload_0
       4: getfield      #13                 // Field togglzProperties:Lde/otto/edison/togglz/configuration/TogglzProperties;
       7: invokevirtual #23                 // Method de/otto/edison/togglz/configuration/TogglzProperties.getS3:()Lde/otto/edison/togglz/configuration/TogglzProperties$S3;
      10: invokevirtual #29                 // Method de/otto/edison/togglz/configuration/TogglzProperties$S3.getBucketName:()Ljava/lang/String;
      13: invokeinterface #35,  2           // InterfaceMethod software/amazon/awssdk/services/s3/model/GetObjectRequest$Builder.bucket:(Ljava/lang/String;)Lsoftware/amazon/awssdk/services/s3/model/GetObjectRequest$Builder;
      18: aload_0
      19: aload_1
      20: invokevirtual #41                 // Method keyForFeature:(Lorg/togglz/core/Feature;)Ljava/lang/String;
      23: invokeinterface #45,  2           // InterfaceMethod software/amazon/awssdk/services/s3/model/GetObjectRequest$Builder.key:(Ljava/lang/String;)Lsoftware/amazon/awssdk/services/s3/model/GetObjectRequest$Builder;
      28: invokeinterface #48,  1           // InterfaceMethod software/amazon/awssdk/services/s3/model/GetObjectRequest$Builder.build:()Ljava/lang/Object;
      33: checkcast     #18                 // class software/amazon/awssdk/services/s3/model/GetObjectRequest
      36: astore_2
      37: aload_0
      38: getfield      #7                  // Field s3Client:Lsoftware/amazon/awssdk/services/s3/S3Client;
      41: aload_2
      42: invokeinterface #52,  2           // InterfaceMethod software/amazon/awssdk/services/s3/S3Client.getObject:(Lsoftware/amazon/awssdk/services/s3/model/GetObjectRequest;)Lsoftware/amazon/awssdk/core/ResponseInputStream;
      47: astore_3
      48: aload_3
      49: ifnull        91
      52: getstatic     #58                 // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
      55: invokevirtual #62                 // Method com/fasterxml/jackson/databind/ObjectMapper.reader:()Lcom/fasterxml/jackson/databind/ObjectReader;
      58: ldc           #68                 // class org/togglz/core/util/FeatureStateStorageWrapper
      60: invokevirtual #70                 // Method com/fasterxml/jackson/databind/ObjectReader.forType:(Ljava/lang/Class;)Lcom/fasterxml/jackson/databind/ObjectReader;
      63: aload_3
      64: invokevirtual #76                 // Method com/fasterxml/jackson/databind/ObjectReader.readValue:(Ljava/io/InputStream;)Ljava/lang/Object;
      67: checkcast     #68                 // class org/togglz/core/util/FeatureStateStorageWrapper
      70: astore        4
      72: aload_1
      73: aload         4
      75: invokestatic  #80                 // Method org/togglz/core/util/FeatureStateStorageWrapper.featureStateForWrapper:(Lorg/togglz/core/Feature;Lorg/togglz/core/util/FeatureStateStorageWrapper;)Lorg/togglz/core/repository/FeatureState;
      78: astore        5
      80: aload_3
      81: ifnull        88
      84: aload_3
      85: invokevirtual #84                 // Method software/amazon/awssdk/core/ResponseInputStream.close:()V
      88: aload         5
      90: areturn
      91: aload_3
      92: ifnull        127
      95: aload_3
      96: invokevirtual #84                 // Method software/amazon/awssdk/core/ResponseInputStream.close:()V
      99: goto          127
     102: astore        4
     104: aload_3
     105: ifnull        124
     108: aload_3
     109: invokevirtual #84                 // Method software/amazon/awssdk/core/ResponseInputStream.close:()V
     112: goto          124
     115: astore        5
     117: aload         4
     119: aload         5
     121: invokevirtual #91                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     124: aload         4
     126: athrow
     127: goto          180
     130: astore_3
     131: ldc           #97                 // String NoSuchKey
     133: aload_3
     134: invokevirtual #99                 // Method software/amazon/awssdk/services/s3/model/S3Exception.awsErrorDetails:()Lsoftware/amazon/awssdk/awscore/exception/AwsErrorDetails;
     137: invokevirtual #103                // Method software/amazon/awssdk/awscore/exception/AwsErrorDetails.errorCode:()Ljava/lang/String;
     140: invokevirtual #108                // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     143: ifne          164
     146: aload_3
     147: invokevirtual #99                 // Method software/amazon/awssdk/services/s3/model/S3Exception.awsErrorDetails:()Lsoftware/amazon/awssdk/awscore/exception/AwsErrorDetails;
     150: invokevirtual #114                // Method software/amazon/awssdk/awscore/exception/AwsErrorDetails.sdkHttpResponse:()Lsoftware/amazon/awssdk/http/SdkHttpResponse;
     153: invokeinterface #118,  1          // InterfaceMethod software/amazon/awssdk/http/SdkHttpResponse.statusCode:()I
     158: sipush        404
     161: if_icmpne     166
     164: aconst_null
     165: areturn
     166: aload_3
     167: athrow
     168: astore_3
     169: new           #126                // class java/lang/RuntimeException
     172: dup
     173: ldc           #128                // String Failed to get the feature state
     175: aload_3
     176: invokespecial #130                // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     179: athrow
     180: aconst_null
     181: areturn
    Exception table:
       from    to  target type
          48    80   102   Class java/lang/Throwable
         108   112   115   Class java/lang/Throwable
          37    88   130   Class software/amazon/awssdk/services/s3/model/S3Exception
          91   127   130   Class software/amazon/awssdk/services/s3/model/S3Exception
          37    88   168   Class java/io/IOException
          91   127   168   Class java/io/IOException

  public void persistFeatureStateToS3(org.togglz.core.repository.FeatureState);
    Code:
       0: aload_1
       1: invokestatic  #133                // Method org/togglz/core/util/FeatureStateStorageWrapper.wrapperForFeatureState:(Lorg/togglz/core/repository/FeatureState;)Lorg/togglz/core/util/FeatureStateStorageWrapper;
       4: astore_2
       5: getstatic     #58                 // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
       8: aload_2
       9: invokevirtual #137                // Method com/fasterxml/jackson/databind/ObjectMapper.writeValueAsString:(Ljava/lang/Object;)Ljava/lang/String;
      12: astore_3
      13: invokestatic  #141                // Method software/amazon/awssdk/services/s3/model/PutObjectRequest.builder:()Lsoftware/amazon/awssdk/services/s3/model/PutObjectRequest$Builder;
      16: aload_0
      17: getfield      #13                 // Field togglzProperties:Lde/otto/edison/togglz/configuration/TogglzProperties;
      20: invokevirtual #23                 // Method de/otto/edison/togglz/configuration/TogglzProperties.getS3:()Lde/otto/edison/togglz/configuration/TogglzProperties$S3;
      23: invokevirtual #29                 // Method de/otto/edison/togglz/configuration/TogglzProperties$S3.getBucketName:()Ljava/lang/String;
      26: invokeinterface #146,  2          // InterfaceMethod software/amazon/awssdk/services/s3/model/PutObjectRequest$Builder.bucket:(Ljava/lang/String;)Lsoftware/amazon/awssdk/services/s3/model/PutObjectRequest$Builder;
      31: aload_0
      32: aload_1
      33: invokevirtual #151                // Method org/togglz/core/repository/FeatureState.getFeature:()Lorg/togglz/core/Feature;
      36: invokevirtual #41                 // Method keyForFeature:(Lorg/togglz/core/Feature;)Ljava/lang/String;
      39: invokeinterface #157,  2          // InterfaceMethod software/amazon/awssdk/services/s3/model/PutObjectRequest$Builder.key:(Ljava/lang/String;)Lsoftware/amazon/awssdk/services/s3/model/PutObjectRequest$Builder;
      44: getstatic     #159                // Field software/amazon/awssdk/services/s3/model/ServerSideEncryption.AES256:Lsoftware/amazon/awssdk/services/s3/model/ServerSideEncryption;
      47: invokeinterface #165,  2          // InterfaceMethod software/amazon/awssdk/services/s3/model/PutObjectRequest$Builder.serverSideEncryption:(Lsoftware/amazon/awssdk/services/s3/model/ServerSideEncryption;)Lsoftware/amazon/awssdk/services/s3/model/PutObjectRequest$Builder;
      52: invokeinterface #169,  1          // InterfaceMethod software/amazon/awssdk/services/s3/model/PutObjectRequest$Builder.build:()Ljava/lang/Object;
      57: checkcast     #142                // class software/amazon/awssdk/services/s3/model/PutObjectRequest
      60: astore        4
      62: aload_3
      63: invokestatic  #170                // Method software/amazon/awssdk/core/sync/RequestBody.fromString:(Ljava/lang/String;)Lsoftware/amazon/awssdk/core/sync/RequestBody;
      66: astore        5
      68: aload_0
      69: getfield      #7                  // Field s3Client:Lsoftware/amazon/awssdk/services/s3/S3Client;
      72: aload         4
      74: aload         5
      76: invokeinterface #176,  3          // InterfaceMethod software/amazon/awssdk/services/s3/S3Client.putObject:(Lsoftware/amazon/awssdk/services/s3/model/PutObjectRequest;Lsoftware/amazon/awssdk/core/sync/RequestBody;)Lsoftware/amazon/awssdk/services/s3/model/PutObjectResponse;
      81: pop
      82: goto          97
      85: astore_2
      86: new           #126                // class java/lang/RuntimeException
      89: dup
      90: ldc           #182                // String Failed to set the feature state
      92: aload_2
      93: invokespecial #130                // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      96: athrow
      97: return
    Exception table:
       from    to  target type
           0    82    85   Class software/amazon/awssdk/services/s3/model/S3Exception
           0    82    85   Class com/fasterxml/jackson/core/JsonProcessingException

  private java.lang.String keyForFeature(org.togglz.core.Feature);
    Code:
       0: aload_0
       1: getfield      #13                 // Field togglzProperties:Lde/otto/edison/togglz/configuration/TogglzProperties;
       4: invokevirtual #23                 // Method de/otto/edison/togglz/configuration/TogglzProperties.getS3:()Lde/otto/edison/togglz/configuration/TogglzProperties$S3;
       7: invokevirtual #184                // Method de/otto/edison/togglz/configuration/TogglzProperties$S3.getKeyPrefix:()Ljava/lang/String;
      10: aload_1
      11: invokeinterface #187,  1          // InterfaceMethod org/togglz/core/Feature.name:()Ljava/lang/String;
      16: invokedynamic #192,  0            // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
      21: areturn

  static {};
    Code:
       0: new           #63                 // class com/fasterxml/jackson/databind/ObjectMapper
       3: dup
       4: invokespecial #196                // Method com/fasterxml/jackson/databind/ObjectMapper."<init>":()V
       7: putstatic     #58                 // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
      10: return
}

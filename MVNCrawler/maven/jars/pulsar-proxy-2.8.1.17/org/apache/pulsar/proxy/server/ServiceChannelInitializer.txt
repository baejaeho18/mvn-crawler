Compiled from "ServiceChannelInitializer.java"
public class org.apache.pulsar.proxy.server.ServiceChannelInitializer extends io.netty.channel.ChannelInitializer<io.netty.channel.socket.SocketChannel> {
  public static final java.lang.String TLS_HANDLER;

  private final org.apache.pulsar.proxy.server.ProxyService proxyService;

  private final boolean enableTls;

  private final boolean tlsEnabledWithKeyStore;

  private org.apache.pulsar.common.util.SslContextAutoRefreshBuilder<io.netty.handler.ssl.SslContext> serverSslCtxRefresher;

  private org.apache.pulsar.common.util.SslContextAutoRefreshBuilder<io.netty.handler.ssl.SslContext> clientSslCtxRefresher;

  private org.apache.pulsar.common.util.keystoretls.NettySSLContextAutoRefreshBuilder serverSSLContextAutoRefreshBuilder;

  private org.apache.pulsar.common.util.keystoretls.NettySSLContextAutoRefreshBuilder clientSSLContextAutoRefreshBuilder;

  public org.apache.pulsar.proxy.server.ServiceChannelInitializer(org.apache.pulsar.proxy.server.ProxyService, org.apache.pulsar.proxy.server.ProxyConfiguration, boolean) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #3                  // Method io/netty/channel/ChannelInitializer."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #4                  // Field proxyService:Lorg/apache/pulsar/proxy/server/ProxyService;
       9: aload_0
      10: iload_3
      11: putfield      #5                  // Field enableTls:Z
      14: aload_0
      15: aload_2
      16: invokevirtual #6                  // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsEnabledWithKeyStore:()Z
      19: putfield      #7                  // Field tlsEnabledWithKeyStore:Z
      22: iload_3
      23: ifeq          141
      26: aload_0
      27: getfield      #7                  // Field tlsEnabledWithKeyStore:Z
      30: ifeq          95
      33: aload_0
      34: new           #8                  // class org/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder
      37: dup
      38: aload_2
      39: invokevirtual #9                  // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsProvider:()Ljava/lang/String;
      42: aload_2
      43: invokevirtual #10                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsKeyStoreType:()Ljava/lang/String;
      46: aload_2
      47: invokevirtual #11                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsKeyStore:()Ljava/lang/String;
      50: aload_2
      51: invokevirtual #12                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsKeyStorePassword:()Ljava/lang/String;
      54: aload_2
      55: invokevirtual #13                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsAllowInsecureConnection:()Z
      58: aload_2
      59: invokevirtual #14                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsTrustStoreType:()Ljava/lang/String;
      62: aload_2
      63: invokevirtual #15                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsTrustStore:()Ljava/lang/String;
      66: aload_2
      67: invokevirtual #16                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsTrustStorePassword:()Ljava/lang/String;
      70: aload_2
      71: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsRequireTrustedClientCertOnConnect:()Z
      74: aload_2
      75: invokevirtual #18                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCiphers:()Ljava/util/Set;
      78: aload_2
      79: invokevirtual #19                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsProtocols:()Ljava/util/Set;
      82: aload_2
      83: invokevirtual #20                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCertRefreshCheckDurationSec:()J
      86: invokespecial #21                 // Method org/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;ZLjava/util/Set;Ljava/util/Set;J)V
      89: putfield      #22                 // Field serverSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
      92: goto          146
      95: aload_0
      96: new           #23                 // class org/apache/pulsar/common/util/NettyServerSslContextBuilder
      99: dup
     100: aload_2
     101: invokevirtual #13                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsAllowInsecureConnection:()Z
     104: aload_2
     105: invokevirtual #24                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsTrustCertsFilePath:()Ljava/lang/String;
     108: aload_2
     109: invokevirtual #25                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCertificateFilePath:()Ljava/lang/String;
     112: aload_2
     113: invokevirtual #26                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsKeyFilePath:()Ljava/lang/String;
     116: aload_2
     117: invokevirtual #18                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCiphers:()Ljava/util/Set;
     120: aload_2
     121: invokevirtual #19                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsProtocols:()Ljava/util/Set;
     124: aload_2
     125: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsRequireTrustedClientCertOnConnect:()Z
     128: aload_2
     129: invokevirtual #20                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCertRefreshCheckDurationSec:()J
     132: invokespecial #27                 // Method org/apache/pulsar/common/util/NettyServerSslContextBuilder."<init>":(ZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Set;Ljava/util/Set;ZJ)V
     135: putfield      #28                 // Field serverSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
     138: goto          146
     141: aload_0
     142: aconst_null
     143: putfield      #28                 // Field serverSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
     146: aload_2
     147: invokevirtual #29                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsEnabledWithBroker:()Z
     150: ifeq          267
     153: aconst_null
     154: astore        4
     156: aload_2
     157: invokevirtual #30                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientAuthenticationPlugin:()Ljava/lang/String;
     160: invokestatic  #31                 // Method org/apache/commons/lang3/StringUtils.isEmpty:(Ljava/lang/CharSequence;)Z
     163: ifne          184
     166: aload_2
     167: invokevirtual #30                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientAuthenticationPlugin:()Ljava/lang/String;
     170: aload_2
     171: invokevirtual #32                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientAuthenticationParameters:()Ljava/lang/String;
     174: invokestatic  #33                 // Method org/apache/pulsar/client/api/AuthenticationFactory.create:(Ljava/lang/String;Ljava/lang/String;)Lorg/apache/pulsar/client/api/Authentication;
     177: invokeinterface #34,  1           // InterfaceMethod org/apache/pulsar/client/api/Authentication.getAuthData:()Lorg/apache/pulsar/client/api/AuthenticationDataProvider;
     182: astore        4
     184: aload_0
     185: getfield      #7                  // Field tlsEnabledWithKeyStore:Z
     188: ifeq          239
     191: aload_0
     192: new           #8                  // class org/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder
     195: dup
     196: aload_2
     197: invokevirtual #35                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientSslProvider:()Ljava/lang/String;
     200: aload_2
     201: invokevirtual #13                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsAllowInsecureConnection:()Z
     204: aload_2
     205: invokevirtual #36                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStoreType:()Ljava/lang/String;
     208: aload_2
     209: invokevirtual #37                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStore:()Ljava/lang/String;
     212: aload_2
     213: invokevirtual #38                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStorePassword:()Ljava/lang/String;
     216: aload_2
     217: invokevirtual #39                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsCiphers:()Ljava/util/Set;
     220: aload_2
     221: invokevirtual #40                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsProtocols:()Ljava/util/Set;
     224: aload_2
     225: invokevirtual #20                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCertRefreshCheckDurationSec:()J
     228: aload         4
     230: invokespecial #41                 // Method org/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder."<init>":(Ljava/lang/String;ZLjava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Set;Ljava/util/Set;JLorg/apache/pulsar/client/api/AuthenticationDataProvider;)V
     233: putfield      #1                  // Field clientSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
     236: goto          264
     239: aload_0
     240: new           #42                 // class org/apache/pulsar/common/util/NettyClientSslContextRefresher
     243: dup
     244: aload_2
     245: invokevirtual #13                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsAllowInsecureConnection:()Z
     248: aload_2
     249: invokevirtual #43                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTrustCertsFilePath:()Ljava/lang/String;
     252: aload         4
     254: aload_2
     255: invokevirtual #20                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getTlsCertRefreshCheckDurationSec:()J
     258: invokespecial #44                 // Method org/apache/pulsar/common/util/NettyClientSslContextRefresher."<init>":(ZLjava/lang/String;Lorg/apache/pulsar/client/api/AuthenticationDataProvider;J)V
     261: putfield      #2                  // Field clientSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
     264: goto          272
     267: aload_0
     268: aconst_null
     269: putfield      #2                  // Field clientSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
     272: return

  protected void initChannel(io.netty.channel.socket.SocketChannel) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #28                 // Field serverSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
       4: ifnull        56
       7: aload_0
       8: getfield      #5                  // Field enableTls:Z
      11: ifeq          56
      14: aload_0
      15: getfield      #28                 // Field serverSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
      18: invokevirtual #45                 // Method org/apache/pulsar/common/util/SslContextAutoRefreshBuilder.get:()Ljava/lang/Object;
      21: checkcast     #46                 // class io/netty/handler/ssl/SslContext
      24: astore_2
      25: aload_2
      26: ifnull        53
      29: aload_1
      30: invokeinterface #47,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.pipeline:()Lio/netty/channel/ChannelPipeline;
      35: ldc           #49                 // String tls
      37: aload_2
      38: aload_1
      39: invokeinterface #50,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.alloc:()Lio/netty/buffer/ByteBufAllocator;
      44: invokevirtual #51                 // Method io/netty/handler/ssl/SslContext.newHandler:(Lio/netty/buffer/ByteBufAllocator;)Lio/netty/handler/ssl/SslHandler;
      47: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
      52: pop
      53: goto          104
      56: aload_0
      57: getfield      #7                  // Field tlsEnabledWithKeyStore:Z
      60: ifeq          104
      63: aload_0
      64: getfield      #22                 // Field serverSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
      67: ifnull        104
      70: aload_1
      71: invokeinterface #47,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.pipeline:()Lio/netty/channel/ChannelPipeline;
      76: ldc           #49                 // String tls
      78: new           #53                 // class io/netty/handler/ssl/SslHandler
      81: dup
      82: aload_0
      83: getfield      #22                 // Field serverSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
      86: invokevirtual #54                 // Method org/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder.get:()Ljava/lang/Object;
      89: checkcast     #55                 // class org/apache/pulsar/common/util/keystoretls/KeyStoreSSLContext
      92: invokevirtual #56                 // Method org/apache/pulsar/common/util/keystoretls/KeyStoreSSLContext.createSSLEngine:()Ljavax/net/ssl/SSLEngine;
      95: invokespecial #57                 // Method io/netty/handler/ssl/SslHandler."<init>":(Ljavax/net/ssl/SSLEngine;)V
      98: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     103: pop
     104: aload_0
     105: getfield      #4                  // Field proxyService:Lorg/apache/pulsar/proxy/server/ProxyService;
     108: invokevirtual #58                 // Method org/apache/pulsar/proxy/server/ProxyService.getConfiguration:()Lorg/apache/pulsar/proxy/server/ProxyConfiguration;
     111: invokevirtual #59                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isHaProxyProtocolEnabled:()Z
     114: ifeq          138
     117: aload_1
     118: invokeinterface #47,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.pipeline:()Lio/netty/channel/ChannelPipeline;
     123: ldc           #61                 // String optional-proxy-protocol-decoder
     125: new           #60                 // class org/apache/pulsar/common/protocol/OptionalProxyProtocolDecoder
     128: dup
     129: invokespecial #62                 // Method org/apache/pulsar/common/protocol/OptionalProxyProtocolDecoder."<init>":()V
     132: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     137: pop
     138: aload_1
     139: invokeinterface #47,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.pipeline:()Lio/netty/channel/ChannelPipeline;
     144: ldc           #63                 // String frameDecoder
     146: new           #64                 // class io/netty/handler/codec/LengthFieldBasedFrameDecoder
     149: dup
     150: ldc           #66                 // int 5253120
     152: iconst_0
     153: iconst_4
     154: iconst_0
     155: iconst_4
     156: invokespecial #67                 // Method io/netty/handler/codec/LengthFieldBasedFrameDecoder."<init>":(IIIII)V
     159: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     164: pop
     165: aconst_null
     166: astore_2
     167: aload_0
     168: getfield      #2                  // Field clientSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
     171: ifnull        187
     174: new           #68                 // class org/apache/pulsar/proxy/server/ServiceChannelInitializer$1
     177: dup
     178: aload_0
     179: aload_1
     180: invokespecial #69                 // Method org/apache/pulsar/proxy/server/ServiceChannelInitializer$1."<init>":(Lorg/apache/pulsar/proxy/server/ServiceChannelInitializer;Lio/netty/channel/socket/SocketChannel;)V
     183: astore_2
     184: goto          203
     187: aload_0
     188: getfield      #1                  // Field clientSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
     191: ifnull        203
     194: new           #70                 // class org/apache/pulsar/proxy/server/ServiceChannelInitializer$2
     197: dup
     198: aload_0
     199: invokespecial #71                 // Method org/apache/pulsar/proxy/server/ServiceChannelInitializer$2."<init>":(Lorg/apache/pulsar/proxy/server/ServiceChannelInitializer;)V
     202: astore_2
     203: aload_1
     204: invokeinterface #47,  1           // InterfaceMethod io/netty/channel/socket/SocketChannel.pipeline:()Lio/netty/channel/ChannelPipeline;
     209: ldc           #72                 // String handler
     211: new           #73                 // class org/apache/pulsar/proxy/server/ProxyConnection
     214: dup
     215: aload_0
     216: getfield      #4                  // Field proxyService:Lorg/apache/pulsar/proxy/server/ProxyService;
     219: aload_2
     220: invokespecial #74                 // Method org/apache/pulsar/proxy/server/ProxyConnection."<init>":(Lorg/apache/pulsar/proxy/server/ProxyService;Ljava/util/function/Supplier;)V
     223: invokeinterface #52,  3           // InterfaceMethod io/netty/channel/ChannelPipeline.addLast:(Ljava/lang/String;Lio/netty/channel/ChannelHandler;)Lio/netty/channel/ChannelPipeline;
     228: pop
     229: return

  protected void initChannel(io.netty.channel.Channel) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #75                 // class io/netty/channel/socket/SocketChannel
       5: invokevirtual #76                 // Method initChannel:(Lio/netty/channel/socket/SocketChannel;)V
       8: return

  static org.apache.pulsar.common.util.SslContextAutoRefreshBuilder access$000(org.apache.pulsar.proxy.server.ServiceChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #2                  // Field clientSslCtxRefresher:Lorg/apache/pulsar/common/util/SslContextAutoRefreshBuilder;
       4: areturn

  static org.apache.pulsar.common.util.keystoretls.NettySSLContextAutoRefreshBuilder access$100(org.apache.pulsar.proxy.server.ServiceChannelInitializer);
    Code:
       0: aload_0
       1: getfield      #1                  // Field clientSSLContextAutoRefreshBuilder:Lorg/apache/pulsar/common/util/keystoretls/NettySSLContextAutoRefreshBuilder;
       4: areturn
}

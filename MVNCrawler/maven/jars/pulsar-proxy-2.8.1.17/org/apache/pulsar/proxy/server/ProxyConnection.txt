Compiled from "ProxyConnection.java"
public class org.apache.pulsar.proxy.server.ProxyConnection extends org.apache.pulsar.common.protocol.PulsarHandler implements io.netty.util.concurrent.FutureListener<java.lang.Void> {
  private org.apache.pulsar.client.impl.PulsarClientImpl client;

  private org.apache.pulsar.client.impl.ConnectionPool connectionPool;

  private org.apache.pulsar.proxy.server.ProxyService service;

  org.apache.pulsar.broker.authentication.AuthenticationDataSource authenticationData;

  private org.apache.pulsar.proxy.server.ProxyConnection$State state;

  private final java.util.function.Supplier<io.netty.handler.ssl.SslHandler> sslHandlerSupplier;

  private org.apache.pulsar.proxy.server.LookupProxyHandler lookupProxyHandler;

  private org.apache.pulsar.proxy.server.DirectProxyHandler directProxyHandler;

  java.lang.String clientAuthRole;

  org.apache.pulsar.common.api.AuthData clientAuthData;

  java.lang.String clientAuthMethod;

  private java.lang.String authMethod;

  org.apache.pulsar.broker.authentication.AuthenticationProvider authenticationProvider;

  org.apache.pulsar.broker.authentication.AuthenticationState authState;

  private org.apache.pulsar.client.impl.conf.ClientConfigurationData clientConf;

  private boolean hasProxyToBrokerUrl;

  private int protocolVersionToAdvertise;

  private java.lang.String proxyToBrokerUrl;

  private io.netty.handler.codec.haproxy.HAProxyMessage haProxyMessage;

  private static final byte[] EMPTY_CREDENTIALS;

  private static final org.slf4j.Logger LOG;

  org.apache.pulsar.client.impl.ConnectionPool getConnectionPool();
    Code:
       0: aload_0
       1: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
       4: invokevirtual #2                  // Method org/apache/pulsar/client/impl/PulsarClientImpl.getCnxPool:()Lorg/apache/pulsar/client/impl/ConnectionPool;
       7: areturn

  public org.apache.pulsar.proxy.server.ProxyConnection(org.apache.pulsar.proxy.server.ProxyService, java.util.function.Supplier<io.netty.handler.ssl.SslHandler>);
    Code:
       0: aload_0
       1: bipush        30
       3: getstatic     #3                  // Field java/util/concurrent/TimeUnit.SECONDS:Ljava/util/concurrent/TimeUnit;
       6: invokespecial #4                  // Method org/apache/pulsar/common/protocol/PulsarHandler."<init>":(ILjava/util/concurrent/TimeUnit;)V
       9: aload_0
      10: aconst_null
      11: putfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
      14: aload_0
      15: aconst_null
      16: putfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      19: aload_0
      20: ldc           #7                  // String none
      22: putfield      #8                  // Field authMethod:Ljava/lang/String;
      25: aload_0
      26: aload_1
      27: putfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      30: aload_0
      31: getstatic     #10                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Init:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      34: putfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      37: aload_0
      38: aload_2
      39: putfield      #12                 // Field sslHandlerSupplier:Ljava/util/function/Supplier;
      42: return

  public void channelRegistered(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #13                 // Method org/apache/pulsar/common/protocol/PulsarHandler.channelRegistered:(Lio/netty/channel/ChannelHandlerContext;)V
       5: getstatic     #14                 // Field org/apache/pulsar/proxy/server/ProxyService.activeConnections:Lio/prometheus/client/Gauge;
       8: invokevirtual #15                 // Method io/prometheus/client/Gauge.inc:()V
      11: getstatic     #14                 // Field org/apache/pulsar/proxy/server/ProxyService.activeConnections:Lio/prometheus/client/Gauge;
      14: invokevirtual #16                 // Method io/prometheus/client/Gauge.get:()D
      17: aload_0
      18: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      21: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyService.getConfiguration:()Lorg/apache/pulsar/proxy/server/ProxyConfiguration;
      24: invokevirtual #18                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getMaxConcurrentInboundConnections:()I
      27: i2d
      28: dcmpl
      29: ifle          46
      32: aload_1
      33: invokeinterface #19,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
      38: pop
      39: getstatic     #20                 // Field org/apache/pulsar/proxy/server/ProxyService.rejectedConnections:Lio/prometheus/client/Counter;
      42: invokevirtual #21                 // Method io/prometheus/client/Counter.inc:()V
      45: return
      46: return

  public void channelUnregistered(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #22                 // Method org/apache/pulsar/common/protocol/PulsarHandler.channelUnregistered:(Lio/netty/channel/ChannelHandlerContext;)V
       5: getstatic     #14                 // Field org/apache/pulsar/proxy/server/ProxyService.activeConnections:Lio/prometheus/client/Gauge;
       8: invokevirtual #23                 // Method io/prometheus/client/Gauge.dec:()V
      11: return

  public void channelActive(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #24                 // Method org/apache/pulsar/common/protocol/PulsarHandler.channelActive:(Lio/netty/channel/ChannelHandlerContext;)V
       5: getstatic     #25                 // Field org/apache/pulsar/proxy/server/ProxyService.newConnections:Lio/prometheus/client/Counter;
       8: invokevirtual #21                 // Method io/prometheus/client/Counter.inc:()V
      11: aload_0
      12: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      15: invokevirtual #26                 // Method org/apache/pulsar/proxy/server/ProxyService.getClientCnxs:()Ljava/util/Set;
      18: aload_0
      19: invokeinterface #27,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      24: pop
      25: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      28: ldc           #29                 // String [{}] New connection opened
      30: aload_0
      31: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      34: invokeinterface #31,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      39: return

  public void channelInactive(io.netty.channel.ChannelHandlerContext) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #32                 // Method org/apache/pulsar/common/protocol/PulsarHandler.channelInactive:(Lio/netty/channel/ChannelHandlerContext;)V
       5: aload_0
       6: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
       9: ifnull        35
      12: aload_0
      13: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      16: getfield      #33                 // Field org/apache/pulsar/proxy/server/DirectProxyHandler.outboundChannel:Lio/netty/channel/Channel;
      19: ifnull        35
      22: aload_0
      23: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      26: getfield      #33                 // Field org/apache/pulsar/proxy/server/DirectProxyHandler.outboundChannel:Lio/netty/channel/Channel;
      29: invokeinterface #34,  1           // InterfaceMethod io/netty/channel/Channel.close:()Lio/netty/channel/ChannelFuture;
      34: pop
      35: aload_0
      36: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      39: ifnull        49
      42: aload_0
      43: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      46: invokevirtual #35                 // Method org/apache/pulsar/client/impl/PulsarClientImpl.close:()V
      49: aload_0
      50: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      53: invokevirtual #26                 // Method org/apache/pulsar/proxy/server/ProxyService.getClientCnxs:()Ljava/util/Set;
      56: aload_0
      57: invokeinterface #36,  2           // InterfaceMethod java/util/Set.remove:(Ljava/lang/Object;)Z
      62: pop
      63: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      66: ldc           #37                 // String [{}] Connection closed
      68: aload_0
      69: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      72: invokeinterface #31,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
      77: aload_0
      78: getfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
      81: ifnull        110
      84: aload_0
      85: getfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
      88: invokevirtual #39                 // Method org/apache/pulsar/client/impl/ConnectionPool.close:()V
      91: goto          110
      94: astore_2
      95: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      98: ldc           #41                 // String Failed to close connection pool {}
     100: aload_2
     101: invokevirtual #42                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
     104: aload_2
     105: invokeinterface #43,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     110: return
    Exception table:
       from    to  target type
          84    91    94   Class java/lang/Exception

  public void exceptionCaught(io.netty.channel.ChannelHandlerContext, java.lang.Throwable) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #44                 // Method org/apache/pulsar/common/protocol/PulsarHandler.exceptionCaught:(Lio/netty/channel/ChannelHandlerContext;Ljava/lang/Throwable;)V
       6: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
       9: ldc           #45                 // String [{}] Got exception {} : {} {}
      11: iconst_4
      12: anewarray     #46                 // class java/lang/Object
      15: dup
      16: iconst_0
      17: aload_0
      18: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      21: aastore
      22: dup
      23: iconst_1
      24: aload_2
      25: invokevirtual #47                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      28: invokevirtual #48                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      31: aastore
      32: dup
      33: iconst_2
      34: aload_2
      35: invokevirtual #49                 // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
      38: aastore
      39: dup
      40: iconst_3
      41: aload_2
      42: invokestatic  #50                 // Method org/apache/pulsar/client/impl/ClientCnx.isKnownException:(Ljava/lang/Throwable;)Z
      45: ifeq          52
      48: aconst_null
      49: goto          53
      52: aload_2
      53: aastore
      54: invokeinterface #51,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
      59: aload_1
      60: invokeinterface #19,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
      65: pop
      66: return

  public void channelRead(io.netty.channel.ChannelHandlerContext, java.lang.Object) throws java.lang.Exception;
    Code:
       0: aload_2
       1: instanceof    #52                 // class io/netty/handler/codec/haproxy/HAProxyMessage
       4: ifeq          16
       7: aload_0
       8: aload_2
       9: checkcast     #52                 // class io/netty/handler/codec/haproxy/HAProxyMessage
      12: putfield      #53                 // Field haProxyMessage:Lio/netty/handler/codec/haproxy/HAProxyMessage;
      15: return
      16: getstatic     #54                 // Field org/apache/pulsar/proxy/server/ProxyConnection$1.$SwitchMap$org$apache$pulsar$proxy$server$ProxyConnection$State:[I
      19: aload_0
      20: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      23: invokevirtual #55                 // Method org/apache/pulsar/proxy/server/ProxyConnection$State.ordinal:()I
      26: iaload
      27: tableswitch   { // 1 to 4
                     1: 56
                     2: 56
                     3: 56
                     4: 65
               default: 129
          }
      56: aload_0
      57: aload_1
      58: aload_2
      59: invokespecial #56                 // Method org/apache/pulsar/common/protocol/PulsarHandler.channelRead:(Lio/netty/channel/ChannelHandlerContext;Ljava/lang/Object;)V
      62: goto          129
      65: getstatic     #57                 // Field org/apache/pulsar/proxy/server/ProxyService.opsCounter:Lio/prometheus/client/Counter;
      68: invokevirtual #21                 // Method io/prometheus/client/Counter.inc:()V
      71: aload_2
      72: instanceof    #58                 // class io/netty/buffer/ByteBuf
      75: ifeq          106
      78: aload_2
      79: checkcast     #58                 // class io/netty/buffer/ByteBuf
      82: invokevirtual #59                 // Method io/netty/buffer/ByteBuf.readableBytes:()I
      85: istore_3
      86: aload_0
      87: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      90: invokevirtual #60                 // Method org/apache/pulsar/proxy/server/DirectProxyHandler.getInboundChannelRequestsRate:()Lorg/apache/pulsar/common/stats/Rate;
      93: iload_3
      94: i2l
      95: invokevirtual #61                 // Method org/apache/pulsar/common/stats/Rate.recordEvent:(J)V
      98: getstatic     #62                 // Field org/apache/pulsar/proxy/server/ProxyService.bytesCounter:Lio/prometheus/client/Counter;
     101: iload_3
     102: i2d
     103: invokevirtual #63                 // Method io/prometheus/client/Counter.inc:(D)V
     106: aload_0
     107: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
     110: getfield      #33                 // Field org/apache/pulsar/proxy/server/DirectProxyHandler.outboundChannel:Lio/netty/channel/Channel;
     113: aload_2
     114: invokeinterface #64,  2           // InterfaceMethod io/netty/channel/Channel.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     119: aload_0
     120: invokeinterface #65,  2           // InterfaceMethod io/netty/channel/ChannelFuture.addListener:(Lio/netty/util/concurrent/GenericFutureListener;)Lio/netty/channel/ChannelFuture;
     125: pop
     126: goto          129
     129: return

  public void operationComplete(io.netty.util.concurrent.Future<java.lang.Void>) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #66,  1           // InterfaceMethod io/netty/util/concurrent/Future.isSuccess:()Z
       6: ifeq          22
       9: aload_0
      10: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
      13: invokeinterface #68,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.read:()Lio/netty/channel/ChannelHandlerContext;
      18: pop
      19: goto          55
      22: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      25: ldc           #69                 // String [{}] Error in writing to inbound channel. Closing
      27: aload_0
      28: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      31: aload_1
      32: invokeinterface #70,  1           // InterfaceMethod io/netty/util/concurrent/Future.cause:()Ljava/lang/Throwable;
      37: invokeinterface #71,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      42: aload_0
      43: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      46: getfield      #33                 // Field org/apache/pulsar/proxy/server/DirectProxyHandler.outboundChannel:Lio/netty/channel/Channel;
      49: invokeinterface #34,  1           // InterfaceMethod io/netty/channel/Channel.close:()Lio/netty/channel/ChannelFuture;
      54: pop
      55: return

  private void completeConnect();
    Code:
       0: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
       3: ldc           #72                 // String [{}] complete connection, init proxy handler. authenticated with {} role {}, hasProxyToBrokerUrl: {}
       5: iconst_4
       6: anewarray     #46                 // class java/lang/Object
       9: dup
      10: iconst_0
      11: aload_0
      12: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      15: aastore
      16: dup
      17: iconst_1
      18: aload_0
      19: getfield      #8                  // Field authMethod:Ljava/lang/String;
      22: aastore
      23: dup
      24: iconst_2
      25: aload_0
      26: getfield      #73                 // Field clientAuthRole:Ljava/lang/String;
      29: aastore
      30: dup
      31: iconst_3
      32: aload_0
      33: getfield      #74                 // Field hasProxyToBrokerUrl:Z
      36: invokestatic  #75                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      39: aastore
      40: invokeinterface #76,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;[Ljava/lang/Object;)V
      45: aload_0
      46: getfield      #74                 // Field hasProxyToBrokerUrl:Z
      49: ifeq          94
      52: aload_0
      53: getstatic     #77                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyConnectionToBroker:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      56: putfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      59: aload_0
      60: new           #78                 // class org/apache/pulsar/proxy/server/DirectProxyHandler
      63: dup
      64: aload_0
      65: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      68: aload_0
      69: aload_0
      70: getfield      #79                 // Field proxyToBrokerUrl:Ljava/lang/String;
      73: aload_0
      74: getfield      #80                 // Field protocolVersionToAdvertise:I
      77: aload_0
      78: getfield      #12                 // Field sslHandlerSupplier:Ljava/util/function/Supplier;
      81: invokespecial #81                 // Method org/apache/pulsar/proxy/server/DirectProxyHandler."<init>":(Lorg/apache/pulsar/proxy/server/ProxyService;Lorg/apache/pulsar/proxy/server/ProxyConnection;Ljava/lang/String;ILjava/util/function/Supplier;)V
      84: putfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
      87: aload_0
      88: invokevirtual #82                 // Method cancelKeepAliveTask:()V
      91: goto          134
      94: aload_0
      95: getstatic     #83                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyLookupRequests:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
      98: putfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
     101: aload_0
     102: new           #84                 // class org/apache/pulsar/proxy/server/LookupProxyHandler
     105: dup
     106: aload_0
     107: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     110: aload_0
     111: invokespecial #85                 // Method org/apache/pulsar/proxy/server/LookupProxyHandler."<init>":(Lorg/apache/pulsar/proxy/server/ProxyService;Lorg/apache/pulsar/proxy/server/ProxyConnection;)V
     114: putfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
     117: aload_0
     118: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
     121: aload_0
     122: getfield      #80                 // Field protocolVersionToAdvertise:I
     125: invokestatic  #86                 // Method org/apache/pulsar/common/protocol/Commands.newConnected:(I)Lio/netty/buffer/ByteBuf;
     128: invokeinterface #87,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     133: pop
     134: return

  private void createClientAndCompleteConnect(org.apache.pulsar.common.api.AuthData) throws org.apache.pulsar.client.api.PulsarClientException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
       4: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyService.getConfiguration:()Lorg/apache/pulsar/proxy/server/ProxyConfiguration;
       7: invokevirtual #88                 // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isForwardAuthorizationCredentials:()Z
      10: ifeq          26
      13: aload_0
      14: aload_1
      15: putfield      #89                 // Field clientAuthData:Lorg/apache/pulsar/common/api/AuthData;
      18: aload_0
      19: aload_0
      20: getfield      #8                  // Field authMethod:Ljava/lang/String;
      23: putfield      #90                 // Field clientAuthMethod:Ljava/lang/String;
      26: aload_0
      27: aload_0
      28: aload_0
      29: getfield      #91                 // Field clientConf:Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
      32: aload_0
      33: getfield      #89                 // Field clientAuthData:Lorg/apache/pulsar/common/api/AuthData;
      36: aload_0
      37: getfield      #90                 // Field clientAuthMethod:Ljava/lang/String;
      40: aload_0
      41: getfield      #80                 // Field protocolVersionToAdvertise:I
      44: invokespecial #92                 // Method createClient:(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lorg/apache/pulsar/common/api/AuthData;Ljava/lang/String;I)Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      47: putfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      50: aload_0
      51: invokespecial #93                 // Method completeConnect:()V
      54: return

  private void doAuthentication(org.apache.pulsar.common.api.AuthData) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #94                 // Field authState:Lorg/apache/pulsar/broker/authentication/AuthenticationState;
       4: aload_1
       5: invokeinterface #95,  2           // InterfaceMethod org/apache/pulsar/broker/authentication/AuthenticationState.authenticate:(Lorg/apache/pulsar/common/api/AuthData;)Lorg/apache/pulsar/common/api/AuthData;
      10: astore_2
      11: aload_0
      12: getfield      #94                 // Field authState:Lorg/apache/pulsar/broker/authentication/AuthenticationState;
      15: invokeinterface #96,  1           // InterfaceMethod org/apache/pulsar/broker/authentication/AuthenticationState.isComplete:()Z
      20: ifeq          88
      23: aload_0
      24: aload_0
      25: getfield      #94                 // Field authState:Lorg/apache/pulsar/broker/authentication/AuthenticationState;
      28: invokeinterface #97,  1           // InterfaceMethod org/apache/pulsar/broker/authentication/AuthenticationState.getAuthRole:()Ljava/lang/String;
      33: putfield      #73                 // Field clientAuthRole:Ljava/lang/String;
      36: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      39: invokeinterface #98,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      44: ifeq          82
      47: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      50: ldc           #99                 // String [{}] Client successfully authenticated with {} role {}
      52: iconst_3
      53: anewarray     #46                 // class java/lang/Object
      56: dup
      57: iconst_0
      58: aload_0
      59: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      62: aastore
      63: dup
      64: iconst_1
      65: aload_0
      66: getfield      #8                  // Field authMethod:Ljava/lang/String;
      69: aastore
      70: dup
      71: iconst_2
      72: aload_0
      73: getfield      #73                 // Field clientAuthRole:Ljava/lang/String;
      76: aastore
      77: invokeinterface #100,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      82: aload_0
      83: aload_1
      84: invokespecial #101                // Method createClientAndCompleteConnect:(Lorg/apache/pulsar/common/api/AuthData;)V
      87: return
      88: aload_0
      89: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
      92: aload_0
      93: getfield      #8                  // Field authMethod:Ljava/lang/String;
      96: aload_2
      97: aload_0
      98: getfield      #80                 // Field protocolVersionToAdvertise:I
     101: invokestatic  #102                // Method org/apache/pulsar/common/protocol/Commands.newAuthChallenge:(Ljava/lang/String;Lorg/apache/pulsar/common/api/AuthData;I)Lio/netty/buffer/ByteBuf;
     104: invokeinterface #87,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     109: pop
     110: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
     113: invokeinterface #98,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
     118: ifeq          139
     121: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
     124: ldc           #103                // String [{}] Authentication in progress client by method {}.
     126: aload_0
     127: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     130: aload_0
     131: getfield      #8                  // Field authMethod:Ljava/lang/String;
     134: invokeinterface #104,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     139: aload_0
     140: getstatic     #105                // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Connecting:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
     143: putfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
     146: return

  protected void handleConnect(org.apache.pulsar.common.api.proto.CommandConnect);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #10                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Init:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_0
      19: aload_1
      20: invokevirtual #107                // Method org/apache/pulsar/common/api/proto/CommandConnect.getProtocolVersion:()I
      23: invokevirtual #108                // Method setRemoteEndpointProtocolVersion:(I)V
      26: aload_0
      27: aload_1
      28: invokevirtual #109                // Method org/apache/pulsar/common/api/proto/CommandConnect.hasProxyToBrokerUrl:()Z
      31: putfield      #74                 // Field hasProxyToBrokerUrl:Z
      34: aload_0
      35: aload_1
      36: invokestatic  #110                // Method getProtocolVersionToAdvertise:(Lorg/apache/pulsar/common/api/proto/CommandConnect;)I
      39: putfield      #80                 // Field protocolVersionToAdvertise:I
      42: aload_0
      43: aload_1
      44: invokevirtual #109                // Method org/apache/pulsar/common/api/proto/CommandConnect.hasProxyToBrokerUrl:()Z
      47: ifeq          57
      50: aload_1
      51: invokevirtual #111                // Method org/apache/pulsar/common/api/proto/CommandConnect.getProxyToBrokerUrl:()Ljava/lang/String;
      54: goto          59
      57: ldc           #112                // String null
      59: putfield      #79                 // Field proxyToBrokerUrl:Ljava/lang/String;
      62: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      65: invokeinterface #98,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      70: ifeq          141
      73: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      76: ldc           #113                // String Received CONNECT from {} proxyToBroker={}
      78: aload_0
      79: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      82: aload_0
      83: getfield      #79                 // Field proxyToBrokerUrl:Ljava/lang/String;
      86: invokeinterface #104,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      91: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      94: ldc           #114                // String [{}] Protocol version to advertise to broker is {}, clientProtocolVersion={}, proxyProtocolVersion={}
      96: iconst_4
      97: anewarray     #46                 // class java/lang/Object
     100: dup
     101: iconst_0
     102: aload_0
     103: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     106: aastore
     107: dup
     108: iconst_1
     109: aload_0
     110: getfield      #80                 // Field protocolVersionToAdvertise:I
     113: invokestatic  #115                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     116: aastore
     117: dup
     118: iconst_2
     119: aload_0
     120: invokevirtual #116                // Method getRemoteEndpointProtocolVersion:()I
     123: invokestatic  #115                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     126: aastore
     127: dup
     128: iconst_3
     129: invokestatic  #117                // Method org/apache/pulsar/common/protocol/Commands.getCurrentProtocolVersion:()I
     132: invokestatic  #115                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     135: aastore
     136: invokeinterface #100,  3          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     141: aload_0
     142: invokevirtual #116                // Method getRemoteEndpointProtocolVersion:()I
     145: getstatic     #118                // Field org/apache/pulsar/common/api/proto/ProtocolVersion.v10:Lorg/apache/pulsar/common/api/proto/ProtocolVersion;
     148: invokevirtual #119                // Method org/apache/pulsar/common/api/proto/ProtocolVersion.getValue:()I
     151: if_icmpge     179
     154: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
     157: ldc           #120                // String [{}] Client doesn\'t support connecting through proxy
     159: aload_0
     160: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     163: invokeinterface #121,  3          // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
     168: aload_0
     169: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
     172: invokeinterface #19,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
     177: pop
     178: return
     179: aload_0
     180: aload_0
     181: invokevirtual #122                // Method createClientConfiguration:()Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
     184: putfield      #91                 // Field clientConf:Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
     187: aload_1
     188: invokestatic  #110                // Method getProtocolVersionToAdvertise:(Lorg/apache/pulsar/common/api/proto/CommandConnect;)I
     191: istore_2
     192: aload_0
     193: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     196: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyService.getConfiguration:()Lorg/apache/pulsar/proxy/server/ProxyConfiguration;
     199: invokevirtual #123                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isAuthenticationEnabled:()Z
     202: ifne          272
     205: aload_0
     206: new           #124                // class org/apache/pulsar/proxy/server/ProxyConnectionPool
     209: dup
     210: aload_0
     211: getfield      #91                 // Field clientConf:Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
     214: aload_0
     215: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     218: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
     221: aload_0
     222: iload_2
     223: invokedynamic #126,  0            // InvokeDynamic #0:get:(Lorg/apache/pulsar/proxy/server/ProxyConnection;I)Ljava/util/function/Supplier;
     228: invokespecial #127                // Method org/apache/pulsar/proxy/server/ProxyConnectionPool."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;Ljava/util/function/Supplier;)V
     231: putfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
     234: aload_0
     235: new           #128                // class org/apache/pulsar/client/impl/PulsarClientImpl
     238: dup
     239: aload_0
     240: getfield      #91                 // Field clientConf:Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
     243: aload_0
     244: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     247: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
     250: aload_0
     251: getfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
     254: aload_0
     255: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     258: invokevirtual #129                // Method org/apache/pulsar/proxy/server/ProxyService.getTimer:()Lio/netty/util/Timer;
     261: invokespecial #130                // Method org/apache/pulsar/client/impl/PulsarClientImpl."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;Lorg/apache/pulsar/client/impl/ConnectionPool;Lio/netty/util/Timer;)V
     264: putfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
     267: aload_0
     268: invokespecial #93                 // Method completeConnect:()V
     271: return
     272: aload_1
     273: invokevirtual #131                // Method org/apache/pulsar/common/api/proto/CommandConnect.hasAuthData:()Z
     276: ifeq          286
     279: aload_1
     280: invokevirtual #132                // Method org/apache/pulsar/common/api/proto/CommandConnect.getAuthData:()[B
     283: goto          289
     286: getstatic     #133                // Field EMPTY_CREDENTIALS:[B
     289: invokestatic  #134                // Method org/apache/pulsar/common/api/AuthData.of:([B)Lorg/apache/pulsar/common/api/AuthData;
     292: astore_3
     293: aload_1
     294: invokevirtual #135                // Method org/apache/pulsar/common/api/proto/CommandConnect.hasAuthMethodName:()Z
     297: ifeq          311
     300: aload_0
     301: aload_1
     302: invokevirtual #136                // Method org/apache/pulsar/common/api/proto/CommandConnect.getAuthMethodName:()Ljava/lang/String;
     305: putfield      #8                  // Field authMethod:Ljava/lang/String;
     308: goto          346
     311: aload_1
     312: invokevirtual #137                // Method org/apache/pulsar/common/api/proto/CommandConnect.hasAuthMethod:()Z
     315: ifeq          340
     318: aload_0
     319: aload_1
     320: invokevirtual #138                // Method org/apache/pulsar/common/api/proto/CommandConnect.getAuthMethod:()Lorg/apache/pulsar/common/api/proto/AuthMethod;
     323: invokevirtual #139                // Method org/apache/pulsar/common/api/proto/AuthMethod.name:()Ljava/lang/String;
     326: bipush        10
     328: invokevirtual #140                // Method java/lang/String.substring:(I)Ljava/lang/String;
     331: invokevirtual #141                // Method java/lang/String.toLowerCase:()Ljava/lang/String;
     334: putfield      #8                  // Field authMethod:Ljava/lang/String;
     337: goto          346
     340: aload_0
     341: ldc           #7                  // String none
     343: putfield      #8                  // Field authMethod:Ljava/lang/String;
     346: aload_0
     347: aload_0
     348: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     351: invokevirtual #142                // Method org/apache/pulsar/proxy/server/ProxyService.getAuthenticationService:()Lorg/apache/pulsar/broker/authentication/AuthenticationService;
     354: aload_0
     355: getfield      #8                  // Field authMethod:Ljava/lang/String;
     358: invokevirtual #143                // Method org/apache/pulsar/broker/authentication/AuthenticationService.getAuthenticationProvider:(Ljava/lang/String;)Lorg/apache/pulsar/broker/authentication/AuthenticationProvider;
     361: putfield      #144                // Field authenticationProvider:Lorg/apache/pulsar/broker/authentication/AuthenticationProvider;
     364: aload_0
     365: getfield      #144                // Field authenticationProvider:Lorg/apache/pulsar/broker/authentication/AuthenticationProvider;
     368: ifnonnull     402
     371: aload_0
     372: aload_0
     373: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
     376: invokevirtual #142                // Method org/apache/pulsar/proxy/server/ProxyService.getAuthenticationService:()Lorg/apache/pulsar/broker/authentication/AuthenticationService;
     379: invokevirtual #145                // Method org/apache/pulsar/broker/authentication/AuthenticationService.getAnonymousUserRole:()Ljava/util/Optional;
     382: invokedynamic #146,  0            // InvokeDynamic #1:get:()Ljava/util/function/Supplier;
     387: invokevirtual #147                // Method java/util/Optional.orElseThrow:(Ljava/util/function/Supplier;)Ljava/lang/Object;
     390: checkcast     #148                // class java/lang/String
     393: putfield      #73                 // Field clientAuthRole:Ljava/lang/String;
     396: aload_0
     397: aload_3
     398: invokespecial #101                // Method createClientAndCompleteConnect:(Lorg/apache/pulsar/common/api/AuthData;)V
     401: return
     402: aload_0
     403: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
     406: invokeinterface #149,  1          // InterfaceMethod io/netty/channel/ChannelHandlerContext.channel:()Lio/netty/channel/Channel;
     411: invokeinterface #150,  1          // InterfaceMethod io/netty/channel/Channel.pipeline:()Lio/netty/channel/ChannelPipeline;
     416: ldc           #152                // String tls
     418: invokeinterface #153,  2          // InterfaceMethod io/netty/channel/ChannelPipeline.get:(Ljava/lang/String;)Lio/netty/channel/ChannelHandler;
     423: astore        4
     425: aconst_null
     426: astore        5
     428: aload         4
     430: ifnull        446
     433: aload         4
     435: checkcast     #154                // class io/netty/handler/ssl/SslHandler
     438: invokevirtual #155                // Method io/netty/handler/ssl/SslHandler.engine:()Ljavax/net/ssl/SSLEngine;
     441: invokevirtual #156                // Method javax/net/ssl/SSLEngine.getSession:()Ljavax/net/ssl/SSLSession;
     444: astore        5
     446: aload_0
     447: aload_0
     448: getfield      #144                // Field authenticationProvider:Lorg/apache/pulsar/broker/authentication/AuthenticationProvider;
     451: aload_3
     452: aload_0
     453: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     456: aload         5
     458: invokeinterface #157,  4          // InterfaceMethod org/apache/pulsar/broker/authentication/AuthenticationProvider.newAuthState:(Lorg/apache/pulsar/common/api/AuthData;Ljava/net/SocketAddress;Ljavax/net/ssl/SSLSession;)Lorg/apache/pulsar/broker/authentication/AuthenticationState;
     463: putfield      #94                 // Field authState:Lorg/apache/pulsar/broker/authentication/AuthenticationState;
     466: aload_0
     467: aload_0
     468: getfield      #94                 // Field authState:Lorg/apache/pulsar/broker/authentication/AuthenticationState;
     471: invokeinterface #158,  1          // InterfaceMethod org/apache/pulsar/broker/authentication/AuthenticationState.getAuthDataSource:()Lorg/apache/pulsar/broker/authentication/AuthenticationDataSource;
     476: putfield      #159                // Field authenticationData:Lorg/apache/pulsar/broker/authentication/AuthenticationDataSource;
     479: aload_0
     480: aload_3
     481: invokespecial #160                // Method doAuthentication:(Lorg/apache/pulsar/common/api/AuthData;)V
     484: goto          529
     487: astore_2
     488: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
     491: ldc           #161                // String [{}] Unable to authenticate:
     493: aload_0
     494: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     497: aload_2
     498: invokeinterface #71,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     503: aload_0
     504: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
     507: ldc2_w        #162                // long -1l
     510: getstatic     #164                // Field org/apache/pulsar/common/api/proto/ServerError.AuthenticationError:Lorg/apache/pulsar/common/api/proto/ServerError;
     513: ldc           #165                // String Failed to authenticate
     515: invokestatic  #166                // Method org/apache/pulsar/common/protocol/Commands.newError:(JLorg/apache/pulsar/common/api/proto/ServerError;Ljava/lang/String;)Lio/netty/buffer/ByteBuf;
     518: invokeinterface #87,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     523: pop
     524: aload_0
     525: invokespecial #167                // Method close:()V
     528: return
     529: return
    Exception table:
       from    to  target type
         179   271   487   Class java/lang/Exception
         272   401   487   Class java/lang/Exception
         402   484   487   Class java/lang/Exception

  protected void handleAuthResponse(org.apache.pulsar.common.api.proto.CommandAuthResponse);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #105                // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Connecting:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_1
      19: invokevirtual #168                // Method org/apache/pulsar/common/api/proto/CommandAuthResponse.hasResponse:()Z
      22: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      25: aload_1
      26: invokevirtual #169                // Method org/apache/pulsar/common/api/proto/CommandAuthResponse.getResponse:()Lorg/apache/pulsar/common/api/proto/AuthData;
      29: invokevirtual #170                // Method org/apache/pulsar/common/api/proto/AuthData.hasAuthData:()Z
      32: ifeq          49
      35: aload_1
      36: invokevirtual #169                // Method org/apache/pulsar/common/api/proto/CommandAuthResponse.getResponse:()Lorg/apache/pulsar/common/api/proto/AuthData;
      39: invokevirtual #171                // Method org/apache/pulsar/common/api/proto/AuthData.hasAuthMethodName:()Z
      42: ifeq          49
      45: iconst_1
      46: goto          50
      49: iconst_0
      50: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      53: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      56: invokeinterface #98,  1           // InterfaceMethod org/slf4j/Logger.isDebugEnabled:()Z
      61: ifeq          85
      64: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      67: ldc           #172                // String Received AuthResponse from {}, auth method: {}
      69: aload_0
      70: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
      73: aload_1
      74: invokevirtual #169                // Method org/apache/pulsar/common/api/proto/CommandAuthResponse.getResponse:()Lorg/apache/pulsar/common/api/proto/AuthData;
      77: invokevirtual #173                // Method org/apache/pulsar/common/api/proto/AuthData.getAuthMethodName:()Ljava/lang/String;
      80: invokeinterface #104,  4          // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      85: aload_1
      86: invokevirtual #169                // Method org/apache/pulsar/common/api/proto/CommandAuthResponse.getResponse:()Lorg/apache/pulsar/common/api/proto/AuthData;
      89: invokevirtual #174                // Method org/apache/pulsar/common/api/proto/AuthData.getAuthData:()[B
      92: invokestatic  #134                // Method org/apache/pulsar/common/api/AuthData.of:([B)Lorg/apache/pulsar/common/api/AuthData;
      95: astore_2
      96: aload_0
      97: aload_2
      98: invokespecial #160                // Method doAuthentication:(Lorg/apache/pulsar/common/api/AuthData;)V
     101: goto          161
     104: astore_2
     105: ldc           #175                // String Unable to handleAuthResponse
     107: astore_3
     108: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
     111: ldc           #176                // String [{}] {}
     113: iconst_3
     114: anewarray     #46                 // class java/lang/Object
     117: dup
     118: iconst_0
     119: aload_0
     120: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
     123: aastore
     124: dup
     125: iconst_1
     126: aload_3
     127: aastore
     128: dup
     129: iconst_2
     130: aload_2
     131: aastore
     132: invokeinterface #51,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     137: aload_0
     138: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
     141: ldc2_w        #162                // long -1l
     144: getstatic     #164                // Field org/apache/pulsar/common/api/proto/ServerError.AuthenticationError:Lorg/apache/pulsar/common/api/proto/ServerError;
     147: aload_3
     148: invokestatic  #166                // Method org/apache/pulsar/common/protocol/Commands.newError:(JLorg/apache/pulsar/common/api/proto/ServerError;Ljava/lang/String;)Lio/netty/buffer/ByteBuf;
     151: invokeinterface #87,  2           // InterfaceMethod io/netty/channel/ChannelHandlerContext.writeAndFlush:(Ljava/lang/Object;)Lio/netty/channel/ChannelFuture;
     156: pop
     157: aload_0
     158: invokespecial #167                // Method close:()V
     161: return
    Exception table:
       from    to  target type
          85   101   104   Class java/lang/Exception

  protected void handlePartitionMetadataRequest(org.apache.pulsar.common.api.proto.CommandPartitionedTopicMetadata);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #83                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyLookupRequests:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_0
      19: getfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
      22: aload_1
      23: invokevirtual #177                // Method org/apache/pulsar/proxy/server/LookupProxyHandler.handlePartitionMetadataResponse:(Lorg/apache/pulsar/common/api/proto/CommandPartitionedTopicMetadata;)V
      26: return

  protected void handleGetTopicsOfNamespace(org.apache.pulsar.common.api.proto.CommandGetTopicsOfNamespace);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #83                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyLookupRequests:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_0
      19: getfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
      22: aload_1
      23: invokevirtual #178                // Method org/apache/pulsar/proxy/server/LookupProxyHandler.handleGetTopicsOfNamespace:(Lorg/apache/pulsar/common/api/proto/CommandGetTopicsOfNamespace;)V
      26: return

  protected void handleGetSchema(org.apache.pulsar.common.api.proto.CommandGetSchema);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #83                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyLookupRequests:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_0
      19: getfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
      22: aload_1
      23: invokevirtual #179                // Method org/apache/pulsar/proxy/server/LookupProxyHandler.handleGetSchema:(Lorg/apache/pulsar/common/api/proto/CommandGetSchema;)V
      26: return

  protected void handleLookup(org.apache.pulsar.common.api.proto.CommandLookupTopic);
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #83                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.ProxyLookupRequests:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: invokestatic  #106                // Method com/google/common/base/Preconditions.checkArgument:(Z)V
      18: aload_0
      19: getfield      #5                  // Field lookupProxyHandler:Lorg/apache/pulsar/proxy/server/LookupProxyHandler;
      22: aload_1
      23: invokevirtual #180                // Method org/apache/pulsar/proxy/server/LookupProxyHandler.handleLookup:(Lorg/apache/pulsar/common/api/proto/CommandLookupTopic;)V
      26: return

  private void close();
    Code:
       0: aload_0
       1: getstatic     #181                // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Closed:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: putfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: aload_0
       8: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
      11: invokeinterface #19,  1           // InterfaceMethod io/netty/channel/ChannelHandlerContext.close:()Lio/netty/channel/ChannelFuture;
      16: pop
      17: aload_0
      18: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      21: ifnull        31
      24: aload_0
      25: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      28: invokevirtual #35                 // Method org/apache/pulsar/client/impl/PulsarClientImpl.close:()V
      31: goto          53
      34: astore_1
      35: getstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      38: ldc           #183                // String Unable to close pulsar client - {}. Error - {}
      40: aload_0
      41: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
      44: aload_1
      45: invokevirtual #184                // Method org/apache/pulsar/client/api/PulsarClientException.getMessage:()Ljava/lang/String;
      48: invokeinterface #43,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      53: return
    Exception table:
       from    to  target type
          17    31    34   Class org/apache/pulsar/client/api/PulsarClientException

  org.apache.pulsar.client.impl.conf.ClientConfigurationData createClientConfiguration() throws org.apache.pulsar.client.api.PulsarClientException$UnsupportedAuthenticationException;
    Code:
       0: new           #185                // class org/apache/pulsar/client/impl/conf/ClientConfigurationData
       3: dup
       4: invokespecial #186                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData."<init>":()V
       7: astore_1
       8: aload_1
       9: aload_0
      10: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      13: invokevirtual #187                // Method org/apache/pulsar/proxy/server/ProxyService.getServiceUrl:()Ljava/lang/String;
      16: invokevirtual #188                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setServiceUrl:(Ljava/lang/String;)V
      19: aload_0
      20: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      23: invokevirtual #17                 // Method org/apache/pulsar/proxy/server/ProxyService.getConfiguration:()Lorg/apache/pulsar/proxy/server/ProxyConfiguration;
      26: astore_2
      27: aload_1
      28: aload_0
      29: invokevirtual #189                // Method getClientAuthentication:()Lorg/apache/pulsar/client/api/Authentication;
      32: invokevirtual #190                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setAuthentication:(Lorg/apache/pulsar/client/api/Authentication;)V
      35: aload_2
      36: invokevirtual #191                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsEnabledWithBroker:()Z
      39: ifeq          102
      42: aload_1
      43: iconst_1
      44: invokevirtual #192                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setUseTls:(Z)V
      47: aload_2
      48: invokevirtual #193                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isBrokerClientTlsEnabledWithKeyStore:()Z
      51: ifeq          86
      54: aload_1
      55: iconst_1
      56: invokevirtual #194                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setUseKeyStoreTls:(Z)V
      59: aload_1
      60: aload_2
      61: invokevirtual #195                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStoreType:()Ljava/lang/String;
      64: invokevirtual #196                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setTlsTrustStoreType:(Ljava/lang/String;)V
      67: aload_1
      68: aload_2
      69: invokevirtual #197                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStore:()Ljava/lang/String;
      72: invokevirtual #198                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setTlsTrustStorePath:(Ljava/lang/String;)V
      75: aload_1
      76: aload_2
      77: invokevirtual #199                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTlsTrustStorePassword:()Ljava/lang/String;
      80: invokevirtual #200                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setTlsTrustStorePassword:(Ljava/lang/String;)V
      83: goto          102
      86: aload_1
      87: aload_2
      88: invokevirtual #201                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.getBrokerClientTrustCertsFilePath:()Ljava/lang/String;
      91: invokevirtual #202                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setTlsTrustCertsFilePath:(Ljava/lang/String;)V
      94: aload_1
      95: aload_2
      96: invokevirtual #203                // Method org/apache/pulsar/proxy/server/ProxyConfiguration.isTlsAllowInsecureConnection:()Z
      99: invokevirtual #204                // Method org/apache/pulsar/client/impl/conf/ClientConfigurationData.setTlsAllowInsecureConnection:(Z)V
     102: aload_1
     103: areturn

  private org.apache.pulsar.client.impl.PulsarClientImpl createClient(org.apache.pulsar.client.impl.conf.ClientConfigurationData, org.apache.pulsar.common.api.AuthData, java.lang.String, int) throws org.apache.pulsar.client.api.PulsarClientException;
    Code:
       0: aload_0
       1: new           #124                // class org/apache/pulsar/proxy/server/ProxyConnectionPool
       4: dup
       5: aload_1
       6: aload_0
       7: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      10: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
      13: aload_0
      14: aload_1
      15: aload_2
      16: aload_3
      17: iload         4
      19: invokedynamic #205,  0            // InvokeDynamic #2:get:(Lorg/apache/pulsar/proxy/server/ProxyConnection;Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lorg/apache/pulsar/common/api/AuthData;Ljava/lang/String;I)Ljava/util/function/Supplier;
      24: invokespecial #127                // Method org/apache/pulsar/proxy/server/ProxyConnectionPool."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;Ljava/util/function/Supplier;)V
      27: putfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
      30: new           #128                // class org/apache/pulsar/client/impl/PulsarClientImpl
      33: dup
      34: aload_1
      35: aload_0
      36: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      39: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
      42: aload_0
      43: getfield      #38                 // Field connectionPool:Lorg/apache/pulsar/client/impl/ConnectionPool;
      46: aload_0
      47: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      50: invokevirtual #129                // Method org/apache/pulsar/proxy/server/ProxyService.getTimer:()Lio/netty/util/Timer;
      53: invokespecial #130                // Method org/apache/pulsar/client/impl/PulsarClientImpl."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;Lorg/apache/pulsar/client/impl/ConnectionPool;Lio/netty/util/Timer;)V
      56: areturn

  private static int getProtocolVersionToAdvertise(org.apache.pulsar.common.api.proto.CommandConnect);
    Code:
       0: aload_0
       1: invokevirtual #107                // Method org/apache/pulsar/common/api/proto/CommandConnect.getProtocolVersion:()I
       4: invokestatic  #117                // Method org/apache/pulsar/common/protocol/Commands.getCurrentProtocolVersion:()I
       7: invokestatic  #206                // Method java/lang/Math.min:(II)I
      10: ireturn

  long newRequestId();
    Code:
       0: aload_0
       1: getfield      #1                  // Field client:Lorg/apache/pulsar/client/impl/PulsarClientImpl;
       4: invokevirtual #207                // Method org/apache/pulsar/client/impl/PulsarClientImpl.newRequestId:()J
       7: lreturn

  public org.apache.pulsar.client.api.Authentication getClientAuthentication();
    Code:
       0: aload_0
       1: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
       4: invokevirtual #208                // Method org/apache/pulsar/proxy/server/ProxyService.getProxyClientAuthenticationPlugin:()Lorg/apache/pulsar/client/api/Authentication;
       7: areturn

  protected boolean isHandshakeCompleted();
    Code:
       0: aload_0
       1: getfield      #11                 // Field state:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       4: getstatic     #10                 // Field org/apache/pulsar/proxy/server/ProxyConnection$State.Init:Lorg/apache/pulsar/proxy/server/ProxyConnection$State;
       7: if_acmpeq     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: ireturn

  java.net.SocketAddress clientAddress();
    Code:
       0: aload_0
       1: getfield      #30                 // Field remoteAddress:Ljava/net/SocketAddress;
       4: areturn

  io.netty.channel.ChannelHandlerContext ctx();
    Code:
       0: aload_0
       1: getfield      #67                 // Field ctx:Lio/netty/channel/ChannelHandlerContext;
       4: areturn

  public boolean hasHAProxyMessage();
    Code:
       0: aload_0
       1: getfield      #53                 // Field haProxyMessage:Lio/netty/handler/codec/haproxy/HAProxyMessage;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  public io.netty.handler.codec.haproxy.HAProxyMessage getHAProxyMessage();
    Code:
       0: aload_0
       1: getfield      #53                 // Field haProxyMessage:Lio/netty/handler/codec/haproxy/HAProxyMessage;
       4: areturn

  public org.apache.pulsar.proxy.server.DirectProxyHandler getDirectProxyHandler();
    Code:
       0: aload_0
       1: getfield      #6                  // Field directProxyHandler:Lorg/apache/pulsar/proxy/server/DirectProxyHandler;
       4: areturn

  private org.apache.pulsar.client.impl.ClientCnx lambda$createClient$2(org.apache.pulsar.client.impl.conf.ClientConfigurationData, org.apache.pulsar.common.api.AuthData, java.lang.String, int);
    Code:
       0: new           #209                // class org/apache/pulsar/proxy/server/ProxyClientCnx
       3: dup
       4: aload_1
       5: aload_0
       6: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
       9: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
      12: aload_0
      13: getfield      #73                 // Field clientAuthRole:Ljava/lang/String;
      16: aload_2
      17: aload_3
      18: iload         4
      20: invokespecial #210                // Method org/apache/pulsar/proxy/server/ProxyClientCnx."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;Ljava/lang/String;Lorg/apache/pulsar/common/api/AuthData;Ljava/lang/String;I)V
      23: areturn

  private static javax.naming.AuthenticationException lambda$handleConnect$1();
    Code:
       0: new           #211                // class javax/naming/AuthenticationException
       3: dup
       4: ldc           #212                // String No anonymous role, and no authentication provider configured
       6: invokespecial #213                // Method javax/naming/AuthenticationException."<init>":(Ljava/lang/String;)V
       9: areturn

  private org.apache.pulsar.client.impl.ClientCnx lambda$handleConnect$0(int);
    Code:
       0: new           #214                // class org/apache/pulsar/client/impl/ClientCnx
       3: dup
       4: aload_0
       5: getfield      #91                 // Field clientConf:Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;
       8: aload_0
       9: getfield      #9                  // Field service:Lorg/apache/pulsar/proxy/server/ProxyService;
      12: invokevirtual #125                // Method org/apache/pulsar/proxy/server/ProxyService.getWorkerGroup:()Lio/netty/channel/EventLoopGroup;
      15: iload_1
      16: invokespecial #215                // Method org/apache/pulsar/client/impl/ClientCnx."<init>":(Lorg/apache/pulsar/client/impl/conf/ClientConfigurationData;Lio/netty/channel/EventLoopGroup;I)V
      19: areturn

  static {};
    Code:
       0: iconst_0
       1: newarray       byte
       3: putstatic     #133                // Field EMPTY_CREDENTIALS:[B
       6: ldc           #216                // class org/apache/pulsar/proxy/server/ProxyConnection
       8: invokestatic  #217                // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putstatic     #28                 // Field LOG:Lorg/slf4j/Logger;
      14: return
}

Compiled from "GitConfigurationMigrationAction2.java"
public class net.nemerosa.ontrack.extension.git.support.GitConfigurationMigrationAction2 implements net.nemerosa.ontrack.model.support.DBMigrationAction {
  private final com.fasterxml.jackson.databind.ObjectMapper objectMapper;

  public net.nemerosa.ontrack.extension.git.support.GitConfigurationMigrationAction2();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method net/nemerosa/ontrack/json/ObjectMapperFactory.create:()Lcom/fasterxml/jackson/databind/ObjectMapper;
       8: putfield      #3                  // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
      11: return

  public int getPatch();
    Code:
       0: bipush        10
       2: ireturn

  public void migrate(java.sql.Connection) throws java.lang.Exception;
    Code:
       0: aload_1
       1: ldc           #4                  // String SELECT * FROM CONFIGURATIONS WHERE TYPE = ?
       3: sipush        1003
       6: sipush        1008
       9: invokeinterface #6,  4            // InterfaceMethod java/sql/Connection.prepareStatement:(Ljava/lang/String;II)Ljava/sql/PreparedStatement;
      14: astore_2
      15: aconst_null
      16: astore_3
      17: aload_2
      18: iconst_1
      19: ldc           #7                  // class net/nemerosa/ontrack/extension/git/model/BasicGitConfiguration
      21: invokevirtual #8                  // Method java/lang/Class.getName:()Ljava/lang/String;
      24: invokeinterface #9,  3            // InterfaceMethod java/sql/PreparedStatement.setString:(ILjava/lang/String;)V
      29: aload_2
      30: invokeinterface #10,  1           // InterfaceMethod java/sql/PreparedStatement.executeQuery:()Ljava/sql/ResultSet;
      35: astore        4
      37: aconst_null
      38: astore        5
      40: aload         4
      42: invokeinterface #11,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
      47: ifeq          111
      50: aload         4
      52: ldc           #12                 // String CONTENT
      54: invokeinterface #13,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
      59: astore        6
      61: aload_0
      62: getfield      #3                  // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
      65: aload         6
      67: invokevirtual #14                 // Method com/fasterxml/jackson/databind/ObjectMapper.readTree:(Ljava/lang/String;)Lcom/fasterxml/jackson/databind/JsonNode;
      70: checkcast     #15                 // class com/fasterxml/jackson/databind/node/ObjectNode
      73: astore        7
      75: aload         7
      77: ldc           #16                 // String branch
      79: invokevirtual #17                 // Method com/fasterxml/jackson/databind/node/ObjectNode.remove:(Ljava/lang/String;)Lcom/fasterxml/jackson/databind/JsonNode;
      82: pop
      83: aload         4
      85: ldc           #12                 // String CONTENT
      87: aload_0
      88: getfield      #3                  // Field objectMapper:Lcom/fasterxml/jackson/databind/ObjectMapper;
      91: aload         7
      93: invokevirtual #18                 // Method com/fasterxml/jackson/databind/ObjectMapper.writeValueAsString:(Ljava/lang/Object;)Ljava/lang/String;
      96: invokeinterface #19,  3           // InterfaceMethod java/sql/ResultSet.updateString:(Ljava/lang/String;Ljava/lang/String;)V
     101: aload         4
     103: invokeinterface #20,  1           // InterfaceMethod java/sql/ResultSet.updateRow:()V
     108: goto          40
     111: aload         4
     113: ifnull        206
     116: aload         5
     118: ifnull        143
     121: aload         4
     123: invokeinterface #21,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     128: goto          206
     131: astore        6
     133: aload         5
     135: aload         6
     137: invokevirtual #23                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     140: goto          206
     143: aload         4
     145: invokeinterface #21,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     150: goto          206
     153: astore        6
     155: aload         6
     157: astore        5
     159: aload         6
     161: athrow
     162: astore        8
     164: aload         4
     166: ifnull        203
     169: aload         5
     171: ifnull        196
     174: aload         4
     176: invokeinterface #21,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     181: goto          203
     184: astore        9
     186: aload         5
     188: aload         9
     190: invokevirtual #23                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     193: goto          203
     196: aload         4
     198: invokeinterface #21,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     203: aload         8
     205: athrow
     206: aload_2
     207: ifnull        290
     210: aload_3
     211: ifnull        234
     214: aload_2
     215: invokeinterface #24,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     220: goto          290
     223: astore        4
     225: aload_3
     226: aload         4
     228: invokevirtual #23                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     231: goto          290
     234: aload_2
     235: invokeinterface #24,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     240: goto          290
     243: astore        4
     245: aload         4
     247: astore_3
     248: aload         4
     250: athrow
     251: astore        10
     253: aload_2
     254: ifnull        287
     257: aload_3
     258: ifnull        281
     261: aload_2
     262: invokeinterface #24,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     267: goto          287
     270: astore        11
     272: aload_3
     273: aload         11
     275: invokevirtual #23                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     278: goto          287
     281: aload_2
     282: invokeinterface #24,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     287: aload         10
     289: athrow
     290: return
    Exception table:
       from    to  target type
         121   128   131   Class java/lang/Throwable
          40   111   153   Class java/lang/Throwable
          40   111   162   any
         174   181   184   Class java/lang/Throwable
         153   164   162   any
         214   220   223   Class java/lang/Throwable
          17   206   243   Class java/lang/Throwable
          17   206   251   any
         261   267   270   Class java/lang/Throwable
         243   253   251   any

  public java.lang.String getDisplayName();
    Code:
       0: ldc           #25                 // String Git configuration migration
       2: areturn
}

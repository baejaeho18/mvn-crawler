Compiled from "AbstractEnvironment.java"
public abstract class org.xwiki.environment.internal.AbstractEnvironment implements org.xwiki.environment.Environment {
  private static final java.lang.String DEFAULT_TMP_DIRECTORY;

  private static final java.lang.String TEMP_NAME;

  protected org.slf4j.Logger logger;

  private javax.inject.Provider<org.xwiki.environment.internal.EnvironmentConfiguration> configurationProvider;

  private java.io.File temporaryDirectory;

  private java.io.File permanentDirectory;

  public org.xwiki.environment.internal.AbstractEnvironment();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void setPermanentDirectory(java.io.File);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field permanentDirectory:Ljava/io/File;
       5: return

  public void setTemporaryDirectory(java.io.File);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field temporaryDirectory:Ljava/io/File;
       5: return

  public java.io.File getPermanentDirectory();
    Code:
       0: aload_0
       1: getfield      #2                  // Field permanentDirectory:Ljava/io/File;
       4: ifnonnull     116
       7: ldc           #4                  // String xwiki.data.dir
       9: invokestatic  #5                  // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      12: astore_1
      13: aload_0
      14: invokevirtual #6                  // Method getPermanentDirectoryName:()Ljava/lang/String;
      17: astore_2
      18: aload_0
      19: getfield      #7                  // Field configurationProvider:Ljavax/inject/Provider;
      22: invokeinterface #8,  1            // InterfaceMethod javax/inject/Provider.get:()Ljava/lang/Object;
      27: checkcast     #9                  // class org/xwiki/environment/internal/EnvironmentConfiguration
      30: invokeinterface #10,  1           // InterfaceMethod org/xwiki/environment/internal/EnvironmentConfiguration.getPermanentDirectoryPath:()Ljava/lang/String;
      35: astore_3
      36: iconst_5
      37: anewarray     #11                 // class java/lang/String
      40: dup
      41: iconst_0
      42: aload_1
      43: aastore
      44: dup
      45: iconst_1
      46: aload_2
      47: aastore
      48: dup
      49: iconst_2
      50: aload_3
      51: aastore
      52: dup
      53: iconst_3
      54: aload_0
      55: invokevirtual #12                 // Method getTemporaryDirectoryName:()Ljava/lang/String;
      58: aastore
      59: dup
      60: iconst_4
      61: getstatic     #13                 // Field DEFAULT_TMP_DIRECTORY:Ljava/lang/String;
      64: aastore
      65: astore        4
      67: aload_0
      68: aload_0
      69: aload         4
      71: iconst_0
      72: invokevirtual #14                 // Method initializeDirectory:([Ljava/lang/String;Z)Ljava/io/File;
      75: putfield      #2                  // Field permanentDirectory:Ljava/io/File;
      78: aload_1
      79: ifnonnull     101
      82: aload_2
      83: ifnonnull     101
      86: aload_3
      87: ifnonnull     101
      90: aload_0
      91: getfield      #15                 // Field logger:Lorg/slf4j/Logger;
      94: ldc           #16                 // String No permanent directory configured, fallbacking to temporary directory. You should set the \"environment.permanentDirectory\" configuration property in the xwiki.properties file.
      96: invokeinterface #17,  2           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;)V
     101: aload_0
     102: getfield      #15                 // Field logger:Lorg/slf4j/Logger;
     105: ldc           #18                 // String Using permanent directory [{}]
     107: aload_0
     108: getfield      #2                  // Field permanentDirectory:Ljava/io/File;
     111: invokeinterface #19,  3           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;Ljava/lang/Object;)V
     116: aload_0
     117: getfield      #2                  // Field permanentDirectory:Ljava/io/File;
     120: areturn

  protected java.lang.String getPermanentDirectoryName();
    Code:
       0: aconst_null
       1: areturn

  public java.io.File getTemporaryDirectory();
    Code:
       0: aload_0
       1: getfield      #3                  // Field temporaryDirectory:Ljava/io/File;
       4: ifnonnull     35
       7: iconst_2
       8: anewarray     #11                 // class java/lang/String
      11: dup
      12: iconst_0
      13: aload_0
      14: invokevirtual #12                 // Method getTemporaryDirectoryName:()Ljava/lang/String;
      17: aastore
      18: dup
      19: iconst_1
      20: getstatic     #13                 // Field DEFAULT_TMP_DIRECTORY:Ljava/lang/String;
      23: aastore
      24: astore_1
      25: aload_0
      26: aload_0
      27: aload_1
      28: iconst_1
      29: invokevirtual #14                 // Method initializeDirectory:([Ljava/lang/String;Z)Ljava/io/File;
      32: putfield      #3                  // Field temporaryDirectory:Ljava/io/File;
      35: aload_0
      36: getfield      #3                  // Field temporaryDirectory:Ljava/io/File;
      39: areturn

  protected java.lang.String getTemporaryDirectoryName();
    Code:
       0: aconst_null
       1: areturn

  private java.io.File initializeDirectory(java.lang.String[], boolean);
    Code:
       0: iload_2
       1: ifeq          9
       4: ldc           #20                 // String temporary
       6: goto          11
       9: ldc           #21                 // String permanent
      11: astore_3
      12: iconst_1
      13: istore        4
      15: aload_1
      16: astore        5
      18: aload         5
      20: arraylength
      21: istore        6
      23: iconst_0
      24: istore        7
      26: iload         7
      28: iload         6
      30: if_icmpge     94
      33: aload         5
      35: iload         7
      37: aaload
      38: astore        8
      40: aload         8
      42: ifnonnull     48
      45: goto          88
      48: iload         4
      50: ifne          67
      53: aload_0
      54: getfield      #15                 // Field logger:Lorg/slf4j/Logger;
      57: ldc           #22                 // String Falling back on [{}] as the {} directory.
      59: aload         8
      61: aload_3
      62: invokeinterface #23,  4           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      67: iconst_0
      68: istore        4
      70: aload_0
      71: aload         8
      73: iload_2
      74: aload_3
      75: invokevirtual #24                 // Method initializeDirectory:(Ljava/lang/String;ZLjava/lang/String;)Ljava/io/File;
      78: astore        9
      80: aload         9
      82: ifnull        88
      85: aload         9
      87: areturn
      88: iinc          7, 1
      91: goto          26
      94: new           #25                 // class java/lang/RuntimeException
      97: dup
      98: ldc           #26                 // String Could not find a writable %s directory. Check the server logs for more information.
     100: iconst_1
     101: anewarray     #27                 // class java/lang/Object
     104: dup
     105: iconst_0
     106: aload_3
     107: aastore
     108: invokestatic  #28                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     111: invokespecial #29                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
     114: athrow

  private java.io.File initializeDirectory(java.lang.String, boolean, java.lang.String);
    Code:
       0: iload_2
       1: ifeq          17
       4: new           #30                 // class java/io/File
       7: dup
       8: aload_1
       9: ldc           #32                 // String xwiki-temp
      11: invokespecial #33                 // Method java/io/File."<init>":(Ljava/lang/String;Ljava/lang/String;)V
      14: goto          25
      17: new           #30                 // class java/io/File
      20: dup
      21: aload_1
      22: invokespecial #34                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      25: astore        4
      27: aload         4
      29: invokevirtual #35                 // Method java/io/File.exists:()Z
      32: ifeq          106
      35: aload         4
      37: invokevirtual #36                 // Method java/io/File.isDirectory:()Z
      40: ifeq          59
      43: aload         4
      45: invokevirtual #37                 // Method java/io/File.canWrite:()Z
      48: ifeq          59
      51: aload_0
      52: aload         4
      54: iload_2
      55: invokevirtual #38                 // Method initDir:(Ljava/io/File;Z)Ljava/io/File;
      58: areturn
      59: aload_0
      60: getfield      #15                 // Field logger:Lorg/slf4j/Logger;
      63: ldc           #39                 // String Configured {} directory [{}] is {}.
      65: iconst_3
      66: anewarray     #27                 // class java/lang/Object
      69: dup
      70: iconst_0
      71: aload_3
      72: aastore
      73: dup
      74: iconst_1
      75: aload         4
      77: invokevirtual #40                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      80: aastore
      81: dup
      82: iconst_2
      83: aload         4
      85: invokevirtual #36                 // Method java/io/File.isDirectory:()Z
      88: ifeq          96
      91: ldc           #41                 // String not writable
      93: goto          98
      96: ldc           #42                 // String not a directory
      98: aastore
      99: invokeinterface #43,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     104: aconst_null
     105: areturn
     106: aload         4
     108: invokevirtual #44                 // Method java/io/File.toPath:()Ljava/nio/file/Path;
     111: iconst_0
     112: anewarray     #45                 // class java/nio/file/attribute/FileAttribute
     115: invokestatic  #46                 // Method java/nio/file/Files.createDirectories:(Ljava/nio/file/Path;[Ljava/nio/file/attribute/FileAttribute;)Ljava/nio/file/Path;
     118: pop
     119: aload_0
     120: aload         4
     122: iload_2
     123: invokevirtual #38                 // Method initDir:(Ljava/io/File;Z)Ljava/io/File;
     126: areturn
     127: astore        5
     129: aload_0
     130: getfield      #15                 // Field logger:Lorg/slf4j/Logger;
     133: ldc           #48                 // String Configured {} directory [{}] could not be created.
     135: iconst_3
     136: anewarray     #27                 // class java/lang/Object
     139: dup
     140: iconst_0
     141: aload_3
     142: aastore
     143: dup
     144: iconst_1
     145: aload         4
     147: invokevirtual #40                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
     150: aastore
     151: dup
     152: iconst_2
     153: aload         5
     155: aastore
     156: invokeinterface #43,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     161: aconst_null
     162: areturn
    Exception table:
       from    to  target type
         106   126   127   Class java/io/IOException

  private java.io.File initDir(java.io.File, boolean);
    Code:
       0: iload_2
       1: ifeq          37
       4: aload_1
       5: invokestatic  #49                 // Method org/apache/commons/io/FileUtils.cleanDirectory:(Ljava/io/File;)V
       8: goto          37
      11: astore_3
      12: new           #25                 // class java/lang/RuntimeException
      15: dup
      16: ldc           #50                 // String Failed to empty the temporary directory [%s]. Are there files inside of it which XWiki does not have permission to delete?
      18: iconst_1
      19: anewarray     #27                 // class java/lang/Object
      22: dup
      23: iconst_0
      24: aload_1
      25: invokevirtual #40                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      28: aastore
      29: invokestatic  #28                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      32: aload_3
      33: invokespecial #51                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      36: athrow
      37: aload_1
      38: areturn
    Exception table:
       from    to  target type
           4     8    11   Class java/io/IOException

  static {};
    Code:
       0: ldc           #52                 // String java.io.tmpdir
       2: invokestatic  #5                  // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
       5: putstatic     #13                 // Field DEFAULT_TMP_DIRECTORY:Ljava/lang/String;
       8: return
}

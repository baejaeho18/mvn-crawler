Compiled from "HalfAppliedConstraintRecoveryIT.java"
public class org.neo4j.HalfAppliedConstraintRecoveryIT {
  private static final org.neo4j.graphdb.Label LABEL;

  private static final java.lang.String KEY;

  private static final java.lang.String KEY2;

  private static final java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI> UNIQUE_CONSTRAINT_CREATOR;

  private static final java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI> NODE_KEY_CONSTRAINT_CREATOR;

  private static final java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI> COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR;

  private static final java.util.function.BiConsumer<org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List<org.neo4j.kernel.impl.transaction.TransactionRepresentation>> REAPPLY;

  public final org.neo4j.test.rule.fs.EphemeralFileSystemRule fs;

  public final org.neo4j.test.rule.concurrent.OtherThreadRule<java.lang.Void> t2;

  private final org.neo4j.kernel.monitoring.Monitors monitors;

  public org.neo4j.HalfAppliedConstraintRecoveryIT();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class org/neo4j/test/rule/fs/EphemeralFileSystemRule
       8: dup
       9: invokespecial #3                  // Method org/neo4j/test/rule/fs/EphemeralFileSystemRule."<init>":()V
      12: putfield      #4                  // Field fs:Lorg/neo4j/test/rule/fs/EphemeralFileSystemRule;
      15: aload_0
      16: new           #5                  // class org/neo4j/test/rule/concurrent/OtherThreadRule
      19: dup
      20: ldc           #6                  // String T2
      22: invokespecial #7                  // Method org/neo4j/test/rule/concurrent/OtherThreadRule."<init>":(Ljava/lang/String;)V
      25: putfield      #8                  // Field t2:Lorg/neo4j/test/rule/concurrent/OtherThreadRule;
      28: aload_0
      29: new           #9                  // class org/neo4j/kernel/monitoring/Monitors
      32: dup
      33: invokespecial #10                 // Method org/neo4j/kernel/monitoring/Monitors."<init>":()V
      36: putfield      #11                 // Field monitors:Lorg/neo4j/kernel/monitoring/Monitors;
      39: return

  private static java.util.function.BiConsumer<org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List<org.neo4j.kernel.impl.transaction.TransactionRepresentation>> recreate(java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI>);
    Code:
       0: aload_0
       1: invokedynamic #12,  0             // InvokeDynamic #0:accept:(Ljava/util/function/Consumer;)Ljava/util/function/BiConsumer;
       6: areturn

  public void recoverFromAndContinueApplyHalfConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #13                 // Field REAPPLY:Ljava/util/function/BiConsumer;
       4: getstatic     #14                 // Field UNIQUE_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       7: iconst_0
       8: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      11: return

  public void recoverFromAndRecreateHalfConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #14                 // Field UNIQUE_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokestatic  #16                 // Method recreate:(Ljava/util/function/Consumer;)Ljava/util/function/BiConsumer;
       7: getstatic     #14                 // Field UNIQUE_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      10: iconst_0
      11: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      14: return

  public void recoverFromAndContinueApplyHalfNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #13                 // Field REAPPLY:Ljava/util/function/BiConsumer;
       4: getstatic     #17                 // Field NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       7: iconst_0
       8: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      11: return

  public void recoverFromAndRecreateHalfNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #17                 // Field NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokestatic  #16                 // Method recreate:(Ljava/util/function/Consumer;)Ljava/util/function/BiConsumer;
       7: getstatic     #17                 // Field NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      10: iconst_0
      11: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      14: return

  public void recoverFromAndContinueApplyHalfCompositeNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #13                 // Field REAPPLY:Ljava/util/function/BiConsumer;
       4: getstatic     #18                 // Field COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       7: iconst_1
       8: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      11: return

  public void recoverFromAndRecreateHalfCompositeNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #18                 // Field COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokestatic  #16                 // Method recreate:(Ljava/util/function/Consumer;)Ljava/util/function/BiConsumer;
       7: getstatic     #18                 // Field COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      10: iconst_1
      11: invokespecial #15                 // Method recoverFromHalfConstraintAppliedBeforeCrash:(Ljava/util/function/BiConsumer;Ljava/util/function/Consumer;Z)V
      14: return

  private void recoverFromHalfConstraintAppliedBeforeCrash(java.util.function.BiConsumer<org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List<org.neo4j.kernel.impl.transaction.TransactionRepresentation>>, java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI>, boolean) throws java.lang.Exception;
    Code:
       0: aload_2
       1: invokestatic  #19                 // Method createTransactionsForCreatingConstraint:(Ljava/util/function/Consumer;)Ljava/util/List;
       4: astore        4
       6: aload_0
       7: invokespecial #20                 // Method newDb:()Lorg/neo4j/kernel/internal/GraphDatabaseAPI;
      10: astore        5
      12: aload         5
      14: aload         4
      16: iconst_0
      17: aload         4
      19: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      24: iconst_1
      25: isub
      26: invokeinterface #22,  3           // InterfaceMethod java/util/List.subList:(II)Ljava/util/List;
      31: invokestatic  #23                 // Method apply:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/List;)V
      34: aload         5
      36: invokestatic  #24                 // Method flushStores:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;)V
      39: aload_0
      40: getfield      #4                  // Field fs:Lorg/neo4j/test/rule/fs/EphemeralFileSystemRule;
      43: invokevirtual #25                 // Method org/neo4j/test/rule/fs/EphemeralFileSystemRule.snapshot:()Lorg/neo4j/graphdb/mockfs/EphemeralFileSystemAbstraction;
      46: astore        6
      48: aload         5
      50: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
      55: goto          70
      58: astore        7
      60: aload         5
      62: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
      67: aload         7
      69: athrow
      70: new           #27                 // class org/neo4j/test/TestEnterpriseGraphDatabaseFactory
      73: dup
      74: invokespecial #28                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory."<init>":()V
      77: aload         6
      79: invokevirtual #29                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory.setFileSystem:(Lorg/neo4j/io/fs/FileSystemAbstraction;)Lorg/neo4j/test/TestGraphDatabaseFactory;
      82: invokevirtual #30                 // Method org/neo4j/test/TestGraphDatabaseFactory.newImpermanentDatabase:()Lorg/neo4j/graphdb/GraphDatabaseService;
      85: checkcast     #31                 // class org/neo4j/kernel/internal/GraphDatabaseAPI
      88: astore        5
      90: aload_1
      91: aload         5
      93: aload         4
      95: invokeinterface #32,  3           // InterfaceMethod java/util/function/BiConsumer.accept:(Ljava/lang/Object;Ljava/lang/Object;)V
     100: aload         5
     102: invokeinterface #33,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.beginTx:()Lorg/neo4j/graphdb/Transaction;
     107: astore        7
     109: aconst_null
     110: astore        8
     112: aload         5
     114: invokeinterface #34,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.schema:()Lorg/neo4j/graphdb/schema/Schema;
     119: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
     122: invokeinterface #36,  2           // InterfaceMethod org/neo4j/graphdb/schema/Schema.getConstraints:(Lorg/neo4j/graphdb/Label;)Ljava/lang/Iterable;
     127: invokestatic  #37                 // Method org/neo4j/helpers/collection/Iterables.single:(Ljava/lang/Iterable;)Ljava/lang/Object;
     130: checkcast     #38                 // class org/neo4j/graphdb/schema/ConstraintDefinition
     133: astore        9
     135: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
     138: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
     143: aload         9
     145: invokeinterface #40,  1           // InterfaceMethod org/neo4j/graphdb/schema/ConstraintDefinition.getLabel:()Lorg/neo4j/graphdb/Label;
     150: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
     155: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     158: iload_3
     159: ifeq          195
     162: iconst_2
     163: anewarray     #42                 // class java/lang/String
     166: dup
     167: iconst_0
     168: ldc           #44                 // String key
     170: aastore
     171: dup
     172: iconst_1
     173: ldc           #45                 // String key2
     175: aastore
     176: invokestatic  #46                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     179: aload         9
     181: invokeinterface #47,  1           // InterfaceMethod org/neo4j/graphdb/schema/ConstraintDefinition.getPropertyKeys:()Ljava/lang/Iterable;
     186: invokestatic  #48                 // Method org/neo4j/helpers/collection/Iterables.asList:(Ljava/lang/Iterable;)Ljava/util/List;
     189: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     192: goto          210
     195: ldc           #44                 // String key
     197: aload         9
     199: invokeinterface #47,  1           // InterfaceMethod org/neo4j/graphdb/schema/ConstraintDefinition.getPropertyKeys:()Ljava/lang/Iterable;
     204: invokestatic  #37                 // Method org/neo4j/helpers/collection/Iterables.single:(Ljava/lang/Iterable;)Ljava/lang/Object;
     207: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     210: aload         5
     212: invokeinterface #34,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.schema:()Lorg/neo4j/graphdb/schema/Schema;
     217: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
     220: invokeinterface #49,  2           // InterfaceMethod org/neo4j/graphdb/schema/Schema.getIndexes:(Lorg/neo4j/graphdb/Label;)Ljava/lang/Iterable;
     225: invokestatic  #37                 // Method org/neo4j/helpers/collection/Iterables.single:(Ljava/lang/Iterable;)Ljava/lang/Object;
     228: checkcast     #50                 // class org/neo4j/graphdb/schema/IndexDefinition
     231: astore        10
     233: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
     236: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
     241: aload         10
     243: invokeinterface #51,  1           // InterfaceMethod org/neo4j/graphdb/schema/IndexDefinition.getLabels:()Ljava/lang/Iterable;
     248: invokestatic  #37                 // Method org/neo4j/helpers/collection/Iterables.single:(Ljava/lang/Iterable;)Ljava/lang/Object;
     251: checkcast     #52                 // class org/neo4j/graphdb/Label
     254: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
     259: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     262: iload_3
     263: ifeq          299
     266: iconst_2
     267: anewarray     #42                 // class java/lang/String
     270: dup
     271: iconst_0
     272: ldc           #44                 // String key
     274: aastore
     275: dup
     276: iconst_1
     277: ldc           #45                 // String key2
     279: aastore
     280: invokestatic  #46                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     283: aload         10
     285: invokeinterface #53,  1           // InterfaceMethod org/neo4j/graphdb/schema/IndexDefinition.getPropertyKeys:()Ljava/lang/Iterable;
     290: invokestatic  #48                 // Method org/neo4j/helpers/collection/Iterables.asList:(Ljava/lang/Iterable;)Ljava/util/List;
     293: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     296: goto          314
     299: ldc           #44                 // String key
     301: aload         10
     303: invokeinterface #53,  1           // InterfaceMethod org/neo4j/graphdb/schema/IndexDefinition.getPropertyKeys:()Ljava/lang/Iterable;
     308: invokestatic  #37                 // Method org/neo4j/helpers/collection/Iterables.single:(Ljava/lang/Iterable;)Ljava/lang/Object;
     311: invokestatic  #41                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     314: aload         7
     316: invokeinterface #54,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.success:()V
     321: aload         7
     323: ifnull        416
     326: aload         8
     328: ifnull        353
     331: aload         7
     333: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     338: goto          416
     341: astore        9
     343: aload         8
     345: aload         9
     347: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     350: goto          416
     353: aload         7
     355: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     360: goto          416
     363: astore        9
     365: aload         9
     367: astore        8
     369: aload         9
     371: athrow
     372: astore        11
     374: aload         7
     376: ifnull        413
     379: aload         8
     381: ifnull        406
     384: aload         7
     386: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     391: goto          413
     394: astore        12
     396: aload         8
     398: aload         12
     400: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     403: goto          413
     406: aload         7
     408: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     413: aload         11
     415: athrow
     416: aload         5
     418: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     423: goto          438
     426: astore        13
     428: aload         5
     430: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     435: aload         13
     437: athrow
     438: return
    Exception table:
       from    to  target type
          12    48    58   any
          58    60    58   any
         331   338   341   Class java/lang/Throwable
         112   321   363   Class java/lang/Throwable
         112   321   372   any
         384   391   394   Class java/lang/Throwable
         363   374   372   any
          90   416   426   any
         426   428   426   any

  public void recoverFromNonUniqueHalfConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #14                 // Field UNIQUE_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokespecial #58                 // Method recoverFromConstraintAppliedBeforeCrash:(Ljava/util/function/Consumer;)V
       7: return

  public void recoverFromNonUniqueHalfNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #17                 // Field NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokespecial #58                 // Method recoverFromConstraintAppliedBeforeCrash:(Ljava/util/function/Consumer;)V
       7: return

  public void recoverFromNonUniqueHalfCompositeNodeKeyConstraintAppliedBeforeCrash() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getstatic     #18                 // Field COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
       4: invokespecial #58                 // Method recoverFromConstraintAppliedBeforeCrash:(Ljava/util/function/Consumer;)V
       7: return

  private void recoverFromConstraintAppliedBeforeCrash(java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI>) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokestatic  #19                 // Method createTransactionsForCreatingConstraint:(Ljava/util/function/Consumer;)Ljava/util/List;
       4: astore_2
       5: aload_0
       6: invokespecial #20                 // Method newDb:()Lorg/neo4j/kernel/internal/GraphDatabaseAPI;
       9: astore        4
      11: new           #59                 // class org/neo4j/test/Barrier$Control
      14: dup
      15: invokespecial #60                 // Method org/neo4j/test/Barrier$Control."<init>":()V
      18: astore        5
      20: aload_0
      21: getfield      #11                 // Field monitors:Lorg/neo4j/kernel/monitoring/Monitors;
      24: new           #61                 // class org/neo4j/HalfAppliedConstraintRecoveryIT$1
      27: dup
      28: aload_0
      29: aload         5
      31: invokespecial #62                 // Method org/neo4j/HalfAppliedConstraintRecoveryIT$1."<init>":(Lorg/neo4j/HalfAppliedConstraintRecoveryIT;Lorg/neo4j/test/Barrier$Control;)V
      34: iconst_0
      35: anewarray     #42                 // class java/lang/String
      38: invokevirtual #63                 // Method org/neo4j/kernel/monitoring/Monitors.addMonitorListener:(Ljava/lang/Object;[Ljava/lang/String;)V
      41: ldc           #64                 // String v
      43: astore        6
      45: aload         4
      47: invokeinterface #33,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.beginTx:()Lorg/neo4j/graphdb/Transaction;
      52: astore        7
      54: aconst_null
      55: astore        8
      57: iconst_0
      58: istore        9
      60: iload         9
      62: iconst_2
      63: if_icmpge     98
      66: aload         4
      68: iconst_1
      69: anewarray     #52                 // class org/neo4j/graphdb/Label
      72: dup
      73: iconst_0
      74: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
      77: aastore
      78: invokeinterface #65,  2           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.createNode:([Lorg/neo4j/graphdb/Label;)Lorg/neo4j/graphdb/Node;
      83: ldc           #44                 // String key
      85: aload         6
      87: invokeinterface #66,  3           // InterfaceMethod org/neo4j/graphdb/Node.setProperty:(Ljava/lang/String;Ljava/lang/Object;)V
      92: iinc          9, 1
      95: goto          60
      98: aload         7
     100: invokeinterface #54,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.success:()V
     105: aload         7
     107: ifnull        200
     110: aload         8
     112: ifnull        137
     115: aload         7
     117: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     122: goto          200
     125: astore        9
     127: aload         8
     129: aload         9
     131: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     134: goto          200
     137: aload         7
     139: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     144: goto          200
     147: astore        9
     149: aload         9
     151: astore        8
     153: aload         9
     155: athrow
     156: astore        10
     158: aload         7
     160: ifnull        197
     163: aload         8
     165: ifnull        190
     168: aload         7
     170: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     175: goto          197
     178: astore        11
     180: aload         8
     182: aload         11
     184: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     187: goto          197
     190: aload         7
     192: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     197: aload         10
     199: athrow
     200: aload_0
     201: getfield      #8                  // Field t2:Lorg/neo4j/test/rule/concurrent/OtherThreadRule;
     204: aload         4
     206: aload_2
     207: invokedynamic #67,  0             // InvokeDynamic #1:doWork:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/List;)Lorg/neo4j/test/OtherThreadExecutor$WorkerCommand;
     212: invokevirtual #68                 // Method org/neo4j/test/rule/concurrent/OtherThreadRule.execute:(Lorg/neo4j/test/OtherThreadExecutor$WorkerCommand;)Ljava/util/concurrent/Future;
     215: pop
     216: aload         5
     218: invokevirtual #69                 // Method org/neo4j/test/Barrier$Control.await:()V
     221: aload         4
     223: invokestatic  #24                 // Method flushStores:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;)V
     226: aload_0
     227: getfield      #4                  // Field fs:Lorg/neo4j/test/rule/fs/EphemeralFileSystemRule;
     230: invokevirtual #25                 // Method org/neo4j/test/rule/fs/EphemeralFileSystemRule.snapshot:()Lorg/neo4j/graphdb/mockfs/EphemeralFileSystemAbstraction;
     233: astore_3
     234: aload         5
     236: invokevirtual #70                 // Method org/neo4j/test/Barrier$Control.release:()V
     239: aload         4
     241: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     246: goto          261
     249: astore        12
     251: aload         4
     253: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     258: aload         12
     260: athrow
     261: new           #27                 // class org/neo4j/test/TestEnterpriseGraphDatabaseFactory
     264: dup
     265: invokespecial #28                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory."<init>":()V
     268: aload_3
     269: invokevirtual #29                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory.setFileSystem:(Lorg/neo4j/io/fs/FileSystemAbstraction;)Lorg/neo4j/test/TestGraphDatabaseFactory;
     272: invokevirtual #30                 // Method org/neo4j/test/TestGraphDatabaseFactory.newImpermanentDatabase:()Lorg/neo4j/graphdb/GraphDatabaseService;
     275: checkcast     #31                 // class org/neo4j/kernel/internal/GraphDatabaseAPI
     278: astore        4
     280: aload_1
     281: invokestatic  #16                 // Method recreate:(Ljava/util/function/Consumer;)Ljava/util/function/BiConsumer;
     284: aload         4
     286: aload_2
     287: invokeinterface #32,  3           // InterfaceMethod java/util/function/BiConsumer.accept:(Ljava/lang/Object;Ljava/lang/Object;)V
     292: ldc           #71                 // String Should not be able to create constraint on non-unique data
     294: invokestatic  #72                 // Method org/junit/Assert.fail:(Ljava/lang/String;)V
     297: aload         4
     299: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     304: goto          331
     307: astore        5
     309: aload         4
     311: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     316: goto          331
     319: astore        13
     321: aload         4
     323: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     328: aload         13
     330: athrow
     331: return
    Exception table:
       from    to  target type
         115   122   125   Class java/lang/Throwable
          57   105   147   Class java/lang/Throwable
          57   105   156   any
         168   175   178   Class java/lang/Throwable
         147   158   156   any
          41   239   249   any
         249   251   249   any
         280   297   307   Class org/neo4j/graphdb/ConstraintViolationException
         280   297   307   Class org/neo4j/graphdb/QueryExecutionException
         280   297   319   any
         307   309   319   any
         319   321   319   any

  private org.neo4j.kernel.internal.GraphDatabaseAPI newDb();
    Code:
       0: new           #75                 // class org/neo4j/test/TestGraphDatabaseFactory
       3: dup
       4: invokespecial #76                 // Method org/neo4j/test/TestGraphDatabaseFactory."<init>":()V
       7: aload_0
       8: getfield      #4                  // Field fs:Lorg/neo4j/test/rule/fs/EphemeralFileSystemRule;
      11: invokevirtual #77                 // Method org/neo4j/test/TestGraphDatabaseFactory.setFileSystem:(Lorg/neo4j/io/fs/FileSystemAbstraction;)Lorg/neo4j/test/TestGraphDatabaseFactory;
      14: aload_0
      15: getfield      #11                 // Field monitors:Lorg/neo4j/kernel/monitoring/Monitors;
      18: invokevirtual #78                 // Method org/neo4j/test/TestGraphDatabaseFactory.setMonitors:(Lorg/neo4j/kernel/monitoring/Monitors;)Lorg/neo4j/test/TestGraphDatabaseFactory;
      21: invokevirtual #30                 // Method org/neo4j/test/TestGraphDatabaseFactory.newImpermanentDatabase:()Lorg/neo4j/graphdb/GraphDatabaseService;
      24: checkcast     #31                 // class org/neo4j/kernel/internal/GraphDatabaseAPI
      27: areturn

  private static void flushStores(org.neo4j.kernel.internal.GraphDatabaseAPI);
    Code:
       0: aload_0
       1: invokeinterface #79,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.getDependencyResolver:()Lorg/neo4j/graphdb/DependencyResolver;
       6: ldc           #80                 // class org/neo4j/kernel/impl/storageengine/impl/recordstorage/RecordStorageEngine
       8: invokeinterface #81,  2           // InterfaceMethod org/neo4j/graphdb/DependencyResolver.resolveDependency:(Ljava/lang/Class;)Ljava/lang/Object;
      13: checkcast     #80                 // class org/neo4j/kernel/impl/storageengine/impl/recordstorage/RecordStorageEngine
      16: invokevirtual #82                 // Method org/neo4j/kernel/impl/storageengine/impl/recordstorage/RecordStorageEngine.testAccessNeoStores:()Lorg/neo4j/kernel/impl/store/NeoStores;
      19: getstatic     #83                 // Field org/neo4j/io/pagecache/IOLimiter.UNLIMITED:Lorg/neo4j/io/pagecache/IOLimiter;
      22: invokevirtual #84                 // Method org/neo4j/kernel/impl/store/NeoStores.flush:(Lorg/neo4j/io/pagecache/IOLimiter;)V
      25: return

  private static void apply(org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List<org.neo4j.kernel.impl.transaction.TransactionRepresentation>);
    Code:
       0: aload_0
       1: invokeinterface #79,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.getDependencyResolver:()Lorg/neo4j/graphdb/DependencyResolver;
       6: ldc           #85                 // class org/neo4j/kernel/impl/api/TransactionCommitProcess
       8: invokeinterface #81,  2           // InterfaceMethod org/neo4j/graphdb/DependencyResolver.resolveDependency:(Ljava/lang/Class;)Ljava/lang/Object;
      13: checkcast     #85                 // class org/neo4j/kernel/impl/api/TransactionCommitProcess
      16: astore_2
      17: aload_1
      18: aload_2
      19: invokedynamic #86,  0             // InvokeDynamic #2:accept:(Lorg/neo4j/kernel/impl/api/TransactionCommitProcess;)Ljava/util/function/Consumer;
      24: invokeinterface #87,  2           // InterfaceMethod java/util/List.forEach:(Ljava/util/function/Consumer;)V
      29: return

  private static java.util.List<org.neo4j.kernel.impl.transaction.TransactionRepresentation> createTransactionsForCreatingConstraint(java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI>) throws java.lang.Exception;
    Code:
       0: new           #27                 // class org/neo4j/test/TestEnterpriseGraphDatabaseFactory
       3: dup
       4: invokespecial #28                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory."<init>":()V
       7: invokevirtual #88                 // Method org/neo4j/test/TestEnterpriseGraphDatabaseFactory.newImpermanentDatabase:()Lorg/neo4j/graphdb/GraphDatabaseService;
      10: checkcast     #31                 // class org/neo4j/kernel/internal/GraphDatabaseAPI
      13: astore_1
      14: aload_1
      15: aload_0
      16: invokestatic  #89                 // Method createConstraint:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/function/Consumer;)V
      19: aload_1
      20: invokeinterface #79,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.getDependencyResolver:()Lorg/neo4j/graphdb/DependencyResolver;
      25: ldc           #90                 // class org/neo4j/kernel/impl/transaction/log/LogicalTransactionStore
      27: invokeinterface #81,  2           // InterfaceMethod org/neo4j/graphdb/DependencyResolver.resolveDependency:(Ljava/lang/Class;)Ljava/lang/Object;
      32: checkcast     #90                 // class org/neo4j/kernel/impl/transaction/log/LogicalTransactionStore
      35: astore_2
      36: new           #91                 // class java/util/ArrayList
      39: dup
      40: invokespecial #92                 // Method java/util/ArrayList."<init>":()V
      43: astore_3
      44: aload_2
      45: ldc2_w        #94                 // long 2l
      48: invokeinterface #96,  3           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/LogicalTransactionStore.getTransactions:(J)Lorg/neo4j/kernel/impl/transaction/log/TransactionCursor;
      53: astore        4
      55: aconst_null
      56: astore        5
      58: aload         4
      60: aload_3
      61: invokedynamic #97,  0             // InvokeDynamic #3:accept:(Ljava/util/List;)Ljava/util/function/Consumer;
      66: invokeinterface #98,  2           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/TransactionCursor.forAll:(Ljava/util/function/Consumer;)V
      71: aload         4
      73: ifnull        166
      76: aload         5
      78: ifnull        103
      81: aload         4
      83: invokeinterface #99,  1           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/TransactionCursor.close:()V
      88: goto          166
      91: astore        6
      93: aload         5
      95: aload         6
      97: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     100: goto          166
     103: aload         4
     105: invokeinterface #99,  1           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/TransactionCursor.close:()V
     110: goto          166
     113: astore        6
     115: aload         6
     117: astore        5
     119: aload         6
     121: athrow
     122: astore        7
     124: aload         4
     126: ifnull        163
     129: aload         5
     131: ifnull        156
     134: aload         4
     136: invokeinterface #99,  1           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/TransactionCursor.close:()V
     141: goto          163
     144: astore        8
     146: aload         5
     148: aload         8
     150: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     153: goto          163
     156: aload         4
     158: invokeinterface #99,  1           // InterfaceMethod org/neo4j/kernel/impl/transaction/log/TransactionCursor.close:()V
     163: aload         7
     165: athrow
     166: aload_3
     167: astore        4
     169: aload_1
     170: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     175: aload         4
     177: areturn
     178: astore        9
     180: aload_1
     181: invokeinterface #26,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.shutdown:()V
     186: aload         9
     188: athrow
    Exception table:
       from    to  target type
          81    88    91   Class java/lang/Throwable
          58    71   113   Class java/lang/Throwable
          58    71   122   any
         134   141   144   Class java/lang/Throwable
         113   124   122   any
          14   169   178   any
         178   180   178   any

  private static void createConstraint(org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.function.Consumer<org.neo4j.kernel.internal.GraphDatabaseAPI>);
    Code:
       0: aload_0
       1: invokeinterface #33,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.beginTx:()Lorg/neo4j/graphdb/Transaction;
       6: astore_2
       7: aconst_null
       8: astore_3
       9: aload_1
      10: aload_0
      11: invokeinterface #100,  2          // InterfaceMethod java/util/function/Consumer.accept:(Ljava/lang/Object;)V
      16: aload_2
      17: invokeinterface #54,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.success:()V
      22: aload_2
      23: ifnull        106
      26: aload_3
      27: ifnull        50
      30: aload_2
      31: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
      36: goto          106
      39: astore        4
      41: aload_3
      42: aload         4
      44: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      47: goto          106
      50: aload_2
      51: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
      56: goto          106
      59: astore        4
      61: aload         4
      63: astore_3
      64: aload         4
      66: athrow
      67: astore        5
      69: aload_2
      70: ifnull        103
      73: aload_3
      74: ifnull        97
      77: aload_2
      78: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
      83: goto          103
      86: astore        6
      88: aload_3
      89: aload         6
      91: invokevirtual #57                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      94: goto          103
      97: aload_2
      98: invokeinterface #55,  1           // InterfaceMethod org/neo4j/graphdb/Transaction.close:()V
     103: aload         5
     105: athrow
     106: return
    Exception table:
       from    to  target type
          30    36    39   Class java/lang/Throwable
           9    22    59   Class java/lang/Throwable
           9    22    67   any
          77    83    86   Class java/lang/Throwable
          59    69    67   any

  private static void lambda$createTransactionsForCreatingConstraint$7(java.util.List, org.neo4j.kernel.impl.transaction.CommittedTransactionRepresentation);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #101                // Method org/neo4j/kernel/impl/transaction/CommittedTransactionRepresentation.getTransactionRepresentation:()Lorg/neo4j/kernel/impl/transaction/TransactionRepresentation;
       5: invokeinterface #102,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      10: pop
      11: return

  private static void lambda$apply$6(org.neo4j.kernel.impl.api.TransactionCommitProcess, org.neo4j.kernel.impl.transaction.TransactionRepresentation);
    Code:
       0: aload_0
       1: new           #103                // class org/neo4j/kernel/impl/api/TransactionToApply
       4: dup
       5: aload_1
       6: invokespecial #104                // Method org/neo4j/kernel/impl/api/TransactionToApply."<init>":(Lorg/neo4j/kernel/impl/transaction/TransactionRepresentation;)V
       9: getstatic     #105                // Field org/neo4j/kernel/impl/transaction/tracing/CommitEvent.NULL:Lorg/neo4j/kernel/impl/transaction/tracing/CommitEvent;
      12: getstatic     #106                // Field org/neo4j/storageengine/api/TransactionApplicationMode.EXTERNAL:Lorg/neo4j/storageengine/api/TransactionApplicationMode;
      15: invokeinterface #107,  4          // InterfaceMethod org/neo4j/kernel/impl/api/TransactionCommitProcess.commit:(Lorg/neo4j/kernel/impl/api/TransactionToApply;Lorg/neo4j/kernel/impl/transaction/tracing/CommitEvent;Lorg/neo4j/storageengine/api/TransactionApplicationMode;)J
      20: pop2
      21: goto          34
      24: astore_2
      25: new           #109                // class java/lang/RuntimeException
      28: dup
      29: aload_2
      30: invokespecial #110                // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
      33: athrow
      34: return
    Exception table:
       from    to  target type
           0    21    24   Class org/neo4j/internal/kernel/api/exceptions/TransactionFailureException

  private static java.lang.Object lambda$recoverFromConstraintAppliedBeforeCrash$5(org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List, java.lang.Void) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: iconst_0
       3: aload_1
       4: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
       9: iconst_1
      10: isub
      11: invokeinterface #22,  3           // InterfaceMethod java/util/List.subList:(II)Ljava/util/List;
      16: invokestatic  #23                 // Method apply:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/List;)V
      19: aconst_null
      20: areturn

  private static void lambda$recreate$4(java.util.function.Consumer, org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List);
    Code:
       0: aload_1
       1: aload_0
       2: invokestatic  #89                 // Method createConstraint:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/function/Consumer;)V
       5: return

  private static void lambda$static$3(org.neo4j.kernel.internal.GraphDatabaseAPI, java.util.List);
    Code:
       0: aload_0
       1: aload_1
       2: aload_1
       3: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
       8: iconst_1
       9: isub
      10: aload_1
      11: invokeinterface #21,  1           // InterfaceMethod java/util/List.size:()I
      16: invokeinterface #22,  3           // InterfaceMethod java/util/List.subList:(II)Ljava/util/List;
      21: invokestatic  #23                 // Method apply:(Lorg/neo4j/kernel/internal/GraphDatabaseAPI;Ljava/util/List;)V
      24: return

  private static void lambda$static$2(org.neo4j.kernel.internal.GraphDatabaseAPI);
    Code:
       0: aload_0
       1: new           #111                // class java/lang/StringBuilder
       4: dup
       5: invokespecial #112                // Method java/lang/StringBuilder."<init>":()V
       8: ldc           #113                // String CREATE CONSTRAINT ON (n:
      10: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      13: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
      16: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
      21: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: ldc           #115                // String ) ASSERT (n.
      26: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      29: ldc           #44                 // String key
      31: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: ldc           #116                // String , n.
      36: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: ldc           #45                 // String key2
      41: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      44: ldc           #117                // String ) IS NODE KEY
      46: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      49: invokevirtual #118                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      52: invokeinterface #119,  2          // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.execute:(Ljava/lang/String;)Lorg/neo4j/graphdb/Result;
      57: pop
      58: return

  private static void lambda$static$1(org.neo4j.kernel.internal.GraphDatabaseAPI);
    Code:
       0: aload_0
       1: new           #111                // class java/lang/StringBuilder
       4: dup
       5: invokespecial #112                // Method java/lang/StringBuilder."<init>":()V
       8: ldc           #113                // String CREATE CONSTRAINT ON (n:
      10: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      13: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
      16: invokeinterface #39,  1           // InterfaceMethod org/neo4j/graphdb/Label.name:()Ljava/lang/String;
      21: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: ldc           #115                // String ) ASSERT (n.
      26: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      29: ldc           #44                 // String key
      31: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: ldc           #117                // String ) IS NODE KEY
      36: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: invokevirtual #118                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      42: invokeinterface #119,  2          // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.execute:(Ljava/lang/String;)Lorg/neo4j/graphdb/Result;
      47: pop
      48: return

  private static void lambda$static$0(org.neo4j.kernel.internal.GraphDatabaseAPI);
    Code:
       0: aload_0
       1: invokeinterface #34,  1           // InterfaceMethod org/neo4j/kernel/internal/GraphDatabaseAPI.schema:()Lorg/neo4j/graphdb/schema/Schema;
       6: getstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
       9: invokeinterface #120,  2          // InterfaceMethod org/neo4j/graphdb/schema/Schema.constraintFor:(Lorg/neo4j/graphdb/Label;)Lorg/neo4j/graphdb/schema/ConstraintCreator;
      14: ldc           #44                 // String key
      16: invokeinterface #121,  2          // InterfaceMethod org/neo4j/graphdb/schema/ConstraintCreator.assertPropertyIsUnique:(Ljava/lang/String;)Lorg/neo4j/graphdb/schema/ConstraintCreator;
      21: invokeinterface #122,  1          // InterfaceMethod org/neo4j/graphdb/schema/ConstraintCreator.create:()Lorg/neo4j/graphdb/schema/ConstraintDefinition;
      26: pop
      27: return

  static {};
    Code:
       0: getstatic     #123                // Field org/neo4j/test/TestLabels.LABEL_ONE:Lorg/neo4j/test/TestLabels;
       3: putstatic     #35                 // Field LABEL:Lorg/neo4j/graphdb/Label;
       6: invokedynamic #124,  0            // InvokeDynamic #4:accept:()Ljava/util/function/Consumer;
      11: putstatic     #14                 // Field UNIQUE_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      14: invokedynamic #125,  0            // InvokeDynamic #5:accept:()Ljava/util/function/Consumer;
      19: putstatic     #17                 // Field NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      22: invokedynamic #126,  0            // InvokeDynamic #6:accept:()Ljava/util/function/Consumer;
      27: putstatic     #18                 // Field COMPOSITE_NODE_KEY_CONSTRAINT_CREATOR:Ljava/util/function/Consumer;
      30: invokedynamic #127,  0            // InvokeDynamic #7:accept:()Ljava/util/function/BiConsumer;
      35: putstatic     #13                 // Field REAPPLY:Ljava/util/function/BiConsumer;
      38: return
}

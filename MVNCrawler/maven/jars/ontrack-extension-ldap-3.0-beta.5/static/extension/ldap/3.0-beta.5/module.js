angular.module("ontrack.extension.ldap",[]).config(["$stateProvider",function(e){e.state("ldap-mapping",{url:"/extension/ldap/ldap-mapping",templateUrl:"extension/ldap/ldap-mapping.tpl.html",controller:"LDAPMappingCtrl"})}]).controller("LDAPMappingCtrl",["$scope","$http","ot","otFormService","otAlertService",function(e,n,t,a,p){function i(){t.pageCall(n.get("extension/ldap/ldap-mapping")).then(function(n){e.mappingResources=n,o.commands=[{id:"ldap-mapping-create",name:"Create mapping",cls:"ot-command-new",action:function(){a.create(e.mappingResources._create,"Mapping creation").then(i)}},t.viewApiCommand(n._self),t.viewCloseCommand("/admin-accounts")]})}var o=t.view();o.title="LDAP Mappings",o.description="Mapping from LDAP groups to Ontrack groups.",i(),e.updateMapping=function(e){a.update(e._update,"Updating mapping").then(i)},e.deleteMapping=function(e){p.confirm({title:"Mapping deletion",message:"Do you really want to delete this mapping?"}).then(function(){t.pageCall(n["delete"](e._delete)).then(i)})}}]);
angular.module("ontrack-extension-ldap-templates",[]).run(["$log","$templateCache",function(n,a){n.info("Loading templates for ldap @ 3.0-beta.5"),a.put("extension/ldap/ldap-mapping.tpl.html",'<ot-view>\n    <div class="row">\n        <div class="col-md-12">\n            <table class="table table-hover">\n                <thead>\n                <th>LDAP group</th>\n                <th>Ontrack group</th>\n                <th>&nbsp;</th>\n                </thead>\n                <tbody>\n                <tr ng-repeat="mapping in mappingResources.resources">\n                    <td>{{mapping.name}}</td>\n                    <td>\n                        <span class="fa fa-arrow-right"></span>\n                        {{mapping.group.name}}\n                    </td>\n                    <td>\n                        <span class="ot-command ot-command-update"\n                              title="Update mapping {{mapping.name}}"\n                              ng-click="updateMapping(mapping)"></span>\n                        <span class="ot-command ot-command-delete"\n                              title="Delete mapping {{mapping.name}}"\n                              ng-click="deleteMapping(mapping)"></span>\n                    </td>\n                </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</ot-view>')}]);
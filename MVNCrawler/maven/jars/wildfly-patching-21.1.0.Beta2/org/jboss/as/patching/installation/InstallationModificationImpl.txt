Compiled from "InstallationModificationImpl.java"
abstract class org.jboss.as.patching.installation.InstallationModificationImpl extends org.jboss.as.patching.installation.MutableTargetImpl implements org.jboss.as.patching.installation.InstallationManager$InstallationModification {
  private final java.lang.String name;

  private final org.jboss.as.patching.installation.InstallationModificationImpl$InstallationState installationState;

  private final java.util.List<java.lang.String> allPatches;

  private final java.util.concurrent.atomic.AtomicBoolean done;

  protected org.jboss.as.patching.installation.InstallationModificationImpl(org.jboss.as.patching.installation.PatchableTarget$TargetInfo, java.lang.String, java.lang.String, java.util.List<java.lang.String>, org.jboss.as.patching.installation.InstallationModificationImpl$InstallationState);
    Code:
       0: aload_0
       1: aload_1
       2: aload_3
       3: invokespecial #1                  // Method org/jboss/as/patching/installation/MutableTargetImpl."<init>":(Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;Ljava/lang/String;)V
       6: aload_0
       7: new           #2                  // class java/util/concurrent/atomic/AtomicBoolean
      10: dup
      11: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicBoolean."<init>":()V
      14: putfield      #4                  // Field done:Ljava/util/concurrent/atomic/AtomicBoolean;
      17: aload_0
      18: aload_2
      19: putfield      #5                  // Field name:Ljava/lang/String;
      22: aload_0
      23: aload         5
      25: putfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      28: aload_0
      29: new           #7                  // class java/util/ArrayList
      32: dup
      33: aload         4
      35: invokespecial #8                  // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      38: putfield      #9                  // Field allPatches:Ljava/util/List;
      41: return

  public org.jboss.as.patching.installation.InstallationManager$MutablePatchingTarget resolve(java.lang.String, org.jboss.as.patching.metadata.LayerType);
    Code:
       0: aload_2
       1: getstatic     #10                 // Field org/jboss/as/patching/metadata/LayerType.Layer:Lorg/jboss/as/patching/metadata/LayerType;
       4: if_acmpne     24
       7: aload_0
       8: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      11: getfield      #11                 // Field org/jboss/as/patching/installation/InstallationModificationImpl$InstallationState.layers:Ljava/util/Map;
      14: aload_1
      15: invokeinterface #12,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      20: checkcast     #13                 // class org/jboss/as/patching/installation/InstallationManager$MutablePatchingTarget
      23: areturn
      24: aload_0
      25: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      28: getfield      #14                 // Field org/jboss/as/patching/installation/InstallationModificationImpl$InstallationState.addOns:Ljava/util/Map;
      31: aload_1
      32: invokeinterface #12,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      37: checkcast     #13                 // class org/jboss/as/patching/installation/InstallationManager$MutablePatchingTarget
      40: areturn

  public void addInstalledPatch(java.lang.String) throws org.jboss.as.patching.PatchingException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field allPatches:Ljava/util/List;
       4: aload_1
       5: invokeinterface #15,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      10: ifeq          23
      13: getstatic     #16                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      16: aload_1
      17: invokeinterface #17,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.alreadyApplied:(Ljava/lang/String;)Lorg/jboss/as/patching/PatchingException;
      22: athrow
      23: aload_0
      24: getfield      #9                  // Field allPatches:Ljava/util/List;
      27: aload_1
      28: invokeinterface #18,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      33: pop
      34: return

  public void removeInstalledPatch(java.lang.String) throws org.jboss.as.patching.PatchingException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field allPatches:Ljava/util/List;
       4: aload_1
       5: invokeinterface #15,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      10: ifne          23
      13: getstatic     #16                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      16: aload_1
      17: invokeinterface #19,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotRollbackPatch:(Ljava/lang/String;)Lorg/jboss/as/patching/PatchingException;
      22: athrow
      23: aload_0
      24: getfield      #9                  // Field allPatches:Ljava/util/List;
      27: aload_1
      28: invokeinterface #20,  2           // InterfaceMethod java/util/List.remove:(Ljava/lang/Object;)Z
      33: pop
      34: return

  java.util.List<java.lang.String> getAllPatches();
    Code:
       0: aload_0
       1: getfield      #9                  // Field allPatches:Ljava/util/List;
       4: areturn

  public java.lang.String getName();
    Code:
       0: aload_0
       1: getfield      #5                  // Field name:Ljava/lang/String;
       4: areturn

  protected void persist() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokevirtual #21                 // Method getMutableProperties:()Ljava/util/Properties;
       4: ldc           #23                 // String installed-patches
       6: aload_0
       7: getfield      #9                  // Field allPatches:Ljava/util/List;
      10: invokestatic  #24                 // Method org/jboss/as/patching/runner/PatchUtils.asString:(Ljava/util/List;)Ljava/lang/String;
      13: invokevirtual #25                 // Method java/util/Properties.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      16: pop
      17: aload_0
      18: invokespecial #26                 // Method org/jboss/as/patching/installation/MutableTargetImpl.persist:()V
      21: return

  boolean setDone();
    Code:
       0: aload_0
       1: getfield      #4                  // Field done:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iconst_0
       5: iconst_1
       6: invokevirtual #27                 // Method java/util/concurrent/atomic/AtomicBoolean.compareAndSet:(ZZ)Z
       9: ireturn

  org.jboss.as.patching.installation.InstallationModificationImpl$InstallationState internalComplete() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokevirtual #28                 // Method setDone:()Z
       4: ifne          15
       7: new           #29                 // class java/lang/IllegalStateException
      10: dup
      11: invokespecial #30                 // Method java/lang/IllegalStateException."<init>":()V
      14: athrow
      15: aload_0
      16: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      19: invokevirtual #31                 // Method org/jboss/as/patching/installation/InstallationModificationImpl$InstallationState.persist:()V
      22: goto          35
      25: astore_1
      26: aload_0
      27: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      30: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstallationModificationImpl$InstallationState.restore:()V
      33: aload_1
      34: athrow
      35: aload_0
      36: invokevirtual #34                 // Method persist:()V
      39: goto          50
      42: astore_1
      43: aload_0
      44: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      47: invokevirtual #33                 // Method org/jboss/as/patching/installation/InstallationModificationImpl$InstallationState.restore:()V
      50: aload_0
      51: getfield      #6                  // Field installationState:Lorg/jboss/as/patching/installation/InstallationModificationImpl$InstallationState;
      54: areturn
    Exception table:
       from    to  target type
          15    22    25   Class java/lang/Exception
          35    39    42   Class java/lang/Exception
}

Compiled from "LocalAgeoutHistoryHandler.java"
public class org.jboss.as.patching.management.LocalAgeoutHistoryHandler extends org.jboss.as.patching.management.PatchStreamResourceOperationStepHandler {
  public static final org.jboss.as.patching.management.LocalAgeoutHistoryHandler INSTANCE;

  static final java.io.FilenameFilter ALL;

  static final java.io.FilenameFilter HISTORY_FILTER;

  public org.jboss.as.patching.management.LocalAgeoutHistoryHandler();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jboss/as/patching/management/PatchStreamResourceOperationStepHandler."<init>":()V
       4: return

  protected void execute(org.jboss.as.controller.OperationContext, org.jboss.dmr.ModelNode, org.jboss.as.patching.installation.InstallationManager, java.lang.String) throws org.jboss.as.controller.OperationFailedException;
    Code:
       0: aload         4
       2: ifnull        23
       5: aload_3
       6: aload         4
       8: aconst_null
       9: invokevirtual #2                  // Method org/jboss/as/patching/installation/InstallationManager.getInstalledIdentity:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/patching/installation/InstalledIdentity;
      12: astore        5
      14: aload_0
      15: aload         5
      17: invokevirtual #3                  // Method ageOutHistory:(Lorg/jboss/as/patching/installation/InstalledIdentity;)V
      20: goto          65
      23: aload_3
      24: invokevirtual #4                  // Method org/jboss/as/patching/installation/InstallationManager.getInstalledIdentities:()Ljava/util/List;
      27: invokeinterface #5,  1            // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      32: astore        5
      34: aload         5
      36: invokeinterface #6,  1            // InterfaceMethod java/util/Iterator.hasNext:()Z
      41: ifeq          65
      44: aload         5
      46: invokeinterface #7,  1            // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      51: checkcast     #8                  // class org/jboss/as/patching/installation/InstalledIdentity
      54: astore        6
      56: aload_0
      57: aload         6
      59: invokevirtual #3                  // Method ageOutHistory:(Lorg/jboss/as/patching/installation/InstalledIdentity;)V
      62: goto          34
      65: goto          88
      68: astore        5
      70: new           #10                 // class java/lang/IllegalStateException
      73: dup
      74: getstatic     #11                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      77: invokeinterface #12,  1           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.failedToLoadIdentity:()Ljava/lang/String;
      82: aload         5
      84: invokespecial #13                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      87: athrow
      88: aload_1
      89: getstatic     #14                 // Field org/jboss/as/controller/OperationContext$RollbackHandler.NOOP_ROLLBACK_HANDLER:Lorg/jboss/as/controller/OperationContext$RollbackHandler;
      92: invokeinterface #15,  2           // InterfaceMethod org/jboss/as/controller/OperationContext.completeStep:(Lorg/jboss/as/controller/OperationContext$RollbackHandler;)V
      97: return
    Exception table:
       from    to  target type
           0    65    68   Class org/jboss/as/patching/PatchingException

  protected void ageOutHistory(org.jboss.as.patching.installation.InstalledIdentity);
    Code:
       0: aload_1
       1: invokevirtual #16                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
       4: invokeinterface #17,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.loadTargetInfo:()Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;
       9: astore_2
      10: goto          40
      13: astore_3
      14: new           #10                 // class java/lang/IllegalStateException
      17: dup
      18: getstatic     #11                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      21: aload_1
      22: invokevirtual #16                 // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
      25: invokeinterface #19,  1           // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
      30: invokeinterface #20,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.failedToLoadInfo:(Ljava/lang/String;)Ljava/lang/String;
      35: aload_3
      36: invokespecial #13                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      39: athrow
      40: aload_1
      41: aload_2
      42: invokestatic  #21                 // Method org/jboss/as/patching/tool/PatchingHistory$Factory.iterator:(Lorg/jboss/as/patching/installation/InstalledIdentity;Lorg/jboss/as/patching/installation/PatchableTarget$TargetInfo;)Lorg/jboss/as/patching/tool/PatchingHistory$Iterator;
      45: astore_3
      46: aload_3
      47: invokeinterface #22,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Iterator.hasNextCP:()Z
      52: ifeq          301
      55: aload_3
      56: invokeinterface #23,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Iterator.nextCP:()Lorg/jboss/as/patching/tool/PatchingHistory$Entry;
      61: pop
      62: aload_3
      63: invokeinterface #24,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Iterator.hasNext:()Z
      68: ifeq          301
      71: aload_3
      72: invokeinterface #25,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Iterator.next:()Ljava/lang/Object;
      77: checkcast     #26                 // class org/jboss/as/patching/tool/PatchingHistory$Entry
      80: astore        4
      82: aload         4
      84: invokeinterface #27,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Entry.getLayerPatches:()Ljava/util/Map;
      89: astore        5
      91: new           #28                 // class java/util/ArrayList
      94: dup
      95: invokespecial #29                 // Method java/util/ArrayList."<init>":()V
      98: astore        6
     100: aload         5
     102: invokeinterface #30,  1           // InterfaceMethod java/util/Map.isEmpty:()Z
     107: ifne          232
     110: aload         5
     112: invokeinterface #31,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
     117: invokeinterface #32,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     122: astore        7
     124: aload         7
     126: invokeinterface #6,  1            // InterfaceMethod java/util/Iterator.hasNext:()Z
     131: ifeq          232
     134: aload         7
     136: invokeinterface #7,  1            // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     141: checkcast     #33                 // class java/lang/String
     144: astore        8
     146: aload_1
     147: aload         8
     149: invokevirtual #34                 // Method org/jboss/as/patching/installation/InstalledIdentity.getLayer:(Ljava/lang/String;)Lorg/jboss/as/patching/installation/Layer;
     152: astore        9
     154: aload         9
     156: ifnonnull     177
     159: new           #10                 // class java/lang/IllegalStateException
     162: dup
     163: getstatic     #11                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     166: aload         8
     168: invokeinterface #35,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.layerNotFound:(Ljava/lang/String;)Ljava/lang/String;
     173: invokespecial #36                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     176: athrow
     177: aload         9
     179: invokeinterface #37,  1           // InterfaceMethod org/jboss/as/patching/installation/Layer.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
     184: aload         5
     186: aload         8
     188: invokeinterface #38,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     193: checkcast     #33                 // class java/lang/String
     196: invokevirtual #39                 // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
     199: astore        10
     201: aload         10
     203: invokevirtual #40                 // Method java/io/File.exists:()Z
     206: ifeq          229
     209: aload         6
     211: new           #41                 // class org/jboss/as/patching/management/DeleteOp
     214: dup
     215: aload         10
     217: getstatic     #42                 // Field ALL:Ljava/io/FilenameFilter;
     220: invokespecial #43                 // Method org/jboss/as/patching/management/DeleteOp."<init>":(Ljava/io/File;Ljava/io/FilenameFilter;)V
     223: invokeinterface #44,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     228: pop
     229: goto          124
     232: aload_1
     233: invokevirtual #45                 // Method org/jboss/as/patching/installation/InstalledIdentity.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
     236: aload         4
     238: invokeinterface #46,  1           // InterfaceMethod org/jboss/as/patching/tool/PatchingHistory$Entry.getPatchId:()Ljava/lang/String;
     243: invokeinterface #47,  2           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getPatchHistoryDir:(Ljava/lang/String;)Ljava/io/File;
     248: astore        7
     250: aload         7
     252: invokevirtual #40                 // Method java/io/File.exists:()Z
     255: ifeq          278
     258: aload         6
     260: new           #41                 // class org/jboss/as/patching/management/DeleteOp
     263: dup
     264: aload         7
     266: getstatic     #48                 // Field HISTORY_FILTER:Ljava/io/FilenameFilter;
     269: invokespecial #43                 // Method org/jboss/as/patching/management/DeleteOp."<init>":(Ljava/io/File;Ljava/io/FilenameFilter;)V
     272: invokeinterface #44,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     277: pop
     278: aload         6
     280: invokestatic  #49                 // Method org/jboss/as/patching/management/DeleteOp.execute:(Ljava/util/Collection;)V
     283: goto          298
     286: astore        8
     288: new           #10                 // class java/lang/IllegalStateException
     291: dup
     292: aload         8
     294: invokespecial #50                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/Throwable;)V
     297: athrow
     298: goto          62
     301: return
    Exception table:
       from    to  target type
           0    10    13   Class java/io/IOException
         278   283   286   Class java/io/IOException

  public void execute(org.jboss.as.controller.OperationContext, org.jboss.dmr.ModelNode) throws org.jboss.as.controller.OperationFailedException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #51                 // Method org/jboss/as/patching/management/PatchStreamResourceOperationStepHandler.execute:(Lorg/jboss/as/controller/OperationContext;Lorg/jboss/dmr/ModelNode;)V
       6: return

  static {};
    Code:
       0: new           #52                 // class org/jboss/as/patching/management/LocalAgeoutHistoryHandler
       3: dup
       4: invokespecial #53                 // Method "<init>":()V
       7: putstatic     #54                 // Field INSTANCE:Lorg/jboss/as/patching/management/LocalAgeoutHistoryHandler;
      10: new           #55                 // class org/jboss/as/patching/management/LocalAgeoutHistoryHandler$1
      13: dup
      14: invokespecial #56                 // Method org/jboss/as/patching/management/LocalAgeoutHistoryHandler$1."<init>":()V
      17: putstatic     #42                 // Field ALL:Ljava/io/FilenameFilter;
      20: new           #57                 // class org/jboss/as/patching/management/LocalAgeoutHistoryHandler$2
      23: dup
      24: invokespecial #58                 // Method org/jboss/as/patching/management/LocalAgeoutHistoryHandler$2."<init>":()V
      27: putstatic     #48                 // Field HISTORY_FILTER:Ljava/io/FilenameFilter;
      30: return
}

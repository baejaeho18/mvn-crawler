Compiled from "IdentityPatchContext.java"
class org.jboss.as.patching.runner.IdentityPatchContext implements org.jboss.as.patching.runner.PatchContentProvider {
  private final java.io.File miscBackup;

  private final java.io.File configBackup;

  private final java.io.File miscTargetRoot;

  private final org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry identityEntry;

  private final org.jboss.as.patching.installation.InstalledImage installedImage;

  private final org.jboss.as.patching.runner.PatchContentProvider contentProvider;

  private final org.jboss.as.patching.tool.ContentVerificationPolicy contentPolicy;

  private final org.jboss.as.patching.installation.InstallationManager$InstallationModification modification;

  private final java.util.Map<java.lang.String, org.jboss.as.patching.runner.PatchContentLoader> contentLoaders;

  private final org.jboss.as.patching.tool.PatchingHistory history;

  private final java.util.Map<java.lang.String, org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry> layers;

  private final java.util.Map<java.lang.String, org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry> addOns;

  private org.jboss.as.patching.runner.PatchingTaskContext$Mode mode;

  private volatile org.jboss.as.patching.runner.IdentityPatchContext$State state;

  private boolean checkForGarbageOnRestart;

  private static final java.util.concurrent.atomic.AtomicReferenceFieldUpdater<org.jboss.as.patching.runner.IdentityPatchContext, org.jboss.as.patching.runner.IdentityPatchContext$State> stateUpdater;

  private final java.util.List<java.io.File> moduleInvalidations;

  private java.util.List<java.io.File> modulesToReenable;

  private java.util.List<java.io.File> modulesToDisable;

  private final java.util.Map<java.lang.String, org.jboss.as.patching.runner.FailedFileRenaming> renames;

  static final java.io.FileFilter CONFIG_FILTER;

  static final boolean $assertionsDisabled;

  org.jboss.as.patching.runner.IdentityPatchContext(java.io.File, org.jboss.as.patching.runner.PatchContentProvider, org.jboss.as.patching.tool.ContentVerificationPolicy, org.jboss.as.patching.installation.InstallationManager$InstallationModification, org.jboss.as.patching.runner.PatchingTaskContext$Mode, org.jboss.as.patching.installation.InstalledImage);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/HashMap
       8: dup
       9: invokespecial #3                  // Method java/util/HashMap."<init>":()V
      12: putfield      #4                  // Field contentLoaders:Ljava/util/Map;
      15: aload_0
      16: new           #5                  // class java/util/LinkedHashMap
      19: dup
      20: invokespecial #6                  // Method java/util/LinkedHashMap."<init>":()V
      23: putfield      #7                  // Field layers:Ljava/util/Map;
      26: aload_0
      27: new           #5                  // class java/util/LinkedHashMap
      30: dup
      31: invokespecial #6                  // Method java/util/LinkedHashMap."<init>":()V
      34: putfield      #8                  // Field addOns:Ljava/util/Map;
      37: aload_0
      38: getstatic     #9                  // Field org/jboss/as/patching/runner/IdentityPatchContext$State.NEW:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      41: putfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      44: aload_0
      45: new           #11                 // class java/util/ArrayList
      48: dup
      49: invokespecial #12                 // Method java/util/ArrayList."<init>":()V
      52: putfield      #13                 // Field moduleInvalidations:Ljava/util/List;
      55: aload_0
      56: invokestatic  #14                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      59: putfield      #15                 // Field modulesToReenable:Ljava/util/List;
      62: aload_0
      63: invokestatic  #14                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      66: putfield      #16                 // Field modulesToDisable:Ljava/util/List;
      69: aload_0
      70: new           #5                  // class java/util/LinkedHashMap
      73: dup
      74: invokespecial #6                  // Method java/util/LinkedHashMap."<init>":()V
      77: putfield      #17                 // Field renames:Ljava/util/Map;
      80: aload_0
      81: aload         6
      83: invokeinterface #18,  1           // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getJbossHome:()Ljava/io/File;
      88: putfield      #19                 // Field miscTargetRoot:Ljava/io/File;
      91: aload_0
      92: aload         5
      94: putfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      97: aload_0
      98: aload_2
      99: putfield      #21                 // Field contentProvider:Lorg/jboss/as/patching/runner/PatchContentProvider;
     102: aload_0
     103: aload_3
     104: putfield      #22                 // Field contentPolicy:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
     107: aload_0
     108: aload         4
     110: putfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
     113: aload_0
     114: aload         6
     116: putfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
     119: aload_0
     120: aload         4
     122: invokeinterface #25,  1           // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.getUnmodifiedInstallationState:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     127: invokestatic  #26                 // Method org/jboss/as/patching/tool/PatchingHistory$Factory.getHistory:(Lorg/jboss/as/patching/installation/InstalledIdentity;)Lorg/jboss/as/patching/tool/PatchingHistory;
     130: putfield      #27                 // Field history:Lorg/jboss/as/patching/tool/PatchingHistory;
     133: aload_1
     134: ifnull        168
     137: aload_0
     138: new           #28                 // class java/io/File
     141: dup
     142: aload_1
     143: ldc           #30                 // String misc
     145: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     148: putfield      #32                 // Field miscBackup:Ljava/io/File;
     151: aload_0
     152: new           #28                 // class java/io/File
     155: dup
     156: aload_1
     157: ldc           #34                 // String configuration
     159: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     162: putfield      #35                 // Field configBackup:Ljava/io/File;
     165: goto          178
     168: aload_0
     169: aconst_null
     170: putfield      #32                 // Field miscBackup:Ljava/io/File;
     173: aload_0
     174: aconst_null
     175: putfield      #35                 // Field configBackup:Ljava/io/File;
     178: aload_0
     179: new           #36                 // class org/jboss/as/patching/runner/IdentityPatchContext$IdentityEntry
     182: dup
     183: aload_0
     184: aload         4
     186: aconst_null
     187: invokespecial #37                 // Method org/jboss/as/patching/runner/IdentityPatchContext$IdentityEntry."<init>":(Lorg/jboss/as/patching/runner/IdentityPatchContext;Lorg/jboss/as/patching/installation/InstallationManager$MutablePatchingTarget;Lorg/jboss/as/patching/metadata/PatchElement;)V
     190: putfield      #38                 // Field identityEntry:Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
     193: return

  org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry getIdentityEntry();
    Code:
       0: aload_0
       1: getfield      #38                 // Field identityEntry:Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
       4: areturn

  org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry getEntry(java.lang.String, boolean);
    Code:
       0: iload_2
       1: ifeq          20
       4: aload_0
       5: getfield      #8                  // Field addOns:Ljava/util/Map;
       8: aload_1
       9: invokeinterface #39,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      17: goto          33
      20: aload_0
      21: getfield      #7                  // Field layers:Ljava/util/Map;
      24: aload_1
      25: invokeinterface #39,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      30: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      33: areturn

  java.util.Collection<org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry> getLayers();
    Code:
       0: aload_0
       1: getfield      #7                  // Field layers:Ljava/util/Map;
       4: invokeinterface #41,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
       9: areturn

  java.util.Collection<org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry> getAddOns();
    Code:
       0: aload_0
       1: getfield      #8                  // Field addOns:Ljava/util/Map;
       4: invokeinterface #41,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
       9: areturn

  org.jboss.as.patching.installation.InstallationManager$InstallationModification getModification();
    Code:
       0: aload_0
       1: getfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
       4: areturn

  org.jboss.as.patching.tool.PatchingHistory getHistory();
    Code:
       0: aload_0
       1: getfield      #27                 // Field history:Lorg/jboss/as/patching/tool/PatchingHistory;
       4: areturn

  org.jboss.as.patching.runner.PatchingTaskContext$Mode getMode();
    Code:
       0: aload_0
       1: getfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
       4: areturn

  protected void failedToCleanupDir(java.io.File);
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #42                 // Field checkForGarbageOnRestart:Z
       5: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
       8: aload_1
       9: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      12: invokeinterface #45,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotDeleteFile:(Ljava/lang/String;)V
      17: return

  protected void failedToRenameFile(java.io.File, java.io.File);
    Code:
       0: aload_0
       1: getfield      #17                 // Field renames:Ljava/util/Map;
       4: aload_1
       5: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
       8: invokeinterface #46,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      13: ifne          58
      16: aload_0
      17: getfield      #17                 // Field renames:Ljava/util/Map;
      20: aload_1
      21: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      24: new           #47                 // class org/jboss/as/patching/runner/FailedFileRenaming
      27: dup
      28: aload_1
      29: aload_2
      30: aload_0
      31: invokevirtual #48                 // Method getIdentityEntry:()Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
      34: getfield      #49                 // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.applyPatchId:Ljava/lang/String;
      37: invokespecial #50                 // Method org/jboss/as/patching/runner/FailedFileRenaming."<init>":(Ljava/io/File;Ljava/io/File;Ljava/lang/String;)V
      40: invokeinterface #51,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      45: pop
      46: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      49: aload_1
      50: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      53: invokeinterface #52,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotRenameFile:(Ljava/lang/String;)V
      58: return

  public org.jboss.as.patching.runner.PatchContentLoader getLoader(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #4                  // Field contentLoaders:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #39,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #29                 // class org/jboss/as/patching/runner/PatchContentLoader
      13: astore_2
      14: aload_2
      15: ifnull        20
      18: aload_2
      19: areturn
      20: aload_0
      21: getfield      #21                 // Field contentProvider:Lorg/jboss/as/patching/runner/PatchContentProvider;
      24: aload_1
      25: invokeinterface #53,  2           // InterfaceMethod org/jboss/as/patching/runner/PatchContentProvider.getLoader:(Ljava/lang/String;)Lorg/jboss/as/patching/runner/PatchContentLoader;
      30: areturn

  public void cleanup();
    Code:
       0: aload_0
       1: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
       4: getstatic     #54                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.PREPARED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
       7: if_acmpeq     15
      10: aload_0
      11: invokevirtual #55                 // Method undoChanges:()Z
      14: pop
      15: return

  protected org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry resolveForElement(org.jboss.as.patching.metadata.PatchElement) throws org.jboss.as.patching.PatchingException;
    Code:
       0: getstatic     #56                 // Field $assertionsDisabled:Z
       3: ifne          24
       6: aload_0
       7: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      10: getstatic     #9                  // Field org/jboss/as/patching/runner/IdentityPatchContext$State.NEW:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      13: if_acmpeq     24
      16: new           #57                 // class java/lang/AssertionError
      19: dup
      20: invokespecial #58                 // Method java/lang/AssertionError."<init>":()V
      23: athrow
      24: aload_1
      25: invokeinterface #59,  1           // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getProvider:()Lorg/jboss/as/patching/metadata/PatchElementProvider;
      30: astore_2
      31: aload_2
      32: invokeinterface #60,  1           // InterfaceMethod org/jboss/as/patching/metadata/PatchElementProvider.getName:()Ljava/lang/String;
      37: astore_3
      38: aload_2
      39: invokeinterface #61,  1           // InterfaceMethod org/jboss/as/patching/metadata/PatchElementProvider.getLayerType:()Lorg/jboss/as/patching/metadata/LayerType;
      44: astore        4
      46: aload         4
      48: getstatic     #62                 // Field org/jboss/as/patching/metadata/LayerType.Layer:Lorg/jboss/as/patching/metadata/LayerType;
      51: if_acmpne     63
      54: aload_0
      55: getfield      #7                  // Field layers:Ljava/util/Map;
      58: astore        5
      60: goto          69
      63: aload_0
      64: getfield      #8                  // Field addOns:Ljava/util/Map;
      67: astore        5
      69: aload         5
      71: aload_3
      72: invokeinterface #39,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      77: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      80: astore        6
      82: aload         6
      84: ifnonnull     140
      87: aload_0
      88: getfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
      91: aload_3
      92: aload         4
      94: invokeinterface #63,  3           // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.resolve:(Ljava/lang/String;Lorg/jboss/as/patching/metadata/LayerType;)Lorg/jboss/as/patching/installation/InstallationManager$MutablePatchingTarget;
      99: astore        7
     101: aload         7
     103: ifnonnull     116
     106: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     109: aload_3
     110: invokeinterface #64,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.noSuchLayer:(Ljava/lang/String;)Lorg/jboss/as/patching/PatchingException;
     115: athrow
     116: new           #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
     119: dup
     120: aload_0
     121: aload         7
     123: aload_1
     124: invokespecial #65                 // Method org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry."<init>":(Lorg/jboss/as/patching/runner/IdentityPatchContext;Lorg/jboss/as/patching/installation/InstallationManager$MutablePatchingTarget;Lorg/jboss/as/patching/metadata/PatchElement;)V
     127: astore        6
     129: aload         5
     131: aload_3
     132: aload         6
     134: invokeinterface #51,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     139: pop
     140: aload         6
     142: aload_1
     143: invokevirtual #66                 // Method org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.updateElement:(Lorg/jboss/as/patching/metadata/PatchElement;)V
     146: aload         6
     148: areturn

  protected org.jboss.as.patching.tool.PatchingResult finalize(org.jboss.as.patching.runner.IdentityPatchContext$FinalizeCallback) throws java.lang.Exception;
    Code:
       0: getstatic     #56                 // Field $assertionsDisabled:Z
       3: ifne          24
       6: aload_0
       7: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      10: getstatic     #9                  // Field org/jboss/as/patching/runner/IdentityPatchContext$State.NEW:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      13: if_acmpeq     24
      16: new           #57                 // class java/lang/AssertionError
      19: dup
      20: invokespecial #58                 // Method java/lang/AssertionError."<init>":()V
      23: athrow
      24: aload_1
      25: invokeinterface #67,  1           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.getPatch:()Lorg/jboss/as/patching/metadata/Patch;
      30: astore_2
      31: aload_2
      32: invokeinterface #68,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getIdentity:()Lorg/jboss/as/patching/metadata/Identity;
      37: invokeinterface #69,  1           // InterfaceMethod org/jboss/as/patching/metadata/Identity.getPatchType:()Lorg/jboss/as/patching/metadata/Patch$PatchType;
      42: astore_3
      43: aload_3
      44: getstatic     #70                 // Field org/jboss/as/patching/metadata/Patch$PatchType.CUMULATIVE:Lorg/jboss/as/patching/metadata/Patch$PatchType;
      47: if_acmpne     64
      50: aload_0
      51: getfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
      54: invokeinterface #71,  1           // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.getCumulativePatchID:()Ljava/lang/String;
      59: astore        4
      61: goto          72
      64: aload_2
      65: invokeinterface #72,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
      70: astore        4
      72: aload_0
      73: aload_2
      74: invokevirtual #73                 // Method createProcessedPatch:(Lorg/jboss/as/patching/metadata/Patch;)Lorg/jboss/as/patching/metadata/Patch;
      77: astore        5
      79: aload_0
      80: aload         4
      82: aload_3
      83: invokevirtual #74                 // Method createRollbackPatch:(Ljava/lang/String;Lorg/jboss/as/patching/metadata/Patch$PatchType;)Lorg/jboss/as/patching/metadata/RollbackPatch;
      86: astore        6
      88: aload_1
      89: aload         5
      91: aload         6
      93: aload_0
      94: invokeinterface #75,  4           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.finishPatch:(Lorg/jboss/as/patching/metadata/Patch;Lorg/jboss/as/patching/metadata/RollbackPatch;Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
      99: goto          121
     102: astore        5
     104: aload_0
     105: invokevirtual #55                 // Method undoChanges:()Z
     108: ifeq          118
     111: aload_1
     112: aload_0
     113: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     118: aload         5
     120: athrow
     121: aload_0
     122: getstatic     #54                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.PREPARED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     125: putfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     128: new           #78                 // class org/jboss/as/patching/runner/IdentityPatchContext$1
     131: dup
     132: aload_0
     133: aload_2
     134: aload_1
     135: invokespecial #79                 // Method org/jboss/as/patching/runner/IdentityPatchContext$1."<init>":(Lorg/jboss/as/patching/runner/IdentityPatchContext;Lorg/jboss/as/patching/metadata/Patch;Lorg/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback;)V
     138: areturn
    Exception table:
       from    to  target type
          72    99   102   Class java/lang/Exception

  protected void cancel(org.jboss.as.patching.runner.IdentityPatchContext$FinalizeCallback);
    Code:
       0: aload_0
       1: invokevirtual #55                 // Method undoChanges:()Z
       4: pop
       5: aload_1
       6: aload_0
       7: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
      12: goto          25
      15: astore_2
      16: aload_1
      17: aload_0
      18: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
      23: aload_2
      24: athrow
      25: return
    Exception table:
       from    to  target type
           0     5    15   any

  private void complete(org.jboss.as.patching.installation.InstallationManager$InstallationModification, org.jboss.as.patching.runner.IdentityPatchContext$FinalizeCallback);
    Code:
       0: new           #11                 // class java/util/ArrayList
       3: dup
       4: invokespecial #12                 // Method java/util/ArrayList."<init>":()V
       7: astore_3
       8: invokestatic  #14                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      11: astore        4
      13: invokestatic  #14                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      16: astore        5
      18: getstatic     #80                 // Field stateUpdater:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      21: aload_0
      22: getstatic     #54                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.PREPARED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      25: getstatic     #81                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.INVALIDATE:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      28: invokevirtual #82                 // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.compareAndSet:(Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)Z
      31: ifeq          282
      34: aload_0
      35: getfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      38: getstatic     #83                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.APPLY:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      41: if_acmpne     187
      44: aload_0
      45: getfield      #13                 // Field moduleInvalidations:Ljava/util/List;
      48: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      53: astore        6
      55: aload         6
      57: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      62: ifeq          99
      65: aload         6
      67: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      72: checkcast     #28                 // class java/io/File
      75: astore        7
      77: aload_3
      78: aload         7
      80: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      85: pop
      86: aload_0
      87: aload         7
      89: aload_0
      90: getfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      93: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
      96: goto          55
      99: aload_0
     100: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     103: invokeinterface #89,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     108: ifne          282
     111: new           #11                 // class java/util/ArrayList
     114: dup
     115: aload_0
     116: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     119: invokeinterface #90,  1           // InterfaceMethod java/util/List.size:()I
     124: invokespecial #91                 // Method java/util/ArrayList."<init>":(I)V
     127: astore        4
     129: aload_0
     130: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     133: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     138: astore        6
     140: aload         6
     142: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     147: ifeq          184
     150: aload         6
     152: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     157: checkcast     #28                 // class java/io/File
     160: astore        7
     162: aload         4
     164: aload         7
     166: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     171: pop
     172: aload_0
     173: aload         7
     175: getstatic     #92                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.ROLLBACK:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     178: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
     181: goto          140
     184: goto          282
     187: aload_0
     188: getfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     191: getstatic     #92                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.ROLLBACK:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     194: if_acmpne     282
     197: aload_0
     198: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     201: invokeinterface #89,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     206: ifne          282
     209: new           #11                 // class java/util/ArrayList
     212: dup
     213: aload_0
     214: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     217: invokeinterface #90,  1           // InterfaceMethod java/util/List.size:()I
     222: invokespecial #91                 // Method java/util/ArrayList."<init>":(I)V
     225: astore        5
     227: aload_0
     228: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     231: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     236: astore        6
     238: aload         6
     240: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     245: ifeq          282
     248: aload         6
     250: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     255: checkcast     #28                 // class java/io/File
     258: astore        7
     260: aload         5
     262: aload         7
     264: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     269: pop
     270: aload_0
     271: aload         7
     273: getstatic     #83                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.APPLY:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     276: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
     279: goto          238
     282: aload_1
     283: invokeinterface #93,  1           // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.complete:()V
     288: aload_2
     289: aload_0
     290: invokeinterface #94,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.completed:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     295: aload_0
     296: getstatic     #95                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.COMPLETED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     299: putfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     302: goto          379
     305: astore        6
     307: aload_0
     308: getfield      #13                 // Field moduleInvalidations:Ljava/util/List;
     311: invokeinterface #96,  1           // InterfaceMethod java/util/List.clear:()V
     316: aload_0
     317: getfield      #13                 // Field moduleInvalidations:Ljava/util/List;
     320: aload_3
     321: invokeinterface #97,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     326: pop
     327: aload_0
     328: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     331: invokeinterface #96,  1           // InterfaceMethod java/util/List.clear:()V
     336: aload_0
     337: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     340: aload         4
     342: invokeinterface #97,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     347: pop
     348: aload_0
     349: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     352: invokeinterface #96,  1           // InterfaceMethod java/util/List.clear:()V
     357: aload_0
     358: getfield      #13                 // Field moduleInvalidations:Ljava/util/List;
     361: aload         5
     363: invokeinterface #97,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     368: pop
     369: new           #98                 // class java/lang/RuntimeException
     372: dup
     373: aload         6
     375: invokespecial #99                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     378: athrow
     379: aload_0
     380: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     383: getstatic     #95                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.COMPLETED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     386: if_acmpeq     460
     389: aload_1
     390: invokeinterface #100,  1          // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.cancel:()V
     395: aload_0
     396: invokevirtual #55                 // Method undoChanges:()Z
     399: pop
     400: aload_2
     401: aload_0
     402: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     407: goto          422
     410: astore        8
     412: aload_2
     413: aload_0
     414: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     419: aload         8
     421: athrow
     422: goto          457
     425: astore        9
     427: aload_0
     428: invokevirtual #55                 // Method undoChanges:()Z
     431: pop
     432: aload_2
     433: aload_0
     434: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     439: goto          454
     442: astore        10
     444: aload_2
     445: aload_0
     446: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     451: aload         10
     453: athrow
     454: aload         9
     456: athrow
     457: goto          665
     460: aload_0
     461: getfield      #42                 // Field checkForGarbageOnRestart:Z
     464: ifeq          493
     467: new           #28                 // class java/io/File
     470: dup
     471: aload_0
     472: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
     475: invokeinterface #101,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getInstallationMetadata:()Ljava/io/File;
     480: ldc           #102                // String cleanup-patching-dirs
     482: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     485: astore        6
     487: aload         6
     489: invokevirtual #103                // Method java/io/File.createNewFile:()Z
     492: pop
     493: aload_0
     494: invokevirtual #104                // Method storeFailedRenaming:()V
     497: goto          665
     500: astore        6
     502: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     505: aload         6
     507: ldc           #106                // String failed to create cleanup marker
     509: iconst_0
     510: anewarray     #107                // class java/lang/Object
     513: invokeinterface #108,  4          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;[Ljava/lang/Object;)V
     518: goto          665
     521: astore        11
     523: aload_0
     524: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     527: getstatic     #95                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.COMPLETED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
     530: if_acmpeq     604
     533: aload_1
     534: invokeinterface #100,  1          // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.cancel:()V
     539: aload_0
     540: invokevirtual #55                 // Method undoChanges:()Z
     543: pop
     544: aload_2
     545: aload_0
     546: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     551: goto          566
     554: astore        12
     556: aload_2
     557: aload_0
     558: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     563: aload         12
     565: athrow
     566: goto          601
     569: astore        13
     571: aload_0
     572: invokevirtual #55                 // Method undoChanges:()Z
     575: pop
     576: aload_2
     577: aload_0
     578: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     583: goto          598
     586: astore        14
     588: aload_2
     589: aload_0
     590: invokeinterface #77,  2           // InterfaceMethod org/jboss/as/patching/runner/IdentityPatchContext$FinalizeCallback.operationCancelled:(Lorg/jboss/as/patching/runner/IdentityPatchContext;)V
     595: aload         14
     597: athrow
     598: aload         13
     600: athrow
     601: goto          662
     604: aload_0
     605: getfield      #42                 // Field checkForGarbageOnRestart:Z
     608: ifeq          637
     611: new           #28                 // class java/io/File
     614: dup
     615: aload_0
     616: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
     619: invokeinterface #101,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getInstallationMetadata:()Ljava/io/File;
     624: ldc           #102                // String cleanup-patching-dirs
     626: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     629: astore        12
     631: aload         12
     633: invokevirtual #103                // Method java/io/File.createNewFile:()Z
     636: pop
     637: aload_0
     638: invokevirtual #104                // Method storeFailedRenaming:()V
     641: goto          662
     644: astore        12
     646: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     649: aload         12
     651: ldc           #106                // String failed to create cleanup marker
     653: iconst_0
     654: anewarray     #107                // class java/lang/Object
     657: invokeinterface #108,  4          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;[Ljava/lang/Object;)V
     662: aload         11
     664: athrow
     665: return
    Exception table:
       from    to  target type
          18   302   305   Class java/lang/Exception
         395   400   410   any
         410   412   410   any
         389   395   425   any
         427   432   442   any
         442   444   442   any
         425   427   425   any
         460   497   500   Class java/io/IOException
          18   379   521   any
         539   544   554   any
         554   556   554   any
         533   539   569   any
         571   576   586   any
         586   588   586   any
         569   571   569   any
         604   641   644   Class java/io/IOException
         521   523   521   any

  private void storeFailedRenaming() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #17                 // Field renames:Ljava/util/Map;
       4: invokeinterface #109,  1          // InterfaceMethod java/util/Map.isEmpty:()Z
       9: ifne          66
      12: new           #28                 // class java/io/File
      15: dup
      16: aload_0
      17: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
      20: invokeinterface #101,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getInstallationMetadata:()Ljava/io/File;
      25: ldc           #110                // String cleanup-renaming-files
      27: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      30: astore_1
      31: aload_1
      32: invokevirtual #111                // Method java/io/File.exists:()Z
      35: ifne          43
      38: aload_1
      39: invokevirtual #103                // Method java/io/File.createNewFile:()Z
      42: pop
      43: new           #11                 // class java/util/ArrayList
      46: dup
      47: aload_0
      48: getfield      #17                 // Field renames:Ljava/util/Map;
      51: invokeinterface #112,  1          // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      56: invokespecial #113                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      59: astore_2
      60: aload_1
      61: aload_2
      62: iconst_1
      63: invokestatic  #114                // Method org/jboss/as/patching/runner/PatchUtils.writeRefs:(Ljava/io/File;Ljava/util/List;Z)V
      66: return

  boolean undoChanges();
    Code:
       0: getstatic     #80                 // Field stateUpdater:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
       3: aload_0
       4: getstatic     #115                // Field org/jboss/as/patching/runner/IdentityPatchContext$State.ROLLBACK_ONLY:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
       7: invokevirtual #116                // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.getAndSet:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #117                // class org/jboss/as/patching/runner/IdentityPatchContext$State
      13: astore_1
      14: aload_1
      15: getstatic     #95                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.COMPLETED:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      18: if_acmpeq     28
      21: aload_1
      22: getstatic     #115                // Field org/jboss/as/patching/runner/IdentityPatchContext$State.ROLLBACK_ONLY:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      25: if_acmpne     30
      28: iconst_0
      29: ireturn
      30: aload_0
      31: getfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      34: astore_2
      35: aload_0
      36: getstatic     #118                // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.UNDO:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      39: putfield      #20                 // Field mode:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      42: aload_0
      43: getfield      #32                 // Field miscBackup:Ljava/io/File;
      46: aconst_null
      47: aconst_null
      48: invokestatic  #119                // Method org/jboss/as/patching/runner/PatchContentLoader.create:(Ljava/io/File;Ljava/io/File;Ljava/io/File;)Lorg/jboss/as/patching/runner/PatchContentLoader;
      51: astore_3
      52: aload_0
      53: getfield      #38                 // Field identityEntry:Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
      56: aload_3
      57: invokestatic  #120                // Method undoChanges:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;Lorg/jboss/as/patching/runner/PatchContentLoader;)V
      60: aload_1
      61: getstatic     #81                 // Field org/jboss/as/patching/runner/IdentityPatchContext$State.INVALIDATE:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      64: if_acmpeq     74
      67: aload_2
      68: getstatic     #92                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.ROLLBACK:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      71: if_acmpne     307
      74: aload_2
      75: getstatic     #83                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.APPLY:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      78: if_acmpne     87
      81: getstatic     #92                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.ROLLBACK:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      84: goto          90
      87: getstatic     #83                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.APPLY:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
      90: astore        4
      92: aload_0
      93: getfield      #13                 // Field moduleInvalidations:Ljava/util/List;
      96: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     101: astore        5
     103: aload         5
     105: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     110: ifeq          155
     113: aload         5
     115: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     120: checkcast     #28                 // class java/io/File
     123: astore        6
     125: aload_0
     126: aload         6
     128: aload         4
     130: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
     133: goto          152
     136: astore        7
     138: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     141: aload         7
     143: ldc           #121                // String failed to restore state for %s
     145: aload         6
     147: invokeinterface #122,  4          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;)V
     152: goto          103
     155: aload_0
     156: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     159: invokeinterface #89,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     164: ifne          231
     167: aload_0
     168: getfield      #15                 // Field modulesToReenable:Ljava/util/List;
     171: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     176: astore        5
     178: aload         5
     180: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     185: ifeq          231
     188: aload         5
     190: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     195: checkcast     #28                 // class java/io/File
     198: astore        6
     200: aload_0
     201: aload         6
     203: getstatic     #83                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.APPLY:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     206: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
     209: goto          228
     212: astore        7
     214: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     217: aload         7
     219: ldc           #121                // String failed to restore state for %s
     221: aload         6
     223: invokeinterface #122,  4          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;)V
     228: goto          178
     231: aload_0
     232: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     235: invokeinterface #89,  1           // InterfaceMethod java/util/List.isEmpty:()Z
     240: ifne          307
     243: aload_0
     244: getfield      #16                 // Field modulesToDisable:Ljava/util/List;
     247: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     252: astore        5
     254: aload         5
     256: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     261: ifeq          307
     264: aload         5
     266: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     271: checkcast     #28                 // class java/io/File
     274: astore        6
     276: aload_0
     277: aload         6
     279: getstatic     #92                 // Field org/jboss/as/patching/runner/PatchingTaskContext$Mode.ROLLBACK:Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;
     282: invokestatic  #88                 // Method org/jboss/as/patching/runner/PatchModuleInvalidationUtils.processFile:(Lorg/jboss/as/patching/runner/IdentityPatchContext;Ljava/io/File;Lorg/jboss/as/patching/runner/PatchingTaskContext$Mode;)V
     285: goto          304
     288: astore        7
     290: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     293: aload         7
     295: ldc           #121                // String failed to restore state for %s
     297: aload         6
     299: invokeinterface #122,  4          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;)V
     304: goto          254
     307: iconst_1
     308: ireturn
    Exception table:
       from    to  target type
         125   133   136   Class java/lang/Exception
         200   209   212   Class java/lang/Exception
         276   285   288   Class java/lang/Exception

  static void undoChanges(org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry, org.jboss.as.patching.runner.PatchContentLoader);
    Code:
       0: new           #11                 // class java/util/ArrayList
       3: dup
       4: aload_0
       5: getfield      #123                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.rollbackActions:Ljava/util/List;
       8: invokespecial #113                // Method java/util/ArrayList."<init>":(Ljava/util/Collection;)V
      11: astore_2
      12: aload_2
      13: invokeinterface #84,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      18: astore_3
      19: aload_3
      20: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      25: ifeq          116
      28: aload_3
      29: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      34: checkcast     #124                // class org/jboss/as/patching/metadata/ContentModification
      37: astore        4
      39: aload         4
      41: invokevirtual #125                // Method org/jboss/as/patching/metadata/ContentModification.getItem:()Lorg/jboss/as/patching/metadata/ContentItem;
      44: astore        5
      46: aload         5
      48: invokevirtual #126                // Method org/jboss/as/patching/metadata/ContentItem.getContentType:()Lorg/jboss/as/patching/metadata/ContentType;
      51: getstatic     #127                // Field org/jboss/as/patching/metadata/ContentType.MISC:Lorg/jboss/as/patching/metadata/ContentType;
      54: if_acmpeq     60
      57: goto          19
      60: new           #128                // class org/jboss/as/patching/runner/PatchingTaskDescription
      63: dup
      64: aload_0
      65: getfield      #49                 // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.applyPatchId:Ljava/lang/String;
      68: aload         4
      70: aload_1
      71: iconst_0
      72: iconst_0
      73: iconst_0
      74: invokespecial #129                // Method org/jboss/as/patching/runner/PatchingTaskDescription."<init>":(Ljava/lang/String;Lorg/jboss/as/patching/metadata/ContentModification;Lorg/jboss/as/patching/runner/PatchContentLoader;ZZZ)V
      77: astore        6
      79: aload         6
      81: aload_0
      82: invokestatic  #130                // Method org/jboss/as/patching/runner/PatchingTask$Factory.create:(Lorg/jboss/as/patching/runner/PatchingTaskDescription;Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;)Lorg/jboss/as/patching/runner/PatchingTask;
      85: astore        7
      87: aload         7
      89: aload_0
      90: invokeinterface #131,  2          // InterfaceMethod org/jboss/as/patching/runner/PatchingTask.execute:(Lorg/jboss/as/patching/runner/PatchingTaskContext;)V
      95: goto          113
      98: astore        7
     100: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
     103: aload         5
     105: invokevirtual #132                // Method java/lang/Object.toString:()Ljava/lang/String;
     108: invokeinterface #133,  2          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.failedToUndoChange:(Ljava/lang/String;)V
     113: goto          19
     116: return
    Exception table:
       from    to  target type
          79    95    98   Class java/lang/Exception

  private void recordRollbackLoader(java.lang.String, org.jboss.as.patching.installation.PatchableTarget$TargetInfo);
    Code:
       0: aload_2
       1: invokeinterface #134,  1          // InterfaceMethod org/jboss/as/patching/installation/PatchableTarget$TargetInfo.getDirectoryStructure:()Lorg/jboss/as/patching/DirectoryStructure;
       6: astore_3
       7: aload_3
       8: invokevirtual #135                // Method org/jboss/as/patching/DirectoryStructure.getInstalledImage:()Lorg/jboss/as/patching/installation/InstalledImage;
      11: astore        4
      13: aload         4
      15: aload_1
      16: invokeinterface #136,  2          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getPatchHistoryDir:(Ljava/lang/String;)Ljava/io/File;
      21: astore        5
      23: new           #28                 // class java/io/File
      26: dup
      27: aload         5
      29: ldc           #30                 // String misc
      31: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      34: astore        6
      36: aload_3
      37: aload_1
      38: invokevirtual #137                // Method org/jboss/as/patching/DirectoryStructure.getModulePatchDirectory:(Ljava/lang/String;)Ljava/io/File;
      41: astore        7
      43: aload_3
      44: aload_1
      45: invokevirtual #138                // Method org/jboss/as/patching/DirectoryStructure.getBundlesPatchDirectory:(Ljava/lang/String;)Ljava/io/File;
      48: astore        8
      50: aload         6
      52: aload         8
      54: aload         7
      56: invokestatic  #119                // Method org/jboss/as/patching/runner/PatchContentLoader.create:(Ljava/io/File;Ljava/io/File;Ljava/io/File;)Lorg/jboss/as/patching/runner/PatchContentLoader;
      59: astore        9
      61: aload_0
      62: aload_1
      63: aload         9
      65: invokevirtual #139                // Method recordContentLoader:(Ljava/lang/String;Lorg/jboss/as/patching/runner/PatchContentLoader;)V
      68: return

  protected void recordContentLoader(java.lang.String, org.jboss.as.patching.runner.PatchContentLoader);
    Code:
       0: aload_0
       1: getfield      #4                  // Field contentLoaders:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #46,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      10: ifeq          27
      13: new           #140                // class java/lang/IllegalStateException
      16: dup
      17: aload_1
      18: invokedynamic #141,  0            // InvokeDynamic #0:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;
      23: invokespecial #142                // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      26: athrow
      27: aload_0
      28: getfield      #4                  // Field contentLoaders:Ljava/util/Map;
      31: aload_1
      32: aload_2
      33: invokeinterface #51,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      38: pop
      39: return

  public boolean isIgnored(org.jboss.as.patching.metadata.ContentItem);
    Code:
       0: aload_0
       1: getfield      #22                 // Field contentPolicy:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
       4: aload_1
       5: invokeinterface #143,  2          // InterfaceMethod org/jboss/as/patching/tool/ContentVerificationPolicy.ignoreContentValidation:(Lorg/jboss/as/patching/metadata/ContentItem;)Z
      10: ireturn

  public boolean isExcluded(org.jboss.as.patching.metadata.ContentItem);
    Code:
       0: aload_0
       1: getfield      #22                 // Field contentPolicy:Lorg/jboss/as/patching/tool/ContentVerificationPolicy;
       4: aload_1
       5: invokeinterface #144,  2          // InterfaceMethod org/jboss/as/patching/tool/ContentVerificationPolicy.preserveExisting:(Lorg/jboss/as/patching/metadata/ContentItem;)Z
      10: ireturn

  public java.io.File getTargetFile(org.jboss.as.patching.metadata.MiscContentItem);
    Code:
       0: aload_0
       1: getfield      #10                 // Field state:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
       4: astore_2
       5: aload_2
       6: getstatic     #9                  // Field org/jboss/as/patching/runner/IdentityPatchContext$State.NEW:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
       9: if_acmpeq     19
      12: aload_2
      13: getstatic     #115                // Field org/jboss/as/patching/runner/IdentityPatchContext$State.ROLLBACK_ONLY:Lorg/jboss/as/patching/runner/IdentityPatchContext$State;
      16: if_acmpne     28
      19: aload_0
      20: getfield      #19                 // Field miscTargetRoot:Ljava/io/File;
      23: aload_1
      24: invokestatic  #145                // Method getTargetFile:(Ljava/io/File;Lorg/jboss/as/patching/metadata/MiscContentItem;)Ljava/io/File;
      27: areturn
      28: new           #140                // class java/lang/IllegalStateException
      31: dup
      32: invokespecial #146                // Method java/lang/IllegalStateException."<init>":()V
      35: athrow

  protected org.jboss.as.patching.metadata.Patch createProcessedPatch(org.jboss.as.patching.metadata.Patch);
    Code:
       0: new           #11                 // class java/util/ArrayList
       3: dup
       4: invokespecial #12                 // Method java/util/ArrayList."<init>":()V
       7: astore_2
       8: aload_0
       9: invokevirtual #147                // Method getLayers:()Ljava/util/Collection;
      12: invokeinterface #148,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      17: astore_3
      18: aload_3
      19: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      24: ifeq          72
      27: aload_3
      28: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      33: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      36: astore        4
      38: aload         4
      40: aload         4
      42: getfield      #149                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.element:Lorg/jboss/as/patching/metadata/PatchElement;
      45: invokeinterface #150,  1          // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getId:()Ljava/lang/String;
      50: aload         4
      52: getfield      #151                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.modifications:Ljava/util/List;
      55: invokestatic  #152                // Method createPatchElement:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;Ljava/lang/String;Ljava/util/List;)Lorg/jboss/as/patching/metadata/PatchElement;
      58: astore        5
      60: aload_2
      61: aload         5
      63: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      68: pop
      69: goto          18
      72: aload_0
      73: invokevirtual #153                // Method getAddOns:()Ljava/util/Collection;
      76: invokeinterface #148,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      81: astore_3
      82: aload_3
      83: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      88: ifeq          136
      91: aload_3
      92: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      97: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
     100: astore        4
     102: aload         4
     104: aload         4
     106: getfield      #149                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.element:Lorg/jboss/as/patching/metadata/PatchElement;
     109: invokeinterface #150,  1          // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getId:()Ljava/lang/String;
     114: aload         4
     116: getfield      #151                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.modifications:Ljava/util/List;
     119: invokestatic  #152                // Method createPatchElement:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;Ljava/lang/String;Ljava/util/List;)Lorg/jboss/as/patching/metadata/PatchElement;
     122: astore        5
     124: aload_2
     125: aload         5
     127: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     132: pop
     133: goto          82
     136: new           #154                // class org/jboss/as/patching/metadata/PatchImpl
     139: dup
     140: aload_1
     141: invokeinterface #72,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getPatchId:()Ljava/lang/String;
     146: aload_1
     147: invokeinterface #155,  1          // InterfaceMethod org/jboss/as/patching/metadata/Patch.getDescription:()Ljava/lang/String;
     152: aload_1
     153: invokeinterface #156,  1          // InterfaceMethod org/jboss/as/patching/metadata/Patch.getLink:()Ljava/lang/String;
     158: aload_1
     159: invokeinterface #68,  1           // InterfaceMethod org/jboss/as/patching/metadata/Patch.getIdentity:()Lorg/jboss/as/patching/metadata/Identity;
     164: aload_2
     165: aload_0
     166: getfield      #38                 // Field identityEntry:Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
     169: getfield      #151                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.modifications:Ljava/util/List;
     172: invokespecial #157                // Method org/jboss/as/patching/metadata/PatchImpl."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Lorg/jboss/as/patching/metadata/Identity;Ljava/util/List;Ljava/util/List;)V
     175: areturn

  protected org.jboss.as.patching.metadata.RollbackPatch createRollbackPatch(java.lang.String, org.jboss.as.patching.metadata.Patch$PatchType);
    Code:
       0: new           #11                 // class java/util/ArrayList
       3: dup
       4: invokespecial #12                 // Method java/util/ArrayList."<init>":()V
       7: astore_3
       8: aload_0
       9: invokevirtual #147                // Method getLayers:()Ljava/util/Collection;
      12: invokeinterface #148,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      17: astore        4
      19: aload         4
      21: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      26: ifeq          60
      29: aload         4
      31: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      36: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      39: astore        5
      41: aload         5
      43: invokestatic  #158                // Method createRollbackElement:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;)Lorg/jboss/as/patching/metadata/PatchElement;
      46: astore        6
      48: aload_3
      49: aload         6
      51: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      56: pop
      57: goto          19
      60: aload_0
      61: invokevirtual #153                // Method getAddOns:()Ljava/util/Collection;
      64: invokeinterface #148,  1          // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      69: astore        4
      71: aload         4
      73: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      78: ifeq          112
      81: aload         4
      83: invokeinterface #86,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      88: checkcast     #40                 // class org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry
      91: astore        5
      93: aload         5
      95: invokestatic  #158                // Method createRollbackElement:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;)Lorg/jboss/as/patching/metadata/PatchElement;
      98: astore        6
     100: aload_3
     101: aload         6
     103: invokeinterface #87,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     108: pop
     109: goto          71
     112: aload_0
     113: getfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
     116: invokeinterface #25,  1           // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.getUnmodifiedInstallationState:()Lorg/jboss/as/patching/installation/InstalledIdentity;
     121: astore        4
     123: aload         4
     125: invokevirtual #159                // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     128: invokeinterface #160,  1          // InterfaceMethod org/jboss/as/patching/installation/Identity.getName:()Ljava/lang/String;
     133: astore        5
     135: new           #161                // class org/jboss/as/patching/metadata/impl/IdentityImpl
     138: dup
     139: aload         5
     141: aload_0
     142: getfield      #23                 // Field modification:Lorg/jboss/as/patching/installation/InstallationManager$InstallationModification;
     145: invokeinterface #162,  1          // InterfaceMethod org/jboss/as/patching/installation/InstallationManager$InstallationModification.getVersion:()Ljava/lang/String;
     150: invokespecial #163                // Method org/jboss/as/patching/metadata/impl/IdentityImpl."<init>":(Ljava/lang/String;Ljava/lang/String;)V
     153: astore        6
     155: aload_2
     156: getstatic     #70                 // Field org/jboss/as/patching/metadata/Patch$PatchType.CUMULATIVE:Lorg/jboss/as/patching/metadata/Patch$PatchType;
     159: if_acmpne     188
     162: aload         6
     164: getstatic     #70                 // Field org/jboss/as/patching/metadata/Patch$PatchType.CUMULATIVE:Lorg/jboss/as/patching/metadata/Patch$PatchType;
     167: invokevirtual #164                // Method org/jboss/as/patching/metadata/impl/IdentityImpl.setPatchType:(Lorg/jboss/as/patching/metadata/Patch$PatchType;)V
     170: aload         6
     172: aload         4
     174: invokevirtual #159                // Method org/jboss/as/patching/installation/InstalledIdentity.getIdentity:()Lorg/jboss/as/patching/installation/Identity;
     177: invokeinterface #165,  1          // InterfaceMethod org/jboss/as/patching/installation/Identity.getVersion:()Ljava/lang/String;
     182: invokevirtual #166                // Method org/jboss/as/patching/metadata/impl/IdentityImpl.setResultingVersion:(Ljava/lang/String;)V
     185: goto          203
     188: aload_2
     189: getstatic     #167                // Field org/jboss/as/patching/metadata/Patch$PatchType.ONE_OFF:Lorg/jboss/as/patching/metadata/Patch$PatchType;
     192: if_acmpne     203
     195: aload         6
     197: getstatic     #167                // Field org/jboss/as/patching/metadata/Patch$PatchType.ONE_OFF:Lorg/jboss/as/patching/metadata/Patch$PatchType;
     200: invokevirtual #164                // Method org/jboss/as/patching/metadata/impl/IdentityImpl.setPatchType:(Lorg/jboss/as/patching/metadata/Patch$PatchType;)V
     203: aload_0
     204: getfield      #38                 // Field identityEntry:Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;
     207: getfield      #123                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.rollbackActions:Ljava/util/List;
     210: astore        7
     212: new           #154                // class org/jboss/as/patching/metadata/PatchImpl
     215: dup
     216: aload_1
     217: ldc           #168                // String rollback patch
     219: aload         6
     221: aload_3
     222: aload         7
     224: invokespecial #169                // Method org/jboss/as/patching/metadata/PatchImpl."<init>":(Ljava/lang/String;Ljava/lang/String;Lorg/jboss/as/patching/metadata/Identity;Ljava/util/List;Ljava/util/List;)V
     227: astore        8
     229: new           #170                // class org/jboss/as/patching/metadata/PatchImpl$RollbackPatchImpl
     232: dup
     233: aload         8
     235: aload         4
     237: invokespecial #171                // Method org/jboss/as/patching/metadata/PatchImpl$RollbackPatchImpl."<init>":(Lorg/jboss/as/patching/metadata/Patch;Lorg/jboss/as/patching/installation/InstalledIdentity;)V
     240: areturn

  static java.io.File getTargetFile(java.io.File, org.jboss.as.patching.metadata.MiscContentItem);
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #172                // Method org/jboss/as/patching/runner/PatchContentLoader.getMiscPath:(Ljava/io/File;Lorg/jboss/as/patching/metadata/MiscContentItem;)Ljava/io/File;
       5: areturn

  protected static org.jboss.as.patching.metadata.PatchElement createRollbackElement(org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry);
    Code:
       0: aload_0
       1: getfield      #149                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.element:Lorg/jboss/as/patching/metadata/PatchElement;
       4: astore_1
       5: aload_1
       6: invokeinterface #59,  1           // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getProvider:()Lorg/jboss/as/patching/metadata/PatchElementProvider;
      11: invokeinterface #173,  1          // InterfaceMethod org/jboss/as/patching/metadata/PatchElementProvider.getPatchType:()Lorg/jboss/as/patching/metadata/Patch$PatchType;
      16: astore_3
      17: aload_3
      18: getstatic     #70                 // Field org/jboss/as/patching/metadata/Patch$PatchType.CUMULATIVE:Lorg/jboss/as/patching/metadata/Patch$PatchType;
      21: if_acmpne     32
      24: aload_0
      25: invokevirtual #174                // Method org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.getCumulativePatchID:()Ljava/lang/String;
      28: astore_2
      29: goto          39
      32: aload_1
      33: invokeinterface #150,  1          // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getId:()Ljava/lang/String;
      38: astore_2
      39: aload_0
      40: aload_2
      41: aload_0
      42: getfield      #123                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.rollbackActions:Ljava/util/List;
      45: invokestatic  #152                // Method createPatchElement:(Lorg/jboss/as/patching/runner/IdentityPatchContext$PatchEntry;Ljava/lang/String;Ljava/util/List;)Lorg/jboss/as/patching/metadata/PatchElement;
      48: areturn

  protected static org.jboss.as.patching.metadata.PatchElement createPatchElement(org.jboss.as.patching.runner.IdentityPatchContext$PatchEntry, java.lang.String, java.util.List<org.jboss.as.patching.metadata.ContentModification>);
    Code:
       0: aload_0
       1: getfield      #149                // Field org/jboss/as/patching/runner/IdentityPatchContext$PatchEntry.element:Lorg/jboss/as/patching/metadata/PatchElement;
       4: astore_3
       5: new           #175                // class org/jboss/as/patching/metadata/impl/PatchElementImpl
       8: dup
       9: aload_1
      10: invokespecial #176                // Method org/jboss/as/patching/metadata/impl/PatchElementImpl."<init>":(Ljava/lang/String;)V
      13: astore        4
      15: aload         4
      17: aload_3
      18: invokeinterface #59,  1           // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getProvider:()Lorg/jboss/as/patching/metadata/PatchElementProvider;
      23: invokevirtual #177                // Method org/jboss/as/patching/metadata/impl/PatchElementImpl.setProvider:(Lorg/jboss/as/patching/metadata/PatchElementProvider;)Lorg/jboss/as/patching/metadata/impl/PatchElementImpl;
      26: pop
      27: aload         4
      29: invokevirtual #178                // Method org/jboss/as/patching/metadata/impl/PatchElementImpl.getModifications:()Ljava/util/List;
      32: aload_2
      33: invokeinterface #97,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      38: pop
      39: aload         4
      41: aload_3
      42: invokeinterface #179,  1          // InterfaceMethod org/jboss/as/patching/metadata/PatchElement.getDescription:()Ljava/lang/String;
      47: invokevirtual #180                // Method org/jboss/as/patching/metadata/impl/PatchElementImpl.setDescription:(Ljava/lang/String;)Lorg/jboss/as/patching/metadata/impl/PatchElementImpl;
      50: pop
      51: aload         4
      53: areturn

  void backupConfiguration() throws java.io.IOException;
    Code:
       0: ldc           #34                 // String configuration
       2: astore_1
       3: new           #28                 // class java/io/File
       6: dup
       7: aload_0
       8: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
      11: invokeinterface #181,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getAppClientDir:()Ljava/io/File;
      16: ldc           #34                 // String configuration
      18: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      21: astore_2
      22: new           #28                 // class java/io/File
      25: dup
      26: aload_0
      27: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
      30: invokeinterface #182,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getDomainDir:()Ljava/io/File;
      35: ldc           #34                 // String configuration
      37: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      40: astore_3
      41: new           #28                 // class java/io/File
      44: dup
      45: aload_0
      46: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
      49: invokeinterface #183,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getStandaloneDir:()Ljava/io/File;
      54: ldc           #34                 // String configuration
      56: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      59: astore        4
      61: aload_2
      62: invokevirtual #111                // Method java/io/File.exists:()Z
      65: ifeq          89
      68: new           #28                 // class java/io/File
      71: dup
      72: aload_0
      73: getfield      #35                 // Field configBackup:Ljava/io/File;
      76: ldc           #184                // String appclient
      78: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      81: astore        5
      83: aload_2
      84: aload         5
      86: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
      89: aload_3
      90: invokevirtual #111                // Method java/io/File.exists:()Z
      93: ifeq          117
      96: new           #28                 // class java/io/File
      99: dup
     100: aload_0
     101: getfield      #35                 // Field configBackup:Ljava/io/File;
     104: ldc           #186                // String domain
     106: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     109: astore        5
     111: aload_3
     112: aload         5
     114: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
     117: aload         4
     119: invokevirtual #111                // Method java/io/File.exists:()Z
     122: ifeq          147
     125: new           #28                 // class java/io/File
     128: dup
     129: aload_0
     130: getfield      #35                 // Field configBackup:Ljava/io/File;
     133: ldc           #187                // String standalone
     135: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     138: astore        5
     140: aload         4
     142: aload         5
     144: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
     147: return

  static void backupDirectory(java.io.File, java.io.File) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #111                // Method java/io/File.exists:()Z
       4: ifne          27
       7: aload_1
       8: invokevirtual #188                // Method java/io/File.mkdirs:()Z
      11: ifne          27
      14: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      17: aload_1
      18: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      21: invokeinterface #189,  2          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotCreateDirectory:(Ljava/lang/String;)Ljava/io/IOException;
      26: athrow
      27: aload_0
      28: getstatic     #190                // Field CONFIG_FILTER:Ljava/io/FileFilter;
      31: invokevirtual #191                // Method java/io/File.listFiles:(Ljava/io/FileFilter;)[Ljava/io/File;
      34: astore_2
      35: aload_2
      36: astore_3
      37: aload_3
      38: arraylength
      39: istore        4
      41: iconst_0
      42: istore        5
      44: iload         5
      46: iload         4
      48: if_icmpge     85
      51: aload_3
      52: iload         5
      54: aaload
      55: astore        6
      57: new           #28                 // class java/io/File
      60: dup
      61: aload_1
      62: aload         6
      64: invokevirtual #192                // Method java/io/File.getName:()Ljava/lang/String;
      67: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      70: astore        7
      72: aload         6
      74: aload         7
      76: invokestatic  #193                // Method org/jboss/as/patching/IoUtils.copyFile:(Ljava/io/File;Ljava/io/File;)V
      79: iinc          5, 1
      82: goto          44
      85: return

  void restoreConfiguration(java.lang.String, boolean) throws java.io.IOException;
    Code:
       0: new           #28                 // class java/io/File
       3: dup
       4: aload_0
       5: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
       8: aload_1
       9: invokeinterface #136,  2          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getPatchHistoryDir:(Ljava/lang/String;)Ljava/io/File;
      14: ldc           #34                 // String configuration
      16: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      19: astore_3
      20: new           #28                 // class java/io/File
      23: dup
      24: aload_3
      25: ldc           #184                // String appclient
      27: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      30: astore        4
      32: new           #28                 // class java/io/File
      35: dup
      36: aload_3
      37: ldc           #186                // String domain
      39: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      42: astore        5
      44: new           #28                 // class java/io/File
      47: dup
      48: aload_3
      49: ldc           #187                // String standalone
      51: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
      54: astore        6
      56: iload_2
      57: ifeq          67
      60: ldc           #34                 // String configuration
      62: astore        7
      64: goto          77
      67: getstatic     #194                // Field java/io/File.separator:Ljava/lang/String;
      70: invokedynamic #195,  0            // InvokeDynamic #1:makeConcatWithConstants:(Ljava/lang/String;)Ljava/lang/String;
      75: astore        7
      77: aload         4
      79: invokevirtual #111                // Method java/io/File.exists:()Z
      82: ifeq          112
      85: new           #28                 // class java/io/File
      88: dup
      89: aload_0
      90: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
      93: invokeinterface #181,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getAppClientDir:()Ljava/io/File;
      98: aload         7
     100: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     103: astore        8
     105: aload         4
     107: aload         8
     109: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
     112: aload         5
     114: invokevirtual #111                // Method java/io/File.exists:()Z
     117: ifeq          147
     120: new           #28                 // class java/io/File
     123: dup
     124: aload_0
     125: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
     128: invokeinterface #182,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getDomainDir:()Ljava/io/File;
     133: aload         7
     135: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     138: astore        8
     140: aload         5
     142: aload         8
     144: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
     147: aload         6
     149: invokevirtual #111                // Method java/io/File.exists:()Z
     152: ifeq          182
     155: new           #28                 // class java/io/File
     158: dup
     159: aload_0
     160: getfield      #24                 // Field installedImage:Lorg/jboss/as/patching/installation/InstalledImage;
     163: invokeinterface #183,  1          // InterfaceMethod org/jboss/as/patching/installation/InstalledImage.getStandaloneDir:()Ljava/io/File;
     168: aload         7
     170: invokespecial #31                 // Method java/io/File."<init>":(Ljava/io/File;Ljava/lang/String;)V
     173: astore        8
     175: aload         6
     177: aload         8
     179: invokestatic  #185                // Method backupDirectory:(Ljava/io/File;Ljava/io/File;)V
     182: return

  static void writePatch(org.jboss.as.patching.metadata.Patch, java.io.File) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #196                // Method java/io/File.getParentFile:()Ljava/io/File;
       4: astore_2
       5: aload_2
       6: invokevirtual #197                // Method java/io/File.isDirectory:()Z
       9: ifne          39
      12: aload_2
      13: invokevirtual #188                // Method java/io/File.mkdirs:()Z
      16: ifne          39
      19: aload_2
      20: invokevirtual #111                // Method java/io/File.exists:()Z
      23: ifne          39
      26: getstatic     #43                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      29: aload_1
      30: invokevirtual #44                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      33: invokeinterface #189,  2          // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotCreateDirectory:(Ljava/lang/String;)Ljava/io/IOException;
      38: athrow
      39: new           #198                // class java/io/FileOutputStream
      42: dup
      43: aload_1
      44: invokespecial #199                // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
      47: astore_3
      48: aload_3
      49: aload_0
      50: invokestatic  #200                // Method org/jboss/as/patching/metadata/PatchXml.marshal:(Ljava/io/OutputStream;Lorg/jboss/as/patching/metadata/Patch;)V
      53: aload_3
      54: invokevirtual #201                // Method java/io/OutputStream.close:()V
      57: goto          81
      60: astore        4
      62: aload_3
      63: invokevirtual #201                // Method java/io/OutputStream.close:()V
      66: goto          78
      69: astore        5
      71: aload         4
      73: aload         5
      75: invokevirtual #203                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
      78: aload         4
      80: athrow
      81: goto          94
      84: astore_3
      85: new           #105                // class java/io/IOException
      88: dup
      89: aload_3
      90: invokespecial #205                // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
      93: athrow
      94: return
    Exception table:
       from    to  target type
          48    53    60   Class java/lang/Throwable
          62    66    69   Class java/lang/Throwable
          39    81    84   Class javax/xml/stream/XMLStreamException

  static {};
    Code:
       0: ldc           #206                // class org/jboss/as/patching/runner/IdentityPatchContext
       2: invokevirtual #207                // Method java/lang/Class.desiredAssertionStatus:()Z
       5: ifne          12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: putstatic     #56                 // Field $assertionsDisabled:Z
      16: ldc           #206                // class org/jboss/as/patching/runner/IdentityPatchContext
      18: ldc           #117                // class org/jboss/as/patching/runner/IdentityPatchContext$State
      20: ldc           #208                // String state
      22: invokestatic  #209                // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      25: putstatic     #80                 // Field stateUpdater:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      28: new           #210                // class org/jboss/as/patching/runner/IdentityPatchContext$2
      31: dup
      32: invokespecial #211                // Method org/jboss/as/patching/runner/IdentityPatchContext$2."<init>":()V
      35: putstatic     #190                // Field CONFIG_FILTER:Ljava/io/FileFilter;
      38: return
}

Compiled from "ModuleUpdateTask.java"
class org.jboss.as.patching.runner.ModuleUpdateTask extends org.jboss.as.patching.runner.AbstractModuleTask {
  org.jboss.as.patching.runner.ModuleUpdateTask(org.jboss.as.patching.runner.PatchingTaskDescription);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method org/jboss/as/patching/runner/AbstractModuleTask."<init>":(Lorg/jboss/as/patching/runner/PatchingTaskDescription;)V
       5: return

  public boolean prepare(org.jboss.as.patching.runner.PatchingTaskContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_0
       2: aload_1
       3: invokevirtual #2                  // Method backup:(Lorg/jboss/as/patching/runner/PatchingTaskContext;)[B
       6: putfield      #3                  // Field backupHash:[B
       9: aload_0
      10: getfield      #4                  // Field contentItem:Lorg/jboss/as/patching/metadata/ContentItem;
      13: checkcast     #5                  // class org/jboss/as/patching/metadata/ModuleItem
      16: invokevirtual #6                  // Method org/jboss/as/patching/metadata/ModuleItem.getContentHash:()[B
      19: astore_2
      20: aload_0
      21: getfield      #3                  // Field backupHash:[B
      24: aload_2
      25: invokestatic  #7                  // Method java/util/Arrays.equals:([B[B)Z
      28: ifeq          33
      31: iconst_1
      32: ireturn
      33: aload_0
      34: getfield      #8                  // Field description:Lorg/jboss/as/patching/runner/PatchingTaskDescription;
      37: invokevirtual #9                  // Method org/jboss/as/patching/runner/PatchingTaskDescription.getModification:()Lorg/jboss/as/patching/metadata/ContentModification;
      40: invokevirtual #10                 // Method org/jboss/as/patching/metadata/ContentModification.getTargetHash:()[B
      43: astore_3
      44: aload_0
      45: getfield      #3                  // Field backupHash:[B
      48: aload_3
      49: invokestatic  #7                  // Method java/util/Arrays.equals:([B[B)Z
      52: ifeq          71
      55: aload_0
      56: getfield      #8                  // Field description:Lorg/jboss/as/patching/runner/PatchingTaskDescription;
      59: invokevirtual #11                 // Method org/jboss/as/patching/runner/PatchingTaskDescription.hasConflicts:()Z
      62: ifne          69
      65: iconst_1
      66: goto          70
      69: iconst_0
      70: ireturn
      71: iconst_0
      72: ireturn

  byte[] apply(org.jboss.as.patching.runner.PatchingTaskContext, org.jboss.as.patching.runner.PatchContentLoader) throws java.io.IOException;
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #4                  // Field contentItem:Lorg/jboss/as/patching/metadata/ContentItem;
       5: invokeinterface #12,  2           // InterfaceMethod org/jboss/as/patching/runner/PatchingTaskContext.getTargetFile:(Lorg/jboss/as/patching/metadata/ContentItem;)Ljava/io/File;
      10: astore_3
      11: aload_2
      12: aload_0
      13: getfield      #4                  // Field contentItem:Lorg/jboss/as/patching/metadata/ContentItem;
      16: invokevirtual #13                 // Method org/jboss/as/patching/runner/PatchContentLoader.getFile:(Lorg/jboss/as/patching/metadata/ContentItem;)Ljava/io/File;
      19: astore        4
      21: aload         4
      23: invokevirtual #14                 // Method java/io/File.exists:()Z
      26: ifeq          38
      29: aload         4
      31: aload_3
      32: invokestatic  #15                 // Method org/jboss/as/patching/IoUtils.copyFile:(Ljava/io/File;Ljava/io/File;)V
      35: goto          115
      38: aload_3
      39: invokevirtual #14                 // Method java/io/File.exists:()Z
      42: ifne          65
      45: aload_3
      46: invokevirtual #16                 // Method java/io/File.mkdirs:()Z
      49: ifne          65
      52: getstatic     #17                 // Field org/jboss/as/patching/logging/PatchLogger.ROOT_LOGGER:Lorg/jboss/as/patching/logging/PatchLogger;
      55: aload_3
      56: invokevirtual #18                 // Method java/io/File.getAbsolutePath:()Ljava/lang/String;
      59: invokeinterface #19,  2           // InterfaceMethod org/jboss/as/patching/logging/PatchLogger.cannotCreateDirectory:(Ljava/lang/String;)Ljava/io/IOException;
      64: athrow
      65: aload_3
      66: invokevirtual #20                 // Method java/io/File.toPath:()Ljava/nio/file/Path;
      69: ldc           #22                 // String module.xml
      71: invokeinterface #23,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      76: astore        5
      78: new           #24                 // class java/io/ByteArrayInputStream
      81: dup
      82: aload_0
      83: getfield      #4                  // Field contentItem:Lorg/jboss/as/patching/metadata/ContentItem;
      86: checkcast     #5                  // class org/jboss/as/patching/metadata/ModuleItem
      89: invokestatic  #25                 // Method org/jboss/as/patching/runner/PatchUtils.getAbsentModuleContent:(Lorg/jboss/as/patching/metadata/ModuleItem;)[B
      92: invokespecial #26                 // Method java/io/ByteArrayInputStream."<init>":([B)V
      95: astore        6
      97: aload         6
      99: aload         5
     101: iconst_1
     102: anewarray     #27                 // class java/nio/file/CopyOption
     105: dup
     106: iconst_0
     107: getstatic     #28                 // Field java/nio/file/StandardCopyOption.REPLACE_EXISTING:Ljava/nio/file/StandardCopyOption;
     110: aastore
     111: invokestatic  #29                 // Method java/nio/file/Files.copy:(Ljava/io/InputStream;Ljava/nio/file/Path;[Ljava/nio/file/CopyOption;)J
     114: pop2
     115: aload_3
     116: invokestatic  #30                 // Method org/jboss/as/patching/HashUtils.hashFile:(Ljava/io/File;)[B
     119: areturn

  org.jboss.as.patching.metadata.ContentModification createRollbackEntry(org.jboss.as.patching.metadata.ContentModification, byte[], byte[]);
    Code:
       0: aload_0
       1: getfield      #4                  // Field contentItem:Lorg/jboss/as/patching/metadata/ContentItem;
       4: checkcast     #5                  // class org/jboss/as/patching/metadata/ModuleItem
       7: aload_3
       8: invokestatic  #31                 // Method createContentItem:(Lorg/jboss/as/patching/metadata/ModuleItem;[B)Lorg/jboss/as/patching/metadata/ModuleItem;
      11: astore        4
      13: aload_1
      14: invokevirtual #32                 // Method org/jboss/as/patching/metadata/ContentModification.getType:()Lorg/jboss/as/patching/metadata/ModificationType;
      17: getstatic     #33                 // Field org/jboss/as/patching/metadata/ModificationType.MODIFY:Lorg/jboss/as/patching/metadata/ModificationType;
      20: if_acmpeq     36
      23: aload_3
      24: arraylength
      25: ifne          36
      28: getstatic     #34                 // Field org/jboss/as/patching/metadata/ModificationType.REMOVE:Lorg/jboss/as/patching/metadata/ModificationType;
      31: astore        5
      33: goto          41
      36: getstatic     #33                 // Field org/jboss/as/patching/metadata/ModificationType.MODIFY:Lorg/jboss/as/patching/metadata/ModificationType;
      39: astore        5
      41: new           #35                 // class org/jboss/as/patching/metadata/ContentModification
      44: dup
      45: aload         4
      47: aload_2
      48: aload         5
      50: aload_1
      51: invokevirtual #36                 // Method org/jboss/as/patching/metadata/ContentModification.getCondition:()Lorg/jboss/as/patching/metadata/ModificationCondition;
      54: invokespecial #37                 // Method org/jboss/as/patching/metadata/ContentModification."<init>":(Lorg/jboss/as/patching/metadata/ContentItem;[BLorg/jboss/as/patching/metadata/ModificationType;Lorg/jboss/as/patching/metadata/ModificationCondition;)V
      57: areturn
}

Compiled from "DeflatingStreamSinkConduit.java"
public class io.undertow.conduits.DeflatingStreamSinkConduit implements org.xnio.conduits.StreamSinkConduit {
  protected final java.util.zip.Deflater deflater;

  private final io.undertow.util.ConduitFactory<org.xnio.conduits.StreamSinkConduit> conduitFactory;

  private final io.undertow.server.HttpServerExchange exchange;

  private org.xnio.conduits.StreamSinkConduit next;

  private org.xnio.conduits.WriteReadyHandler writeReadyHandler;

  protected io.undertow.connector.PooledByteBuffer currentBuffer;

  private java.nio.ByteBuffer additionalBuffer;

  private int state;

  private static final int SHUTDOWN;

  private static final int NEXT_SHUTDOWN;

  private static final int FLUSHING_BUFFER;

  private static final int WRITES_RESUMED;

  private static final int CLOSED;

  private static final int WRITTEN_TRAILER;

  public io.undertow.conduits.DeflatingStreamSinkConduit(io.undertow.util.ConduitFactory<org.xnio.conduits.StreamSinkConduit>, io.undertow.server.HttpServerExchange);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: bipush        8
       5: invokespecial #5                  // Method "<init>":(Lio/undertow/util/ConduitFactory;Lio/undertow/server/HttpServerExchange;I)V
       8: return

  protected io.undertow.conduits.DeflatingStreamSinkConduit(io.undertow.util.ConduitFactory<org.xnio.conduits.StreamSinkConduit>, io.undertow.server.HttpServerExchange, int);
    Code:
       0: aload_0
       1: invokespecial #6                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #7                  // Field state:I
       9: aload_0
      10: new           #4                  // class java/util/zip/Deflater
      13: dup
      14: iload_3
      15: iconst_1
      16: invokespecial #8                  // Method java/util/zip/Deflater."<init>":(IZ)V
      19: putfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      22: aload_0
      23: aload_2
      24: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
      27: invokevirtual #11                 // Method io/undertow/server/ServerConnection.getByteBufferPool:()Lio/undertow/connector/ByteBufferPool;
      30: invokeinterface #12,  1           // InterfaceMethod io/undertow/connector/ByteBufferPool.allocate:()Lio/undertow/connector/PooledByteBuffer;
      35: putfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      38: aload_0
      39: aload_2
      40: putfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
      43: aload_0
      44: aload_1
      45: putfield      #15                 // Field conduitFactory:Lio/undertow/util/ConduitFactory;
      48: return

  public int write(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: bipush        17
       6: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       9: ifne          19
      12: aload_0
      13: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      16: ifnonnull     27
      19: new           #18                 // class java/nio/channels/ClosedChannelException
      22: dup
      23: invokespecial #19                 // Method java/nio/channels/ClosedChannelException."<init>":()V
      26: athrow
      27: aload_0
      28: invokespecial #20                 // Method performFlushIfRequired:()Z
      31: ifne          36
      34: iconst_0
      35: ireturn
      36: aload_1
      37: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      40: ifne          45
      43: iconst_0
      44: ireturn
      45: aload_0
      46: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      49: invokevirtual #22                 // Method java/util/zip/Deflater.needsInput:()Z
      52: ifne          71
      55: aload_0
      56: invokespecial #23                 // Method deflateData:()V
      59: aload_0
      60: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      63: invokevirtual #22                 // Method java/util/zip/Deflater.needsInput:()Z
      66: ifne          71
      69: iconst_0
      70: ireturn
      71: aload_1
      72: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      75: newarray       byte
      77: astore_2
      78: aload_1
      79: aload_2
      80: invokevirtual #24                 // Method java/nio/ByteBuffer.get:([B)Ljava/nio/ByteBuffer;
      83: pop
      84: aload_0
      85: aload_2
      86: invokevirtual #25                 // Method preDeflate:([B)V
      89: aload_0
      90: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      93: aload_2
      94: invokevirtual #26                 // Method java/util/zip/Deflater.setInput:([B)V
      97: aload_0
      98: invokespecial #23                 // Method deflateData:()V
     101: aload_2
     102: arraylength
     103: ireturn
     104: astore_2
     105: aload_0
     106: invokespecial #28                 // Method freeBuffer:()V
     109: aload_2
     110: athrow
    Exception table:
       from    to  target type
          27    35   104   Class java/io/IOException
          36    44   104   Class java/io/IOException
          45    70   104   Class java/io/IOException
          71   103   104   Class java/io/IOException

  protected void preDeflate(byte[]);
    Code:
       0: return

  public long write(java.nio.ByteBuffer[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: bipush        17
       6: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       9: ifne          19
      12: aload_0
      13: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      16: ifnonnull     27
      19: new           #18                 // class java/nio/channels/ClosedChannelException
      22: dup
      23: invokespecial #19                 // Method java/nio/channels/ClosedChannelException."<init>":()V
      26: athrow
      27: iconst_0
      28: istore        4
      30: iload_2
      31: istore        5
      33: iload         5
      35: iload_2
      36: iload_3
      37: iadd
      38: if_icmpge     83
      41: aload_1
      42: iload         5
      44: aaload
      45: invokevirtual #29                 // Method java/nio/ByteBuffer.hasRemaining:()Z
      48: ifeq          77
      51: aload_0
      52: aload_1
      53: iload         5
      55: aaload
      56: invokevirtual #30                 // Method write:(Ljava/nio/ByteBuffer;)I
      59: istore        6
      61: iload         4
      63: iload         6
      65: iadd
      66: istore        4
      68: iload         6
      70: ifne          77
      73: iload         4
      75: i2l
      76: lreturn
      77: iinc          5, 1
      80: goto          33
      83: iload         4
      85: i2l
      86: lreturn
      87: astore        4
      89: aload_0
      90: invokespecial #28                 // Method freeBuffer:()V
      93: aload         4
      95: athrow
    Exception table:
       from    to  target type
          27    76    87   Class java/io/IOException
          77    86    87   Class java/io/IOException

  public int writeFinal(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: invokestatic  #31                 // Method org/xnio/conduits/Conduits.writeFinalBasic:(Lorg/xnio/conduits/StreamSinkConduit;Ljava/nio/ByteBuffer;)I
       5: ireturn

  public long writeFinal(java.nio.ByteBuffer[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: iload_3
       4: invokestatic  #32                 // Method org/xnio/conduits/Conduits.writeFinalBasic:(Lorg/xnio/conduits/StreamSinkConduit;[Ljava/nio/ByteBuffer;II)J
       7: lreturn

  public long transferFrom(java.nio.channels.FileChannel, long, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: bipush        17
       6: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       9: ifeq          20
      12: new           #18                 // class java/nio/channels/ClosedChannelException
      15: dup
      16: invokespecial #19                 // Method java/nio/channels/ClosedChannelException."<init>":()V
      19: athrow
      20: aload_0
      21: invokespecial #20                 // Method performFlushIfRequired:()Z
      24: ifne          29
      27: lconst_0
      28: lreturn
      29: aload_1
      30: lload_2
      31: lload         4
      33: new           #33                 // class org/xnio/conduits/ConduitWritableByteChannel
      36: dup
      37: aload_0
      38: invokespecial #34                 // Method org/xnio/conduits/ConduitWritableByteChannel."<init>":(Lorg/xnio/conduits/StreamSinkConduit;)V
      41: invokevirtual #35                 // Method java/nio/channels/FileChannel.transferTo:(JJLjava/nio/channels/WritableByteChannel;)J
      44: lreturn

  public long transferFrom(org.xnio.channels.StreamSourceChannel, long, java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: bipush        17
       6: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       9: ifeq          20
      12: new           #18                 // class java/nio/channels/ClosedChannelException
      15: dup
      16: invokespecial #19                 // Method java/nio/channels/ClosedChannelException."<init>":()V
      19: athrow
      20: aload_0
      21: invokespecial #20                 // Method performFlushIfRequired:()Z
      24: ifne          29
      27: lconst_0
      28: lreturn
      29: aload_1
      30: lload_2
      31: aload         4
      33: new           #33                 // class org/xnio/conduits/ConduitWritableByteChannel
      36: dup
      37: aload_0
      38: invokespecial #34                 // Method org/xnio/conduits/ConduitWritableByteChannel."<init>":(Lorg/xnio/conduits/StreamSinkConduit;)V
      41: invokestatic  #36                 // Method org/xnio/IoUtils.transfer:(Ljava/nio/channels/ReadableByteChannel;JLjava/nio/ByteBuffer;Ljava/nio/channels/WritableByteChannel;)J
      44: lreturn

  public org.xnio.XnioWorker getWorker();
    Code:
       0: aload_0
       1: getfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
       4: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
       7: invokevirtual #37                 // Method io/undertow/server/ServerConnection.getWorker:()Lorg/xnio/XnioWorker;
      10: areturn

  public void suspendWrites();
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     21
       7: aload_0
       8: aload_0
       9: getfield      #7                  // Field state:I
      12: bipush        -9
      14: iand
      15: putfield      #7                  // Field state:I
      18: goto          30
      21: aload_0
      22: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      25: invokeinterface #38,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.suspendWrites:()V
      30: return

  public boolean isWriteResumed();
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     17
       7: aload_0
       8: getfield      #7                  // Field state:I
      11: bipush        8
      13: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      16: ireturn
      17: aload_0
      18: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      21: invokeinterface #39,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.isWriteResumed:()Z
      26: ireturn

  public void wakeupWrites();
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     14
       7: aload_0
       8: invokevirtual #40                 // Method resumeWrites:()V
      11: goto          23
      14: aload_0
      15: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      18: invokeinterface #41,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.wakeupWrites:()V
      23: return

  public void resumeWrites();
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     25
       7: aload_0
       8: dup
       9: getfield      #7                  // Field state:I
      12: bipush        8
      14: ior
      15: putfield      #7                  // Field state:I
      18: aload_0
      19: invokespecial #1                  // Method queueWriteListener:()V
      22: goto          34
      25: aload_0
      26: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      29: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
      34: return

  private void queueWriteListener();
    Code:
       0: aload_0
       1: getfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
       4: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
       7: invokevirtual #43                 // Method io/undertow/server/ServerConnection.getIoThread:()Lorg/xnio/XnioIoThread;
      10: new           #44                 // class io/undertow/conduits/DeflatingStreamSinkConduit$1
      13: dup
      14: aload_0
      15: invokespecial #45                 // Method io/undertow/conduits/DeflatingStreamSinkConduit$1."<init>":(Lio/undertow/conduits/DeflatingStreamSinkConduit;)V
      18: invokevirtual #46                 // Method org/xnio/XnioIoThread.execute:(Ljava/lang/Runnable;)V
      21: return

  public void terminateWrites() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
       4: invokevirtual #47                 // Method java/util/zip/Deflater.finish:()V
       7: aload_0
       8: dup
       9: getfield      #7                  // Field state:I
      12: iconst_1
      13: ior
      14: putfield      #7                  // Field state:I
      17: return

  public boolean isWriteShutdown();
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: iconst_1
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ireturn

  public void awaitWritable() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     8
       7: return
       8: aload_0
       9: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      12: invokeinterface #48,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.awaitWritable:()V
      17: return

  public void awaitWritable(long, java.util.concurrent.TimeUnit) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: ifnonnull     8
       7: return
       8: aload_0
       9: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      12: lload_1
      13: aload_3
      14: invokeinterface #49,  4           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.awaitWritable:(JLjava/util/concurrent/TimeUnit;)V
      19: return

  public org.xnio.XnioIoThread getWriteThread();
    Code:
       0: aload_0
       1: getfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
       4: invokevirtual #10                 // Method io/undertow/server/HttpServerExchange.getConnection:()Lio/undertow/server/ServerConnection;
       7: invokevirtual #43                 // Method io/undertow/server/ServerConnection.getIoThread:()Lorg/xnio/XnioIoThread;
      10: areturn

  public void setWriteReadyHandler(org.xnio.conduits.WriteReadyHandler);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field writeReadyHandler:Lorg/xnio/conduits/WriteReadyHandler;
       5: return

  public boolean flush() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
       4: ifnonnull     30
       7: aload_0
       8: getfield      #7                  // Field state:I
      11: iconst_2
      12: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      15: ifeq          28
      18: aload_0
      19: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      22: invokeinterface #50,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.flush:()Z
      27: ireturn
      28: iconst_1
      29: ireturn
      30: iconst_0
      31: istore_1
      32: aload_0
      33: getfield      #7                  // Field state:I
      36: iconst_1
      37: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      40: ifeq          681
      43: aload_0
      44: getfield      #7                  // Field state:I
      47: iconst_2
      48: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      51: ifeq          117
      54: aload_0
      55: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      58: invokeinterface #50,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.flush:()Z
      63: istore_2
      64: iload_1
      65: ifeq          115
      68: aload_0
      69: getfield      #7                  // Field state:I
      72: bipush        8
      74: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      77: ifeq          115
      80: aload_0
      81: getfield      #7                  // Field state:I
      84: iconst_2
      85: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      88: ifne          115
      91: aload_0
      92: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      95: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     100: goto          115
     103: astore_3
     104: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     107: ldc           #53                 // String Failed to resume
     109: aload_3
     110: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     115: iload_2
     116: ireturn
     117: aload_0
     118: invokespecial #20                 // Method performFlushIfRequired:()Z
     121: ifne          179
     124: iconst_0
     125: istore_2
     126: iload_1
     127: ifeq          177
     130: aload_0
     131: getfield      #7                  // Field state:I
     134: bipush        8
     136: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     139: ifeq          177
     142: aload_0
     143: getfield      #7                  // Field state:I
     146: iconst_2
     147: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     150: ifne          177
     153: aload_0
     154: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     157: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     162: goto          177
     165: astore_3
     166: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     169: ldc           #53                 // String Failed to resume
     171: aload_3
     172: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     177: iload_2
     178: ireturn
     179: aload_0
     180: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
     183: invokevirtual #55                 // Method java/util/zip/Deflater.finished:()Z
     186: ifne          258
     189: aload_0
     190: invokespecial #23                 // Method deflateData:()V
     193: aload_0
     194: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
     197: invokevirtual #55                 // Method java/util/zip/Deflater.finished:()Z
     200: ifne          258
     203: iconst_0
     204: istore_2
     205: iload_1
     206: ifeq          256
     209: aload_0
     210: getfield      #7                  // Field state:I
     213: bipush        8
     215: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     218: ifeq          256
     221: aload_0
     222: getfield      #7                  // Field state:I
     225: iconst_2
     226: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     229: ifne          256
     232: aload_0
     233: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     236: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     241: goto          256
     244: astore_3
     245: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     248: ldc           #53                 // String Failed to resume
     250: aload_3
     251: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     256: iload_2
     257: ireturn
     258: aload_0
     259: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
     262: invokeinterface #56,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.getBuffer:()Ljava/nio/ByteBuffer;
     267: astore_2
     268: aload_0
     269: getfield      #7                  // Field state:I
     272: bipush        32
     274: invokestatic  #57                 // Method org/xnio/Bits.allAreClear:(II)Z
     277: ifeq          486
     280: aload_0
     281: dup
     282: getfield      #7                  // Field state:I
     285: bipush        32
     287: ior
     288: putfield      #7                  // Field state:I
     291: aload_0
     292: invokevirtual #58                 // Method getTrailer:()[B
     295: astore_3
     296: aload_3
     297: ifnull        486
     300: aload_0
     301: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     304: ifnull        405
     307: aload_0
     308: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     311: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
     314: aload_3
     315: arraylength
     316: iadd
     317: newarray       byte
     319: astore        4
     321: iconst_0
     322: istore        5
     324: aload_0
     325: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     328: invokevirtual #29                 // Method java/nio/ByteBuffer.hasRemaining:()Z
     331: ifeq          352
     334: aload         4
     336: iload         5
     338: iinc          5, 1
     341: aload_0
     342: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     345: invokevirtual #60                 // Method java/nio/ByteBuffer.get:()B
     348: bastore
     349: goto          324
     352: aload_3
     353: astore        6
     355: aload         6
     357: arraylength
     358: istore        7
     360: iconst_0
     361: istore        8
     363: iload         8
     365: iload         7
     367: if_icmpge     393
     370: aload         6
     372: iload         8
     374: baload
     375: istore        9
     377: aload         4
     379: iload         5
     381: iinc          5, 1
     384: iload         9
     386: bastore
     387: iinc          8, 1
     390: goto          363
     393: aload_0
     394: aload         4
     396: invokestatic  #61                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     399: putfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     402: goto          486
     405: aload_0
     406: getfield      #7                  // Field state:I
     409: iconst_4
     410: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     413: ifeq          449
     416: aload_2
     417: invokevirtual #62                 // Method java/nio/ByteBuffer.capacity:()I
     420: aload_2
     421: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
     424: isub
     425: aload_3
     426: arraylength
     427: if_icmplt     449
     430: aload_2
     431: invokevirtual #63                 // Method java/nio/ByteBuffer.compact:()Ljava/nio/ByteBuffer;
     434: pop
     435: aload_2
     436: aload_3
     437: invokevirtual #64                 // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
     440: pop
     441: aload_2
     442: invokevirtual #65                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     445: pop
     446: goto          486
     449: aload_3
     450: arraylength
     451: aload_2
     452: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
     455: if_icmpgt     478
     458: aload_0
     459: getfield      #7                  // Field state:I
     462: iconst_4
     463: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     466: ifne          478
     469: aload_2
     470: aload_3
     471: invokevirtual #64                 // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
     474: pop
     475: goto          486
     478: aload_0
     479: aload_3
     480: invokestatic  #61                 // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     483: putfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     486: aload_0
     487: getfield      #7                  // Field state:I
     490: iconst_4
     491: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     494: ifne          529
     497: aload_2
     498: invokevirtual #65                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     501: pop
     502: aload_0
     503: dup
     504: getfield      #7                  // Field state:I
     507: iconst_4
     508: ior
     509: putfield      #7                  // Field state:I
     512: aload_0
     513: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     516: ifnonnull     529
     519: iconst_1
     520: istore_1
     521: aload_0
     522: aload_0
     523: invokespecial #66                 // Method createNextChannel:()Lorg/xnio/conduits/StreamSinkConduit;
     526: putfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     529: aload_0
     530: invokespecial #20                 // Method performFlushIfRequired:()Z
     533: ifeq          624
     536: aload_0
     537: dup
     538: getfield      #7                  // Field state:I
     541: iconst_2
     542: ior
     543: putfield      #7                  // Field state:I
     546: aload_0
     547: invokespecial #28                 // Method freeBuffer:()V
     550: aload_0
     551: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     554: invokeinterface #67,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.terminateWrites:()V
     559: aload_0
     560: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     563: invokeinterface #50,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.flush:()Z
     568: istore_3
     569: iload_1
     570: ifeq          622
     573: aload_0
     574: getfield      #7                  // Field state:I
     577: bipush        8
     579: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     582: ifeq          622
     585: aload_0
     586: getfield      #7                  // Field state:I
     589: iconst_2
     590: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     593: ifne          622
     596: aload_0
     597: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     600: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     605: goto          622
     608: astore        4
     610: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     613: ldc           #53                 // String Failed to resume
     615: aload         4
     617: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     622: iload_3
     623: ireturn
     624: iconst_0
     625: istore_3
     626: iload_1
     627: ifeq          679
     630: aload_0
     631: getfield      #7                  // Field state:I
     634: bipush        8
     636: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     639: ifeq          679
     642: aload_0
     643: getfield      #7                  // Field state:I
     646: iconst_2
     647: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     650: ifne          679
     653: aload_0
     654: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     657: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     662: goto          679
     665: astore        4
     667: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     670: ldc           #53                 // String Failed to resume
     672: aload         4
     674: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     679: iload_3
     680: ireturn
     681: aload_0
     682: invokespecial #20                 // Method performFlushIfRequired:()Z
     685: istore_2
     686: iload_1
     687: ifeq          737
     690: aload_0
     691: getfield      #7                  // Field state:I
     694: bipush        8
     696: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     699: ifeq          737
     702: aload_0
     703: getfield      #7                  // Field state:I
     706: iconst_2
     707: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     710: ifne          737
     713: aload_0
     714: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     717: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     722: goto          737
     725: astore_3
     726: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     729: ldc           #53                 // String Failed to resume
     731: aload_3
     732: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     737: iload_2
     738: ireturn
     739: astore        10
     741: iload_1
     742: ifeq          794
     745: aload_0
     746: getfield      #7                  // Field state:I
     749: bipush        8
     751: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     754: ifeq          794
     757: aload_0
     758: getfield      #7                  // Field state:I
     761: iconst_2
     762: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     765: ifne          794
     768: aload_0
     769: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     772: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     777: goto          794
     780: astore        11
     782: getstatic     #52                 // Field io/undertow/UndertowLogger.REQUEST_LOGGER:Lio/undertow/UndertowLogger;
     785: ldc           #53                 // String Failed to resume
     787: aload         11
     789: invokeinterface #54,  3           // InterfaceMethod io/undertow/UndertowLogger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     794: aload         10
     796: athrow
     797: astore_1
     798: aload_0
     799: invokespecial #28                 // Method freeBuffer:()V
     802: aload_1
     803: athrow
    Exception table:
       from    to  target type
          91   100   103   Class java/lang/Exception
         153   162   165   Class java/lang/Exception
         232   241   244   Class java/lang/Exception
         596   605   608   Class java/lang/Exception
         653   662   665   Class java/lang/Exception
         713   722   725   Class java/lang/Exception
          32    64   739   any
         117   126   739   any
         179   205   739   any
         258   569   739   any
         624   626   739   any
         681   686   739   any
         768   777   780   Class java/lang/Exception
         739   741   739   any
          30   115   797   Class java/io/IOException
         117   177   797   Class java/io/IOException
         179   256   797   Class java/io/IOException
         258   622   797   Class java/io/IOException
         624   679   797   Class java/io/IOException
         681   737   797   Class java/io/IOException
         739   797   797   Class java/io/IOException

  protected byte[] getTrailer();
    Code:
       0: aconst_null
       1: areturn

  private boolean performFlushIfRequired() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #7                  // Field state:I
       4: iconst_4
       5: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
       8: ifeq          154
      11: aload_0
      12: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
      15: ifnonnull     22
      18: iconst_1
      19: goto          23
      22: iconst_2
      23: anewarray     #68                 // class java/nio/ByteBuffer
      26: astore_1
      27: lconst_0
      28: lstore_2
      29: aload_1
      30: iconst_0
      31: aload_0
      32: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      35: invokeinterface #56,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.getBuffer:()Ljava/nio/ByteBuffer;
      40: aastore
      41: lload_2
      42: aload_1
      43: iconst_0
      44: aaload
      45: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      48: i2l
      49: ladd
      50: lstore_2
      51: aload_0
      52: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
      55: ifnull        75
      58: aload_1
      59: iconst_1
      60: aload_0
      61: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
      64: aastore
      65: lload_2
      66: aload_1
      67: iconst_1
      68: aaload
      69: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      72: i2l
      73: ladd
      74: lstore_2
      75: lload_2
      76: lconst_0
      77: lcmp
      78: ifle          125
      81: lconst_0
      82: lstore        4
      84: lconst_0
      85: lstore        6
      87: aload_0
      88: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      91: aload_1
      92: iconst_0
      93: aload_1
      94: arraylength
      95: invokeinterface #69,  4           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.write:([Ljava/nio/ByteBuffer;II)J
     100: lstore        6
     102: lload         4
     104: lload         6
     106: ladd
     107: lstore        4
     109: lload         6
     111: lconst_0
     112: lcmp
     113: ifne          118
     116: iconst_0
     117: ireturn
     118: lload         4
     120: lload_2
     121: lcmp
     122: iflt          87
     125: aload_0
     126: aconst_null
     127: putfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     130: aload_0
     131: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
     134: invokeinterface #56,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.getBuffer:()Ljava/nio/ByteBuffer;
     139: invokevirtual #70                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     142: pop
     143: aload_0
     144: aload_0
     145: getfield      #7                  // Field state:I
     148: bipush        -5
     150: iand
     151: putfield      #7                  // Field state:I
     154: iconst_1
     155: ireturn

  private org.xnio.conduits.StreamSinkConduit createNextChannel();
    Code:
       0: aload_0
       1: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
       4: invokevirtual #55                 // Method java/util/zip/Deflater.finished:()Z
       7: ifeq          73
      10: aload_0
      11: getfield      #7                  // Field state:I
      14: bipush        32
      16: invokestatic  #71                 // Method org/xnio/Bits.allAreSet:(II)Z
      19: ifeq          73
      22: aload_0
      23: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      26: invokeinterface #56,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.getBuffer:()Ljava/nio/ByteBuffer;
      31: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      34: istore_1
      35: aload_0
      36: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
      39: ifnull        52
      42: iload_1
      43: aload_0
      44: getfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
      47: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      50: iadd
      51: istore_1
      52: aload_0
      53: getfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
      56: invokevirtual #72                 // Method io/undertow/server/HttpServerExchange.getResponseHeaders:()Lio/undertow/util/HeaderMap;
      59: getstatic     #73                 // Field io/undertow/util/Headers.CONTENT_LENGTH:Lio/undertow/util/HttpString;
      62: iload_1
      63: invokestatic  #74                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
      66: invokevirtual #75                 // Method io/undertow/util/HeaderMap.put:(Lio/undertow/util/HttpString;Ljava/lang/String;)Lio/undertow/util/HeaderMap;
      69: pop
      70: goto          87
      73: aload_0
      74: getfield      #14                 // Field exchange:Lio/undertow/server/HttpServerExchange;
      77: invokevirtual #72                 // Method io/undertow/server/HttpServerExchange.getResponseHeaders:()Lio/undertow/util/HeaderMap;
      80: getstatic     #73                 // Field io/undertow/util/Headers.CONTENT_LENGTH:Lio/undertow/util/HttpString;
      83: invokevirtual #76                 // Method io/undertow/util/HeaderMap.remove:(Lio/undertow/util/HttpString;)Ljava/util/Collection;
      86: pop
      87: aload_0
      88: getfield      #15                 // Field conduitFactory:Lio/undertow/util/ConduitFactory;
      91: invokeinterface #77,  1           // InterfaceMethod io/undertow/util/ConduitFactory.create:()Lorg/xnio/conduits/Conduit;
      96: checkcast     #78                 // class org/xnio/conduits/StreamSinkConduit
      99: areturn

  private void deflateData() throws java.io.IOException;
    Code:
       0: iconst_0
       1: istore_1
       2: aload_0
       3: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
       6: astore_2
       7: aload_2
       8: invokeinterface #56,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.getBuffer:()Ljava/nio/ByteBuffer;
      13: astore_3
      14: aload_0
      15: getfield      #7                  // Field state:I
      18: iconst_1
      19: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
      22: istore        4
      24: sipush        1024
      27: newarray       byte
      29: astore        5
      31: aload_0
      32: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      35: invokevirtual #22                 // Method java/util/zip/Deflater.needsInput:()Z
      38: ifeq          56
      41: iload         4
      43: ifeq          212
      46: aload_0
      47: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      50: invokevirtual #55                 // Method java/util/zip/Deflater.finished:()Z
      53: ifne          212
      56: aload_0
      57: getfield      #9                  // Field deflater:Ljava/util/zip/Deflater;
      60: aload         5
      62: invokevirtual #79                 // Method java/util/zip/Deflater.deflate:([B)I
      65: istore        6
      67: iload         6
      69: ifeq          209
      72: aload_3
      73: invokevirtual #21                 // Method java/nio/ByteBuffer.remaining:()I
      76: istore        7
      78: iload         7
      80: iload         6
      82: if_icmple     98
      85: aload_3
      86: aload         5
      88: iconst_0
      89: iload         6
      91: invokevirtual #80                 // Method java/nio/ByteBuffer.put:([BII)Ljava/nio/ByteBuffer;
      94: pop
      95: goto          209
      98: iload         7
     100: iload         6
     102: if_icmpne     118
     105: aload_3
     106: aload         5
     108: iconst_0
     109: iload         6
     111: invokevirtual #80                 // Method java/nio/ByteBuffer.put:([BII)Ljava/nio/ByteBuffer;
     114: pop
     115: goto          144
     118: aload_3
     119: aload         5
     121: iconst_0
     122: iload         7
     124: invokevirtual #80                 // Method java/nio/ByteBuffer.put:([BII)Ljava/nio/ByteBuffer;
     127: pop
     128: aload_0
     129: aload         5
     131: iload         7
     133: iload         6
     135: iload         7
     137: isub
     138: invokestatic  #81                 // Method java/nio/ByteBuffer.wrap:([BII)Ljava/nio/ByteBuffer;
     141: putfield      #59                 // Field additionalBuffer:Ljava/nio/ByteBuffer;
     144: aload_3
     145: invokevirtual #65                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     148: pop
     149: aload_0
     150: dup
     151: getfield      #7                  // Field state:I
     154: iconst_4
     155: ior
     156: putfield      #7                  // Field state:I
     159: aload_0
     160: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     163: ifnonnull     176
     166: iconst_1
     167: istore_1
     168: aload_0
     169: aload_0
     170: invokespecial #66                 // Method createNextChannel:()Lorg/xnio/conduits/StreamSinkConduit;
     173: putfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     176: aload_0
     177: invokespecial #20                 // Method performFlushIfRequired:()Z
     180: ifne          209
     183: iload_1
     184: ifeq          208
     187: aload_0
     188: getfield      #7                  // Field state:I
     191: bipush        8
     193: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     196: ifeq          208
     199: aload_0
     200: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     203: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     208: return
     209: goto          31
     212: iload_1
     213: ifeq          270
     216: aload_0
     217: getfield      #7                  // Field state:I
     220: bipush        8
     222: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     225: ifeq          270
     228: aload_0
     229: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     232: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     237: goto          270
     240: astore        8
     242: iload_1
     243: ifeq          267
     246: aload_0
     247: getfield      #7                  // Field state:I
     250: bipush        8
     252: invokestatic  #17                 // Method org/xnio/Bits.anyAreSet:(II)Z
     255: ifeq          267
     258: aload_0
     259: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
     262: invokeinterface #42,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.resumeWrites:()V
     267: aload         8
     269: athrow
     270: return
    Exception table:
       from    to  target type
           2   183   240   any
         209   212   240   any
         240   242   240   any

  public void truncateWrites() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #28                 // Method freeBuffer:()V
       4: aload_0
       5: dup
       6: getfield      #7                  // Field state:I
       9: bipush        16
      11: ior
      12: putfield      #7                  // Field state:I
      15: aload_0
      16: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
      19: invokeinterface #82,  1           // InterfaceMethod org/xnio/conduits/StreamSinkConduit.truncateWrites:()V
      24: return

  private void freeBuffer();
    Code:
       0: aload_0
       1: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
       4: ifnull        32
       7: aload_0
       8: getfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      11: invokeinterface #83,  1           // InterfaceMethod io/undertow/connector/PooledByteBuffer.close:()V
      16: aload_0
      17: aconst_null
      18: putfield      #13                 // Field currentBuffer:Lio/undertow/connector/PooledByteBuffer;
      21: aload_0
      22: aload_0
      23: getfield      #7                  // Field state:I
      26: bipush        -5
      28: iand
      29: putfield      #7                  // Field state:I
      32: return

  static org.xnio.conduits.WriteReadyHandler access$000(io.undertow.conduits.DeflatingStreamSinkConduit);
    Code:
       0: aload_0
       1: getfield      #3                  // Field writeReadyHandler:Lorg/xnio/conduits/WriteReadyHandler;
       4: areturn

  static org.xnio.conduits.StreamSinkConduit access$100(io.undertow.conduits.DeflatingStreamSinkConduit);
    Code:
       0: aload_0
       1: getfield      #2                  // Field next:Lorg/xnio/conduits/StreamSinkConduit;
       4: areturn

  static void access$200(io.undertow.conduits.DeflatingStreamSinkConduit);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method queueWriteListener:()V
       4: return
}

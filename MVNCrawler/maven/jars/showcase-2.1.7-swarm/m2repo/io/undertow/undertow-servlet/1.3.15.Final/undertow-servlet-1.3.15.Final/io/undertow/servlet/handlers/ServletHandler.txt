Compiled from "ServletHandler.java"
public class io.undertow.servlet.handlers.ServletHandler implements io.undertow.server.HttpHandler {
  private final io.undertow.servlet.core.ManagedServlet managedServlet;

  private static final java.util.concurrent.atomic.AtomicLongFieldUpdater<io.undertow.servlet.handlers.ServletHandler> unavailableUntilUpdater;

  private volatile long unavailableUntil;

  public io.undertow.servlet.handlers.ServletHandler(io.undertow.servlet.core.ManagedServlet);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: lconst_0
       6: putfield      #2                  // Field unavailableUntil:J
       9: aload_0
      10: aload_1
      11: putfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
      14: return

  public void handleRequest(io.undertow.server.HttpServerExchange) throws java.io.IOException, javax.servlet.ServletException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
       4: invokevirtual #4                  // Method io/undertow/servlet/core/ManagedServlet.isPermanentlyUnavailable:()Z
       7: ifeq          39
      10: getstatic     #5                  // Field io/undertow/servlet/UndertowServletLogger.REQUEST_LOGGER:Lio/undertow/servlet/UndertowServletLogger;
      13: ldc           #6                  // String Returning 404 for servlet %s due to permanent unavailability
      15: aload_0
      16: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
      19: invokevirtual #7                  // Method io/undertow/servlet/core/ManagedServlet.getServletInfo:()Lio/undertow/servlet/api/ServletInfo;
      22: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.getName:()Ljava/lang/String;
      25: invokeinterface #9,  3            // InterfaceMethod io/undertow/servlet/UndertowServletLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
      30: aload_1
      31: sipush        404
      34: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
      37: pop
      38: return
      39: aload_0
      40: getfield      #2                  // Field unavailableUntil:J
      43: lstore_2
      44: lload_2
      45: lconst_0
      46: lcmp
      47: ifeq          97
      50: getstatic     #5                  // Field io/undertow/servlet/UndertowServletLogger.REQUEST_LOGGER:Lio/undertow/servlet/UndertowServletLogger;
      53: ldc           #12                 // String Returning 503 for servlet %s due to temporary unavailability
      55: aload_0
      56: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
      59: invokevirtual #7                  // Method io/undertow/servlet/core/ManagedServlet.getServletInfo:()Lio/undertow/servlet/api/ServletInfo;
      62: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.getName:()Ljava/lang/String;
      65: invokeinterface #9,  3            // InterfaceMethod io/undertow/servlet/UndertowServletLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
      70: invokestatic  #13                 // Method java/lang/System.currentTimeMillis:()J
      73: lload_2
      74: lcmp
      75: ifge          87
      78: aload_1
      79: sipush        503
      82: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
      85: pop
      86: return
      87: getstatic     #14                 // Field unavailableUntilUpdater:Ljava/util/concurrent/atomic/AtomicLongFieldUpdater;
      90: aload_0
      91: lload_2
      92: lconst_0
      93: invokevirtual #15                 // Method java/util/concurrent/atomic/AtomicLongFieldUpdater.compareAndSet:(Ljava/lang/Object;JJ)Z
      96: pop
      97: aload_1
      98: getstatic     #16                 // Field io/undertow/servlet/handlers/ServletRequestContext.ATTACHMENT_KEY:Lio/undertow/util/AttachmentKey;
     101: invokevirtual #17                 // Method io/undertow/server/HttpServerExchange.getAttachment:(Lio/undertow/util/AttachmentKey;)Ljava/lang/Object;
     104: checkcast     #18                 // class io/undertow/servlet/handlers/ServletRequestContext
     107: astore        4
     109: aload_0
     110: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     113: invokevirtual #7                  // Method io/undertow/servlet/core/ManagedServlet.getServletInfo:()Lio/undertow/servlet/api/ServletInfo;
     116: invokevirtual #19                 // Method io/undertow/servlet/api/ServletInfo.isAsyncSupported:()Z
     119: ifne          128
     122: aload         4
     124: iconst_0
     125: invokevirtual #20                 // Method io/undertow/servlet/handlers/ServletRequestContext.setAsyncSupported:(Z)V
     128: aload         4
     130: invokevirtual #21                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletRequest:()Ljavax/servlet/ServletRequest;
     133: astore        5
     135: aload         4
     137: invokevirtual #22                 // Method io/undertow/servlet/handlers/ServletRequestContext.getServletResponse:()Ljavax/servlet/ServletResponse;
     140: astore        6
     142: aconst_null
     143: astore        7
     145: aload_0
     146: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     149: invokevirtual #23                 // Method io/undertow/servlet/core/ManagedServlet.getServlet:()Lio/undertow/servlet/api/InstanceHandle;
     152: astore        7
     154: aload         7
     156: invokeinterface #24,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.getInstance:()Ljava/lang/Object;
     161: checkcast     #25                 // class javax/servlet/Servlet
     164: aload         5
     166: aload         6
     168: invokeinterface #26,  3           // InterfaceMethod javax/servlet/Servlet.service:(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V
     173: aload         7
     175: ifnull        333
     178: aload         7
     180: invokeinterface #27,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.release:()V
     185: goto          333
     188: astore        8
     190: aload         8
     192: invokevirtual #29                 // Method javax/servlet/UnavailableException.isPermanent:()Z
     195: ifeq          244
     198: getstatic     #5                  // Field io/undertow/servlet/UndertowServletLogger.REQUEST_LOGGER:Lio/undertow/servlet/UndertowServletLogger;
     201: aload_0
     202: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     205: invokevirtual #7                  // Method io/undertow/servlet/core/ManagedServlet.getServletInfo:()Lio/undertow/servlet/api/ServletInfo;
     208: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.getName:()Ljava/lang/String;
     211: aload         8
     213: invokeinterface #30,  3           // InterfaceMethod io/undertow/servlet/UndertowServletLogger.stoppingServletDueToPermanentUnavailability:(Ljava/lang/String;Ljavax/servlet/UnavailableException;)V
     218: aload_0
     219: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     222: invokevirtual #31                 // Method io/undertow/servlet/core/ManagedServlet.stop:()V
     225: aload_0
     226: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     229: iconst_1
     230: invokevirtual #32                 // Method io/undertow/servlet/core/ManagedServlet.setPermanentlyUnavailable:(Z)V
     233: aload_1
     234: sipush        404
     237: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
     240: pop
     241: goto          301
     244: getstatic     #14                 // Field unavailableUntilUpdater:Ljava/util/concurrent/atomic/AtomicLongFieldUpdater;
     247: aload_0
     248: invokestatic  #13                 // Method java/lang/System.currentTimeMillis:()J
     251: aload         8
     253: invokevirtual #33                 // Method javax/servlet/UnavailableException.getUnavailableSeconds:()I
     256: sipush        1000
     259: imul
     260: i2l
     261: ladd
     262: invokevirtual #34                 // Method java/util/concurrent/atomic/AtomicLongFieldUpdater.set:(Ljava/lang/Object;J)V
     265: getstatic     #5                  // Field io/undertow/servlet/UndertowServletLogger.REQUEST_LOGGER:Lio/undertow/servlet/UndertowServletLogger;
     268: aload_0
     269: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
     272: invokevirtual #7                  // Method io/undertow/servlet/core/ManagedServlet.getServletInfo:()Lio/undertow/servlet/api/ServletInfo;
     275: invokevirtual #8                  // Method io/undertow/servlet/api/ServletInfo.getName:()Ljava/lang/String;
     278: new           #35                 // class java/util/Date
     281: dup
     282: lload_2
     283: invokespecial #36                 // Method java/util/Date."<init>":(J)V
     286: aload         8
     288: invokeinterface #37,  4           // InterfaceMethod io/undertow/servlet/UndertowServletLogger.stoppingServletUntilDueToTemporaryUnavailability:(Ljava/lang/String;Ljava/util/Date;Ljavax/servlet/UnavailableException;)V
     293: aload_1
     294: sipush        503
     297: invokevirtual #11                 // Method io/undertow/server/HttpServerExchange.setStatusCode:(I)Lio/undertow/server/HttpServerExchange;
     300: pop
     301: aload         7
     303: ifnull        333
     306: aload         7
     308: invokeinterface #27,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.release:()V
     313: goto          333
     316: astore        9
     318: aload         7
     320: ifnull        330
     323: aload         7
     325: invokeinterface #27,  1           // InterfaceMethod io/undertow/servlet/api/InstanceHandle.release:()V
     330: aload         9
     332: athrow
     333: return
    Exception table:
       from    to  target type
         145   173   188   Class javax/servlet/UnavailableException
         145   173   316   any
         188   301   316   any
         316   318   316   any

  public io.undertow.servlet.core.ManagedServlet getManagedServlet();
    Code:
       0: aload_0
       1: getfield      #3                  // Field managedServlet:Lio/undertow/servlet/core/ManagedServlet;
       4: areturn

  static {};
    Code:
       0: ldc           #38                 // class io/undertow/servlet/handlers/ServletHandler
       2: ldc           #39                 // String unavailableUntil
       4: invokestatic  #40                 // Method java/util/concurrent/atomic/AtomicLongFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicLongFieldUpdater;
       7: putstatic     #14                 // Field unavailableUntilUpdater:Ljava/util/concurrent/atomic/AtomicLongFieldUpdater;
      10: return
}

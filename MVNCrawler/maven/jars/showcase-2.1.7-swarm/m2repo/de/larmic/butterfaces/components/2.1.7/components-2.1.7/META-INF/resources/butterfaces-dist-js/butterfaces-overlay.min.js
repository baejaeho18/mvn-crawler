var ButterFaces;!function(e){var a=function(){function a(e,a,t){void 0===e&&(e=500),void 0===a&&(a=!0),void 0===t&&(t="body"),this.isHiding=!0,this.delay=e,this.isTransparentBlockingOverlayActive=a,this.selector=t,console.log("ButterFaces.Overlay.constructor - creating overlay with delay is "+this.delay+", isTransparentBlockingOverlayActive is "+this.isTransparentBlockingOverlayActive+", selector is "+this.selector)}return a.prototype.show=function(){var a=this,t=$(this.selector);e.Overlay.fadeOutDetachtedOverlays(),t.each(function(t,r){var o=$(r);if(a.isHiding=!1,void 0!==o.attr("data-overlay-uuid")){if(e.Overlay.findOverlay(o.attr("data-overlay-uuid")).length>0)return void console.log("ButterFaces.Overlay.show - overlay already existing. Skip showing overlay");o.removeAttr("data-overlay-uuid")}console.log("ButterFaces.Overlay.show - appending not displayed overlay to body");var i=e.Guid.newGuid(),n=$('<div class="butter-component-overlay" data-overlay-uuid="'+i+'"><div class="butter-component-spinner"><div></div><div></div><div></div><div></div></div></div>');o.attr("data-overlay-uuid",i),"body"===a.selector?n.addClass("overlay-body"):n.offset(o.offset()).width(o.outerWidth()).height(o.outerHeight()).addClass("overlay-body-child").css({position:"absolute"}),$("body").append(n),a.isTransparentBlockingOverlayActive&&(console.log("ButterFaces.Overlay.show - isTransparentBlockingOverlayActive is true, showing transparent overlay direcly"),n.show()),window.setTimeout(function(){a.isHiding||a.isTransparentBlockingOverlayActive||(console.log("ButterFaces.Overlay.show - deferred: isTransparentBlockingOverlayActive is false, showing transparent overlay after delay"),n.show()),a.isHiding||(console.log("ButterFaces.Overlay.show - deferred: starting animation to make overlay intransparent"),n.stop(!0).animate({opacity:1},300,function(){console.log("ButterFaces.Overlay.show - deferred: animation ended to make overlay intransparent")}))},a.delay)})},a.prototype.hide=function(){console.log("ButterFaces.Overlay.hide - starting animation to make overlay transparent");var a=$(this.selector);this.isHiding=!0,e.Overlay.fadeOutDetachtedOverlays(),a.each(function(a,t){var r=$(t),o=r.attr("data-overlay-uuid");if(void 0!==o&&e.Overlay.findOverlay(o).length>0){var i=e.Overlay.findOverlay(r.attr("data-overlay-uuid"));e.Overlay.fadeOutOverlay(i)}})},a.hideAll=function(){console.log("ButterFaces.Overlay.hideAll - starting animation to make all overlays transparent"),e.Overlay.fadeOutDetachtedOverlays(),e.Overlay.fadeOutAttachtedOverlays()},a.fadeOutDetachtedOverlays=function(){$(".butter-component-overlay").each(function(a,t){var r=$(t),o=$(t).attr("data-overlay-uuid");1==$("[data-overlay-uuid="+o+"]").length&&e.Overlay.fadeOutOverlay(r)})},a.fadeOutAttachtedOverlays=function(){$(".butter-component-overlay").each(function(a,t){var r=$(t),o=$(t).attr("data-overlay-uuid"),i=$("[data-overlay-uuid="+o+"]");i.length>1&&(e.Overlay.fadeOutOverlay(r),i.each(function(e,a){var t=$(a);t.removeAttr("data-overlay-uuid")}))})},a.fadeOutOverlay=function(e){e.stop(!0).animate({opacity:0},300,function(){e.remove(),console.log("ButterFaces.Overlay.hide - animation ended to make overlay transparent, OVERLAY REMOVED")})},a.findOverlay=function(e){return $("body .butter-component-overlay[data-overlay-uuid='"+e+"']")},a}();e.Overlay=a}(ButterFaces||(ButterFaces={}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1dHRlcmZhY2VzLW92ZXJsYXkudHMiXSwibmFtZXMiOlsiQnV0dGVyRmFjZXMiLCJCdXR0ZXJGYWNlcy5PdmVybGF5IiwiQnV0dGVyRmFjZXMuT3ZlcmxheS5jb25zdHJ1Y3RvciIsIkJ1dHRlckZhY2VzLk92ZXJsYXkuc2hvdyIsIkJ1dHRlckZhY2VzLk92ZXJsYXkuaGlkZSIsIkJ1dHRlckZhY2VzLk92ZXJsYXkuaGlkZUFsbCIsIkJ1dHRlckZhY2VzLk92ZXJsYXkuZmFkZU91dERldGFjaHRlZE92ZXJsYXlzIiwiQnV0dGVyRmFjZXMuT3ZlcmxheS5mYWRlT3V0QXR0YWNodGVkT3ZlcmxheXMiLCJCdXR0ZXJGYWNlcy5PdmVybGF5LmZhZGVPdXRPdmVybGF5IiwiQnV0dGVyRmFjZXMuT3ZlcmxheS5maW5kT3ZlcmxheSJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBT0EsY0FBUCxTQUFPQSxHQUVIQSxHQUFBQSxHQUFBQSxXQU1JQyxRQUFBQSxHQUFZQSxFQUFhQSxFQUEyQ0EsR0FBeERDLFNBQUFBLElBQUFBLEVBQUFBLEtBQWFBLFNBQUFBLElBQUFBLEdBQUFBLEdBQTJDQSxTQUFBQSxJQUFBQSxFQUFBQSxRQUNoRUEsS0FBS0EsVUFBV0EsRUFDaEJBLEtBQUtBLE1BQVFBLEVBQ2JBLEtBQUtBLG1DQUFxQ0EsRUFDMUNBLEtBQUtBLFNBQVdBLEVBRWhCQSxRQUFRQSxJQUFJQSxvRUFBc0VBLEtBQUtBLE1BQVFBLDJDQUE2Q0EsS0FBS0EsbUNBQXFDQSxpQkFBbUJBLEtBQUtBLFVBNEl0TkQsTUF6SVdBLEdBQUFBLFVBQUFBLEtBQVBBLFdBQUFFLEdBQUFBLEdBQUFBLEtBQ1FBLEVBQXFCQSxFQUFFQSxLQUFLQSxTQUVoQ0EsR0FBWUEsUUFBUUEsMkJBRXBCQSxFQUFtQkEsS0FBS0EsU0FBQ0EsRUFBT0EsR0FFNUJBLEdBQUlBLEdBQW9CQSxFQUFFQSxFQUsxQkEsSUFIQUEsRUFBS0EsVUFBV0EsRUFHb0NBLFNBQWhEQSxFQUFrQkEsS0FBS0EscUJBQW9DQSxDQUMzREEsR0FBSUEsRUFBWUEsUUFBUUEsWUFBWUEsRUFBa0JBLEtBQUtBLHNCQUFzQkEsT0FBU0EsRUFFdEZBLFdBREFBLFNBQVFBLElBQUlBLDRFQUdaQSxHQUFrQkEsV0FBV0EscUJBSXJDQSxRQUFRQSxJQUFJQSxxRUFDWkEsSUFBSUEsR0FBT0EsRUFBWUEsS0FBS0EsVUFFeEJBLEVBQVdBLEVBQUVBLDREQUE4REEsRUFBT0EsbUdBRXRGQSxHQUFrQkEsS0FBS0Esb0JBQXFCQSxHQUV0QkEsU0FBbEJBLEVBQUtBLFNBQ0xBLEVBQVNBLFNBQVNBLGdCQUdsQkEsRUFBU0EsT0FBT0EsRUFBa0JBLFVBQzlCQSxNQUFNQSxFQUFrQkEsY0FDeEJBLE9BQU9BLEVBQWtCQSxlQUN6QkEsU0FBU0Esc0JBQ1RBLEtBQUtBLFNBQVlBLGFBR3pCQSxFQUFFQSxRQUFRQSxPQUFPQSxHQUViQSxFQUFLQSxxQ0FDTEEsUUFBUUEsSUFBSUEsOEdBQ1pBLEVBQVNBLFFBR2JBLE9BQU9BLFdBQVdBLFdBQ1RBLEVBQUtBLFVBQWFBLEVBQUtBLHFDQUN4QkEsUUFBUUEsSUFBSUEsNkhBQ1pBLEVBQVNBLFFBR1JBLEVBQUtBLFdBQ05BLFFBQVFBLElBQUlBLHlGQUNaQSxFQUNLQSxNQUFLQSxHQUNMQSxTQUNHQSxRQUFTQSxHQUNWQSxJQUFLQSxXQUNKQSxRQUFRQSxJQUFJQSwwRkFHekJBLEVBQUtBLFVBS1RGLEVBQUFBLFVBQUFBLEtBQVBBLFdBQ0lHLFFBQVFBLElBQUlBLDRFQUVaQSxJQUFJQSxHQUFxQkEsRUFBRUEsS0FBS0EsU0FDaENBLE1BQUtBLFVBQVdBLEVBRWhCQSxFQUFZQSxRQUFRQSwyQkFFcEJBLEVBQW1CQSxLQUFLQSxTQUFDQSxFQUFPQSxHQUM1QkEsR0FBSUEsR0FBb0JBLEVBQUVBLEdBQ3RCQSxFQUFjQSxFQUFrQkEsS0FBS0Esb0JBRXpDQSxJQUFvQkEsU0FBaEJBLEdBQTZCQSxFQUFZQSxRQUFRQSxZQUFZQSxHQUFhQSxPQUFTQSxFQUFHQSxDQUN0RkEsR0FBSUEsR0FBV0EsRUFBWUEsUUFBUUEsWUFBWUEsRUFBa0JBLEtBQUtBLHFCQUV0RUEsR0FBWUEsUUFBUUEsZUFBZUEsT0FNakNILEVBQUFBLFFBQWRBLFdBQ0lJLFFBQVFBLElBQUlBLHFGQUVaQSxFQUFZQSxRQUFRQSwyQkFDcEJBLEVBQVlBLFFBQVFBLDRCQUdUSixFQUFBQSx5QkFBZkEsV0FFSUssRUFBRUEsNkJBQTZCQSxLQUFLQSxTQUFDQSxFQUFPQSxHQUN4Q0EsR0FBSUEsR0FBV0EsRUFBRUEsR0FDYkEsRUFBY0EsRUFBRUEsR0FBZ0JBLEtBQUtBLG9CQUNrQkEsSUFBdkRBLEVBQUVBLHNCQUF3QkEsRUFBY0EsS0FBS0EsUUFDN0NBLEVBQVlBLFFBQVFBLGVBQWVBLE1BS2hDTCxFQUFBQSx5QkFBZkEsV0FFSU0sRUFBRUEsNkJBQTZCQSxLQUFLQSxTQUFDQSxFQUFPQSxHQUN4Q0EsR0FBSUEsR0FBV0EsRUFBRUEsR0FDYkEsRUFBY0EsRUFBRUEsR0FBZ0JBLEtBQUtBLHFCQUNyQ0EsRUFBV0EsRUFBRUEsc0JBQXdCQSxFQUFjQSxJQUNuREEsR0FBU0EsT0FBU0EsSUFDbEJBLEVBQVlBLFFBQVFBLGVBQWVBLEdBRW5DQSxFQUFTQSxLQUFLQSxTQUFDQSxFQUFPQSxHQUNsQkEsR0FBSUEsR0FBV0EsRUFBRUEsRUFDakJBLEdBQVNBLFdBQVdBLDJCQU1yQk4sRUFBQUEsZUFBZkEsU0FBOEJBLEdBQzFCTyxFQUNLQSxNQUFLQSxHQUNMQSxTQUNHQSxRQUFTQSxHQUNWQSxJQUFLQSxXQUNKQSxFQUFTQSxTQUNUQSxRQUFRQSxJQUFJQSw4RkFJVFAsRUFBQUEsWUFBZkEsU0FBMkJBLEdBQ3ZCUSxNQUFPQSxHQUFFQSxxREFBdURBLEVBQU9BLE9BRS9FUixJQXhKYUQsR0FBQUEsUUFBT0EsR0FGakJBLGNBQUFBIiwiZmlsZSI6ImJ1dHRlcmZhY2VzLW92ZXJsYXkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vPHJlZmVyZW5jZSBwYXRoPVwiZGVmaW5pdGlvbnMvZXh0ZXJuYWwvdHNkLmQudHNcIi8+XG4vLy88cmVmZXJlbmNlIHBhdGg9XCJidXR0ZXJmYWNlcy1ndWlkLnRzXCIvPlxuXG5tb2R1bGUgQnV0dGVyRmFjZXMge1xuXG4gICAgZXhwb3J0IGNsYXNzIE92ZXJsYXkge1xuICAgICAgICBpc0hpZGluZzpib29sZWFuO1xuICAgICAgICBkZWxheTpudW1iZXI7XG4gICAgICAgIHNlbGVjdG9yOnN0cmluZztcbiAgICAgICAgaXNUcmFuc3BhcmVudEJsb2NraW5nT3ZlcmxheUFjdGl2ZTpib29sZWFuO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKGRlbGF5ID0gNTAwLCBpc1RyYW5zcGFyZW50QmxvY2tpbmdPdmVybGF5QWN0aXZlID0gdHJ1ZSwgc2VsZWN0b3IgPSAnYm9keScpIHtcbiAgICAgICAgICAgIHRoaXMuaXNIaWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICAgICAgdGhpcy5pc1RyYW5zcGFyZW50QmxvY2tpbmdPdmVybGF5QWN0aXZlID0gaXNUcmFuc3BhcmVudEJsb2NraW5nT3ZlcmxheUFjdGl2ZTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0J1dHRlckZhY2VzLk92ZXJsYXkuY29uc3RydWN0b3IgLSBjcmVhdGluZyBvdmVybGF5IHdpdGggZGVsYXkgaXMgJyArIHRoaXMuZGVsYXkgKyAnLCBpc1RyYW5zcGFyZW50QmxvY2tpbmdPdmVybGF5QWN0aXZlIGlzICcgKyB0aGlzLmlzVHJhbnNwYXJlbnRCbG9ja2luZ092ZXJsYXlBY3RpdmUgKyAnLCBzZWxlY3RvciBpcyAnICsgdGhpcy5zZWxlY3Rvcik7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpIHtcbiAgICAgICAgICAgIGxldCAkZWxlbWVudHNUb0Rpc2FibGUgPSAkKHRoaXMuc2VsZWN0b3IpO1xuXG4gICAgICAgICAgICBCdXR0ZXJGYWNlcy5PdmVybGF5LmZhZGVPdXREZXRhY2h0ZWRPdmVybGF5cygpO1xuXG4gICAgICAgICAgICAkZWxlbWVudHNUb0Rpc2FibGUuZWFjaCgoaW5kZXgsIGVsZW1lbnRUb0Rpc2FibGUpID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCAkZWxlbWVudFRvRGlzYWJsZSA9ICQoZWxlbWVudFRvRGlzYWJsZSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzSGlkaW5nID0gZmFsc2U7XG5cblxuICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudFRvRGlzYWJsZS5hdHRyKCdkYXRhLW92ZXJsYXktdXVpZCcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEJ1dHRlckZhY2VzLk92ZXJsYXkuZmluZE92ZXJsYXkoJGVsZW1lbnRUb0Rpc2FibGUuYXR0cignZGF0YS1vdmVybGF5LXV1aWQnKSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCdXR0ZXJGYWNlcy5PdmVybGF5LnNob3cgLSBvdmVybGF5IGFscmVhZHkgZXhpc3RpbmcuIFNraXAgc2hvd2luZyBvdmVybGF5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnRUb0Rpc2FibGUucmVtb3ZlQXR0cignZGF0YS1vdmVybGF5LXV1aWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQnV0dGVyRmFjZXMuT3ZlcmxheS5zaG93IC0gYXBwZW5kaW5nIG5vdCBkaXNwbGF5ZWQgb3ZlcmxheSB0byBib2R5XCIpO1xuICAgICAgICAgICAgICAgIHZhciB1dWlkID0gQnV0dGVyRmFjZXMuR3VpZC5uZXdHdWlkKCk7XG5cbiAgICAgICAgICAgICAgICBsZXQgJG92ZXJsYXkgPSAkKCc8ZGl2IGNsYXNzPVwiYnV0dGVyLWNvbXBvbmVudC1vdmVybGF5XCIgZGF0YS1vdmVybGF5LXV1aWQ9XCInICsgdXVpZCArICdcIj48ZGl2IGNsYXNzPVwiYnV0dGVyLWNvbXBvbmVudC1zcGlubmVyXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+PGRpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcblxuICAgICAgICAgICAgICAgICRlbGVtZW50VG9EaXNhYmxlLmF0dHIoJ2RhdGEtb3ZlcmxheS11dWlkJywgdXVpZCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RvciA9PT0gJ2JvZHknKSB7XG4gICAgICAgICAgICAgICAgICAgICRvdmVybGF5LmFkZENsYXNzKCdvdmVybGF5LWJvZHknKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIGlmIGJsb2NrcGFnZSBpcyB0cnVlIHNldCBpdCB0byBtYXggc2l6ZVxuICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheS5vZmZzZXQoJGVsZW1lbnRUb0Rpc2FibGUub2Zmc2V0KCkpXG4gICAgICAgICAgICAgICAgICAgICAgIC53aWR0aCgkZWxlbWVudFRvRGlzYWJsZS5vdXRlcldpZHRoKCkpXG4gICAgICAgICAgICAgICAgICAgICAgIC5oZWlnaHQoJGVsZW1lbnRUb0Rpc2FibGUub3V0ZXJIZWlnaHQoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdvdmVybGF5LWJvZHktY2hpbGQnKVxuICAgICAgICAgICAgICAgICAgICAgICAuY3NzKHsncG9zaXRpb24nOiAnYWJzb2x1dGUnfSk7IC8vIElFIG92ZXJyaWRlcyBjc3MgcG9zaXRpb24gc28gc2V0IGl0IGhlcmVcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRvdmVybGF5KTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVHJhbnNwYXJlbnRCbG9ja2luZ092ZXJsYXlBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCdXR0ZXJGYWNlcy5PdmVybGF5LnNob3cgLSBpc1RyYW5zcGFyZW50QmxvY2tpbmdPdmVybGF5QWN0aXZlIGlzIHRydWUsIHNob3dpbmcgdHJhbnNwYXJlbnQgb3ZlcmxheSBkaXJlY2x5XCIpO1xuICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNIaWRpbmcgJiYgIXRoaXMuaXNUcmFuc3BhcmVudEJsb2NraW5nT3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCdXR0ZXJGYWNlcy5PdmVybGF5LnNob3cgLSBkZWZlcnJlZDogaXNUcmFuc3BhcmVudEJsb2NraW5nT3ZlcmxheUFjdGl2ZSBpcyBmYWxzZSwgc2hvd2luZyB0cmFuc3BhcmVudCBvdmVybGF5IGFmdGVyIGRlbGF5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJG92ZXJsYXkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzSGlkaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJ1dHRlckZhY2VzLk92ZXJsYXkuc2hvdyAtIGRlZmVycmVkOiBzdGFydGluZyBhbmltYXRpb24gdG8gbWFrZSBvdmVybGF5IGludHJhbnNwYXJlbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdG9wKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQnV0dGVyRmFjZXMuT3ZlcmxheS5zaG93IC0gZGVmZXJyZWQ6IGFuaW1hdGlvbiBlbmRlZCB0byBtYWtlIG92ZXJsYXkgaW50cmFuc3BhcmVudFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIHRoaXMuZGVsYXkpO1xuICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaGlkZSgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQnV0dGVyRmFjZXMuT3ZlcmxheS5oaWRlIC0gc3RhcnRpbmcgYW5pbWF0aW9uIHRvIG1ha2Ugb3ZlcmxheSB0cmFuc3BhcmVudFwiKTtcblxuICAgICAgICAgICAgbGV0ICRlbGVtZW50c1RvRGlzYWJsZSA9ICQodGhpcy5zZWxlY3Rvcik7XG4gICAgICAgICAgICB0aGlzLmlzSGlkaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgQnV0dGVyRmFjZXMuT3ZlcmxheS5mYWRlT3V0RGV0YWNodGVkT3ZlcmxheXMoKTtcblxuICAgICAgICAgICAgJGVsZW1lbnRzVG9EaXNhYmxlLmVhY2goKGluZGV4LCBlbGVtZW50VG9EaXNhYmxlKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0ICRlbGVtZW50VG9EaXNhYmxlID0gJChlbGVtZW50VG9EaXNhYmxlKTtcbiAgICAgICAgICAgICAgICBsZXQgb3ZlcmxheVV1aWQgPSAkZWxlbWVudFRvRGlzYWJsZS5hdHRyKCdkYXRhLW92ZXJsYXktdXVpZCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXlVdWlkICE9PSB1bmRlZmluZWQgJiYgQnV0dGVyRmFjZXMuT3ZlcmxheS5maW5kT3ZlcmxheShvdmVybGF5VXVpZCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgJG92ZXJsYXkgPSBCdXR0ZXJGYWNlcy5PdmVybGF5LmZpbmRPdmVybGF5KCRlbGVtZW50VG9EaXNhYmxlLmF0dHIoJ2RhdGEtb3ZlcmxheS11dWlkJykpO1xuXG4gICAgICAgICAgICAgICAgICAgIEJ1dHRlckZhY2VzLk92ZXJsYXkuZmFkZU91dE92ZXJsYXkoJG92ZXJsYXkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc3RhdGljIGhpZGVBbGwoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJ1dHRlckZhY2VzLk92ZXJsYXkuaGlkZUFsbCAtIHN0YXJ0aW5nIGFuaW1hdGlvbiB0byBtYWtlIGFsbCBvdmVybGF5cyB0cmFuc3BhcmVudFwiKTtcblxuICAgICAgICAgICAgQnV0dGVyRmFjZXMuT3ZlcmxheS5mYWRlT3V0RGV0YWNodGVkT3ZlcmxheXMoKTtcbiAgICAgICAgICAgIEJ1dHRlckZhY2VzLk92ZXJsYXkuZmFkZU91dEF0dGFjaHRlZE92ZXJsYXlzKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmYWRlT3V0RGV0YWNodGVkT3ZlcmxheXMoKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdW5iaW5kZWQgZWxlbWVudHNcbiAgICAgICAgICAgICQoJy5idXR0ZXItY29tcG9uZW50LW92ZXJsYXknKS5lYWNoKChpbmRleCwgZWxlbWVudFRvQ2hlY2spID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgJG92ZXJsYXkgPSAkKGVsZW1lbnRUb0NoZWNrKTtcbiAgICAgICAgICAgICAgICBsZXQgdXVpZFRvQ2hlY2sgPSAkKGVsZW1lbnRUb0NoZWNrKS5hdHRyKCdkYXRhLW92ZXJsYXktdXVpZCcpO1xuICAgICAgICAgICAgICAgIGlmICgkKCdbZGF0YS1vdmVybGF5LXV1aWQ9JyArIHV1aWRUb0NoZWNrICsgJ10nKS5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBCdXR0ZXJGYWNlcy5PdmVybGF5LmZhZGVPdXRPdmVybGF5KCRvdmVybGF5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmYWRlT3V0QXR0YWNodGVkT3ZlcmxheXMoKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgYmluZGVkIGVsZW1lbnRzXG4gICAgICAgICAgICAkKCcuYnV0dGVyLWNvbXBvbmVudC1vdmVybGF5JykuZWFjaCgoaW5kZXgsIGVsZW1lbnRUb0NoZWNrKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0ICRvdmVybGF5ID0gJChlbGVtZW50VG9DaGVjayk7XG4gICAgICAgICAgICAgICAgbGV0IHV1aWRUb0NoZWNrID0gJChlbGVtZW50VG9DaGVjaykuYXR0cignZGF0YS1vdmVybGF5LXV1aWQnKTtcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudHMgPSAkKCdbZGF0YS1vdmVybGF5LXV1aWQ9JyArIHV1aWRUb0NoZWNrICsgJ10nKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBCdXR0ZXJGYWNlcy5PdmVybGF5LmZhZGVPdXRPdmVybGF5KCRvdmVybGF5KTtcblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0ICRlbGVtZW50ID0gJChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZUF0dHIoJ2RhdGEtb3ZlcmxheS11dWlkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZhZGVPdXRPdmVybGF5KCRvdmVybGF5OmFueSkge1xuICAgICAgICAgICAgJG92ZXJsYXlcbiAgICAgICAgICAgICAgICAuc3RvcCh0cnVlKVxuICAgICAgICAgICAgICAgIC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sIDMwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAkb3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCdXR0ZXJGYWNlcy5PdmVybGF5LmhpZGUgLSBhbmltYXRpb24gZW5kZWQgdG8gbWFrZSBvdmVybGF5IHRyYW5zcGFyZW50LCBPVkVSTEFZIFJFTU9WRURcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluZE92ZXJsYXkodXVpZDpTdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiAkKFwiYm9keSAuYnV0dGVyLWNvbXBvbmVudC1vdmVybGF5W2RhdGEtb3ZlcmxheS11dWlkPSdcIiArIHV1aWQgKyBcIiddXCIpO1xuICAgICAgICB9XG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

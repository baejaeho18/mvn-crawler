Compiled from "ScaleDownHandler.java"
public class org.apache.activemq.artemis.core.server.impl.ScaleDownHandler {
  final org.apache.activemq.artemis.core.paging.PagingManager pagingManager;

  final org.apache.activemq.artemis.core.postoffice.PostOffice postOffice;

  private org.apache.activemq.artemis.core.server.NodeManager nodeManager;

  private final org.apache.activemq.artemis.core.server.cluster.ClusterController clusterController;

  private final org.apache.activemq.artemis.core.persistence.StorageManager storageManager;

  private java.lang.String targetNodeId;

  public org.apache.activemq.artemis.core.server.impl.ScaleDownHandler(org.apache.activemq.artemis.core.paging.PagingManager, org.apache.activemq.artemis.core.postoffice.PostOffice, org.apache.activemq.artemis.core.server.NodeManager, org.apache.activemq.artemis.core.server.cluster.ClusterController, org.apache.activemq.artemis.core.persistence.StorageManager);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #3                  // Field pagingManager:Lorg/apache/activemq/artemis/core/paging/PagingManager;
       9: aload_0
      10: aload_2
      11: putfield      #4                  // Field postOffice:Lorg/apache/activemq/artemis/core/postoffice/PostOffice;
      14: aload_0
      15: aload_3
      16: putfield      #5                  // Field nodeManager:Lorg/apache/activemq/artemis/core/server/NodeManager;
      19: aload_0
      20: aload         4
      22: putfield      #6                  // Field clusterController:Lorg/apache/activemq/artemis/core/server/cluster/ClusterController;
      25: aload_0
      26: aload         5
      28: putfield      #7                  // Field storageManager:Lorg/apache/activemq/artemis/core/persistence/StorageManager;
      31: return

  public long scaleDown(org.apache.activemq.artemis.api.core.client.ClientSessionFactory, org.apache.activemq.artemis.core.transaction.ResourceManager, java.util.Map<org.apache.activemq.artemis.api.core.SimpleString, java.util.List<org.apache.activemq.artemis.api.core.Pair<byte[], java.lang.Long>>>, org.apache.activemq.artemis.api.core.SimpleString, org.apache.activemq.artemis.api.core.SimpleString) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #6                  // Field clusterController:Lorg/apache/activemq/artemis/core/server/cluster/ClusterController;
       4: aload_1
       5: checkcast     #8                  // class org/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal
       8: invokevirtual #9                  // Method org/apache/activemq/artemis/core/server/cluster/ClusterController.connectToNodeInCluster:(Lorg/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal;)Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
      11: astore        6
      13: aload         6
      15: invokevirtual #10                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.authorize:()V
      18: aload_0
      19: aload_1
      20: aload         5
      22: aload         6
      24: invokevirtual #11                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterUser:()Ljava/lang/String;
      27: aload         6
      29: invokevirtual #12                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterPassword:()Ljava/lang/String;
      32: invokevirtual #13                 // Method scaleDownMessages:(Lorg/apache/activemq/artemis/api/core/client/ClientSessionFactory;Lorg/apache/activemq/artemis/api/core/SimpleString;Ljava/lang/String;Ljava/lang/String;)J
      35: lstore        7
      37: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
      40: new           #15                 // class java/lang/StringBuilder
      43: dup
      44: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      47: ldc           #17                 // String Scaled down
      49: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: lload         7
      54: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      57: ldc           #20                 // String  messages total.
      59: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      65: invokeinterface #22,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.info:(Ljava/lang/Object;)V
      70: aload_0
      71: aload_1
      72: aload_2
      73: aload         6
      75: invokevirtual #11                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterUser:()Ljava/lang/String;
      78: aload         6
      80: invokevirtual #12                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterPassword:()Ljava/lang/String;
      83: invokevirtual #23                 // Method scaleDownTransactions:(Lorg/apache/activemq/artemis/api/core/client/ClientSessionFactory;Lorg/apache/activemq/artemis/core/transaction/ResourceManager;Ljava/lang/String;Ljava/lang/String;)V
      86: aload_0
      87: aload_3
      88: aload_1
      89: aload         4
      91: aload         6
      93: invokevirtual #11                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterUser:()Ljava/lang/String;
      96: aload         6
      98: invokevirtual #12                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getClusterPassword:()Ljava/lang/String;
     101: invokevirtual #24                 // Method scaleDownDuplicateIDs:(Ljava/util/Map;Lorg/apache/activemq/artemis/api/core/client/ClientSessionFactory;Lorg/apache/activemq/artemis/api/core/SimpleString;Ljava/lang/String;Ljava/lang/String;)V
     104: aload         6
     106: new           #25                 // class org/apache/activemq/artemis/api/core/SimpleString
     109: dup
     110: aload_0
     111: getfield      #26                 // Field targetNodeId:Ljava/lang/String;
     114: invokespecial #27                 // Method org/apache/activemq/artemis/api/core/SimpleString."<init>":(Ljava/lang/String;)V
     117: aload_0
     118: getfield      #5                  // Field nodeManager:Lorg/apache/activemq/artemis/core/server/NodeManager;
     121: invokevirtual #28                 // Method org/apache/activemq/artemis/core/server/NodeManager.getNodeId:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     124: invokevirtual #29                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.announceScaleDown:(Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/SimpleString;)V
     127: lload         7
     129: lreturn

  public long scaleDownMessages(org.apache.activemq.artemis.api.core.client.ClientSessionFactory, org.apache.activemq.artemis.api.core.SimpleString, java.lang.String, java.lang.String) throws java.lang.Exception;
    Code:
       0: lconst_0
       1: lstore        5
       3: aload_0
       4: aload_2
       5: ifnull        15
       8: aload_2
       9: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
      12: goto          20
      15: aload_0
      16: aload_1
      17: invokespecial #31                 // Method getTargetNodeId:(Lorg/apache/activemq/artemis/api/core/client/ClientSessionFactory;)Ljava/lang/String;
      20: putfield      #26                 // Field targetNodeId:Ljava/lang/String;
      23: aload_1
      24: aload_3
      25: aload         4
      27: iconst_0
      28: iconst_1
      29: iconst_1
      30: iconst_0
      31: iconst_0
      32: invokeinterface #32,  8           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.createSession:(Ljava/lang/String;Ljava/lang/String;ZZZZI)Lorg/apache/activemq/artemis/api/core/client/ClientSession;
      37: astore        7
      39: aconst_null
      40: astore        8
      42: aload         7
      44: invokeinterface #33,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createProducer:()Lorg/apache/activemq/artemis/api/core/client/ClientProducer;
      49: astore        9
      51: aload_0
      52: getfield      #4                  // Field postOffice:Lorg/apache/activemq/artemis/core/postoffice/PostOffice;
      55: invokeinterface #34,  1           // InterfaceMethod org/apache/activemq/artemis/core/postoffice/PostOffice.getAddresses:()Ljava/util/Set;
      60: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      65: astore        10
      67: aload         10
      69: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      74: ifeq          271
      77: aload         10
      79: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      84: checkcast     #25                 // class org/apache/activemq/artemis/api/core/SimpleString
      87: astore        11
      89: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
      92: new           #15                 // class java/lang/StringBuilder
      95: dup
      96: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      99: ldc           #38                 // String Scaling down address
     101: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     104: aload         11
     106: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     109: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     112: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     117: aload_0
     118: getfield      #4                  // Field postOffice:Lorg/apache/activemq/artemis/core/postoffice/PostOffice;
     121: aload         11
     123: invokeinterface #41,  2           // InterfaceMethod org/apache/activemq/artemis/core/postoffice/PostOffice.getBindingsForAddress:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Lorg/apache/activemq/artemis/core/postoffice/Bindings;
     128: astore        12
     130: new           #42                 // class java/util/TreeSet
     133: dup
     134: new           #43                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$OrderQueueByNumberOfReferencesComparator
     137: dup
     138: invokespecial #44                 // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$OrderQueueByNumberOfReferencesComparator."<init>":()V
     141: invokespecial #45                 // Method java/util/TreeSet."<init>":(Ljava/util/Comparator;)V
     144: astore        13
     146: aload         12
     148: invokeinterface #46,  1           // InterfaceMethod org/apache/activemq/artemis/core/postoffice/Bindings.getBindings:()Ljava/util/Collection;
     153: invokeinterface #47,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     158: astore        14
     160: aload         14
     162: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     167: ifeq          220
     170: aload         14
     172: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     177: checkcast     #48                 // class org/apache/activemq/artemis/core/postoffice/Binding
     180: astore        15
     182: aload         15
     184: instanceof    #49                 // class org/apache/activemq/artemis/core/postoffice/impl/LocalQueueBinding
     187: ifeq          217
     190: aload         15
     192: checkcast     #49                 // class org/apache/activemq/artemis/core/postoffice/impl/LocalQueueBinding
     195: invokevirtual #50                 // Method org/apache/activemq/artemis/core/postoffice/impl/LocalQueueBinding.getQueue:()Lorg/apache/activemq/artemis/core/server/Queue;
     198: astore        16
     200: aload         16
     202: invokeinterface #51,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.deliverScheduledMessages:()V
     207: aload         13
     209: aload         16
     211: invokeinterface #52,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     216: pop
     217: goto          160
     220: aload         11
     222: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
     225: ldc           #53                 // String sf.
     227: invokevirtual #54                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     230: ifeq          251
     233: lload         5
     235: aload_0
     236: aload         11
     238: aload         13
     240: aload         9
     242: invokespecial #55                 // Method scaleDownSNF:(Lorg/apache/activemq/artemis/api/core/SimpleString;Ljava/util/Set;Lorg/apache/activemq/artemis/api/core/client/ClientProducer;)J
     245: ladd
     246: lstore        5
     248: goto          268
     251: lload         5
     253: aload_0
     254: aload         11
     256: aload         13
     258: aload         7
     260: aload         9
     262: invokevirtual #56                 // Method scaleDownRegularMessages:(Lorg/apache/activemq/artemis/api/core/SimpleString;Ljava/util/Set;Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/api/core/client/ClientProducer;)J
     265: ladd
     266: lstore        5
     268: goto          67
     271: aload         7
     273: ifnull        366
     276: aload         8
     278: ifnull        303
     281: aload         7
     283: invokeinterface #57,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.close:()V
     288: goto          366
     291: astore        9
     293: aload         8
     295: aload         9
     297: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     300: goto          366
     303: aload         7
     305: invokeinterface #57,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.close:()V
     310: goto          366
     313: astore        9
     315: aload         9
     317: astore        8
     319: aload         9
     321: athrow
     322: astore        17
     324: aload         7
     326: ifnull        363
     329: aload         8
     331: ifnull        356
     334: aload         7
     336: invokeinterface #57,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.close:()V
     341: goto          363
     344: astore        18
     346: aload         8
     348: aload         18
     350: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     353: goto          363
     356: aload         7
     358: invokeinterface #57,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.close:()V
     363: aload         17
     365: athrow
     366: lload         5
     368: lreturn
    Exception table:
       from    to  target type
         281   288   291   Class java/lang/Throwable
          42   271   313   Class java/lang/Throwable
          42   271   322   any
         334   341   344   Class java/lang/Throwable
         313   324   322   any

  public long scaleDownRegularMessages(org.apache.activemq.artemis.api.core.SimpleString, java.util.Set<org.apache.activemq.artemis.core.server.Queue>, org.apache.activemq.artemis.api.core.client.ClientSession, org.apache.activemq.artemis.api.core.client.ClientProducer) throws java.lang.Exception;
    Code:
       0: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
       3: new           #15                 // class java/lang/StringBuilder
       6: dup
       7: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      10: ldc           #60                 // String Scaling down messages on address
      12: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      15: aload_1
      16: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      19: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      22: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
      27: lconst_0
      28: lstore        5
      30: new           #61                 // class java/util/HashMap
      33: dup
      34: invokespecial #62                 // Method java/util/HashMap."<init>":()V
      37: astore        7
      39: aload_0
      40: getfield      #3                  // Field pagingManager:Lorg/apache/activemq/artemis/core/paging/PagingManager;
      43: aload_1
      44: invokeinterface #63,  2           // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingManager.getPageStore:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Lorg/apache/activemq/artemis/core/paging/PagingStore;
      49: astore        8
      51: new           #64                 // class org/apache/activemq/artemis/core/transaction/impl/TransactionImpl
      54: dup
      55: aload_0
      56: getfield      #7                  // Field storageManager:Lorg/apache/activemq/artemis/core/persistence/StorageManager;
      59: invokespecial #65                 // Method org/apache/activemq/artemis/core/transaction/impl/TransactionImpl."<init>":(Lorg/apache/activemq/artemis/core/persistence/StorageManager;)V
      62: astore        9
      64: aload         8
      66: invokeinterface #66,  1           // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingStore.disableCleanup:()V
      71: aload_2
      72: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      77: astore        10
      79: aload         10
      81: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      86: ifeq          125
      89: aload         10
      91: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      96: checkcast     #67                 // class org/apache/activemq/artemis/core/server/Queue
      99: astore        11
     101: aload         7
     103: aload         11
     105: new           #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     108: dup
     109: aload_0
     110: aload_3
     111: aload         11
     113: aload         8
     115: invokespecial #69                 // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager."<init>":(Lorg/apache/activemq/artemis/core/server/impl/ScaleDownHandler;Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/core/paging/PagingStore;)V
     118: invokevirtual #70                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     121: pop
     122: goto          79
     125: aload_2
     126: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     131: astore        10
     133: aload         10
     135: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     140: ifeq          780
     143: aload         10
     145: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     150: checkcast     #67                 // class org/apache/activemq/artemis/core/server/Queue
     153: astore        11
     155: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     158: new           #15                 // class java/lang/StringBuilder
     161: dup
     162: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     165: ldc           #60                 // String Scaling down messages on address
     167: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     170: aload_1
     171: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     174: ldc           #71                 // String  / performing loop on queue
     176: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     179: aload         11
     181: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     184: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     187: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     192: aload         11
     194: invokeinterface #72,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.totalIterator:()Lorg/apache/activemq/artemis/utils/LinkedListIterator;
     199: astore        12
     201: aconst_null
     202: astore        13
     204: aload         12
     206: invokeinterface #73,  1           // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.hasNext:()Z
     211: ifeq          682
     214: aload         12
     216: invokeinterface #74,  1           // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.next:()Ljava/lang/Object;
     221: checkcast     #75                 // class org/apache/activemq/artemis/core/server/MessageReference
     224: astore        14
     226: aload         14
     228: invokeinterface #76,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getMessage:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     233: invokeinterface #77,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.copy:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     238: astore        15
     240: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     243: new           #15                 // class java/lang/StringBuilder
     246: dup
     247: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     250: ldc           #78                 // String Reading message
     252: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     255: aload         15
     257: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     260: ldc           #79                 // String  from queue
     262: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     265: aload         11
     267: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     270: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     273: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     278: new           #80                 // class java/util/HashSet
     281: dup
     282: invokespecial #81                 // Method java/util/HashSet."<init>":()V
     285: astore        16
     287: aload         7
     289: invokevirtual #82                 // Method java/util/HashMap.entrySet:()Ljava/util/Set;
     292: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     297: astore        17
     299: aload         17
     301: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     306: ifeq          449
     309: aload         17
     311: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     316: checkcast     #83                 // class java/util/Map$Entry
     319: astore        18
     321: aload         18
     323: invokeinterface #84,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     328: aload         11
     330: if_acmpne     351
     333: aload         16
     335: aload         18
     337: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     342: invokeinterface #52,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     347: pop
     348: goto          446
     351: aload         18
     353: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     358: checkcast     #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     361: aload         14
     363: invokevirtual #86                 // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager.lookup:(Lorg/apache/activemq/artemis/core/server/MessageReference;)Z
     366: ifeq          446
     369: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     372: new           #15                 // class java/lang/StringBuilder
     375: dup
     376: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     379: ldc           #87                 // String Message existed on queue
     381: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     384: aload         18
     386: invokeinterface #84,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     391: checkcast     #67                 // class org/apache/activemq/artemis/core/server/Queue
     394: invokeinterface #88,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getID:()J
     399: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     402: ldc           #89                 // String  removeID=
     404: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     407: aload         18
     409: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     414: checkcast     #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     417: invokevirtual #90                 // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager.getQueueID:()J
     420: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     423: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     426: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     431: aload         16
     433: aload         18
     435: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     440: invokeinterface #52,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     445: pop
     446: goto          299
     449: aload         16
     451: invokeinterface #91,  1           // InterfaceMethod java/util/Set.size:()I
     456: bipush        8
     458: imul
     459: invokestatic  #92                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     462: astore        17
     464: aload         16
     466: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     471: astore        18
     473: aload         18
     475: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     480: ifeq          513
     483: aload         18
     485: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     490: checkcast     #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     493: astore        19
     495: aload         19
     497: invokevirtual #90                 // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager.getQueueID:()J
     500: lstore        20
     502: aload         17
     504: lload         20
     506: invokevirtual #93                 // Method java/nio/ByteBuffer.putLong:(J)Ljava/nio/ByteBuffer;
     509: pop
     510: goto          473
     513: aload         15
     515: getstatic     #94                 // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     518: aload         17
     520: invokevirtual #95                 // Method java/nio/ByteBuffer.array:()[B
     523: invokeinterface #96,  3           // InterfaceMethod org/apache/activemq/artemis/api/core/Message.putBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;[B)Lorg/apache/activemq/artemis/api/core/Message;
     528: pop
     529: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     532: invokeinterface #97,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.isDebugEnabled:()Z
     537: ifeq          609
     540: aload         14
     542: invokeinterface #98,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.isPaged:()Z
     547: ifeq          581
     550: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     553: new           #15                 // class java/lang/StringBuilder
     556: dup
     557: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     560: ldc           #99                 // String *********************<<<<< Scaling down pdgmessage
     562: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     565: aload         15
     567: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     570: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     573: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     578: goto          609
     581: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     584: new           #15                 // class java/lang/StringBuilder
     587: dup
     588: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     591: ldc           #100                // String *********************<<<<< Scaling down message
     593: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     596: aload         15
     598: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     601: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     604: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     609: aload         4
     611: aload_1
     612: aload         15
     614: invokeinterface #101,  3          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientProducer.send:(Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/Message;)V
     619: lload         5
     621: lconst_1
     622: ladd
     623: lstore        5
     625: aload         12
     627: invokeinterface #102,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.remove:()V
     632: aload         16
     634: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     639: astore        18
     641: aload         18
     643: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     648: ifeq          679
     651: aload         18
     653: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     658: checkcast     #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     661: astore        19
     663: aload_0
     664: aload         9
     666: aload         19
     668: invokevirtual #103                // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager.getQueue:()Lorg/apache/activemq/artemis/core/server/Queue;
     671: aload         14
     673: invokespecial #104                // Method ackMessageOnQueue:(Lorg/apache/activemq/artemis/core/transaction/Transaction;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/core/server/MessageReference;)V
     676: goto          641
     679: goto          204
     682: aload         12
     684: ifnull        777
     687: aload         13
     689: ifnull        714
     692: aload         12
     694: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     699: goto          777
     702: astore        14
     704: aload         13
     706: aload         14
     708: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     711: goto          777
     714: aload         12
     716: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     721: goto          777
     724: astore        14
     726: aload         14
     728: astore        13
     730: aload         14
     732: athrow
     733: astore        22
     735: aload         12
     737: ifnull        774
     740: aload         13
     742: ifnull        767
     745: aload         12
     747: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     752: goto          774
     755: astore        23
     757: aload         13
     759: aload         23
     761: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     764: goto          774
     767: aload         12
     769: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     774: aload         22
     776: athrow
     777: goto          133
     780: aload         9
     782: invokeinterface #106,  1          // InterfaceMethod org/apache/activemq/artemis/core/transaction/Transaction.commit:()V
     787: aload         7
     789: invokevirtual #107                // Method java/util/HashMap.values:()Ljava/util/Collection;
     792: invokeinterface #47,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     797: astore        10
     799: aload         10
     801: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     806: ifeq          829
     809: aload         10
     811: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     816: checkcast     #68                 // class org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager
     819: astore        11
     821: aload         11
     823: invokevirtual #108                // Method org/apache/activemq/artemis/core/server/impl/ScaleDownHandler$QueuesXRefInnerManager.close:()V
     826: goto          799
     829: lload         5
     831: lstore        10
     833: aload         8
     835: invokeinterface #109,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingStore.enableCleanup:()V
     840: aload         8
     842: invokeinterface #110,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingStore.getCursorProvider:()Lorg/apache/activemq/artemis/core/paging/cursor/PageCursorProvider;
     847: invokeinterface #111,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/cursor/PageCursorProvider.scheduleCleanup:()V
     852: lload         10
     854: lreturn
     855: astore        24
     857: aload         8
     859: invokeinterface #109,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingStore.enableCleanup:()V
     864: aload         8
     866: invokeinterface #110,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/PagingStore.getCursorProvider:()Lorg/apache/activemq/artemis/core/paging/cursor/PageCursorProvider;
     871: invokeinterface #111,  1          // InterfaceMethod org/apache/activemq/artemis/core/paging/cursor/PageCursorProvider.scheduleCleanup:()V
     876: aload         24
     878: athrow
    Exception table:
       from    to  target type
         692   699   702   Class java/lang/Throwable
         204   682   724   Class java/lang/Throwable
         204   682   733   any
         745   752   755   Class java/lang/Throwable
         724   735   733   any
          71   833   855   any
         855   857   855   any

  private long scaleDownSNF(org.apache.activemq.artemis.api.core.SimpleString, java.util.Set<org.apache.activemq.artemis.core.server.Queue>, org.apache.activemq.artemis.api.core.client.ClientProducer) throws java.lang.Exception;
    Code:
       0: lconst_0
       1: lstore        4
       3: aload_1
       4: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
       7: aload_0
       8: getfield      #26                 // Field targetNodeId:Ljava/lang/String;
      11: invokevirtual #112                // Method java/lang/String.endsWith:(Ljava/lang/String;)Z
      14: istore        7
      16: iload         7
      18: ifeq          30
      21: aload_0
      22: getfield      #26                 // Field targetNodeId:Ljava/lang/String;
      25: astore        6
      27: goto          48
      30: aload_1
      31: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
      34: aload_1
      35: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
      38: ldc           #113                // String .
      40: invokevirtual #114                // Method java/lang/String.lastIndexOf:(Ljava/lang/String;)I
      43: invokevirtual #115                // Method java/lang/String.substring:(I)Ljava/lang/String;
      46: astore        6
      48: new           #64                 // class org/apache/activemq/artemis/core/transaction/impl/TransactionImpl
      51: dup
      52: aload_0
      53: getfield      #7                  // Field storageManager:Lorg/apache/activemq/artemis/core/persistence/StorageManager;
      56: invokespecial #65                 // Method org/apache/activemq/artemis/core/transaction/impl/TransactionImpl."<init>":(Lorg/apache/activemq/artemis/core/persistence/StorageManager;)V
      59: astore        8
      61: aload_2
      62: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      67: astore        9
      69: aload         9
      71: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      76: ifeq          527
      79: aload         9
      81: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      86: checkcast     #67                 // class org/apache/activemq/artemis/core/server/Queue
      89: astore        10
      91: aload         10
      93: invokeinterface #72,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.totalIterator:()Lorg/apache/activemq/artemis/utils/LinkedListIterator;
      98: astore        11
     100: aconst_null
     101: astore        12
     103: aload         11
     105: invokeinterface #73,  1           // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.hasNext:()Z
     110: ifeq          429
     113: aload         11
     115: invokeinterface #74,  1           // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.next:()Ljava/lang/Object;
     120: checkcast     #75                 // class org/apache/activemq/artemis/core/server/MessageReference
     123: astore        13
     125: aload         13
     127: invokeinterface #76,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getMessage:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     132: invokeinterface #77,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.copy:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     137: astore        14
     139: aconst_null
     140: astore        15
     142: new           #116                // class java/util/ArrayList
     145: dup
     146: invokespecial #117                // Method java/util/ArrayList."<init>":()V
     149: astore        16
     151: aload         14
     153: getstatic     #94                 // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     156: invokeinterface #118,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.removeProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Ljava/lang/Object;
     161: pop
     162: aload         14
     164: invokeinterface #119,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.getPropertyNames:()Ljava/util/Set;
     169: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     174: astore        17
     176: aload         17
     178: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     183: ifeq          246
     186: aload         17
     188: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     193: checkcast     #25                 // class org/apache/activemq/artemis/api/core/SimpleString
     196: astore        18
     198: aload         18
     200: getstatic     #94                 // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     203: invokevirtual #120                // Method org/apache/activemq/artemis/api/core/SimpleString.startsWith:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Z
     206: ifeq          243
     209: aload         18
     211: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
     214: aload         6
     216: invokevirtual #112                // Method java/lang/String.endsWith:(Ljava/lang/String;)Z
     219: ifeq          233
     222: aload         14
     224: aload         18
     226: invokeinterface #121,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.getBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;)[B
     231: astore        15
     233: aload         16
     235: aload         18
     237: invokeinterface #122,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     242: pop
     243: goto          176
     246: aload         16
     248: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     253: astore        17
     255: aload         17
     257: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     262: ifeq          290
     265: aload         17
     267: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     272: checkcast     #25                 // class org/apache/activemq/artemis/api/core/SimpleString
     275: astore        18
     277: aload         14
     279: aload         18
     281: invokeinterface #118,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.removeProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Ljava/lang/Object;
     286: pop
     287: goto          255
     290: iload         7
     292: ifeq          311
     295: aload         14
     297: getstatic     #94                 // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     300: aload         15
     302: invokeinterface #96,  3           // InterfaceMethod org/apache/activemq/artemis/api/core/Message.putBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;[B)Lorg/apache/activemq/artemis/api/core/Message;
     307: pop
     308: goto          324
     311: aload         14
     313: getstatic     #124                // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_SCALEDOWN_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     316: aload         15
     318: invokeinterface #96,  3           // InterfaceMethod org/apache/activemq/artemis/api/core/Message.putBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;[B)Lorg/apache/activemq/artemis/api/core/Message;
     323: pop
     324: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     327: new           #15                 // class java/lang/StringBuilder
     330: dup
     331: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     334: ldc           #125                // String Scaling down message
     336: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     339: aload         14
     341: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     344: ldc           #126                // String  from
     346: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     349: aload_1
     350: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     353: ldc           #127                // String  to
     355: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     358: aload         14
     360: invokeinterface #128,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.getAddress:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     365: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     368: ldc           #129                // String  on node
     370: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     373: aload_0
     374: getfield      #26                 // Field targetNodeId:Ljava/lang/String;
     377: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     380: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     383: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     388: aload_3
     389: aload         14
     391: invokeinterface #128,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/Message.getAddress:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     396: aload         14
     398: invokeinterface #101,  3          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientProducer.send:(Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/Message;)V
     403: lload         4
     405: lconst_1
     406: ladd
     407: lstore        4
     409: aload         11
     411: invokeinterface #102,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.remove:()V
     416: aload_0
     417: aload         8
     419: aload         10
     421: aload         13
     423: invokespecial #104                // Method ackMessageOnQueue:(Lorg/apache/activemq/artemis/core/transaction/Transaction;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/core/server/MessageReference;)V
     426: goto          103
     429: aload         11
     431: ifnull        524
     434: aload         12
     436: ifnull        461
     439: aload         11
     441: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     446: goto          524
     449: astore        13
     451: aload         12
     453: aload         13
     455: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     458: goto          524
     461: aload         11
     463: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     468: goto          524
     471: astore        13
     473: aload         13
     475: astore        12
     477: aload         13
     479: athrow
     480: astore        19
     482: aload         11
     484: ifnull        521
     487: aload         12
     489: ifnull        514
     492: aload         11
     494: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     499: goto          521
     502: astore        20
     504: aload         12
     506: aload         20
     508: invokevirtual #59                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     511: goto          521
     514: aload         11
     516: invokeinterface #105,  1          // InterfaceMethod org/apache/activemq/artemis/utils/LinkedListIterator.close:()V
     521: aload         19
     523: athrow
     524: goto          69
     527: aload         8
     529: invokeinterface #106,  1          // InterfaceMethod org/apache/activemq/artemis/core/transaction/Transaction.commit:()V
     534: lload         4
     536: lreturn
    Exception table:
       from    to  target type
         439   446   449   Class java/lang/Throwable
         103   429   471   Class java/lang/Throwable
         103   429   480   any
         492   499   502   Class java/lang/Throwable
         471   482   480   any

  private java.lang.String getTargetNodeId(org.apache.activemq.artemis.api.core.client.ClientSessionFactory);
    Code:
       0: aload_1
       1: invokeinterface #130,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.getServerLocator:()Lorg/apache/activemq/artemis/api/core/client/ServerLocator;
       6: invokeinterface #131,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ServerLocator.getTopology:()Lorg/apache/activemq/artemis/core/client/impl/Topology;
      11: aload_1
      12: invokeinterface #132,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.getConnectorConfiguration:()Lorg/apache/activemq/artemis/api/core/TransportConfiguration;
      17: invokevirtual #133                // Method org/apache/activemq/artemis/core/client/impl/Topology.getMember:(Lorg/apache/activemq/artemis/api/core/TransportConfiguration;)Lorg/apache/activemq/artemis/core/client/impl/TopologyMemberImpl;
      20: invokevirtual #134                // Method org/apache/activemq/artemis/core/client/impl/TopologyMemberImpl.getNodeId:()Ljava/lang/String;
      23: areturn

  public void scaleDownTransactions(org.apache.activemq.artemis.api.core.client.ClientSessionFactory, org.apache.activemq.artemis.core.transaction.ResourceManager, java.lang.String, java.lang.String) throws java.lang.Exception;
    Code:
       0: aload_1
       1: aload_3
       2: aload         4
       4: iconst_1
       5: iconst_0
       6: iconst_0
       7: iconst_0
       8: iconst_0
       9: invokeinterface #32,  8           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.createSession:(Ljava/lang/String;Ljava/lang/String;ZZZZI)Lorg/apache/activemq/artemis/api/core/client/ClientSession;
      14: astore        5
      16: aload_1
      17: aload_3
      18: aload         4
      20: iconst_0
      21: iconst_1
      22: iconst_1
      23: iconst_0
      24: iconst_0
      25: invokeinterface #32,  8           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.createSession:(Ljava/lang/String;Ljava/lang/String;ZZZZI)Lorg/apache/activemq/artemis/api/core/client/ClientSession;
      30: astore        6
      32: aload_2
      33: invokeinterface #135,  1          // InterfaceMethod org/apache/activemq/artemis/core/transaction/ResourceManager.getPreparedTransactions:()Ljava/util/List;
      38: astore        7
      40: new           #61                 // class java/util/HashMap
      43: dup
      44: invokespecial #62                 // Method java/util/HashMap."<init>":()V
      47: astore        8
      49: aload         7
      51: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      56: astore        9
      58: aload         9
      60: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      65: ifeq          946
      68: aload         9
      70: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      75: checkcast     #136                // class javax/transaction/xa/Xid
      78: astore        10
      80: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
      83: new           #15                 // class java/lang/StringBuilder
      86: dup
      87: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      90: ldc           #137                // String Scaling down transaction:
      92: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      95: aload         10
      97: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     100: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     103: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     108: aload_2
     109: aload         10
     111: invokeinterface #138,  2          // InterfaceMethod org/apache/activemq/artemis/core/transaction/ResourceManager.getTransaction:(Ljavax/transaction/xa/Xid;)Lorg/apache/activemq/artemis/core/transaction/Transaction;
     116: astore        11
     118: aload         5
     120: aload         10
     122: iconst_0
     123: invokeinterface #140,  3          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.start:(Ljavax/transaction/xa/Xid;I)V
     128: aload         11
     130: invokeinterface #141,  1          // InterfaceMethod org/apache/activemq/artemis/core/transaction/Transaction.getAllOperations:()Ljava/util/List;
     135: astore        12
     137: new           #61                 // class java/util/HashMap
     140: dup
     141: invokespecial #62                 // Method java/util/HashMap."<init>":()V
     144: astore        13
     146: aload         12
     148: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     153: astore        14
     155: aload         14
     157: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     162: ifeq          648
     165: aload         14
     167: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     172: checkcast     #142                // class org/apache/activemq/artemis/core/transaction/TransactionOperation
     175: astore        15
     177: aload         15
     179: instanceof    #143                // class org/apache/activemq/artemis/core/postoffice/impl/PostOfficeImpl$AddOperation
     182: ifeq          403
     185: aload         15
     187: checkcast     #143                // class org/apache/activemq/artemis/core/postoffice/impl/PostOfficeImpl$AddOperation
     190: astore        16
     192: aload         16
     194: invokevirtual #144                // Method org/apache/activemq/artemis/core/postoffice/impl/PostOfficeImpl$AddOperation.getRelatedMessageReferences:()Ljava/util/List;
     197: astore        17
     199: aload         17
     201: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     206: astore        18
     208: aload         18
     210: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     215: ifeq          400
     218: aload         18
     220: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     225: checkcast     #75                 // class org/apache/activemq/artemis/core/server/MessageReference
     228: astore        19
     230: aload         19
     232: invokeinterface #76,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getMessage:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     237: astore        20
     239: aload         19
     241: invokeinterface #145,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getQueue:()Lorg/apache/activemq/artemis/core/server/Queue;
     246: astore        21
     248: aload         21
     250: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     255: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
     258: astore        24
     260: aload         8
     262: aload         24
     264: invokeinterface #147,  2          // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     269: ifeq          292
     272: aload         8
     274: aload         24
     276: invokeinterface #148,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     281: checkcast     #149                // class java/lang/Long
     284: invokevirtual #150                // Method java/lang/Long.longValue:()J
     287: lstore        22
     289: goto          324
     292: aload_0
     293: aload         6
     295: aload         21
     297: aload         20
     299: invokeinterface #151,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.getAddress:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     304: invokespecial #1                  // Method createQueueIfNecessaryAndGetID:(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/api/core/SimpleString;)J
     307: lstore        22
     309: aload         8
     311: aload         24
     313: lload         22
     315: invokestatic  #152                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     318: invokeinterface #153,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     323: pop
     324: aload         13
     326: aload         20
     328: invokeinterface #148,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     333: checkcast     #154                // class org/apache/activemq/artemis/api/core/Pair
     336: astore        25
     338: aload         25
     340: ifnonnull     378
     343: new           #154                // class org/apache/activemq/artemis/api/core/Pair
     346: dup
     347: new           #116                // class java/util/ArrayList
     350: dup
     351: invokespecial #117                // Method java/util/ArrayList."<init>":()V
     354: new           #116                // class java/util/ArrayList
     357: dup
     358: invokespecial #117                // Method java/util/ArrayList."<init>":()V
     361: invokespecial #155                // Method org/apache/activemq/artemis/api/core/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     364: astore        25
     366: aload         13
     368: aload         20
     370: aload         25
     372: invokeinterface #153,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     377: pop
     378: aload         25
     380: invokevirtual #156                // Method org/apache/activemq/artemis/api/core/Pair.getA:()Ljava/lang/Object;
     383: checkcast     #157                // class java/util/List
     386: lload         22
     388: invokestatic  #152                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     391: invokeinterface #122,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     396: pop
     397: goto          208
     400: goto          645
     403: aload         15
     405: instanceof    #158                // class org/apache/activemq/artemis/core/server/impl/RefsOperation
     408: ifeq          645
     411: aload         15
     413: checkcast     #158                // class org/apache/activemq/artemis/core/server/impl/RefsOperation
     416: astore        16
     418: aload         16
     420: invokevirtual #159                // Method org/apache/activemq/artemis/core/server/impl/RefsOperation.getReferencesToAcknowledge:()Ljava/util/List;
     423: astore        17
     425: aload         17
     427: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     432: astore        18
     434: aload         18
     436: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     441: ifeq          645
     444: aload         18
     446: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     451: checkcast     #75                 // class org/apache/activemq/artemis/core/server/MessageReference
     454: astore        19
     456: aload         19
     458: invokeinterface #76,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getMessage:()Lorg/apache/activemq/artemis/core/server/ServerMessage;
     463: astore        20
     465: aload         19
     467: invokeinterface #145,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/MessageReference.getQueue:()Lorg/apache/activemq/artemis/core/server/Queue;
     472: astore        21
     474: aload         21
     476: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     481: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
     484: astore        24
     486: aload         8
     488: aload         24
     490: invokeinterface #147,  2          // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     495: ifeq          518
     498: aload         8
     500: aload         24
     502: invokeinterface #148,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     507: checkcast     #149                // class java/lang/Long
     510: invokevirtual #150                // Method java/lang/Long.longValue:()J
     513: lstore        22
     515: goto          550
     518: aload_0
     519: aload         6
     521: aload         21
     523: aload         20
     525: invokeinterface #151,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.getAddress:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     530: invokespecial #1                  // Method createQueueIfNecessaryAndGetID:(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/api/core/SimpleString;)J
     533: lstore        22
     535: aload         8
     537: aload         24
     539: lload         22
     541: invokestatic  #152                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     544: invokeinterface #153,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     549: pop
     550: aload         13
     552: aload         20
     554: invokeinterface #148,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     559: checkcast     #154                // class org/apache/activemq/artemis/api/core/Pair
     562: astore        25
     564: aload         25
     566: ifnonnull     604
     569: new           #154                // class org/apache/activemq/artemis/api/core/Pair
     572: dup
     573: new           #116                // class java/util/ArrayList
     576: dup
     577: invokespecial #117                // Method java/util/ArrayList."<init>":()V
     580: new           #116                // class java/util/ArrayList
     583: dup
     584: invokespecial #117                // Method java/util/ArrayList."<init>":()V
     587: invokespecial #155                // Method org/apache/activemq/artemis/api/core/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     590: astore        25
     592: aload         13
     594: aload         20
     596: aload         25
     598: invokeinterface #153,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     603: pop
     604: aload         25
     606: invokevirtual #156                // Method org/apache/activemq/artemis/api/core/Pair.getA:()Ljava/lang/Object;
     609: checkcast     #157                // class java/util/List
     612: lload         22
     614: invokestatic  #152                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     617: invokeinterface #122,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     622: pop
     623: aload         25
     625: invokevirtual #160                // Method org/apache/activemq/artemis/api/core/Pair.getB:()Ljava/lang/Object;
     628: checkcast     #157                // class java/util/List
     631: lload         22
     633: invokestatic  #152                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     636: invokeinterface #122,  2          // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     641: pop
     642: goto          434
     645: goto          155
     648: aload         5
     650: invokeinterface #33,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createProducer:()Lorg/apache/activemq/artemis/api/core/client/ClientProducer;
     655: astore        14
     657: aload         13
     659: invokeinterface #161,  1          // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
     664: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     669: astore        15
     671: aload         15
     673: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     678: ifeq          922
     681: aload         15
     683: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     688: checkcast     #83                 // class java/util/Map$Entry
     691: astore        16
     693: aload         16
     695: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     700: checkcast     #154                // class org/apache/activemq/artemis/api/core/Pair
     703: invokevirtual #156                // Method org/apache/activemq/artemis/api/core/Pair.getA:()Ljava/lang/Object;
     706: checkcast     #157                // class java/util/List
     709: astore        17
     711: aload         17
     713: invokeinterface #162,  1          // InterfaceMethod java/util/List.size:()I
     718: bipush        8
     720: imul
     721: invokestatic  #92                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     724: astore        18
     726: aload         17
     728: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     733: astore        19
     735: aload         19
     737: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     742: ifeq          771
     745: aload         19
     747: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     752: checkcast     #149                // class java/lang/Long
     755: astore        20
     757: aload         18
     759: aload         20
     761: invokevirtual #150                // Method java/lang/Long.longValue:()J
     764: invokevirtual #93                 // Method java/nio/ByteBuffer.putLong:(J)Ljava/nio/ByteBuffer;
     767: pop
     768: goto          735
     771: aload         16
     773: invokeinterface #84,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     778: checkcast     #163                // class org/apache/activemq/artemis/core/server/ServerMessage
     781: astore        19
     783: aload         19
     785: getstatic     #94                 // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     788: aload         18
     790: invokevirtual #95                 // Method java/nio/ByteBuffer.array:()[B
     793: invokeinterface #164,  3          // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.putBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;[B)Lorg/apache/activemq/artemis/api/core/Message;
     798: pop
     799: aload         16
     801: invokeinterface #85,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     806: checkcast     #154                // class org/apache/activemq/artemis/api/core/Pair
     809: invokevirtual #160                // Method org/apache/activemq/artemis/api/core/Pair.getB:()Ljava/lang/Object;
     812: checkcast     #157                // class java/util/List
     815: astore        17
     817: aload         17
     819: invokeinterface #162,  1          // InterfaceMethod java/util/List.size:()I
     824: ifle          903
     827: aload         17
     829: invokeinterface #162,  1          // InterfaceMethod java/util/List.size:()I
     834: bipush        8
     836: imul
     837: invokestatic  #92                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     840: astore        18
     842: aload         17
     844: invokeinterface #123,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     849: astore        20
     851: aload         20
     853: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     858: ifeq          887
     861: aload         20
     863: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     868: checkcast     #149                // class java/lang/Long
     871: astore        21
     873: aload         18
     875: aload         21
     877: invokevirtual #150                // Method java/lang/Long.longValue:()J
     880: invokevirtual #93                 // Method java/nio/ByteBuffer.putLong:(J)Ljava/nio/ByteBuffer;
     883: pop
     884: goto          851
     887: aload         19
     889: getstatic     #165                // Field org/apache/activemq/artemis/core/message/impl/MessageImpl.HDR_ROUTE_TO_ACK_IDS:Lorg/apache/activemq/artemis/api/core/SimpleString;
     892: aload         18
     894: invokevirtual #95                 // Method java/nio/ByteBuffer.array:()[B
     897: invokeinterface #164,  3          // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.putBytesProperty:(Lorg/apache/activemq/artemis/api/core/SimpleString;[B)Lorg/apache/activemq/artemis/api/core/Message;
     902: pop
     903: aload         14
     905: aload         19
     907: invokeinterface #151,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/ServerMessage.getAddress:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     912: aload         19
     914: invokeinterface #101,  3          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientProducer.send:(Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/Message;)V
     919: goto          671
     922: aload         5
     924: aload         10
     926: ldc           #166                // int 67108864
     928: invokeinterface #167,  3          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.end:(Ljavax/transaction/xa/Xid;I)V
     933: aload         5
     935: aload         10
     937: invokeinterface #168,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.prepare:(Ljavax/transaction/xa/Xid;)I
     942: pop
     943: goto          58
     946: return

  public void scaleDownDuplicateIDs(java.util.Map<org.apache.activemq.artemis.api.core.SimpleString, java.util.List<org.apache.activemq.artemis.api.core.Pair<byte[], java.lang.Long>>>, org.apache.activemq.artemis.api.core.client.ClientSessionFactory, org.apache.activemq.artemis.api.core.SimpleString, java.lang.String, java.lang.String) throws java.lang.Exception;
    Code:
       0: aload_2
       1: aload         4
       3: aload         5
       5: iconst_1
       6: iconst_0
       7: iconst_0
       8: iconst_0
       9: iconst_0
      10: invokeinterface #32,  8           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSessionFactory.createSession:(Ljava/lang/String;Ljava/lang/String;ZZZZI)Lorg/apache/activemq/artemis/api/core/client/ClientSession;
      15: astore        6
      17: aload         6
      19: aload_3
      20: invokeinterface #169,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createProducer:(Lorg/apache/activemq/artemis/api/core/SimpleString;)Lorg/apache/activemq/artemis/api/core/client/ClientProducer;
      25: astore        7
      27: aload_1
      28: invokeinterface #170,  1          // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      33: invokeinterface #35,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      38: astore        8
      40: aload         8
      42: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      47: ifeq          190
      50: aload         8
      52: invokeinterface #37,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      57: checkcast     #25                 // class org/apache/activemq/artemis/api/core/SimpleString
      60: astore        9
      62: aload         6
      64: iconst_0
      65: invokeinterface #171,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createMessage:(Z)Lorg/apache/activemq/artemis/api/core/client/ClientMessage;
      70: astore        10
      72: aload_1
      73: aload         9
      75: invokeinterface #148,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      80: checkcast     #157                // class java/util/List
      83: astore        11
      85: aload         11
      87: invokeinterface #162,  1          // InterfaceMethod java/util/List.size:()I
      92: anewarray     #172                // class java/lang/String
      95: astore        12
      97: iconst_0
      98: istore        13
     100: iload         13
     102: aload         11
     104: invokeinterface #162,  1          // InterfaceMethod java/util/List.size:()I
     109: if_icmpge     152
     112: aload         11
     114: iload         13
     116: invokeinterface #173,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     121: checkcast     #154                // class org/apache/activemq/artemis/api/core/Pair
     124: astore        14
     126: aload         12
     128: iload         13
     130: new           #172                // class java/lang/String
     133: dup
     134: aload         14
     136: invokevirtual #156                // Method org/apache/activemq/artemis/api/core/Pair.getA:()Ljava/lang/Object;
     139: checkcast     #174                // class "[B"
     142: invokespecial #175                // Method java/lang/String."<init>":([B)V
     145: aastore
     146: iinc          13, 1
     149: goto          100
     152: aload         10
     154: ldc           #177                // String core.server
     156: ldc           #178                // String updateDuplicateIdCache
     158: iconst_2
     159: anewarray     #179                // class java/lang/Object
     162: dup
     163: iconst_0
     164: aload         9
     166: invokevirtual #30                 // Method org/apache/activemq/artemis/api/core/SimpleString.toString:()Ljava/lang/String;
     169: aastore
     170: dup
     171: iconst_1
     172: aload         12
     174: aastore
     175: invokestatic  #180                // Method org/apache/activemq/artemis/api/core/management/ManagementHelper.putOperationInvocation:(Lorg/apache/activemq/artemis/api/core/Message;Ljava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V
     178: aload         7
     180: aload         10
     182: invokeinterface #181,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientProducer.send:(Lorg/apache/activemq/artemis/api/core/Message;)V
     187: goto          40
     190: aload         6
     192: invokeinterface #57,  1           // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.close:()V
     197: return

  private long createQueueIfNecessaryAndGetID(org.apache.activemq.artemis.api.core.client.ClientSession, org.apache.activemq.artemis.core.server.Queue, org.apache.activemq.artemis.api.core.SimpleString) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
       8: invokespecial #182                // Method getQueueID:(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/api/core/SimpleString;)Ljava/lang/Integer;
      11: invokevirtual #183                // Method java/lang/Integer.intValue:()I
      14: i2l
      15: lstore        4
      17: lload         4
      19: ldc2_w        #184                // long -1l
      22: lcmp
      23: ifne          179
      26: aload_1
      27: aload_3
      28: aload_2
      29: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
      34: aload_2
      35: invokeinterface #186,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getFilter:()Lorg/apache/activemq/artemis/core/filter/Filter;
      40: ifnonnull     47
      43: aconst_null
      44: goto          58
      47: aload_2
      48: invokeinterface #186,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getFilter:()Lorg/apache/activemq/artemis/core/filter/Filter;
      53: invokeinterface #187,  1          // InterfaceMethod org/apache/activemq/artemis/core/filter/Filter.getFilterString:()Lorg/apache/activemq/artemis/api/core/SimpleString;
      58: aload_2
      59: invokeinterface #188,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.isDurable:()Z
      64: invokeinterface #189,  5          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createQueue:(Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/SimpleString;Lorg/apache/activemq/artemis/api/core/SimpleString;Z)V
      69: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
      72: new           #15                 // class java/lang/StringBuilder
      75: dup
      76: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      79: ldc           #190                // String Failed to get queue ID, creating queue [addressName=
      81: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      84: aload_3
      85: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      88: ldc           #191                // String , queueName=
      90: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      93: aload_2
      94: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
      99: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     102: ldc           #192                // String , filter=
     104: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     107: aload_2
     108: invokeinterface #186,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getFilter:()Lorg/apache/activemq/artemis/core/filter/Filter;
     113: ifnonnull     121
     116: ldc           #193                // String
     118: goto          132
     121: aload_2
     122: invokeinterface #186,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getFilter:()Lorg/apache/activemq/artemis/core/filter/Filter;
     127: invokeinterface #187,  1          // InterfaceMethod org/apache/activemq/artemis/core/filter/Filter.getFilterString:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     132: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     135: ldc           #194                // String , durable=
     137: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     140: aload_2
     141: invokeinterface #188,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.isDurable:()Z
     146: invokevirtual #195                // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     149: ldc           #196                // String ]
     151: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     154: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     157: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     162: aload_0
     163: aload_1
     164: aload_2
     165: invokeinterface #146,  1          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.getName:()Lorg/apache/activemq/artemis/api/core/SimpleString;
     170: invokespecial #182                // Method getQueueID:(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/api/core/SimpleString;)Ljava/lang/Integer;
     173: invokevirtual #183                // Method java/lang/Integer.intValue:()I
     176: i2l
     177: lstore        4
     179: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     182: new           #15                 // class java/lang/StringBuilder
     185: dup
     186: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
     189: ldc           #197                // String ID for
     191: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     194: aload_2
     195: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     198: ldc           #198                // String  is:
     200: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     203: lload         4
     205: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     208: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     211: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
     216: lload         4
     218: lreturn

  private java.lang.Integer getQueueID(org.apache.activemq.artemis.api.core.client.ClientSession, org.apache.activemq.artemis.api.core.SimpleString) throws java.lang.Exception;
    Code:
       0: iconst_m1
       1: invokestatic  #199                // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
       4: astore_3
       5: new           #200                // class org/apache/activemq/artemis/api/core/client/ClientRequestor
       8: dup
       9: aload_1
      10: ldc           #201                // String jms.queue.activemq.management
      12: invokespecial #202                // Method org/apache/activemq/artemis/api/core/client/ClientRequestor."<init>":(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Ljava/lang/String;)V
      15: astore        4
      17: aload_1
      18: iconst_0
      19: invokeinterface #171,  2          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.createMessage:(Z)Lorg/apache/activemq/artemis/api/core/client/ClientMessage;
      24: astore        5
      26: aload         5
      28: new           #15                 // class java/lang/StringBuilder
      31: dup
      32: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      35: ldc           #203                // String core.queue.
      37: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: aload_2
      41: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      44: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      47: ldc           #204                // String ID
      49: invokestatic  #205                // Method org/apache/activemq/artemis/api/core/management/ManagementHelper.putAttribute:(Lorg/apache/activemq/artemis/api/core/Message;Ljava/lang/String;Ljava/lang/String;)V
      52: aload_1
      53: invokeinterface #206,  1          // InterfaceMethod org/apache/activemq/artemis/api/core/client/ClientSession.start:()Lorg/apache/activemq/artemis/api/core/client/ClientSession;
      58: pop
      59: getstatic     #14                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
      62: new           #15                 // class java/lang/StringBuilder
      65: dup
      66: invokespecial #16                 // Method java/lang/StringBuilder."<init>":()V
      69: ldc           #207                // String Requesting ID for:
      71: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      74: aload_2
      75: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      78: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      81: invokeinterface #40,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.debug:(Ljava/lang/Object;)V
      86: aload         4
      88: aload         5
      90: invokevirtual #208                // Method org/apache/activemq/artemis/api/core/client/ClientRequestor.request:(Lorg/apache/activemq/artemis/api/core/client/ClientMessage;)Lorg/apache/activemq/artemis/api/core/client/ClientMessage;
      93: astore        6
      95: aload         6
      97: invokestatic  #209                // Method org/apache/activemq/artemis/api/core/management/ManagementHelper.getResult:(Lorg/apache/activemq/artemis/api/core/Message;)Ljava/lang/Object;
     100: astore        7
     102: aload         7
     104: ifnull        121
     107: aload         7
     109: instanceof    #210                // class java/lang/Integer
     112: ifeq          121
     115: aload         7
     117: checkcast     #210                // class java/lang/Integer
     120: astore_3
     121: aload         4
     123: invokevirtual #211                // Method org/apache/activemq/artemis/api/core/client/ClientRequestor.close:()V
     126: aload_3
     127: areturn

  private void ackMessageOnQueue(org.apache.activemq.artemis.core.transaction.Transaction, org.apache.activemq.artemis.core.server.Queue, org.apache.activemq.artemis.core.server.MessageReference) throws java.lang.Exception;
    Code:
       0: aload_2
       1: aload_1
       2: aload_3
       3: invokeinterface #212,  3          // InterfaceMethod org/apache/activemq/artemis/core/server/Queue.acknowledge:(Lorg/apache/activemq/artemis/core/transaction/Transaction;Lorg/apache/activemq/artemis/core/server/MessageReference;)V
       8: return

  static long access$000(org.apache.activemq.artemis.core.server.impl.ScaleDownHandler, org.apache.activemq.artemis.api.core.client.ClientSession, org.apache.activemq.artemis.core.server.Queue, org.apache.activemq.artemis.api.core.SimpleString) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: invokespecial #1                  // Method createQueueIfNecessaryAndGetID:(Lorg/apache/activemq/artemis/api/core/client/ClientSession;Lorg/apache/activemq/artemis/core/server/Queue;Lorg/apache/activemq/artemis/api/core/SimpleString;)J
       7: lreturn
}

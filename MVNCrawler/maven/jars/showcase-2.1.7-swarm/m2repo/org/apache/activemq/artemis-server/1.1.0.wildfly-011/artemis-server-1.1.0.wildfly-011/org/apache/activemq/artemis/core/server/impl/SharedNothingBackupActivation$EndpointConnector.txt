Compiled from "SharedNothingBackupActivation.java"
class org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation$EndpointConnector implements java.lang.Runnable {
  final org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation this$0;

  private org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation$EndpointConnector(org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
       4: getfield      #4                  // Field org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.clusterControl:Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
       7: invokevirtual #5                  // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getSessionFactory:()Lorg/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal;
      10: iconst_1
      11: invokeinterface #6,  2            // InterfaceMethod org/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal.setReconnectAttempts:(I)V
      16: aload_0
      17: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      20: invokestatic  #7                  // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$200:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum;
      23: aload_0
      24: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      27: getfield      #4                  // Field org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.clusterControl:Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
      30: invokevirtual #5                  // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.getSessionFactory:()Lorg/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal;
      33: invokevirtual #8                  // Method org/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum.setSessionFactory:(Lorg/apache/activemq/artemis/core/client/impl/ClientSessionFactoryInternal;)V
      36: aload_0
      37: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      40: getfield      #4                  // Field org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.clusterControl:Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
      43: invokevirtual #9                  // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.authorize:()V
      46: aload_0
      47: aload_0
      48: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      51: getfield      #4                  // Field org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.clusterControl:Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
      54: invokespecial #10                 // Method connectToReplicationEndpoint:(Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
      57: pop
      58: aload_0
      59: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      62: invokestatic  #11                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$300:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
      65: invokevirtual #12                 // Method org/apache/activemq/artemis/core/replication/ReplicationEndpoint.start:()V
      68: aload_0
      69: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      72: getfield      #4                  // Field org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.clusterControl:Lorg/apache/activemq/artemis/core/server/cluster/ClusterControl;
      75: aload_0
      76: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      79: invokestatic  #13                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$400:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Z
      82: aload_0
      83: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      86: invokestatic  #14                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$500:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/server/cluster/ha/ReplicaPolicy;
      89: invokevirtual #15                 // Method org/apache/activemq/artemis/core/server/cluster/ha/ReplicaPolicy.getClusterName:()Ljava/lang/String;
      92: invokevirtual #16                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.announceReplicatingBackupToLive:(ZLjava/lang/String;)V
      95: goto          121
      98: astore_1
      99: getstatic     #18                 // Field org/apache/activemq/artemis/core/server/ActiveMQServerLogger.LOGGER:Lorg/apache/activemq/artemis/core/server/ActiveMQServerLogger;
     102: aload_1
     103: invokeinterface #19,  2           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQServerLogger.replicationStartProblem:(Ljava/lang/Exception;)V
     108: aload_0
     109: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
     112: invokestatic  #7                  // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$200:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum;
     115: getstatic     #20                 // Field org/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum$BACKUP_ACTIVATION.FAILURE_REPLICATING:Lorg/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum$BACKUP_ACTIVATION;
     118: invokevirtual #21                 // Method org/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum.causeExit:(Lorg/apache/activemq/artemis/core/server/cluster/qourum/SharedNothingBackupQuorum$BACKUP_ACTIVATION;)V
     121: return
    Exception table:
       from    to  target type
           0    95    98   Class java/lang/Exception

  private synchronized org.apache.activemq.artemis.core.replication.ReplicationEndpoint connectToReplicationEndpoint(org.apache.activemq.artemis.core.server.cluster.ClusterControl) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
       4: invokestatic  #22                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$100:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/server/impl/ActiveMQServerImpl;
       7: invokevirtual #23                 // Method org/apache/activemq/artemis/core/server/impl/ActiveMQServerImpl.isStarted:()Z
      10: ifne          15
      13: aconst_null
      14: areturn
      15: aload_0
      16: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      19: invokestatic  #22                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$100:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/server/impl/ActiveMQServerImpl;
      22: invokevirtual #24                 // Method org/apache/activemq/artemis/core/server/impl/ActiveMQServerImpl.getHAPolicy:()Lorg/apache/activemq/artemis/core/server/cluster/ha/HAPolicy;
      25: invokeinterface #25,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/cluster/ha/HAPolicy.isBackup:()Z
      30: ifne          42
      33: getstatic     #26                 // Field org/apache/activemq/artemis/core/server/ActiveMQMessageBundle.BUNDLE:Lorg/apache/activemq/artemis/core/server/ActiveMQMessageBundle;
      36: invokeinterface #27,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQMessageBundle.serverNotBackupServer:()Lorg/apache/activemq/artemis/api/core/ActiveMQIllegalStateException;
      41: athrow
      42: aload_1
      43: invokevirtual #28                 // Method org/apache/activemq/artemis/core/server/cluster/ClusterControl.createReplicationChannel:()Lorg/apache/activemq/artemis/core/protocol/core/Channel;
      46: astore_2
      47: aload_2
      48: aload_0
      49: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      52: invokestatic  #11                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$300:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
      55: invokeinterface #29,  2           // InterfaceMethod org/apache/activemq/artemis/core/protocol/core/Channel.setHandler:(Lorg/apache/activemq/artemis/core/protocol/core/ChannelHandler;)V
      60: aload_0
      61: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      64: invokestatic  #11                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$300:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
      67: invokevirtual #30                 // Method org/apache/activemq/artemis/core/replication/ReplicationEndpoint.getChannel:()Lorg/apache/activemq/artemis/core/protocol/core/Channel;
      70: ifnull        82
      73: getstatic     #26                 // Field org/apache/activemq/artemis/core/server/ActiveMQMessageBundle.BUNDLE:Lorg/apache/activemq/artemis/core/server/ActiveMQMessageBundle;
      76: invokeinterface #31,  1           // InterfaceMethod org/apache/activemq/artemis/core/server/ActiveMQMessageBundle.alreadyHaveReplicationServer:()Lorg/apache/activemq/artemis/api/core/ActiveMQIllegalStateException;
      81: athrow
      82: aload_0
      83: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      86: invokestatic  #11                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$300:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
      89: aload_2
      90: invokevirtual #32                 // Method org/apache/activemq/artemis/core/replication/ReplicationEndpoint.setChannel:(Lorg/apache/activemq/artemis/core/protocol/core/Channel;)V
      93: aload_0
      94: getfield      #2                  // Field this$0:Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;
      97: invokestatic  #11                 // Method org/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation.access$300:(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)Lorg/apache/activemq/artemis/core/replication/ReplicationEndpoint;
     100: areturn

  org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation$EndpointConnector(org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation, org.apache.activemq.artemis.core.server.impl.SharedNothingBackupActivation$1);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(Lorg/apache/activemq/artemis/core/server/impl/SharedNothingBackupActivation;)V
       5: return
}

Compiled from "ThresholdStorageProvider.java"
final class org.apache.james.mime4j.storage.ThresholdStorageProvider$ThresholdStorageOutputStream extends org.apache.james.mime4j.storage.StorageOutputStream {
  private final org.apache.james.mime4j.util.ByteArrayBuffer head;

  private org.apache.james.mime4j.storage.StorageOutputStream tail;

  final org.apache.james.mime4j.storage.ThresholdStorageProvider this$0;

  public org.apache.james.mime4j.storage.ThresholdStorageProvider$ThresholdStorageOutputStream(org.apache.james.mime4j.storage.ThresholdStorageProvider);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;
       5: aload_0
       6: invokespecial #2                  // Method org/apache/james/mime4j/storage/StorageOutputStream."<init>":()V
       9: aload_1
      10: invokestatic  #3                  // Method org/apache/james/mime4j/storage/ThresholdStorageProvider.access$000:(Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;)I
      13: sipush        1024
      16: invokestatic  #4                  // Method java/lang/Math.min:(II)I
      19: istore_2
      20: aload_0
      21: new           #5                  // class org/apache/james/mime4j/util/ByteArrayBuffer
      24: dup
      25: iload_2
      26: invokespecial #6                  // Method org/apache/james/mime4j/util/ByteArrayBuffer."<init>":(I)V
      29: putfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      32: return

  public void close() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #8                  // Method org/apache/james/mime4j/storage/StorageOutputStream.close:()V
       4: aload_0
       5: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
       8: ifnull        18
      11: aload_0
      12: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
      15: invokevirtual #8                  // Method org/apache/james/mime4j/storage/StorageOutputStream.close:()V
      18: return

  protected void write0(byte[], int, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;
       4: invokestatic  #3                  // Method org/apache/james/mime4j/storage/ThresholdStorageProvider.access$000:(Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;)I
       7: aload_0
       8: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      11: invokevirtual #10                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.length:()I
      14: isub
      15: istore        4
      17: iload         4
      19: ifle          51
      22: iload         4
      24: iload_3
      25: invokestatic  #4                  // Method java/lang/Math.min:(II)I
      28: istore        5
      30: aload_0
      31: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      34: aload_1
      35: iload_2
      36: iload         5
      38: invokevirtual #11                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.append:([BII)V
      41: iload_2
      42: iload         5
      44: iadd
      45: istore_2
      46: iload_3
      47: iload         5
      49: isub
      50: istore_3
      51: iload_3
      52: ifle          88
      55: aload_0
      56: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
      59: ifnonnull     78
      62: aload_0
      63: aload_0
      64: getfield      #1                  // Field this$0:Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;
      67: invokestatic  #12                 // Method org/apache/james/mime4j/storage/ThresholdStorageProvider.access$100:(Lorg/apache/james/mime4j/storage/ThresholdStorageProvider;)Lorg/apache/james/mime4j/storage/StorageProvider;
      70: invokeinterface #13,  1           // InterfaceMethod org/apache/james/mime4j/storage/StorageProvider.createStorageOutputStream:()Lorg/apache/james/mime4j/storage/StorageOutputStream;
      75: putfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
      78: aload_0
      79: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
      82: aload_1
      83: iload_2
      84: iload_3
      85: invokevirtual #14                 // Method org/apache/james/mime4j/storage/StorageOutputStream.write:([BII)V
      88: return

  protected org.apache.james.mime4j.storage.Storage toStorage0() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
       4: ifnonnull     29
       7: new           #15                 // class org/apache/james/mime4j/storage/MemoryStorageProvider$MemoryStorage
      10: dup
      11: aload_0
      12: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      15: invokevirtual #16                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.buffer:()[B
      18: aload_0
      19: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      22: invokevirtual #10                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.length:()I
      25: invokespecial #17                 // Method org/apache/james/mime4j/storage/MemoryStorageProvider$MemoryStorage."<init>":([BI)V
      28: areturn
      29: new           #18                 // class org/apache/james/mime4j/storage/ThresholdStorageProvider$ThresholdStorage
      32: dup
      33: aload_0
      34: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      37: invokevirtual #16                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.buffer:()[B
      40: aload_0
      41: getfield      #7                  // Field head:Lorg/apache/james/mime4j/util/ByteArrayBuffer;
      44: invokevirtual #10                 // Method org/apache/james/mime4j/util/ByteArrayBuffer.length:()I
      47: aload_0
      48: getfield      #9                  // Field tail:Lorg/apache/james/mime4j/storage/StorageOutputStream;
      51: invokevirtual #19                 // Method org/apache/james/mime4j/storage/StorageOutputStream.toStorage:()Lorg/apache/james/mime4j/storage/Storage;
      54: invokespecial #20                 // Method org/apache/james/mime4j/storage/ThresholdStorageProvider$ThresholdStorage."<init>":([BILorg/apache/james/mime4j/storage/Storage;)V
      57: areturn
}

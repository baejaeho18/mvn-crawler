Compiled from "AbstractJBossMarshaller.java"
public abstract class org.infinispan.commons.marshall.jboss.AbstractJBossMarshaller extends org.infinispan.commons.marshall.AbstractMarshaller implements org.infinispan.commons.marshall.StreamingMarshaller {
  protected static final org.infinispan.commons.logging.Log log;

  protected static final boolean trace;

  protected static final org.infinispan.commons.marshall.jboss.JBossMarshallerFactory factory;

  protected static final int DEF_INSTANCE_COUNT;

  protected static final int DEF_CLASS_COUNT;

  private static final int PER_THREAD_REUSABLE_INSTANCES;

  private static final int RIVER_INTERNAL_BUFFER;

  protected final org.jboss.marshalling.MarshallingConfiguration baseCfg;

  private final org.infinispan.commons.util.concurrent.ConcurrentWeakKeyHashMap<java.lang.Thread, org.infinispan.commons.marshall.jboss.AbstractJBossMarshaller$PerThreadInstanceHolder> marshallerTL;

  public org.infinispan.commons.marshall.jboss.AbstractJBossMarshaller();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/infinispan/commons/marshall/AbstractMarshaller."<init>":()V
       4: aload_0
       5: new           #2                  // class org/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap
       8: dup
       9: invokespecial #3                  // Method org/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap."<init>":()V
      12: putfield      #4                  // Field marshallerTL:Lorg/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap;
      15: aload_0
      16: new           #5                  // class org/jboss/marshalling/MarshallingConfiguration
      19: dup
      20: invokespecial #6                  // Method org/jboss/marshalling/MarshallingConfiguration."<init>":()V
      23: putfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      26: aload_0
      27: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      30: new           #8                  // class org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$DebuggingExceptionListener
      33: dup
      34: invokespecial #9                  // Method org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$DebuggingExceptionListener."<init>":()V
      37: invokevirtual #10                 // Method org/jboss/marshalling/MarshallingConfiguration.setExceptionListener:(Lorg/jboss/marshalling/ExceptionListener;)V
      40: aload_0
      41: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      44: new           #11                 // class org/infinispan/commons/marshall/jboss/SerializeWithExtFactory
      47: dup
      48: invokespecial #12                 // Method org/infinispan/commons/marshall/jboss/SerializeWithExtFactory."<init>":()V
      51: invokevirtual #13                 // Method org/jboss/marshalling/MarshallingConfiguration.setClassExternalizerFactory:(Lorg/jboss/marshalling/ClassExternalizerFactory;)V
      54: aload_0
      55: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      58: bipush        16
      60: invokevirtual #15                 // Method org/jboss/marshalling/MarshallingConfiguration.setInstanceCount:(I)V
      63: aload_0
      64: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      67: bipush        8
      69: invokevirtual #16                 // Method org/jboss/marshalling/MarshallingConfiguration.setClassCount:(I)V
      72: aload_0
      73: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      76: iconst_3
      77: invokevirtual #17                 // Method org/jboss/marshalling/MarshallingConfiguration.setVersion:(I)V
      80: return

  public final void objectToObjectStream(java.lang.Object, java.io.ObjectOutput) throws java.io.IOException;
    Code:
       0: aload_2
       1: aload_1
       2: invokeinterface #18,  2           // InterfaceMethod java/io/ObjectOutput.writeObject:(Ljava/lang/Object;)V
       7: return

  protected final org.infinispan.commons.io.ByteBuffer objectToBuffer(java.lang.Object, int) throws java.io.IOException;
    Code:
       0: new           #19                 // class org/infinispan/commons/io/ExposedByteArrayOutputStream
       3: dup
       4: iload_2
       5: invokespecial #20                 // Method org/infinispan/commons/io/ExposedByteArrayOutputStream."<init>":(I)V
       8: astore_3
       9: aload_0
      10: aload_3
      11: iconst_0
      12: iload_2
      13: invokevirtual #21                 // Method startObjectOutput:(Ljava/io/OutputStream;ZI)Ljava/io/ObjectOutput;
      16: astore        4
      18: aload_0
      19: aload_1
      20: aload         4
      22: invokevirtual #22                 // Method objectToObjectStream:(Ljava/lang/Object;Ljava/io/ObjectOutput;)V
      25: aload_0
      26: aload         4
      28: invokevirtual #23                 // Method finishObjectOutput:(Ljava/io/ObjectOutput;)V
      31: goto          45
      34: astore        5
      36: aload_0
      37: aload         4
      39: invokevirtual #23                 // Method finishObjectOutput:(Ljava/io/ObjectOutput;)V
      42: aload         5
      44: athrow
      45: new           #24                 // class org/infinispan/commons/io/ByteBufferImpl
      48: dup
      49: aload_3
      50: invokevirtual #25                 // Method org/infinispan/commons/io/ExposedByteArrayOutputStream.getRawBuffer:()[B
      53: iconst_0
      54: aload_3
      55: invokevirtual #26                 // Method org/infinispan/commons/io/ExposedByteArrayOutputStream.size:()I
      58: invokespecial #27                 // Method org/infinispan/commons/io/ByteBufferImpl."<init>":([BII)V
      61: areturn
    Exception table:
       from    to  target type
          18    25    34   any
          34    36    34   any

  public final java.io.ObjectOutput startObjectOutput(java.io.OutputStream, boolean, int) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #28                 // Method getPerThreadInstanceHolder:()Lorg/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder;
       4: astore        4
       6: aload         4
       8: iload_3
       9: invokevirtual #29                 // Method org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder.getMarshaller:(I)Lorg/infinispan/commons/marshall/jboss/ExtendedRiverMarshaller;
      12: astore        5
      14: aload         5
      16: aload_1
      17: invokestatic  #30                 // Method org/jboss/marshalling/Marshalling.createByteOutput:(Ljava/io/OutputStream;)Lorg/jboss/marshalling/ByteOutput;
      20: invokeinterface #31,  2           // InterfaceMethod org/jboss/marshalling/Marshaller.start:(Lorg/jboss/marshalling/ByteOutput;)V
      25: aload         5
      27: areturn

  public final void finishObjectOutput(java.io.ObjectOutput);
    Code:
       0: getstatic     #32                 // Field trace:Z
       3: ifeq          16
       6: getstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
       9: ldc           #34                 // String Stop marshaller
      11: invokeinterface #35,  2           // InterfaceMethod org/infinispan/commons/logging/Log.trace:(Ljava/lang/Object;)V
      16: aload_1
      17: checkcast     #36                 // class org/jboss/marshalling/Marshaller
      20: invokeinterface #37,  1           // InterfaceMethod org/jboss/marshalling/Marshaller.finish:()V
      25: goto          29
      28: astore_2
      29: return
    Exception table:
       from    to  target type
           0    25    28   Class java/io/IOException

  public final java.lang.Object objectFromByteBuffer(byte[], int, int) throws java.io.IOException, java.lang.ClassNotFoundException;
    Code:
       0: new           #39                 // class java/io/ByteArrayInputStream
       3: dup
       4: aload_1
       5: iload_2
       6: iload_3
       7: invokespecial #40                 // Method java/io/ByteArrayInputStream."<init>":([BII)V
      10: astore        4
      12: aload_0
      13: aload         4
      15: iconst_0
      16: invokevirtual #41                 // Method startObjectInput:(Ljava/io/InputStream;Z)Ljava/io/ObjectInput;
      19: astore        5
      21: aconst_null
      22: astore        6
      24: aload_0
      25: aload         5
      27: invokevirtual #42                 // Method objectFromObjectStream:(Ljava/io/ObjectInput;)Ljava/lang/Object;
      30: astore        6
      32: aload_0
      33: aload         5
      35: invokevirtual #43                 // Method finishObjectInput:(Ljava/io/ObjectInput;)V
      38: goto          52
      41: astore        7
      43: aload_0
      44: aload         5
      46: invokevirtual #43                 // Method finishObjectInput:(Ljava/io/ObjectInput;)V
      49: aload         7
      51: athrow
      52: aload         6
      54: areturn
    Exception table:
       from    to  target type
          24    32    41   any
          41    43    41   any

  public final java.io.ObjectInput startObjectInput(java.io.InputStream, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #28                 // Method getPerThreadInstanceHolder:()Lorg/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder;
       4: astore_3
       5: aload_3
       6: invokevirtual #44                 // Method org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder.getUnmarshaller:()Lorg/jboss/marshalling/Unmarshaller;
       9: astore        4
      11: getstatic     #32                 // Field trace:Z
      14: ifeq          38
      17: getstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
      20: ldc           #45                 // String Start unmarshaller after retrieving marshaller from %s
      22: iload_2
      23: ifeq          31
      26: ldc           #46                 // String factory
      28: goto          33
      31: ldc           #47                 // String thread local
      33: invokeinterface #48,  3           // InterfaceMethod org/infinispan/commons/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      38: aload         4
      40: aload_1
      41: invokestatic  #49                 // Method org/jboss/marshalling/Marshalling.createByteInput:(Ljava/io/InputStream;)Lorg/jboss/marshalling/ByteInput;
      44: invokeinterface #50,  2           // InterfaceMethod org/jboss/marshalling/Unmarshaller.start:(Lorg/jboss/marshalling/ByteInput;)V
      49: aload         4
      51: areturn

  public final java.lang.Object objectFromObjectStream(java.io.ObjectInput) throws java.io.IOException, java.lang.ClassNotFoundException;
    Code:
       0: aload_1
       1: invokeinterface #51,  1           // InterfaceMethod java/io/ObjectInput.readObject:()Ljava/lang/Object;
       6: areturn

  public final void finishObjectInput(java.io.ObjectInput);
    Code:
       0: getstatic     #32                 // Field trace:Z
       3: ifeq          16
       6: getstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
       9: ldc           #52                 // String Stop unmarshaller
      11: invokeinterface #35,  2           // InterfaceMethod org/infinispan/commons/logging/Log.trace:(Ljava/lang/Object;)V
      16: aload_1
      17: ifnull        29
      20: aload_1
      21: checkcast     #53                 // class org/jboss/marshalling/Unmarshaller
      24: invokeinterface #54,  1           // InterfaceMethod org/jboss/marshalling/Unmarshaller.finish:()V
      29: goto          33
      32: astore_2
      33: return
    Exception table:
       from    to  target type
           0    29    32   Class java/io/IOException

  public boolean isMarshallable(java.lang.Object) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokevirtual #55                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       4: astore_2
       5: aload_0
       6: getfield      #56                 // Field marshallableTypeHints:Lorg/infinispan/commons/marshall/MarshallableTypeHints;
       9: aload_2
      10: invokevirtual #57                 // Method org/infinispan/commons/marshall/MarshallableTypeHints.isKnownMarshallable:(Ljava/lang/Class;)Z
      13: istore_3
      14: iload_3
      15: ifeq          56
      18: aload_0
      19: getfield      #56                 // Field marshallableTypeHints:Lorg/infinispan/commons/marshall/MarshallableTypeHints;
      22: aload_2
      23: invokevirtual #58                 // Method org/infinispan/commons/marshall/MarshallableTypeHints.isMarshallable:(Ljava/lang/Class;)Z
      26: istore        4
      28: getstatic     #32                 // Field trace:Z
      31: ifeq          53
      34: getstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
      37: ldc           #59                 // String Marshallable type \'%s\' known and is marshallable=%b
      39: aload_2
      40: invokevirtual #60                 // Method java/lang/Class.getName:()Ljava/lang/String;
      43: iload         4
      45: invokestatic  #61                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      48: invokeinterface #62,  4           // InterfaceMethod org/infinispan/commons/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      53: iload         4
      55: ireturn
      56: aload_0
      57: aload_1
      58: invokevirtual #63                 // Method isMarshallableCandidate:(Ljava/lang/Object;)Z
      61: ifeq          112
      64: iconst_1
      65: istore        4
      67: aload_0
      68: aload_1
      69: invokevirtual #64                 // Method objectToBuffer:(Ljava/lang/Object;)Lorg/infinispan/commons/io/ByteBuffer;
      72: pop
      73: aload_0
      74: getfield      #56                 // Field marshallableTypeHints:Lorg/infinispan/commons/marshall/MarshallableTypeHints;
      77: aload_2
      78: iload         4
      80: invokevirtual #65                 // Method org/infinispan/commons/marshall/MarshallableTypeHints.markMarshallable:(Ljava/lang/Class;Z)V
      83: goto          109
      86: astore        5
      88: iconst_0
      89: istore        4
      91: aload         5
      93: athrow
      94: astore        6
      96: aload_0
      97: getfield      #56                 // Field marshallableTypeHints:Lorg/infinispan/commons/marshall/MarshallableTypeHints;
     100: aload_2
     101: iload         4
     103: invokevirtual #65                 // Method org/infinispan/commons/marshall/MarshallableTypeHints.markMarshallable:(Ljava/lang/Class;Z)V
     106: aload         6
     108: athrow
     109: iload         4
     111: ireturn
     112: iconst_0
     113: ireturn
    Exception table:
       from    to  target type
          67    73    86   Class java/lang/Exception
          67    73    94   any
          86    96    94   any

  public void start();
    Code:
       0: return

  public void stop();
    Code:
       0: aload_0
       1: getfield      #56                 // Field marshallableTypeHints:Lorg/infinispan/commons/marshall/MarshallableTypeHints;
       4: invokevirtual #67                 // Method org/infinispan/commons/marshall/MarshallableTypeHints.clear:()V
       7: aload_0
       8: getfield      #4                  // Field marshallerTL:Lorg/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap;
      11: invokevirtual #68                 // Method org/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap.clear:()V
      14: return

  protected boolean isMarshallableCandidate(java.lang.Object);
    Code:
       0: aload_1
       1: instanceof    #69                 // class java/io/Serializable
       4: ireturn

  private org.infinispan.commons.marshall.jboss.AbstractJBossMarshaller$PerThreadInstanceHolder getPerThreadInstanceHolder();
    Code:
       0: invokestatic  #70                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       3: astore_1
       4: aload_0
       5: getfield      #4                  // Field marshallerTL:Lorg/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap;
       8: aload_1
       9: invokevirtual #71                 // Method org/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      12: checkcast     #72                 // class org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder
      15: astore_2
      16: aload_2
      17: ifnonnull     55
      20: new           #72                 // class org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder
      23: dup
      24: aload_0
      25: getfield      #7                  // Field baseCfg:Lorg/jboss/marshalling/MarshallingConfiguration;
      28: invokevirtual #73                 // Method org/jboss/marshalling/MarshallingConfiguration.clone:()Lorg/jboss/marshalling/MarshallingConfiguration;
      31: invokespecial #74                 // Method org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller$PerThreadInstanceHolder."<init>":(Lorg/jboss/marshalling/MarshallingConfiguration;)V
      34: astore_2
      35: aload_0
      36: getfield      #4                  // Field marshallerTL:Lorg/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap;
      39: aload_1
      40: aload_2
      41: invokevirtual #75                 // Method org/infinispan/commons/util/concurrent/ConcurrentWeakKeyHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      44: ifnull        55
      47: new           #76                 // class java/lang/IllegalStateException
      50: dup
      51: invokespecial #77                 // Method java/lang/IllegalStateException."<init>":()V
      54: athrow
      55: aload_2
      56: areturn

  static {};
    Code:
       0: ldc           #14                 // class org/infinispan/commons/marshall/jboss/AbstractJBossMarshaller
       2: invokestatic  #78                 // Method org/infinispan/commons/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/commons/logging/Log;
       5: putstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
       8: getstatic     #33                 // Field log:Lorg/infinispan/commons/logging/Log;
      11: invokeinterface #79,  1           // InterfaceMethod org/infinispan/commons/logging/Log.isTraceEnabled:()Z
      16: putstatic     #32                 // Field trace:Z
      19: new           #80                 // class org/infinispan/commons/marshall/jboss/JBossMarshallerFactory
      22: dup
      23: invokespecial #81                 // Method org/infinispan/commons/marshall/jboss/JBossMarshallerFactory."<init>":()V
      26: putstatic     #82                 // Field factory:Lorg/infinispan/commons/marshall/jboss/JBossMarshallerFactory;
      29: return
}

Compiled from "InstanceReusingAdvancedExternalizer.java"
public abstract class org.infinispan.commons.marshall.InstanceReusingAdvancedExternalizer<T> extends org.infinispan.commons.marshall.AbstractExternalizer<T> {
  private static java.lang.ThreadLocal<org.infinispan.commons.marshall.InstanceReusingAdvancedExternalizer$ReusableData> cachedWriteObjects;

  private static java.lang.ThreadLocal<java.util.List<java.lang.Object>> cachedReadObjects;

  private static final int ID_NO_REPEAT;

  private static final int ID_REPEAT_OBJECT_NEAR;

  private static final int ID_REPEAT_OBJECT_NEARISH;

  private static final int ID_REPEAT_OBJECT_FAR;

  private final boolean hasChildren;

  public org.infinispan.commons.marshall.InstanceReusingAdvancedExternalizer();
    Code:
       0: aload_0
       1: iconst_1
       2: invokespecial #1                  // Method "<init>":(Z)V
       5: return

  public org.infinispan.commons.marshall.InstanceReusingAdvancedExternalizer(boolean);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method org/infinispan/commons/marshall/AbstractExternalizer."<init>":()V
       4: aload_0
       5: iload_1
       6: putfield      #3                  // Field hasChildren:Z
       9: return

  public final void writeObject(java.io.ObjectOutput, T) throws java.io.IOException;
    Code:
       0: getstatic     #4                  // Field cachedWriteObjects:Ljava/lang/ThreadLocal;
       3: invokevirtual #5                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
       6: checkcast     #6                  // class org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData
       9: astore_3
      10: aload_0
      11: getfield      #3                  // Field hasChildren:Z
      14: ifeq          42
      17: aload_3
      18: ifnonnull     42
      21: new           #6                  // class org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData
      24: dup
      25: invokespecial #7                  // Method org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData."<init>":()V
      28: astore_3
      29: getstatic     #4                  // Field cachedWriteObjects:Ljava/lang/ThreadLocal;
      32: aload_3
      33: invokevirtual #8                  // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      36: iconst_1
      37: istore        4
      39: goto          45
      42: iconst_0
      43: istore        4
      45: aload_3
      46: ifnull        143
      49: aload_3
      50: getfield      #9                  // Field org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData.map:Lorg/jboss/marshalling/util/IdentityIntMap;
      53: aload_2
      54: iconst_m1
      55: invokevirtual #10                 // Method org/jboss/marshalling/util/IdentityIntMap.get:(Ljava/lang/Object;I)I
      58: dup
      59: istore        5
      61: iconst_m1
      62: if_icmpeq     143
      65: iload         5
      67: aload_3
      68: getfield      #11                 // Field org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData.offset:I
      71: isub
      72: istore        6
      74: iload         6
      76: sipush        -256
      79: if_icmplt     100
      82: aload_1
      83: iconst_2
      84: invokeinterface #13,  2           // InterfaceMethod java/io/ObjectOutput.write:(I)V
      89: aload_1
      90: iload         6
      92: invokeinterface #13,  2           // InterfaceMethod java/io/ObjectOutput.write:(I)V
      97: goto          140
     100: iload         6
     102: ldc           #14                 // int -65536
     104: if_icmplt     125
     107: aload_1
     108: iconst_3
     109: invokeinterface #13,  2           // InterfaceMethod java/io/ObjectOutput.write:(I)V
     114: aload_1
     115: iload         6
     117: invokeinterface #15,  2           // InterfaceMethod java/io/ObjectOutput.writeShort:(I)V
     122: goto          140
     125: aload_1
     126: iconst_4
     127: invokeinterface #13,  2           // InterfaceMethod java/io/ObjectOutput.write:(I)V
     132: aload_1
     133: iload         5
     135: invokeinterface #16,  2           // InterfaceMethod java/io/ObjectOutput.writeInt:(I)V
     140: goto          179
     143: aload_1
     144: iconst_1
     145: invokeinterface #13,  2           // InterfaceMethod java/io/ObjectOutput.write:(I)V
     150: aload_0
     151: aload_1
     152: aload_2
     153: invokevirtual #17                 // Method doWriteObject:(Ljava/io/ObjectOutput;Ljava/lang/Object;)V
     156: aload_3
     157: ifnull        179
     160: aload_3
     161: getfield      #9                  // Field org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData.map:Lorg/jboss/marshalling/util/IdentityIntMap;
     164: aload_2
     165: aload_3
     166: dup
     167: getfield      #11                 // Field org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData.offset:I
     170: dup_x1
     171: iconst_1
     172: iadd
     173: putfield      #11                 // Field org/infinispan/commons/marshall/InstanceReusingAdvancedExternalizer$ReusableData.offset:I
     176: invokevirtual #18                 // Method org/jboss/marshalling/util/IdentityIntMap.put:(Ljava/lang/Object;I)V
     179: iload         4
     181: ifeq          209
     184: getstatic     #4                  // Field cachedWriteObjects:Ljava/lang/ThreadLocal;
     187: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     190: goto          209
     193: astore        7
     195: iload         4
     197: ifeq          206
     200: getstatic     #4                  // Field cachedWriteObjects:Ljava/lang/ThreadLocal;
     203: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     206: aload         7
     208: athrow
     209: return
    Exception table:
       from    to  target type
          45   179   193   any
         193   195   193   any

  public abstract void doWriteObject(java.io.ObjectOutput, T) throws java.io.IOException;

  public final T readObject(java.io.ObjectInput) throws java.io.IOException, java.lang.ClassNotFoundException;
    Code:
       0: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
       3: invokevirtual #5                  // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
       6: checkcast     #21                 // class java/util/List
       9: astore_2
      10: aload_0
      11: getfield      #3                  // Field hasChildren:Z
      14: ifeq          41
      17: aload_2
      18: ifnonnull     41
      21: new           #22                 // class java/util/ArrayList
      24: dup
      25: invokespecial #23                 // Method java/util/ArrayList."<init>":()V
      28: astore_2
      29: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
      32: aload_2
      33: invokevirtual #8                  // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      36: iconst_1
      37: istore_3
      38: goto          43
      41: iconst_0
      42: istore_3
      43: aload_1
      44: invokeinterface #24,  1           // InterfaceMethod java/io/ObjectInput.read:()I
      49: istore        4
      51: iload         4
      53: tableswitch   { // 1 to 4
                     1: 84
                     2: 121
                     3: 162
                     4: 202
               default: 228
          }
      84: aload_0
      85: aload_1
      86: invokevirtual #25                 // Method doReadObject:(Ljava/io/ObjectInput;)Ljava/lang/Object;
      89: astore        5
      91: aload_2
      92: ifnull        104
      95: aload_2
      96: aload         5
      98: invokeinterface #26,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     103: pop
     104: aload         5
     106: astore        6
     108: iload_3
     109: ifeq          118
     112: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
     115: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     118: aload         6
     120: areturn
     121: aload_1
     122: invokeinterface #24,  1           // InterfaceMethod java/io/ObjectInput.read:()I
     127: sipush        -256
     130: ior
     131: istore        6
     133: aload_0
     134: aload_2
     135: iload         6
     137: aload_2
     138: invokeinterface #27,  1           // InterfaceMethod java/util/List.size:()I
     143: iadd
     144: invokespecial #28                 // Method getFromCache:(Ljava/util/List;I)Ljava/lang/Object;
     147: astore        7
     149: iload_3
     150: ifeq          159
     153: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
     156: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     159: aload         7
     161: areturn
     162: aload_1
     163: invokeinterface #29,  1           // InterfaceMethod java/io/ObjectInput.readShort:()S
     168: ldc           #14                 // int -65536
     170: ior
     171: istore        6
     173: aload_0
     174: aload_2
     175: iload         6
     177: aload_2
     178: invokeinterface #27,  1           // InterfaceMethod java/util/List.size:()I
     183: iadd
     184: invokespecial #28                 // Method getFromCache:(Ljava/util/List;I)Ljava/lang/Object;
     187: astore        7
     189: iload_3
     190: ifeq          199
     193: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
     196: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     199: aload         7
     201: areturn
     202: aload_0
     203: aload_2
     204: aload_1
     205: invokeinterface #30,  1           // InterfaceMethod java/io/ObjectInput.readInt:()I
     210: invokespecial #28                 // Method getFromCache:(Ljava/util/List;I)Ljava/lang/Object;
     213: astore        7
     215: iload_3
     216: ifeq          225
     219: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
     222: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     225: aload         7
     227: areturn
     228: new           #31                 // class java/lang/IllegalStateException
     231: dup
     232: new           #32                 // class java/lang/StringBuilder
     235: dup
     236: invokespecial #33                 // Method java/lang/StringBuilder."<init>":()V
     239: ldc           #34                 // String Unexpected byte encountered:
     241: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     244: iload         4
     246: invokevirtual #36                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     249: invokevirtual #37                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     252: invokespecial #38                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     255: athrow
     256: astore        8
     258: iload_3
     259: ifeq          268
     262: getstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
     265: invokevirtual #19                 // Method java/lang/ThreadLocal.remove:()V
     268: aload         8
     270: athrow
    Exception table:
       from    to  target type
          43   108   256   any
         121   149   256   any
         162   189   256   any
         202   215   256   any
         228   258   256   any

  private T getFromCache(java.util.List<java.lang.Object>, int) throws java.io.InvalidObjectException;
    Code:
       0: aload_1
       1: iload_2
       2: invokeinterface #39,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
       7: astore_3
       8: aload_3
       9: ifnull        14
      12: aload_3
      13: areturn
      14: goto          18
      17: astore_3
      18: new           #41                 // class java/io/InvalidObjectException
      21: dup
      22: new           #32                 // class java/lang/StringBuilder
      25: dup
      26: invokespecial #33                 // Method java/lang/StringBuilder."<init>":()V
      29: ldc           #42                 // String Attempt to read a backreference for
      31: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: aload_0
      35: invokevirtual #43                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      38: invokevirtual #44                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      41: ldc           #45                 // String  with an invalid ID (absolute
      43: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: iload_2
      47: invokevirtual #36                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      50: ldc           #46                 // String )
      52: invokevirtual #35                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      55: invokevirtual #37                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      58: invokespecial #47                 // Method java/io/InvalidObjectException."<init>":(Ljava/lang/String;)V
      61: athrow
    Exception table:
       from    to  target type
           0    13    17   Class java/lang/IndexOutOfBoundsException

  public abstract T doReadObject(java.io.ObjectInput) throws java.io.IOException, java.lang.ClassNotFoundException;

  static {};
    Code:
       0: new           #48                 // class java/lang/ThreadLocal
       3: dup
       4: invokespecial #49                 // Method java/lang/ThreadLocal."<init>":()V
       7: putstatic     #4                  // Field cachedWriteObjects:Ljava/lang/ThreadLocal;
      10: new           #48                 // class java/lang/ThreadLocal
      13: dup
      14: invokespecial #49                 // Method java/lang/ThreadLocal."<init>":()V
      17: putstatic     #20                 // Field cachedReadObjects:Ljava/lang/ThreadLocal;
      20: return
}

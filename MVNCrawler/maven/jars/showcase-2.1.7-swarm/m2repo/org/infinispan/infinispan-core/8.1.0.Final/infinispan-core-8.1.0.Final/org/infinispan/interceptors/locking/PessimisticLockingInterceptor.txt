Compiled from "PessimisticLockingInterceptor.java"
public class org.infinispan.interceptors.locking.PessimisticLockingInterceptor extends org.infinispan.interceptors.locking.AbstractTxLockingInterceptor {
  private org.infinispan.commands.CommandsFactory cf;

  private org.infinispan.statetransfer.StateTransferManager stateTransferManager;

  private static final org.infinispan.util.logging.Log log;

  public org.infinispan.interceptors.locking.PessimisticLockingInterceptor();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/infinispan/interceptors/locking/AbstractTxLockingInterceptor."<init>":()V
       4: return

  protected org.infinispan.util.logging.Log getLog();
    Code:
       0: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       3: areturn

  public void init(org.infinispan.commands.CommandsFactory, org.infinispan.statetransfer.StateTransferManager);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #3                  // Field cf:Lorg/infinispan/commands/CommandsFactory;
       5: aload_0
       6: aload_2
       7: putfield      #4                  // Field stateTransferManager:Lorg/infinispan/statetransfer/StateTransferManager;
      10: return

  protected final java.lang.Object visitDataReadCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.DataCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: invokeinterface #5,  1            // InterfaceMethod org/infinispan/context/InvocationContext.isInTxScope:()Z
       6: ifeq          61
       9: aload_2
      10: getstatic     #6                  // Field org/infinispan/context/Flag.FORCE_WRITE_LOCK:Lorg/infinispan/context/Flag;
      13: invokeinterface #7,  2            // InterfaceMethod org/infinispan/commands/DataCommand.hasFlag:(Lorg/infinispan/context/Flag;)Z
      18: ifeq          61
      21: aload_0
      22: aload_2
      23: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
      26: ifne          61
      29: aload_0
      30: aload_1
      31: aload_2
      32: invokeinterface #9,  1            // InterfaceMethod org/infinispan/commands/DataCommand.getKey:()Ljava/lang/Object;
      37: aload_2
      38: invokespecial #10                 // Method acquireRemoteIfNeeded:(Lorg/infinispan/context/InvocationContext;Ljava/lang/Object;Lorg/infinispan/commands/LocalFlagAffectedCommand;)V
      41: aload_0
      42: aload_1
      43: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      46: aload_2
      47: invokeinterface #9,  1            // InterfaceMethod org/infinispan/commands/DataCommand.getKey:()Ljava/lang/Object;
      52: aload_0
      53: aload_2
      54: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
      57: invokevirtual #13                 // Method lockOrRegisterBackupLock:(Lorg/infinispan/context/impl/TxInvocationContext;Ljava/lang/Object;J)Z
      60: pop
      61: aload_0
      62: aload_1
      63: aload_2
      64: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      67: astore_3
      68: aload_1
      69: invokeinterface #5,  1            // InterfaceMethod org/infinispan/context/InvocationContext.isInTxScope:()Z
      74: ifne          87
      77: aload_0
      78: getfield      #15                 // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
      81: aload_1
      82: invokeinterface #16,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.unlockAll:(Lorg/infinispan/context/InvocationContext;)V
      87: aload_3
      88: areturn
      89: astore_3
      90: aload_0
      91: aload_1
      92: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
      95: aload_3
      96: athrow
      97: astore        4
      99: aload_1
     100: invokeinterface #5,  1            // InterfaceMethod org/infinispan/context/InvocationContext.isInTxScope:()Z
     105: ifne          118
     108: aload_0
     109: getfield      #15                 // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
     112: aload_1
     113: invokeinterface #16,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.unlockAll:(Lorg/infinispan/context/InvocationContext;)V
     118: aload         4
     120: athrow
    Exception table:
       from    to  target type
           0    68    89   Class java/lang/Throwable
           0    68    97   any
          89    99    97   any

  public java.lang.Object visitGetAllCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.read.GetAllCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: invokeinterface #5,  1            // InterfaceMethod org/infinispan/context/InvocationContext.isInTxScope:()Z
       6: ifeq          55
       9: aload_2
      10: getstatic     #6                  // Field org/infinispan/context/Flag.FORCE_WRITE_LOCK:Lorg/infinispan/context/Flag;
      13: invokevirtual #19                 // Method org/infinispan/commands/read/GetAllCommand.hasFlag:(Lorg/infinispan/context/Flag;)Z
      16: ifeq          55
      19: aload_0
      20: aload_2
      21: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
      24: ifne          55
      27: aload_0
      28: aload_1
      29: aload_2
      30: invokevirtual #20                 // Method org/infinispan/commands/read/GetAllCommand.getKeys:()Ljava/util/Collection;
      33: aload_2
      34: invokespecial #21                 // Method acquireAllRemoteIfNeeded:(Lorg/infinispan/context/InvocationContext;Ljava/util/Collection;Lorg/infinispan/commands/LocalFlagAffectedCommand;)V
      37: aload_0
      38: aload_1
      39: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      42: aload_2
      43: invokevirtual #20                 // Method org/infinispan/commands/read/GetAllCommand.getKeys:()Ljava/util/Collection;
      46: aload_0
      47: aload_2
      48: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
      51: invokevirtual #22                 // Method lockAllOrRegisterBackupLock:(Lorg/infinispan/context/impl/TxInvocationContext;Ljava/util/Collection;J)Ljava/util/Collection;
      54: pop
      55: aload_0
      56: aload_1
      57: aload_2
      58: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      61: areturn
      62: astore_3
      63: aload_0
      64: aload_1
      65: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
      68: aload_3
      69: athrow
    Exception table:
       from    to  target type
           0    61    62   Class java/lang/Throwable

  public java.lang.Object visitPrepareCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.PrepareCommand) throws java.lang.Throwable;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokevirtual #23                 // Method invokeNextAndCommitIf1Pc:(Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/commands/tx/PrepareCommand;)Ljava/lang/Object;
       6: areturn

  public java.lang.Object visitPutMapCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.write.PutMapCommand) throws java.lang.Throwable;
    Code:
       0: aload_0
       1: aload_2
       2: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
       5: ifne          40
       8: aload_2
       9: invokevirtual #24                 // Method org/infinispan/commands/write/PutMapCommand.getMap:()Ljava/util/Map;
      12: invokeinterface #25,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      17: astore_3
      18: aload_0
      19: aload_1
      20: aload_3
      21: aload_2
      22: invokespecial #21                 // Method acquireAllRemoteIfNeeded:(Lorg/infinispan/context/InvocationContext;Ljava/util/Collection;Lorg/infinispan/commands/LocalFlagAffectedCommand;)V
      25: aload_0
      26: aload_1
      27: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      30: aload_3
      31: aload_0
      32: aload_2
      33: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
      36: invokevirtual #22                 // Method lockAllOrRegisterBackupLock:(Lorg/infinispan/context/impl/TxInvocationContext;Ljava/util/Collection;J)Ljava/util/Collection;
      39: pop
      40: aload_0
      41: aload_1
      42: aload_2
      43: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      46: areturn
      47: astore_3
      48: aload_0
      49: aload_1
      50: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
      53: aload_3
      54: athrow
    Exception table:
       from    to  target type
           0    46    47   Class java/lang/Throwable

  protected java.lang.Object visitDataWriteCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.write.DataWriteCommand) throws java.lang.Throwable;
    Code:
       0: aload_0
       1: aload_2
       2: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
       5: ifne          40
       8: aload_0
       9: aload_1
      10: aload_2
      11: invokeinterface #26,  1           // InterfaceMethod org/infinispan/commands/write/DataWriteCommand.getKey:()Ljava/lang/Object;
      16: aload_2
      17: invokespecial #10                 // Method acquireRemoteIfNeeded:(Lorg/infinispan/context/InvocationContext;Ljava/lang/Object;Lorg/infinispan/commands/LocalFlagAffectedCommand;)V
      20: aload_0
      21: aload_1
      22: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      25: aload_2
      26: invokeinterface #26,  1           // InterfaceMethod org/infinispan/commands/write/DataWriteCommand.getKey:()Ljava/lang/Object;
      31: aload_0
      32: aload_2
      33: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
      36: invokevirtual #13                 // Method lockOrRegisterBackupLock:(Lorg/infinispan/context/impl/TxInvocationContext;Ljava/lang/Object;J)Z
      39: pop
      40: aload_0
      41: aload_1
      42: aload_2
      43: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      46: areturn
      47: astore_3
      48: aload_3
      49: athrow
      50: astore_3
      51: aload_0
      52: aload_1
      53: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
      56: aload_3
      57: athrow
    Exception table:
       from    to  target type
           0    46    47   Class org/infinispan/statetransfer/OutdatedTopologyException
           0    46    50   Class java/lang/Throwable

  public java.lang.Object visitApplyDeltaCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.write.ApplyDeltaCommand) throws java.lang.Throwable;
    Code:
       0: aload_2
       1: invokevirtual #28                 // Method org/infinispan/commands/write/ApplyDeltaCommand.getCompositeKeys:()[Ljava/lang/Object;
       4: astore_3
       5: aload_0
       6: aload_2
       7: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
      10: ifne          62
      13: new           #29                 // class java/util/HashSet
      16: dup
      17: aload_3
      18: invokestatic  #30                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      21: invokespecial #31                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      24: astore        4
      26: aload_0
      27: aload_1
      28: aload         4
      30: aload_2
      31: invokespecial #21                 // Method acquireAllRemoteIfNeeded:(Lorg/infinispan/context/InvocationContext;Ljava/util/Collection;Lorg/infinispan/commands/LocalFlagAffectedCommand;)V
      34: aload_0
      35: getfield      #32                 // Field cdl:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      38: aload_2
      39: invokevirtual #33                 // Method org/infinispan/commands/write/ApplyDeltaCommand.getKey:()Ljava/lang/Object;
      42: invokeinterface #34,  2           // InterfaceMethod org/infinispan/interceptors/locking/ClusteringDependentLogic.localNodeIsOwner:(Ljava/lang/Object;)Z
      47: ifeq          62
      50: aload_0
      51: aload_1
      52: aload         4
      54: aload_0
      55: aload_2
      56: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
      59: invokevirtual #35                 // Method lockAllAndRecord:(Lorg/infinispan/context/InvocationContext;Ljava/util/Collection;J)V
      62: aload_0
      63: aload_1
      64: aload_2
      65: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      68: areturn
      69: astore        4
      71: aload_0
      72: aload_1
      73: aload         4
      75: invokevirtual #36                 // Method cleanLocksAndRethrow:(Lorg/infinispan/context/InvocationContext;Ljava/lang/Throwable;)Ljava/lang/Throwable;
      78: athrow
    Exception table:
       from    to  target type
           5    68    69   Class java/lang/Throwable

  public java.lang.Object visitLockControlCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.control.LockControlCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: invokeinterface #37,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isInTxScope:()Z
       6: ifne          19
       9: new           #38                 // class java/lang/IllegalStateException
      12: dup
      13: ldc           #39                 // String Locks should only be acquired within the scope of a transaction!
      15: invokespecial #40                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      18: athrow
      19: aload_0
      20: aload_2
      21: invokevirtual #8                  // Method hasSkipLocking:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)Z
      24: istore_3
      25: iload_3
      26: ifeq          36
      29: aload_0
      30: aload_1
      31: aload_2
      32: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      35: areturn
      36: aload_1
      37: invokeinterface #41,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      42: ifeq          171
      45: aload_2
      46: invokevirtual #42                 // Method org/infinispan/commands/control/LockControlCommand.multipleKeys:()Z
      49: ifne          72
      52: aload_0
      53: getfield      #32                 // Field cdl:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      56: aload_2
      57: invokevirtual #43                 // Method org/infinispan/commands/control/LockControlCommand.getSingleKey:()Ljava/lang/Object;
      60: invokeinterface #44,  2           // InterfaceMethod org/infinispan/interceptors/locking/ClusteringDependentLogic.localNodeIsPrimaryOwner:(Ljava/lang/Object;)Z
      65: ifeq          72
      68: iconst_1
      69: goto          73
      72: iconst_0
      73: istore        4
      75: iload         4
      77: ifeq          87
      80: aload_0
      81: invokespecial #45                 // Method isStateTransferInProgress:()Z
      84: ifeq          91
      87: iconst_1
      88: goto          92
      91: iconst_0
      92: istore        5
      94: iload         5
      96: ifeq          161
      99: aload_2
     100: getstatic     #46                 // Field org/infinispan/context/Flag.CACHE_MODE_LOCAL:Lorg/infinispan/context/Flag;
     103: invokevirtual #47                 // Method org/infinispan/commands/control/LockControlCommand.hasFlag:(Lorg/infinispan/context/Flag;)Z
     106: ifne          161
     109: aload_1
     110: invokeinterface #48,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
     115: checkcast     #49                 // class org/infinispan/transaction/impl/LocalTransaction
     118: astore        6
     120: aload         6
     122: invokevirtual #50                 // Method org/infinispan/transaction/impl/LocalTransaction.getAffectedKeys:()Ljava/util/Set;
     125: aload_2
     126: invokevirtual #51                 // Method org/infinispan/commands/control/LockControlCommand.getKeys:()Ljava/util/Collection;
     129: invokeinterface #52,  2           // InterfaceMethod java/util/Set.containsAll:(Ljava/util/Collection;)Z
     134: ifne          147
     137: aload_0
     138: aload_1
     139: aload_2
     140: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
     143: pop
     144: goto          161
     147: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
     150: ldc           #53                 // String Already own locks on keys: %s, skipping remote call
     152: aload_2
     153: invokevirtual #51                 // Method org/infinispan/commands/control/LockControlCommand.getKeys:()Ljava/util/Collection;
     156: invokeinterface #54,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
     161: aload_1
     162: aload_2
     163: invokevirtual #51                 // Method org/infinispan/commands/control/LockControlCommand.getKeys:()Ljava/util/Collection;
     166: invokeinterface #55,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.addAllAffectedKeys:(Ljava/util/Collection;)V
     171: aload_2
     172: invokevirtual #56                 // Method org/infinispan/commands/control/LockControlCommand.isUnlock:()Z
     175: ifeq          206
     178: aload_1
     179: invokeinterface #41,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
     184: ifeq          197
     187: new           #57                 // class java/lang/AssertionError
     190: dup
     191: ldc           #58                 // String There\'s no advancedCache.unlock so this must have originated remotely.
     193: invokespecial #59                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
     196: athrow
     197: aload_0
     198: aload_1
     199: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
     202: getstatic     #60                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
     205: areturn
     206: aload_0
     207: aload_1
     208: aload_2
     209: invokevirtual #51                 // Method org/infinispan/commands/control/LockControlCommand.getKeys:()Ljava/util/Collection;
     212: aload_0
     213: aload_2
     214: invokevirtual #12                 // Method getLockTimeoutMillis:(Lorg/infinispan/commands/LocalFlagAffectedCommand;)J
     217: invokevirtual #22                 // Method lockAllOrRegisterBackupLock:(Lorg/infinispan/context/impl/TxInvocationContext;Ljava/util/Collection;J)Ljava/util/Collection;
     220: pop
     221: getstatic     #61                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
     224: areturn
     225: astore_3
     226: aload_0
     227: aload_1
     228: invokespecial #18                 // Method releaseLocksOnFailureBeforePrepare:(Lorg/infinispan/context/InvocationContext;)V
     231: aload_3
     232: athrow
    Exception table:
       from    to  target type
          19    35   225   Class java/lang/Throwable
          36   205   225   Class java/lang/Throwable
         206   224   225   Class java/lang/Throwable

  private void acquireAllRemoteIfNeeded(org.infinispan.context.InvocationContext, java.util.Collection<?>, org.infinispan.commands.LocalFlagAffectedCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: invokeinterface #62,  1           // InterfaceMethod org/infinispan/context/InvocationContext.isOriginLocal:()Z
       6: ifeq          28
       9: aload_0
      10: aload_2
      11: invokespecial #63                 // Method isLockOwner:(Ljava/util/Collection;)Z
      14: ifeq          24
      17: aload_0
      18: invokespecial #45                 // Method isStateTransferInProgress:()Z
      21: ifeq          28
      24: iconst_1
      25: goto          29
      28: iconst_0
      29: istore        4
      31: iload         4
      33: ifeq          125
      36: aload_3
      37: getstatic     #46                 // Field org/infinispan/context/Flag.CACHE_MODE_LOCAL:Lorg/infinispan/context/Flag;
      40: invokeinterface #64,  2           // InterfaceMethod org/infinispan/commands/LocalFlagAffectedCommand.hasFlag:(Lorg/infinispan/context/Flag;)Z
      45: ifne          125
      48: aload_1
      49: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      52: astore        5
      54: aload         5
      56: invokeinterface #48,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
      61: checkcast     #49                 // class org/infinispan/transaction/impl/LocalTransaction
      64: astore        6
      66: aload         6
      68: invokevirtual #50                 // Method org/infinispan/transaction/impl/LocalTransaction.getAffectedKeys:()Ljava/util/Set;
      71: aload_2
      72: invokeinterface #52,  2           // InterfaceMethod java/util/Set.containsAll:(Ljava/util/Collection;)Z
      77: ifeq          92
      80: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
      83: ldc           #65                 // String We already have lock for keys %s, skip remote lock acquisition
      85: aload_2
      86: invokeinterface #54,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      91: return
      92: aload_0
      93: getfield      #3                  // Field cf:Lorg/infinispan/commands/CommandsFactory;
      96: aload_2
      97: aload_3
      98: invokeinterface #66,  1           // InterfaceMethod org/infinispan/commands/LocalFlagAffectedCommand.getFlags:()Ljava/util/Set;
     103: aload         5
     105: invokeinterface #67,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     110: invokeinterface #68,  4           // InterfaceMethod org/infinispan/commands/CommandsFactory.buildLockControlCommand:(Ljava/util/Collection;Ljava/util/Set;Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/commands/control/LockControlCommand;
     115: astore        7
     117: aload_0
     118: aload_1
     119: aload         7
     121: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
     124: pop
     125: aload_1
     126: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
     129: aload_2
     130: invokeinterface #55,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.addAllAffectedKeys:(Ljava/util/Collection;)V
     135: return

  private void acquireRemoteIfNeeded(org.infinispan.context.InvocationContext, java.lang.Object, org.infinispan.commands.LocalFlagAffectedCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: invokeinterface #62,  1           // InterfaceMethod org/infinispan/context/InvocationContext.isOriginLocal:()Z
       6: ifeq          28
       9: aload_0
      10: aload_2
      11: invokespecial #69                 // Method isLockOwner:(Ljava/lang/Object;)Z
      14: ifeq          24
      17: aload_0
      18: invokespecial #45                 // Method isStateTransferInProgress:()Z
      21: ifeq          28
      24: iconst_1
      25: goto          29
      28: iconst_0
      29: istore        4
      31: iload         4
      33: ifeq          125
      36: aload_3
      37: getstatic     #46                 // Field org/infinispan/context/Flag.CACHE_MODE_LOCAL:Lorg/infinispan/context/Flag;
      40: invokeinterface #64,  2           // InterfaceMethod org/infinispan/commands/LocalFlagAffectedCommand.hasFlag:(Lorg/infinispan/context/Flag;)Z
      45: ifne          125
      48: aload_1
      49: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      52: astore        5
      54: aload         5
      56: invokeinterface #48,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
      61: checkcast     #49                 // class org/infinispan/transaction/impl/LocalTransaction
      64: astore        6
      66: aload         6
      68: invokevirtual #50                 // Method org/infinispan/transaction/impl/LocalTransaction.getAffectedKeys:()Ljava/util/Set;
      71: aload_2
      72: invokeinterface #70,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
      77: ifeq          92
      80: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
      83: ldc           #71                 // String We already have lock for key %s, skip remote lock acquisition
      85: aload_2
      86: invokeinterface #54,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      91: return
      92: aload_0
      93: getfield      #3                  // Field cf:Lorg/infinispan/commands/CommandsFactory;
      96: aload_2
      97: aload_3
      98: invokeinterface #66,  1           // InterfaceMethod org/infinispan/commands/LocalFlagAffectedCommand.getFlags:()Ljava/util/Set;
     103: aload         5
     105: invokeinterface #67,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     110: invokeinterface #72,  4           // InterfaceMethod org/infinispan/commands/CommandsFactory.buildLockControlCommand:(Ljava/lang/Object;Ljava/util/Set;Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/commands/control/LockControlCommand;
     115: astore        7
     117: aload_0
     118: aload_1
     119: aload         7
     121: invokevirtual #14                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
     124: pop
     125: aload_1
     126: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
     129: aload_2
     130: invokeinterface #73,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.addAffectedKey:(Ljava/lang/Object;)V
     135: return

  private boolean isLockOwner(java.util.Collection<?>);
    Code:
       0: aload_1
       1: invokeinterface #74,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
       6: astore_2
       7: aload_2
       8: invokeinterface #75,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      13: ifeq          42
      16: aload_2
      17: invokeinterface #76,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      22: astore_3
      23: aload_3
      24: aload_0
      25: getfield      #32                 // Field cdl:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      28: invokestatic  #77                 // Method org/infinispan/util/concurrent/locks/LockUtil.getLockOwnership:(Ljava/lang/Object;Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;)Lorg/infinispan/util/concurrent/locks/LockUtil$LockOwnership;
      31: getstatic     #78                 // Field org/infinispan/util/concurrent/locks/LockUtil$LockOwnership.PRIMARY:Lorg/infinispan/util/concurrent/locks/LockUtil$LockOwnership;
      34: if_acmpeq     39
      37: iconst_0
      38: ireturn
      39: goto          7
      42: iconst_1
      43: ireturn

  private boolean isLockOwner(java.lang.Object);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #32                 // Field cdl:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
       5: invokestatic  #77                 // Method org/infinispan/util/concurrent/locks/LockUtil.getLockOwnership:(Ljava/lang/Object;Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;)Lorg/infinispan/util/concurrent/locks/LockUtil$LockOwnership;
       8: getstatic     #78                 // Field org/infinispan/util/concurrent/locks/LockUtil$LockOwnership.PRIMARY:Lorg/infinispan/util/concurrent/locks/LockUtil$LockOwnership;
      11: if_acmpne     18
      14: iconst_1
      15: goto          19
      18: iconst_0
      19: ireturn

  private boolean isStateTransferInProgress();
    Code:
       0: aload_0
       1: getfield      #4                  // Field stateTransferManager:Lorg/infinispan/statetransfer/StateTransferManager;
       4: ifnull        23
       7: aload_0
       8: getfield      #4                  // Field stateTransferManager:Lorg/infinispan/statetransfer/StateTransferManager;
      11: invokeinterface #79,  1           // InterfaceMethod org/infinispan/statetransfer/StateTransferManager.isStateTransferInProgress:()Z
      16: ifeq          23
      19: iconst_1
      20: goto          24
      23: iconst_0
      24: ireturn

  private void releaseLocksOnFailureBeforePrepare(org.infinispan.context.InvocationContext);
    Code:
       0: aload_0
       1: getfield      #15                 // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
       4: aload_1
       5: invokeinterface #16,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.unlockAll:(Lorg/infinispan/context/InvocationContext;)V
      10: aload_1
      11: invokeinterface #62,  1           // InterfaceMethod org/infinispan/context/InvocationContext.isOriginLocal:()Z
      16: ifeq          97
      19: aload_1
      20: invokeinterface #5,  1            // InterfaceMethod org/infinispan/context/InvocationContext.isInTxScope:()Z
      25: ifeq          97
      28: aload_0
      29: getfield      #80                 // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      32: ifnull        97
      35: aload_1
      36: checkcast     #11                 // class org/infinispan/context/impl/TxInvocationContext
      39: astore_2
      40: aload_0
      41: getfield      #3                  // Field cf:Lorg/infinispan/commands/CommandsFactory;
      44: aconst_null
      45: aload_2
      46: invokeinterface #67,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      51: invokeinterface #81,  3           // InterfaceMethod org/infinispan/commands/CommandsFactory.buildTxCompletionNotificationCommand:(Ljavax/transaction/xa/Xid;Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/commands/remote/recovery/TxCompletionNotificationCommand;
      56: astore_3
      57: aload_2
      58: invokeinterface #48,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
      63: checkcast     #49                 // class org/infinispan/transaction/impl/LocalTransaction
      66: astore        4
      68: aload_0
      69: getfield      #80                 // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      72: aload         4
      74: invokevirtual #82                 // Method org/infinispan/transaction/impl/LocalTransaction.getRemoteLocksAcquired:()Ljava/util/Collection;
      77: aload_3
      78: aload_0
      79: getfield      #80                 // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      82: iconst_0
      83: getstatic     #83                 // Field org/infinispan/remoting/inboundhandler/DeliverOrder.NONE:Lorg/infinispan/remoting/inboundhandler/DeliverOrder;
      86: invokeinterface #84,  3           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.getDefaultRpcOptions:(ZLorg/infinispan/remoting/inboundhandler/DeliverOrder;)Lorg/infinispan/remoting/rpc/RpcOptions;
      91: invokeinterface #85,  4           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.invokeRemotely:(Ljava/util/Collection;Lorg/infinispan/commands/ReplicableCommand;Lorg/infinispan/remoting/rpc/RpcOptions;)Ljava/util/Map;
      96: pop
      97: return

  static {};
    Code:
       0: ldc           #86                 // class org/infinispan/interceptors/locking/PessimisticLockingInterceptor
       2: invokestatic  #87                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       8: return
}

Compiled from "DefaultPendingLockManager.java"
class org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl implements org.infinispan.util.concurrent.locks.PendingLockPromise, java.util.concurrent.Callable<java.lang.Void> {
  private final java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction> pendingTransactions;

  private final long expectedEndTime;

  private final java.util.concurrent.CompletableFuture<java.lang.Void> notifier;

  private volatile org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction timedOutTransaction;

  final org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager this$0;

  private org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl(java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction>, long);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #5                  // Field this$0:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;
       5: aload_0
       6: invokespecial #6                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: aload_2
      11: putfield      #7                  // Field pendingTransactions:Ljava/util/Collection;
      14: aload_0
      15: lload_3
      16: putfield      #8                  // Field expectedEndTime:J
      19: aload_0
      20: new           #9                  // class java/util/concurrent/CompletableFuture
      23: dup
      24: invokespecial #10                 // Method java/util/concurrent/CompletableFuture."<init>":()V
      27: putfield      #11                 // Field notifier:Ljava/util/concurrent/CompletableFuture;
      30: return

  public boolean isReady();
    Code:
       0: aload_0
       1: getfield      #12                 // Field timedOutTransaction:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
       4: ifnull        9
       7: iconst_1
       8: ireturn
       9: aload_0
      10: getfield      #7                  // Field pendingTransactions:Ljava/util/Collection;
      13: invokeinterface #13,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      18: astore_1
      19: aload_1
      20: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      25: ifeq          93
      28: aload_1
      29: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      34: checkcast     #16                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction
      37: astore_2
      38: aload_2
      39: invokestatic  #17                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction.access$200:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;)Ljava/util/concurrent/CompletableFuture;
      42: invokevirtual #18                 // Method java/util/concurrent/CompletableFuture.isDone:()Z
      45: ifne          90
      48: aload_0
      49: getfield      #5                  // Field this$0:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;
      52: invokestatic  #19                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager.access$500:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;)Lorg/infinispan/util/TimeService;
      55: aload_0
      56: getfield      #8                  // Field expectedEndTime:J
      59: getstatic     #20                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      62: invokeinterface #21,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
      67: lconst_0
      68: lcmp
      69: ifgt          77
      72: aload_0
      73: aload_2
      74: putfield      #12                 // Field timedOutTransaction:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
      77: aload_0
      78: getfield      #12                 // Field timedOutTransaction:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
      81: ifnull        88
      84: iconst_1
      85: goto          89
      88: iconst_0
      89: ireturn
      90: goto          19
      93: iconst_1
      94: ireturn

  public void addListener(org.infinispan.util.concurrent.locks.PendingLockListener);
    Code:
       0: aload_0
       1: getfield      #11                 // Field notifier:Ljava/util/concurrent/CompletableFuture;
       4: aload_1
       5: dup
       6: invokevirtual #22                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       9: pop
      10: invokedynamic #23,  0             // InvokeDynamic #0:run:(Lorg/infinispan/util/concurrent/locks/PendingLockListener;)Ljava/lang/Runnable;
      15: invokevirtual #24                 // Method java/util/concurrent/CompletableFuture.thenRun:(Ljava/lang/Runnable;)Ljava/util/concurrent/CompletableFuture;
      18: pop
      19: return

  public boolean hasTimedOut();
    Code:
       0: aload_0
       1: getfield      #12                 // Field timedOutTransaction:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  public long getRemainingTimeout();
    Code:
       0: aload_0
       1: getfield      #5                  // Field this$0:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;
       4: invokestatic  #19                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager.access$500:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;)Lorg/infinispan/util/TimeService;
       7: aload_0
       8: getfield      #8                  // Field expectedEndTime:J
      11: getstatic     #20                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      14: invokeinterface #21,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
      19: lreturn

  public java.lang.Void call() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokevirtual #25                 // Method isReady:()Z
       4: pop
       5: aconst_null
       6: areturn

  private void onRelease();
    Code:
       0: aload_0
       1: invokevirtual #25                 // Method isReady:()Z
       4: ifeq          16
       7: aload_0
       8: getfield      #11                 // Field notifier:Ljava/util/concurrent/CompletableFuture;
      11: aconst_null
      12: invokevirtual #26                 // Method java/util/concurrent/CompletableFuture.complete:(Ljava/lang/Object;)Z
      15: pop
      16: return

  private org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction getPendingTransaction();
    Code:
       0: aload_0
       1: getfield      #12                 // Field timedOutTransaction:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
       4: areturn

  private void registerListenerInCacheTransactions();
    Code:
       0: aload_0
       1: getfield      #7                  // Field pendingTransactions:Ljava/util/Collection;
       4: invokeinterface #13,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          46
      19: aload_1
      20: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #16                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction
      28: astore_2
      29: aload_2
      30: invokestatic  #17                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction.access$200:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;)Ljava/util/concurrent/CompletableFuture;
      33: aload_0
      34: invokedynamic #27,  0             // InvokeDynamic #1:run:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;)Ljava/lang/Runnable;
      39: invokevirtual #24                 // Method java/util/concurrent/CompletableFuture.thenRun:(Ljava/lang/Runnable;)Ljava/util/concurrent/CompletableFuture;
      42: pop
      43: goto          10
      46: return

  private void await() throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #11                 // Field notifier:Ljava/util/concurrent/CompletableFuture;
       4: aload_0
       5: getfield      #5                  // Field this$0:Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;
       8: invokestatic  #19                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager.access$500:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;)Lorg/infinispan/util/TimeService;
      11: aload_0
      12: getfield      #8                  // Field expectedEndTime:J
      15: getstatic     #20                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      18: invokeinterface #21,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
      23: getstatic     #20                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      26: invokevirtual #28                 // Method java/util/concurrent/CompletableFuture.get:(JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
      29: pop
      30: goto          46
      33: astore_1
      34: new           #30                 // class java/lang/IllegalStateException
      37: dup
      38: ldc           #31                 // String Should never happen.
      40: aload_1
      41: invokespecial #32                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      44: athrow
      45: astore_1
      46: aload_0
      47: invokevirtual #25                 // Method isReady:()Z
      50: pop
      51: return
    Exception table:
       from    to  target type
           0    30    33   Class java/util/concurrent/ExecutionException
           0    30    45   Class java/util/concurrent/TimeoutException

  public java.lang.Object call() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokevirtual #34                 // Method call:()Ljava/lang/Void;
       4: areturn

  org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager, java.util.Collection, long, org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$1);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: lload_3
       4: invokespecial #4                  // Method "<init>":(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;Ljava/util/Collection;J)V
       7: return

  static void access$100(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl);
    Code:
       0: aload_0
       1: invokespecial #3                  // Method registerListenerInCacheTransactions:()V
       4: return

  static void access$300(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: invokespecial #2                  // Method await:()V
       4: return

  static org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction access$400(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method getPendingTransaction:()Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
       4: areturn
}

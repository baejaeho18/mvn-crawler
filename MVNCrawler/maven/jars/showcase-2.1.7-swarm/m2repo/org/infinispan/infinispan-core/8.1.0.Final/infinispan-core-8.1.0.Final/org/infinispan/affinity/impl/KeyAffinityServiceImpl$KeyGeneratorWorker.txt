Compiled from "KeyAffinityServiceImpl.java"
class org.infinispan.affinity.impl.KeyAffinityServiceImpl$KeyGeneratorWorker implements java.lang.Runnable {
  private volatile boolean isActive;

  private volatile boolean isStopped;

  final org.infinispan.affinity.impl.KeyAffinityServiceImpl this$0;

  private org.infinispan.affinity.impl.KeyAffinityServiceImpl$KeyGeneratorWorker(org.infinispan.affinity.impl.KeyAffinityServiceImpl);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: aload_0
      10: iconst_0
      11: putfield      #4                  // Field isStopped:Z
      14: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #4                  // Field isStopped:Z
       4: ifne          61
       7: aload_0
       8: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      11: invokestatic  #5                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$100:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Lorg/infinispan/util/concurrent/ReclosableLatch;
      14: invokevirtual #6                  // Method org/infinispan/util/concurrent/ReclosableLatch.await:()V
      17: aload_0
      18: getfield      #4                  // Field isStopped:Z
      21: ifne          0
      24: aload_0
      25: iconst_1
      26: putfield      #7                  // Field isActive:Z
      29: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
      32: ldc           #9                  // String KeyGeneratorWorker marked as ACTIVE
      34: invokeinterface #10,  2           // InterfaceMethod org/infinispan/util/logging/Log.trace:(Ljava/lang/Object;)V
      39: aload_0
      40: invokespecial #11                 // Method generateKeys:()V
      43: aload_0
      44: iconst_0
      45: putfield      #7                  // Field isActive:Z
      48: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
      51: ldc           #12                 // String KeyGeneratorWorker marked as INACTIVE
      53: invokeinterface #10,  2           // InterfaceMethod org/infinispan/util/logging/Log.trace:(Ljava/lang/Object;)V
      58: goto          0
      61: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
      64: ldc           #13                 // String Shutting down KeyAffinity service for key set: %s
      66: aload_0
      67: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      70: invokestatic  #14                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$300:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/Set;
      73: invokeinterface #15,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
      78: goto          128
      81: astore_1
      82: invokestatic  #17                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      85: invokevirtual #18                 // Method java/lang/Thread.interrupt:()V
      88: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
      91: ldc           #13                 // String Shutting down KeyAffinity service for key set: %s
      93: aload_0
      94: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      97: invokestatic  #14                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$300:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/Set;
     100: invokeinterface #15,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     105: goto          128
     108: astore_2
     109: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
     112: ldc           #13                 // String Shutting down KeyAffinity service for key set: %s
     114: aload_0
     115: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
     118: invokestatic  #14                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$300:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/Set;
     121: invokeinterface #15,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     126: aload_2
     127: athrow
     128: return
    Exception table:
       from    to  target type
           0    61    81   Class java/lang/InterruptedException
           0    61   108   any
          81    88   108   any

  public boolean isStopped();
    Code:
       0: aload_0
       1: getfield      #4                  // Field isStopped:Z
       4: ireturn

  private void generateKeys();
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
       4: invokestatic  #19                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$400:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/concurrent/locks/ReadWriteLock;
       7: invokeinterface #20,  1           // InterfaceMethod java/util/concurrent/locks/ReadWriteLock.readLock:()Ljava/util/concurrent/locks/Lock;
      12: invokeinterface #21,  1           // InterfaceMethod java/util/concurrent/locks/Lock.lock:()V
      17: aload_0
      18: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      21: invokestatic  #22                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$500:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/concurrent/atomic/AtomicInteger;
      24: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      27: istore_1
      28: iconst_0
      29: istore_2
      30: aload_0
      31: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      34: getfield      #24                 // Field org/infinispan/affinity/impl/KeyAffinityServiceImpl.existingKeyCount:Ljava/util/concurrent/atomic/AtomicInteger;
      37: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      40: aload_0
      41: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      44: invokestatic  #22                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$500:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/concurrent/atomic/AtomicInteger;
      47: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
      50: if_icmpge     116
      53: iload_2
      54: iload_1
      55: if_icmpge     116
      58: aload_0
      59: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      62: invokestatic  #25                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$600:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Lorg/infinispan/affinity/KeyGenerator;
      65: invokeinterface #26,  1           // InterfaceMethod org/infinispan/affinity/KeyGenerator.getKey:()Ljava/lang/Object;
      70: astore_3
      71: aload_0
      72: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      75: aload_3
      76: invokestatic  #27                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$700:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;Ljava/lang/Object;)Lorg/infinispan/remoting/transport/Address;
      79: astore        4
      81: iconst_0
      82: istore        5
      84: aload_0
      85: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      88: aload         4
      90: invokestatic  #28                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$800:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;Lorg/infinispan/remoting/transport/Address;)Z
      93: ifeq          105
      96: aload_0
      97: aload         4
      99: aload_3
     100: invokespecial #29                 // Method tryAddKey:(Lorg/infinispan/remoting/transport/Address;Ljava/lang/Object;)Z
     103: istore        5
     105: iload         5
     107: ifne          113
     110: iinc          2, 1
     113: goto          30
     116: iload_2
     117: iload_1
     118: if_icmpge     131
     121: aload_0
     122: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
     125: invokestatic  #5                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$100:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Lorg/infinispan/util/concurrent/ReclosableLatch;
     128: invokevirtual #30                 // Method org/infinispan/util/concurrent/ReclosableLatch.close:()V
     131: aload_0
     132: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
     135: invokestatic  #19                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$400:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/concurrent/locks/ReadWriteLock;
     138: invokeinterface #20,  1           // InterfaceMethod java/util/concurrent/locks/ReadWriteLock.readLock:()Ljava/util/concurrent/locks/Lock;
     143: invokeinterface #31,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     148: goto          173
     151: astore        6
     153: aload_0
     154: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
     157: invokestatic  #19                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$400:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/concurrent/locks/ReadWriteLock;
     160: invokeinterface #20,  1           // InterfaceMethod java/util/concurrent/locks/ReadWriteLock.readLock:()Ljava/util/concurrent/locks/Lock;
     165: invokeinterface #31,  1           // InterfaceMethod java/util/concurrent/locks/Lock.unlock:()V
     170: aload         6
     172: athrow
     173: return
    Exception table:
       from    to  target type
          17   131   151   any
         151   153   151   any

  private boolean tryAddKey(org.infinispan.remoting.transport.Address, K);
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
       4: invokestatic  #32                 // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$900:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Ljava/util/Map;
       7: aload_1
       8: invokeinterface #33,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      13: checkcast     #34                 // class java/util/concurrent/BlockingQueue
      16: astore_3
      17: aload_3
      18: ifnonnull     23
      21: iconst_0
      22: ireturn
      23: aload_3
      24: aload_2
      25: invokeinterface #35,  2           // InterfaceMethod java/util/concurrent/BlockingQueue.offer:(Ljava/lang/Object;)Z
      30: istore        4
      32: iload         4
      34: ifeq          60
      37: aload_0
      38: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
      41: getfield      #24                 // Field org/infinispan/affinity/impl/KeyAffinityServiceImpl.existingKeyCount:Ljava/util/concurrent/atomic/AtomicInteger;
      44: invokevirtual #36                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
      47: pop
      48: invokestatic  #8                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$200:()Lorg/infinispan/util/logging/Log;
      51: ldc           #37                 // String Added key %s for address %s
      53: aload_2
      54: aload_1
      55: invokeinterface #38,  4           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      60: iload         4
      62: ireturn

  public boolean isActive();
    Code:
       0: aload_0
       1: getfield      #7                  // Field isActive:Z
       4: ireturn

  public void stop();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #4                  // Field isStopped:Z
       5: aload_0
       6: getfield      #2                  // Field this$0:Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;
       9: invokestatic  #5                  // Method org/infinispan/affinity/impl/KeyAffinityServiceImpl.access$100:(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)Lorg/infinispan/util/concurrent/ReclosableLatch;
      12: invokevirtual #39                 // Method org/infinispan/util/concurrent/ReclosableLatch.open:()V
      15: return

  org.infinispan.affinity.impl.KeyAffinityServiceImpl$KeyGeneratorWorker(org.infinispan.affinity.impl.KeyAffinityServiceImpl, org.infinispan.affinity.impl.KeyAffinityServiceImpl$1);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(Lorg/infinispan/affinity/impl/KeyAffinityServiceImpl;)V
       5: return
}

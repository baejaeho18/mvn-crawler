Compiled from "DefaultLockManager.java"
public class org.infinispan.util.concurrent.locks.impl.DefaultLockManager implements org.infinispan.util.concurrent.locks.LockManager {
  private static final org.infinispan.util.logging.Log log;

  private static final boolean trace;

  private static final java.util.concurrent.atomic.AtomicReferenceFieldUpdater<org.infinispan.util.concurrent.locks.impl.DefaultLockManager$CompositeLockPromise, org.infinispan.util.concurrent.locks.LockState> UPDATER;

  protected org.infinispan.util.concurrent.locks.impl.LockContainer lockContainer;

  protected org.infinispan.configuration.cache.Configuration configuration;

  protected java.util.concurrent.ScheduledExecutorService scheduler;

  public org.infinispan.util.concurrent.locks.impl.DefaultLockManager();
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: return

  public void inject(org.infinispan.util.concurrent.locks.impl.LockContainer, org.infinispan.configuration.cache.Configuration, java.util.concurrent.ScheduledExecutorService);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       5: aload_0
       6: aload_2
       7: putfield      #5                  // Field configuration:Lorg/infinispan/configuration/cache/Configuration;
      10: aload_0
      11: aload_3
      12: putfield      #6                  // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      15: return

  public org.infinispan.util.concurrent.locks.KeyAwareLockPromise lock(java.lang.Object, java.lang.Object, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_1
       1: ldc           #7                  // String Key must be non null
       3: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_2
       8: ldc           #9                  // String Lock owner must be non null
      10: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      13: pop
      14: aload         5
      16: ldc           #10                 // String Time unit must be non null
      18: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      21: pop
      22: getstatic     #11                 // Field trace:Z
      25: ifeq          62
      28: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
      31: ldc           #12                 // String Lock key=%s for owner=%s. timeout=%s (%s)
      33: iconst_4
      34: anewarray     #13                 // class java/lang/Object
      37: dup
      38: iconst_0
      39: aload_1
      40: aastore
      41: dup
      42: iconst_1
      43: aload_2
      44: aastore
      45: dup
      46: iconst_2
      47: lload_3
      48: invokestatic  #14                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      51: aastore
      52: dup
      53: iconst_3
      54: aload         5
      56: aastore
      57: invokeinterface #15,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;[Ljava/lang/Object;)V
      62: aload_0
      63: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
      66: aload_1
      67: aload_2
      68: lload_3
      69: aload         5
      71: invokeinterface #16,  6           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.acquire:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/ExtendedLockPromise;
      76: astore        6
      78: new           #17                 // class org/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise
      81: dup
      82: aload         6
      84: aload_1
      85: aload         5
      87: lload_3
      88: invokevirtual #18                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      91: aconst_null
      92: invokespecial #19                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise."<init>":(Lorg/infinispan/util/concurrent/locks/ExtendedLockPromise;Ljava/lang/Object;JLorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$1;)V
      95: aload_0
      96: getfield      #6                  // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
      99: invokevirtual #20                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise.scheduleLockTimeoutTask:(Ljava/util/concurrent/ScheduledExecutorService;)Lorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise;
     102: areturn

  public org.infinispan.util.concurrent.locks.KeyAwareLockPromise lockAll(java.util.Collection<?>, java.lang.Object, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_1
       1: ldc           #21                 // String Keys must be non null
       3: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
       6: pop
       7: aload_2
       8: ldc           #9                  // String Lock owner must be non null
      10: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      13: pop
      14: aload         5
      16: ldc           #10                 // String Time unit must be non null
      18: invokestatic  #8                  // Method java/util/Objects.requireNonNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      21: pop
      22: aload_1
      23: invokeinterface #22,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      28: ifeq          52
      31: getstatic     #11                 // Field trace:Z
      34: ifeq          48
      37: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
      40: ldc           #23                 // String Lock all: no keys found for owner=%s
      42: aload_2
      43: invokeinterface #24,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      48: getstatic     #25                 // Field org/infinispan/util/concurrent/locks/KeyAwareLockPromise.NO_OP:Lorg/infinispan/util/concurrent/locks/KeyAwareLockPromise;
      51: areturn
      52: aload_1
      53: invokeinterface #26,  1           // InterfaceMethod java/util/Collection.size:()I
      58: iconst_1
      59: if_icmpne     82
      62: aload_0
      63: aload_1
      64: invokeinterface #27,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      69: invokeinterface #28,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      74: aload_2
      75: lload_3
      76: aload         5
      78: invokevirtual #29                 // Method lock:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/KeyAwareLockPromise;
      81: areturn
      82: aload_0
      83: aload_1
      84: invokespecial #30                 // Method filterDistinctKeys:(Ljava/util/Collection;)Ljava/util/Set;
      87: astore        6
      89: aload         6
      91: invokeinterface #31,  1           // InterfaceMethod java/util/Set.size:()I
      96: iconst_1
      97: if_icmpne     121
     100: aload_0
     101: aload         6
     103: invokeinterface #32,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     108: invokeinterface #28,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     113: aload_2
     114: lload_3
     115: aload         5
     117: invokevirtual #29                 // Method lock:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/KeyAwareLockPromise;
     120: areturn
     121: getstatic     #11                 // Field trace:Z
     124: ifeq          162
     127: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
     130: ldc           #33                 // String Lock all keys=%s for owner=%s. timeout=%s (%s)
     132: iconst_4
     133: anewarray     #13                 // class java/lang/Object
     136: dup
     137: iconst_0
     138: aload         6
     140: aastore
     141: dup
     142: iconst_1
     143: aload_2
     144: aastore
     145: dup
     146: iconst_2
     147: lload_3
     148: invokestatic  #14                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     151: aastore
     152: dup
     153: iconst_3
     154: aload         5
     156: aastore
     157: invokeinterface #15,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;[Ljava/lang/Object;)V
     162: new           #34                 // class org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise
     165: dup
     166: aload         6
     168: invokeinterface #31,  1           // InterfaceMethod java/util/Set.size:()I
     173: aconst_null
     174: invokespecial #35                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise."<init>":(ILorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$1;)V
     177: astore        7
     179: aload_0
     180: dup
     181: astore        8
     183: monitorenter
     184: aload         6
     186: invokeinterface #32,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     191: astore        9
     193: aload         9
     195: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     200: ifeq          251
     203: aload         9
     205: invokeinterface #28,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     210: astore        10
     212: aload         7
     214: new           #17                 // class org/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise
     217: dup
     218: aload_0
     219: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
     222: aload         10
     224: aload_2
     225: lload_3
     226: aload         5
     228: invokeinterface #16,  6           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.acquire:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/ExtendedLockPromise;
     233: aload         10
     235: aload         5
     237: lload_3
     238: invokevirtual #18                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
     241: aconst_null
     242: invokespecial #19                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise."<init>":(Lorg/infinispan/util/concurrent/locks/ExtendedLockPromise;Ljava/lang/Object;JLorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$1;)V
     245: invokevirtual #37                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise.addLock:(Lorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$KeyAwareExtendedLockPromise;)V
     248: goto          193
     251: aload         8
     253: monitorexit
     254: goto          265
     257: astore        11
     259: aload         8
     261: monitorexit
     262: aload         11
     264: athrow
     265: aload         7
     267: invokevirtual #38                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise.markListAsFinal:()V
     270: aload         7
     272: aload_0
     273: getfield      #6                  // Field scheduler:Ljava/util/concurrent/ScheduledExecutorService;
     276: lload_3
     277: aload         5
     279: invokevirtual #39                 // Method org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise.scheduleLockTimeoutTask:(Ljava/util/concurrent/ScheduledExecutorService;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise;
     282: areturn
    Exception table:
       from    to  target type
         184   254   257   any
         257   262   257   any

  private java.util.Set<java.lang.Object> filterDistinctKeys(java.util.Collection<?>);
    Code:
       0: aload_1
       1: instanceof    #40                 // class java/util/Set
       4: ifeq          12
       7: aload_1
       8: checkcast     #40                 // class java/util/Set
      11: areturn
      12: new           #41                 // class java/util/HashSet
      15: dup
      16: aload_1
      17: invokespecial #42                 // Method java/util/HashSet."<init>":(Ljava/util/Collection;)V
      20: areturn

  public void unlock(java.lang.Object, java.lang.Object);
    Code:
       0: getstatic     #11                 // Field trace:Z
       3: ifeq          18
       6: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       9: ldc           #43                 // String Release lock for key=%s. owner=%s
      11: aload_1
      12: aload_2
      13: invokeinterface #44,  4           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      18: aload_0
      19: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
      22: aload_1
      23: aload_2
      24: invokeinterface #45,  3           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.release:(Ljava/lang/Object;Ljava/lang/Object;)V
      29: return

  public void unlockAll(java.util.Collection<?>, java.lang.Object);
    Code:
       0: getstatic     #11                 // Field trace:Z
       3: ifeq          18
       6: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       9: ldc           #46                 // String Release locks for keys=%s. owner=%s
      11: aload_1
      12: aload_2
      13: invokeinterface #44,  4           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      18: aload_1
      19: invokeinterface #22,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      24: ifeq          28
      27: return
      28: aload_1
      29: invokeinterface #27,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      34: astore_3
      35: aload_3
      36: invokeinterface #36,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      41: ifeq          67
      44: aload_3
      45: invokeinterface #28,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      50: astore        4
      52: aload_0
      53: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
      56: aload         4
      58: aload_2
      59: invokeinterface #45,  3           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.release:(Ljava/lang/Object;Ljava/lang/Object;)V
      64: goto          35
      67: return

  public void unlockAll(org.infinispan.context.InvocationContext);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #47,  1           // InterfaceMethod org/infinispan/context/InvocationContext.getLockedKeys:()Ljava/util/Set;
       7: aload_1
       8: invokeinterface #48,  1           // InterfaceMethod org/infinispan/context/InvocationContext.getLockOwner:()Ljava/lang/Object;
      13: invokevirtual #49                 // Method unlockAll:(Ljava/util/Collection;Ljava/lang/Object;)V
      16: aload_1
      17: invokeinterface #50,  1           // InterfaceMethod org/infinispan/context/InvocationContext.clearLockedKeys:()V
      22: return

  public boolean ownsLock(java.lang.Object, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #51                 // Method getOwner:(Ljava/lang/Object;)Ljava/lang/Object;
       5: astore_3
       6: aload_3
       7: ifnull        22
      10: aload_3
      11: aload_2
      12: invokevirtual #52                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      15: ifeq          22
      18: iconst_1
      19: goto          23
      22: iconst_0
      23: ireturn

  public boolean isLocked(java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #51                 // Method getOwner:(Ljava/lang/Object;)Ljava/lang/Object;
       5: ifnull        12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: ireturn

  public java.lang.Object getOwner(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       4: aload_1
       5: invokeinterface #53,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.getLock:(Ljava/lang/Object;)Lorg/infinispan/util/concurrent/locks/impl/InfinispanLock;
      10: astore_2
      11: aload_2
      12: ifnonnull     19
      15: aconst_null
      16: goto          23
      19: aload_2
      20: invokevirtual #54                 // Method org/infinispan/util/concurrent/locks/impl/InfinispanLock.getLockOwner:()Ljava/lang/Object;
      23: areturn

  public java.lang.String printLockInfo();
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       4: invokevirtual #55                 // Method java/lang/Object.toString:()Ljava/lang/String;
       7: areturn

  public int getNumberOfLocksHeld();
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       4: invokeinterface #56,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.getNumLocksHeld:()I
       9: ireturn

  public int getConcurrencyLevel();
    Code:
       0: aload_0
       1: getfield      #5                  // Field configuration:Lorg/infinispan/configuration/cache/Configuration;
       4: invokevirtual #57                 // Method org/infinispan/configuration/cache/Configuration.locking:()Lorg/infinispan/configuration/cache/LockingConfiguration;
       7: invokevirtual #58                 // Method org/infinispan/configuration/cache/LockingConfiguration.concurrencyLevel:()I
      10: ireturn

  public int getNumberOfLocksAvailable();
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       4: invokeinterface #59,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.size:()I
       9: aload_0
      10: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
      13: invokeinterface #56,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.getNumLocksHeld:()I
      18: isub
      19: ireturn

  public org.infinispan.util.concurrent.locks.impl.InfinispanLock getLock(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #4                  // Field lockContainer:Lorg/infinispan/util/concurrent/locks/impl/LockContainer;
       4: aload_1
       5: invokeinterface #53,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/impl/LockContainer.getLock:(Ljava/lang/Object;)Lorg/infinispan/util/concurrent/locks/impl/InfinispanLock;
      10: areturn

  static org.infinispan.util.logging.Log access$200();
    Code:
       0: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       3: areturn

  static java.util.concurrent.atomic.AtomicReferenceFieldUpdater access$300();
    Code:
       0: getstatic     #1                  // Field UPDATER:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
       3: areturn

  static {};
    Code:
       0: ldc           #60                 // class org/infinispan/util/concurrent/locks/impl/DefaultLockManager
       2: invokestatic  #61                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
       8: getstatic     #2                  // Field log:Lorg/infinispan/util/logging/Log;
      11: invokeinterface #62,  1           // InterfaceMethod org/infinispan/util/logging/Log.isTraceEnabled:()Z
      16: putstatic     #11                 // Field trace:Z
      19: ldc           #34                 // class org/infinispan/util/concurrent/locks/impl/DefaultLockManager$CompositeLockPromise
      21: ldc           #63                 // class org/infinispan/util/concurrent/locks/LockState
      23: ldc           #64                 // String lockState
      25: invokestatic  #65                 // Method java/util/concurrent/atomic/AtomicReferenceFieldUpdater.newUpdater:(Ljava/lang/Class;Ljava/lang/Class;Ljava/lang/String;)Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      28: putstatic     #1                  // Field UPDATER:Ljava/util/concurrent/atomic/AtomicReferenceFieldUpdater;
      31: return
}

Compiled from "LockAction.java"
public class org.infinispan.remoting.inboundhandler.action.LockAction extends org.infinispan.remoting.inboundhandler.action.BaseLockingAction implements org.infinispan.util.concurrent.locks.LockListener {
  private final org.infinispan.util.concurrent.locks.LockManager lockManager;

  private final java.util.concurrent.CompletableFuture<java.lang.Void> notifier;

  private volatile org.infinispan.util.concurrent.locks.LockPromise lockPromise;

  public org.infinispan.remoting.inboundhandler.action.LockAction(org.infinispan.util.concurrent.locks.LockManager, org.infinispan.interceptors.locking.ClusteringDependentLogic);
    Code:
       0: aload_0
       1: aload_2
       2: invokespecial #1                  // Method org/infinispan/remoting/inboundhandler/action/BaseLockingAction."<init>":(Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;)V
       5: aload_0
       6: aload_1
       7: putfield      #2                  // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
      10: aload_0
      11: new           #3                  // class java/util/concurrent/CompletableFuture
      14: dup
      15: invokespecial #4                  // Method java/util/concurrent/CompletableFuture."<init>":()V
      18: putfield      #5                  // Field notifier:Ljava/util/concurrent/CompletableFuture;
      21: return

  protected org.infinispan.remoting.inboundhandler.action.ActionStatus checking(org.infinispan.remoting.inboundhandler.action.ActionState);
    Code:
       0: aload_0
       1: getfield      #6                  // Field lockPromise:Lorg/infinispan/util/concurrent/locks/LockPromise;
       4: astore_2
       5: aload_2
       6: ifnull        33
       9: aload_2
      10: invokeinterface #7,  1            // InterfaceMethod org/infinispan/util/concurrent/locks/LockPromise.isAvailable:()Z
      15: ifeq          33
      18: aload_0
      19: getstatic     #8                  // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.CHECKING:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
      22: getstatic     #9                  // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.READY:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
      25: invokevirtual #10                 // Method cas:(Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;)Z
      28: pop
      29: getstatic     #11                 // Field org/infinispan/remoting/inboundhandler/action/ActionStatus.READY:Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
      32: areturn
      33: getstatic     #12                 // Field org/infinispan/remoting/inboundhandler/action/ActionStatus.NOT_READY:Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
      36: areturn

  protected org.infinispan.remoting.inboundhandler.action.ActionStatus init(org.infinispan.remoting.inboundhandler.action.ActionState);
    Code:
       0: aload_0
       1: getstatic     #13                 // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.INIT:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
       4: getstatic     #8                  // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.CHECKING:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
       7: invokevirtual #10                 // Method cas:(Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;)Z
      10: ifne          17
      13: getstatic     #12                 // Field org/infinispan/remoting/inboundhandler/action/ActionStatus.NOT_READY:Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
      16: areturn
      17: aload_0
      18: aload_1
      19: invokespecial #14                 // Method getLockOwner:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Ljava/lang/Object;
      22: astore_2
      23: aload_1
      24: invokevirtual #15                 // Method org/infinispan/remoting/inboundhandler/action/ActionState.getTimeout:()J
      27: lstore_3
      28: aload_0
      29: aload_1
      30: invokevirtual #16                 // Method getAndUpdateFilteredKeys:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Ljava/util/List;
      33: astore        5
      35: aload         5
      37: invokeinterface #17,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      42: ifeq          68
      45: aload_0
      46: getstatic     #8                  // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.CHECKING:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
      49: getstatic     #9                  // Field org/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState.READY:Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;
      52: invokevirtual #10                 // Method cas:(Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;Lorg/infinispan/remoting/inboundhandler/action/BaseLockingAction$InternalState;)Z
      55: ifeq          64
      58: getstatic     #11                 // Field org/infinispan/remoting/inboundhandler/action/ActionStatus.READY:Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
      61: goto          67
      64: getstatic     #12                 // Field org/infinispan/remoting/inboundhandler/action/ActionStatus.NOT_READY:Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
      67: areturn
      68: aload_0
      69: aload_1
      70: invokespecial #18                 // Method createContext:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Lorg/infinispan/context/impl/TxInvocationContext;
      73: astore        6
      75: aload         6
      77: ifnull        99
      80: aload         5
      82: aload         6
      84: dup
      85: invokevirtual #19                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      88: pop
      89: invokedynamic #20,  0             // InvokeDynamic #0:accept:(Lorg/infinispan/context/impl/TxInvocationContext;)Ljava/util/function/Consumer;
      94: invokeinterface #21,  2           // InterfaceMethod java/util/List.forEach:(Ljava/util/function/Consumer;)V
      99: aload         5
     101: invokeinterface #22,  1           // InterfaceMethod java/util/List.size:()I
     106: iconst_1
     107: if_icmpne     135
     110: aload_0
     111: getfield      #2                  // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
     114: aload         5
     116: iconst_0
     117: invokeinterface #23,  2           // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
     122: aload_2
     123: lload_3
     124: getstatic     #24                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     127: invokeinterface #25,  6           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.lock:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/KeyAwareLockPromise;
     132: goto          151
     135: aload_0
     136: getfield      #2                  // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
     139: aload         5
     141: aload_2
     142: lload_3
     143: getstatic     #24                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     146: invokeinterface #26,  6           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.lockAll:(Ljava/util/Collection;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/KeyAwareLockPromise;
     151: astore        7
     153: aload_0
     154: aload         7
     156: putfield      #6                  // Field lockPromise:Lorg/infinispan/util/concurrent/locks/LockPromise;
     159: aload         7
     161: invokeinterface #7,  1            // InterfaceMethod org/infinispan/util/concurrent/locks/LockPromise.isAvailable:()Z
     166: ifne          177
     169: aload         7
     171: aload_0
     172: invokeinterface #27,  2           // InterfaceMethod org/infinispan/util/concurrent/locks/LockPromise.addListener:(Lorg/infinispan/util/concurrent/locks/LockListener;)V
     177: aload_0
     178: aload_1
     179: invokevirtual #28                 // Method check:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Lorg/infinispan/remoting/inboundhandler/action/ActionStatus;
     182: areturn

  private java.lang.Object getLockOwner(org.infinispan.remoting.inboundhandler.action.ActionState);
    Code:
       0: aload_1
       1: invokevirtual #29                 // Method org/infinispan/remoting/inboundhandler/action/ActionState.getCommand:()Lorg/infinispan/util/concurrent/locks/RemoteLockCommand;
       4: astore_2
       5: aload_2
       6: instanceof    #30                 // class org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand
       9: ifeq          29
      12: aload_2
      13: checkcast     #30                 // class org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand
      16: invokeinterface #31,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand.createContext:()Lorg/infinispan/context/impl/TxInvocationContext;
      21: invokeinterface #32,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getLockOwner:()Ljava/lang/Object;
      26: goto          35
      29: aload_2
      30: invokeinterface #33,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/RemoteLockCommand.getKeyLockOwner:()Ljava/lang/Object;
      35: areturn

  public void addListener(org.infinispan.remoting.inboundhandler.action.ActionListener);
    Code:
       0: aload_0
       1: getfield      #5                  // Field notifier:Ljava/util/concurrent/CompletableFuture;
       4: aload_1
       5: dup
       6: invokevirtual #19                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
       9: pop
      10: invokedynamic #34,  0             // InvokeDynamic #1:run:(Lorg/infinispan/remoting/inboundhandler/action/ActionListener;)Ljava/lang/Runnable;
      15: invokevirtual #35                 // Method java/util/concurrent/CompletableFuture.thenRun:(Ljava/lang/Runnable;)Ljava/util/concurrent/CompletableFuture;
      18: pop
      19: return

  public void cleanup(org.infinispan.remoting.inboundhandler.action.ActionState);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #14                 // Method getLockOwner:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Ljava/lang/Object;
       5: astore_2
       6: aload_0
       7: aload_1
       8: invokevirtual #16                 // Method getAndUpdateFilteredKeys:(Lorg/infinispan/remoting/inboundhandler/action/ActionState;)Ljava/util/List;
      11: astore_3
      12: aload_0
      13: getfield      #2                  // Field lockManager:Lorg/infinispan/util/concurrent/locks/LockManager;
      16: aload_3
      17: aload_2
      18: invokeinterface #36,  3           // InterfaceMethod org/infinispan/util/concurrent/locks/LockManager.unlockAll:(Ljava/util/Collection;Ljava/lang/Object;)V
      23: return

  public void onEvent(org.infinispan.util.concurrent.locks.LockState);
    Code:
       0: aload_0
       1: getfield      #5                  // Field notifier:Ljava/util/concurrent/CompletableFuture;
       4: aconst_null
       5: invokevirtual #37                 // Method java/util/concurrent/CompletableFuture.complete:(Ljava/lang/Object;)Z
       8: pop
       9: return

  private org.infinispan.context.impl.TxInvocationContext<?> createContext(org.infinispan.remoting.inboundhandler.action.ActionState);
    Code:
       0: aload_1
       1: invokevirtual #29                 // Method org/infinispan/remoting/inboundhandler/action/ActionState.getCommand:()Lorg/infinispan/util/concurrent/locks/RemoteLockCommand;
       4: astore_2
       5: aload_2
       6: instanceof    #30                 // class org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand
       9: ifeq          22
      12: aload_2
      13: checkcast     #30                 // class org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand
      16: invokeinterface #31,  1           // InterfaceMethod org/infinispan/util/concurrent/locks/TransactionalRemoteLockCommand.createContext:()Lorg/infinispan/context/impl/TxInvocationContext;
      21: areturn
      22: aconst_null
      23: areturn
}

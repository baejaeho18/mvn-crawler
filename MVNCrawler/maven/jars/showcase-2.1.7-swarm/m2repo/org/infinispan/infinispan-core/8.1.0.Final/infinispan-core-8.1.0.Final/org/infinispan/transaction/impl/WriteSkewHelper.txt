Compiled from "WriteSkewHelper.java"
public class org.infinispan.transaction.impl.WriteSkewHelper {
  public org.infinispan.transaction.impl.WriteSkewHelper();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public static void readVersionsFromResponse(org.infinispan.remoting.responses.Response, org.infinispan.transaction.xa.CacheTransaction);
    Code:
       0: aload_0
       1: ifnull        46
       4: aload_0
       5: invokeinterface #2,  1            // InterfaceMethod org/infinispan/remoting/responses/Response.isSuccessful:()Z
      10: ifeq          46
      13: aload_0
      14: checkcast     #3                  // class org/infinispan/remoting/responses/SuccessfulResponse
      17: astore_2
      18: aload_2
      19: invokevirtual #4                  // Method org/infinispan/remoting/responses/SuccessfulResponse.getResponseValue:()Ljava/lang/Object;
      22: checkcast     #5                  // class org/infinispan/container/versioning/EntryVersionsMap
      25: astore_3
      26: aload_3
      27: ifnull        46
      30: aload_1
      31: aload_3
      32: aload_1
      33: invokeinterface #6,  1            // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getUpdatedEntryVersions:()Lorg/infinispan/container/versioning/EntryVersionsMap;
      38: invokevirtual #7                  // Method org/infinispan/container/versioning/EntryVersionsMap.merge:(Lorg/infinispan/container/versioning/EntryVersionsMap;)Lorg/infinispan/container/versioning/EntryVersionsMap;
      41: invokeinterface #8,  2            // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.setUpdatedEntryVersions:(Lorg/infinispan/container/versioning/EntryVersionsMap;)V
      46: return

  public static org.infinispan.container.versioning.EntryVersionsMap performWriteSkewCheckAndReturnNewVersions(org.infinispan.commands.tx.VersionedPrepareCommand, org.infinispan.container.DataContainer, org.infinispan.persistence.manager.PersistenceManager, org.infinispan.container.versioning.VersionGenerator, org.infinispan.context.impl.TxInvocationContext, org.infinispan.transaction.impl.WriteSkewHelper$KeySpecificLogic, org.infinispan.util.TimeService);
    Code:
       0: new           #5                  // class org/infinispan/container/versioning/EntryVersionsMap
       3: dup
       4: invokespecial #9                  // Method org/infinispan/container/versioning/EntryVersionsMap."<init>":()V
       7: astore        7
       9: aload_0
      10: invokevirtual #10                 // Method org/infinispan/commands/tx/VersionedPrepareCommand.getVersionsSeen:()Lorg/infinispan/container/versioning/EntryVersionsMap;
      13: ifnonnull     19
      16: aload         7
      18: areturn
      19: aload_0
      20: invokevirtual #11                 // Method org/infinispan/commands/tx/VersionedPrepareCommand.getModifications:()[Lorg/infinispan/commands/write/WriteCommand;
      23: astore        8
      25: aload         8
      27: arraylength
      28: istore        9
      30: iconst_0
      31: istore        10
      33: iload         10
      35: iload         9
      37: if_icmpge     238
      40: aload         8
      42: iload         10
      44: aaload
      45: astore        11
      47: aload         11
      49: invokeinterface #12,  1           // InterfaceMethod org/infinispan/commands/write/WriteCommand.getAffectedKeys:()Ljava/util/Set;
      54: invokeinterface #13,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      59: astore        12
      61: aload         12
      63: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      68: ifeq          232
      71: aload         12
      73: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      78: astore        13
      80: aload         5
      82: aload         13
      84: invokeinterface #16,  2           // InterfaceMethod org/infinispan/transaction/impl/WriteSkewHelper$KeySpecificLogic.performCheckOnKey:(Ljava/lang/Object;)Z
      89: ifeq          229
      92: aload         4
      94: aload         13
      96: invokeinterface #17,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.lookupEntry:(Ljava/lang/Object;)Lorg/infinispan/container/entries/CacheEntry;
     101: checkcast     #18                 // class org/infinispan/container/entries/ClusteredRepeatableReadEntry
     104: astore        14
     106: aload         14
     108: aload_1
     109: aload_2
     110: aload         4
     112: aload_0
     113: invokevirtual #10                 // Method org/infinispan/commands/tx/VersionedPrepareCommand.getVersionsSeen:()Lorg/infinispan/container/versioning/EntryVersionsMap;
     116: aload         13
     118: invokevirtual #19                 // Method org/infinispan/container/versioning/EntryVersionsMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     121: checkcast     #20                 // class org/infinispan/container/versioning/EntryVersion
     124: aload_3
     125: aload         6
     127: invokevirtual #21                 // Method org/infinispan/container/entries/ClusteredRepeatableReadEntry.performWriteSkewCheck:(Lorg/infinispan/container/DataContainer;Lorg/infinispan/persistence/manager/PersistenceManager;Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/container/versioning/EntryVersion;Lorg/infinispan/container/versioning/VersionGenerator;Lorg/infinispan/util/TimeService;)Z
     130: ifeq          184
     133: aload         14
     135: invokevirtual #22                 // Method org/infinispan/container/entries/ClusteredRepeatableReadEntry.isCreated:()Z
     138: ifeq          150
     141: aload_3
     142: invokeinterface #23,  1           // InterfaceMethod org/infinispan/container/versioning/VersionGenerator.generateNew:()Lorg/infinispan/container/versioning/IncrementableEntryVersion;
     147: goto          169
     150: aload_3
     151: aload         14
     153: invokevirtual #24                 // Method org/infinispan/container/entries/ClusteredRepeatableReadEntry.getMetadata:()Lorg/infinispan/metadata/Metadata;
     156: invokeinterface #25,  1           // InterfaceMethod org/infinispan/metadata/Metadata.version:()Lorg/infinispan/container/versioning/EntryVersion;
     161: checkcast     #26                 // class org/infinispan/container/versioning/IncrementableEntryVersion
     164: invokeinterface #27,  2           // InterfaceMethod org/infinispan/container/versioning/VersionGenerator.increment:(Lorg/infinispan/container/versioning/IncrementableEntryVersion;)Lorg/infinispan/container/versioning/IncrementableEntryVersion;
     169: astore        15
     171: aload         7
     173: aload         13
     175: aload         15
     177: invokevirtual #28                 // Method org/infinispan/container/versioning/EntryVersionsMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     180: pop
     181: goto          229
     184: new           #29                 // class org/infinispan/transaction/WriteSkewException
     187: dup
     188: new           #30                 // class java/lang/StringBuilder
     191: dup
     192: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
     195: ldc           #32                 // String Write skew detected on key
     197: invokevirtual #33                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     200: aload         13
     202: invokevirtual #34                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     205: ldc           #35                 // String  for transaction
     207: invokevirtual #33                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     210: aload         4
     212: invokeinterface #36,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getTransaction:()Ljavax/transaction/Transaction;
     217: invokevirtual #34                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     220: invokevirtual #37                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     223: aload         13
     225: invokespecial #38                 // Method org/infinispan/transaction/WriteSkewException."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
     228: athrow
     229: goto          61
     232: iinc          10, 1
     235: goto          33
     238: aload         7
     240: areturn

  public static org.infinispan.container.versioning.EntryVersionsMap performTotalOrderWriteSkewCheckAndReturnNewVersions(org.infinispan.commands.tx.VersionedPrepareCommand, org.infinispan.container.DataContainer, org.infinispan.persistence.manager.PersistenceManager, org.infinispan.container.versioning.VersionGenerator, org.infinispan.context.impl.TxInvocationContext, org.infinispan.transaction.impl.WriteSkewHelper$KeySpecificLogic, org.infinispan.util.TimeService);
    Code:
       0: new           #5                  // class org/infinispan/container/versioning/EntryVersionsMap
       3: dup
       4: invokespecial #9                  // Method org/infinispan/container/versioning/EntryVersionsMap."<init>":()V
       7: astore        7
       9: aload_0
      10: invokevirtual #11                 // Method org/infinispan/commands/tx/VersionedPrepareCommand.getModifications:()[Lorg/infinispan/commands/write/WriteCommand;
      13: astore        8
      15: aload         8
      17: arraylength
      18: istore        9
      20: iconst_0
      21: istore        10
      23: iload         10
      25: iload         9
      27: if_icmpge     189
      30: aload         8
      32: iload         10
      34: aaload
      35: astore        11
      37: aload         11
      39: invokeinterface #12,  1           // InterfaceMethod org/infinispan/commands/write/WriteCommand.getAffectedKeys:()Ljava/util/Set;
      44: invokeinterface #13,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      49: astore        12
      51: aload         12
      53: invokeinterface #14,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      58: ifeq          183
      61: aload         12
      63: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      68: astore        13
      70: aload         5
      72: aload         13
      74: invokeinterface #16,  2           // InterfaceMethod org/infinispan/transaction/impl/WriteSkewHelper$KeySpecificLogic.performCheckOnKey:(Ljava/lang/Object;)Z
      79: ifeq          180
      82: aload         4
      84: aload         13
      86: invokeinterface #17,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.lookupEntry:(Ljava/lang/Object;)Lorg/infinispan/container/entries/CacheEntry;
      91: checkcast     #18                 // class org/infinispan/container/entries/ClusteredRepeatableReadEntry
      94: astore        14
      96: aload         14
      98: aload_1
      99: aload_2
     100: aload         4
     102: aload_0
     103: invokevirtual #10                 // Method org/infinispan/commands/tx/VersionedPrepareCommand.getVersionsSeen:()Lorg/infinispan/container/versioning/EntryVersionsMap;
     106: aload         13
     108: invokevirtual #19                 // Method org/infinispan/container/versioning/EntryVersionsMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     111: checkcast     #20                 // class org/infinispan/container/versioning/EntryVersion
     114: aload_3
     115: aload         6
     117: invokevirtual #21                 // Method org/infinispan/container/entries/ClusteredRepeatableReadEntry.performWriteSkewCheck:(Lorg/infinispan/container/DataContainer;Lorg/infinispan/persistence/manager/PersistenceManager;Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/container/versioning/EntryVersion;Lorg/infinispan/container/versioning/VersionGenerator;Lorg/infinispan/util/TimeService;)Z
     120: ifeq          135
     123: aload         7
     125: aload         13
     127: aconst_null
     128: invokevirtual #28                 // Method org/infinispan/container/versioning/EntryVersionsMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     131: pop
     132: goto          180
     135: new           #29                 // class org/infinispan/transaction/WriteSkewException
     138: dup
     139: new           #30                 // class java/lang/StringBuilder
     142: dup
     143: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
     146: ldc           #32                 // String Write skew detected on key
     148: invokevirtual #33                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     151: aload         13
     153: invokevirtual #34                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     156: ldc           #35                 // String  for transaction
     158: invokevirtual #33                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: aload         4
     163: invokeinterface #36,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getTransaction:()Ljavax/transaction/Transaction;
     168: invokevirtual #34                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     171: invokevirtual #37                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     174: aload         13
     176: invokespecial #38                 // Method org/infinispan/transaction/WriteSkewException."<init>":(Ljava/lang/String;Ljava/lang/Object;)V
     179: athrow
     180: goto          51
     183: iinc          10, 1
     186: goto          23
     189: aload         7
     191: areturn
}

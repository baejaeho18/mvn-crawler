Compiled from "AbstractEnlistmentAdapter.java"
public abstract class org.infinispan.transaction.impl.AbstractEnlistmentAdapter {
  private static org.infinispan.util.logging.Log log;

  private final org.infinispan.commands.CommandsFactory commandsFactory;

  private final org.infinispan.remoting.rpc.RpcManager rpcManager;

  private final org.infinispan.transaction.impl.TransactionTable txTable;

  private final org.infinispan.interceptors.locking.ClusteringDependentLogic clusteringLogic;

  private final int hashCode;

  private final boolean isSecondPhaseAsync;

  private final boolean isPessimisticLocking;

  private final boolean isTotalOrder;

  protected final org.infinispan.transaction.impl.TransactionCoordinator txCoordinator;

  protected final org.infinispan.partitionhandling.impl.PartitionHandlingManager partitionHandlingManager;

  public org.infinispan.transaction.impl.AbstractEnlistmentAdapter(org.infinispan.transaction.xa.CacheTransaction, org.infinispan.commands.CommandsFactory, org.infinispan.remoting.rpc.RpcManager, org.infinispan.transaction.impl.TransactionTable, org.infinispan.interceptors.locking.ClusteringDependentLogic, org.infinispan.configuration.cache.Configuration, org.infinispan.transaction.impl.TransactionCoordinator, org.infinispan.partitionhandling.impl.PartitionHandlingManager);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_2
       6: putfield      #2                  // Field commandsFactory:Lorg/infinispan/commands/CommandsFactory;
       9: aload_0
      10: aload_3
      11: putfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      14: aload_0
      15: aload         4
      17: putfield      #4                  // Field txTable:Lorg/infinispan/transaction/impl/TransactionTable;
      20: aload_0
      21: aload         5
      23: putfield      #5                  // Field clusteringLogic:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      26: aload_0
      27: aload         8
      29: putfield      #6                  // Field partitionHandlingManager:Lorg/infinispan/partitionhandling/impl/PartitionHandlingManager;
      32: aload_0
      33: aload         6
      35: invokestatic  #7                  // Method org/infinispan/configuration/cache/Configurations.isSecondPhaseAsync:(Lorg/infinispan/configuration/cache/Configuration;)Z
      38: putfield      #8                  // Field isSecondPhaseAsync:Z
      41: aload_0
      42: aload         6
      44: invokevirtual #9                  // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
      47: invokevirtual #10                 // Method org/infinispan/configuration/cache/TransactionConfiguration.lockingMode:()Lorg/infinispan/transaction/LockingMode;
      50: getstatic     #11                 // Field org/infinispan/transaction/LockingMode.PESSIMISTIC:Lorg/infinispan/transaction/LockingMode;
      53: if_acmpne     60
      56: iconst_1
      57: goto          61
      60: iconst_0
      61: putfield      #12                 // Field isPessimisticLocking:Z
      64: aload_0
      65: aload         6
      67: invokevirtual #9                  // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
      70: invokevirtual #13                 // Method org/infinispan/configuration/cache/TransactionConfiguration.transactionProtocol:()Lorg/infinispan/transaction/TransactionProtocol;
      73: invokevirtual #14                 // Method org/infinispan/transaction/TransactionProtocol.isTotalOrder:()Z
      76: putfield      #15                 // Field isTotalOrder:Z
      79: aload_0
      80: aload_1
      81: invokestatic  #16                 // Method preComputeHashCode:(Lorg/infinispan/transaction/xa/CacheTransaction;)I
      84: putfield      #17                 // Field hashCode:I
      87: aload_0
      88: aload         7
      90: putfield      #18                 // Field txCoordinator:Lorg/infinispan/transaction/impl/TransactionCoordinator;
      93: return

  public org.infinispan.transaction.impl.AbstractEnlistmentAdapter(org.infinispan.commands.CommandsFactory, org.infinispan.remoting.rpc.RpcManager, org.infinispan.transaction.impl.TransactionTable, org.infinispan.interceptors.locking.ClusteringDependentLogic, org.infinispan.configuration.cache.Configuration, org.infinispan.transaction.impl.TransactionCoordinator, org.infinispan.partitionhandling.impl.PartitionHandlingManager);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field commandsFactory:Lorg/infinispan/commands/CommandsFactory;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field txTable:Lorg/infinispan/transaction/impl/TransactionTable;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field clusteringLogic:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      25: aload_0
      26: aload         7
      28: putfield      #6                  // Field partitionHandlingManager:Lorg/infinispan/partitionhandling/impl/PartitionHandlingManager;
      31: aload_0
      32: aload         5
      34: invokestatic  #7                  // Method org/infinispan/configuration/cache/Configurations.isSecondPhaseAsync:(Lorg/infinispan/configuration/cache/Configuration;)Z
      37: putfield      #8                  // Field isSecondPhaseAsync:Z
      40: aload_0
      41: aload         5
      43: invokevirtual #9                  // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
      46: invokevirtual #10                 // Method org/infinispan/configuration/cache/TransactionConfiguration.lockingMode:()Lorg/infinispan/transaction/LockingMode;
      49: getstatic     #11                 // Field org/infinispan/transaction/LockingMode.PESSIMISTIC:Lorg/infinispan/transaction/LockingMode;
      52: if_acmpne     59
      55: iconst_1
      56: goto          60
      59: iconst_0
      60: putfield      #12                 // Field isPessimisticLocking:Z
      63: aload_0
      64: aload         5
      66: invokevirtual #9                  // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
      69: invokevirtual #13                 // Method org/infinispan/configuration/cache/TransactionConfiguration.transactionProtocol:()Lorg/infinispan/transaction/TransactionProtocol;
      72: invokevirtual #14                 // Method org/infinispan/transaction/TransactionProtocol.isTotalOrder:()Z
      75: putfield      #15                 // Field isTotalOrder:Z
      78: aload_0
      79: bipush        31
      81: putfield      #17                 // Field hashCode:I
      84: aload_0
      85: aload         6
      87: putfield      #18                 // Field txCoordinator:Lorg/infinispan/transaction/impl/TransactionCoordinator;
      90: return

  protected final void releaseLocksForCompletedTransaction(org.infinispan.transaction.impl.LocalTransaction, boolean);
    Code:
       0: aload_1
       1: invokevirtual #19                 // Method org/infinispan/transaction/impl/LocalTransaction.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
       4: astore_3
       5: aload_0
       6: getfield      #4                  // Field txTable:Lorg/infinispan/transaction/impl/TransactionTable;
       9: aload_1
      10: invokevirtual #20                 // Method org/infinispan/transaction/impl/TransactionTable.removeLocalTransaction:(Lorg/infinispan/transaction/impl/LocalTransaction;)Z
      13: pop
      14: getstatic     #21                 // Field log:Lorg/infinispan/util/logging/Log;
      17: ldc           #22                 // String Committed in onePhase? %s isOptimistic? %s
      19: iload_2
      20: invokestatic  #23                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      23: aload_0
      24: invokespecial #24                 // Method isOptimisticCache:()Z
      27: invokestatic  #23                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      30: invokeinterface #25,  4           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      35: iload_2
      36: ifeq          47
      39: aload_0
      40: invokespecial #24                 // Method isOptimisticCache:()Z
      43: ifeq          47
      46: return
      47: aload_0
      48: invokespecial #26                 // Method isClustered:()Z
      51: ifeq          60
      54: aload_0
      55: aload_1
      56: aload_3
      57: invokespecial #27                 // Method removeTransactionInfoRemotely:(Lorg/infinispan/transaction/impl/LocalTransaction;Lorg/infinispan/transaction/xa/GlobalTransaction;)V
      60: return

  private void removeTransactionInfoRemotely(org.infinispan.transaction.impl.LocalTransaction, org.infinispan.transaction.xa.GlobalTransaction);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #28                 // Method mayHaveRemoteLocks:(Lorg/infinispan/transaction/impl/LocalTransaction;)Z
       5: ifeq          122
       8: aload_0
       9: getfield      #8                  // Field isSecondPhaseAsync:Z
      12: ifne          122
      15: aload_0
      16: getfield      #6                  // Field partitionHandlingManager:Lorg/infinispan/partitionhandling/impl/PartitionHandlingManager;
      19: aload_2
      20: invokeinterface #29,  2           // InterfaceMethod org/infinispan/partitionhandling/impl/PartitionHandlingManager.isTransactionPartiallyCommitted:(Lorg/infinispan/transaction/xa/GlobalTransaction;)Z
      25: ifne          122
      28: aload_0
      29: getfield      #2                  // Field commandsFactory:Lorg/infinispan/commands/CommandsFactory;
      32: aconst_null
      33: aload_2
      34: invokeinterface #30,  3           // InterfaceMethod org/infinispan/commands/CommandsFactory.buildTxCompletionNotificationCommand:(Ljavax/transaction/xa/Xid;Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/commands/remote/recovery/TxCompletionNotificationCommand;
      39: astore_3
      40: aload_0
      41: getfield      #5                  // Field clusteringLogic:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      44: aload_1
      45: invokevirtual #31                 // Method org/infinispan/transaction/impl/LocalTransaction.getAffectedKeys:()Ljava/util/Set;
      48: invokestatic  #32                 // Method org/infinispan/util/DeltaCompositeKeyUtil.filterDeltaCompositeKeys:(Ljava/util/Collection;)Ljava/util/Collection;
      51: invokeinterface #33,  2           // InterfaceMethod org/infinispan/interceptors/locking/ClusteringDependentLogic.getOwners:(Ljava/util/Collection;)Ljava/util/List;
      56: astore        4
      58: aload_1
      59: aload         4
      61: aload_0
      62: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      65: invokeinterface #34,  1           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.getTopologyId:()I
      70: aload_0
      71: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      74: invokeinterface #35,  1           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.getMembers:()Ljava/util/List;
      79: invokevirtual #36                 // Method org/infinispan/transaction/impl/LocalTransaction.getCommitNodes:(Ljava/util/Collection;ILjava/util/Collection;)Ljava/util/Collection;
      82: astore        5
      84: getstatic     #21                 // Field log:Lorg/infinispan/util/logging/Log;
      87: ldc           #37                 // String About to invoke tx completion notification on commitNodes: %s
      89: aload         5
      91: invokeinterface #38,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      96: aload_0
      97: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
     100: aload         5
     102: aload_3
     103: aload_0
     104: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
     107: iconst_0
     108: getstatic     #39                 // Field org/infinispan/remoting/inboundhandler/DeliverOrder.NONE:Lorg/infinispan/remoting/inboundhandler/DeliverOrder;
     111: invokeinterface #40,  3           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.getDefaultRpcOptions:(ZLorg/infinispan/remoting/inboundhandler/DeliverOrder;)Lorg/infinispan/remoting/rpc/RpcOptions;
     116: invokeinterface #41,  4           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.invokeRemotely:(Ljava/util/Collection;Lorg/infinispan/commands/ReplicableCommand;Lorg/infinispan/remoting/rpc/RpcOptions;)Ljava/util/Map;
     121: pop
     122: return

  private boolean mayHaveRemoteLocks(org.infinispan.transaction.impl.LocalTransaction);
    Code:
       0: aload_0
       1: getfield      #15                 // Field isTotalOrder:Z
       4: ifne          65
       7: aload_1
       8: invokevirtual #42                 // Method org/infinispan/transaction/impl/LocalTransaction.getRemoteLocksAcquired:()Ljava/util/Collection;
      11: ifnull        26
      14: aload_1
      15: invokevirtual #42                 // Method org/infinispan/transaction/impl/LocalTransaction.getRemoteLocksAcquired:()Ljava/util/Collection;
      18: invokeinterface #43,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      23: ifeq          61
      26: aload_1
      27: invokevirtual #44                 // Method org/infinispan/transaction/impl/LocalTransaction.getModifications:()Ljava/util/List;
      30: invokeinterface #45,  1           // InterfaceMethod java/util/List.isEmpty:()Z
      35: ifeq          61
      38: aload_0
      39: getfield      #12                 // Field isPessimisticLocking:Z
      42: ifeq          65
      45: aload_1
      46: invokevirtual #46                 // Method org/infinispan/transaction/impl/LocalTransaction.getTopologyId:()I
      49: aload_0
      50: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
      53: invokeinterface #34,  1           // InterfaceMethod org/infinispan/remoting/rpc/RpcManager.getTopologyId:()I
      58: if_icmpeq     65
      61: iconst_1
      62: goto          66
      65: iconst_0
      66: ireturn

  public final int hashCode();
    Code:
       0: aload_0
       1: getfield      #17                 // Field hashCode:I
       4: ireturn

  private static int preComputeHashCode(org.infinispan.transaction.xa.CacheTransaction);
    Code:
       0: bipush        31
       2: aload_0
       3: invokevirtual #47                 // Method java/lang/Object.hashCode:()I
       6: iadd
       7: ireturn

  private boolean isClustered();
    Code:
       0: aload_0
       1: getfield      #3                  // Field rpcManager:Lorg/infinispan/remoting/rpc/RpcManager;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  private boolean isOptimisticCache();
    Code:
       0: aload_0
       1: getfield      #12                 // Field isPessimisticLocking:Z
       4: ifne          18
       7: aload_0
       8: getfield      #15                 // Field isTotalOrder:Z
      11: ifne          18
      14: iconst_1
      15: goto          19
      18: iconst_0
      19: ireturn

  static {};
    Code:
       0: ldc           #48                 // class org/infinispan/transaction/impl/AbstractEnlistmentAdapter
       2: invokestatic  #49                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #21                 // Field log:Lorg/infinispan/util/logging/Log;
       8: return
}

Compiled from "GenericTransactionManagerLookup.java"
public class org.infinispan.transaction.lookup.GenericTransactionManagerLookup implements org.infinispan.transaction.lookup.TransactionManagerLookup {
  private static final org.infinispan.util.logging.Log log;

  public static final org.infinispan.transaction.lookup.GenericTransactionManagerLookup INSTANCE;

  private boolean lookupDone;

  private boolean lookupFailed;

  private boolean noJBossTM;

  private javax.transaction.TransactionManager tm;

  private static java.lang.String[][] knownJNDIManagers;

  private static final java.lang.String WS_FACTORY_CLASS_5_1;

  private static final java.lang.String WS_FACTORY_CLASS_5_0;

  private static final java.lang.String WS_FACTORY_CLASS_4;

  private org.infinispan.configuration.global.GlobalConfiguration globalCfg;

  public org.infinispan.transaction.lookup.GenericTransactionManagerLookup();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field lookupDone:Z
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field lookupFailed:Z
      14: aload_0
      15: iconst_0
      16: putfield      #4                  // Field noJBossTM:Z
      19: aload_0
      20: aconst_null
      21: putfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
      24: return

  public void init(org.infinispan.configuration.global.GlobalConfiguration);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #6                  // Field globalCfg:Lorg/infinispan/configuration/global/GlobalConfiguration;
       5: return

  public synchronized javax.transaction.TransactionManager getTransactionManager();
    Code:
       0: aload_0
       1: getfield      #2                  // Field lookupDone:Z
       4: ifne          18
       7: aload_0
       8: aload_0
       9: getfield      #6                  // Field globalCfg:Lorg/infinispan/configuration/global/GlobalConfiguration;
      12: invokevirtual #7                  // Method org/infinispan/configuration/global/GlobalConfiguration.classLoader:()Ljava/lang/ClassLoader;
      15: invokespecial #8                  // Method doLookups:(Ljava/lang/ClassLoader;)V
      18: aload_0
      19: getfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
      22: ifnull        30
      25: aload_0
      26: getfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
      29: areturn
      30: aload_0
      31: getfield      #3                  // Field lookupFailed:Z
      34: ifeq          59
      37: aload_0
      38: getfield      #4                  // Field noJBossTM:Z
      41: ifne          48
      44: aload_0
      45: invokespecial #9                  // Method tryEmbeddedJBossTM:()V
      48: aload_0
      49: getfield      #4                  // Field noJBossTM:Z
      52: ifeq          59
      55: aload_0
      56: invokespecial #10                 // Method useDummyTM:()V
      59: aload_0
      60: getfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
      63: areturn

  private void useDummyTM();
    Code:
       0: aload_0
       1: invokestatic  #11                 // Method org/infinispan/transaction/tm/DummyTransactionManager.getInstance:()Lorg/infinispan/transaction/tm/DummyTransactionManager;
       4: putfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
       7: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
      10: invokeinterface #13,  1           // InterfaceMethod org/infinispan/util/logging/Log.fallingBackToDummyTm:()V
      15: return

  private void tryEmbeddedJBossTM();
    Code:
       0: new           #14                 // class org/infinispan/transaction/lookup/JBossStandaloneJTAManagerLookup
       3: dup
       4: invokespecial #15                 // Method org/infinispan/transaction/lookup/JBossStandaloneJTAManagerLookup."<init>":()V
       7: astore_1
       8: aload_1
       9: aload_0
      10: getfield      #6                  // Field globalCfg:Lorg/infinispan/configuration/global/GlobalConfiguration;
      13: invokevirtual #16                 // Method org/infinispan/transaction/lookup/JBossStandaloneJTAManagerLookup.init:(Lorg/infinispan/configuration/global/GlobalConfiguration;)V
      16: aload_0
      17: aload_1
      18: invokevirtual #17                 // Method org/infinispan/transaction/lookup/JBossStandaloneJTAManagerLookup.getTransactionManager:()Ljavax/transaction/TransactionManager;
      21: putfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
      24: goto          33
      27: astore_1
      28: aload_0
      29: iconst_1
      30: putfield      #4                  // Field noJBossTM:Z
      33: return
    Exception table:
       from    to  target type
           0    24    27   Class java/lang/Exception

  private void doLookups(java.lang.ClassLoader);
    Code:
       0: aload_0
       1: getfield      #3                  // Field lookupFailed:Z
       4: ifeq          8
       7: return
       8: aconst_null
       9: astore_2
      10: new           #19                 // class javax/naming/InitialContext
      13: dup
      14: invokespecial #20                 // Method javax/naming/InitialContext."<init>":()V
      17: astore_2
      18: goto          41
      21: astore_3
      22: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
      25: aload_3
      26: invokeinterface #22,  2           // InterfaceMethod org/infinispan/util/logging/Log.failedToCreateInitialCtx:(Ljavax/naming/NamingException;)V
      31: aload_0
      32: iconst_1
      33: putfield      #3                  // Field lookupFailed:Z
      36: aload_2
      37: invokestatic  #23                 // Method org/infinispan/commons/util/Util.close:(Ljavax/naming/Context;)V
      40: return
      41: getstatic     #24                 // Field knownJNDIManagers:[[Ljava/lang/String;
      44: astore_3
      45: aload_3
      46: arraylength
      47: istore        4
      49: iconst_0
      50: istore        5
      52: iload         5
      54: iload         4
      56: if_icmpge     157
      59: aload_3
      60: iload         5
      62: aaload
      63: astore        6
      65: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
      68: ldc           #25                 // String Trying to lookup TransactionManager for %s
      70: aload         6
      72: iconst_1
      73: aaload
      74: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
      79: aload_2
      80: aload         6
      82: iconst_0
      83: aaload
      84: invokevirtual #27                 // Method javax/naming/InitialContext.lookup:(Ljava/lang/String;)Ljava/lang/Object;
      87: astore        7
      89: goto          115
      92: astore        8
      94: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
      97: ldc           #28                 // String Failed to perform a lookup for [%s (%s)]
      99: aload         6
     101: iconst_0
     102: aaload
     103: aload         6
     105: iconst_1
     106: aaload
     107: invokeinterface #29,  4           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     112: goto          151
     115: aload         7
     117: instanceof    #30                 // class javax/transaction/TransactionManager
     120: ifeq          151
     123: aload_0
     124: aload         7
     126: checkcast     #30                 // class javax/transaction/TransactionManager
     129: putfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
     132: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     135: ldc           #31                 // String Found TransactionManager for %s
     137: aload         6
     139: iconst_1
     140: aaload
     141: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     146: aload_2
     147: invokestatic  #23                 // Method org/infinispan/commons/util/Util.close:(Ljavax/naming/Context;)V
     150: return
     151: iinc          5, 1
     154: goto          52
     157: aload_2
     158: invokestatic  #23                 // Method org/infinispan/commons/util/Util.close:(Ljavax/naming/Context;)V
     161: goto          173
     164: astore        9
     166: aload_2
     167: invokestatic  #23                 // Method org/infinispan/commons/util/Util.close:(Ljavax/naming/Context;)V
     170: aload         9
     172: athrow
     173: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     176: ldc           #32                 // String Trying WebSphere 5.1: %s
     178: ldc           #34                 // String com.ibm.ws.Transaction.TransactionManagerFactory
     180: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     185: ldc           #34                 // String com.ibm.ws.Transaction.TransactionManagerFactory
     187: aload_1
     188: invokestatic  #35                 // Method org/infinispan/commons/util/Util.loadClassStrict:(Ljava/lang/String;Ljava/lang/ClassLoader;)Ljava/lang/Class;
     191: astore_3
     192: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     195: ldc           #36                 // String Found WebSphere 5.1: %s
     197: ldc           #34                 // String com.ibm.ws.Transaction.TransactionManagerFactory
     199: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     204: goto          297
     207: astore        4
     209: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     212: ldc           #38                 // String Trying WebSphere 5.0: %s
     214: ldc           #39                 // String com.ibm.ejs.jts.jta.TransactionManagerFactory
     216: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     221: ldc           #39                 // String com.ibm.ejs.jts.jta.TransactionManagerFactory
     223: aload_1
     224: invokestatic  #35                 // Method org/infinispan/commons/util/Util.loadClassStrict:(Ljava/lang/String;Ljava/lang/ClassLoader;)Ljava/lang/Class;
     227: astore_3
     228: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     231: ldc           #40                 // String Found WebSphere 5.0: %s
     233: ldc           #39                 // String com.ibm.ejs.jts.jta.TransactionManagerFactory
     235: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     240: goto          297
     243: astore        5
     245: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     248: ldc           #41                 // String Trying WebSphere 4: %s
     250: ldc           #42                 // String com.ibm.ejs.jts.jta.JTSXA
     252: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     257: ldc           #42                 // String com.ibm.ejs.jts.jta.JTSXA
     259: aload_1
     260: invokestatic  #35                 // Method org/infinispan/commons/util/Util.loadClassStrict:(Ljava/lang/String;Ljava/lang/ClassLoader;)Ljava/lang/Class;
     263: astore_3
     264: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     267: ldc           #43                 // String Found WebSphere 4: %s
     269: ldc           #42                 // String com.ibm.ejs.jts.jta.JTSXA
     271: invokeinterface #26,  3           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     276: goto          297
     279: astore        6
     281: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     284: ldc           #44                 // String Couldn\'t find any WebSphere TransactionManager factory class, neither for WebSphere version 5.1 nor 5.0 nor 4
     286: invokeinterface #45,  2           // InterfaceMethod org/infinispan/util/logging/Log.debug:(Ljava/lang/Object;)V
     291: aload_0
     292: iconst_1
     293: putfield      #3                  // Field lookupFailed:Z
     296: return
     297: aconst_null
     298: astore        4
     300: aconst_null
     301: astore        5
     303: aload_3
     304: ldc           #46                 // String getTransactionManager
     306: aload         4
     308: invokevirtual #47                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
     311: astore        6
     313: aload_0
     314: aload         6
     316: aconst_null
     317: aload         5
     319: invokevirtual #48                 // Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
     322: checkcast     #30                 // class javax/transaction/TransactionManager
     325: putfield      #5                  // Field tm:Ljavax/transaction/TransactionManager;
     328: goto          347
     331: astore        4
     333: getstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
     336: aload         4
     338: aload_3
     339: invokevirtual #49                 // Method java/lang/Class.getName:()Ljava/lang/String;
     342: invokeinterface #50,  3           // InterfaceMethod org/infinispan/util/logging/Log.unableToInvokeWebsphereStaticGetTmMethod:(Ljava/lang/Exception;Ljava/lang/String;)V
     347: aload_0
     348: iconst_1
     349: putfield      #2                  // Field lookupDone:Z
     352: return
    Exception table:
       from    to  target type
          10    18    21   Class javax/naming/NamingException
          65    89    92   Class javax/naming/NamingException
          41   146   164   any
         151   157   164   any
         164   166   164   any
         173   204   207   Class java/lang/ClassNotFoundException
         209   240   243   Class java/lang/ClassNotFoundException
         245   276   279   Class java/lang/ClassNotFoundException
         297   328   331   Class java/lang/Exception

  static {};
    Code:
       0: ldc           #33                 // class org/infinispan/transaction/lookup/GenericTransactionManagerLookup
       2: invokestatic  #51                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #12                 // Field log:Lorg/infinispan/util/logging/Log;
       8: new           #33                 // class org/infinispan/transaction/lookup/GenericTransactionManagerLookup
      11: dup
      12: invokespecial #52                 // Method "<init>":()V
      15: putstatic     #53                 // Field INSTANCE:Lorg/infinispan/transaction/lookup/GenericTransactionManagerLookup;
      18: bipush        8
      20: anewarray     #54                 // class "[Ljava/lang/String;"
      23: dup
      24: iconst_0
      25: iconst_2
      26: anewarray     #55                 // class java/lang/String
      29: dup
      30: iconst_0
      31: ldc           #56                 // String java:jboss/TransactionManager
      33: aastore
      34: dup
      35: iconst_1
      36: ldc           #57                 // String JBoss AS 7
      38: aastore
      39: aastore
      40: dup
      41: iconst_1
      42: iconst_2
      43: anewarray     #55                 // class java/lang/String
      46: dup
      47: iconst_0
      48: ldc           #58                 // String java:/TransactionManager
      50: aastore
      51: dup
      52: iconst_1
      53: ldc           #59                 // String JBoss AS 4 ~ 6, JRun4
      55: aastore
      56: aastore
      57: dup
      58: iconst_2
      59: iconst_2
      60: anewarray     #55                 // class java/lang/String
      63: dup
      64: iconst_0
      65: ldc           #60                 // String java:comp/TransactionManager
      67: aastore
      68: dup
      69: iconst_1
      70: ldc           #61                 // String Resin 3.x
      72: aastore
      73: aastore
      74: dup
      75: iconst_3
      76: iconst_2
      77: anewarray     #55                 // class java/lang/String
      80: dup
      81: iconst_0
      82: ldc           #62                 // String java:appserver/TransactionManager
      84: aastore
      85: dup
      86: iconst_1
      87: ldc           #63                 // String Sun Glassfish
      89: aastore
      90: aastore
      91: dup
      92: iconst_4
      93: iconst_2
      94: anewarray     #55                 // class java/lang/String
      97: dup
      98: iconst_0
      99: ldc           #64                 // String java:pm/TransactionManager
     101: aastore
     102: dup
     103: iconst_1
     104: ldc           #65                 // String Borland, Sun
     106: aastore
     107: aastore
     108: dup
     109: iconst_5
     110: iconst_2
     111: anewarray     #55                 // class java/lang/String
     114: dup
     115: iconst_0
     116: ldc           #66                 // String javax.transaction.TransactionManager
     118: aastore
     119: dup
     120: iconst_1
     121: ldc           #67                 // String BEA WebLogic
     123: aastore
     124: aastore
     125: dup
     126: bipush        6
     128: iconst_2
     129: anewarray     #55                 // class java/lang/String
     132: dup
     133: iconst_0
     134: ldc           #68                 // String java:comp/UserTransaction
     136: aastore
     137: dup
     138: iconst_1
     139: ldc           #69                 // String Resin, Orion, JOnAS (JOTM)
     141: aastore
     142: aastore
     143: dup
     144: bipush        7
     146: iconst_2
     147: anewarray     #55                 // class java/lang/String
     150: dup
     151: iconst_0
     152: ldc           #70                 // String osgi:service/javax.transaction.TransactionManager
     154: aastore
     155: dup
     156: iconst_1
     157: ldc           #71                 // String Karaf
     159: aastore
     160: aastore
     161: putstatic     #24                 // Field knownJNDIManagers:[[Ljava/lang/String;
     164: return
}

Compiled from "DefaultPendingLockManager.java"
public class org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager implements org.infinispan.util.concurrent.locks.PendingLockManager {
  private static final org.infinispan.util.logging.Log log;

  private static final boolean trace;

  private static final int NO_PENDING_CHECK;

  private final java.util.Map<org.infinispan.transaction.xa.GlobalTransaction, org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl> pendingLockPromiseMap;

  private org.infinispan.transaction.impl.TransactionTable transactionTable;

  private org.infinispan.util.TimeService timeService;

  private java.util.concurrent.ScheduledExecutorService timeoutExecutor;

  private org.infinispan.statetransfer.StateTransferManager stateTransferManager;

  public org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #4                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
      15: return

  public void inject(org.infinispan.transaction.impl.TransactionTable, org.infinispan.util.TimeService, java.util.concurrent.ScheduledExecutorService, org.infinispan.statetransfer.StateTransferManager);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #6                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
       5: aload_0
       6: aload_2
       7: putfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      10: aload_0
      11: aload_3
      12: putfield      #7                  // Field timeoutExecutor:Ljava/util/concurrent/ScheduledExecutorService;
      15: aload_0
      16: aload         4
      18: putfield      #8                  // Field stateTransferManager:Lorg/infinispan/statetransfer/StateTransferManager;
      21: return

  public org.infinispan.util.concurrent.locks.PendingLockPromise checkPendingTransactionsForKey(org.infinispan.context.impl.TxInvocationContext<?>, java.lang.Object, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_1
       1: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
       6: astore        6
       8: aload_0
       9: getfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
      12: aload         6
      14: invokeinterface #10,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      19: checkcast     #11                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl
      22: astore        7
      24: aload         7
      26: ifnull        32
      29: aload         7
      31: areturn
      32: aload_0
      33: aload_1
      34: invokespecial #12                 // Method getTopologyId:(Lorg/infinispan/context/impl/TxInvocationContext;)I
      37: istore        8
      39: iload         8
      41: bipush        -2
      43: if_icmpeq     85
      46: getstatic     #14                 // Field trace:Z
      49: ifeq          66
      52: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      55: ldc           #16                 // String Checking for pending locks and then locking key %s
      57: aload_2
      58: invokestatic  #17                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/lang/Object;)Ljava/lang/String;
      61: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      66: aload_0
      67: aload_0
      68: iload         8
      70: aload_2
      71: aload         6
      73: invokespecial #19                 // Method getTransactionWithLockedKey:(ILjava/lang/Object;Lorg/infinispan/transaction/xa/GlobalTransaction;)Ljava/util/Collection;
      76: aload         6
      78: lload_3
      79: aload         5
      81: invokespecial #20                 // Method createAndStore:(Ljava/util/Collection;Lorg/infinispan/transaction/xa/GlobalTransaction;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/PendingLockPromise;
      84: areturn
      85: getstatic     #21                 // Field org/infinispan/util/concurrent/locks/PendingLockPromise.NO_OP:Lorg/infinispan/util/concurrent/locks/PendingLockPromise;
      88: areturn

  public org.infinispan.util.concurrent.locks.PendingLockPromise checkPendingTransactionsForKeys(org.infinispan.context.impl.TxInvocationContext<?>, java.util.Collection<java.lang.Object>, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_1
       1: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
       6: astore        6
       8: aload_0
       9: getfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
      12: aload         6
      14: invokeinterface #10,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      19: checkcast     #11                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl
      22: astore        7
      24: aload         7
      26: ifnull        32
      29: aload         7
      31: areturn
      32: aload_0
      33: aload_1
      34: invokespecial #12                 // Method getTopologyId:(Lorg/infinispan/context/impl/TxInvocationContext;)I
      37: istore        8
      39: iload         8
      41: bipush        -2
      43: if_icmpeq     85
      46: getstatic     #14                 // Field trace:Z
      49: ifeq          66
      52: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      55: ldc           #22                 // String Checking for pending locks and then locking keys %s
      57: aload_2
      58: invokestatic  #23                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/util/Collection;)Ljava/lang/String;
      61: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      66: aload_0
      67: aload_0
      68: iload         8
      70: aload_2
      71: aload         6
      73: invokespecial #24                 // Method getTransactionWithAnyLockedKey:(ILjava/util/Collection;Lorg/infinispan/transaction/xa/GlobalTransaction;)Ljava/util/Collection;
      76: aload         6
      78: lload_3
      79: aload         5
      81: invokespecial #20                 // Method createAndStore:(Ljava/util/Collection;Lorg/infinispan/transaction/xa/GlobalTransaction;JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/util/concurrent/locks/PendingLockPromise;
      84: areturn
      85: getstatic     #21                 // Field org/infinispan/util/concurrent/locks/PendingLockPromise.NO_OP:Lorg/infinispan/util/concurrent/locks/PendingLockPromise;
      88: areturn

  public long awaitPendingTransactionsForKey(org.infinispan.context.impl.TxInvocationContext<?>, java.lang.Object, long, java.util.concurrent.TimeUnit) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      10: invokeinterface #25,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #11                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl
      18: astore        6
      20: aload         6
      22: ifnull        37
      25: aload         6
      27: aload_1
      28: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      33: invokestatic  #26                 // Method awaitOn:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;Lorg/infinispan/transaction/xa/GlobalTransaction;)J
      36: pop2
      37: aload_0
      38: aload_1
      39: invokespecial #12                 // Method getTopologyId:(Lorg/infinispan/context/impl/TxInvocationContext;)I
      42: istore        7
      44: iload         7
      46: bipush        -2
      48: if_icmpeq     71
      51: aload_0
      52: aload_2
      53: aload_1
      54: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      59: iload         7
      61: aload         5
      63: lload_3
      64: invokevirtual #27                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      67: invokespecial #28                 // Method checkForPendingLock:(Ljava/lang/Object;Lorg/infinispan/transaction/xa/GlobalTransaction;IJ)J
      70: lreturn
      71: getstatic     #14                 // Field trace:Z
      74: ifeq          91
      77: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      80: ldc           #29                 // String Locking key %s, no need to check for pending locks.
      82: aload_2
      83: invokestatic  #17                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/lang/Object;)Ljava/lang/String;
      86: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      91: aload         5
      93: lload_3
      94: invokevirtual #27                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      97: lreturn

  public long awaitPendingTransactionsForAllKeys(org.infinispan.context.impl.TxInvocationContext<?>, java.util.Collection<java.lang.Object>, long, java.util.concurrent.TimeUnit) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      10: invokeinterface #25,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #11                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl
      18: astore        6
      20: aload         6
      22: ifnull        37
      25: aload         6
      27: aload_1
      28: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      33: invokestatic  #26                 // Method awaitOn:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;Lorg/infinispan/transaction/xa/GlobalTransaction;)J
      36: pop2
      37: aload_0
      38: aload_1
      39: invokespecial #12                 // Method getTopologyId:(Lorg/infinispan/context/impl/TxInvocationContext;)I
      42: istore        7
      44: iload         7
      46: bipush        -2
      48: if_icmpeq     71
      51: aload_0
      52: aload_2
      53: aload_1
      54: invokeinterface #9,  1            // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      59: iload         7
      61: aload         5
      63: lload_3
      64: invokevirtual #27                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      67: invokespecial #30                 // Method checkForAnyPendingLocks:(Ljava/util/Collection;Lorg/infinispan/transaction/xa/GlobalTransaction;IJ)J
      70: lreturn
      71: getstatic     #14                 // Field trace:Z
      74: ifeq          91
      77: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      80: ldc           #31                 // String Locking keys %s, no need to check for pending locks.
      82: aload_2
      83: invokestatic  #23                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/util/Collection;)Ljava/lang/String;
      86: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      91: aload         5
      93: lload_3
      94: invokevirtual #27                 // Method java/util/concurrent/TimeUnit.toMillis:(J)J
      97: lreturn

  private org.infinispan.util.concurrent.locks.PendingLockPromise createAndStore(java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction>, org.infinispan.transaction.xa.GlobalTransaction, long, java.util.concurrent.TimeUnit);
    Code:
       0: aload_1
       1: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
       6: ifeq          13
       9: getstatic     #21                 // Field org/infinispan/util/concurrent/locks/PendingLockPromise.NO_OP:Lorg/infinispan/util/concurrent/locks/PendingLockPromise;
      12: areturn
      13: new           #11                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl
      16: dup
      17: aload_0
      18: aload_1
      19: aload_0
      20: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      23: lload_3
      24: aload         5
      26: invokeinterface #33,  4           // InterfaceMethod org/infinispan/util/TimeService.expectedEndTime:(JLjava/util/concurrent/TimeUnit;)J
      31: aconst_null
      32: invokespecial #34                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl."<init>":(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager;Ljava/util/Collection;JLorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$1;)V
      35: astore        6
      37: aload_0
      38: getfield      #5                  // Field pendingLockPromiseMap:Ljava/util/Map;
      41: aload_2
      42: aload         6
      44: invokeinterface #35,  3           // InterfaceMethod java/util/Map.putIfAbsent:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      49: checkcast     #36                 // class org/infinispan/util/concurrent/locks/PendingLockPromise
      52: astore        7
      54: aload         7
      56: ifnull        62
      59: aload         7
      61: areturn
      62: aload         6
      64: invokestatic  #37                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.access$100:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;)V
      67: aload         6
      69: invokevirtual #38                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.isReady:()Z
      72: ifne          90
      75: aload_0
      76: getfield      #7                  // Field timeoutExecutor:Ljava/util/concurrent/ScheduledExecutorService;
      79: aload         6
      81: lload_3
      82: aload         5
      84: invokeinterface #39,  5           // InterfaceMethod java/util/concurrent/ScheduledExecutorService.schedule:(Ljava/util/concurrent/Callable;JLjava/util/concurrent/TimeUnit;)Ljava/util/concurrent/ScheduledFuture;
      89: pop
      90: aload         6
      92: areturn

  private int getTopologyId(org.infinispan.context.impl.TxInvocationContext<?>);
    Code:
       0: aload_1
       1: invokeinterface #40,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
       6: astore_2
       7: aload_1
       8: invokeinterface #41,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      13: ifeq          30
      16: aload_2
      17: checkcast     #42                 // class org/infinispan/transaction/impl/LocalTransaction
      20: invokevirtual #43                 // Method org/infinispan/transaction/impl/LocalTransaction.isFromStateTransfer:()Z
      23: ifeq          30
      26: iconst_1
      27: goto          31
      30: iconst_0
      31: istore_3
      32: iload_3
      33: ifne          71
      36: aload_0
      37: getfield      #8                  // Field stateTransferManager:Lorg/infinispan/statetransfer/StateTransferManager;
      40: invokeinterface #44,  1           // InterfaceMethod org/infinispan/statetransfer/StateTransferManager.getCacheTopology:()Lorg/infinispan/topology/CacheTopology;
      45: invokevirtual #45                 // Method org/infinispan/topology/CacheTopology.getTopologyId:()I
      48: istore        4
      50: iload         4
      52: iconst_m1
      53: if_icmpeq     71
      56: aload_0
      57: getfield      #6                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
      60: invokevirtual #47                 // Method org/infinispan/transaction/impl/TransactionTable.getMinTopologyId:()I
      63: iload         4
      65: if_icmpge     71
      68: iload         4
      70: ireturn
      71: bipush        -2
      73: ireturn

  private long checkForPendingLock(java.lang.Object, org.infinispan.transaction.xa.GlobalTransaction, int, long) throws java.lang.InterruptedException;
    Code:
       0: getstatic     #14                 // Field trace:Z
       3: ifeq          20
       6: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
       9: ldc           #16                 // String Checking for pending locks and then locking key %s
      11: aload_1
      12: invokestatic  #17                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/lang/Object;)Ljava/lang/String;
      15: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      20: aload_0
      21: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      24: lload         4
      26: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      29: invokeinterface #33,  4           // InterfaceMethod org/infinispan/util/TimeService.expectedEndTime:(JLjava/util/concurrent/TimeUnit;)J
      34: lstore        6
      36: aload_0
      37: iload_3
      38: aload_1
      39: aload_2
      40: invokespecial #19                 // Method getTransactionWithLockedKey:(ILjava/lang/Object;Lorg/infinispan/transaction/xa/GlobalTransaction;)Ljava/util/Collection;
      43: astore        8
      45: aload_0
      46: aload         8
      48: lload         6
      50: invokespecial #49                 // Method waitForTransactionsToComplete:(Ljava/util/Collection;J)Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
      53: astore        9
      55: getstatic     #14                 // Field trace:Z
      58: ifeq          84
      61: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      64: ldc           #50                 // String Finished waiting for other potential lockers. Timed-Out? %b
      66: aload         9
      68: ifnull        75
      71: iconst_1
      72: goto          76
      75: iconst_0
      76: invokestatic  #51                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      79: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      84: aload         9
      86: ifnull        95
      89: aload         9
      91: aload_2
      92: invokestatic  #52                 // Method timeout:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;Lorg/infinispan/transaction/xa/GlobalTransaction;)V
      95: aload_0
      96: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      99: lload         6
     101: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     104: invokeinterface #53,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
     109: lreturn

  private long checkForAnyPendingLocks(java.util.Collection<java.lang.Object>, org.infinispan.transaction.xa.GlobalTransaction, int, long) throws java.lang.InterruptedException;
    Code:
       0: getstatic     #14                 // Field trace:Z
       3: ifeq          20
       6: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
       9: ldc           #16                 // String Checking for pending locks and then locking key %s
      11: aload_1
      12: invokestatic  #23                 // Method org/infinispan/commons/util/Util.toStr:(Ljava/util/Collection;)Ljava/lang/String;
      15: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      20: aload_0
      21: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      24: lload         4
      26: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      29: invokeinterface #33,  4           // InterfaceMethod org/infinispan/util/TimeService.expectedEndTime:(JLjava/util/concurrent/TimeUnit;)J
      34: lstore        6
      36: aload_0
      37: iload_3
      38: aload_1
      39: aload_2
      40: invokespecial #24                 // Method getTransactionWithAnyLockedKey:(ILjava/util/Collection;Lorg/infinispan/transaction/xa/GlobalTransaction;)Ljava/util/Collection;
      43: astore        8
      45: aload_0
      46: aload         8
      48: lload         6
      50: invokespecial #49                 // Method waitForTransactionsToComplete:(Ljava/util/Collection;J)Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
      53: astore        9
      55: getstatic     #14                 // Field trace:Z
      58: ifeq          84
      61: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      64: ldc           #50                 // String Finished waiting for other potential lockers. Timed-Out? %b
      66: aload         9
      68: ifnull        75
      71: iconst_1
      72: goto          76
      75: iconst_0
      76: invokestatic  #51                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      79: invokeinterface #18,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      84: aload         9
      86: ifnull        95
      89: aload         9
      91: aload_2
      92: invokestatic  #52                 // Method timeout:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;Lorg/infinispan/transaction/xa/GlobalTransaction;)V
      95: aload_0
      96: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      99: lload         6
     101: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     104: invokeinterface #53,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
     109: lreturn

  private static void timeout(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction, org.infinispan.transaction.xa.GlobalTransaction);
    Code:
       0: new           #54                 // class org/infinispan/util/concurrent/TimeoutException
       3: dup
       4: ldc           #55                 // String Could not acquire lock on %s in behalf of transaction %s. Current owner %s.
       6: iconst_3
       7: anewarray     #56                 // class java/lang/Object
      10: dup
      11: iconst_0
      12: aload_0
      13: getfield      #57                 // Field org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction.key:Ljava/lang/Object;
      16: aastore
      17: dup
      18: iconst_1
      19: aload_1
      20: aastore
      21: dup
      22: iconst_2
      23: aload_0
      24: getfield      #58                 // Field org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction.cacheTransaction:Lorg/infinispan/transaction/xa/CacheTransaction;
      27: invokeinterface #59,  1           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      32: aastore
      33: invokestatic  #60                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      36: invokespecial #61                 // Method org/infinispan/util/concurrent/TimeoutException."<init>":(Ljava/lang/String;)V
      39: athrow

  private org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction waitForTransactionsToComplete(java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction>, long) throws java.lang.InterruptedException;
    Code:
       0: aload_1
       1: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
       6: ifeq          11
       9: aconst_null
      10: areturn
      11: aload_1
      12: invokeinterface #62,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      17: astore        4
      19: aload         4
      21: invokeinterface #63,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      26: ifeq          84
      29: aload         4
      31: invokeinterface #64,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      36: checkcast     #65                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction
      39: astore        5
      41: aload_0
      42: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
      45: lload_2
      46: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      49: invokeinterface #53,  4           // InterfaceMethod org/infinispan/util/TimeService.remainingTime:(JLjava/util/concurrent/TimeUnit;)J
      54: dup2
      55: lstore        6
      57: lconst_0
      58: lcmp
      59: ifle          81
      62: aload         5
      64: invokestatic  #66                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction.access$200:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;)Ljava/util/concurrent/CompletableFuture;
      67: lload         6
      69: getstatic     #48                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      72: invokestatic  #67                 // Method org/infinispan/util/concurrent/CompletableFutures.await:(Ljava/util/concurrent/CompletableFuture;JLjava/util/concurrent/TimeUnit;)Z
      75: ifne          81
      78: aload         5
      80: areturn
      81: goto          19
      84: aconst_null
      85: areturn

  private java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction> getTransactionWithLockedKey(int, java.lang.Object, org.infinispan.transaction.xa.GlobalTransaction);
    Code:
       0: new           #68                 // class java/util/ArrayList
       3: dup
       4: invokespecial #69                 // Method java/util/ArrayList."<init>":()V
       7: astore        4
       9: aload_0
      10: iload_1
      11: aload_3
      12: aload_2
      13: aload         4
      15: invokedynamic #70,  0             // InvokeDynamic #0:accept:(ILorg/infinispan/transaction/xa/GlobalTransaction;Ljava/lang/Object;Ljava/util/Collection;)Ljava/util/function/Consumer;
      20: invokespecial #71                 // Method forEachTransaction:(Ljava/util/function/Consumer;)V
      23: aload         4
      25: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      30: ifeq          39
      33: invokestatic  #72                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      36: goto          41
      39: aload         4
      41: areturn

  private java.util.Collection<org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingTransaction> getTransactionWithAnyLockedKey(int, java.util.Collection<java.lang.Object>, org.infinispan.transaction.xa.GlobalTransaction);
    Code:
       0: new           #68                 // class java/util/ArrayList
       3: dup
       4: invokespecial #69                 // Method java/util/ArrayList."<init>":()V
       7: astore        4
       9: aload_0
      10: iload_1
      11: aload_3
      12: aload_2
      13: aload         4
      15: invokedynamic #73,  0             // InvokeDynamic #1:accept:(ILorg/infinispan/transaction/xa/GlobalTransaction;Ljava/util/Collection;Ljava/util/Collection;)Ljava/util/function/Consumer;
      20: invokespecial #71                 // Method forEachTransaction:(Ljava/util/function/Consumer;)V
      23: aload         4
      25: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      30: ifeq          39
      33: invokestatic  #72                 // Method java/util/Collections.emptyList:()Ljava/util/List;
      36: goto          41
      39: aload         4
      41: areturn

  private void forEachTransaction(java.util.function.Consumer<org.infinispan.transaction.xa.CacheTransaction>);
    Code:
       0: aload_0
       1: getfield      #6                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
       4: invokevirtual #74                 // Method org/infinispan/transaction/impl/TransactionTable.getLocalTransactions:()Ljava/util/Collection;
       7: astore_2
       8: aload_0
       9: getfield      #6                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
      12: invokevirtual #75                 // Method org/infinispan/transaction/impl/TransactionTable.getRemoteTransactions:()Ljava/util/Collection;
      15: astore_3
      16: aload_2
      17: invokeinterface #76,  1           // InterfaceMethod java/util/Collection.size:()I
      22: aload_3
      23: invokeinterface #76,  1           // InterfaceMethod java/util/Collection.size:()I
      28: iadd
      29: istore        4
      31: iload         4
      33: ifne          37
      36: return
      37: aload_2
      38: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      43: ifne          53
      46: aload_2
      47: aload_1
      48: invokeinterface #77,  2           // InterfaceMethod java/util/Collection.forEach:(Ljava/util/function/Consumer;)V
      53: aload_3
      54: invokeinterface #32,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      59: ifne          69
      62: aload_3
      63: aload_1
      64: invokeinterface #77,  2           // InterfaceMethod java/util/Collection.forEach:(Ljava/util/function/Consumer;)V
      69: return

  private static long awaitOn(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager$PendingLockPromiseImpl, org.infinispan.transaction.xa.GlobalTransaction) throws java.lang.InterruptedException;
    Code:
       0: aload_0
       1: invokestatic  #78                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.access$300:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;)V
       4: aload_0
       5: invokevirtual #79                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.hasTimedOut:()Z
       8: ifeq          19
      11: aload_0
      12: invokestatic  #80                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.access$400:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl;)Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;
      15: aload_1
      16: invokestatic  #52                 // Method timeout:(Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction;Lorg/infinispan/transaction/xa/GlobalTransaction;)V
      19: aload_0
      20: invokevirtual #81                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingLockPromiseImpl.getRemainingTimeout:()J
      23: lreturn

  private static void lambda$getTransactionWithAnyLockedKey$40(int, org.infinispan.transaction.xa.GlobalTransaction, java.util.Collection, java.util.Collection, org.infinispan.transaction.xa.CacheTransaction);
    Code:
       0: aload         4
       2: invokeinterface #82,  1           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getTopologyId:()I
       7: iload_0
       8: if_icmpge     70
      11: aload         4
      13: invokeinterface #59,  1           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      18: aload_1
      19: invokevirtual #83                 // Method org/infinispan/transaction/xa/GlobalTransaction.equals:(Ljava/lang/Object;)Z
      22: ifne          70
      25: aload         4
      27: aload_2
      28: invokeinterface #84,  2           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getReleaseFutureForKeys:(Ljava/util/Collection;)Lorg/infinispan/util/KeyValuePair;
      33: astore        5
      35: aload         5
      37: ifnull        70
      40: aload_3
      41: new           #65                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction
      44: dup
      45: aload         4
      47: aload         5
      49: invokevirtual #85                 // Method org/infinispan/util/KeyValuePair.getKey:()Ljava/lang/Object;
      52: aload         5
      54: invokevirtual #86                 // Method org/infinispan/util/KeyValuePair.getValue:()Ljava/lang/Object;
      57: checkcast     #87                 // class java/util/concurrent/CompletableFuture
      60: aconst_null
      61: invokespecial #88                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction."<init>":(Lorg/infinispan/transaction/xa/CacheTransaction;Ljava/lang/Object;Ljava/util/concurrent/CompletableFuture;Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$1;)V
      64: invokeinterface #89,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      69: pop
      70: return

  private static void lambda$getTransactionWithLockedKey$39(int, org.infinispan.transaction.xa.GlobalTransaction, java.lang.Object, java.util.Collection, org.infinispan.transaction.xa.CacheTransaction);
    Code:
       0: aload         4
       2: invokeinterface #82,  1           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getTopologyId:()I
       7: iload_0
       8: if_icmpge     60
      11: aload         4
      13: invokeinterface #59,  1           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      18: aload_1
      19: invokevirtual #83                 // Method org/infinispan/transaction/xa/GlobalTransaction.equals:(Ljava/lang/Object;)Z
      22: ifne          60
      25: aload         4
      27: aload_2
      28: invokeinterface #90,  2           // InterfaceMethod org/infinispan/transaction/xa/CacheTransaction.getReleaseFutureForKey:(Ljava/lang/Object;)Ljava/util/concurrent/CompletableFuture;
      33: astore        5
      35: aload         5
      37: ifnull        60
      40: aload_3
      41: new           #65                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction
      44: dup
      45: aload         4
      47: aload_2
      48: aload         5
      50: aconst_null
      51: invokespecial #88                 // Method org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$PendingTransaction."<init>":(Lorg/infinispan/transaction/xa/CacheTransaction;Ljava/lang/Object;Ljava/util/concurrent/CompletableFuture;Lorg/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager$1;)V
      54: invokeinterface #89,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      59: pop
      60: return

  static org.infinispan.util.TimeService access$500(org.infinispan.util.concurrent.locks.impl.DefaultPendingLockManager);
    Code:
       0: aload_0
       1: getfield      #1                  // Field timeService:Lorg/infinispan/util/TimeService;
       4: areturn

  static {};
    Code:
       0: ldc           #13                 // class org/infinispan/util/concurrent/locks/impl/DefaultPendingLockManager
       2: invokestatic  #91                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
       8: getstatic     #15                 // Field log:Lorg/infinispan/util/logging/Log;
      11: invokeinterface #92,  1           // InterfaceMethod org/infinispan/util/logging/Log.isTraceEnabled:()Z
      16: putstatic     #14                 // Field trace:Z
      19: return
}

Compiled from "PassivationManagerImpl.java"
public class org.infinispan.eviction.impl.PassivationManagerImpl implements org.infinispan.eviction.PassivationManager {
  org.infinispan.persistence.manager.PersistenceManager persistenceManager;

  org.infinispan.notifications.cachelistener.CacheNotifier notifier;

  org.infinispan.configuration.cache.Configuration cfg;

  private volatile boolean skipOnStop;

  boolean statsEnabled;

  boolean enabled;

  private static final org.infinispan.util.logging.Log log;

  private final java.util.concurrent.atomic.AtomicLong passivations;

  private org.infinispan.container.DataContainer<java.lang.Object, java.lang.Object> container;

  private org.infinispan.util.TimeService timeService;

  private static final boolean trace;

  private org.infinispan.marshall.core.MarshalledEntryFactory marshalledEntryFactory;

  private org.infinispan.distribution.DistributionManager distributionManager;

  public org.infinispan.eviction.impl.PassivationManagerImpl();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_0
       6: putfield      #2                  // Field skipOnStop:Z
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field statsEnabled:Z
      14: aload_0
      15: iconst_0
      16: putfield      #4                  // Field enabled:Z
      19: aload_0
      20: new           #5                  // class java/util/concurrent/atomic/AtomicLong
      23: dup
      24: lconst_0
      25: invokespecial #6                  // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      28: putfield      #7                  // Field passivations:Ljava/util/concurrent/atomic/AtomicLong;
      31: return

  public void inject(org.infinispan.persistence.manager.PersistenceManager, org.infinispan.notifications.cachelistener.CacheNotifier, org.infinispan.configuration.cache.Configuration, org.infinispan.container.DataContainer, org.infinispan.util.TimeService, org.infinispan.marshall.core.MarshalledEntryFactory, org.infinispan.distribution.DistributionManager);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #8                  // Field persistenceManager:Lorg/infinispan/persistence/manager/PersistenceManager;
       5: aload_0
       6: aload_2
       7: putfield      #9                  // Field notifier:Lorg/infinispan/notifications/cachelistener/CacheNotifier;
      10: aload_0
      11: aload_3
      12: putfield      #10                 // Field cfg:Lorg/infinispan/configuration/cache/Configuration;
      15: aload_0
      16: aload         4
      18: putfield      #11                 // Field container:Lorg/infinispan/container/DataContainer;
      21: aload_0
      22: aload         5
      24: putfield      #12                 // Field timeService:Lorg/infinispan/util/TimeService;
      27: aload_0
      28: aload         6
      30: putfield      #13                 // Field marshalledEntryFactory:Lorg/infinispan/marshall/core/MarshalledEntryFactory;
      33: aload_0
      34: aload         7
      36: putfield      #14                 // Field distributionManager:Lorg/infinispan/distribution/DistributionManager;
      39: return

  public void start();
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #10                 // Field cfg:Lorg/infinispan/configuration/cache/Configuration;
       5: invokevirtual #15                 // Method org/infinispan/configuration/cache/Configuration.persistence:()Lorg/infinispan/configuration/cache/PersistenceConfiguration;
       8: invokevirtual #16                 // Method org/infinispan/configuration/cache/PersistenceConfiguration.passivation:()Z
      11: ifeq          31
      14: aload_0
      15: getfield      #10                 // Field cfg:Lorg/infinispan/configuration/cache/Configuration;
      18: invokevirtual #15                 // Method org/infinispan/configuration/cache/Configuration.persistence:()Lorg/infinispan/configuration/cache/PersistenceConfiguration;
      21: invokevirtual #17                 // Method org/infinispan/configuration/cache/PersistenceConfiguration.usingStores:()Z
      24: ifeq          31
      27: iconst_1
      28: goto          32
      31: iconst_0
      32: putfield      #4                  // Field enabled:Z
      35: aload_0
      36: getfield      #4                  // Field enabled:Z
      39: ifeq          56
      42: aload_0
      43: aload_0
      44: getfield      #10                 // Field cfg:Lorg/infinispan/configuration/cache/Configuration;
      47: invokevirtual #18                 // Method org/infinispan/configuration/cache/Configuration.jmxStatistics:()Lorg/infinispan/configuration/cache/JMXStatisticsConfiguration;
      50: invokevirtual #19                 // Method org/infinispan/configuration/cache/JMXStatisticsConfiguration.enabled:()Z
      53: putfield      #3                  // Field statsEnabled:Z
      56: return

  public boolean isEnabled();
    Code:
       0: aload_0
       1: getfield      #4                  // Field enabled:Z
       4: ireturn

  private boolean isL1Key(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #14                 // Field distributionManager:Lorg/infinispan/distribution/DistributionManager;
       4: ifnull        27
       7: aload_0
       8: getfield      #14                 // Field distributionManager:Lorg/infinispan/distribution/DistributionManager;
      11: aload_1
      12: invokeinterface #20,  2           // InterfaceMethod org/infinispan/distribution/DistributionManager.getLocality:(Ljava/lang/Object;)Lorg/infinispan/distribution/DataLocality;
      17: invokevirtual #21                 // Method org/infinispan/distribution/DataLocality.isLocal:()Z
      20: ifne          27
      23: iconst_1
      24: goto          28
      27: iconst_0
      28: ireturn

  public void passivate(org.infinispan.container.entries.InternalCacheEntry);
    Code:
       0: aload_0
       1: getfield      #4                  // Field enabled:Z
       4: ifeq          148
       7: aload_1
       8: ifnull        148
      11: aload_0
      12: aload_1
      13: invokeinterface #22,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getKey:()Ljava/lang/Object;
      18: dup
      19: astore_2
      20: invokespecial #23                 // Method isL1Key:(Ljava/lang/Object;)Z
      23: ifne          148
      26: aload_0
      27: getfield      #9                  // Field notifier:Lorg/infinispan/notifications/cachelistener/CacheNotifier;
      30: aload_2
      31: aload_1
      32: invokeinterface #24,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getValue:()Ljava/lang/Object;
      37: iconst_1
      38: getstatic     #25                 // Field org/infinispan/context/impl/ImmutableContext.INSTANCE:Lorg/infinispan/context/impl/ImmutableContext;
      41: aconst_null
      42: invokeinterface #26,  6           // InterfaceMethod org/infinispan/notifications/cachelistener/CacheNotifier.notifyCacheEntryPassivated:(Ljava/lang/Object;Ljava/lang/Object;ZLorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/FlagAffectedCommand;)V
      47: getstatic     #27                 // Field trace:Z
      50: ifeq          64
      53: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
      56: ldc           #29                 // String Passivating entry %s
      58: aload_2
      59: invokeinterface #30,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      64: aload_0
      65: getfield      #13                 // Field marshalledEntryFactory:Lorg/infinispan/marshall/core/MarshalledEntryFactory;
      68: aload_1
      69: invokeinterface #22,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getKey:()Ljava/lang/Object;
      74: aload_1
      75: invokeinterface #24,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getValue:()Ljava/lang/Object;
      80: aload_1
      81: invokestatic  #31                 // Method org/infinispan/persistence/PersistenceUtil.internalMetadata:(Lorg/infinispan/container/entries/InternalCacheEntry;)Lorg/infinispan/metadata/InternalMetadata;
      84: invokeinterface #32,  4           // InterfaceMethod org/infinispan/marshall/core/MarshalledEntryFactory.newMarshalledEntry:(Ljava/lang/Object;Ljava/lang/Object;Lorg/infinispan/metadata/InternalMetadata;)Lorg/infinispan/marshall/core/MarshalledEntry;
      89: astore_3
      90: aload_0
      91: getfield      #8                  // Field persistenceManager:Lorg/infinispan/persistence/manager/PersistenceManager;
      94: aload_3
      95: getstatic     #33                 // Field org/infinispan/persistence/manager/PersistenceManager$AccessMode.BOTH:Lorg/infinispan/persistence/manager/PersistenceManager$AccessMode;
      98: invokeinterface #34,  3           // InterfaceMethod org/infinispan/persistence/manager/PersistenceManager.writeToAllStores:(Lorg/infinispan/marshall/core/MarshalledEntry;Lorg/infinispan/persistence/manager/PersistenceManager$AccessMode;)V
     103: aload_0
     104: getfield      #3                  // Field statsEnabled:Z
     107: ifeq          118
     110: aload_0
     111: getfield      #7                  // Field passivations:Ljava/util/concurrent/atomic/AtomicLong;
     114: invokevirtual #35                 // Method java/util/concurrent/atomic/AtomicLong.getAndIncrement:()J
     117: pop2
     118: goto          132
     121: astore_3
     122: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
     125: aload_2
     126: aload_3
     127: invokeinterface #37,  3           // InterfaceMethod org/infinispan/util/logging/Log.unableToPassivateEntry:(Ljava/lang/Object;Ljava/lang/Exception;)V
     132: aload_0
     133: getfield      #9                  // Field notifier:Lorg/infinispan/notifications/cachelistener/CacheNotifier;
     136: aload_2
     137: aconst_null
     138: iconst_0
     139: getstatic     #25                 // Field org/infinispan/context/impl/ImmutableContext.INSTANCE:Lorg/infinispan/context/impl/ImmutableContext;
     142: aconst_null
     143: invokeinterface #26,  6           // InterfaceMethod org/infinispan/notifications/cachelistener/CacheNotifier.notifyCacheEntryPassivated:(Ljava/lang/Object;Ljava/lang/Object;ZLorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/FlagAffectedCommand;)V
     148: return
    Exception table:
       from    to  target type
          64   118   121   Class org/infinispan/commons/CacheException

  public void passivateAll() throws org.infinispan.persistence.spi.PersistenceException;
    Code:
       0: aload_0
       1: getfield      #4                  // Field enabled:Z
       4: ifeq          161
       7: aload_0
       8: getfield      #2                  // Field skipOnStop:Z
      11: ifne          161
      14: aload_0
      15: getfield      #12                 // Field timeService:Lorg/infinispan/util/TimeService;
      18: invokeinterface #38,  1           // InterfaceMethod org/infinispan/util/TimeService.time:()J
      23: lstore_1
      24: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
      27: invokeinterface #39,  1           // InterfaceMethod org/infinispan/util/logging/Log.passivatingAllEntries:()V
      32: aload_0
      33: getfield      #11                 // Field container:Lorg/infinispan/container/DataContainer;
      36: invokeinterface #40,  1           // InterfaceMethod org/infinispan/container/DataContainer.iterator:()Ljava/util/Iterator;
      41: astore_3
      42: aload_3
      43: invokeinterface #41,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      48: ifeq          128
      51: aload_3
      52: invokeinterface #42,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      57: checkcast     #43                 // class org/infinispan/container/entries/InternalCacheEntry
      60: astore        4
      62: getstatic     #27                 // Field trace:Z
      65: ifeq          85
      68: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
      71: ldc           #44                 // String Passivating %s
      73: aload         4
      75: invokeinterface #22,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getKey:()Ljava/lang/Object;
      80: invokeinterface #30,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
      85: aload_0
      86: getfield      #8                  // Field persistenceManager:Lorg/infinispan/persistence/manager/PersistenceManager;
      89: aload_0
      90: getfield      #13                 // Field marshalledEntryFactory:Lorg/infinispan/marshall/core/MarshalledEntryFactory;
      93: aload         4
      95: invokeinterface #22,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getKey:()Ljava/lang/Object;
     100: aload         4
     102: invokeinterface #24,  1           // InterfaceMethod org/infinispan/container/entries/InternalCacheEntry.getValue:()Ljava/lang/Object;
     107: aload         4
     109: invokestatic  #31                 // Method org/infinispan/persistence/PersistenceUtil.internalMetadata:(Lorg/infinispan/container/entries/InternalCacheEntry;)Lorg/infinispan/metadata/InternalMetadata;
     112: invokeinterface #32,  4           // InterfaceMethod org/infinispan/marshall/core/MarshalledEntryFactory.newMarshalledEntry:(Ljava/lang/Object;Ljava/lang/Object;Lorg/infinispan/metadata/InternalMetadata;)Lorg/infinispan/marshall/core/MarshalledEntry;
     117: getstatic     #33                 // Field org/infinispan/persistence/manager/PersistenceManager$AccessMode.BOTH:Lorg/infinispan/persistence/manager/PersistenceManager$AccessMode;
     120: invokeinterface #34,  3           // InterfaceMethod org/infinispan/persistence/manager/PersistenceManager.writeToAllStores:(Lorg/infinispan/marshall/core/MarshalledEntry;Lorg/infinispan/persistence/manager/PersistenceManager$AccessMode;)V
     125: goto          42
     128: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
     131: aload_0
     132: getfield      #11                 // Field container:Lorg/infinispan/container/DataContainer;
     135: invokeinterface #45,  1           // InterfaceMethod org/infinispan/container/DataContainer.size:()I
     140: aload_0
     141: getfield      #12                 // Field timeService:Lorg/infinispan/util/TimeService;
     144: lload_1
     145: getstatic     #46                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
     148: invokeinterface #47,  4           // InterfaceMethod org/infinispan/util/TimeService.timeDuration:(JLjava/util/concurrent/TimeUnit;)J
     153: invokestatic  #48                 // Method org/infinispan/commons/util/Util.prettyPrintTime:(J)Ljava/lang/String;
     156: invokeinterface #49,  3           // InterfaceMethod org/infinispan/util/logging/Log.passivatedEntries:(ILjava/lang/String;)V
     161: return

  public void skipPassivationOnStop(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #2                  // Field skipOnStop:Z
       5: return

  public long getPassivations();
    Code:
       0: aload_0
       1: getfield      #7                  // Field passivations:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
       7: lreturn

  public boolean getStatisticsEnabled();
    Code:
       0: aload_0
       1: getfield      #3                  // Field statsEnabled:Z
       4: ireturn

  public void setStatisticsEnabled(boolean);
    Code:
       0: aload_0
       1: iload_1
       2: putfield      #3                  // Field statsEnabled:Z
       5: return

  public void resetStatistics();
    Code:
       0: aload_0
       1: getfield      #7                  // Field passivations:Ljava/util/concurrent/atomic/AtomicLong;
       4: lconst_0
       5: invokevirtual #51                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
       8: return

  static {};
    Code:
       0: ldc           #52                 // class org/infinispan/eviction/impl/PassivationManagerImpl
       2: invokestatic  #53                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
       8: getstatic     #28                 // Field log:Lorg/infinispan/util/logging/Log;
      11: invokeinterface #54,  1           // InterfaceMethod org/infinispan/util/logging/Log.isTraceEnabled:()Z
      16: putstatic     #27                 // Field trace:Z
      19: return
}

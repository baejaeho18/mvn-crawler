Compiled from "AsyncCacheWriter.java"
class org.infinispan.persistence.async.AsyncCacheWriter$AsyncStoreCoordinator implements java.lang.Runnable {
  static final boolean $assertionsDisabled;

  final org.infinispan.persistence.async.AsyncCacheWriter this$0;

  private org.infinispan.persistence.async.AsyncCacheWriter$AsyncStoreCoordinator(org.infinispan.persistence.async.AsyncCacheWriter);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
       5: aload_0
       6: invokespecial #3                  // Method java/lang/Object."<init>":()V
       9: return

  public void run();
    Code:
       0: aload_0
       1: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
       4: invokestatic  #4                  // Method org/infinispan/persistence/async/AsyncCacheWriter.access$000:(Lorg/infinispan/persistence/async/AsyncCacheWriter;)Ljava/lang/String;
       7: invokestatic  #5                  // Method org/infinispan/persistence/async/AsyncCacheWriter.access$300:()Z
      10: invokestatic  #6                  // Method org/infinispan/util/logging/LogFactory.pushNDC:(Ljava/lang/String;Z)V
      13: aload_0
      14: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      17: getfield      #7                  // Field org/infinispan/persistence/async/AsyncCacheWriter.stateLock:Lorg/infinispan/persistence/async/BufferLock;
      20: invokevirtual #8                  // Method org/infinispan/persistence/async/BufferLock.readLock:()V
      23: aload_0
      24: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      27: getfield      #9                  // Field org/infinispan/persistence/async/AsyncCacheWriter.state:Ljava/util/concurrent/atomic/AtomicReference;
      30: invokevirtual #10                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      33: checkcast     #11                 // class org/infinispan/persistence/async/State
      36: astore_1
      37: aload_0
      38: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      41: invokestatic  #12                 // Method org/infinispan/persistence/async/AsyncCacheWriter.access$400:(Lorg/infinispan/persistence/async/AsyncCacheWriter;)Z
      44: istore        4
      46: aload_1
      47: getfield      #13                 // Field org/infinispan/persistence/async/State.next:Lorg/infinispan/persistence/async/State;
      50: astore_3
      51: getstatic     #14                 // Field $assertionsDisabled:Z
      54: ifne          78
      57: aload_3
      58: ifnull        78
      61: aload_3
      62: getfield      #13                 // Field org/infinispan/persistence/async/State.next:Lorg/infinispan/persistence/async/State;
      65: ifnull        78
      68: new           #15                 // class java/lang/AssertionError
      71: dup
      72: ldc           #16                 // String State chain longer than 3 entries!
      74: invokespecial #17                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
      77: athrow
      78: aload_0
      79: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      82: iconst_0
      83: aload_1
      84: invokevirtual #18                 // Method org/infinispan/persistence/async/AsyncCacheWriter.newState:(ZLorg/infinispan/persistence/async/State;)Lorg/infinispan/persistence/async/State;
      87: astore_2
      88: aload_0
      89: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      92: getfield      #9                  // Field org/infinispan/persistence/async/AsyncCacheWriter.state:Ljava/util/concurrent/atomic/AtomicReference;
      95: aload_2
      96: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.set:(Ljava/lang/Object;)V
      99: aload_0
     100: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     103: getfield      #7                  // Field org/infinispan/persistence/async/AsyncCacheWriter.stateLock:Lorg/infinispan/persistence/async/BufferLock;
     106: iconst_0
     107: invokevirtual #20                 // Method org/infinispan/persistence/async/BufferLock.reset:(I)V
     110: aload_0
     111: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     114: getfield      #7                  // Field org/infinispan/persistence/async/AsyncCacheWriter.stateLock:Lorg/infinispan/persistence/async/BufferLock;
     117: invokevirtual #21                 // Method org/infinispan/persistence/async/BufferLock.readUnlock:()V
     120: goto          149
     123: astore        5
     125: aload_0
     126: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     129: getfield      #7                  // Field org/infinispan/persistence/async/AsyncCacheWriter.stateLock:Lorg/infinispan/persistence/async/BufferLock;
     132: iconst_0
     133: invokevirtual #20                 // Method org/infinispan/persistence/async/BufferLock.reset:(I)V
     136: aload_0
     137: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     140: getfield      #7                  // Field org/infinispan/persistence/async/AsyncCacheWriter.stateLock:Lorg/infinispan/persistence/async/BufferLock;
     143: invokevirtual #21                 // Method org/infinispan/persistence/async/BufferLock.readUnlock:()V
     146: aload         5
     148: athrow
     149: aload_1
     150: getfield      #22                 // Field org/infinispan/persistence/async/State.clear:Z
     153: ifeq          174
     156: aload_3
     157: ifnull        167
     160: aload_3
     161: getfield      #23                 // Field org/infinispan/persistence/async/State.workerThreads:Ljava/util/concurrent/CountDownLatch;
     164: invokevirtual #24                 // Method java/util/concurrent/CountDownLatch.await:()V
     167: aload_0
     168: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     171: invokevirtual #25                 // Method org/infinispan/persistence/async/AsyncCacheWriter.clearStore:()V
     174: new           #26                 // class java/util/ArrayList
     177: dup
     178: aload_1
     179: getfield      #27                 // Field org/infinispan/persistence/async/State.modifications:Ljava/util/concurrent/ConcurrentMap;
     182: invokeinterface #28,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
     187: invokespecial #29                 // Method java/util/ArrayList."<init>":(I)V
     190: astore        5
     192: new           #26                 // class java/util/ArrayList
     195: dup
     196: invokespecial #30                 // Method java/util/ArrayList."<init>":()V
     199: astore        6
     201: aload_3
     202: ifnull        313
     205: aload_3
     206: getfield      #23                 // Field org/infinispan/persistence/async/State.workerThreads:Ljava/util/concurrent/CountDownLatch;
     209: invokevirtual #31                 // Method java/util/concurrent/CountDownLatch.getCount:()J
     212: lconst_0
     213: lcmp
     214: ifle          313
     217: aload_1
     218: getfield      #27                 // Field org/infinispan/persistence/async/State.modifications:Ljava/util/concurrent/ConcurrentMap;
     221: invokeinterface #32,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.entrySet:()Ljava/util/Set;
     226: invokeinterface #33,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     231: astore        7
     233: aload         7
     235: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     240: ifeq          310
     243: aload         7
     245: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     250: checkcast     #36                 // class java/util/Map$Entry
     253: astore        8
     255: aload_3
     256: getfield      #27                 // Field org/infinispan/persistence/async/State.modifications:Ljava/util/concurrent/ConcurrentMap;
     259: aload         8
     261: invokeinterface #37,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     266: invokeinterface #38,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.containsKey:(Ljava/lang/Object;)Z
     271: ifne          292
     274: aload         5
     276: aload         8
     278: invokeinterface #39,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     283: invokeinterface #40,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     288: pop
     289: goto          307
     292: aload         6
     294: aload         8
     296: invokeinterface #39,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     301: invokeinterface #40,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     306: pop
     307: goto          233
     310: goto          330
     313: aload         5
     315: aload_1
     316: getfield      #27                 // Field org/infinispan/persistence/async/State.modifications:Ljava/util/concurrent/ConcurrentMap;
     319: invokeinterface #41,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.values:()Ljava/util/Collection;
     324: invokeinterface #42,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
     329: pop
     330: aload_0
     331: aload_1
     332: aload         5
     334: invokespecial #43                 // Method createProcessors:(Lorg/infinispan/persistence/async/State;Ljava/util/List;)Ljava/util/List;
     337: astore        7
     339: aload_0
     340: aload_1
     341: aload         6
     343: invokespecial #43                 // Method createProcessors:(Lorg/infinispan/persistence/async/State;Ljava/util/List;)Ljava/util/List;
     346: astore        8
     348: aload_1
     349: new           #44                 // class java/util/concurrent/CountDownLatch
     352: dup
     353: aload         7
     355: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
     360: aload         8
     362: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
     367: iadd
     368: invokespecial #46                 // Method java/util/concurrent/CountDownLatch."<init>":(I)V
     371: putfield      #23                 // Field org/infinispan/persistence/async/State.workerThreads:Ljava/util/concurrent/CountDownLatch;
     374: aload         7
     376: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     381: astore        9
     383: aload         9
     385: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     390: ifeq          422
     393: aload         9
     395: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     400: checkcast     #48                 // class org/infinispan/persistence/async/AsyncCacheWriter$AsyncStoreProcessor
     403: astore        10
     405: aload_0
     406: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     409: invokestatic  #49                 // Method org/infinispan/persistence/async/AsyncCacheWriter.access$500:(Lorg/infinispan/persistence/async/AsyncCacheWriter;)Ljava/util/concurrent/ExecutorService;
     412: aload         10
     414: invokeinterface #50,  2           // InterfaceMethod java/util/concurrent/ExecutorService.execute:(Ljava/lang/Runnable;)V
     419: goto          383
     422: aload_3
     423: ifnull        438
     426: aload_3
     427: getfield      #23                 // Field org/infinispan/persistence/async/State.workerThreads:Ljava/util/concurrent/CountDownLatch;
     430: invokevirtual #24                 // Method java/util/concurrent/CountDownLatch.await:()V
     433: aload_1
     434: aconst_null
     435: putfield      #13                 // Field org/infinispan/persistence/async/State.next:Lorg/infinispan/persistence/async/State;
     438: aload         8
     440: invokeinterface #47,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     445: astore        9
     447: aload         9
     449: invokeinterface #34,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     454: ifeq          486
     457: aload         9
     459: invokeinterface #35,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     464: checkcast     #48                 // class org/infinispan/persistence/async/AsyncCacheWriter$AsyncStoreProcessor
     467: astore        10
     469: aload_0
     470: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
     473: invokestatic  #49                 // Method org/infinispan/persistence/async/AsyncCacheWriter.access$500:(Lorg/infinispan/persistence/async/AsyncCacheWriter;)Ljava/util/concurrent/ExecutorService;
     476: aload         10
     478: invokeinterface #50,  2           // InterfaceMethod java/util/concurrent/ExecutorService.execute:(Ljava/lang/Runnable;)V
     483: goto          447
     486: iload         4
     488: ifeq          505
     491: aload_1
     492: getfield      #23                 // Field org/infinispan/persistence/async/State.workerThreads:Ljava/util/concurrent/CountDownLatch;
     495: invokevirtual #24                 // Method java/util/concurrent/CountDownLatch.await:()V
     498: invokestatic  #5                  // Method org/infinispan/persistence/async/AsyncCacheWriter.access$300:()Z
     501: invokestatic  #51                 // Method org/infinispan/util/logging/LogFactory.popNDC:(Z)V
     504: return
     505: goto          520
     508: astore        5
     510: invokestatic  #53                 // Method org/infinispan/persistence/async/AsyncCacheWriter.access$600:()Lorg/infinispan/util/logging/Log;
     513: aload         5
     515: invokeinterface #54,  2           // InterfaceMethod org/infinispan/util/logging/Log.unexpectedErrorInAsyncStoreCoordinator:(Ljava/lang/Throwable;)V
     520: goto          13
     523: astore        11
     525: invokestatic  #5                  // Method org/infinispan/persistence/async/AsyncCacheWriter.access$300:()Z
     528: invokestatic  #51                 // Method org/infinispan/util/logging/LogFactory.popNDC:(Z)V
     531: aload         11
     533: athrow
    Exception table:
       from    to  target type
          23    99   123   any
         123   125   123   any
         149   498   508   Class java/lang/Exception
          13   498   523   any
         505   525   523   any

  private java.util.List<org.infinispan.persistence.async.AsyncCacheWriter$AsyncStoreProcessor> createProcessors(org.infinispan.persistence.async.State, java.util.List<org.infinispan.persistence.modifications.Modification>);
    Code:
       0: new           #26                 // class java/util/ArrayList
       3: dup
       4: invokespecial #30                 // Method java/util/ArrayList."<init>":()V
       7: astore_3
       8: aload_2
       9: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
      14: aload_0
      15: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      18: getfield      #55                 // Field org/infinispan/persistence/async/AsyncCacheWriter.asyncConfiguration:Lorg/infinispan/configuration/cache/AsyncStoreConfiguration;
      21: invokevirtual #56                 // Method org/infinispan/configuration/cache/AsyncStoreConfiguration.threadPoolSize:()I
      24: invokestatic  #57                 // Method java/lang/Math.min:(II)I
      27: istore        4
      29: iload         4
      31: ifle          155
      34: iconst_0
      35: istore        5
      37: aload_2
      38: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
      43: iload         4
      45: idiv
      46: istore        6
      48: aload_2
      49: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
      54: iload         4
      56: irem
      57: istore        7
      59: iconst_0
      60: istore        8
      62: iload         8
      64: iload         4
      66: if_icmpge     128
      69: iload         5
      71: iload         6
      73: iadd
      74: iload         8
      76: iload         7
      78: if_icmpge     85
      81: iconst_1
      82: goto          86
      85: iconst_0
      86: iadd
      87: istore        9
      89: aload_3
      90: new           #48                 // class org/infinispan/persistence/async/AsyncCacheWriter$AsyncStoreProcessor
      93: dup
      94: aload_0
      95: getfield      #2                  // Field this$0:Lorg/infinispan/persistence/async/AsyncCacheWriter;
      98: aload_2
      99: iload         5
     101: iload         9
     103: invokeinterface #58,  3           // InterfaceMethod java/util/List.subList:(II)Ljava/util/List;
     108: aload_1
     109: invokespecial #59                 // Method org/infinispan/persistence/async/AsyncCacheWriter$AsyncStoreProcessor."<init>":(Lorg/infinispan/persistence/async/AsyncCacheWriter;Ljava/util/List;Lorg/infinispan/persistence/async/State;)V
     112: invokeinterface #40,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     117: pop
     118: iload         9
     120: istore        5
     122: iinc          8, 1
     125: goto          62
     128: getstatic     #14                 // Field $assertionsDisabled:Z
     131: ifne          155
     134: iload         5
     136: aload_2
     137: invokeinterface #45,  1           // InterfaceMethod java/util/List.size:()I
     142: if_icmpeq     155
     145: new           #15                 // class java/lang/AssertionError
     148: dup
     149: ldc           #60                 // String Thread distribution is broken!
     151: invokespecial #17                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
     154: athrow
     155: aload_3
     156: areturn

  org.infinispan.persistence.async.AsyncCacheWriter$AsyncStoreCoordinator(org.infinispan.persistence.async.AsyncCacheWriter, org.infinispan.persistence.async.AsyncCacheWriter$1);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #1                  // Method "<init>":(Lorg/infinispan/persistence/async/AsyncCacheWriter;)V
       5: return

  static {};
    Code:
       0: ldc           #61                 // class org/infinispan/persistence/async/AsyncCacheWriter
       2: invokevirtual #62                 // Method java/lang/Class.desiredAssertionStatus:()Z
       5: ifne          12
       8: iconst_1
       9: goto          13
      12: iconst_0
      13: putstatic     #14                 // Field $assertionsDisabled:Z
      16: return
}

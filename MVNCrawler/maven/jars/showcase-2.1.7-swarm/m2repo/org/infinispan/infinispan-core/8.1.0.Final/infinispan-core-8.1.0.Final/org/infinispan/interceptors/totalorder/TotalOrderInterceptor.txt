Compiled from "TotalOrderInterceptor.java"
public class org.infinispan.interceptors.totalorder.TotalOrderInterceptor extends org.infinispan.interceptors.base.CommandInterceptor {
  private static final org.infinispan.util.logging.Log log;

  private static final boolean trace;

  private org.infinispan.transaction.impl.TransactionTable transactionTable;

  private org.infinispan.transaction.totalorder.TotalOrderManager totalOrderManager;

  private org.infinispan.interceptors.locking.ClusteringDependentLogic clusteringDependentLogic;

  private org.infinispan.util.concurrent.BlockingTaskAwareExecutorService executorService;

  public org.infinispan.interceptors.totalorder.TotalOrderInterceptor();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/infinispan/interceptors/base/CommandInterceptor."<init>":()V
       4: return

  public void inject(org.infinispan.transaction.impl.TransactionTable, org.infinispan.transaction.totalorder.TotalOrderManager, org.infinispan.interceptors.locking.ClusteringDependentLogic, org.infinispan.util.concurrent.BlockingTaskAwareExecutorService);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
       5: aload_0
       6: aload_2
       7: putfield      #3                  // Field totalOrderManager:Lorg/infinispan/transaction/totalorder/TotalOrderManager;
      10: aload_0
      11: aload_3
      12: putfield      #4                  // Field clusteringDependentLogic:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      15: aload_0
      16: aload         4
      18: putfield      #5                  // Field executorService:Lorg/infinispan/util/concurrent/BlockingTaskAwareExecutorService;
      21: return

  public final java.lang.Object visitPrepareCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.PrepareCommand) throws java.lang.Throwable;
    Code:
       0: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
       3: invokeinterface #7,  1            // InterfaceMethod org/infinispan/util/logging/Log.isDebugEnabled:()Z
       8: ifeq          41
      11: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
      14: ldc           #8                  // String Prepare received. Transaction=%s, Affected keys=%s, Local=%s
      16: aload_2
      17: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      20: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
      23: aload_2
      24: invokevirtual #11                 // Method org/infinispan/commands/tx/PrepareCommand.getAffectedKeys:()Ljava/util/Set;
      27: aload_1
      28: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      33: invokestatic  #13                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      36: invokeinterface #14,  5           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)V
      41: aload_2
      42: instanceof    #15                 // class org/infinispan/commands/tx/totalorder/TotalOrderPrepareCommand
      45: ifne          58
      48: new           #16                 // class java/lang/IllegalStateException
      51: dup
      52: ldc           #17                 // String TotalOrderInterceptor can only handle TotalOrderPrepareCommand
      54: invokespecial #18                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      57: athrow
      58: aload_0
      59: aload_1
      60: aload_2
      61: aload_0
      62: getfield      #4                  // Field clusteringDependentLogic:Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;
      65: invokespecial #19                 // Method simulateLocking:(Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/commands/tx/PrepareCommand;Lorg/infinispan/interceptors/locking/ClusteringDependentLogic;)V
      68: aload_1
      69: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      74: ifeq          84
      77: aload_0
      78: aload_1
      79: aload_2
      80: invokevirtual #20                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
      83: areturn
      84: aload_0
      85: aload_1
      86: invokespecial #21                 // Method getTransactionState:(Lorg/infinispan/context/impl/TxInvocationContext;)Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;
      89: astore_3
      90: aload_3
      91: invokevirtual #22                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.preparing:()V
      94: aload_3
      95: invokevirtual #23                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.isRollbackReceived:()Z
      98: ifeq          151
     101: aload_0
     102: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     105: aload_2
     106: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     109: invokevirtual #24                 // Method org/infinispan/transaction/impl/TransactionTable.removeRemoteTransaction:(Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/transaction/impl/RemoteTransaction;
     112: pop
     113: new           #25                 // class org/infinispan/commons/CacheException
     116: dup
     117: new           #26                 // class java/lang/StringBuilder
     120: dup
     121: invokespecial #27                 // Method java/lang/StringBuilder."<init>":()V
     124: ldc           #28                 // String Cannot prepare transaction
     126: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: aload_2
     130: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     133: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
     136: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     139: ldc           #30                 // String . it was already marked as rollback
     141: invokevirtual #29                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     144: invokevirtual #31                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     147: invokespecial #32                 // Method org/infinispan/commons/CacheException."<init>":(Ljava/lang/String;)V
     150: athrow
     151: aload_3
     152: invokevirtual #33                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.isCommitReceived:()Z
     155: ifeq          193
     158: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     161: ldc           #34                 // String Transaction %s marked for commit, skipping the write skew check and forcing 1PC
     163: aload_2
     164: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     167: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
     170: invokeinterface #35,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
     175: aload_2
     176: checkcast     #15                 // class org/infinispan/commands/tx/totalorder/TotalOrderPrepareCommand
     179: invokeinterface #36,  1           // InterfaceMethod org/infinispan/commands/tx/totalorder/TotalOrderPrepareCommand.markSkipWriteSkewCheck:()V
     184: aload_2
     185: checkcast     #15                 // class org/infinispan/commands/tx/totalorder/TotalOrderPrepareCommand
     188: invokeinterface #37,  1           // InterfaceMethod org/infinispan/commands/tx/totalorder/TotalOrderPrepareCommand.markAsOnePhaseCommit:()V
     193: getstatic     #38                 // Field trace:Z
     196: ifeq          216
     199: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     202: ldc           #39                 // String Validating transaction %s
     204: aload_2
     205: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     208: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
     211: invokeinterface #35,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
     216: aload_0
     217: aload_1
     218: aload_2
     219: invokevirtual #20                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
     222: astore        4
     224: aload_2
     225: invokevirtual #40                 // Method org/infinispan/commands/tx/PrepareCommand.isOnePhaseCommit:()Z
     228: ifeq          239
     231: aload_0
     232: getfield      #3                  // Field totalOrderManager:Lorg/infinispan/transaction/totalorder/TotalOrderManager;
     235: aload_3
     236: invokevirtual #41                 // Method org/infinispan/transaction/totalorder/TotalOrderManager.release:(Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;)V
     239: aload         4
     241: astore        5
     243: aload_3
     244: invokevirtual #42                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.prepared:()V
     247: aload         5
     249: areturn
     250: astore        6
     252: aload_3
     253: invokevirtual #42                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.prepared:()V
     256: aload         6
     258: athrow
     259: astore_3
     260: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     263: invokeinterface #7,  1            // InterfaceMethod org/infinispan/util/logging/Log.isDebugEnabled:()Z
     268: ifeq          298
     271: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     274: aload_3
     275: ldc           #44                 // String Exception while preparing for transaction %s. Local=%s
     277: aload_2
     278: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     281: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
     284: aload_1
     285: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
     290: invokestatic  #13                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     293: invokeinterface #45,  5           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     298: aload_2
     299: invokevirtual #40                 // Method org/infinispan/commands/tx/PrepareCommand.isOnePhaseCommit:()Z
     302: ifeq          316
     305: aload_0
     306: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     309: aload_2
     310: invokevirtual #9                  // Method org/infinispan/commands/tx/PrepareCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     313: invokevirtual #46                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionRollback:(Lorg/infinispan/transaction/xa/GlobalTransaction;)V
     316: aload_3
     317: athrow
    Exception table:
       from    to  target type
          90   243   250   any
         250   252   250   any
          58    83   259   Class java/lang/Throwable
          84   247   259   Class java/lang/Throwable
         250   259   259   Class java/lang/Throwable

  public java.lang.Object visitRollbackCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.RollbackCommand) throws java.lang.Throwable;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: iconst_0
       4: invokespecial #47                 // Method visitSecondPhaseCommand:(Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/commands/tx/AbstractTransactionBoundaryCommand;Z)Ljava/lang/Object;
       7: areturn

  public java.lang.Object visitCommitCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.CommitCommand) throws java.lang.Throwable;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: iconst_1
       4: invokespecial #47                 // Method visitSecondPhaseCommand:(Lorg/infinispan/context/impl/TxInvocationContext;Lorg/infinispan/commands/tx/AbstractTransactionBoundaryCommand;Z)Ljava/lang/Object;
       7: areturn

  public final java.lang.Object visitLockControlCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.control.LockControlCommand) throws java.lang.Throwable;
    Code:
       0: new           #48                 // class java/lang/UnsupportedOperationException
       3: dup
       4: ldc           #49                 // String Lock interface not supported with total order protocol
       6: invokespecial #50                 // Method java/lang/UnsupportedOperationException."<init>":(Ljava/lang/String;)V
       9: athrow

  private java.lang.Object visitSecondPhaseCommand(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.AbstractTransactionBoundaryCommand, boolean) throws java.lang.Throwable;
    Code:
       0: aload_2
       1: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
       4: astore        4
       6: getstatic     #38                 // Field trace:Z
       9: ifeq          40
      12: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
      15: ldc           #52                 // String Second phase command received. Commit?=%s Transaction=%s, Local=%s
      17: iload_3
      18: invokestatic  #13                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      21: aload         4
      23: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
      26: aload_1
      27: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      32: invokestatic  #13                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      35: invokeinterface #53,  5           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)V
      40: aload_0
      41: aload_1
      42: invokespecial #21                 // Method getTransactionState:(Lorg/infinispan/context/impl/TxInvocationContext;)Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;
      45: astore        5
      47: aload_0
      48: aload         5
      50: iload_3
      51: invokespecial #54                 // Method processSecondCommand:(Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;Z)Z
      54: ifne          142
      57: aload_1
      58: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
      63: ifne          142
      66: aconst_null
      67: astore        6
      69: aload         5
      71: ifnull        139
      74: aload         5
      76: invokevirtual #55                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.isFinished:()Z
      79: ifeq          139
      82: aload_0
      83: getfield      #3                  // Field totalOrderManager:Lorg/infinispan/transaction/totalorder/TotalOrderManager;
      86: aload         5
      88: invokevirtual #41                 // Method org/infinispan/transaction/totalorder/TotalOrderManager.release:(Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;)V
      91: iload_3
      92: ifeq          110
      95: aload_0
      96: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
      99: aload_2
     100: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     103: iconst_0
     104: invokevirtual #56                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionCommitted:(Lorg/infinispan/transaction/xa/GlobalTransaction;Z)V
     107: goto          121
     110: aload_0
     111: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     114: aload_2
     115: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     118: invokevirtual #46                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionRollback:(Lorg/infinispan/transaction/xa/GlobalTransaction;)V
     121: aload_1
     122: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
     127: ifeq          139
     130: aload_0
     131: getfield      #5                  // Field executorService:Lorg/infinispan/util/concurrent/BlockingTaskAwareExecutorService;
     134: invokeinterface #57,  1           // InterfaceMethod org/infinispan/util/concurrent/BlockingTaskAwareExecutorService.checkForReadyTasks:()V
     139: aload         6
     141: areturn
     142: aload_0
     143: aload_1
     144: aload_2
     145: invokevirtual #20                 // Method invokeNextInterceptor:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/VisitableCommand;)Ljava/lang/Object;
     148: astore        6
     150: aload         5
     152: ifnull        220
     155: aload         5
     157: invokevirtual #55                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.isFinished:()Z
     160: ifeq          220
     163: aload_0
     164: getfield      #3                  // Field totalOrderManager:Lorg/infinispan/transaction/totalorder/TotalOrderManager;
     167: aload         5
     169: invokevirtual #41                 // Method org/infinispan/transaction/totalorder/TotalOrderManager.release:(Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;)V
     172: iload_3
     173: ifeq          191
     176: aload_0
     177: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     180: aload_2
     181: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     184: iconst_0
     185: invokevirtual #56                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionCommitted:(Lorg/infinispan/transaction/xa/GlobalTransaction;Z)V
     188: goto          202
     191: aload_0
     192: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     195: aload_2
     196: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     199: invokevirtual #46                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionRollback:(Lorg/infinispan/transaction/xa/GlobalTransaction;)V
     202: aload_1
     203: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
     208: ifeq          220
     211: aload_0
     212: getfield      #5                  // Field executorService:Lorg/infinispan/util/concurrent/BlockingTaskAwareExecutorService;
     215: invokeinterface #57,  1           // InterfaceMethod org/infinispan/util/concurrent/BlockingTaskAwareExecutorService.checkForReadyTasks:()V
     220: aload         6
     222: areturn
     223: astore        6
     225: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     228: invokeinterface #7,  1            // InterfaceMethod org/infinispan/util/logging/Log.isDebugEnabled:()Z
     233: ifeq          253
     236: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
     239: aload         6
     241: ldc           #58                 // String Exception while rollback transaction %s
     243: aload         4
     245: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
     248: invokeinterface #59,  4           // InterfaceMethod org/infinispan/util/logging/Log.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;)V
     253: aload         6
     255: athrow
     256: astore        7
     258: aload         5
     260: ifnull        328
     263: aload         5
     265: invokevirtual #55                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.isFinished:()Z
     268: ifeq          328
     271: aload_0
     272: getfield      #3                  // Field totalOrderManager:Lorg/infinispan/transaction/totalorder/TotalOrderManager;
     275: aload         5
     277: invokevirtual #41                 // Method org/infinispan/transaction/totalorder/TotalOrderManager.release:(Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;)V
     280: iload_3
     281: ifeq          299
     284: aload_0
     285: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     288: aload_2
     289: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     292: iconst_0
     293: invokevirtual #56                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionCommitted:(Lorg/infinispan/transaction/xa/GlobalTransaction;Z)V
     296: goto          310
     299: aload_0
     300: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
     303: aload_2
     304: invokevirtual #51                 // Method org/infinispan/commands/tx/AbstractTransactionBoundaryCommand.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
     307: invokevirtual #46                 // Method org/infinispan/transaction/impl/TransactionTable.remoteTransactionRollback:(Lorg/infinispan/transaction/xa/GlobalTransaction;)V
     310: aload_1
     311: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
     316: ifeq          328
     319: aload_0
     320: getfield      #5                  // Field executorService:Lorg/infinispan/util/concurrent/BlockingTaskAwareExecutorService;
     323: invokeinterface #57,  1           // InterfaceMethod org/infinispan/util/concurrent/BlockingTaskAwareExecutorService.checkForReadyTasks:()V
     328: aload         7
     330: athrow
    Exception table:
       from    to  target type
          47    69   223   Class java/lang/Throwable
         142   150   223   Class java/lang/Throwable
          47    69   256   any
         142   150   256   any
         223   258   256   any

  private org.infinispan.transaction.impl.TotalOrderRemoteTransactionState getTransactionState(org.infinispan.context.impl.TxInvocationContext);
    Code:
       0: aload_1
       1: invokeinterface #12,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.isOriginLocal:()Z
       6: ifne          22
       9: aload_1
      10: invokeinterface #60,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getCacheTransaction:()Lorg/infinispan/transaction/impl/AbstractCacheTransaction;
      15: checkcast     #61                 // class org/infinispan/transaction/impl/RemoteTransaction
      18: invokevirtual #62                 // Method org/infinispan/transaction/impl/RemoteTransaction.getTransactionState:()Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;
      21: areturn
      22: aload_0
      23: getfield      #2                  // Field transactionTable:Lorg/infinispan/transaction/impl/TransactionTable;
      26: aload_1
      27: invokeinterface #63,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      32: invokevirtual #64                 // Method org/infinispan/transaction/impl/TransactionTable.getRemoteTransaction:(Lorg/infinispan/transaction/xa/GlobalTransaction;)Lorg/infinispan/transaction/impl/RemoteTransaction;
      35: astore_2
      36: aload_2
      37: ifnonnull     44
      40: aconst_null
      41: goto          48
      44: aload_2
      45: invokevirtual #62                 // Method org/infinispan/transaction/impl/RemoteTransaction.getTransactionState:()Lorg/infinispan/transaction/impl/TotalOrderRemoteTransactionState;
      48: areturn

  private boolean processSecondCommand(org.infinispan.transaction.impl.TotalOrderRemoteTransactionState, boolean);
    Code:
       0: aload_1
       1: ifnonnull     6
       4: iconst_1
       5: ireturn
       6: aload_1
       7: iload_2
       8: invokevirtual #65                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.waitUntilPrepared:(Z)Z
      11: ireturn
      12: astore_3
      13: invokestatic  #67                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      16: invokevirtual #68                 // Method java/lang/Thread.interrupt:()V
      19: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
      22: aload_1
      23: invokevirtual #69                 // Method org/infinispan/transaction/impl/TotalOrderRemoteTransactionState.getGlobalTransaction:()Lorg/infinispan/transaction/xa/GlobalTransaction;
      26: invokevirtual #10                 // Method org/infinispan/transaction/xa/GlobalTransaction.globalId:()Ljava/lang/String;
      29: invokeinterface #70,  2           // InterfaceMethod org/infinispan/util/logging/Log.timeoutWaitingUntilTransactionPrepared:(Ljava/lang/String;)V
      34: iconst_0
      35: ireturn
    Exception table:
       from    to  target type
           6    11    12   Class java/lang/InterruptedException

  private void simulateLocking(org.infinispan.context.impl.TxInvocationContext, org.infinispan.commands.tx.PrepareCommand, org.infinispan.interceptors.locking.ClusteringDependentLogic);
    Code:
       0: aload_2
       1: invokevirtual #11                 // Method org/infinispan/commands/tx/PrepareCommand.getAffectedKeys:()Ljava/util/Set;
       4: astore        4
       6: aload_1
       7: aload_2
       8: invokevirtual #11                 // Method org/infinispan/commands/tx/PrepareCommand.getAffectedKeys:()Ljava/util/Set;
      11: invokeinterface #71,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.addAllAffectedKeys:(Ljava/util/Collection;)V
      16: aload_1
      17: invokeinterface #72,  1           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.clearLockedKeys:()V
      22: aload         4
      24: invokeinterface #73,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      29: astore        5
      31: aload         5
      33: invokeinterface #74,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      38: ifeq          72
      41: aload         5
      43: invokeinterface #75,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      48: astore        6
      50: aload_3
      51: aload         6
      53: invokeinterface #76,  2           // InterfaceMethod org/infinispan/interceptors/locking/ClusteringDependentLogic.localNodeIsPrimaryOwner:(Ljava/lang/Object;)Z
      58: ifeq          69
      61: aload_1
      62: aload         6
      64: invokeinterface #77,  2           // InterfaceMethod org/infinispan/context/impl/TxInvocationContext.addLockedKey:(Ljava/lang/Object;)V
      69: goto          31
      72: return

  static {};
    Code:
       0: ldc           #78                 // class org/infinispan/interceptors/totalorder/TotalOrderInterceptor
       2: invokestatic  #79                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
       8: getstatic     #6                  // Field log:Lorg/infinispan/util/logging/Log;
      11: invokeinterface #80,  1           // InterfaceMethod org/infinispan/util/logging/Log.isTraceEnabled:()Z
      16: putstatic     #38                 // Field trace:Z
      19: return
}

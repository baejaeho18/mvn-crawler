Compiled from "KeyStoreCredentialResolver.java"
public class org.opensaml.security.credential.impl.KeyStoreCredentialResolver extends org.opensaml.security.credential.impl.AbstractCriteriaFilteringCredentialResolver {
  private final org.slf4j.Logger log;

  private final java.security.KeyStore keyStore;

  private final java.util.Map<java.lang.String, java.lang.String> keyPasswords;

  private final org.opensaml.security.credential.UsageType keystoreUsage;

  public org.opensaml.security.credential.impl.KeyStoreCredentialResolver(java.security.KeyStore, java.util.Map<java.lang.String, java.lang.String>);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aconst_null
       4: invokespecial #1                  // Method "<init>":(Ljava/security/KeyStore;Ljava/util/Map;Lorg/opensaml/security/credential/UsageType;)V
       7: return

  public org.opensaml.security.credential.impl.KeyStoreCredentialResolver(java.security.KeyStore, java.util.Map<java.lang.String, java.lang.String>, org.opensaml.security.credential.UsageType);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method org/opensaml/security/credential/impl/AbstractCriteriaFilteringCredentialResolver."<init>":()V
       4: aload_0
       5: ldc_w         #3                  // class org/opensaml/security/credential/impl/KeyStoreCredentialResolver
       8: invokestatic  #4                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #5                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: aload_1
      16: ldc           #6                  // String Provided key store cannot be null
      18: invokestatic  #7                  // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      21: checkcast     #8                  // class java/security/KeyStore
      24: putfield      #9                  // Field keyStore:Ljava/security/KeyStore;
      27: aload_0
      28: aload_2
      29: ldc           #10                 // String Password map cannot be null
      31: invokestatic  #7                  // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      34: checkcast     #11                 // class java/util/Map
      37: putfield      #12                 // Field keyPasswords:Ljava/util/Map;
      40: aload_1
      41: invokevirtual #13                 // Method java/security/KeyStore.size:()I
      44: pop
      45: goto          60
      48: astore        4
      50: new           #15                 // class java/lang/IllegalStateException
      53: dup
      54: ldc           #16                 // String Keystore has not been initialized.
      56: invokespecial #17                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      59: athrow
      60: aload_3
      61: ifnull        72
      64: aload_0
      65: aload_3
      66: putfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      69: goto          79
      72: aload_0
      73: getstatic     #19                 // Field org/opensaml/security/credential/UsageType.UNSPECIFIED:Lorg/opensaml/security/credential/UsageType;
      76: putfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      79: return
    Exception table:
       from    to  target type
          40    45    48   Class java/security/KeyStoreException

  protected java.lang.Iterable<org.opensaml.security.credential.Credential> resolveFromSource(net.shibboleth.utilities.java.support.resolver.CriteriaSet) throws net.shibboleth.utilities.java.support.resolver.ResolverException;
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #20                 // Method checkCriteriaRequirements:(Lnet/shibboleth/utilities/java/support/resolver/CriteriaSet;)V
       5: aload_1
       6: ldc_w         #21                 // class org/opensaml/core/criterion/EntityIdCriterion
       9: invokevirtual #22                 // Method net/shibboleth/utilities/java/support/resolver/CriteriaSet.get:(Ljava/lang/Class;)Ljava/lang/Object;
      12: checkcast     #21                 // class org/opensaml/core/criterion/EntityIdCriterion
      15: invokevirtual #23                 // Method org/opensaml/core/criterion/EntityIdCriterion.getEntityId:()Ljava/lang/String;
      18: astore_2
      19: aload_1
      20: ldc_w         #24                 // class org/opensaml/security/criteria/UsageCriterion
      23: invokevirtual #22                 // Method net/shibboleth/utilities/java/support/resolver/CriteriaSet.get:(Ljava/lang/Class;)Ljava/lang/Object;
      26: checkcast     #24                 // class org/opensaml/security/criteria/UsageCriterion
      29: astore_3
      30: aload_3
      31: ifnull        43
      34: aload_3
      35: invokevirtual #25                 // Method org/opensaml/security/criteria/UsageCriterion.getUsage:()Lorg/opensaml/security/credential/UsageType;
      38: astore        4
      40: goto          48
      43: getstatic     #19                 // Field org/opensaml/security/credential/UsageType.UNSPECIFIED:Lorg/opensaml/security/credential/UsageType;
      46: astore        4
      48: aload_0
      49: aload_0
      50: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      53: aload         4
      55: invokevirtual #26                 // Method matchUsage:(Lorg/opensaml/security/credential/UsageType;Lorg/opensaml/security/credential/UsageType;)Z
      58: ifne          93
      61: aload_0
      62: getfield      #5                  // Field log:Lorg/slf4j/Logger;
      65: ldc           #27                 // String Specified usage criteria {} does not match keystore usage {}
      67: aload         4
      69: aload_0
      70: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      73: invokeinterface #28,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      78: aload_0
      79: getfield      #5                  // Field log:Lorg/slf4j/Logger;
      82: ldc           #29                 // String Can not resolve credentials from this keystore
      84: invokeinterface #30,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      89: invokestatic  #31                 // Method java/util/Collections.emptySet:()Ljava/util/Set;
      92: areturn
      93: aconst_null
      94: astore        5
      96: aload_0
      97: getfield      #12                 // Field keyPasswords:Ljava/util/Map;
     100: aload_2
     101: invokeinterface #32,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     106: ifeq          134
     109: new           #33                 // class java/security/KeyStore$PasswordProtection
     112: dup
     113: aload_0
     114: getfield      #12                 // Field keyPasswords:Ljava/util/Map;
     117: aload_2
     118: invokeinterface #34,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
     123: checkcast     #35                 // class java/lang/String
     126: invokevirtual #36                 // Method java/lang/String.toCharArray:()[C
     129: invokespecial #37                 // Method java/security/KeyStore$PasswordProtection."<init>":([C)V
     132: astore        5
     134: aconst_null
     135: astore        6
     137: aload_0
     138: getfield      #9                  // Field keyStore:Ljava/security/KeyStore;
     141: aload_2
     142: aload         5
     144: invokevirtual #38                 // Method java/security/KeyStore.getEntry:(Ljava/lang/String;Ljava/security/KeyStore$ProtectionParameter;)Ljava/security/KeyStore$Entry;
     147: astore        6
     149: goto          217
     152: astore        7
     154: aload_0
     155: getfield      #5                  // Field log:Lorg/slf4j/Logger;
     158: ldc           #40                 // String Unable to retrieve keystore entry for entityID (keystore alias): {}
     160: aload_2
     161: invokeinterface #41,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     166: aload_0
     167: getfield      #5                  // Field log:Lorg/slf4j/Logger;
     170: ldc           #42                 // String Check for invalid keystore entityID/alias entry password
     172: invokeinterface #43,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
     177: new           #44                 // class net/shibboleth/utilities/java/support/resolver/ResolverException
     180: dup
     181: ldc           #45                 // String Could not retrieve entry from keystore
     183: aload         7
     185: invokespecial #46                 // Method net/shibboleth/utilities/java/support/resolver/ResolverException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     188: athrow
     189: astore        7
     191: aload_0
     192: getfield      #5                  // Field log:Lorg/slf4j/Logger;
     195: ldc           #40                 // String Unable to retrieve keystore entry for entityID (keystore alias): {}
     197: aload_2
     198: aload         7
     200: invokeinterface #48,  4           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     205: new           #44                 // class net/shibboleth/utilities/java/support/resolver/ResolverException
     208: dup
     209: ldc           #45                 // String Could not retrieve entry from keystore
     211: aload         7
     213: invokespecial #46                 // Method net/shibboleth/utilities/java/support/resolver/ResolverException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     216: athrow
     217: aload         6
     219: ifnonnull     238
     222: aload_0
     223: getfield      #5                  // Field log:Lorg/slf4j/Logger;
     226: ldc           #49                 // String Keystore entry for entityID (keystore alias) {} does not exist
     228: aload_2
     229: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     234: invokestatic  #31                 // Method java/util/Collections.emptySet:()Ljava/util/Set;
     237: areturn
     238: aload_0
     239: aload         6
     241: aload_2
     242: aload_0
     243: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
     246: invokevirtual #51                 // Method buildCredential:(Ljava/security/KeyStore$Entry;Ljava/lang/String;Lorg/opensaml/security/credential/UsageType;)Lorg/opensaml/security/credential/Credential;
     249: astore        7
     251: aload         7
     253: invokestatic  #52                 // Method java/util/Collections.singleton:(Ljava/lang/Object;)Ljava/util/Set;
     256: areturn
    Exception table:
       from    to  target type
         137   149   152   Class java/security/UnrecoverableEntryException
         137   149   189   Class java/security/GeneralSecurityException

  protected void checkCriteriaRequirements(net.shibboleth.utilities.java.support.resolver.CriteriaSet);
    Code:
       0: aload_1
       1: ifnull        14
       4: aload_1
       5: ldc_w         #21                 // class org/opensaml/core/criterion/EntityIdCriterion
       8: invokevirtual #22                 // Method net/shibboleth/utilities/java/support/resolver/CriteriaSet.get:(Ljava/lang/Class;)Ljava/lang/Object;
      11: ifnonnull     35
      14: aload_0
      15: getfield      #5                  // Field log:Lorg/slf4j/Logger;
      18: ldc           #53                 // String EntityIDCriterion was not specified in the criteria set, resolution cannot be attempted
      20: invokeinterface #43,  2           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;)V
      25: new           #54                 // class java/lang/IllegalArgumentException
      28: dup
      29: ldc           #55                 // String No EntityIDCriterion was available in criteria set
      31: invokespecial #56                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      34: athrow
      35: return

  protected boolean matchUsage(org.opensaml.security.credential.UsageType, org.opensaml.security.credential.UsageType);
    Code:
       0: aload_1
       1: getstatic     #19                 // Field org/opensaml/security/credential/UsageType.UNSPECIFIED:Lorg/opensaml/security/credential/UsageType;
       4: if_acmpeq     14
       7: aload_2
       8: getstatic     #19                 // Field org/opensaml/security/credential/UsageType.UNSPECIFIED:Lorg/opensaml/security/credential/UsageType;
      11: if_acmpne     16
      14: iconst_1
      15: ireturn
      16: aload_1
      17: aload_2
      18: if_acmpne     25
      21: iconst_1
      22: goto          26
      25: iconst_0
      26: ireturn

  protected org.opensaml.security.credential.Credential buildCredential(java.security.KeyStore$Entry, java.lang.String, org.opensaml.security.credential.UsageType) throws net.shibboleth.utilities.java.support.resolver.ResolverException;
    Code:
       0: aload_0
       1: getfield      #5                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #57                 // String Building credential from keystore entry for entityID {}, usage type {}
       6: aload_2
       7: aload_3
       8: invokeinterface #28,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      13: aload_1
      14: instanceof    #58                 // class java/security/KeyStore$PrivateKeyEntry
      17: ifeq          34
      20: aload_0
      21: aload_1
      22: checkcast     #58                 // class java/security/KeyStore$PrivateKeyEntry
      25: aload_2
      26: aload_0
      27: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      30: invokevirtual #59                 // Method processPrivateKeyEntry:(Ljava/security/KeyStore$PrivateKeyEntry;Ljava/lang/String;Lorg/opensaml/security/credential/UsageType;)Lorg/opensaml/security/x509/X509Credential;
      33: areturn
      34: aload_1
      35: instanceof    #60                 // class java/security/KeyStore$TrustedCertificateEntry
      38: ifeq          55
      41: aload_0
      42: aload_1
      43: checkcast     #60                 // class java/security/KeyStore$TrustedCertificateEntry
      46: aload_2
      47: aload_0
      48: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      51: invokevirtual #61                 // Method processTrustedCertificateEntry:(Ljava/security/KeyStore$TrustedCertificateEntry;Ljava/lang/String;Lorg/opensaml/security/credential/UsageType;)Lorg/opensaml/security/x509/X509Credential;
      54: areturn
      55: aload_1
      56: instanceof    #62                 // class java/security/KeyStore$SecretKeyEntry
      59: ifeq          76
      62: aload_0
      63: aload_1
      64: checkcast     #62                 // class java/security/KeyStore$SecretKeyEntry
      67: aload_2
      68: aload_0
      69: getfield      #18                 // Field keystoreUsage:Lorg/opensaml/security/credential/UsageType;
      72: invokevirtual #63                 // Method processSecretKeyEntry:(Ljava/security/KeyStore$SecretKeyEntry;Ljava/lang/String;Lorg/opensaml/security/credential/UsageType;)Lorg/opensaml/security/credential/Credential;
      75: areturn
      76: new           #44                 // class net/shibboleth/utilities/java/support/resolver/ResolverException
      79: dup
      80: new           #64                 // class java/lang/StringBuilder
      83: dup
      84: invokespecial #65                 // Method java/lang/StringBuilder."<init>":()V
      87: ldc           #66                 // String KeyStore entry was of an unsupported type:
      89: invokevirtual #67                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      92: aload_1
      93: invokevirtual #68                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      96: invokevirtual #69                 // Method java/lang/Class.getName:()Ljava/lang/String;
      99: invokevirtual #67                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     102: invokevirtual #70                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     105: invokespecial #71                 // Method net/shibboleth/utilities/java/support/resolver/ResolverException."<init>":(Ljava/lang/String;)V
     108: athrow

  protected org.opensaml.security.x509.X509Credential processTrustedCertificateEntry(java.security.KeyStore$TrustedCertificateEntry, java.lang.String, org.opensaml.security.credential.UsageType);
    Code:
       0: aload_0
       1: getfield      #5                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #72                 // String Processing TrustedCertificateEntry from keystore
       6: invokeinterface #30,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: aload_1
      12: invokevirtual #73                 // Method java/security/KeyStore$TrustedCertificateEntry.getTrustedCertificate:()Ljava/security/cert/Certificate;
      15: checkcast     #74                 // class java/security/cert/X509Certificate
      18: astore        4
      20: new           #75                 // class org/opensaml/security/x509/BasicX509Credential
      23: dup
      24: aload         4
      26: invokespecial #76                 // Method org/opensaml/security/x509/BasicX509Credential."<init>":(Ljava/security/cert/X509Certificate;)V
      29: astore        5
      31: aload         5
      33: aload_2
      34: invokevirtual #77                 // Method org/opensaml/security/x509/BasicX509Credential.setEntityId:(Ljava/lang/String;)V
      37: aload         5
      39: aload_3
      40: invokevirtual #78                 // Method org/opensaml/security/x509/BasicX509Credential.setUsageType:(Lorg/opensaml/security/credential/UsageType;)V
      43: new           #79                 // class java/util/ArrayList
      46: dup
      47: invokespecial #80                 // Method java/util/ArrayList."<init>":()V
      50: astore        6
      52: aload         6
      54: aload         4
      56: invokevirtual #81                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
      59: pop
      60: aload         5
      62: aload         6
      64: invokevirtual #82                 // Method org/opensaml/security/x509/BasicX509Credential.setEntityCertificateChain:(Ljava/util/Collection;)V
      67: aload         5
      69: areturn

  protected org.opensaml.security.x509.X509Credential processPrivateKeyEntry(java.security.KeyStore$PrivateKeyEntry, java.lang.String, org.opensaml.security.credential.UsageType);
    Code:
       0: aload_0
       1: getfield      #5                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #83                 // String Processing PrivateKeyEntry from keystore
       6: invokeinterface #30,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: new           #75                 // class org/opensaml/security/x509/BasicX509Credential
      14: dup
      15: aload_1
      16: invokevirtual #84                 // Method java/security/KeyStore$PrivateKeyEntry.getCertificate:()Ljava/security/cert/Certificate;
      19: checkcast     #74                 // class java/security/cert/X509Certificate
      22: aload_1
      23: invokevirtual #85                 // Method java/security/KeyStore$PrivateKeyEntry.getPrivateKey:()Ljava/security/PrivateKey;
      26: invokespecial #86                 // Method org/opensaml/security/x509/BasicX509Credential."<init>":(Ljava/security/cert/X509Certificate;Ljava/security/PrivateKey;)V
      29: astore        4
      31: aload         4
      33: aload_2
      34: invokevirtual #77                 // Method org/opensaml/security/x509/BasicX509Credential.setEntityId:(Ljava/lang/String;)V
      37: aload         4
      39: aload_3
      40: invokevirtual #78                 // Method org/opensaml/security/x509/BasicX509Credential.setUsageType:(Lorg/opensaml/security/credential/UsageType;)V
      43: aload         4
      45: aload_1
      46: invokevirtual #87                 // Method java/security/KeyStore$PrivateKeyEntry.getCertificateChain:()[Ljava/security/cert/Certificate;
      49: checkcast     #88                 // class "[Ljava/security/cert/X509Certificate;"
      52: checkcast     #88                 // class "[Ljava/security/cert/X509Certificate;"
      55: invokestatic  #89                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      58: invokevirtual #82                 // Method org/opensaml/security/x509/BasicX509Credential.setEntityCertificateChain:(Ljava/util/Collection;)V
      61: aload         4
      63: areturn

  protected org.opensaml.security.credential.Credential processSecretKeyEntry(java.security.KeyStore$SecretKeyEntry, java.lang.String, org.opensaml.security.credential.UsageType);
    Code:
       0: aload_0
       1: getfield      #5                  // Field log:Lorg/slf4j/Logger;
       4: ldc           #90                 // String Processing SecretKeyEntry from keystore
       6: invokeinterface #30,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      11: new           #91                 // class org/opensaml/security/credential/BasicCredential
      14: dup
      15: aload_1
      16: invokevirtual #92                 // Method java/security/KeyStore$SecretKeyEntry.getSecretKey:()Ljavax/crypto/SecretKey;
      19: invokespecial #93                 // Method org/opensaml/security/credential/BasicCredential."<init>":(Ljavax/crypto/SecretKey;)V
      22: astore        4
      24: aload         4
      26: aload_2
      27: invokevirtual #94                 // Method org/opensaml/security/credential/BasicCredential.setEntityId:(Ljava/lang/String;)V
      30: aload         4
      32: aload_3
      33: invokevirtual #95                 // Method org/opensaml/security/credential/BasicCredential.setUsageType:(Lorg/opensaml/security/credential/UsageType;)V
      36: aload         4
      38: areturn
}

Compiled from "TrustEngineTLSSocketFactory.java"
public class org.opensaml.security.httpclient.impl.TrustEngineTLSSocketFactory implements org.apache.http.conn.socket.LayeredConnectionSocketFactory {
  private final org.slf4j.Logger log;

  private org.apache.http.conn.socket.LayeredConnectionSocketFactory wrappedFactory;

  private org.apache.http.conn.ssl.X509HostnameVerifier hostnameVerifier;

  public org.opensaml.security.httpclient.impl.TrustEngineTLSSocketFactory(org.apache.http.conn.socket.LayeredConnectionSocketFactory, org.apache.http.conn.ssl.X509HostnameVerifier);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc_w         #2                  // class org/opensaml/security/httpclient/impl/TrustEngineTLSSocketFactory
       8: invokestatic  #3                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #4                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: aload_1
      16: ldc           #5                  // String Socket factory was null
      18: invokestatic  #6                  // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      21: checkcast     #7                  // class org/apache/http/conn/socket/LayeredConnectionSocketFactory
      24: putfield      #8                  // Field wrappedFactory:Lorg/apache/http/conn/socket/LayeredConnectionSocketFactory;
      27: aload_0
      28: aload_2
      29: putfield      #9                  // Field hostnameVerifier:Lorg/apache/http/conn/ssl/X509HostnameVerifier;
      32: return

  public java.net.Socket createSocket(org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field wrappedFactory:Lorg/apache/http/conn/socket/LayeredConnectionSocketFactory;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod org/apache/http/conn/socket/LayeredConnectionSocketFactory.createSocket:(Lorg/apache/http/protocol/HttpContext;)Ljava/net/Socket;
      10: areturn

  public java.net.Socket connectSocket(int, java.net.Socket, org.apache.http.HttpHost, java.net.InetSocketAddress, java.net.InetSocketAddress, org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field wrappedFactory:Lorg/apache/http/conn/socket/LayeredConnectionSocketFactory;
       4: iload_1
       5: aload_2
       6: aload_3
       7: aload         4
       9: aload         5
      11: aload         6
      13: invokeinterface #11,  7           // InterfaceMethod org/apache/http/conn/socket/LayeredConnectionSocketFactory.connectSocket:(ILjava/net/Socket;Lorg/apache/http/HttpHost;Ljava/net/InetSocketAddress;Ljava/net/InetSocketAddress;Lorg/apache/http/protocol/HttpContext;)Ljava/net/Socket;
      18: astore        7
      20: aload_0
      21: aload         7
      23: aload         6
      25: invokevirtual #12                 // Method performTrustEval:(Ljava/net/Socket;Lorg/apache/http/protocol/HttpContext;)V
      28: aload_0
      29: aload         7
      31: aload_3
      32: invokevirtual #13                 // Method org/apache/http/HttpHost.getHostName:()Ljava/lang/String;
      35: aload         6
      37: invokevirtual #14                 // Method performHostnameVerification:(Ljava/net/Socket;Ljava/lang/String;Lorg/apache/http/protocol/HttpContext;)V
      40: aload         7
      42: areturn

  public java.net.Socket createLayeredSocket(java.net.Socket, java.lang.String, int, org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #8                  // Field wrappedFactory:Lorg/apache/http/conn/socket/LayeredConnectionSocketFactory;
       4: aload_1
       5: aload_2
       6: iload_3
       7: aload         4
       9: invokeinterface #15,  5           // InterfaceMethod org/apache/http/conn/socket/LayeredConnectionSocketFactory.createLayeredSocket:(Ljava/net/Socket;Ljava/lang/String;ILorg/apache/http/protocol/HttpContext;)Ljava/net/Socket;
      14: astore        5
      16: aload_0
      17: aload         5
      19: aload         4
      21: invokevirtual #12                 // Method performTrustEval:(Ljava/net/Socket;Lorg/apache/http/protocol/HttpContext;)V
      24: aload_0
      25: aload         5
      27: aload_2
      28: aload         4
      30: invokevirtual #14                 // Method performHostnameVerification:(Ljava/net/Socket;Ljava/lang/String;Lorg/apache/http/protocol/HttpContext;)V
      33: aload         5
      35: areturn

  protected void performTrustEval(java.net.Socket, org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: aload_1
       1: instanceof    #16                 // class javax/net/ssl/SSLSocket
       4: ifne          19
       7: aload_0
       8: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      11: ldc           #17                 // String Socket was not an instance of SSLSocket, skipping trust eval
      13: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      18: return
      19: aload_1
      20: checkcast     #16                 // class javax/net/ssl/SSLSocket
      23: astore_3
      24: aload_0
      25: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      28: ldc           #19                 // String Attempting to evaluate server TLS credential against supplied TrustEngine and CriteriaSet
      30: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      35: aload_2
      36: ldc           #20                 // String opensaml.TrustEngine
      38: invokeinterface #21,  2           // InterfaceMethod org/apache/http/protocol/HttpContext.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      43: checkcast     #22                 // class org/opensaml/security/trust/TrustEngine
      46: astore        4
      48: aload         4
      50: ifnonnull     65
      53: aload_0
      54: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      57: ldc           #23                 // String No trust engine supplied by caller, skipping trust eval
      59: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
      64: return
      65: aload_0
      66: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      69: ldc           #24                 // String Saw trust engine of type: {}
      71: aload         4
      73: invokevirtual #25                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      76: invokevirtual #26                 // Method java/lang/Class.getName:()Ljava/lang/String;
      79: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
      84: aload_2
      85: ldc           #28                 // String opensaml.CriteriaSet
      87: invokeinterface #21,  2           // InterfaceMethod org/apache/http/protocol/HttpContext.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      92: checkcast     #29                 // class net/shibboleth/utilities/java/support/resolver/CriteriaSet
      95: astore        5
      97: aload         5
      99: ifnonnull     142
     102: aload_0
     103: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     106: ldc           #30                 // String No criteria set supplied by caller, building new criteria set with signing criteria
     108: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     113: new           #29                 // class net/shibboleth/utilities/java/support/resolver/CriteriaSet
     116: dup
     117: iconst_1
     118: anewarray     #31                 // class net/shibboleth/utilities/java/support/resolver/Criterion
     121: dup
     122: iconst_0
     123: new           #32                 // class org/opensaml/security/criteria/UsageCriterion
     126: dup
     127: getstatic     #33                 // Field org/opensaml/security/credential/UsageType.SIGNING:Lorg/opensaml/security/credential/UsageType;
     130: invokespecial #34                 // Method org/opensaml/security/criteria/UsageCriterion."<init>":(Lorg/opensaml/security/credential/UsageType;)V
     133: aastore
     134: invokespecial #35                 // Method net/shibboleth/utilities/java/support/resolver/CriteriaSet."<init>":([Lnet/shibboleth/utilities/java/support/resolver/Criterion;)V
     137: astore        5
     139: goto          155
     142: aload_0
     143: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     146: ldc           #36                 // String Saw CriteriaSet: {}
     148: aload         5
     150: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.trace:(Ljava/lang/String;Ljava/lang/Object;)V
     155: aload_0
     156: aload_3
     157: invokevirtual #37                 // Method extractCredential:(Ljavax/net/ssl/SSLSocket;)Lorg/opensaml/security/x509/X509Credential;
     160: astore        6
     162: aload         4
     164: aload         6
     166: aload         5
     168: invokeinterface #38,  3           // InterfaceMethod org/opensaml/security/trust/TrustEngine.validate:(Ljava/lang/Object;Lnet/shibboleth/utilities/java/support/resolver/CriteriaSet;)Z
     173: ifeq          201
     176: aload_0
     177: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     180: ldc           #39                 // String Credential evaluated as trusted
     182: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     187: aload_2
     188: ldc           #40                 // String opensaml.ServerTLSCredentialTrusted
     190: getstatic     #41                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
     193: invokeinterface #42,  3           // InterfaceMethod org/apache/http/protocol/HttpContext.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     198: goto          233
     201: aload_0
     202: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     205: ldc           #43                 // String Credential evaluated as untrusted
     207: invokeinterface #18,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     212: aload_2
     213: ldc           #40                 // String opensaml.ServerTLSCredentialTrusted
     215: getstatic     #44                 // Field java/lang/Boolean.FALSE:Ljava/lang/Boolean;
     218: invokeinterface #42,  3           // InterfaceMethod org/apache/http/protocol/HttpContext.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     223: new           #45                 // class javax/net/ssl/SSLPeerUnverifiedException
     226: dup
     227: ldc           #46                 // String Trust engine could not establish trust of server TLS credential
     229: invokespecial #47                 // Method javax/net/ssl/SSLPeerUnverifiedException."<init>":(Ljava/lang/String;)V
     232: athrow
     233: goto          263
     236: astore        7
     238: aload_0
     239: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     242: ldc           #49                 // String Trust engine error evaluating credential
     244: aload         7
     246: invokeinterface #50,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     251: new           #51                 // class java/io/IOException
     254: dup
     255: ldc           #49                 // String Trust engine error evaluating credential
     257: aload         7
     259: invokespecial #52                 // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     262: athrow
     263: return
    Exception table:
       from    to  target type
         162   233   236   Class org/opensaml/security/SecurityException

  protected org.opensaml.security.x509.X509Credential extractCredential(javax.net.ssl.SSLSocket) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #53                 // Method javax/net/ssl/SSLSocket.getSession:()Ljavax/net/ssl/SSLSession;
       4: astore_2
       5: aload_2
       6: invokeinterface #54,  1           // InterfaceMethod javax/net/ssl/SSLSession.getPeerCertificates:()[Ljava/security/cert/Certificate;
      11: astore_3
      12: aload_3
      13: ifnull        22
      16: aload_3
      17: arraylength
      18: iconst_1
      19: if_icmpge     32
      22: new           #45                 // class javax/net/ssl/SSLPeerUnverifiedException
      25: dup
      26: ldc           #55                 // String SSLSession peer certificates array was null or empty
      28: invokespecial #47                 // Method javax/net/ssl/SSLPeerUnverifiedException."<init>":(Ljava/lang/String;)V
      31: athrow
      32: new           #56                 // class java/util/ArrayList
      35: dup
      36: invokespecial #57                 // Method java/util/ArrayList."<init>":()V
      39: astore        4
      41: aload_3
      42: astore        5
      44: aload         5
      46: arraylength
      47: istore        6
      49: iconst_0
      50: istore        7
      52: iload         7
      54: iload         6
      56: if_icmpge     83
      59: aload         5
      61: iload         7
      63: aaload
      64: astore        8
      66: aload         4
      68: aload         8
      70: checkcast     #58                 // class java/security/cert/X509Certificate
      73: invokevirtual #59                 // Method java/util/ArrayList.add:(Ljava/lang/Object;)Z
      76: pop
      77: iinc          7, 1
      80: goto          52
      83: aload         4
      85: iconst_0
      86: invokevirtual #60                 // Method java/util/ArrayList.get:(I)Ljava/lang/Object;
      89: checkcast     #58                 // class java/security/cert/X509Certificate
      92: astore        5
      94: new           #61                 // class org/opensaml/security/x509/BasicX509Credential
      97: dup
      98: aload         5
     100: invokespecial #62                 // Method org/opensaml/security/x509/BasicX509Credential."<init>":(Ljava/security/cert/X509Certificate;)V
     103: astore        6
     105: aload         6
     107: aload         4
     109: invokevirtual #63                 // Method org/opensaml/security/x509/BasicX509Credential.setEntityCertificateChain:(Ljava/util/Collection;)V
     112: aload         6
     114: areturn

  protected void performHostnameVerification(java.net.Socket, java.lang.String, org.apache.http.protocol.HttpContext) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #9                  // Field hostnameVerifier:Lorg/apache/http/conn/ssl/X509HostnameVerifier;
       4: ifnull        28
       7: aload_1
       8: instanceof    #16                 // class javax/net/ssl/SSLSocket
      11: ifeq          28
      14: aload_0
      15: getfield      #9                  // Field hostnameVerifier:Lorg/apache/http/conn/ssl/X509HostnameVerifier;
      18: aload_2
      19: aload_1
      20: checkcast     #16                 // class javax/net/ssl/SSLSocket
      23: invokeinterface #64,  3           // InterfaceMethod org/apache/http/conn/ssl/X509HostnameVerifier.verify:(Ljava/lang/String;Ljavax/net/ssl/SSLSocket;)V
      28: return
}

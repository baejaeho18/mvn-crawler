Compiled from "MessageReplaySecurityHandler.java"
public class org.opensaml.saml.common.binding.security.impl.MessageReplaySecurityHandler extends org.opensaml.messaging.handler.AbstractMessageHandler {
  private final org.slf4j.Logger log;

  private org.opensaml.storage.ReplayCache replayCache;

  private boolean requiredRule;

  private long expires;

  public org.opensaml.saml.common.binding.security.impl.MessageReplaySecurityHandler();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/opensaml/messaging/handler/AbstractMessageHandler."<init>":()V
       4: aload_0
       5: ldc_w         #2                  // class org/opensaml/saml/common/binding/security/impl/MessageReplaySecurityHandler
       8: invokestatic  #3                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #4                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: iconst_1
      16: putfield      #5                  // Field requiredRule:Z
      19: aload_0
      20: ldc2_w        #6                  // long 180000l
      23: putfield      #8                  // Field expires:J
      26: return

  public org.opensaml.storage.ReplayCache getReplayCache();
    Code:
       0: aload_0
       1: getfield      #9                  // Field replayCache:Lorg/opensaml/storage/ReplayCache;
       4: areturn

  public void setReplayCache(org.opensaml.storage.ReplayCache);
    Code:
       0: aload_0
       1: invokestatic  #10                 // Method net/shibboleth/utilities/java/support/component/ComponentSupport.ifInitializedThrowUnmodifiabledComponentException:(Lnet/shibboleth/utilities/java/support/component/InitializableComponent;)V
       4: aload_0
       5: aload_1
       6: ldc           #11                 // String ReplayCache cannot be null
       8: invokestatic  #12                 // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      11: checkcast     #13                 // class org/opensaml/storage/ReplayCache
      14: putfield      #9                  // Field replayCache:Lorg/opensaml/storage/ReplayCache;
      17: return

  public void setRequiredRule(boolean);
    Code:
       0: aload_0
       1: invokestatic  #10                 // Method net/shibboleth/utilities/java/support/component/ComponentSupport.ifInitializedThrowUnmodifiabledComponentException:(Lnet/shibboleth/utilities/java/support/component/InitializableComponent;)V
       4: aload_0
       5: iload_1
       6: putfield      #5                  // Field requiredRule:Z
       9: return

  public long getExpires();
    Code:
       0: aload_0
       1: getfield      #8                  // Field expires:J
       4: lreturn

  public void setExpires(long);
    Code:
       0: aload_0
       1: invokestatic  #10                 // Method net/shibboleth/utilities/java/support/component/ComponentSupport.ifInitializedThrowUnmodifiabledComponentException:(Lnet/shibboleth/utilities/java/support/component/InitializableComponent;)V
       4: aload_0
       5: lconst_0
       6: lload_1
       7: ldc           #14                 // String Expiration must be greater than or equal to 0
       9: invokestatic  #15                 // Method net/shibboleth/utilities/java/support/logic/Constraint.isGreaterThanOrEqual:(JJLjava/lang/String;)J
      12: putfield      #8                  // Field expires:J
      15: return

  protected void doInitialize() throws net.shibboleth.utilities.java.support.component.ComponentInitializationException;
    Code:
       0: aload_0
       1: invokespecial #16                 // Method org/opensaml/messaging/handler/AbstractMessageHandler.doInitialize:()V
       4: aload_0
       5: invokevirtual #17                 // Method getReplayCache:()Lorg/opensaml/storage/ReplayCache;
       8: ldc           #11                 // String ReplayCache cannot be null
      10: invokestatic  #12                 // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      13: pop
      14: return

  protected void doInvoke(org.opensaml.messaging.context.MessageContext) throws org.opensaml.messaging.handler.MessageHandlerException;
    Code:
       0: aload_1
       1: ldc_w         #18                 // class org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext
       4: iconst_1
       5: invokevirtual #19                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;Z)Lorg/opensaml/messaging/context/BaseContext;
       8: checkcast     #18                 // class org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext
      11: astore_2
      12: aload_2
      13: invokevirtual #20                 // Method org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext.getEntityId:()Ljava/lang/String;
      16: invokestatic  #21                 // Method net/shibboleth/utilities/java/support/primitive/StringSupport.trimOrNull:(Ljava/lang/String;)Ljava/lang/String;
      19: astore_3
      20: aload_3
      21: ifnonnull     27
      24: ldc           #22                 // String (unknown)
      26: astore_3
      27: aload_1
      28: ldc_w         #23                 // class org/opensaml/saml/common/messaging/context/SAMLMessageInfoContext
      31: iconst_1
      32: invokevirtual #19                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;Z)Lorg/opensaml/messaging/context/BaseContext;
      35: checkcast     #23                 // class org/opensaml/saml/common/messaging/context/SAMLMessageInfoContext
      38: astore        4
      40: aload         4
      42: invokevirtual #24                 // Method org/opensaml/saml/common/messaging/context/SAMLMessageInfoContext.getMessageId:()Ljava/lang/String;
      45: invokestatic  #21                 // Method net/shibboleth/utilities/java/support/primitive/StringSupport.trimOrNull:(Ljava/lang/String;)Ljava/lang/String;
      48: astore        5
      50: aload         5
      52: ifnonnull     125
      55: aload_0
      56: getfield      #5                  // Field requiredRule:Z
      59: ifeq          109
      62: aload_0
      63: getfield      #4                  // Field log:Lorg/slf4j/Logger;
      66: ldc           #25                 // String {} Message contained no ID, replay check not possible
      68: aload_0
      69: invokevirtual #26                 // Method getLogPrefix:()Ljava/lang/String;
      72: invokeinterface #27,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;Ljava/lang/Object;)V
      77: new           #28                 // class org/opensaml/messaging/handler/MessageHandlerException
      80: dup
      81: new           #29                 // class java/lang/StringBuilder
      84: dup
      85: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
      88: ldc           #31                 // String SAML message from issuer
      90: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      93: aload_3
      94: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      97: ldc           #33                 // String  did not contain an ID
      99: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     102: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     105: invokespecial #35                 // Method org/opensaml/messaging/handler/MessageHandlerException."<init>":(Ljava/lang/String;)V
     108: athrow
     109: aload_0
     110: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     113: ldc           #36                 // String {} Message contained no ID, rule is optional, skipping further processing
     115: aload_0
     116: invokevirtual #26                 // Method getLogPrefix:()Ljava/lang/String;
     119: invokeinterface #37,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;)V
     124: return
     125: aload         4
     127: invokevirtual #38                 // Method org/opensaml/saml/common/messaging/context/SAMLMessageInfoContext.getMessageIssueInstant:()Lorg/joda/time/DateTime;
     130: astore        6
     132: aload         6
     134: ifnonnull     146
     137: new           #39                 // class org/joda/time/DateTime
     140: dup
     141: invokespecial #40                 // Method org/joda/time/DateTime."<init>":()V
     144: astore        6
     146: aload_0
     147: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     150: ldc           #41                 // String {} Evaluating message replay for message ID \'{}\', issue instant \'{}\', entityID \'{}\'
     152: iconst_4
     153: anewarray     #42                 // class java/lang/Object
     156: dup
     157: iconst_0
     158: aload_0
     159: invokevirtual #26                 // Method getLogPrefix:()Ljava/lang/String;
     162: aastore
     163: dup
     164: iconst_1
     165: aload         5
     167: aastore
     168: dup
     169: iconst_2
     170: aload         6
     172: aastore
     173: dup
     174: iconst_3
     175: aload_3
     176: aastore
     177: invokeinterface #43,  3           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     182: aload_0
     183: invokevirtual #17                 // Method getReplayCache:()Lorg/opensaml/storage/ReplayCache;
     186: aload_0
     187: invokevirtual #44                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     190: invokevirtual #45                 // Method java/lang/Class.getName:()Ljava/lang/String;
     193: aload         5
     195: aload         6
     197: invokevirtual #46                 // Method org/joda/time/DateTime.getMillis:()J
     200: aload_0
     201: getfield      #8                  // Field expires:J
     204: ladd
     205: invokevirtual #47                 // Method org/opensaml/storage/ReplayCache.check:(Ljava/lang/String;Ljava/lang/String;J)Z
     208: ifne          279
     211: aload_0
     212: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     215: ldc           #48                 // String {} Replay detected of message \'{}\' from issuer \'{}\'
     217: iconst_3
     218: anewarray     #42                 // class java/lang/Object
     221: dup
     222: iconst_0
     223: aload_0
     224: invokevirtual #26                 // Method getLogPrefix:()Ljava/lang/String;
     227: aastore
     228: dup
     229: iconst_1
     230: aload         5
     232: aastore
     233: dup
     234: iconst_2
     235: aload_3
     236: aastore
     237: invokeinterface #49,  3           // InterfaceMethod org/slf4j/Logger.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     242: new           #28                 // class org/opensaml/messaging/handler/MessageHandlerException
     245: dup
     246: new           #29                 // class java/lang/StringBuilder
     249: dup
     250: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
     253: ldc           #50                 // String Rejecting replayed message ID \'
     255: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     258: aload         5
     260: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     263: ldc           #51                 // String \' from issuer
     265: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     268: aload_3
     269: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     272: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     275: invokespecial #35                 // Method org/opensaml/messaging/handler/MessageHandlerException."<init>":(Ljava/lang/String;)V
     278: athrow
     279: return
}

Compiled from "HTTPArtifactEncoder.java"
public class org.opensaml.saml.saml1.binding.encoding.impl.HTTPArtifactEncoder extends org.opensaml.saml.saml1.binding.encoding.impl.BaseSAML1MessageEncoder {
  private final org.slf4j.Logger log;

  private org.opensaml.saml.common.binding.artifact.SAMLArtifactMap artifactMap;

  private byte[] defaultArtifactType;

  public org.opensaml.saml.saml1.binding.encoding.impl.HTTPArtifactEncoder();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/opensaml/saml/saml1/binding/encoding/impl/BaseSAML1MessageEncoder."<init>":()V
       4: aload_0
       5: ldc_w         #2                  // class org/opensaml/saml/saml1/binding/encoding/impl/HTTPArtifactEncoder
       8: invokestatic  #3                  // Method org/slf4j/LoggerFactory.getLogger:(Ljava/lang/Class;)Lorg/slf4j/Logger;
      11: putfield      #4                  // Field log:Lorg/slf4j/Logger;
      14: aload_0
      15: getstatic     #5                  // Field org/opensaml/saml/saml1/binding/artifact/SAML1ArtifactType0001.TYPE_CODE:[B
      18: putfield      #6                  // Field defaultArtifactType:[B
      21: return

  public java.lang.String getBindingURI();
    Code:
       0: ldc           #7                  // String urn:oasis:names:tc:SAML:1.0:profiles:artifact-01
       2: areturn

  public org.opensaml.saml.common.binding.artifact.SAMLArtifactMap getArtifactMap();
    Code:
       0: aload_0
       1: getfield      #8                  // Field artifactMap:Lorg/opensaml/saml/common/binding/artifact/SAMLArtifactMap;
       4: areturn

  public void setArtifactMap(org.opensaml.saml.common.binding.artifact.SAMLArtifactMap);
    Code:
       0: aload_0
       1: invokestatic  #9                  // Method net/shibboleth/utilities/java/support/component/ComponentSupport.ifInitializedThrowUnmodifiabledComponentException:(Lnet/shibboleth/utilities/java/support/component/InitializableComponent;)V
       4: aload_0
       5: invokestatic  #10                 // Method net/shibboleth/utilities/java/support/component/ComponentSupport.ifDestroyedThrowDestroyedComponentException:(Lnet/shibboleth/utilities/java/support/component/DestructableComponent;)V
       8: aload_0
       9: aload_1
      10: ldc           #11                 // String SAMLArtifactMap cannot be null
      12: invokestatic  #12                 // Method net/shibboleth/utilities/java/support/logic/Constraint.isNotNull:(Ljava/lang/Object;Ljava/lang/String;)Ljava/lang/Object;
      15: checkcast     #13                 // class org/opensaml/saml/common/binding/artifact/SAMLArtifactMap
      18: putfield      #8                  // Field artifactMap:Lorg/opensaml/saml/common/binding/artifact/SAMLArtifactMap;
      21: return

  protected void doInitialize() throws net.shibboleth.utilities.java.support.component.ComponentInitializationException;
    Code:
       0: aload_0
       1: invokespecial #14                 // Method org/opensaml/saml/saml1/binding/encoding/impl/BaseSAML1MessageEncoder.doInitialize:()V
       4: aload_0
       5: getfield      #8                  // Field artifactMap:Lorg/opensaml/saml/common/binding/artifact/SAMLArtifactMap;
       8: ifnonnull     21
      11: new           #15                 // class net/shibboleth/utilities/java/support/component/ComponentInitializationException
      14: dup
      15: ldc           #11                 // String SAMLArtifactMap cannot be null
      17: invokespecial #16                 // Method net/shibboleth/utilities/java/support/component/ComponentInitializationException."<init>":(Ljava/lang/String;)V
      20: athrow
      21: return

  protected void doDestroy();
    Code:
       0: aload_0
       1: aconst_null
       2: putfield      #8                  // Field artifactMap:Lorg/opensaml/saml/common/binding/artifact/SAMLArtifactMap;
       5: aload_0
       6: invokespecial #17                 // Method org/opensaml/saml/saml1/binding/encoding/impl/BaseSAML1MessageEncoder.doDestroy:()V
       9: return

  protected void doEncode() throws org.opensaml.messaging.encoder.MessageEncodingException;
    Code:
       0: aload_0
       1: invokevirtual #18                 // Method getMessageContext:()Lorg/opensaml/messaging/context/MessageContext;
       4: astore_1
       5: aload_0
       6: aload_1
       7: invokespecial #19                 // Method getInboundMessageIssuer:(Lorg/opensaml/messaging/context/MessageContext;)Ljava/lang/String;
      10: astore_2
      11: aload_0
      12: aload_1
      13: invokespecial #20                 // Method getOutboundMessageIssuer:(Lorg/opensaml/messaging/context/MessageContext;)Ljava/lang/String;
      16: astore_3
      17: aload_2
      18: ifnull        25
      21: aload_3
      22: ifnonnull     35
      25: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
      28: dup
      29: ldc           #22                 // String Unable to obtain issuer or relying party for message encoding
      31: invokespecial #23                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
      34: athrow
      35: aload_0
      36: aload_1
      37: invokevirtual #24                 // Method getEndpointURL:(Lorg/opensaml/messaging/context/MessageContext;)Ljava/net/URI;
      40: invokevirtual #25                 // Method java/net/URI.toString:()Ljava/lang/String;
      43: astore        4
      45: new           #26                 // class net/shibboleth/utilities/java/support/net/URLBuilder
      48: dup
      49: aload         4
      51: invokespecial #27                 // Method net/shibboleth/utilities/java/support/net/URLBuilder."<init>":(Ljava/lang/String;)V
      54: astore        5
      56: goto          96
      59: astore        6
      61: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
      64: dup
      65: new           #29                 // class java/lang/StringBuilder
      68: dup
      69: invokespecial #30                 // Method java/lang/StringBuilder."<init>":()V
      72: ldc           #31                 // String Endpoint URL
      74: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      77: aload         4
      79: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      82: ldc           #33                 // String  is not a valid URL
      84: invokevirtual #32                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      87: invokevirtual #34                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      90: aload         6
      92: invokespecial #35                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
      95: athrow
      96: aload         5
      98: invokevirtual #36                 // Method net/shibboleth/utilities/java/support/net/URLBuilder.getQueryParams:()Ljava/util/List;
     101: astore        6
     103: aload         6
     105: invokeinterface #37,  1           // InterfaceMethod java/util/List.clear:()V
     110: aload_1
     111: invokestatic  #38                 // Method org/opensaml/saml/common/binding/SAMLBindingSupport.getRelayState:(Lorg/opensaml/messaging/context/MessageContext;)Ljava/lang/String;
     114: astore        7
     116: aload         7
     118: invokestatic  #39                 // Method org/opensaml/saml/common/binding/SAMLBindingSupport.checkRelayState:(Ljava/lang/String;)Z
     121: ifeq          143
     124: aload         6
     126: new           #40                 // class net/shibboleth/utilities/java/support/collection/Pair
     129: dup
     130: ldc           #41                 // String TARGET
     132: aload         7
     134: invokespecial #42                 // Method net/shibboleth/utilities/java/support/collection/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     137: invokeinterface #43,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     142: pop
     143: aload_0
     144: aload_1
     145: invokespecial #44                 // Method getSAMLArtifactType:(Lorg/opensaml/messaging/context/MessageContext;)[B
     148: astore        9
     150: aload         9
     152: ifnull        168
     155: invokestatic  #45                 // Method org/opensaml/saml/config/SAMLConfigurationSupport.getSAML1ArtifactBuilderFactory:()Lorg/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilderFactory;
     158: aload         9
     160: invokevirtual #46                 // Method org/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilderFactory.getArtifactBuilder:([B)Lorg/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilder;
     163: astore        8
     165: goto          189
     168: invokestatic  #45                 // Method org/opensaml/saml/config/SAMLConfigurationSupport.getSAML1ArtifactBuilderFactory:()Lorg/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilderFactory;
     171: aload_0
     172: getfield      #6                  // Field defaultArtifactType:[B
     175: invokevirtual #46                 // Method org/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilderFactory.getArtifactBuilder:([B)Lorg/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilder;
     178: astore        8
     180: aload_0
     181: aload_1
     182: aload_0
     183: getfield      #6                  // Field defaultArtifactType:[B
     186: invokespecial #47                 // Method storeSAMLArtifactType:(Lorg/opensaml/messaging/context/MessageContext;[B)V
     189: aload_1
     190: invokevirtual #48                 // Method org/opensaml/messaging/context/MessageContext.getMessage:()Ljava/lang/Object;
     193: checkcast     #49                 // class org/opensaml/saml/common/SAMLObject
     196: astore        10
     198: aload         10
     200: instanceof    #50                 // class org/opensaml/saml/saml1/core/Response
     203: ifne          216
     206: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
     209: dup
     210: ldc           #51                 // String Outbound message was not a SAML 1 Response
     212: invokespecial #23                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
     215: athrow
     216: aload         10
     218: checkcast     #50                 // class org/opensaml/saml/saml1/core/Response
     221: astore        11
     223: aload         11
     225: invokeinterface #52,  1           // InterfaceMethod org/opensaml/saml/saml1/core/Response.getAssertions:()Ljava/util/List;
     230: invokeinterface #53,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     235: astore        12
     237: aload         12
     239: invokeinterface #54,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     244: ifeq          375
     247: aload         12
     249: invokeinterface #55,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     254: checkcast     #56                 // class org/opensaml/saml/saml1/core/Assertion
     257: astore        13
     259: aload         8
     261: aload_1
     262: aload         13
     264: invokeinterface #57,  3           // InterfaceMethod org/opensaml/saml/saml1/binding/artifact/SAML1ArtifactBuilder.buildArtifact:(Lorg/opensaml/messaging/context/MessageContext;Lorg/opensaml/saml/saml1/core/Assertion;)Lorg/opensaml/saml/saml1/binding/artifact/AbstractSAML1Artifact;
     269: astore        14
     271: aload         14
     273: ifnonnull     298
     276: aload_0
     277: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     280: ldc           #58                 // String Unable to build artifact for message to relying party {}
     282: aload_2
     283: invokeinterface #59,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Object;)V
     288: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
     291: dup
     292: ldc           #60                 // String Unable to build artifact for message to relying party
     294: invokespecial #23                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
     297: athrow
     298: aload_0
     299: getfield      #8                  // Field artifactMap:Lorg/opensaml/saml/common/binding/artifact/SAMLArtifactMap;
     302: aload         14
     304: invokevirtual #61                 // Method org/opensaml/saml/saml1/binding/artifact/AbstractSAML1Artifact.base64Encode:()Ljava/lang/String;
     307: aload_2
     308: aload_3
     309: aload         13
     311: invokeinterface #62,  5           // InterfaceMethod org/opensaml/saml/common/binding/artifact/SAMLArtifactMap.put:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Lorg/opensaml/saml/common/SAMLObject;)V
     316: goto          346
     319: astore        15
     321: aload_0
     322: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     325: ldc           #64                 // String Unable to store assertion mapping for artifact
     327: aload         15
     329: invokeinterface #65,  3           // InterfaceMethod org/slf4j/Logger.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     334: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
     337: dup
     338: ldc           #64                 // String Unable to store assertion mapping for artifact
     340: aload         15
     342: invokespecial #35                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     345: athrow
     346: aload         14
     348: invokevirtual #61                 // Method org/opensaml/saml/saml1/binding/artifact/AbstractSAML1Artifact.base64Encode:()Ljava/lang/String;
     351: astore        15
     353: aload         6
     355: new           #40                 // class net/shibboleth/utilities/java/support/collection/Pair
     358: dup
     359: ldc           #66                 // String SAMLart
     361: aload         15
     363: invokespecial #42                 // Method net/shibboleth/utilities/java/support/collection/Pair."<init>":(Ljava/lang/Object;Ljava/lang/Object;)V
     366: invokeinterface #43,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     371: pop
     372: goto          237
     375: aload         5
     377: invokevirtual #67                 // Method net/shibboleth/utilities/java/support/net/URLBuilder.buildURL:()Ljava/lang/String;
     380: astore        12
     382: aload_0
     383: getfield      #4                  // Field log:Lorg/slf4j/Logger;
     386: ldc           #68                 // String Sending redirect to URL {} for relying party {}
     388: aload         12
     390: aload_2
     391: invokeinterface #69,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     396: aload_0
     397: invokevirtual #70                 // Method getHttpServletResponse:()Ljavax/servlet/http/HttpServletResponse;
     400: astore        13
     402: aload         13
     404: ifnonnull     417
     407: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
     410: dup
     411: ldc           #71                 // String HttpServletResponse was null
     413: invokespecial #23                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;)V
     416: athrow
     417: aload         13
     419: aload         12
     421: invokeinterface #72,  2           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendRedirect:(Ljava/lang/String;)V
     426: goto          443
     429: astore        14
     431: new           #21                 // class org/opensaml/messaging/encoder/MessageEncodingException
     434: dup
     435: ldc           #73                 // String Problem sending HTTP redirect
     437: aload         14
     439: invokespecial #35                 // Method org/opensaml/messaging/encoder/MessageEncodingException."<init>":(Ljava/lang/String;Ljava/lang/Exception;)V
     442: athrow
     443: return
    Exception table:
       from    to  target type
          45    56    59   Class java/net/MalformedURLException
         298   316   319   Class java/io/IOException
         417   426   429   Class java/io/IOException

  private java.lang.String getOutboundMessageIssuer(org.opensaml.messaging.context.MessageContext<org.opensaml.saml.common.SAMLObject>);
    Code:
       0: aload_1
       1: ldc_w         #74                 // class org/opensaml/saml/common/messaging/context/SAMLSelfEntityContext
       4: invokevirtual #75                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;)Lorg/opensaml/messaging/context/BaseContext;
       7: checkcast     #74                 // class org/opensaml/saml/common/messaging/context/SAMLSelfEntityContext
      10: astore_2
      11: aload_2
      12: ifnonnull     17
      15: aconst_null
      16: areturn
      17: aload_2
      18: invokevirtual #76                 // Method org/opensaml/saml/common/messaging/context/SAMLSelfEntityContext.getEntityId:()Ljava/lang/String;
      21: areturn

  private java.lang.String getInboundMessageIssuer(org.opensaml.messaging.context.MessageContext<org.opensaml.saml.common.SAMLObject>);
    Code:
       0: aload_1
       1: ldc_w         #77                 // class org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext
       4: invokevirtual #75                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;)Lorg/opensaml/messaging/context/BaseContext;
       7: checkcast     #77                 // class org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext
      10: astore_2
      11: aload_2
      12: ifnonnull     17
      15: aconst_null
      16: areturn
      17: aload_2
      18: invokevirtual #78                 // Method org/opensaml/saml/common/messaging/context/SAMLPeerEntityContext.getEntityId:()Ljava/lang/String;
      21: areturn

  private void storeSAMLArtifactType(org.opensaml.messaging.context.MessageContext<org.opensaml.saml.common.SAMLObject>, byte[]);
    Code:
       0: aload_1
       1: ldc_w         #79                 // class org/opensaml/saml/common/messaging/context/SAMLArtifactContext
       4: iconst_1
       5: invokevirtual #80                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;Z)Lorg/opensaml/messaging/context/BaseContext;
       8: checkcast     #79                 // class org/opensaml/saml/common/messaging/context/SAMLArtifactContext
      11: aload_2
      12: invokevirtual #81                 // Method org/opensaml/saml/common/messaging/context/SAMLArtifactContext.setArtifactType:([B)V
      15: return

  private byte[] getSAMLArtifactType(org.opensaml.messaging.context.MessageContext<org.opensaml.saml.common.SAMLObject>);
    Code:
       0: aload_1
       1: ldc_w         #79                 // class org/opensaml/saml/common/messaging/context/SAMLArtifactContext
       4: iconst_1
       5: invokevirtual #80                 // Method org/opensaml/messaging/context/MessageContext.getSubcontext:(Ljava/lang/Class;Z)Lorg/opensaml/messaging/context/BaseContext;
       8: checkcast     #79                 // class org/opensaml/saml/common/messaging/context/SAMLArtifactContext
      11: invokevirtual #82                 // Method org/opensaml/saml/common/messaging/context/SAMLArtifactContext.getArtifactType:()[B
      14: areturn
}

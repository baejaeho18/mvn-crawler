Compiled from "TombstoneAccessDelegate.java"
public class org.hibernate.cache.infinispan.access.TombstoneAccessDelegate implements org.hibernate.cache.infinispan.access.AccessDelegate {
  private static final org.infinispan.util.logging.Log log;

  protected final org.hibernate.cache.infinispan.impl.BaseTransactionalDataRegion region;

  protected final org.infinispan.AdvancedCache cache;

  protected final org.infinispan.AdvancedCache writeCache;

  protected final org.infinispan.AdvancedCache asyncWriteCache;

  protected final org.infinispan.AdvancedCache putFromLoadCache;

  protected final boolean requiresTransaction;

  public org.hibernate.cache.infinispan.access.TombstoneAccessDelegate(org.hibernate.cache.infinispan.impl.BaseTransactionalDataRegion);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
       9: aload_0
      10: aload_1
      11: invokevirtual #3                  // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getCache:()Lorg/infinispan/AdvancedCache;
      14: putfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      17: aload_0
      18: aload_0
      19: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      22: invokestatic  #5                  // Method org/hibernate/cache/infinispan/util/Caches.ignoreReturnValuesCache:(Lorg/infinispan/AdvancedCache;)Lorg/infinispan/AdvancedCache;
      25: putfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
      28: aload_0
      29: aload_0
      30: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      33: getstatic     #7                  // Field org/infinispan/context/Flag.IGNORE_RETURN_VALUES:Lorg/infinispan/context/Flag;
      36: invokestatic  #8                  // Method org/hibernate/cache/infinispan/util/Caches.asyncWriteCache:(Lorg/infinispan/AdvancedCache;Lorg/infinispan/context/Flag;)Lorg/infinispan/AdvancedCache;
      39: putfield      #9                  // Field asyncWriteCache:Lorg/infinispan/AdvancedCache;
      42: aload_0
      43: aload_0
      44: getfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
      47: iconst_2
      48: anewarray     #10                 // class org/infinispan/context/Flag
      51: dup
      52: iconst_0
      53: getstatic     #11                 // Field org/infinispan/context/Flag.ZERO_LOCK_ACQUISITION_TIMEOUT:Lorg/infinispan/context/Flag;
      56: aastore
      57: dup
      58: iconst_1
      59: getstatic     #12                 // Field org/infinispan/context/Flag.FAIL_SILENTLY:Lorg/infinispan/context/Flag;
      62: aastore
      63: invokeinterface #13,  2           // InterfaceMethod org/infinispan/AdvancedCache.withFlags:([Lorg/infinispan/context/Flag;)Lorg/infinispan/AdvancedCache;
      68: putfield      #14                 // Field putFromLoadCache:Lorg/infinispan/AdvancedCache;
      71: aload_0
      72: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      75: invokeinterface #15,  1           // InterfaceMethod org/infinispan/AdvancedCache.getCacheConfiguration:()Lorg/infinispan/configuration/cache/Configuration;
      80: astore_2
      81: aload_2
      82: invokevirtual #16                 // Method org/infinispan/configuration/cache/Configuration.clustering:()Lorg/infinispan/configuration/cache/ClusteringConfiguration;
      85: invokevirtual #17                 // Method org/infinispan/configuration/cache/ClusteringConfiguration.cacheMode:()Lorg/infinispan/configuration/cache/CacheMode;
      88: invokevirtual #18                 // Method org/infinispan/configuration/cache/CacheMode.isInvalidation:()Z
      91: ifeq          104
      94: new           #19                 // class java/lang/IllegalArgumentException
      97: dup
      98: ldc           #20                 // String For tombstone-based caching, invalidation cache is not allowed.
     100: invokespecial #21                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     103: athrow
     104: aload_2
     105: invokevirtual #22                 // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
     108: invokevirtual #23                 // Method org/infinispan/configuration/cache/TransactionConfiguration.transactionMode:()Lorg/infinispan/transaction/TransactionMode;
     111: invokevirtual #24                 // Method org/infinispan/transaction/TransactionMode.isTransactional:()Z
     114: ifeq          127
     117: new           #19                 // class java/lang/IllegalArgumentException
     120: dup
     121: ldc           #25                 // String Currently transactional caches are not supported.
     123: invokespecial #21                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     126: athrow
     127: aload_0
     128: aload_2
     129: invokevirtual #22                 // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
     132: invokevirtual #23                 // Method org/infinispan/configuration/cache/TransactionConfiguration.transactionMode:()Lorg/infinispan/transaction/TransactionMode;
     135: invokevirtual #24                 // Method org/infinispan/transaction/TransactionMode.isTransactional:()Z
     138: ifeq          155
     141: aload_2
     142: invokevirtual #22                 // Method org/infinispan/configuration/cache/Configuration.transaction:()Lorg/infinispan/configuration/cache/TransactionConfiguration;
     145: invokevirtual #26                 // Method org/infinispan/configuration/cache/TransactionConfiguration.autoCommit:()Z
     148: ifne          155
     151: iconst_1
     152: goto          156
     155: iconst_0
     156: putfield      #27                 // Field requiresTransaction:Z
     159: return

  public java.lang.Object get(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, long) throws org.hibernate.cache.CacheException;
    Code:
       0: lload_3
       1: aload_0
       2: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
       5: invokevirtual #28                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getLastRegionInvalidation:()J
       8: lcmp
       9: ifge          14
      12: aconst_null
      13: areturn
      14: aload_0
      15: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      18: aload_2
      19: invokeinterface #29,  2           // InterfaceMethod org/infinispan/AdvancedCache.get:(Ljava/lang/Object;)Ljava/lang/Object;
      24: astore        5
      26: aload         5
      28: instanceof    #30                 // class org/hibernate/cache/infinispan/util/Tombstone
      31: ifeq          36
      34: aconst_null
      35: areturn
      36: aload         5
      38: instanceof    #31                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      41: ifeq          53
      44: aload         5
      46: checkcast     #31                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      49: invokevirtual #32                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getValue:()Ljava/lang/Object;
      52: areturn
      53: aload         5
      55: areturn

  public boolean putFromLoad(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, long, java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: lload         4
       6: aload         6
       8: iconst_0
       9: invokevirtual #33                 // Method putFromLoad:(Lorg/hibernate/engine/spi/SessionImplementor;Ljava/lang/Object;Ljava/lang/Object;JLjava/lang/Object;Z)Z
      12: ireturn

  public boolean putFromLoad(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, long, java.lang.Object, boolean) throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
       4: invokevirtual #28                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getLastRegionInvalidation:()J
       7: lstore        8
       9: lload         4
      11: lload         8
      13: lcmp
      14: ifge          33
      17: getstatic     #34                 // Field log:Lorg/infinispan/util/logging/Log;
      20: ldc           #35                 // String putFromLoad not executed since tx started at %d, before last region invalidation finished = %d
      22: lload         4
      24: lload         8
      26: invokeinterface #36,  6           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;JJ)V
      31: iconst_0
      32: ireturn
      33: iload         7
      35: ifeq          118
      38: aload_0
      39: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      42: aload_2
      43: invokeinterface #29,  2           // InterfaceMethod org/infinispan/AdvancedCache.get:(Ljava/lang/Object;)Ljava/lang/Object;
      48: astore        10
      50: aload         10
      52: instanceof    #30                 // class org/hibernate/cache/infinispan/util/Tombstone
      55: ifeq          99
      58: aload         10
      60: checkcast     #30                 // class org/hibernate/cache/infinispan/util/Tombstone
      63: astore        11
      65: aload         11
      67: invokevirtual #37                 // Method org/hibernate/cache/infinispan/util/Tombstone.getLastTimestamp:()J
      70: lstore        12
      72: lload         4
      74: lload         12
      76: lcmp
      77: ifgt          96
      80: getstatic     #34                 // Field log:Lorg/infinispan/util/logging/Log;
      83: ldc           #38                 // String putFromLoad not executed since tx started at %d, before last invalidation finished = %d
      85: lload         4
      87: lload         12
      89: invokeinterface #36,  6           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;JJ)V
      94: iconst_0
      95: ireturn
      96: goto          118
      99: aload         10
     101: ifnull        118
     104: getstatic     #34                 // Field log:Lorg/infinispan/util/logging/Log;
     107: ldc           #39                 // String putFromLoad not executed since cache contains %s
     109: aload         10
     111: invokeinterface #40,  3           // InterfaceMethod org/infinispan/util/logging/Log.tracef:(Ljava/lang/String;Ljava/lang/Object;)V
     116: iconst_0
     117: ireturn
     118: aload_0
     119: getfield      #14                 // Field putFromLoadCache:Lorg/infinispan/AdvancedCache;
     122: aload_2
     123: new           #41                 // class org/hibernate/cache/infinispan/util/TombstoneUpdate
     126: dup
     127: aload_1
     128: invokeinterface #42,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getTimestamp:()J
     133: aload_3
     134: invokespecial #43                 // Method org/hibernate/cache/infinispan/util/TombstoneUpdate."<init>":(JLjava/lang/Object;)V
     137: invokeinterface #44,  3           // InterfaceMethod org/infinispan/AdvancedCache.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     142: pop
     143: iconst_1
     144: ireturn

  public boolean insert(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, java.lang.Object) throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: invokevirtual #45                 // Method write:(Lorg/hibernate/engine/spi/SessionImplementor;Ljava/lang/Object;Ljava/lang/Object;)V
       7: iconst_1
       8: ireturn

  public boolean update(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object) throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: aload_3
       4: invokevirtual #45                 // Method write:(Lorg/hibernate/engine/spi/SessionImplementor;Ljava/lang/Object;Ljava/lang/Object;)V
       7: iconst_1
       8: ireturn

  protected void write(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object);
    Code:
       0: aload_1
       1: invokeinterface #46,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getTransactionCoordinator:()Lorg/hibernate/resource/transaction/TransactionCoordinator;
       6: astore        4
       8: new           #47                 // class org/hibernate/cache/infinispan/access/FutureUpdateSynchronization
      11: dup
      12: aload         4
      14: aload_0
      15: getfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
      18: aload_0
      19: getfield      #27                 // Field requiresTransaction:Z
      22: aload_2
      23: aload_3
      24: invokespecial #48                 // Method org/hibernate/cache/infinispan/access/FutureUpdateSynchronization."<init>":(Lorg/hibernate/resource/transaction/TransactionCoordinator;Lorg/infinispan/AdvancedCache;ZLjava/lang/Object;Ljava/lang/Object;)V
      27: astore        5
      29: aload_0
      30: getfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
      33: aload_2
      34: new           #31                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      37: dup
      38: aload         5
      40: invokevirtual #49                 // Method org/hibernate/cache/infinispan/access/FutureUpdateSynchronization.getUuid:()Ljava/util/UUID;
      43: aconst_null
      44: invokespecial #50                 // Method org/hibernate/cache/infinispan/util/FutureUpdate."<init>":(Ljava/util/UUID;Ljava/lang/Object;)V
      47: aload_0
      48: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      51: invokevirtual #51                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getTombstoneExpiration:()J
      54: getstatic     #52                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      57: invokeinterface #53,  6           // InterfaceMethod org/infinispan/AdvancedCache.put:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
      62: pop
      63: aload         4
      65: invokeinterface #54,  1           // InterfaceMethod org/hibernate/resource/transaction/TransactionCoordinator.getLocalSynchronizations:()Lorg/hibernate/resource/transaction/SynchronizationRegistry;
      70: aload         5
      72: invokeinterface #55,  2           // InterfaceMethod org/hibernate/resource/transaction/SynchronizationRegistry.registerSynchronization:(Ljavax/transaction/Synchronization;)V
      77: return

  public void remove(org.hibernate.engine.spi.SessionImplementor, java.lang.Object) throws org.hibernate.cache.CacheException;
    Code:
       0: aload_1
       1: invokeinterface #46,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getTransactionCoordinator:()Lorg/hibernate/resource/transaction/TransactionCoordinator;
       6: astore_3
       7: new           #56                 // class org/hibernate/cache/infinispan/access/TombstoneSynchronization
      10: dup
      11: aload_3
      12: aload_0
      13: getfield      #9                  // Field asyncWriteCache:Lorg/infinispan/AdvancedCache;
      16: aload_0
      17: getfield      #27                 // Field requiresTransaction:Z
      20: aload_0
      21: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      24: aload_2
      25: invokespecial #57                 // Method org/hibernate/cache/infinispan/access/TombstoneSynchronization."<init>":(Lorg/hibernate/resource/transaction/TransactionCoordinator;Lorg/infinispan/AdvancedCache;ZLorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;Ljava/lang/Object;)V
      28: astore        4
      30: new           #30                 // class org/hibernate/cache/infinispan/util/Tombstone
      33: dup
      34: aload         4
      36: invokevirtual #58                 // Method org/hibernate/cache/infinispan/access/TombstoneSynchronization.getUuid:()Ljava/util/UUID;
      39: aload_1
      40: invokeinterface #42,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getTimestamp:()J
      45: aload_0
      46: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      49: invokevirtual #51                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getTombstoneExpiration:()J
      52: ladd
      53: iconst_0
      54: invokespecial #59                 // Method org/hibernate/cache/infinispan/util/Tombstone."<init>":(Ljava/util/UUID;JZ)V
      57: astore        5
      59: aload_0
      60: getfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
      63: aload_2
      64: aload         5
      66: aload_0
      67: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      70: invokevirtual #51                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.getTombstoneExpiration:()J
      73: getstatic     #52                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      76: invokeinterface #53,  6           // InterfaceMethod org/infinispan/AdvancedCache.put:(Ljava/lang/Object;Ljava/lang/Object;JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
      81: pop
      82: aload_3
      83: invokeinterface #54,  1           // InterfaceMethod org/hibernate/resource/transaction/TransactionCoordinator.getLocalSynchronizations:()Lorg/hibernate/resource/transaction/SynchronizationRegistry;
      88: aload         4
      90: invokeinterface #55,  2           // InterfaceMethod org/hibernate/resource/transaction/SynchronizationRegistry.registerSynchronization:(Ljavax/transaction/Synchronization;)V
      95: return

  public void removeAll() throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
       4: invokevirtual #60                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.beginInvalidation:()V
       7: aload_0
       8: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      11: invokestatic  #61                 // Method org/hibernate/cache/infinispan/util/Caches.broadcastEvictAll:(Lorg/infinispan/AdvancedCache;)V
      14: aload_0
      15: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      18: invokevirtual #62                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.endInvalidation:()V
      21: goto          34
      24: astore_1
      25: aload_0
      26: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      29: invokevirtual #62                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.endInvalidation:()V
      32: aload_1
      33: athrow
      34: return
    Exception table:
       from    to  target type
           7    14    24   any

  public void evict(java.lang.Object) throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: getfield      #6                  // Field writeCache:Lorg/infinispan/AdvancedCache;
       4: aload_1
       5: getstatic     #63                 // Field org/hibernate/cache/infinispan/util/TombstoneUpdate.EVICT:Lorg/hibernate/cache/infinispan/util/TombstoneUpdate;
       8: invokeinterface #44,  3           // InterfaceMethod org/infinispan/AdvancedCache.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      13: pop
      14: return

  public void evictAll() throws org.hibernate.cache.CacheException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
       4: invokevirtual #60                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.beginInvalidation:()V
       7: aload_0
       8: getfield      #4                  // Field cache:Lorg/infinispan/AdvancedCache;
      11: invokestatic  #61                 // Method org/hibernate/cache/infinispan/util/Caches.broadcastEvictAll:(Lorg/infinispan/AdvancedCache;)V
      14: aload_0
      15: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      18: invokevirtual #62                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.endInvalidation:()V
      21: goto          34
      24: astore_1
      25: aload_0
      26: getfield      #2                  // Field region:Lorg/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion;
      29: invokevirtual #62                 // Method org/hibernate/cache/infinispan/impl/BaseTransactionalDataRegion.endInvalidation:()V
      32: aload_1
      33: athrow
      34: return
    Exception table:
       from    to  target type
           7    14    24   any

  public void unlockItem(org.hibernate.engine.spi.SessionImplementor, java.lang.Object) throws org.hibernate.cache.CacheException;
    Code:
       0: return

  public boolean afterInsert(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, java.lang.Object);
    Code:
       0: iconst_0
       1: ireturn

  public boolean afterUpdate(org.hibernate.engine.spi.SessionImplementor, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, org.hibernate.cache.spi.access.SoftLock);
    Code:
       0: iconst_0
       1: ireturn

  static {};
    Code:
       0: ldc           #64                 // class org/hibernate/cache/infinispan/access/TombstoneAccessDelegate
       2: invokestatic  #65                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #34                 // Field log:Lorg/infinispan/util/logging/Log;
       8: return
}

Compiled from "TombstoneCallInterceptor.java"
public class org.hibernate.cache.infinispan.access.TombstoneCallInterceptor extends org.infinispan.interceptors.CallInterceptor {
  private static final org.infinispan.util.logging.Log log;

  private static final java.util.UUID ZERO;

  private org.infinispan.AdvancedCache cache;

  private final org.infinispan.metadata.Metadata expiringMetadata;

  public org.hibernate.cache.infinispan.access.TombstoneCallInterceptor(long);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/infinispan/interceptors/CallInterceptor."<init>":()V
       4: aload_0
       5: new           #2                  // class org/infinispan/metadata/EmbeddedMetadata$Builder
       8: dup
       9: invokespecial #3                  // Method org/infinispan/metadata/EmbeddedMetadata$Builder."<init>":()V
      12: lload_1
      13: getstatic     #4                  // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      16: invokevirtual #5                  // Method org/infinispan/metadata/EmbeddedMetadata$Builder.lifespan:(JLjava/util/concurrent/TimeUnit;)Lorg/infinispan/metadata/Metadata$Builder;
      19: invokeinterface #6,  1            // InterfaceMethod org/infinispan/metadata/Metadata$Builder.build:()Lorg/infinispan/metadata/Metadata;
      24: putfield      #7                  // Field expiringMetadata:Lorg/infinispan/metadata/Metadata;
      27: return

  public void injectDependencies(org.infinispan.AdvancedCache);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #8                  // Field cache:Lorg/infinispan/AdvancedCache;
       5: return

  public java.lang.Object visitPutKeyValueCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.write.PutKeyValueCommand) throws java.lang.Throwable;
    Code:
       0: aload_1
       1: aload_2
       2: invokevirtual #9                  // Method org/infinispan/commands/write/PutKeyValueCommand.getKey:()Ljava/lang/Object;
       5: invokeinterface #10,  2           // InterfaceMethod org/infinispan/context/InvocationContext.lookupEntry:(Ljava/lang/Object;)Lorg/infinispan/container/entries/CacheEntry;
      10: checkcast     #11                 // class org/infinispan/container/entries/MVCCEntry
      13: astore_3
      14: aload_3
      15: ifnonnull     20
      18: aconst_null
      19: areturn
      20: aload_2
      21: invokevirtual #12                 // Method org/infinispan/commands/write/PutKeyValueCommand.getValue:()Ljava/lang/Object;
      24: astore        4
      26: aload         4
      28: instanceof    #13                 // class org/hibernate/cache/infinispan/util/TombstoneUpdate
      31: ifeq          45
      34: aload_0
      35: aload_3
      36: aload         4
      38: checkcast     #13                 // class org/hibernate/cache/infinispan/util/TombstoneUpdate
      41: invokevirtual #14                 // Method handleTombstoneUpdate:(Lorg/infinispan/container/entries/MVCCEntry;Lorg/hibernate/cache/infinispan/util/TombstoneUpdate;)Ljava/lang/Object;
      44: areturn
      45: aload         4
      47: instanceof    #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      50: ifeq          64
      53: aload_0
      54: aload_3
      55: aload         4
      57: checkcast     #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      60: invokespecial #16                 // Method handleTombstone:(Lorg/infinispan/container/entries/MVCCEntry;Lorg/hibernate/cache/infinispan/util/Tombstone;)Ljava/lang/Object;
      63: areturn
      64: aload         4
      66: instanceof    #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      69: ifeq          84
      72: aload_0
      73: aload_3
      74: aload         4
      76: checkcast     #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      79: aload_2
      80: invokespecial #18                 // Method handleFutureUpdate:(Lorg/infinispan/container/entries/MVCCEntry;Lorg/hibernate/cache/infinispan/util/FutureUpdate;Lorg/infinispan/commands/write/PutKeyValueCommand;)Ljava/lang/Object;
      83: areturn
      84: aload_0
      85: aload_1
      86: aload_2
      87: invokespecial #19                 // Method org/infinispan/interceptors/CallInterceptor.visitPutKeyValueCommand:(Lorg/infinispan/context/InvocationContext;Lorg/infinispan/commands/write/PutKeyValueCommand;)Ljava/lang/Object;
      90: areturn

  private java.lang.Object handleFutureUpdate(org.infinispan.container.entries.MVCCEntry, org.hibernate.cache.infinispan.util.FutureUpdate, org.infinispan.commands.write.PutKeyValueCommand);
    Code:
       0: aload_1
       1: invokeinterface #20,  1           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.getValue:()Ljava/lang/Object;
       6: astore        4
       8: aload         4
      10: instanceof    #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      13: ifeq          110
      16: aload         4
      18: checkcast     #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      21: astore        5
      23: aload_2
      24: invokevirtual #21                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getUuid:()Ljava/util/UUID;
      27: aload         5
      29: invokevirtual #21                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getUuid:()Ljava/util/UUID;
      32: invokevirtual #22                 // Method java/util/UUID.equals:(Ljava/lang/Object;)Z
      35: ifeq          72
      38: aload_2
      39: invokevirtual #23                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getValue:()Ljava/lang/Object;
      42: ifnull        58
      45: aload_0
      46: aload_1
      47: aload_2
      48: invokevirtual #23                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getValue:()Ljava/lang/Object;
      51: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
      54: pop
      55: goto          107
      58: aload_0
      59: aload_1
      60: aload         5
      62: invokevirtual #23                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getValue:()Ljava/lang/Object;
      65: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
      68: pop
      69: goto          107
      72: aload_0
      73: aload_1
      74: new           #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
      77: dup
      78: getstatic     #25                 // Field ZERO:Ljava/util/UUID;
      81: aconst_null
      82: invokespecial #26                 // Method org/hibernate/cache/infinispan/util/FutureUpdate."<init>":(Ljava/util/UUID;Ljava/lang/Object;)V
      85: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
      88: pop
      89: aload_1
      90: aload_0
      91: getfield      #7                  // Field expiringMetadata:Lorg/infinispan/metadata/Metadata;
      94: invokeinterface #27,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setMetadata:(Lorg/infinispan/metadata/Metadata;)V
      99: aload_3
     100: aload_0
     101: getfield      #7                  // Field expiringMetadata:Lorg/infinispan/metadata/Metadata;
     104: invokevirtual #28                 // Method org/infinispan/commands/write/PutKeyValueCommand.setMetadata:(Lorg/infinispan/metadata/Metadata;)V
     107: goto          153
     110: aload         4
     112: instanceof    #15                 // class org/hibernate/cache/infinispan/util/Tombstone
     115: ifeq          120
     118: aconst_null
     119: areturn
     120: aload_2
     121: invokevirtual #23                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getValue:()Ljava/lang/Object;
     124: ifnull        135
     127: aload_0
     128: aload_1
     129: invokespecial #29                 // Method removeValue:(Lorg/infinispan/container/entries/MVCCEntry;)V
     132: goto          153
     135: aload_0
     136: aload_1
     137: new           #17                 // class org/hibernate/cache/infinispan/util/FutureUpdate
     140: dup
     141: aload_2
     142: invokevirtual #21                 // Method org/hibernate/cache/infinispan/util/FutureUpdate.getUuid:()Ljava/util/UUID;
     145: aconst_null
     146: invokespecial #26                 // Method org/hibernate/cache/infinispan/util/FutureUpdate."<init>":(Ljava/util/UUID;Ljava/lang/Object;)V
     149: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
     152: pop
     153: aconst_null
     154: areturn

  private java.lang.Object handleTombstone(org.infinispan.container.entries.MVCCEntry, org.hibernate.cache.infinispan.util.Tombstone);
    Code:
       0: aload_1
       1: invokeinterface #20,  1           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.getValue:()Ljava/lang/Object;
       6: astore_3
       7: aload_3
       8: instanceof    #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      11: ifeq          39
      14: aload_1
      15: iconst_1
      16: invokeinterface #30,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setChanged:(Z)V
      21: aload_1
      22: aload_2
      23: aload_3
      24: checkcast     #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      27: invokevirtual #31                 // Method org/hibernate/cache/infinispan/util/Tombstone.merge:(Lorg/hibernate/cache/infinispan/util/Tombstone;)Lorg/hibernate/cache/infinispan/util/Tombstone;
      30: invokeinterface #32,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValue:(Ljava/lang/Object;)Ljava/lang/Object;
      35: pop
      36: goto          46
      39: aload_0
      40: aload_1
      41: aload_2
      42: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
      45: pop
      46: aconst_null
      47: areturn

  protected java.lang.Object handleTombstoneUpdate(org.infinispan.container.entries.MVCCEntry, org.hibernate.cache.infinispan.util.TombstoneUpdate);
    Code:
       0: aload_1
       1: invokeinterface #20,  1           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.getValue:()Ljava/lang/Object;
       6: astore_3
       7: aload_2
       8: invokevirtual #33                 // Method org/hibernate/cache/infinispan/util/TombstoneUpdate.getValue:()Ljava/lang/Object;
      11: astore        4
      13: aload_3
      14: instanceof    #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      17: ifeq          58
      20: aload_3
      21: checkcast     #15                 // class org/hibernate/cache/infinispan/util/Tombstone
      24: astore        5
      26: aload         5
      28: invokevirtual #34                 // Method org/hibernate/cache/infinispan/util/Tombstone.getLastTimestamp:()J
      31: aload_2
      32: invokevirtual #35                 // Method org/hibernate/cache/infinispan/util/TombstoneUpdate.getTimestamp:()J
      35: lcmp
      36: ifge          55
      39: aload_1
      40: iconst_1
      41: invokeinterface #30,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setChanged:(Z)V
      46: aload_1
      47: aload         4
      49: invokeinterface #32,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValue:(Ljava/lang/Object;)Ljava/lang/Object;
      54: pop
      55: goto          83
      58: aload_3
      59: ifnonnull     73
      62: aload_0
      63: aload_1
      64: aload         4
      66: invokespecial #24                 // Method setValue:(Lorg/infinispan/container/entries/MVCCEntry;Ljava/lang/Object;)Ljava/lang/Object;
      69: pop
      70: goto          83
      73: aload         4
      75: ifnonnull     83
      78: aload_0
      79: aload_1
      80: invokespecial #29                 // Method removeValue:(Lorg/infinispan/container/entries/MVCCEntry;)V
      83: aconst_null
      84: areturn

  private java.lang.Object setValue(org.infinispan.container.entries.MVCCEntry, java.lang.Object);
    Code:
       0: aload_1
       1: invokeinterface #36,  1           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.isRemoved:()Z
       6: ifeq          33
       9: aload_1
      10: iconst_0
      11: invokeinterface #37,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setRemoved:(Z)V
      16: aload_1
      17: iconst_1
      18: invokeinterface #38,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setCreated:(Z)V
      23: aload_1
      24: iconst_1
      25: invokeinterface #39,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValid:(Z)V
      30: goto          40
      33: aload_1
      34: iconst_1
      35: invokeinterface #30,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setChanged:(Z)V
      40: aload_1
      41: aload_2
      42: invokeinterface #32,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValue:(Ljava/lang/Object;)Ljava/lang/Object;
      47: areturn

  private void removeValue(org.infinispan.container.entries.MVCCEntry);
    Code:
       0: aload_1
       1: iconst_1
       2: invokeinterface #37,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setRemoved:(Z)V
       7: aload_1
       8: iconst_1
       9: invokeinterface #30,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setChanged:(Z)V
      14: aload_1
      15: iconst_0
      16: invokeinterface #38,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setCreated:(Z)V
      21: aload_1
      22: iconst_0
      23: invokeinterface #39,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValid:(Z)V
      28: aload_1
      29: aconst_null
      30: invokeinterface #32,  2           // InterfaceMethod org/infinispan/container/entries/MVCCEntry.setValue:(Ljava/lang/Object;)Ljava/lang/Object;
      35: pop
      36: return

  public java.lang.Object visitSizeCommand(org.infinispan.context.InvocationContext, org.infinispan.commands.read.SizeCommand) throws java.lang.Throwable;
    Code:
       0: aload_2
       1: invokevirtual #40                 // Method org/infinispan/commands/read/SizeCommand.getFlags:()Ljava/util/Set;
       4: astore_3
       5: iconst_0
       6: istore        4
       8: aload_1
       9: invokeinterface #41,  1           // InterfaceMethod org/infinispan/context/InvocationContext.getLookedUpEntries:()Ljava/util/Map;
      14: astore        5
      16: aload_0
      17: getfield      #8                  // Field cache:Lorg/infinispan/AdvancedCache;
      20: invokeinterface #42,  1           // InterfaceMethod org/infinispan/AdvancedCache.getAdvancedCache:()Lorg/infinispan/AdvancedCache;
      25: aload_3
      26: ifnull        50
      29: aload_3
      30: aload_3
      31: invokeinterface #43,  1           // InterfaceMethod java/util/Set.size:()I
      36: anewarray     #44                 // class org/infinispan/context/Flag
      39: invokeinterface #45,  2           // InterfaceMethod java/util/Set.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
      44: checkcast     #46                 // class "[Lorg/infinispan/context/Flag;"
      47: goto          51
      50: aconst_null
      51: invokeinterface #47,  2           // InterfaceMethod org/infinispan/AdvancedCache.withFlags:([Lorg/infinispan/context/Flag;)Lorg/infinispan/AdvancedCache;
      56: astore        6
      58: aload         6
      60: getstatic     #48                 // Field org/hibernate/cache/infinispan/util/Tombstone.EXCLUDE_TOMBSTONES:Lorg/hibernate/cache/infinispan/util/Tombstone$ExcludeTombstonesFilter;
      63: invokeinterface #49,  2           // InterfaceMethod org/infinispan/AdvancedCache.filterEntries:(Lorg/infinispan/filter/KeyValueFilter;)Lorg/infinispan/iteration/EntryIterable;
      68: getstatic     #50                 // Field org/hibernate/cache/infinispan/util/FutureUpdate.VALUE_EXTRACTOR:Lorg/hibernate/cache/infinispan/util/FutureUpdate$ValueExtractor;
      71: invokeinterface #51,  2           // InterfaceMethod org/infinispan/iteration/EntryIterable.converter:(Lorg/infinispan/filter/Converter;)Lorg/infinispan/commons/util/CloseableIterable;
      76: astore        7
      78: aload         7
      80: invokeinterface #52,  1           // InterfaceMethod org/infinispan/commons/util/CloseableIterable.iterator:()Lorg/infinispan/commons/util/CloseableIterator;
      85: astore        8
      87: aload         8
      89: invokeinterface #53,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      94: ifeq          149
      97: aload         8
      99: invokeinterface #54,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     104: checkcast     #55                 // class org/infinispan/container/entries/CacheEntry
     107: astore        9
     109: aload         9
     111: invokeinterface #56,  1           // InterfaceMethod org/infinispan/container/entries/CacheEntry.getValue:()Ljava/lang/Object;
     116: ifnull        146
     119: iload         4
     121: iinc          4, 1
     124: ldc           #58                 // int 2147483647
     126: if_icmpne     146
     129: ldc           #58                 // int 2147483647
     131: invokestatic  #59                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     134: astore        10
     136: aload         7
     138: invokeinterface #60,  1           // InterfaceMethod org/infinispan/commons/util/CloseableIterable.close:()V
     143: aload         10
     145: areturn
     146: goto          87
     149: aload         7
     151: invokeinterface #60,  1           // InterfaceMethod org/infinispan/commons/util/CloseableIterable.close:()V
     156: goto          171
     159: astore        11
     161: aload         7
     163: invokeinterface #60,  1           // InterfaceMethod org/infinispan/commons/util/CloseableIterable.close:()V
     168: aload         11
     170: athrow
     171: iload         4
     173: invokestatic  #59                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     176: areturn
    Exception table:
       from    to  target type
          78   136   159   any
         146   149   159   any
         159   161   159   any

  static {};
    Code:
       0: ldc           #61                 // class org/hibernate/cache/infinispan/access/TombstoneCallInterceptor
       2: invokestatic  #62                 // Method org/infinispan/util/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/infinispan/util/logging/Log;
       5: putstatic     #63                 // Field log:Lorg/infinispan/util/logging/Log;
       8: new           #64                 // class java/util/UUID
      11: dup
      12: lconst_0
      13: lconst_0
      14: invokespecial #65                 // Method java/util/UUID."<init>":(JJ)V
      17: putstatic     #25                 // Field ZERO:Ljava/util/UUID;
      20: return
}

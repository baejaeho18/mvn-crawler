Compiled from "CollectionUpdateAction.java"
public final class org.hibernate.action.internal.CollectionUpdateAction extends org.hibernate.action.internal.CollectionAction {
  private final boolean emptySnapshot;

  public org.hibernate.action.internal.CollectionUpdateAction(org.hibernate.collection.spi.PersistentCollection, org.hibernate.persister.collection.CollectionPersister, java.io.Serializable, boolean, org.hibernate.engine.spi.SessionImplementor);
    Code:
       0: aload_0
       1: aload_2
       2: aload_1
       3: aload_3
       4: aload         5
       6: invokespecial #1                  // Method org/hibernate/action/internal/CollectionAction."<init>":(Lorg/hibernate/persister/collection/CollectionPersister;Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
       9: aload_0
      10: iload         4
      12: putfield      #2                  // Field emptySnapshot:Z
      15: return

  public void execute() throws org.hibernate.HibernateException;
    Code:
       0: aload_0
       1: invokevirtual #3                  // Method getKey:()Ljava/io/Serializable;
       4: astore_1
       5: aload_0
       6: invokevirtual #4                  // Method getSession:()Lorg/hibernate/engine/spi/SessionImplementor;
       9: astore_2
      10: aload_0
      11: invokevirtual #5                  // Method getPersister:()Lorg/hibernate/persister/collection/CollectionPersister;
      14: astore_3
      15: aload_0
      16: invokevirtual #6                  // Method getCollection:()Lorg/hibernate/collection/spi/PersistentCollection;
      19: astore        4
      21: aload_3
      22: aload_2
      23: invokeinterface #7,  2            // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.isAffectedByEnabledFilters:(Lorg/hibernate/engine/spi/SessionImplementor;)Z
      28: istore        5
      30: aload_0
      31: invokespecial #8                  // Method preUpdate:()V
      34: aload         4
      36: invokeinterface #9,  1            // InterfaceMethod org/hibernate/collection/spi/PersistentCollection.wasInitialized:()Z
      41: ifne          64
      44: aload         4
      46: invokeinterface #10,  1           // InterfaceMethod org/hibernate/collection/spi/PersistentCollection.hasQueuedOperations:()Z
      51: ifne          205
      54: new           #11                 // class org/hibernate/AssertionFailure
      57: dup
      58: ldc           #12                 // String no queued adds
      60: invokespecial #13                 // Method org/hibernate/AssertionFailure."<init>":(Ljava/lang/String;)V
      63: athrow
      64: iload         5
      66: ifne          97
      69: aload         4
      71: invokeinterface #14,  1           // InterfaceMethod org/hibernate/collection/spi/PersistentCollection.empty:()Z
      76: ifeq          97
      79: aload_0
      80: getfield      #2                  // Field emptySnapshot:Z
      83: ifne          205
      86: aload_3
      87: aload_1
      88: aload_2
      89: invokeinterface #15,  3           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.remove:(Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
      94: goto          205
      97: aload         4
      99: aload_3
     100: invokeinterface #16,  2           // InterfaceMethod org/hibernate/collection/spi/PersistentCollection.needsRecreate:(Lorg/hibernate/persister/collection/CollectionPersister;)Z
     105: ifeq          175
     108: iload         5
     110: ifeq          147
     113: new           #17                 // class org/hibernate/HibernateException
     116: dup
     117: new           #18                 // class java/lang/StringBuilder
     120: dup
     121: invokespecial #19                 // Method java/lang/StringBuilder."<init>":()V
     124: ldc           #20                 // String cannot recreate collection while filter is enabled:
     126: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: aload_3
     130: aload         4
     132: aload_1
     133: aload_2
     134: invokestatic  #22                 // Method org/hibernate/pretty/MessageHelper.collectionInfoString:(Lorg/hibernate/persister/collection/CollectionPersister;Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)Ljava/lang/String;
     137: invokevirtual #21                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     140: invokevirtual #23                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     143: invokespecial #24                 // Method org/hibernate/HibernateException."<init>":(Ljava/lang/String;)V
     146: athrow
     147: aload_0
     148: getfield      #2                  // Field emptySnapshot:Z
     151: ifne          162
     154: aload_3
     155: aload_1
     156: aload_2
     157: invokeinterface #15,  3           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.remove:(Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
     162: aload_3
     163: aload         4
     165: aload_1
     166: aload_2
     167: invokeinterface #25,  4           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.recreate:(Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
     172: goto          205
     175: aload_3
     176: aload         4
     178: aload_1
     179: aload_2
     180: invokeinterface #26,  4           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.deleteRows:(Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
     185: aload_3
     186: aload         4
     188: aload_1
     189: aload_2
     190: invokeinterface #27,  4           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.updateRows:(Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
     195: aload_3
     196: aload         4
     198: aload_1
     199: aload_2
     200: invokeinterface #28,  4           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.insertRows:(Lorg/hibernate/collection/spi/PersistentCollection;Ljava/io/Serializable;Lorg/hibernate/engine/spi/SessionImplementor;)V
     205: aload_0
     206: invokevirtual #4                  // Method getSession:()Lorg/hibernate/engine/spi/SessionImplementor;
     209: invokeinterface #29,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getPersistenceContext:()Lorg/hibernate/engine/spi/PersistenceContext;
     214: aload         4
     216: invokeinterface #30,  2           // InterfaceMethod org/hibernate/engine/spi/PersistenceContext.getCollectionEntry:(Lorg/hibernate/collection/spi/PersistentCollection;)Lorg/hibernate/engine/spi/CollectionEntry;
     221: aload         4
     223: invokevirtual #31                 // Method org/hibernate/engine/spi/CollectionEntry.afterAction:(Lorg/hibernate/collection/spi/PersistentCollection;)V
     226: aload_0
     227: invokevirtual #32                 // Method evict:()V
     230: aload_0
     231: invokespecial #33                 // Method postUpdate:()V
     234: aload_0
     235: invokevirtual #4                  // Method getSession:()Lorg/hibernate/engine/spi/SessionImplementor;
     238: invokeinterface #34,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getFactory:()Lorg/hibernate/engine/spi/SessionFactoryImplementor;
     243: invokeinterface #35,  1           // InterfaceMethod org/hibernate/engine/spi/SessionFactoryImplementor.getStatistics:()Lorg/hibernate/stat/Statistics;
     248: invokeinterface #36,  1           // InterfaceMethod org/hibernate/stat/Statistics.isStatisticsEnabled:()Z
     253: ifeq          284
     256: aload_0
     257: invokevirtual #4                  // Method getSession:()Lorg/hibernate/engine/spi/SessionImplementor;
     260: invokeinterface #34,  1           // InterfaceMethod org/hibernate/engine/spi/SessionImplementor.getFactory:()Lorg/hibernate/engine/spi/SessionFactoryImplementor;
     265: invokeinterface #37,  1           // InterfaceMethod org/hibernate/engine/spi/SessionFactoryImplementor.getStatisticsImplementor:()Lorg/hibernate/stat/spi/StatisticsImplementor;
     270: aload_0
     271: invokevirtual #5                  // Method getPersister:()Lorg/hibernate/persister/collection/CollectionPersister;
     274: invokeinterface #38,  1           // InterfaceMethod org/hibernate/persister/collection/CollectionPersister.getRole:()Ljava/lang/String;
     279: invokeinterface #39,  2           // InterfaceMethod org/hibernate/stat/spi/StatisticsImplementor.updateCollection:(Ljava/lang/String;)V
     284: return

  private void preUpdate();
    Code:
       0: aload_0
       1: getstatic     #40                 // Field org/hibernate/event/spi/EventType.PRE_COLLECTION_UPDATE:Lorg/hibernate/event/spi/EventType;
       4: invokevirtual #41                 // Method listenerGroup:(Lorg/hibernate/event/spi/EventType;)Lorg/hibernate/event/service/spi/EventListenerGroup;
       7: astore_1
       8: aload_1
       9: invokeinterface #42,  1           // InterfaceMethod org/hibernate/event/service/spi/EventListenerGroup.isEmpty:()Z
      14: ifeq          18
      17: return
      18: new           #43                 // class org/hibernate/event/spi/PreCollectionUpdateEvent
      21: dup
      22: aload_0
      23: invokevirtual #5                  // Method getPersister:()Lorg/hibernate/persister/collection/CollectionPersister;
      26: aload_0
      27: invokevirtual #6                  // Method getCollection:()Lorg/hibernate/collection/spi/PersistentCollection;
      30: aload_0
      31: invokevirtual #44                 // Method eventSource:()Lorg/hibernate/event/spi/EventSource;
      34: invokespecial #45                 // Method org/hibernate/event/spi/PreCollectionUpdateEvent."<init>":(Lorg/hibernate/persister/collection/CollectionPersister;Lorg/hibernate/collection/spi/PersistentCollection;Lorg/hibernate/event/spi/EventSource;)V
      37: astore_2
      38: aload_1
      39: invokeinterface #46,  1           // InterfaceMethod org/hibernate/event/service/spi/EventListenerGroup.listeners:()Ljava/lang/Iterable;
      44: invokeinterface #47,  1           // InterfaceMethod java/lang/Iterable.iterator:()Ljava/util/Iterator;
      49: astore_3
      50: aload_3
      51: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      56: ifeq          81
      59: aload_3
      60: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      65: checkcast     #50                 // class org/hibernate/event/spi/PreCollectionUpdateEventListener
      68: astore        4
      70: aload         4
      72: aload_2
      73: invokeinterface #51,  2           // InterfaceMethod org/hibernate/event/spi/PreCollectionUpdateEventListener.onPreUpdateCollection:(Lorg/hibernate/event/spi/PreCollectionUpdateEvent;)V
      78: goto          50
      81: return

  private void postUpdate();
    Code:
       0: aload_0
       1: getstatic     #52                 // Field org/hibernate/event/spi/EventType.POST_COLLECTION_UPDATE:Lorg/hibernate/event/spi/EventType;
       4: invokevirtual #41                 // Method listenerGroup:(Lorg/hibernate/event/spi/EventType;)Lorg/hibernate/event/service/spi/EventListenerGroup;
       7: astore_1
       8: aload_1
       9: invokeinterface #42,  1           // InterfaceMethod org/hibernate/event/service/spi/EventListenerGroup.isEmpty:()Z
      14: ifeq          18
      17: return
      18: new           #53                 // class org/hibernate/event/spi/PostCollectionUpdateEvent
      21: dup
      22: aload_0
      23: invokevirtual #5                  // Method getPersister:()Lorg/hibernate/persister/collection/CollectionPersister;
      26: aload_0
      27: invokevirtual #6                  // Method getCollection:()Lorg/hibernate/collection/spi/PersistentCollection;
      30: aload_0
      31: invokevirtual #44                 // Method eventSource:()Lorg/hibernate/event/spi/EventSource;
      34: invokespecial #54                 // Method org/hibernate/event/spi/PostCollectionUpdateEvent."<init>":(Lorg/hibernate/persister/collection/CollectionPersister;Lorg/hibernate/collection/spi/PersistentCollection;Lorg/hibernate/event/spi/EventSource;)V
      37: astore_2
      38: aload_1
      39: invokeinterface #46,  1           // InterfaceMethod org/hibernate/event/service/spi/EventListenerGroup.listeners:()Ljava/lang/Iterable;
      44: invokeinterface #47,  1           // InterfaceMethod java/lang/Iterable.iterator:()Ljava/util/Iterator;
      49: astore_3
      50: aload_3
      51: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      56: ifeq          81
      59: aload_3
      60: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      65: checkcast     #55                 // class org/hibernate/event/spi/PostCollectionUpdateEventListener
      68: astore        4
      70: aload         4
      72: aload_2
      73: invokeinterface #56,  2           // InterfaceMethod org/hibernate/event/spi/PostCollectionUpdateEventListener.onPostUpdateCollection:(Lorg/hibernate/event/spi/PostCollectionUpdateEvent;)V
      78: goto          50
      81: return
}

Compiled from "TransactionImpl.java"
public class org.hibernate.jpa.internal.TransactionImpl implements javax.persistence.EntityTransaction {
  private org.hibernate.jpa.spi.HibernateEntityManagerImplementor entityManager;

  private org.hibernate.Transaction tx;

  private boolean rollbackOnly;

  public org.hibernate.jpa.internal.TransactionImpl(org.hibernate.jpa.spi.AbstractEntityManagerImpl);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
       9: return

  private org.hibernate.Session getSession();
    Code:
       0: aload_0
       1: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
       4: invokeinterface #3,  1            // InterfaceMethod org/hibernate/jpa/spi/HibernateEntityManagerImplementor.getSession:()Lorg/hibernate/Session;
       9: areturn

  public void begin();
    Code:
       0: aload_0
       1: iconst_0
       2: putfield      #4                  // Field rollbackOnly:Z
       5: aload_0
       6: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
       9: ifnull        37
      12: aload_0
      13: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      16: invokeinterface #6,  1            // InterfaceMethod org/hibernate/Transaction.getStatus:()Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      21: getstatic     #7                  // Field org/hibernate/resource/transaction/spi/TransactionStatus.ACTIVE:Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      24: if_acmpne     37
      27: new           #8                  // class java/lang/IllegalStateException
      30: dup
      31: ldc           #9                  // String Transaction already active
      33: invokespecial #10                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      36: athrow
      37: aload_0
      38: aload_0
      39: invokespecial #11                 // Method getSession:()Lorg/hibernate/Session;
      42: invokeinterface #12,  1           // InterfaceMethod org/hibernate/Session.beginTransaction:()Lorg/hibernate/Transaction;
      47: putfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      50: goto          64
      53: astore_1
      54: aload_0
      55: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
      58: aload_1
      59: invokeinterface #14,  2           // InterfaceMethod org/hibernate/jpa/spi/HibernateEntityManagerImplementor.throwPersistenceException:(Lorg/hibernate/HibernateException;)V
      64: return
    Exception table:
       from    to  target type
           0    50    53   Class org/hibernate/HibernateException

  public void commit();
    Code:
       0: aload_0
       1: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
       4: ifnull        22
       7: aload_0
       8: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      11: invokeinterface #6,  1            // InterfaceMethod org/hibernate/Transaction.getStatus:()Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      16: getstatic     #7                  // Field org/hibernate/resource/transaction/spi/TransactionStatus.ACTIVE:Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      19: if_acmpeq     32
      22: new           #8                  // class java/lang/IllegalStateException
      25: dup
      26: ldc           #15                 // String Transaction not active
      28: invokespecial #10                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      31: athrow
      32: aload_0
      33: getfield      #4                  // Field rollbackOnly:Z
      36: ifeq          58
      39: aload_0
      40: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      43: invokeinterface #16,  1           // InterfaceMethod org/hibernate/Transaction.rollback:()V
      48: new           #17                 // class javax/persistence/RollbackException
      51: dup
      52: ldc           #18                 // String Transaction marked as rollbackOnly
      54: invokespecial #19                 // Method javax/persistence/RollbackException."<init>":(Ljava/lang/String;)V
      57: athrow
      58: aload_0
      59: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      62: invokeinterface #20,  1           // InterfaceMethod org/hibernate/Transaction.commit:()V
      67: aload_0
      68: iconst_0
      69: putfield      #4                  // Field rollbackOnly:Z
      72: goto          181
      75: astore_1
      76: aload_1
      77: instanceof    #22                 // class javax/persistence/PersistenceException
      80: ifeq          121
      83: aload_1
      84: invokevirtual #23                 // Method java/lang/Exception.getCause:()Ljava/lang/Throwable;
      87: instanceof    #13                 // class org/hibernate/HibernateException
      90: ifeq          113
      93: aload_0
      94: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
      97: aload_1
      98: invokevirtual #23                 // Method java/lang/Exception.getCause:()Ljava/lang/Throwable;
     101: checkcast     #13                 // class org/hibernate/HibernateException
     104: invokeinterface #24,  2           // InterfaceMethod org/hibernate/jpa/spi/HibernateEntityManagerImplementor.convert:(Lorg/hibernate/HibernateException;)Ljava/lang/RuntimeException;
     109: astore_2
     110: goto          147
     113: aload_1
     114: invokevirtual #23                 // Method java/lang/Exception.getCause:()Ljava/lang/Throwable;
     117: astore_2
     118: goto          147
     121: aload_1
     122: instanceof    #13                 // class org/hibernate/HibernateException
     125: ifeq          145
     128: aload_0
     129: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
     132: aload_1
     133: checkcast     #13                 // class org/hibernate/HibernateException
     136: invokeinterface #24,  2           // InterfaceMethod org/hibernate/jpa/spi/HibernateEntityManagerImplementor.convert:(Lorg/hibernate/HibernateException;)Ljava/lang/RuntimeException;
     141: astore_2
     142: goto          147
     145: aload_1
     146: astore_2
     147: aload_0
     148: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
     151: invokeinterface #16,  1           // InterfaceMethod org/hibernate/Transaction.rollback:()V
     156: goto          160
     159: astore_3
     160: new           #17                 // class javax/persistence/RollbackException
     163: dup
     164: ldc           #25                 // String Error while committing the transaction
     166: aload_2
     167: invokespecial #26                 // Method javax/persistence/RollbackException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     170: athrow
     171: astore        4
     173: aload_0
     174: iconst_0
     175: putfield      #4                  // Field rollbackOnly:Z
     178: aload         4
     180: athrow
     181: return
    Exception table:
       from    to  target type
          58    67    75   Class java/lang/Exception
         147   156   159   Class java/lang/Exception
          58    67   171   any
          75   173   171   any

  public void rollback();
    Code:
       0: aload_0
       1: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
       4: ifnull        22
       7: aload_0
       8: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      11: invokeinterface #6,  1            // InterfaceMethod org/hibernate/Transaction.getStatus:()Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      16: getstatic     #7                  // Field org/hibernate/resource/transaction/spi/TransactionStatus.ACTIVE:Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      19: if_acmpeq     32
      22: new           #8                  // class java/lang/IllegalStateException
      25: dup
      26: ldc           #15                 // String Transaction not active
      28: invokespecial #10                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      31: athrow
      32: aload_0
      33: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      36: invokeinterface #16,  1           // InterfaceMethod org/hibernate/Transaction.rollback:()V
      41: aload_0
      42: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
      45: ifnull        72
      48: aload_0
      49: invokespecial #11                 // Method getSession:()Lorg/hibernate/Session;
      52: astore_1
      53: aload_1
      54: ifnull        72
      57: aload_1
      58: invokeinterface #27,  1           // InterfaceMethod org/hibernate/Session.isOpen:()Z
      63: ifeq          72
      66: aload_1
      67: invokeinterface #28,  1           // InterfaceMethod org/hibernate/Session.clear:()V
      72: goto          76
      75: astore_1
      76: aload_0
      77: iconst_0
      78: putfield      #4                  // Field rollbackOnly:Z
      81: goto          139
      84: astore_1
      85: new           #22                 // class javax/persistence/PersistenceException
      88: dup
      89: ldc           #30                 // String unexpected error when rollbacking
      91: aload_1
      92: invokespecial #31                 // Method javax/persistence/PersistenceException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      95: athrow
      96: astore_2
      97: aload_0
      98: getfield      #2                  // Field entityManager:Lorg/hibernate/jpa/spi/HibernateEntityManagerImplementor;
     101: ifnull        128
     104: aload_0
     105: invokespecial #11                 // Method getSession:()Lorg/hibernate/Session;
     108: astore_3
     109: aload_3
     110: ifnull        128
     113: aload_3
     114: invokeinterface #27,  1           // InterfaceMethod org/hibernate/Session.isOpen:()Z
     119: ifeq          128
     122: aload_3
     123: invokeinterface #28,  1           // InterfaceMethod org/hibernate/Session.clear:()V
     128: goto          132
     131: astore_3
     132: aload_0
     133: iconst_0
     134: putfield      #4                  // Field rollbackOnly:Z
     137: aload_2
     138: athrow
     139: return
    Exception table:
       from    to  target type
          41    72    75   Class java/lang/Throwable
          32    41    84   Class java/lang/Exception
          32    41    96   any
          97   128   131   Class java/lang/Throwable
          84    97    96   any

  public void setRollbackOnly();
    Code:
       0: aload_0
       1: invokevirtual #32                 // Method isActive:()Z
       4: ifne          17
       7: new           #8                  // class java/lang/IllegalStateException
      10: dup
      11: ldc           #15                 // String Transaction not active
      13: invokespecial #10                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: iconst_1
      19: putfield      #4                  // Field rollbackOnly:Z
      22: return

  public boolean getRollbackOnly();
    Code:
       0: aload_0
       1: invokevirtual #32                 // Method isActive:()Z
       4: ifne          17
       7: new           #8                  // class java/lang/IllegalStateException
      10: dup
      11: ldc           #15                 // String Transaction not active
      13: invokespecial #10                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: getfield      #4                  // Field rollbackOnly:Z
      21: ireturn

  public boolean isActive();
    Code:
       0: aload_0
       1: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
       4: ifnull        26
       7: aload_0
       8: getfield      #5                  // Field tx:Lorg/hibernate/Transaction;
      11: invokeinterface #6,  1            // InterfaceMethod org/hibernate/Transaction.getStatus:()Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      16: getstatic     #7                  // Field org/hibernate/resource/transaction/spi/TransactionStatus.ACTIVE:Lorg/hibernate/resource/transaction/spi/TransactionStatus;
      19: if_acmpne     26
      22: iconst_1
      23: goto          27
      26: iconst_0
      27: ireturn
      28: astore_1
      29: new           #22                 // class javax/persistence/PersistenceException
      32: dup
      33: ldc           #34                 // String unexpected error when checking transaction status
      35: aload_1
      36: invokespecial #31                 // Method javax/persistence/PersistenceException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      39: athrow
    Exception table:
       from    to  target type
           0    27    28   Class java/lang/RuntimeException
}

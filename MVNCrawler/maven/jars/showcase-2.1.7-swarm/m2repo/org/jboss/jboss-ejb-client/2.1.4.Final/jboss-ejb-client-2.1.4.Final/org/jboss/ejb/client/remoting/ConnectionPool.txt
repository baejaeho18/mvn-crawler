Compiled from "ConnectionPool.java"
class org.jboss.ejb.client.remoting.ConnectionPool {
  private static final org.jboss.logging.Logger logger;

  static final org.jboss.ejb.client.remoting.ConnectionPool INSTANCE;

  static final java.lang.Thread SHUTDOWN_TASK;

  private final java.util.concurrent.ConcurrentMap<org.jboss.ejb.client.remoting.ConnectionPool$CacheKey, org.jboss.ejb.client.remoting.ConnectionPool$PooledConnection> cache;

  private org.jboss.ejb.client.remoting.ConnectionPool();
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #4                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: invokespecial #5                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      12: putfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      15: return

  synchronized org.jboss.remoting3.Connection getConnection(org.jboss.remoting3.Endpoint, java.lang.String, java.lang.String, int, org.jboss.ejb.client.EJBClientConfiguration$CommonConnectionCreationConfiguration) throws java.io.IOException;
    Code:
       0: new           #6                  // class org/jboss/ejb/client/remoting/ConnectionPool$CacheKey
       3: dup
       4: aload_1
       5: aload         5
       7: invokeinterface #7,  1            // InterfaceMethod org/jboss/ejb/client/EJBClientConfiguration$CommonConnectionCreationConfiguration.getCallbackHandler:()Ljavax/security/auth/callback/CallbackHandler;
      12: aload         5
      14: invokeinterface #8,  1            // InterfaceMethod org/jboss/ejb/client/EJBClientConfiguration$CommonConnectionCreationConfiguration.getConnectionCreationOptions:()Lorg/xnio/OptionMap;
      19: aload_3
      20: iload         4
      22: aload_2
      23: aconst_null
      24: invokespecial #9                  // Method org/jboss/ejb/client/remoting/ConnectionPool$CacheKey."<init>":(Lorg/jboss/remoting3/Endpoint;Ljavax/security/auth/callback/CallbackHandler;Lorg/xnio/OptionMap;Ljava/lang/String;ILjava/lang/String;Lorg/jboss/ejb/client/remoting/ConnectionPool$1;)V
      27: astore        6
      29: aload_0
      30: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      33: aload         6
      35: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      40: checkcast     #11                 // class org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection
      43: astore        7
      45: aload         7
      47: ifnonnull     142
      50: aload_1
      51: aload_2
      52: aload_3
      53: iload         4
      55: aconst_null
      56: aload         5
      58: invokeinterface #8,  1            // InterfaceMethod org/jboss/ejb/client/EJBClientConfiguration$CommonConnectionCreationConfiguration.getConnectionCreationOptions:()Lorg/xnio/OptionMap;
      63: aload         5
      65: invokeinterface #7,  1            // InterfaceMethod org/jboss/ejb/client/EJBClientConfiguration$CommonConnectionCreationConfiguration.getCallbackHandler:()Ljavax/security/auth/callback/CallbackHandler;
      70: aconst_null
      71: invokestatic  #12                 // Method org/jboss/ejb/client/remoting/NetworkUtil.connect:(Lorg/jboss/remoting3/Endpoint;Ljava/lang/String;Ljava/lang/String;ILjava/net/InetSocketAddress;Lorg/xnio/OptionMap;Ljavax/security/auth/callback/CallbackHandler;Ljavax/net/ssl/SSLContext;)Lorg/xnio/IoFuture;
      74: astore        8
      76: aload         8
      78: aload         5
      80: invokeinterface #13,  1           // InterfaceMethod org/jboss/ejb/client/EJBClientConfiguration$CommonConnectionCreationConfiguration.getConnectionTimeout:()J
      85: getstatic     #14                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      88: invokestatic  #15                 // Method org/jboss/ejb/client/remoting/IoFutureHelper.get:(Lorg/xnio/IoFuture;JLjava/util/concurrent/TimeUnit;)Ljava/lang/Object;
      91: checkcast     #16                 // class org/jboss/remoting3/Connection
      94: astore        9
      96: aload         9
      98: new           #17                 // class org/jboss/ejb/client/remoting/ConnectionPool$CacheEntryRemovalHandler
     101: dup
     102: aload_0
     103: aload         6
     105: invokespecial #18                 // Method org/jboss/ejb/client/remoting/ConnectionPool$CacheEntryRemovalHandler."<init>":(Lorg/jboss/ejb/client/remoting/ConnectionPool;Lorg/jboss/ejb/client/remoting/ConnectionPool$CacheKey;)V
     108: invokeinterface #19,  2           // InterfaceMethod org/jboss/remoting3/Connection.addCloseHandler:(Lorg/jboss/remoting3/CloseHandler;)Lorg/jboss/remoting3/HandleableCloseable$Key;
     113: pop
     114: new           #11                 // class org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection
     117: dup
     118: aload_0
     119: aload         6
     121: aload         9
     123: invokespecial #20                 // Method org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection."<init>":(Lorg/jboss/ejb/client/remoting/ConnectionPool;Lorg/jboss/ejb/client/remoting/ConnectionPool$CacheKey;Lorg/jboss/remoting3/Connection;)V
     126: astore        7
     128: aload_0
     129: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
     132: aload         6
     134: aload         7
     136: invokeinterface #21,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     141: pop
     142: aload         7
     144: invokestatic  #22                 // Method org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection.access$100:(Lorg/jboss/ejb/client/remoting/ConnectionPool$PooledConnection;)Ljava/util/concurrent/atomic/AtomicInteger;
     147: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
     150: pop
     151: aload         7
     153: areturn

  synchronized void release(org.jboss.ejb.client.remoting.ConnectionPool$CacheKey, boolean);
    Code:
       0: aload_0
       1: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection
      13: astore_3
      14: aload_3
      15: ifnonnull     19
      18: return
      19: aload_3
      20: invokestatic  #22                 // Method org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection.access$100:(Lorg/jboss/ejb/client/remoting/ConnectionPool$PooledConnection;)Ljava/util/concurrent/atomic/AtomicInteger;
      23: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicInteger.decrementAndGet:()I
      26: ifne          84
      29: aload_3
      30: invokestatic  #25                 // Method org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection.access$200:(Lorg/jboss/ejb/client/remoting/ConnectionPool$PooledConnection;)Lorg/jboss/remoting3/Connection;
      33: astore        4
      35: iload_2
      36: ifeq          49
      39: aload         4
      41: invokeinterface #26,  1           // InterfaceMethod org/jboss/remoting3/Connection.closeAsync:()V
      46: goto          54
      49: aload         4
      51: invokestatic  #27                 // Method safeClose:(Ljava/io/Closeable;)V
      54: aload_0
      55: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      58: aload_1
      59: invokeinterface #28,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      64: pop
      65: goto          84
      68: astore        5
      70: aload_0
      71: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      74: aload_1
      75: invokeinterface #28,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      80: pop
      81: aload         5
      83: athrow
      84: return
    Exception table:
       from    to  target type
          29    54    68   any
          68    70    68   any

  private synchronized void shutdown();
    Code:
       0: aload_0
       1: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: invokeinterface #29,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.entrySet:()Ljava/util/Set;
       9: invokeinterface #30,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      14: astore_1
      15: aload_1
      16: invokeinterface #31,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          54
      24: aload_1
      25: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #33                 // class java/util/Map$Entry
      33: astore_2
      34: aload_2
      35: invokeinterface #34,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      40: checkcast     #11                 // class org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection
      43: invokestatic  #25                 // Method org/jboss/ejb/client/remoting/ConnectionPool$PooledConnection.access$200:(Lorg/jboss/ejb/client/remoting/ConnectionPool$PooledConnection;)Lorg/jboss/remoting3/Connection;
      46: astore_3
      47: aload_3
      48: invokestatic  #27                 // Method safeClose:(Ljava/io/Closeable;)V
      51: goto          15
      54: aload_0
      55: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
      58: invokeinterface #35,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.clear:()V
      63: invokestatic  #36                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      66: invokevirtual #37                 // Method java/lang/Thread.getId:()J
      69: getstatic     #38                 // Field SHUTDOWN_TASK:Ljava/lang/Thread;
      72: invokevirtual #37                 // Method java/lang/Thread.getId:()J
      75: lcmp
      76: ifeq          86
      79: getstatic     #38                 // Field SHUTDOWN_TASK:Ljava/lang/Thread;
      82: invokestatic  #39                 // Method org/jboss/ejb/client/remoting/SecurityActions.removeShutdownHook:(Ljava/lang/Thread;)Ljava/lang/Boolean;
      85: pop
      86: return

  private static void safeClose(java.io.Closeable);
    Code:
       0: aload_0
       1: invokeinterface #40,  1           // InterfaceMethod java/io/Closeable.close:()V
       6: goto          20
       9: astore_1
      10: getstatic     #42                 // Field logger:Lorg/jboss/logging/Logger;
      13: aload_1
      14: ldc           #43                 // String Failed to close %s
      16: aload_0
      17: invokevirtual #44                 // Method org/jboss/logging/Logger.debugf:(Ljava/lang/Throwable;Ljava/lang/String;Ljava/lang/Object;)V
      20: return
    Exception table:
       from    to  target type
           0     6     9   Class java/lang/Throwable

  static void access$300(org.jboss.ejb.client.remoting.ConnectionPool);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method shutdown:()V
       4: return

  static java.util.concurrent.ConcurrentMap access$400(org.jboss.ejb.client.remoting.ConnectionPool);
    Code:
       0: aload_0
       1: getfield      #1                  // Field cache:Ljava/util/concurrent/ConcurrentMap;
       4: areturn

  static {};
    Code:
       0: ldc_w         #45                 // class org/jboss/ejb/client/remoting/ConnectionPool
       3: invokestatic  #46                 // Method org/jboss/logging/Logger.getLogger:(Ljava/lang/Class;)Lorg/jboss/logging/Logger;
       6: putstatic     #42                 // Field logger:Lorg/jboss/logging/Logger;
       9: new           #45                 // class org/jboss/ejb/client/remoting/ConnectionPool
      12: dup
      13: invokespecial #47                 // Method "<init>":()V
      16: putstatic     #48                 // Field INSTANCE:Lorg/jboss/ejb/client/remoting/ConnectionPool;
      19: new           #49                 // class java/lang/Thread
      22: dup
      23: new           #50                 // class org/jboss/ejb/client/remoting/ConnectionPool$ShutdownTask
      26: dup
      27: getstatic     #48                 // Field INSTANCE:Lorg/jboss/ejb/client/remoting/ConnectionPool;
      30: invokespecial #51                 // Method org/jboss/ejb/client/remoting/ConnectionPool$ShutdownTask."<init>":(Lorg/jboss/ejb/client/remoting/ConnectionPool;)V
      33: invokespecial #52                 // Method java/lang/Thread."<init>":(Ljava/lang/Runnable;)V
      36: putstatic     #38                 // Field SHUTDOWN_TASK:Ljava/lang/Thread;
      39: getstatic     #38                 // Field SHUTDOWN_TASK:Ljava/lang/Thread;
      42: invokestatic  #53                 // Method org/jboss/ejb/client/remoting/SecurityActions.addShutdownHook:(Ljava/lang/Thread;)V
      45: return
}

Compiled from "PersistenceRecord.java"
public class com.arjuna.ats.internal.arjuna.abstractrecords.PersistenceRecord extends com.arjuna.ats.internal.arjuna.abstractrecords.RecoveryRecord {
  public static final int MAX_OBJECT_SIZE;

  protected boolean shadowMade;

  protected com.arjuna.ats.arjuna.objectstore.ParticipantStore targetParticipantStore;

  protected com.arjuna.ats.arjuna.state.OutputObjectState topLevelState;

  protected static final boolean classicPrepare;

  private static final boolean writeOptimisation;

  public com.arjuna.ats.internal.arjuna.abstractrecords.PersistenceRecord(com.arjuna.ats.arjuna.state.OutputObjectState, com.arjuna.ats.arjuna.objectstore.ParticipantStore, com.arjuna.ats.arjuna.StateManager);
    Code:
       0: aload_0
       1: aload_1
       2: aload_3
       3: invokespecial #1                  // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord."<init>":(Lcom/arjuna/ats/arjuna/state/OutputObjectState;Lcom/arjuna/ats/arjuna/StateManager;)V
       6: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       9: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
      12: ifeq          57
      15: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      18: new           #4                  // class java/lang/StringBuilder
      21: dup
      22: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      25: ldc           #6                  // String PersistenceRecord::PersistenceRecord(
      27: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: aload_1
      31: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      34: ldc           #9                  // String ,
      36: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      39: aload_3
      40: invokevirtual #10                 // Method com/arjuna/ats/arjuna/StateManager.get_uid:()Lcom/arjuna/ats/arjuna/common/Uid;
      43: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      46: ldc           #11                 // String )
      48: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      51: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      54: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      57: aload_0
      58: iconst_0
      59: putfield      #14                 // Field shadowMade:Z
      62: aload_0
      63: aload_2
      64: putfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      67: aload_0
      68: aconst_null
      69: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      72: return

  public int typeIs();
    Code:
       0: bipush        111
       2: ireturn

  public int topLevelAbort();
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #18                 // String PersistenceRecord::topLevelAbort() for
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: aconst_null
      38: astore_1
      39: aconst_null
      40: astore_2
      41: aload_0
      42: getfield      #14                 // Field shadowMade:Z
      45: ifeq          61
      48: aload_0
      49: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      52: astore_1
      53: aload_0
      54: invokevirtual #20                 // Method getTypeOfObject:()Ljava/lang/String;
      57: astore_2
      58: goto          89
      61: aload_0
      62: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      65: ifnonnull     73
      68: aload_0
      69: invokevirtual #21                 // Method nestedAbort:()I
      72: ireturn
      73: aload_0
      74: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      77: invokevirtual #22                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.stateUid:()Lcom/arjuna/ats/arjuna/common/Uid;
      80: astore_1
      81: aload_0
      82: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      85: invokevirtual #23                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.type:()Ljava/lang/String;
      88: astore_2
      89: aload_0
      90: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      93: aload_1
      94: aload_2
      95: invokeinterface #24,  3           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.remove_uncommitted:(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;)Z
     100: ifne          114
     103: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     106: invokeinterface #26,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_19:()V
     111: bipush        8
     113: ireturn
     114: goto          130
     117: astore_3
     118: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     121: aload_3
     122: invokeinterface #29,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_20:(Ljava/lang/Throwable;)V
     127: bipush        8
     129: ireturn
     130: aload_0
     131: invokevirtual #21                 // Method nestedAbort:()I
     134: ireturn
    Exception table:
       from    to  target type
          89   113   117   Class com/arjuna/ats/arjuna/exceptions/ObjectStoreException

  public int topLevelCommit();
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          49
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #30                 // String PersistenceRecord::topLevelCommit() : About to commit state, uid =
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: ldc           #31                 // String , ObjType =
      33: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      36: aload_0
      37: invokevirtual #20                 // Method getTypeOfObject:()Ljava/lang/String;
      40: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      43: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      46: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      49: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      52: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
      55: ifeq          127
      58: aload_0
      59: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      62: ifnull        119
      65: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      68: new           #4                  // class java/lang/StringBuilder
      71: dup
      72: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      75: ldc           #32                 // String , store =
      77: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      80: aload_0
      81: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      84: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      87: ldc           #33                 // String (
      89: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      92: aload_0
      93: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      96: invokevirtual #34                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      99: invokevirtual #35                 // Method java/lang/Class.getCanonicalName:()Ljava/lang/String;
     102: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     105: ldc           #11                 // String )
     107: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     110: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     113: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
     116: goto          127
     119: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     122: ldc           #36                 // String
     124: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
     127: iconst_0
     128: istore_1
     129: aload_0
     130: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     133: ifnull        238
     136: aload_0
     137: getfield      #14                 // Field shadowMade:Z
     140: ifeq          180
     143: aload_0
     144: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     147: aload_0
     148: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
     151: aload_0
     152: invokespecial #37                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.getTypeOfObject:()Ljava/lang/String;
     155: invokeinterface #38,  3           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.commit_state:(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;)Z
     160: istore_1
     161: iload_1
     162: ifne          220
     165: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     168: aload_0
     169: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
     172: invokeinterface #39,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_2:(Lcom/arjuna/ats/arjuna/common/Uid;)V
     177: goto          220
     180: aload_0
     181: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
     184: ifnull        212
     187: aload_0
     188: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     191: aload_0
     192: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
     195: aload_0
     196: invokespecial #37                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.getTypeOfObject:()Ljava/lang/String;
     199: aload_0
     200: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
     203: invokeinterface #40,  4           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.write_committed:(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;Lcom/arjuna/ats/arjuna/state/OutputObjectState;)Z
     208: istore_1
     209: goto          220
     212: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     215: invokeinterface #41,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_3:()V
     220: goto          246
     223: astore_2
     224: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     227: aload_2
     228: invokeinterface #42,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_4:(Ljava/lang/Throwable;)V
     233: iconst_0
     234: istore_1
     235: goto          246
     238: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     241: invokeinterface #43,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_5:()V
     246: iload_1
     247: ifne          258
     250: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     253: invokeinterface #44,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_6:()V
     258: aload_0
     259: iconst_1
     260: invokespecial #45                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.forgetAction:(Z)V
     263: iload_1
     264: ifeq          272
     267: bipush        7
     269: goto          274
     272: bipush        8
     274: ireturn
    Exception table:
       from    to  target type
         136   220   223   Class com/arjuna/ats/arjuna/exceptions/ObjectStoreException

  public int topLevelPrepare();
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #46                 // String PersistenceRecord::topLevelPrepare() for
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_1
      38: istore_1
      39: aload_0
      40: getfield      #47                 // Field com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.objectAddr:Lcom/arjuna/ats/arjuna/StateManager;
      43: astore_2
      44: aload_2
      45: ifnull        231
      48: aload_0
      49: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      52: ifnull        231
      55: aload_0
      56: new           #48                 // class com/arjuna/ats/arjuna/state/OutputObjectState
      59: dup
      60: aload_2
      61: invokevirtual #10                 // Method com/arjuna/ats/arjuna/StateManager.get_uid:()Lcom/arjuna/ats/arjuna/common/Uid;
      64: aload_2
      65: invokevirtual #49                 // Method com/arjuna/ats/arjuna/StateManager.type:()Ljava/lang/String;
      68: invokespecial #50                 // Method com/arjuna/ats/arjuna/state/OutputObjectState."<init>":(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;)V
      71: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      74: getstatic     #51                 // Field writeOptimisation:Z
      77: ifeq          188
      80: aload_0
      81: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      84: invokeinterface #52,  1           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.fullCommitNeeded:()Z
      89: ifne          188
      92: aload_2
      93: aload_0
      94: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      97: iconst_1
      98: invokevirtual #54                 // Method com/arjuna/ats/arjuna/StateManager.save_state:(Lcom/arjuna/ats/arjuna/state/OutputObjectState;I)Z
     101: ifeq          188
     104: aload_0
     105: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
     108: invokevirtual #55                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.size:()I
     111: sipush        4096
     114: if_icmpgt     188
     117: getstatic     #57                 // Field classicPrepare:Z
     120: ifeq          183
     123: new           #48                 // class com/arjuna/ats/arjuna/state/OutputObjectState
     126: dup
     127: invokestatic  #58                 // Method com/arjuna/ats/arjuna/common/Uid.nullUid:()Lcom/arjuna/ats/arjuna/common/Uid;
     130: aconst_null
     131: invokespecial #50                 // Method com/arjuna/ats/arjuna/state/OutputObjectState."<init>":(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;)V
     134: astore_3
     135: aload_0
     136: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     139: aload_2
     140: invokevirtual #10                 // Method com/arjuna/ats/arjuna/StateManager.get_uid:()Lcom/arjuna/ats/arjuna/common/Uid;
     143: aload_2
     144: invokevirtual #49                 // Method com/arjuna/ats/arjuna/StateManager.type:()Ljava/lang/String;
     147: aload_3
     148: invokeinterface #59,  4           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.write_uncommitted:(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;Lcom/arjuna/ats/arjuna/state/OutputObjectState;)Z
     153: ifeq          161
     156: iconst_0
     157: istore_1
     158: goto          163
     161: iconst_1
     162: istore_1
     163: goto          178
     166: astore        4
     168: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     171: aload         4
     173: invokeinterface #60,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_21:(Ljava/lang/Throwable;)V
     178: aconst_null
     179: astore_3
     180: goto          239
     183: iconst_0
     184: istore_1
     185: goto          239
     188: aload_2
     189: aload_0
     190: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     193: invokeinterface #61,  1           // InterfaceMethod com/arjuna/ats/arjuna/objectstore/ParticipantStore.getStoreName:()Ljava/lang/String;
     198: iconst_0
     199: invokevirtual #62                 // Method com/arjuna/ats/arjuna/StateManager.deactivate:(Ljava/lang/String;Z)Z
     202: ifeq          215
     205: aload_0
     206: iconst_1
     207: putfield      #14                 // Field shadowMade:Z
     210: iconst_0
     211: istore_1
     212: goto          239
     215: aload_0
     216: aconst_null
     217: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
     220: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     223: invokeinterface #63,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_7:()V
     228: goto          239
     231: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     234: invokeinterface #64,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_8:()V
     239: iload_1
     240: ireturn
    Exception table:
       from    to  target type
         135   163   166   Class com/arjuna/ats/arjuna/exceptions/ObjectStoreException

  public int topLevelCleanup();
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #65                 // String PersistenceRecord::topLevelCleanup() for
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: bipush        7
      39: ireturn

  public boolean doSave();
    Code:
       0: iconst_1
       1: ireturn

  public boolean restore_state(com.arjuna.ats.arjuna.state.InputObjectState, int);
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #66                 // String PersistenceRecord::restore_state() for
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_0
      38: istore_3
      39: aload_0
      40: aconst_null
      41: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      44: aload_0
      45: aload_1
      46: invokevirtual #67                 // Method com/arjuna/ats/arjuna/state/InputObjectState.unpackBoolean:()Z
      49: putfield      #14                 // Field shadowMade:Z
      52: aload_0
      53: getfield      #14                 // Field shadowMade:Z
      56: ifne          82
      59: aload_0
      60: new           #48                 // class com/arjuna/ats/arjuna/state/OutputObjectState
      63: dup
      64: aload_1
      65: invokespecial #68                 // Method com/arjuna/ats/arjuna/state/OutputObjectState."<init>":(Lcom/arjuna/ats/arjuna/state/InputObjectState;)V
      68: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      71: aload_0
      72: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      75: invokevirtual #69                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.valid:()Z
      78: istore_3
      79: goto          84
      82: iconst_1
      83: istore_3
      84: iload_3
      85: ifeq          101
      88: aload_0
      89: aload_1
      90: iload_2
      91: invokespecial #70                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.restore_state:(Lcom/arjuna/ats/arjuna/state/InputObjectState;I)Z
      94: ifeq          101
      97: iconst_1
      98: goto          102
     101: iconst_0
     102: istore_3
     103: aload_0
     104: aload_0
     105: invokevirtual #71                 // Method getStore:()Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     108: putfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
     111: iload_3
     112: ireturn
     113: astore        4
     115: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     118: invokeinterface #73,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_10:()V
     123: iload_3
     124: ireturn
    Exception table:
       from    to  target type
          44   112   113   Class java/lang/Exception

  public boolean save_state(com.arjuna.ats.arjuna.state.OutputObjectState, int);
    Code:
       0: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #4                  // class java/lang/StringBuilder
      15: dup
      16: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #74                 // String PersistenceRecord::save_state() for
      21: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: invokevirtual #19                 // Method order:()Lcom/arjuna/ats/arjuna/common/Uid;
      28: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_1
      38: istore_3
      39: aload_0
      40: getfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      43: ifnull        115
      46: aload_1
      47: aload_0
      48: getfield      #14                 // Field shadowMade:Z
      51: invokevirtual #75                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.packBoolean:(Z)V
      54: aload_0
      55: getfield      #14                 // Field shadowMade:Z
      58: ifne          97
      61: aload_0
      62: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      65: ifnull        72
      68: iconst_1
      69: goto          73
      72: iconst_0
      73: istore_3
      74: iload_3
      75: ifeq          89
      78: aload_0
      79: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      82: aload_1
      83: invokevirtual #76                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.packInto:(Lcom/arjuna/ats/arjuna/state/OutputBuffer;)V
      86: goto          97
      89: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
      92: invokeinterface #77,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_14:()V
      97: goto          135
     100: astore        4
     102: iconst_0
     103: istore_3
     104: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     107: invokeinterface #79,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_15:()V
     112: goto          135
     115: getstatic     #25                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     118: invokeinterface #80,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_PersistenceRecord_16:()V
     123: aload_1
     124: aconst_null
     125: invokevirtual #81                 // Method com/arjuna/ats/arjuna/state/OutputObjectState.packString:(Ljava/lang/String;)V
     128: goto          135
     131: astore        4
     133: iconst_0
     134: istore_3
     135: iload_3
     136: ifeq          152
     139: aload_0
     140: aload_1
     141: iload_2
     142: invokespecial #82                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.save_state:(Lcom/arjuna/ats/arjuna/state/OutputObjectState;I)Z
     145: ifeq          152
     148: iconst_1
     149: goto          153
     152: iconst_0
     153: ireturn
    Exception table:
       from    to  target type
          46    97   100   Class java/io/IOException
         123   128   131   Class java/io/IOException

  public void print(java.io.PrintWriter);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #83                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.print:(Ljava/io/PrintWriter;)V
       5: aload_1
       6: new           #4                  // class java/lang/StringBuilder
       9: dup
      10: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      13: ldc           #84                 // String PersistenceRecord with state:\n
      15: invokevirtual #7                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      18: aload_0
      19: getfield      #85                 // Field com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord.state:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      22: invokevirtual #8                  // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      25: invokevirtual #12                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      28: invokevirtual #86                 // Method java/io/PrintWriter.println:(Ljava/lang/String;)V
      31: return

  public java.lang.String type();
    Code:
       0: ldc           #87                 // String /StateManager/AbstractRecord/RecoveryRecord/PersistenceRecord
       2: areturn

  public com.arjuna.ats.internal.arjuna.abstractrecords.PersistenceRecord();
    Code:
       0: aload_0
       1: invokespecial #88                 // Method com/arjuna/ats/internal/arjuna/abstractrecords/RecoveryRecord."<init>":()V
       4: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       7: invokevirtual #3                  // Method org/jboss/logging/Logger.isTraceEnabled:()Z
      10: ifeq          21
      13: getstatic     #2                  // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      16: ldc           #89                 // String PersistenceRecord::PersistenceRecord() - crash recovery constructor
      18: invokevirtual #13                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      21: aload_0
      22: iconst_0
      23: putfield      #14                 // Field shadowMade:Z
      26: aload_0
      27: aconst_null
      28: putfield      #15                 // Field targetParticipantStore:Lcom/arjuna/ats/arjuna/objectstore/ParticipantStore;
      31: aload_0
      32: aconst_null
      33: putfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
      36: return

  protected boolean shadowForced();
    Code:
       0: aload_0
       1: getfield      #16                 // Field topLevelState:Lcom/arjuna/ats/arjuna/state/OutputObjectState;
       4: ifnonnull     14
       7: aload_0
       8: iconst_1
       9: putfield      #14                 // Field shadowMade:Z
      12: iconst_1
      13: ireturn
      14: iconst_0
      15: ireturn

  static {};
    Code:
       0: invokestatic  #90                 // Method com/arjuna/ats/arjuna/common/arjPropertyManager.getCoordinatorEnvironmentBean:()Lcom/arjuna/ats/arjuna/common/CoordinatorEnvironmentBean;
       3: invokevirtual #91                 // Method com/arjuna/ats/arjuna/common/CoordinatorEnvironmentBean.isClassicPrepare:()Z
       6: putstatic     #57                 // Field classicPrepare:Z
       9: invokestatic  #90                 // Method com/arjuna/ats/arjuna/common/arjPropertyManager.getCoordinatorEnvironmentBean:()Lcom/arjuna/ats/arjuna/common/CoordinatorEnvironmentBean;
      12: invokevirtual #92                 // Method com/arjuna/ats/arjuna/common/CoordinatorEnvironmentBean.isWriteOptimisation:()Z
      15: putstatic     #51                 // Field writeOptimisation:Z
      18: return
}

Compiled from "WSBAHandler.java"
public class org.jboss.narayana.txframework.impl.handlers.wsba.WSBAHandler implements org.jboss.narayana.txframework.impl.handlers.ProtocolHandler {
  private org.jboss.narayana.txframework.impl.ServiceInvocationMeta serviceInvocationMeta;

  private com.arjuna.wst11.BAParticipantManager participantManager;

  private org.jboss.narayana.txframework.impl.Participant participant;

  org.jboss.narayana.txframework.api.management.WSBATxControl wsbaTxControl;

  public org.jboss.narayana.txframework.impl.handlers.wsba.WSBAHandler(org.jboss.narayana.txframework.impl.ServiceInvocationMeta, org.jboss.narayana.txframework.api.configuration.transaction.CompletionType) throws org.jboss.narayana.txframework.api.exception.TXFrameworkException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl
       8: dup
       9: invokespecial #3                  // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl."<init>":()V
      12: putfield      #4                  // Field wsbaTxControl:Lorg/jboss/narayana/txframework/api/management/WSBATxControl;
      15: aload_0
      16: aload_1
      17: putfield      #5                  // Field serviceInvocationMeta:Lorg/jboss/narayana/txframework/impl/ServiceInvocationMeta;
      20: invokestatic  #6                  // Method com/arjuna/mw/wst11/BusinessActivityManagerFactory.businessActivityManager:()Lcom/arjuna/mw/wst11/BusinessActivityManager;
      23: astore_3
      24: aload_2
      25: getstatic     #7                  // Field org/jboss/narayana/txframework/api/configuration/transaction/CompletionType.COORDINATOR:Lorg/jboss/narayana/txframework/api/configuration/transaction/CompletionType;
      28: if_acmpne     93
      31: new           #8                  // class org/jboss/narayana/txframework/impl/handlers/wsba/WSBACoordinatorCompletionParticipant
      34: dup
      35: aload_1
      36: new           #9                  // class java/util/HashMap
      39: dup
      40: invokespecial #10                 // Method java/util/HashMap."<init>":()V
      43: invokespecial #11                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBACoordinatorCompletionParticipant."<init>":(Lorg/jboss/narayana/txframework/impl/ServiceInvocationMeta;Ljava/util/Map;)V
      46: astore        4
      48: aload_0
      49: aload_3
      50: aload         4
      52: new           #12                 // class java/lang/StringBuilder
      55: dup
      56: invokespecial #13                 // Method java/lang/StringBuilder."<init>":()V
      59: aload_1
      60: invokevirtual #14                 // Method org/jboss/narayana/txframework/impl/ServiceInvocationMeta.getServiceClass:()Ljava/lang/Class;
      63: invokevirtual #15                 // Method java/lang/Class.getName:()Ljava/lang/String;
      66: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      69: invokestatic  #17                 // Method java/util/UUID.randomUUID:()Ljava/util/UUID;
      72: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      75: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      78: invokevirtual #20                 // Method com/arjuna/mw/wst11/BusinessActivityManager.enlistForBusinessAgreementWithCoordinatorCompletion:(Lcom/arjuna/wst/BusinessAgreementWithCoordinatorCompletionParticipant;Ljava/lang/String;)Lcom/arjuna/wst11/BAParticipantManager;
      81: putfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
      84: aload_0
      85: aload         4
      87: putfield      #22                 // Field participant:Lorg/jboss/narayana/txframework/impl/Participant;
      90: goto          152
      93: new           #23                 // class org/jboss/narayana/txframework/impl/handlers/wsba/WSBAParticipantCompletionParticipant
      96: dup
      97: aload_1
      98: new           #9                  // class java/util/HashMap
     101: dup
     102: invokespecial #10                 // Method java/util/HashMap."<init>":()V
     105: invokespecial #24                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBAParticipantCompletionParticipant."<init>":(Lorg/jboss/narayana/txframework/impl/ServiceInvocationMeta;Ljava/util/Map;)V
     108: astore        4
     110: aload_0
     111: aload_3
     112: aload         4
     114: new           #12                 // class java/lang/StringBuilder
     117: dup
     118: invokespecial #13                 // Method java/lang/StringBuilder."<init>":()V
     121: aload_1
     122: invokevirtual #14                 // Method org/jboss/narayana/txframework/impl/ServiceInvocationMeta.getServiceClass:()Ljava/lang/Class;
     125: invokevirtual #15                 // Method java/lang/Class.getName:()Ljava/lang/String;
     128: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     131: invokestatic  #17                 // Method java/util/UUID.randomUUID:()Ljava/util/UUID;
     134: invokevirtual #18                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     137: invokevirtual #19                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     140: invokevirtual #25                 // Method com/arjuna/mw/wst11/BusinessActivityManager.enlistForBusinessAgreementWithParticipantCompletion:(Lcom/arjuna/wst/BusinessAgreementWithParticipantCompletionParticipant;Ljava/lang/String;)Lcom/arjuna/wst11/BAParticipantManager;
     143: putfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
     146: aload_0
     147: aload         4
     149: putfield      #22                 // Field participant:Lorg/jboss/narayana/txframework/impl/Participant;
     152: goto          191
     155: astore_3
     156: new           #27                 // class org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException
     159: dup
     160: ldc           #28                 // String Transaction was not in a state in which participants can be registered
     162: aload_3
     163: invokespecial #29                 // Method org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     166: athrow
     167: astore_3
     168: new           #27                 // class org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException
     171: dup
     172: ldc           #31                 // String Can\'t register a participant as the transaction in unknown
     174: aload_3
     175: invokespecial #29                 // Method org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     178: athrow
     179: astore_3
     180: new           #27                 // class org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException
     183: dup
     184: ldc           #33                 // String A SystemException occurred when attempting to register a participant
     186: aload_3
     187: invokespecial #29                 // Method org/jboss/narayana/txframework/impl/handlers/ParticipantRegistrationException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     190: athrow
     191: aload_0
     192: getfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
     195: invokestatic  #34                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl.resume:(Lcom/arjuna/wst11/BAParticipantManager;)V
     198: return
    Exception table:
       from    to  target type
          20   152   155   Class com/arjuna/wst/WrongStateException
          20   152   167   Class com/arjuna/wst/UnknownTransactionException
          20   152   179   Class com/arjuna/wst/SystemException

  public void preInvocation() throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
       4: invokestatic  #34                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl.resume:(Lcom/arjuna/wst11/BAParticipantManager;)V
       7: aload_0
       8: getfield      #22                 // Field participant:Lorg/jboss/narayana/txframework/impl/Participant;
      11: invokevirtual #35                 // Method org/jboss/narayana/txframework/impl/Participant.resume:()V
      14: return

  public void notifySuccess() throws org.jboss.narayana.txframework.api.exception.TXFrameworkException;
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #5                  // Field serviceInvocationMeta:Lorg/jboss/narayana/txframework/impl/ServiceInvocationMeta;
       5: invokevirtual #36                 // Method org/jboss/narayana/txframework/impl/ServiceInvocationMeta.getServiceMethod:()Ljava/lang/reflect/Method;
       8: invokespecial #37                 // Method shouldComplete:(Ljava/lang/reflect/Method;)Z
      11: ifeq          75
      14: aload_0
      15: getfield      #4                  // Field wsbaTxControl:Lorg/jboss/narayana/txframework/api/management/WSBATxControl;
      18: checkcast     #2                  // class org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl
      21: invokevirtual #38                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl.isCannotComplete:()Z
      24: ifne          75
      27: aload_0
      28: getfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
      31: invokeinterface #39,  1           // InterfaceMethod com/arjuna/wst11/BAParticipantManager.completed:()V
      36: goto          75
      39: astore_1
      40: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      43: dup
      44: ldc           #41                 // String Error notifying completion on participant manager.
      46: aload_1
      47: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      50: athrow
      51: astore_1
      52: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      55: dup
      56: ldc           #41                 // String Error notifying completion on participant manager.
      58: aload_1
      59: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      62: athrow
      63: astore_1
      64: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      67: dup
      68: ldc           #41                 // String Error notifying completion on participant manager.
      70: aload_1
      71: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      74: athrow
      75: invokestatic  #43                 // Method org/jboss/narayana/txframework/impl/Participant.suspend:()V
      78: invokestatic  #44                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl.suspend:()V
      81: return
    Exception table:
       from    to  target type
          27    36    39   Class com/arjuna/wst/WrongStateException
          27    36    51   Class com/arjuna/wst/UnknownTransactionException
          27    36    63   Class com/arjuna/wst/SystemException

  public void notifyFailure() throws org.jboss.narayana.txframework.api.exception.TXFrameworkException;
    Code:
       0: aload_0
       1: getfield      #21                 // Field participantManager:Lcom/arjuna/wst11/BAParticipantManager;
       4: invokeinterface #45,  1           // InterfaceMethod com/arjuna/wst11/BAParticipantManager.cannotComplete:()V
       9: goto          48
      12: astore_1
      13: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      16: dup
      17: ldc           #46                 // String Error notifying cannotComplete on participant manager.
      19: aload_1
      20: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      23: athrow
      24: astore_1
      25: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      28: dup
      29: ldc           #46                 // String Error notifying cannotComplete on participant manager.
      31: aload_1
      32: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      35: athrow
      36: astore_1
      37: new           #40                 // class org/jboss/narayana/txframework/api/exception/TXFrameworkException
      40: dup
      41: ldc           #46                 // String Error notifying cannotComplete on participant manager.
      43: aload_1
      44: invokespecial #42                 // Method org/jboss/narayana/txframework/api/exception/TXFrameworkException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
      47: athrow
      48: invokestatic  #43                 // Method org/jboss/narayana/txframework/impl/Participant.suspend:()V
      51: invokestatic  #44                 // Method org/jboss/narayana/txframework/impl/handlers/wsba/WSBATxControlImpl.suspend:()V
      54: return
    Exception table:
       from    to  target type
           0     9    12   Class com/arjuna/wst/WrongStateException
           0     9    24   Class com/arjuna/wst/UnknownTransactionException
           0     9    36   Class com/arjuna/wst/SystemException

  private boolean shouldComplete(java.lang.reflect.Method);
    Code:
       0: aload_1
       1: ldc           #47                 // class org/jboss/narayana/txframework/api/annotation/lifecycle/ba/Completes
       3: invokevirtual #48                 // Method java/lang/reflect/Method.getAnnotation:(Ljava/lang/Class;)Ljava/lang/annotation/Annotation;
       6: checkcast     #47                 // class org/jboss/narayana/txframework/api/annotation/lifecycle/ba/Completes
       9: astore_2
      10: aload_2
      11: ifnull        18
      14: iconst_1
      15: goto          19
      18: iconst_0
      19: ireturn
}

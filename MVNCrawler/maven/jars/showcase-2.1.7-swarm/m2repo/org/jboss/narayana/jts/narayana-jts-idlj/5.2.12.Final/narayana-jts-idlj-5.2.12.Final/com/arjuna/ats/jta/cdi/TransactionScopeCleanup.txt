Compiled from "TransactionScopeCleanup.java"
public class com.arjuna.ats.jta.cdi.TransactionScopeCleanup<T> implements javax.transaction.Synchronization {
  private java.util.Set<com.arjuna.ats.jta.cdi.TransactionScopeCleanup$TransactionScopedBean> beans;

  private com.arjuna.ats.jta.cdi.TransactionContext context;

  private javax.transaction.Transaction transaction;

  public com.arjuna.ats.jta.cdi.TransactionScopeCleanup(com.arjuna.ats.jta.cdi.TransactionContext, javax.transaction.Transaction);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field context:Lcom/arjuna/ats/jta/cdi/TransactionContext;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field transaction:Ljavax/transaction/Transaction;
      14: aload_0
      15: new           #4                  // class java/util/concurrent/CopyOnWriteArraySet
      18: dup
      19: invokespecial #5                  // Method java/util/concurrent/CopyOnWriteArraySet."<init>":()V
      22: putfield      #6                  // Field beans:Ljava/util/Set;
      25: aload_2
      26: aload_0
      27: invokeinterface #7,  2            // InterfaceMethod javax/transaction/Transaction.registerSynchronization:(Ljavax/transaction/Synchronization;)V
      32: goto          69
      35: astore_3
      36: new           #9                  // class java/lang/RuntimeException
      39: dup
      40: getstatic     #10                 // Field com/arjuna/ats/jta/logging/jtaLogger.i18NLogger:Lcom/arjuna/ats/jta/logging/jtaI18NLogger;
      43: invokeinterface #11,  1           // InterfaceMethod com/arjuna/ats/jta/logging/jtaI18NLogger.get_transaction_arjunacore_syncwhenaborted:()Ljava/lang/String;
      48: invokespecial #12                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
      51: athrow
      52: astore_3
      53: new           #9                  // class java/lang/RuntimeException
      56: dup
      57: getstatic     #10                 // Field com/arjuna/ats/jta/logging/jtaLogger.i18NLogger:Lcom/arjuna/ats/jta/logging/jtaI18NLogger;
      60: invokeinterface #14,  1           // InterfaceMethod com/arjuna/ats/jta/logging/jtaI18NLogger.get_transaction_arjunacore_nullparam:()Ljava/lang/String;
      65: invokespecial #12                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
      68: athrow
      69: return
    Exception table:
       from    to  target type
          25    32    35   Class javax/transaction/RollbackException
          25    32    52   Class javax/transaction/SystemException

  public void registerBean(javax.enterprise.context.spi.Contextual<T>, javax.enterprise.context.spi.CreationalContext<T>, T);
    Code:
       0: aload_0
       1: getfield      #6                  // Field beans:Ljava/util/Set;
       4: new           #15                 // class com/arjuna/ats/jta/cdi/TransactionScopeCleanup$TransactionScopedBean
       7: dup
       8: aload_0
       9: aload_1
      10: aload_2
      11: aload_3
      12: aconst_null
      13: invokespecial #16                 // Method com/arjuna/ats/jta/cdi/TransactionScopeCleanup$TransactionScopedBean."<init>":(Lcom/arjuna/ats/jta/cdi/TransactionScopeCleanup;Ljavax/enterprise/context/spi/Contextual;Ljavax/enterprise/context/spi/CreationalContext;Ljava/lang/Object;Lcom/arjuna/ats/jta/cdi/TransactionScopeCleanup$1;)V
      16: invokeinterface #17,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      21: pop
      22: return

  public void beforeCompletion();
    Code:
       0: return

  public void afterCompletion(int);
    Code:
       0: aload_0
       1: getfield      #6                  // Field beans:Ljava/util/Set;
       4: invokeinterface #18,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
       9: astore_2
      10: aload_2
      11: invokeinterface #19,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          36
      19: aload_2
      20: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #15                 // class com/arjuna/ats/jta/cdi/TransactionScopeCleanup$TransactionScopedBean
      28: astore_3
      29: aload_3
      30: invokevirtual #21                 // Method com/arjuna/ats/jta/cdi/TransactionScopeCleanup$TransactionScopedBean.destroy:()V
      33: goto          10
      36: aload_0
      37: getfield      #2                  // Field context:Lcom/arjuna/ats/jta/cdi/TransactionContext;
      40: aload_0
      41: getfield      #3                  // Field transaction:Ljavax/transaction/Transaction;
      44: invokevirtual #22                 // Method com/arjuna/ats/jta/cdi/TransactionContext.cleanupScope:(Ljavax/transaction/Transaction;)V
      47: return
}

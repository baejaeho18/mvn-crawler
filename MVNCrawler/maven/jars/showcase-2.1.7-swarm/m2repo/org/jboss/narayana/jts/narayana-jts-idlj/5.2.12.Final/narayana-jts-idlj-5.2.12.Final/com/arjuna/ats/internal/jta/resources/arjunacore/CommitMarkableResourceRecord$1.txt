Compiled from "CommitMarkableResourceRecord.java"
class com.arjuna.ats.internal.jta.resources.arjunacore.CommitMarkableResourceRecord$1 implements javax.transaction.Synchronization {
  final javax.transaction.xa.Xid val$xid;

  final com.arjuna.ats.internal.jta.resources.arjunacore.CommitMarkableResourceRecord this$0;

  com.arjuna.ats.internal.jta.resources.arjunacore.CommitMarkableResourceRecord$1(com.arjuna.ats.internal.jta.resources.arjunacore.CommitMarkableResourceRecord, javax.transaction.xa.Xid);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;
       5: aload_0
       6: aload_2
       7: putfield      #2                  // Field val$xid:Ljavax/transaction/xa/Xid;
      10: aload_0
      11: invokespecial #3                  // Method java/lang/Object."<init>":()V
      14: return

  public void beforeCompletion();
    Code:
       0: return

  public void afterCompletion(int);
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;
       4: invokestatic  #4                  // Method com/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord.access$000:(Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;)Z
       7: ifne          396
      10: iload_1
      11: iconst_3
      12: if_icmpne     396
      15: aconst_null
      16: astore_2
      17: aload_0
      18: getfield      #1                  // Field this$0:Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;
      21: invokestatic  #6                  // Method com/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord.access$100:(Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;)Lorg/jboss/tm/ConnectableResource;
      24: invokeinterface #7,  1            // InterfaceMethod org/jboss/tm/ConnectableResource.getConnection:()Ljava/lang/Object;
      29: checkcast     #8                  // class java/sql/Connection
      32: astore_2
      33: aload_2
      34: iconst_0
      35: invokeinterface #9,  2            // InterfaceMethod java/sql/Connection.setAutoCommit:(Z)V
      40: new           #10                 // class java/lang/StringBuilder
      43: dup
      44: invokespecial #11                 // Method java/lang/StringBuilder."<init>":()V
      47: ldc           #12                 // String DELETE from
      49: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      52: aload_0
      53: getfield      #1                  // Field this$0:Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;
      56: invokestatic  #14                 // Method com/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord.access$200:(Lcom/arjuna/ats/internal/jta/resources/arjunacore/CommitMarkableResourceRecord;)Ljava/lang/String;
      59: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: ldc           #15                 // String  where xid in (?)
      64: invokevirtual #13                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      67: invokevirtual #16                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      70: astore_3
      71: aload_2
      72: aload_3
      73: invokeinterface #17,  2           // InterfaceMethod java/sql/Connection.prepareStatement:(Ljava/lang/String;)Ljava/sql/PreparedStatement;
      78: astore        4
      80: aload_0
      81: getfield      #2                  // Field val$xid:Ljavax/transaction/xa/Xid;
      84: checkcast     #18                 // class com/arjuna/ats/jta/xa/XidImple
      87: invokevirtual #19                 // Method com/arjuna/ats/jta/xa/XidImple.getXID:()Lcom/arjuna/ats/internal/jta/xa/XID;
      90: astore        5
      92: new           #20                 // class java/io/ByteArrayOutputStream
      95: dup
      96: invokespecial #21                 // Method java/io/ByteArrayOutputStream."<init>":()V
      99: astore        6
     101: new           #22                 // class java/io/DataOutputStream
     104: dup
     105: aload         6
     107: invokespecial #23                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
     110: astore        7
     112: aload         7
     114: aload         5
     116: getfield      #24                 // Field com/arjuna/ats/internal/jta/xa/XID.formatID:I
     119: invokevirtual #25                 // Method java/io/DataOutputStream.writeInt:(I)V
     122: aload         7
     124: aload         5
     126: getfield      #26                 // Field com/arjuna/ats/internal/jta/xa/XID.gtrid_length:I
     129: invokevirtual #25                 // Method java/io/DataOutputStream.writeInt:(I)V
     132: aload         7
     134: aload         5
     136: getfield      #27                 // Field com/arjuna/ats/internal/jta/xa/XID.bqual_length:I
     139: invokevirtual #25                 // Method java/io/DataOutputStream.writeInt:(I)V
     142: aload         7
     144: aload         5
     146: getfield      #28                 // Field com/arjuna/ats/internal/jta/xa/XID.data:[B
     149: arraylength
     150: invokevirtual #25                 // Method java/io/DataOutputStream.writeInt:(I)V
     153: aload         7
     155: aload         5
     157: getfield      #28                 // Field com/arjuna/ats/internal/jta/xa/XID.data:[B
     160: invokevirtual #29                 // Method java/io/DataOutputStream.write:([B)V
     163: aload         7
     165: invokevirtual #30                 // Method java/io/DataOutputStream.flush:()V
     168: aload         4
     170: iconst_1
     171: aload         6
     173: invokevirtual #31                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     176: invokeinterface #32,  3           // InterfaceMethod java/sql/PreparedStatement.setBytes:(I[B)V
     181: aload         4
     183: invokeinterface #33,  1           // InterfaceMethod java/sql/PreparedStatement.executeUpdate:()I
     188: iconst_1
     189: if_icmpeq     209
     192: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     195: ldc           #35                 // String Update was not successfull
     197: invokevirtual #36                 // Method org/jboss/logging/Logger.error:(Ljava/lang/Object;)V
     200: aload_2
     201: invokeinterface #37,  1           // InterfaceMethod java/sql/Connection.rollback:()V
     206: goto          215
     209: aload_2
     210: invokeinterface #38,  1           // InterfaceMethod java/sql/Connection.commit:()V
     215: aload         4
     217: invokeinterface #39,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     222: goto          304
     225: astore        5
     227: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     230: ldc           #41                 // String Could not close the prepared statement
     232: aload         5
     234: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     237: goto          304
     240: astore        5
     242: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     245: ldc           #44                 // String Could not generate prepareStatement paramaters
     247: aload         5
     249: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     252: aload         4
     254: invokeinterface #39,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     259: goto          304
     262: astore        5
     264: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     267: ldc           #41                 // String Could not close the prepared statement
     269: aload         5
     271: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     274: goto          304
     277: astore        8
     279: aload         4
     281: invokeinterface #39,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     286: goto          301
     289: astore        9
     291: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     294: ldc           #41                 // String Could not close the prepared statement
     296: aload         9
     298: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     301: aload         8
     303: athrow
     304: aload_2
     305: ifnull        396
     308: aload_2
     309: invokeinterface #45,  1           // InterfaceMethod java/sql/Connection.close:()V
     314: goto          396
     317: astore_3
     318: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     321: ldc           #46                 // String Could not close the preparedConnection
     323: aload_3
     324: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     327: goto          396
     330: astore_3
     331: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     334: ldc           #48                 // String Could not delete CommitMarkableResourceRecord entry, will rely on RecoveryModule
     336: aload_3
     337: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     340: aload_2
     341: ifnull        396
     344: aload_2
     345: invokeinterface #45,  1           // InterfaceMethod java/sql/Connection.close:()V
     350: goto          396
     353: astore_3
     354: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     357: ldc           #46                 // String Could not close the preparedConnection
     359: aload_3
     360: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     363: goto          396
     366: astore        10
     368: aload_2
     369: ifnull        393
     372: aload_2
     373: invokeinterface #45,  1           // InterfaceMethod java/sql/Connection.close:()V
     378: goto          393
     381: astore        11
     383: getstatic     #34                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
     386: ldc           #46                 // String Could not close the preparedConnection
     388: aload         11
     390: invokevirtual #42                 // Method org/jboss/logging/Logger.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     393: aload         10
     395: athrow
     396: return
    Exception table:
       from    to  target type
         215   222   225   Class java/sql/SQLException
          80   215   240   Class java/io/IOException
         252   259   262   Class java/sql/SQLException
          80   215   277   any
         240   252   277   any
         279   286   289   Class java/sql/SQLException
         277   279   277   any
         308   314   317   Class java/sql/SQLException
          17   304   330   Class java/lang/Throwable
         344   350   353   Class java/sql/SQLException
          17   304   366   any
         330   340   366   any
         372   378   381   Class java/sql/SQLException
         366   368   366   any
}

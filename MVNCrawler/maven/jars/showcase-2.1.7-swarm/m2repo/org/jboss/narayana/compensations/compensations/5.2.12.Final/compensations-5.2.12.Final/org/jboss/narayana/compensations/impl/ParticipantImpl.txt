Compiled from "ParticipantImpl.java"
public class org.jboss.narayana.compensations.impl.ParticipantImpl implements com.arjuna.wst.BusinessAgreementWithParticipantCompletionParticipant,com.arjuna.wst11.ConfirmCompletedParticipant {
  private static final java.util.Map<java.lang.Object, java.util.concurrent.atomic.AtomicInteger> PARTICIPANT_COUNTERS;

  private java.lang.Class<? extends org.jboss.narayana.compensations.api.CompensationHandler> compensationHandler;

  private java.lang.Class<? extends org.jboss.narayana.compensations.api.ConfirmationHandler> confirmationHandler;

  private java.lang.Class<? extends org.jboss.narayana.compensations.api.TransactionLoggedHandler> transactionLoggedHandler;

  private javax.enterprise.inject.spi.BeanManager beanManager;

  private java.lang.ClassLoader applicationClassloader;

  private java.lang.Object currentTX;

  public org.jboss.narayana.compensations.impl.ParticipantImpl(java.lang.Class<? extends org.jboss.narayana.compensations.api.CompensationHandler>, java.lang.Class<? extends org.jboss.narayana.compensations.api.ConfirmationHandler>, java.lang.Class<? extends org.jboss.narayana.compensations.api.TransactionLoggedHandler>, java.lang.Object);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field compensationHandler:Ljava/lang/Class;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field confirmationHandler:Ljava/lang/Class;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field transactionLoggedHandler:Ljava/lang/Class;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field currentTX:Ljava/lang/Object;
      25: aload_0
      26: invokestatic  #6                  // Method org/jboss/narayana/compensations/impl/BeanManagerUtil.getBeanManager:()Ljavax/enterprise/inject/spi/BeanManager;
      29: putfield      #7                  // Field beanManager:Ljavax/enterprise/inject/spi/BeanManager;
      32: aload_0
      33: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      36: invokevirtual #9                  // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      39: putfield      #10                 // Field applicationClassloader:Ljava/lang/ClassLoader;
      42: aload_0
      43: invokespecial #11                 // Method incrementParticipantsCounter:()V
      46: return

  private <T> T instantiate(java.lang.Class<T>);
    Code:
       0: aload_1
       1: ifnonnull     6
       4: aconst_null
       5: areturn
       6: aload_1
       7: aload_0
       8: getfield      #7                  // Field beanManager:Ljavax/enterprise/inject/spi/BeanManager;
      11: invokestatic  #12                 // Method org/jboss/narayana/compensations/impl/BeanManagerUtil.createBeanInstance:(Ljava/lang/Class;Ljavax/enterprise/inject/spi/BeanManager;)Ljava/lang/Object;
      14: areturn

  public void confirmCompleted(boolean);
    Code:
       0: aload_0
       1: getfield      #4                  // Field transactionLoggedHandler:Ljava/lang/Class;
       4: ifnull        50
       7: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      10: invokevirtual #9                  // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      13: astore_2
      14: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      17: aload_0
      18: getfield      #10                 // Field applicationClassloader:Ljava/lang/ClassLoader;
      21: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      24: aload_0
      25: aload_0
      26: getfield      #4                  // Field transactionLoggedHandler:Ljava/lang/Class;
      29: invokespecial #14                 // Method instantiate:(Ljava/lang/Class;)Ljava/lang/Object;
      32: checkcast     #15                 // class org/jboss/narayana/compensations/api/TransactionLoggedHandler
      35: astore_3
      36: aload_3
      37: iload_1
      38: invokeinterface #16,  2           // InterfaceMethod org/jboss/narayana/compensations/api/TransactionLoggedHandler.transactionLogged:(Z)V
      43: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      46: aload_2
      47: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      50: return

  public void close() throws com.arjuna.wst.WrongStateException, com.arjuna.wst.SystemException;
    Code:
       0: aload_0
       1: getfield      #3                  // Field confirmationHandler:Ljava/lang/Class;
       4: ifnull        56
       7: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      10: invokevirtual #9                  // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      13: astore_1
      14: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      17: aload_0
      18: getfield      #10                 // Field applicationClassloader:Ljava/lang/ClassLoader;
      21: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      24: aload_0
      25: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      28: invokestatic  #17                 // Method org/jboss/narayana/compensations/impl/CompensationContext.setTxContextToExtend:(Ljava/lang/Object;)V
      31: aload_0
      32: aload_0
      33: getfield      #3                  // Field confirmationHandler:Ljava/lang/Class;
      36: invokespecial #14                 // Method instantiate:(Ljava/lang/Class;)Ljava/lang/Object;
      39: checkcast     #18                 // class org/jboss/narayana/compensations/api/ConfirmationHandler
      42: astore_2
      43: aload_2
      44: invokeinterface #19,  1           // InterfaceMethod org/jboss/narayana/compensations/api/ConfirmationHandler.confirm:()V
      49: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      52: aload_1
      53: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      56: aload_0
      57: invokespecial #20                 // Method decrementParticipantsCounter:()V
      60: return

  public void cancel() throws com.arjuna.wst.FaultedException, com.arjuna.wst.WrongStateException, com.arjuna.wst.SystemException;
    Code:
       0: return

  public void compensate() throws com.arjuna.wst.FaultedException, com.arjuna.wst.WrongStateException, com.arjuna.wst.SystemException;
    Code:
       0: aload_0
       1: getfield      #2                  // Field compensationHandler:Ljava/lang/Class;
       4: ifnull        56
       7: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      10: invokevirtual #9                  // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      13: astore_1
      14: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      17: aload_0
      18: getfield      #10                 // Field applicationClassloader:Ljava/lang/ClassLoader;
      21: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      24: aload_0
      25: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      28: invokestatic  #17                 // Method org/jboss/narayana/compensations/impl/CompensationContext.setTxContextToExtend:(Ljava/lang/Object;)V
      31: aload_0
      32: aload_0
      33: getfield      #2                  // Field compensationHandler:Ljava/lang/Class;
      36: invokespecial #14                 // Method instantiate:(Ljava/lang/Class;)Ljava/lang/Object;
      39: checkcast     #21                 // class org/jboss/narayana/compensations/api/CompensationHandler
      42: astore_2
      43: aload_2
      44: invokeinterface #22,  1           // InterfaceMethod org/jboss/narayana/compensations/api/CompensationHandler.compensate:()V
      49: invokestatic  #8                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      52: aload_1
      53: invokevirtual #13                 // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      56: goto          64
      59: astore_1
      60: aload_1
      61: invokevirtual #24                 // Method java/lang/Exception.printStackTrace:()V
      64: aload_0
      65: invokespecial #20                 // Method decrementParticipantsCounter:()V
      68: return
    Exception table:
       from    to  target type
           0    56    59   Class java/lang/Exception

  public java.lang.String status() throws com.arjuna.wst.SystemException;
    Code:
       0: aconst_null
       1: areturn

  public void unknown() throws com.arjuna.wst.SystemException;
    Code:
       0: return

  public void error() throws com.arjuna.wst.SystemException;
    Code:
       0: return

  private void incrementParticipantsCounter();
    Code:
       0: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
       3: dup
       4: astore_1
       5: monitorenter
       6: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
       9: aload_0
      10: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      13: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      18: checkcast     #27                 // class java/util/concurrent/atomic/AtomicInteger
      21: astore_2
      22: aload_2
      23: ifnonnull     50
      26: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
      29: aload_0
      30: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      33: new           #27                 // class java/util/concurrent/atomic/AtomicInteger
      36: dup
      37: iconst_1
      38: invokespecial #28                 // Method java/util/concurrent/atomic/AtomicInteger."<init>":(I)V
      41: invokeinterface #29,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      46: pop
      47: goto          55
      50: aload_2
      51: invokevirtual #30                 // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
      54: pop
      55: aload_1
      56: monitorexit
      57: goto          65
      60: astore_3
      61: aload_1
      62: monitorexit
      63: aload_3
      64: athrow
      65: return
    Exception table:
       from    to  target type
           6    57    60   any
          60    63    60   any

  private void decrementParticipantsCounter();
    Code:
       0: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
       3: dup
       4: astore_1
       5: monitorenter
       6: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
       9: aload_0
      10: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      13: invokeinterface #26,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      18: checkcast     #27                 // class java/util/concurrent/atomic/AtomicInteger
      21: astore_2
      22: aload_2
      23: ifnull        33
      26: aload_2
      27: invokevirtual #31                 // Method java/util/concurrent/atomic/AtomicInteger.decrementAndGet:()I
      30: ifle          36
      33: aload_1
      34: monitorexit
      35: return
      36: getstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
      39: aload_0
      40: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      43: invokeinterface #32,  2           // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      48: pop
      49: aload_1
      50: monitorexit
      51: goto          59
      54: astore_3
      55: aload_1
      56: monitorexit
      57: aload_3
      58: athrow
      59: aload_0
      60: getfield      #5                  // Field currentTX:Ljava/lang/Object;
      63: invokestatic  #33                 // Method org/jboss/narayana/compensations/impl/CompensationContext.close:(Ljava/lang/Object;)V
      66: return
    Exception table:
       from    to  target type
           6    35    54   any
          36    51    54   any
          54    57    54   any

  static {};
    Code:
       0: new           #34                 // class java/util/HashMap
       3: dup
       4: invokespecial #35                 // Method java/util/HashMap."<init>":()V
       7: putstatic     #25                 // Field PARTICIPANT_COUNTERS:Ljava/util/Map;
      10: return
}

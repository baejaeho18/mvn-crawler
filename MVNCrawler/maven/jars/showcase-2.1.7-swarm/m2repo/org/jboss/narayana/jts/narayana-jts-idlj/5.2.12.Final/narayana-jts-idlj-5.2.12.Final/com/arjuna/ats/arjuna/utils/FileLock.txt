Compiled from "FileLock.java"
public class com.arjuna.ats.arjuna.utils.FileLock {
  public static final int F_RDLCK;

  public static final int F_WRLCK;

  public static final int defaultTimeout;

  public static final int defaultRetry;

  private java.io.File _theFile;

  private java.io.File _lockFile;

  private java.io.File _lockFileLock;

  private long _timeout;

  private long _retry;

  public com.arjuna.ats.arjuna.utils.FileLock(java.lang.String);
    Code:
       0: aload_0
       1: new           #1                  // class java/io/File
       4: dup
       5: aload_1
       6: invokespecial #2                  // Method java/io/File."<init>":(Ljava/lang/String;)V
       9: invokespecial #3                  // Method "<init>":(Ljava/io/File;)V
      12: aload_0
      13: getfield      #4                  // Field _theFile:Ljava/io/File;
      16: invokevirtual #5                  // Method java/io/File.deleteOnExit:()V
      19: return

  public com.arjuna.ats.arjuna.utils.FileLock(java.io.File);
    Code:
       0: aload_0
       1: aload_1
       2: ldc2_w        #7                  // long 10l
       5: ldc2_w        #7                  // long 10l
       8: invokespecial #9                  // Method "<init>":(Ljava/io/File;JJ)V
      11: return

  public com.arjuna.ats.arjuna.utils.FileLock(java.io.File, long, long);
    Code:
       0: aload_0
       1: invokespecial #10                 // Method java/lang/Object."<init>":()V
       4: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       7: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
      10: ifeq          62
      13: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      16: new           #13                 // class java/lang/StringBuilder
      19: dup
      20: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      23: ldc           #15                 // String FileLock (
      25: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_1
      29: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      32: ldc           #18                 // String ,
      34: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: lload_2
      38: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      41: ldc           #18                 // String ,
      43: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: lload         4
      48: invokevirtual #19                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      51: ldc           #20                 // String  )
      53: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      56: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      59: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      62: aload_0
      63: aload_1
      64: putfield      #4                  // Field _theFile:Ljava/io/File;
      67: aload_0
      68: new           #1                  // class java/io/File
      71: dup
      72: new           #13                 // class java/lang/StringBuilder
      75: dup
      76: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      79: aload_1
      80: invokevirtual #23                 // Method java/io/File.toString:()Ljava/lang/String;
      83: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      86: ldc           #24                 // String _lock
      88: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      91: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      94: invokespecial #2                  // Method java/io/File."<init>":(Ljava/lang/String;)V
      97: putfield      #25                 // Field _lockFile:Ljava/io/File;
     100: aload_0
     101: new           #1                  // class java/io/File
     104: dup
     105: new           #13                 // class java/lang/StringBuilder
     108: dup
     109: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
     112: aload_1
     113: invokevirtual #23                 // Method java/io/File.toString:()Ljava/lang/String;
     116: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     119: ldc           #26                 // String _lock.lock
     121: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     127: invokespecial #2                  // Method java/io/File."<init>":(Ljava/lang/String;)V
     130: putfield      #27                 // Field _lockFileLock:Ljava/io/File;
     133: aload_0
     134: lload_2
     135: putfield      #28                 // Field _timeout:J
     138: aload_0
     139: lload         4
     141: putfield      #29                 // Field _retry:J
     144: aload_0
     145: getfield      #25                 // Field _lockFile:Ljava/io/File;
     148: invokevirtual #5                  // Method java/io/File.deleteOnExit:()V
     151: aload_0
     152: getfield      #27                 // Field _lockFileLock:Ljava/io/File;
     155: invokevirtual #5                  // Method java/io/File.deleteOnExit:()V
     158: return

  public boolean lock(int);
    Code:
       0: aload_0
       1: iload_1
       2: iconst_0
       3: invokevirtual #30                 // Method lock:(IZ)Z
       6: ireturn

  public synchronized boolean lock(int, boolean);
    Code:
       0: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #13                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #31                 // String FileLock.lock called for
      21: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #25                 // Field _lockFile:Ljava/io/File;
      28: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_0
      38: istore_3
      39: iload_2
      40: ifeq          60
      43: aload_0
      44: getfield      #4                  // Field _theFile:Ljava/io/File;
      47: invokevirtual #32                 // Method java/io/File.exists:()Z
      50: ifne          60
      53: aload_0
      54: invokespecial #33                 // Method createFile:()Z
      57: pop
      58: iconst_1
      59: istore_3
      60: iload_3
      61: ifne          81
      64: aload_0
      65: getfield      #25                 // Field _lockFile:Ljava/io/File;
      68: invokevirtual #32                 // Method java/io/File.exists:()Z
      71: ifeq          81
      74: iload_1
      75: iconst_1
      76: if_icmpne     81
      79: iconst_0
      80: ireturn
      81: iconst_0
      82: istore        4
      84: aload_0
      85: invokespecial #34                 // Method lockFile:()Z
      88: ifeq          222
      91: new           #35                 // class java/io/DataInputStream
      94: dup
      95: new           #36                 // class java/io/FileInputStream
      98: dup
      99: aload_0
     100: getfield      #25                 // Field _lockFile:Ljava/io/File;
     103: invokespecial #37                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
     106: invokespecial #38                 // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
     109: astore        5
     111: aload         5
     113: invokevirtual #39                 // Method java/io/DataInputStream.readInt:()I
     116: istore        6
     118: iload         6
     120: iconst_1
     121: if_icmpne     136
     124: aload         5
     126: invokevirtual #40                 // Method java/io/DataInputStream.close:()V
     129: aload_0
     130: invokespecial #41                 // Method unlockFile:()Z
     133: pop
     134: iconst_0
     135: ireturn
     136: aload         5
     138: invokevirtual #39                 // Method java/io/DataInputStream.readInt:()I
     141: istore        4
     143: aload         5
     145: invokevirtual #40                 // Method java/io/DataInputStream.close:()V
     148: goto          165
     151: astore        5
     153: goto          165
     156: astore        5
     158: aload_0
     159: invokespecial #41                 // Method unlockFile:()Z
     162: pop
     163: iconst_0
     164: ireturn
     165: new           #44                 // class java/io/DataOutputStream
     168: dup
     169: new           #45                 // class java/io/FileOutputStream
     172: dup
     173: aload_0
     174: getfield      #25                 // Field _lockFile:Ljava/io/File;
     177: invokespecial #46                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
     180: invokespecial #47                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
     183: astore        5
     185: iinc          4, 1
     188: aload         5
     190: iload_1
     191: invokevirtual #48                 // Method java/io/DataOutputStream.writeInt:(I)V
     194: aload         5
     196: iload         4
     198: invokevirtual #48                 // Method java/io/DataOutputStream.writeInt:(I)V
     201: aload         5
     203: invokevirtual #49                 // Method java/io/DataOutputStream.close:()V
     206: aload_0
     207: invokespecial #41                 // Method unlockFile:()Z
     210: pop
     211: iconst_1
     212: ireturn
     213: astore        5
     215: aload_0
     216: invokespecial #41                 // Method unlockFile:()Z
     219: pop
     220: iconst_0
     221: ireturn
     222: iconst_0
     223: ireturn
    Exception table:
       from    to  target type
          91   135   151   Class java/io/FileNotFoundException
         136   148   151   Class java/io/FileNotFoundException
          91   135   156   Class java/io/IOException
         136   148   156   Class java/io/IOException
         165   212   213   Class java/io/IOException

  public synchronized boolean unlock();
    Code:
       0: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #13                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #50                 // String FileLock.unlock called
      21: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #25                 // Field _lockFile:Ljava/io/File;
      28: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: aload_0
      38: getfield      #25                 // Field _lockFile:Ljava/io/File;
      41: invokevirtual #32                 // Method java/io/File.exists:()Z
      44: ifne          49
      47: iconst_0
      48: ireturn
      49: aload_0
      50: invokespecial #34                 // Method lockFile:()Z
      53: ifeq          182
      56: iconst_0
      57: istore_1
      58: iconst_0
      59: istore_2
      60: new           #35                 // class java/io/DataInputStream
      63: dup
      64: new           #36                 // class java/io/FileInputStream
      67: dup
      68: aload_0
      69: getfield      #25                 // Field _lockFile:Ljava/io/File;
      72: invokespecial #37                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      75: invokespecial #38                 // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
      78: astore_3
      79: aload_3
      80: invokevirtual #39                 // Method java/io/DataInputStream.readInt:()I
      83: istore_2
      84: aload_3
      85: invokevirtual #39                 // Method java/io/DataInputStream.readInt:()I
      88: istore_1
      89: aload_3
      90: invokevirtual #40                 // Method java/io/DataInputStream.close:()V
      93: iinc          1, -1
      96: iload_1
      97: ifne          115
     100: aload_0
     101: getfield      #25                 // Field _lockFile:Ljava/io/File;
     104: invokevirtual #51                 // Method java/io/File.delete:()Z
     107: pop
     108: aload_0
     109: invokespecial #41                 // Method unlockFile:()Z
     112: pop
     113: iconst_1
     114: ireturn
     115: goto          134
     118: astore_3
     119: aload_0
     120: invokespecial #41                 // Method unlockFile:()Z
     123: pop
     124: iconst_0
     125: ireturn
     126: astore_3
     127: aload_0
     128: invokespecial #41                 // Method unlockFile:()Z
     131: pop
     132: iconst_0
     133: ireturn
     134: new           #44                 // class java/io/DataOutputStream
     137: dup
     138: new           #45                 // class java/io/FileOutputStream
     141: dup
     142: aload_0
     143: getfield      #25                 // Field _lockFile:Ljava/io/File;
     146: invokespecial #46                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
     149: invokespecial #47                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
     152: astore_3
     153: aload_3
     154: iload_2
     155: invokevirtual #48                 // Method java/io/DataOutputStream.writeInt:(I)V
     158: aload_3
     159: iload_1
     160: invokevirtual #48                 // Method java/io/DataOutputStream.writeInt:(I)V
     163: aload_3
     164: invokevirtual #49                 // Method java/io/DataOutputStream.close:()V
     167: aload_0
     168: invokespecial #41                 // Method unlockFile:()Z
     171: pop
     172: iconst_1
     173: ireturn
     174: astore_3
     175: aload_0
     176: invokespecial #41                 // Method unlockFile:()Z
     179: pop
     180: iconst_0
     181: ireturn
     182: iconst_0
     183: ireturn
    Exception table:
       from    to  target type
          60   114   118   Class java/io/FileNotFoundException
          60   114   126   Class java/io/IOException
         134   173   174   Class java/io/IOException

  public static java.lang.String modeString(int);
    Code:
       0: iload_0
       1: lookupswitch  { // 2
                     0: 28
                     1: 31
               default: 34
          }
      28: ldc           #52                 // String FileLock.F_RDLCK
      30: areturn
      31: ldc           #53                 // String FileLock.F_WRLCK
      33: areturn
      34: ldc           #54                 // String Unknown
      36: areturn

  private final boolean createFile();
    Code:
       0: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #13                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #55                 // String FileLock.createFile
      21: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #25                 // Field _lockFile:Ljava/io/File;
      28: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_1
      38: newarray       byte
      40: astore_1
      41: aload_0
      42: getfield      #4                  // Field _theFile:Ljava/io/File;
      45: invokevirtual #32                 // Method java/io/File.exists:()Z
      48: ifne          61
      51: aload_0
      52: getfield      #4                  // Field _theFile:Ljava/io/File;
      55: invokevirtual #56                 // Method java/io/File.createNewFile:()Z
      58: pop
      59: iconst_1
      60: ireturn
      61: iconst_0
      62: ireturn
      63: astore_2
      64: getstatic     #57                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
      67: aload_0
      68: getfield      #25                 // Field _lockFile:Ljava/io/File;
      71: invokevirtual #58                 // Method java/io/File.getName:()Ljava/lang/String;
      74: invokeinterface #59,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_utils_FileLock_4:(Ljava/lang/String;)V
      79: iconst_0
      80: ireturn
    Exception table:
       from    to  target type
          41    60    63   Class java/io/IOException
          61    62    63   Class java/io/IOException

  private final boolean lockFile();
    Code:
       0: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #13                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #60                 // String FileLock.lockFile called
      21: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #25                 // Field _lockFile:Ljava/io/File;
      28: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: iconst_0
      38: istore_1
      39: iload_1
      40: i2l
      41: aload_0
      42: getfield      #29                 // Field _retry:J
      45: lcmp
      46: ifge          82
      49: aload_0
      50: getfield      #27                 // Field _lockFileLock:Ljava/io/File;
      53: invokevirtual #56                 // Method java/io/File.createNewFile:()Z
      56: ifeq          61
      59: iconst_1
      60: ireturn
      61: aload_0
      62: getfield      #28                 // Field _timeout:J
      65: invokestatic  #61                 // Method java/lang/Thread.sleep:(J)V
      68: goto          72
      71: astore_2
      72: goto          76
      75: astore_2
      76: iinc          1, 1
      79: goto          39
      82: iconst_0
      83: ireturn
    Exception table:
       from    to  target type
          61    68    71   Class java/lang/InterruptedException
          49    60    75   Class java/io/IOException
          61    72    75   Class java/io/IOException

  private final boolean unlockFile();
    Code:
       0: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
       3: invokevirtual #12                 // Method org/jboss/logging/Logger.isTraceEnabled:()Z
       6: ifeq          37
       9: getstatic     #11                 // Field com/arjuna/ats/arjuna/logging/tsLogger.logger:Lorg/jboss/logging/Logger;
      12: new           #13                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #14                 // Method java/lang/StringBuilder."<init>":()V
      19: ldc           #63                 // String FileLock.unlockFile called for
      21: invokevirtual #16                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_0
      25: getfield      #25                 // Field _lockFile:Ljava/io/File;
      28: invokevirtual #17                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      31: invokevirtual #21                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      34: invokevirtual #22                 // Method org/jboss/logging/Logger.trace:(Ljava/lang/Object;)V
      37: aload_0
      38: getfield      #27                 // Field _lockFileLock:Ljava/io/File;
      41: invokevirtual #51                 // Method java/io/File.delete:()Z
      44: ireturn
}

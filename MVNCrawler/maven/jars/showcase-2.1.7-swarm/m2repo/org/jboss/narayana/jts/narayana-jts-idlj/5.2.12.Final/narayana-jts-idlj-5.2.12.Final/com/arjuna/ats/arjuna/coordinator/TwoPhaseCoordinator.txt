Compiled from "TwoPhaseCoordinator.java"
public class com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator extends com.arjuna.ats.arjuna.coordinator.BasicAction implements com.arjuna.ats.arjuna.coordinator.Reapable {
  private java.util.SortedSet<com.arjuna.ats.arjuna.coordinator.SynchronizationRecord> _synchs;

  private java.util.List<java.util.concurrent.Future<java.lang.Boolean>> runningSynchronizations;

  private java.util.concurrent.CompletionService<java.lang.Boolean> synchronizationCompletionService;

  private boolean executingInterposedSynchs;

  private com.arjuna.ats.arjuna.coordinator.SynchronizationRecord _currentRecord;

  private java.lang.Throwable _deferredThrowable;

  private java.lang.Object _syncLock;

  private boolean _beforeCalled;

  private boolean _afterCalled;

  public com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method com/arjuna/ats/arjuna/coordinator/BasicAction."<init>":()V
       4: aload_0
       5: aconst_null
       6: putfield      #2                  // Field runningSynchronizations:Ljava/util/List;
       9: aload_0
      10: aconst_null
      11: putfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      14: aload_0
      15: iconst_0
      16: putfield      #4                  // Field executingInterposedSynchs:Z
      19: aload_0
      20: new           #5                  // class java/lang/Object
      23: dup
      24: invokespecial #6                  // Method java/lang/Object."<init>":()V
      27: putfield      #7                  // Field _syncLock:Ljava/lang/Object;
      30: aload_0
      31: iconst_0
      32: putfield      #8                  // Field _beforeCalled:Z
      35: aload_0
      36: iconst_0
      37: putfield      #9                  // Field _afterCalled:Z
      40: return

  public com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator(com.arjuna.ats.arjuna.common.Uid);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #10                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction."<init>":(Lcom/arjuna/ats/arjuna/common/Uid;)V
       5: aload_0
       6: aconst_null
       7: putfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      10: aload_0
      11: aconst_null
      12: putfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      15: aload_0
      16: iconst_0
      17: putfield      #4                  // Field executingInterposedSynchs:Z
      20: aload_0
      21: new           #5                  // class java/lang/Object
      24: dup
      25: invokespecial #6                  // Method java/lang/Object."<init>":()V
      28: putfield      #7                  // Field _syncLock:Ljava/lang/Object;
      31: aload_0
      32: iconst_0
      33: putfield      #8                  // Field _beforeCalled:Z
      36: aload_0
      37: iconst_0
      38: putfield      #9                  // Field _afterCalled:Z
      41: return

  public int start();
    Code:
       0: aload_0
       1: invokestatic  #11                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.Current:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
       4: invokevirtual #12                 // Method start:(Lcom/arjuna/ats/arjuna/coordinator/BasicAction;)I
       7: ireturn

  public int start(com.arjuna.ats.arjuna.coordinator.BasicAction);
    Code:
       0: aload_1
       1: ifnull        18
       4: aload_0
       5: invokevirtual #13                 // Method typeOfAction:()I
       8: iconst_1
       9: if_icmpne     18
      12: aload_1
      13: aload_0
      14: invokevirtual #15                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.addChildAction:(Lcom/arjuna/ats/arjuna/coordinator/BasicAction;)Z
      17: pop
      18: aload_0
      19: aload_1
      20: invokespecial #16                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.Begin:(Lcom/arjuna/ats/arjuna/coordinator/BasicAction;)I
      23: ireturn

  public int end(boolean);
    Code:
       0: aload_0
       1: invokevirtual #17                 // Method parent:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
       4: ifnull        16
       7: aload_0
       8: invokevirtual #17                 // Method parent:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
      11: aload_0
      12: invokevirtual #18                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.removeChildAction:(Lcom/arjuna/ats/arjuna/coordinator/BasicAction;)Z
      15: pop
      16: iconst_1
      17: istore_3
      18: aload_0
      19: invokevirtual #19                 // Method status:()I
      22: iconst_3
      23: if_icmpne     32
      26: invokestatic  #21                 // Method com/arjuna/ats/arjuna/coordinator/TxControl.isBeforeCompletionWhenRollbackOnly:()Z
      29: ifeq          37
      32: aload_0
      33: invokevirtual #22                 // Method beforeCompletion:()Z
      36: istore_3
      37: iload_3
      38: ifeq          50
      41: aload_0
      42: iload_1
      43: invokespecial #23                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.End:(Z)I
      46: istore_2
      47: goto          55
      50: aload_0
      51: invokespecial #24                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.Abort:()I
      54: istore_2
      55: aload_0
      56: iload_2
      57: iload_1
      58: invokevirtual #25                 // Method afterCompletion:(IZ)Z
      61: pop
      62: iload_2
      63: ireturn

  public int cancel();
    Code:
       0: invokestatic  #26                 // Method com/arjuna/ats/arjuna/coordinator/TxStats.enabled:()Z
       3: ifeq          12
       6: invokestatic  #27                 // Method com/arjuna/ats/arjuna/coordinator/TxStats.getInstance:()Lcom/arjuna/ats/arjuna/coordinator/TxStats;
       9: invokevirtual #28                 // Method com/arjuna/ats/arjuna/coordinator/TxStats.incrementApplicationRollbacks:()V
      12: aload_0
      13: invokevirtual #17                 // Method parent:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
      16: ifnull        28
      19: aload_0
      20: invokevirtual #17                 // Method parent:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
      23: aload_0
      24: invokevirtual #18                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.removeChildAction:(Lcom/arjuna/ats/arjuna/coordinator/BasicAction;)Z
      27: pop
      28: aload_0
      29: invokespecial #24                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction.Abort:()I
      32: istore_1
      33: iload_1
      34: iconst_4
      35: if_icmpne     44
      38: aload_0
      39: iload_1
      40: invokevirtual #29                 // Method afterCompletion:(I)Z
      43: pop
      44: iload_1
      45: ireturn

  public int addSynchronization(com.arjuna.ats.arjuna.coordinator.SynchronizationRecord);
    Code:
       0: aload_1
       1: ifnonnull     6
       4: iconst_3
       5: ireturn
       6: iconst_3
       7: istore_2
       8: aload_0
       9: invokevirtual #17                 // Method parent:()Lcom/arjuna/ats/arjuna/coordinator/BasicAction;
      12: ifnull        17
      15: iconst_3
      16: ireturn
      17: aload_0
      18: invokevirtual #19                 // Method status:()I
      21: lookupswitch  { // 2
                     0: 48
                     1: 48
               default: 203
          }
      48: aload_0
      49: dup
      50: astore_3
      51: monitorenter
      52: aload_0
      53: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      56: ifnonnull     70
      59: aload_0
      60: new           #32                 // class java/util/TreeSet
      63: dup
      64: invokespecial #33                 // Method java/util/TreeSet."<init>":()V
      67: putfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      70: aload_3
      71: monitorexit
      72: goto          82
      75: astore        4
      77: aload_3
      78: monitorexit
      79: aload         4
      81: athrow
      82: aload_0
      83: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      86: dup
      87: astore_3
      88: monitorenter
      89: aload_0
      90: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      93: ifnull        148
      96: aload_0
      97: getfield      #4                  // Field executingInterposedSynchs:Z
     100: ifeq          116
     103: aload_1
     104: invokeinterface #34,  1           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.isInterposed:()Z
     109: ifne          116
     112: iconst_3
     113: aload_3
     114: monitorexit
     115: ireturn
     116: aload_0
     117: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     120: aload_0
     121: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     124: new           #35                 // class com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization
     127: dup
     128: aload_0
     129: aload_1
     130: invokespecial #36                 // Method com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization."<init>":(Lcom/arjuna/ats/arjuna/coordinator/TwoPhaseCoordinator;Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;)V
     133: invokeinterface #37,  2           // InterfaceMethod java/util/concurrent/CompletionService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     138: invokeinterface #38,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     143: pop
     144: iconst_2
     145: aload_3
     146: monitorexit
     147: ireturn
     148: aload_0
     149: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     152: ifnull        173
     155: aload_1
     156: aload_0
     157: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     160: invokeinterface #40,  2           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.compareTo:(Ljava/lang/Object;)I
     165: iconst_1
     166: if_icmpeq     173
     169: iconst_3
     170: aload_3
     171: monitorexit
     172: ireturn
     173: aload_0
     174: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     177: aload_1
     178: invokeinterface #41,  2           // InterfaceMethod java/util/SortedSet.add:(Ljava/lang/Object;)Z
     183: ifeq          188
     186: iconst_2
     187: istore_2
     188: aload_3
     189: monitorexit
     190: goto          200
     193: astore        5
     195: aload_3
     196: monitorexit
     197: aload         5
     199: athrow
     200: goto          203
     203: iload_2
     204: ireturn
    Exception table:
       from    to  target type
          52    72    75   any
          75    79    75   any
          89   115   193   any
         116   147   193   any
         148   172   193   any
         173   190   193   any
         193   197   193   any

  private boolean asyncBeforeCompletion();
    Code:
       0: iconst_0
       1: istore_1
       2: new           #42                 // class java/util/ArrayList
       5: dup
       6: invokespecial #43                 // Method java/util/ArrayList."<init>":()V
       9: astore_2
      10: aload_0
      11: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      14: dup
      15: astore_3
      16: monitorenter
      17: aload_0
      18: invokestatic  #44                 // Method com/arjuna/ats/arjuna/coordinator/TwoPhaseCommitThreadPool.getNewCompletionService:()Ljava/util/concurrent/CompletionService;
      21: putfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      24: aload_0
      25: new           #42                 // class java/util/ArrayList
      28: dup
      29: aload_0
      30: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      33: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
      38: invokespecial #46                 // Method java/util/ArrayList."<init>":(I)V
      41: putfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      44: aload_0
      45: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      48: invokeinterface #47,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
      53: astore        4
      55: aload         4
      57: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      62: ifeq          131
      65: aload         4
      67: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      72: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
      75: astore        5
      77: aload         5
      79: invokeinterface #34,  1           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.isInterposed:()Z
      84: ifeq          99
      87: aload_2
      88: aload         5
      90: invokeinterface #51,  2           // InterfaceMethod java/util/Collection.add:(Ljava/lang/Object;)Z
      95: pop
      96: goto          128
      99: aload_0
     100: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     103: aload_0
     104: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     107: new           #35                 // class com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization
     110: dup
     111: aload_0
     112: aload         5
     114: invokespecial #36                 // Method com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization."<init>":(Lcom/arjuna/ats/arjuna/coordinator/TwoPhaseCoordinator;Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;)V
     117: invokeinterface #37,  2           // InterfaceMethod java/util/concurrent/CompletionService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     122: invokeinterface #38,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     127: pop
     128: goto          55
     131: aload_3
     132: monitorexit
     133: goto          143
     136: astore        6
     138: aload_3
     139: monitorexit
     140: aload         6
     142: athrow
     143: iconst_0
     144: istore_3
     145: aload_0
     146: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     149: dup
     150: astore        4
     152: monitorenter
     153: iload_3
     154: aload_0
     155: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     158: invokeinterface #52,  1           // InterfaceMethod java/util/List.size:()I
     163: if_icmpne     266
     166: aload_0
     167: getfield      #4                  // Field executingInterposedSynchs:Z
     170: ifne          182
     173: aload_2
     174: invokeinterface #53,  1           // InterfaceMethod java/util/Collection.size:()I
     179: ifne          188
     182: aload         4
     184: monitorexit
     185: goto          359
     188: aload_0
     189: iconst_1
     190: putfield      #4                  // Field executingInterposedSynchs:Z
     193: iconst_0
     194: istore_3
     195: aload_0
     196: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     199: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     204: aload_2
     205: invokeinterface #55,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     210: astore        5
     212: aload         5
     214: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     219: ifeq          266
     222: aload         5
     224: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     229: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
     232: astore        6
     234: aload_0
     235: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     238: aload_0
     239: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     242: new           #35                 // class com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization
     245: dup
     246: aload_0
     247: aload         6
     249: invokespecial #36                 // Method com/arjuna/ats/arjuna/coordinator/AsyncBeforeSynchronization."<init>":(Lcom/arjuna/ats/arjuna/coordinator/TwoPhaseCoordinator;Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;)V
     252: invokeinterface #37,  2           // InterfaceMethod java/util/concurrent/CompletionService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     257: invokeinterface #38,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     262: pop
     263: goto          212
     266: aload         4
     268: monitorexit
     269: goto          280
     272: astore        7
     274: aload         4
     276: monitorexit
     277: aload         7
     279: athrow
     280: iinc          3, 1
     283: aload_0
     284: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     287: invokeinterface #56,  1           // InterfaceMethod java/util/concurrent/CompletionService.take:()Ljava/util/concurrent/Future;
     292: invokeinterface #57,  1           // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     297: checkcast     #58                 // class java/lang/Boolean
     300: invokevirtual #59                 // Method java/lang/Boolean.booleanValue:()Z
     303: ifne          308
     306: iconst_1
     307: istore_1
     308: goto          355
     311: astore        4
     313: aload_0
     314: getfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     317: ifnonnull     329
     320: aload_0
     321: aload         4
     323: invokevirtual #62                 // Method java/util/concurrent/ExecutionException.getCause:()Ljava/lang/Throwable;
     326: putfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     329: iconst_1
     330: istore_1
     331: goto          355
     334: astore        4
     336: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     339: aload_0
     340: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     343: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     346: aload         4
     348: invokeinterface #66,  3           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_2:(Ljava/lang/String;Ljava/lang/Throwable;)V
     353: iconst_1
     354: istore_1
     355: iload_1
     356: ifeq          145
     359: aload_0
     360: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     363: invokeinterface #67,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     368: astore_3
     369: aload_3
     370: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     375: ifeq          401
     378: aload_3
     379: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     384: checkcast     #68                 // class java/util/concurrent/Future
     387: astore        4
     389: aload         4
     391: iconst_0
     392: invokeinterface #69,  2           // InterfaceMethod java/util/concurrent/Future.cancel:(Z)Z
     397: pop
     398: goto          369
     401: aload_0
     402: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     405: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     410: goto          427
     413: astore        8
     415: aload_0
     416: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     419: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     424: aload         8
     426: athrow
     427: goto          506
     430: astore        9
     432: aload_0
     433: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     436: invokeinterface #67,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     441: astore        10
     443: aload         10
     445: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     450: ifeq          477
     453: aload         10
     455: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     460: checkcast     #68                 // class java/util/concurrent/Future
     463: astore        11
     465: aload         11
     467: iconst_0
     468: invokeinterface #69,  2           // InterfaceMethod java/util/concurrent/Future.cancel:(Z)Z
     473: pop
     474: goto          443
     477: aload_0
     478: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     481: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     486: goto          503
     489: astore        12
     491: aload_0
     492: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     495: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     500: aload         12
     502: athrow
     503: aload         9
     505: athrow
     506: iload_1
     507: ifne          514
     510: iconst_1
     511: goto          515
     514: iconst_0
     515: ireturn
    Exception table:
       from    to  target type
          17   133   136   any
         136   140   136   any
         153   185   272   any
         188   269   272   any
         272   277   272   any
         283   308   311   Class java/util/concurrent/ExecutionException
         283   308   334   Class java/lang/InterruptedException
         359   401   413   any
         413   415   413   any
         143   359   430   any
         432   477   489   any
         489   491   489   any
         430   432   430   any

  public boolean running();
    Code:
       0: aload_0
       1: invokevirtual #19                 // Method status:()I
       4: ifeq          15
       7: aload_0
       8: invokevirtual #19                 // Method status:()I
      11: iconst_3
      12: if_icmpne     19
      15: iconst_1
      16: goto          20
      19: iconst_0
      20: ireturn

  public java.lang.String type();
    Code:
       0: ldc           #70                 // String /StateManager/BasicAction/AtomicAction/TwoPhaseCoordinator
       2: areturn

  public java.lang.Throwable getDeferredThrowable();
    Code:
       0: aload_0
       1: getfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
       4: areturn

  protected com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator(int);
    Code:
       0: aload_0
       1: iload_1
       2: invokespecial #71                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction."<init>":(I)V
       5: aload_0
       6: aconst_null
       7: putfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      10: aload_0
      11: aconst_null
      12: putfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      15: aload_0
      16: iconst_0
      17: putfield      #4                  // Field executingInterposedSynchs:Z
      20: aload_0
      21: new           #5                  // class java/lang/Object
      24: dup
      25: invokespecial #6                  // Method java/lang/Object."<init>":()V
      28: putfield      #7                  // Field _syncLock:Ljava/lang/Object;
      31: aload_0
      32: iconst_0
      33: putfield      #8                  // Field _beforeCalled:Z
      36: aload_0
      37: iconst_0
      38: putfield      #9                  // Field _afterCalled:Z
      41: return

  protected com.arjuna.ats.arjuna.coordinator.TwoPhaseCoordinator(com.arjuna.ats.arjuna.common.Uid, int);
    Code:
       0: aload_0
       1: aload_1
       2: iload_2
       3: invokespecial #72                 // Method com/arjuna/ats/arjuna/coordinator/BasicAction."<init>":(Lcom/arjuna/ats/arjuna/common/Uid;I)V
       6: aload_0
       7: aconst_null
       8: putfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      11: aload_0
      12: aconst_null
      13: putfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      16: aload_0
      17: iconst_0
      18: putfield      #4                  // Field executingInterposedSynchs:Z
      21: aload_0
      22: new           #5                  // class java/lang/Object
      25: dup
      26: invokespecial #6                  // Method java/lang/Object."<init>":()V
      29: putfield      #7                  // Field _syncLock:Ljava/lang/Object;
      32: aload_0
      33: iconst_0
      34: putfield      #8                  // Field _beforeCalled:Z
      37: aload_0
      38: iconst_0
      39: putfield      #9                  // Field _afterCalled:Z
      42: return

  protected boolean beforeCompletion();
    Code:
       0: iconst_0
       1: istore_1
       2: aload_0
       3: getfield      #7                  // Field _syncLock:Ljava/lang/Object;
       6: dup
       7: astore_2
       8: monitorenter
       9: aload_0
      10: getfield      #8                  // Field _beforeCalled:Z
      13: ifne          295
      16: aload_0
      17: iconst_1
      18: putfield      #8                  // Field _beforeCalled:Z
      21: aload_0
      22: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      25: ifnonnull     31
      28: goto          295
      31: getstatic     #73                 // Field com/arjuna/ats/arjuna/coordinator/TxControl.asyncBeforeSynch:Z
      34: ifeq          66
      37: aload_0
      38: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      41: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
      46: iconst_1
      47: if_icmple     66
      50: aload_0
      51: invokespecial #74                 // Method asyncBeforeCompletion:()Z
      54: ifne          61
      57: iconst_1
      58: goto          62
      61: iconst_0
      62: istore_1
      63: goto          295
      66: iconst_m1
      67: istore_3
      68: aload_0
      69: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      72: dup
      73: astore        5
      75: monitorenter
      76: aload_0
      77: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      80: iconst_0
      81: anewarray     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
      84: invokeinterface #75,  2           // InterfaceMethod java/util/SortedSet.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
      89: checkcast     #76                 // class "[Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;"
      92: checkcast     #76                 // class "[Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;"
      95: astore        4
      97: aload         5
      99: monitorexit
     100: goto          111
     103: astore        6
     105: aload         5
     107: monitorexit
     108: aload         6
     110: athrow
     111: iload_3
     112: aload_0
     113: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     116: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
     121: iconst_1
     122: isub
     123: if_icmpge     295
     126: iload_1
     127: ifne          295
     130: aload_0
     131: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     134: dup
     135: astore        5
     137: monitorenter
     138: aload         4
     140: arraylength
     141: aload_0
     142: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     145: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
     150: if_icmpeq     174
     153: aload_0
     154: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     157: iconst_0
     158: anewarray     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
     161: invokeinterface #75,  2           // InterfaceMethod java/util/SortedSet.toArray:([Ljava/lang/Object;)[Ljava/lang/Object;
     166: checkcast     #76                 // class "[Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;"
     169: checkcast     #76                 // class "[Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;"
     172: astore        4
     174: aload         5
     176: monitorexit
     177: goto          188
     180: astore        7
     182: aload         5
     184: monitorexit
     185: aload         7
     187: athrow
     188: iload_3
     189: iconst_1
     190: iadd
     191: istore_3
     192: aload_0
     193: aload         4
     195: iload_3
     196: aaload
     197: putfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     200: aload_0
     201: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     204: invokeinterface #77,  1           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.beforeCompletion:()Z
     209: ifne          216
     212: iconst_1
     213: goto          217
     216: iconst_0
     217: istore_1
     218: goto          111
     221: astore        5
     223: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     226: aload_0
     227: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     230: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     233: aload         5
     235: invokeinterface #66,  3           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_2:(Ljava/lang/String;Ljava/lang/Throwable;)V
     240: aload_0
     241: getfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     244: ifnonnull     253
     247: aload_0
     248: aload         5
     250: putfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     253: iconst_1
     254: istore_1
     255: goto          111
     258: astore        5
     260: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     263: aload_0
     264: getfield      #39                 // Field _currentRecord:Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;
     267: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     270: aload         5
     272: invokeinterface #66,  3           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_2:(Ljava/lang/String;Ljava/lang/Throwable;)V
     277: aload_0
     278: getfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     281: ifnonnull     290
     284: aload_0
     285: aload         5
     287: putfield      #61                 // Field _deferredThrowable:Ljava/lang/Throwable;
     290: iconst_1
     291: istore_1
     292: goto          111
     295: iload_1
     296: ifeq          314
     299: aload_0
     300: invokevirtual #80                 // Method preventCommit:()Z
     303: ifne          314
     306: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     309: invokeinterface #81,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_1:()V
     314: aload_2
     315: monitorexit
     316: goto          326
     319: astore        8
     321: aload_2
     322: monitorexit
     323: aload         8
     325: athrow
     326: iload_1
     327: ifne          334
     330: iconst_1
     331: goto          335
     334: iconst_0
     335: ireturn
    Exception table:
       from    to  target type
          76   100   103   any
         103   108   103   any
         138   177   180   any
         180   185   180   any
         200   218   221   Class java/lang/Exception
         200   218   258   Class java/lang/Error
           9   316   319   any
         319   323   319   any

  protected boolean asyncAfterCompletion(int, boolean);
    Code:
       0: iconst_0
       1: istore_3
       2: aload_0
       3: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
       6: invokeinterface #47,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
      11: astore        4
      13: aload         4
      15: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      20: ifeq          109
      23: aload         4
      25: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
      33: astore        5
      35: iload_2
      36: ifne          59
      39: aload         5
      41: instanceof    #82                 // class com/arjuna/ats/arjuna/coordinator/HeuristicNotification
      44: ifeq          59
      47: aload         5
      49: checkcast     #82                 // class com/arjuna/ats/arjuna/coordinator/HeuristicNotification
      52: aload_0
      53: invokevirtual #83                 // Method getHeuristicDecision:()I
      56: invokevirtual #84                 // Method com/arjuna/ats/arjuna/coordinator/HeuristicNotification.heuristicOutcome:(I)V
      59: aload         5
      61: invokeinterface #34,  1           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.isInterposed:()Z
      66: ifeq          106
      69: aload         4
      71: invokeinterface #85,  1           // InterfaceMethod java/util/Iterator.remove:()V
      76: aload_0
      77: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
      80: aload_0
      81: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
      84: new           #86                 // class com/arjuna/ats/arjuna/coordinator/AsyncAfterSynchronization
      87: dup
      88: aload_0
      89: aload         5
      91: iload_1
      92: invokespecial #87                 // Method com/arjuna/ats/arjuna/coordinator/AsyncAfterSynchronization."<init>":(Lcom/arjuna/ats/arjuna/coordinator/TwoPhaseCoordinator;Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;I)V
      95: invokeinterface #37,  2           // InterfaceMethod java/util/concurrent/CompletionService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     100: invokeinterface #38,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     105: pop
     106: goto          13
     109: iconst_0
     110: istore        4
     112: aload_0
     113: iconst_1
     114: putfield      #4                  // Field executingInterposedSynchs:Z
     117: iload         4
     119: aload_0
     120: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     123: invokeinterface #52,  1           // InterfaceMethod java/util/List.size:()I
     128: if_icmpne     245
     131: aload_0
     132: getfield      #4                  // Field executingInterposedSynchs:Z
     135: ifeq          290
     138: aload_0
     139: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     142: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
     147: ifne          153
     150: goto          290
     153: aload_0
     154: iconst_0
     155: putfield      #4                  // Field executingInterposedSynchs:Z
     158: iconst_0
     159: istore        4
     161: aload_0
     162: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     165: invokeinterface #54,  1           // InterfaceMethod java/util/List.clear:()V
     170: aload_0
     171: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     174: invokeinterface #47,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
     179: astore        5
     181: aload         5
     183: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     188: ifeq          236
     191: aload         5
     193: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     198: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
     201: astore        6
     203: aload_0
     204: getfield      #2                  // Field runningSynchronizations:Ljava/util/List;
     207: aload_0
     208: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     211: new           #86                 // class com/arjuna/ats/arjuna/coordinator/AsyncAfterSynchronization
     214: dup
     215: aload_0
     216: aload         6
     218: iload_1
     219: invokespecial #87                 // Method com/arjuna/ats/arjuna/coordinator/AsyncAfterSynchronization."<init>":(Lcom/arjuna/ats/arjuna/coordinator/TwoPhaseCoordinator;Lcom/arjuna/ats/arjuna/coordinator/SynchronizationRecord;I)V
     222: invokeinterface #37,  2           // InterfaceMethod java/util/concurrent/CompletionService.submit:(Ljava/util/concurrent/Callable;)Ljava/util/concurrent/Future;
     227: invokeinterface #38,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     232: pop
     233: goto          181
     236: aload_0
     237: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     240: invokeinterface #88,  1           // InterfaceMethod java/util/SortedSet.clear:()V
     245: iinc          4, 1
     248: aload_0
     249: getfield      #3                  // Field synchronizationCompletionService:Ljava/util/concurrent/CompletionService;
     252: invokeinterface #56,  1           // InterfaceMethod java/util/concurrent/CompletionService.take:()Ljava/util/concurrent/Future;
     257: invokeinterface #57,  1           // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     262: checkcast     #58                 // class java/lang/Boolean
     265: invokevirtual #59                 // Method java/lang/Boolean.booleanValue:()Z
     268: ifne          273
     271: iconst_1
     272: istore_3
     273: goto          117
     276: astore        5
     278: iconst_1
     279: istore_3
     280: goto          117
     283: astore        5
     285: iconst_1
     286: istore_3
     287: goto          117
     290: iload_3
     291: ifne          298
     294: iconst_1
     295: goto          299
     298: iconst_0
     299: ireturn
    Exception table:
       from    to  target type
         248   273   276   Class java/lang/InterruptedException
         248   273   283   Class java/util/concurrent/ExecutionException

  protected boolean afterCompletion(int);
    Code:
       0: aload_0
       1: iload_1
       2: iconst_0
       3: invokevirtual #25                 // Method afterCompletion:(IZ)Z
       6: ireturn

  protected boolean afterCompletion(int, boolean);
    Code:
       0: iload_1
       1: ifne          14
       4: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
       7: invokeinterface #89,  1           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_3:()V
      12: iconst_0
      13: ireturn
      14: iconst_0
      15: istore_3
      16: aload_0
      17: getfield      #7                  // Field _syncLock:Ljava/lang/Object;
      20: dup
      21: astore        4
      23: monitorenter
      24: aload_0
      25: getfield      #9                  // Field _afterCalled:Z
      28: ifne          277
      31: aload_0
      32: iconst_1
      33: putfield      #9                  // Field _afterCalled:Z
      36: aload_0
      37: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      40: ifnonnull     56
      43: iload_3
      44: ifne          51
      47: iconst_1
      48: goto          52
      51: iconst_0
      52: aload         4
      54: monitorexit
      55: ireturn
      56: getstatic     #90                 // Field com/arjuna/ats/arjuna/coordinator/TxControl.asyncAfterSynch:Z
      59: ifeq          85
      62: aload_0
      63: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      66: invokeinterface #45,  1           // InterfaceMethod java/util/SortedSet.size:()I
      71: iconst_1
      72: if_icmple     85
      75: aload_0
      76: iload_1
      77: iload_2
      78: invokevirtual #91                 // Method asyncAfterCompletion:(IZ)Z
      81: istore_3
      82: goto          277
      85: new           #92                 // class java/util/Stack
      88: dup
      89: invokespecial #93                 // Method java/util/Stack."<init>":()V
      92: astore        5
      94: aload_0
      95: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      98: invokeinterface #47,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
     103: astore        6
     105: aload         6
     107: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     112: ifeq          131
     115: aload         5
     117: aload         6
     119: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     124: invokevirtual #94                 // Method java/util/Stack.push:(Ljava/lang/Object;)Ljava/lang/Object;
     127: pop
     128: goto          105
     131: aload         5
     133: invokevirtual #95                 // Method java/util/Stack.isEmpty:()Z
     136: ifne          246
     139: aload         5
     141: invokevirtual #96                 // Method java/util/Stack.pop:()Ljava/lang/Object;
     144: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
     147: astore        7
     149: iload_2
     150: ifne          173
     153: aload         7
     155: instanceof    #82                 // class com/arjuna/ats/arjuna/coordinator/HeuristicNotification
     158: ifeq          173
     161: aload         7
     163: checkcast     #82                 // class com/arjuna/ats/arjuna/coordinator/HeuristicNotification
     166: aload_0
     167: invokevirtual #83                 // Method getHeuristicDecision:()I
     170: invokevirtual #84                 // Method com/arjuna/ats/arjuna/coordinator/HeuristicNotification.heuristicOutcome:(I)V
     173: aload         7
     175: iload_1
     176: invokeinterface #97,  2           // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.afterCompletion:(I)Z
     181: ifne          199
     184: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     187: aload         7
     189: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     192: invokeinterface #98,  2           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_4:(Ljava/lang/String;)V
     197: iconst_1
     198: istore_3
     199: goto          243
     202: astore        8
     204: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     207: aload         7
     209: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     212: aload         8
     214: invokeinterface #99,  3           // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_4a:(Ljava/lang/String;Ljava/lang/Throwable;)V
     219: iconst_1
     220: istore_3
     221: goto          243
     224: astore        8
     226: getstatic     #64                 // Field com/arjuna/ats/arjuna/logging/tsLogger.i18NLogger:Lcom/arjuna/ats/arjuna/logging/arjunaI18NLogger;
     229: aload         7
     231: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
     234: aload         8
     236: invokeinterface #100,  3          // InterfaceMethod com/arjuna/ats/arjuna/logging/arjunaI18NLogger.warn_coordinator_TwoPhaseCoordinator_4b:(Ljava/lang/String;Ljava/lang/Throwable;)V
     241: iconst_1
     242: istore_3
     243: goto          131
     246: aload_0
     247: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     250: dup
     251: astore        7
     253: monitorenter
     254: aload_0
     255: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
     258: invokeinterface #88,  1           // InterfaceMethod java/util/SortedSet.clear:()V
     263: aload         7
     265: monitorexit
     266: goto          277
     269: astore        9
     271: aload         7
     273: monitorexit
     274: aload         9
     276: athrow
     277: aload         4
     279: monitorexit
     280: goto          291
     283: astore        10
     285: aload         4
     287: monitorexit
     288: aload         10
     290: athrow
     291: iload_3
     292: ifne          299
     295: iconst_1
     296: goto          300
     299: iconst_0
     300: ireturn
    Exception table:
       from    to  target type
         173   199   202   Class java/lang/Exception
         173   199   224   Class java/lang/Error
         254   266   269   any
         269   274   269   any
          24    55   283   any
          56   280   283   any
         283   288   283   any

  public java.util.Map<com.arjuna.ats.arjuna.common.Uid, java.lang.String> getSynchronizations();
    Code:
       0: new           #101                // class java/util/HashMap
       3: dup
       4: invokespecial #102                // Method java/util/HashMap."<init>":()V
       7: astore_1
       8: aload_0
       9: dup
      10: astore_2
      11: monitorenter
      12: aload_0
      13: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      16: ifnull        75
      19: aload_0
      20: getfield      #31                 // Field _synchs:Ljava/util/SortedSet;
      23: invokeinterface #47,  1           // InterfaceMethod java/util/SortedSet.iterator:()Ljava/util/Iterator;
      28: astore_3
      29: aload_3
      30: invokeinterface #48,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      35: ifeq          75
      38: aload_3
      39: invokeinterface #49,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      44: astore        4
      46: aload         4
      48: checkcast     #50                 // class com/arjuna/ats/arjuna/coordinator/SynchronizationRecord
      51: astore        5
      53: aload_1
      54: aload         5
      56: invokeinterface #103,  1          // InterfaceMethod com/arjuna/ats/arjuna/coordinator/SynchronizationRecord.get_uid:()Lcom/arjuna/ats/arjuna/common/Uid;
      61: aload         5
      63: invokevirtual #65                 // Method java/lang/Object.toString:()Ljava/lang/String;
      66: invokeinterface #104,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      71: pop
      72: goto          29
      75: aload_2
      76: monitorexit
      77: goto          87
      80: astore        6
      82: aload_2
      83: monitorexit
      84: aload         6
      86: athrow
      87: aload_1
      88: areturn
    Exception table:
       from    to  target type
          12    77    80   any
          80    84    80   any
}

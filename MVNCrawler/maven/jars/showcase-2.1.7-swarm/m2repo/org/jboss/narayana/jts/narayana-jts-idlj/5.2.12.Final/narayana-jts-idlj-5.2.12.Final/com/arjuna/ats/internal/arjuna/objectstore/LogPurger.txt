Compiled from "LogStore.java"
class com.arjuna.ats.internal.arjuna.objectstore.LogPurger extends java.lang.Thread {
  public static final long DEFAULT_PURGE_TIME;

  private java.util.HashMap<com.arjuna.ats.arjuna.common.Uid, com.arjuna.ats.internal.arjuna.objectstore.LogPurger$LogElement> _entries;

  private long _purgeTime;

  private com.arjuna.ats.internal.arjuna.objectstore.LogStore _objStore;

  private com.arjuna.ats.internal.arjuna.objectstore.LogPurger$Status _status;

  private java.lang.Object _lock;

  public com.arjuna.ats.internal.arjuna.objectstore.LogPurger(com.arjuna.ats.internal.arjuna.objectstore.LogStore);
    Code:
       0: aload_0
       1: aload_1
       2: ldc2_w        #2                  // long 100000l
       5: invokespecial #4                  // Method "<init>":(Lcom/arjuna/ats/internal/arjuna/objectstore/LogStore;J)V
       8: return

  public com.arjuna.ats.internal.arjuna.objectstore.LogPurger(com.arjuna.ats.internal.arjuna.objectstore.LogStore, long);
    Code:
       0: aload_0
       1: ldc           #5                  // String Log Purger
       3: invokespecial #6                  // Method java/lang/Thread."<init>":(Ljava/lang/String;)V
       6: aload_0
       7: new           #7                  // class java/util/HashMap
      10: dup
      11: invokespecial #8                  // Method java/util/HashMap."<init>":()V
      14: putfield      #9                  // Field _entries:Ljava/util/HashMap;
      17: aload_0
      18: new           #10                 // class java/lang/Object
      21: dup
      22: invokespecial #11                 // Method java/lang/Object."<init>":()V
      25: putfield      #12                 // Field _lock:Ljava/lang/Object;
      28: aload_0
      29: aload_1
      30: putfield      #13                 // Field _objStore:Lcom/arjuna/ats/internal/arjuna/objectstore/LogStore;
      33: aload_0
      34: lload_2
      35: putfield      #14                 // Field _purgeTime:J
      38: return

  public void addRemovedState(com.arjuna.ats.arjuna.common.Uid, java.lang.String, int);
    Code:
       0: aload_0
       1: getfield      #9                  // Field _entries:Ljava/util/HashMap;
       4: dup
       5: astore        4
       7: monitorenter
       8: aload_0
       9: getfield      #9                  // Field _entries:Ljava/util/HashMap;
      12: aload_1
      13: new           #15                 // class com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement
      16: dup
      17: aload_0
      18: aload_2
      19: aload_1
      20: iload_3
      21: invokespecial #16                 // Method com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement."<init>":(Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger;Ljava/lang/String;Lcom/arjuna/ats/arjuna/common/Uid;I)V
      24: invokevirtual #17                 // Method java/util/HashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      27: pop
      28: aload         4
      30: monitorexit
      31: goto          42
      34: astore        5
      36: aload         4
      38: monitorexit
      39: aload         5
      41: athrow
      42: return
    Exception table:
       from    to  target type
           8    31    34   any
          34    39    34   any

  public void purge();
    Code:
       0: aload_0
       1: getfield      #13                 // Field _objStore:Lcom/arjuna/ats/internal/arjuna/objectstore/LogStore;
       4: iconst_1
       5: invokevirtual #18                 // Method com/arjuna/ats/internal/arjuna/objectstore/LogStore.truncateLogs:(Z)Z
       8: pop
       9: goto          13
      12: astore_1
      13: return
    Exception table:
       from    to  target type
           0     9    12   Class java/lang/Exception

  public void writeRemovalEntries();
    Code:
       0: aload_0
       1: getfield      #9                  // Field _entries:Ljava/util/HashMap;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #9                  // Field _entries:Ljava/util/HashMap;
      11: invokevirtual #20                 // Method java/util/HashMap.size:()I
      14: ifle          90
      17: aload_0
      18: getfield      #9                  // Field _entries:Ljava/util/HashMap;
      21: invokevirtual #21                 // Method java/util/HashMap.values:()Ljava/util/Collection;
      24: astore_2
      25: aload_2
      26: invokeinterface #22,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      31: astore_3
      32: aload_3
      33: invokeinterface #23,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      38: ifeq          83
      41: aload_3
      42: invokeinterface #24,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      47: checkcast     #15                 // class com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement
      50: astore        4
      52: aload_0
      53: getfield      #13                 // Field _objStore:Lcom/arjuna/ats/internal/arjuna/objectstore/LogStore;
      56: aload         4
      58: getfield      #25                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement.uid:Lcom/arjuna/ats/arjuna/common/Uid;
      61: aload         4
      63: getfield      #26                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement.tn:Ljava/lang/String;
      66: aload         4
      68: getfield      #27                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$LogElement.state:I
      71: invokevirtual #28                 // Method com/arjuna/ats/internal/arjuna/objectstore/LogStore.removeState:(Lcom/arjuna/ats/arjuna/common/Uid;Ljava/lang/String;I)Z
      74: pop
      75: goto          80
      78: astore        5
      80: goto          32
      83: aload_0
      84: getfield      #9                  // Field _entries:Ljava/util/HashMap;
      87: invokevirtual #29                 // Method java/util/HashMap.clear:()V
      90: aload_1
      91: monitorexit
      92: goto          102
      95: astore        6
      97: aload_1
      98: monitorexit
      99: aload         6
     101: athrow
     102: return
    Exception table:
       from    to  target type
          52    75    78   Class java/lang/Exception
           7    92    95   any
          95    99    95   any

  public void trigger();
    Code:
       0: aload_0
       1: getfield      #12                 // Field _lock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #30                 // Field _status:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      11: getstatic     #31                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status.PASSIVE:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      14: if_acmpne     24
      17: aload_0
      18: getfield      #12                 // Field _lock:Ljava/lang/Object;
      21: invokevirtual #32                 // Method java/lang/Object.notify:()V
      24: aload_1
      25: monitorexit
      26: goto          34
      29: astore_2
      30: aload_1
      31: monitorexit
      32: aload_2
      33: athrow
      34: return
    Exception table:
       from    to  target type
           7    26    29   any
          29    32    29   any

  public void run();
    Code:
       0: aload_0
       1: getfield      #12                 // Field _lock:Ljava/lang/Object;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getstatic     #31                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status.PASSIVE:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      11: putfield      #30                 // Field _status:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      14: aload_0
      15: getfield      #12                 // Field _lock:Ljava/lang/Object;
      18: aload_0
      19: getfield      #14                 // Field _purgeTime:J
      22: invokevirtual #33                 // Method java/lang/Object.wait:(J)V
      25: aload_1
      26: monitorexit
      27: goto          35
      30: astore_2
      31: aload_1
      32: monitorexit
      33: aload_2
      34: athrow
      35: goto          46
      38: astore_1
      39: aload_0
      40: getstatic     #34                 // Field com/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status.ACTIVE:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      43: putfield      #30                 // Field _status:Lcom/arjuna/ats/internal/arjuna/objectstore/LogPurger$Status;
      46: aload_0
      47: invokevirtual #35                 // Method writeRemovalEntries:()V
      50: aload_0
      51: getfield      #13                 // Field _objStore:Lcom/arjuna/ats/internal/arjuna/objectstore/LogStore;
      54: invokevirtual #36                 // Method com/arjuna/ats/internal/arjuna/objectstore/LogStore.truncateLogs:()Z
      57: pop
      58: goto          0
      61: astore_1
      62: goto          0
    Exception table:
       from    to  target type
           7    27    30   any
          30    33    30   any
           0    35    38   Class java/lang/Exception
          50    58    61   Class java/lang/Exception
}

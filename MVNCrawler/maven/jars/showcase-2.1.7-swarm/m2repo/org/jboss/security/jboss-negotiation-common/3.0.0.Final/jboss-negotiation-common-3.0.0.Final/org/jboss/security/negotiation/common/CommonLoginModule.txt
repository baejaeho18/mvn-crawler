Compiled from "CommonLoginModule.java"
public abstract class org.jboss.security.negotiation.common.CommonLoginModule extends org.jboss.security.auth.spi.AbstractServerLoginModule {
  private java.security.Principal identity;

  private char[] credential;

  public org.jboss.security.negotiation.common.CommonLoginModule();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jboss/security/auth/spi/AbstractServerLoginModule."<init>":()V
       4: return

  protected java.security.Principal getIdentity();
    Code:
       0: aload_0
       1: getfield      #2                  // Field identity:Ljava/security/Principal;
       4: areturn

  protected void setIdentity(java.security.Principal);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #2                  // Field identity:Ljava/security/Principal;
       5: return

  protected char[] getCredential();
    Code:
       0: aload_0
       1: getfield      #3                  // Field credential:[C
       4: areturn

  protected void processIdentityAndCredential() throws javax.security.auth.login.LoginException;
    Code:
       0: aload_0
       1: invokespecial #4                  // Method org/jboss/security/auth/spi/AbstractServerLoginModule.login:()Z
       4: iconst_1
       5: if_icmpne     109
       8: aload_0
       9: getfield      #5                  // Field sharedState:Ljava/util/Map;
      12: ldc           #6                  // String javax.security.auth.login.name
      14: invokeinterface #7,  2            // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      19: astore_1
      20: aload_1
      21: instanceof    #8                  // class java/security/Principal
      24: ifeq          38
      27: aload_0
      28: aload_1
      29: checkcast     #8                  // class java/security/Principal
      32: putfield      #2                  // Field identity:Ljava/security/Principal;
      35: goto          106
      38: aload_1
      39: invokevirtual #9                  // Method java/lang/Object.toString:()Ljava/lang/String;
      42: astore_2
      43: aload_0
      44: aload_0
      45: aload_2
      46: invokevirtual #10                 // Method createIdentity:(Ljava/lang/String;)Ljava/security/Principal;
      49: putfield      #2                  // Field identity:Ljava/security/Principal;
      52: goto          106
      55: astore_3
      56: aload_0
      57: getfield      #12                 // Field log:Lorg/jboss/logging/Logger;
      60: invokevirtual #13                 // Method org/jboss/logging/Logger.isDebugEnabled:()Z
      63: ifeq          76
      66: aload_0
      67: getfield      #12                 // Field log:Lorg/jboss/logging/Logger;
      70: ldc           #14                 // String Failed to create principal
      72: aload_3
      73: invokevirtual #15                 // Method org/jboss/logging/Logger.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      76: new           #16                 // class javax/security/auth/login/LoginException
      79: dup
      80: new           #17                 // class java/lang/StringBuilder
      83: dup
      84: invokespecial #18                 // Method java/lang/StringBuilder."<init>":()V
      87: ldc           #19                 // String Failed to create principal:
      89: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      92: aload_3
      93: invokevirtual #21                 // Method java/lang/Exception.getMessage:()Ljava/lang/String;
      96: invokevirtual #20                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      99: invokevirtual #22                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     102: invokespecial #23                 // Method javax/security/auth/login/LoginException."<init>":(Ljava/lang/String;)V
     105: athrow
     106: goto          205
     109: new           #24                 // class javax/security/auth/callback/NameCallback
     112: dup
     113: ldc           #25                 // String User name:
     115: ldc           #26                 // String guest
     117: invokespecial #27                 // Method javax/security/auth/callback/NameCallback."<init>":(Ljava/lang/String;Ljava/lang/String;)V
     120: astore_1
     121: new           #28                 // class javax/security/auth/callback/PasswordCallback
     124: dup
     125: ldc           #29                 // String Password:
     127: iconst_0
     128: invokespecial #30                 // Method javax/security/auth/callback/PasswordCallback."<init>":(Ljava/lang/String;Z)V
     131: astore_2
     132: iconst_2
     133: anewarray     #31                 // class javax/security/auth/callback/Callback
     136: dup
     137: iconst_0
     138: aload_1
     139: aastore
     140: dup
     141: iconst_1
     142: aload_2
     143: aastore
     144: astore_3
     145: aload_0
     146: getfield      #32                 // Field callbackHandler:Ljavax/security/auth/callback/CallbackHandler;
     149: aload_3
     150: invokeinterface #33,  2           // InterfaceMethod javax/security/auth/callback/CallbackHandler.handle:([Ljavax/security/auth/callback/Callback;)V
     155: aload_1
     156: invokevirtual #34                 // Method javax/security/auth/callback/NameCallback.getName:()Ljava/lang/String;
     159: astore        4
     161: aload_0
     162: aload_0
     163: aload         4
     165: invokevirtual #10                 // Method createIdentity:(Ljava/lang/String;)Ljava/security/Principal;
     168: putfield      #2                  // Field identity:Ljava/security/Principal;
     171: aload_0
     172: aload_2
     173: invokevirtual #35                 // Method javax/security/auth/callback/PasswordCallback.getPassword:()[C
     176: putfield      #3                  // Field credential:[C
     179: aload_2
     180: invokevirtual #36                 // Method javax/security/auth/callback/PasswordCallback.clearPassword:()V
     183: goto          205
     186: astore_1
     187: new           #16                 // class javax/security/auth/login/LoginException
     190: dup
     191: ldc           #37                 // String Unable to obtain username/credential
     193: invokespecial #23                 // Method javax/security/auth/login/LoginException."<init>":(Ljava/lang/String;)V
     196: astore_2
     197: aload_2
     198: aload_1
     199: invokevirtual #38                 // Method javax/security/auth/login/LoginException.initCause:(Ljava/lang/Throwable;)Ljava/lang/Throwable;
     202: pop
     203: aload_2
     204: athrow
     205: return
    Exception table:
       from    to  target type
          43    52    55   Class java/lang/Exception
         109   183   186   Class java/lang/Exception
}

Compiled from "RemoteNamingEjbClientContextSelector.java"
public class org.jboss.naming.remote.client.ejb.RemoteNamingEjbClientContextSelector implements org.jboss.ejb.client.ContextSelector<org.jboss.ejb.client.EJBClientContext> {
  private org.jboss.ejb.client.ContextSelector<org.jboss.ejb.client.EJBClientContext> delegate;

  private final java.lang.ThreadLocal<org.jboss.naming.remote.client.CurrentEjbClientConnection> currentContext;

  private final java.util.IdentityHashMap<org.jboss.remoting3.Connection, org.jboss.ejb.client.EJBClientContext> contextByConnection;

  public org.jboss.naming.remote.client.ejb.RemoteNamingEjbClientContextSelector();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class java/lang/ThreadLocal
       8: dup
       9: invokespecial #4                  // Method java/lang/ThreadLocal."<init>":()V
      12: putfield      #5                  // Field currentContext:Ljava/lang/ThreadLocal;
      15: aload_0
      16: new           #6                  // class java/util/IdentityHashMap
      19: dup
      20: invokespecial #7                  // Method java/util/IdentityHashMap."<init>":()V
      23: putfield      #1                  // Field contextByConnection:Ljava/util/IdentityHashMap;
      26: return

  public static synchronized org.jboss.ejb.client.ContextSelector<org.jboss.ejb.client.EJBClientContext> setupSelector();
    Code:
       0: new           #8                  // class org/jboss/naming/remote/client/ejb/RemoteNamingEjbClientContextSelector
       3: dup
       4: invokespecial #9                  // Method "<init>":()V
       7: astore_0
       8: aload_0
       9: invokestatic  #10                 // Method org/jboss/ejb/client/EJBClientContext.setSelector:(Lorg/jboss/ejb/client/ContextSelector;)Lorg/jboss/ejb/client/ContextSelector;
      12: astore_1
      13: aload_0
      14: aload_1
      15: putfield      #11                 // Field delegate:Lorg/jboss/ejb/client/ContextSelector;
      18: aload_0
      19: areturn

  public void setCurrent(org.jboss.naming.remote.client.CurrentEjbClientConnection);
    Code:
       0: aload_0
       1: getfield      #5                  // Field currentContext:Ljava/lang/ThreadLocal;
       4: aload_1
       5: invokevirtual #12                 // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
       8: return

  public void clearSelector();
    Code:
       0: aload_0
       1: getfield      #5                  // Field currentContext:Ljava/lang/ThreadLocal;
       4: invokevirtual #13                 // Method java/lang/ThreadLocal.remove:()V
       7: return

  public org.jboss.ejb.client.EJBClientContext getCurrent();
    Code:
       0: aload_0
       1: getfield      #5                  // Field currentContext:Ljava/lang/ThreadLocal;
       4: invokevirtual #14                 // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
       7: checkcast     #15                 // class org/jboss/naming/remote/client/CurrentEjbClientConnection
      10: astore_1
      11: aconst_null
      12: astore_2
      13: aload_1
      14: ifnull        26
      17: aload_0
      18: aload_1
      19: invokevirtual #16                 // Method org/jboss/naming/remote/client/CurrentEjbClientConnection.getConnection:()Lorg/jboss/remoting3/Connection;
      22: invokespecial #17                 // Method getContext:(Lorg/jboss/remoting3/Connection;)Lorg/jboss/ejb/client/EJBClientContext;
      25: astore_2
      26: aload_2
      27: ifnonnull     43
      30: aload_0
      31: getfield      #11                 // Field delegate:Lorg/jboss/ejb/client/ContextSelector;
      34: invokeinterface #18,  1           // InterfaceMethod org/jboss/ejb/client/ContextSelector.getCurrent:()Ljava/lang/Object;
      39: checkcast     #19                 // class org/jboss/ejb/client/EJBClientContext
      42: areturn
      43: aload_2
      44: areturn

  private org.jboss.ejb.client.EJBClientContext getContext(org.jboss.remoting3.Connection);
    Code:
       0: aload_0
       1: getfield      #1                  // Field contextByConnection:Ljava/util/IdentityHashMap;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #1                  // Field contextByConnection:Ljava/util/IdentityHashMap;
      11: aload_1
      12: invokevirtual #20                 // Method java/util/IdentityHashMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      15: checkcast     #19                 // class org/jboss/ejb/client/EJBClientContext
      18: astore_3
      19: aload_3
      20: ifnonnull     57
      23: invokestatic  #21                 // Method org/jboss/ejb/client/EJBClientContext.create:()Lorg/jboss/ejb/client/EJBClientContext;
      26: astore_3
      27: aload_3
      28: aload_1
      29: invokevirtual #22                 // Method org/jboss/ejb/client/EJBClientContext.registerConnection:(Lorg/jboss/remoting3/Connection;)V
      32: aload_0
      33: getfield      #1                  // Field contextByConnection:Ljava/util/IdentityHashMap;
      36: aload_1
      37: aload_3
      38: invokevirtual #23                 // Method java/util/IdentityHashMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      41: pop
      42: aload_1
      43: new           #24                 // class org/jboss/naming/remote/client/ejb/RemoteNamingEjbClientContextSelector$1
      46: dup
      47: aload_0
      48: invokespecial #25                 // Method org/jboss/naming/remote/client/ejb/RemoteNamingEjbClientContextSelector$1."<init>":(Lorg/jboss/naming/remote/client/ejb/RemoteNamingEjbClientContextSelector;)V
      51: invokeinterface #26,  2           // InterfaceMethod org/jboss/remoting3/Connection.addCloseHandler:(Lorg/jboss/remoting3/CloseHandler;)Lorg/jboss/remoting3/HandleableCloseable$Key;
      56: pop
      57: aload_3
      58: aload_2
      59: monitorexit
      60: areturn
      61: astore        4
      63: aload_2
      64: monitorexit
      65: aload         4
      67: athrow
    Exception table:
       from    to  target type
           7    60    61   any
          61    65    61   any

  public java.lang.Object getCurrent();
    Code:
       0: aload_0
       1: invokevirtual #27                 // Method getCurrent:()Lorg/jboss/ejb/client/EJBClientContext;
       4: areturn

  static java.util.IdentityHashMap access$000(org.jboss.naming.remote.client.ejb.RemoteNamingEjbClientContextSelector);
    Code:
       0: aload_0
       1: getfield      #1                  // Field contextByConnection:Ljava/util/IdentityHashMap;
       4: areturn
}

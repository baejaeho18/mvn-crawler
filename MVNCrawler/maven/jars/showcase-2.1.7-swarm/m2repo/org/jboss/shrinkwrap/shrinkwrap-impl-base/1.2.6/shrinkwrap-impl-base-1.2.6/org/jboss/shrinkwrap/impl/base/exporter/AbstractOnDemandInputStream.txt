Compiled from "AbstractOnDemandInputStream.java"
public abstract class org.jboss.shrinkwrap.impl.base.exporter.AbstractOnDemandInputStream<T extends java.io.OutputStream> extends java.io.InputStream {
  private static final int BUFFER_LENGTH;

  private final java.util.Iterator<org.jboss.shrinkwrap.api.Node> nodesIterator;

  protected T outputStream;

  private final java.io.ByteArrayOutputStream bufferedOutputStream;

  private java.io.InputStream currentNodeStream;

  private java.io.ByteArrayInputStream bufferInputStream;

  private boolean outputStreamClosed;

  private org.jboss.shrinkwrap.api.ArchivePath currentPath;

  public org.jboss.shrinkwrap.impl.base.exporter.AbstractOnDemandInputStream(org.jboss.shrinkwrap.api.Archive<?>);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/io/InputStream."<init>":()V
       4: aload_0
       5: new           #2                  // class java/io/ByteArrayOutputStream
       8: dup
       9: invokespecial #3                  // Method java/io/ByteArrayOutputStream."<init>":()V
      12: putfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
      15: aload_0
      16: iconst_0
      17: putfield      #5                  // Field outputStreamClosed:Z
      20: aload_0
      21: aconst_null
      22: putfield      #6                  // Field currentPath:Lorg/jboss/shrinkwrap/api/ArchivePath;
      25: aload_1
      26: invokeinterface #7,  1            // InterfaceMethod org/jboss/shrinkwrap/api/Archive.getContent:()Ljava/util/Map;
      31: invokeinterface #8,  1            // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      36: astore_2
      37: aload_0
      38: aload_2
      39: invokeinterface #9,  1            // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      44: putfield      #10                 // Field nodesIterator:Ljava/util/Iterator;
      47: return

  public int read() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #11                 // Field outputStream:Ljava/io/OutputStream;
       4: ifnonnull     26
       7: aload_0
       8: getfield      #5                  // Field outputStreamClosed:Z
      11: ifne          26
      14: aload_0
      15: aload_0
      16: aload_0
      17: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
      20: invokevirtual #12                 // Method createOutputStream:(Ljava/io/OutputStream;)Ljava/io/OutputStream;
      23: putfield      #11                 // Field outputStream:Ljava/io/OutputStream;
      26: aload_0
      27: getfield      #13                 // Field bufferInputStream:Ljava/io/ByteArrayInputStream;
      30: ifnull        43
      33: aload_0
      34: getfield      #13                 // Field bufferInputStream:Ljava/io/ByteArrayInputStream;
      37: invokevirtual #14                 // Method java/io/ByteArrayInputStream.read:()I
      40: goto          44
      43: iconst_m1
      44: istore_1
      45: iload_1
      46: iconst_m1
      47: if_icmpne     393
      50: aload_0
      51: getfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
      54: ifnull        128
      57: aload_0
      58: invokespecial #16                 // Method doCopy:()V
      61: aload_0
      62: new           #17                 // class java/io/ByteArrayInputStream
      65: dup
      66: aload_0
      67: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
      70: invokevirtual #18                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      73: invokespecial #19                 // Method java/io/ByteArrayInputStream."<init>":([B)V
      76: putfield      #13                 // Field bufferInputStream:Ljava/io/ByteArrayInputStream;
      79: aload_0
      80: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
      83: invokevirtual #20                 // Method java/io/ByteArrayOutputStream.reset:()V
      86: aload_0
      87: invokevirtual #21                 // Method read:()I
      90: ireturn
      91: astore_2
      92: new           #23                 // class org/jboss/shrinkwrap/api/exporter/ArchiveExportException
      95: dup
      96: new           #24                 // class java/lang/StringBuilder
      99: dup
     100: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
     103: ldc           #26                 // String Failed to write asset to output:
     105: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     108: aload_0
     109: getfield      #6                  // Field currentPath:Lorg/jboss/shrinkwrap/api/ArchivePath;
     112: invokeinterface #28,  1           // InterfaceMethod org/jboss/shrinkwrap/api/ArchivePath.get:()Ljava/lang/String;
     117: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     120: invokevirtual #29                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     123: aload_2
     124: invokespecial #30                 // Method org/jboss/shrinkwrap/api/exporter/ArchiveExportException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     127: athrow
     128: aload_0
     129: getfield      #10                 // Field nodesIterator:Ljava/util/Iterator;
     132: invokeinterface #31,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     137: ifeq          327
     140: aload_0
     141: getfield      #10                 // Field nodesIterator:Ljava/util/Iterator;
     144: invokeinterface #32,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     149: checkcast     #33                 // class org/jboss/shrinkwrap/api/Node
     152: astore_2
     153: aload_0
     154: aload_2
     155: invokeinterface #34,  1           // InterfaceMethod org/jboss/shrinkwrap/api/Node.getPath:()Lorg/jboss/shrinkwrap/api/ArchivePath;
     160: putfield      #6                  // Field currentPath:Lorg/jboss/shrinkwrap/api/ArchivePath;
     163: aload_0
     164: getfield      #6                  // Field currentPath:Lorg/jboss/shrinkwrap/api/ArchivePath;
     167: invokeinterface #28,  1           // InterfaceMethod org/jboss/shrinkwrap/api/ArchivePath.get:()Ljava/lang/String;
     172: invokestatic  #35                 // Method org/jboss/shrinkwrap/impl/base/path/PathUtil.optionallyRemovePrecedingSlash:(Ljava/lang/String;)Ljava/lang/String;
     175: astore_3
     176: aload_2
     177: invokeinterface #36,  1           // InterfaceMethod org/jboss/shrinkwrap/api/Node.getAsset:()Lorg/jboss/shrinkwrap/api/asset/Asset;
     182: ifnonnull     189
     185: iconst_1
     186: goto          190
     189: iconst_0
     190: istore        4
     192: aload_3
     193: astore        5
     195: iload         4
     197: ifeq          226
     200: aload         5
     202: invokestatic  #37                 // Method org/jboss/shrinkwrap/impl/base/path/PathUtil.optionallyAppendSlash:(Ljava/lang/String;)Ljava/lang/String;
     205: astore        5
     207: aload_0
     208: aload         5
     210: aload_2
     211: invokeinterface #36,  1           // InterfaceMethod org/jboss/shrinkwrap/api/Node.getAsset:()Lorg/jboss/shrinkwrap/api/asset/Asset;
     216: invokespecial #38                 // Method startAsset:(Ljava/lang/String;Lorg/jboss/shrinkwrap/api/asset/Asset;)V
     219: aload_0
     220: invokespecial #39                 // Method endAsset:()V
     223: goto          324
     226: aload_0
     227: aload         5
     229: aload_2
     230: invokeinterface #36,  1           // InterfaceMethod org/jboss/shrinkwrap/api/Node.getAsset:()Lorg/jboss/shrinkwrap/api/asset/Asset;
     235: invokespecial #38                 // Method startAsset:(Ljava/lang/String;Lorg/jboss/shrinkwrap/api/asset/Asset;)V
     238: aload_0
     239: aload_2
     240: invokeinterface #36,  1           // InterfaceMethod org/jboss/shrinkwrap/api/Node.getAsset:()Lorg/jboss/shrinkwrap/api/asset/Asset;
     245: invokeinterface #40,  1           // InterfaceMethod org/jboss/shrinkwrap/api/asset/Asset.openStream:()Ljava/io/InputStream;
     250: putfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
     253: aload_0
     254: invokespecial #16                 // Method doCopy:()V
     257: goto          299
     260: astore        6
     262: new           #23                 // class org/jboss/shrinkwrap/api/exporter/ArchiveExportException
     265: dup
     266: new           #24                 // class java/lang/StringBuilder
     269: dup
     270: invokespecial #25                 // Method java/lang/StringBuilder."<init>":()V
     273: ldc           #26                 // String Failed to write asset to output:
     275: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     278: aload_0
     279: getfield      #6                  // Field currentPath:Lorg/jboss/shrinkwrap/api/ArchivePath;
     282: invokeinterface #28,  1           // InterfaceMethod org/jboss/shrinkwrap/api/ArchivePath.get:()Ljava/lang/String;
     287: invokevirtual #27                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     290: invokevirtual #29                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     293: aload         6
     295: invokespecial #30                 // Method org/jboss/shrinkwrap/api/exporter/ArchiveExportException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     298: athrow
     299: aload_0
     300: new           #17                 // class java/io/ByteArrayInputStream
     303: dup
     304: aload_0
     305: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
     308: invokevirtual #18                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     311: invokespecial #19                 // Method java/io/ByteArrayInputStream."<init>":([B)V
     314: putfield      #13                 // Field bufferInputStream:Ljava/io/ByteArrayInputStream;
     317: aload_0
     318: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
     321: invokevirtual #20                 // Method java/io/ByteArrayOutputStream.reset:()V
     324: goto          388
     327: aload_0
     328: getfield      #5                  // Field outputStreamClosed:Z
     331: ifne          386
     334: aload_0
     335: getfield      #11                 // Field outputStream:Ljava/io/OutputStream;
     338: invokevirtual #41                 // Method java/io/OutputStream.close:()V
     341: aload_0
     342: iconst_1
     343: putfield      #5                  // Field outputStreamClosed:Z
     346: aload_0
     347: new           #17                 // class java/io/ByteArrayInputStream
     350: dup
     351: aload_0
     352: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
     355: invokevirtual #18                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
     358: invokespecial #19                 // Method java/io/ByteArrayInputStream."<init>":([B)V
     361: putfield      #13                 // Field bufferInputStream:Ljava/io/ByteArrayInputStream;
     364: aload_0
     365: getfield      #4                  // Field bufferedOutputStream:Ljava/io/ByteArrayOutputStream;
     368: invokevirtual #42                 // Method java/io/ByteArrayOutputStream.close:()V
     371: aload_0
     372: aconst_null
     373: putfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
     376: aload_0
     377: aconst_null
     378: putfield      #11                 // Field outputStream:Ljava/io/OutputStream;
     381: aload_0
     382: invokevirtual #21                 // Method read:()I
     385: ireturn
     386: iconst_m1
     387: ireturn
     388: aload_0
     389: invokevirtual #21                 // Method read:()I
     392: ireturn
     393: iload_1
     394: ireturn
    Exception table:
       from    to  target type
          57    90    91   Class java/lang/Throwable
         238   257   260   Class java/lang/Throwable

  private void doCopy() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
       4: aload_0
       5: getfield      #11                 // Field outputStream:Ljava/io/OutputStream;
       8: sipush        4096
      11: invokestatic  #44                 // Method org/jboss/shrinkwrap/impl/base/io/IOUtil.copy:(Ljava/io/InputStream;Ljava/io/OutputStream;I)I
      14: istore_1
      15: iload_1
      16: iconst_m1
      17: if_icmpne     36
      20: aload_0
      21: getfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
      24: invokevirtual #45                 // Method java/io/InputStream.close:()V
      27: aload_0
      28: aconst_null
      29: putfield      #15                 // Field currentNodeStream:Ljava/io/InputStream;
      32: aload_0
      33: invokespecial #39                 // Method endAsset:()V
      36: return

  private void startAsset(java.lang.String, org.jboss.shrinkwrap.api.asset.Asset) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #11                 // Field outputStream:Ljava/io/OutputStream;
       5: aload_1
       6: aload_2
       7: invokevirtual #46                 // Method putNextEntry:(Ljava/io/OutputStream;Ljava/lang/String;Lorg/jboss/shrinkwrap/api/asset/Asset;)V
      10: return

  private void endAsset() throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_0
       2: getfield      #11                 // Field outputStream:Ljava/io/OutputStream;
       5: invokevirtual #47                 // Method closeEntry:(Ljava/io/OutputStream;)V
       8: return

  protected abstract T createOutputStream(java.io.OutputStream) throws java.io.IOException;

  protected abstract void putNextEntry(T, java.lang.String, org.jboss.shrinkwrap.api.asset.Asset) throws java.io.IOException;

  protected abstract void closeEntry(T) throws java.io.IOException;
}

Compiled from "STATE_TRANSFER.java"
public class org.jgroups.protocols.pbcast.STATE_TRANSFER extends org.jgroups.stack.Protocol implements org.jgroups.util.ProcessingQueue$Handler<org.jgroups.Address> {
  protected long start;

  protected long stop;

  protected final java.util.concurrent.atomic.AtomicInteger num_state_reqs;

  protected final java.util.concurrent.atomic.AtomicLong num_bytes_sent;

  protected double avg_state_size;

  protected org.jgroups.Address local_addr;

  protected volatile org.jgroups.View view;

  protected final java.util.List<org.jgroups.Address> members;

  protected final org.jgroups.util.ProcessingQueue<org.jgroups.Address> state_requesters;

  protected volatile boolean waiting_for_state_response;

  protected boolean flushProtocolInStack;

  public org.jgroups.protocols.pbcast.STATE_TRANSFER();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jgroups/stack/Protocol."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicInteger
       8: dup
       9: iconst_0
      10: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicInteger."<init>":(I)V
      13: putfield      #4                  // Field num_state_reqs:Ljava/util/concurrent/atomic/AtomicInteger;
      16: aload_0
      17: new           #5                  // class java/util/concurrent/atomic/AtomicLong
      20: dup
      21: lconst_0
      22: invokespecial #6                  // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      25: putfield      #7                  // Field num_bytes_sent:Ljava/util/concurrent/atomic/AtomicLong;
      28: aload_0
      29: dconst_0
      30: putfield      #8                  // Field avg_state_size:D
      33: aload_0
      34: new           #9                  // class java/util/ArrayList
      37: dup
      38: invokespecial #10                 // Method java/util/ArrayList."<init>":()V
      41: putfield      #11                 // Field members:Ljava/util/List;
      44: aload_0
      45: new           #12                 // class org/jgroups/util/ProcessingQueue
      48: dup
      49: invokespecial #13                 // Method org/jgroups/util/ProcessingQueue."<init>":()V
      52: aload_0
      53: invokevirtual #14                 // Method org/jgroups/util/ProcessingQueue.setHandler:(Lorg/jgroups/util/ProcessingQueue$Handler;)Lorg/jgroups/util/ProcessingQueue;
      56: putfield      #15                 // Field state_requesters:Lorg/jgroups/util/ProcessingQueue;
      59: aload_0
      60: iconst_0
      61: putfield      #16                 // Field waiting_for_state_response:Z
      64: aload_0
      65: iconst_0
      66: putfield      #17                 // Field flushProtocolInStack:Z
      69: return

  public int getNumberOfStateRequests();
    Code:
       0: aload_0
       1: getfield      #4                  // Field num_state_reqs:Ljava/util/concurrent/atomic/AtomicInteger;
       4: invokevirtual #18                 // Method java/util/concurrent/atomic/AtomicInteger.get:()I
       7: ireturn

  public long getNumberOfStateBytesSent();
    Code:
       0: aload_0
       1: getfield      #7                  // Field num_bytes_sent:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
       7: lreturn

  public double getAverageStateSize();
    Code:
       0: aload_0
       1: getfield      #8                  // Field avg_state_size:D
       4: dreturn

  public java.util.List<java.lang.Integer> requiredDownServices();
    Code:
       0: iconst_2
       1: anewarray     #20                 // class java/lang/Integer
       4: dup
       5: iconst_0
       6: bipush        39
       8: invokestatic  #21                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      11: aastore
      12: dup
      13: iconst_1
      14: bipush        42
      16: invokestatic  #21                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      19: aastore
      20: invokestatic  #22                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      23: areturn

  public void resetStats();
    Code:
       0: aload_0
       1: invokespecial #23                 // Method org/jgroups/stack/Protocol.resetStats:()V
       4: aload_0
       5: getfield      #4                  // Field num_state_reqs:Ljava/util/concurrent/atomic/AtomicInteger;
       8: iconst_0
       9: invokevirtual #24                 // Method java/util/concurrent/atomic/AtomicInteger.set:(I)V
      12: aload_0
      13: getfield      #7                  // Field num_bytes_sent:Ljava/util/concurrent/atomic/AtomicLong;
      16: lconst_0
      17: invokevirtual #25                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
      20: aload_0
      21: dconst_0
      22: putfield      #8                  // Field avg_state_size:D
      25: return

  public void init() throws java.lang.Exception;
    Code:
       0: return

  public void start() throws java.lang.Exception;
    Code:
       0: new           #26                 // class java/util/HashMap
       3: dup
       4: invokespecial #27                 // Method java/util/HashMap."<init>":()V
       7: astore_1
       8: aload_1
       9: ldc           #28                 // String state_transfer
      11: getstatic     #29                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      14: invokeinterface #30,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      19: pop
      20: aload_1
      21: ldc           #31                 // String protocol_class
      23: aload_0
      24: invokevirtual #32                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      27: invokevirtual #33                 // Method java/lang/Class.getName:()Ljava/lang/String;
      30: invokeinterface #30,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      35: pop
      36: aload_0
      37: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
      40: new           #35                 // class org/jgroups/Event
      43: dup
      44: bipush        56
      46: aload_1
      47: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      50: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      53: pop
      54: return

  public void stop();
    Code:
       0: aload_0
       1: invokespecial #38                 // Method org/jgroups/stack/Protocol.stop:()V
       4: aload_0
       5: iconst_0
       6: putfield      #16                 // Field waiting_for_state_response:Z
       9: return

  public void closeBarrierAndSuspendStable();
    Code:
       0: aload_0
       1: invokevirtual #39                 // Method isDigestNeeded:()Z
       4: ifne          8
       7: return
       8: aload_0
       9: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
      12: ldc           #41                 // String %s: sending down CLOSE_BARRIER and SUSPEND_STABLE
      14: iconst_1
      15: anewarray     #42                 // class java/lang/Object
      18: dup
      19: iconst_0
      20: aload_0
      21: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      24: aastore
      25: invokeinterface #44,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
      30: aload_0
      31: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      34: new           #35                 // class org/jgroups/Event
      37: dup
      38: bipush        76
      40: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      43: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      46: pop
      47: aload_0
      48: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      51: new           #35                 // class org/jgroups/Event
      54: dup
      55: bipush        65
      57: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      60: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      63: pop
      64: return

  public void openBarrierAndResumeStable();
    Code:
       0: aload_0
       1: invokevirtual #39                 // Method isDigestNeeded:()Z
       4: ifne          8
       7: return
       8: aload_0
       9: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
      12: ldc           #48                 // String %s: sending down OPEN_BARRIER and RESUME_STABLE
      14: iconst_1
      15: anewarray     #42                 // class java/lang/Object
      18: dup
      19: iconst_0
      20: aload_0
      21: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      24: aastore
      25: invokeinterface #44,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
      30: aload_0
      31: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      34: new           #35                 // class org/jgroups/Event
      37: dup
      38: bipush        77
      40: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      43: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      46: pop
      47: aload_0
      48: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      51: new           #35                 // class org/jgroups/Event
      54: dup
      55: bipush        66
      57: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      60: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      63: pop
      64: return

  public void openBarrier();
    Code:
       0: aload_0
       1: invokevirtual #39                 // Method isDigestNeeded:()Z
       4: ifne          8
       7: return
       8: aload_0
       9: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
      12: ldc           #49                 // String %s: sending down OPEN_BARRIER
      14: iconst_1
      15: anewarray     #42                 // class java/lang/Object
      18: dup
      19: iconst_0
      20: aload_0
      21: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      24: aastore
      25: invokeinterface #44,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
      30: aload_0
      31: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      34: new           #35                 // class org/jgroups/Event
      37: dup
      38: bipush        77
      40: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      43: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      46: pop
      47: return

  public void resumeStable();
    Code:
       0: aload_0
       1: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
       4: ldc           #50                 // String %s: sending down RESUME_STABLE
       6: iconst_1
       7: anewarray     #42                 // class java/lang/Object
      10: dup
      11: iconst_0
      12: aload_0
      13: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      16: aastore
      17: invokeinterface #44,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
      22: aload_0
      23: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      26: new           #35                 // class org/jgroups/Event
      29: dup
      30: bipush        66
      32: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      35: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      38: pop
      39: return

  public java.lang.Object up(org.jgroups.Event);
    Code:
       0: aload_1
       1: invokevirtual #51                 // Method org/jgroups/Event.getType:()I
       4: lookupswitch  { // 4
                     1: 48
                     6: 193
                    15: 193
                    56: 207
               default: 244
          }
      48: aload_1
      49: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
      52: checkcast     #53                 // class org/jgroups/Message
      55: astore_2
      56: aload_2
      57: aload_0
      58: getfield      #54                 // Field id:S
      61: invokevirtual #55                 // Method org/jgroups/Message.getHeader:(S)Lorg/jgroups/Header;
      64: checkcast     #56                 // class org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader
      67: astore_3
      68: aload_3
      69: ifnonnull     75
      72: goto          244
      75: aload_3
      76: getfield      #57                 // Field org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader.type:B
      79: tableswitch   { // 1 to 3
                     1: 104
                     2: 118
                     3: 137
               default: 159
          }
     104: aload_0
     105: getfield      #15                 // Field state_requesters:Lorg/jgroups/util/ProcessingQueue;
     108: aload_2
     109: invokevirtual #58                 // Method org/jgroups/Message.getSrc:()Lorg/jgroups/Address;
     112: invokevirtual #59                 // Method org/jgroups/util/ProcessingQueue.add:(Ljava/lang/Object;)V
     115: goto          191
     118: aload_0
     119: aload_3
     120: invokevirtual #60                 // Method org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader.getDigest:()Lorg/jgroups/util/Digest;
     123: aload_2
     124: invokevirtual #58                 // Method org/jgroups/Message.getSrc:()Lorg/jgroups/Address;
     127: aload_2
     128: invokevirtual #61                 // Method org/jgroups/Message.getBuffer:()[B
     131: invokevirtual #62                 // Method handleStateRsp:(Lorg/jgroups/util/Digest;Lorg/jgroups/Address;[B)V
     134: goto          191
     137: aload_0
     138: aload_2
     139: invokevirtual #58                 // Method org/jgroups/Message.getSrc:()Lorg/jgroups/Address;
     142: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     145: aload_0
     146: aload_2
     147: invokevirtual #64                 // Method org/jgroups/Message.getObject:()Ljava/lang/Object;
     150: checkcast     #65                 // class java/lang/Throwable
     153: invokevirtual #66                 // Method handleException:(Ljava/lang/Throwable;)V
     156: goto          191
     159: aload_0
     160: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     163: ldc           #67                 // String %s: type %s not known in StateHeader
     165: iconst_2
     166: anewarray     #42                 // class java/lang/Object
     169: dup
     170: iconst_0
     171: aload_0
     172: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     175: aastore
     176: dup
     177: iconst_1
     178: aload_3
     179: getfield      #57                 // Field org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader.type:B
     182: invokestatic  #68                 // Method java/lang/Byte.valueOf:(B)Ljava/lang/Byte;
     185: aastore
     186: invokeinterface #69,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     191: aconst_null
     192: areturn
     193: aload_0
     194: aload_1
     195: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
     198: checkcast     #70                 // class org/jgroups/View
     201: invokevirtual #71                 // Method handleViewChange:(Lorg/jgroups/View;)V
     204: goto          244
     207: aload_1
     208: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
     211: checkcast     #72                 // class java/util/Map
     214: astore        4
     216: aload         4
     218: ifnull        244
     221: aload         4
     223: ldc           #28                 // String state_transfer
     225: invokeinterface #73,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     230: ifeq          244
     233: aload_0
     234: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     237: ldc           #74                 // String Protocol stack cannot contain two state transfer protocols. Remove either one of them
     239: invokeinterface #75,  2           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;)V
     244: aload_0
     245: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     248: aload_1
     249: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     252: areturn

  public java.lang.Object down(org.jgroups.Event);
    Code:
       0: aload_1
       1: invokevirtual #51                 // Method org/jgroups/Event.getType:()I
       4: lookupswitch  { // 5
                     6: 56
                     8: 328
                    15: 56
                    19: 70
                    56: 294
               default: 339
          }
      56: aload_0
      57: aload_1
      58: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
      61: checkcast     #70                 // class org/jgroups/View
      64: invokevirtual #71                 // Method handleViewChange:(Lorg/jgroups/View;)V
      67: goto          339
      70: aload_1
      71: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
      74: checkcast     #76                 // class org/jgroups/stack/StateTransferInfo
      77: astore_3
      78: aload_3
      79: getfield      #77                 // Field org/jgroups/stack/StateTransferInfo.target:Lorg/jgroups/Address;
      82: ifnonnull     93
      85: aload_0
      86: invokevirtual #78                 // Method determineCoordinator:()Lorg/jgroups/Address;
      89: astore_2
      90: goto          133
      93: aload_3
      94: getfield      #77                 // Field org/jgroups/stack/StateTransferInfo.target:Lorg/jgroups/Address;
      97: astore_2
      98: aload_2
      99: aload_0
     100: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     103: invokevirtual #79                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     106: ifeq          133
     109: aload_0
     110: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     113: ldc           #80                 // String %s: cannot fetch state from myself
     115: iconst_1
     116: anewarray     #42                 // class java/lang/Object
     119: dup
     120: iconst_0
     121: aload_0
     122: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     125: aastore
     126: invokeinterface #69,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     131: aconst_null
     132: astore_2
     133: aload_2
     134: ifnonnull     186
     137: aload_0
     138: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     141: ldc           #81                 // String %s: first member (no state)
     143: iconst_1
     144: anewarray     #42                 // class java/lang/Object
     147: dup
     148: iconst_0
     149: aload_0
     150: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     153: aastore
     154: invokeinterface #82,  3           // InterfaceMethod org/jgroups/logging/Log.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     159: aload_0
     160: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     163: new           #35                 // class org/jgroups/Event
     166: dup
     167: bipush        20
     169: new           #76                 // class org/jgroups/stack/StateTransferInfo
     172: dup
     173: invokespecial #83                 // Method org/jgroups/stack/StateTransferInfo."<init>":()V
     176: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     179: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     182: pop
     183: goto          292
     186: new           #53                 // class org/jgroups/Message
     189: dup
     190: aload_2
     191: invokespecial #84                 // Method org/jgroups/Message."<init>":(Lorg/jgroups/Address;)V
     194: aload_0
     195: getfield      #54                 // Field id:S
     198: new           #56                 // class org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader
     201: dup
     202: iconst_1
     203: invokespecial #85                 // Method org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader."<init>":(B)V
     206: invokevirtual #86                 // Method org/jgroups/Message.putHeader:(SLorg/jgroups/Header;)Lorg/jgroups/Message;
     209: iconst_3
     210: anewarray     #87                 // class org/jgroups/Message$Flag
     213: dup
     214: iconst_0
     215: getstatic     #88                 // Field org/jgroups/Message$Flag.DONT_BUNDLE:Lorg/jgroups/Message$Flag;
     218: aastore
     219: dup
     220: iconst_1
     221: getstatic     #89                 // Field org/jgroups/Message$Flag.OOB:Lorg/jgroups/Message$Flag;
     224: aastore
     225: dup
     226: iconst_2
     227: getstatic     #90                 // Field org/jgroups/Message$Flag.SKIP_BARRIER:Lorg/jgroups/Message$Flag;
     230: aastore
     231: invokevirtual #91                 // Method org/jgroups/Message.setFlag:([Lorg/jgroups/Message$Flag;)Lorg/jgroups/Message;
     234: astore        4
     236: aload_0
     237: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     240: ldc           #92                 // String %s: asking %s for state
     242: iconst_2
     243: anewarray     #42                 // class java/lang/Object
     246: dup
     247: iconst_0
     248: aload_0
     249: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     252: aastore
     253: dup
     254: iconst_1
     255: aload_2
     256: aastore
     257: invokeinterface #82,  3           // InterfaceMethod org/jgroups/logging/Log.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     262: aload_0
     263: iconst_1
     264: putfield      #16                 // Field waiting_for_state_response:Z
     267: aload_0
     268: invokestatic  #93                 // Method java/lang/System.currentTimeMillis:()J
     271: putfield      #94                 // Field start:J
     274: aload_0
     275: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
     278: new           #35                 // class org/jgroups/Event
     281: dup
     282: iconst_1
     283: aload         4
     285: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     288: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
     291: pop
     292: aconst_null
     293: areturn
     294: aload_1
     295: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
     298: checkcast     #72                 // class java/util/Map
     301: astore        4
     303: aload         4
     305: ifnull        339
     308: aload         4
     310: ldc           #95                 // String flush_supported
     312: invokeinterface #73,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     317: ifeq          339
     320: aload_0
     321: iconst_1
     322: putfield      #17                 // Field flushProtocolInStack:Z
     325: goto          339
     328: aload_0
     329: aload_1
     330: invokevirtual #52                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
     333: checkcast     #96                 // class org/jgroups/Address
     336: putfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     339: aload_0
     340: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
     343: aload_1
     344: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
     347: areturn

  protected boolean isDigestNeeded();
    Code:
       0: aload_0
       1: getfield      #17                 // Field flushProtocolInStack:Z
       4: ifne          11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  protected void punchHoleFor(org.jgroups.Address);
    Code:
       0: aload_0
       1: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
       4: new           #35                 // class org/jgroups/Event
       7: dup
       8: bipush        106
      10: aload_1
      11: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      14: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      17: pop
      18: return

  protected void closeHoleFor(org.jgroups.Address);
    Code:
       0: aload_0
       1: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
       4: new           #35                 // class org/jgroups/Event
       7: dup
       8: bipush        107
      10: aload_1
      11: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      14: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      17: pop
      18: return

  protected org.jgroups.Address determineCoordinator();
    Code:
       0: aload_0
       1: getfield      #11                 // Field members:Ljava/util/List;
       4: dup
       5: astore_1
       6: monitorenter
       7: aload_0
       8: getfield      #11                 // Field members:Ljava/util/List;
      11: invokeinterface #97,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      16: astore_2
      17: aload_2
      18: invokeinterface #98,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          54
      26: aload_2
      27: invokeinterface #99,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #96                 // class org/jgroups/Address
      35: astore_3
      36: aload_0
      37: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      40: aload_3
      41: invokevirtual #79                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      44: ifne          51
      47: aload_3
      48: aload_1
      49: monitorexit
      50: areturn
      51: goto          17
      54: aload_1
      55: monitorexit
      56: goto          66
      59: astore        4
      61: aload_1
      62: monitorexit
      63: aload         4
      65: athrow
      66: aconst_null
      67: areturn
    Exception table:
       from    to  target type
           7    50    59   any
          51    56    59   any
          59    63    59   any

  protected void handleViewChange(org.jgroups.View);
    Code:
       0: aload_1
       1: invokevirtual #100                // Method org/jgroups/View.getMembers:()Ljava/util/List;
       4: astore_3
       5: iconst_0
       6: istore        4
       8: aload_0
       9: aload_1
      10: putfield      #101                // Field view:Lorg/jgroups/View;
      13: aload_0
      14: getfield      #11                 // Field members:Ljava/util/List;
      17: dup
      18: astore        5
      20: monitorenter
      21: aload_0
      22: getfield      #11                 // Field members:Ljava/util/List;
      25: invokeinterface #102,  1          // InterfaceMethod java/util/List.isEmpty:()Z
      30: ifne          49
      33: aload_0
      34: getfield      #11                 // Field members:Ljava/util/List;
      37: iconst_0
      38: invokeinterface #103,  2          // InterfaceMethod java/util/List.get:(I)Ljava/lang/Object;
      43: checkcast     #96                 // class org/jgroups/Address
      46: goto          50
      49: aconst_null
      50: astore_2
      51: aload_0
      52: getfield      #11                 // Field members:Ljava/util/List;
      55: invokeinterface #104,  1          // InterfaceMethod java/util/List.clear:()V
      60: aload_0
      61: getfield      #11                 // Field members:Ljava/util/List;
      64: aload_3
      65: invokeinterface #105,  2          // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      70: pop
      71: aload_0
      72: getfield      #16                 // Field waiting_for_state_response:Z
      75: ifeq          98
      78: aload_2
      79: ifnull        98
      82: aload_0
      83: getfield      #11                 // Field members:Ljava/util/List;
      86: aload_2
      87: invokeinterface #106,  2          // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      92: ifne          98
      95: iconst_1
      96: istore        4
      98: aload         5
     100: monitorexit
     101: goto          112
     104: astore        6
     106: aload         5
     108: monitorexit
     109: aload         6
     111: athrow
     112: iload         4
     114: ifeq          211
     117: aload_0
     118: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     121: ldc           #107                // String %s: discovered that the state provider (%s) left
     123: iconst_2
     124: anewarray     #42                 // class java/lang/Object
     127: dup
     128: iconst_0
     129: aload_0
     130: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     133: aastore
     134: dup
     135: iconst_1
     136: aload_2
     137: aastore
     138: invokeinterface #108,  3          // InterfaceMethod org/jgroups/logging/Log.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     143: aload_0
     144: iconst_0
     145: putfield      #16                 // Field waiting_for_state_response:Z
     148: new           #109                // class java/io/EOFException
     151: dup
     152: new           #110                // class java/lang/StringBuilder
     155: dup
     156: invokespecial #111                // Method java/lang/StringBuilder."<init>":()V
     159: ldc           #112                // String state provider
     161: invokevirtual #113                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     164: aload_2
     165: invokevirtual #114                // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     168: ldc           #115                // String  left
     170: invokevirtual #113                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     173: invokevirtual #116                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     176: invokespecial #117                // Method java/io/EOFException."<init>":(Ljava/lang/String;)V
     179: astore        5
     181: aload_0
     182: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     185: new           #35                 // class org/jgroups/Event
     188: dup
     189: bipush        20
     191: new           #118                // class org/jgroups/util/StateTransferResult
     194: dup
     195: aload         5
     197: invokespecial #119                // Method org/jgroups/util/StateTransferResult."<init>":(Ljava/lang/Throwable;)V
     200: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     203: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     206: pop
     207: aload_0
     208: invokevirtual #120                // Method openBarrierAndResumeStable:()V
     211: aload_0
     212: getfield      #15                 // Field state_requesters:Lorg/jgroups/util/ProcessingQueue;
     215: aload_3
     216: invokevirtual #121                // Method org/jgroups/util/ProcessingQueue.retainAll:(Ljava/util/Collection;)Z
     219: pop
     220: return
    Exception table:
       from    to  target type
          21   101   104   any
         104   109   104   any

  protected void handleException(java.lang.Throwable);
    Code:
       0: aload_0
       1: invokevirtual #39                 // Method isDigestNeeded:()Z
       4: ifeq          11
       7: aload_0
       8: invokevirtual #120                // Method openBarrierAndResumeStable:()V
      11: aload_0
      12: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
      15: new           #35                 // class org/jgroups/Event
      18: dup
      19: bipush        20
      21: new           #118                // class org/jgroups/util/StateTransferResult
      24: dup
      25: aload_1
      26: invokespecial #119                // Method org/jgroups/util/StateTransferResult."<init>":(Ljava/lang/Throwable;)V
      29: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      32: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      35: pop
      36: return

  public void handle(org.jgroups.Address);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #122                // Method handleStateReq:(Lorg/jgroups/Address;)V
       5: return

  protected void handleStateReq(org.jgroups.Address);
    Code:
       0: aload_1
       1: ifnonnull     5
       4: return
       5: aload_0
       6: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
       9: ldc           #123                // String %s: received state request from %s
      11: iconst_2
      12: anewarray     #42                 // class java/lang/Object
      15: dup
      16: iconst_0
      17: aload_0
      18: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      21: aastore
      22: dup
      23: iconst_1
      24: aload_1
      25: aastore
      26: invokeinterface #82,  3           // InterfaceMethod org/jgroups/logging/Log.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
      31: aconst_null
      32: astore_2
      33: aload_0
      34: invokevirtual #39                 // Method isDigestNeeded:()Z
      37: ifeq          100
      40: aload_0
      41: aload_1
      42: invokevirtual #124                // Method punchHoleFor:(Lorg/jgroups/Address;)V
      45: aload_0
      46: invokevirtual #125                // Method closeBarrierAndSuspendStable:()V
      49: aload_0
      50: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      53: getstatic     #126                // Field org/jgroups/Event.GET_DIGEST_EVT:Lorg/jgroups/Event;
      56: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      59: checkcast     #127                // class org/jgroups/util/Digest
      62: astore_2
      63: aload_0
      64: invokevirtual #128                // Method openBarrier:()V
      67: goto          100
      70: astore_3
      71: aload_0
      72: aload_1
      73: aload_3
      74: invokevirtual #129                // Method sendException:(Lorg/jgroups/Address;Ljava/lang/Throwable;)V
      77: aload_0
      78: invokevirtual #130                // Method resumeStable:()V
      81: aload_0
      82: aload_1
      83: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
      86: aload_0
      87: invokevirtual #128                // Method openBarrier:()V
      90: return
      91: astore        4
      93: aload_0
      94: invokevirtual #128                // Method openBarrier:()V
      97: aload         4
      99: athrow
     100: aload_0
     101: aload_1
     102: aload_2
     103: invokevirtual #131                // Method getStateFromApplication:(Lorg/jgroups/Address;Lorg/jgroups/util/Digest;)V
     106: aload_0
     107: invokevirtual #39                 // Method isDigestNeeded:()Z
     110: ifeq          172
     113: aload_0
     114: aload_1
     115: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     118: aload_0
     119: invokevirtual #130                // Method resumeStable:()V
     122: goto          172
     125: astore_3
     126: aload_0
     127: aload_1
     128: aload_3
     129: invokevirtual #129                // Method sendException:(Lorg/jgroups/Address;Ljava/lang/Throwable;)V
     132: aload_0
     133: invokevirtual #39                 // Method isDigestNeeded:()Z
     136: ifeq          172
     139: aload_0
     140: aload_1
     141: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     144: aload_0
     145: invokevirtual #130                // Method resumeStable:()V
     148: goto          172
     151: astore        5
     153: aload_0
     154: invokevirtual #39                 // Method isDigestNeeded:()Z
     157: ifeq          169
     160: aload_0
     161: aload_1
     162: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     165: aload_0
     166: invokevirtual #130                // Method resumeStable:()V
     169: aload         5
     171: athrow
     172: return
    Exception table:
       from    to  target type
          40    63    70   Class java/lang/Throwable
          40    63    91   any
          70    86    91   any
          91    93    91   any
         100   106   125   Class java/lang/Throwable
         100   106   151   any
         125   132   151   any
         151   153   151   any

  protected void getStateFromApplication(org.jgroups.Address, org.jgroups.util.Digest);
    Code:
       0: aload_0
       1: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
       4: new           #35                 // class org/jgroups/Event
       7: dup
       8: bipush        17
      10: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
      13: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      16: checkcast     #76                 // class org/jgroups/stack/StateTransferInfo
      19: astore_3
      20: aload_3
      21: getfield      #132                // Field org/jgroups/stack/StateTransferInfo.state:[B
      24: astore        4
      26: aload_0
      27: getfield      #133                // Field stats:Z
      30: ifeq          77
      33: aload_0
      34: getfield      #4                  // Field num_state_reqs:Ljava/util/concurrent/atomic/AtomicInteger;
      37: invokevirtual #134                // Method java/util/concurrent/atomic/AtomicInteger.incrementAndGet:()I
      40: pop
      41: aload         4
      43: ifnull        58
      46: aload_0
      47: getfield      #7                  // Field num_bytes_sent:Ljava/util/concurrent/atomic/AtomicLong;
      50: aload         4
      52: arraylength
      53: i2l
      54: invokevirtual #135                // Method java/util/concurrent/atomic/AtomicLong.addAndGet:(J)J
      57: pop2
      58: aload_0
      59: aload_0
      60: getfield      #7                  // Field num_bytes_sent:Ljava/util/concurrent/atomic/AtomicLong;
      63: invokevirtual #136                // Method java/util/concurrent/atomic/AtomicLong.doubleValue:()D
      66: aload_0
      67: getfield      #4                  // Field num_state_reqs:Ljava/util/concurrent/atomic/AtomicInteger;
      70: invokevirtual #137                // Method java/util/concurrent/atomic/AtomicInteger.doubleValue:()D
      73: ddiv
      74: putfield      #8                  // Field avg_state_size:D
      77: new           #53                 // class org/jgroups/Message
      80: dup
      81: aload_1
      82: aload         4
      84: invokespecial #138                // Method org/jgroups/Message."<init>":(Lorg/jgroups/Address;[B)V
      87: aload_0
      88: getfield      #54                 // Field id:S
      91: new           #56                 // class org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader
      94: dup
      95: iconst_2
      96: aload_2
      97: invokespecial #139                // Method org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader."<init>":(BLorg/jgroups/util/Digest;)V
     100: invokevirtual #86                 // Method org/jgroups/Message.putHeader:(SLorg/jgroups/Header;)Lorg/jgroups/Message;
     103: astore        5
     105: aload_0
     106: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
     109: ldc           #140                // String %s: sending state to %s (size=%s)
     111: iconst_3
     112: anewarray     #42                 // class java/lang/Object
     115: dup
     116: iconst_0
     117: aload_0
     118: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
     121: aastore
     122: dup
     123: iconst_1
     124: aload         5
     126: invokevirtual #141                // Method org/jgroups/Message.getDest:()Lorg/jgroups/Address;
     129: aastore
     130: dup
     131: iconst_2
     132: aload         4
     134: ifnull        144
     137: aload         4
     139: arraylength
     140: i2l
     141: goto          145
     144: lconst_0
     145: invokestatic  #142                // Method org/jgroups/util/Util.printBytes:(J)Ljava/lang/String;
     148: aastore
     149: invokeinterface #44,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
     154: aload_0
     155: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
     158: new           #35                 // class org/jgroups/Event
     161: dup
     162: iconst_1
     163: aload         5
     165: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     168: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
     171: pop
     172: return

  protected void sendException(org.jgroups.Address, java.lang.Throwable);
    Code:
       0: new           #53                 // class org/jgroups/Message
       3: dup
       4: aload_1
       5: aload_2
       6: invokespecial #143                // Method org/jgroups/Message."<init>":(Lorg/jgroups/Address;Ljava/lang/Object;)V
       9: aload_0
      10: invokevirtual #144                // Method getId:()S
      13: new           #56                 // class org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader
      16: dup
      17: iconst_3
      18: invokespecial #85                 // Method org/jgroups/protocols/pbcast/STATE_TRANSFER$StateHeader."<init>":(B)V
      21: invokevirtual #86                 // Method org/jgroups/Message.putHeader:(SLorg/jgroups/Header;)Lorg/jgroups/Message;
      24: astore_3
      25: aload_0
      26: new           #35                 // class org/jgroups/Event
      29: dup
      30: iconst_1
      31: aload_3
      32: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      35: invokevirtual #145                // Method down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      38: pop
      39: goto          73
      42: astore_3
      43: aload_0
      44: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
      47: ldc           #146                // String %s: failed sending exception %s to %s
      49: iconst_3
      50: anewarray     #42                 // class java/lang/Object
      53: dup
      54: iconst_0
      55: aload_0
      56: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      59: aastore
      60: dup
      61: iconst_1
      62: aload_2
      63: aastore
      64: dup
      65: iconst_2
      66: aload_1
      67: aastore
      68: invokeinterface #69,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
      73: return
    Exception table:
       from    to  target type
           0    39    42   Class java/lang/Throwable

  protected void handleStateRsp(org.jgroups.util.Digest, org.jgroups.Address, byte[]);
    Code:
       0: aload_0
       1: invokevirtual #39                 // Method isDigestNeeded:()Z
       4: ifeq          38
       7: aload_0
       8: aload_2
       9: invokevirtual #124                // Method punchHoleFor:(Lorg/jgroups/Address;)V
      12: aload_0
      13: invokevirtual #125                // Method closeBarrierAndSuspendStable:()V
      16: aload_1
      17: ifnull        38
      20: aload_0
      21: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      24: new           #35                 // class org/jgroups/Event
      27: dup
      28: bipush        42
      30: aload_1
      31: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      34: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      37: pop
      38: aload_0
      39: iconst_0
      40: putfield      #16                 // Field waiting_for_state_response:Z
      43: aload_0
      44: invokestatic  #93                 // Method java/lang/System.currentTimeMillis:()J
      47: putfield      #147                // Field stop:J
      50: aload_0
      51: getfield      #40                 // Field log:Lorg/jgroups/logging/Log;
      54: ldc           #148                // String %s: received state, size=%s, time=%d milliseconds
      56: iconst_3
      57: anewarray     #42                 // class java/lang/Object
      60: dup
      61: iconst_0
      62: aload_0
      63: getfield      #43                 // Field local_addr:Lorg/jgroups/Address;
      66: aastore
      67: dup
      68: iconst_1
      69: aload_3
      70: ifnonnull     78
      73: ldc           #149                // String 0
      75: goto          84
      78: aload_3
      79: arraylength
      80: i2l
      81: invokestatic  #142                // Method org/jgroups/util/Util.printBytes:(J)Ljava/lang/String;
      84: aastore
      85: dup
      86: iconst_2
      87: aload_0
      88: getfield      #147                // Field stop:J
      91: aload_0
      92: getfield      #94                 // Field start:J
      95: lsub
      96: invokestatic  #150                // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
      99: aastore
     100: invokeinterface #82,  3           // InterfaceMethod org/jgroups/logging/Log.debug:(Ljava/lang/String;[Ljava/lang/Object;)V
     105: new           #118                // class org/jgroups/util/StateTransferResult
     108: dup
     109: aload_3
     110: invokespecial #151                // Method org/jgroups/util/StateTransferResult."<init>":([B)V
     113: astore        4
     115: aload_0
     116: getfield      #34                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     119: new           #35                 // class org/jgroups/Event
     122: dup
     123: bipush        20
     125: aload         4
     127: invokespecial #36                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     130: invokevirtual #37                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     133: pop
     134: aload_0
     135: getfield      #45                 // Field down_prot:Lorg/jgroups/stack/Protocol;
     138: new           #35                 // class org/jgroups/Event
     141: dup
     142: bipush        108
     144: invokespecial #46                 // Method org/jgroups/Event."<init>":(I)V
     147: invokevirtual #47                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
     150: pop
     151: aload_0
     152: invokevirtual #39                 // Method isDigestNeeded:()Z
     155: ifeq          218
     158: aload_0
     159: aload_2
     160: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     163: aload_0
     164: invokevirtual #120                // Method openBarrierAndResumeStable:()V
     167: goto          218
     170: astore        4
     172: aload_0
     173: aload         4
     175: invokevirtual #66                 // Method handleException:(Ljava/lang/Throwable;)V
     178: aload_0
     179: invokevirtual #39                 // Method isDigestNeeded:()Z
     182: ifeq          218
     185: aload_0
     186: aload_2
     187: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     190: aload_0
     191: invokevirtual #120                // Method openBarrierAndResumeStable:()V
     194: goto          218
     197: astore        5
     199: aload_0
     200: invokevirtual #39                 // Method isDigestNeeded:()Z
     203: ifeq          215
     206: aload_0
     207: aload_2
     208: invokevirtual #63                 // Method closeHoleFor:(Lorg/jgroups/Address;)V
     211: aload_0
     212: invokevirtual #120                // Method openBarrierAndResumeStable:()V
     215: aload         5
     217: athrow
     218: return
    Exception table:
       from    to  target type
           0   151   170   Class java/lang/Throwable
           0   151   197   any
         170   178   197   any
         197   199   197   any

  public void handle(java.lang.Object);
    Code:
       0: aload_0
       1: aload_1
       2: checkcast     #96                 // class org/jgroups/Address
       5: invokevirtual #152                // Method handle:(Lorg/jgroups/Address;)V
       8: return
}

Compiled from "NioServerPerfTest.java"
public class org.jgroups.tests.NioServerPerfTest {
  protected java.nio.channels.ServerSocketChannel ch;

  protected java.nio.channels.Selector selector;

  protected volatile boolean running;

  protected java.nio.ByteBuffer buffer;

  protected final java.util.concurrent.atomic.AtomicLong total_bytes_received;

  protected final java.util.concurrent.atomic.AtomicLong total_msgs;

  protected final java.util.concurrent.atomic.AtomicLong start;

  public static final long BYTES_TO_SEND;

  public static final int SIZE;

  public org.jgroups.tests.NioServerPerfTest();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: iconst_1
       6: putfield      #2                  // Field running:Z
       9: aload_0
      10: new           #3                  // class java/util/concurrent/atomic/AtomicLong
      13: dup
      14: lconst_0
      15: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      18: putfield      #5                  // Field total_bytes_received:Ljava/util/concurrent/atomic/AtomicLong;
      21: aload_0
      22: new           #3                  // class java/util/concurrent/atomic/AtomicLong
      25: dup
      26: lconst_0
      27: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      30: putfield      #6                  // Field total_msgs:Ljava/util/concurrent/atomic/AtomicLong;
      33: aload_0
      34: new           #3                  // class java/util/concurrent/atomic/AtomicLong
      37: dup
      38: lconst_0
      39: invokespecial #4                  // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      42: putfield      #7                  // Field start:Ljava/util/concurrent/atomic/AtomicLong;
      45: return

  protected static java.nio.ByteBuffer create(int, boolean);
    Code:
       0: iload_1
       1: ifeq          11
       4: iload_0
       5: invokestatic  #8                  // Method java/nio/ByteBuffer.allocateDirect:(I)Ljava/nio/ByteBuffer;
       8: goto          15
      11: iload_0
      12: invokestatic  #9                  // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
      15: areturn

  protected void start(boolean) throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokestatic  #10                 // Method java/nio/channels/Selector.open:()Ljava/nio/channels/Selector;
       4: putfield      #11                 // Field selector:Ljava/nio/channels/Selector;
       7: aload_0
       8: invokestatic  #12                 // Method java/nio/channels/ServerSocketChannel.open:()Ljava/nio/channels/ServerSocketChannel;
      11: putfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
      14: aload_0
      15: getfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
      18: new           #14                 // class java/net/InetSocketAddress
      21: dup
      22: ldc           #15                 // String 0.0.0.0
      24: sipush        7500
      27: invokespecial #16                 // Method java/net/InetSocketAddress."<init>":(Ljava/lang/String;I)V
      30: invokevirtual #17                 // Method java/nio/channels/ServerSocketChannel.bind:(Ljava/net/SocketAddress;)Ljava/nio/channels/ServerSocketChannel;
      33: pop
      34: aload_0
      35: getfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
      38: iconst_0
      39: invokevirtual #18                 // Method java/nio/channels/ServerSocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
      42: pop
      43: aload_0
      44: getfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
      47: aload_0
      48: getfield      #11                 // Field selector:Ljava/nio/channels/Selector;
      51: bipush        16
      53: aconst_null
      54: invokevirtual #19                 // Method java/nio/channels/ServerSocketChannel.register:(Ljava/nio/channels/Selector;ILjava/lang/Object;)Ljava/nio/channels/SelectionKey;
      57: pop
      58: getstatic     #20                 // Field java/lang/System.out:Ljava/io/PrintStream;
      61: ldc           #21                 // String -- server ready
      63: invokevirtual #22                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      66: aload_0
      67: getfield      #2                  // Field running:Z
      70: ifeq          260
      73: aload_0
      74: getfield      #11                 // Field selector:Ljava/nio/channels/Selector;
      77: invokevirtual #23                 // Method java/nio/channels/Selector.select:()I
      80: pop
      81: aload_0
      82: getfield      #11                 // Field selector:Ljava/nio/channels/Selector;
      85: invokevirtual #24                 // Method java/nio/channels/Selector.selectedKeys:()Ljava/util/Set;
      88: astore_2
      89: aload_2
      90: invokeinterface #25,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      95: astore_3
      96: aload_3
      97: invokeinterface #26,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     102: ifeq          257
     105: aload_3
     106: invokeinterface #27,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     111: checkcast     #28                 // class java/nio/channels/SelectionKey
     114: astore        4
     116: aload         4
     118: invokevirtual #29                 // Method java/nio/channels/SelectionKey.isValid:()Z
     121: ifne          133
     124: aload_3
     125: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.remove:()V
     130: goto          96
     133: aload_3
     134: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.remove:()V
     139: aload         4
     141: invokevirtual #31                 // Method java/nio/channels/SelectionKey.isAcceptable:()Z
     144: ifeq          210
     147: aload_0
     148: getfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
     151: invokevirtual #32                 // Method java/nio/channels/ServerSocketChannel.accept:()Ljava/nio/channels/SocketChannel;
     154: astore        5
     156: aload         5
     158: ifnull        207
     161: getstatic     #20                 // Field java/lang/System.out:Ljava/io/PrintStream;
     164: ldc           #33                 // String accepted connection from %s\n
     166: iconst_1
     167: anewarray     #34                 // class java/lang/Object
     170: dup
     171: iconst_0
     172: aload         5
     174: invokevirtual #35                 // Method java/nio/channels/SocketChannel.getRemoteAddress:()Ljava/net/SocketAddress;
     177: aastore
     178: invokevirtual #36                 // Method java/io/PrintStream.printf:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;
     181: pop
     182: aload         5
     184: iconst_0
     185: invokevirtual #37                 // Method java/nio/channels/SocketChannel.configureBlocking:(Z)Ljava/nio/channels/SelectableChannel;
     188: pop
     189: aload         5
     191: aload_0
     192: getfield      #11                 // Field selector:Ljava/nio/channels/Selector;
     195: iconst_1
     196: sipush        1000
     199: iload_1
     200: invokestatic  #38                 // Method create:(IZ)Ljava/nio/ByteBuffer;
     203: invokevirtual #39                 // Method java/nio/channels/SocketChannel.register:(Ljava/nio/channels/Selector;ILjava/lang/Object;)Ljava/nio/channels/SelectionKey;
     206: pop
     207: goto          254
     210: aload         4
     212: invokevirtual #40                 // Method java/nio/channels/SelectionKey.isReadable:()Z
     215: ifeq          254
     218: aload_0
     219: aload         4
     221: invokevirtual #41                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     224: checkcast     #42                 // class java/nio/channels/SocketChannel
     227: aload         4
     229: invokevirtual #43                 // Method java/nio/channels/SelectionKey.attachment:()Ljava/lang/Object;
     232: checkcast     #44                 // class java/nio/ByteBuffer
     235: invokevirtual #45                 // Method handle:(Ljava/nio/channels/SocketChannel;Ljava/nio/ByteBuffer;)Z
     238: ifne          254
     241: aload         4
     243: invokevirtual #46                 // Method java/nio/channels/SelectionKey.cancel:()V
     246: aload         4
     248: invokevirtual #41                 // Method java/nio/channels/SelectionKey.channel:()Ljava/nio/channels/SelectableChannel;
     251: invokestatic  #47                 // Method org/jgroups/util/Util.close:(Ljava/io/Closeable;)V
     254: goto          96
     257: goto          66
     260: iconst_2
     261: anewarray     #48                 // class java/io/Closeable
     264: dup
     265: iconst_0
     266: aload_0
     267: getfield      #11                 // Field selector:Ljava/nio/channels/Selector;
     270: aastore
     271: dup
     272: iconst_1
     273: aload_0
     274: getfield      #13                 // Field ch:Ljava/nio/channels/ServerSocketChannel;
     277: aastore
     278: invokestatic  #49                 // Method org/jgroups/util/Util.close:([Ljava/io/Closeable;)V
     281: return

  protected boolean handle(java.nio.channels.SocketChannel, java.nio.ByteBuffer);
    Code:
       0: aload_0
       1: getfield      #7                  // Field start:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
       7: lconst_0
       8: lcmp
       9: ifne          24
      12: aload_0
      13: getfield      #7                  // Field start:Ljava/util/concurrent/atomic/AtomicLong;
      16: lconst_0
      17: invokestatic  #51                 // Method java/lang/System.currentTimeMillis:()J
      20: invokevirtual #52                 // Method java/util/concurrent/atomic/AtomicLong.compareAndSet:(JJ)Z
      23: pop
      24: aload_1
      25: aload_2
      26: invokevirtual #53                 // Method java/nio/channels/SocketChannel.read:(Ljava/nio/ByteBuffer;)I
      29: istore_3
      30: iload_3
      31: ifge          36
      34: iconst_0
      35: ireturn
      36: aload_0
      37: getfield      #5                  // Field total_bytes_received:Ljava/util/concurrent/atomic/AtomicLong;
      40: iload_3
      41: i2l
      42: invokevirtual #54                 // Method java/util/concurrent/atomic/AtomicLong.addAndGet:(J)J
      45: pop2
      46: aload_2
      47: invokevirtual #55                 // Method java/nio/ByteBuffer.hasRemaining:()Z
      50: ifne          66
      53: aload_0
      54: getfield      #6                  // Field total_msgs:Ljava/util/concurrent/atomic/AtomicLong;
      57: invokevirtual #56                 // Method java/util/concurrent/atomic/AtomicLong.incrementAndGet:()J
      60: pop2
      61: aload_2
      62: invokevirtual #57                 // Method java/nio/ByteBuffer.rewind:()Ljava/nio/Buffer;
      65: pop
      66: aload_0
      67: getfield      #5                  // Field total_bytes_received:Ljava/util/concurrent/atomic/AtomicLong;
      70: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      73: ldc2_w        #58                 // long 10000000l
      76: lcmp
      77: iflt          210
      80: invokestatic  #51                 // Method java/lang/System.currentTimeMillis:()J
      83: aload_0
      84: getfield      #7                  // Field start:Ljava/util/concurrent/atomic/AtomicLong;
      87: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
      90: lsub
      91: lstore        4
      93: aload_0
      94: getfield      #5                  // Field total_bytes_received:Ljava/util/concurrent/atomic/AtomicLong;
      97: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
     100: l2d
     101: lload         4
     103: l2d
     104: ldc2_w        #60                 // double 1000.0d
     107: ddiv
     108: ddiv
     109: dstore        6
     111: aload_0
     112: getfield      #6                  // Field total_msgs:Ljava/util/concurrent/atomic/AtomicLong;
     115: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
     118: l2d
     119: lload         4
     121: l2d
     122: ldc2_w        #60                 // double 1000.0d
     125: ddiv
     126: ddiv
     127: dstore        8
     129: getstatic     #20                 // Field java/lang/System.out:Ljava/io/PrintStream;
     132: ldc           #62                 // String \n===========================\nreceived %d messages in %.2f secs: throughput: %s/sec, %.2f msgs/sec\n
     134: iconst_4
     135: anewarray     #34                 // class java/lang/Object
     138: dup
     139: iconst_0
     140: aload_0
     141: getfield      #6                  // Field total_msgs:Ljava/util/concurrent/atomic/AtomicLong;
     144: invokevirtual #50                 // Method java/util/concurrent/atomic/AtomicLong.get:()J
     147: invokestatic  #63                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     150: aastore
     151: dup
     152: iconst_1
     153: lload         4
     155: l2d
     156: ldc2_w        #60                 // double 1000.0d
     159: ddiv
     160: invokestatic  #64                 // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
     163: aastore
     164: dup
     165: iconst_2
     166: dload         6
     168: invokestatic  #65                 // Method org/jgroups/util/Util.printBytes:(D)Ljava/lang/String;
     171: aastore
     172: dup
     173: iconst_3
     174: dload         8
     176: invokestatic  #64                 // Method java/lang/Double.valueOf:(D)Ljava/lang/Double;
     179: aastore
     180: invokevirtual #36                 // Method java/io/PrintStream.printf:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/io/PrintStream;
     183: pop
     184: aload_0
     185: getfield      #7                  // Field start:Ljava/util/concurrent/atomic/AtomicLong;
     188: lconst_0
     189: invokevirtual #66                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     192: aload_0
     193: getfield      #5                  // Field total_bytes_received:Ljava/util/concurrent/atomic/AtomicLong;
     196: lconst_0
     197: invokevirtual #66                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     200: aload_0
     201: getfield      #6                  // Field total_msgs:Ljava/util/concurrent/atomic/AtomicLong;
     204: lconst_0
     205: invokevirtual #66                 // Method java/util/concurrent/atomic/AtomicLong.set:(J)V
     208: iconst_0
     209: ireturn
     210: goto          218
     213: astore_3
     214: aload_3
     215: invokevirtual #68                 // Method java/io/IOException.printStackTrace:()V
     218: iconst_1
     219: ireturn
    Exception table:
       from    to  target type
           0    35   213   Class java/io/IOException
          36   209   213   Class java/io/IOException

  public static void main(java.lang.String[]) throws java.lang.Exception;
    Code:
       0: iconst_0
       1: istore_1
       2: iconst_0
       3: istore_2
       4: iload_2
       5: aload_0
       6: arraylength
       7: if_icmpge     49
      10: aload_0
      11: iload_2
      12: aaload
      13: ldc           #69                 // String -direct
      15: invokevirtual #70                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      18: ifeq          34
      21: aload_0
      22: iinc          2, 1
      25: iload_2
      26: aaload
      27: invokestatic  #71                 // Method java/lang/Boolean.parseBoolean:(Ljava/lang/String;)Z
      30: istore_1
      31: goto          43
      34: getstatic     #20                 // Field java/lang/System.out:Ljava/io/PrintStream;
      37: ldc           #72                 // String NioServerPerfTest [-direct true|false]
      39: invokevirtual #22                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      42: return
      43: iinc          2, 1
      46: goto          4
      49: new           #73                 // class org/jgroups/tests/NioServerPerfTest
      52: dup
      53: invokespecial #74                 // Method "<init>":()V
      56: iload_1
      57: invokevirtual #75                 // Method start:(Z)V
      60: return
}

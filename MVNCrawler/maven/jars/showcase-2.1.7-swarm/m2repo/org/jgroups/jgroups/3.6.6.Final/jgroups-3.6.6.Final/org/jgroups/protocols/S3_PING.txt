Compiled from "S3_PING.java"
public class org.jgroups.protocols.S3_PING extends org.jgroups.protocols.FILE_PING {
  protected java.lang.String host;

  protected int port;

  protected boolean use_ssl;

  protected java.lang.String access_key;

  protected java.lang.String secret_access_key;

  protected java.lang.String prefix;

  protected java.lang.String pre_signed_put_url;

  protected java.lang.String pre_signed_delete_url;

  protected boolean skip_bucket_existence_check;

  protected org.jgroups.protocols.S3_PING$AWSAuthConnection conn;

  public org.jgroups.protocols.S3_PING();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jgroups/protocols/FILE_PING."<init>":()V
       4: aload_0
       5: iconst_1
       6: putfield      #2                  // Field use_ssl:Z
       9: aload_0
      10: iconst_0
      11: putfield      #3                  // Field skip_bucket_existence_check:Z
      14: aload_0
      15: aconst_null
      16: putfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      19: return

  public void init() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #5                  // Method org/jgroups/protocols/FILE_PING.init:()V
       4: aload_0
       5: getfield      #6                  // Field host:Ljava/lang/String;
       8: ifnonnull     17
      11: aload_0
      12: ldc           #7                  // String s3.amazonaws.com
      14: putfield      #6                  // Field host:Ljava/lang/String;
      17: aload_0
      18: invokevirtual #8                  // Method validateProperties:()V
      21: aload_0
      22: aload_0
      23: invokevirtual #9                  // Method createConnection:()Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      26: putfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      29: aload_0
      30: getfield      #10                 // Field prefix:Ljava/lang/String;
      33: ifnull        176
      36: aload_0
      37: getfield      #10                 // Field prefix:Ljava/lang/String;
      40: invokevirtual #11                 // Method java/lang/String.isEmpty:()Z
      43: ifne          176
      46: aload_0
      47: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      50: aconst_null
      51: invokevirtual #12                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.listAllMyBuckets:(Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$ListAllMyBucketsResponse;
      54: astore_1
      55: aload_1
      56: getfield      #13                 // Field org/jgroups/protocols/S3_PING$ListAllMyBucketsResponse.entries:Ljava/util/List;
      59: astore_2
      60: aload_2
      61: ifnull        176
      64: iconst_0
      65: istore_3
      66: aload_2
      67: invokeinterface #14,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      72: astore        4
      74: aload         4
      76: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      81: ifeq          137
      84: aload         4
      86: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      91: astore        5
      93: aload         5
      95: instanceof    #17                 // class org/jgroups/protocols/S3_PING$Bucket
      98: ifeq          134
     101: aload         5
     103: checkcast     #17                 // class org/jgroups/protocols/S3_PING$Bucket
     106: astore        6
     108: aload         6
     110: getfield      #18                 // Field org/jgroups/protocols/S3_PING$Bucket.name:Ljava/lang/String;
     113: aload_0
     114: getfield      #10                 // Field prefix:Ljava/lang/String;
     117: invokevirtual #19                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     120: ifeq          134
     123: aload_0
     124: aload         6
     126: getfield      #18                 // Field org/jgroups/protocols/S3_PING$Bucket.name:Ljava/lang/String;
     129: putfield      #20                 // Field location:Ljava/lang/String;
     132: iconst_1
     133: istore_3
     134: goto          74
     137: iload_3
     138: ifne          176
     141: aload_0
     142: new           #21                 // class java/lang/StringBuilder
     145: dup
     146: invokespecial #22                 // Method java/lang/StringBuilder."<init>":()V
     149: aload_0
     150: getfield      #10                 // Field prefix:Ljava/lang/String;
     153: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     156: ldc           #24                 // String -
     158: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: invokestatic  #25                 // Method java/util/UUID.randomUUID:()Ljava/util/UUID;
     164: invokevirtual #26                 // Method java/util/UUID.toString:()Ljava/lang/String;
     167: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     170: invokevirtual #27                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     173: putfield      #20                 // Field location:Ljava/lang/String;
     176: aload_0
     177: invokevirtual #28                 // Method usingPreSignedUrls:()Z
     180: ifeq          203
     183: new           #29                 // class org/jgroups/protocols/S3_PING$PreSignedUrlParser
     186: dup
     187: aload_0
     188: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
     191: invokespecial #31                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser."<init>":(Ljava/lang/String;)V
     194: astore_1
     195: aload_0
     196: aload_1
     197: invokevirtual #32                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getBucket:()Ljava/lang/String;
     200: putfield      #20                 // Field location:Ljava/lang/String;
     203: aload_0
     204: getfield      #3                  // Field skip_bucket_existence_check:Z
     207: ifne          246
     210: aload_0
     211: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     214: aload_0
     215: getfield      #20                 // Field location:Ljava/lang/String;
     218: invokevirtual #33                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.checkBucketExists:(Ljava/lang/String;)Z
     221: ifne          246
     224: aload_0
     225: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     228: aload_0
     229: getfield      #20                 // Field location:Ljava/lang/String;
     232: getstatic     #34                 // Field org/jgroups/protocols/S3_PING$AWSAuthConnection.LOCATION_DEFAULT:Ljava/lang/String;
     235: aconst_null
     236: invokevirtual #35                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.createBucket:(Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$Response;
     239: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     242: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     245: pop
     246: return

  protected org.jgroups.protocols.S3_PING$AWSAuthConnection createConnection();
    Code:
       0: aload_0
       1: getfield      #38                 // Field port:I
       4: ifle          37
       7: new           #39                 // class org/jgroups/protocols/S3_PING$AWSAuthConnection
      10: dup
      11: aload_0
      12: getfield      #40                 // Field access_key:Ljava/lang/String;
      15: aload_0
      16: getfield      #41                 // Field secret_access_key:Ljava/lang/String;
      19: aload_0
      20: getfield      #2                  // Field use_ssl:Z
      23: aload_0
      24: getfield      #6                  // Field host:Ljava/lang/String;
      27: aload_0
      28: getfield      #38                 // Field port:I
      31: invokespecial #42                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection."<init>":(Ljava/lang/String;Ljava/lang/String;ZLjava/lang/String;I)V
      34: goto          60
      37: new           #39                 // class org/jgroups/protocols/S3_PING$AWSAuthConnection
      40: dup
      41: aload_0
      42: getfield      #40                 // Field access_key:Ljava/lang/String;
      45: aload_0
      46: getfield      #41                 // Field secret_access_key:Ljava/lang/String;
      49: aload_0
      50: getfield      #2                  // Field use_ssl:Z
      53: aload_0
      54: getfield      #6                  // Field host:Ljava/lang/String;
      57: invokespecial #43                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection."<init>":(Ljava/lang/String;Ljava/lang/String;ZLjava/lang/String;)V
      60: areturn

  protected void createRootDir();
    Code:
       0: return

  protected void readAll(java.util.List<org.jgroups.Address>, java.lang.String, org.jgroups.util.Responses);
    Code:
       0: aload_2
       1: ifnonnull     5
       4: return
       5: aload_0
       6: invokevirtual #28                 // Method usingPreSignedUrls:()Z
       9: ifeq          31
      12: new           #29                 // class org/jgroups/protocols/S3_PING$PreSignedUrlParser
      15: dup
      16: aload_0
      17: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
      20: invokespecial #31                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser."<init>":(Ljava/lang/String;)V
      23: astore        4
      25: aload         4
      27: invokevirtual #44                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getPrefix:()Ljava/lang/String;
      30: astore_2
      31: aload_2
      32: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      35: astore_2
      36: aload_0
      37: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      40: aload_0
      41: getfield      #20                 // Field location:Ljava/lang/String;
      44: aload_2
      45: aconst_null
      46: aconst_null
      47: aconst_null
      48: invokevirtual #46                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.listBucket:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/Integer;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$ListBucketResponse;
      51: astore        4
      53: aload         4
      55: getfield      #47                 // Field org/jgroups/protocols/S3_PING$ListBucketResponse.entries:Ljava/util/List;
      58: ifnull        158
      61: aload         4
      63: getfield      #47                 // Field org/jgroups/protocols/S3_PING$ListBucketResponse.entries:Ljava/util/List;
      66: invokeinterface #48,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      71: astore        5
      73: aload         5
      75: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      80: ifeq          158
      83: aload         5
      85: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      90: checkcast     #49                 // class org/jgroups/protocols/S3_PING$ListEntry
      93: astore        6
      95: aload_0
      96: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      99: aload_0
     100: getfield      #20                 // Field location:Ljava/lang/String;
     103: aload         6
     105: getfield      #50                 // Field org/jgroups/protocols/S3_PING$ListEntry.key:Ljava/lang/String;
     108: aconst_null
     109: invokevirtual #51                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.get:(Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$GetResponse;
     112: astore        7
     114: aload_0
     115: aload         7
     117: aload_1
     118: aload_3
     119: invokevirtual #52                 // Method readResponse:(Lorg/jgroups/protocols/S3_PING$GetResponse;Ljava/util/List;Lorg/jgroups/util/Responses;)V
     122: goto          155
     125: astore        7
     127: aload_0
     128: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     131: ldc           #55                 // String failed reading key %s: %s
     133: iconst_2
     134: anewarray     #56                 // class java/lang/Object
     137: dup
     138: iconst_0
     139: aload         6
     141: getfield      #50                 // Field org/jgroups/protocols/S3_PING$ListEntry.key:Ljava/lang/String;
     144: aastore
     145: dup
     146: iconst_1
     147: aload         7
     149: aastore
     150: invokeinterface #57,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     155: goto          73
     158: goto          176
     161: astore        4
     163: aload_0
     164: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     167: ldc           #59                 // String failed reading addresses
     169: aload         4
     171: invokeinterface #60,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     176: return
    Exception table:
       from    to  target type
          95   122   125   Class java/lang/Throwable
           5   158   161   Class java/io/IOException

  protected void readResponse(org.jgroups.protocols.S3_PING$GetResponse, java.util.List<org.jgroups.Address>, org.jgroups.util.Responses);
    Code:
       0: aload_1
       1: getfield      #61                 // Field org/jgroups/protocols/S3_PING$GetResponse.object:Lorg/jgroups/protocols/S3_PING$S3Object;
       4: ifnonnull     8
       7: return
       8: aload_1
       9: getfield      #61                 // Field org/jgroups/protocols/S3_PING$GetResponse.object:Lorg/jgroups/protocols/S3_PING$S3Object;
      12: getfield      #62                 // Field org/jgroups/protocols/S3_PING$S3Object.data:[B
      15: astore        4
      17: aload         4
      19: ifnull        171
      22: aload         4
      24: arraylength
      25: ifle          171
      28: aload_0
      29: new           #63                 // class java/io/ByteArrayInputStream
      32: dup
      33: aload         4
      35: invokespecial #64                 // Method java/io/ByteArrayInputStream."<init>":([B)V
      38: invokevirtual #65                 // Method read:(Ljava/io/InputStream;)Ljava/util/List;
      41: astore        5
      43: aload         5
      45: ifnull        153
      48: aload         5
      50: invokeinterface #14,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      55: astore        6
      57: aload         6
      59: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      64: ifeq          153
      67: aload         6
      69: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      74: checkcast     #66                 // class org/jgroups/protocols/PingData
      77: astore        7
      79: aload_2
      80: ifnull        97
      83: aload_2
      84: aload         7
      86: invokevirtual #67                 // Method org/jgroups/protocols/PingData.getAddress:()Lorg/jgroups/Address;
      89: invokeinterface #68,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
      94: ifeq          108
      97: aload_3
      98: aload         7
     100: aload         7
     102: invokevirtual #69                 // Method org/jgroups/protocols/PingData.isCoord:()Z
     105: invokevirtual #70                 // Method org/jgroups/util/Responses.addResponse:(Lorg/jgroups/protocols/PingData;Z)V
     108: aload_0
     109: getfield      #71                 // Field local_addr:Lorg/jgroups/Address;
     112: ifnull        150
     115: aload_0
     116: getfield      #71                 // Field local_addr:Lorg/jgroups/Address;
     119: aload         7
     121: invokevirtual #67                 // Method org/jgroups/protocols/PingData.getAddress:()Lorg/jgroups/Address;
     124: invokevirtual #72                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     127: ifne          150
     130: aload_0
     131: aload         7
     133: invokevirtual #67                 // Method org/jgroups/protocols/PingData.getAddress:()Lorg/jgroups/Address;
     136: aload         7
     138: invokevirtual #73                 // Method org/jgroups/protocols/PingData.getLogicalName:()Ljava/lang/String;
     141: aload         7
     143: invokevirtual #74                 // Method org/jgroups/protocols/PingData.getPhysicalAddr:()Lorg/jgroups/PhysicalAddress;
     146: invokevirtual #75                 // Method addDiscoveryResponseToCaches:(Lorg/jgroups/Address;Ljava/lang/String;Lorg/jgroups/PhysicalAddress;)Z
     149: pop
     150: goto          57
     153: goto          171
     156: astore        6
     158: aload_0
     159: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     162: ldc           #76                 // String failed unmarshalling response
     164: aload         6
     166: invokeinterface #60,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     171: return
    Exception table:
       from    to  target type
          28   153   156   Class java/lang/Throwable

  protected void write(java.util.List<org.jgroups.protocols.PingData>, java.lang.String);
    Code:
       0: aload_0
       1: getfield      #71                 // Field local_addr:Lorg/jgroups/Address;
       4: invokestatic  #77                 // Method addressToFilename:(Lorg/jgroups/Address;)Ljava/lang/String;
       7: astore_3
       8: new           #21                 // class java/lang/StringBuilder
      11: dup
      12: invokespecial #22                 // Method java/lang/StringBuilder."<init>":()V
      15: aload_2
      16: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      19: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: ldc           #78                 // String /
      24: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      27: aload_3
      28: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      31: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: invokevirtual #27                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      37: astore        4
      39: aconst_null
      40: astore        5
      42: new           #79                 // class java/io/ByteArrayOutputStream
      45: dup
      46: sipush        4096
      49: invokespecial #80                 // Method java/io/ByteArrayOutputStream."<init>":(I)V
      52: astore        6
      54: aload_0
      55: aload_1
      56: aload         6
      58: invokevirtual #81                 // Method write:(Ljava/util/List;Ljava/io/OutputStream;)V
      61: aload         6
      63: invokevirtual #82                 // Method java/io/ByteArrayOutputStream.toByteArray:()[B
      66: astore        7
      68: new           #83                 // class org/jgroups/protocols/S3_PING$S3Object
      71: dup
      72: aload         7
      74: aconst_null
      75: invokespecial #84                 // Method org/jgroups/protocols/S3_PING$S3Object."<init>":([BLjava/util/Map;)V
      78: astore        8
      80: aload_0
      81: invokevirtual #28                 // Method usingPreSignedUrls:()Z
      84: ifeq          141
      87: new           #85                 // class java/util/TreeMap
      90: dup
      91: invokespecial #86                 // Method java/util/TreeMap."<init>":()V
      94: astore        9
      96: aload         9
      98: ldc           #87                 // String x-amz-acl
     100: iconst_1
     101: anewarray     #88                 // class java/lang/String
     104: dup
     105: iconst_0
     106: ldc           #89                 // String public-read
     108: aastore
     109: invokestatic  #90                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     112: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     117: pop
     118: aload_0
     119: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     122: aload_0
     123: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
     126: aload         8
     128: aload         9
     130: invokevirtual #92                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.put:(Ljava/lang/String;Lorg/jgroups/protocols/S3_PING$S3Object;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$Response;
     133: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     136: astore        5
     138: goto          194
     141: new           #85                 // class java/util/TreeMap
     144: dup
     145: invokespecial #86                 // Method java/util/TreeMap."<init>":()V
     148: astore        9
     150: aload         9
     152: ldc           #93                 // String Content-Type
     154: iconst_1
     155: anewarray     #88                 // class java/lang/String
     158: dup
     159: iconst_0
     160: ldc           #94                 // String text/plain
     162: aastore
     163: invokestatic  #90                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
     166: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     171: pop
     172: aload_0
     173: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     176: aload_0
     177: getfield      #20                 // Field location:Ljava/lang/String;
     180: aload         4
     182: aload         8
     184: aload         9
     186: invokevirtual #95                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.put:(Ljava/lang/String;Ljava/lang/String;Lorg/jgroups/protocols/S3_PING$S3Object;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$Response;
     189: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     192: astore        5
     194: aload         5
     196: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     199: ldc           #96                 // String OK
     201: invokevirtual #97                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     204: ifne          244
     207: aload_0
     208: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     211: new           #21                 // class java/lang/StringBuilder
     214: dup
     215: invokespecial #22                 // Method java/lang/StringBuilder."<init>":()V
     218: ldc           #98                 // String Failed to write file to S3 bucket - HTTP Response code: (
     220: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     223: aload         5
     225: invokevirtual #99                 // Method java/net/HttpURLConnection.getResponseCode:()I
     228: invokevirtual #100                // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
     231: ldc           #101                // String )
     233: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     236: invokevirtual #27                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     239: invokeinterface #102,  2          // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;)V
     244: goto          262
     247: astore        6
     249: aload_0
     250: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     253: ldc           #104                // String Error marshalling object
     255: aload         6
     257: invokeinterface #60,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     262: return
    Exception table:
       from    to  target type
          42   244   247   Class java/lang/Exception

  protected void remove(java.lang.String, org.jgroups.Address);
    Code:
       0: aload_1
       1: ifnull        8
       4: aload_2
       5: ifnonnull     9
       8: return
       9: aload_2
      10: invokestatic  #77                 // Method addressToFilename:(Lorg/jgroups/Address;)Ljava/lang/String;
      13: astore_3
      14: new           #21                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #22                 // Method java/lang/StringBuilder."<init>":()V
      21: aload_1
      22: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      25: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: ldc           #78                 // String /
      30: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: aload_3
      34: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      37: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      40: invokevirtual #27                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      43: astore        4
      45: new           #85                 // class java/util/TreeMap
      48: dup
      49: invokespecial #86                 // Method java/util/TreeMap."<init>":()V
      52: astore        5
      54: aload         5
      56: ldc           #93                 // String Content-Type
      58: iconst_1
      59: anewarray     #88                 // class java/lang/String
      62: dup
      63: iconst_0
      64: ldc           #94                 // String text/plain
      66: aastore
      67: invokestatic  #90                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      70: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      75: pop
      76: aload_0
      77: invokevirtual #28                 // Method usingPreSignedUrls:()Z
      80: ifeq          104
      83: aload_0
      84: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      87: aload_0
      88: getfield      #105                // Field pre_signed_delete_url:Ljava/lang/String;
      91: invokevirtual #106                // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.delete:(Ljava/lang/String;)Lorg/jgroups/protocols/S3_PING$Response;
      94: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
      97: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     100: pop
     101: goto          126
     104: aload_0
     105: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     108: aload_0
     109: getfield      #20                 // Field location:Ljava/lang/String;
     112: aload         4
     114: aload         5
     116: invokevirtual #107                // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.delete:(Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$Response;
     119: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     122: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     125: pop
     126: aload_0
     127: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     130: invokeinterface #108,  1          // InterfaceMethod org/jgroups/logging/Log.isTraceEnabled:()Z
     135: ifeq          179
     138: aload_0
     139: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     142: new           #21                 // class java/lang/StringBuilder
     145: dup
     146: invokespecial #22                 // Method java/lang/StringBuilder."<init>":()V
     149: ldc           #109                // String removing
     151: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     154: aload_0
     155: getfield      #20                 // Field location:Ljava/lang/String;
     158: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     161: ldc           #78                 // String /
     163: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     166: aload         4
     168: invokevirtual #23                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     171: invokevirtual #27                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     174: invokeinterface #110,  2          // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;)V
     179: goto          197
     182: astore        5
     184: aload_0
     185: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     188: ldc           #111                // String failure removing data
     190: aload         5
     192: invokeinterface #60,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     197: return
    Exception table:
       from    to  target type
          45   179   182   Class java/lang/Exception

  protected void removeAll(java.lang.String);
    Code:
       0: aload_1
       1: ifnonnull     5
       4: return
       5: new           #85                 // class java/util/TreeMap
       8: dup
       9: invokespecial #86                 // Method java/util/TreeMap."<init>":()V
      12: astore_2
      13: aload_2
      14: ldc           #93                 // String Content-Type
      16: iconst_1
      17: anewarray     #88                 // class java/lang/String
      20: dup
      21: iconst_0
      22: ldc           #94                 // String text/plain
      24: aastore
      25: invokestatic  #90                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      28: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      33: pop
      34: aload_1
      35: invokestatic  #45                 // Method sanitize:(Ljava/lang/String;)Ljava/lang/String;
      38: astore_1
      39: aload_0
      40: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
      43: aload_0
      44: getfield      #20                 // Field location:Ljava/lang/String;
      47: aload_1
      48: aconst_null
      49: aconst_null
      50: aconst_null
      51: invokevirtual #46                 // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.listBucket:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/Integer;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$ListBucketResponse;
      54: astore_3
      55: aload_3
      56: getfield      #47                 // Field org/jgroups/protocols/S3_PING$ListBucketResponse.entries:Ljava/util/List;
      59: ifnull        220
      62: aload_3
      63: getfield      #47                 // Field org/jgroups/protocols/S3_PING$ListBucketResponse.entries:Ljava/util/List;
      66: invokeinterface #48,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      71: astore        4
      73: aload         4
      75: invokeinterface #15,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      80: ifeq          220
      83: aload         4
      85: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      90: checkcast     #49                 // class org/jgroups/protocols/S3_PING$ListEntry
      93: astore        5
      95: aload_0
      96: invokevirtual #28                 // Method usingPreSignedUrls:()Z
      99: ifeq          123
     102: aload_0
     103: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     106: aload_0
     107: getfield      #105                // Field pre_signed_delete_url:Ljava/lang/String;
     110: invokevirtual #106                // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.delete:(Ljava/lang/String;)Lorg/jgroups/protocols/S3_PING$Response;
     113: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     116: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     119: pop
     120: goto          147
     123: aload_0
     124: getfield      #4                  // Field conn:Lorg/jgroups/protocols/S3_PING$AWSAuthConnection;
     127: aload_0
     128: getfield      #20                 // Field location:Ljava/lang/String;
     131: aload         5
     133: getfield      #50                 // Field org/jgroups/protocols/S3_PING$ListEntry.key:Ljava/lang/String;
     136: aload_2
     137: invokevirtual #107                // Method org/jgroups/protocols/S3_PING$AWSAuthConnection.delete:(Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;)Lorg/jgroups/protocols/S3_PING$Response;
     140: getfield      #36                 // Field org/jgroups/protocols/S3_PING$Response.connection:Ljava/net/HttpURLConnection;
     143: invokevirtual #37                 // Method java/net/HttpURLConnection.getResponseMessage:()Ljava/lang/String;
     146: pop
     147: aload_0
     148: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     151: ldc           #112                // String removing %s/%s
     153: iconst_2
     154: anewarray     #56                 // class java/lang/Object
     157: dup
     158: iconst_0
     159: aload_0
     160: getfield      #20                 // Field location:Ljava/lang/String;
     163: aastore
     164: dup
     165: iconst_1
     166: aload         5
     168: getfield      #50                 // Field org/jgroups/protocols/S3_PING$ListEntry.key:Ljava/lang/String;
     171: aastore
     172: invokeinterface #113,  3          // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
     177: goto          217
     180: astore        6
     182: aload_0
     183: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     186: ldc           #114                // String failed deleting object %s/%s: %s
     188: iconst_3
     189: anewarray     #56                 // class java/lang/Object
     192: dup
     193: iconst_0
     194: aload_0
     195: getfield      #20                 // Field location:Ljava/lang/String;
     198: aastore
     199: dup
     200: iconst_1
     201: aload         5
     203: getfield      #50                 // Field org/jgroups/protocols/S3_PING$ListEntry.key:Ljava/lang/String;
     206: aastore
     207: dup
     208: iconst_2
     209: aload         6
     211: aastore
     212: invokeinterface #57,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     217: goto          73
     220: goto          236
     223: astore_2
     224: aload_0
     225: getfield      #54                 // Field log:Lorg/jgroups/logging/Log;
     228: ldc           #115                // String failed deleting all objects
     230: aload_2
     231: invokeinterface #60,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     236: return
    Exception table:
       from    to  target type
          95   177   180   Class java/lang/Throwable
           5   220   223   Class java/io/IOException

  protected void validateProperties();
    Code:
       0: aload_0
       1: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
       4: ifnull        79
       7: aload_0
       8: getfield      #105                // Field pre_signed_delete_url:Ljava/lang/String;
      11: ifnull        79
      14: new           #29                 // class org/jgroups/protocols/S3_PING$PreSignedUrlParser
      17: dup
      18: aload_0
      19: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
      22: invokespecial #31                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser."<init>":(Ljava/lang/String;)V
      25: astore_1
      26: new           #29                 // class org/jgroups/protocols/S3_PING$PreSignedUrlParser
      29: dup
      30: aload_0
      31: getfield      #105                // Field pre_signed_delete_url:Ljava/lang/String;
      34: invokespecial #31                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser."<init>":(Ljava/lang/String;)V
      37: astore_2
      38: aload_1
      39: invokevirtual #32                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getBucket:()Ljava/lang/String;
      42: aload_2
      43: invokevirtual #32                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getBucket:()Ljava/lang/String;
      46: invokevirtual #97                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      49: ifeq          66
      52: aload_1
      53: invokevirtual #44                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getPrefix:()Ljava/lang/String;
      56: aload_2
      57: invokevirtual #44                 // Method org/jgroups/protocols/S3_PING$PreSignedUrlParser.getPrefix:()Ljava/lang/String;
      60: invokevirtual #97                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      63: ifne          76
      66: new           #116                // class java/lang/IllegalArgumentException
      69: dup
      70: ldc           #117                // String pre_signed_put_url and pre_signed_delete_url must have the same path
      72: invokespecial #118                // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      75: athrow
      76: goto          103
      79: aload_0
      80: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
      83: ifnonnull     93
      86: aload_0
      87: getfield      #105                // Field pre_signed_delete_url:Ljava/lang/String;
      90: ifnull        103
      93: new           #116                // class java/lang/IllegalArgumentException
      96: dup
      97: ldc           #119                // String pre_signed_put_url and pre_signed_delete_url must both be set or both unset
      99: invokespecial #118                // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     102: athrow
     103: aload_0
     104: getfield      #10                 // Field prefix:Ljava/lang/String;
     107: ifnull        127
     110: aload_0
     111: getfield      #20                 // Field location:Ljava/lang/String;
     114: ifnull        127
     117: new           #116                // class java/lang/IllegalArgumentException
     120: dup
     121: ldc           #120                // String set either prefix or location, but not both
     123: invokespecial #118                // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     126: athrow
     127: aload_0
     128: getfield      #10                 // Field prefix:Ljava/lang/String;
     131: ifnull        158
     134: aload_0
     135: getfield      #40                 // Field access_key:Ljava/lang/String;
     138: ifnull        148
     141: aload_0
     142: getfield      #41                 // Field secret_access_key:Ljava/lang/String;
     145: ifnonnull     158
     148: new           #116                // class java/lang/IllegalArgumentException
     151: dup
     152: ldc           #121                // String access_key and secret_access_key must be set when setting prefix
     154: invokespecial #118                // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     157: athrow
     158: return

  protected boolean usingPreSignedUrls();
    Code:
       0: aload_0
       1: getfield      #30                 // Field pre_signed_put_url:Ljava/lang/String;
       4: ifnull        11
       7: iconst_1
       8: goto          12
      11: iconst_0
      12: ireturn

  protected static java.lang.String sanitize(java.lang.String);
    Code:
       0: aload_0
       1: astore_1
       2: aload_1
       3: bipush        47
       5: bipush        45
       7: invokevirtual #122                // Method java/lang/String.replace:(CC)Ljava/lang/String;
      10: astore_1
      11: aload_1
      12: bipush        92
      14: bipush        45
      16: invokevirtual #122                // Method java/lang/String.replace:(CC)Ljava/lang/String;
      19: astore_1
      20: aload_1
      21: areturn

  public static java.lang.String generatePreSignedUrl(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String, long);
    Code:
       0: new           #123                // class java/util/HashMap
       3: dup
       4: invokespecial #124                // Method java/util/HashMap."<init>":()V
       7: astore        7
       9: aload_2
      10: ldc           #125                // String PUT
      12: invokevirtual #126                // Method java/lang/String.equalsIgnoreCase:(Ljava/lang/String;)Z
      15: ifeq          40
      18: aload         7
      20: ldc           #87                 // String x-amz-acl
      22: iconst_1
      23: anewarray     #88                 // class java/lang/String
      26: dup
      27: iconst_0
      28: ldc           #89                 // String public-read
      30: aastore
      31: invokestatic  #90                 // Method java/util/Arrays.asList:([Ljava/lang/Object;)Ljava/util/List;
      34: invokeinterface #91,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      39: pop
      40: aload_0
      41: aload_1
      42: aload_2
      43: aload_3
      44: aload         4
      46: new           #123                // class java/util/HashMap
      49: dup
      50: invokespecial #124                // Method java/util/HashMap."<init>":()V
      53: aload         7
      55: lload         5
      57: invokestatic  #127                // Method org/jgroups/protocols/S3_PING$Utils.generateQueryStringAuthentication:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/util/Map;Ljava/util/Map;J)Ljava/lang/String;
      60: areturn
}

Compiled from "UFC.java"
public class org.jgroups.protocols.UFC extends org.jgroups.protocols.FlowControl {
  protected final java.util.Map<org.jgroups.Address, org.jgroups.protocols.FlowControl$Credit> sent;

  protected final org.jgroups.util.Average avg_block_time;

  public org.jgroups.protocols.UFC();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method org/jgroups/protocols/FlowControl."<init>":()V
       4: aload_0
       5: invokestatic  #2                  // Method org/jgroups/util/Util.createConcurrentMap:()Ljava/util/concurrent/ConcurrentMap;
       8: putfield      #3                  // Field sent:Ljava/util/Map;
      11: aload_0
      12: new           #4                  // class org/jgroups/util/Average
      15: dup
      16: bipush        50
      18: invokespecial #5                  // Method org/jgroups/util/Average."<init>":(I)V
      21: putfield      #6                  // Field avg_block_time:Lorg/jgroups/util/Average;
      24: return

  public java.lang.String printSenderCredits();
    Code:
       0: aload_0
       1: getfield      #3                  // Field sent:Ljava/util/Map;
       4: invokestatic  #7                  // Method printMap:(Ljava/util/Map;)Ljava/lang/String;
       7: areturn

  public java.lang.String printCredits();
    Code:
       0: new           #8                  // class java/lang/StringBuilder
       3: dup
       4: aload_0
       5: invokespecial #9                  // Method org/jgroups/protocols/FlowControl.printCredits:()Ljava/lang/String;
       8: invokespecial #10                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      11: astore_1
      12: aload_1
      13: ldc           #11                 // String \nsenders:\n
      15: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      18: aload_0
      19: getfield      #3                  // Field sent:Ljava/util/Map;
      22: invokestatic  #7                  // Method printMap:(Ljava/util/Map;)Ljava/lang/String;
      25: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: pop
      29: aload_1
      30: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: areturn

  public java.util.Map<java.lang.String, java.lang.Object> dumpStats();
    Code:
       0: aload_0
       1: invokespecial #14                 // Method org/jgroups/protocols/FlowControl.dumpStats:()Ljava/util/Map;
       4: astore_1
       5: aload_1
       6: ldc           #15                 // String senders
       8: aload_0
       9: getfield      #3                  // Field sent:Ljava/util/Map;
      12: invokestatic  #7                  // Method printMap:(Ljava/util/Map;)Ljava/lang/String;
      15: invokeinterface #16,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      20: pop
      21: aload_1
      22: areturn

  protected boolean handleMulticastMessage();
    Code:
       0: iconst_0
       1: ireturn

  public void unblock();
    Code:
       0: aload_0
       1: invokespecial #17                 // Method org/jgroups/protocols/FlowControl.unblock:()V
       4: return

  public int getNumberOfBlockings();
    Code:
       0: iconst_0
       1: istore_1
       2: aload_0
       3: getfield      #3                  // Field sent:Ljava/util/Map;
       6: invokeinterface #18,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      11: invokeinterface #19,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      16: astore_2
      17: aload_2
      18: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          46
      26: aload_2
      27: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #22                 // class org/jgroups/protocols/FlowControl$Credit
      35: astore_3
      36: iload_1
      37: aload_3
      38: invokevirtual #23                 // Method org/jgroups/protocols/FlowControl$Credit.getNumBlockings:()I
      41: iadd
      42: istore_1
      43: goto          17
      46: iload_1
      47: ireturn

  public double getAverageTimeBlocked();
    Code:
       0: aload_0
       1: getfield      #6                  // Field avg_block_time:Lorg/jgroups/util/Average;
       4: invokevirtual #24                 // Method org/jgroups/util/Average.getAverage:()D
       7: ldc2_w        #25                 // double 1000000.0d
      10: ddiv
      11: dreturn

  public void init() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #27                 // Method org/jgroups/protocols/FlowControl.init:()V
       4: aload_0
       5: invokevirtual #28                 // Method getTransport:()Lorg/jgroups/protocols/TP;
       8: astore_1
       9: aload_1
      10: instanceof    #29                 // class org/jgroups/protocols/BasicTCP
      13: ifeq          50
      16: aload_0
      17: getfield      #30                 // Field log:Lorg/jgroups/logging/Log;
      20: new           #8                  // class java/lang/StringBuilder
      23: dup
      24: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
      27: aload_0
      28: invokevirtual #32                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      31: invokevirtual #33                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      34: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: ldc           #34                 // String  is not needed (and can be removed) as we\'re running on a TCP transport
      39: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      42: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      45: invokeinterface #35,  2           // InterfaceMethod org/jgroups/logging/Log.info:(Ljava/lang/String;)V
      50: return

  public void stop();
    Code:
       0: aload_0
       1: invokespecial #36                 // Method org/jgroups/protocols/FlowControl.stop:()V
       4: aload_0
       5: getfield      #3                  // Field sent:Ljava/util/Map;
       8: invokeinterface #18,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      13: invokeinterface #19,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      18: astore_1
      19: aload_1
      20: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      25: ifeq          49
      28: aload_1
      29: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      34: checkcast     #22                 // class org/jgroups/protocols/FlowControl$Credit
      37: astore_2
      38: aload_2
      39: aload_0
      40: getfield      #37                 // Field max_credits:J
      43: invokevirtual #38                 // Method org/jgroups/protocols/FlowControl$Credit.set:(J)V
      46: goto          19
      49: return

  public void resetStats();
    Code:
       0: aload_0
       1: invokespecial #39                 // Method org/jgroups/protocols/FlowControl.resetStats:()V
       4: aload_0
       5: getfield      #6                  // Field avg_block_time:Lorg/jgroups/util/Average;
       8: invokevirtual #40                 // Method org/jgroups/util/Average.clear:()V
      11: aload_0
      12: getfield      #3                  // Field sent:Ljava/util/Map;
      15: invokeinterface #18,  1           // InterfaceMethod java/util/Map.values:()Ljava/util/Collection;
      20: invokeinterface #19,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      25: astore_1
      26: aload_1
      27: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      32: ifeq          52
      35: aload_1
      36: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      41: checkcast     #22                 // class org/jgroups/protocols/FlowControl$Credit
      44: astore_2
      45: aload_2
      46: invokevirtual #41                 // Method org/jgroups/protocols/FlowControl$Credit.reset:()V
      49: goto          26
      52: return

  protected java.lang.Object handleDownMessage(org.jgroups.Event, org.jgroups.Message, org.jgroups.Address, int);
    Code:
       0: aload_3
       1: ifnonnull     47
       4: aload_0
       5: getfield      #30                 // Field log:Lorg/jgroups/logging/Log;
       8: new           #8                  // class java/lang/StringBuilder
      11: dup
      12: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
      15: aload_0
      16: invokevirtual #32                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      19: invokevirtual #33                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
      22: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: ldc           #42                 // String  doesn\'t handle multicast messages; passing message down
      27: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokeinterface #43,  2           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;)V
      38: aload_0
      39: getfield      #44                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      42: aload_1
      43: invokevirtual #45                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      46: areturn
      47: aload_0
      48: getfield      #3                  // Field sent:Ljava/util/Map;
      51: aload_3
      52: invokeinterface #46,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      57: checkcast     #22                 // class org/jgroups/protocols/FlowControl$Credit
      60: astore        5
      62: aload         5
      64: ifnonnull     76
      67: aload_0
      68: getfield      #44                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      71: aload_1
      72: invokevirtual #45                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      75: areturn
      76: aload_0
      77: getfield      #47                 // Field max_block_times:Ljava/util/Map;
      80: ifnull        93
      83: aload_0
      84: iload         4
      86: i2l
      87: invokevirtual #48                 // Method getMaxBlockTime:(J)J
      90: goto          97
      93: aload_0
      94: getfield      #49                 // Field max_block_time:J
      97: lstore        6
      99: aload_0
     100: getfield      #50                 // Field running:Z
     103: ifeq          186
     106: aload_0
     107: getfield      #3                  // Field sent:Ljava/util/Map;
     110: aload_3
     111: invokeinterface #51,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
     116: ifeq          186
     119: aload         5
     121: iload         4
     123: i2l
     124: lload         6
     126: invokevirtual #52                 // Method org/jgroups/protocols/FlowControl$Credit.decrementIfEnoughCredits:(JJ)Z
     129: istore        8
     131: iload         8
     133: ifne          186
     136: aload_0
     137: getfield      #50                 // Field running:Z
     140: ifeq          186
     143: aload_0
     144: getfield      #47                 // Field max_block_times:Ljava/util/Map;
     147: ifnull        153
     150: goto          186
     153: aload         5
     155: invokevirtual #53                 // Method org/jgroups/protocols/FlowControl$Credit.needToSendCreditRequest:()Z
     158: ifeq          183
     161: aload_0
     162: aload_3
     163: lconst_0
     164: aload_0
     165: getfield      #37                 // Field max_credits:J
     168: aload         5
     170: invokevirtual #54                 // Method org/jgroups/protocols/FlowControl$Credit.get:()J
     173: lsub
     174: invokestatic  #55                 // Method java/lang/Math.max:(JJ)J
     177: invokestatic  #56                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     180: invokevirtual #57                 // Method sendCreditRequest:(Lorg/jgroups/Address;Ljava/lang/Long;)V
     183: goto          99
     186: aload_0
     187: getfield      #44                 // Field down_prot:Lorg/jgroups/stack/Protocol;
     190: aload_1
     191: invokevirtual #45                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
     194: areturn

  protected void handleViewChange(java.util.List<org.jgroups.Address>);
    Code:
       0: aload_0
       1: aload_1
       2: invokespecial #58                 // Method org/jgroups/protocols/FlowControl.handleViewChange:(Ljava/util/List;)V
       5: aload_1
       6: ifnonnull     10
       9: return
      10: aload_1
      11: invokeinterface #59,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      16: astore_2
      17: aload_2
      18: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      23: ifeq          79
      26: aload_2
      27: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      32: checkcast     #60                 // class org/jgroups/Address
      35: astore_3
      36: aload_0
      37: getfield      #3                  // Field sent:Ljava/util/Map;
      40: aload_3
      41: invokeinterface #51,  2           // InterfaceMethod java/util/Map.containsKey:(Ljava/lang/Object;)Z
      46: ifne          76
      49: aload_0
      50: getfield      #3                  // Field sent:Ljava/util/Map;
      53: aload_3
      54: new           #22                 // class org/jgroups/protocols/FlowControl$Credit
      57: dup
      58: aload_0
      59: aload_0
      60: getfield      #37                 // Field max_credits:J
      63: aload_0
      64: getfield      #6                  // Field avg_block_time:Lorg/jgroups/util/Average;
      67: invokespecial #61                 // Method org/jgroups/protocols/FlowControl$Credit."<init>":(Lorg/jgroups/protocols/FlowControl;JLorg/jgroups/util/Average;)V
      70: invokeinterface #16,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      75: pop
      76: goto          17
      79: aload_0
      80: getfield      #3                  // Field sent:Ljava/util/Map;
      83: invokeinterface #62,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
      88: invokeinterface #63,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      93: astore_2
      94: aload_2
      95: invokeinterface #20,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     100: ifeq          132
     103: aload_2
     104: invokeinterface #21,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     109: checkcast     #60                 // class org/jgroups/Address
     112: astore_3
     113: aload_1
     114: aload_3
     115: invokeinterface #64,  2           // InterfaceMethod java/util/List.contains:(Ljava/lang/Object;)Z
     120: ifne          129
     123: aload_2
     124: invokeinterface #65,  1           // InterfaceMethod java/util/Iterator.remove:()V
     129: goto          94
     132: return

  protected void handleCredit(org.jgroups.Address, long);
    Code:
       0: aload_1
       1: ifnull        29
       4: aload_0
       5: getfield      #3                  // Field sent:Ljava/util/Map;
       8: aload_1
       9: invokeinterface #46,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: checkcast     #22                 // class org/jgroups/protocols/FlowControl$Credit
      17: dup
      18: astore        4
      20: ifnull        29
      23: lload_2
      24: lconst_0
      25: lcmp
      26: ifgt          30
      29: return
      30: aload_0
      31: getfield      #37                 // Field max_credits:J
      34: aload         4
      36: invokevirtual #54                 // Method org/jgroups/protocols/FlowControl$Credit.get:()J
      39: lload_2
      40: ladd
      41: invokestatic  #66                 // Method java/lang/Math.min:(JJ)J
      44: lstore        5
      46: aload_0
      47: getfield      #30                 // Field log:Lorg/jgroups/logging/Log;
      50: invokeinterface #67,  1           // InterfaceMethod org/jgroups/logging/Log.isTraceEnabled:()Z
      55: ifeq          132
      58: new           #8                  // class java/lang/StringBuilder
      61: dup
      62: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
      65: astore        7
      67: aload         7
      69: new           #8                  // class java/lang/StringBuilder
      72: dup
      73: invokespecial #31                 // Method java/lang/StringBuilder."<init>":()V
      76: ldc           #68                 // String received
      78: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      81: lload_2
      82: invokevirtual #69                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      85: ldc           #70                 // String  credits from
      87: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      90: invokevirtual #13                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      93: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      96: aload_1
      97: invokevirtual #71                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     100: ldc           #72                 // String , old credits:
     102: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     105: aload         4
     107: invokevirtual #71                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     110: ldc           #73                 // String , new credits:
     112: invokevirtual #12                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     115: lload         5
     117: invokevirtual #69                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
     120: pop
     121: aload_0
     122: getfield      #30                 // Field log:Lorg/jgroups/logging/Log;
     125: aload         7
     127: invokeinterface #74,  2           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/Object;)V
     132: aload         4
     134: lload_2
     135: invokevirtual #75                 // Method org/jgroups/protocols/FlowControl$Credit.increment:(J)V
     138: return
}

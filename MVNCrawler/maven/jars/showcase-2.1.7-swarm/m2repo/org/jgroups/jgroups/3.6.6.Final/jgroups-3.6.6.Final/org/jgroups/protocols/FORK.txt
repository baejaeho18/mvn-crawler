Compiled from "FORK.java"
public class org.jgroups.protocols.FORK extends org.jgroups.stack.Protocol {
  public static short ID;

  protected java.lang.String config;

  protected boolean process_state_events;

  private org.jgroups.fork.UnknownForkHandler unknownForkHandler;

  protected final java.util.concurrent.ConcurrentMap<java.lang.String, org.jgroups.stack.Protocol> fork_stacks;

  protected org.jgroups.Address local_addr;

  public org.jgroups.protocols.FORK();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method org/jgroups/stack/Protocol."<init>":()V
       4: aload_0
       5: iconst_1
       6: putfield      #3                  // Field process_state_events:Z
       9: aload_0
      10: new           #4                  // class org/jgroups/protocols/FORK$1
      13: dup
      14: aload_0
      15: invokespecial #5                  // Method org/jgroups/protocols/FORK$1."<init>":(Lorg/jgroups/protocols/FORK;)V
      18: putfield      #6                  // Field unknownForkHandler:Lorg/jgroups/fork/UnknownForkHandler;
      21: aload_0
      22: new           #7                  // class java/util/concurrent/ConcurrentHashMap
      25: dup
      26: invokespecial #8                  // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      29: putfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
      32: return

  public void setUnknownForkHandler(org.jgroups.fork.UnknownForkHandler);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #6                  // Field unknownForkHandler:Lorg/jgroups/fork/UnknownForkHandler;
       5: return

  public org.jgroups.fork.UnknownForkHandler getUnknownForkHandler();
    Code:
       0: aload_0
       1: getfield      #6                  // Field unknownForkHandler:Lorg/jgroups/fork/UnknownForkHandler;
       4: areturn

  public org.jgroups.stack.Protocol get(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #11                 // class org/jgroups/stack/Protocol
      13: areturn

  public org.jgroups.stack.Protocol putIfAbsent(java.lang.String, org.jgroups.stack.Protocol);
    Code:
       0: aload_0
       1: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: aload_2
       6: invokeinterface #12,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      11: checkcast     #11                 // class org/jgroups/stack/Protocol
      14: areturn

  public void remove(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #13,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: pop
      11: return

  public int getForkStacks();
    Code:
       0: aload_0
       1: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
       4: invokeinterface #14,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
       9: ireturn

  public static org.jgroups.fork.ForkProtocolStack getForkStack(org.jgroups.stack.Protocol);
    Code:
       0: aload_0
       1: ifnull        19
       4: aload_0
       5: instanceof    #15                 // class org/jgroups/fork/ForkProtocolStack
       8: ifne          19
      11: aload_0
      12: invokevirtual #16                 // Method org/jgroups/stack/Protocol.getUpProtocol:()Lorg/jgroups/stack/Protocol;
      15: astore_0
      16: goto          0
      19: aload_0
      20: instanceof    #15                 // class org/jgroups/fork/ForkProtocolStack
      23: ifeq          33
      26: aload_0
      27: checkcast     #15                 // class org/jgroups/fork/ForkProtocolStack
      30: goto          34
      33: aconst_null
      34: areturn

  public void init() throws java.lang.Exception;
    Code:
       0: aload_0
       1: invokespecial #17                 // Method org/jgroups/stack/Protocol.init:()V
       4: aload_0
       5: getfield      #18                 // Field config:Ljava/lang/String;
       8: ifnull        19
      11: aload_0
      12: aload_0
      13: getfield      #18                 // Field config:Ljava/lang/String;
      16: invokevirtual #19                 // Method createForkStacks:(Ljava/lang/String;)V
      19: return

  public java.lang.Object down(org.jgroups.Event);
    Code:
       0: aload_1
       1: invokevirtual #20                 // Method org/jgroups/Event.getType:()I
       4: lookupswitch  { // 1
                     8: 24
               default: 35
          }
      24: aload_0
      25: aload_1
      26: invokevirtual #21                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
      29: checkcast     #22                 // class org/jgroups/Address
      32: putfield      #23                 // Field local_addr:Lorg/jgroups/Address;
      35: aload_0
      36: getfield      #24                 // Field down_prot:Lorg/jgroups/stack/Protocol;
      39: aload_1
      40: invokevirtual #25                 // Method org/jgroups/stack/Protocol.down:(Lorg/jgroups/Event;)Ljava/lang/Object;
      43: areturn

  public java.lang.Object up(org.jgroups.Event);
    Code:
       0: aload_1
       1: invokevirtual #20                 // Method org/jgroups/Event.getType:()I
       4: lookupswitch  { // 4
                     1: 48
                     6: 131
                    71: 199
                    72: 182
               default: 222
          }
      48: aload_1
      49: invokevirtual #21                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
      52: checkcast     #26                 // class org/jgroups/Message
      55: astore_2
      56: aload_2
      57: aload_0
      58: getfield      #27                 // Field id:S
      61: invokevirtual #28                 // Method org/jgroups/Message.getHeader:(S)Lorg/jgroups/Header;
      64: checkcast     #29                 // class org/jgroups/protocols/FORK$ForkHeader
      67: astore_3
      68: aload_3
      69: ifnonnull     75
      72: goto          222
      75: aload_3
      76: getfield      #30                 // Field org/jgroups/protocols/FORK$ForkHeader.fork_stack_id:Ljava/lang/String;
      79: ifnonnull     92
      82: new           #31                 // class java/lang/IllegalArgumentException
      85: dup
      86: ldc           #32                 // String header has a null fork_stack_id
      88: invokespecial #33                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      91: athrow
      92: aload_0
      93: aload_3
      94: getfield      #30                 // Field org/jgroups/protocols/FORK$ForkHeader.fork_stack_id:Ljava/lang/String;
      97: invokevirtual #34                 // Method get:(Ljava/lang/String;)Lorg/jgroups/stack/Protocol;
     100: astore        4
     102: aload         4
     104: ifnull        116
     107: aload         4
     109: aload_1
     110: invokevirtual #35                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     113: goto          130
     116: aload_0
     117: getfield      #6                  // Field unknownForkHandler:Lorg/jgroups/fork/UnknownForkHandler;
     120: aload_2
     121: aload_3
     122: getfield      #30                 // Field org/jgroups/protocols/FORK$ForkHeader.fork_stack_id:Ljava/lang/String;
     125: invokeinterface #36,  3           // InterfaceMethod org/jgroups/fork/UnknownForkHandler.handleUnknownForkStack:(Lorg/jgroups/Message;Ljava/lang/String;)Ljava/lang/Object;
     130: areturn
     131: aload_0
     132: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
     135: invokeinterface #37,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.values:()Ljava/util/Collection;
     140: invokeinterface #38,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
     145: astore        5
     147: aload         5
     149: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     154: ifeq          179
     157: aload         5
     159: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     164: checkcast     #11                 // class org/jgroups/stack/Protocol
     167: astore        6
     169: aload         6
     171: aload_1
     172: invokevirtual #35                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     175: pop
     176: goto          147
     179: goto          222
     182: aload_0
     183: getfield      #3                  // Field process_state_events:Z
     186: ifne          192
     189: goto          222
     192: aload_0
     193: aload_1
     194: invokevirtual #41                 // Method getStateFromMainAndForkChannels:(Lorg/jgroups/Event;)V
     197: aconst_null
     198: areturn
     199: aload_0
     200: getfield      #3                  // Field process_state_events:Z
     203: ifne          209
     206: goto          222
     209: aload_0
     210: aload_1
     211: invokevirtual #21                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
     214: checkcast     #42                 // class java/io/InputStream
     217: invokevirtual #43                 // Method setStateInMainAndForkChannels:(Ljava/io/InputStream;)V
     220: aconst_null
     221: areturn
     222: aload_0
     223: getfield      #44                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     226: aload_1
     227: invokevirtual #35                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     230: areturn

  public void up(org.jgroups.util.MessageBatch);
    Code:
       0: new           #45                 // class java/util/HashMap
       3: dup
       4: invokespecial #46                 // Method java/util/HashMap."<init>":()V
       7: astore_2
       8: aload_1
       9: invokevirtual #47                 // Method org/jgroups/util/MessageBatch.iterator:()Ljava/util/Iterator;
      12: astore_3
      13: aload_3
      14: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      19: ifeq          116
      22: aload_3
      23: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      28: checkcast     #26                 // class org/jgroups/Message
      31: astore        4
      33: aload         4
      35: aload_0
      36: getfield      #27                 // Field id:S
      39: invokevirtual #28                 // Method org/jgroups/Message.getHeader:(S)Lorg/jgroups/Header;
      42: checkcast     #29                 // class org/jgroups/protocols/FORK$ForkHeader
      45: astore        5
      47: aload         5
      49: ifnull        113
      52: aload_1
      53: aload         4
      55: invokevirtual #48                 // Method org/jgroups/util/MessageBatch.remove:(Lorg/jgroups/Message;)Lorg/jgroups/util/MessageBatch;
      58: pop
      59: aload_2
      60: aload         5
      62: getfield      #30                 // Field org/jgroups/protocols/FORK$ForkHeader.fork_stack_id:Ljava/lang/String;
      65: invokeinterface #49,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      70: checkcast     #50                 // class java/util/List
      73: astore        6
      75: aload         6
      77: ifnonnull     103
      80: new           #51                 // class java/util/ArrayList
      83: dup
      84: invokespecial #52                 // Method java/util/ArrayList."<init>":()V
      87: astore        6
      89: aload_2
      90: aload         5
      92: getfield      #30                 // Field org/jgroups/protocols/FORK$ForkHeader.fork_stack_id:Ljava/lang/String;
      95: aload         6
      97: invokeinterface #53,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     102: pop
     103: aload         6
     105: aload         4
     107: invokeinterface #54,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     112: pop
     113: goto          13
     116: aload_2
     117: invokeinterface #55,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
     122: invokeinterface #56,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     127: astore_3
     128: aload_3
     129: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     134: ifeq          243
     137: aload_3
     138: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     143: checkcast     #57                 // class java/util/Map$Entry
     146: astore        4
     148: aload         4
     150: invokeinterface #58,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     155: checkcast     #59                 // class java/lang/String
     158: astore        5
     160: aload         4
     162: invokeinterface #60,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     167: checkcast     #50                 // class java/util/List
     170: astore        6
     172: aload_0
     173: aload         5
     175: invokevirtual #34                 // Method get:(Ljava/lang/String;)Lorg/jgroups/stack/Protocol;
     178: astore        7
     180: aload         7
     182: ifnonnull     188
     185: goto          128
     188: new           #61                 // class org/jgroups/util/MessageBatch
     191: dup
     192: aload_1
     193: invokevirtual #62                 // Method org/jgroups/util/MessageBatch.dest:()Lorg/jgroups/Address;
     196: aload_1
     197: invokevirtual #63                 // Method org/jgroups/util/MessageBatch.sender:()Lorg/jgroups/Address;
     200: aload_1
     201: invokevirtual #64                 // Method org/jgroups/util/MessageBatch.clusterName:()Lorg/jgroups/util/AsciiString;
     204: aload_1
     205: invokevirtual #65                 // Method org/jgroups/util/MessageBatch.multicast:()Z
     208: aload         6
     210: invokespecial #66                 // Method org/jgroups/util/MessageBatch."<init>":(Lorg/jgroups/Address;Lorg/jgroups/Address;Lorg/jgroups/util/AsciiString;ZLjava/util/Collection;)V
     213: astore        8
     215: aload         7
     217: aload         8
     219: invokevirtual #67                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/util/MessageBatch;)V
     222: goto          240
     225: astore        9
     227: aload_0
     228: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     231: ldc           #69                 // String failed passing up batch
     233: aload         9
     235: invokeinterface #70,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;Ljava/lang/Throwable;)V
     240: goto          128
     243: aload_1
     244: invokevirtual #71                 // Method org/jgroups/util/MessageBatch.isEmpty:()Z
     247: ifne          258
     250: aload_0
     251: getfield      #44                 // Field up_prot:Lorg/jgroups/stack/Protocol;
     254: aload_1
     255: invokevirtual #67                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/util/MessageBatch;)V
     258: return
    Exception table:
       from    to  target type
         215   222   225   Class java/lang/Throwable

  protected void getStateFromMainAndForkChannels(org.jgroups.Event);
    Code:
       0: aload_1
       1: invokevirtual #21                 // Method org/jgroups/Event.getArg:()Ljava/lang/Object;
       4: checkcast     #72                 // class java/io/OutputStream
       7: astore_2
       8: new           #73                 // class java/io/DataOutputStream
      11: dup
      12: aload_2
      13: invokespecial #74                 // Method java/io/DataOutputStream."<init>":(Ljava/io/OutputStream;)V
      16: astore_3
      17: aconst_null
      18: astore        4
      20: aload_0
      21: aconst_null
      22: aload_0
      23: getfield      #44                 // Field up_prot:Lorg/jgroups/stack/Protocol;
      26: aconst_null
      27: aconst_null
      28: aload_3
      29: invokevirtual #75                 // Method getStateFrom:(Lorg/jgroups/JChannel;Lorg/jgroups/stack/Protocol;Ljava/lang/String;Ljava/lang/String;Ljava/io/DataOutputStream;)V
      32: aload_0
      33: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
      36: invokeinterface #76,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.entrySet:()Ljava/util/Set;
      41: invokeinterface #56,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      46: astore        5
      48: aload         5
      50: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      55: ifeq          182
      58: aload         5
      60: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      65: checkcast     #57                 // class java/util/Map$Entry
      68: astore        6
      70: aload         6
      72: invokeinterface #58,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      77: checkcast     #59                 // class java/lang/String
      80: astore        7
      82: aload         6
      84: invokeinterface #60,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      89: checkcast     #11                 // class org/jgroups/stack/Protocol
      92: astore        8
      94: aload         8
      96: invokestatic  #77                 // Method getForkStack:(Lorg/jgroups/stack/Protocol;)Lorg/jgroups/fork/ForkProtocolStack;
      99: astore        9
     101: aload         9
     103: invokevirtual #78                 // Method org/jgroups/fork/ForkProtocolStack.getForkChannels:()Ljava/util/concurrent/ConcurrentMap;
     106: invokeinterface #76,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.entrySet:()Ljava/util/Set;
     111: invokeinterface #56,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     116: astore        10
     118: aload         10
     120: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     125: ifeq          179
     128: aload         10
     130: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     135: checkcast     #57                 // class java/util/Map$Entry
     138: astore        11
     140: aload         11
     142: invokeinterface #58,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     147: checkcast     #59                 // class java/lang/String
     150: astore        12
     152: aload         11
     154: invokeinterface #60,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     159: checkcast     #79                 // class org/jgroups/JChannel
     162: astore        13
     164: aload_0
     165: aload         13
     167: aconst_null
     168: aload         7
     170: aload         12
     172: aload_3
     173: invokevirtual #75                 // Method getStateFrom:(Lorg/jgroups/JChannel;Lorg/jgroups/stack/Protocol;Ljava/lang/String;Ljava/lang/String;Ljava/io/DataOutputStream;)V
     176: goto          118
     179: goto          48
     182: aload_3
     183: ifnull        263
     186: aload         4
     188: ifnull        210
     191: aload_3
     192: invokevirtual #80                 // Method java/io/DataOutputStream.close:()V
     195: goto          263
     198: astore        5
     200: aload         4
     202: aload         5
     204: invokevirtual #81                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     207: goto          263
     210: aload_3
     211: invokevirtual #80                 // Method java/io/DataOutputStream.close:()V
     214: goto          263
     217: astore        5
     219: aload         5
     221: astore        4
     223: aload         5
     225: athrow
     226: astore        14
     228: aload_3
     229: ifnull        260
     232: aload         4
     234: ifnull        256
     237: aload_3
     238: invokevirtual #80                 // Method java/io/DataOutputStream.close:()V
     241: goto          260
     244: astore        15
     246: aload         4
     248: aload         15
     250: invokevirtual #81                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     253: goto          260
     256: aload_3
     257: invokevirtual #80                 // Method java/io/DataOutputStream.close:()V
     260: aload         14
     262: athrow
     263: goto          293
     266: astore_3
     267: aload_0
     268: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     271: ldc           #82                 // String %s: failed fetching state from main channel
     273: iconst_2
     274: anewarray     #83                 // class java/lang/Object
     277: dup
     278: iconst_0
     279: aload_0
     280: getfield      #23                 // Field local_addr:Lorg/jgroups/Address;
     283: aastore
     284: dup
     285: iconst_1
     286: aload_3
     287: aastore
     288: invokeinterface #84,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     293: return
    Exception table:
       from    to  target type
         191   195   198   Class java/lang/Throwable
          20   182   217   Class java/lang/Throwable
          20   182   226   any
         237   241   244   Class java/lang/Throwable
         217   228   226   any
           8   263   266   Class java/lang/Throwable

  protected void getStateFrom(org.jgroups.JChannel, org.jgroups.stack.Protocol, java.lang.String, java.lang.String, java.io.DataOutputStream) throws java.lang.Exception;
    Code:
       0: new           #85                 // class org/jgroups/util/ByteArrayDataOutputStream
       3: dup
       4: sipush        1024
       7: invokespecial #86                 // Method org/jgroups/util/ByteArrayDataOutputStream."<init>":(I)V
      10: astore        6
      12: new           #87                 // class org/jgroups/util/OutputStreamAdapter
      15: dup
      16: aload         6
      18: invokespecial #88                 // Method org/jgroups/util/OutputStreamAdapter."<init>":(Lorg/jgroups/util/ByteArrayDataOutputStream;)V
      21: astore        7
      23: new           #89                 // class org/jgroups/Event
      26: dup
      27: bipush        72
      29: aload         7
      31: invokespecial #90                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      34: astore        8
      36: aload_1
      37: ifnull        50
      40: aload_1
      41: aload         8
      43: invokevirtual #91                 // Method org/jgroups/JChannel.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      46: pop
      47: goto          57
      50: aload_2
      51: aload         8
      53: invokevirtual #35                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      56: pop
      57: aload         6
      59: invokevirtual #92                 // Method org/jgroups/util/ByteArrayDataOutputStream.position:()I
      62: istore        9
      64: iload         9
      66: ifle          141
      69: aload_3
      70: aload         5
      72: invokestatic  #93                 // Method org/jgroups/util/Bits.writeString:(Ljava/lang/String;Ljava/io/DataOutput;)V
      75: aload         4
      77: aload         5
      79: invokestatic  #93                 // Method org/jgroups/util/Bits.writeString:(Ljava/lang/String;Ljava/io/DataOutput;)V
      82: aload         5
      84: iload         9
      86: invokevirtual #94                 // Method java/io/DataOutputStream.writeInt:(I)V
      89: aload         5
      91: aload         6
      93: invokevirtual #95                 // Method org/jgroups/util/ByteArrayDataOutputStream.buffer:()[B
      96: iconst_0
      97: iload         9
      99: invokevirtual #96                 // Method java/io/DataOutputStream.write:([BII)V
     102: aload_0
     103: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     106: ldc           #97                 // String %s: fetched %d bytes from %s:%s
     108: iconst_4
     109: anewarray     #83                 // class java/lang/Object
     112: dup
     113: iconst_0
     114: aload_0
     115: getfield      #23                 // Field local_addr:Lorg/jgroups/Address;
     118: aastore
     119: dup
     120: iconst_1
     121: iload         9
     123: invokestatic  #98                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     126: aastore
     127: dup
     128: iconst_2
     129: aload_3
     130: aastore
     131: dup
     132: iconst_3
     133: aload         4
     135: aastore
     136: invokeinterface #99,  3           // InterfaceMethod org/jgroups/logging/Log.trace:(Ljava/lang/String;[Ljava/lang/Object;)V
     141: return

  protected void setStateInMainAndForkChannels(java.io.InputStream);
    Code:
       0: new           #100                // class java/io/DataInputStream
       3: dup
       4: aload_1
       5: invokespecial #101                // Method java/io/DataInputStream."<init>":(Ljava/io/InputStream;)V
       8: astore_2
       9: aconst_null
      10: astore_3
      11: aload_2
      12: invokestatic  #102                // Method org/jgroups/util/Bits.readString:(Ljava/io/DataInput;)Ljava/lang/String;
      15: astore        4
      17: aload_2
      18: invokestatic  #102                // Method org/jgroups/util/Bits.readString:(Ljava/io/DataInput;)Ljava/lang/String;
      21: astore        5
      23: aload_2
      24: invokevirtual #103                // Method java/io/DataInputStream.readInt:()I
      27: istore        6
      29: iload         6
      31: ifle          235
      34: iload         6
      36: newarray       byte
      38: astore        7
      40: aload_1
      41: aload         7
      43: iconst_0
      44: iload         6
      46: invokevirtual #104                // Method java/io/InputStream.read:([BII)I
      49: pop
      50: new           #105                // class java/io/ByteArrayInputStream
      53: dup
      54: aload         7
      56: iconst_0
      57: iload         6
      59: invokespecial #106                // Method java/io/ByteArrayInputStream."<init>":([BII)V
      62: astore        8
      64: aload         4
      66: ifnonnull     96
      69: aload         5
      71: ifnonnull     96
      74: aload_0
      75: getfield      #44                 // Field up_prot:Lorg/jgroups/stack/Protocol;
      78: new           #89                 // class org/jgroups/Event
      81: dup
      82: bipush        71
      84: aload         8
      86: invokespecial #90                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
      89: invokevirtual #35                 // Method org/jgroups/stack/Protocol.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
      92: pop
      93: goto          235
      96: aload_0
      97: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
     100: aload         4
     102: invokeinterface #10,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
     107: checkcast     #11                 // class org/jgroups/stack/Protocol
     110: astore        9
     112: aload         9
     114: ifnonnull     157
     117: aload_0
     118: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     121: ldc           #107                // String %s: fork stack %s not found, dropping state for %s:%s
     123: iconst_4
     124: anewarray     #83                 // class java/lang/Object
     127: dup
     128: iconst_0
     129: aload_0
     130: getfield      #23                 // Field local_addr:Lorg/jgroups/Address;
     133: aastore
     134: dup
     135: iconst_1
     136: aload         4
     138: aastore
     139: dup
     140: iconst_2
     141: aload         4
     143: aastore
     144: dup
     145: iconst_3
     146: aload         5
     148: aastore
     149: invokeinterface #108,  3          // InterfaceMethod org/jgroups/logging/Log.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     154: goto          11
     157: aload         9
     159: invokestatic  #77                 // Method getForkStack:(Lorg/jgroups/stack/Protocol;)Lorg/jgroups/fork/ForkProtocolStack;
     162: astore        10
     164: aload         10
     166: aload         5
     168: invokevirtual #109                // Method org/jgroups/fork/ForkProtocolStack.get:(Ljava/lang/String;)Lorg/jgroups/JChannel;
     171: astore        11
     173: aload         11
     175: ifnonnull     218
     178: aload_0
     179: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     182: ldc           #110                // String %s: fork channel %s not found, dropping state for %s:%s
     184: iconst_4
     185: anewarray     #83                 // class java/lang/Object
     188: dup
     189: iconst_0
     190: aload_0
     191: getfield      #23                 // Field local_addr:Lorg/jgroups/Address;
     194: aastore
     195: dup
     196: iconst_1
     197: aload         5
     199: aastore
     200: dup
     201: iconst_2
     202: aload         4
     204: aastore
     205: dup
     206: iconst_3
     207: aload         5
     209: aastore
     210: invokeinterface #108,  3          // InterfaceMethod org/jgroups/logging/Log.warn:(Ljava/lang/String;[Ljava/lang/Object;)V
     215: goto          11
     218: aload         11
     220: new           #89                 // class org/jgroups/Event
     223: dup
     224: bipush        71
     226: aload         8
     228: invokespecial #90                 // Method org/jgroups/Event."<init>":(ILjava/lang/Object;)V
     231: invokevirtual #91                 // Method org/jgroups/JChannel.up:(Lorg/jgroups/Event;)Ljava/lang/Object;
     234: pop
     235: goto          11
     238: astore        4
     240: aload         4
     242: astore_3
     243: aload         4
     245: athrow
     246: astore        12
     248: aload_2
     249: ifnull        278
     252: aload_3
     253: ifnull        274
     256: aload_2
     257: invokevirtual #111                // Method java/io/DataInputStream.close:()V
     260: goto          278
     263: astore        13
     265: aload_3
     266: aload         13
     268: invokevirtual #81                 // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     271: goto          278
     274: aload_2
     275: invokevirtual #111                // Method java/io/DataInputStream.close:()V
     278: aload         12
     280: athrow
     281: astore_2
     282: goto          312
     285: astore_2
     286: aload_0
     287: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
     290: ldc           #113                // String %s: failed setting state in main channel
     292: iconst_2
     293: anewarray     #83                 // class java/lang/Object
     296: dup
     297: iconst_0
     298: aload_0
     299: getfield      #23                 // Field local_addr:Lorg/jgroups/Address;
     302: aastore
     303: dup
     304: iconst_1
     305: aload_2
     306: aastore
     307: invokeinterface #84,  3           // InterfaceMethod org/jgroups/logging/Log.error:(Ljava/lang/String;[Ljava/lang/Object;)V
     312: return
    Exception table:
       from    to  target type
          11   238   238   Class java/lang/Throwable
         256   260   263   Class java/lang/Throwable
          11   248   246   any
           0   281   281   Class java/io/EOFException
           0   281   285   Class java/lang/Throwable

  protected void createForkStacks(java.lang.String) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokestatic  #114                // Method getForkStream:(Ljava/lang/String;)Ljava/io/InputStream;
       4: astore_2
       5: aload_2
       6: ifnonnull     41
       9: new           #115                // class java/io/FileNotFoundException
      12: dup
      13: new           #116                // class java/lang/StringBuilder
      16: dup
      17: invokespecial #117                // Method java/lang/StringBuilder."<init>":()V
      20: ldc           #118                // String fork stacks config
      22: invokevirtual #119                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: aload_1
      26: invokevirtual #119                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      29: ldc           #120                // String  not found
      31: invokevirtual #119                // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      34: invokevirtual #121                // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      37: invokespecial #122                // Method java/io/FileNotFoundException."<init>":(Ljava/lang/String;)V
      40: athrow
      41: aload_2
      42: invokestatic  #123                // Method org/jgroups/fork/ForkConfig.parse:(Ljava/io/InputStream;)Ljava/util/Map;
      45: astore_3
      46: aload_0
      47: aload_3
      48: invokevirtual #124                // Method createForkStacks:(Ljava/util/Map;)V
      51: return

  protected void createForkStacks(java.util.Map<java.lang.String, java.util.List<org.jgroups.conf.ProtocolConfiguration>>) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokeinterface #55,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
       6: invokeinterface #56,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      11: astore_2
      12: aload_2
      13: invokeinterface #39,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      18: ifeq          82
      21: aload_2
      22: invokeinterface #40,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      27: checkcast     #57                 // class java/util/Map$Entry
      30: astore_3
      31: aload_3
      32: invokeinterface #58,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
      37: checkcast     #59                 // class java/lang/String
      40: astore        4
      42: aload_0
      43: aload         4
      45: invokevirtual #34                 // Method get:(Ljava/lang/String;)Lorg/jgroups/stack/Protocol;
      48: ifnull        54
      51: goto          12
      54: aconst_null
      55: aload_3
      56: invokeinterface #60,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
      61: checkcast     #50                 // class java/util/List
      64: invokestatic  #125                // Method createProtocols:(Lorg/jgroups/stack/ProtocolStack;Ljava/util/List;)Ljava/util/List;
      67: astore        5
      69: aload_0
      70: aload         4
      72: aload         5
      74: iconst_0
      75: invokevirtual #126                // Method createForkStack:(Ljava/lang/String;Ljava/util/List;Z)Lorg/jgroups/stack/ProtocolStack;
      78: pop
      79: goto          12
      82: return

  public void parse(org.w3c.dom.Node) throws java.lang.Exception;
    Code:
       0: aload_1
       1: invokestatic  #127                // Method org/jgroups/fork/ForkConfig.parse:(Lorg/w3c/dom/Node;)Ljava/util/Map;
       4: astore_2
       5: aload_0
       6: aload_2
       7: invokevirtual #124                // Method createForkStacks:(Ljava/util/Map;)V
      10: return

  public synchronized org.jgroups.stack.ProtocolStack createForkStack(java.lang.String, java.util.List<org.jgroups.stack.Protocol>, boolean) throws java.lang.Exception;
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #34                 // Method get:(Ljava/lang/String;)Lorg/jgroups/stack/Protocol;
       5: dup
       6: astore        4
       8: ifnull        33
      11: aload         4
      13: invokestatic  #77                 // Method getForkStack:(Lorg/jgroups/stack/Protocol;)Lorg/jgroups/fork/ForkProtocolStack;
      16: astore        5
      18: iload_3
      19: ifeq          30
      22: aload         5
      24: invokevirtual #128                // Method org/jgroups/fork/ForkProtocolStack.incrInits:()Lorg/jgroups/fork/ForkProtocolStack;
      27: goto          32
      30: aload         5
      32: areturn
      33: new           #51                 // class java/util/ArrayList
      36: dup
      37: invokespecial #52                 // Method java/util/ArrayList."<init>":()V
      40: astore        5
      42: aload         5
      44: new           #129                // class org/jgroups/fork/ForkProtocol
      47: dup
      48: aload_1
      49: invokespecial #130                // Method org/jgroups/fork/ForkProtocol."<init>":(Ljava/lang/String;)V
      52: aload_0
      53: invokevirtual #131                // Method org/jgroups/fork/ForkProtocol.setDownProtocol:(Lorg/jgroups/stack/Protocol;)Lorg/jgroups/stack/Protocol;
      56: dup
      57: astore        4
      59: invokeinterface #54,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      64: pop
      65: aload_2
      66: ifnull        78
      69: aload         5
      71: aload_2
      72: invokeinterface #132,  2          // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
      77: pop
      78: new           #15                 // class org/jgroups/fork/ForkProtocolStack
      81: dup
      82: aload_0
      83: invokevirtual #133                // Method getUnknownForkHandler:()Lorg/jgroups/fork/UnknownForkHandler;
      86: aload         5
      88: aload_1
      89: invokespecial #134                // Method org/jgroups/fork/ForkProtocolStack."<init>":(Lorg/jgroups/fork/UnknownForkHandler;Ljava/util/List;Ljava/lang/String;)V
      92: aload_0
      93: getfield      #135                // Field stack:Lorg/jgroups/stack/ProtocolStack;
      96: invokevirtual #136                // Method org/jgroups/stack/ProtocolStack.getChannel:()Lorg/jgroups/JChannel;
      99: invokevirtual #137                // Method org/jgroups/fork/ForkProtocolStack.setChannel:(Lorg/jgroups/JChannel;)Lorg/jgroups/stack/ProtocolStack;
     102: checkcast     #15                 // class org/jgroups/fork/ForkProtocolStack
     105: astore        6
     107: aload         6
     109: invokevirtual #138                // Method org/jgroups/fork/ForkProtocolStack.init:()V
     112: iload_3
     113: ifeq          122
     116: aload         6
     118: invokevirtual #128                // Method org/jgroups/fork/ForkProtocolStack.incrInits:()Lorg/jgroups/fork/ForkProtocolStack;
     121: pop
     122: aload_0
     123: getfield      #9                  // Field fork_stacks:Ljava/util/concurrent/ConcurrentMap;
     126: aload_1
     127: aload         4
     129: invokeinterface #12,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     134: pop
     135: aload         6
     137: areturn

  protected static java.util.List<org.jgroups.stack.Protocol> createProtocols(org.jgroups.stack.ProtocolStack, java.util.List<org.jgroups.conf.ProtocolConfiguration>) throws java.lang.Exception;
    Code:
       0: aload_1
       1: aload_0
       2: invokestatic  #139                // Method org/jgroups/stack/Configurator.createProtocols:(Ljava/util/List;Lorg/jgroups/stack/ProtocolStack;)Ljava/util/List;
       5: areturn

  public static java.io.InputStream getForkStream(java.lang.String) throws java.io.IOException;
    Code:
       0: aconst_null
       1: astore_1
       2: new           #140                // class java/io/FileInputStream
       5: dup
       6: aload_0
       7: invokespecial #141                // Method java/io/FileInputStream."<init>":(Ljava/lang/String;)V
      10: astore_1
      11: goto          15
      14: astore_2
      15: aload_1
      16: ifnonnull     35
      19: new           #143                // class java/net/URL
      22: dup
      23: aload_0
      24: invokespecial #144                // Method java/net/URL."<init>":(Ljava/lang/String;)V
      27: invokevirtual #145                // Method java/net/URL.openStream:()Ljava/io/InputStream;
      30: astore_1
      31: goto          35
      34: astore_2
      35: aload_1
      36: ifnonnull     47
      39: aload_0
      40: ldc_w         #147                // class org/jgroups/conf/ConfiguratorFactory
      43: invokestatic  #148                // Method org/jgroups/util/Util.getResourceAsStream:(Ljava/lang/String;Ljava/lang/Class;)Ljava/io/InputStream;
      46: astore_1
      47: aload_1
      48: areturn
    Exception table:
       from    to  target type
           2    11    14   Class java/io/FileNotFoundException
           2    11    14   Class java/security/AccessControlException
          19    31    34   Class java/net/MalformedURLException

  static org.jgroups.logging.Log access$000(org.jgroups.protocols.FORK);
    Code:
       0: aload_0
       1: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
       4: areturn

  static org.jgroups.logging.Log access$100(org.jgroups.protocols.FORK);
    Code:
       0: aload_0
       1: getfield      #1                  // Field log:Lorg/jgroups/logging/Log;
       4: areturn

  static {};
    Code:
       0: ldc_w         #149                // class org/jgroups/protocols/FORK
       3: invokestatic  #150                // Method org/jgroups/conf/ClassConfigurator.getProtocolId:(Ljava/lang/Class;)S
       6: putstatic     #151                // Field ID:S
       9: return
}

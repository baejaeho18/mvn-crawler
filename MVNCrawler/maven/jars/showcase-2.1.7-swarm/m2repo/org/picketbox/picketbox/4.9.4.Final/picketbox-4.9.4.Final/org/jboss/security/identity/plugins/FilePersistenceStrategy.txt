Compiled from "FilePersistenceStrategy.java"
public class org.jboss.security.identity.plugins.FilePersistenceStrategy implements org.jboss.security.identity.plugins.PersistenceStrategy {
  private java.lang.String path;

  public org.jboss.security.identity.plugins.FilePersistenceStrategy(java.lang.String);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field path:Ljava/lang/String;
       9: return

  public org.jboss.security.identity.Identity persistIdentity(org.jboss.security.identity.Identity);
    Code:
       0: aconst_null
       1: astore_2
       2: aconst_null
       3: astore_3
       4: new           #3                  // class java/io/File
       7: dup
       8: new           #4                  // class java/lang/StringBuilder
      11: dup
      12: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      15: aload_0
      16: getfield      #2                  // Field path:Ljava/lang/String;
      19: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: getstatic     #7                  // Field java/io/File.separator:Ljava/lang/String;
      25: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_1
      29: invokeinterface #8,  1            // InterfaceMethod org/jboss/security/identity/Identity.getName:()Ljava/lang/String;
      34: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      37: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      40: invokespecial #10                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      43: astore        4
      45: aload         4
      47: invokevirtual #11                 // Method java/io/File.exists:()Z
      50: ifeq          69
      53: aconst_null
      54: astore        5
      56: aload_0
      57: aload_2
      58: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
      61: aload_0
      62: aload_3
      63: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
      66: aload         5
      68: areturn
      69: new           #13                 // class java/io/FileOutputStream
      72: dup
      73: aload         4
      75: invokespecial #14                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
      78: astore_3
      79: new           #15                 // class java/io/ObjectOutputStream
      82: dup
      83: aload_3
      84: invokespecial #16                 // Method java/io/ObjectOutputStream."<init>":(Ljava/io/OutputStream;)V
      87: astore_2
      88: aload_2
      89: aload_1
      90: invokevirtual #17                 // Method java/io/ObjectOutputStream.writeObject:(Ljava/lang/Object;)V
      93: aload_1
      94: astore        5
      96: aload_0
      97: aload_2
      98: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
     101: aload_0
     102: aload_3
     103: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
     106: aload         5
     108: areturn
     109: astore        4
     111: new           #19                 // class java/lang/RuntimeException
     114: dup
     115: aload         4
     117: invokespecial #20                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     120: athrow
     121: astore        6
     123: aload_0
     124: aload_2
     125: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
     128: aload_0
     129: aload_3
     130: invokespecial #12                 // Method safeClose:(Ljava/io/OutputStream;)V
     133: aload         6
     135: athrow
    Exception table:
       from    to  target type
           4    56   109   Class java/lang/Exception
          69    96   109   Class java/lang/Exception
           4    56   121   any
          69    96   121   any
         109   123   121   any

  public org.jboss.security.identity.Identity getIdentity(java.lang.String);
    Code:
       0: aconst_null
       1: astore_2
       2: aconst_null
       3: astore_3
       4: new           #21                 // class java/io/FileInputStream
       7: dup
       8: new           #4                  // class java/lang/StringBuilder
      11: dup
      12: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      15: aload_0
      16: getfield      #2                  // Field path:Ljava/lang/String;
      19: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      22: getstatic     #7                  // Field java/io/File.separator:Ljava/lang/String;
      25: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: aload_1
      29: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      32: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      35: invokespecial #22                 // Method java/io/FileInputStream."<init>":(Ljava/lang/String;)V
      38: astore_3
      39: new           #23                 // class java/io/ObjectInputStream
      42: dup
      43: aload_3
      44: invokespecial #24                 // Method java/io/ObjectInputStream."<init>":(Ljava/io/InputStream;)V
      47: astore_2
      48: aload_2
      49: invokevirtual #25                 // Method java/io/ObjectInputStream.readObject:()Ljava/lang/Object;
      52: checkcast     #26                 // class org/jboss/security/identity/Identity
      55: astore        4
      57: aload         4
      59: astore        5
      61: aload_0
      62: aload_2
      63: invokespecial #27                 // Method safeClose:(Ljava/io/InputStream;)V
      66: aload_0
      67: aload_3
      68: invokespecial #27                 // Method safeClose:(Ljava/io/InputStream;)V
      71: aload         5
      73: areturn
      74: astore        4
      76: new           #19                 // class java/lang/RuntimeException
      79: dup
      80: aload         4
      82: invokespecial #20                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
      85: athrow
      86: astore        6
      88: aload_0
      89: aload_2
      90: invokespecial #27                 // Method safeClose:(Ljava/io/InputStream;)V
      93: aload_0
      94: aload_3
      95: invokespecial #27                 // Method safeClose:(Ljava/io/InputStream;)V
      98: aload         6
     100: athrow
    Exception table:
       from    to  target type
           4    61    74   Class java/lang/Exception
           4    61    86   any
          74    88    86   any

  public boolean removeIdentity(org.jboss.security.identity.Identity);
    Code:
       0: new           #3                  // class java/io/File
       3: dup
       4: new           #4                  // class java/lang/StringBuilder
       7: dup
       8: invokespecial #5                  // Method java/lang/StringBuilder."<init>":()V
      11: aload_0
      12: getfield      #2                  // Field path:Ljava/lang/String;
      15: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      18: getstatic     #7                  // Field java/io/File.separator:Ljava/lang/String;
      21: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      24: aload_1
      25: invokeinterface #8,  1            // InterfaceMethod org/jboss/security/identity/Identity.getName:()Ljava/lang/String;
      30: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: invokevirtual #9                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: invokespecial #10                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      39: astore_2
      40: aload_2
      41: invokevirtual #28                 // Method java/io/File.delete:()Z
      44: ireturn

  public org.jboss.security.identity.Identity updateIdentity(org.jboss.security.identity.Identity);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #29                 // Method removeIdentity:(Lorg/jboss/security/identity/Identity;)Z
       5: ifeq          14
       8: aload_0
       9: aload_1
      10: invokevirtual #30                 // Method persistIdentity:(Lorg/jboss/security/identity/Identity;)Lorg/jboss/security/identity/Identity;
      13: areturn
      14: aconst_null
      15: areturn

  private void safeClose(java.io.InputStream);
    Code:
       0: aload_1
       1: ifnull        8
       4: aload_1
       5: invokevirtual #31                 // Method java/io/InputStream.close:()V
       8: goto          12
      11: astore_2
      12: return
    Exception table:
       from    to  target type
           0     8    11   Class java/lang/Exception

  private void safeClose(java.io.OutputStream);
    Code:
       0: aload_1
       1: ifnull        8
       4: aload_1
       5: invokevirtual #32                 // Method java/io/OutputStream.close:()V
       8: goto          12
      11: astore_2
      12: return
    Exception table:
       from    to  target type
           0     8    11   Class java/lang/Exception
}

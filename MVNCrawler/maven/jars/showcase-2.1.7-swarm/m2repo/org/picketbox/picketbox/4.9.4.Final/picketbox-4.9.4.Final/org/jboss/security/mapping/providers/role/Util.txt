Compiled from "Util.java"
public class org.jboss.security.mapping.providers.role.Util {
  public org.jboss.security.mapping.providers.role.Util();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  static java.util.Properties loadProperties(java.lang.String) throws java.io.IOException;
    Code:
       0: aconst_null
       1: astore_1
       2: invokestatic  #2                  // Method org/jboss/security/mapping/providers/role/SecurityActions.getContextClassLoader:()Ljava/lang/ClassLoader;
       5: astore_2
       6: aconst_null
       7: astore_3
       8: aload_2
       9: instanceof    #3                  // class java/net/URLClassLoader
      12: ifeq          37
      15: aload_2
      16: checkcast     #3                  // class java/net/URLClassLoader
      19: astore        4
      21: aload         4
      23: aload_0
      24: invokestatic  #4                  // Method org/jboss/security/mapping/providers/role/SecurityActions.findResource:(Ljava/net/URLClassLoader;Ljava/lang/String;)Ljava/net/URL;
      27: astore_3
      28: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
      31: aload_0
      32: invokeinterface #6,  2            // InterfaceMethod org/jboss/security/PicketBoxLogger.traceAttemptToLoadResource:(Ljava/lang/String;)V
      37: aload_3
      38: ifnonnull     47
      41: aload_2
      42: aload_0
      43: invokevirtual #7                  // Method java/lang/ClassLoader.getResource:(Ljava/lang/String;)Ljava/net/URL;
      46: astore_3
      47: aload_3
      48: ifnonnull     102
      51: new           #8                  // class java/net/URL
      54: dup
      55: aload_0
      56: invokespecial #9                  // Method java/net/URL."<init>":(Ljava/lang/String;)V
      59: astore_3
      60: goto          102
      63: astore        4
      65: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
      68: aload         4
      70: invokeinterface #11,  2           // InterfaceMethod org/jboss/security/PicketBoxLogger.debugFailureToOpenPropertiesFromURL:(Ljava/lang/Throwable;)V
      75: new           #12                 // class java/io/File
      78: dup
      79: aload_0
      80: invokespecial #13                 // Method java/io/File."<init>":(Ljava/lang/String;)V
      83: astore        5
      85: aload         5
      87: invokevirtual #14                 // Method java/io/File.exists:()Z
      90: ifeq          102
      93: aload         5
      95: invokevirtual #15                 // Method java/io/File.toURI:()Ljava/net/URI;
      98: invokevirtual #16                 // Method java/net/URI.toURL:()Ljava/net/URL;
     101: astore_3
     102: aload_3
     103: ifnonnull     116
     106: getstatic     #17                 // Field org/jboss/security/PicketBoxMessages.MESSAGES:Lorg/jboss/security/PicketBoxMessages;
     109: aload_0
     110: invokeinterface #18,  2           // InterfaceMethod org/jboss/security/PicketBoxMessages.unableToLoadPropertiesFile:(Ljava/lang/String;)Ljava/io/IOException;
     115: athrow
     116: new           #19                 // class java/util/Properties
     119: dup
     120: invokespecial #20                 // Method java/util/Properties."<init>":()V
     123: astore        4
     125: new           #19                 // class java/util/Properties
     128: dup
     129: aload         4
     131: invokespecial #21                 // Method java/util/Properties."<init>":(Ljava/util/Properties;)V
     134: astore_1
     135: aconst_null
     136: astore        5
     138: aload_3
     139: invokestatic  #22                 // Method org/jboss/security/mapping/providers/role/SecurityActions.openStream:(Ljava/net/URL;)Ljava/io/InputStream;
     142: astore        5
     144: goto          162
     147: astore        6
     149: new           #24                 // class java/io/IOException
     152: dup
     153: aload         6
     155: invokevirtual #25                 // Method java/security/PrivilegedActionException.getLocalizedMessage:()Ljava/lang/String;
     158: invokespecial #26                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     161: athrow
     162: aload         5
     164: ifnull        194
     167: aload_1
     168: aload         5
     170: invokevirtual #27                 // Method java/util/Properties.load:(Ljava/io/InputStream;)V
     173: aload         5
     175: invokestatic  #28                 // Method safeClose:(Ljava/io/InputStream;)V
     178: goto          191
     181: astore        7
     183: aload         5
     185: invokestatic  #28                 // Method safeClose:(Ljava/io/InputStream;)V
     188: aload         7
     190: athrow
     191: goto          204
     194: getstatic     #17                 // Field org/jboss/security/PicketBoxMessages.MESSAGES:Lorg/jboss/security/PicketBoxMessages;
     197: aload_0
     198: invokeinterface #18,  2           // InterfaceMethod org/jboss/security/PicketBoxMessages.unableToLoadPropertiesFile:(Ljava/lang/String;)Ljava/io/IOException;
     203: athrow
     204: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
     207: invokeinterface #29,  1           // InterfaceMethod org/jboss/security/PicketBoxLogger.isTraceEnabled:()Z
     212: ifeq          228
     215: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
     218: aload_0
     219: aload_1
     220: invokevirtual #30                 // Method java/util/Properties.keySet:()Ljava/util/Set;
     223: invokeinterface #31,  3           // InterfaceMethod org/jboss/security/PicketBoxLogger.tracePropertiesFileLoaded:(Ljava/lang/String;Ljava/util/Set;)V
     228: aload_1
     229: areturn
    Exception table:
       from    to  target type
          51    60    63   Class java/net/MalformedURLException
         138   144   147   Class java/security/PrivilegedActionException
         167   173   181   any
         181   183   181   any

  static void addRolesToGroup(java.lang.String, org.jboss.security.identity.RoleGroup, java.util.Properties);
    Code:
       0: aconst_null
       1: astore_3
       2: aload_2
       3: aload_0
       4: invokevirtual #32                 // Method java/util/Properties.containsKey:(Ljava/lang/Object;)Z
       7: ifeq          39
      10: aload_2
      11: aload_0
      12: invokevirtual #33                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      15: astore        4
      17: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
      20: aload         4
      22: aload_1
      23: invokeinterface #34,  1           // InterfaceMethod org/jboss/security/identity/RoleGroup.getRoleName:()Ljava/lang/String;
      28: invokeinterface #35,  3           // InterfaceMethod org/jboss/security/PicketBoxLogger.traceAdditionOfRoleToGroup:(Ljava/lang/String;Ljava/lang/String;)V
      33: aload         4
      35: invokestatic  #36                 // Method parseRoles:(Ljava/lang/String;)[Ljava/lang/String;
      38: astore_3
      39: aload_3
      40: ifnull        76
      43: iconst_0
      44: istore        4
      46: iload         4
      48: aload_3
      49: arraylength
      50: if_icmpge     76
      53: aload_1
      54: new           #37                 // class org/jboss/security/identity/plugins/SimpleRole
      57: dup
      58: aload_3
      59: iload         4
      61: aaload
      62: invokespecial #38                 // Method org/jboss/security/identity/plugins/SimpleRole."<init>":(Ljava/lang/String;)V
      65: invokeinterface #39,  2           // InterfaceMethod org/jboss/security/identity/RoleGroup.addRole:(Lorg/jboss/security/identity/Role;)V
      70: iinc          4, 1
      73: goto          46
      76: return

  static java.lang.String[] parseRoles(java.lang.String);
    Code:
       0: aload_0
       1: ldc           #40                 // String ,
       3: invokevirtual #41                 // Method java/lang/String.split:(Ljava/lang/String;)[Ljava/lang/String;
       6: areturn

  static void addRolesToGroup(java.lang.String, org.jboss.security.identity.RoleGroup, java.lang.String, java.lang.String, boolean, javax.transaction.TransactionManager);
    Code:
       0: aconst_null
       1: astore        6
       3: aconst_null
       4: astore        7
       6: aconst_null
       7: astore        8
       9: iload         4
      11: ifeq          28
      14: aload         5
      16: ifnonnull     28
      19: getstatic     #17                 // Field org/jboss/security/PicketBoxMessages.MESSAGES:Lorg/jboss/security/PicketBoxMessages;
      22: invokeinterface #42,  1           // InterfaceMethod org/jboss/security/PicketBoxMessages.invalidNullTransactionManager:()Ljava/lang/IllegalStateException;
      27: athrow
      28: aconst_null
      29: astore        9
      31: iload         4
      33: ifeq          60
      36: aload         5
      38: invokeinterface #43,  1           // InterfaceMethod javax/transaction/TransactionManager.suspend:()Ljavax/transaction/Transaction;
      43: astore        9
      45: goto          60
      48: astore        10
      50: new           #45                 // class java/lang/RuntimeException
      53: dup
      54: aload         10
      56: invokespecial #46                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
      59: athrow
      60: new           #47                 // class javax/naming/InitialContext
      63: dup
      64: invokespecial #48                 // Method javax/naming/InitialContext."<init>":()V
      67: astore        10
      69: aload         10
      71: aload_2
      72: invokevirtual #49                 // Method javax/naming/InitialContext.lookup:(Ljava/lang/String;)Ljava/lang/Object;
      75: checkcast     #50                 // class javax/sql/DataSource
      78: astore        11
      80: aload         11
      82: invokeinterface #51,  1           // InterfaceMethod javax/sql/DataSource.getConnection:()Ljava/sql/Connection;
      87: astore        6
      89: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
      92: aload_3
      93: aload_0
      94: invokeinterface #52,  3           // InterfaceMethod org/jboss/security/PicketBoxLogger.traceExecuteQuery:(Ljava/lang/String;Ljava/lang/String;)V
      99: aload         6
     101: aload_3
     102: invokeinterface #53,  2           // InterfaceMethod java/sql/Connection.prepareStatement:(Ljava/lang/String;)Ljava/sql/PreparedStatement;
     107: astore        7
     109: aload         7
     111: iconst_1
     112: aload_0
     113: invokeinterface #54,  3           // InterfaceMethod java/sql/PreparedStatement.setString:(ILjava/lang/String;)V
     118: goto          123
     121: astore        12
     123: aload         7
     125: invokeinterface #56,  1           // InterfaceMethod java/sql/PreparedStatement.executeQuery:()Ljava/sql/ResultSet;
     130: astore        8
     132: aload         8
     134: invokeinterface #57,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     139: ifne          153
     142: getstatic     #5                  // Field org/jboss/security/PicketBoxLogger.LOGGER:Lorg/jboss/security/PicketBoxLogger;
     145: invokeinterface #58,  1           // InterfaceMethod org/jboss/security/PicketBoxLogger.traceQueryWithEmptyResult:()V
     150: goto          188
     153: aload         8
     155: iconst_1
     156: invokeinterface #59,  2           // InterfaceMethod java/sql/ResultSet.getString:(I)Ljava/lang/String;
     161: astore        12
     163: aload_1
     164: new           #37                 // class org/jboss/security/identity/plugins/SimpleRole
     167: dup
     168: aload         12
     170: invokespecial #38                 // Method org/jboss/security/identity/plugins/SimpleRole."<init>":(Ljava/lang/String;)V
     173: invokeinterface #39,  2           // InterfaceMethod org/jboss/security/identity/RoleGroup.addRole:(Lorg/jboss/security/identity/Role;)V
     178: aload         8
     180: invokeinterface #57,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     185: ifne          153
     188: aload         8
     190: ifnull        205
     193: aload         8
     195: invokeinterface #60,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     200: goto          205
     203: astore        10
     205: aload         7
     207: ifnull        222
     210: aload         7
     212: invokeinterface #62,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     217: goto          222
     220: astore        10
     222: aload         6
     224: ifnull        239
     227: aload         6
     229: invokeinterface #63,  1           // InterfaceMethod java/sql/Connection.close:()V
     234: goto          239
     237: astore        10
     239: iload         4
     241: ifeq          394
     244: aload         5
     246: aload         9
     248: invokeinterface #65,  2           // InterfaceMethod javax/transaction/TransactionManager.resume:(Ljavax/transaction/Transaction;)V
     253: goto          394
     256: astore        10
     258: new           #45                 // class java/lang/RuntimeException
     261: dup
     262: aload         10
     264: invokespecial #46                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     267: athrow
     268: astore        10
     270: new           #67                 // class java/lang/IllegalArgumentException
     273: dup
     274: getstatic     #17                 // Field org/jboss/security/PicketBoxMessages.MESSAGES:Lorg/jboss/security/PicketBoxMessages;
     277: aload_2
     278: invokeinterface #68,  2           // InterfaceMethod org/jboss/security/PicketBoxMessages.failedToLookupDataSourceMessage:(Ljava/lang/String;)Ljava/lang/String;
     283: aload         10
     285: invokespecial #69                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     288: athrow
     289: astore        10
     291: new           #67                 // class java/lang/IllegalArgumentException
     294: dup
     295: getstatic     #17                 // Field org/jboss/security/PicketBoxMessages.MESSAGES:Lorg/jboss/security/PicketBoxMessages;
     298: invokeinterface #70,  1           // InterfaceMethod org/jboss/security/PicketBoxMessages.failedToProcessQueryMessage:()Ljava/lang/String;
     303: aload         10
     305: invokespecial #69                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     308: athrow
     309: astore        13
     311: aload         8
     313: ifnull        328
     316: aload         8
     318: invokeinterface #60,  1           // InterfaceMethod java/sql/ResultSet.close:()V
     323: goto          328
     326: astore        14
     328: aload         7
     330: ifnull        345
     333: aload         7
     335: invokeinterface #62,  1           // InterfaceMethod java/sql/PreparedStatement.close:()V
     340: goto          345
     343: astore        14
     345: aload         6
     347: ifnull        362
     350: aload         6
     352: invokeinterface #63,  1           // InterfaceMethod java/sql/Connection.close:()V
     357: goto          362
     360: astore        14
     362: iload         4
     364: ifeq          391
     367: aload         5
     369: aload         9
     371: invokeinterface #65,  2           // InterfaceMethod javax/transaction/TransactionManager.resume:(Ljavax/transaction/Transaction;)V
     376: goto          391
     379: astore        14
     381: new           #45                 // class java/lang/RuntimeException
     384: dup
     385: aload         14
     387: invokespecial #46                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     390: athrow
     391: aload         13
     393: athrow
     394: return
    Exception table:
       from    to  target type
          36    45    48   Class javax/transaction/SystemException
         109   118   121   Class java/lang/ArrayIndexOutOfBoundsException
         193   200   203   Class java/sql/SQLException
         210   217   220   Class java/sql/SQLException
         227   234   237   Class java/lang/Exception
         244   253   256   Class java/lang/Exception
          60   188   268   Class javax/naming/NamingException
          60   188   289   Class java/sql/SQLException
          60   188   309   any
         316   323   326   Class java/sql/SQLException
         333   340   343   Class java/sql/SQLException
         350   357   360   Class java/lang/Exception
         367   376   379   Class java/lang/Exception
         268   311   309   any

  private static void safeClose(java.io.InputStream);
    Code:
       0: aload_0
       1: ifnull        8
       4: aload_0
       5: invokevirtual #71                 // Method java/io/InputStream.close:()V
       8: goto          12
      11: astore_1
      12: return
    Exception table:
       from    to  target type
           0     8    11   Class java/lang/Exception
}

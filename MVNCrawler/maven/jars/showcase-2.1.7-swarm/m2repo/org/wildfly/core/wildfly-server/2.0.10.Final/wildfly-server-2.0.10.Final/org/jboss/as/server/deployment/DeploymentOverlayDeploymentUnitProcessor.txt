Compiled from "DeploymentOverlayDeploymentUnitProcessor.java"
public class org.jboss.as.server.deployment.DeploymentOverlayDeploymentUnitProcessor implements org.jboss.as.server.deployment.DeploymentUnitProcessor {
  private final org.jboss.as.repository.ContentRepository contentRepository;

  protected static final org.jboss.as.server.deployment.AttachmentKey<org.jboss.as.server.deployment.AttachmentList<java.io.Closeable>> MOUNTED_FILES;

  protected static final org.jboss.as.server.deployment.AttachmentKey<java.util.Map<java.lang.String, byte[]>> DEFERRED_OVERLAYS;

  public org.jboss.as.server.deployment.DeploymentOverlayDeploymentUnitProcessor(org.jboss.as.repository.ContentRepository);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field contentRepository:Lorg/jboss/as/repository/ContentRepository;
       9: return

  public void deploy(org.jboss.as.server.deployment.DeploymentPhaseContext) throws org.jboss.as.server.deployment.DeploymentUnitProcessingException;
    Code:
       0: aload_1
       1: invokeinterface #3,  1            // InterfaceMethod org/jboss/as/server/deployment/DeploymentPhaseContext.getDeploymentUnit:()Lorg/jboss/as/server/deployment/DeploymentUnit;
       6: astore_2
       7: aload_2
       8: getstatic     #4                  // Field org/jboss/as/server/deployment/Attachments.DEPLOYMENT_ROOT:Lorg/jboss/as/server/deployment/AttachmentKey;
      11: invokeinterface #5,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
      16: checkcast     #6                  // class org/jboss/as/server/deployment/module/ResourceRoot
      19: astore_3
      20: aload_0
      21: aload_2
      22: invokevirtual #7                  // Method getMountsAttachment:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Ljava/util/Map;
      25: astore        4
      27: aload_0
      28: aload_2
      29: invokevirtual #8                  // Method getDeferredAttachment:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Ljava/util/Map;
      32: astore        5
      34: aload_0
      35: aload_2
      36: invokevirtual #9                  // Method getOverlays:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Ljava/util/Map;
      39: astore        6
      41: aload         6
      43: ifnonnull     47
      46: return
      47: aload_2
      48: invokestatic  #10                 // Method org/jboss/as/server/deployment/MountExplodedMarker.isMountExploded:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Z
      51: ifeq          65
      54: aload_2
      55: invokestatic  #11                 // Method org/jboss/as/server/deployment/ExplodedDeploymentMarker.isExplodedDeployment:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Z
      58: ifne          65
      61: iconst_1
      62: goto          66
      65: iconst_0
      66: istore        7
      68: new           #12                 // class java/util/HashSet
      71: dup
      72: invokespecial #13                 // Method java/util/HashSet."<init>":()V
      75: astore        8
      77: aload         6
      79: invokeinterface #14,  1           // InterfaceMethod java/util/Map.entrySet:()Ljava/util/Set;
      84: invokeinterface #15,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      89: astore        9
      91: aload         9
      93: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      98: ifeq          480
     101: aload         9
     103: invokeinterface #17,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     108: checkcast     #18                 // class java/util/Map$Entry
     111: astore        10
     113: aload         10
     115: invokeinterface #19,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     120: checkcast     #20                 // class java/lang/String
     123: astore        11
     125: aload         11
     127: ldc           #21                 // String /
     129: invokevirtual #22                 // Method java/lang/String.startsWith:(Ljava/lang/String;)Z
     132: ifeq          143
     135: aload         11
     137: iconst_1
     138: invokevirtual #23                 // Method java/lang/String.substring:(I)Ljava/lang/String;
     141: astore        11
     143: aload         8
     145: aload         11
     147: invokeinterface #24,  2           // InterfaceMethod java/util/Set.contains:(Ljava/lang/Object;)Z
     152: ifne          449
     155: aload_3
     156: invokevirtual #25                 // Method org/jboss/as/server/deployment/module/ResourceRoot.getRoot:()Lorg/jboss/vfs/VirtualFile;
     159: aload         11
     161: invokevirtual #26                 // Method org/jboss/vfs/VirtualFile.getChild:(Ljava/lang/String;)Lorg/jboss/vfs/VirtualFile;
     164: astore        12
     166: aload         8
     168: aload         11
     170: invokeinterface #27,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     175: pop
     176: aload_0
     177: getfield      #2                  // Field contentRepository:Lorg/jboss/as/repository/ContentRepository;
     180: aload         10
     182: invokeinterface #28,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
     187: checkcast     #29                 // class "[B"
     190: invokeinterface #30,  2           // InterfaceMethod org/jboss/as/repository/ContentRepository.getContent:([B)Lorg/jboss/vfs/VirtualFile;
     195: astore        13
     197: iload         7
     199: ifeq          266
     202: aload         12
     204: invokevirtual #31                 // Method org/jboss/vfs/VirtualFile.getParent:()Lorg/jboss/vfs/VirtualFile;
     207: astore        14
     209: aload         14
     211: invokevirtual #32                 // Method org/jboss/vfs/VirtualFile.exists:()Z
     214: ifne          227
     217: aload         14
     219: invokevirtual #31                 // Method org/jboss/vfs/VirtualFile.getParent:()Lorg/jboss/vfs/VirtualFile;
     222: astore        14
     224: goto          209
     227: aload         14
     229: invokevirtual #33                 // Method org/jboss/vfs/VirtualFile.isDirectory:()Z
     232: ifeq          251
     235: aload         13
     237: invokevirtual #34                 // Method org/jboss/vfs/VirtualFile.getPhysicalFile:()Ljava/io/File;
     240: aload         12
     242: invokevirtual #34                 // Method org/jboss/vfs/VirtualFile.getPhysicalFile:()Ljava/io/File;
     245: invokestatic  #35                 // Method copyFile:(Ljava/io/File;Ljava/io/File;)V
     248: goto          263
     251: aload_0
     252: aload         5
     254: aload         10
     256: aload         11
     258: aload         14
     260: invokevirtual #36                 // Method handleEntryWithFileParent:(Ljava/util/Map;Ljava/util/Map$Entry;Ljava/lang/String;Lorg/jboss/vfs/VirtualFile;)V
     263: goto          449
     266: aload         12
     268: invokevirtual #31                 // Method org/jboss/vfs/VirtualFile.getParent:()Lorg/jboss/vfs/VirtualFile;
     271: astore        14
     273: new           #37                 // class java/util/ArrayList
     276: dup
     277: invokespecial #38                 // Method java/util/ArrayList."<init>":()V
     280: astore        15
     282: aload         14
     284: invokevirtual #32                 // Method org/jboss/vfs/VirtualFile.exists:()Z
     287: ifne          310
     290: aload         15
     292: aload         14
     294: invokeinterface #39,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     299: pop
     300: aload         14
     302: invokevirtual #31                 // Method org/jboss/vfs/VirtualFile.getParent:()Lorg/jboss/vfs/VirtualFile;
     305: astore        14
     307: goto          282
     310: aload         14
     312: invokevirtual #33                 // Method org/jboss/vfs/VirtualFile.isDirectory:()Z
     315: ifeq          437
     318: aload         15
     320: invokestatic  #40                 // Method java/util/Collections.reverse:(Ljava/util/List;)V
     323: aload         15
     325: invokeinterface #41,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     330: astore        16
     332: aload         16
     334: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     339: ifeq          378
     342: aload         16
     344: invokeinterface #17,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     349: checkcast     #42                 // class org/jboss/vfs/VirtualFile
     352: astore        17
     354: aload         17
     356: invokestatic  #43                 // Method org/jboss/as/server/deployment/module/TempFileProviderService.provider:()Lorg/jboss/vfs/TempFileProvider;
     359: invokestatic  #44                 // Method org/jboss/vfs/VFS.mountTemp:(Lorg/jboss/vfs/VirtualFile;Lorg/jboss/vfs/TempFileProvider;)Ljava/io/Closeable;
     362: astore        18
     364: aload_2
     365: getstatic     #45                 // Field MOUNTED_FILES:Lorg/jboss/as/server/deployment/AttachmentKey;
     368: aload         18
     370: invokeinterface #46,  3           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.addToAttachmentList:(Lorg/jboss/as/server/deployment/AttachmentKey;Ljava/lang/Object;)V
     375: goto          332
     378: aload         13
     380: invokevirtual #34                 // Method org/jboss/vfs/VirtualFile.getPhysicalFile:()Ljava/io/File;
     383: aload         12
     385: invokestatic  #47                 // Method org/jboss/vfs/VFS.mountReal:(Ljava/io/File;Lorg/jboss/vfs/VirtualFile;)Ljava/io/Closeable;
     388: astore        16
     390: new           #48                 // class org/jboss/as/server/deployment/MountedDeploymentOverlay
     393: dup
     394: aload         16
     396: aload         13
     398: invokevirtual #34                 // Method org/jboss/vfs/VirtualFile.getPhysicalFile:()Ljava/io/File;
     401: aload         12
     403: invokestatic  #43                 // Method org/jboss/as/server/deployment/module/TempFileProviderService.provider:()Lorg/jboss/vfs/TempFileProvider;
     406: invokespecial #49                 // Method org/jboss/as/server/deployment/MountedDeploymentOverlay."<init>":(Ljava/io/Closeable;Ljava/io/File;Lorg/jboss/vfs/VirtualFile;Lorg/jboss/vfs/TempFileProvider;)V
     409: astore        17
     411: aload_2
     412: getstatic     #45                 // Field MOUNTED_FILES:Lorg/jboss/as/server/deployment/AttachmentKey;
     415: aload         17
     417: invokeinterface #46,  3           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.addToAttachmentList:(Lorg/jboss/as/server/deployment/AttachmentKey;Ljava/lang/Object;)V
     422: aload         4
     424: aload         11
     426: aload         17
     428: invokeinterface #50,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     433: pop
     434: goto          449
     437: aload_0
     438: aload         5
     440: aload         10
     442: aload         11
     444: aload         14
     446: invokevirtual #36                 // Method handleEntryWithFileParent:(Ljava/util/Map;Ljava/util/Map$Entry;Ljava/lang/String;Lorg/jboss/vfs/VirtualFile;)V
     449: goto          477
     452: astore        12
     454: getstatic     #52                 // Field org/jboss/as/server/logging/ServerLogger.ROOT_LOGGER:Lorg/jboss/as/server/logging/ServerLogger;
     457: aload         12
     459: aload         10
     461: invokeinterface #19,  1           // InterfaceMethod java/util/Map$Entry.getKey:()Ljava/lang/Object;
     466: checkcast     #20                 // class java/lang/String
     469: aload         11
     471: invokeinterface #53,  4           // InterfaceMethod org/jboss/as/server/logging/ServerLogger.deploymentOverlayFailed:(Ljava/lang/Exception;Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/as/server/deployment/DeploymentUnitProcessingException;
     476: athrow
     477: goto          91
     480: return
    Exception table:
       from    to  target type
         143   449   452   Class java/io/IOException

  protected void handleEntryWithFileParent(java.util.Map<java.lang.String, byte[]>, java.util.Map$Entry<java.lang.String, byte[]>, java.lang.String, org.jboss.vfs.VirtualFile);
    Code:
       0: aload_1
       1: aload_3
       2: aload_2
       3: invokeinterface #28,  1           // InterfaceMethod java/util/Map$Entry.getValue:()Ljava/lang/Object;
       8: invokeinterface #50,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      13: pop
      14: return

  protected java.util.Map<java.lang.String, byte[]> getDeferredAttachment(org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: new           #54                 // class java/util/HashMap
       3: dup
       4: invokespecial #55                 // Method java/util/HashMap."<init>":()V
       7: astore_2
       8: aload_1
       9: getstatic     #56                 // Field DEFERRED_OVERLAYS:Lorg/jboss/as/server/deployment/AttachmentKey;
      12: aload_2
      13: invokeinterface #57,  3           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.putAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;Ljava/lang/Object;)Ljava/lang/Object;
      18: pop
      19: aload_2
      20: areturn

  protected java.util.Map<java.lang.String, org.jboss.as.server.deployment.MountedDeploymentOverlay> getMountsAttachment(org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: new           #54                 // class java/util/HashMap
       3: dup
       4: invokespecial #55                 // Method java/util/HashMap."<init>":()V
       7: astore_2
       8: aload_1
       9: getstatic     #58                 // Field org/jboss/as/server/deployment/Attachments.DEPLOYMENT_OVERLAY_LOCATIONS:Lorg/jboss/as/server/deployment/AttachmentKey;
      12: aload_2
      13: invokeinterface #57,  3           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.putAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;Ljava/lang/Object;)Ljava/lang/Object;
      18: pop
      19: aload_2
      20: areturn

  protected java.util.Map<java.lang.String, byte[]> getOverlays(org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: aload_1
       1: getstatic     #59                 // Field org/jboss/as/server/deployment/Attachments.DEPLOYMENT_OVERLAY_INDEX:Lorg/jboss/as/server/deployment/AttachmentKey;
       4: invokeinterface #5,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
       9: checkcast     #60                 // class org/jboss/as/server/deploymentoverlay/DeploymentOverlayIndex
      12: astore_2
      13: aload_2
      14: ifnonnull     19
      17: aconst_null
      18: areturn
      19: aload_2
      20: aload_1
      21: invokeinterface #61,  1           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getName:()Ljava/lang/String;
      26: invokevirtual #62                 // Method org/jboss/as/server/deploymentoverlay/DeploymentOverlayIndex.getOverlays:(Ljava/lang/String;)Ljava/util/Map;
      29: astore_3
      30: aload_3
      31: areturn

  public void undeploy(org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: aload_1
       1: getstatic     #45                 // Field MOUNTED_FILES:Lorg/jboss/as/server/deployment/AttachmentKey;
       4: invokeinterface #63,  2           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachmentList:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/util/List;
       9: invokeinterface #41,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      14: astore_2
      15: aload_2
      16: invokeinterface #16,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      21: ifeq          58
      24: aload_2
      25: invokeinterface #17,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      30: checkcast     #64                 // class java/io/Closeable
      33: astore_3
      34: aload_3
      35: invokeinterface #65,  1           // InterfaceMethod java/io/Closeable.close:()V
      40: goto          55
      43: astore        4
      45: getstatic     #66                 // Field org/jboss/as/server/logging/ServerLogger.DEPLOYMENT_LOGGER:Lorg/jboss/as/server/logging/ServerLogger;
      48: aload         4
      50: invokeinterface #67,  2           // InterfaceMethod org/jboss/as/server/logging/ServerLogger.failedToUnmountContentOverride:(Ljava/lang/Throwable;)V
      55: goto          15
      58: return
    Exception table:
       from    to  target type
          34    40    43   Class java/io/IOException

  protected static void copyFile(java.io.File, java.io.File) throws java.io.IOException;
    Code:
       0: new           #68                 // class java/io/BufferedInputStream
       3: dup
       4: new           #69                 // class java/io/FileInputStream
       7: dup
       8: aload_0
       9: invokespecial #70                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      12: invokespecial #71                 // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
      15: astore_2
      16: aload_2
      17: aload_1
      18: invokestatic  #72                 // Method copyFile:(Ljava/io/InputStream;Ljava/io/File;)V
      21: aload_2
      22: invokestatic  #73                 // Method close:(Ljava/io/Closeable;)V
      25: goto          35
      28: astore_3
      29: aload_2
      30: invokestatic  #73                 // Method close:(Ljava/io/Closeable;)V
      33: aload_3
      34: athrow
      35: return
    Exception table:
       from    to  target type
          16    21    28   any

  protected static void copyFile(java.io.InputStream, java.io.File) throws java.io.IOException;
    Code:
       0: aload_1
       1: invokevirtual #74                 // Method java/io/File.getParentFile:()Ljava/io/File;
       4: invokevirtual #75                 // Method java/io/File.mkdirs:()Z
       7: pop
       8: sipush        1024
      11: newarray       byte
      13: astore_2
      14: new           #76                 // class java/io/BufferedOutputStream
      17: dup
      18: new           #77                 // class java/io/FileOutputStream
      21: dup
      22: aload_1
      23: invokespecial #78                 // Method java/io/FileOutputStream."<init>":(Ljava/io/File;)V
      26: invokespecial #79                 // Method java/io/BufferedOutputStream."<init>":(Ljava/io/OutputStream;)V
      29: astore_3
      30: aload_0
      31: aload_2
      32: invokevirtual #80                 // Method java/io/InputStream.read:([B)I
      35: istore        4
      37: iload         4
      39: ifle          60
      42: aload_3
      43: aload_2
      44: iconst_0
      45: iload         4
      47: invokevirtual #81                 // Method java/io/OutputStream.write:([BII)V
      50: aload_0
      51: aload_2
      52: invokevirtual #80                 // Method java/io/InputStream.read:([B)I
      55: istore        4
      57: goto          37
      60: aload_3
      61: invokestatic  #73                 // Method close:(Ljava/io/Closeable;)V
      64: goto          76
      67: astore        5
      69: aload_3
      70: invokestatic  #73                 // Method close:(Ljava/io/Closeable;)V
      73: aload         5
      75: athrow
      76: return
    Exception table:
       from    to  target type
          30    60    67   any
          67    69    67   any

  protected static void close(java.io.Closeable);
    Code:
       0: aload_0
       1: invokeinterface #65,  1           // InterfaceMethod java/io/Closeable.close:()V
       6: goto          10
       9: astore_1
      10: return
    Exception table:
       from    to  target type
           0     6     9   Class java/io/IOException

  static {};
    Code:
       0: ldc           #64                 // class java/io/Closeable
       2: invokestatic  #82                 // Method org/jboss/as/server/deployment/AttachmentKey.createList:(Ljava/lang/Class;)Lorg/jboss/as/server/deployment/AttachmentKey;
       5: putstatic     #45                 // Field MOUNTED_FILES:Lorg/jboss/as/server/deployment/AttachmentKey;
       8: ldc           #83                 // class java/util/Map
      10: invokestatic  #84                 // Method org/jboss/as/server/deployment/AttachmentKey.create:(Ljava/lang/Class;)Lorg/jboss/as/server/deployment/AttachmentKey;
      13: putstatic     #56                 // Field DEFERRED_OVERLAYS:Lorg/jboss/as/server/deployment/AttachmentKey;
      16: return
}

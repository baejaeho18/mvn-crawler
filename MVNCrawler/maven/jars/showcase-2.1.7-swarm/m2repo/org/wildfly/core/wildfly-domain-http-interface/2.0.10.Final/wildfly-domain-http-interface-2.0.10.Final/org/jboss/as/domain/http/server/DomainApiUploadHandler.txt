Compiled from "DomainApiUploadHandler.java"
class org.jboss.as.domain.http.server.DomainApiUploadHandler implements io.undertow.server.HttpHandler {
  private final org.jboss.as.controller.ModelController modelController;

  private final io.undertow.server.handlers.form.FormParserFactory formParserFactory;

  public org.jboss.as.domain.http.server.DomainApiUploadHandler(org.jboss.as.controller.ModelController);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #3                  // Field modelController:Lorg/jboss/as/controller/ModelController;
       9: aload_0
      10: invokestatic  #4                  // Method io/undertow/server/handlers/form/FormParserFactory.builder:()Lio/undertow/server/handlers/form/FormParserFactory$Builder;
      13: invokevirtual #5                  // Method io/undertow/server/handlers/form/FormParserFactory$Builder.build:()Lio/undertow/server/handlers/form/FormParserFactory;
      16: putfield      #6                  // Field formParserFactory:Lio/undertow/server/handlers/form/FormParserFactory;
      19: return

  public void handleRequest(io.undertow.server.HttpServerExchange) throws java.lang.Exception;
    Code:
       0: aload_0
       1: getfield      #6                  // Field formParserFactory:Lio/undertow/server/handlers/form/FormParserFactory;
       4: aload_1
       5: invokevirtual #7                  // Method io/undertow/server/handlers/form/FormParserFactory.createParser:(Lio/undertow/server/HttpServerExchange;)Lio/undertow/server/handlers/form/FormDataParser;
       8: astore_2
       9: aload_2
      10: invokeinterface #8,  1            // InterfaceMethod io/undertow/server/handlers/form/FormDataParser.parseBlocking:()Lio/undertow/server/handlers/form/FormData;
      15: astore_3
      16: aload_3
      17: invokevirtual #9                  // Method io/undertow/server/handlers/form/FormData.iterator:()Ljava/util/Iterator;
      20: astore        4
      22: aload         4
      24: invokeinterface #10,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      29: ifeq          299
      32: aload         4
      34: invokeinterface #11,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      39: checkcast     #12                 // class java/lang/String
      42: astore        5
      44: aload_3
      45: aload         5
      47: invokevirtual #13                 // Method io/undertow/server/handlers/form/FormData.getFirst:(Ljava/lang/String;)Lio/undertow/server/handlers/form/FormData$FormValue;
      50: astore        6
      52: aload         6
      54: invokeinterface #14,  1           // InterfaceMethod io/undertow/server/handlers/form/FormData$FormValue.isFile:()Z
      59: ifeq          296
      62: aconst_null
      63: astore        7
      65: new           #15                 // class java/io/BufferedInputStream
      68: dup
      69: new           #16                 // class java/io/FileInputStream
      72: dup
      73: aload         6
      75: invokeinterface #17,  1           // InterfaceMethod io/undertow/server/handlers/form/FormData$FormValue.getPath:()Ljava/nio/file/Path;
      80: invokeinterface #18,  1           // InterfaceMethod java/nio/file/Path.toFile:()Ljava/io/File;
      85: invokespecial #19                 // Method java/io/FileInputStream."<init>":(Ljava/io/File;)V
      88: invokespecial #20                 // Method java/io/BufferedInputStream."<init>":(Ljava/io/InputStream;)V
      91: astore        8
      93: new           #21                 // class org/jboss/dmr/ModelNode
      96: dup
      97: invokespecial #22                 // Method org/jboss/dmr/ModelNode."<init>":()V
     100: astore        9
     102: aload         9
     104: ldc           #23                 // String operation
     106: invokevirtual #24                 // Method org/jboss/dmr/ModelNode.get:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     109: ldc           #25                 // String upload-deployment-stream
     111: invokevirtual #26                 // Method org/jboss/dmr/ModelNode.set:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     114: pop
     115: aload         9
     117: ldc           #27                 // String address
     119: invokevirtual #24                 // Method org/jboss/dmr/ModelNode.get:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     122: invokevirtual #28                 // Method org/jboss/dmr/ModelNode.setEmptyList:()Lorg/jboss/dmr/ModelNode;
     125: pop
     126: aload         9
     128: ldc           #29                 // String input-stream-index
     130: invokevirtual #24                 // Method org/jboss/dmr/ModelNode.get:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     133: iconst_0
     134: invokevirtual #30                 // Method org/jboss/dmr/ModelNode.set:(I)Lorg/jboss/dmr/ModelNode;
     137: pop
     138: new           #31                 // class org/jboss/as/controller/client/OperationBuilder
     141: dup
     142: aload         9
     144: invokespecial #32                 // Method org/jboss/as/controller/client/OperationBuilder."<init>":(Lorg/jboss/dmr/ModelNode;)V
     147: astore        10
     149: aload         10
     151: aload         8
     153: invokevirtual #33                 // Method org/jboss/as/controller/client/OperationBuilder.addInputStream:(Ljava/io/InputStream;)Lorg/jboss/as/controller/client/OperationBuilder;
     156: pop
     157: aload         9
     159: iconst_2
     160: anewarray     #12                 // class java/lang/String
     163: dup
     164: iconst_0
     165: ldc           #34                 // String operation-headers
     167: aastore
     168: dup
     169: iconst_1
     170: ldc           #35                 // String access-mechanism
     172: aastore
     173: invokevirtual #36                 // Method org/jboss/dmr/ModelNode.get:([Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     176: getstatic     #37                 // Field org/jboss/as/core/security/AccessMechanism.HTTP:Lorg/jboss/as/core/security/AccessMechanism;
     179: invokevirtual #38                 // Method org/jboss/as/core/security/AccessMechanism.toString:()Ljava/lang/String;
     182: invokevirtual #26                 // Method org/jboss/dmr/ModelNode.set:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     185: pop
     186: aload_0
     187: getfield      #3                  // Field modelController:Lorg/jboss/as/controller/ModelController;
     190: aload         9
     192: getstatic     #39                 // Field org/jboss/as/controller/client/OperationMessageHandler.logging:Lorg/jboss/as/controller/client/OperationMessageHandler;
     195: getstatic     #40                 // Field org/jboss/as/controller/ModelController$OperationTransactionControl.COMMIT:Lorg/jboss/as/controller/ModelController$OperationTransactionControl;
     198: aload         10
     200: invokevirtual #41                 // Method org/jboss/as/controller/client/OperationBuilder.build:()Lorg/jboss/as/controller/client/Operation;
     203: invokeinterface #42,  5           // InterfaceMethod org/jboss/as/controller/ModelController.execute:(Lorg/jboss/dmr/ModelNode;Lorg/jboss/as/controller/client/OperationMessageHandler;Lorg/jboss/as/controller/ModelController$OperationTransactionControl;Lorg/jboss/as/controller/client/OperationAttachments;)Lorg/jboss/dmr/ModelNode;
     208: astore        7
     210: aload         7
     212: ldc           #43                 // String outcome
     214: invokevirtual #24                 // Method org/jboss/dmr/ModelNode.get:(Ljava/lang/String;)Lorg/jboss/dmr/ModelNode;
     217: invokevirtual #44                 // Method org/jboss/dmr/ModelNode.asString:()Ljava/lang/String;
     220: ldc           #45                 // String success
     222: invokevirtual #46                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     225: ifne          241
     228: aload_1
     229: iconst_0
     230: aload         7
     232: invokestatic  #47                 // Method org/jboss/as/domain/http/server/Common.sendError:(Lio/undertow/server/HttpServerExchange;ZLorg/jboss/dmr/ModelNode;)V
     235: aload         8
     237: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     240: return
     241: aload         8
     243: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     246: goto          287
     249: astore        9
     251: getstatic     #50                 // Field org/jboss/as/domain/http/server/logging/HttpServerLogger.ROOT_LOGGER:Lorg/jboss/as/domain/http/server/logging/HttpServerLogger;
     254: aload         9
     256: invokeinterface #51,  2           // InterfaceMethod org/jboss/as/domain/http/server/logging/HttpServerLogger.uploadError:(Ljava/lang/Throwable;)V
     261: aload_1
     262: iconst_0
     263: aload         9
     265: invokevirtual #52                 // Method java/lang/Throwable.getLocalizedMessage:()Ljava/lang/String;
     268: invokestatic  #53                 // Method org/jboss/as/domain/http/server/Common.sendError:(Lio/undertow/server/HttpServerExchange;ZLjava/lang/String;)V
     271: aload         8
     273: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     276: return
     277: astore        11
     279: aload         8
     281: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
     284: aload         11
     286: athrow
     287: aload_1
     288: aload         7
     290: ldc           #55                 // String text/html
     292: invokestatic  #56                 // Method writeResponse:(Lio/undertow/server/HttpServerExchange;Lorg/jboss/dmr/ModelNode;Ljava/lang/String;)V
     295: return
     296: goto          22
     299: aload_1
     300: iconst_0
     301: ldc           #57                 // String No file found
     303: invokestatic  #53                 // Method org/jboss/as/domain/http/server/Common.sendError:(Lio/undertow/server/HttpServerExchange;ZLjava/lang/String;)V
     306: return
    Exception table:
       from    to  target type
          93   235   249   Class java/lang/Throwable
          93   235   277   any
         249   271   277   any
         277   279   277   any

  static void writeResponse(io.undertow.server.HttpServerExchange, org.jboss.dmr.ModelNode, java.lang.String);
    Code:
       0: aload_0
       1: invokevirtual #58                 // Method io/undertow/server/HttpServerExchange.getResponseHeaders:()Lio/undertow/util/HeaderMap;
       4: getstatic     #59                 // Field io/undertow/util/Headers.CONTENT_TYPE:Lio/undertow/util/HttpString;
       7: new           #60                 // class java/lang/StringBuilder
      10: dup
      11: invokespecial #61                 // Method java/lang/StringBuilder."<init>":()V
      14: aload_2
      15: invokevirtual #62                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      18: ldc           #63                 // String ; charset=
      20: invokevirtual #62                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      23: ldc           #64                 // String utf-8
      25: invokevirtual #62                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      28: invokevirtual #65                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      31: invokevirtual #66                 // Method io/undertow/util/HeaderMap.put:(Lio/undertow/util/HttpString;Ljava/lang/String;)Lio/undertow/util/HeaderMap;
      34: pop
      35: aload_0
      36: sipush        200
      39: invokevirtual #67                 // Method io/undertow/server/HttpServerExchange.setResponseCode:(I)Lio/undertow/server/HttpServerExchange;
      42: pop
      43: aload_0
      44: invokevirtual #68                 // Method io/undertow/server/HttpServerExchange.startBlocking:()Lio/undertow/server/BlockingHttpExchange;
      47: pop
      48: new           #69                 // class java/io/PrintWriter
      51: dup
      52: aload_0
      53: invokevirtual #70                 // Method io/undertow/server/HttpServerExchange.getOutputStream:()Ljava/io/OutputStream;
      56: invokespecial #71                 // Method java/io/PrintWriter."<init>":(Ljava/io/OutputStream;)V
      59: astore_3
      60: aload_1
      61: aload_3
      62: iconst_1
      63: invokevirtual #72                 // Method org/jboss/dmr/ModelNode.writeJSONString:(Ljava/io/PrintWriter;Z)V
      66: aload_3
      67: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      70: goto          82
      73: astore        4
      75: aload_3
      76: invokestatic  #48                 // Method org/xnio/IoUtils.safeClose:(Ljava/io/Closeable;)V
      79: aload         4
      81: athrow
      82: return
    Exception table:
       from    to  target type
          60    66    73   any
          73    75    73   any
}

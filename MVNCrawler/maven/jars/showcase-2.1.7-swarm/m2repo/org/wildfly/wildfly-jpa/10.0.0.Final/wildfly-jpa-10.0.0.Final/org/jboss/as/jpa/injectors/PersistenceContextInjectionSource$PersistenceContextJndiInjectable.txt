Compiled from "PersistenceContextInjectionSource.java"
final class org.jboss.as.jpa.injectors.PersistenceContextInjectionSource$PersistenceContextJndiInjectable implements org.jboss.as.naming.ManagedReferenceFactory {
  private final org.jboss.msc.service.ServiceName puServiceName;

  private final org.jboss.msc.service.ServiceRegistry serviceRegistry;

  private final javax.persistence.PersistenceContextType type;

  private final javax.persistence.SynchronizationType synchronizationType;

  private final java.util.Map properties;

  private final java.lang.String unitName;

  private final java.lang.String injectionTypeName;

  private final org.jipijapa.plugin.spi.PersistenceUnitMetadata pu;

  private final org.jboss.as.jpa.config.JPADeploymentSettings jpaDeploymentSettings;

  private static final java.lang.String ENTITY_MANAGER_CLASS;

  public org.jboss.as.jpa.injectors.PersistenceContextInjectionSource$PersistenceContextJndiInjectable(org.jboss.msc.service.ServiceName, org.jboss.msc.service.ServiceRegistry, javax.persistence.PersistenceContextType, javax.persistence.SynchronizationType, java.util.Map, java.lang.String, java.lang.String, org.jipijapa.plugin.spi.PersistenceUnitMetadata, org.jboss.as.jpa.config.JPADeploymentSettings);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field puServiceName:Lorg/jboss/msc/service/ServiceName;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field serviceRegistry:Lorg/jboss/msc/service/ServiceRegistry;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field type:Ljavax/persistence/PersistenceContextType;
      19: aload_0
      20: aload         5
      22: putfield      #5                  // Field properties:Ljava/util/Map;
      25: aload_0
      26: aload         6
      28: putfield      #6                  // Field unitName:Ljava/lang/String;
      31: aload_0
      32: aload         7
      34: putfield      #7                  // Field injectionTypeName:Ljava/lang/String;
      37: aload_0
      38: aload         8
      40: putfield      #8                  // Field pu:Lorg/jipijapa/plugin/spi/PersistenceUnitMetadata;
      43: aload_0
      44: aload         4
      46: putfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
      49: aload_0
      50: aload         9
      52: putfield      #10                 // Field jpaDeploymentSettings:Lorg/jboss/as/jpa/config/JPADeploymentSettings;
      55: return

  public org.jboss.as.naming.ManagedReference getReference();
    Code:
       0: aload_0
       1: getfield      #3                  // Field serviceRegistry:Lorg/jboss/msc/service/ServiceRegistry;
       4: aload_0
       5: getfield      #2                  // Field puServiceName:Lorg/jboss/msc/service/ServiceName;
       8: invokeinterface #11,  2           // InterfaceMethod org/jboss/msc/service/ServiceRegistry.getRequiredService:(Lorg/jboss/msc/service/ServiceName;)Lorg/jboss/msc/service/ServiceController;
      13: invokeinterface #12,  1           // InterfaceMethod org/jboss/msc/service/ServiceController.getValue:()Ljava/lang/Object;
      18: checkcast     #13                 // class org/jboss/as/jpa/service/PersistenceUnitServiceImpl
      21: astore_1
      22: aload_1
      23: invokevirtual #14                 // Method org/jboss/as/jpa/service/PersistenceUnitServiceImpl.getEntityManagerFactory:()Ljavax/persistence/EntityManagerFactory;
      26: astore_2
      27: ldc           #16                 // String javax.persistence.EntityManager
      29: aload_0
      30: getfield      #7                  // Field injectionTypeName:Ljava/lang/String;
      33: invokevirtual #17                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      36: istore        4
      38: aload_0
      39: getfield      #3                  // Field serviceRegistry:Lorg/jboss/msc/service/ServiceRegistry;
      42: getstatic     #18                 // Field org/jboss/as/txn/service/TransactionSynchronizationRegistryService.SERVICE_NAME:Lorg/jboss/msc/service/ServiceName;
      45: invokeinterface #11,  2           // InterfaceMethod org/jboss/msc/service/ServiceRegistry.getRequiredService:(Lorg/jboss/msc/service/ServiceName;)Lorg/jboss/msc/service/ServiceController;
      50: invokeinterface #12,  1           // InterfaceMethod org/jboss/msc/service/ServiceController.getValue:()Ljava/lang/Object;
      55: checkcast     #19                 // class javax/transaction/TransactionSynchronizationRegistry
      58: astore        5
      60: aload_0
      61: getfield      #3                  // Field serviceRegistry:Lorg/jboss/msc/service/ServiceRegistry;
      64: getstatic     #20                 // Field org/jboss/as/txn/service/TransactionManagerService.SERVICE_NAME:Lorg/jboss/msc/service/ServiceName;
      67: invokeinterface #11,  2           // InterfaceMethod org/jboss/msc/service/ServiceRegistry.getRequiredService:(Lorg/jboss/msc/service/ServiceName;)Lorg/jboss/msc/service/ServiceController;
      72: invokeinterface #12,  1           // InterfaceMethod org/jboss/msc/service/ServiceController.getValue:()Ljava/lang/Object;
      77: checkcast     #21                 // class javax/transaction/TransactionManager
      80: astore        6
      82: aload_0
      83: getfield      #4                  // Field type:Ljavax/persistence/PersistenceContextType;
      86: getstatic     #22                 // Field javax/persistence/PersistenceContextType.TRANSACTION:Ljavax/persistence/PersistenceContextType;
      89: invokevirtual #23                 // Method javax/persistence/PersistenceContextType.equals:(Ljava/lang/Object;)Z
      92: ifeq          148
      95: new           #24                 // class org/jboss/as/jpa/container/TransactionScopedEntityManager
      98: dup
      99: aload_0
     100: getfield      #6                  // Field unitName:Ljava/lang/String;
     103: aload_0
     104: getfield      #5                  // Field properties:Ljava/util/Map;
     107: aload_2
     108: aload_0
     109: getfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
     112: aload         5
     114: aload         6
     116: invokespecial #25                 // Method org/jboss/as/jpa/container/TransactionScopedEntityManager."<init>":(Ljava/lang/String;Ljava/util/Map;Ljavax/persistence/EntityManagerFactory;Ljavax/persistence/SynchronizationType;Ljavax/transaction/TransactionSynchronizationRegistry;Ljavax/transaction/TransactionManager;)V
     119: astore_3
     120: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     123: invokeinterface #27,  1           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.isDebugEnabled:()Z
     128: ifeq          435
     131: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     134: ldc           #28                 // String created new TransactionScopedEntityManager for unit name=%s
     136: aload_0
     137: getfield      #6                  // Field unitName:Ljava/lang/String;
     140: invokeinterface #29,  3           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     145: goto          435
     148: getstatic     #30                 // Field org/jboss/as/jpa/config/ExtendedPersistenceInheritance.SHALLOW:Lorg/jboss/as/jpa/config/ExtendedPersistenceInheritance;
     151: invokestatic  #31                 // Method org/jboss/as/jpa/service/JPAService.getDefaultExtendedPersistenceInheritance:()Lorg/jboss/as/jpa/config/ExtendedPersistenceInheritance;
     154: invokevirtual #32                 // Method org/jboss/as/jpa/config/ExtendedPersistenceInheritance.equals:(Ljava/lang/Object;)Z
     157: ifne          164
     160: iconst_1
     161: goto          165
     164: iconst_0
     165: istore        7
     167: aload_0
     168: getfield      #10                 // Field jpaDeploymentSettings:Lorg/jboss/as/jpa/config/JPADeploymentSettings;
     171: ifnull        189
     174: getstatic     #33                 // Field org/jboss/as/jpa/config/ExtendedPersistenceInheritance.DEEP:Lorg/jboss/as/jpa/config/ExtendedPersistenceInheritance;
     177: aload_0
     178: getfield      #10                 // Field jpaDeploymentSettings:Lorg/jboss/as/jpa/config/JPADeploymentSettings;
     181: invokevirtual #34                 // Method org/jboss/as/jpa/config/JPADeploymentSettings.getExtendedPersistenceInheritanceType:()Lorg/jboss/as/jpa/config/ExtendedPersistenceInheritance;
     184: invokevirtual #32                 // Method org/jboss/as/jpa/config/ExtendedPersistenceInheritance.equals:(Ljava/lang/Object;)Z
     187: istore        7
     189: iconst_0
     190: istore        8
     192: iload         7
     194: ifeq          212
     197: getstatic     #35                 // Field org/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance.INSTANCE:Lorg/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance;
     200: aload_0
     201: getfield      #6                  // Field unitName:Ljava/lang/String;
     204: invokevirtual #36                 // Method org/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance.findExtendedPersistenceContext:(Ljava/lang/String;)Lorg/jboss/as/jpa/container/ExtendedEntityManager;
     207: astore        9
     209: goto          224
     212: getstatic     #37                 // Field org/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance.INSTANCE:Lorg/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance;
     215: aload_0
     216: getfield      #6                  // Field unitName:Ljava/lang/String;
     219: invokevirtual #38                 // Method org/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance.findExtendedPersistenceContext:(Ljava/lang/String;)Lorg/jboss/as/jpa/container/ExtendedEntityManager;
     222: astore        9
     224: aload         9
     226: ifnonnull     347
     229: getstatic     #39                 // Field javax/persistence/SynchronizationType.UNSYNCHRONIZED:Ljavax/persistence/SynchronizationType;
     232: aload_0
     233: getfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
     236: invokevirtual #40                 // Method javax/persistence/SynchronizationType.equals:(Ljava/lang/Object;)Z
     239: ifeq          280
     242: new           #41                 // class org/jboss/as/jpa/container/ExtendedEntityManager
     245: dup
     246: aload_0
     247: getfield      #6                  // Field unitName:Ljava/lang/String;
     250: aload_2
     251: aload_0
     252: getfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
     255: aload_0
     256: getfield      #5                  // Field properties:Ljava/util/Map;
     259: invokeinterface #42,  3           // InterfaceMethod javax/persistence/EntityManagerFactory.createEntityManager:(Ljavax/persistence/SynchronizationType;Ljava/util/Map;)Ljavax/persistence/EntityManager;
     264: aload_0
     265: getfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
     268: aload         5
     270: aload         6
     272: invokespecial #43                 // Method org/jboss/as/jpa/container/ExtendedEntityManager."<init>":(Ljava/lang/String;Ljavax/persistence/EntityManager;Ljavax/persistence/SynchronizationType;Ljavax/transaction/TransactionSynchronizationRegistry;Ljavax/transaction/TransactionManager;)V
     275: astore        9
     277: goto          311
     280: new           #41                 // class org/jboss/as/jpa/container/ExtendedEntityManager
     283: dup
     284: aload_0
     285: getfield      #6                  // Field unitName:Ljava/lang/String;
     288: aload_2
     289: aload_0
     290: getfield      #5                  // Field properties:Ljava/util/Map;
     293: invokeinterface #44,  2           // InterfaceMethod javax/persistence/EntityManagerFactory.createEntityManager:(Ljava/util/Map;)Ljavax/persistence/EntityManager;
     298: aload_0
     299: getfield      #9                  // Field synchronizationType:Ljavax/persistence/SynchronizationType;
     302: aload         5
     304: aload         6
     306: invokespecial #43                 // Method org/jboss/as/jpa/container/ExtendedEntityManager."<init>":(Ljava/lang/String;Ljavax/persistence/EntityManager;Ljavax/persistence/SynchronizationType;Ljavax/transaction/TransactionSynchronizationRegistry;Ljavax/transaction/TransactionManager;)V
     309: astore        9
     311: iconst_1
     312: istore        8
     314: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     317: invokeinterface #27,  1           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.isDebugEnabled:()Z
     322: ifeq          390
     325: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     328: ldc           #45                 // String created new ExtendedEntityManager for unit name=%s, useDeepInheritance = %b
     330: aload_0
     331: getfield      #6                  // Field unitName:Ljava/lang/String;
     334: iload         7
     336: invokestatic  #46                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     339: invokeinterface #47,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     344: goto          390
     347: aload         9
     349: invokevirtual #48                 // Method org/jboss/as/jpa/container/ExtendedEntityManager.increaseReferenceCount:()V
     352: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     355: invokeinterface #27,  1           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.isDebugEnabled:()Z
     360: ifeq          390
     363: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     366: ldc           #49                 // String inherited existing ExtendedEntityManager from SFSB invocation stack, unit name=%s, %d beans sharing ExtendedEntityManager, useDeepInheritance = %b
     368: aload_0
     369: getfield      #6                  // Field unitName:Ljava/lang/String;
     372: aload         9
     374: invokevirtual #50                 // Method org/jboss/as/jpa/container/ExtendedEntityManager.getReferenceCount:()I
     377: invokestatic  #51                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     380: iload         7
     382: invokestatic  #46                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     385: invokeinterface #52,  5           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)V
     390: aload         9
     392: astore_3
     393: aload         9
     395: invokestatic  #53                 // Method org/jboss/as/jpa/container/CreatedEntityManagers.registerPersistenceContext:(Lorg/jboss/as/jpa/container/ExtendedEntityManager;)V
     398: iload         8
     400: ifeq          435
     403: iload         7
     405: ifeq          423
     408: getstatic     #35                 // Field org/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance.INSTANCE:Lorg/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance;
     411: aload_0
     412: getfield      #6                  // Field unitName:Ljava/lang/String;
     415: aload         9
     417: invokevirtual #54                 // Method org/jboss/as/jpa/container/ExtendedPersistenceDeepInheritance.registerExtendedPersistenceContext:(Ljava/lang/String;Lorg/jboss/as/jpa/container/ExtendedEntityManager;)V
     420: goto          435
     423: getstatic     #37                 // Field org/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance.INSTANCE:Lorg/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance;
     426: aload_0
     427: getfield      #6                  // Field unitName:Ljava/lang/String;
     430: aload         9
     432: invokevirtual #55                 // Method org/jboss/as/jpa/container/ExtendedPersistenceShallowInheritance.registerExtendedPersistenceContext:(Ljava/lang/String;Lorg/jboss/as/jpa/container/ExtendedEntityManager;)V
     435: iload         4
     437: ifne          648
     440: aload_0
     441: getfield      #8                  // Field pu:Lorg/jipijapa/plugin/spi/PersistenceUnitMetadata;
     444: invokeinterface #56,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getClassLoader:()Ljava/lang/ClassLoader;
     449: aload_0
     450: getfield      #7                  // Field injectionTypeName:Ljava/lang/String;
     453: invokevirtual #57                 // Method java/lang/ClassLoader.loadClass:(Ljava/lang/String;)Ljava/lang/Class;
     456: astore        7
     458: goto          478
     461: astore        8
     463: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     466: aload         8
     468: aload_0
     469: getfield      #7                  // Field injectionTypeName:Ljava/lang/String;
     472: invokeinterface #59,  3           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.cannotLoadFromJpa:(Ljava/lang/Throwable;Ljava/lang/String;)Ljava/lang/RuntimeException;
     477: athrow
     478: aload_3
     479: aload         7
     481: invokeinterface #60,  2           // InterfaceMethod javax/persistence/EntityManager.unwrap:(Ljava/lang/Class;)Ljava/lang/Object;
     486: astore        8
     488: aload         8
     490: invokevirtual #61                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     493: invokevirtual #62                 // Method java/lang/Class.getInterfaces:()[Ljava/lang/Class;
     496: astore        9
     498: aload         9
     500: arraylength
     501: iconst_1
     502: iadd
     503: anewarray     #63                 // class java/lang/Class
     506: astore        10
     508: iconst_0
     509: istore        11
     511: iconst_0
     512: istore        12
     514: iload         12
     516: aload         9
     518: arraylength
     519: if_icmpge     564
     522: aload         9
     524: iload         12
     526: aaload
     527: astore        13
     529: aload         13
     531: aload         7
     533: invokevirtual #64                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     536: ifeq          549
     539: aload         9
     541: astore        10
     543: iconst_1
     544: istore        11
     546: goto          564
     549: aload         10
     551: iconst_1
     552: iload         12
     554: iadd
     555: aload         13
     557: aastore
     558: iinc          12, 1
     561: goto          514
     564: iload         11
     566: ifne          575
     569: aload         10
     571: iconst_0
     572: aload         7
     574: aastore
     575: new           #65                 // class org/jboss/as/jpa/container/EntityManagerUnwrappedTargetInvocationHandler
     578: dup
     579: aload_3
     580: aload         7
     582: invokespecial #66                 // Method org/jboss/as/jpa/container/EntityManagerUnwrappedTargetInvocationHandler."<init>":(Ljavax/persistence/EntityManager;Ljava/lang/Class;)V
     585: astore        12
     587: aload         7
     589: invokevirtual #67                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
     592: aload         10
     594: aload         12
     596: invokestatic  #68                 // Method java/lang/reflect/Proxy.newProxyInstance:(Ljava/lang/ClassLoader;[Ljava/lang/Class;Ljava/lang/reflect/InvocationHandler;)Ljava/lang/Object;
     599: astore        13
     601: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     604: invokeinterface #27,  1           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.isDebugEnabled:()Z
     609: ifeq          631
     612: getstatic     #26                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     615: ldc           #69                 // String injecting entity manager into a \'%s\' (unit name=%s)
     617: aload         7
     619: invokevirtual #70                 // Method java/lang/Class.getName:()Ljava/lang/String;
     622: aload_0
     623: getfield      #6                  // Field unitName:Ljava/lang/String;
     626: invokeinterface #47,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     631: new           #71                 // class org/jboss/as/naming/ValueManagedReference
     634: dup
     635: new           #72                 // class org/jboss/msc/value/ImmediateValue
     638: dup
     639: aload         13
     641: invokespecial #73                 // Method org/jboss/msc/value/ImmediateValue."<init>":(Ljava/lang/Object;)V
     644: invokespecial #74                 // Method org/jboss/as/naming/ValueManagedReference."<init>":(Lorg/jboss/msc/value/Value;)V
     647: areturn
     648: new           #71                 // class org/jboss/as/naming/ValueManagedReference
     651: dup
     652: new           #72                 // class org/jboss/msc/value/ImmediateValue
     655: dup
     656: aload_3
     657: invokespecial #73                 // Method org/jboss/msc/value/ImmediateValue."<init>":(Ljava/lang/Object;)V
     660: invokespecial #74                 // Method org/jboss/as/naming/ValueManagedReference."<init>":(Lorg/jboss/msc/value/Value;)V
     663: areturn
    Exception table:
       from    to  target type
         440   458   461   Class java/lang/ClassNotFoundException
}

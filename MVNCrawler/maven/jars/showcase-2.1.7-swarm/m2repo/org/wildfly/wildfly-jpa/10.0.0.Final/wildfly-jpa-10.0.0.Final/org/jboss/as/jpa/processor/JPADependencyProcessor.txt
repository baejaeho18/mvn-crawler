Compiled from "JPADependencyProcessor.java"
public class org.jboss.as.jpa.processor.JPADependencyProcessor implements org.jboss.as.server.deployment.DeploymentUnitProcessor {
  private static final org.jboss.modules.ModuleIdentifier JAVAX_PERSISTENCE_API_ID;

  private static final org.jboss.modules.ModuleIdentifier JBOSS_AS_JPA_ID;

  private static final org.jboss.modules.ModuleIdentifier JBOSS_AS_JPA_SPI_ID;

  private static final org.jboss.modules.ModuleIdentifier JAVASSIST_ID;

  private static final org.jboss.modules.ModuleIdentifier HIBERNATE_3_PROVIDER;

  private static final java.lang.String HIBERNATE3_PROVIDER_ADAPTOR;

  private static final org.jboss.modules.ModuleIdentifier JBOSS_AS_NAMING_ID;

  private static final org.jboss.modules.ModuleIdentifier JBOSS_JANDEX_ID;

  public org.jboss.as.jpa.processor.JPADependencyProcessor();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void deploy(org.jboss.as.server.deployment.DeploymentPhaseContext) throws org.jboss.as.server.deployment.DeploymentUnitProcessingException;
    Code:
       0: aload_1
       1: invokeinterface #2,  1            // InterfaceMethod org/jboss/as/server/deployment/DeploymentPhaseContext.getDeploymentUnit:()Lorg/jboss/as/server/deployment/DeploymentUnit;
       6: astore_2
       7: aload_2
       8: getstatic     #3                  // Field org/jboss/as/server/deployment/Attachments.MODULE_SPECIFICATION:Lorg/jboss/as/server/deployment/AttachmentKey;
      11: invokeinterface #4,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
      16: checkcast     #5                  // class org/jboss/as/server/deployment/module/ModuleSpecification
      19: astore_3
      20: invokestatic  #6                  // Method org/jboss/modules/Module.getBootModuleLoader:()Lorg/jboss/modules/ModuleLoader;
      23: astore        4
      25: aload_0
      26: aload_3
      27: aload         4
      29: aload_2
      30: iconst_1
      31: anewarray     #7                  // class org/jboss/modules/ModuleIdentifier
      34: dup
      35: iconst_0
      36: getstatic     #8                  // Field JAVAX_PERSISTENCE_API_ID:Lorg/jboss/modules/ModuleIdentifier;
      39: aastore
      40: invokespecial #9                  // Method addDependency:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;[Lorg/jboss/modules/ModuleIdentifier;)V
      43: aload_2
      44: invokestatic  #10                 // Method org/jboss/as/server/deployment/JPADeploymentMarker.isJPADeployment:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Z
      47: ifne          51
      50: return
      51: aload_0
      52: aload_3
      53: aload         4
      55: aload_2
      56: iconst_3
      57: anewarray     #7                  // class org/jboss/modules/ModuleIdentifier
      60: dup
      61: iconst_0
      62: getstatic     #11                 // Field JBOSS_AS_JPA_ID:Lorg/jboss/modules/ModuleIdentifier;
      65: aastore
      66: dup
      67: iconst_1
      68: getstatic     #12                 // Field JBOSS_AS_JPA_SPI_ID:Lorg/jboss/modules/ModuleIdentifier;
      71: aastore
      72: dup
      73: iconst_2
      74: getstatic     #13                 // Field JAVASSIST_ID:Lorg/jboss/modules/ModuleIdentifier;
      77: aastore
      78: invokespecial #9                  // Method addDependency:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;[Lorg/jboss/modules/ModuleIdentifier;)V
      81: aload_0
      82: aload_1
      83: aload_3
      84: aload         4
      86: invokespecial #14                 // Method addPersistenceProviderModuleDependencies:(Lorg/jboss/as/server/deployment/DeploymentPhaseContext;Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;)V
      89: return

  private void addDependency(org.jboss.as.server.deployment.module.ModuleSpecification, org.jboss.modules.ModuleLoader, org.jboss.as.server.deployment.DeploymentUnit, org.jboss.modules.ModuleIdentifier...);
    Code:
       0: aload         4
       2: astore        5
       4: aload         5
       6: arraylength
       7: istore        6
       9: iconst_0
      10: istore        7
      12: iload         7
      14: iload         6
      16: if_icmpge     68
      19: aload         5
      21: iload         7
      23: aaload
      24: astore        8
      26: aload_1
      27: new           #15                 // class org/jboss/as/server/deployment/module/ModuleDependency
      30: dup
      31: aload_2
      32: aload         8
      34: iconst_0
      35: iconst_0
      36: iconst_1
      37: iconst_0
      38: invokespecial #16                 // Method org/jboss/as/server/deployment/module/ModuleDependency."<init>":(Lorg/jboss/modules/ModuleLoader;Lorg/jboss/modules/ModuleIdentifier;ZZZZ)V
      41: invokevirtual #17                 // Method org/jboss/as/server/deployment/module/ModuleSpecification.addSystemDependency:(Lorg/jboss/as/server/deployment/module/ModuleDependency;)V
      44: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
      47: ldc           #19                 // String added %s dependency to %s
      49: aload         8
      51: aload_3
      52: invokeinterface #20,  1           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getName:()Ljava/lang/String;
      57: invokeinterface #21,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      62: iinc          7, 1
      65: goto          12
      68: return

  private void addOptionalDependency(org.jboss.as.server.deployment.module.ModuleSpecification, org.jboss.modules.ModuleLoader, org.jboss.as.server.deployment.DeploymentUnit, org.jboss.modules.ModuleIdentifier...);
    Code:
       0: aload         4
       2: astore        5
       4: aload         5
       6: arraylength
       7: istore        6
       9: iconst_0
      10: istore        7
      12: iload         7
      14: iload         6
      16: if_icmpge     68
      19: aload         5
      21: iload         7
      23: aaload
      24: astore        8
      26: aload_1
      27: new           #15                 // class org/jboss/as/server/deployment/module/ModuleDependency
      30: dup
      31: aload_2
      32: aload         8
      34: iconst_1
      35: iconst_0
      36: iconst_0
      37: iconst_0
      38: invokespecial #16                 // Method org/jboss/as/server/deployment/module/ModuleDependency."<init>":(Lorg/jboss/modules/ModuleLoader;Lorg/jboss/modules/ModuleIdentifier;ZZZZ)V
      41: invokevirtual #17                 // Method org/jboss/as/server/deployment/module/ModuleSpecification.addSystemDependency:(Lorg/jboss/as/server/deployment/module/ModuleDependency;)V
      44: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
      47: ldc           #19                 // String added %s dependency to %s
      49: aload         8
      51: aload_3
      52: invokeinterface #20,  1           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getName:()Ljava/lang/String;
      57: invokeinterface #21,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      62: iinc          7, 1
      65: goto          12
      68: return

  public void undeploy(org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: return

  private void addPersistenceProviderModuleDependencies(org.jboss.as.server.deployment.DeploymentPhaseContext, org.jboss.as.server.deployment.module.ModuleSpecification, org.jboss.modules.ModuleLoader) throws org.jboss.as.server.deployment.DeploymentUnitProcessingException;
    Code:
       0: aload_1
       1: invokeinterface #2,  1            // InterfaceMethod org/jboss/as/server/deployment/DeploymentPhaseContext.getDeploymentUnit:()Lorg/jboss/as/server/deployment/DeploymentUnit;
       6: astore        4
       8: iconst_0
       9: istore        5
      11: new           #22                 // class java/util/HashSet
      14: dup
      15: invokespecial #23                 // Method java/util/HashSet."<init>":()V
      18: astore        6
      20: aload         4
      22: invokestatic  #24                 // Method org/jboss/as/server/deployment/DeploymentUtils.getTopDeploymentUnit:(Lorg/jboss/as/server/deployment/DeploymentUnit;)Lorg/jboss/as/server/deployment/DeploymentUnit;
      25: getstatic     #25                 // Field org/jboss/as/jpa/config/PersistenceUnitsInApplication.PERSISTENCE_UNITS_IN_APPLICATION:Lorg/jboss/as/server/deployment/AttachmentKey;
      28: invokeinterface #4,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
      33: checkcast     #26                 // class org/jboss/as/jpa/config/PersistenceUnitsInApplication
      36: astore        7
      38: aload         7
      40: invokevirtual #27                 // Method org/jboss/as/jpa/config/PersistenceUnitsInApplication.getPersistenceUnitHolders:()Ljava/util/List;
      43: invokeinterface #28,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      48: astore        8
      50: aload         8
      52: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      57: ifeq          92
      60: aload         8
      62: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      67: checkcast     #31                 // class org/jboss/as/jpa/config/PersistenceUnitMetadataHolder
      70: astore        9
      72: iload         5
      74: aload_0
      75: aload_2
      76: aload_3
      77: aload         4
      79: aload         6
      81: aload         9
      83: invokespecial #32                 // Method loadPersistenceUnits:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;Ljava/util/Set;Lorg/jboss/as/jpa/config/PersistenceUnitMetadataHolder;)I
      86: iadd
      87: istore        5
      89: goto          50
      92: iload         5
      94: ifle          151
      97: aload         6
      99: invokestatic  #33                 // Method org/jboss/as/jpa/config/Configuration.getDefaultProviderModuleName:()Ljava/lang/String;
     102: invokeinterface #34,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     107: pop
     108: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     111: ldc           #35                 // String added (default provider) %s dependency to %s (since %d PU(s) didn\'t specify %s
     113: iconst_4
     114: anewarray     #36                 // class java/lang/Object
     117: dup
     118: iconst_0
     119: invokestatic  #33                 // Method org/jboss/as/jpa/config/Configuration.getDefaultProviderModuleName:()Ljava/lang/String;
     122: aastore
     123: dup
     124: iconst_1
     125: aload         4
     127: invokeinterface #20,  1           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getName:()Ljava/lang/String;
     132: aastore
     133: dup
     134: iconst_2
     135: iload         5
     137: invokestatic  #37                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     140: aastore
     141: dup
     142: iconst_3
     143: ldc           #39                 // String jboss.as.jpa.providerModule)
     145: aastore
     146: invokeinterface #40,  3           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;[Ljava/lang/Object;)V
     151: aload         6
     153: invokeinterface #41,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     158: astore        8
     160: aload         8
     162: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     167: ifeq          205
     170: aload         8
     172: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     177: checkcast     #42                 // class java/lang/String
     180: astore        9
     182: aload_0
     183: aload_2
     184: aload_3
     185: aload         4
     187: iconst_1
     188: anewarray     #7                  // class org/jboss/modules/ModuleIdentifier
     191: dup
     192: iconst_0
     193: aload         9
     195: invokestatic  #43                 // Method org/jboss/modules/ModuleIdentifier.fromString:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
     198: aastore
     199: invokespecial #9                  // Method addDependency:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;[Lorg/jboss/modules/ModuleIdentifier;)V
     202: goto          160
     205: aload         4
     207: getstatic     #44                 // Field org/jboss/as/ee/component/Attachments.EE_MODULE_DESCRIPTION:Lorg/jboss/as/server/deployment/AttachmentKey;
     210: invokeinterface #4,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
     215: checkcast     #45                 // class org/jboss/as/ee/component/EEModuleDescription
     218: astore        8
     220: aload         8
     222: invokevirtual #46                 // Method org/jboss/as/ee/component/EEModuleDescription.getComponentDescriptions:()Ljava/util/Collection;
     225: astore        9
     227: aload         7
     229: invokevirtual #27                 // Method org/jboss/as/jpa/config/PersistenceUnitsInApplication.getPersistenceUnitHolders:()Ljava/util/List;
     232: invokeinterface #28,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     237: astore        10
     239: aload         10
     241: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     246: ifeq          271
     249: aload         10
     251: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     256: checkcast     #31                 // class org/jboss/as/jpa/config/PersistenceUnitMetadataHolder
     259: astore        11
     261: aload         9
     263: aload         11
     265: invokestatic  #47                 // Method addPUServiceDependencyToComponents:(Ljava/util/Collection;Lorg/jboss/as/jpa/config/PersistenceUnitMetadataHolder;)V
     268: goto          239
     271: return

  private static void addPUServiceDependencyToComponents(java.util.Collection<org.jboss.as.ee.component.ComponentDescription>, org.jboss.as.jpa.config.PersistenceUnitMetadataHolder);
    Code:
       0: aload_0
       1: ifnull        17
       4: aload_0
       5: invokeinterface #48,  1           // InterfaceMethod java/util/Collection.isEmpty:()Z
      10: ifne          17
      13: aload_1
      14: ifnonnull     18
      17: return
      18: aload_1
      19: invokevirtual #49                 // Method org/jboss/as/jpa/config/PersistenceUnitMetadataHolder.getPersistenceUnits:()Ljava/util/List;
      22: invokeinterface #28,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      27: astore_2
      28: aload_2
      29: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      34: ifeq          150
      37: aload_2
      38: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      43: checkcast     #50                 // class org/jipijapa/plugin/spi/PersistenceUnitMetadata
      46: astore_3
      47: aload_3
      48: invokeinterface #51,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getProperties:()Ljava/util/Properties;
      53: ldc           #52                 // String jboss.as.jpa.managed
      55: invokevirtual #53                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      58: astore        4
      60: aload         4
      62: ifnonnull     69
      65: iconst_1
      66: goto          74
      69: aload         4
      71: invokestatic  #54                 // Method java/lang/Boolean.parseBoolean:(Ljava/lang/String;)Z
      74: istore        5
      76: iload         5
      78: ifeq          147
      81: aload_3
      82: invokestatic  #55                 // Method org/jboss/as/jpa/service/PersistenceUnitServiceImpl.getPUServiceName:(Lorg/jipijapa/plugin/spi/PersistenceUnitMetadata;)Lorg/jboss/msc/service/ServiceName;
      85: astore        6
      87: aload_0
      88: invokeinterface #56,  1           // InterfaceMethod java/util/Collection.iterator:()Ljava/util/Iterator;
      93: astore        7
      95: aload         7
      97: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     102: ifeq          147
     105: aload         7
     107: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     112: checkcast     #57                 // class org/jboss/as/ee/component/ComponentDescription
     115: astore        8
     117: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     120: ldc           #58                 // String Adding dependency on PU service %s for component %s
     122: aload         6
     124: aload         8
     126: invokevirtual #59                 // Method org/jboss/as/ee/component/ComponentDescription.getComponentClassName:()Ljava/lang/String;
     129: invokeinterface #21,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     134: aload         8
     136: aload         6
     138: getstatic     #60                 // Field org/jboss/msc/service/ServiceBuilder$DependencyType.REQUIRED:Lorg/jboss/msc/service/ServiceBuilder$DependencyType;
     141: invokevirtual #61                 // Method org/jboss/as/ee/component/ComponentDescription.addDependency:(Lorg/jboss/msc/service/ServiceName;Lorg/jboss/msc/service/ServiceBuilder$DependencyType;)V
     144: goto          95
     147: goto          28
     150: return

  private int loadPersistenceUnits(org.jboss.as.server.deployment.module.ModuleSpecification, org.jboss.modules.ModuleLoader, org.jboss.as.server.deployment.DeploymentUnit, java.util.Set<java.lang.String>, org.jboss.as.jpa.config.PersistenceUnitMetadataHolder) throws org.jboss.as.server.deployment.DeploymentUnitProcessingException;
    Code:
       0: iconst_0
       1: istore        6
       3: aload         5
       5: ifnull        297
       8: aload         5
      10: invokevirtual #49                 // Method org/jboss/as/jpa/config/PersistenceUnitMetadataHolder.getPersistenceUnits:()Ljava/util/List;
      13: invokeinterface #28,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      18: astore        7
      20: aload         7
      22: invokeinterface #29,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      27: ifeq          297
      30: aload         7
      32: invokeinterface #30,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      37: checkcast     #50                 // class org/jipijapa/plugin/spi/PersistenceUnitMetadata
      40: astore        8
      42: aload         8
      44: invokeinterface #51,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getProperties:()Ljava/util/Properties;
      49: ldc           #62                 // String jboss.as.jpa.providerModule
      51: invokevirtual #53                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      54: astore        9
      56: aload         8
      58: invokeinterface #51,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getProperties:()Ljava/util/Properties;
      63: ldc           #63                 // String jboss.as.jpa.adapterModule
      65: invokevirtual #53                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      68: astore        10
      70: aload         8
      72: invokeinterface #51,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getProperties:()Ljava/util/Properties;
      77: ldc           #64                 // String jboss.as.jpa.adapterClass
      79: invokevirtual #53                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
      82: astore        11
      84: aload         10
      86: ifnull        118
      89: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
      92: ldc           #65                 // String %s is configured to use adapter module \'%s\'
      94: aload         8
      96: invokeinterface #66,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceUnitName:()Ljava/lang/String;
     101: aload         10
     103: invokeinterface #21,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     108: aload         4
     110: aload         10
     112: invokeinterface #34,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     117: pop
     118: aload_3
     119: getstatic     #67                 // Field org/jboss/as/jpa/processor/JpaAttachments.ADAPTOR_CLASS_NAME:Lorg/jboss/as/server/deployment/AttachmentKey;
     122: aload         11
     124: invokeinterface #68,  3           // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.putAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;Ljava/lang/Object;)Ljava/lang/Object;
     129: pop
     130: aload         8
     132: invokeinterface #51,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getProperties:()Ljava/util/Properties;
     137: ldc           #62                 // String jboss.as.jpa.providerModule
     139: invokevirtual #53                 // Method java/util/Properties.getProperty:(Ljava/lang/String;)Ljava/lang/String;
     142: astore        12
     144: aload         12
     146: ifnull        211
     149: aload         12
     151: ldc           #69                 // String application
     153: invokevirtual #70                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     156: ifeq          179
     159: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     162: ldc           #71                 // String %s is configured to use application supplied persistence provider
     164: aload         8
     166: invokeinterface #66,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceUnitName:()Ljava/lang/String;
     171: invokeinterface #72,  3           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;)V
     176: goto          294
     179: aload         4
     181: aload         12
     183: invokeinterface #34,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
     188: pop
     189: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     192: ldc           #73                 // String %s is configured to use provider module \'%s\'
     194: aload         8
     196: invokeinterface #66,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceUnitName:()Ljava/lang/String;
     201: aload         12
     203: invokeinterface #21,  4           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
     208: goto          294
     211: ldc           #74                 // String org.hibernate.jpa.HibernatePersistenceProvider
     213: aload         8
     215: invokeinterface #75,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceProviderClassName:()Ljava/lang/String;
     220: invokevirtual #70                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
     223: ifeq          232
     226: iinc          6, 1
     229: goto          294
     232: aload         8
     234: invokeinterface #75,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceProviderClassName:()Ljava/lang/String;
     239: invokestatic  #76                 // Method org/jboss/as/jpa/config/Configuration.getProviderModuleNameFromProviderClassName:(Ljava/lang/String;)Ljava/lang/String;
     242: astore        13
     244: aload         13
     246: ifnull        294
     249: aload_0
     250: aload_1
     251: aload_2
     252: aload_3
     253: iconst_1
     254: anewarray     #7                  // class org/jboss/modules/ModuleIdentifier
     257: dup
     258: iconst_0
     259: aload         13
     261: invokestatic  #43                 // Method org/jboss/modules/ModuleIdentifier.fromString:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
     264: aastore
     265: invokespecial #77                 // Method addOptionalDependency:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;[Lorg/jboss/modules/ModuleIdentifier;)V
     268: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     271: ldc           #78                 // String %s is configured to use persistence provider \'%s\', adding an optional dependency on module \'%s\'
     273: aload         8
     275: invokeinterface #66,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceUnitName:()Ljava/lang/String;
     280: aload         8
     282: invokeinterface #75,  1           // InterfaceMethod org/jipijapa/plugin/spi/PersistenceUnitMetadata.getPersistenceProviderClassName:()Ljava/lang/String;
     287: aload         13
     289: invokeinterface #79,  5           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.debugf:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/Object;)V
     294: goto          20
     297: iload         6
     299: ireturn

  private void addHibernate3AdaptorToDeployment(org.jboss.modules.ModuleLoader, org.jboss.as.server.deployment.DeploymentUnit);
    Code:
       0: aload_2
       1: getstatic     #3                  // Field org/jboss/as/server/deployment/Attachments.MODULE_SPECIFICATION:Lorg/jboss/as/server/deployment/AttachmentKey;
       4: invokeinterface #4,  2            // InterfaceMethod org/jboss/as/server/deployment/DeploymentUnit.getAttachment:(Lorg/jboss/as/server/deployment/AttachmentKey;)Ljava/lang/Object;
       9: checkcast     #5                  // class org/jboss/as/server/deployment/module/ModuleSpecification
      12: astore_3
      13: aload_1
      14: getstatic     #80                 // Field HIBERNATE_3_PROVIDER:Lorg/jboss/modules/ModuleIdentifier;
      17: invokevirtual #81                 // Method org/jboss/modules/ModuleLoader.loadModule:(Lorg/jboss/modules/ModuleIdentifier;)Lorg/jboss/modules/Module;
      20: astore        4
      22: aload         4
      24: invokevirtual #82                 // Method org/jboss/modules/Module.getClassLoader:()Lorg/jboss/modules/ModuleClassLoader;
      27: new           #83                 // class java/lang/StringBuilder
      30: dup
      31: invokespecial #84                 // Method java/lang/StringBuilder."<init>":()V
      34: ldc           #86                 // String org.jboss.as.jpa.hibernate3.HibernatePersistenceProviderAdaptor
      36: bipush        46
      38: bipush        47
      40: invokevirtual #87                 // Method java/lang/String.replace:(CC)Ljava/lang/String;
      43: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      46: ldc           #89                 // String .class
      48: invokevirtual #88                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      51: invokevirtual #90                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      54: invokevirtual #91                 // Method org/jboss/modules/ModuleClassLoader.getResource:(Ljava/lang/String;)Ljava/net/URL;
      57: astore        5
      59: aload         5
      61: invokevirtual #92                 // Method java/net/URL.openConnection:()Ljava/net/URLConnection;
      64: astore        6
      66: aload         6
      68: instanceof    #93                 // class java/net/JarURLConnection
      71: ifne          87
      74: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
      77: ldc           #94                 // String hibernate 3
      79: aload         6
      81: invokeinterface #95,  3           // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.invalidUrlConnection:(Ljava/lang/String;Ljava/net/URLConnection;)Ljava/lang/RuntimeException;
      86: athrow
      87: aload         6
      89: checkcast     #93                 // class java/net/JarURLConnection
      92: invokevirtual #96                 // Method java/net/JarURLConnection.getJarFile:()Ljava/util/jar/JarFile;
      95: astore        7
      97: aload_3
      98: ldc           #97                 // String hibernate3integration
     100: aload         7
     102: invokestatic  #98                 // Method org/jboss/modules/ResourceLoaders.createJarResourceLoader:(Ljava/lang/String;Ljava/util/jar/JarFile;)Lorg/jboss/modules/ResourceLoader;
     105: invokestatic  #99                 // Method org/jboss/modules/ResourceLoaderSpec.createResourceLoaderSpec:(Lorg/jboss/modules/ResourceLoader;)Lorg/jboss/modules/ResourceLoaderSpec;
     108: invokevirtual #100                // Method org/jboss/as/server/deployment/module/ModuleSpecification.addResourceLoader:(Lorg/jboss/modules/ResourceLoaderSpec;)V
     111: aload_0
     112: aload_3
     113: aload_1
     114: aload_2
     115: iconst_2
     116: anewarray     #7                  // class org/jboss/modules/ModuleIdentifier
     119: dup
     120: iconst_0
     121: getstatic     #101                // Field JBOSS_AS_NAMING_ID:Lorg/jboss/modules/ModuleIdentifier;
     124: aastore
     125: dup
     126: iconst_1
     127: getstatic     #102                // Field JBOSS_JANDEX_ID:Lorg/jboss/modules/ModuleIdentifier;
     130: aastore
     131: invokespecial #9                  // Method addDependency:(Lorg/jboss/as/server/deployment/module/ModuleSpecification;Lorg/jboss/modules/ModuleLoader;Lorg/jboss/as/server/deployment/DeploymentUnit;[Lorg/jboss/modules/ModuleIdentifier;)V
     134: goto          182
     137: astore        4
     139: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     142: aload         4
     144: getstatic     #80                 // Field HIBERNATE_3_PROVIDER:Lorg/jboss/modules/ModuleIdentifier;
     147: ldc           #94                 // String hibernate 3
     149: invokeinterface #104,  4          // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.cannotLoadModule:(Ljava/lang/Throwable;Lorg/jboss/modules/ModuleIdentifier;Ljava/lang/String;)Ljava/lang/RuntimeException;
     154: athrow
     155: astore        4
     157: getstatic     #18                 // Field org/jboss/as/jpa/messages/JpaLogger.ROOT_LOGGER:Lorg/jboss/as/jpa/messages/JpaLogger;
     160: aload         4
     162: ldc           #94                 // String hibernate 3
     164: invokeinterface #106,  3          // InterfaceMethod org/jboss/as/jpa/messages/JpaLogger.cannotAddIntegration:(Ljava/lang/Throwable;Ljava/lang/String;)Ljava/lang/RuntimeException;
     169: athrow
     170: astore        4
     172: new           #108                // class java/lang/RuntimeException
     175: dup
     176: aload         4
     178: invokespecial #109                // Method java/lang/RuntimeException."<init>":(Ljava/lang/Throwable;)V
     181: athrow
     182: return
    Exception table:
       from    to  target type
          13   134   137   Class org/jboss/modules/ModuleLoadException
          13   134   155   Class java/net/MalformedURLException
          13   134   170   Class java/io/IOException

  static {};
    Code:
       0: ldc           #110                // String javax.persistence.api
       2: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
       5: putstatic     #8                  // Field JAVAX_PERSISTENCE_API_ID:Lorg/jboss/modules/ModuleIdentifier;
       8: ldc           #112                // String org.jboss.as.jpa
      10: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      13: putstatic     #11                 // Field JBOSS_AS_JPA_ID:Lorg/jboss/modules/ModuleIdentifier;
      16: ldc           #113                // String org.jboss.as.jpa.spi
      18: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      21: putstatic     #12                 // Field JBOSS_AS_JPA_SPI_ID:Lorg/jboss/modules/ModuleIdentifier;
      24: ldc           #114                // String org.javassist
      26: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      29: putstatic     #13                 // Field JAVASSIST_ID:Lorg/jboss/modules/ModuleIdentifier;
      32: ldc           #115                // String org.jboss.as.jpa.hibernate
      34: ldc           #116                // String 3
      36: invokestatic  #117                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      39: putstatic     #80                 // Field HIBERNATE_3_PROVIDER:Lorg/jboss/modules/ModuleIdentifier;
      42: ldc           #118                // String org.jboss.as.naming
      44: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      47: putstatic     #101                // Field JBOSS_AS_NAMING_ID:Lorg/jboss/modules/ModuleIdentifier;
      50: ldc           #119                // String org.jboss.jandex
      52: invokestatic  #111                // Method org/jboss/modules/ModuleIdentifier.create:(Ljava/lang/String;)Lorg/jboss/modules/ModuleIdentifier;
      55: putstatic     #102                // Field JBOSS_JANDEX_ID:Lorg/jboss/modules/ModuleIdentifier;
      58: return
}

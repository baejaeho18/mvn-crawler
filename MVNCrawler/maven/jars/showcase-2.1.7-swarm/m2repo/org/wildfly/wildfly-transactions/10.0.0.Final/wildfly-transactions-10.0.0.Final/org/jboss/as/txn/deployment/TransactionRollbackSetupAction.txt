Compiled from "TransactionRollbackSetupAction.java"
public class org.jboss.as.txn.deployment.TransactionRollbackSetupAction implements org.jboss.as.server.deployment.SetupAction, org.jboss.msc.service.Service<org.jboss.as.txn.deployment.TransactionRollbackSetupAction> {
  private static final java.lang.ThreadLocal<org.jboss.as.txn.deployment.TransactionRollbackSetupAction$Holder> depth;

  private final org.jboss.msc.value.InjectedValue<javax.transaction.TransactionManager> transactionManager;

  private final org.jboss.msc.service.ServiceName serviceName;

  public org.jboss.as.txn.deployment.TransactionRollbackSetupAction(org.jboss.msc.service.ServiceName);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class org/jboss/msc/value/InjectedValue
       8: dup
       9: invokespecial #3                  // Method org/jboss/msc/value/InjectedValue."<init>":()V
      12: putfield      #4                  // Field transactionManager:Lorg/jboss/msc/value/InjectedValue;
      15: aload_0
      16: aload_1
      17: putfield      #5                  // Field serviceName:Lorg/jboss/msc/service/ServiceName;
      20: return

  public void setup(java.util.Map<java.lang.String, java.lang.Object>);
    Code:
       0: aload_0
       1: iconst_1
       2: invokespecial #6                  // Method changeDepth:(I)Z
       5: pop
       6: return

  public void teardown(java.util.Map<java.lang.String, java.lang.Object>);
    Code:
       0: aload_0
       1: iconst_m1
       2: invokespecial #6                  // Method changeDepth:(I)Z
       5: ifeq          12
       8: aload_0
       9: invokespecial #7                  // Method checkTransactionStatus:()V
      12: return

  public int priority();
    Code:
       0: iconst_0
       1: ireturn

  public java.util.Set<org.jboss.msc.service.ServiceName> dependencies();
    Code:
       0: aload_0
       1: getfield      #5                  // Field serviceName:Lorg/jboss/msc/service/ServiceName;
       4: invokestatic  #8                  // Method java/util/Collections.singleton:(Ljava/lang/Object;)Ljava/util/Set;
       7: areturn

  public void start(org.jboss.msc.service.StartContext) throws org.jboss.msc.service.StartException;
    Code:
       0: return

  public void stop(org.jboss.msc.service.StopContext);
    Code:
       0: return

  public org.jboss.as.txn.deployment.TransactionRollbackSetupAction getValue() throws java.lang.IllegalStateException, java.lang.IllegalArgumentException;
    Code:
       0: aload_0
       1: areturn

  public org.jboss.msc.value.InjectedValue<javax.transaction.TransactionManager> getTransactionManager();
    Code:
       0: aload_0
       1: getfield      #4                  // Field transactionManager:Lorg/jboss/msc/value/InjectedValue;
       4: areturn

  private boolean changeDepth(int);
    Code:
       0: getstatic     #9                  // Field depth:Ljava/lang/ThreadLocal;
       3: invokevirtual #10                 // Method java/lang/ThreadLocal.get:()Ljava/lang/Object;
       6: checkcast     #11                 // class org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder
       9: astore_2
      10: aload_2
      11: ifnonnull     81
      14: new           #11                 // class org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder
      17: dup
      18: aconst_null
      19: invokespecial #12                 // Method org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder."<init>":(Lorg/jboss/as/txn/deployment/TransactionRollbackSetupAction$1;)V
      22: astore_2
      23: aload_0
      24: getfield      #4                  // Field transactionManager:Lorg/jboss/msc/value/InjectedValue;
      27: invokevirtual #13                 // Method org/jboss/msc/value/InjectedValue.getOptionalValue:()Ljava/lang/Object;
      30: checkcast     #14                 // class javax/transaction/TransactionManager
      33: astore_3
      34: aload_3
      35: ifnull        61
      38: aload_2
      39: aload_0
      40: aload_3
      41: aload_3
      42: invokeinterface #15,  1           // InterfaceMethod javax/transaction/TransactionManager.getStatus:()I
      47: invokespecial #16                 // Method isTransactionActive:(Ljavax/transaction/TransactionManager;I)Z
      50: ifne          57
      53: iconst_1
      54: goto          58
      57: iconst_0
      58: putfield      #17                 // Field org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder.actuallyCleanUp:Z
      61: getstatic     #9                  // Field depth:Ljava/lang/ThreadLocal;
      64: aload_2
      65: invokevirtual #18                 // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
      68: goto          81
      71: astore_3
      72: getstatic     #20                 // Field org/jboss/as/txn/logging/TransactionLogger.ROOT_LOGGER:Lorg/jboss/as/txn/logging/TransactionLogger;
      75: aload_3
      76: invokeinterface #21,  2           // InterfaceMethod org/jboss/as/txn/logging/TransactionLogger.unableToGetTransactionStatus:(Ljava/lang/Throwable;)V
      81: aload_2
      82: dup
      83: getfield      #22                 // Field org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder.depth:I
      86: iload_1
      87: iadd
      88: putfield      #22                 // Field org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder.depth:I
      91: aload_2
      92: getfield      #22                 // Field org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder.depth:I
      95: ifne          110
      98: getstatic     #9                  // Field depth:Ljava/lang/ThreadLocal;
     101: aconst_null
     102: invokevirtual #18                 // Method java/lang/ThreadLocal.set:(Ljava/lang/Object;)V
     105: aload_2
     106: getfield      #17                 // Field org/jboss/as/txn/deployment/TransactionRollbackSetupAction$Holder.actuallyCleanUp:Z
     109: ireturn
     110: iconst_0
     111: ireturn
    Exception table:
       from    to  target type
          23    68    71   Class java/lang/Exception

  private void checkTransactionStatus();
    Code:
       0: aload_0
       1: getfield      #4                  // Field transactionManager:Lorg/jboss/msc/value/InjectedValue;
       4: invokevirtual #13                 // Method org/jboss/msc/value/InjectedValue.getOptionalValue:()Ljava/lang/Object;
       7: checkcast     #14                 // class javax/transaction/TransactionManager
      10: astore_1
      11: aload_1
      12: ifnonnull     16
      15: return
      16: aload_1
      17: invokeinterface #15,  1           // InterfaceMethod javax/transaction/TransactionManager.getStatus:()I
      22: istore_2
      23: aload_0
      24: aload_1
      25: iload_2
      26: invokespecial #16                 // Method isTransactionActive:(Ljavax/transaction/TransactionManager;I)Z
      29: istore_3
      30: iload_3
      31: ifeq          64
      34: getstatic     #20                 // Field org/jboss/as/txn/logging/TransactionLogger.ROOT_LOGGER:Lorg/jboss/as/txn/logging/TransactionLogger;
      37: iload_2
      38: invokeinterface #23,  2           // InterfaceMethod org/jboss/as/txn/logging/TransactionLogger.transactionStillOpen:(I)V
      43: aload_1
      44: invokeinterface #24,  1           // InterfaceMethod javax/transaction/TransactionManager.rollback:()V
      49: goto          64
      52: astore        4
      54: getstatic     #20                 // Field org/jboss/as/txn/logging/TransactionLogger.ROOT_LOGGER:Lorg/jboss/as/txn/logging/TransactionLogger;
      57: aload         4
      59: invokeinterface #25,  2           // InterfaceMethod org/jboss/as/txn/logging/TransactionLogger.unableToRollBack:(Ljava/lang/Throwable;)V
      64: goto          77
      67: astore_1
      68: getstatic     #20                 // Field org/jboss/as/txn/logging/TransactionLogger.ROOT_LOGGER:Lorg/jboss/as/txn/logging/TransactionLogger;
      71: aload_1
      72: invokeinterface #21,  2           // InterfaceMethod org/jboss/as/txn/logging/TransactionLogger.unableToGetTransactionStatus:(Ljava/lang/Throwable;)V
      77: return
    Exception table:
       from    to  target type
          34    49    52   Class java/lang/Exception
           0    15    67   Class java/lang/Exception
          16    64    67   Class java/lang/Exception

  private boolean isTransactionActive(javax.transaction.TransactionManager, int) throws javax.transaction.SystemException;
    Code:
       0: iload_2
       1: tableswitch   { // 0 to 9
                     0: 56
                     1: 56
                     2: 56
                     3: 58
                     4: 56
                     5: 58
                     6: 58
                     7: 56
                     8: 56
                     9: 56
               default: 58
          }
      56: iconst_1
      57: ireturn
      58: iconst_0
      59: ireturn

  public java.lang.Object getValue() throws java.lang.IllegalStateException, java.lang.IllegalArgumentException;
    Code:
       0: aload_0
       1: invokevirtual #26                 // Method getValue:()Lorg/jboss/as/txn/deployment/TransactionRollbackSetupAction;
       4: areturn

  static {};
    Code:
       0: new           #27                 // class java/lang/ThreadLocal
       3: dup
       4: invokespecial #28                 // Method java/lang/ThreadLocal."<init>":()V
       7: putstatic     #9                  // Field depth:Ljava/lang/ThreadLocal;
      10: return
}

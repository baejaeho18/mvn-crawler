Compiled from "TSQueueLock.java"
public class net.openhft.chronicle.queue.impl.single.TSQueueLock extends net.openhft.chronicle.queue.impl.table.AbstractTSQueueLock implements net.openhft.chronicle.queue.impl.single.QueueLock {
  private static final java.lang.String LOCK_KEY;

  private final long timeout;

  public net.openhft.chronicle.queue.impl.single.TSQueueLock(net.openhft.chronicle.queue.impl.TableStore<?>, java.util.function.Supplier<net.openhft.chronicle.threads.TimingPauser>, long);
    Code:
       0: aload_0
       1: ldc           #2                  // String chronicle.queue.lock
       3: aload_1
       4: aload_2
       5: invokespecial #3                  // Method net/openhft/chronicle/queue/impl/table/AbstractTSQueueLock."<init>":(Ljava/lang/String;Lnet/openhft/chronicle/queue/impl/TableStore;Ljava/util/function/Supplier;)V
       8: aload_0
       9: lload_3
      10: putfield      #4                  // Field timeout:J
      13: return

  public void acquireLock();
    Code:
       0: aload_0
       1: invokevirtual #5                  // Method throwExceptionIfClosed:()V
       4: invokestatic  #6                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       7: invokevirtual #7                  // Method java/lang/Thread.getId:()J
      10: lstore_1
      11: aload_0
      12: lload_1
      13: invokespecial #8                  // Method isLockHeldByCurrentThread:(J)Z
      16: ifeq          20
      19: return
      20: iconst_0
      21: istore_3
      22: aload_0
      23: lload_1
      24: invokespecial #9                  // Method getLockValueFromTid:(J)J
      27: lstore        4
      29: aload_0
      30: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      33: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
      38: lstore        6
      40: aload_0
      41: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      44: ldc2_w        #13                 // long -9223372036854775808l
      47: lload         4
      49: invokeinterface #15,  5           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.compareAndSwapValue:(JJ)Z
      54: ifne          113
      57: iload_3
      58: iinc          3, 1
      61: sipush        1000
      64: if_icmple     83
      67: invokestatic  #16                 // Method java/lang/Thread.interrupted:()Z
      70: ifeq          83
      73: new           #17                 // class java/lang/IllegalStateException
      76: dup
      77: ldc           #18                 // String Interrupted
      79: invokespecial #19                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      82: athrow
      83: aload_0
      84: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
      87: aload_0
      88: getfield      #4                  // Field timeout:J
      91: getstatic     #21                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      94: invokeinterface #22,  4           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.pause:(JLjava/util/concurrent/TimeUnit;)V
      99: aload_0
     100: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
     103: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
     108: lstore        6
     110: goto          40
     113: aload_0
     114: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
     117: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
     122: goto          171
     125: astore        8
     127: aload_0
     128: ldc           #25                 // String Overriding the lock. Couldn\'t acquire lock
     130: lload         6
     132: invokespecial #26                 // Method warnLock:(Ljava/lang/String;J)V
     135: aload_0
     136: lload         6
     138: invokevirtual #27                 // Method forceUnlock:(J)V
     141: aload_0
     142: invokevirtual #28                 // Method acquireLock:()V
     145: aload_0
     146: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
     149: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
     154: goto          171
     157: astore        9
     159: aload_0
     160: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
     163: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
     168: aload         9
     170: athrow
     171: return
    Exception table:
       from    to  target type
          40   113   125   Class java/util/concurrent/TimeoutException
          40   113   157   any
         125   145   157   any
         157   159   157   any

  private long getLockValueFromTid(long);
    Code:
       0: lload_1
       1: bipush        32
       3: lshl
       4: getstatic     #29                 // Field PID:J
       7: lor
       8: lreturn

  public void waitForLock();
    Code:
       0: aload_0
       1: invokevirtual #5                  // Method throwExceptionIfClosed:()V
       4: invokestatic  #6                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       7: invokevirtual #7                  // Method java/lang/Thread.getId:()J
      10: lstore_1
      11: aload_0
      12: lload_1
      13: invokespecial #8                  // Method isLockHeldByCurrentThread:(J)Z
      16: ifeq          20
      19: return
      20: aload_0
      21: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      24: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
      29: lstore_3
      30: lload_3
      31: ldc2_w        #13                 // long -9223372036854775808l
      34: lcmp
      35: ifeq          83
      38: invokestatic  #16                 // Method java/lang/Thread.interrupted:()Z
      41: ifeq          54
      44: new           #17                 // class java/lang/IllegalStateException
      47: dup
      48: ldc           #18                 // String Interrupted
      50: invokespecial #19                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      53: athrow
      54: aload_0
      55: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
      58: aload_0
      59: getfield      #4                  // Field timeout:J
      62: getstatic     #21                 // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      65: invokeinterface #22,  4           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.pause:(JLjava/util/concurrent/TimeUnit;)V
      70: aload_0
      71: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      74: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
      79: lstore_3
      80: goto          30
      83: aload_0
      84: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
      87: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
      92: goto          168
      95: astore        5
      97: aload_0
      98: ldc           #30                 // String Queue lock is still held
     100: lload_3
     101: invokespecial #26                 // Method warnLock:(Ljava/lang/String;J)V
     104: aload_0
     105: lload_3
     106: invokevirtual #27                 // Method forceUnlock:(J)V
     109: aload_0
     110: invokevirtual #31                 // Method waitForLock:()V
     113: aload_0
     114: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
     117: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
     122: goto          168
     125: astore        5
     127: aload_0
     128: getfield      #33                 // Field tableStore:Lnet/openhft/chronicle/queue/impl/TableStore;
     131: invokeinterface #34,  1           // InterfaceMethod net/openhft/chronicle/queue/impl/TableStore.isClosed:()Z
     136: ifne          142
     139: aload         5
     141: athrow
     142: new           #17                 // class java/lang/IllegalStateException
     145: dup
     146: ldc           #35                 // String The table store is closed!
     148: aload         5
     150: invokespecial #36                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     153: athrow
     154: astore        6
     156: aload_0
     157: getfield      #20                 // Field pauser:Lnet/openhft/chronicle/threads/TimingPauser;
     160: invokeinterface #23,  1           // InterfaceMethod net/openhft/chronicle/threads/TimingPauser.reset:()V
     165: aload         6
     167: athrow
     168: return
    Exception table:
       from    to  target type
          30    83    95   Class java/util/concurrent/TimeoutException
          30    83   125   Class java/lang/NullPointerException
          30    83   154   any
          95   113   154   any
         125   156   154   any

  private void warnLock(java.lang.String, long);
    Code:
       0: lload_2
       1: l2i
       2: i2l
       3: getstatic     #29                 // Field PID:J
       6: lcmp
       7: ifne          15
      10: ldc           #37                 // String me
      12: goto          20
      15: lload_2
      16: l2i
      17: invokestatic  #38                 // Method java/lang/Integer.toString:(I)Ljava/lang/String;
      20: astore        4
      22: new           #39                 // class java/lang/StringBuilder
      25: dup
      26: invokespecial #40                 // Method java/lang/StringBuilder."<init>":()V
      29: aload_1
      30: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      33: ldc           #42                 // String  after
      35: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: aload_0
      39: getfield      #4                  // Field timeout:J
      42: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      45: ldc           #44                 // String ms for the lock file:
      47: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      50: aload_0
      51: getfield      #45                 // Field path:Ljava/io/File;
      54: invokevirtual #46                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      57: ldc           #47                 // String . Lock is held by PID:
      59: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      62: aload         4
      64: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      67: ldc           #48                 // String , TID:
      69: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      72: lload_2
      73: bipush        32
      75: lushr
      76: l2i
      77: invokevirtual #49                 // Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
      80: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      83: astore        5
      85: aload_0
      86: getfield      #51                 // Field dontRecoverLockTimeout:Z
      89: ifeq          109
      92: new           #52                 // class net/openhft/chronicle/wire/UnrecoverableTimeoutException
      95: dup
      96: new           #17                 // class java/lang/IllegalStateException
      99: dup
     100: aload         5
     102: invokespecial #19                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     105: invokespecial #53                 // Method net/openhft/chronicle/wire/UnrecoverableTimeoutException."<init>":(Ljava/lang/Exception;)V
     108: athrow
     109: invokestatic  #54                 // Method net/openhft/chronicle/core/Jvm.warn:()Lnet/openhft/chronicle/core/onoes/ExceptionHandler;
     112: aload_0
     113: invokevirtual #55                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
     116: new           #39                 // class java/lang/StringBuilder
     119: dup
     120: invokespecial #40                 // Method java/lang/StringBuilder."<init>":()V
     123: aload         5
     125: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     128: ldc           #56                 // String . Unlocking forcibly
     130: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     133: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     136: invokeinterface #57,  3           // InterfaceMethod net/openhft/chronicle/core/onoes/ExceptionHandler.on:(Ljava/lang/Class;Ljava/lang/String;)V
     141: return

  public void unlock();
    Code:
       0: aload_0
       1: invokevirtual #5                  // Method throwExceptionIfClosed:()V
       4: invokestatic  #6                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       7: invokevirtual #7                  // Method java/lang/Thread.getId:()J
      10: lstore_1
      11: aload_0
      12: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      15: aload_0
      16: lload_1
      17: invokespecial #9                  // Method getLockValueFromTid:(J)J
      20: ldc2_w        #13                 // long -9223372036854775808l
      23: invokeinterface #15,  5           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.compareAndSwapValue:(JJ)Z
      28: ifne          84
      31: invokestatic  #54                 // Method net/openhft/chronicle/core/Jvm.warn:()Lnet/openhft/chronicle/core/onoes/ExceptionHandler;
      34: aload_0
      35: invokevirtual #55                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      38: new           #39                 // class java/lang/StringBuilder
      41: dup
      42: invokespecial #40                 // Method java/lang/StringBuilder."<init>":()V
      45: ldc           #58                 // String Queue lock was locked by another thread, currentID=
      47: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      50: lload_1
      51: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      54: ldc           #59                 // String , lock-tid=
      56: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      59: aload_0
      60: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      63: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
      68: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      71: ldc           #60                 // String  so this lock was not removed.
      73: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      76: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      79: invokeinterface #57,  3           // InterfaceMethod net/openhft/chronicle/core/onoes/ExceptionHandler.on:(Ljava/lang/Class;Ljava/lang/String;)V
      84: return

  public void quietUnlock();
    Code:
       0: aload_0
       1: invokevirtual #5                  // Method throwExceptionIfClosed:()V
       4: aload_0
       5: invokevirtual #61                 // Method lockedBy:()J
       8: ldc2_w        #13                 // long -9223372036854775808l
      11: lcmp
      12: ifeq          106
      15: invokestatic  #6                  // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      18: invokevirtual #7                  // Method java/lang/Thread.getId:()J
      21: lstore_1
      22: aload_0
      23: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      26: aload_0
      27: lload_1
      28: invokespecial #9                  // Method getLockValueFromTid:(J)J
      31: ldc2_w        #13                 // long -9223372036854775808l
      34: invokeinterface #15,  5           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.compareAndSwapValue:(JJ)Z
      39: ifne          106
      42: aload_0
      43: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
      46: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
      51: lstore_3
      52: lload_3
      53: ldc2_w        #13                 // long -9223372036854775808l
      56: lcmp
      57: ifne          61
      60: return
      61: invokestatic  #54                 // Method net/openhft/chronicle/core/Jvm.warn:()Lnet/openhft/chronicle/core/onoes/ExceptionHandler;
      64: aload_0
      65: invokevirtual #55                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      68: new           #39                 // class java/lang/StringBuilder
      71: dup
      72: invokespecial #40                 // Method java/lang/StringBuilder."<init>":()V
      75: ldc           #62                 // String Queue lock was locked by another thread, current-thread-tid=
      77: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      80: lload_1
      81: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      84: ldc           #63                 // String , lock value=
      86: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      89: lload_3
      90: invokevirtual #43                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      93: ldc           #64                 // String , this lock was not removed.
      95: invokevirtual #41                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      98: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     101: invokeinterface #57,  3           // InterfaceMethod net/openhft/chronicle/core/onoes/ExceptionHandler.on:(Ljava/lang/Class;Ljava/lang/String;)V
     106: return

  private boolean isLockHeldByCurrentThread(long);
    Code:
       0: aload_0
       1: getfield      #10                 // Field lock:Lnet/openhft/chronicle/core/values/LongValue;
       4: invokeinterface #11,  1           // InterfaceMethod net/openhft/chronicle/core/values/LongValue.getVolatileValue:()J
       9: aload_0
      10: lload_1
      11: invokespecial #9                  // Method getLockValueFromTid:(J)J
      14: lcmp
      15: ifne          22
      18: iconst_1
      19: goto          23
      22: iconst_0
      23: ireturn
}

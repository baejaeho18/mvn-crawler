Compiled from "RollingResourcesCache.java"
public class net.openhft.chronicle.queue.impl.RollingResourcesCache {
  public static final net.openhft.chronicle.queue.impl.RollingResourcesCache$ParseCount NO_PARSE_COUNT;

  private static final int CACHE_SIZE;

  private static final int ONE_DAY_IN_MILLIS;

  private static final int MAX_TIMESTAMP_CACHE_SIZE;

  private final java.util.function.Function<java.lang.String, java.io.File> fileFactory;

  private final java.time.format.DateTimeFormatter formatter;

  private final net.openhft.chronicle.queue.impl.RollingResourcesCache$Resource[] values;

  private final int length;

  private final java.util.function.Function<java.io.File, java.lang.String> fileToName;

  private final java.lang.String format;

  private final java.util.concurrent.ConcurrentMap<java.io.File, java.lang.Long> filenameToTimestampCache;

  private final long epoch;

  private net.openhft.chronicle.queue.impl.RollingResourcesCache$ParseCount lastParseCount;

  public net.openhft.chronicle.queue.impl.RollingResourcesCache(net.openhft.chronicle.queue.RollCycle, long, java.util.function.Function<java.lang.String, java.io.File>, java.util.function.Function<java.io.File, java.lang.String>);
    Code:
       0: aload_0
       1: aload_1
       2: invokeinterface #1,  1            // InterfaceMethod net/openhft/chronicle/queue/RollCycle.lengthInMillis:()I
       7: aload_1
       8: invokeinterface #2,  1            // InterfaceMethod net/openhft/chronicle/queue/RollCycle.format:()Ljava/lang/String;
      13: lload_2
      14: aload         4
      16: aload         5
      18: invokespecial #3                  // Method "<init>":(ILjava/lang/String;JLjava/util/function/Function;Ljava/util/function/Function;)V
      21: return

  private net.openhft.chronicle.queue.impl.RollingResourcesCache(int, java.lang.String, long, java.util.function.Function<java.lang.String, java.io.File>, java.util.function.Function<java.io.File, java.lang.String>);
    Code:
       0: aload_0
       1: invokespecial #4                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #5                  // class java/util/concurrent/ConcurrentHashMap
       8: dup
       9: bipush        32
      11: invokespecial #7                  // Method java/util/concurrent/ConcurrentHashMap."<init>":(I)V
      14: putfield      #8                  // Field filenameToTimestampCache:Ljava/util/concurrent/ConcurrentMap;
      17: aload_0
      18: getstatic     #9                  // Field NO_PARSE_COUNT:Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount;
      21: putfield      #10                 // Field lastParseCount:Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount;
      24: aload_0
      25: iload_1
      26: putfield      #11                 // Field length:I
      29: aload_0
      30: aload         6
      32: putfield      #12                 // Field fileToName:Ljava/util/function/Function;
      35: aload_0
      36: getstatic     #13                 // Field CACHE_SIZE:I
      39: anewarray     #14                 // class net/openhft/chronicle/queue/impl/RollingResourcesCache$Resource
      42: putfield      #15                 // Field values:[Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$Resource;
      45: lload_3
      46: ldc2_w        #16                 // long 86400000l
      49: lrem
      50: lstore        7
      52: aload_0
      53: lload         7
      55: lconst_0
      56: lcmp
      57: iflt          67
      60: lload_3
      61: lload         7
      63: lsub
      64: goto          70
      67: ldc2_w        #18                 // long -86400000l
      70: putfield      #20                 // Field epoch:J
      73: aload_0
      74: aload_2
      75: putfield      #21                 // Field format:Ljava/lang/String;
      78: aload_0
      79: aload_0
      80: getfield      #21                 // Field format:Ljava/lang/String;
      83: invokestatic  #22                 // Method java/time/format/DateTimeFormatter.ofPattern:(Ljava/lang/String;)Ljava/time/format/DateTimeFormatter;
      86: ldc           #23                 // String UTC
      88: invokestatic  #24                 // Method java/time/ZoneId.of:(Ljava/lang/String;)Ljava/time/ZoneId;
      91: invokevirtual #25                 // Method java/time/format/DateTimeFormatter.withZone:(Ljava/time/ZoneId;)Ljava/time/format/DateTimeFormatter;
      94: putfield      #26                 // Field formatter:Ljava/time/format/DateTimeFormatter;
      97: aload_0
      98: aload         5
     100: putfield      #27                 // Field fileFactory:Ljava/util/function/Function;
     103: return

  public net.openhft.chronicle.queue.impl.RollingResourcesCache$Resource resourceFor(long);
    Code:
       0: lload_1
       1: aload_0
       2: getfield      #11                 // Field length:I
       5: i2l
       6: lmul
       7: lstore_3
       8: lload_3
       9: invokestatic  #28                 // Method net/openhft/chronicle/core/Maths.hash32:(J)I
      12: getstatic     #13                 // Field CACHE_SIZE:I
      15: iconst_1
      16: isub
      17: iand
      18: istore        5
      20: aload_0
      21: getfield      #15                 // Field values:[Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$Resource;
      24: iload         5
      26: aaload
      27: astore        6
      29: aload         6
      31: ifnull        44
      34: aload         6
      36: getfield      #29                 // Field net/openhft/chronicle/queue/impl/RollingResourcesCache$Resource.millis:J
      39: lload_3
      40: lcmp
      41: ifeq          100
      44: lload_3
      45: aload_0
      46: getfield      #20                 // Field epoch:J
      49: ladd
      50: invokestatic  #30                 // Method java/time/Instant.ofEpochMilli:(J)Ljava/time/Instant;
      53: astore        7
      55: aload_0
      56: getfield      #26                 // Field formatter:Ljava/time/format/DateTimeFormatter;
      59: aload         7
      61: invokevirtual #31                 // Method java/time/format/DateTimeFormatter.format:(Ljava/time/temporal/TemporalAccessor;)Ljava/lang/String;
      64: astore        8
      66: aload_0
      67: getfield      #15                 // Field values:[Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$Resource;
      70: iload         5
      72: new           #14                 // class net/openhft/chronicle/queue/impl/RollingResourcesCache$Resource
      75: dup
      76: lload_3
      77: aload         8
      79: aload_0
      80: getfield      #27                 // Field fileFactory:Ljava/util/function/Function;
      83: aload         8
      85: invokeinterface #32,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      90: checkcast     #33                 // class java/io/File
      93: invokespecial #34                 // Method net/openhft/chronicle/queue/impl/RollingResourcesCache$Resource."<init>":(JLjava/lang/String;Ljava/io/File;)V
      96: dup
      97: astore        6
      99: aastore
     100: aload         6
     102: areturn

  public int parseCount(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #10                 // Field lastParseCount:Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount;
       4: astore_2
       5: aload_1
       6: aload_2
       7: getfield      #35                 // Field net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount.name:Ljava/lang/String;
      10: invokevirtual #36                 // Method java/lang/String.equals:(Ljava/lang/Object;)Z
      13: ifeq          21
      16: aload_2
      17: getfield      #37                 // Field net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount.count:I
      20: ireturn
      21: aload_0
      22: aload_1
      23: invokespecial #38                 // Method parseCount0:(Ljava/lang/String;)I
      26: istore_3
      27: aload_0
      28: new           #39                 // class net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount
      31: dup
      32: aload_1
      33: iload_3
      34: invokespecial #40                 // Method net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount."<init>":(Ljava/lang/String;I)V
      37: putfield      #10                 // Field lastParseCount:Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount;
      40: iload_3
      41: ireturn

  private int parseCount0(java.lang.String);
    Code:
       0: aload_0
       1: getfield      #26                 // Field formatter:Ljava/time/format/DateTimeFormatter;
       4: aload_1
       5: invokevirtual #41                 // Method java/time/format/DateTimeFormatter.parse:(Ljava/lang/CharSequence;)Ljava/time/temporal/TemporalAccessor;
       8: astore_2
       9: aload_2
      10: getstatic     #42                 // Field java/time/temporal/ChronoField.EPOCH_DAY:Ljava/time/temporal/ChronoField;
      13: invokeinterface #43,  2           // InterfaceMethod java/time/temporal/TemporalAccessor.getLong:(Ljava/time/temporal/TemporalField;)J
      18: ldc2_w        #44                 // long 86400l
      21: lmul
      22: lstore_3
      23: aload_2
      24: getstatic     #46                 // Field java/time/temporal/ChronoField.SECOND_OF_DAY:Ljava/time/temporal/ChronoField;
      27: invokeinterface #47,  2           // InterfaceMethod java/time/temporal/TemporalAccessor.isSupported:(Ljava/time/temporal/TemporalField;)Z
      32: ifeq          47
      35: lload_3
      36: aload_2
      37: getstatic     #46                 // Field java/time/temporal/ChronoField.SECOND_OF_DAY:Ljava/time/temporal/ChronoField;
      40: invokeinterface #43,  2           // InterfaceMethod java/time/temporal/TemporalAccessor.getLong:(Ljava/time/temporal/TemporalField;)J
      45: ladd
      46: lstore_3
      47: lload_3
      48: aload_0
      49: getfield      #20                 // Field epoch:J
      52: ldc2_w        #48                 // long 1000l
      55: ldiv
      56: lsub
      57: aload_0
      58: getfield      #11                 // Field length:I
      61: sipush        1000
      64: idiv
      65: i2l
      66: ldiv
      67: invokestatic  #50                 // Method net/openhft/chronicle/core/Maths.toInt32:(J)I
      70: ireturn
      71: astore_2
      72: new           #52                 // class java/lang/RuntimeException
      75: dup
      76: ldc           #53                 // String Unable to parse %s using format %s
      78: iconst_2
      79: anewarray     #54                 // class java/lang/Object
      82: dup
      83: iconst_0
      84: aload_1
      85: aastore
      86: dup
      87: iconst_1
      88: aload_0
      89: getfield      #21                 // Field format:Ljava/lang/String;
      92: aastore
      93: invokestatic  #55                 // Method java/lang/String.format:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      96: aload_2
      97: invokespecial #56                 // Method java/lang/RuntimeException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     100: athrow
    Exception table:
       from    to  target type
           0    70    71   Class java/time/format/DateTimeParseException

  public java.lang.Long toLong(java.io.File);
    Code:
       0: aload_0
       1: getfield      #8                  // Field filenameToTimestampCache:Ljava/util/concurrent/ConcurrentMap;
       4: aload_1
       5: invokeinterface #57,  2           // InterfaceMethod java/util/concurrent/ConcurrentMap.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #58                 // class java/lang/Long
      13: astore_2
      14: aload_2
      15: ifnull        20
      18: aload_2
      19: areturn
      20: aload_0
      21: getfield      #26                 // Field formatter:Ljava/time/format/DateTimeFormatter;
      24: aload_0
      25: getfield      #12                 // Field fileToName:Ljava/util/function/Function;
      28: aload_1
      29: invokeinterface #32,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;
      34: checkcast     #59                 // class java/lang/CharSequence
      37: invokevirtual #41                 // Method java/time/format/DateTimeFormatter.parse:(Ljava/lang/CharSequence;)Ljava/time/temporal/TemporalAccessor;
      40: astore_3
      41: aload_0
      42: getfield      #11                 // Field length:I
      45: ldc           #60                 // int 86400000
      47: if_icmpne     64
      50: aload_3
      51: getstatic     #42                 // Field java/time/temporal/ChronoField.EPOCH_DAY:Ljava/time/temporal/ChronoField;
      54: invokeinterface #43,  2           // InterfaceMethod java/time/temporal/TemporalAccessor.getLong:(Ljava/time/temporal/TemporalField;)J
      59: lstore        4
      61: goto          139
      64: aload_0
      65: getfield      #11                 // Field length:I
      68: ldc           #60                 // int 86400000
      70: if_icmpge     91
      73: aload_3
      74: invokestatic  #61                 // Method java/time/Instant.from:(Ljava/time/temporal/TemporalAccessor;)Ljava/time/Instant;
      77: invokevirtual #62                 // Method java/time/Instant.toEpochMilli:()J
      80: aload_0
      81: getfield      #11                 // Field length:I
      84: i2l
      85: ldiv
      86: lstore        4
      88: goto          139
      91: aload_3
      92: getstatic     #42                 // Field java/time/temporal/ChronoField.EPOCH_DAY:Ljava/time/temporal/ChronoField;
      95: invokeinterface #43,  2           // InterfaceMethod java/time/temporal/TemporalAccessor.getLong:(Ljava/time/temporal/TemporalField;)J
     100: lstore        6
     102: lload         6
     104: lconst_0
     105: lcmp
     106: ifge          115
     109: ldc2_w        #63                 // long -1l
     112: goto          116
     115: lconst_0
     116: lstore        8
     118: lload         8
     120: lload         6
     122: ldc2_w        #44                 // long 86400l
     125: lmul
     126: aload_0
     127: getfield      #11                 // Field length:I
     130: sipush        1000
     133: idiv
     134: i2l
     135: ldiv
     136: ladd
     137: lstore        4
     139: aload_0
     140: getfield      #8                  // Field filenameToTimestampCache:Ljava/util/concurrent/ConcurrentMap;
     143: invokeinterface #65,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.size:()I
     148: bipush        32
     150: if_icmplt     162
     153: aload_0
     154: getfield      #8                  // Field filenameToTimestampCache:Ljava/util/concurrent/ConcurrentMap;
     157: invokeinterface #66,  1           // InterfaceMethod java/util/concurrent/ConcurrentMap.clear:()V
     162: aload_0
     163: getfield      #8                  // Field filenameToTimestampCache:Ljava/util/concurrent/ConcurrentMap;
     166: aload_1
     167: lload         4
     169: invokestatic  #67                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     172: invokeinterface #68,  3           // InterfaceMethod java/util/concurrent/ConcurrentMap.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
     177: pop
     178: lload         4
     180: invokestatic  #67                 // Method java/lang/Long.valueOf:(J)Ljava/lang/Long;
     183: areturn

  static {};
    Code:
       0: new           #39                 // class net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount
       3: dup
       4: ldc           #69                 // String
       6: ldc           #71                 // int -2147483648
       8: invokespecial #40                 // Method net/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount."<init>":(Ljava/lang/String;I)V
      11: putstatic     #9                  // Field NO_PARSE_COUNT:Lnet/openhft/chronicle/queue/impl/RollingResourcesCache$ParseCount;
      14: ldc           #72                 // String chronicle.queue.rollingResourceCache.size
      16: sipush        128
      19: invokestatic  #73                 // Method java/lang/Integer.getInteger:(Ljava/lang/String;I)Ljava/lang/Integer;
      22: invokevirtual #74                 // Method java/lang/Integer.intValue:()I
      25: putstatic     #13                 // Field CACHE_SIZE:I
      28: return
}

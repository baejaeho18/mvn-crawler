Compiled from "LoadBalancingProxyHTTP2ViaUpgradeTestCase.java"
public class io.undertow.server.handlers.proxy.LoadBalancingProxyHTTP2ViaUpgradeTestCase extends io.undertow.server.handlers.proxy.AbstractLoadBalancingProxyTestCase {
  public io.undertow.server.handlers.proxy.LoadBalancingProxyHTTP2ViaUpgradeTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method io/undertow/server/handlers/proxy/AbstractLoadBalancingProxyTestCase."<init>":()V
       4: return

  public static void setup() throws java.net.URISyntaxException;
    Code:
       0: ldc           #2                  // String default
       2: invokestatic  #3                  // Method io/undertow/testutils/DefaultServer.getHostPort:(Ljava/lang/String;)I
       5: istore_0
       6: ldc           #4                  // String s1
       8: ldc           #5                  // String server1
      10: invokestatic  #6                  // Method getRootHandler:(Ljava/lang/String;Ljava/lang/String;)Lio/undertow/server/HttpHandler;
      13: astore_1
      14: invokestatic  #7                  // Method io/undertow/Undertow.builder:()Lio/undertow/Undertow$Builder;
      17: iload_0
      18: iconst_1
      19: iadd
      20: ldc           #2                  // String default
      22: invokestatic  #8                  // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
      25: invokevirtual #9                  // Method io/undertow/Undertow$Builder.addHttpListener:(ILjava/lang/String;)Lio/undertow/Undertow$Builder;
      28: getstatic     #10                 // Field io/undertow/UndertowOptions.ENABLE_HTTP2:Lorg/xnio/Option;
      31: iconst_1
      32: invokestatic  #11                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      35: invokevirtual #12                 // Method io/undertow/Undertow$Builder.setServerOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
      38: getstatic     #13                 // Field io/undertow/UndertowOptions.NO_REQUEST_TIMEOUT:Lorg/xnio/Option;
      41: sipush        1000
      44: invokestatic  #15                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
      47: invokevirtual #12                 // Method io/undertow/Undertow$Builder.setServerOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
      50: getstatic     #16                 // Field org/xnio/Options.REUSE_ADDRESSES:Lorg/xnio/Option;
      53: iconst_1
      54: invokestatic  #11                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
      57: invokevirtual #17                 // Method io/undertow/Undertow$Builder.setSocketOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
      60: new           #18                 // class io/undertow/server/protocol/http2/Http2UpgradeHandler
      63: dup
      64: new           #19                 // class io/undertow/server/handlers/proxy/LoadBalancingProxyHTTP2ViaUpgradeTestCase$1
      67: dup
      68: aload_1
      69: invokespecial #20                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyHTTP2ViaUpgradeTestCase$1."<init>":(Lio/undertow/server/HttpHandler;)V
      72: invokespecial #21                 // Method io/undertow/server/protocol/http2/Http2UpgradeHandler."<init>":(Lio/undertow/server/HttpHandler;)V
      75: invokevirtual #22                 // Method io/undertow/Undertow$Builder.setHandler:(Lio/undertow/server/HttpHandler;)Lio/undertow/Undertow$Builder;
      78: invokevirtual #23                 // Method io/undertow/Undertow$Builder.build:()Lio/undertow/Undertow;
      81: putstatic     #24                 // Field server1:Lio/undertow/Undertow;
      84: ldc           #25                 // String s2
      86: ldc           #26                 // String server2
      88: invokestatic  #6                  // Method getRootHandler:(Ljava/lang/String;Ljava/lang/String;)Lio/undertow/server/HttpHandler;
      91: astore_2
      92: invokestatic  #7                  // Method io/undertow/Undertow.builder:()Lio/undertow/Undertow$Builder;
      95: iload_0
      96: iconst_2
      97: iadd
      98: ldc           #2                  // String default
     100: invokestatic  #8                  // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
     103: invokevirtual #9                  // Method io/undertow/Undertow$Builder.addHttpListener:(ILjava/lang/String;)Lio/undertow/Undertow$Builder;
     106: getstatic     #10                 // Field io/undertow/UndertowOptions.ENABLE_HTTP2:Lorg/xnio/Option;
     109: iconst_1
     110: invokestatic  #11                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     113: invokevirtual #12                 // Method io/undertow/Undertow$Builder.setServerOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
     116: getstatic     #13                 // Field io/undertow/UndertowOptions.NO_REQUEST_TIMEOUT:Lorg/xnio/Option;
     119: sipush        1000
     122: invokestatic  #15                 // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
     125: invokevirtual #12                 // Method io/undertow/Undertow$Builder.setServerOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
     128: getstatic     #16                 // Field org/xnio/Options.REUSE_ADDRESSES:Lorg/xnio/Option;
     131: iconst_1
     132: invokestatic  #11                 // Method java/lang/Boolean.valueOf:(Z)Ljava/lang/Boolean;
     135: invokevirtual #17                 // Method io/undertow/Undertow$Builder.setSocketOption:(Lorg/xnio/Option;Ljava/lang/Object;)Lio/undertow/Undertow$Builder;
     138: new           #18                 // class io/undertow/server/protocol/http2/Http2UpgradeHandler
     141: dup
     142: new           #27                 // class io/undertow/server/handlers/proxy/LoadBalancingProxyHTTP2ViaUpgradeTestCase$2
     145: dup
     146: aload_2
     147: invokespecial #28                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyHTTP2ViaUpgradeTestCase$2."<init>":(Lio/undertow/server/HttpHandler;)V
     150: invokespecial #21                 // Method io/undertow/server/protocol/http2/Http2UpgradeHandler."<init>":(Lio/undertow/server/HttpHandler;)V
     153: invokevirtual #22                 // Method io/undertow/Undertow$Builder.setHandler:(Lio/undertow/server/HttpHandler;)Lio/undertow/Undertow$Builder;
     156: invokevirtual #23                 // Method io/undertow/Undertow$Builder.build:()Lio/undertow/Undertow;
     159: putstatic     #29                 // Field server2:Lio/undertow/Undertow;
     162: getstatic     #24                 // Field server1:Lio/undertow/Undertow;
     165: invokevirtual #30                 // Method io/undertow/Undertow.start:()V
     168: getstatic     #29                 // Field server2:Lio/undertow/Undertow;
     171: invokevirtual #30                 // Method io/undertow/Undertow.start:()V
     174: new           #31                 // class io/undertow/server/handlers/proxy/ProxyHandler
     177: dup
     178: new           #32                 // class io/undertow/server/handlers/proxy/LoadBalancingProxyClient
     181: dup
     182: invokespecial #33                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyClient."<init>":()V
     185: iconst_4
     186: invokevirtual #34                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyClient.setConnectionsPerThread:(I)Lio/undertow/server/handlers/proxy/LoadBalancingProxyClient;
     189: new           #35                 // class java/net/URI
     192: dup
     193: ldc           #36                 // String h2c
     195: aconst_null
     196: ldc           #2                  // String default
     198: invokestatic  #8                  // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
     201: iload_0
     202: iconst_1
     203: iadd
     204: aconst_null
     205: aconst_null
     206: aconst_null
     207: invokespecial #37                 // Method java/net/URI."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     210: ldc           #4                  // String s1
     212: invokevirtual #38                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyClient.addHost:(Ljava/net/URI;Ljava/lang/String;)Lio/undertow/server/handlers/proxy/LoadBalancingProxyClient;
     215: new           #35                 // class java/net/URI
     218: dup
     219: ldc           #36                 // String h2c
     221: aconst_null
     222: ldc           #2                  // String default
     224: invokestatic  #8                  // Method io/undertow/testutils/DefaultServer.getHostAddress:(Ljava/lang/String;)Ljava/lang/String;
     227: iload_0
     228: iconst_2
     229: iadd
     230: aconst_null
     231: aconst_null
     232: aconst_null
     233: invokespecial #37                 // Method java/net/URI."<init>":(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V
     236: ldc           #25                 // String s2
     238: invokevirtual #38                 // Method io/undertow/server/handlers/proxy/LoadBalancingProxyClient.addHost:(Ljava/net/URI;Ljava/lang/String;)Lio/undertow/server/handlers/proxy/LoadBalancingProxyClient;
     241: sipush        10000
     244: getstatic     #39                 // Field io/undertow/server/handlers/ResponseCodeHandler.HANDLE_404:Lio/undertow/server/handlers/ResponseCodeHandler;
     247: iconst_0
     248: iconst_0
     249: iconst_2
     250: invokespecial #40                 // Method io/undertow/server/handlers/proxy/ProxyHandler."<init>":(Lio/undertow/server/handlers/proxy/ProxyClient;ILio/undertow/server/HttpHandler;ZZI)V
     253: invokestatic  #41                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     256: return

  public void testHeadersAreLowercase() throws java.io.IOException;
    Code:
       0: new           #42                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #43                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: new           #44                 // class org/apache/http/client/methods/HttpGet
      11: dup
      12: new           #45                 // class java/lang/StringBuilder
      15: dup
      16: invokespecial #46                 // Method java/lang/StringBuilder."<init>":()V
      19: invokestatic  #47                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
      22: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      25: ldc           #49                 // String /name
      27: invokevirtual #48                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      30: invokevirtual #50                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      33: invokespecial #51                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
      36: astore_2
      37: aload_1
      38: aload_2
      39: invokevirtual #52                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
      42: astore_3
      43: ldc2_w        #54                 // long 200l
      46: aload_3
      47: invokeinterface #56,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
      52: invokeinterface #57,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
      57: i2l
      58: invokestatic  #58                 // Method org/junit/Assert.assertEquals:(JJ)V
      61: aload_3
      62: invokestatic  #59                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
      65: pop
      66: aload_3
      67: ldc           #60                 // String x-custom-header
      69: invokeinterface #61,  2           // InterfaceMethod org/apache/http/HttpResponse.getFirstHeader:(Ljava/lang/String;)Lorg/apache/http/Header;
      74: astore        4
      76: ldc           #60                 // String x-custom-header
      78: aload         4
      80: invokeinterface #62,  1           // InterfaceMethod org/apache/http/Header.getName:()Ljava/lang/String;
      85: invokestatic  #63                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
      88: aload_1
      89: invokevirtual #64                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
      92: invokeinterface #65,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
      97: goto          114
     100: astore        5
     102: aload_1
     103: invokevirtual #64                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     106: invokeinterface #65,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     111: aload         5
     113: athrow
     114: return
    Exception table:
       from    to  target type
           8    88   100   any
         100   102   100   any
}

Compiled from "JDBCLogDatabaseTestCase.java"
public class io.undertow.server.handlers.JDBCLogDatabaseTestCase {
  private static final int NUM_THREADS;

  private static final int NUM_REQUESTS;

  private static final io.undertow.server.HttpHandler HELLO_HANDLER;

  private org.h2.jdbcx.JdbcConnectionPool ds;

  public io.undertow.server.handlers.JDBCLogDatabaseTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void setup() throws java.sql.SQLException;
    Code:
       0: aload_0
       1: ldc           #2                  // String jdbc:h2:mem:test;DB_CLOSE_DELAY=-1
       3: ldc           #3                  // String user
       5: ldc           #4                  // String password
       7: invokestatic  #5                  // Method org/h2/jdbcx/JdbcConnectionPool.create:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Lorg/h2/jdbcx/JdbcConnectionPool;
      10: putfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      13: aconst_null
      14: astore_1
      15: aconst_null
      16: astore_2
      17: aload_0
      18: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      21: invokevirtual #7                  // Method org/h2/jdbcx/JdbcConnectionPool.getConnection:()Ljava/sql/Connection;
      24: astore_1
      25: aload_1
      26: iconst_1
      27: invokeinterface #8,  2            // InterfaceMethod java/sql/Connection.setAutoCommit:(Z)V
      32: aload_1
      33: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
      38: astore_2
      39: aload_2
      40: ldc           #10                 // String CREATE TABLE PUBLIC.ACCESS ( id SERIAL NOT NULL, remoteHost CHAR(15) NOT NULL, userName CHAR(15), timestamp TIMESTAMP NOT NULL, virtualHost VARCHAR(64), method VARCHAR(8), query VARCHAR(255) NOT NULL, status SMALLINT UNSIGNED NOT NULL, bytes INT UNSIGNED NOT NULL, referer VARCHAR(128), userAgent VARCHAR(128), PRIMARY KEY (id) );
      42: invokeinterface #11,  2           // InterfaceMethod java/sql/Statement.executeUpdate:(Ljava/lang/String;)I
      47: pop
      48: aload_2
      49: ifnull        58
      52: aload_2
      53: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
      58: aload_1
      59: ifnull        94
      62: aload_1
      63: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
      68: goto          94
      71: astore_3
      72: aload_2
      73: ifnull        82
      76: aload_2
      77: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
      82: aload_1
      83: ifnull        92
      86: aload_1
      87: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
      92: aload_3
      93: athrow
      94: return
    Exception table:
       from    to  target type
          17    48    71   any

  public void teardown() throws java.sql.SQLException;
    Code:
       0: aconst_null
       1: astore_1
       2: aconst_null
       3: astore_2
       4: aload_0
       5: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
       8: invokevirtual #7                  // Method org/h2/jdbcx/JdbcConnectionPool.getConnection:()Ljava/sql/Connection;
      11: astore_1
      12: aload_1
      13: iconst_1
      14: invokeinterface #8,  2            // InterfaceMethod java/sql/Connection.setAutoCommit:(Z)V
      19: aload_1
      20: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
      25: astore_2
      26: aload_2
      27: ldc           #14                 // String DROP TABLE PUBLIC.ACCESS;
      29: invokeinterface #11,  2           // InterfaceMethod java/sql/Statement.executeUpdate:(Ljava/lang/String;)I
      34: pop
      35: aload_2
      36: ifnull        45
      39: aload_2
      40: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
      45: aload_1
      46: ifnull        81
      49: aload_1
      50: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
      55: goto          81
      58: astore_3
      59: aload_2
      60: ifnull        69
      63: aload_2
      64: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
      69: aload_1
      70: ifnull        79
      73: aload_1
      74: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
      79: aload_3
      80: athrow
      81: aload_0
      82: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      85: invokevirtual #15                 // Method org/h2/jdbcx/JdbcConnectionPool.dispose:()V
      88: aload_0
      89: aconst_null
      90: putfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      93: return
    Exception table:
       from    to  target type
           4    35    58   any

  public void testSingleLogMessageToDatabase() throws java.io.IOException, java.lang.InterruptedException, java.sql.SQLException;
    Code:
       0: new           #16                 // class io/undertow/server/handlers/JDBCLogHandler
       3: dup
       4: getstatic     #17                 // Field HELLO_HANDLER:Lio/undertow/server/HttpHandler;
       7: invokestatic  #18                 // Method io/undertow/testutils/DefaultServer.getWorker:()Lorg/xnio/XnioWorker;
      10: ldc           #19                 // String common
      12: aload_0
      13: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      16: invokespecial #20                 // Method io/undertow/server/handlers/JDBCLogHandler."<init>":(Lio/undertow/server/HttpHandler;Ljava/util/concurrent/Executor;Ljava/lang/String;Ljavax/sql/DataSource;)V
      19: astore_1
      20: new           #21                 // class io/undertow/util/CompletionLatchHandler
      23: dup
      24: aload_1
      25: invokespecial #22                 // Method io/undertow/util/CompletionLatchHandler."<init>":(Lio/undertow/server/HttpHandler;)V
      28: dup
      29: astore_2
      30: invokestatic  #23                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
      33: new           #24                 // class io/undertow/testutils/TestHttpClient
      36: dup
      37: invokespecial #25                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
      40: astore_3
      41: new           #26                 // class org/apache/http/client/methods/HttpGet
      44: dup
      45: new           #27                 // class java/lang/StringBuilder
      48: dup
      49: invokespecial #28                 // Method java/lang/StringBuilder."<init>":()V
      52: invokestatic  #29                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
      55: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      58: ldc           #31                 // String /path
      60: invokevirtual #30                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      63: invokevirtual #32                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      66: invokespecial #33                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
      69: astore        4
      71: aload_3
      72: aload         4
      74: invokevirtual #34                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
      77: astore        5
      79: aload_2
      80: invokevirtual #35                 // Method io/undertow/util/CompletionLatchHandler.await:()V
      83: aload_1
      84: invokevirtual #36                 // Method io/undertow/server/handlers/JDBCLogHandler.awaitWrittenForTest:()V
      87: ldc2_w        #38                 // long 200l
      90: aload         5
      92: invokeinterface #40,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
      97: invokeinterface #41,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     102: i2l
     103: invokestatic  #42                 // Method org/junit/Assert.assertEquals:(JJ)V
     106: ldc           #43                 // String Hello
     108: aload         5
     110: invokestatic  #44                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     113: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     116: aconst_null
     117: astore        4
     119: aconst_null
     120: astore        5
     122: aload_0
     123: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
     126: invokevirtual #7                  // Method org/h2/jdbcx/JdbcConnectionPool.getConnection:()Ljava/sql/Connection;
     129: astore        4
     131: aload         4
     133: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
     138: astore        5
     140: aload         5
     142: ldc           #46                 // String SELECT * FROM PUBLIC.ACCESS;
     144: invokeinterface #47,  2           // InterfaceMethod java/sql/Statement.executeQuery:(Ljava/lang/String;)Ljava/sql/ResultSet;
     149: astore        6
     151: aload         6
     153: invokeinterface #48,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     158: pop
     159: invokestatic  #49                 // Method io/undertow/testutils/DefaultServer.getDefaultServerAddress:()Ljava/net/InetSocketAddress;
     162: invokevirtual #50                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
     165: invokevirtual #51                 // Method java/net/InetAddress.getHostAddress:()Ljava/lang/String;
     168: aload         6
     170: aload_1
     171: invokevirtual #52                 // Method io/undertow/server/handlers/JDBCLogHandler.getRemoteHostField:()Ljava/lang/String;
     174: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     179: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     182: ldc           #54                 // String 5
     184: aload         6
     186: aload_1
     187: invokevirtual #55                 // Method io/undertow/server/handlers/JDBCLogHandler.getBytesField:()Ljava/lang/String;
     190: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     195: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     198: ldc           #56                 // String 200
     200: aload         6
     202: aload_1
     203: invokevirtual #57                 // Method io/undertow/server/handlers/JDBCLogHandler.getStatusField:()Ljava/lang/String;
     206: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     211: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     214: aload_3
     215: invokevirtual #58                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     218: invokeinterface #59,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     223: aload         5
     225: ifnull        235
     228: aload         5
     230: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     235: aload         4
     237: ifnull        279
     240: aload         4
     242: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     247: goto          279
     250: astore        7
     252: aload         5
     254: ifnull        264
     257: aload         5
     259: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     264: aload         4
     266: ifnull        276
     269: aload         4
     271: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     276: aload         7
     278: athrow
     279: goto          450
     282: astore        8
     284: aconst_null
     285: astore        9
     287: aconst_null
     288: astore        10
     290: aload_0
     291: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
     294: invokevirtual #7                  // Method org/h2/jdbcx/JdbcConnectionPool.getConnection:()Ljava/sql/Connection;
     297: astore        9
     299: aload         9
     301: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
     306: astore        10
     308: aload         10
     310: ldc           #46                 // String SELECT * FROM PUBLIC.ACCESS;
     312: invokeinterface #47,  2           // InterfaceMethod java/sql/Statement.executeQuery:(Ljava/lang/String;)Ljava/sql/ResultSet;
     317: astore        11
     319: aload         11
     321: invokeinterface #48,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     326: pop
     327: invokestatic  #49                 // Method io/undertow/testutils/DefaultServer.getDefaultServerAddress:()Ljava/net/InetSocketAddress;
     330: invokevirtual #50                 // Method java/net/InetSocketAddress.getAddress:()Ljava/net/InetAddress;
     333: invokevirtual #51                 // Method java/net/InetAddress.getHostAddress:()Ljava/lang/String;
     336: aload         11
     338: aload_1
     339: invokevirtual #52                 // Method io/undertow/server/handlers/JDBCLogHandler.getRemoteHostField:()Ljava/lang/String;
     342: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     347: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     350: ldc           #54                 // String 5
     352: aload         11
     354: aload_1
     355: invokevirtual #55                 // Method io/undertow/server/handlers/JDBCLogHandler.getBytesField:()Ljava/lang/String;
     358: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     363: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     366: ldc           #56                 // String 200
     368: aload         11
     370: aload_1
     371: invokevirtual #57                 // Method io/undertow/server/handlers/JDBCLogHandler.getStatusField:()Ljava/lang/String;
     374: invokeinterface #53,  2           // InterfaceMethod java/sql/ResultSet.getString:(Ljava/lang/String;)Ljava/lang/String;
     379: invokestatic  #45                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     382: aload_3
     383: invokevirtual #58                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     386: invokeinterface #59,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     391: aload         10
     393: ifnull        403
     396: aload         10
     398: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     403: aload         9
     405: ifnull        447
     408: aload         9
     410: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     415: goto          447
     418: astore        12
     420: aload         10
     422: ifnull        432
     425: aload         10
     427: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     432: aload         9
     434: ifnull        444
     437: aload         9
     439: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     444: aload         12
     446: athrow
     447: aload         8
     449: athrow
     450: return
    Exception table:
       from    to  target type
         122   223   250   any
         250   252   250   any
          41   116   282   any
         290   391   418   any
         418   420   418   any
         282   284   282   any

  public void testLogLotsOfThreadsToDatabase() throws java.io.IOException, java.lang.InterruptedException, java.util.concurrent.ExecutionException, java.sql.SQLException;
    Code:
       0: new           #16                 // class io/undertow/server/handlers/JDBCLogHandler
       3: dup
       4: getstatic     #17                 // Field HELLO_HANDLER:Lio/undertow/server/HttpHandler;
       7: invokestatic  #18                 // Method io/undertow/testutils/DefaultServer.getWorker:()Lorg/xnio/XnioWorker;
      10: ldc           #60                 // String combined
      12: aload_0
      13: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
      16: invokespecial #20                 // Method io/undertow/server/handlers/JDBCLogHandler."<init>":(Lio/undertow/server/HttpHandler;Ljava/util/concurrent/Executor;Ljava/lang/String;Ljavax/sql/DataSource;)V
      19: astore_1
      20: new           #21                 // class io/undertow/util/CompletionLatchHandler
      23: dup
      24: bipush        120
      26: aload_1
      27: invokespecial #62                 // Method io/undertow/util/CompletionLatchHandler."<init>":(ILio/undertow/server/HttpHandler;)V
      30: dup
      31: astore_2
      32: invokestatic  #23                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
      35: bipush        10
      37: invokestatic  #63                 // Method java/util/concurrent/Executors.newFixedThreadPool:(I)Ljava/util/concurrent/ExecutorService;
      40: astore_3
      41: new           #64                 // class java/util/ArrayList
      44: dup
      45: invokespecial #65                 // Method java/util/ArrayList."<init>":()V
      48: astore        4
      50: iconst_0
      51: istore        5
      53: iload         5
      55: bipush        10
      57: if_icmpge     92
      60: iload         5
      62: istore        6
      64: aload         4
      66: aload_3
      67: new           #66                 // class io/undertow/server/handlers/JDBCLogDatabaseTestCase$2
      70: dup
      71: aload_0
      72: invokespecial #67                 // Method io/undertow/server/handlers/JDBCLogDatabaseTestCase$2."<init>":(Lio/undertow/server/handlers/JDBCLogDatabaseTestCase;)V
      75: invokeinterface #68,  2           // InterfaceMethod java/util/concurrent/ExecutorService.submit:(Ljava/lang/Runnable;)Ljava/util/concurrent/Future;
      80: invokeinterface #69,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      85: pop
      86: iinc          5, 1
      89: goto          53
      92: aload         4
      94: invokeinterface #70,  1           // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      99: astore        5
     101: aload         5
     103: invokeinterface #71,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     108: ifeq          134
     111: aload         5
     113: invokeinterface #72,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     118: checkcast     #73                 // class java/util/concurrent/Future
     121: astore        6
     123: aload         6
     125: invokeinterface #74,  1           // InterfaceMethod java/util/concurrent/Future.get:()Ljava/lang/Object;
     130: pop
     131: goto          101
     134: aload_3
     135: invokeinterface #75,  1           // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     140: goto          154
     143: astore        7
     145: aload_3
     146: invokeinterface #75,  1           // InterfaceMethod java/util/concurrent/ExecutorService.shutdown:()V
     151: aload         7
     153: athrow
     154: aload_2
     155: invokevirtual #35                 // Method io/undertow/util/CompletionLatchHandler.await:()V
     158: aload_1
     159: invokevirtual #36                 // Method io/undertow/server/handlers/JDBCLogHandler.awaitWrittenForTest:()V
     162: aconst_null
     163: astore        4
     165: aconst_null
     166: astore        5
     168: aload_0
     169: getfield      #6                  // Field ds:Lorg/h2/jdbcx/JdbcConnectionPool;
     172: invokevirtual #7                  // Method org/h2/jdbcx/JdbcConnectionPool.getConnection:()Ljava/sql/Connection;
     175: astore        4
     177: aload         4
     179: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
     184: astore        5
     186: aload         4
     188: invokeinterface #9,  1            // InterfaceMethod java/sql/Connection.createStatement:()Ljava/sql/Statement;
     193: ldc           #76                 // String SELECT COUNT(*) FROM PUBLIC.ACCESS;
     195: invokeinterface #47,  2           // InterfaceMethod java/sql/Statement.executeQuery:(Ljava/lang/String;)Ljava/sql/ResultSet;
     200: astore        6
     202: aload         6
     204: invokeinterface #48,  1           // InterfaceMethod java/sql/ResultSet.next:()Z
     209: pop
     210: aload         6
     212: iconst_1
     213: invokeinterface #77,  2           // InterfaceMethod java/sql/ResultSet.getInt:(I)I
     218: i2l
     219: ldc2_w        #78                 // long 120l
     222: invokestatic  #42                 // Method org/junit/Assert.assertEquals:(JJ)V
     225: aload         5
     227: ifnull        237
     230: aload         5
     232: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     237: aload         4
     239: ifnull        281
     242: aload         4
     244: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     249: goto          281
     252: astore        8
     254: aload         5
     256: ifnull        266
     259: aload         5
     261: invokeinterface #12,  1           // InterfaceMethod java/sql/Statement.close:()V
     266: aload         4
     268: ifnull        278
     271: aload         4
     273: invokeinterface #13,  1           // InterfaceMethod java/sql/Connection.close:()V
     278: aload         8
     280: athrow
     281: return
    Exception table:
       from    to  target type
          41   134   143   any
         143   145   143   any
         168   225   252   any
         252   254   252   any

  static {};
    Code:
       0: new           #80                 // class io/undertow/server/handlers/JDBCLogDatabaseTestCase$1
       3: dup
       4: invokespecial #81                 // Method io/undertow/server/handlers/JDBCLogDatabaseTestCase$1."<init>":()V
       7: putstatic     #17                 // Field HELLO_HANDLER:Lio/undertow/server/HttpHandler;
      10: return
}

Compiled from "FileHandlerSymlinksTestCase.java"
public class io.undertow.server.handlers.file.FileHandlerSymlinksTestCase {
  public io.undertow.server.handlers.file.FileHandlerSymlinksTestCase();
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: return

  public void createSymlinksScenario() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: ldc           #2                  // String os.name
       2: invokestatic  #3                  // Method java/lang/System.getProperty:(Ljava/lang/String;)Ljava/lang/String;
       5: invokevirtual #4                  // Method java/lang/String.toLowerCase:()Ljava/lang/String;
       8: ldc           #5                  // String windows
      10: invokevirtual #6                  // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
      13: invokestatic  #7                  // Method org/junit/Assume.assumeFalse:(Z)V
      16: aload_0
      17: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      20: ldc           #9                  // String page.html
      22: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      25: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      28: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      31: astore_1
      32: aload_1
      33: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      38: astore_2
      39: aload_2
      40: ldc           #14                 // String newDir
      42: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      47: astore_3
      48: aload_3
      49: iconst_0
      50: anewarray     #16                 // class java/nio/file/attribute/FileAttribute
      53: invokestatic  #17                 // Method java/nio/file/Files.createDirectories:(Ljava/nio/file/Path;[Ljava/nio/file/attribute/FileAttribute;)Ljava/nio/file/Path;
      56: pop
      57: aload_3
      58: ldc           #18                 // String innerDir
      60: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      65: astore        4
      67: aload         4
      69: iconst_0
      70: anewarray     #16                 // class java/nio/file/attribute/FileAttribute
      73: invokestatic  #17                 // Method java/nio/file/Files.createDirectories:(Ljava/nio/file/Path;[Ljava/nio/file/attribute/FileAttribute;)Ljava/nio/file/Path;
      76: pop
      77: aload_1
      78: aload_3
      79: aload_1
      80: invokeinterface #19,  1           // InterfaceMethod java/nio/file/Path.getFileName:()Ljava/nio/file/Path;
      85: invokeinterface #20,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/nio/file/Path;)Ljava/nio/file/Path;
      90: iconst_0
      91: anewarray     #21                 // class java/nio/file/CopyOption
      94: invokestatic  #22                 // Method java/nio/file/Files.copy:(Ljava/nio/file/Path;Ljava/nio/file/Path;[Ljava/nio/file/CopyOption;)Ljava/nio/file/Path;
      97: pop
      98: aload_1
      99: aload         4
     101: aload_1
     102: invokeinterface #19,  1           // InterfaceMethod java/nio/file/Path.getFileName:()Ljava/nio/file/Path;
     107: invokeinterface #20,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/nio/file/Path;)Ljava/nio/file/Path;
     112: iconst_0
     113: anewarray     #21                 // class java/nio/file/CopyOption
     116: invokestatic  #22                 // Method java/nio/file/Files.copy:(Ljava/nio/file/Path;Ljava/nio/file/Path;[Ljava/nio/file/CopyOption;)Ljava/nio/file/Path;
     119: pop
     120: aload_2
     121: ldc           #23                 // String newSymlink
     123: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
     128: astore        5
     130: aload         5
     132: aload_3
     133: iconst_0
     134: anewarray     #16                 // class java/nio/file/attribute/FileAttribute
     137: invokestatic  #24                 // Method java/nio/file/Files.createSymbolicLink:(Ljava/nio/file/Path;Ljava/nio/file/Path;[Ljava/nio/file/attribute/FileAttribute;)Ljava/nio/file/Path;
     140: pop
     141: aload_3
     142: ldc           #25                 // String innerSymlink
     144: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
     149: astore        6
     151: aload         6
     153: aload         4
     155: iconst_0
     156: anewarray     #16                 // class java/nio/file/attribute/FileAttribute
     159: invokestatic  #24                 // Method java/nio/file/Files.createSymbolicLink:(Ljava/nio/file/Path;Ljava/nio/file/Path;[Ljava/nio/file/attribute/FileAttribute;)Ljava/nio/file/Path;
     162: pop
     163: return

  public void deleteSymlinksScenario() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: aload_0
       1: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
       4: ldc           #9                  // String page.html
       6: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
       9: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      12: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      15: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      20: astore_1
      21: aload_1
      22: ldc           #23                 // String newSymlink
      24: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      29: astore_2
      30: aload_1
      31: ldc           #14                 // String newDir
      33: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      38: astore_3
      39: aload_3
      40: ldc           #9                  // String page.html
      42: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      47: astore        4
      49: aload_3
      50: ldc           #18                 // String innerDir
      52: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      57: astore        5
      59: aload_3
      60: ldc           #25                 // String innerSymlink
      62: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      67: astore        6
      69: aload         5
      71: ldc           #9                  // String page.html
      73: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      78: astore        7
      80: aload         6
      82: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
      85: pop
      86: aload_2
      87: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
      90: pop
      91: aload         7
      93: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
      96: pop
      97: aload         4
      99: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
     102: pop
     103: aload         5
     105: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
     108: pop
     109: aload_3
     110: invokestatic  #26                 // Method java/nio/file/Files.deleteIfExists:(Ljava/nio/file/Path;)Z
     113: pop
     114: return

  public void testCreateSymlinks() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: aload_0
       1: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
       4: ldc           #9                  // String page.html
       6: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
       9: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      12: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      15: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      20: astore_1
      21: aload_1
      22: ldc           #14                 // String newDir
      24: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      29: astore_2
      30: aload_2
      31: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
      34: invokestatic  #28                 // Method org/junit/Assert.assertFalse:(Z)V
      37: aload_2
      38: ldc           #18                 // String innerDir
      40: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      45: astore_3
      46: aload_3
      47: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
      50: invokestatic  #28                 // Method org/junit/Assert.assertFalse:(Z)V
      53: aload_1
      54: ldc           #23                 // String newSymlink
      56: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      61: astore        4
      63: aload         4
      65: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
      68: invokestatic  #29                 // Method org/junit/Assert.assertTrue:(Z)V
      71: aload         4
      73: ldc           #25                 // String innerSymlink
      75: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      80: astore        5
      82: aload         5
      84: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
      87: invokestatic  #29                 // Method org/junit/Assert.assertTrue:(Z)V
      90: aload         5
      92: invokeinterface #30,  1           // InterfaceMethod java/nio/file/Path.getRoot:()Ljava/nio/file/Path;
      97: astore        6
      99: iconst_0
     100: istore        7
     102: iload         7
     104: aload         5
     106: invokeinterface #31,  1           // InterfaceMethod java/nio/file/Path.getNameCount:()I
     111: if_icmpge     177
     114: aload         6
     116: aload         5
     118: iload         7
     120: invokeinterface #32,  2           // InterfaceMethod java/nio/file/Path.getName:(I)Ljava/nio/file/Path;
     125: invokeinterface #33,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
     130: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
     135: astore        6
     137: getstatic     #34                 // Field java/lang/System.out:Ljava/io/PrintStream;
     140: new           #35                 // class java/lang/StringBuilder
     143: dup
     144: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     147: aload         6
     149: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     152: ldc           #38                 // String
     154: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     157: aload         6
     159: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
     162: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     165: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     168: invokevirtual #42                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     171: iinc          7, 1
     174: goto          102
     177: aload         6
     179: ldc           #43                 // String .
     181: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
     186: astore        6
     188: getstatic     #34                 // Field java/lang/System.out:Ljava/io/PrintStream;
     191: new           #35                 // class java/lang/StringBuilder
     194: dup
     195: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     198: aload         6
     200: invokevirtual #37                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     203: ldc           #38                 // String
     205: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     208: aload         6
     210: invokestatic  #27                 // Method java/nio/file/Files.isSymbolicLink:(Ljava/nio/file/Path;)Z
     213: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Z)Ljava/lang/StringBuilder;
     216: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     219: invokevirtual #42                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
     222: return

  public void testDefaultAccessSymlinkDenied() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: invokespecial #55                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;J)V
      69: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      72: iconst_0
      73: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      76: iconst_1
      77: anewarray     #58                 // class java/lang/String
      80: dup
      81: iconst_0
      82: ldc           #9                  // String page.html
      84: aastore
      85: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      88: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
      91: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
      94: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
      97: new           #63                 // class org/apache/http/client/methods/HttpGet
     100: dup
     101: new           #35                 // class java/lang/StringBuilder
     104: dup
     105: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     108: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     111: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     114: ldc           #65                 // String /path/innerSymlink/
     116: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     119: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     122: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     125: astore        4
     127: aload_1
     128: aload         4
     130: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     133: astore        5
     135: ldc2_w        #69                 // long 404l
     138: aload         5
     140: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     145: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     150: i2l
     151: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     154: aload_1
     155: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     158: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     163: goto          180
     166: astore        6
     168: aload_1
     169: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     172: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     177: aload         6
     179: athrow
     180: return
    Exception table:
       from    to  target type
          38   154   166   any
         166   168   166   any

  public void testExplicitAccessSymlinkDeniedForEmptySafePath() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: ldc           #76                 // String
      75: aastore
      76: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      79: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      82: iconst_0
      83: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      86: iconst_1
      87: anewarray     #58                 // class java/lang/String
      90: dup
      91: iconst_0
      92: ldc           #9                  // String page.html
      94: aastore
      95: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      98: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     101: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     104: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     107: new           #63                 // class org/apache/http/client/methods/HttpGet
     110: dup
     111: new           #35                 // class java/lang/StringBuilder
     114: dup
     115: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     118: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     121: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: ldc           #65                 // String /path/innerSymlink/
     126: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     132: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     135: astore        4
     137: aload_1
     138: aload         4
     140: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     143: astore        5
     145: ldc2_w        #69                 // long 404l
     148: aload         5
     150: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     155: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     160: i2l
     161: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     164: aload_1
     165: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     168: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     173: goto          190
     176: astore        6
     178: aload_1
     179: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     182: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     187: aload         6
     189: athrow
     190: return
    Exception table:
       from    to  target type
          38   164   176   any
         176   178   176   any

  public void testExplicitAccessSymlinkDeniedForInsideSymlinks() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #14                 // String newDir
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: ldc           #76                 // String
      75: aastore
      76: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      79: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      82: iconst_0
      83: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      86: iconst_1
      87: anewarray     #58                 // class java/lang/String
      90: dup
      91: iconst_0
      92: ldc           #9                  // String page.html
      94: aastore
      95: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      98: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     101: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     104: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     107: new           #63                 // class org/apache/http/client/methods/HttpGet
     110: dup
     111: new           #35                 // class java/lang/StringBuilder
     114: dup
     115: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     118: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     121: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: ldc           #78                 // String /path/innerDir/page.html
     126: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     132: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     135: astore        4
     137: aload_1
     138: aload         4
     140: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     143: astore        5
     145: ldc2_w        #79                 // long 200l
     148: aload         5
     150: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     155: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     160: i2l
     161: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     164: aload         5
     166: invokestatic  #81                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     169: astore        6
     171: aload         5
     173: ldc           #82                 // String Content-Type
     175: invokeinterface #83,  2           // InterfaceMethod org/apache/http/HttpResponse.getHeaders:(Ljava/lang/String;)[Lorg/apache/http/Header;
     180: astore        7
     182: ldc           #84                 // String text/html
     184: aload         7
     186: iconst_0
     187: aaload
     188: invokeinterface #85,  1           // InterfaceMethod org/apache/http/Header.getValue:()Ljava/lang/String;
     193: invokestatic  #86                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     196: aload         6
     198: aload         6
     200: ldc           #87                 // String A web page
     202: invokevirtual #6                  // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     205: invokestatic  #88                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     208: new           #63                 // class org/apache/http/client/methods/HttpGet
     211: dup
     212: new           #35                 // class java/lang/StringBuilder
     215: dup
     216: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     219: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     222: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     225: ldc           #89                 // String /path/innerSymlink/page.html
     227: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     230: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     233: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     236: astore        4
     238: aload_1
     239: aload         4
     241: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     244: astore        5
     246: ldc2_w        #69                 // long 404l
     249: aload         5
     251: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     256: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     261: i2l
     262: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     265: aload_1
     266: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     269: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     274: goto          291
     277: astore        8
     279: aload_1
     280: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     283: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     288: aload         8
     290: athrow
     291: return
    Exception table:
       from    to  target type
          38   265   277   any
         277   279   277   any

  public void testExplicitAccessSymlinkGranted() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: ldc           #90                 // String /
      75: aastore
      76: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      79: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      82: iconst_0
      83: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      86: iconst_1
      87: anewarray     #58                 // class java/lang/String
      90: dup
      91: iconst_0
      92: ldc           #9                  // String page.html
      94: aastore
      95: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      98: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     101: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     104: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     107: new           #63                 // class org/apache/http/client/methods/HttpGet
     110: dup
     111: new           #35                 // class java/lang/StringBuilder
     114: dup
     115: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     118: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     121: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: ldc           #89                 // String /path/innerSymlink/page.html
     126: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     132: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     135: astore        4
     137: aload_1
     138: aload         4
     140: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     143: astore        5
     145: ldc2_w        #79                 // long 200l
     148: aload         5
     150: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     155: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     160: i2l
     161: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     164: aload         5
     166: invokestatic  #81                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     169: astore        6
     171: aload         5
     173: ldc           #82                 // String Content-Type
     175: invokeinterface #83,  2           // InterfaceMethod org/apache/http/HttpResponse.getHeaders:(Ljava/lang/String;)[Lorg/apache/http/Header;
     180: astore        7
     182: ldc           #84                 // String text/html
     184: aload         7
     186: iconst_0
     187: aaload
     188: invokeinterface #85,  1           // InterfaceMethod org/apache/http/Header.getValue:()Ljava/lang/String;
     193: invokestatic  #86                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     196: aload         6
     198: aload         6
     200: ldc           #87                 // String A web page
     202: invokevirtual #6                  // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     205: invokestatic  #88                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     208: aload_1
     209: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     212: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     217: goto          234
     220: astore        8
     222: aload_1
     223: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     226: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     231: aload         8
     233: athrow
     234: return
    Exception table:
       from    to  target type
          38   208   220   any
         220   222   220   any

  public void testExplicitAccessSymlinkGrantedUsingSpecificFilters() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: aload_2
      74: invokeinterface #91,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
      79: invokeinterface #33,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      84: ldc           #92                 // String /newDir
      86: invokevirtual #93                 // Method java/lang/String.concat:(Ljava/lang/String;)Ljava/lang/String;
      89: aastore
      90: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      93: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      96: iconst_0
      97: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
     100: iconst_1
     101: anewarray     #58                 // class java/lang/String
     104: dup
     105: iconst_0
     106: ldc           #9                  // String page.html
     108: aastore
     109: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
     112: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     115: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     118: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     121: new           #63                 // class org/apache/http/client/methods/HttpGet
     124: dup
     125: new           #35                 // class java/lang/StringBuilder
     128: dup
     129: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     132: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     135: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     138: ldc           #89                 // String /path/innerSymlink/page.html
     140: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     143: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     146: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     149: astore        4
     151: aload_1
     152: aload         4
     154: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     157: astore        5
     159: ldc2_w        #79                 // long 200l
     162: aload         5
     164: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     169: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     174: i2l
     175: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     178: aload         5
     180: invokestatic  #81                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     183: astore        6
     185: aload         5
     187: ldc           #82                 // String Content-Type
     189: invokeinterface #83,  2           // InterfaceMethod org/apache/http/HttpResponse.getHeaders:(Ljava/lang/String;)[Lorg/apache/http/Header;
     194: astore        7
     196: ldc           #84                 // String text/html
     198: aload         7
     200: iconst_0
     201: aaload
     202: invokeinterface #85,  1           // InterfaceMethod org/apache/http/Header.getValue:()Ljava/lang/String;
     207: invokestatic  #86                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     210: aload         6
     212: aload         6
     214: ldc           #87                 // String A web page
     216: invokevirtual #6                  // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     219: invokestatic  #88                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     222: aload_1
     223: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     226: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     231: goto          248
     234: astore        8
     236: aload_1
     237: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     240: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     245: aload         8
     247: athrow
     248: return
    Exception table:
       from    to  target type
          38   222   234   any
         234   236   234   any

  public void testExplicitAccessSymlinkGrantedUsingSpecificFiltersWithDirectoryListingEnabled() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #94                 // class org/apache/http/params/SyncBasicHttpParams
       3: dup
       4: invokespecial #95                 // Method org/apache/http/params/SyncBasicHttpParams."<init>":()V
       7: astore_1
       8: aload_1
       9: invokestatic  #96                 // Method org/apache/http/impl/client/DefaultHttpClient.setDefaultHttpParams:(Lorg/apache/http/params/HttpParams;)V
      12: aload_1
      13: ldc           #97                 // int 300000
      15: invokestatic  #98                 // Method org/apache/http/params/HttpConnectionParams.setSoTimeout:(Lorg/apache/http/params/HttpParams;I)V
      18: new           #44                 // class io/undertow/testutils/TestHttpClient
      21: dup
      22: aload_1
      23: invokespecial #99                 // Method io/undertow/testutils/TestHttpClient."<init>":(Lorg/apache/http/params/HttpParams;)V
      26: astore_2
      27: aload_0
      28: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      31: ldc           #9                  // String page.html
      33: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      36: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      39: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      42: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      47: astore_3
      48: aload_3
      49: ldc           #23                 // String newSymlink
      51: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      56: astore        4
      58: new           #48                 // class io/undertow/server/handlers/PathHandler
      61: dup
      62: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      65: ldc           #50                 // String /path
      67: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      70: dup
      71: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      74: dup
      75: aload         4
      77: ldc2_w        #53                 // long 10485760l
      80: iconst_1
      81: iconst_1
      82: anewarray     #58                 // class java/lang/String
      85: dup
      86: iconst_0
      87: aload_3
      88: invokeinterface #91,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
      93: invokeinterface #33,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      98: ldc           #92                 // String /newDir
     100: invokevirtual #93                 // Method java/lang/String.concat:(Ljava/lang/String;)Ljava/lang/String;
     103: aastore
     104: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
     107: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
     110: iconst_0
     111: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
     114: iconst_1
     115: anewarray     #58                 // class java/lang/String
     118: dup
     119: iconst_0
     120: ldc           #9                  // String page.html
     122: aastore
     123: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
     126: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     129: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     132: new           #63                 // class org/apache/http/client/methods/HttpGet
     135: dup
     136: new           #35                 // class java/lang/StringBuilder
     139: dup
     140: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     143: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     146: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     149: ldc           #100                // String /path/innerSymlink/.
     151: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     154: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     157: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     160: astore        5
     162: aload_2
     163: aload         5
     165: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     168: astore        6
     170: ldc2_w        #79                 // long 200l
     173: aload         6
     175: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     180: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     185: i2l
     186: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     189: aload         6
     191: invokestatic  #81                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     194: astore        7
     196: aload         6
     198: ldc           #82                 // String Content-Type
     200: invokeinterface #83,  2           // InterfaceMethod org/apache/http/HttpResponse.getHeaders:(Ljava/lang/String;)[Lorg/apache/http/Header;
     205: astore        8
     207: ldc           #84                 // String text/html
     209: aload         8
     211: iconst_0
     212: aaload
     213: invokeinterface #85,  1           // InterfaceMethod org/apache/http/Header.getValue:()Ljava/lang/String;
     218: invokestatic  #86                 // Method org/junit/Assert.assertEquals:(Ljava/lang/Object;Ljava/lang/Object;)V
     221: aload         7
     223: aload         7
     225: ldc           #87                 // String A web page
     227: invokevirtual #6                  // Method java/lang/String.contains:(Ljava/lang/CharSequence;)Z
     230: invokestatic  #88                 // Method org/junit/Assert.assertTrue:(Ljava/lang/String;Z)V
     233: aload_2
     234: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     237: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     242: goto          259
     245: astore        9
     247: aload_2
     248: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     251: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     256: aload         9
     258: athrow
     259: return
    Exception table:
       from    to  target type
          58   233   245   any
         245   247   245   any

  public void testExplicitAccessSymlinkDeniedUsingSpecificFilters() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: aload_2
      74: invokeinterface #91,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
      79: invokeinterface #33,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      84: ldc           #101                // String /otherDir
      86: invokevirtual #93                 // Method java/lang/String.concat:(Ljava/lang/String;)Ljava/lang/String;
      89: aastore
      90: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      93: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      96: iconst_0
      97: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
     100: iconst_1
     101: anewarray     #58                 // class java/lang/String
     104: dup
     105: iconst_0
     106: ldc           #9                  // String page.html
     108: aastore
     109: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
     112: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     115: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     118: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     121: new           #63                 // class org/apache/http/client/methods/HttpGet
     124: dup
     125: new           #35                 // class java/lang/StringBuilder
     128: dup
     129: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     132: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     135: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     138: ldc           #89                 // String /path/innerSymlink/page.html
     140: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     143: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     146: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     149: astore        4
     151: aload_1
     152: aload         4
     154: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     157: astore        5
     159: ldc2_w        #69                 // long 404l
     162: aload         5
     164: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     169: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     174: i2l
     175: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     178: aload_1
     179: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     182: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     187: goto          204
     190: astore        6
     192: aload_1
     193: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     196: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     201: aload         6
     203: athrow
     204: return
    Exception table:
       from    to  target type
          38   178   190   any
         190   192   190   any

  public void testExplicitAccessSymlinkDeniedUsingSameSymlinkName() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: aload_2
      74: invokeinterface #91,  1           // InterfaceMethod java/nio/file/Path.toAbsolutePath:()Ljava/nio/file/Path;
      79: invokeinterface #33,  1           // InterfaceMethod java/nio/file/Path.toString:()Ljava/lang/String;
      84: ldc           #102                // String /innerSymlink
      86: invokevirtual #93                 // Method java/lang/String.concat:(Ljava/lang/String;)Ljava/lang/String;
      89: aastore
      90: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      93: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      96: iconst_0
      97: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
     100: iconst_1
     101: anewarray     #58                 // class java/lang/String
     104: dup
     105: iconst_0
     106: ldc           #9                  // String page.html
     108: aastore
     109: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
     112: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     115: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     118: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     121: new           #63                 // class org/apache/http/client/methods/HttpGet
     124: dup
     125: new           #35                 // class java/lang/StringBuilder
     128: dup
     129: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     132: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     135: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     138: ldc           #89                 // String /path/innerSymlink/page.html
     140: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     143: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     146: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     149: astore        4
     151: aload_1
     152: aload         4
     154: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     157: astore        5
     159: ldc2_w        #69                 // long 404l
     162: aload         5
     164: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     169: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     174: i2l
     175: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     178: aload_1
     179: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     182: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     187: goto          204
     190: astore        6
     192: aload_1
     193: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     196: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     201: aload         6
     203: athrow
     204: return
    Exception table:
       from    to  target type
          38   178   190   any
         190   192   190   any

  public void testResourceManagerBaseSymlink() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: ldc           #76                 // String
      75: aastore
      76: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      79: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      82: iconst_0
      83: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      86: iconst_1
      87: anewarray     #58                 // class java/lang/String
      90: dup
      91: iconst_0
      92: ldc           #9                  // String page.html
      94: aastore
      95: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      98: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     101: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     104: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     107: new           #63                 // class org/apache/http/client/methods/HttpGet
     110: dup
     111: new           #35                 // class java/lang/StringBuilder
     114: dup
     115: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     118: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     121: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: ldc           #103                // String /path/page.html
     126: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     132: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     135: astore        4
     137: aload_1
     138: aload         4
     140: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     143: astore        5
     145: ldc2_w        #79                 // long 200l
     148: aload         5
     150: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     155: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     160: i2l
     161: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     164: aload         5
     166: invokestatic  #81                 // Method io/undertow/testutils/HttpClientUtils.readResponse:(Lorg/apache/http/HttpResponse;)Ljava/lang/String;
     169: pop
     170: new           #63                 // class org/apache/http/client/methods/HttpGet
     173: dup
     174: new           #35                 // class java/lang/StringBuilder
     177: dup
     178: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     181: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     184: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     187: ldc           #89                 // String /path/innerSymlink/page.html
     189: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     192: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     195: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     198: astore        4
     200: aload_1
     201: aload         4
     203: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     206: astore        5
     208: ldc2_w        #69                 // long 404l
     211: aload         5
     213: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     218: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     223: i2l
     224: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     227: aload_1
     228: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     231: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     236: goto          253
     239: astore        6
     241: aload_1
     242: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     245: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     250: aload         6
     252: athrow
     253: return
    Exception table:
       from    to  target type
          38   227   239   any
         239   241   239   any

  public void testRelativePathSymlinkFilter() throws java.io.IOException, java.net.URISyntaxException;
    Code:
       0: new           #44                 // class io/undertow/testutils/TestHttpClient
       3: dup
       4: invokespecial #45                 // Method io/undertow/testutils/TestHttpClient."<init>":()V
       7: astore_1
       8: aload_0
       9: invokevirtual #8                  // Method java/lang/Object.getClass:()Ljava/lang/Class;
      12: ldc           #9                  // String page.html
      14: invokevirtual #10                 // Method java/lang/Class.getResource:(Ljava/lang/String;)Ljava/net/URL;
      17: invokevirtual #11                 // Method java/net/URL.toURI:()Ljava/net/URI;
      20: invokestatic  #12                 // Method java/nio/file/Paths.get:(Ljava/net/URI;)Ljava/nio/file/Path;
      23: invokeinterface #13,  1           // InterfaceMethod java/nio/file/Path.getParent:()Ljava/nio/file/Path;
      28: astore_2
      29: aload_2
      30: ldc           #23                 // String newSymlink
      32: invokeinterface #15,  2           // InterfaceMethod java/nio/file/Path.resolve:(Ljava/lang/String;)Ljava/nio/file/Path;
      37: astore_3
      38: new           #46                 // class io/undertow/server/handlers/CanonicalPathHandler
      41: dup
      42: invokespecial #47                 // Method io/undertow/server/handlers/CanonicalPathHandler."<init>":()V
      45: new           #48                 // class io/undertow/server/handlers/PathHandler
      48: dup
      49: invokespecial #49                 // Method io/undertow/server/handlers/PathHandler."<init>":()V
      52: ldc           #50                 // String /path
      54: new           #51                 // class io/undertow/server/handlers/resource/ResourceHandler
      57: dup
      58: new           #52                 // class io/undertow/server/handlers/resource/PathResourceManager
      61: dup
      62: aload_3
      63: ldc2_w        #53                 // long 10485760l
      66: iconst_1
      67: iconst_1
      68: anewarray     #58                 // class java/lang/String
      71: dup
      72: iconst_0
      73: ldc           #18                 // String innerDir
      75: aastore
      76: invokespecial #77                 // Method io/undertow/server/handlers/resource/PathResourceManager."<init>":(Ljava/nio/file/Path;JZ[Ljava/lang/String;)V
      79: invokespecial #56                 // Method io/undertow/server/handlers/resource/ResourceHandler."<init>":(Lio/undertow/server/handlers/resource/ResourceManager;)V
      82: iconst_0
      83: invokevirtual #57                 // Method io/undertow/server/handlers/resource/ResourceHandler.setDirectoryListingEnabled:(Z)Lio/undertow/server/handlers/resource/ResourceHandler;
      86: iconst_1
      87: anewarray     #58                 // class java/lang/String
      90: dup
      91: iconst_0
      92: ldc           #9                  // String page.html
      94: aastore
      95: invokevirtual #59                 // Method io/undertow/server/handlers/resource/ResourceHandler.addWelcomeFiles:([Ljava/lang/String;)Lio/undertow/server/handlers/resource/ResourceHandler;
      98: invokevirtual #60                 // Method io/undertow/server/handlers/PathHandler.addPrefixPath:(Ljava/lang/String;Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/PathHandler;
     101: invokevirtual #61                 // Method io/undertow/server/handlers/CanonicalPathHandler.setNext:(Lio/undertow/server/HttpHandler;)Lio/undertow/server/handlers/CanonicalPathHandler;
     104: invokestatic  #62                 // Method io/undertow/testutils/DefaultServer.setRootHandler:(Lio/undertow/server/HttpHandler;)V
     107: new           #63                 // class org/apache/http/client/methods/HttpGet
     110: dup
     111: new           #35                 // class java/lang/StringBuilder
     114: dup
     115: invokespecial #36                 // Method java/lang/StringBuilder."<init>":()V
     118: invokestatic  #64                 // Method io/undertow/testutils/DefaultServer.getDefaultServerURL:()Ljava/lang/String;
     121: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     124: ldc           #89                 // String /path/innerSymlink/page.html
     126: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     129: invokevirtual #41                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     132: invokespecial #66                 // Method org/apache/http/client/methods/HttpGet."<init>":(Ljava/lang/String;)V
     135: astore        4
     137: aload_1
     138: aload         4
     140: invokevirtual #67                 // Method io/undertow/testutils/TestHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
     143: astore        5
     145: ldc2_w        #79                 // long 200l
     148: aload         5
     150: invokeinterface #71,  1           // InterfaceMethod org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
     155: invokeinterface #72,  1           // InterfaceMethod org/apache/http/StatusLine.getStatusCode:()I
     160: i2l
     161: invokestatic  #73                 // Method org/junit/Assert.assertEquals:(JJ)V
     164: aload_1
     165: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     168: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     173: goto          190
     176: astore        6
     178: aload_1
     179: invokevirtual #74                 // Method io/undertow/testutils/TestHttpClient.getConnectionManager:()Lorg/apache/http/conn/ClientConnectionManager;
     182: invokeinterface #75,  1           // InterfaceMethod org/apache/http/conn/ClientConnectionManager.shutdown:()V
     187: aload         6
     189: athrow
     190: return
    Exception table:
       from    to  target type
          38   164   176   any
         176   178   176   any
}

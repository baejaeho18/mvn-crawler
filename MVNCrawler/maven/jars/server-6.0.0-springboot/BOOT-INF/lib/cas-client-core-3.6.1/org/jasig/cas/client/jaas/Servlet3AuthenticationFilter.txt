Compiled from "Servlet3AuthenticationFilter.java"
public final class org.jasig.cas.client.jaas.Servlet3AuthenticationFilter extends org.jasig.cas.client.util.AbstractCasFilter {
  public org.jasig.cas.client.jaas.Servlet3AuthenticationFilter();
    Code:
       0: aload_0
       1: getstatic     #1                  // Field org/jasig/cas/client/Protocol.CAS2:Lorg/jasig/cas/client/Protocol;
       4: invokespecial #2                  // Method org/jasig/cas/client/util/AbstractCasFilter."<init>":(Lorg/jasig/cas/client/Protocol;)V
       7: return

  public void doFilter(javax.servlet.ServletRequest, javax.servlet.ServletResponse, javax.servlet.FilterChain) throws java.io.IOException, javax.servlet.ServletException;
    Code:
       0: aload_1
       1: checkcast     #3                  // class javax/servlet/http/HttpServletRequest
       4: astore        4
       6: aload_2
       7: checkcast     #4                  // class javax/servlet/http/HttpServletResponse
      10: astore        5
      12: aload         4
      14: invokeinterface #5,  1            // InterfaceMethod javax/servlet/http/HttpServletRequest.getSession:()Ljavax/servlet/http/HttpSession;
      19: astore        6
      21: aload         4
      23: aload_0
      24: invokevirtual #6                  // Method getProtocol:()Lorg/jasig/cas/client/Protocol;
      27: invokevirtual #7                  // Method org/jasig/cas/client/Protocol.getArtifactParameterName:()Ljava/lang/String;
      30: invokestatic  #8                  // Method org/jasig/cas/client/util/CommonUtils.safeGetParameter:(Ljavax/servlet/http/HttpServletRequest;Ljava/lang/String;)Ljava/lang/String;
      33: astore        7
      35: aload         6
      37: ifnull        226
      40: aload         6
      42: ldc           #10                 // String _const_cas_assertion_
      44: invokeinterface #11,  2           // InterfaceMethod javax/servlet/http/HttpSession.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
      49: ifnonnull     226
      52: aload         7
      54: ifnull        226
      57: aload_0
      58: aload         4
      60: aload         5
      62: invokevirtual #12                 // Method constructServiceUrl:(Ljavax/servlet/http/HttpServletRequest;Ljavax/servlet/http/HttpServletResponse;)Ljava/lang/String;
      65: astore        8
      67: aload_0
      68: getfield      #13                 // Field logger:Lorg/slf4j/Logger;
      71: ldc           #14                 // String Attempting CAS ticket validation with service={} and ticket={}
      73: aload         8
      75: aload         7
      77: invokeinterface #15,  4           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V
      82: aload         4
      84: aload         8
      86: aload         7
      88: invokeinterface #16,  3           // InterfaceMethod javax/servlet/http/HttpServletRequest.login:(Ljava/lang/String;Ljava/lang/String;)V
      93: aload         4
      95: invokeinterface #17,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
     100: instanceof    #18                 // class org/jasig/cas/client/jaas/AssertionPrincipal
     103: ifeq          151
     106: aload         4
     108: invokeinterface #17,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
     113: checkcast     #18                 // class org/jasig/cas/client/jaas/AssertionPrincipal
     116: astore        9
     118: aload_0
     119: getfield      #13                 // Field logger:Lorg/slf4j/Logger;
     122: ldc           #19                 // String Installing CAS assertion into session.
     124: invokeinterface #20,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     129: aload         4
     131: invokeinterface #5,  1            // InterfaceMethod javax/servlet/http/HttpServletRequest.getSession:()Ljavax/servlet/http/HttpSession;
     136: ldc           #10                 // String _const_cas_assertion_
     138: aload         9
     140: invokevirtual #21                 // Method org/jasig/cas/client/jaas/AssertionPrincipal.getAssertion:()Lorg/jasig/cas/client/validation/Assertion;
     143: invokeinterface #22,  3           // InterfaceMethod javax/servlet/http/HttpSession.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     148: goto          172
     151: aload_0
     152: getfield      #13                 // Field logger:Lorg/slf4j/Logger;
     155: ldc           #23                 // String Aborting -- principal is not of type AssertionPrincipal
     157: invokeinterface #20,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     162: new           #24                 // class java/security/GeneralSecurityException
     165: dup
     166: ldc           #25                 // String JAAS authentication did not produce CAS AssertionPrincipal.
     168: invokespecial #26                 // Method java/security/GeneralSecurityException."<init>":(Ljava/lang/String;)V
     171: athrow
     172: goto          261
     175: astore        8
     177: aload_0
     178: getfield      #13                 // Field logger:Lorg/slf4j/Logger;
     181: ldc           #28                 // String JAAS authentication failed.
     183: invokeinterface #20,  2           // InterfaceMethod org/slf4j/Logger.debug:(Ljava/lang/String;)V
     188: aload         5
     190: sipush        403
     193: aload         8
     195: invokevirtual #29                 // Method javax/servlet/ServletException.getMessage:()Ljava/lang/String;
     198: invokeinterface #30,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendError:(ILjava/lang/String;)V
     203: goto          261
     206: astore        8
     208: aload         5
     210: sipush        403
     213: aload         8
     215: invokevirtual #31                 // Method java/security/GeneralSecurityException.getMessage:()Ljava/lang/String;
     218: invokeinterface #30,  3           // InterfaceMethod javax/servlet/http/HttpServletResponse.sendError:(ILjava/lang/String;)V
     223: goto          261
     226: aload         6
     228: ifnull        261
     231: aload         4
     233: invokeinterface #17,  1           // InterfaceMethod javax/servlet/http/HttpServletRequest.getUserPrincipal:()Ljava/security/Principal;
     238: ifnonnull     261
     241: aload_0
     242: getfield      #13                 // Field logger:Lorg/slf4j/Logger;
     245: ldc           #32                 // String User principal not found.  Removing CAS assertion from session to force re-authentication.
     247: invokeinterface #33,  2           // InterfaceMethod org/slf4j/Logger.info:(Ljava/lang/String;)V
     252: aload         6
     254: ldc           #10                 // String _const_cas_assertion_
     256: invokeinterface #34,  2           // InterfaceMethod javax/servlet/http/HttpSession.removeAttribute:(Ljava/lang/String;)V
     261: aload_3
     262: aload         4
     264: aload         5
     266: invokeinterface #35,  3           // InterfaceMethod javax/servlet/FilterChain.doFilter:(Ljavax/servlet/ServletRequest;Ljavax/servlet/ServletResponse;)V
     271: return
    Exception table:
       from    to  target type
          57   172   175   Class javax/servlet/ServletException
          57   172   206   Class java/security/GeneralSecurityException
}

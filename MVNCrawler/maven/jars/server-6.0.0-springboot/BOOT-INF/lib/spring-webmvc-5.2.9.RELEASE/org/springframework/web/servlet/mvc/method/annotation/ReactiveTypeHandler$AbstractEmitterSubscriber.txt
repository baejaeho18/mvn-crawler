Compiled from "ReactiveTypeHandler.java"
abstract class org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber implements org.reactivestreams.Subscriber<java.lang.Object>, java.lang.Runnable {
  private final org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter emitter;

  private final org.springframework.core.task.TaskExecutor taskExecutor;

  private org.reactivestreams.Subscription subscription;

  private final java.util.concurrent.atomic.AtomicReference<java.lang.Object> elementRef;

  private java.lang.Throwable error;

  private volatile boolean terminated;

  private final java.util.concurrent.atomic.AtomicLong executing;

  private volatile boolean done;

  protected org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber(org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter, org.springframework.core.task.TaskExecutor);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/concurrent/atomic/AtomicReference
       8: dup
       9: invokespecial #3                  // Method java/util/concurrent/atomic/AtomicReference."<init>":()V
      12: putfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      15: aload_0
      16: new           #5                  // class java/util/concurrent/atomic/AtomicLong
      19: dup
      20: invokespecial #6                  // Method java/util/concurrent/atomic/AtomicLong."<init>":()V
      23: putfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      26: aload_0
      27: aload_1
      28: putfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      31: aload_0
      32: aload_2
      33: putfield      #9                  // Field taskExecutor:Lorg/springframework/core/task/TaskExecutor;
      36: return

  public void connect(org.springframework.core.ReactiveAdapter, java.lang.Object);
    Code:
       0: aload_1
       1: aload_2
       2: invokevirtual #10                 // Method org/springframework/core/ReactiveAdapter.toPublisher:(Ljava/lang/Object;)Lorg/reactivestreams/Publisher;
       5: astore_3
       6: aload_3
       7: aload_0
       8: invokeinterface #11,  2           // InterfaceMethod org/reactivestreams/Publisher.subscribe:(Lorg/reactivestreams/Subscriber;)V
      13: return

  protected org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitter getEmitter();
    Code:
       0: aload_0
       1: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
       4: areturn

  public final void onSubscribe(org.reactivestreams.Subscription);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
       5: aload_0
       6: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
       9: aload_0
      10: invokedynamic #13,  0             // InvokeDynamic #0:run:(Lorg/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler$AbstractEmitterSubscriber;)Ljava/lang/Runnable;
      15: invokevirtual #14                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.onTimeout:(Ljava/lang/Runnable;)V
      18: aload_0
      19: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      22: aload_0
      23: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      26: dup
      27: invokevirtual #15                 // Method java/lang/Object.getClass:()Ljava/lang/Class;
      30: pop
      31: invokedynamic #16,  0             // InvokeDynamic #1:accept:(Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;)Ljava/util/function/Consumer;
      36: invokevirtual #17                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.onError:(Ljava/util/function/Consumer;)V
      39: aload_1
      40: lconst_1
      41: invokeinterface #18,  3           // InterfaceMethod org/reactivestreams/Subscription.request:(J)V
      46: return

  public final void onNext(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
       4: aload_1
       5: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
       8: aload_0
       9: invokespecial #20                 // Method trySchedule:()V
      12: return

  public final void onError(java.lang.Throwable);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #21                 // Field error:Ljava/lang/Throwable;
       5: aload_0
       6: iconst_1
       7: putfield      #22                 // Field terminated:Z
      10: aload_0
      11: invokespecial #20                 // Method trySchedule:()V
      14: return

  public final void onComplete();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #22                 // Field terminated:Z
       5: aload_0
       6: invokespecial #20                 // Method trySchedule:()V
       9: return

  private void trySchedule();
    Code:
       0: aload_0
       1: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
       4: invokevirtual #23                 // Method java/util/concurrent/atomic/AtomicLong.getAndIncrement:()J
       7: lconst_0
       8: lcmp
       9: ifne          16
      12: aload_0
      13: invokespecial #24                 // Method schedule:()V
      16: return

  private void schedule();
    Code:
       0: aload_0
       1: getfield      #9                  // Field taskExecutor:Lorg/springframework/core/task/TaskExecutor;
       4: aload_0
       5: invokeinterface #25,  2           // InterfaceMethod org/springframework/core/task/TaskExecutor.execute:(Ljava/lang/Runnable;)V
      10: goto          56
      13: astore_1
      14: aload_0
      15: invokespecial #27                 // Method terminate:()V
      18: aload_0
      19: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      22: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
      25: pop2
      26: aload_0
      27: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      30: aconst_null
      31: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      34: goto          56
      37: astore_2
      38: aload_0
      39: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
      42: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
      45: pop2
      46: aload_0
      47: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      50: aconst_null
      51: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      54: aload_2
      55: athrow
      56: return
    Exception table:
       from    to  target type
           0    10    13   Class java/lang/Throwable
          14    18    37   any

  public void run();
    Code:
       0: aload_0
       1: getfield      #29                 // Field done:Z
       4: ifeq          16
       7: aload_0
       8: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      11: aconst_null
      12: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      15: return
      16: aload_0
      17: getfield      #22                 // Field terminated:Z
      20: istore_1
      21: aload_0
      22: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      25: invokevirtual #30                 // Method java/util/concurrent/atomic/AtomicReference.get:()Ljava/lang/Object;
      28: astore_2
      29: aload_2
      30: ifnull        132
      33: aload_0
      34: getfield      #4                  // Field elementRef:Ljava/util/concurrent/atomic/AtomicReference;
      37: aconst_null
      38: invokevirtual #19                 // Method java/util/concurrent/atomic/AtomicReference.lazySet:(Ljava/lang/Object;)V
      41: aload_0
      42: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      45: ifnull        52
      48: iconst_1
      49: goto          53
      52: iconst_0
      53: ldc           #31                 // String No subscription
      55: invokestatic  #32                 // Method org/springframework/util/Assert.state:(ZLjava/lang/String;)V
      58: aload_0
      59: aload_2
      60: invokevirtual #33                 // Method send:(Ljava/lang/Object;)V
      63: aload_0
      64: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      67: lconst_1
      68: invokeinterface #18,  3           // InterfaceMethod org/reactivestreams/Subscription.request:(J)V
      73: goto          132
      76: astore_3
      77: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      80: invokeinterface #35,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
      85: ifeq          127
      88: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      91: new           #36                 // class java/lang/StringBuilder
      94: dup
      95: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      98: ldc           #38                 // String Send for
     100: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     103: aload_0
     104: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     107: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     110: ldc           #41                 // String  failed:
     112: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     115: aload_3
     116: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     119: invokevirtual #42                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     122: invokeinterface #43,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     127: aload_0
     128: invokespecial #27                 // Method terminate:()V
     131: return
     132: iload_1
     133: ifeq          270
     136: aload_0
     137: iconst_1
     138: putfield      #29                 // Field done:Z
     141: aload_0
     142: getfield      #21                 // Field error:Ljava/lang/Throwable;
     145: astore_3
     146: aload_0
     147: aconst_null
     148: putfield      #21                 // Field error:Ljava/lang/Throwable;
     151: aload_3
     152: ifnull        216
     155: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     158: invokeinterface #35,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
     163: ifeq          205
     166: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     169: new           #36                 // class java/lang/StringBuilder
     172: dup
     173: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     176: ldc           #44                 // String Publisher for
     178: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     181: aload_0
     182: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     185: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     188: ldc           #41                 // String  failed:
     190: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     193: aload_3
     194: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     197: invokevirtual #42                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     200: invokeinterface #43,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     205: aload_0
     206: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     209: aload_3
     210: invokevirtual #45                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.completeWithError:(Ljava/lang/Throwable;)V
     213: goto          269
     216: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     219: invokeinterface #35,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
     224: ifeq          262
     227: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
     230: new           #36                 // class java/lang/StringBuilder
     233: dup
     234: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
     237: ldc           #44                 // String Publisher for
     239: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     242: aload_0
     243: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     246: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     249: ldc           #46                 // String  completed
     251: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     254: invokevirtual #42                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     257: invokeinterface #43,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
     262: aload_0
     263: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
     266: invokevirtual #47                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.complete:()V
     269: return
     270: aload_0
     271: getfield      #7                  // Field executing:Ljava/util/concurrent/atomic/AtomicLong;
     274: invokevirtual #28                 // Method java/util/concurrent/atomic/AtomicLong.decrementAndGet:()J
     277: lconst_0
     278: lcmp
     279: ifeq          286
     282: aload_0
     283: invokespecial #24                 // Method schedule:()V
     286: return
    Exception table:
       from    to  target type
          58    73    76   Class java/lang/Throwable

  protected abstract void send(java.lang.Object) throws java.io.IOException;

  private void terminate();
    Code:
       0: aload_0
       1: iconst_1
       2: putfield      #29                 // Field done:Z
       5: aload_0
       6: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
       9: ifnull        21
      12: aload_0
      13: getfield      #12                 // Field subscription:Lorg/reactivestreams/Subscription;
      16: invokeinterface #48,  1           // InterfaceMethod org/reactivestreams/Subscription.cancel:()V
      21: return

  private void lambda$onSubscribe$0();
    Code:
       0: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
       3: invokeinterface #35,  1           // InterfaceMethod org/apache/commons/logging/Log.isTraceEnabled:()Z
       8: ifeq          41
      11: invokestatic  #34                 // Method org/springframework/web/servlet/mvc/method/annotation/ReactiveTypeHandler.access$000:()Lorg/apache/commons/logging/Log;
      14: new           #36                 // class java/lang/StringBuilder
      17: dup
      18: invokespecial #37                 // Method java/lang/StringBuilder."<init>":()V
      21: ldc           #49                 // String Connection timeout for
      23: invokevirtual #39                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      26: aload_0
      27: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      30: invokevirtual #40                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
      33: invokevirtual #42                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      36: invokeinterface #43,  2           // InterfaceMethod org/apache/commons/logging/Log.trace:(Ljava/lang/Object;)V
      41: aload_0
      42: invokespecial #27                 // Method terminate:()V
      45: aload_0
      46: getfield      #8                  // Field emitter:Lorg/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter;
      49: invokevirtual #47                 // Method org/springframework/web/servlet/mvc/method/annotation/ResponseBodyEmitter.complete:()V
      52: return
}

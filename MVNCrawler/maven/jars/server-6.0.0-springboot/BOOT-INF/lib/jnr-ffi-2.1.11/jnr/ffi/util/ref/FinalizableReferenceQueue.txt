Compiled from "FinalizableReferenceQueue.java"
public class jnr.ffi.util.ref.FinalizableReferenceQueue {
  private static final java.util.logging.Logger logger;

  private static final java.lang.String FINALIZER_CLASS_NAME;

  private static final java.lang.reflect.Method startFinalizer;

  private static final java.util.Map<jnr.ffi.util.ref.FinalizableReferenceQueue, java.lang.Boolean> finalizerQueues;

  final java.lang.ref.ReferenceQueue<java.lang.Object> queue;

  final boolean threadStarted;

  public jnr.ffi.util.ref.FinalizableReferenceQueue();
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: iconst_0
       5: istore_2
       6: getstatic     #3                  // Field startFinalizer:Ljava/lang/reflect/Method;
       9: aconst_null
      10: iconst_2
      11: anewarray     #4                  // class java/lang/Object
      14: dup
      15: iconst_0
      16: ldc           #5                  // class jnr/ffi/util/ref/FinalizableReference
      18: aastore
      19: dup
      20: iconst_1
      21: aload_0
      22: aastore
      23: invokevirtual #6                  // Method java/lang/reflect/Method.invoke:(Ljava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;
      26: checkcast     #7                  // class java/lang/ref/ReferenceQueue
      29: astore_1
      30: iconst_1
      31: istore_2
      32: goto          66
      35: astore_3
      36: new           #9                  // class java/lang/AssertionError
      39: dup
      40: aload_3
      41: invokespecial #10                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
      44: athrow
      45: astore_3
      46: getstatic     #1                  // Field logger:Ljava/util/logging/Logger;
      49: getstatic     #12                 // Field java/util/logging/Level.INFO:Ljava/util/logging/Level;
      52: ldc           #13                 // String Failed to start reference finalizer thread. Reference cleanup will only occur when new references are created.
      54: aload_3
      55: invokevirtual #14                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      58: new           #7                  // class java/lang/ref/ReferenceQueue
      61: dup
      62: invokespecial #15                 // Method java/lang/ref/ReferenceQueue."<init>":()V
      65: astore_1
      66: aload_0
      67: aload_1
      68: putfield      #16                 // Field queue:Ljava/lang/ref/ReferenceQueue;
      71: aload_0
      72: iload_2
      73: putfield      #17                 // Field threadStarted:Z
      76: getstatic     #18                 // Field finalizerQueues:Ljava/util/Map;
      79: aload_0
      80: getstatic     #19                 // Field java/lang/Boolean.TRUE:Ljava/lang/Boolean;
      83: invokeinterface #20,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      88: pop
      89: return
    Exception table:
       from    to  target type
           6    32    35   Class java/lang/IllegalAccessException
           6    32    45   Class java/lang/Throwable

  void cleanUp();
    Code:
       0: aload_0
       1: getfield      #17                 // Field threadStarted:Z
       4: ifne          11
       7: aload_0
       8: invokespecial #21                 // Method pollReferenceQueue:()V
      11: return

  private void pollReferenceQueue();
    Code:
       0: aload_0
       1: getfield      #16                 // Field queue:Ljava/lang/ref/ReferenceQueue;
       4: invokevirtual #22                 // Method java/lang/ref/ReferenceQueue.poll:()Ljava/lang/ref/Reference;
       7: dup
       8: astore_1
       9: ifnull        44
      12: aload_1
      13: invokevirtual #23                 // Method java/lang/ref/Reference.clear:()V
      16: aload_1
      17: checkcast     #5                  // class jnr/ffi/util/ref/FinalizableReference
      20: invokeinterface #24,  1           // InterfaceMethod jnr/ffi/util/ref/FinalizableReference.finalizeReferent:()V
      25: goto          0
      28: astore_2
      29: getstatic     #1                  // Field logger:Ljava/util/logging/Logger;
      32: getstatic     #25                 // Field java/util/logging/Level.SEVERE:Ljava/util/logging/Level;
      35: ldc           #26                 // String Error cleaning up after reference.
      37: aload_2
      38: invokevirtual #14                 // Method java/util/logging/Logger.log:(Ljava/util/logging/Level;Ljava/lang/String;Ljava/lang/Throwable;)V
      41: goto          0
      44: return
    Exception table:
       from    to  target type
          16    25    28   Class java/lang/Throwable

  private static java.lang.Class<?> loadFinalizer(jnr.ffi.util.ref.FinalizableReferenceQueue$FinalizerLoader...);
    Code:
       0: aload_0
       1: astore_1
       2: aload_1
       3: arraylength
       4: istore_2
       5: iconst_0
       6: istore_3
       7: iload_3
       8: iload_2
       9: if_icmpge     40
      12: aload_1
      13: iload_3
      14: aaload
      15: astore        4
      17: aload         4
      19: invokeinterface #27,  1           // InterfaceMethod jnr/ffi/util/ref/FinalizableReferenceQueue$FinalizerLoader.loadFinalizer:()Ljava/lang/Class;
      24: astore        5
      26: aload         5
      28: ifnull        34
      31: aload         5
      33: areturn
      34: iinc          3, 1
      37: goto          7
      40: new           #9                  // class java/lang/AssertionError
      43: dup
      44: invokespecial #28                 // Method java/lang/AssertionError."<init>":()V
      47: athrow

  static java.lang.reflect.Method getStartFinalizer(java.lang.Class<?>);
    Code:
       0: aload_0
       1: ldc           #29                 // String startFinalizer
       3: iconst_2
       4: anewarray     #30                 // class java/lang/Class
       7: dup
       8: iconst_0
       9: ldc           #30                 // class java/lang/Class
      11: aastore
      12: dup
      13: iconst_1
      14: ldc           #4                  // class java/lang/Object
      16: aastore
      17: invokevirtual #31                 // Method java/lang/Class.getMethod:(Ljava/lang/String;[Ljava/lang/Class;)Ljava/lang/reflect/Method;
      20: areturn
      21: astore_1
      22: new           #9                  // class java/lang/AssertionError
      25: dup
      26: aload_1
      27: invokespecial #10                 // Method java/lang/AssertionError."<init>":(Ljava/lang/Object;)V
      30: athrow
    Exception table:
       from    to  target type
           0    20    21   Class java/lang/NoSuchMethodException

  public static void cleanUpAll();
    Code:
       0: getstatic     #18                 // Field finalizerQueues:Ljava/util/Map;
       3: invokeinterface #33,  1           // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
       8: invokeinterface #34,  1           // InterfaceMethod java/util/Set.toArray:()[Ljava/lang/Object;
      13: astore_0
      14: aload_0
      15: arraylength
      16: istore_1
      17: iconst_0
      18: istore_2
      19: iload_2
      20: iload_1
      21: if_icmpge     41
      24: aload_0
      25: iload_2
      26: aaload
      27: astore_3
      28: aload_3
      29: checkcast     #35                 // class jnr/ffi/util/ref/FinalizableReferenceQueue
      32: invokevirtual #36                 // Method cleanUp:()V
      35: iinc          2, 1
      38: goto          19
      41: goto          45
      44: astore_0
      45: return
    Exception table:
       from    to  target type
           0    41    44   Class java/lang/Throwable

  static java.util.logging.Logger access$000();
    Code:
       0: getstatic     #1                  // Field logger:Ljava/util/logging/Logger;
       3: areturn

  static {};
    Code:
       0: ldc           #35                 // class jnr/ffi/util/ref/FinalizableReferenceQueue
       2: invokevirtual #37                 // Method java/lang/Class.getName:()Ljava/lang/String;
       5: invokestatic  #38                 // Method java/util/logging/Logger.getLogger:(Ljava/lang/String;)Ljava/util/logging/Logger;
       8: putstatic     #1                  // Field logger:Ljava/util/logging/Logger;
      11: iconst_3
      12: anewarray     #39                 // class jnr/ffi/util/ref/FinalizableReferenceQueue$FinalizerLoader
      15: dup
      16: iconst_0
      17: new           #40                 // class jnr/ffi/util/ref/FinalizableReferenceQueue$SystemLoader
      20: dup
      21: invokespecial #41                 // Method jnr/ffi/util/ref/FinalizableReferenceQueue$SystemLoader."<init>":()V
      24: aastore
      25: dup
      26: iconst_1
      27: new           #42                 // class jnr/ffi/util/ref/FinalizableReferenceQueue$DecoupledLoader
      30: dup
      31: invokespecial #43                 // Method jnr/ffi/util/ref/FinalizableReferenceQueue$DecoupledLoader."<init>":()V
      34: aastore
      35: dup
      36: iconst_2
      37: new           #44                 // class jnr/ffi/util/ref/FinalizableReferenceQueue$DirectLoader
      40: dup
      41: invokespecial #45                 // Method jnr/ffi/util/ref/FinalizableReferenceQueue$DirectLoader."<init>":()V
      44: aastore
      45: invokestatic  #46                 // Method loadFinalizer:([Ljnr/ffi/util/ref/FinalizableReferenceQueue$FinalizerLoader;)Ljava/lang/Class;
      48: astore_0
      49: aload_0
      50: invokestatic  #47                 // Method getStartFinalizer:(Ljava/lang/Class;)Ljava/lang/reflect/Method;
      53: putstatic     #3                  // Field startFinalizer:Ljava/lang/reflect/Method;
      56: new           #48                 // class java/util/WeakHashMap
      59: dup
      60: invokespecial #49                 // Method java/util/WeakHashMap."<init>":()V
      63: invokestatic  #50                 // Method java/util/Collections.synchronizedMap:(Ljava/util/Map;)Ljava/util/Map;
      66: putstatic     #18                 // Field finalizerQueues:Ljava/util/Map;
      69: return
}

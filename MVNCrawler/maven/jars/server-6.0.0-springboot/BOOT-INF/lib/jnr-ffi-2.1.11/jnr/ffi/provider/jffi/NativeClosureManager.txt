Compiled from "NativeClosureManager.java"
final class jnr.ffi.provider.jffi.NativeClosureManager implements jnr.ffi.provider.ClosureManager {
  private volatile java.util.Map<java.lang.Class<?>, jnr.ffi.provider.jffi.NativeClosureFactory> factories;

  private volatile java.util.Map<java.lang.ClassLoader, jnr.ffi.provider.jffi.AsmClassLoader> asmClassLoaders;

  private final jnr.ffi.Runtime runtime;

  private final jnr.ffi.mapper.SignatureTypeMapper typeMapper;

  jnr.ffi.provider.jffi.NativeClosureManager(jnr.ffi.Runtime, jnr.ffi.mapper.SignatureTypeMapper);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #2                  // class java/util/IdentityHashMap
       8: dup
       9: invokespecial #3                  // Method java/util/IdentityHashMap."<init>":()V
      12: putfield      #4                  // Field factories:Ljava/util/Map;
      15: aload_0
      16: new           #2                  // class java/util/IdentityHashMap
      19: dup
      20: invokespecial #3                  // Method java/util/IdentityHashMap."<init>":()V
      23: putfield      #5                  // Field asmClassLoaders:Ljava/util/Map;
      26: aload_0
      27: aload_1
      28: putfield      #6                  // Field runtime:Ljnr/ffi/Runtime;
      31: aload_0
      32: new           #7                  // class jnr/ffi/mapper/CompositeTypeMapper
      35: dup
      36: iconst_2
      37: anewarray     #8                  // class jnr/ffi/mapper/SignatureTypeMapper
      40: dup
      41: iconst_0
      42: aload_2
      43: aastore
      44: dup
      45: iconst_1
      46: new           #9                  // class jnr/ffi/mapper/CachingTypeMapper
      49: dup
      50: new           #10                 // class jnr/ffi/provider/jffi/ClosureTypeMapper
      53: dup
      54: invokespecial #11                 // Method jnr/ffi/provider/jffi/ClosureTypeMapper."<init>":()V
      57: invokespecial #12                 // Method jnr/ffi/mapper/CachingTypeMapper."<init>":(Ljnr/ffi/mapper/SignatureTypeMapper;)V
      60: aastore
      61: invokespecial #13                 // Method jnr/ffi/mapper/CompositeTypeMapper."<init>":([Ljnr/ffi/mapper/SignatureTypeMapper;)V
      64: putfield      #14                 // Field typeMapper:Ljnr/ffi/mapper/SignatureTypeMapper;
      67: return

  <T> jnr.ffi.provider.jffi.NativeClosureFactory<T> getClosureFactory(java.lang.Class<T>);
    Code:
       0: aload_0
       1: getfield      #4                  // Field factories:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #15,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #16                 // class jnr/ffi/provider/jffi/NativeClosureFactory
      13: astore_2
      14: aload_2
      15: ifnull        20
      18: aload_2
      19: areturn
      20: aload_0
      21: getfield      #5                  // Field asmClassLoaders:Ljava/util/Map;
      24: aload_1
      25: invokevirtual #17                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      28: invokeinterface #15,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      33: checkcast     #18                 // class jnr/ffi/provider/jffi/AsmClassLoader
      36: astore_3
      37: aload_3
      38: ifnonnull     68
      41: new           #18                 // class jnr/ffi/provider/jffi/AsmClassLoader
      44: dup
      45: aload_1
      46: invokevirtual #17                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      49: invokespecial #19                 // Method jnr/ffi/provider/jffi/AsmClassLoader."<init>":(Ljava/lang/ClassLoader;)V
      52: astore_3
      53: aload_0
      54: getfield      #5                  // Field asmClassLoaders:Ljava/util/Map;
      57: aload_1
      58: invokevirtual #17                 // Method java/lang/Class.getClassLoader:()Ljava/lang/ClassLoader;
      61: aload_3
      62: invokeinterface #20,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      67: pop
      68: aload_0
      69: aload_1
      70: aload_3
      71: invokevirtual #21                 // Method initClosureFactory:(Ljava/lang/Class;Ljnr/ffi/provider/jffi/AsmClassLoader;)Ljnr/ffi/provider/jffi/NativeClosureFactory;
      74: areturn

  public <T> T newClosure(java.lang.Class<? extends T>, T);
    Code:
       0: aload_0
       1: getfield      #4                  // Field factories:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #15,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #16                 // class jnr/ffi/provider/jffi/NativeClosureFactory
      13: astore_3
      14: aload_3
      15: ifnull        18
      18: aconst_null
      19: areturn

  public final <T> jnr.ffi.Pointer getClosurePointer(java.lang.Class<? extends T>, T);
    Code:
       0: aload_0
       1: aload_1
       2: invokevirtual #22                 // Method getClosureFactory:(Ljava/lang/Class;)Ljnr/ffi/provider/jffi/NativeClosureFactory;
       5: aload_2
       6: invokevirtual #23                 // Method jnr/ffi/provider/jffi/NativeClosureFactory.getClosureReference:(Ljava/lang/Object;)Ljnr/ffi/provider/jffi/NativeClosureFactory$ClosureReference;
       9: invokevirtual #24                 // Method jnr/ffi/provider/jffi/NativeClosureFactory$ClosureReference.getPointer:()Ljnr/ffi/Pointer;
      12: areturn

  synchronized <T> jnr.ffi.provider.jffi.NativeClosureFactory<T> initClosureFactory(java.lang.Class<T>, jnr.ffi.provider.jffi.AsmClassLoader);
    Code:
       0: aload_0
       1: getfield      #4                  // Field factories:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #15,  2           // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      10: checkcast     #16                 // class jnr/ffi/provider/jffi/NativeClosureFactory
      13: astore_3
      14: aload_3
      15: ifnull        20
      18: aload_3
      19: areturn
      20: aload_0
      21: getfield      #6                  // Field runtime:Ljnr/ffi/Runtime;
      24: aload_1
      25: aload_0
      26: getfield      #14                 // Field typeMapper:Ljnr/ffi/mapper/SignatureTypeMapper;
      29: aload_2
      30: invokestatic  #25                 // Method jnr/ffi/provider/jffi/NativeClosureFactory.newClosureFactory:(Ljnr/ffi/Runtime;Ljava/lang/Class;Ljnr/ffi/mapper/SignatureTypeMapper;Ljnr/ffi/provider/jffi/AsmClassLoader;)Ljnr/ffi/provider/jffi/NativeClosureFactory;
      33: astore_3
      34: new           #2                  // class java/util/IdentityHashMap
      37: dup
      38: invokespecial #3                  // Method java/util/IdentityHashMap."<init>":()V
      41: astore        4
      43: aload         4
      45: aload_0
      46: getfield      #4                  // Field factories:Ljava/util/Map;
      49: invokeinterface #26,  2           // InterfaceMethod java/util/Map.putAll:(Ljava/util/Map;)V
      54: aload         4
      56: aload_1
      57: aload_3
      58: invokeinterface #20,  3           // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      63: pop
      64: aload_0
      65: aload         4
      67: putfield      #4                  // Field factories:Ljava/util/Map;
      70: aload_3
      71: areturn

  <T> jnr.ffi.mapper.ToNativeConverter<T, jnr.ffi.Pointer> newClosureSite(java.lang.Class<T>);
    Code:
       0: new           #27                 // class jnr/ffi/provider/jffi/NativeClosureManager$ClosureSite
       3: dup
       4: aload_0
       5: aload_1
       6: invokevirtual #22                 // Method getClosureFactory:(Ljava/lang/Class;)Ljnr/ffi/provider/jffi/NativeClosureFactory;
       9: aconst_null
      10: invokespecial #28                 // Method jnr/ffi/provider/jffi/NativeClosureManager$ClosureSite."<init>":(Ljnr/ffi/provider/jffi/NativeClosureFactory;Ljnr/ffi/provider/jffi/NativeClosureManager$1;)V
      13: areturn
}

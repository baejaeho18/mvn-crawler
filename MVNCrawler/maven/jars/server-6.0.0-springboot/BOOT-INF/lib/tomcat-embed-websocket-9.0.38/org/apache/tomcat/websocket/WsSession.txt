Compiled from "WsSession.java"
public class org.apache.tomcat.websocket.WsSession implements javax.websocket.Session {
  private static final byte[] ELLIPSIS_BYTES;

  private static final int ELLIPSIS_BYTES_LEN;

  private static final org.apache.tomcat.util.res.StringManager sm;

  private static java.util.concurrent.atomic.AtomicLong ids;

  private final org.apache.juli.logging.Log log;

  private final javax.websocket.Endpoint localEndpoint;

  private final org.apache.tomcat.websocket.WsRemoteEndpointImplBase wsRemoteEndpoint;

  private final javax.websocket.RemoteEndpoint$Async remoteEndpointAsync;

  private final javax.websocket.RemoteEndpoint$Basic remoteEndpointBasic;

  private final java.lang.ClassLoader applicationClassLoader;

  private final org.apache.tomcat.websocket.WsWebSocketContainer webSocketContainer;

  private final java.net.URI requestUri;

  private final java.util.Map<java.lang.String, java.util.List<java.lang.String>> requestParameterMap;

  private final java.lang.String queryString;

  private final java.security.Principal userPrincipal;

  private final javax.websocket.EndpointConfig endpointConfig;

  private final java.util.List<javax.websocket.Extension> negotiatedExtensions;

  private final java.lang.String subProtocol;

  private final java.util.Map<java.lang.String, java.lang.String> pathParameters;

  private final boolean secure;

  private final java.lang.String httpSessionId;

  private final java.lang.String id;

  private volatile javax.websocket.MessageHandler textMessageHandler;

  private volatile javax.websocket.MessageHandler binaryMessageHandler;

  private volatile javax.websocket.MessageHandler$Whole<javax.websocket.PongMessage> pongMessageHandler;

  private volatile org.apache.tomcat.websocket.WsSession$State state;

  private final java.lang.Object stateLock;

  private final java.util.Map<java.lang.String, java.lang.Object> userProperties;

  private volatile int maxBinaryMessageBufferSize;

  private volatile int maxTextMessageBufferSize;

  private volatile long maxIdleTimeout;

  private volatile long lastActiveRead;

  private volatile long lastActiveWrite;

  private java.util.Map<org.apache.tomcat.websocket.FutureToSendHandler, org.apache.tomcat.websocket.FutureToSendHandler> futures;

  private org.apache.tomcat.websocket.WsFrameBase wsFrame;

  public org.apache.tomcat.websocket.WsSession(javax.websocket.Endpoint, org.apache.tomcat.websocket.WsRemoteEndpointImplBase, org.apache.tomcat.websocket.WsWebSocketContainer, java.net.URI, java.util.Map<java.lang.String, java.util.List<java.lang.String>>, java.lang.String, java.security.Principal, java.lang.String, java.util.List<javax.websocket.Extension>, java.lang.String, java.util.Map<java.lang.String, java.lang.String>, boolean, javax.websocket.EndpointConfig) throws javax.websocket.DeploymentException;
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc           #2                  // class org/apache/tomcat/websocket/WsSession
       7: invokestatic  #3                  // Method org/apache/juli/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/juli/logging/Log;
      10: putfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
      13: aload_0
      14: aconst_null
      15: putfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      18: aload_0
      19: aconst_null
      20: putfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      23: aload_0
      24: aconst_null
      25: putfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
      28: aload_0
      29: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
      32: putfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      35: aload_0
      36: new           #10                 // class java/lang/Object
      39: dup
      40: invokespecial #1                  // Method java/lang/Object."<init>":()V
      43: putfield      #11                 // Field stateLock:Ljava/lang/Object;
      46: aload_0
      47: new           #12                 // class java/util/concurrent/ConcurrentHashMap
      50: dup
      51: invokespecial #13                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      54: putfield      #14                 // Field userProperties:Ljava/util/Map;
      57: aload_0
      58: getstatic     #15                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
      61: putfield      #16                 // Field maxBinaryMessageBufferSize:I
      64: aload_0
      65: getstatic     #15                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
      68: putfield      #17                 // Field maxTextMessageBufferSize:I
      71: aload_0
      72: lconst_0
      73: putfield      #18                 // Field maxIdleTimeout:J
      76: aload_0
      77: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
      80: putfield      #20                 // Field lastActiveRead:J
      83: aload_0
      84: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
      87: putfield      #21                 // Field lastActiveWrite:J
      90: aload_0
      91: new           #12                 // class java/util/concurrent/ConcurrentHashMap
      94: dup
      95: invokespecial #13                 // Method java/util/concurrent/ConcurrentHashMap."<init>":()V
      98: putfield      #22                 // Field futures:Ljava/util/Map;
     101: aload_0
     102: aload_1
     103: putfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
     106: aload_0
     107: aload_2
     108: putfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
     111: aload_0
     112: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
     115: aload_0
     116: invokevirtual #25                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.setSession:(Lorg/apache/tomcat/websocket/WsSession;)V
     119: aload_0
     120: new           #26                 // class org/apache/tomcat/websocket/WsRemoteEndpointAsync
     123: dup
     124: aload_2
     125: invokespecial #27                 // Method org/apache/tomcat/websocket/WsRemoteEndpointAsync."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
     128: putfield      #28                 // Field remoteEndpointAsync:Ljavax/websocket/RemoteEndpoint$Async;
     131: aload_0
     132: new           #29                 // class org/apache/tomcat/websocket/WsRemoteEndpointBasic
     135: dup
     136: aload_2
     137: invokespecial #30                 // Method org/apache/tomcat/websocket/WsRemoteEndpointBasic."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
     140: putfield      #31                 // Field remoteEndpointBasic:Ljavax/websocket/RemoteEndpoint$Basic;
     143: aload_0
     144: aload_3
     145: putfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     148: aload_0
     149: invokestatic  #33                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
     152: invokevirtual #34                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
     155: putfield      #35                 // Field applicationClassLoader:Ljava/lang/ClassLoader;
     158: aload_2
     159: aload_3
     160: invokevirtual #36                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getDefaultAsyncSendTimeout:()J
     163: invokevirtual #37                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.setSendTimeout:(J)V
     166: aload_0
     167: aload_0
     168: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     171: invokevirtual #38                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getDefaultMaxBinaryMessageBufferSize:()I
     174: putfield      #16                 // Field maxBinaryMessageBufferSize:I
     177: aload_0
     178: aload_0
     179: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     182: invokevirtual #39                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getDefaultMaxTextMessageBufferSize:()I
     185: putfield      #17                 // Field maxTextMessageBufferSize:I
     188: aload_0
     189: aload_0
     190: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     193: invokevirtual #40                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getDefaultMaxSessionIdleTimeout:()J
     196: putfield      #18                 // Field maxIdleTimeout:J
     199: aload_0
     200: aload         4
     202: putfield      #41                 // Field requestUri:Ljava/net/URI;
     205: aload         5
     207: ifnonnull     220
     210: aload_0
     211: invokestatic  #42                 // Method java/util/Collections.emptyMap:()Ljava/util/Map;
     214: putfield      #43                 // Field requestParameterMap:Ljava/util/Map;
     217: goto          226
     220: aload_0
     221: aload         5
     223: putfield      #43                 // Field requestParameterMap:Ljava/util/Map;
     226: aload_0
     227: aload         6
     229: putfield      #44                 // Field queryString:Ljava/lang/String;
     232: aload_0
     233: aload         7
     235: putfield      #45                 // Field userPrincipal:Ljava/security/Principal;
     238: aload_0
     239: aload         8
     241: putfield      #46                 // Field httpSessionId:Ljava/lang/String;
     244: aload_0
     245: aload         9
     247: putfield      #47                 // Field negotiatedExtensions:Ljava/util/List;
     250: aload         10
     252: ifnonnull     264
     255: aload_0
     256: ldc           #48                 // String
     258: putfield      #49                 // Field subProtocol:Ljava/lang/String;
     261: goto          270
     264: aload_0
     265: aload         10
     267: putfield      #49                 // Field subProtocol:Ljava/lang/String;
     270: aload_0
     271: aload         11
     273: putfield      #50                 // Field pathParameters:Ljava/util/Map;
     276: aload_0
     277: iload         12
     279: putfield      #51                 // Field secure:Z
     282: aload_0
     283: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
     286: aload         13
     288: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.setEncoders:(Ljavax/websocket/EndpointConfig;)V
     291: aload_0
     292: aload         13
     294: putfield      #53                 // Field endpointConfig:Ljavax/websocket/EndpointConfig;
     297: aload_0
     298: getfield      #14                 // Field userProperties:Ljava/util/Map;
     301: aload         13
     303: invokeinterface #54,  1           // InterfaceMethod javax/websocket/EndpointConfig.getUserProperties:()Ljava/util/Map;
     308: invokeinterface #55,  2           // InterfaceMethod java/util/Map.putAll:(Ljava/util/Map;)V
     313: aload_0
     314: getstatic     #56                 // Field ids:Ljava/util/concurrent/atomic/AtomicLong;
     317: invokevirtual #57                 // Method java/util/concurrent/atomic/AtomicLong.getAndIncrement:()J
     320: invokestatic  #58                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     323: putfield      #59                 // Field id:Ljava/lang/String;
     326: aload_0
     327: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     330: invokevirtual #60                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getInstanceManager:()Lorg/apache/tomcat/InstanceManager;
     333: astore        14
     335: aload         14
     337: ifnonnull     349
     340: aload_0
     341: getfield      #35                 // Field applicationClassLoader:Ljava/lang/ClassLoader;
     344: invokestatic  #61                 // Method org/apache/tomcat/InstanceManagerBindings.get:(Ljava/lang/ClassLoader;)Lorg/apache/tomcat/InstanceManager;
     347: astore        14
     349: aload         14
     351: ifnull        385
     354: aload         14
     356: aload_1
     357: invokeinterface #62,  2           // InterfaceMethod org/apache/tomcat/InstanceManager.newInstance:(Ljava/lang/Object;)V
     362: goto          385
     365: astore        15
     367: new           #64                 // class javax/websocket/DeploymentException
     370: dup
     371: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     374: ldc           #66                 // String wsSession.instanceNew
     376: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     379: aload         15
     381: invokespecial #68                 // Method javax/websocket/DeploymentException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     384: athrow
     385: aload_0
     386: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     389: invokeinterface #69,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     394: ifeq          425
     397: aload_0
     398: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     401: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     404: ldc           #70                 // String wsSession.created
     406: iconst_1
     407: anewarray     #10                 // class java/lang/Object
     410: dup
     411: iconst_0
     412: aload_0
     413: getfield      #59                 // Field id:Ljava/lang/String;
     416: aastore
     417: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     420: invokeinterface #72,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     425: return
    Exception table:
       from    to  target type
         354   362   365   Class java/lang/Exception

  public javax.websocket.WebSocketContainer getContainer();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
       8: areturn

  public void addMessageHandler(javax.websocket.MessageHandler);
    Code:
       0: aload_1
       1: invokestatic  #74                 // Method org/apache/tomcat/websocket/Util.getMessageType:(Ljavax/websocket/MessageHandler;)Ljava/lang/Class;
       4: astore_2
       5: aload_0
       6: aload_2
       7: aload_1
       8: invokespecial #75                 // Method doAddMessageHandler:(Ljava/lang/Class;Ljavax/websocket/MessageHandler;)V
      11: return

  public <T> void addMessageHandler(java.lang.Class<T>, javax.websocket.MessageHandler$Partial<T>) throws java.lang.IllegalStateException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #75                 // Method doAddMessageHandler:(Ljava/lang/Class;Ljavax/websocket/MessageHandler;)V
       6: return

  public <T> void addMessageHandler(java.lang.Class<T>, javax.websocket.MessageHandler$Whole<T>) throws java.lang.IllegalStateException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: invokespecial #75                 // Method doAddMessageHandler:(Ljava/lang/Class;Ljavax/websocket/MessageHandler;)V
       6: return

  private void doAddMessageHandler(java.lang.Class<?>, javax.websocket.MessageHandler);
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_1
       5: aload_2
       6: aload_0
       7: getfield      #53                 // Field endpointConfig:Ljavax/websocket/EndpointConfig;
      10: aload_0
      11: invokestatic  #76                 // Method org/apache/tomcat/websocket/Util.getMessageHandlers:(Ljava/lang/Class;Ljavax/websocket/MessageHandler;Ljavax/websocket/EndpointConfig;Ljavax/websocket/Session;)Ljava/util/Set;
      14: astore_3
      15: aload_3
      16: invokeinterface #77,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
      21: astore        4
      23: aload         4
      25: invokeinterface #78,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
      30: ifeq          255
      33: aload         4
      35: invokeinterface #79,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      40: checkcast     #80                 // class org/apache/tomcat/websocket/MessageHandlerResult
      43: astore        5
      45: getstatic     #81                 // Field org/apache/tomcat/websocket/WsSession$1.$SwitchMap$org$apache$tomcat$websocket$MessageHandlerResultType:[I
      48: aload         5
      50: invokevirtual #82                 // Method org/apache/tomcat/websocket/MessageHandlerResult.getType:()Lorg/apache/tomcat/websocket/MessageHandlerResultType;
      53: invokevirtual #83                 // Method org/apache/tomcat/websocket/MessageHandlerResultType.ordinal:()I
      56: iaload
      57: tableswitch   { // 1 to 3
                     1: 84
                     2: 119
                     3: 154
               default: 220
          }
      84: aload_0
      85: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      88: ifnull        107
      91: new           #84                 // class java/lang/IllegalStateException
      94: dup
      95: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      98: ldc           #85                 // String wsSession.duplicateHandlerText
     100: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     103: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     106: athrow
     107: aload_0
     108: aload         5
     110: invokevirtual #87                 // Method org/apache/tomcat/websocket/MessageHandlerResult.getHandler:()Ljavax/websocket/MessageHandler;
     113: putfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
     116: goto          252
     119: aload_0
     120: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
     123: ifnull        142
     126: new           #84                 // class java/lang/IllegalStateException
     129: dup
     130: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     133: ldc           #88                 // String wsSession.duplicateHandlerBinary
     135: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     138: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     141: athrow
     142: aload_0
     143: aload         5
     145: invokevirtual #87                 // Method org/apache/tomcat/websocket/MessageHandlerResult.getHandler:()Ljavax/websocket/MessageHandler;
     148: putfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
     151: goto          252
     154: aload_0
     155: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
     158: ifnull        177
     161: new           #84                 // class java/lang/IllegalStateException
     164: dup
     165: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     168: ldc           #89                 // String wsSession.duplicateHandlerPong
     170: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     173: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     176: athrow
     177: aload         5
     179: invokevirtual #87                 // Method org/apache/tomcat/websocket/MessageHandlerResult.getHandler:()Ljavax/websocket/MessageHandler;
     182: astore        6
     184: aload         6
     186: instanceof    #90                 // class javax/websocket/MessageHandler$Whole
     189: ifeq          204
     192: aload_0
     193: aload         6
     195: checkcast     #90                 // class javax/websocket/MessageHandler$Whole
     198: putfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
     201: goto          252
     204: new           #84                 // class java/lang/IllegalStateException
     207: dup
     208: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     211: ldc           #91                 // String wsSession.invalidHandlerTypePong
     213: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     216: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     219: athrow
     220: new           #92                 // class java/lang/IllegalArgumentException
     223: dup
     224: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     227: ldc           #93                 // String wsSession.unknownHandlerType
     229: iconst_2
     230: anewarray     #10                 // class java/lang/Object
     233: dup
     234: iconst_0
     235: aload_2
     236: aastore
     237: dup
     238: iconst_1
     239: aload         5
     241: invokevirtual #82                 // Method org/apache/tomcat/websocket/MessageHandlerResult.getType:()Lorg/apache/tomcat/websocket/MessageHandlerResultType;
     244: aastore
     245: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     248: invokespecial #94                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
     251: athrow
     252: goto          23
     255: return

  public java.util.Set<javax.websocket.MessageHandler> getMessageHandlers();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: new           #95                 // class java/util/HashSet
       7: dup
       8: invokespecial #96                 // Method java/util/HashSet."<init>":()V
      11: astore_1
      12: aload_0
      13: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      16: ifnull        30
      19: aload_1
      20: aload_0
      21: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      24: invokeinterface #97,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      29: pop
      30: aload_0
      31: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      34: ifnull        48
      37: aload_1
      38: aload_0
      39: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      42: invokeinterface #97,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      47: pop
      48: aload_0
      49: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
      52: ifnull        66
      55: aload_1
      56: aload_0
      57: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
      60: invokeinterface #97,  2           // InterfaceMethod java/util/Set.add:(Ljava/lang/Object;)Z
      65: pop
      66: aload_1
      67: areturn

  public void removeMessageHandler(javax.websocket.MessageHandler);
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_1
       5: ifnonnull     9
       8: return
       9: aconst_null
      10: astore_2
      11: aload_1
      12: instanceof    #98                 // class org/apache/tomcat/websocket/WrappedMessageHandler
      15: ifeq          28
      18: aload_1
      19: checkcast     #98                 // class org/apache/tomcat/websocket/WrappedMessageHandler
      22: invokeinterface #99,  1           // InterfaceMethod org/apache/tomcat/websocket/WrappedMessageHandler.getWrappedHandler:()Ljavax/websocket/MessageHandler;
      27: astore_2
      28: aload_2
      29: ifnonnull     34
      32: aload_1
      33: astore_2
      34: iconst_0
      35: istore_3
      36: aload_2
      37: aload_0
      38: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      41: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      44: ifne          58
      47: aload_1
      48: aload_0
      49: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      52: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      55: ifeq          65
      58: aload_0
      59: aconst_null
      60: putfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
      63: iconst_1
      64: istore_3
      65: aload_2
      66: aload_0
      67: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      70: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      73: ifne          87
      76: aload_1
      77: aload_0
      78: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      81: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
      84: ifeq          94
      87: aload_0
      88: aconst_null
      89: putfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
      92: iconst_1
      93: istore_3
      94: aload_2
      95: aload_0
      96: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
      99: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     102: ifne          116
     105: aload_1
     106: aload_0
     107: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
     110: invokevirtual #100                // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     113: ifeq          123
     116: aload_0
     117: aconst_null
     118: putfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
     121: iconst_1
     122: istore_3
     123: iload_3
     124: ifne          151
     127: new           #84                 // class java/lang/IllegalStateException
     130: dup
     131: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     134: ldc           #101                // String wsSession.removeHandlerFailed
     136: iconst_1
     137: anewarray     #10                 // class java/lang/Object
     140: dup
     141: iconst_0
     142: aload_1
     143: aastore
     144: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     147: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     150: athrow
     151: return

  public java.lang.String getProtocolVersion();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: ldc           #103                // String 13
       6: areturn

  public java.lang.String getNegotiatedSubprotocol();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #49                 // Field subProtocol:Ljava/lang/String;
       8: areturn

  public java.util.List<javax.websocket.Extension> getNegotiatedExtensions();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #47                 // Field negotiatedExtensions:Ljava/util/List;
       8: areturn

  public boolean isSecure();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #51                 // Field secure:Z
       8: ireturn

  public boolean isOpen();
    Code:
       0: aload_0
       1: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
       4: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
       7: if_acmpne     14
      10: iconst_1
      11: goto          15
      14: iconst_0
      15: ireturn

  public long getMaxIdleTimeout();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #18                 // Field maxIdleTimeout:J
       8: lreturn

  public void setMaxIdleTimeout(long);
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: lload_1
       6: putfield      #18                 // Field maxIdleTimeout:J
       9: return

  public void setMaxBinaryMessageBufferSize(int);
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: iload_1
       6: putfield      #16                 // Field maxBinaryMessageBufferSize:I
       9: return

  public int getMaxBinaryMessageBufferSize();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #16                 // Field maxBinaryMessageBufferSize:I
       8: ireturn

  public void setMaxTextMessageBufferSize(int);
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: iload_1
       6: putfield      #17                 // Field maxTextMessageBufferSize:I
       9: return

  public int getMaxTextMessageBufferSize();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #17                 // Field maxTextMessageBufferSize:I
       8: ireturn

  public java.util.Set<javax.websocket.Session> getOpenSessions();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
       8: aload_0
       9: invokespecial #104                // Method getSessionMapKey:()Ljava/lang/Object;
      12: invokevirtual #105                // Method org/apache/tomcat/websocket/WsWebSocketContainer.getOpenSessions:(Ljava/lang/Object;)Ljava/util/Set;
      15: areturn

  public javax.websocket.RemoteEndpoint$Async getAsyncRemote();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #28                 // Field remoteEndpointAsync:Ljavax/websocket/RemoteEndpoint$Async;
       8: areturn

  public javax.websocket.RemoteEndpoint$Basic getBasicRemote();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #31                 // Field remoteEndpointBasic:Ljavax/websocket/RemoteEndpoint$Basic;
       8: areturn

  public void close() throws java.io.IOException;
    Code:
       0: aload_0
       1: new           #106                // class javax/websocket/CloseReason
       4: dup
       5: getstatic     #107                // Field javax/websocket/CloseReason$CloseCodes.NORMAL_CLOSURE:Ljavax/websocket/CloseReason$CloseCodes;
       8: ldc           #48                 // String
      10: invokespecial #108                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
      13: invokevirtual #109                // Method close:(Ljavax/websocket/CloseReason;)V
      16: return

  public void close(javax.websocket.CloseReason) throws java.io.IOException;
    Code:
       0: aload_0
       1: aload_1
       2: aload_1
       3: invokevirtual #110                // Method doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
       6: return

  public void doClose(javax.websocket.CloseReason, javax.websocket.CloseReason);
    Code:
       0: aload_0
       1: aload_1
       2: aload_2
       3: iconst_0
       4: invokevirtual #111                // Method doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;Z)V
       7: return

  public void doClose(javax.websocket.CloseReason, javax.websocket.CloseReason, boolean);
    Code:
       0: aload_0
       1: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
       4: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
       7: if_acmpeq     11
      10: return
      11: aload_0
      12: getfield      #11                 // Field stateLock:Ljava/lang/Object;
      15: dup
      16: astore        4
      18: monitorenter
      19: aload_0
      20: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      23: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
      26: if_acmpeq     33
      29: aload         4
      31: monitorexit
      32: return
      33: aload_0
      34: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
      37: invokeinterface #69,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
      42: ifeq          73
      45: aload_0
      46: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
      49: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      52: ldc           #112                // String wsSession.doClose
      54: iconst_1
      55: anewarray     #10                 // class java/lang/Object
      58: dup
      59: iconst_0
      60: aload_0
      61: getfield      #59                 // Field id:Ljava/lang/String;
      64: aastore
      65: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      68: invokeinterface #72,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
      73: aload_0
      74: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
      77: iconst_0
      78: invokevirtual #113                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.setBatchingAllowed:(Z)V
      81: goto          111
      84: astore        5
      86: aload_0
      87: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
      90: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      93: ldc           #115                // String wsSession.flushFailOnClose
      95: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      98: aload         5
     100: invokeinterface #116,  3          // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     105: aload_0
     106: aload         5
     108: invokespecial #117                // Method fireEndpointOnError:(Ljava/lang/Throwable;)V
     111: aload_0
     112: getstatic     #118                // Field org/apache/tomcat/websocket/WsSession$State.OUTPUT_CLOSED:Lorg/apache/tomcat/websocket/WsSession$State;
     115: putfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
     118: aload_0
     119: aload_1
     120: invokespecial #119                // Method sendCloseMessage:(Ljavax/websocket/CloseReason;)V
     123: iload_3
     124: ifeq          134
     127: aload_0
     128: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
     131: invokevirtual #120                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.close:()V
     134: aload_0
     135: aload_2
     136: invokespecial #121                // Method fireEndpointOnClose:(Ljavax/websocket/CloseReason;)V
     139: aload         4
     141: monitorexit
     142: goto          153
     145: astore        6
     147: aload         4
     149: monitorexit
     150: aload         6
     152: athrow
     153: new           #114                // class java/io/IOException
     156: dup
     157: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     160: ldc           #122                // String wsSession.messageFailed
     162: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     165: invokespecial #123                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
     168: astore        4
     170: new           #124                // class javax/websocket/SendResult
     173: dup
     174: aload         4
     176: invokespecial #125                // Method javax/websocket/SendResult."<init>":(Ljava/lang/Throwable;)V
     179: astore        5
     181: aload_0
     182: getfield      #22                 // Field futures:Ljava/util/Map;
     185: invokeinterface #126,  1          // InterfaceMethod java/util/Map.keySet:()Ljava/util/Set;
     190: invokeinterface #77,  1           // InterfaceMethod java/util/Set.iterator:()Ljava/util/Iterator;
     195: astore        6
     197: aload         6
     199: invokeinterface #78,  1           // InterfaceMethod java/util/Iterator.hasNext:()Z
     204: ifeq          229
     207: aload         6
     209: invokeinterface #79,  1           // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     214: checkcast     #127                // class org/apache/tomcat/websocket/FutureToSendHandler
     217: astore        7
     219: aload         7
     221: aload         5
     223: invokevirtual #128                // Method org/apache/tomcat/websocket/FutureToSendHandler.onResult:(Ljavax/websocket/SendResult;)V
     226: goto          197
     229: return
    Exception table:
       from    to  target type
          73    81    84   Class java/io/IOException
          19    32   145   any
          33   142   145   any
         145   150   145   any

  public void onClose(javax.websocket.CloseReason);
    Code:
       0: aload_0
       1: getfield      #11                 // Field stateLock:Ljava/lang/Object;
       4: dup
       5: astore_2
       6: monitorenter
       7: aload_0
       8: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      11: getstatic     #129                // Field org/apache/tomcat/websocket/WsSession$State.CLOSED:Lorg/apache/tomcat/websocket/WsSession$State;
      14: if_acmpeq     93
      17: aload_0
      18: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
      21: iconst_0
      22: invokevirtual #113                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.setBatchingAllowed:(Z)V
      25: goto          52
      28: astore_3
      29: aload_0
      30: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
      33: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      36: ldc           #115                // String wsSession.flushFailOnClose
      38: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      41: aload_3
      42: invokeinterface #116,  3          // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;Ljava/lang/Throwable;)V
      47: aload_0
      48: aload_3
      49: invokespecial #117                // Method fireEndpointOnError:(Ljava/lang/Throwable;)V
      52: aload_0
      53: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      56: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
      59: if_acmpne     79
      62: aload_0
      63: getstatic     #118                // Field org/apache/tomcat/websocket/WsSession$State.OUTPUT_CLOSED:Lorg/apache/tomcat/websocket/WsSession$State;
      66: putfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      69: aload_0
      70: aload_1
      71: invokespecial #119                // Method sendCloseMessage:(Ljavax/websocket/CloseReason;)V
      74: aload_0
      75: aload_1
      76: invokespecial #121                // Method fireEndpointOnClose:(Ljavax/websocket/CloseReason;)V
      79: aload_0
      80: getstatic     #129                // Field org/apache/tomcat/websocket/WsSession$State.CLOSED:Lorg/apache/tomcat/websocket/WsSession$State;
      83: putfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      86: aload_0
      87: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
      90: invokevirtual #120                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.close:()V
      93: aload_2
      94: monitorexit
      95: goto          105
      98: astore        4
     100: aload_2
     101: monitorexit
     102: aload         4
     104: athrow
     105: return
    Exception table:
       from    to  target type
          17    25    28   Class java/io/IOException
           7    95    98   any
          98   102    98   any

  private void fireEndpointOnClose(javax.websocket.CloseReason);
    Code:
       0: aconst_null
       1: astore_2
       2: aload_0
       3: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
       6: invokevirtual #60                 // Method org/apache/tomcat/websocket/WsWebSocketContainer.getInstanceManager:()Lorg/apache/tomcat/InstanceManager;
       9: astore_3
      10: aload_3
      11: ifnonnull     22
      14: aload_0
      15: getfield      #35                 // Field applicationClassLoader:Ljava/lang/ClassLoader;
      18: invokestatic  #61                 // Method org/apache/tomcat/InstanceManagerBindings.get:(Ljava/lang/ClassLoader;)Lorg/apache/tomcat/InstanceManager;
      21: astore_3
      22: invokestatic  #33                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
      25: astore        4
      27: aload         4
      29: invokevirtual #34                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
      32: astore        5
      34: aload         4
      36: aload_0
      37: getfield      #35                 // Field applicationClassLoader:Ljava/lang/ClassLoader;
      40: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      43: aload_0
      44: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
      47: aload_0
      48: aload_1
      49: invokevirtual #131                // Method javax/websocket/Endpoint.onClose:(Ljavax/websocket/Session;Ljavax/websocket/CloseReason;)V
      52: aload_3
      53: ifnull        83
      56: aload_3
      57: aload_0
      58: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
      61: invokeinterface #132,  2          // InterfaceMethod org/apache/tomcat/InstanceManager.destroyInstance:(Ljava/lang/Object;)V
      66: goto          83
      69: astore        6
      71: aload         6
      73: invokestatic  #134                // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
      76: aload_2
      77: ifnonnull     83
      80: aload         6
      82: astore_2
      83: aload         4
      85: aload         5
      87: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      90: goto          187
      93: astore        6
      95: aload         6
      97: invokestatic  #134                // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     100: aload         6
     102: astore_2
     103: aload_3
     104: ifnull        134
     107: aload_3
     108: aload_0
     109: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
     112: invokeinterface #132,  2          // InterfaceMethod org/apache/tomcat/InstanceManager.destroyInstance:(Ljava/lang/Object;)V
     117: goto          134
     120: astore        6
     122: aload         6
     124: invokestatic  #134                // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     127: aload_2
     128: ifnonnull     134
     131: aload         6
     133: astore_2
     134: aload         4
     136: aload         5
     138: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
     141: goto          187
     144: astore        7
     146: aload_3
     147: ifnull        177
     150: aload_3
     151: aload_0
     152: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
     155: invokeinterface #132,  2          // InterfaceMethod org/apache/tomcat/InstanceManager.destroyInstance:(Ljava/lang/Object;)V
     160: goto          177
     163: astore        8
     165: aload         8
     167: invokestatic  #134                // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     170: aload_2
     171: ifnonnull     177
     174: aload         8
     176: astore_2
     177: aload         4
     179: aload         5
     181: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
     184: aload         7
     186: athrow
     187: aload_2
     188: ifnull        196
     191: aload_0
     192: aload_2
     193: invokespecial #117                // Method fireEndpointOnError:(Ljava/lang/Throwable;)V
     196: return
    Exception table:
       from    to  target type
          56    66    69   Class java/lang/Throwable
          43    52    93   Class java/lang/Throwable
         107   117   120   Class java/lang/Throwable
          43    52   144   any
          93   103   144   any
         150   160   163   Class java/lang/Throwable
         144   146   144   any

  private void fireEndpointOnError(java.lang.Throwable);
    Code:
       0: invokestatic  #33                 // Method java/lang/Thread.currentThread:()Ljava/lang/Thread;
       3: astore_2
       4: aload_2
       5: invokevirtual #34                 // Method java/lang/Thread.getContextClassLoader:()Ljava/lang/ClassLoader;
       8: astore_3
       9: aload_2
      10: aload_0
      11: getfield      #35                 // Field applicationClassLoader:Ljava/lang/ClassLoader;
      14: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      17: aload_0
      18: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
      21: aload_0
      22: aload_1
      23: invokevirtual #135                // Method javax/websocket/Endpoint.onError:(Ljavax/websocket/Session;Ljava/lang/Throwable;)V
      26: aload_2
      27: aload_3
      28: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      31: goto          44
      34: astore        4
      36: aload_2
      37: aload_3
      38: invokevirtual #130                // Method java/lang/Thread.setContextClassLoader:(Ljava/lang/ClassLoader;)V
      41: aload         4
      43: athrow
      44: return
    Exception table:
       from    to  target type
          17    26    34   any
          34    36    34   any

  private void sendCloseMessage(javax.websocket.CloseReason);
    Code:
       0: bipush        125
       2: invokestatic  #136                // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
       5: astore_2
       6: aload_1
       7: invokevirtual #137                // Method javax/websocket/CloseReason.getCloseCode:()Ljavax/websocket/CloseReason$CloseCode;
      10: astore_3
      11: aload_3
      12: getstatic     #138                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
      15: if_acmpne     33
      18: aload_2
      19: getstatic     #139                // Field javax/websocket/CloseReason$CloseCodes.PROTOCOL_ERROR:Ljavax/websocket/CloseReason$CloseCodes;
      22: invokevirtual #140                // Method javax/websocket/CloseReason$CloseCodes.getCode:()I
      25: i2s
      26: invokevirtual #141                // Method java/nio/ByteBuffer.putShort:(S)Ljava/nio/ByteBuffer;
      29: pop
      30: goto          45
      33: aload_2
      34: aload_3
      35: invokeinterface #142,  1          // InterfaceMethod javax/websocket/CloseReason$CloseCode.getCode:()I
      40: i2s
      41: invokevirtual #141                // Method java/nio/ByteBuffer.putShort:(S)Ljava/nio/ByteBuffer;
      44: pop
      45: aload_1
      46: invokevirtual #143                // Method javax/websocket/CloseReason.getReasonPhrase:()Ljava/lang/String;
      49: astore        4
      51: aload         4
      53: ifnull        70
      56: aload         4
      58: invokevirtual #144                // Method java/lang/String.length:()I
      61: ifle          70
      64: aload_2
      65: aload         4
      67: invokestatic  #145                // Method appendCloseReasonWithTruncation:(Ljava/nio/ByteBuffer;Ljava/lang/String;)V
      70: aload_2
      71: invokevirtual #146                // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      74: pop
      75: aload_0
      76: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
      79: bipush        8
      81: aload_2
      82: iconst_1
      83: invokevirtual #147                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      86: aload_0
      87: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
      90: aload_0
      91: invokespecial #104                // Method getSessionMapKey:()Ljava/lang/Object;
      94: aload_0
      95: invokevirtual #148                // Method org/apache/tomcat/websocket/WsWebSocketContainer.unregisterSession:(Ljava/lang/Object;Lorg/apache/tomcat/websocket/WsSession;)V
      98: goto          201
     101: astore        5
     103: aload_0
     104: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     107: invokeinterface #69,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     112: ifeq          145
     115: aload_0
     116: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     119: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     122: ldc           #150                // String wsSession.sendCloseFail
     124: iconst_1
     125: anewarray     #10                 // class java/lang/Object
     128: dup
     129: iconst_0
     130: aload_0
     131: getfield      #59                 // Field id:Ljava/lang/String;
     134: aastore
     135: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     138: aload         5
     140: invokeinterface #151,  3          // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;Ljava/lang/Throwable;)V
     145: aload_0
     146: getfield      #24                 // Field wsRemoteEndpoint:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;
     149: invokevirtual #120                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase.close:()V
     152: aload_3
     153: getstatic     #138                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     156: if_acmpeq     169
     159: aload_0
     160: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
     163: aload_0
     164: aload         5
     166: invokevirtual #135                // Method javax/websocket/Endpoint.onError:(Ljavax/websocket/Session;Ljava/lang/Throwable;)V
     169: aload_0
     170: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     173: aload_0
     174: invokespecial #104                // Method getSessionMapKey:()Ljava/lang/Object;
     177: aload_0
     178: invokevirtual #148                // Method org/apache/tomcat/websocket/WsWebSocketContainer.unregisterSession:(Ljava/lang/Object;Lorg/apache/tomcat/websocket/WsSession;)V
     181: goto          201
     184: astore        6
     186: aload_0
     187: getfield      #32                 // Field webSocketContainer:Lorg/apache/tomcat/websocket/WsWebSocketContainer;
     190: aload_0
     191: invokespecial #104                // Method getSessionMapKey:()Ljava/lang/Object;
     194: aload_0
     195: invokevirtual #148                // Method org/apache/tomcat/websocket/WsWebSocketContainer.unregisterSession:(Ljava/lang/Object;Lorg/apache/tomcat/websocket/WsSession;)V
     198: aload         6
     200: athrow
     201: return
    Exception table:
       from    to  target type
          75    86   101   Class java/io/IOException
          75    86   101   Class java/nio/channels/WritePendingException
          75    86   184   any
         101   169   184   any
         184   186   184   any

  private java.lang.Object getSessionMapKey();
    Code:
       0: aload_0
       1: getfield      #53                 // Field endpointConfig:Ljavax/websocket/EndpointConfig;
       4: instanceof    #152                // class javax/websocket/server/ServerEndpointConfig
       7: ifeq          23
      10: aload_0
      11: getfield      #53                 // Field endpointConfig:Ljavax/websocket/EndpointConfig;
      14: checkcast     #152                // class javax/websocket/server/ServerEndpointConfig
      17: invokeinterface #153,  1          // InterfaceMethod javax/websocket/server/ServerEndpointConfig.getPath:()Ljava/lang/String;
      22: areturn
      23: aload_0
      24: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
      27: areturn

  protected static void appendCloseReasonWithTruncation(java.nio.ByteBuffer, java.lang.String);
    Code:
       0: aload_1
       1: getstatic     #154                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
       4: invokevirtual #155                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
       7: astore_2
       8: aload_2
       9: arraylength
      10: bipush        123
      12: if_icmpgt     24
      15: aload_0
      16: aload_2
      17: invokevirtual #156                // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
      20: pop
      21: goto          104
      24: bipush        123
      26: getstatic     #157                // Field ELLIPSIS_BYTES_LEN:I
      29: isub
      30: istore_3
      31: iconst_0
      32: istore        4
      34: aload_1
      35: iload         4
      37: iload         4
      39: iconst_1
      40: iadd
      41: invokevirtual #158                // Method java/lang/String.substring:(II)Ljava/lang/String;
      44: getstatic     #154                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
      47: invokevirtual #155                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      50: astore        5
      52: iload_3
      53: aload         5
      55: arraylength
      56: if_icmplt     96
      59: aload_0
      60: aload         5
      62: invokevirtual #156                // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
      65: pop
      66: iload_3
      67: aload         5
      69: arraylength
      70: isub
      71: istore_3
      72: iinc          4, 1
      75: aload_1
      76: iload         4
      78: iload         4
      80: iconst_1
      81: iadd
      82: invokevirtual #158                // Method java/lang/String.substring:(II)Ljava/lang/String;
      85: getstatic     #154                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
      88: invokevirtual #155                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
      91: astore        5
      93: goto          52
      96: aload_0
      97: getstatic     #159                // Field ELLIPSIS_BYTES:[B
     100: invokevirtual #156                // Method java/nio/ByteBuffer.put:([B)Ljava/nio/ByteBuffer;
     103: pop
     104: return

  protected void registerFuture(org.apache.tomcat.websocket.FutureToSendHandler);
    Code:
       0: aload_0
       1: getfield      #22                 // Field futures:Ljava/util/Map;
       4: aload_1
       5: aload_1
       6: invokeinterface #160,  3          // InterfaceMethod java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
      11: pop
      12: aload_0
      13: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
      16: getstatic     #8                  // Field org/apache/tomcat/websocket/WsSession$State.OPEN:Lorg/apache/tomcat/websocket/WsSession$State;
      19: if_acmpne     23
      22: return
      23: aload_1
      24: invokevirtual #161                // Method org/apache/tomcat/websocket/FutureToSendHandler.isDone:()Z
      27: ifeq          31
      30: return
      31: new           #114                // class java/io/IOException
      34: dup
      35: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      38: ldc           #122                // String wsSession.messageFailed
      40: invokevirtual #67                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      43: invokespecial #123                // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      46: astore_2
      47: new           #124                // class javax/websocket/SendResult
      50: dup
      51: aload_2
      52: invokespecial #125                // Method javax/websocket/SendResult."<init>":(Ljava/lang/Throwable;)V
      55: astore_3
      56: aload_1
      57: aload_3
      58: invokevirtual #128                // Method org/apache/tomcat/websocket/FutureToSendHandler.onResult:(Ljavax/websocket/SendResult;)V
      61: return

  protected void unregisterFuture(org.apache.tomcat.websocket.FutureToSendHandler);
    Code:
       0: aload_0
       1: getfield      #22                 // Field futures:Ljava/util/Map;
       4: aload_1
       5: invokeinterface #162,  2          // InterfaceMethod java/util/Map.remove:(Ljava/lang/Object;)Ljava/lang/Object;
      10: pop
      11: return

  public java.net.URI getRequestURI();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #41                 // Field requestUri:Ljava/net/URI;
       8: areturn

  public java.util.Map<java.lang.String, java.util.List<java.lang.String>> getRequestParameterMap();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #43                 // Field requestParameterMap:Ljava/util/Map;
       8: areturn

  public java.lang.String getQueryString();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #44                 // Field queryString:Ljava/lang/String;
       8: areturn

  public java.security.Principal getUserPrincipal();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #45                 // Field userPrincipal:Ljava/security/Principal;
       8: areturn

  public java.util.Map<java.lang.String, java.lang.String> getPathParameters();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #50                 // Field pathParameters:Ljava/util/Map;
       8: areturn

  public java.lang.String getId();
    Code:
       0: aload_0
       1: getfield      #59                 // Field id:Ljava/lang/String;
       4: areturn

  public java.util.Map<java.lang.String, java.lang.Object> getUserProperties();
    Code:
       0: aload_0
       1: invokespecial #73                 // Method checkState:()V
       4: aload_0
       5: getfield      #14                 // Field userProperties:Ljava/util/Map;
       8: areturn

  public javax.websocket.Endpoint getLocal();
    Code:
       0: aload_0
       1: getfield      #23                 // Field localEndpoint:Ljavax/websocket/Endpoint;
       4: areturn

  public java.lang.String getHttpSessionId();
    Code:
       0: aload_0
       1: getfield      #46                 // Field httpSessionId:Ljava/lang/String;
       4: areturn

  protected javax.websocket.MessageHandler getTextMessageHandler();
    Code:
       0: aload_0
       1: getfield      #5                  // Field textMessageHandler:Ljavax/websocket/MessageHandler;
       4: areturn

  protected javax.websocket.MessageHandler getBinaryMessageHandler();
    Code:
       0: aload_0
       1: getfield      #6                  // Field binaryMessageHandler:Ljavax/websocket/MessageHandler;
       4: areturn

  protected javax.websocket.MessageHandler$Whole<javax.websocket.PongMessage> getPongMessageHandler();
    Code:
       0: aload_0
       1: getfield      #7                  // Field pongMessageHandler:Ljavax/websocket/MessageHandler$Whole;
       4: areturn

  protected void updateLastActiveRead();
    Code:
       0: aload_0
       1: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
       4: putfield      #20                 // Field lastActiveRead:J
       7: return

  protected void updateLastActiveWrite();
    Code:
       0: aload_0
       1: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
       4: putfield      #21                 // Field lastActiveWrite:J
       7: return

  protected void checkExpiration();
    Code:
       0: aload_0
       1: getfield      #18                 // Field maxIdleTimeout:J
       4: lstore_1
       5: aload_0
       6: invokespecial #163                // Method getMaxIdleTimeoutRead:()J
       9: lstore_3
      10: aload_0
      11: invokespecial #164                // Method getMaxIdleTimeoutWrite:()J
      14: lstore        5
      16: invokestatic  #19                 // Method java/lang/System.currentTimeMillis:()J
      19: lstore        7
      21: aconst_null
      22: astore        9
      24: lload_3
      25: lconst_0
      26: lcmp
      27: ifle          49
      30: lload         7
      32: aload_0
      33: getfield      #20                 // Field lastActiveRead:J
      36: lsub
      37: lload_3
      38: lcmp
      39: ifle          49
      42: ldc           #165                // String wsSession.timeoutRead
      44: astore        9
      46: goto          109
      49: lload         5
      51: lconst_0
      52: lcmp
      53: ifle          75
      56: lload         7
      58: aload_0
      59: getfield      #21                 // Field lastActiveWrite:J
      62: lsub
      63: lload_3
      64: lcmp
      65: ifle          75
      68: ldc           #166                // String wsSession.timeoutWrite
      70: astore        9
      72: goto          109
      75: lload_1
      76: lconst_0
      77: lcmp
      78: ifle          109
      81: lload         7
      83: aload_0
      84: getfield      #20                 // Field lastActiveRead:J
      87: lsub
      88: lload_1
      89: lcmp
      90: ifle          109
      93: lload         7
      95: aload_0
      96: getfield      #21                 // Field lastActiveWrite:J
      99: lsub
     100: lload_1
     101: lcmp
     102: ifle          109
     105: ldc           #167                // String wsSession.timeout
     107: astore        9
     109: aload         9
     111: ifnull        186
     114: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     117: aload         9
     119: iconst_1
     120: anewarray     #10                 // class java/lang/Object
     123: dup
     124: iconst_0
     125: aload_0
     126: invokevirtual #168                // Method getId:()Ljava/lang/String;
     129: aastore
     130: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     133: astore        10
     135: aload_0
     136: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     139: invokeinterface #69,  1           // InterfaceMethod org/apache/juli/logging/Log.isDebugEnabled:()Z
     144: ifeq          158
     147: aload_0
     148: getfield      #4                  // Field log:Lorg/apache/juli/logging/Log;
     151: aload         10
     153: invokeinterface #72,  2           // InterfaceMethod org/apache/juli/logging/Log.debug:(Ljava/lang/Object;)V
     158: aload_0
     159: new           #106                // class javax/websocket/CloseReason
     162: dup
     163: getstatic     #169                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     166: aload         10
     168: invokespecial #108                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     171: new           #106                // class javax/websocket/CloseReason
     174: dup
     175: getstatic     #138                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     178: aload         10
     180: invokespecial #108                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     183: invokevirtual #110                // Method doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     186: return

  private long getMaxIdleTimeoutRead();
    Code:
       0: aload_0
       1: getfield      #14                 // Field userProperties:Ljava/util/Map;
       4: ldc           #170                // String org.apache.tomcat.websocket.READ_IDLE_TIMEOUT_MS
       6: invokeinterface #171,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      11: astore_1
      12: aload_1
      13: instanceof    #172                // class java/lang/Long
      16: ifeq          27
      19: aload_1
      20: checkcast     #172                // class java/lang/Long
      23: invokevirtual #173                // Method java/lang/Long.longValue:()J
      26: lreturn
      27: lconst_0
      28: lreturn

  private long getMaxIdleTimeoutWrite();
    Code:
       0: aload_0
       1: getfield      #14                 // Field userProperties:Ljava/util/Map;
       4: ldc           #174                // String org.apache.tomcat.websocket.WRITE_IDLE_TIMEOUT_MS
       6: invokeinterface #171,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      11: astore_1
      12: aload_1
      13: instanceof    #172                // class java/lang/Long
      16: ifeq          27
      19: aload_1
      20: checkcast     #172                // class java/lang/Long
      23: invokevirtual #173                // Method java/lang/Long.longValue:()J
      26: lreturn
      27: lconst_0
      28: lreturn

  private void checkState();
    Code:
       0: aload_0
       1: getfield      #9                  // Field state:Lorg/apache/tomcat/websocket/WsSession$State;
       4: getstatic     #129                // Field org/apache/tomcat/websocket/WsSession$State.CLOSED:Lorg/apache/tomcat/websocket/WsSession$State;
       7: if_acmpne     37
      10: new           #84                 // class java/lang/IllegalStateException
      13: dup
      14: getstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      17: ldc           #175                // String wsSession.closed
      19: iconst_1
      20: anewarray     #10                 // class java/lang/Object
      23: dup
      24: iconst_0
      25: aload_0
      26: getfield      #59                 // Field id:Ljava/lang/String;
      29: aastore
      30: invokevirtual #71                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      33: invokespecial #86                 // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      36: athrow
      37: return

  void setWsFrame(org.apache.tomcat.websocket.WsFrameBase);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #176                // Field wsFrame:Lorg/apache/tomcat/websocket/WsFrameBase;
       5: return

  public void suspend();
    Code:
       0: aload_0
       1: getfield      #176                // Field wsFrame:Lorg/apache/tomcat/websocket/WsFrameBase;
       4: invokevirtual #177                // Method org/apache/tomcat/websocket/WsFrameBase.suspend:()V
       7: return

  public void resume();
    Code:
       0: aload_0
       1: getfield      #176                // Field wsFrame:Lorg/apache/tomcat/websocket/WsFrameBase;
       4: invokevirtual #178                // Method org/apache/tomcat/websocket/WsFrameBase.resume:()V
       7: return

  static {};
    Code:
       0: ldc           #179                // String 
       2: getstatic     #154                // Field java/nio/charset/StandardCharsets.UTF_8:Ljava/nio/charset/Charset;
       5: invokevirtual #155                // Method java/lang/String.getBytes:(Ljava/nio/charset/Charset;)[B
       8: putstatic     #159                // Field ELLIPSIS_BYTES:[B
      11: getstatic     #159                // Field ELLIPSIS_BYTES:[B
      14: arraylength
      15: putstatic     #157                // Field ELLIPSIS_BYTES_LEN:I
      18: ldc           #2                  // class org/apache/tomcat/websocket/WsSession
      20: invokestatic  #180                // Method org/apache/tomcat/util/res/StringManager.getManager:(Ljava/lang/Class;)Lorg/apache/tomcat/util/res/StringManager;
      23: putstatic     #65                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      26: new           #181                // class java/util/concurrent/atomic/AtomicLong
      29: dup
      30: lconst_0
      31: invokespecial #182                // Method java/util/concurrent/atomic/AtomicLong."<init>":(J)V
      34: putstatic     #56                 // Field ids:Ljava/util/concurrent/atomic/AtomicLong;
      37: return
}

Compiled from "WsRemoteEndpointImplBase.java"
public abstract class org.apache.tomcat.websocket.WsRemoteEndpointImplBase implements javax.websocket.RemoteEndpoint {
  protected static final org.apache.tomcat.util.res.StringManager sm;

  protected static final javax.websocket.SendResult SENDRESULT_OK;

  private final org.apache.juli.logging.Log log;

  private final org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine stateMachine;

  private final org.apache.tomcat.websocket.WsRemoteEndpointImplBase$IntermediateMessageHandler intermediateMessageHandler;

  private org.apache.tomcat.websocket.Transformation transformation;

  private final java.util.concurrent.Semaphore messagePartInProgress;

  private final java.util.Queue<org.apache.tomcat.websocket.MessagePart> messagePartQueue;

  private final java.lang.Object messagePartLock;

  private volatile boolean closed;

  private boolean fragmented;

  private boolean nextFragmented;

  private boolean text;

  private boolean nextText;

  private final java.nio.ByteBuffer headerBuffer;

  private final java.nio.ByteBuffer outputBuffer;

  private final java.nio.charset.CharsetEncoder encoder;

  private final java.nio.ByteBuffer encoderBuffer;

  private final java.util.concurrent.atomic.AtomicBoolean batchingAllowed;

  private volatile long sendTimeout;

  private org.apache.tomcat.websocket.WsSession wsSession;

  private java.util.List<org.apache.tomcat.websocket.WsRemoteEndpointImplBase$EncoderEntry> encoderEntries;

  public org.apache.tomcat.websocket.WsRemoteEndpointImplBase();
    Code:
       0: aload_0
       1: invokespecial #3                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: ldc           #4                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase
       7: invokestatic  #5                  // Method org/apache/juli/logging/LogFactory.getLog:(Ljava/lang/Class;)Lorg/apache/juli/logging/Log;
      10: putfield      #6                  // Field log:Lorg/apache/juli/logging/Log;
      13: aload_0
      14: new           #7                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine
      17: dup
      18: aconst_null
      19: invokespecial #8                  // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$1;)V
      22: putfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      25: aload_0
      26: new           #9                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler
      29: dup
      30: aload_0
      31: invokespecial #10                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      34: putfield      #11                 // Field intermediateMessageHandler:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler;
      37: aload_0
      38: aconst_null
      39: putfield      #12                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      42: aload_0
      43: new           #13                 // class java/util/concurrent/Semaphore
      46: dup
      47: iconst_1
      48: invokespecial #14                 // Method java/util/concurrent/Semaphore."<init>":(I)V
      51: putfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      54: aload_0
      55: new           #16                 // class java/util/ArrayDeque
      58: dup
      59: invokespecial #17                 // Method java/util/ArrayDeque."<init>":()V
      62: putfield      #18                 // Field messagePartQueue:Ljava/util/Queue;
      65: aload_0
      66: new           #19                 // class java/lang/Object
      69: dup
      70: invokespecial #3                  // Method java/lang/Object."<init>":()V
      73: putfield      #20                 // Field messagePartLock:Ljava/lang/Object;
      76: aload_0
      77: iconst_0
      78: putfield      #1                  // Field closed:Z
      81: aload_0
      82: iconst_0
      83: putfield      #21                 // Field fragmented:Z
      86: aload_0
      87: iconst_0
      88: putfield      #22                 // Field nextFragmented:Z
      91: aload_0
      92: iconst_0
      93: putfield      #23                 // Field text:Z
      96: aload_0
      97: iconst_0
      98: putfield      #24                 // Field nextText:Z
     101: aload_0
     102: bipush        14
     104: invokestatic  #25                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     107: putfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     110: aload_0
     111: getstatic     #27                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
     114: invokestatic  #25                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     117: putfield      #28                 // Field outputBuffer:Ljava/nio/ByteBuffer;
     120: aload_0
     121: new           #29                 // class org/apache/tomcat/util/buf/Utf8Encoder
     124: dup
     125: invokespecial #30                 // Method org/apache/tomcat/util/buf/Utf8Encoder."<init>":()V
     128: putfield      #31                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
     131: aload_0
     132: getstatic     #27                 // Field org/apache/tomcat/websocket/Constants.DEFAULT_BUFFER_SIZE:I
     135: invokestatic  #25                 // Method java/nio/ByteBuffer.allocate:(I)Ljava/nio/ByteBuffer;
     138: putfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
     141: aload_0
     142: new           #33                 // class java/util/concurrent/atomic/AtomicBoolean
     145: dup
     146: iconst_0
     147: invokespecial #34                 // Method java/util/concurrent/atomic/AtomicBoolean."<init>":(Z)V
     150: putfield      #35                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
     153: aload_0
     154: ldc2_w        #36                 // long -1l
     157: putfield      #38                 // Field sendTimeout:J
     160: aload_0
     161: new           #39                 // class java/util/ArrayList
     164: dup
     165: invokespecial #40                 // Method java/util/ArrayList."<init>":()V
     168: putfield      #41                 // Field encoderEntries:Ljava/util/List;
     171: return

  protected void setTransformation(org.apache.tomcat.websocket.Transformation);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #12                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
       5: return

  public long getSendTimeout();
    Code:
       0: aload_0
       1: getfield      #38                 // Field sendTimeout:J
       4: lreturn

  public void setSendTimeout(long);
    Code:
       0: aload_0
       1: lload_1
       2: putfield      #38                 // Field sendTimeout:J
       5: return

  public void setBatchingAllowed(boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #35                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: iload_1
       5: invokevirtual #42                 // Method java/util/concurrent/atomic/AtomicBoolean.getAndSet:(Z)Z
       8: istore_2
       9: iload_2
      10: ifeq          21
      13: iload_1
      14: ifne          21
      17: aload_0
      18: invokevirtual #43                 // Method flushBatch:()V
      21: return

  public boolean getBatchingAllowed();
    Code:
       0: aload_0
       1: getfield      #35                 // Field batchingAllowed:Ljava/util/concurrent/atomic/AtomicBoolean;
       4: invokevirtual #44                 // Method java/util/concurrent/atomic/AtomicBoolean.get:()Z
       7: ireturn

  public void flushBatch() throws java.io.IOException;
    Code:
       0: aload_0
       1: bipush        24
       3: aconst_null
       4: iconst_1
       5: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
       8: return

  public void sendBytes(java.nio.ByteBuffer) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryStart:()V
      27: aload_0
      28: iconst_2
      29: aload_1
      30: iconst_1
      31: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      34: aload_0
      35: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      38: iconst_1
      39: invokevirtual #53                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
      42: return

  public java.util.concurrent.Future<java.lang.Void> sendBytesByFuture(java.nio.ByteBuffer);
    Code:
       0: new           #54                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #56                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #57                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendBytesByCompletion(java.nio.ByteBuffer, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #58                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: new           #59                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateUpdateSendHandler
      43: dup
      44: aload_2
      45: aload_0
      46: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      49: invokespecial #60                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateUpdateSendHandler."<init>":(Ljavax/websocket/SendHandler;Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;)V
      52: astore_3
      53: aload_0
      54: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      57: invokevirtual #52                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryStart:()V
      60: aload_0
      61: iconst_2
      62: aload_1
      63: iconst_1
      64: aload_3
      65: invokevirtual #61                 // Method startMessage:(BLjava/nio/ByteBuffer;ZLjavax/websocket/SendHandler;)V
      68: return

  public void sendPartialBytes(java.nio.ByteBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #62                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.binaryPartialStart:()V
      27: aload_0
      28: iconst_2
      29: aload_1
      30: iload_2
      31: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      34: aload_0
      35: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      38: iload_2
      39: invokevirtual #53                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
      42: return

  public void sendPing(java.nio.ByteBuffer) throws java.io.IOException, java.lang.IllegalArgumentException;
    Code:
       0: aload_1
       1: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
       4: bipush        125
       6: if_icmple     25
       9: new           #47                 // class java/lang/IllegalArgumentException
      12: dup
      13: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      16: ldc           #64                 // String wsRemoteEndpoint.tooMuchData
      18: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      21: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      24: athrow
      25: aload_0
      26: bipush        9
      28: aload_1
      29: iconst_1
      30: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      33: return

  public void sendPong(java.nio.ByteBuffer) throws java.io.IOException, java.lang.IllegalArgumentException;
    Code:
       0: aload_1
       1: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
       4: bipush        125
       6: if_icmple     25
       9: new           #47                 // class java/lang/IllegalArgumentException
      12: dup
      13: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      16: ldc           #64                 // String wsRemoteEndpoint.tooMuchData
      18: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      21: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      24: athrow
      25: aload_0
      26: bipush        10
      28: aload_1
      29: iconst_1
      30: invokevirtual #46                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;Z)V
      33: return

  public void sendString(java.lang.String) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #65                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textStart:()V
      27: aload_0
      28: aload_1
      29: invokestatic  #66                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      32: iconst_1
      33: invokevirtual #67                 // Method sendMessageBlock:(Ljava/nio/CharBuffer;Z)V
      36: return

  public java.util.concurrent.Future<java.lang.Void> sendStringByFuture(java.lang.String);
    Code:
       0: new           #54                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #56                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #68                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendStringByCompletion(java.lang.String, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #58                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_0
      41: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      44: invokevirtual #65                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textStart:()V
      47: new           #69                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler
      50: dup
      51: aload_0
      52: aload_2
      53: aload_1
      54: invokestatic  #66                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      57: iconst_1
      58: aload_0
      59: getfield      #31                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
      62: aload_0
      63: getfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      66: aload_0
      67: invokespecial #70                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;Ljavax/websocket/SendHandler;Ljava/nio/CharBuffer;ZLjava/nio/charset/CharsetEncoder;Ljava/nio/ByteBuffer;Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      70: astore_3
      71: aload_3
      72: invokevirtual #71                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$TextMessageSendHandler.write:()V
      75: return

  public void sendPartialString(java.lang.String, boolean) throws java.io.IOException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
      24: invokevirtual #72                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.textPartialStart:()V
      27: aload_0
      28: aload_1
      29: invokestatic  #66                 // Method java/nio/CharBuffer.wrap:(Ljava/lang/CharSequence;)Ljava/nio/CharBuffer;
      32: iload_2
      33: invokevirtual #67                 // Method sendMessageBlock:(Ljava/nio/CharBuffer;Z)V
      36: return

  public java.io.OutputStream getSendStream();
    Code:
       0: aload_0
       1: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: invokevirtual #73                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.streamStart:()V
       7: new           #74                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsOutputStream
      10: dup
      11: aload_0
      12: invokespecial #75                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsOutputStream."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      15: areturn

  public java.io.Writer getSendWriter();
    Code:
       0: aload_0
       1: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: invokevirtual #76                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.writeStart:()V
       7: new           #77                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsWriter
      10: dup
      11: aload_0
      12: invokespecial #78                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$WsWriter."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
      15: areturn

  void sendMessageBlock(java.nio.CharBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #79                 // Method getTimeoutExpiry:()J
       4: lstore_3
       5: iconst_0
       6: istore        5
       8: iload         5
      10: ifne          107
      13: aload_0
      14: getfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      17: invokevirtual #80                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
      20: pop
      21: aload_0
      22: getfield      #31                 // Field encoder:Ljava/nio/charset/CharsetEncoder;
      25: aload_1
      26: aload_0
      27: getfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      30: iconst_1
      31: invokevirtual #81                 // Method java/nio/charset/CharsetEncoder.encode:(Ljava/nio/CharBuffer;Ljava/nio/ByteBuffer;Z)Ljava/nio/charset/CoderResult;
      34: astore        6
      36: aload         6
      38: invokevirtual #82                 // Method java/nio/charset/CoderResult.isError:()Z
      41: ifeq          57
      44: new           #47                 // class java/lang/IllegalArgumentException
      47: dup
      48: aload         6
      50: invokevirtual #83                 // Method java/nio/charset/CoderResult.toString:()Ljava/lang/String;
      53: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      56: athrow
      57: aload         6
      59: invokevirtual #84                 // Method java/nio/charset/CoderResult.isOverflow:()Z
      62: ifne          69
      65: iconst_1
      66: goto          70
      69: iconst_0
      70: istore        5
      72: aload_0
      73: getfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      76: invokevirtual #85                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      79: pop
      80: aload_0
      81: iconst_1
      82: aload_0
      83: getfield      #32                 // Field encoderBuffer:Ljava/nio/ByteBuffer;
      86: iload_2
      87: ifeq          99
      90: iload         5
      92: ifeq          99
      95: iconst_1
      96: goto          100
      99: iconst_0
     100: lload_3
     101: invokespecial #86                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;ZJ)V
     104: goto          8
     107: aload_0
     108: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
     111: iload_2
     112: invokevirtual #53                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine.complete:(Z)V
     115: return

  void sendMessageBlock(byte, java.nio.ByteBuffer, boolean) throws java.io.IOException;
    Code:
       0: aload_0
       1: iload_1
       2: aload_2
       3: iload_3
       4: aload_0
       5: invokespecial #79                 // Method getTimeoutExpiry:()J
       8: invokespecial #86                 // Method sendMessageBlock:(BLjava/nio/ByteBuffer;ZJ)V
      11: return

  private long getTimeoutExpiry();
    Code:
       0: aload_0
       1: invokespecial #87                 // Method getBlockingSendTimeout:()J
       4: lstore_1
       5: lload_1
       6: lconst_0
       7: lcmp
       8: ifge          15
      11: ldc2_w        #89                 // long 9223372036854775807l
      14: lreturn
      15: invokestatic  #91                 // Method java/lang/System.currentTimeMillis:()J
      18: lload_1
      19: ladd
      20: lreturn

  private void sendMessageBlock(byte, java.nio.ByteBuffer, boolean, long) throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #92                 // Method org/apache/tomcat/websocket/WsSession.updateLastActiveWrite:()V
       7: new           #93                 // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler
      10: dup
      11: aconst_null
      12: invokespecial #94                 // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$1;)V
      15: astore        6
      17: new           #39                 // class java/util/ArrayList
      20: dup
      21: invokespecial #40                 // Method java/util/ArrayList."<init>":()V
      24: astore        7
      26: aload         7
      28: new           #95                 // class org/apache/tomcat/websocket/MessagePart
      31: dup
      32: iload_3
      33: iconst_0
      34: iload_1
      35: aload_2
      36: aload         6
      38: aload         6
      40: lload         4
      42: invokespecial #96                 // Method org/apache/tomcat/websocket/MessagePart."<init>":(ZIBLjava/nio/ByteBuffer;Ljavax/websocket/SendHandler;Ljavax/websocket/SendHandler;J)V
      45: invokeinterface #97,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      50: pop
      51: aload_0
      52: getfield      #12                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      55: aload         7
      57: invokeinterface #98,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.sendMessagePart:(Ljava/util/List;)Ljava/util/List;
      62: astore        7
      64: aload         7
      66: invokeinterface #99,  1           // InterfaceMethod java/util/List.size:()I
      71: ifne          75
      74: return
      75: lload         4
      77: invokestatic  #91                 // Method java/lang/System.currentTimeMillis:()J
      80: lsub
      81: lstore        8
      83: aload_0
      84: getfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      87: lload         8
      89: getstatic     #100                // Field java/util/concurrent/TimeUnit.MILLISECONDS:Ljava/util/concurrent/TimeUnit;
      92: invokevirtual #101                // Method java/util/concurrent/Semaphore.tryAcquire:(JLjava/util/concurrent/TimeUnit;)Z
      95: ifne          149
      98: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     101: ldc           #102                // String wsRemoteEndpoint.acquireTimeout
     103: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     106: astore        10
     108: aload_0
     109: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     112: new           #103                // class javax/websocket/CloseReason
     115: dup
     116: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     119: aload         10
     121: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     124: new           #103                // class javax/websocket/CloseReason
     127: dup
     128: getstatic     #106                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     131: aload         10
     133: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     136: invokevirtual #107                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     139: new           #108                // class java/net/SocketTimeoutException
     142: dup
     143: aload         10
     145: invokespecial #109                // Method java/net/SocketTimeoutException."<init>":(Ljava/lang/String;)V
     148: athrow
     149: goto          207
     152: astore        10
     154: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     157: ldc           #111                // String wsRemoteEndpoint.sendInterrupt
     159: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     162: astore        11
     164: aload_0
     165: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     168: new           #103                // class javax/websocket/CloseReason
     171: dup
     172: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     175: aload         11
     177: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     180: new           #103                // class javax/websocket/CloseReason
     183: dup
     184: getstatic     #106                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     187: aload         11
     189: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     192: invokevirtual #107                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     195: new           #112                // class java/io/IOException
     198: dup
     199: aload         11
     201: aload         10
     203: invokespecial #113                // Method java/io/IOException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     206: athrow
     207: aload         7
     209: invokeinterface #114,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
     214: astore        10
     216: aload         10
     218: invokeinterface #115,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
     223: ifeq          395
     226: aload         10
     228: invokeinterface #116,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
     233: checkcast     #95                 // class org/apache/tomcat/websocket/MessagePart
     236: astore        11
     238: aload_0
     239: aload         11
     241: invokevirtual #117                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
     244: goto          301
     247: astore        12
     249: aload         12
     251: invokestatic  #119                // Method org/apache/tomcat/util/ExceptionUtils.handleThrowable:(Ljava/lang/Throwable;)V
     254: aload_0
     255: getfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
     258: invokevirtual #120                // Method java/util/concurrent/Semaphore.release:()V
     261: aload_0
     262: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     265: new           #103                // class javax/websocket/CloseReason
     268: dup
     269: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     272: aload         12
     274: invokevirtual #121                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     277: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     280: new           #103                // class javax/websocket/CloseReason
     283: dup
     284: getstatic     #106                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     287: aload         12
     289: invokevirtual #121                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     292: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     295: invokevirtual #107                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     298: aload         12
     300: athrow
     301: aload         6
     303: invokevirtual #122                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler.getSendResult:()Ljavax/websocket/SendResult;
     306: invokevirtual #123                // Method javax/websocket/SendResult.isOK:()Z
     309: ifne          376
     312: aload_0
     313: getfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
     316: invokevirtual #120                // Method java/util/concurrent/Semaphore.release:()V
     319: aload         6
     321: invokevirtual #122                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$BlockingSendHandler.getSendResult:()Ljavax/websocket/SendResult;
     324: invokevirtual #124                // Method javax/websocket/SendResult.getException:()Ljava/lang/Throwable;
     327: astore        12
     329: aload_0
     330: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
     333: new           #103                // class javax/websocket/CloseReason
     336: dup
     337: getstatic     #104                // Field javax/websocket/CloseReason$CloseCodes.GOING_AWAY:Ljavax/websocket/CloseReason$CloseCodes;
     340: aload         12
     342: invokevirtual #121                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     345: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     348: new           #103                // class javax/websocket/CloseReason
     351: dup
     352: getstatic     #106                // Field javax/websocket/CloseReason$CloseCodes.CLOSED_ABNORMALLY:Ljavax/websocket/CloseReason$CloseCodes;
     355: aload         12
     357: invokevirtual #121                // Method java/lang/Throwable.getMessage:()Ljava/lang/String;
     360: invokespecial #105                // Method javax/websocket/CloseReason."<init>":(Ljavax/websocket/CloseReason$CloseCode;Ljava/lang/String;)V
     363: invokevirtual #107                // Method org/apache/tomcat/websocket/WsSession.doClose:(Ljavax/websocket/CloseReason;Ljavax/websocket/CloseReason;)V
     366: new           #112                // class java/io/IOException
     369: dup
     370: aload         12
     372: invokespecial #125                // Method java/io/IOException."<init>":(Ljava/lang/Throwable;)V
     375: athrow
     376: aload_0
     377: aload_0
     378: getfield      #22                 // Field nextFragmented:Z
     381: putfield      #21                 // Field fragmented:Z
     384: aload_0
     385: aload_0
     386: getfield      #24                 // Field nextText:Z
     389: putfield      #23                 // Field text:Z
     392: goto          216
     395: aload_2
     396: ifnull        404
     399: aload_2
     400: invokevirtual #80                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     403: pop
     404: aload_0
     405: aconst_null
     406: aconst_null
     407: invokevirtual #126                // Method endMessage:(Ljavax/websocket/SendHandler;Ljavax/websocket/SendResult;)V
     410: return
    Exception table:
       from    to  target type
          83   149   152   Class java/lang/InterruptedException
         238   244   247   Class java/lang/Throwable

  void startMessage(byte, java.nio.ByteBuffer, boolean, javax.websocket.SendHandler);
    Code:
       0: aload_0
       1: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #92                 // Method org/apache/tomcat/websocket/WsSession.updateLastActiveWrite:()V
       7: new           #39                 // class java/util/ArrayList
      10: dup
      11: invokespecial #40                 // Method java/util/ArrayList."<init>":()V
      14: astore        5
      16: aload         5
      18: new           #95                 // class org/apache/tomcat/websocket/MessagePart
      21: dup
      22: iload_3
      23: iconst_0
      24: iload_1
      25: aload_2
      26: aload_0
      27: getfield      #11                 // Field intermediateMessageHandler:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$IntermediateMessageHandler;
      30: new           #127                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EndMessageHandler
      33: dup
      34: aload_0
      35: aload         4
      37: invokespecial #128                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EndMessageHandler."<init>":(Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;Ljavax/websocket/SendHandler;)V
      40: ldc2_w        #36                 // long -1l
      43: invokespecial #96                 // Method org/apache/tomcat/websocket/MessagePart."<init>":(ZIBLjava/nio/ByteBuffer;Ljavax/websocket/SendHandler;Ljavax/websocket/SendHandler;J)V
      46: invokeinterface #97,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
      51: pop
      52: aload_0
      53: getfield      #12                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      56: aload         5
      58: invokeinterface #98,  2           // InterfaceMethod org/apache/tomcat/websocket/Transformation.sendMessagePart:(Ljava/util/List;)Ljava/util/List;
      63: astore        5
      65: goto          87
      68: astore        6
      70: aload         4
      72: new           #129                // class javax/websocket/SendResult
      75: dup
      76: aload         6
      78: invokespecial #130                // Method javax/websocket/SendResult."<init>":(Ljava/lang/Throwable;)V
      81: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
      86: return
      87: aload         5
      89: invokeinterface #99,  1           // InterfaceMethod java/util/List.size:()I
      94: ifne          112
      97: aload         4
      99: new           #129                // class javax/websocket/SendResult
     102: dup
     103: invokespecial #132                // Method javax/websocket/SendResult."<init>":()V
     106: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     111: return
     112: aload         5
     114: iconst_0
     115: invokeinterface #133,  2          // InterfaceMethod java/util/List.remove:(I)Ljava/lang/Object;
     120: checkcast     #95                 // class org/apache/tomcat/websocket/MessagePart
     123: astore        6
     125: iconst_0
     126: istore        7
     128: aload_0
     129: getfield      #20                 // Field messagePartLock:Ljava/lang/Object;
     132: dup
     133: astore        8
     135: monitorenter
     136: bipush        8
     138: aload         6
     140: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     143: if_icmpne     170
     146: aload_0
     147: invokevirtual #135                // Method getBatchingAllowed:()Z
     150: ifeq          170
     153: aload_0
     154: getfield      #6                  // Field log:Lorg/apache/juli/logging/Log;
     157: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     160: ldc           #136                // String wsRemoteEndpoint.flushOnCloseFailed
     162: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     165: invokeinterface #137,  2          // InterfaceMethod org/apache/juli/logging/Log.warn:(Ljava/lang/Object;)V
     170: aload_0
     171: getfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
     174: invokevirtual #138                // Method java/util/concurrent/Semaphore.tryAcquire:()Z
     177: ifeq          186
     180: iconst_1
     181: istore        7
     183: goto          198
     186: aload_0
     187: getfield      #18                 // Field messagePartQueue:Ljava/util/Queue;
     190: aload         6
     192: invokeinterface #139,  2          // InterfaceMethod java/util/Queue.add:(Ljava/lang/Object;)Z
     197: pop
     198: aload_0
     199: getfield      #18                 // Field messagePartQueue:Ljava/util/Queue;
     202: aload         5
     204: invokeinterface #140,  2          // InterfaceMethod java/util/Queue.addAll:(Ljava/util/Collection;)Z
     209: pop
     210: aload         8
     212: monitorexit
     213: goto          224
     216: astore        9
     218: aload         8
     220: monitorexit
     221: aload         9
     223: athrow
     224: iload         7
     226: ifeq          235
     229: aload_0
     230: aload         6
     232: invokevirtual #117                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
     235: return
    Exception table:
       from    to  target type
          52    65    68   Class java/io/IOException
         136   213   216   any
         216   221   216   any

  void endMessage(javax.websocket.SendHandler, javax.websocket.SendResult);
    Code:
       0: iconst_0
       1: istore_3
       2: aconst_null
       3: astore        4
       5: aload_0
       6: getfield      #20                 // Field messagePartLock:Ljava/lang/Object;
       9: dup
      10: astore        5
      12: monitorenter
      13: aload_0
      14: aload_0
      15: getfield      #22                 // Field nextFragmented:Z
      18: putfield      #21                 // Field fragmented:Z
      21: aload_0
      22: aload_0
      23: getfield      #24                 // Field nextText:Z
      26: putfield      #23                 // Field text:Z
      29: aload_0
      30: getfield      #18                 // Field messagePartQueue:Ljava/util/Queue;
      33: invokeinterface #141,  1          // InterfaceMethod java/util/Queue.poll:()Ljava/lang/Object;
      38: checkcast     #95                 // class org/apache/tomcat/websocket/MessagePart
      41: astore        4
      43: aload         4
      45: ifnonnull     58
      48: aload_0
      49: getfield      #15                 // Field messagePartInProgress:Ljava/util/concurrent/Semaphore;
      52: invokevirtual #120                // Method java/util/concurrent/Semaphore.release:()V
      55: goto          67
      58: aload_0
      59: getfield      #1                  // Field closed:Z
      62: ifne          67
      65: iconst_1
      66: istore_3
      67: aload         5
      69: monitorexit
      70: goto          81
      73: astore        6
      75: aload         5
      77: monitorexit
      78: aload         6
      80: athrow
      81: iload_3
      82: ifeq          91
      85: aload_0
      86: aload         4
      88: invokevirtual #117                // Method writeMessagePart:(Lorg/apache/tomcat/websocket/MessagePart;)V
      91: aload_0
      92: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
      95: invokevirtual #92                 // Method org/apache/tomcat/websocket/WsSession.updateLastActiveWrite:()V
      98: aload_1
      99: ifnull        109
     102: aload_1
     103: aload_2
     104: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     109: return
    Exception table:
       from    to  target type
          13    70    73   any
          73    78    73   any

  void writeMessagePart(org.apache.tomcat.websocket.MessagePart);
    Code:
       0: aload_0
       1: getfield      #1                  // Field closed:Z
       4: ifeq          23
       7: new           #142                // class java/lang/IllegalStateException
      10: dup
      11: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      14: ldc           #143                // String wsRemoteEndpoint.closed
      16: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      19: invokespecial #144                // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
      22: athrow
      23: bipush        24
      25: aload_1
      26: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
      29: if_icmpne     93
      32: aload_0
      33: aload_0
      34: getfield      #21                 // Field fragmented:Z
      37: putfield      #22                 // Field nextFragmented:Z
      40: aload_0
      41: aload_0
      42: getfield      #23                 // Field text:Z
      45: putfield      #24                 // Field nextText:Z
      48: aload_0
      49: getfield      #28                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      52: invokevirtual #85                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
      55: pop
      56: new           #145                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferFlushSendHandler
      59: dup
      60: aload_0
      61: getfield      #28                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      64: aload_1
      65: invokevirtual #146                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
      68: invokespecial #147                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferFlushSendHandler."<init>":(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
      71: astore_2
      72: aload_0
      73: aload_2
      74: aload_1
      75: invokevirtual #148                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
      78: iconst_1
      79: anewarray     #149                // class java/nio/ByteBuffer
      82: dup
      83: iconst_0
      84: aload_0
      85: getfield      #28                 // Field outputBuffer:Ljava/nio/ByteBuffer;
      88: aastore
      89: invokevirtual #150                // Method doWrite:(Ljavax/websocket/SendHandler;J[Ljava/nio/ByteBuffer;)V
      92: return
      93: aload_1
      94: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
      97: invokestatic  #151                // Method org/apache/tomcat/websocket/Util.isControl:(B)Z
     100: ifeq          138
     103: aload_0
     104: aload_0
     105: getfield      #21                 // Field fragmented:Z
     108: putfield      #22                 // Field nextFragmented:Z
     111: aload_0
     112: aload_0
     113: getfield      #23                 // Field text:Z
     116: putfield      #24                 // Field nextText:Z
     119: aload_1
     120: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     123: bipush        8
     125: if_icmpne     133
     128: aload_0
     129: iconst_1
     130: putfield      #1                  // Field closed:Z
     133: iconst_1
     134: istore_2
     135: goto          233
     138: aload_1
     139: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     142: invokestatic  #152                // Method org/apache/tomcat/websocket/Util.isText:(B)Z
     145: istore_3
     146: aload_0
     147: getfield      #21                 // Field fragmented:Z
     150: ifeq          206
     153: aload_0
     154: getfield      #23                 // Field text:Z
     157: iload_3
     158: if_icmpeq     177
     161: new           #142                // class java/lang/IllegalStateException
     164: dup
     165: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     168: ldc           #153                // String wsRemoteEndpoint.changeType
     170: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
     173: invokespecial #144                // Method java/lang/IllegalStateException."<init>":(Ljava/lang/String;)V
     176: athrow
     177: aload_0
     178: aload_0
     179: getfield      #23                 // Field text:Z
     182: putfield      #24                 // Field nextText:Z
     185: aload_0
     186: aload_1
     187: invokevirtual #154                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     190: ifne          197
     193: iconst_1
     194: goto          198
     197: iconst_0
     198: putfield      #22                 // Field nextFragmented:Z
     201: iconst_0
     202: istore_2
     203: goto          233
     206: aload_1
     207: invokevirtual #154                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     210: ifeq          221
     213: aload_0
     214: iconst_0
     215: putfield      #22                 // Field nextFragmented:Z
     218: goto          231
     221: aload_0
     222: iconst_1
     223: putfield      #22                 // Field nextFragmented:Z
     226: aload_0
     227: iload_3
     228: putfield      #24                 // Field nextText:Z
     231: iconst_1
     232: istore_2
     233: aload_0
     234: invokevirtual #155                // Method isMasked:()Z
     237: ifeq          247
     240: invokestatic  #156                // Method org/apache/tomcat/websocket/Util.generateMask:()[B
     243: astore_3
     244: goto          249
     247: aconst_null
     248: astore_3
     249: aload_0
     250: getfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     253: invokevirtual #80                 // Method java/nio/ByteBuffer.clear:()Ljava/nio/Buffer;
     256: pop
     257: aload_0
     258: getfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     261: aload_1
     262: invokevirtual #154                // Method org/apache/tomcat/websocket/MessagePart.isFin:()Z
     265: aload_1
     266: invokevirtual #157                // Method org/apache/tomcat/websocket/MessagePart.getRsv:()I
     269: aload_1
     270: invokevirtual #134                // Method org/apache/tomcat/websocket/MessagePart.getOpCode:()B
     273: aload_0
     274: invokevirtual #155                // Method isMasked:()Z
     277: aload_1
     278: invokevirtual #158                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     281: aload_3
     282: iload_2
     283: invokestatic  #159                // Method writeHeader:(Ljava/nio/ByteBuffer;ZIBZLjava/nio/ByteBuffer;[BZ)V
     286: aload_0
     287: getfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     290: invokevirtual #85                 // Method java/nio/ByteBuffer.flip:()Ljava/nio/Buffer;
     293: pop
     294: aload_0
     295: invokevirtual #135                // Method getBatchingAllowed:()Z
     298: ifne          308
     301: aload_0
     302: invokevirtual #155                // Method isMasked:()Z
     305: ifeq          359
     308: new           #160                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler
     311: dup
     312: aload_1
     313: invokevirtual #146                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
     316: aload_1
     317: invokevirtual #148                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
     320: aload_0
     321: getfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     324: aload_1
     325: invokevirtual #158                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     328: aload_3
     329: aload_0
     330: getfield      #28                 // Field outputBuffer:Ljava/nio/ByteBuffer;
     333: aload_0
     334: invokevirtual #135                // Method getBatchingAllowed:()Z
     337: ifne          344
     340: iconst_1
     341: goto          345
     344: iconst_0
     345: aload_0
     346: invokespecial #161                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler."<init>":(Ljavax/websocket/SendHandler;JLjava/nio/ByteBuffer;Ljava/nio/ByteBuffer;[BLjava/nio/ByteBuffer;ZLorg/apache/tomcat/websocket/WsRemoteEndpointImplBase;)V
     349: astore        4
     351: aload         4
     353: invokevirtual #162                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$OutputBufferSendHandler.write:()V
     356: goto          389
     359: aload_0
     360: aload_1
     361: invokevirtual #146                // Method org/apache/tomcat/websocket/MessagePart.getEndHandler:()Ljavax/websocket/SendHandler;
     364: aload_1
     365: invokevirtual #148                // Method org/apache/tomcat/websocket/MessagePart.getBlockingWriteTimeoutExpiry:()J
     368: iconst_2
     369: anewarray     #149                // class java/nio/ByteBuffer
     372: dup
     373: iconst_0
     374: aload_0
     375: getfield      #26                 // Field headerBuffer:Ljava/nio/ByteBuffer;
     378: aastore
     379: dup
     380: iconst_1
     381: aload_1
     382: invokevirtual #158                // Method org/apache/tomcat/websocket/MessagePart.getPayload:()Ljava/nio/ByteBuffer;
     385: aastore
     386: invokevirtual #150                // Method doWrite:(Ljavax/websocket/SendHandler;J[Ljava/nio/ByteBuffer;)V
     389: return

  private long getBlockingSendTimeout();
    Code:
       0: aload_0
       1: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       4: invokevirtual #163                // Method org/apache/tomcat/websocket/WsSession.getUserProperties:()Ljava/util/Map;
       7: ldc           #164                // String org.apache.tomcat.websocket.BLOCKING_SEND_TIMEOUT
       9: invokeinterface #165,  2          // InterfaceMethod java/util/Map.get:(Ljava/lang/Object;)Ljava/lang/Object;
      14: astore_1
      15: aconst_null
      16: astore_2
      17: aload_1
      18: instanceof    #88                 // class java/lang/Long
      21: ifeq          29
      24: aload_1
      25: checkcast     #88                 // class java/lang/Long
      28: astore_2
      29: aload_2
      30: ifnonnull     37
      33: ldc2_w        #166                // long 20000l
      36: lreturn
      37: aload_2
      38: invokevirtual #168                // Method java/lang/Long.longValue:()J
      41: lreturn

  public void sendObject(java.lang.Object) throws java.io.IOException, javax.websocket.EncodeException;
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_0
      21: aload_1
      22: invokespecial #169                // Method findEncoder:(Ljava/lang/Object;)Ljavax/websocket/Encoder;
      25: astore_2
      26: aload_2
      27: ifnonnull     51
      30: aload_1
      31: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      34: invokestatic  #171                // Method org/apache/tomcat/websocket/Util.isPrimitive:(Ljava/lang/Class;)Z
      37: ifeq          51
      40: aload_1
      41: invokevirtual #172                // Method java/lang/Object.toString:()Ljava/lang/String;
      44: astore_3
      45: aload_0
      46: aload_3
      47: invokevirtual #173                // Method sendString:(Ljava/lang/String;)V
      50: return
      51: aload_2
      52: ifnonnull     84
      55: ldc           #174                // class "[B"
      57: aload_1
      58: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      61: invokevirtual #175                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      64: ifeq          84
      67: aload_1
      68: checkcast     #174                // class "[B"
      71: checkcast     #174                // class "[B"
      74: invokestatic  #176                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
      77: astore_3
      78: aload_0
      79: aload_3
      80: invokevirtual #177                // Method sendBytes:(Ljava/nio/ByteBuffer;)V
      83: return
      84: aload_2
      85: instanceof    #178                // class javax/websocket/Encoder$Text
      88: ifeq          110
      91: aload_2
      92: checkcast     #178                // class javax/websocket/Encoder$Text
      95: aload_1
      96: invokeinterface #179,  2          // InterfaceMethod javax/websocket/Encoder$Text.encode:(Ljava/lang/Object;)Ljava/lang/String;
     101: astore_3
     102: aload_0
     103: aload_3
     104: invokevirtual #173                // Method sendString:(Ljava/lang/String;)V
     107: goto          384
     110: aload_2
     111: instanceof    #180                // class javax/websocket/Encoder$TextStream
     114: ifeq          220
     117: aload_0
     118: invokevirtual #181                // Method getSendWriter:()Ljava/io/Writer;
     121: astore_3
     122: aconst_null
     123: astore        4
     125: aload_2
     126: checkcast     #180                // class javax/websocket/Encoder$TextStream
     129: aload_1
     130: aload_3
     131: invokeinterface #182,  3          // InterfaceMethod javax/websocket/Encoder$TextStream.encode:(Ljava/lang/Object;Ljava/io/Writer;)V
     136: aload_3
     137: ifnull        217
     140: aload         4
     142: ifnull        164
     145: aload_3
     146: invokevirtual #183                // Method java/io/Writer.close:()V
     149: goto          217
     152: astore        5
     154: aload         4
     156: aload         5
     158: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     161: goto          217
     164: aload_3
     165: invokevirtual #183                // Method java/io/Writer.close:()V
     168: goto          217
     171: astore        5
     173: aload         5
     175: astore        4
     177: aload         5
     179: athrow
     180: astore        6
     182: aload_3
     183: ifnull        214
     186: aload         4
     188: ifnull        210
     191: aload_3
     192: invokevirtual #183                // Method java/io/Writer.close:()V
     195: goto          214
     198: astore        7
     200: aload         4
     202: aload         7
     204: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     207: goto          214
     210: aload_3
     211: invokevirtual #183                // Method java/io/Writer.close:()V
     214: aload         6
     216: athrow
     217: goto          384
     220: aload_2
     221: instanceof    #185                // class javax/websocket/Encoder$Binary
     224: ifeq          246
     227: aload_2
     228: checkcast     #185                // class javax/websocket/Encoder$Binary
     231: aload_1
     232: invokeinterface #186,  2          // InterfaceMethod javax/websocket/Encoder$Binary.encode:(Ljava/lang/Object;)Ljava/nio/ByteBuffer;
     237: astore_3
     238: aload_0
     239: aload_3
     240: invokevirtual #177                // Method sendBytes:(Ljava/nio/ByteBuffer;)V
     243: goto          384
     246: aload_2
     247: instanceof    #187                // class javax/websocket/Encoder$BinaryStream
     250: ifeq          356
     253: aload_0
     254: invokevirtual #188                // Method getSendStream:()Ljava/io/OutputStream;
     257: astore_3
     258: aconst_null
     259: astore        4
     261: aload_2
     262: checkcast     #187                // class javax/websocket/Encoder$BinaryStream
     265: aload_1
     266: aload_3
     267: invokeinterface #189,  3          // InterfaceMethod javax/websocket/Encoder$BinaryStream.encode:(Ljava/lang/Object;Ljava/io/OutputStream;)V
     272: aload_3
     273: ifnull        353
     276: aload         4
     278: ifnull        300
     281: aload_3
     282: invokevirtual #190                // Method java/io/OutputStream.close:()V
     285: goto          353
     288: astore        5
     290: aload         4
     292: aload         5
     294: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     297: goto          353
     300: aload_3
     301: invokevirtual #190                // Method java/io/OutputStream.close:()V
     304: goto          353
     307: astore        5
     309: aload         5
     311: astore        4
     313: aload         5
     315: athrow
     316: astore        8
     318: aload_3
     319: ifnull        350
     322: aload         4
     324: ifnull        346
     327: aload_3
     328: invokevirtual #190                // Method java/io/OutputStream.close:()V
     331: goto          350
     334: astore        9
     336: aload         4
     338: aload         9
     340: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     343: goto          350
     346: aload_3
     347: invokevirtual #190                // Method java/io/OutputStream.close:()V
     350: aload         8
     352: athrow
     353: goto          384
     356: new           #191                // class javax/websocket/EncodeException
     359: dup
     360: aload_1
     361: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     364: ldc           #192                // String wsRemoteEndpoint.noEncoder
     366: iconst_1
     367: anewarray     #19                 // class java/lang/Object
     370: dup
     371: iconst_0
     372: aload_1
     373: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
     376: aastore
     377: invokevirtual #193                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     380: invokespecial #194                // Method javax/websocket/EncodeException."<init>":(Ljava/lang/Object;Ljava/lang/String;)V
     383: athrow
     384: return
    Exception table:
       from    to  target type
         145   149   152   Class java/lang/Throwable
         125   136   171   Class java/lang/Throwable
         125   136   180   any
         191   195   198   Class java/lang/Throwable
         171   182   180   any
         281   285   288   Class java/lang/Throwable
         261   272   307   Class java/lang/Throwable
         261   272   316   any
         327   331   334   Class java/lang/Throwable
         307   318   316   any

  public java.util.concurrent.Future<java.lang.Void> sendObjectByFuture(java.lang.Object);
    Code:
       0: new           #54                 // class org/apache/tomcat/websocket/FutureToSendHandler
       3: dup
       4: aload_0
       5: getfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       8: invokespecial #56                 // Method org/apache/tomcat/websocket/FutureToSendHandler."<init>":(Lorg/apache/tomcat/websocket/WsSession;)V
      11: astore_2
      12: aload_0
      13: aload_1
      14: aload_2
      15: invokevirtual #195                // Method sendObjectByCompletion:(Ljava/lang/Object;Ljavax/websocket/SendHandler;)V
      18: aload_2
      19: areturn

  public void sendObjectByCompletion(java.lang.Object, javax.websocket.SendHandler);
    Code:
       0: aload_1
       1: ifnonnull     20
       4: new           #47                 // class java/lang/IllegalArgumentException
       7: dup
       8: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      11: ldc           #49                 // String wsRemoteEndpoint.nullData
      13: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      16: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      19: athrow
      20: aload_2
      21: ifnonnull     40
      24: new           #47                 // class java/lang/IllegalArgumentException
      27: dup
      28: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      31: ldc           #58                 // String wsRemoteEndpoint.nullHandler
      33: invokevirtual #50                 // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;)Ljava/lang/String;
      36: invokespecial #51                 // Method java/lang/IllegalArgumentException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_0
      41: aload_1
      42: invokespecial #169                // Method findEncoder:(Ljava/lang/Object;)Ljavax/websocket/Encoder;
      45: astore_3
      46: aload_3
      47: ifnonnull     74
      50: aload_1
      51: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      54: invokestatic  #171                // Method org/apache/tomcat/websocket/Util.isPrimitive:(Ljava/lang/Class;)Z
      57: ifeq          74
      60: aload_1
      61: invokevirtual #172                // Method java/lang/Object.toString:()Ljava/lang/String;
      64: astore        4
      66: aload_0
      67: aload         4
      69: aload_2
      70: invokevirtual #68                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
      73: return
      74: aload_3
      75: ifnonnull     110
      78: ldc           #174                // class "[B"
      80: aload_1
      81: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      84: invokevirtual #175                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      87: ifeq          110
      90: aload_1
      91: checkcast     #174                // class "[B"
      94: checkcast     #174                // class "[B"
      97: invokestatic  #176                // Method java/nio/ByteBuffer.wrap:([B)Ljava/nio/ByteBuffer;
     100: astore        4
     102: aload_0
     103: aload         4
     105: aload_2
     106: invokevirtual #57                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
     109: return
     110: aload_3
     111: instanceof    #178                // class javax/websocket/Encoder$Text
     114: ifeq          139
     117: aload_3
     118: checkcast     #178                // class javax/websocket/Encoder$Text
     121: aload_1
     122: invokeinterface #179,  2          // InterfaceMethod javax/websocket/Encoder$Text.encode:(Ljava/lang/Object;)Ljava/lang/String;
     127: astore        4
     129: aload_0
     130: aload         4
     132: aload_2
     133: invokevirtual #68                 // Method sendStringByCompletion:(Ljava/lang/String;Ljavax/websocket/SendHandler;)V
     136: goto          458
     139: aload_3
     140: instanceof    #180                // class javax/websocket/Encoder$TextStream
     143: ifeq          270
     146: aload_0
     147: invokevirtual #181                // Method getSendWriter:()Ljava/io/Writer;
     150: astore        4
     152: aconst_null
     153: astore        5
     155: aload_3
     156: checkcast     #180                // class javax/websocket/Encoder$TextStream
     159: aload_1
     160: aload         4
     162: invokeinterface #182,  3          // InterfaceMethod javax/websocket/Encoder$TextStream.encode:(Ljava/lang/Object;Ljava/io/Writer;)V
     167: aload         4
     169: ifnull        254
     172: aload         5
     174: ifnull        197
     177: aload         4
     179: invokevirtual #183                // Method java/io/Writer.close:()V
     182: goto          254
     185: astore        6
     187: aload         5
     189: aload         6
     191: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     194: goto          254
     197: aload         4
     199: invokevirtual #183                // Method java/io/Writer.close:()V
     202: goto          254
     205: astore        6
     207: aload         6
     209: astore        5
     211: aload         6
     213: athrow
     214: astore        7
     216: aload         4
     218: ifnull        251
     221: aload         5
     223: ifnull        246
     226: aload         4
     228: invokevirtual #183                // Method java/io/Writer.close:()V
     231: goto          251
     234: astore        8
     236: aload         5
     238: aload         8
     240: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     243: goto          251
     246: aload         4
     248: invokevirtual #183                // Method java/io/Writer.close:()V
     251: aload         7
     253: athrow
     254: aload_2
     255: new           #129                // class javax/websocket/SendResult
     258: dup
     259: invokespecial #132                // Method javax/websocket/SendResult."<init>":()V
     262: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     267: goto          458
     270: aload_3
     271: instanceof    #185                // class javax/websocket/Encoder$Binary
     274: ifeq          299
     277: aload_3
     278: checkcast     #185                // class javax/websocket/Encoder$Binary
     281: aload_1
     282: invokeinterface #186,  2          // InterfaceMethod javax/websocket/Encoder$Binary.encode:(Ljava/lang/Object;)Ljava/nio/ByteBuffer;
     287: astore        4
     289: aload_0
     290: aload         4
     292: aload_2
     293: invokevirtual #57                 // Method sendBytesByCompletion:(Ljava/nio/ByteBuffer;Ljavax/websocket/SendHandler;)V
     296: goto          458
     299: aload_3
     300: instanceof    #187                // class javax/websocket/Encoder$BinaryStream
     303: ifeq          430
     306: aload_0
     307: invokevirtual #188                // Method getSendStream:()Ljava/io/OutputStream;
     310: astore        4
     312: aconst_null
     313: astore        5
     315: aload_3
     316: checkcast     #187                // class javax/websocket/Encoder$BinaryStream
     319: aload_1
     320: aload         4
     322: invokeinterface #189,  3          // InterfaceMethod javax/websocket/Encoder$BinaryStream.encode:(Ljava/lang/Object;Ljava/io/OutputStream;)V
     327: aload         4
     329: ifnull        414
     332: aload         5
     334: ifnull        357
     337: aload         4
     339: invokevirtual #190                // Method java/io/OutputStream.close:()V
     342: goto          414
     345: astore        6
     347: aload         5
     349: aload         6
     351: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     354: goto          414
     357: aload         4
     359: invokevirtual #190                // Method java/io/OutputStream.close:()V
     362: goto          414
     365: astore        6
     367: aload         6
     369: astore        5
     371: aload         6
     373: athrow
     374: astore        9
     376: aload         4
     378: ifnull        411
     381: aload         5
     383: ifnull        406
     386: aload         4
     388: invokevirtual #190                // Method java/io/OutputStream.close:()V
     391: goto          411
     394: astore        10
     396: aload         5
     398: aload         10
     400: invokevirtual #184                // Method java/lang/Throwable.addSuppressed:(Ljava/lang/Throwable;)V
     403: goto          411
     406: aload         4
     408: invokevirtual #190                // Method java/io/OutputStream.close:()V
     411: aload         9
     413: athrow
     414: aload_2
     415: new           #129                // class javax/websocket/SendResult
     418: dup
     419: invokespecial #132                // Method javax/websocket/SendResult."<init>":()V
     422: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     427: goto          458
     430: new           #191                // class javax/websocket/EncodeException
     433: dup
     434: aload_1
     435: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
     438: ldc           #192                // String wsRemoteEndpoint.noEncoder
     440: iconst_1
     441: anewarray     #19                 // class java/lang/Object
     444: dup
     445: iconst_0
     446: aload_1
     447: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
     450: aastore
     451: invokevirtual #193                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
     454: invokespecial #194                // Method javax/websocket/EncodeException."<init>":(Ljava/lang/Object;Ljava/lang/String;)V
     457: athrow
     458: goto          482
     461: astore        4
     463: new           #129                // class javax/websocket/SendResult
     466: dup
     467: aload         4
     469: invokespecial #130                // Method javax/websocket/SendResult."<init>":(Ljava/lang/Throwable;)V
     472: astore        5
     474: aload_2
     475: aload         5
     477: invokeinterface #131,  2          // InterfaceMethod javax/websocket/SendHandler.onResult:(Ljavax/websocket/SendResult;)V
     482: return
    Exception table:
       from    to  target type
         177   182   185   Class java/lang/Throwable
         155   167   205   Class java/lang/Throwable
         155   167   214   any
         226   231   234   Class java/lang/Throwable
         205   216   214   any
         337   342   345   Class java/lang/Throwable
         315   327   365   Class java/lang/Throwable
         315   327   374   any
         386   391   394   Class java/lang/Throwable
         365   376   374   any
         110   458   461   Class java/lang/Exception

  protected void setSession(org.apache.tomcat.websocket.WsSession);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #55                 // Field wsSession:Lorg/apache/tomcat/websocket/WsSession;
       5: return

  protected void setEncoders(javax.websocket.EndpointConfig) throws javax.websocket.DeploymentException;
    Code:
       0: aload_0
       1: getfield      #41                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #197,  1          // InterfaceMethod java/util/List.clear:()V
       9: aload_1
      10: invokeinterface #198,  1          // InterfaceMethod javax/websocket/EndpointConfig.getEncoders:()Ljava/util/List;
      15: invokeinterface #114,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
      20: astore_2
      21: aload_2
      22: invokeinterface #115,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      27: ifeq          132
      30: aload_2
      31: invokeinterface #116,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      36: checkcast     #199                // class java/lang/Class
      39: astore_3
      40: aload_3
      41: iconst_0
      42: anewarray     #199                // class java/lang/Class
      45: invokevirtual #200                // Method java/lang/Class.getConstructor:([Ljava/lang/Class;)Ljava/lang/reflect/Constructor;
      48: iconst_0
      49: anewarray     #19                 // class java/lang/Object
      52: invokevirtual #201                // Method java/lang/reflect/Constructor.newInstance:([Ljava/lang/Object;)Ljava/lang/Object;
      55: checkcast     #202                // class javax/websocket/Encoder
      58: astore        4
      60: aload         4
      62: aload_1
      63: invokeinterface #203,  2          // InterfaceMethod javax/websocket/Encoder.init:(Ljavax/websocket/EndpointConfig;)V
      68: goto          102
      71: astore        5
      73: new           #205                // class javax/websocket/DeploymentException
      76: dup
      77: getstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
      80: ldc           #206                // String wsRemoteEndpoint.invalidEncoder
      82: iconst_1
      83: anewarray     #19                 // class java/lang/Object
      86: dup
      87: iconst_0
      88: aload_3
      89: invokevirtual #207                // Method java/lang/Class.getName:()Ljava/lang/String;
      92: aastore
      93: invokevirtual #193                // Method org/apache/tomcat/util/res/StringManager.getString:(Ljava/lang/String;[Ljava/lang/Object;)Ljava/lang/String;
      96: aload         5
      98: invokespecial #208                // Method javax/websocket/DeploymentException."<init>":(Ljava/lang/String;Ljava/lang/Throwable;)V
     101: athrow
     102: new           #209                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
     105: dup
     106: aload_3
     107: invokestatic  #210                // Method org/apache/tomcat/websocket/Util.getEncoderType:(Ljava/lang/Class;)Ljava/lang/Class;
     110: aload         4
     112: invokespecial #211                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry."<init>":(Ljava/lang/Class;Ljavax/websocket/Encoder;)V
     115: astore        5
     117: aload_0
     118: getfield      #41                 // Field encoderEntries:Ljava/util/List;
     121: aload         5
     123: invokeinterface #97,  2           // InterfaceMethod java/util/List.add:(Ljava/lang/Object;)Z
     128: pop
     129: goto          21
     132: return
    Exception table:
       from    to  target type
          40    68    71   Class java/lang/ReflectiveOperationException

  private javax.websocket.Encoder findEncoder(java.lang.Object);
    Code:
       0: aload_0
       1: getfield      #41                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #114,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_2
      10: aload_2
      11: invokeinterface #115,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          51
      19: aload_2
      20: invokeinterface #116,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #209                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
      28: astore_3
      29: aload_3
      30: invokevirtual #212                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getClazz:()Ljava/lang/Class;
      33: aload_1
      34: invokevirtual #170                // Method java/lang/Object.getClass:()Ljava/lang/Class;
      37: invokevirtual #175                // Method java/lang/Class.isAssignableFrom:(Ljava/lang/Class;)Z
      40: ifeq          48
      43: aload_3
      44: invokevirtual #213                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getEncoder:()Ljavax/websocket/Encoder;
      47: areturn
      48: goto          10
      51: aconst_null
      52: areturn

  public final void close();
    Code:
       0: aload_0
       1: getfield      #41                 // Field encoderEntries:Ljava/util/List;
       4: invokeinterface #114,  1          // InterfaceMethod java/util/List.iterator:()Ljava/util/Iterator;
       9: astore_1
      10: aload_1
      11: invokeinterface #115,  1          // InterfaceMethod java/util/Iterator.hasNext:()Z
      16: ifeq          41
      19: aload_1
      20: invokeinterface #116,  1          // InterfaceMethod java/util/Iterator.next:()Ljava/lang/Object;
      25: checkcast     #209                // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry
      28: astore_2
      29: aload_2
      30: invokevirtual #213                // Method org/apache/tomcat/websocket/WsRemoteEndpointImplBase$EncoderEntry.getEncoder:()Ljavax/websocket/Encoder;
      33: invokeinterface #214,  1          // InterfaceMethod javax/websocket/Encoder.destroy:()V
      38: goto          10
      41: aload_0
      42: getfield      #12                 // Field transformation:Lorg/apache/tomcat/websocket/Transformation;
      45: invokeinterface #215,  1          // InterfaceMethod org/apache/tomcat/websocket/Transformation.close:()V
      50: aload_0
      51: invokevirtual #216                // Method doClose:()V
      54: return

  protected abstract void doWrite(javax.websocket.SendHandler, long, java.nio.ByteBuffer...);

  protected abstract boolean isMasked();

  protected abstract void doClose();

  private static void writeHeader(java.nio.ByteBuffer, boolean, int, byte, boolean, java.nio.ByteBuffer, byte[], boolean);
    Code:
       0: iconst_0
       1: istore        8
       3: iload_1
       4: ifeq          16
       7: iload         8
       9: sipush        128
      12: isub
      13: i2b
      14: istore        8
      16: iload         8
      18: iload_2
      19: iconst_4
      20: ishl
      21: iadd
      22: i2b
      23: istore        8
      25: iload         7
      27: ifeq          37
      30: iload         8
      32: iload_3
      33: iadd
      34: i2b
      35: istore        8
      37: aload_0
      38: iload         8
      40: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
      43: pop
      44: iload         4
      46: ifeq          56
      49: bipush        -128
      51: istore        8
      53: goto          59
      56: iconst_0
      57: istore        8
      59: aload         5
      61: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
      64: bipush        126
      66: if_icmpge     86
      69: aload_0
      70: aload         5
      72: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
      75: iload         8
      77: ior
      78: i2b
      79: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
      82: pop
      83: goto          231
      86: aload         5
      88: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
      91: ldc           #218                // int 65536
      93: if_icmpge     139
      96: aload_0
      97: bipush        126
      99: iload         8
     101: ior
     102: i2b
     103: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     106: pop
     107: aload_0
     108: aload         5
     110: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     113: bipush        8
     115: iushr
     116: i2b
     117: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     120: pop
     121: aload_0
     122: aload         5
     124: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     127: sipush        255
     130: iand
     131: i2b
     132: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     135: pop
     136: goto          231
     139: aload_0
     140: bipush        127
     142: iload         8
     144: ior
     145: i2b
     146: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     149: pop
     150: aload_0
     151: iconst_0
     152: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     155: pop
     156: aload_0
     157: iconst_0
     158: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     161: pop
     162: aload_0
     163: iconst_0
     164: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     167: pop
     168: aload_0
     169: iconst_0
     170: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     173: pop
     174: aload_0
     175: aload         5
     177: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     180: bipush        24
     182: iushr
     183: i2b
     184: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     187: pop
     188: aload_0
     189: aload         5
     191: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     194: bipush        16
     196: iushr
     197: i2b
     198: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     201: pop
     202: aload_0
     203: aload         5
     205: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     208: bipush        8
     210: iushr
     211: i2b
     212: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     215: pop
     216: aload_0
     217: aload         5
     219: invokevirtual #63                 // Method java/nio/ByteBuffer.remaining:()I
     222: sipush        255
     225: iand
     226: i2b
     227: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     230: pop
     231: iload         4
     233: ifeq          272
     236: aload_0
     237: aload         6
     239: iconst_0
     240: baload
     241: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     244: pop
     245: aload_0
     246: aload         6
     248: iconst_1
     249: baload
     250: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     253: pop
     254: aload_0
     255: aload         6
     257: iconst_2
     258: baload
     259: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     262: pop
     263: aload_0
     264: aload         6
     266: iconst_3
     267: baload
     268: invokevirtual #217                // Method java/nio/ByteBuffer.put:(B)Ljava/nio/ByteBuffer;
     271: pop
     272: return

  static org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine access$200(org.apache.tomcat.websocket.WsRemoteEndpointImplBase);
    Code:
       0: aload_0
       1: getfield      #2                  // Field stateMachine:Lorg/apache/tomcat/websocket/WsRemoteEndpointImplBase$StateMachine;
       4: areturn

  static boolean access$300(org.apache.tomcat.websocket.WsRemoteEndpointImplBase);
    Code:
       0: aload_0
       1: getfield      #1                  // Field closed:Z
       4: ireturn

  static {};
    Code:
       0: ldc           #4                  // class org/apache/tomcat/websocket/WsRemoteEndpointImplBase
       2: invokestatic  #219                // Method org/apache/tomcat/util/res/StringManager.getManager:(Ljava/lang/Class;)Lorg/apache/tomcat/util/res/StringManager;
       5: putstatic     #48                 // Field sm:Lorg/apache/tomcat/util/res/StringManager;
       8: new           #129                // class javax/websocket/SendResult
      11: dup
      12: invokespecial #132                // Method javax/websocket/SendResult."<init>":()V
      15: putstatic     #220                // Field SENDRESULT_OK:Ljavax/websocket/SendResult;
      18: return
}

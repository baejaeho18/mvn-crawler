Compiled from "WebSocketReader.java"
final class okhttp3.internal.ws.WebSocketReader {
  final boolean isClient;

  final okio.BufferedSource source;

  final okhttp3.internal.ws.WebSocketReader$FrameCallback frameCallback;

  boolean closed;

  int opcode;

  long frameLength;

  boolean isFinalFrame;

  boolean isControlFrame;

  private final okio.Buffer controlFrameBuffer;

  private final okio.Buffer messageFrameBuffer;

  private final byte[] maskKey;

  private final okio.Buffer$UnsafeCursor maskCursor;

  okhttp3.internal.ws.WebSocketReader(boolean, okio.BufferedSource, okhttp3.internal.ws.WebSocketReader$FrameCallback);
    Code:
       0: aload_0
       1: invokespecial #2                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: new           #3                  // class okio/Buffer
       8: dup
       9: invokespecial #4                  // Method okio/Buffer."<init>":()V
      12: putfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
      15: aload_0
      16: new           #3                  // class okio/Buffer
      19: dup
      20: invokespecial #4                  // Method okio/Buffer."<init>":()V
      23: putfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      26: aload_2
      27: ifnonnull     40
      30: new           #7                  // class java/lang/NullPointerException
      33: dup
      34: ldc           #8                  // String source == null
      36: invokespecial #9                  // Method java/lang/NullPointerException."<init>":(Ljava/lang/String;)V
      39: athrow
      40: aload_3
      41: ifnonnull     54
      44: new           #7                  // class java/lang/NullPointerException
      47: dup
      48: ldc           #10                 // String frameCallback == null
      50: invokespecial #9                  // Method java/lang/NullPointerException."<init>":(Ljava/lang/String;)V
      53: athrow
      54: aload_0
      55: iload_1
      56: putfield      #11                 // Field isClient:Z
      59: aload_0
      60: aload_2
      61: putfield      #12                 // Field source:Lokio/BufferedSource;
      64: aload_0
      65: aload_3
      66: putfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
      69: aload_0
      70: iload_1
      71: ifeq          78
      74: aconst_null
      75: goto          81
      78: iconst_4
      79: newarray       byte
      81: putfield      #14                 // Field maskKey:[B
      84: aload_0
      85: iload_1
      86: ifeq          93
      89: aconst_null
      90: goto          100
      93: new           #15                 // class okio/Buffer$UnsafeCursor
      96: dup
      97: invokespecial #16                 // Method okio/Buffer$UnsafeCursor."<init>":()V
     100: putfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
     103: return

  void processNextFrame() throws java.io.IOException;
    Code:
       0: aload_0
       1: invokespecial #18                 // Method readHeader:()V
       4: aload_0
       5: getfield      #19                 // Field isControlFrame:Z
       8: ifeq          18
      11: aload_0
      12: invokespecial #20                 // Method readControlFrame:()V
      15: goto          22
      18: aload_0
      19: invokespecial #21                 // Method readMessageFrame:()V
      22: return

  private void readHeader() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #22                 // Field closed:Z
       4: ifeq          17
       7: new           #23                 // class java/io/IOException
      10: dup
      11: ldc           #24                 // String closed
      13: invokespecial #25                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: getfield      #12                 // Field source:Lokio/BufferedSource;
      21: invokeinterface #26,  1           // InterfaceMethod okio/BufferedSource.timeout:()Lokio/Timeout;
      26: invokevirtual #27                 // Method okio/Timeout.timeoutNanos:()J
      29: lstore_2
      30: aload_0
      31: getfield      #12                 // Field source:Lokio/BufferedSource;
      34: invokeinterface #26,  1           // InterfaceMethod okio/BufferedSource.timeout:()Lokio/Timeout;
      39: invokevirtual #28                 // Method okio/Timeout.clearTimeout:()Lokio/Timeout;
      42: pop
      43: aload_0
      44: getfield      #12                 // Field source:Lokio/BufferedSource;
      47: invokeinterface #29,  1           // InterfaceMethod okio/BufferedSource.readByte:()B
      52: sipush        255
      55: iand
      56: istore_1
      57: aload_0
      58: getfield      #12                 // Field source:Lokio/BufferedSource;
      61: invokeinterface #26,  1           // InterfaceMethod okio/BufferedSource.timeout:()Lokio/Timeout;
      66: lload_2
      67: getstatic     #30                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      70: invokevirtual #31                 // Method okio/Timeout.timeout:(JLjava/util/concurrent/TimeUnit;)Lokio/Timeout;
      73: pop
      74: goto          99
      77: astore        4
      79: aload_0
      80: getfield      #12                 // Field source:Lokio/BufferedSource;
      83: invokeinterface #26,  1           // InterfaceMethod okio/BufferedSource.timeout:()Lokio/Timeout;
      88: lload_2
      89: getstatic     #30                 // Field java/util/concurrent/TimeUnit.NANOSECONDS:Ljava/util/concurrent/TimeUnit;
      92: invokevirtual #31                 // Method okio/Timeout.timeout:(JLjava/util/concurrent/TimeUnit;)Lokio/Timeout;
      95: pop
      96: aload         4
      98: athrow
      99: aload_0
     100: iload_1
     101: bipush        15
     103: iand
     104: putfield      #32                 // Field opcode:I
     107: aload_0
     108: iload_1
     109: sipush        128
     112: iand
     113: ifeq          120
     116: iconst_1
     117: goto          121
     120: iconst_0
     121: putfield      #33                 // Field isFinalFrame:Z
     124: aload_0
     125: iload_1
     126: bipush        8
     128: iand
     129: ifeq          136
     132: iconst_1
     133: goto          137
     136: iconst_0
     137: putfield      #19                 // Field isControlFrame:Z
     140: aload_0
     141: getfield      #19                 // Field isControlFrame:Z
     144: ifeq          164
     147: aload_0
     148: getfield      #33                 // Field isFinalFrame:Z
     151: ifne          164
     154: new           #34                 // class java/net/ProtocolException
     157: dup
     158: ldc           #35                 // String Control frames must be final.
     160: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     163: athrow
     164: iload_1
     165: bipush        64
     167: iand
     168: ifeq          175
     171: iconst_1
     172: goto          176
     175: iconst_0
     176: istore        4
     178: iload_1
     179: bipush        32
     181: iand
     182: ifeq          189
     185: iconst_1
     186: goto          190
     189: iconst_0
     190: istore        5
     192: iload_1
     193: bipush        16
     195: iand
     196: ifeq          203
     199: iconst_1
     200: goto          204
     203: iconst_0
     204: istore        6
     206: iload         4
     208: ifne          221
     211: iload         5
     213: ifne          221
     216: iload         6
     218: ifeq          231
     221: new           #34                 // class java/net/ProtocolException
     224: dup
     225: ldc           #37                 // String Reserved flags are unsupported.
     227: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     230: athrow
     231: aload_0
     232: getfield      #12                 // Field source:Lokio/BufferedSource;
     235: invokeinterface #29,  1           // InterfaceMethod okio/BufferedSource.readByte:()B
     240: sipush        255
     243: iand
     244: istore        7
     246: iload         7
     248: sipush        128
     251: iand
     252: ifeq          259
     255: iconst_1
     256: goto          260
     259: iconst_0
     260: istore        8
     262: iload         8
     264: aload_0
     265: getfield      #11                 // Field isClient:Z
     268: if_icmpne     293
     271: new           #34                 // class java/net/ProtocolException
     274: dup
     275: aload_0
     276: getfield      #11                 // Field isClient:Z
     279: ifeq          287
     282: ldc           #38                 // String Server-sent frames must not be masked.
     284: goto          289
     287: ldc           #39                 // String Client-sent frames must be masked.
     289: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     292: athrow
     293: aload_0
     294: iload         7
     296: bipush        127
     298: iand
     299: i2l
     300: putfield      #40                 // Field frameLength:J
     303: aload_0
     304: getfield      #40                 // Field frameLength:J
     307: ldc2_w        #41                 // long 126l
     310: lcmp
     311: ifne          335
     314: aload_0
     315: aload_0
     316: getfield      #12                 // Field source:Lokio/BufferedSource;
     319: invokeinterface #43,  1           // InterfaceMethod okio/BufferedSource.readShort:()S
     324: i2l
     325: ldc2_w        #44                 // long 65535l
     328: land
     329: putfield      #40                 // Field frameLength:J
     332: goto          406
     335: aload_0
     336: getfield      #40                 // Field frameLength:J
     339: ldc2_w        #46                 // long 127l
     342: lcmp
     343: ifne          406
     346: aload_0
     347: aload_0
     348: getfield      #12                 // Field source:Lokio/BufferedSource;
     351: invokeinterface #48,  1           // InterfaceMethod okio/BufferedSource.readLong:()J
     356: putfield      #40                 // Field frameLength:J
     359: aload_0
     360: getfield      #40                 // Field frameLength:J
     363: lconst_0
     364: lcmp
     365: ifge          406
     368: new           #34                 // class java/net/ProtocolException
     371: dup
     372: new           #49                 // class java/lang/StringBuilder
     375: dup
     376: invokespecial #50                 // Method java/lang/StringBuilder."<init>":()V
     379: ldc           #51                 // String Frame length 0x
     381: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     384: aload_0
     385: getfield      #40                 // Field frameLength:J
     388: invokestatic  #53                 // Method java/lang/Long.toHexString:(J)Ljava/lang/String;
     391: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     394: ldc           #54                 // String  > 0x7FFFFFFFFFFFFFFF
     396: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     399: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     402: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     405: athrow
     406: aload_0
     407: getfield      #19                 // Field isControlFrame:Z
     410: ifeq          434
     413: aload_0
     414: getfield      #40                 // Field frameLength:J
     417: ldc2_w        #56                 // long 125l
     420: lcmp
     421: ifle          434
     424: new           #34                 // class java/net/ProtocolException
     427: dup
     428: ldc           #58                 // String Control frame must be less than 125B.
     430: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     433: athrow
     434: iload         8
     436: ifeq          452
     439: aload_0
     440: getfield      #12                 // Field source:Lokio/BufferedSource;
     443: aload_0
     444: getfield      #14                 // Field maskKey:[B
     447: invokeinterface #59,  2           // InterfaceMethod okio/BufferedSource.readFully:([B)V
     452: return
    Exception table:
       from    to  target type
          43    57    77   any
          77    79    77   any

  private void readControlFrame() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #40                 // Field frameLength:J
       4: lconst_0
       5: lcmp
       6: ifle          72
       9: aload_0
      10: getfield      #12                 // Field source:Lokio/BufferedSource;
      13: aload_0
      14: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
      17: aload_0
      18: getfield      #40                 // Field frameLength:J
      21: invokeinterface #60,  4           // InterfaceMethod okio/BufferedSource.readFully:(Lokio/Buffer;J)V
      26: aload_0
      27: getfield      #11                 // Field isClient:Z
      30: ifne          72
      33: aload_0
      34: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
      37: aload_0
      38: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      41: invokevirtual #61                 // Method okio/Buffer.readAndWriteUnsafe:(Lokio/Buffer$UnsafeCursor;)Lokio/Buffer$UnsafeCursor;
      44: pop
      45: aload_0
      46: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      49: lconst_0
      50: invokevirtual #62                 // Method okio/Buffer$UnsafeCursor.seek:(J)I
      53: pop
      54: aload_0
      55: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      58: aload_0
      59: getfield      #14                 // Field maskKey:[B
      62: invokestatic  #63                 // Method okhttp3/internal/ws/WebSocketProtocol.toggleMask:(Lokio/Buffer$UnsafeCursor;[B)V
      65: aload_0
      66: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      69: invokevirtual #64                 // Method okio/Buffer$UnsafeCursor.close:()V
      72: aload_0
      73: getfield      #32                 // Field opcode:I
      76: tableswitch   { // 8 to 10
                     8: 142
                     9: 104
                    10: 123
               default: 235
          }
     104: aload_0
     105: getfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
     108: aload_0
     109: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
     112: invokevirtual #65                 // Method okio/Buffer.readByteString:()Lokio/ByteString;
     115: invokeinterface #66,  2           // InterfaceMethod okhttp3/internal/ws/WebSocketReader$FrameCallback.onReadPing:(Lokio/ByteString;)V
     120: goto          268
     123: aload_0
     124: getfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
     127: aload_0
     128: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
     131: invokevirtual #65                 // Method okio/Buffer.readByteString:()Lokio/ByteString;
     134: invokeinterface #67,  2           // InterfaceMethod okhttp3/internal/ws/WebSocketReader$FrameCallback.onReadPong:(Lokio/ByteString;)V
     139: goto          268
     142: sipush        1005
     145: istore_1
     146: ldc           #68                 // String
     148: astore_2
     149: aload_0
     150: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
     153: invokevirtual #69                 // Method okio/Buffer.size:()J
     156: lstore_3
     157: lload_3
     158: lconst_1
     159: lcmp
     160: ifne          173
     163: new           #34                 // class java/net/ProtocolException
     166: dup
     167: ldc           #70                 // String Malformed close payload length of 1.
     169: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     172: athrow
     173: lload_3
     174: lconst_0
     175: lcmp
     176: ifeq          216
     179: aload_0
     180: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
     183: invokevirtual #71                 // Method okio/Buffer.readShort:()S
     186: istore_1
     187: aload_0
     188: getfield      #5                  // Field controlFrameBuffer:Lokio/Buffer;
     191: invokevirtual #72                 // Method okio/Buffer.readUtf8:()Ljava/lang/String;
     194: astore_2
     195: iload_1
     196: invokestatic  #73                 // Method okhttp3/internal/ws/WebSocketProtocol.closeCodeExceptionMessage:(I)Ljava/lang/String;
     199: astore        5
     201: aload         5
     203: ifnull        216
     206: new           #34                 // class java/net/ProtocolException
     209: dup
     210: aload         5
     212: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     215: athrow
     216: aload_0
     217: getfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
     220: iload_1
     221: aload_2
     222: invokeinterface #74,  3           // InterfaceMethod okhttp3/internal/ws/WebSocketReader$FrameCallback.onReadClose:(ILjava/lang/String;)V
     227: aload_0
     228: iconst_1
     229: putfield      #22                 // Field closed:Z
     232: goto          268
     235: new           #34                 // class java/net/ProtocolException
     238: dup
     239: new           #49                 // class java/lang/StringBuilder
     242: dup
     243: invokespecial #50                 // Method java/lang/StringBuilder."<init>":()V
     246: ldc           #75                 // String Unknown control opcode:
     248: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     251: aload_0
     252: getfield      #32                 // Field opcode:I
     255: invokestatic  #76                 // Method java/lang/Integer.toHexString:(I)Ljava/lang/String;
     258: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     261: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     264: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     267: athrow
     268: return

  private void readMessageFrame() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #32                 // Field opcode:I
       4: istore_1
       5: iload_1
       6: iconst_1
       7: if_icmpeq     45
      10: iload_1
      11: iconst_2
      12: if_icmpeq     45
      15: new           #34                 // class java/net/ProtocolException
      18: dup
      19: new           #49                 // class java/lang/StringBuilder
      22: dup
      23: invokespecial #50                 // Method java/lang/StringBuilder."<init>":()V
      26: ldc           #77                 // String Unknown opcode:
      28: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      31: iload_1
      32: invokestatic  #76                 // Method java/lang/Integer.toHexString:(I)Ljava/lang/String;
      35: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      38: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      41: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
      44: athrow
      45: aload_0
      46: invokespecial #78                 // Method readMessage:()V
      49: iload_1
      50: iconst_1
      51: if_icmpne     73
      54: aload_0
      55: getfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
      58: aload_0
      59: getfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      62: invokevirtual #72                 // Method okio/Buffer.readUtf8:()Ljava/lang/String;
      65: invokeinterface #79,  2           // InterfaceMethod okhttp3/internal/ws/WebSocketReader$FrameCallback.onReadMessage:(Ljava/lang/String;)V
      70: goto          89
      73: aload_0
      74: getfield      #13                 // Field frameCallback:Lokhttp3/internal/ws/WebSocketReader$FrameCallback;
      77: aload_0
      78: getfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      81: invokevirtual #65                 // Method okio/Buffer.readByteString:()Lokio/ByteString;
      84: invokeinterface #80,  2           // InterfaceMethod okhttp3/internal/ws/WebSocketReader$FrameCallback.onReadMessage:(Lokio/ByteString;)V
      89: return

  private void readUntilNonControlFrame() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #22                 // Field closed:Z
       4: ifne          28
       7: aload_0
       8: invokespecial #18                 // Method readHeader:()V
      11: aload_0
      12: getfield      #19                 // Field isControlFrame:Z
      15: ifne          21
      18: goto          28
      21: aload_0
      22: invokespecial #20                 // Method readControlFrame:()V
      25: goto          0
      28: return

  private void readMessage() throws java.io.IOException;
    Code:
       0: aload_0
       1: getfield      #22                 // Field closed:Z
       4: ifeq          17
       7: new           #23                 // class java/io/IOException
      10: dup
      11: ldc           #24                 // String closed
      13: invokespecial #25                 // Method java/io/IOException."<init>":(Ljava/lang/String;)V
      16: athrow
      17: aload_0
      18: getfield      #40                 // Field frameLength:J
      21: lconst_0
      22: lcmp
      23: ifle          100
      26: aload_0
      27: getfield      #12                 // Field source:Lokio/BufferedSource;
      30: aload_0
      31: getfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      34: aload_0
      35: getfield      #40                 // Field frameLength:J
      38: invokeinterface #60,  4           // InterfaceMethod okio/BufferedSource.readFully:(Lokio/Buffer;J)V
      43: aload_0
      44: getfield      #11                 // Field isClient:Z
      47: ifne          100
      50: aload_0
      51: getfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      54: aload_0
      55: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      58: invokevirtual #61                 // Method okio/Buffer.readAndWriteUnsafe:(Lokio/Buffer$UnsafeCursor;)Lokio/Buffer$UnsafeCursor;
      61: pop
      62: aload_0
      63: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      66: aload_0
      67: getfield      #6                  // Field messageFrameBuffer:Lokio/Buffer;
      70: invokevirtual #69                 // Method okio/Buffer.size:()J
      73: aload_0
      74: getfield      #40                 // Field frameLength:J
      77: lsub
      78: invokevirtual #62                 // Method okio/Buffer$UnsafeCursor.seek:(J)I
      81: pop
      82: aload_0
      83: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      86: aload_0
      87: getfield      #14                 // Field maskKey:[B
      90: invokestatic  #63                 // Method okhttp3/internal/ws/WebSocketProtocol.toggleMask:(Lokio/Buffer$UnsafeCursor;[B)V
      93: aload_0
      94: getfield      #17                 // Field maskCursor:Lokio/Buffer$UnsafeCursor;
      97: invokevirtual #64                 // Method okio/Buffer$UnsafeCursor.close:()V
     100: aload_0
     101: getfield      #33                 // Field isFinalFrame:Z
     104: ifeq          110
     107: goto          154
     110: aload_0
     111: invokespecial #81                 // Method readUntilNonControlFrame:()V
     114: aload_0
     115: getfield      #32                 // Field opcode:I
     118: ifeq          0
     121: new           #34                 // class java/net/ProtocolException
     124: dup
     125: new           #49                 // class java/lang/StringBuilder
     128: dup
     129: invokespecial #50                 // Method java/lang/StringBuilder."<init>":()V
     132: ldc           #82                 // String Expected continuation opcode. Got:
     134: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     137: aload_0
     138: getfield      #32                 // Field opcode:I
     141: invokestatic  #76                 // Method java/lang/Integer.toHexString:(I)Ljava/lang/String;
     144: invokevirtual #52                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     147: invokevirtual #55                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     150: invokespecial #36                 // Method java/net/ProtocolException."<init>":(Ljava/lang/String;)V
     153: athrow
     154: return
}

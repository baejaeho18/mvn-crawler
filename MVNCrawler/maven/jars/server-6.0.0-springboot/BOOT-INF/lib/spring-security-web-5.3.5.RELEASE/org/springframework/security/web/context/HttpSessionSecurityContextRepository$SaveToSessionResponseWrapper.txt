Compiled from "HttpSessionSecurityContextRepository.java"
final class org.springframework.security.web.context.HttpSessionSecurityContextRepository$SaveToSessionResponseWrapper extends org.springframework.security.web.context.SaveContextOnUpdateOrErrorResponseWrapper {
  private final javax.servlet.http.HttpServletRequest request;

  private final boolean httpSessionExistedAtStartOfRequest;

  private final org.springframework.security.core.context.SecurityContext contextBeforeExecution;

  private final org.springframework.security.core.Authentication authBeforeExecution;

  final org.springframework.security.web.context.HttpSessionSecurityContextRepository this$0;

  org.springframework.security.web.context.HttpSessionSecurityContextRepository$SaveToSessionResponseWrapper(org.springframework.security.web.context.HttpSessionSecurityContextRepository, javax.servlet.http.HttpServletResponse, javax.servlet.http.HttpServletRequest, boolean, org.springframework.security.core.context.SecurityContext);
    Code:
       0: aload_0
       1: aload_1
       2: putfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
       5: aload_0
       6: aload_2
       7: aload_1
       8: invokestatic  #2                  // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$000:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Z
      11: invokespecial #3                  // Method org/springframework/security/web/context/SaveContextOnUpdateOrErrorResponseWrapper."<init>":(Ljavax/servlet/http/HttpServletResponse;Z)V
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field request:Ljavax/servlet/http/HttpServletRequest;
      19: aload_0
      20: iload         4
      22: putfield      #5                  // Field httpSessionExistedAtStartOfRequest:Z
      25: aload_0
      26: aload         5
      28: putfield      #6                  // Field contextBeforeExecution:Lorg/springframework/security/core/context/SecurityContext;
      31: aload_0
      32: aload         5
      34: invokeinterface #7,  1            // InterfaceMethod org/springframework/security/core/context/SecurityContext.getAuthentication:()Lorg/springframework/security/core/Authentication;
      39: putfield      #8                  // Field authBeforeExecution:Lorg/springframework/security/core/Authentication;
      42: return

  protected void saveContext(org.springframework.security.core.context.SecurityContext);
    Code:
       0: aload_1
       1: invokeinterface #7,  1            // InterfaceMethod org/springframework/security/core/context/SecurityContext.getAuthentication:()Lorg/springframework/security/core/Authentication;
       6: astore_2
       7: aload_0
       8: getfield      #4                  // Field request:Ljavax/servlet/http/HttpServletRequest;
      11: iconst_0
      12: invokeinterface #9,  2            // InterfaceMethod javax/servlet/http/HttpServletRequest.getSession:(Z)Ljavax/servlet/http/HttpSession;
      17: astore_3
      18: aload_2
      19: ifnull        38
      22: aload_0
      23: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      26: invokestatic  #10                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$100:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Lorg/springframework/security/authentication/AuthenticationTrustResolver;
      29: aload_2
      30: invokeinterface #11,  2           // InterfaceMethod org/springframework/security/authentication/AuthenticationTrustResolver.isAnonymous:(Lorg/springframework/security/core/Authentication;)Z
      35: ifeq          92
      38: aload_0
      39: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      42: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      45: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      50: ifeq          67
      53: aload_0
      54: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      57: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      60: ldc           #14                 // String SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession.
      62: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      67: aload_3
      68: ifnull        91
      71: aload_0
      72: getfield      #8                  // Field authBeforeExecution:Lorg/springframework/security/core/Authentication;
      75: ifnull        91
      78: aload_3
      79: aload_0
      80: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      83: invokestatic  #16                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$200:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Ljava/lang/String;
      86: invokeinterface #17,  2           // InterfaceMethod javax/servlet/http/HttpSession.removeAttribute:(Ljava/lang/String;)V
      91: return
      92: aload_3
      93: ifnonnull     102
      96: aload_0
      97: aload_1
      98: invokespecial #18                 // Method createNewSessionIfAllowed:(Lorg/springframework/security/core/context/SecurityContext;)Ljavax/servlet/http/HttpSession;
     101: astore_3
     102: aload_3
     103: ifnull        199
     106: aload_0
     107: aload_1
     108: invokespecial #19                 // Method contextChanged:(Lorg/springframework/security/core/context/SecurityContext;)Z
     111: ifne          130
     114: aload_3
     115: aload_0
     116: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     119: invokestatic  #16                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$200:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Ljava/lang/String;
     122: invokeinterface #20,  2           // InterfaceMethod javax/servlet/http/HttpSession.getAttribute:(Ljava/lang/String;)Ljava/lang/Object;
     127: ifnonnull     199
     130: aload_3
     131: aload_0
     132: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     135: invokestatic  #16                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$200:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Ljava/lang/String;
     138: aload_1
     139: invokeinterface #21,  3           // InterfaceMethod javax/servlet/http/HttpSession.setAttribute:(Ljava/lang/String;Ljava/lang/Object;)V
     144: aload_0
     145: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     148: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     151: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     156: ifeq          199
     159: aload_0
     160: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     163: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     166: new           #22                 // class java/lang/StringBuilder
     169: dup
     170: invokespecial #23                 // Method java/lang/StringBuilder."<init>":()V
     173: ldc           #24                 // String SecurityContext \'
     175: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     178: aload_1
     179: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     182: ldc           #27                 // String \' stored to HttpSession: \'
     184: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     187: aload_3
     188: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     191: invokevirtual #28                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     194: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     199: return

  private boolean contextChanged(org.springframework.security.core.context.SecurityContext);
    Code:
       0: aload_1
       1: aload_0
       2: getfield      #6                  // Field contextBeforeExecution:Lorg/springframework/security/core/context/SecurityContext;
       5: if_acmpne     21
       8: aload_1
       9: invokeinterface #7,  1            // InterfaceMethod org/springframework/security/core/context/SecurityContext.getAuthentication:()Lorg/springframework/security/core/Authentication;
      14: aload_0
      15: getfield      #8                  // Field authBeforeExecution:Lorg/springframework/security/core/Authentication;
      18: if_acmpeq     25
      21: iconst_1
      22: goto          26
      25: iconst_0
      26: ireturn

  private javax.servlet.http.HttpSession createNewSessionIfAllowed(org.springframework.security.core.context.SecurityContext);
    Code:
       0: aload_0
       1: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
       4: aload_1
       5: invokeinterface #7,  1            // InterfaceMethod org/springframework/security/core/context/SecurityContext.getAuthentication:()Lorg/springframework/security/core/Authentication;
      10: invokestatic  #29                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$300:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;Lorg/springframework/security/core/Authentication;)Z
      13: ifeq          18
      16: aconst_null
      17: areturn
      18: aload_0
      19: getfield      #5                  // Field httpSessionExistedAtStartOfRequest:Z
      22: ifeq          56
      25: aload_0
      26: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      29: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      32: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      37: ifeq          54
      40: aload_0
      41: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      44: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      47: ldc           #30                 // String HttpSession is now null, but was not null at start of request; session was invalidated, so do not create a new session
      49: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
      54: aconst_null
      55: areturn
      56: aload_0
      57: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      60: invokestatic  #31                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$400:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Z
      63: ifne          123
      66: aload_0
      67: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      70: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      73: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
      78: ifeq          121
      81: aload_0
      82: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
      85: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
      88: new           #22                 // class java/lang/StringBuilder
      91: dup
      92: invokespecial #23                 // Method java/lang/StringBuilder."<init>":()V
      95: ldc           #32                 // String The HttpSession is currently null, and the
      97: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     100: ldc           #33                 // class org/springframework/security/web/context/HttpSessionSecurityContextRepository
     102: invokevirtual #34                 // Method java/lang/Class.getSimpleName:()Ljava/lang/String;
     105: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     108: ldc           #35                 // String  is prohibited from creating an HttpSession (because the allowSessionCreation property is false) - SecurityContext thus not stored for next request
     110: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     113: invokevirtual #28                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     116: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     121: aconst_null
     122: areturn
     123: aload_0
     124: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     127: invokestatic  #36                 // Method org/springframework/security/web/context/HttpSessionSecurityContextRepository.access$500:(Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;)Ljava/lang/Object;
     130: aload_1
     131: invokevirtual #37                 // Method java/lang/Object.equals:(Ljava/lang/Object;)Z
     134: ifeq          190
     137: aload_0
     138: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     141: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     144: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     149: ifeq          188
     152: aload_0
     153: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     156: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     159: new           #22                 // class java/lang/StringBuilder
     162: dup
     163: invokespecial #23                 // Method java/lang/StringBuilder."<init>":()V
     166: ldc           #38                 // String HttpSession is null, but SecurityContext has not changed from default empty context: \'
     168: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     171: aload_1
     172: invokevirtual #26                 // Method java/lang/StringBuilder.append:(Ljava/lang/Object;)Ljava/lang/StringBuilder;
     175: ldc           #39                 // String \'; not creating HttpSession or storing SecurityContext
     177: invokevirtual #25                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
     180: invokevirtual #28                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
     183: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     188: aconst_null
     189: areturn
     190: aload_0
     191: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     194: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     197: invokeinterface #13,  1           // InterfaceMethod org/apache/commons/logging/Log.isDebugEnabled:()Z
     202: ifeq          219
     205: aload_0
     206: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     209: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     212: ldc           #40                 // String HttpSession being created as SecurityContext is non-default
     214: invokeinterface #15,  2           // InterfaceMethod org/apache/commons/logging/Log.debug:(Ljava/lang/Object;)V
     219: aload_0
     220: getfield      #4                  // Field request:Ljavax/servlet/http/HttpServletRequest;
     223: iconst_1
     224: invokeinterface #9,  2            // InterfaceMethod javax/servlet/http/HttpServletRequest.getSession:(Z)Ljavax/servlet/http/HttpSession;
     229: areturn
     230: astore_2
     231: aload_0
     232: getfield      #1                  // Field this$0:Lorg/springframework/security/web/context/HttpSessionSecurityContextRepository;
     235: getfield      #12                 // Field org/springframework/security/web/context/HttpSessionSecurityContextRepository.logger:Lorg/apache/commons/logging/Log;
     238: ldc           #42                 // String Failed to create a session, as response has been committed. Unable to store SecurityContext.
     240: invokeinterface #43,  2           // InterfaceMethod org/apache/commons/logging/Log.warn:(Ljava/lang/Object;)V
     245: aconst_null
     246: areturn
    Exception table:
       from    to  target type
         219   229   230   Class java/lang/IllegalStateException
}

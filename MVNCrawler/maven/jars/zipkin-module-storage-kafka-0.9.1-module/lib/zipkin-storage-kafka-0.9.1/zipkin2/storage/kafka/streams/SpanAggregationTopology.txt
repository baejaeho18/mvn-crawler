Compiled from "SpanAggregationTopology.java"
public final class zipkin2.storage.kafka.streams.SpanAggregationTopology implements java.util.function.Supplier<org.apache.kafka.streams.Topology> {
  static final java.lang.String TRACE_AGGREGATION_STORE;

  final java.lang.String spansTopic;

  final java.lang.String traceTopic;

  final java.lang.String dependencyTopic;

  final java.time.Duration traceTimeout;

  final boolean aggregationEnabled;

  final zipkin2.storage.kafka.streams.serdes.SpansSerde spansSerde;

  final zipkin2.storage.kafka.streams.serdes.DependencyLinkSerde dependencyLinkSerde;

  public zipkin2.storage.kafka.streams.SpanAggregationTopology(java.lang.String, java.lang.String, java.lang.String, java.time.Duration, boolean);
    Code:
       0: aload_0
       1: invokespecial #1                  // Method java/lang/Object."<init>":()V
       4: aload_0
       5: aload_1
       6: putfield      #2                  // Field spansTopic:Ljava/lang/String;
       9: aload_0
      10: aload_2
      11: putfield      #3                  // Field traceTopic:Ljava/lang/String;
      14: aload_0
      15: aload_3
      16: putfield      #4                  // Field dependencyTopic:Ljava/lang/String;
      19: aload_0
      20: aload         4
      22: putfield      #5                  // Field traceTimeout:Ljava/time/Duration;
      25: aload_0
      26: iload         5
      28: putfield      #6                  // Field aggregationEnabled:Z
      31: aload_0
      32: new           #7                  // class zipkin2/storage/kafka/streams/serdes/SpansSerde
      35: dup
      36: invokespecial #8                  // Method zipkin2/storage/kafka/streams/serdes/SpansSerde."<init>":()V
      39: putfield      #9                  // Field spansSerde:Lzipkin2/storage/kafka/streams/serdes/SpansSerde;
      42: aload_0
      43: new           #10                 // class zipkin2/storage/kafka/streams/serdes/DependencyLinkSerde
      46: dup
      47: invokespecial #11                 // Method zipkin2/storage/kafka/streams/serdes/DependencyLinkSerde."<init>":()V
      50: putfield      #12                 // Field dependencyLinkSerde:Lzipkin2/storage/kafka/streams/serdes/DependencyLinkSerde;
      53: return

  public org.apache.kafka.streams.Topology get();
    Code:
       0: new           #13                 // class org/apache/kafka/streams/StreamsBuilder
       3: dup
       4: invokespecial #14                 // Method org/apache/kafka/streams/StreamsBuilder."<init>":()V
       7: astore_1
       8: aload_0
       9: getfield      #6                  // Field aggregationEnabled:Z
      12: ifeq          191
      15: aload_1
      16: aload_0
      17: getfield      #2                  // Field spansTopic:Ljava/lang/String;
      20: invokestatic  #15                 // Method org/apache/kafka/common/serialization/Serdes.String:()Lorg/apache/kafka/common/serialization/Serde;
      23: aload_0
      24: getfield      #9                  // Field spansSerde:Lzipkin2/storage/kafka/streams/serdes/SpansSerde;
      27: invokestatic  #16                 // Method org/apache/kafka/streams/kstream/Consumed.with:(Lorg/apache/kafka/common/serialization/Serde;Lorg/apache/kafka/common/serialization/Serde;)Lorg/apache/kafka/streams/kstream/Consumed;
      30: invokevirtual #17                 // Method org/apache/kafka/streams/StreamsBuilder.stream:(Ljava/lang/String;Lorg/apache/kafka/streams/kstream/Consumed;)Lorg/apache/kafka/streams/kstream/KStream;
      33: invokeinterface #18,  1           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.groupByKey:()Lorg/apache/kafka/streams/kstream/KGroupedStream;
      38: aload_0
      39: getfield      #5                  // Field traceTimeout:Ljava/time/Duration;
      42: invokestatic  #19                 // Method org/apache/kafka/streams/kstream/SessionWindows.with:(Ljava/time/Duration;)Lorg/apache/kafka/streams/kstream/SessionWindows;
      45: getstatic     #20                 // Field java/time/Duration.ZERO:Ljava/time/Duration;
      48: invokevirtual #21                 // Method org/apache/kafka/streams/kstream/SessionWindows.grace:(Ljava/time/Duration;)Lorg/apache/kafka/streams/kstream/SessionWindows;
      51: invokeinterface #22,  2           // InterfaceMethod org/apache/kafka/streams/kstream/KGroupedStream.windowedBy:(Lorg/apache/kafka/streams/kstream/SessionWindows;)Lorg/apache/kafka/streams/kstream/SessionWindowedKStream;
      56: invokedynamic #23,  0             // InvokeDynamic #0:apply:()Lorg/apache/kafka/streams/kstream/Initializer;
      61: aload_0
      62: invokevirtual #24                 // Method aggregateSpans:()Lorg/apache/kafka/streams/kstream/Aggregator;
      65: aload_0
      66: invokevirtual #25                 // Method joinAggregates:()Lorg/apache/kafka/streams/kstream/Merger;
      69: ldc           #27                 // String trace-aggregation
      71: lconst_1
      72: invokestatic  #28                 // Method java/time/Duration.ofDays:(J)Ljava/time/Duration;
      75: invokestatic  #29                 // Method org/apache/kafka/streams/state/Stores.persistentSessionStore:(Ljava/lang/String;Ljava/time/Duration;)Lorg/apache/kafka/streams/state/SessionBytesStoreSupplier;
      78: invokestatic  #30                 // Method org/apache/kafka/streams/kstream/Materialized.as:(Lorg/apache/kafka/streams/state/SessionBytesStoreSupplier;)Lorg/apache/kafka/streams/kstream/Materialized;
      81: invokestatic  #15                 // Method org/apache/kafka/common/serialization/Serdes.String:()Lorg/apache/kafka/common/serialization/Serde;
      84: invokevirtual #31                 // Method org/apache/kafka/streams/kstream/Materialized.withKeySerde:(Lorg/apache/kafka/common/serialization/Serde;)Lorg/apache/kafka/streams/kstream/Materialized;
      87: aload_0
      88: getfield      #9                  // Field spansSerde:Lzipkin2/storage/kafka/streams/serdes/SpansSerde;
      91: invokevirtual #32                 // Method org/apache/kafka/streams/kstream/Materialized.withValueSerde:(Lorg/apache/kafka/common/serialization/Serde;)Lorg/apache/kafka/streams/kstream/Materialized;
      94: invokevirtual #33                 // Method org/apache/kafka/streams/kstream/Materialized.withLoggingDisabled:()Lorg/apache/kafka/streams/kstream/Materialized;
      97: invokevirtual #34                 // Method org/apache/kafka/streams/kstream/Materialized.withCachingEnabled:()Lorg/apache/kafka/streams/kstream/Materialized;
     100: invokeinterface #35,  5           // InterfaceMethod org/apache/kafka/streams/kstream/SessionWindowedKStream.aggregate:(Lorg/apache/kafka/streams/kstream/Initializer;Lorg/apache/kafka/streams/kstream/Aggregator;Lorg/apache/kafka/streams/kstream/Merger;Lorg/apache/kafka/streams/kstream/Materialized;)Lorg/apache/kafka/streams/kstream/KTable;
     105: invokestatic  #36                 // InterfaceMethod org/apache/kafka/streams/kstream/Suppressed$BufferConfig.unbounded:()Lorg/apache/kafka/streams/kstream/Suppressed$StrictBufferConfig;
     108: invokestatic  #37                 // InterfaceMethod org/apache/kafka/streams/kstream/Suppressed.untilWindowCloses:(Lorg/apache/kafka/streams/kstream/Suppressed$StrictBufferConfig;)Lorg/apache/kafka/streams/kstream/Suppressed;
     111: invokeinterface #38,  2           // InterfaceMethod org/apache/kafka/streams/kstream/KTable.suppress:(Lorg/apache/kafka/streams/kstream/Suppressed;)Lorg/apache/kafka/streams/kstream/KTable;
     116: invokeinterface #39,  1           // InterfaceMethod org/apache/kafka/streams/kstream/KTable.toStream:()Lorg/apache/kafka/streams/kstream/KStream;
     121: invokedynamic #40,  0             // InvokeDynamic #1:apply:()Lorg/apache/kafka/streams/kstream/KeyValueMapper;
     126: invokeinterface #41,  2           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.selectKey:(Lorg/apache/kafka/streams/kstream/KeyValueMapper;)Lorg/apache/kafka/streams/kstream/KStream;
     131: astore_2
     132: aload_2
     133: aload_0
     134: getfield      #3                  // Field traceTopic:Ljava/lang/String;
     137: invokestatic  #15                 // Method org/apache/kafka/common/serialization/Serdes.String:()Lorg/apache/kafka/common/serialization/Serde;
     140: aload_0
     141: getfield      #9                  // Field spansSerde:Lzipkin2/storage/kafka/streams/serdes/SpansSerde;
     144: invokestatic  #42                 // Method org/apache/kafka/streams/kstream/Produced.with:(Lorg/apache/kafka/common/serialization/Serde;Lorg/apache/kafka/common/serialization/Serde;)Lorg/apache/kafka/streams/kstream/Produced;
     147: invokeinterface #43,  3           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.to:(Ljava/lang/String;Lorg/apache/kafka/streams/kstream/Produced;)V
     152: aload_2
     153: aload_0
     154: invokevirtual #44                 // Method spansToDependencyLinks:()Lorg/apache/kafka/streams/kstream/ValueMapper;
     157: invokeinterface #45,  2           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.flatMapValues:(Lorg/apache/kafka/streams/kstream/ValueMapper;)Lorg/apache/kafka/streams/kstream/KStream;
     162: invokedynamic #46,  0             // InvokeDynamic #2:apply:()Lorg/apache/kafka/streams/kstream/KeyValueMapper;
     167: invokeinterface #41,  2           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.selectKey:(Lorg/apache/kafka/streams/kstream/KeyValueMapper;)Lorg/apache/kafka/streams/kstream/KStream;
     172: aload_0
     173: getfield      #4                  // Field dependencyTopic:Ljava/lang/String;
     176: invokestatic  #15                 // Method org/apache/kafka/common/serialization/Serdes.String:()Lorg/apache/kafka/common/serialization/Serde;
     179: aload_0
     180: getfield      #12                 // Field dependencyLinkSerde:Lzipkin2/storage/kafka/streams/serdes/DependencyLinkSerde;
     183: invokestatic  #42                 // Method org/apache/kafka/streams/kstream/Produced.with:(Lorg/apache/kafka/common/serialization/Serde;Lorg/apache/kafka/common/serialization/Serde;)Lorg/apache/kafka/streams/kstream/Produced;
     186: invokeinterface #43,  3           // InterfaceMethod org/apache/kafka/streams/kstream/KStream.to:(Ljava/lang/String;Lorg/apache/kafka/streams/kstream/Produced;)V
     191: aload_1
     192: invokevirtual #47                 // Method org/apache/kafka/streams/StreamsBuilder.build:()Lorg/apache/kafka/streams/Topology;
     195: areturn

  org.apache.kafka.streams.kstream.Merger<java.lang.String, java.util.List<zipkin2.Span>> joinAggregates();
    Code:
       0: invokedynamic #48,  0             // InvokeDynamic #3:apply:()Lorg/apache/kafka/streams/kstream/Merger;
       5: areturn

  org.apache.kafka.streams.kstream.Aggregator<java.lang.String, java.util.List<zipkin2.Span>, java.util.List<zipkin2.Span>> aggregateSpans();
    Code:
       0: invokedynamic #49,  0             // InvokeDynamic #4:apply:()Lorg/apache/kafka/streams/kstream/Aggregator;
       5: areturn

  org.apache.kafka.streams.kstream.ValueMapper<java.util.List<zipkin2.Span>, java.util.List<zipkin2.DependencyLink>> spansToDependencyLinks();
    Code:
       0: invokedynamic #50,  0             // InvokeDynamic #5:apply:()Lorg/apache/kafka/streams/kstream/ValueMapper;
       5: areturn

  public java.lang.Object get();
    Code:
       0: aload_0
       1: invokevirtual #51                 // Method get:()Lorg/apache/kafka/streams/Topology;
       4: areturn

  private static java.util.List lambda$spansToDependencyLinks$4(java.util.List);
    Code:
       0: aload_0
       1: ifnonnull     12
       4: new           #52                 // class java/util/ArrayList
       7: dup
       8: invokespecial #53                 // Method java/util/ArrayList."<init>":()V
      11: areturn
      12: new           #54                 // class zipkin2/internal/DependencyLinker
      15: dup
      16: invokespecial #55                 // Method zipkin2/internal/DependencyLinker."<init>":()V
      19: astore_1
      20: aload_1
      21: aload_0
      22: invokevirtual #56                 // Method zipkin2/internal/DependencyLinker.putTrace:(Ljava/util/List;)Lzipkin2/internal/DependencyLinker;
      25: invokevirtual #57                 // Method zipkin2/internal/DependencyLinker.link:()Ljava/util/List;
      28: areturn

  private static java.util.List lambda$aggregateSpans$3(java.lang.String, java.util.List, java.util.List);
    Code:
       0: aload_2
       1: aload_1
       2: invokeinterface #58,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
       7: pop
       8: aload_2
       9: invokestatic  #59                 // Method zipkin2/internal/Trace.merge:(Ljava/util/List;)Ljava/util/List;
      12: areturn

  private static java.util.List lambda$joinAggregates$2(java.lang.String, java.util.List, java.util.List);
    Code:
       0: aload_1
       1: aload_2
       2: invokeinterface #58,  2           // InterfaceMethod java/util/List.addAll:(Ljava/util/Collection;)Z
       7: pop
       8: aload_1
       9: invokestatic  #59                 // Method zipkin2/internal/Trace.merge:(Ljava/util/List;)Ljava/util/List;
      12: areturn

  private static java.lang.String lambda$get$1(java.lang.String, zipkin2.DependencyLink);
    Code:
       0: aload_1
       1: invokestatic  #60                 // Method zipkin2/storage/kafka/streams/serdes/DependencyLinkSerde.linkKey:(Lzipkin2/DependencyLink;)Ljava/lang/String;
       4: areturn

  private static java.lang.String lambda$get$0(org.apache.kafka.streams.kstream.Windowed, java.util.List);
    Code:
       0: aload_0
       1: invokevirtual #61                 // Method org/apache/kafka/streams/kstream/Windowed.key:()Ljava/lang/Object;
       4: checkcast     #62                 // class java/lang/String
       7: areturn
}
